{# ARK default page layout with default navbar, sidebar, and content sections #}

{% block homeaction %}

    <div class="row dimehometoolbar">
        <div class="col-md-3 dimehome dimehometool" >
            {{ 'dime.home.welcome' | trans({ '%name%': global.user.displayName }) }}
        </div>
        <div class="col-md-3 dimehome dimehometool" >

        {% if data.notifications|length %}
            {%  set notificationicon = 'icon-new-notification small wide' %}
        {% else %}
            {%  set notificationicon = 'icon-notification small' %}
        {% endif %}

            <a data-toggle="dropdown" class="dropdown-toggle" href="">
                {{ "core.message.messages" | translate }}
                <span class="dime-icon dimehometool-icon {{ notificationicon }} "></span>
            </a>
            <div class="dropdown-menu messages">
                <span class="notification-dropdown-header">
                    <span class="count">
                            {{ data.notifications|length }}
                    </span>
                    {{ "core.message.newmessages" | translate }}
                </span>
                <ul class="list-group">
                    {% for notification in data.notifications[0:5] %}
                        <li>
                            {% include "blocks/notification.html.twig" with {'notification': notification} %}
                        </li>
                    {% endfor %}
                </ul>
                {% if data.notifications|length > 5 %}
                    <div class="notification-dropdown-info">
                        <a href = " {{ path( 'home.messages' ) }}">
                            {{ data.notifications|length-5 }} {{ 'core.message.notshown' | translate }}
                        </a>
                    </div>
                {% endif %}
                <span class="notification-dropdown-footer">
                    <a href = " {{ path( 'home.messages' ) }}">
                        {{ "core.message.allmessages" | translate }}
                   </a>
                </span>
            </div>
        </div>
        <div class="col-md-3 dimehome dimehometool" >
            <a href="{{ path("finds.add") }}">
                {{ "dime.find.add" | translate }}
                <span class="dime-icon dimehometool-icon icon-add small"></span>
            </a>
        </div>
        <div class="col-md-3 dimehome dimehometool" >
            {% include "blocks/link.html.twig" with {'link':
                           {"name": "dime.search.finds.mine",
                           "active": true,
                           "target": "finds.list"} } %}
        </div>
    </div>

{% endblock homeaction %}
