{# ARK default page layout with default navbar, sidebar, and content sections #}

{% use "blocks/carousel.html.twig" %}
{% use "blocks/linkitem.html.twig" %}

{% block homepage %}

 {% if global.user %}
     <div class="row">
        <div class="col-md-3 dimehome dimehometool" >
            {{ 'dime.home.welcome' | translate }}
        </div>
        <div class="col-md-3 dimehome dimehometool" >
            {{ 'dime.home.alarm' | translate }}
        </div>
        <div class="col-md-3 dimehome dimehometool" >
        <ul class="list-group dime-navlist">
            <li class="list-group-item dime-listhead normal">
                <span class="dime-icon icon-add normal"></span>
                {% include "blocks/linkitem.html.twig" with {'link':
                            {"name": "dime.find.add",
                            "active": true,
                            "target": "finds.add"} } %}
            </li>
        </ul>
        </div>
        <div class="col-md-3 dimehome dimehometool" >
           {% include "blocks/linkitem.html.twig" with {'link':
                            {"name": "dime.search.finds.mine",
                            "active": true,
                            "target": "finds.list"} } %}
        </div>

    </div>
     <div class="row">
         <div class="col-md-6">
            {% include "layouts/table.html.twig" with {'data': data } %}
        </div>
        <div class="col-md-6">
            <link rel="stylesheet" href="https://openlayers.org/en/v3.20.1/css/ol.css" type="text/css">
            <div id="map" class="map search_map"></div>
             <div>
                <button class="btn btn-default dropdown-toggle layer-select" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                <span class="dime-icon icon-map small"></span>
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu layer-select" aria-labelledby="dropdownMenu1">
                <li><a class="layer-select" value="Aerial">Aerial</a></li>
                <li><a class="layer-select" value="AerialWithLabels" selected>Aerial with labels</a></li>
                <li><a class="layer-select" value="Road">Road</a></li>
              </ul>
            </div>
            <script src="https://openlayers.org/en/v3.20.1/build/ol.js"></script>
            <script>

                ywkts = [];
                {% for item in data[layout.name] %}
                    {% for field in layout.elements %}
                        {% if field.name == 'dime_find_findpoint' %}
                            {% if field.renderView(item) %}
                                ywkts[{{ item.id }}] = '{{ field.renderView(item) }}',
                            {% else %}
                                  'POINT (0 0)',
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                {% endfor %}

                twkts = [];

            </script>
        </div>
    </div>
 {% else %}
    <script src="https://openlayers.org/en/v3.20.1/build/ol.js"></script>
    <script>
        ywkts = [];
        twkts = [];
    </script>
    <div class="row">
        <div class="col-md-6 col-md-push-3 dimehome banner" >
            {{ 'dime.home.hvert' | translate }}
        </div>
    </div>
    <div class="row dimehome">
        <div class="col-md-6 col-md-push-3">
            {% include "blocks/carousel.html.twig" with {'data': data['dime_find_home']} %}
        </div>
        <div class="col-md-2 col-md-push-4">
            <div class="redtext">
                {{ 'dime.home.faq' | translate | raw }}
            </div>
        </div>
    </div>
    <div class="row dimehome">
        <form class="search">
            <input type="text" class="form-control" placeholder="{{ 'search.placeholder' | trans }}">
            <button type="submit">
                <span class="dime-icon icon-search small"></span>
            </button>
        </form>
    </div>
 {% endif %}

{% endblock %}
