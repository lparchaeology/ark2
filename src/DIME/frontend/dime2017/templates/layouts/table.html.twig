{# Standard table layout using only HTML5/Bootstrap #}

<div class='table-wrapper-div'>

    {% set table_class = 'table bootstrap-table table-hover dime-table' %}
    {% set items = data.items %}

    <table
        id="{{element.id}}"
        class="{{table_class}}"
        data-toggle="table"
        data-classes="{{table_class}}"
        data-sort-name="id"
        {#data-show-refresh="true"#}
        data-show-toggle="true"
        data-show-columns="true"
        data-mobile-responsive="true"
        data-show-export="true"
        data-switchcardview="true"
        data-click-to-select="true"
        icons = "{ columns: 'glyphicon-th-list icon-th-list' }"
    >

        <thead>
            <tr>
                <th class="checkedhead" data-field="checked" data-sortable="false" data-switchable="false" data-card-visible="false"></th>
                {% if items[0] is defined and items[0].hasAttribute(state.image) %}
                    <th class="thumbimagehead" data-field="{{ state.image }}" data-title="{{ state.image }}" data-sortable="false"></th>
                {% endif %}
                {% for child in children %}
                    <th data-field="{{ child.element.id }}" data-title="{{ child.state.keyword | translate }}" data-sortable="true" data-sorter="alphanum" data-visible="{{ child.state.visible }}" data-card-visible="false">
                        {{ child.state.keyword | translate }}
                    </th>
                {% endfor %}
                <th class="controlshead" data-field="controls" data-sortable="false" data-switchable="false" data-card-visible="false"></th>
            </tr>
        </thead>

        <tbody>
            {% for item in items %}
                <tr data-unique-id = "{{ item.id }}" >
                    <td class="not-card-visible"><span class="tablecheckbox glyphicon glyphicon-unchecked"></span></td>
                    {% if item.hasAttribute(state.image) %}
                        <td class="thumbimage">
                            {% set image = item.property(state.image).value() %}
                            {% if image is not empty %}
                                {% if item.property(state.image).attribute.hasMultipleOccurrences %}
                                    {% set image = image[0] %}
                                {% endif %}
                                <img src="{{path('img', {'image': image.id}) ~ '?p=thumb'}}" alt='' />
                            {% else %}
                                <span class="glyphicon glyphicon-picture placeholder-img"></span>
                            {% endif %}
                        </td>
                    {% endif %}
                    {% for child in children %}
                        {% set child = child | merge({'data' : item.property(child.state.name) }) %}
                        <td>
                            <span class="cell-label">{{ child.state.keyword | translate }}</span>
                            {{ child.element.renderView(child, forms, form) | raw }}
                        </td>
                    {% endfor %}
                    <td class="controls">
                        <span class="cell-label">{{ 'dime.controls'|trans }}</span>
                        {% if state.controls.actor is defined and state.controls.actor %}
                            <a href="#" class="open-focus">
                                <span class="dime-icon icon-user-focus small"></span>
                            </a>
                        {% endif %}
                        <a href="{{ path(state.modules[item.schema.module.id].route, {'id': item.id}) }}">
                            <span class="glyphicon glyphicon-file"></span>
                        </a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>

    </table>

</div>

<script>
window.itemkey =
    {% if items[0] is defined %}
        "{{ items[0].schema.module.id }}";
    {% else %}
        {{null}}
    {% endif %}

window.itemlist = [
    {% if items|length > 0 %}
        {% for item in items %}
            "{{ item.id }}",
        {% endfor %}
    {% else %}
            false
     {% endif %}
];
if(typeof window.translations == 'undefined'){
    window.translations = [];
}
window.translations['dime.user.update.success'] = "{{ 'dime.user.update.success' | trans }}";
window.translations['dime.user.update.failure'] = "{{ 'dime.user.update.failure' | trans }}"

</script>
