{% use "bootstrap_3_horizontal_layout.html.twig" %}

{% block form_label_class -%}
col-sm-4
{%- endblock form_label_class %}

{# Fix nested blank labels, see https://github.com/symfony/symfony/pull/19247 #}
{% block form_label -%}
    {% spaceless %}
        {% if label is not same as(false) %}
            {% set label_attr = label_attr|merge({class: (label_attr.class|default('') ~ ' ' ~ block('form_label_class'))|trim}) %}
            {{- parent() -}}
        {% endif %}
    {% endspaceless %}
{%- endblock form_label %}

{# Fix nested blank labels, see https://github.com/symfony/symfony/pull/19247 #}
{% block form_group_class -%}
    {%- if label is same as(false) -%}
        col-sm-12
    {%- else -%}
        col-sm-8 col-lg-7
    {%- endif -%}
{%- endblock form_group_class %}

{# Custom blocks #}

{% block static_widget -%}
    {% if value is empty %}
        &nbsp;
    {% elseif value is iterable %}
        {% set out = '' %}
        {% set sep = '' %}
        {% for val in value %}
            {% set out = out ~ sep ~ val|translate %}
            {% set sep = '<br />' %}
        {% endfor %}
        {{ out|raw }}
    {% else %}
        {{ value|translate }}
    {% endif %}
{%- endblock static_widget %}

{% block measurement_widget -%}
    <div class="input-group">
        {{- form_widget(form['measurement']) -}}
        <div class="input-group-btn">
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Units <span class="caret"></span></button>
            <ul class="dropdown-menu dropdown-menu-right">
                <li "value" = "g">Grams</li>
                <li "value" = "kg">Kilgrams</li>
            </ul>
         </div>
    </div>
{%- endblock measurement_widget %}

{% block checkbox_widget %}
    {% spaceless %}
        <div class="checkbox">
            <input type="checkbox" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />
            <label for="{{ id }}"><span class="checkboxlabel">{{ label|trans({}, translation_domain) }}</span></label>
        </div>
    {% endspaceless %}
{% endblock checkbox_widget %}
