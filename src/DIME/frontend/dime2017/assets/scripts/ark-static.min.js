(function(e,t){"use strict";if(typeof module==="object"&&typeof module.exports==="object"){module.exports=e.document?t(e,true):function(e){if(!e.document){throw new Error("jQuery requires a window with a document")}return t(e)}}else{t(e)}})(typeof window!=="undefined"?window:this,function(e,t){"use strict";var n=[];var i=e.document;var o=Object.getPrototypeOf;var r=n.slice;var a=n.concat;var s=n.push;var l=n.indexOf;var u={};var c=u.toString;var f=u.hasOwnProperty;var d=f.toString;var h=d.call(Object);var p={};var v=function e(t){return typeof t==="function"&&typeof t.nodeType!=="number"};var m=function e(t){return t!=null&&t===t.window};var g={type:true,src:true,noModule:true};function b(e,t,n){t=t||i;var o,r=t.createElement("script");r.text=e;if(n){for(o in g){if(n[o]){r[o]=n[o]}}}t.head.appendChild(r).parentNode.removeChild(r)}function y(e){if(e==null){return e+""}return typeof e==="object"||typeof e==="function"?u[c.call(e)]||"object":typeof e}var w="3.3.1",x=function(e,t){return new x.fn.init(e,t)},C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;x.fn=x.prototype={jquery:w,constructor:x,length:0,toArray:function(){return r.call(this)},get:function(e){if(e==null){return r.call(this)}return e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=x.merge(this.constructor(),e);t.prevObject=this;return t},each:function(e){return x.each(this,e)},map:function(e){return this.pushStack(x.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice};x.extend=x.fn.extend=function(){var e,t,n,i,o,r,a=arguments[0]||{},s=1,l=arguments.length,u=false;if(typeof a==="boolean"){u=a;a=arguments[s]||{};s++}if(typeof a!=="object"&&!v(a)){a={}}if(s===l){a=this;s--}for(;s<l;s++){if((e=arguments[s])!=null){for(t in e){n=a[t];i=e[t];if(a===i){continue}if(u&&i&&(x.isPlainObject(i)||(o=Array.isArray(i)))){if(o){o=false;r=n&&Array.isArray(n)?n:[]}else{r=n&&x.isPlainObject(n)?n:{}}a[t]=x.extend(u,r,i)}else if(i!==undefined){a[t]=i}}}}return a};x.extend({expando:"jQuery"+(w+Math.random()).replace(/\D/g,""),isReady:true,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;if(!e||c.call(e)!=="[object Object]"){return false}t=o(e);if(!t){return true}n=f.call(t,"constructor")&&t.constructor;return typeof n==="function"&&d.call(n)===h},isEmptyObject:function(e){var t;for(t in e){return false}return true},globalEval:function(e){b(e)},each:function(e,t){var n,i=0;if(k(e)){n=e.length;for(;i<n;i++){if(t.call(e[i],i,e[i])===false){break}}}else{for(i in e){if(t.call(e[i],i,e[i])===false){break}}}return e},trim:function(e){return e==null?"":(e+"").replace(C,"")},makeArray:function(e,t){var n=t||[];if(e!=null){if(k(Object(e))){x.merge(n,typeof e==="string"?[e]:e)}else{s.call(n,e)}}return n},inArray:function(e,t,n){return t==null?-1:l.call(t,e,n)},merge:function(e,t){var n=+t.length,i=0,o=e.length;for(;i<n;i++){e[o++]=t[i]}e.length=o;return e},grep:function(e,t,n){var i,o=[],r=0,a=e.length,s=!n;for(;r<a;r++){i=!t(e[r],r);if(i!==s){o.push(e[r])}}return o},map:function(e,t,n){var i,o,r=0,s=[];if(k(e)){i=e.length;for(;r<i;r++){o=t(e[r],r,n);if(o!=null){s.push(o)}}}else{for(r in e){o=t(e[r],r,n);if(o!=null){s.push(o)}}}return a.apply([],s)},guid:1,support:p});if(typeof Symbol==="function"){x.fn[Symbol.iterator]=n[Symbol.iterator]}x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){u["[object "+t+"]"]=t.toLowerCase()});function k(e){var t=!!e&&"length"in e&&e.length,n=y(e);if(v(e)||m(e)){return false}return n==="array"||t===0||typeof t==="number"&&t>0&&t-1 in e}var T=function(e){var t,n,i,o,r,a,s,l,u,c,f,d,h,p,v,m,g,b,y,w="sizzle"+1*new Date,x=e.document,C=0,k=0,T=ae(),S=ae(),E=ae(),N=function(e,t){if(e===t){f=true}return 0},$={}.hasOwnProperty,A=[],I=A.pop,D=A.push,R=A.push,L=A.slice,O=function(e,t){var n=0,i=e.length;for(;n<i;n++){if(e[n]===t){return n}}return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",H="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",j="\\["+H+"*("+F+")(?:"+H+"*([*^$|!~]?=)"+H+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+H+"*\\]",M=":("+F+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|"+".*"+")\\)|)",B=new RegExp(H+"+","g"),z=new RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),q=new RegExp("^"+H+"*,"+H+"*"),U=new RegExp("^"+H+"*([>+~]|"+H+")"+H+"*"),K=new RegExp("="+H+"*([^\\]'\"]*?)"+H+"*\\]","g"),W=new RegExp(M),_=new RegExp("^"+F+"$"),V={ID:new RegExp("^#("+F+")"),CLASS:new RegExp("^\\.("+F+")"),TAG:new RegExp("^("+F+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+M),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+H+"?|("+H+")|.)","ig"),ee=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,i&1023|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){if(t){if(e==="\0"){return"ï¿½"}return e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" "}return"\\"+e},ie=function(){d()},oe=be(function(e){return e.disabled===true&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{R.apply(A=L.call(x.childNodes),x.childNodes);A[x.childNodes.length].nodeType}catch(e){R={apply:A.length?function(e,t){D.apply(e,L.call(t))}:function(e,t){var n=e.length,i=0;while(e[n++]=t[i++]){}e.length=n-1}}}function re(e,t,i,o){var r,s,u,c,f,p,g,b=t&&t.ownerDocument,C=t?t.nodeType:9;i=i||[];if(typeof e!=="string"||!e||C!==1&&C!==9&&C!==11){return i}if(!o){if((t?t.ownerDocument||t:x)!==h){d(t)}t=t||h;if(v){if(C!==11&&(f=Y.exec(e))){if(r=f[1]){if(C===9){if(u=t.getElementById(r)){if(u.id===r){i.push(u);return i}}else{return i}}else{if(b&&(u=b.getElementById(r))&&y(t,u)&&u.id===r){i.push(u);return i}}}else if(f[2]){R.apply(i,t.getElementsByTagName(e));return i}else if((r=f[3])&&n.getElementsByClassName&&t.getElementsByClassName){R.apply(i,t.getElementsByClassName(r));return i}}if(n.qsa&&!E[e+" "]&&(!m||!m.test(e))){if(C!==1){b=t;g=e}else if(t.nodeName.toLowerCase()!=="object"){if(c=t.getAttribute("id")){c=c.replace(te,ne)}else{t.setAttribute("id",c=w)}p=a(e);s=p.length;while(s--){p[s]="#"+c+" "+ge(p[s])}g=p.join(",");b=J.test(e)&&ve(t.parentNode)||t}if(g){try{R.apply(i,b.querySelectorAll(g));return i}catch(e){}finally{if(c===w){t.removeAttribute("id")}}}}}}return l(e.replace(z,"$1"),t,i,o)}function ae(){var e=[];function t(n,o){if(e.push(n+" ")>i.cacheLength){delete t[e.shift()]}return t[n+" "]=o}return t}function se(e){e[w]=true;return e}function le(e){var t=h.createElement("fieldset");try{return!!e(t)}catch(e){return false}finally{if(t.parentNode){t.parentNode.removeChild(t)}t=null}}function ue(e,t){var n=e.split("|"),o=n.length;while(o--){i.attrHandle[n[o]]=t}}function ce(e,t){var n=t&&e,i=n&&e.nodeType===1&&t.nodeType===1&&e.sourceIndex-t.sourceIndex;if(i){return i}if(n){while(n=n.nextSibling){if(n===t){return-1}}}return e?1:-1}function fe(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function de(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function he(e){return function(t){if("form"in t){if(t.parentNode&&t.disabled===false){if("label"in t){if("label"in t.parentNode){return t.parentNode.disabled===e}else{return t.disabled===e}}return t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e}return t.disabled===e}else if("label"in t){return t.disabled===e}return false}}function pe(e){return se(function(t){t=+t;return se(function(n,i){var o,r=e([],n.length,t),a=r.length;while(a--){if(n[o=r[a]]){n[o]=!(i[o]=n[o])}}})})}function ve(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}n=re.support={};r=re.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":false};d=re.setDocument=function(e){var t,o,a=e?e.ownerDocument||e:x;if(a===h||a.nodeType!==9||!a.documentElement){return h}h=a;p=h.documentElement;v=!r(h);if(x!==h&&(o=h.defaultView)&&o.top!==o){if(o.addEventListener){o.addEventListener("unload",ie,false)}else if(o.attachEvent){o.attachEvent("onunload",ie)}}n.attributes=le(function(e){e.className="i";return!e.getAttribute("className")});n.getElementsByTagName=le(function(e){e.appendChild(h.createComment(""));return!e.getElementsByTagName("*").length});n.getElementsByClassName=X.test(h.getElementsByClassName);n.getById=le(function(e){p.appendChild(e).id=w;return!h.getElementsByName||!h.getElementsByName(w).length});if(n.getById){i.filter["ID"]=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}};i.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&v){var n=t.getElementById(e);return n?[n]:[]}}}else{i.filter["ID"]=function(e){var t=e.replace(Z,ee);return function(e){var n=typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id");return n&&n.value===t}};i.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&v){var n,i,o,r=t.getElementById(e);if(r){n=r.getAttributeNode("id");if(n&&n.value===e){return[r]}o=t.getElementsByName(e);i=0;while(r=o[i++]){n=r.getAttributeNode("id");if(n&&n.value===e){return[r]}}}return[]}}}i.find["TAG"]=n.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!=="undefined"){return t.getElementsByTagName(e)}else if(n.qsa){return t.querySelectorAll(e)}}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if(e==="*"){while(n=r[o++]){if(n.nodeType===1){i.push(n)}}return i}return r};i.find["CLASS"]=n.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!=="undefined"&&v){return t.getElementsByClassName(e)}};g=[];m=[];if(n.qsa=X.test(h.querySelectorAll)){le(function(e){p.appendChild(e).innerHTML="<a id='"+w+"'></a>"+"<select id='"+w+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(e.querySelectorAll("[msallowcapture^='']").length){m.push("[*^$]="+H+"*(?:''|\"\")")}if(!e.querySelectorAll("[selected]").length){m.push("\\["+H+"*(?:value|"+P+")")}if(!e.querySelectorAll("[id~="+w+"-]").length){m.push("~=")}if(!e.querySelectorAll(":checked").length){m.push(":checked")}if(!e.querySelectorAll("a#"+w+"+*").length){m.push(".#.+[+~]")}});le(function(e){e.innerHTML="<a href='' disabled='disabled'></a>"+"<select disabled='disabled'><option/></select>";var t=h.createElement("input");t.setAttribute("type","hidden");e.appendChild(t).setAttribute("name","D");if(e.querySelectorAll("[name=d]").length){m.push("name"+H+"*[*^$|!~]?=")}if(e.querySelectorAll(":enabled").length!==2){m.push(":enabled",":disabled")}p.appendChild(e).disabled=true;if(e.querySelectorAll(":disabled").length!==2){m.push(":enabled",":disabled")}e.querySelectorAll("*,:x");m.push(",.*:")})}if(n.matchesSelector=X.test(b=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector)){le(function(e){n.disconnectedMatch=b.call(e,"*");b.call(e,"[s!='']:x");g.push("!=",M)})}m=m.length&&new RegExp(m.join("|"));g=g.length&&new RegExp(g.join("|"));t=X.test(p.compareDocumentPosition);y=t||X.test(p.contains)?function(e,t){var n=e.nodeType===9?e.documentElement:e,i=t&&t.parentNode;return e===i||!!(i&&i.nodeType===1&&(n.contains?n.contains(i):e.compareDocumentPosition&&e.compareDocumentPosition(i)&16))}:function(e,t){if(t){while(t=t.parentNode){if(t===e){return true}}}return false};N=t?function(e,t){if(e===t){f=true;return 0}var i=!e.compareDocumentPosition-!t.compareDocumentPosition;if(i){return i}i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1;if(i&1||!n.sortDetached&&t.compareDocumentPosition(e)===i){if(e===h||e.ownerDocument===x&&y(x,e)){return-1}if(t===h||t.ownerDocument===x&&y(x,t)){return 1}return c?O(c,e)-O(c,t):0}return i&4?-1:1}:function(e,t){if(e===t){f=true;return 0}var n,i=0,o=e.parentNode,r=t.parentNode,a=[e],s=[t];if(!o||!r){return e===h?-1:t===h?1:o?-1:r?1:c?O(c,e)-O(c,t):0}else if(o===r){return ce(e,t)}n=e;while(n=n.parentNode){a.unshift(n)}n=t;while(n=n.parentNode){s.unshift(n)}while(a[i]===s[i]){i++}return i?ce(a[i],s[i]):a[i]===x?-1:s[i]===x?1:0};return h};re.matches=function(e,t){return re(e,null,null,t)};re.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h){d(e)}t=t.replace(K,"='$1']");if(n.matchesSelector&&v&&!E[t+" "]&&(!g||!g.test(t))&&(!m||!m.test(t))){try{var i=b.call(e,t);if(i||n.disconnectedMatch||e.document&&e.document.nodeType!==11){return i}}catch(e){}}return re(t,h,null,[e]).length>0};re.contains=function(e,t){if((e.ownerDocument||e)!==h){d(e)}return y(e,t)};re.attr=function(e,t){if((e.ownerDocument||e)!==h){d(e)}var o=i.attrHandle[t.toLowerCase()],r=o&&$.call(i.attrHandle,t.toLowerCase())?o(e,t,!v):undefined;return r!==undefined?r:n.attributes||!v?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null};re.escape=function(e){return(e+"").replace(te,ne)};re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};re.uniqueSort=function(e){var t,i=[],o=0,r=0;f=!n.detectDuplicates;c=!n.sortStable&&e.slice(0);e.sort(N);if(f){while(t=e[r++]){if(t===e[r]){o=i.push(r)}}while(o--){e.splice(i[o],1)}}c=null;return e};o=re.getText=function(e){var t,n="",i=0,r=e.nodeType;if(!r){while(t=e[i++]){n+=o(t)}}else if(r===1||r===9||r===11){if(typeof e.textContent==="string"){return e.textContent}else{for(e=e.firstChild;e;e=e.nextSibling){n+=o(e)}}}else if(r===3||r===4){return e.nodeValue}return n};i=re.selectors={cacheLength:50,createPseudo:se,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(Z,ee);e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){re.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+(e[7]+e[8]||e[3]==="odd")}else if(e[3]){re.error(e[0])}return e},PSEUDO:function(e){var t,n=!e[6]&&e[2];if(V["CHILD"].test(e[0])){return null}if(e[3]){e[2]=e[4]||e[5]||""}else if(n&&W.test(n)&&(t=a(n,true))&&(t=n.indexOf(")",n.length-t)-n.length)){e[0]=e[0].slice(0,t);e[2]=n.slice(0,t)}return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return e==="*"?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+H+")"+e+"("+H+"|$)"))&&T(e,function(e){return t.test(typeof e.className==="string"&&e.className||typeof e.getAttribute!=="undefined"&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var o=re.attr(i,e);if(o==null){return t==="!="}if(!t){return true}o+="";return t==="="?o===n:t==="!="?o!==n:t==="^="?n&&o.indexOf(n)===0:t==="*="?n&&o.indexOf(n)>-1:t==="$="?n&&o.slice(-n.length)===n:t==="~="?(" "+o.replace(B," ")+" ").indexOf(n)>-1:t==="|="?o===n||o.slice(0,n.length+1)===n+"-":false}},CHILD:function(e,t,n,i,o){var r=e.slice(0,3)!=="nth",a=e.slice(-4)!=="last",s=t==="of-type";return i===1&&o===0?function(e){return!!e.parentNode}:function(t,n,l){var u,c,f,d,h,p,v=r!==a?"nextSibling":"previousSibling",m=t.parentNode,g=s&&t.nodeName.toLowerCase(),b=!l&&!s,y=false;if(m){if(r){while(v){d=t;while(d=d[v]){if(s?d.nodeName.toLowerCase()===g:d.nodeType===1){return false}}p=v=e==="only"&&!p&&"nextSibling"}return true}p=[a?m.firstChild:m.lastChild];if(a&&b){d=m;f=d[w]||(d[w]={});c=f[d.uniqueID]||(f[d.uniqueID]={});u=c[e]||[];h=u[0]===C&&u[1];y=h&&u[2];d=h&&m.childNodes[h];while(d=++h&&d&&d[v]||(y=h=0)||p.pop()){if(d.nodeType===1&&++y&&d===t){c[e]=[C,h,y];break}}}else{if(b){d=t;f=d[w]||(d[w]={});c=f[d.uniqueID]||(f[d.uniqueID]={});u=c[e]||[];h=u[0]===C&&u[1];y=h}if(y===false){while(d=++h&&d&&d[v]||(y=h=0)||p.pop()){if((s?d.nodeName.toLowerCase()===g:d.nodeType===1)&&++y){if(b){f=d[w]||(d[w]={});c=f[d.uniqueID]||(f[d.uniqueID]={});c[e]=[C,y]}if(d===t){break}}}}}y-=o;return y===i||y%i===0&&y/i>=0}}},PSEUDO:function(e,t){var n,o=i.pseudos[e]||i.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);if(o[w]){return o(t)}if(o.length>1){n=[e,e,"",t];return i.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,n){var i,r=o(e,t),a=r.length;while(a--){i=O(e,r[a]);e[i]=!(n[i]=r[a])}}):function(e){return o(e,0,n)}}return o}},pseudos:{not:se(function(e){var t=[],n=[],i=s(e.replace(z,"$1"));return i[w]?se(function(e,t,n,o){var r,a=i(e,null,o,[]),s=e.length;while(s--){if(r=a[s]){e[s]=!(t[s]=r)}}}):function(e,o,r){t[0]=e;i(t,null,r,n);t[0]=null;return!n.pop()}}),has:se(function(e){return function(t){return re(e,t).length>0}}),contains:se(function(e){e=e.replace(Z,ee);return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),lang:se(function(e){if(!_.test(e||"")){re.error("unsupported lang: "+e)}e=e.replace(Z,ee).toLowerCase();return function(t){var n;do{if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang")){n=n.toLowerCase();return n===e||n.indexOf(e+"-")===0}}while((t=t.parentNode)&&t.nodeType===1);return false}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:he(false),disabled:he(true),checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},parent:function(e){return!i.pseudos["empty"](e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,n){return[n<0?n+t:n]}),even:pe(function(e,t){var n=0;for(;n<t;n+=2){e.push(n)}return e}),odd:pe(function(e,t){var n=1;for(;n<t;n+=2){e.push(n)}return e}),lt:pe(function(e,t,n){var i=n<0?n+t:n;for(;--i>=0;){e.push(i)}return e}),gt:pe(function(e,t,n){var i=n<0?n+t:n;for(;++i<t;){e.push(i)}return e})}};i.pseudos["nth"]=i.pseudos["eq"];for(t in{radio:true,checkbox:true,file:true,password:true,image:true}){i.pseudos[t]=fe(t)}for(t in{submit:true,reset:true}){i.pseudos[t]=de(t)}function me(){}me.prototype=i.filters=i.pseudos;i.setFilters=new me;a=re.tokenize=function(e,t){var n,o,r,a,s,l,u,c=S[e+" "];if(c){return t?0:c.slice(0)}s=e;l=[];u=i.preFilter;while(s){if(!n||(o=q.exec(s))){if(o){s=s.slice(o[0].length)||s}l.push(r=[])}n=false;if(o=U.exec(s)){n=o.shift();r.push({value:n,type:o[0].replace(z," ")});s=s.slice(n.length)}for(a in i.filter){if((o=V[a].exec(s))&&(!u[a]||(o=u[a](o)))){n=o.shift();r.push({value:n,type:a,matches:o});s=s.slice(n.length)}}if(!n){break}}return t?s.length:s?re.error(e):S(e,l).slice(0)};function ge(e){var t=0,n=e.length,i="";for(;t<n;t++){i+=e[t].value}return i}function be(e,t,n){var i=t.dir,o=t.next,r=o||i,a=n&&r==="parentNode",s=k++;return t.first?function(t,n,o){while(t=t[i]){if(t.nodeType===1||a){return e(t,n,o)}}return false}:function(t,n,l){var u,c,f,d=[C,s];if(l){while(t=t[i]){if(t.nodeType===1||a){if(e(t,n,l)){return true}}}}else{while(t=t[i]){if(t.nodeType===1||a){f=t[w]||(t[w]={});c=f[t.uniqueID]||(f[t.uniqueID]={});if(o&&o===t.nodeName.toLowerCase()){t=t[i]||t}else if((u=c[r])&&u[0]===C&&u[1]===s){return d[2]=u[2]}else{c[r]=d;if(d[2]=e(t,n,l)){return true}}}}}return false}}function ye(e){return e.length>1?function(t,n,i){var o=e.length;while(o--){if(!e[o](t,n,i)){return false}}return true}:e[0]}function we(e,t,n){var i=0,o=t.length;for(;i<o;i++){re(e,t[i],n)}return n}function xe(e,t,n,i,o){var r,a=[],s=0,l=e.length,u=t!=null;for(;s<l;s++){if(r=e[s]){if(!n||n(r,i,o)){a.push(r);if(u){t.push(s)}}}}return a}function Ce(e,t,n,i,o,r){if(i&&!i[w]){i=Ce(i)}if(o&&!o[w]){o=Ce(o,r)}return se(function(r,a,s,l){var u,c,f,d=[],h=[],p=a.length,v=r||we(t||"*",s.nodeType?[s]:s,[]),m=e&&(r||!t)?xe(v,d,e,s,l):v,g=n?o||(r?e:p||i)?[]:a:m;if(n){n(m,g,s,l)}if(i){u=xe(g,h);i(u,[],s,l);c=u.length;while(c--){if(f=u[c]){g[h[c]]=!(m[h[c]]=f)}}}if(r){if(o||e){if(o){u=[];c=g.length;while(c--){if(f=g[c]){u.push(m[c]=f)}}o(null,g=[],u,l)}c=g.length;while(c--){if((f=g[c])&&(u=o?O(r,f):d[c])>-1){r[u]=!(a[u]=f)}}}}else{g=xe(g===a?g.splice(p,g.length):g);if(o){o(null,a,g,l)}else{R.apply(a,g)}}})}function ke(e){var t,n,o,r=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],l=a?1:0,c=be(function(e){return e===t},s,true),f=be(function(e){return O(t,e)>-1},s,true),d=[function(e,n,i){var o=!a&&(i||n!==u)||((t=n).nodeType?c(e,n,i):f(e,n,i));t=null;return o}];for(;l<r;l++){if(n=i.relative[e[l].type]){d=[be(ye(d),n)]}else{n=i.filter[e[l].type].apply(null,e[l].matches);if(n[w]){o=++l;for(;o<r;o++){if(i.relative[e[o].type]){break}}return Ce(l>1&&ye(d),l>1&&ge(e.slice(0,l-1).concat({value:e[l-2].type===" "?"*":""})).replace(z,"$1"),n,l<o&&ke(e.slice(l,o)),o<r&&ke(e=e.slice(o)),o<r&&ge(e))}d.push(n)}}return ye(d)}function Te(e,t){var n=t.length>0,o=e.length>0,r=function(r,a,s,l,c){var f,p,m,g=0,b="0",y=r&&[],w=[],x=u,k=r||o&&i.find["TAG"]("*",c),T=C+=x==null?1:Math.random()||.1,S=k.length;if(c){u=a===h||a||c}for(;b!==S&&(f=k[b])!=null;b++){if(o&&f){p=0;if(!a&&f.ownerDocument!==h){d(f);s=!v}while(m=e[p++]){if(m(f,a||h,s)){l.push(f);break}}if(c){C=T}}if(n){if(f=!m&&f){g--}if(r){y.push(f)}}}g+=b;if(n&&b!==g){p=0;while(m=t[p++]){m(y,w,a,s)}if(r){if(g>0){while(b--){if(!(y[b]||w[b])){w[b]=I.call(l)}}}w=xe(w)}R.apply(l,w);if(c&&!r&&w.length>0&&g+t.length>1){re.uniqueSort(l)}}if(c){C=T;u=x}return y};return n?se(r):r}s=re.compile=function(e,t){var n,i=[],o=[],r=E[e+" "];if(!r){if(!t){t=a(e)}n=t.length;while(n--){r=ke(t[n]);if(r[w]){i.push(r)}else{o.push(r)}}r=E(e,Te(o,i));r.selector=e}return r};l=re.select=function(e,t,n,o){var r,l,u,c,f,d=typeof e==="function"&&e,h=!o&&a(e=d.selector||e);n=n||[];if(h.length===1){l=h[0]=h[0].slice(0);if(l.length>2&&(u=l[0]).type==="ID"&&t.nodeType===9&&v&&i.relative[l[1].type]){t=(i.find["ID"](u.matches[0].replace(Z,ee),t)||[])[0];if(!t){return n}else if(d){t=t.parentNode}e=e.slice(l.shift().value.length)}r=V["needsContext"].test(e)?0:l.length;while(r--){u=l[r];if(i.relative[c=u.type]){break}if(f=i.find[c]){if(o=f(u.matches[0].replace(Z,ee),J.test(l[0].type)&&ve(t.parentNode)||t)){l.splice(r,1);e=o.length&&ge(l);if(!e){R.apply(n,o);return n}break}}}}(d||s(e,h))(o,t,!v,n,!t||J.test(e)&&ve(t.parentNode)||t);return n};n.sortStable=w.split("").sort(N).join("")===w;n.detectDuplicates=!!f;d();n.sortDetached=le(function(e){return e.compareDocumentPosition(h.createElement("fieldset"))&1});if(!le(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){ue("type|href|height|width",function(e,t,n){if(!n){return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}})}if(!n.attributes||!le(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){ue("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input"){return e.defaultValue}})}if(!le(function(e){return e.getAttribute("disabled")==null})){ue(P,function(e,t,n){var i;if(!n){return e[t]===true?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}})}return re}(e);x.find=T;x.expr=T.selectors;x.expr[":"]=x.expr.pseudos;x.uniqueSort=x.unique=T.uniqueSort;x.text=T.getText;x.isXMLDoc=T.isXML;x.contains=T.contains;x.escapeSelector=T.escape;var S=function(e,t,n){var i=[],o=n!==undefined;while((e=e[t])&&e.nodeType!==9){if(e.nodeType===1){if(o&&x(e).is(n)){break}i.push(e)}}return i};var E=function(e,t){var n=[];for(;e;e=e.nextSibling){if(e.nodeType===1&&e!==t){n.push(e)}}return n};var N=x.expr.match.needsContext;function $(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function I(e,t,n){if(v(t)){return x.grep(e,function(e,i){return!!t.call(e,i,e)!==n})}if(t.nodeType){return x.grep(e,function(e){return e===t!==n})}if(typeof t!=="string"){return x.grep(e,function(e){return l.call(t,e)>-1!==n})}return x.filter(t,e,n)}x.filter=function(e,t,n){var i=t[0];if(n){e=":not("+e+")"}if(t.length===1&&i.nodeType===1){return x.find.matchesSelector(i,e)?[i]:[]}return x.find.matches(e,x.grep(t,function(e){return e.nodeType===1}))};x.fn.extend({find:function(e){var t,n,i=this.length,o=this;if(typeof e!=="string"){return this.pushStack(x(e).filter(function(){for(t=0;t<i;t++){if(x.contains(o[t],this)){return true}}}))}n=this.pushStack([]);for(t=0;t<i;t++){x.find(e,o[t],n)}return i>1?x.uniqueSort(n):n},filter:function(e){return this.pushStack(I(this,e||[],false))},not:function(e){return this.pushStack(I(this,e||[],true))},is:function(e){return!!I(this,typeof e==="string"&&N.test(e)?x(e):e||[],false).length}});var D,R=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,L=x.fn.init=function(e,t,n){var o,r;if(!e){return this}n=n||D;if(typeof e==="string"){if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3){o=[null,e,null]}else{o=R.exec(e)}if(o&&(o[1]||!t)){if(o[1]){t=t instanceof x?t[0]:t;x.merge(this,x.parseHTML(o[1],t&&t.nodeType?t.ownerDocument||t:i,true));if(A.test(o[1])&&x.isPlainObject(t)){for(o in t){if(v(this[o])){this[o](t[o])}else{this.attr(o,t[o])}}}return this}else{r=i.getElementById(o[2]);if(r){this[0]=r;this.length=1}return this}}else if(!t||t.jquery){return(t||n).find(e)}else{return this.constructor(t).find(e)}}else if(e.nodeType){this[0]=e;this.length=1;return this}else if(v(e)){return n.ready!==undefined?n.ready(e):e(x)}return x.makeArray(e,this)};L.prototype=x.fn;D=x(i);var O=/^(?:parents|prev(?:Until|All))/,P={children:true,contents:true,next:true,prev:true};x.fn.extend({has:function(e){var t=x(e,this),n=t.length;return this.filter(function(){var e=0;for(;e<n;e++){if(x.contains(this,t[e])){return true}}})},closest:function(e,t){var n,i=0,o=this.length,r=[],a=typeof e!=="string"&&x(e);if(!N.test(e)){for(;i<o;i++){for(n=this[i];n&&n!==t;n=n.parentNode){if(n.nodeType<11&&(a?a.index(n)>-1:n.nodeType===1&&x.find.matchesSelector(n,e))){r.push(n);break}}}}return this.pushStack(r.length>1?x.uniqueSort(r):r)},index:function(e){if(!e){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof e==="string"){return l.call(x(e),this[0])}return l.call(this,e.jquery?e[0]:e)},add:function(e,t){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function H(e,t){while((e=e[t])&&e.nodeType!==1){}return e}x.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return S(e,"parentNode")},parentsUntil:function(e,t,n){return S(e,"parentNode",n)},next:function(e){return H(e,"nextSibling")},prev:function(e){return H(e,"previousSibling")},nextAll:function(e){return S(e,"nextSibling")},prevAll:function(e){return S(e,"previousSibling")},nextUntil:function(e,t,n){return S(e,"nextSibling",n)},prevUntil:function(e,t,n){return S(e,"previousSibling",n)},siblings:function(e){return E((e.parentNode||{}).firstChild,e)},children:function(e){return E(e.firstChild)},contents:function(e){if($(e,"iframe")){return e.contentDocument}if($(e,"template")){e=e.content||e}return x.merge([],e.childNodes)}},function(e,t){x.fn[e]=function(n,i){var o=x.map(this,t,n);if(e.slice(-5)!=="Until"){i=n}if(i&&typeof i==="string"){o=x.filter(i,o)}if(this.length>1){if(!P[e]){x.uniqueSort(o)}if(O.test(e)){o.reverse()}}return this.pushStack(o)}});var F=/[^\x20\t\r\n\f]+/g;function j(e){var t={};x.each(e.match(F)||[],function(e,n){t[n]=true});return t}x.Callbacks=function(e){e=typeof e==="string"?j(e):x.extend({},e);var t,n,i,o,r=[],a=[],s=-1,l=function(){o=o||e.once;i=t=true;for(;a.length;s=-1){n=a.shift();while(++s<r.length){if(r[s].apply(n[0],n[1])===false&&e.stopOnFalse){s=r.length;n=false}}}if(!e.memory){n=false}t=false;if(o){if(n){r=[]}else{r=""}}},u={add:function(){if(r){if(n&&!t){s=r.length-1;a.push(n)}(function t(n){x.each(n,function(n,i){if(v(i)){if(!e.unique||!u.has(i)){r.push(i)}}else if(i&&i.length&&y(i)!=="string"){t(i)}})})(arguments);if(n&&!t){l()}}return this},remove:function(){x.each(arguments,function(e,t){var n;while((n=x.inArray(t,r,n))>-1){r.splice(n,1);if(n<=s){s--}}});return this},has:function(e){return e?x.inArray(e,r)>-1:r.length>0},empty:function(){if(r){r=[]}return this},disable:function(){o=a=[];r=n="";return this},disabled:function(){return!r},lock:function(){o=a=[];if(!n&&!t){r=n=""}return this},locked:function(){return!!o},fireWith:function(e,n){if(!o){n=n||[];n=[e,n.slice?n.slice():n];a.push(n);if(!t){l()}}return this},fire:function(){u.fireWith(this,arguments);return this},fired:function(){return!!i}};return u};function M(e){return e}function B(e){throw e}function z(e,t,n,i){var o;try{if(e&&v(o=e.promise)){o.call(e).done(t).fail(n)}else if(e&&v(o=e.then)){o.call(e,t,n)}else{t.apply(undefined,[e].slice(i))}}catch(e){n.apply(undefined,[e])}}x.extend({Deferred:function(t){var n=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){r.done(arguments).fail(arguments);return this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return x.Deferred(function(t){x.each(n,function(n,i){var o=v(e[i[4]])&&e[i[4]];r[i[1]](function(){var e=o&&o.apply(this,arguments);if(e&&v(e.promise)){e.promise().progress(t.notify).done(t.resolve).fail(t.reject)}else{t[i[0]+"With"](this,o?[e]:arguments)}})});e=null}).promise()},then:function(t,i,o){var r=0;function a(t,n,i,o){return function(){var s=this,l=arguments,u=function(){var e,u;if(t<r){return}e=i.apply(s,l);if(e===n.promise()){throw new TypeError("Thenable self-resolution")}u=e&&(typeof e==="object"||typeof e==="function")&&e.then;if(v(u)){if(o){u.call(e,a(r,n,M,o),a(r,n,B,o))}else{r++;u.call(e,a(r,n,M,o),a(r,n,B,o),a(r,n,M,n.notifyWith))}}else{if(i!==M){s=undefined;l=[e]}(o||n.resolveWith)(s,l)}},c=o?u:function(){try{u()}catch(e){if(x.Deferred.exceptionHook){x.Deferred.exceptionHook(e,c.stackTrace)}if(t+1>=r){if(i!==B){s=undefined;l=[e]}n.rejectWith(s,l)}}};if(t){c()}else{if(x.Deferred.getStackHook){c.stackTrace=x.Deferred.getStackHook()}e.setTimeout(c)}}}return x.Deferred(function(e){n[0][3].add(a(0,e,v(o)?o:M,e.notifyWith));n[1][3].add(a(0,e,v(t)?t:M));n[2][3].add(a(0,e,v(i)?i:B))}).promise()},promise:function(e){return e!=null?x.extend(e,o):o}},r={};x.each(n,function(e,t){var a=t[2],s=t[5];o[t[1]]=a.add;if(s){a.add(function(){i=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock)}a.add(t[3].fire);r[t[0]]=function(){r[t[0]+"With"](this===r?undefined:this,arguments);return this};r[t[0]+"With"]=a.fireWith});o.promise(r);if(t){t.call(r,r)}return r},when:function(e){var t=arguments.length,n=t,i=Array(n),o=r.call(arguments),a=x.Deferred(),s=function(e){return function(n){i[e]=this;o[e]=arguments.length>1?r.call(arguments):n;if(!--t){a.resolveWith(i,o)}}};if(t<=1){z(e,a.done(s(n)).resolve,a.reject,!t);if(a.state()==="pending"||v(o[n]&&o[n].then)){return a.then()}}while(n--){z(o[n],s(n),a.reject)}return a.promise()}});var q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(t,n){if(e.console&&e.console.warn&&t&&q.test(t.name)){e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)}};x.readyException=function(t){e.setTimeout(function(){throw t})};var U=x.Deferred();x.fn.ready=function(e){U.then(e).catch(function(e){x.readyException(e)});return this};x.extend({isReady:false,readyWait:1,ready:function(e){if(e===true?--x.readyWait:x.isReady){return}x.isReady=true;if(e!==true&&--x.readyWait>0){return}U.resolveWith(i,[x])}});x.ready.then=U.then;function K(){i.removeEventListener("DOMContentLoaded",K);e.removeEventListener("load",K);x.ready()}if(i.readyState==="complete"||i.readyState!=="loading"&&!i.documentElement.doScroll){e.setTimeout(x.ready)}else{i.addEventListener("DOMContentLoaded",K);e.addEventListener("load",K)}var W=function(e,t,n,i,o,r,a){var s=0,l=e.length,u=n==null;if(y(n)==="object"){o=true;for(s in n){W(e,t,s,n[s],true,r,a)}}else if(i!==undefined){o=true;if(!v(i)){a=true}if(u){if(a){t.call(e,i);t=null}else{u=t;t=function(e,t,n){return u.call(x(e),n)}}}if(t){for(;s<l;s++){t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)))}}}if(o){return e}if(u){return t.call(e)}return l?t(e[0],n):r};var _=/^-ms-/,V=/-([a-z])/g;function G(e,t){return t.toUpperCase()}function Q(e){return e.replace(_,"ms-").replace(V,G)}var X=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function Y(){this.expando=x.expando+Y.uid++}Y.uid=1;Y.prototype={cache:function(e){var t=e[this.expando];if(!t){t={};if(X(e)){if(e.nodeType){e[this.expando]=t}else{Object.defineProperty(e,this.expando,{value:t,configurable:true})}}}return t},set:function(e,t,n){var i,o=this.cache(e);if(typeof t==="string"){o[Q(t)]=n}else{for(i in t){o[Q(i)]=t[i]}}return o},get:function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][Q(t)]},access:function(e,t,n){if(t===undefined||t&&typeof t==="string"&&n===undefined){return this.get(e,t)}this.set(e,t,n);return n!==undefined?n:t},remove:function(e,t){var n,i=e[this.expando];if(i===undefined){return}if(t!==undefined){if(Array.isArray(t)){t=t.map(Q)}else{t=Q(t);t=t in i?[t]:t.match(F)||[]}n=t.length;while(n--){delete i[t[n]]}}if(t===undefined||x.isEmptyObject(i)){if(e.nodeType){e[this.expando]=undefined}else{delete e[this.expando]}}},hasData:function(e){var t=e[this.expando];return t!==undefined&&!x.isEmptyObject(t)}};var J=new Y;var Z=new Y;var ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e){if(e==="true"){return true}if(e==="false"){return false}if(e==="null"){return null}if(e===+e+""){return+e}if(ee.test(e)){return JSON.parse(e)}return e}function ie(e,t,n){var i;if(n===undefined&&e.nodeType===1){i="data-"+t.replace(te,"-$&").toLowerCase();n=e.getAttribute(i);if(typeof n==="string"){try{n=ne(n)}catch(e){}Z.set(e,t,n)}else{n=undefined}}return n}x.extend({hasData:function(e){return Z.hasData(e)||J.hasData(e)},data:function(e,t,n){return Z.access(e,t,n)},removeData:function(e,t){Z.remove(e,t)},_data:function(e,t,n){return J.access(e,t,n)},_removeData:function(e,t){J.remove(e,t)}});x.fn.extend({data:function(e,t){var n,i,o,r=this[0],a=r&&r.attributes;if(e===undefined){if(this.length){o=Z.get(r);if(r.nodeType===1&&!J.get(r,"hasDataAttrs")){n=a.length;while(n--){if(a[n]){i=a[n].name;if(i.indexOf("data-")===0){i=Q(i.slice(5));ie(r,i,o[i])}}}J.set(r,"hasDataAttrs",true)}}return o}if(typeof e==="object"){return this.each(function(){Z.set(this,e)})}return W(this,function(t){var n;if(r&&t===undefined){n=Z.get(r,e);if(n!==undefined){return n}n=ie(r,e);if(n!==undefined){return n}return}this.each(function(){Z.set(this,e,t)})},null,t,arguments.length>1,null,true)},removeData:function(e){return this.each(function(){Z.remove(this,e)})}});x.extend({queue:function(e,t,n){var i;if(e){t=(t||"fx")+"queue";i=J.get(e,t);if(n){if(!i||Array.isArray(n)){i=J.access(e,t,x.makeArray(n))}else{i.push(n)}}return i||[]}},dequeue:function(e,t){t=t||"fx";var n=x.queue(e,t),i=n.length,o=n.shift(),r=x._queueHooks(e,t),a=function(){x.dequeue(e,t)};if(o==="inprogress"){o=n.shift();i--}if(o){if(t==="fx"){n.unshift("inprogress")}delete r.stop;o.call(e,a,r)}if(!i&&r){r.empty.fire()}},_queueHooks:function(e,t){var n=t+"queueHooks";return J.get(e,n)||J.access(e,n,{empty:x.Callbacks("once memory").add(function(){J.remove(e,[t+"queue",n])})})}});x.fn.extend({queue:function(e,t){var n=2;if(typeof e!=="string"){t=e;e="fx";n--}if(arguments.length<n){return x.queue(this[0],e)}return t===undefined?this:this.each(function(){var n=x.queue(this,e,t);x._queueHooks(this,e);if(e==="fx"&&n[0]!=="inprogress"){x.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){x.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=x.Deferred(),r=this,a=this.length,s=function(){if(!--i){o.resolveWith(r,[r])}};if(typeof e!=="string"){t=e;e=undefined}e=e||"fx";while(a--){n=J.get(r[a],e+"queueHooks");if(n&&n.empty){i++;n.empty.add(s)}}s();return o.promise(t)}});var oe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var re=new RegExp("^(?:([+-])=|)("+oe+")([a-z%]*)$","i");var ae=["Top","Right","Bottom","Left"];var se=function(e,t){e=t||e;return e.style.display==="none"||e.style.display===""&&x.contains(e.ownerDocument,e)&&x.css(e,"display")==="none"};var le=function(e,t,n,i){var o,r,a={};for(r in t){a[r]=e.style[r];e.style[r]=t[r]}o=n.apply(e,i||[]);for(r in t){e.style[r]=a[r]}return o};function ue(e,t,n,i){var o,r,a=20,s=i?function(){return i.cur()}:function(){return x.css(e,t,"")},l=s(),u=n&&n[3]||(x.cssNumber[t]?"":"px"),c=(x.cssNumber[t]||u!=="px"&&+l)&&re.exec(x.css(e,t));if(c&&c[3]!==u){l=l/2;u=u||c[3];c=+l||1;while(a--){x.style(e,t,c+u);if((1-r)*(1-(r=s()/l||.5))<=0){a=0}c=c/r}c=c*2;x.style(e,t,c+u);n=n||[]}if(n){c=+c||+l||0;o=n[1]?c+(n[1]+1)*n[2]:+n[2];if(i){i.unit=u;i.start=c;i.end=o}}return o}var ce={};function fe(e){var t,n=e.ownerDocument,i=e.nodeName,o=ce[i];if(o){return o}t=n.body.appendChild(n.createElement(i));o=x.css(t,"display");t.parentNode.removeChild(t);if(o==="none"){o="block"}ce[i]=o;return o}function de(e,t){var n,i,o=[],r=0,a=e.length;for(;r<a;r++){i=e[r];if(!i.style){continue}n=i.style.display;if(t){if(n==="none"){o[r]=J.get(i,"display")||null;if(!o[r]){i.style.display=""}}if(i.style.display===""&&se(i)){o[r]=fe(i)}}else{if(n!=="none"){o[r]="none";J.set(i,"display",n)}}}for(r=0;r<a;r++){if(o[r]!=null){e[r].style.display=o[r]}}return e}x.fn.extend({show:function(){return de(this,true)},hide:function(){return de(this)},toggle:function(e){if(typeof e==="boolean"){return e?this.show():this.hide()}return this.each(function(){if(se(this)){x(this).show()}else{x(this).hide()}})}});var he=/^(?:checkbox|radio)$/i;var pe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;var ve=/^$|^module$|\/(?:java|ecma)script/i;var me={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};me.optgroup=me.option;me.tbody=me.tfoot=me.colgroup=me.caption=me.thead;me.th=me.td;function ge(e,t){var n;if(typeof e.getElementsByTagName!=="undefined"){n=e.getElementsByTagName(t||"*")}else if(typeof e.querySelectorAll!=="undefined"){n=e.querySelectorAll(t||"*")}else{n=[]}if(t===undefined||t&&$(e,t)){return x.merge([e],n)}return n}function be(e,t){var n=0,i=e.length;for(;n<i;n++){J.set(e[n],"globalEval",!t||J.get(t[n],"globalEval"))}}var ye=/<|&#?\w+;/;function we(e,t,n,i,o){var r,a,s,l,u,c,f=t.createDocumentFragment(),d=[],h=0,p=e.length;for(;h<p;h++){r=e[h];if(r||r===0){if(y(r)==="object"){x.merge(d,r.nodeType?[r]:r)}else if(!ye.test(r)){d.push(t.createTextNode(r))}else{a=a||f.appendChild(t.createElement("div"));s=(pe.exec(r)||["",""])[1].toLowerCase();l=me[s]||me._default;a.innerHTML=l[1]+x.htmlPrefilter(r)+l[2];c=l[0];while(c--){a=a.lastChild}x.merge(d,a.childNodes);a=f.firstChild;a.textContent=""}}}f.textContent="";h=0;while(r=d[h++]){if(i&&x.inArray(r,i)>-1){if(o){o.push(r)}continue}u=x.contains(r.ownerDocument,r);a=ge(f.appendChild(r),"script");if(u){be(a)}if(n){c=0;while(r=a[c++]){if(ve.test(r.type||"")){n.push(r)}}}}return f}(function(){var e=i.createDocumentFragment(),t=e.appendChild(i.createElement("div")),n=i.createElement("input");n.setAttribute("type","radio");n.setAttribute("checked","checked");n.setAttribute("name","t");t.appendChild(n);p.checkClone=t.cloneNode(true).cloneNode(true).lastChild.checked;t.innerHTML="<textarea>x</textarea>";p.noCloneChecked=!!t.cloneNode(true).lastChild.defaultValue})();var xe=i.documentElement;var Ce=/^key/,ke=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Te=/^([^.]*)(?:\.(.+)|)/;function Se(){return true}function Ee(){return false}function Ne(){try{return i.activeElement}catch(e){}}function $e(e,t,n,i,o,r){var a,s;if(typeof t==="object"){if(typeof n!=="string"){i=i||n;n=undefined}for(s in t){$e(e,s,n,i,t[s],r)}return e}if(i==null&&o==null){o=n;i=n=undefined}else if(o==null){if(typeof n==="string"){o=i;i=undefined}else{o=i;i=n;n=undefined}}if(o===false){o=Ee}else if(!o){return e}if(r===1){a=o;o=function(e){x().off(e);return a.apply(this,arguments)};o.guid=a.guid||(a.guid=x.guid++)}return e.each(function(){x.event.add(this,t,o,i,n)})}x.event={global:{},add:function(e,t,n,i,o){var r,a,s,l,u,c,f,d,h,p,v,m=J.get(e);if(!m){return}if(n.handler){r=n;n=r.handler;o=r.selector}if(o){x.find.matchesSelector(xe,o)}if(!n.guid){n.guid=x.guid++}if(!(l=m.events)){l=m.events={}}if(!(a=m.handle)){a=m.handle=function(t){return typeof x!=="undefined"&&x.event.triggered!==t.type?x.event.dispatch.apply(e,arguments):undefined}}t=(t||"").match(F)||[""];u=t.length;while(u--){s=Te.exec(t[u])||[];h=v=s[1];p=(s[2]||"").split(".").sort();if(!h){continue}f=x.event.special[h]||{};h=(o?f.delegateType:f.bindType)||h;f=x.event.special[h]||{};c=x.extend({type:h,origType:v,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&x.expr.match.needsContext.test(o),namespace:p.join(".")},r);if(!(d=l[h])){d=l[h]=[];d.delegateCount=0;if(!f.setup||f.setup.call(e,i,p,a)===false){if(e.addEventListener){e.addEventListener(h,a)}}}if(f.add){f.add.call(e,c);if(!c.handler.guid){c.handler.guid=n.guid}}if(o){d.splice(d.delegateCount++,0,c)}else{d.push(c)}x.event.global[h]=true}},remove:function(e,t,n,i,o){var r,a,s,l,u,c,f,d,h,p,v,m=J.hasData(e)&&J.get(e);if(!m||!(l=m.events)){return}t=(t||"").match(F)||[""];u=t.length;while(u--){s=Te.exec(t[u])||[];h=v=s[1];p=(s[2]||"").split(".").sort();if(!h){for(h in l){x.event.remove(e,h+t[u],n,i,true)}continue}f=x.event.special[h]||{};h=(i?f.delegateType:f.bindType)||h;d=l[h]||[];s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)");a=r=d.length;while(r--){c=d[r];if((o||v===c.origType)&&(!n||n.guid===c.guid)&&(!s||s.test(c.namespace))&&(!i||i===c.selector||i==="**"&&c.selector)){d.splice(r,1);if(c.selector){d.delegateCount--}if(f.remove){f.remove.call(e,c)}}}if(a&&!d.length){if(!f.teardown||f.teardown.call(e,p,m.handle)===false){x.removeEvent(e,h,m.handle)}delete l[h]}}if(x.isEmptyObject(l)){J.remove(e,"handle events")}},dispatch:function(e){var t=x.event.fix(e);var n,i,o,r,a,s,l=new Array(arguments.length),u=(J.get(this,"events")||{})[t.type]||[],c=x.event.special[t.type]||{};l[0]=t;for(n=1;n<arguments.length;n++){l[n]=arguments[n]}t.delegateTarget=this;if(c.preDispatch&&c.preDispatch.call(this,t)===false){return}s=x.event.handlers.call(this,t,u);n=0;while((r=s[n++])&&!t.isPropagationStopped()){t.currentTarget=r.elem;i=0;while((a=r.handlers[i++])&&!t.isImmediatePropagationStopped()){if(!t.rnamespace||t.rnamespace.test(a.namespace)){t.handleObj=a;t.data=a.data;o=((x.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,l);if(o!==undefined){if((t.result=o)===false){t.preventDefault();t.stopPropagation()}}}}}if(c.postDispatch){c.postDispatch.call(this,t)}return t.result},handlers:function(e,t){var n,i,o,r,a,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!(e.type==="click"&&e.button>=1)){for(;u!==this;u=u.parentNode||this){if(u.nodeType===1&&!(e.type==="click"&&u.disabled===true)){r=[];a={};for(n=0;n<l;n++){i=t[n];o=i.selector+" ";if(a[o]===undefined){a[o]=i.needsContext?x(o,this).index(u)>-1:x.find(o,this,null,[u]).length}if(a[o]){r.push(i)}}if(r.length){s.push({elem:u,handlers:r})}}}}u=this;if(l<t.length){s.push({elem:u,handlers:t.slice(l)})}return s},addProp:function(e,t){Object.defineProperty(x.Event.prototype,e,{enumerable:true,configurable:true,get:v(t)?function(){if(this.originalEvent){return t(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[e]}},set:function(t){Object.defineProperty(this,e,{enumerable:true,configurable:true,writable:true,value:t})}})},fix:function(e){return e[x.expando]?e:new x.Event(e)},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==Ne()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===Ne()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&$(this,"input")){this.click();return false}},_default:function(e){return $(e.target,"a")}},beforeunload:{postDispatch:function(e){if(e.result!==undefined&&e.originalEvent){e.originalEvent.returnValue=e.result}}}}};x.removeEvent=function(e,t,n){if(e.removeEventListener){e.removeEventListener(t,n)}};x.Event=function(e,t){if(!(this instanceof x.Event)){return new x.Event(e,t)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===false?Se:Ee;this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target;this.currentTarget=e.currentTarget;this.relatedTarget=e.relatedTarget}else{this.type=e}if(t){x.extend(this,t)}this.timeStamp=e&&e.timeStamp||Date.now();this[x.expando]=true};x.Event.prototype={constructor:x.Event,isDefaultPrevented:Ee,isPropagationStopped:Ee,isImmediatePropagationStopped:Ee,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Se;if(e&&!this.isSimulated){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Se;if(e&&!this.isSimulated){e.stopPropagation()}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Se;if(e&&!this.isSimulated){e.stopImmediatePropagation()}this.stopPropagation()}};x.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,char:true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:function(e){var t=e.button;if(e.which==null&&Ce.test(e.type)){return e.charCode!=null?e.charCode:e.keyCode}if(!e.which&&t!==undefined&&ke.test(e.type)){if(t&1){return 1}if(t&2){return 3}if(t&4){return 2}return 0}return e.which}},x.event.addProp);x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){x.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,r=e.handleObj;if(!o||o!==i&&!x.contains(i,o)){e.type=r.origType;n=r.handler.apply(this,arguments);e.type=t}return n}}});x.fn.extend({on:function(e,t,n,i){return $e(this,e,t,n,i)},one:function(e,t,n,i){return $e(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj){i=e.handleObj;x(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler);return this}if(typeof e==="object"){for(o in e){this.off(o,t,e[o])}return this}if(t===false||typeof t==="function"){n=t;t=undefined}if(n===false){n=Ee}return this.each(function(){x.event.remove(this,e,n,t)})}});var Ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ie=/<script|<style|<link/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,Re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Le(e,t){if($(e,"table")&&$(t.nodeType!==11?t:t.firstChild,"tr")){return x(e).children("tbody")[0]||e}return e}function Oe(e){e.type=(e.getAttribute("type")!==null)+"/"+e.type;return e}function Pe(e){if((e.type||"").slice(0,5)==="true/"){e.type=e.type.slice(5)}else{e.removeAttribute("type")}return e}function He(e,t){var n,i,o,r,a,s,l,u;if(t.nodeType!==1){return}if(J.hasData(e)){r=J.access(e);a=J.set(t,r);u=r.events;if(u){delete a.handle;a.events={};for(o in u){for(n=0,i=u[o].length;n<i;n++){x.event.add(t,o,u[o][n])}}}}if(Z.hasData(e)){s=Z.access(e);l=x.extend({},s);Z.set(t,l)}}function Fe(e,t){var n=t.nodeName.toLowerCase();if(n==="input"&&he.test(e.type)){t.checked=e.checked}else if(n==="input"||n==="textarea"){t.defaultValue=e.defaultValue}}function je(e,t,n,i){t=a.apply([],t);var o,r,s,l,u,c,f=0,d=e.length,h=d-1,m=t[0],g=v(m);if(g||d>1&&typeof m==="string"&&!p.checkClone&&De.test(m)){return e.each(function(o){var r=e.eq(o);if(g){t[0]=m.call(this,o,r.html())}je(r,t,n,i)})}if(d){o=we(t,e[0].ownerDocument,false,e,i);r=o.firstChild;if(o.childNodes.length===1){o=r}if(r||i){s=x.map(ge(o,"script"),Oe);l=s.length;for(;f<d;f++){u=o;if(f!==h){u=x.clone(u,true,true);if(l){x.merge(s,ge(u,"script"))}}n.call(e[f],u,f)}if(l){c=s[s.length-1].ownerDocument;x.map(s,Pe);for(f=0;f<l;f++){u=s[f];if(ve.test(u.type||"")&&!J.access(u,"globalEval")&&x.contains(c,u)){if(u.src&&(u.type||"").toLowerCase()!=="module"){if(x._evalUrl){x._evalUrl(u.src)}}else{b(u.textContent.replace(Re,""),c,u)}}}}}}return e}function Me(e,t,n){var i,o=t?x.filter(t,e):e,r=0;for(;(i=o[r])!=null;r++){if(!n&&i.nodeType===1){x.cleanData(ge(i))}if(i.parentNode){if(n&&x.contains(i.ownerDocument,i)){be(ge(i,"script"))}i.parentNode.removeChild(i)}}return e}x.extend({htmlPrefilter:function(e){return e.replace(Ae,"<$1></$2>")},clone:function(e,t,n){var i,o,r,a,s=e.cloneNode(true),l=x.contains(e.ownerDocument,e);if(!p.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!x.isXMLDoc(e)){a=ge(s);r=ge(e);for(i=0,o=r.length;i<o;i++){Fe(r[i],a[i])}}if(t){if(n){r=r||ge(e);a=a||ge(s);for(i=0,o=r.length;i<o;i++){He(r[i],a[i])}}else{He(e,s)}}a=ge(s,"script");if(a.length>0){be(a,!l&&ge(e,"script"))}return s},cleanData:function(e){var t,n,i,o=x.event.special,r=0;for(;(n=e[r])!==undefined;r++){if(X(n)){if(t=n[J.expando]){if(t.events){for(i in t.events){if(o[i]){x.event.remove(n,i)}else{x.removeEvent(n,i,t.handle)}}}n[J.expando]=undefined}if(n[Z.expando]){n[Z.expando]=undefined}}}}});x.fn.extend({detach:function(e){return Me(this,e,true)},remove:function(e){return Me(this,e)},text:function(e){return W(this,function(e){return e===undefined?x.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=e}})},null,e,arguments.length)},append:function(){return je(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Le(this,e);t.appendChild(e)}})},prepend:function(){return je(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=Le(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return je(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}})},after:function(){return je(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}})},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){if(e.nodeType===1){x.cleanData(ge(e,false));e.textContent=""}}return this},clone:function(e,t){e=e==null?false:e;t=t==null?e:t;return this.map(function(){return x.clone(this,e,t)})},html:function(e){return W(this,function(e){var t=this[0]||{},n=0,i=this.length;if(e===undefined&&t.nodeType===1){return t.innerHTML}if(typeof e==="string"&&!Ie.test(e)&&!me[(pe.exec(e)||["",""])[1].toLowerCase()]){e=x.htmlPrefilter(e);try{for(;n<i;n++){t=this[n]||{};if(t.nodeType===1){x.cleanData(ge(t,false));t.innerHTML=e}}t=0}catch(e){}}if(t){this.empty().append(e)}},null,e,arguments.length)},replaceWith:function(){var e=[];return je(this,arguments,function(t){var n=this.parentNode;if(x.inArray(this,e)<0){x.cleanData(ge(this));if(n){n.replaceChild(t,this)}}},e)}});x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){x.fn[e]=function(e){var n,i=[],o=x(e),r=o.length-1,a=0;for(;a<=r;a++){n=a===r?this:this.clone(true);x(o[a])[t](n);s.apply(i,n.get())}return this.pushStack(i)}});var Be=new RegExp("^("+oe+")(?!px)[a-z%]+$","i");var ze=function(t){var n=t.ownerDocument.defaultView;if(!n||!n.opener){n=e}return n.getComputedStyle(t)};var qe=new RegExp(ae.join("|"),"i");(function(){function t(){if(!c){return}u.style.cssText="position:absolute;left:-11111px;width:60px;"+"margin-top:1px;padding:0;border:0";c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;"+"margin:auto;border:1px;padding:1px;"+"width:60%;top:1%";xe.appendChild(u).appendChild(c);var t=e.getComputedStyle(c);o=t.top!=="1%";l=n(t.marginLeft)===12;c.style.right="60%";s=n(t.right)===36;r=n(t.width)===36;c.style.position="absolute";a=c.offsetWidth===36||"absolute";xe.removeChild(u);c=null}function n(e){return Math.round(parseFloat(e))}var o,r,a,s,l,u=i.createElement("div"),c=i.createElement("div");if(!c.style){return}c.style.backgroundClip="content-box";c.cloneNode(true).style.backgroundClip="";p.clearCloneStyle=c.style.backgroundClip==="content-box";x.extend(p,{boxSizingReliable:function(){t();return r},pixelBoxStyles:function(){t();return s},pixelPosition:function(){t();return o},reliableMarginLeft:function(){t();return l},scrollboxSize:function(){t();return a}})})();function Ue(e,t,n){var i,o,r,a,s=e.style;n=n||ze(e);if(n){a=n.getPropertyValue(t)||n[t];if(a===""&&!x.contains(e.ownerDocument,e)){a=x.style(e,t)}if(!p.pixelBoxStyles()&&Be.test(a)&&qe.test(t)){i=s.width;o=s.minWidth;r=s.maxWidth;s.minWidth=s.maxWidth=s.width=a;a=n.width;s.width=i;s.minWidth=o;s.maxWidth=r}}return a!==undefined?a+"":a}function Ke(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}var We=/^(none|table(?!-c[ea]).+)/,_e=/^--/,Ve={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"},Qe=["Webkit","Moz","ms"],Xe=i.createElement("div").style;function Ye(e){if(e in Xe){return e}var t=e[0].toUpperCase()+e.slice(1),n=Qe.length;while(n--){e=Qe[n]+t;if(e in Xe){return e}}}function Je(e){var t=x.cssProps[e];if(!t){t=x.cssProps[e]=Ye(e)||e}return t}function Ze(e,t,n){var i=re.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function et(e,t,n,i,o,r){var a=t==="width"?1:0,s=0,l=0;if(n===(i?"border":"content")){return 0}for(;a<4;a+=2){if(n==="margin"){l+=x.css(e,n+ae[a],true,o)}if(!i){l+=x.css(e,"padding"+ae[a],true,o);if(n!=="padding"){l+=x.css(e,"border"+ae[a]+"Width",true,o)}else{s+=x.css(e,"border"+ae[a]+"Width",true,o)}}else{if(n==="content"){l-=x.css(e,"padding"+ae[a],true,o)}if(n!=="margin"){l-=x.css(e,"border"+ae[a]+"Width",true,o)}}}if(!i&&r>=0){l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-r-l-s-.5))}return l}function tt(e,t,n){var i=ze(e),o=Ue(e,t,i),r=x.css(e,"boxSizing",false,i)==="border-box",a=r;if(Be.test(o)){if(!n){return o}o="auto"}a=a&&(p.boxSizingReliable()||o===e.style[t]);if(o==="auto"||!parseFloat(o)&&x.css(e,"display",false,i)==="inline"){o=e["offset"+t[0].toUpperCase()+t.slice(1)];a=true}o=parseFloat(o)||0;return o+et(e,t,n||(r?"border":"content"),a,i,o)+"px"}x.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ue(e,"opacity");return n===""?"1":n}}}},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{},style:function(e,t,n,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style){return}var o,r,a,s=Q(t),l=_e.test(t),u=e.style;if(!l){t=Je(s)}a=x.cssHooks[t]||x.cssHooks[s];if(n!==undefined){r=typeof n;if(r==="string"&&(o=re.exec(n))&&o[1]){n=ue(e,t,o);r="number"}if(n==null||n!==n){return}if(r==="number"){n+=o&&o[3]||(x.cssNumber[s]?"":"px")}if(!p.clearCloneStyle&&n===""&&t.indexOf("background")===0){u[t]="inherit"}if(!a||!("set"in a)||(n=a.set(e,n,i))!==undefined){if(l){u.setProperty(t,n)}else{u[t]=n}}}else{if(a&&"get"in a&&(o=a.get(e,false,i))!==undefined){return o}return u[t]}},css:function(e,t,n,i){var o,r,a,s=Q(t),l=_e.test(t);if(!l){t=Je(s)}a=x.cssHooks[t]||x.cssHooks[s];if(a&&"get"in a){o=a.get(e,true,n)}if(o===undefined){o=Ue(e,t,i)}if(o==="normal"&&t in Ge){o=Ge[t]}if(n===""||n){r=parseFloat(o);return n===true||isFinite(r)?r||0:o}return o}});x.each(["height","width"],function(e,t){x.cssHooks[t]={get:function(e,n,i){if(n){return We.test(x.css(e,"display"))&&(!e.getClientRects().length||!e.getBoundingClientRect().width)?le(e,Ve,function(){return tt(e,t,i)}):tt(e,t,i)}},set:function(e,n,i){var o,r=ze(e),a=x.css(e,"boxSizing",false,r)==="border-box",s=i&&et(e,t,i,a,r);if(a&&p.scrollboxSize()===r.position){s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(r[t])-et(e,t,"border",false,r)-.5)}if(s&&(o=re.exec(n))&&(o[3]||"px")!=="px"){e.style[t]=n;n=x.css(e,t)}return Ze(e,n,s)}}});x.cssHooks.marginLeft=Ke(p.reliableMarginLeft,function(e,t){if(t){return(parseFloat(Ue(e,"marginLeft"))||e.getBoundingClientRect().left-le(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}});x.each({margin:"",padding:"",border:"Width"},function(e,t){x.cssHooks[e+t]={expand:function(n){var i=0,o={},r=typeof n==="string"?n.split(" "):[n];for(;i<4;i++){o[e+ae[i]+t]=r[i]||r[i-2]||r[0]}return o}};if(e!=="margin"){x.cssHooks[e+t].set=Ze}});x.fn.extend({css:function(e,t){return W(this,function(e,t,n){var i,o,r={},a=0;if(Array.isArray(t)){i=ze(e);o=t.length;for(;a<o;a++){r[t[a]]=x.css(e,t[a],false,i)}return r}return n!==undefined?x.style(e,t,n):x.css(e,t)},e,t,arguments.length>1)}});function nt(e,t,n,i,o){return new nt.prototype.init(e,t,n,i,o)}x.Tween=nt;nt.prototype={constructor:nt,init:function(e,t,n,i,o,r){this.elem=e;this.prop=n;this.easing=o||x.easing._default;this.options=t;this.start=this.now=this.cur();this.end=i;this.unit=r||(x.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop];if(this.options.duration){this.pos=t=x.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration)}else{this.pos=t=e}this.now=(this.end-this.start)*t+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(n&&n.set){n.set(this)}else{nt.propHooks._default.set(this)}return this}};nt.prototype.init.prototype=nt.prototype;nt.propHooks={_default:{get:function(e){var t;if(e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null){return e.elem[e.prop]}t=x.css(e.elem,e.prop,"");return!t||t==="auto"?0:t},set:function(e){if(x.fx.step[e.prop]){x.fx.step[e.prop](e)}else if(e.elem.nodeType===1&&(e.elem.style[x.cssProps[e.prop]]!=null||x.cssHooks[e.prop])){x.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}};nt.propHooks.scrollTop=nt.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};x.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"};x.fx=nt.prototype.init;x.fx.step={};var it,ot,rt=/^(?:toggle|show|hide)$/,at=/queueHooks$/;function st(){if(ot){if(i.hidden===false&&e.requestAnimationFrame){e.requestAnimationFrame(st)}else{e.setTimeout(st,x.fx.interval)}x.fx.tick()}}function lt(){e.setTimeout(function(){it=undefined});return it=Date.now()}function ut(e,t){var n,i=0,o={height:e};t=t?1:0;for(;i<4;i+=2-t){n=ae[i];o["margin"+n]=o["padding"+n]=e}if(t){o.opacity=o.width=e}return o}function ct(e,t,n){var i,o=(ht.tweeners[t]||[]).concat(ht.tweeners["*"]),r=0,a=o.length;for(;r<a;r++){if(i=o[r].call(n,t,e)){return i}}}function ft(e,t,n){var i,o,r,a,s,l,u,c,f="width"in t||"height"in t,d=this,h={},p=e.style,v=e.nodeType&&se(e),m=J.get(e,"fxshow");if(!n.queue){a=x._queueHooks(e,"fx");if(a.unqueued==null){a.unqueued=0;s=a.empty.fire;a.empty.fire=function(){if(!a.unqueued){s()}}}a.unqueued++;d.always(function(){d.always(function(){a.unqueued--;if(!x.queue(e,"fx").length){a.empty.fire()}})})}for(i in t){o=t[i];if(rt.test(o)){delete t[i];r=r||o==="toggle";if(o===(v?"hide":"show")){if(o==="show"&&m&&m[i]!==undefined){v=true}else{continue}}h[i]=m&&m[i]||x.style(e,i)}}l=!x.isEmptyObject(t);if(!l&&x.isEmptyObject(h)){return}if(f&&e.nodeType===1){n.overflow=[p.overflow,p.overflowX,p.overflowY];u=m&&m.display;if(u==null){u=J.get(e,"display")}c=x.css(e,"display");if(c==="none"){if(u){c=u}else{de([e],true);u=e.style.display||u;c=x.css(e,"display");de([e])}}if(c==="inline"||c==="inline-block"&&u!=null){if(x.css(e,"float")==="none"){if(!l){d.done(function(){p.display=u});if(u==null){c=p.display;u=c==="none"?"":c}}p.display="inline-block"}}}if(n.overflow){p.overflow="hidden";d.always(function(){p.overflow=n.overflow[0];p.overflowX=n.overflow[1];p.overflowY=n.overflow[2]})}l=false;for(i in h){if(!l){if(m){if("hidden"in m){v=m.hidden}}else{m=J.access(e,"fxshow",{display:u})}if(r){m.hidden=!v}if(v){de([e],true)}d.done(function(){if(!v){de([e])}J.remove(e,"fxshow");for(i in h){x.style(e,i,h[i])}})}l=ct(v?m[i]:0,i,d);if(!(i in m)){m[i]=l.start;if(v){l.end=l.start;l.start=0}}}}function dt(e,t){var n,i,o,r,a;for(n in e){i=Q(n);o=t[i];r=e[n];if(Array.isArray(r)){o=r[1];r=e[n]=r[0]}if(n!==i){e[i]=r;delete e[n]}a=x.cssHooks[i];if(a&&"expand"in a){r=a.expand(r);delete e[i];for(n in r){if(!(n in e)){e[n]=r[n];t[n]=o}}}else{t[i]=o}}}function ht(e,t,n){var i,o,r=0,a=ht.prefilters.length,s=x.Deferred().always(function(){delete l.elem}),l=function(){if(o){return false}var t=it||lt(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,r=1-i,a=0,l=u.tweens.length;for(;a<l;a++){u.tweens[a].run(r)}s.notifyWith(e,[u,r,n]);if(r<1&&l){return n}if(!l){s.notifyWith(e,[u,1,0])}s.resolveWith(e,[u]);return false},u=s.promise({elem:e,props:x.extend({},t),opts:x.extend(true,{specialEasing:{},easing:x.easing._default},n),originalProperties:t,originalOptions:n,startTime:it||lt(),duration:n.duration,tweens:[],createTween:function(t,n){var i=x.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);u.tweens.push(i);return i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(o){return this}o=true;for(;n<i;n++){u.tweens[n].run(1)}if(t){s.notifyWith(e,[u,1,0]);s.resolveWith(e,[u,t])}else{s.rejectWith(e,[u,t])}return this}}),c=u.props;dt(c,u.opts.specialEasing);for(;r<a;r++){i=ht.prefilters[r].call(u,e,c,u.opts);if(i){if(v(i.stop)){x._queueHooks(u.elem,u.opts.queue).stop=i.stop.bind(i)}return i}}x.map(c,ct,u);if(v(u.opts.start)){u.opts.start.call(e,u)}u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always);x.fx.timer(x.extend(l,{elem:e,anim:u,queue:u.opts.queue}));return u}x.Animation=x.extend(ht,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);ue(n.elem,e,re.exec(t),n);return n}]},tweener:function(e,t){if(v(e)){t=e;e=["*"]}else{e=e.match(F)}var n,i=0,o=e.length;for(;i<o;i++){n=e[i];ht.tweeners[n]=ht.tweeners[n]||[];ht.tweeners[n].unshift(t)}},prefilters:[ft],prefilter:function(e,t){if(t){ht.prefilters.unshift(e)}else{ht.prefilters.push(e)}}});x.speed=function(e,t,n){var i=e&&typeof e==="object"?x.extend({},e):{complete:n||!n&&t||v(e)&&e,duration:e,easing:n&&t||t&&!v(t)&&t};if(x.fx.off){i.duration=0}else{if(typeof i.duration!=="number"){if(i.duration in x.fx.speeds){i.duration=x.fx.speeds[i.duration]}else{i.duration=x.fx.speeds._default}}}if(i.queue==null||i.queue===true){i.queue="fx"}i.old=i.complete;i.complete=function(){if(v(i.old)){i.old.call(this)}if(i.queue){x.dequeue(this,i.queue)}};return i};x.fn.extend({fadeTo:function(e,t,n,i){return this.filter(se).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=x.isEmptyObject(e),r=x.speed(t,n,i),a=function(){var t=ht(this,x.extend({},e),r);if(o||J.get(this,"finish")){t.stop(true)}};a.finish=a;return o||r.queue===false?this.each(a):this.queue(r.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop;t(n)};if(typeof e!=="string"){n=t;t=e;e=undefined}if(t&&e!==false){this.queue(e||"fx",[])}return this.each(function(){var t=true,o=e!=null&&e+"queueHooks",r=x.timers,a=J.get(this);if(o){if(a[o]&&a[o].stop){i(a[o])}}else{for(o in a){if(a[o]&&a[o].stop&&at.test(o)){i(a[o])}}}for(o=r.length;o--;){if(r[o].elem===this&&(e==null||r[o].queue===e)){r[o].anim.stop(n);t=false;r.splice(o,1)}}if(t||!n){x.dequeue(this,e)}})},finish:function(e){if(e!==false){e=e||"fx"}return this.each(function(){var t,n=J.get(this),i=n[e+"queue"],o=n[e+"queueHooks"],r=x.timers,a=i?i.length:0;n.finish=true;x.queue(this,e,[]);if(o&&o.stop){o.stop.call(this,true)}for(t=r.length;t--;){if(r[t].elem===this&&r[t].queue===e){r[t].anim.stop(true);r.splice(t,1)}}for(t=0;t<a;t++){if(i[t]&&i[t].finish){i[t].finish.call(this)}}delete n.finish})}});x.each(["toggle","show","hide"],function(e,t){var n=x.fn[t];x.fn[t]=function(e,i,o){return e==null||typeof e==="boolean"?n.apply(this,arguments):this.animate(ut(t,true),e,i,o)}});x.each({slideDown:ut("show"),slideUp:ut("hide"),slideToggle:ut("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){x.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}});x.timers=[];x.fx.tick=function(){var e,t=0,n=x.timers;it=Date.now();for(;t<n.length;t++){e=n[t];if(!e()&&n[t]===e){n.splice(t--,1)}}if(!n.length){x.fx.stop()}it=undefined};x.fx.timer=function(e){x.timers.push(e);x.fx.start()};x.fx.interval=13;x.fx.start=function(){if(ot){return}ot=true;st()};x.fx.stop=function(){ot=null};x.fx.speeds={slow:600,fast:200,_default:400};x.fn.delay=function(t,n){t=x.fx?x.fx.speeds[t]||t:t;n=n||"fx";return this.queue(n,function(n,i){var o=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(o)}})};(function(){var e=i.createElement("input"),t=i.createElement("select"),n=t.appendChild(i.createElement("option"));e.type="checkbox";p.checkOn=e.value!=="";p.optSelected=n.selected;e=i.createElement("input");e.value="t";e.type="radio";p.radioValue=e.value==="t"})();var pt,vt=x.expr.attrHandle;x.fn.extend({attr:function(e,t){return W(this,x.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){x.removeAttr(this,e)})}});x.extend({attr:function(e,t,n){var i,o,r=e.nodeType;if(r===3||r===8||r===2){return}if(typeof e.getAttribute==="undefined"){return x.prop(e,t,n)}if(r!==1||!x.isXMLDoc(e)){o=x.attrHooks[t.toLowerCase()]||(x.expr.match.bool.test(t)?pt:undefined)}if(n!==undefined){if(n===null){x.removeAttr(e,t);return}if(o&&"set"in o&&(i=o.set(e,n,t))!==undefined){return i}e.setAttribute(t,n+"");return n}if(o&&"get"in o&&(i=o.get(e,t))!==null){return i}i=x.find.attr(e,t);return i==null?undefined:i},attrHooks:{type:{set:function(e,t){if(!p.radioValue&&t==="radio"&&$(e,"input")){var n=e.value;e.setAttribute("type",t);if(n){e.value=n}return t}}}},removeAttr:function(e,t){var n,i=0,o=t&&t.match(F);if(o&&e.nodeType===1){while(n=o[i++]){e.removeAttribute(n)}}}});pt={set:function(e,t,n){if(t===false){x.removeAttr(e,n)}else{e.setAttribute(n,n)}return n}};x.each(x.expr.match.bool.source.match(/\w+/g),function(e,t){var n=vt[t]||x.find.attr;vt[t]=function(e,t,i){var o,r,a=t.toLowerCase();if(!i){r=vt[a];vt[a]=o;o=n(e,t,i)!=null?a:null;vt[a]=r}return o}});var mt=/^(?:input|select|textarea|button)$/i,gt=/^(?:a|area)$/i;x.fn.extend({prop:function(e,t){return W(this,x.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[x.propFix[e]||e]})}});x.extend({prop:function(e,t,n){var i,o,r=e.nodeType;if(r===3||r===8||r===2){return}if(r!==1||!x.isXMLDoc(e)){t=x.propFix[t]||t;o=x.propHooks[t]}if(n!==undefined){if(o&&"set"in o&&(i=o.set(e,n,t))!==undefined){return i}return e[t]=n}if(o&&"get"in o&&(i=o.get(e,t))!==null){return i}return e[t]},propHooks:{tabIndex:{get:function(e){var t=x.find.attr(e,"tabindex");if(t){return parseInt(t,10)}if(mt.test(e.nodeName)||gt.test(e.nodeName)&&e.href){return 0}return-1}}},propFix:{for:"htmlFor",class:"className"}});if(!p.optSelected){x.propHooks.selected={get:function(e){var t=e.parentNode;if(t&&t.parentNode){t.parentNode.selectedIndex}return null},set:function(e){var t=e.parentNode;if(t){t.selectedIndex;if(t.parentNode){t.parentNode.selectedIndex}}}}}x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this});function bt(e){var t=e.match(F)||[];return t.join(" ")}function yt(e){return e.getAttribute&&e.getAttribute("class")||""}function wt(e){if(Array.isArray(e)){return e}if(typeof e==="string"){return e.match(F)||[]}return[]}x.fn.extend({addClass:function(e){var t,n,i,o,r,a,s,l=0;if(v(e)){return this.each(function(t){x(this).addClass(e.call(this,t,yt(this)))})}t=wt(e);if(t.length){while(n=this[l++]){o=yt(n);i=n.nodeType===1&&" "+bt(o)+" ";if(i){a=0;while(r=t[a++]){if(i.indexOf(" "+r+" ")<0){i+=r+" "}}s=bt(i);if(o!==s){n.setAttribute("class",s)}}}}return this},removeClass:function(e){var t,n,i,o,r,a,s,l=0;if(v(e)){return this.each(function(t){x(this).removeClass(e.call(this,t,yt(this)))})}if(!arguments.length){return this.attr("class","")}t=wt(e);if(t.length){while(n=this[l++]){o=yt(n);i=n.nodeType===1&&" "+bt(o)+" ";if(i){a=0;while(r=t[a++]){while(i.indexOf(" "+r+" ")>-1){i=i.replace(" "+r+" "," ")}}s=bt(i);if(o!==s){n.setAttribute("class",s)}}}}return this},toggleClass:function(e,t){var n=typeof e,i=n==="string"||Array.isArray(e);if(typeof t==="boolean"&&i){return t?this.addClass(e):this.removeClass(e)}if(v(e)){return this.each(function(n){x(this).toggleClass(e.call(this,n,yt(this),t),t)})}return this.each(function(){var t,o,r,a;if(i){o=0;r=x(this);a=wt(e);while(t=a[o++]){if(r.hasClass(t)){r.removeClass(t)}else{r.addClass(t)}}}else if(e===undefined||n==="boolean"){t=yt(this);if(t){J.set(this,"__className__",t)}if(this.setAttribute){this.setAttribute("class",t||e===false?"":J.get(this,"__className__")||"")}}})},hasClass:function(e){var t,n,i=0;t=" "+e+" ";while(n=this[i++]){if(n.nodeType===1&&(" "+bt(yt(n))+" ").indexOf(t)>-1){return true}}return false}});var xt=/\r/g;x.fn.extend({val:function(e){var t,n,i,o=this[0];if(!arguments.length){if(o){t=x.valHooks[o.type]||x.valHooks[o.nodeName.toLowerCase()];if(t&&"get"in t&&(n=t.get(o,"value"))!==undefined){return n}n=o.value;if(typeof n==="string"){return n.replace(xt,"")}return n==null?"":n}return}i=v(e);return this.each(function(n){var o;if(this.nodeType!==1){return}if(i){o=e.call(this,n,x(this).val())}else{o=e}if(o==null){o=""}else if(typeof o==="number"){o+=""}else if(Array.isArray(o)){o=x.map(o,function(e){return e==null?"":e+""})}t=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()];if(!t||!("set"in t)||t.set(this,o,"value")===undefined){this.value=o}})}});x.extend({valHooks:{option:{get:function(e){var t=x.find.attr(e,"value");return t!=null?t:bt(x.text(e))}},select:{get:function(e){var t,n,i,o=e.options,r=e.selectedIndex,a=e.type==="select-one",s=a?null:[],l=a?r+1:o.length;if(r<0){i=l}else{i=a?r:0}for(;i<l;i++){n=o[i];if((n.selected||i===r)&&!n.disabled&&(!n.parentNode.disabled||!$(n.parentNode,"optgroup"))){t=x(n).val();if(a){return t}s.push(t)}}return s},set:function(e,t){var n,i,o=e.options,r=x.makeArray(t),a=o.length;while(a--){i=o[a];if(i.selected=x.inArray(x.valHooks.option.get(i),r)>-1){n=true}}if(!n){e.selectedIndex=-1}return r}}}});x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(e,t){if(Array.isArray(t)){return e.checked=x.inArray(x(e).val(),t)>-1}}};if(!p.checkOn){x.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value}}});p.focusin="onfocusin"in e;var Ct=/^(?:focusinfocus|focusoutblur)$/,kt=function(e){e.stopPropagation()};x.extend(x.event,{trigger:function(t,n,o,r){var a,s,l,u,c,d,h,p,g=[o||i],b=f.call(t,"type")?t.type:t,y=f.call(t,"namespace")?t.namespace.split("."):[];s=p=l=o=o||i;if(o.nodeType===3||o.nodeType===8){return}if(Ct.test(b+x.event.triggered)){return}if(b.indexOf(".")>-1){y=b.split(".");b=y.shift();y.sort()}c=b.indexOf(":")<0&&"on"+b;t=t[x.expando]?t:new x.Event(b,typeof t==="object"&&t);t.isTrigger=r?2:3;t.namespace=y.join(".");t.rnamespace=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;t.result=undefined;if(!t.target){t.target=o}n=n==null?[t]:x.makeArray(n,[t]);h=x.event.special[b]||{};if(!r&&h.trigger&&h.trigger.apply(o,n)===false){return}if(!r&&!h.noBubble&&!m(o)){u=h.delegateType||b;if(!Ct.test(u+b)){s=s.parentNode}for(;s;s=s.parentNode){g.push(s);l=s}if(l===(o.ownerDocument||i)){g.push(l.defaultView||l.parentWindow||e)}}a=0;while((s=g[a++])&&!t.isPropagationStopped()){p=s;t.type=a>1?u:h.bindType||b;d=(J.get(s,"events")||{})[t.type]&&J.get(s,"handle");if(d){d.apply(s,n)}d=c&&s[c];if(d&&d.apply&&X(s)){t.result=d.apply(s,n);if(t.result===false){t.preventDefault()}}}t.type=b;if(!r&&!t.isDefaultPrevented()){if((!h._default||h._default.apply(g.pop(),n)===false)&&X(o)){if(c&&v(o[b])&&!m(o)){l=o[c];if(l){o[c]=null}x.event.triggered=b;if(t.isPropagationStopped()){p.addEventListener(b,kt)}o[b]();if(t.isPropagationStopped()){p.removeEventListener(b,kt)}x.event.triggered=undefined;if(l){o[c]=l}}}}return t.result},simulate:function(e,t,n){var i=x.extend(new x.Event,n,{type:e,isSimulated:true});x.event.trigger(i,null,t)}});x.fn.extend({trigger:function(e,t){return this.each(function(){x.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n){return x.event.trigger(e,t,n,true)}}});if(!p.focusin){x.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){x.event.simulate(t,e.target,x.event.fix(e))};x.event.special[t]={setup:function(){var i=this.ownerDocument||this,o=J.access(i,t);if(!o){i.addEventListener(e,n,true)}J.access(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=J.access(i,t)-1;if(!o){i.removeEventListener(e,n,true);J.remove(i,t)}else{J.access(i,t,o)}}}})}var Tt=e.location;var St=Date.now();var Et=/\?/;x.parseXML=function(t){var n;if(!t||typeof t!=="string"){return null}try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=undefined}if(!n||n.getElementsByTagName("parsererror").length){x.error("Invalid XML: "+t)}return n};var Nt=/\[\]$/,$t=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,It=/^(?:input|select|textarea|keygen)/i;function Dt(e,t,n,i){var o;if(Array.isArray(t)){x.each(t,function(t,o){if(n||Nt.test(e)){i(e,o)}else{Dt(e+"["+(typeof o==="object"&&o!=null?t:"")+"]",o,n,i)}})}else if(!n&&y(t)==="object"){for(o in t){Dt(e+"["+o+"]",t[o],n,i)}}else{i(e,t)}}x.param=function(e,t){var n,i=[],o=function(e,t){var n=v(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(n==null?"":n)};if(Array.isArray(e)||e.jquery&&!x.isPlainObject(e)){x.each(e,function(){o(this.name,this.value)})}else{for(n in e){Dt(n,e[n],t,o)}}return i.join("&")};x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=x.prop(this,"elements");return e?x.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!x(this).is(":disabled")&&It.test(this.nodeName)&&!At.test(e)&&(this.checked||!he.test(e))}).map(function(e,t){var n=x(this).val();if(n==null){return null}if(Array.isArray(n)){return x.map(n,function(e){return{name:t.name,value:e.replace($t,"\r\n")}})}return{name:t.name,value:n.replace($t,"\r\n")}}).get()}});var Rt=/%20/g,Lt=/#.*$/,Ot=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ht=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ft=/^(?:GET|HEAD)$/,jt=/^\/\//,Mt={},Bt={},zt="*/".concat("*"),qt=i.createElement("a");qt.href=Tt.href;function Ut(e){return function(t,n){if(typeof t!=="string"){n=t;t="*"}var i,o=0,r=t.toLowerCase().match(F)||[];if(v(n)){while(i=r[o++]){if(i[0]==="+"){i=i.slice(1)||"*";(e[i]=e[i]||[]).unshift(n)}else{(e[i]=e[i]||[]).push(n)}}}}}function Kt(e,t,n,i){var o={},r=e===Bt;function a(s){var l;o[s]=true;x.each(e[s]||[],function(e,s){var u=s(t,n,i);if(typeof u==="string"&&!r&&!o[u]){t.dataTypes.unshift(u);a(u);return false}else if(r){return!(l=u)}});return l}return a(t.dataTypes[0])||!o["*"]&&a("*")}function Wt(e,t){var n,i,o=x.ajaxSettings.flatOptions||{};for(n in t){if(t[n]!==undefined){(o[n]?e:i||(i={}))[n]=t[n]}}if(i){x.extend(true,e,i)}return e}function _t(e,t,n){var i,o,r,a,s=e.contents,l=e.dataTypes;while(l[0]==="*"){l.shift();if(i===undefined){i=e.mimeType||t.getResponseHeader("Content-Type")}}if(i){for(o in s){if(s[o]&&s[o].test(i)){l.unshift(o);break}}}if(l[0]in n){r=l[0]}else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){r=o;break}if(!a){a=o}}r=r||a}if(r){if(r!==l[0]){l.unshift(r)}return n[r]}}function Vt(e,t,n,i){var o,r,a,s,l,u={},c=e.dataTypes.slice();if(c[1]){for(a in e.converters){u[a.toLowerCase()]=e.converters[a]}}r=c.shift();while(r){if(e.responseFields[r]){n[e.responseFields[r]]=t}if(!l&&i&&e.dataFilter){t=e.dataFilter(t,e.dataType)}l=r;r=c.shift();if(r){if(r==="*"){r=l}else if(l!=="*"&&l!==r){a=u[l+" "+r]||u["* "+r];if(!a){for(o in u){s=o.split(" ");if(s[1]===r){a=u[l+" "+s[0]]||u["* "+s[0]];if(a){if(a===true){a=u[o]}else if(u[o]!==true){r=s[0];c.unshift(s[1])}break}}}}if(a!==true){if(a&&e.throws){t=a(t)}else{try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+r}}}}}}}return{state:"success",data:t}}x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:"GET",isLocal:Ht.test(Tt.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(e,t){return t?Wt(Wt(e,x.ajaxSettings),t):Wt(x.ajaxSettings,e)},ajaxPrefilter:Ut(Mt),ajaxTransport:Ut(Bt),ajax:function(t,n){if(typeof t==="object"){n=t;t=undefined}n=n||{};var o,r,a,s,l,u,c,f,d,h,p=x.ajaxSetup({},n),v=p.context||p,m=p.context&&(v.nodeType||v.jquery)?x(v):x.event,g=x.Deferred(),b=x.Callbacks("once memory"),y=p.statusCode||{},w={},C={},k="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s){s={};while(t=Pt.exec(a)){s[t[1].toLowerCase()]=t[2]}}t=s[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){if(c==null){e=C[e.toLowerCase()]=C[e.toLowerCase()]||e;w[e]=t}return this},overrideMimeType:function(e){if(c==null){p.mimeType=e}return this},statusCode:function(e){var t;if(e){if(c){T.always(e[T.status])}else{for(t in e){y[t]=[y[t],e[t]]}}}return this},abort:function(e){var t=e||k;if(o){o.abort(t)}S(0,t);return this}};g.promise(T);p.url=((t||p.url||Tt.href)+"").replace(jt,Tt.protocol+"//");p.type=n.method||n.type||p.method||p.type;p.dataTypes=(p.dataType||"*").toLowerCase().match(F)||[""];if(p.crossDomain==null){u=i.createElement("a");try{u.href=p.url;u.href=u.href;p.crossDomain=qt.protocol+"//"+qt.host!==u.protocol+"//"+u.host}catch(e){p.crossDomain=true}}if(p.data&&p.processData&&typeof p.data!=="string"){p.data=x.param(p.data,p.traditional)}Kt(Mt,p,n,T);if(c){return T}f=x.event&&p.global;if(f&&x.active++===0){x.event.trigger("ajaxStart")}p.type=p.type.toUpperCase();p.hasContent=!Ft.test(p.type);r=p.url.replace(Lt,"");if(!p.hasContent){h=p.url.slice(r.length);if(p.data&&(p.processData||typeof p.data==="string")){r+=(Et.test(r)?"&":"?")+p.data;delete p.data}if(p.cache===false){r=r.replace(Ot,"$1");h=(Et.test(r)?"&":"?")+"_="+St+++h}p.url=r+h}else if(p.data&&p.processData&&(p.contentType||"").indexOf("application/x-www-form-urlencoded")===0){p.data=p.data.replace(Rt,"+")}if(p.ifModified){if(x.lastModified[r]){T.setRequestHeader("If-Modified-Since",x.lastModified[r])}if(x.etag[r]){T.setRequestHeader("If-None-Match",x.etag[r])}}if(p.data&&p.hasContent&&p.contentType!==false||n.contentType){T.setRequestHeader("Content-Type",p.contentType)}T.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+(p.dataTypes[0]!=="*"?", "+zt+"; q=0.01":""):p.accepts["*"]);for(d in p.headers){T.setRequestHeader(d,p.headers[d])}if(p.beforeSend&&(p.beforeSend.call(v,T,p)===false||c)){return T.abort()}k="abort";b.add(p.complete);T.done(p.success);T.fail(p.error);o=Kt(Bt,p,n,T);if(!o){S(-1,"No Transport")}else{T.readyState=1;if(f){m.trigger("ajaxSend",[T,p])}if(c){return T}if(p.async&&p.timeout>0){l=e.setTimeout(function(){T.abort("timeout")},p.timeout)}try{c=false;o.send(w,S)}catch(e){if(c){throw e}S(-1,e)}}function S(t,n,i,s){var u,d,h,w,C,k=n;if(c){return}c=true;if(l){e.clearTimeout(l)}o=undefined;a=s||"";T.readyState=t>0?4:0;u=t>=200&&t<300||t===304;if(i){w=_t(p,T,i)}w=Vt(p,w,T,u);if(u){if(p.ifModified){C=T.getResponseHeader("Last-Modified");if(C){x.lastModified[r]=C}C=T.getResponseHeader("etag");if(C){x.etag[r]=C}}if(t===204||p.type==="HEAD"){k="nocontent"}else if(t===304){k="notmodified"}else{k=w.state;d=w.data;h=w.error;u=!h}}else{h=k;if(t||!k){k="error";if(t<0){t=0}}}T.status=t;T.statusText=(n||k)+"";if(u){g.resolveWith(v,[d,k,T])}else{g.rejectWith(v,[T,k,h])}T.statusCode(y);y=undefined;if(f){m.trigger(u?"ajaxSuccess":"ajaxError",[T,p,u?d:h])}b.fireWith(v,[T,k]);if(f){m.trigger("ajaxComplete",[T,p]);if(!--x.active){x.event.trigger("ajaxStop")}}}return T},getJSON:function(e,t,n){return x.get(e,t,n,"json")},getScript:function(e,t){return x.get(e,undefined,t,"script")}});x.each(["get","post"],function(e,t){x[t]=function(e,n,i,o){if(v(n)){o=o||i;i=n;n=undefined}return x.ajax(x.extend({url:e,type:t,dataType:o,data:n,success:i},x.isPlainObject(e)&&e))}});x._evalUrl=function(e){return x.ajax({url:e,type:"GET",dataType:"script",cache:true,async:false,global:false,throws:true})};x.fn.extend({wrapAll:function(e){var t;if(this[0]){if(v(e)){e=e.call(this[0])}t=x(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){t.insertBefore(this[0])}t.map(function(){var e=this;while(e.firstElementChild){e=e.firstElementChild}return e}).append(this)}return this},wrapInner:function(e){if(v(e)){return this.each(function(t){x(this).wrapInner(e.call(this,t))})}return this.each(function(){var t=x(this),n=t.contents();if(n.length){n.wrapAll(e)}else{t.append(e)}})},wrap:function(e){var t=v(e);return this.each(function(n){x(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){this.parent(e).not("body").each(function(){x(this).replaceWith(this.childNodes)});return this}});x.expr.pseudos.hidden=function(e){return!x.expr.pseudos.visible(e)};x.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)};x.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Gt={0:200,1223:204},Qt=x.ajaxSettings.xhr();p.cors=!!Qt&&"withCredentials"in Qt;p.ajax=Qt=!!Qt;x.ajaxTransport(function(t){var n,i;if(p.cors||Qt&&!t.crossDomain){return{send:function(o,r){var a,s=t.xhr();s.open(t.type,t.url,t.async,t.username,t.password);if(t.xhrFields){for(a in t.xhrFields){s[a]=t.xhrFields[a]}}if(t.mimeType&&s.overrideMimeType){s.overrideMimeType(t.mimeType)}if(!t.crossDomain&&!o["X-Requested-With"]){o["X-Requested-With"]="XMLHttpRequest"}for(a in o){s.setRequestHeader(a,o[a])}n=function(e){return function(){if(n){n=i=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null;if(e==="abort"){s.abort()}else if(e==="error"){if(typeof s.status!=="number"){r(0,"error")}else{r(s.status,s.statusText)}}else{r(Gt[s.status]||s.status,s.statusText,(s.responseType||"text")!=="text"||typeof s.responseText!=="string"?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders())}}}};s.onload=n();i=s.onerror=s.ontimeout=n("error");if(s.onabort!==undefined){s.onabort=i}else{s.onreadystatechange=function(){if(s.readyState===4){e.setTimeout(function(){if(n){i()}})}}}n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n){throw e}}},abort:function(){if(n){n()}}}}});x.ajaxPrefilter(function(e){if(e.crossDomain){e.contents.script=false}});x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){x.globalEval(e);return e}}});x.ajaxPrefilter("script",function(e){if(e.cache===undefined){e.cache=false}if(e.crossDomain){e.type="GET"}});x.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(o,r){t=x("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove();n=null;if(e){r(e.type==="error"?404:200,e.type)}});i.head.appendChild(t[0])},abort:function(){if(n){n()}}}}});var Xt=[],Yt=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||x.expando+"_"+St++;this[e]=true;return e}});x.ajaxPrefilter("json jsonp",function(t,n,i){var o,r,a,s=t.jsonp!==false&&(Yt.test(t.url)?"url":typeof t.data==="string"&&(t.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Yt.test(t.data)&&"data");if(s||t.dataTypes[0]==="jsonp"){o=t.jsonpCallback=v(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback;if(s){t[s]=t[s].replace(Yt,"$1"+o)}else if(t.jsonp!==false){t.url+=(Et.test(t.url)?"&":"?")+t.jsonp+"="+o}t.converters["script json"]=function(){if(!a){x.error(o+" was not called")}return a[0]};t.dataTypes[0]="json";r=e[o];e[o]=function(){a=arguments};i.always(function(){if(r===undefined){x(e).removeProp(o)}else{e[o]=r}if(t[o]){t.jsonpCallback=n.jsonpCallback;Xt.push(o)}if(a&&v(r)){r(a[0])}a=r=undefined});return"script"}});p.createHTMLDocument=function(){var e=i.implementation.createHTMLDocument("").body;e.innerHTML="<form></form><form></form>";return e.childNodes.length===2}();x.parseHTML=function(e,t,n){if(typeof e!=="string"){return[]}if(typeof t==="boolean"){n=t;t=false}var o,r,a;if(!t){if(p.createHTMLDocument){t=i.implementation.createHTMLDocument("");o=t.createElement("base");o.href=i.location.href;t.head.appendChild(o)}else{t=i}}r=A.exec(e);a=!n&&[];if(r){return[t.createElement(r[1])]}r=we([e],t,a);if(a&&a.length){x(a).remove()}return x.merge([],r.childNodes)};x.fn.load=function(e,t,n){var i,o,r,a=this,s=e.indexOf(" ");if(s>-1){i=bt(e.slice(s));e=e.slice(0,s)}if(v(t)){n=t;t=undefined}else if(t&&typeof t==="object"){o="POST"}if(a.length>0){x.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){r=arguments;a.html(i?x("<div>").append(x.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,r||[e.responseText,t,e])})})}return this};x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){x.fn[t]=function(e){return this.on(t,e)}});x.expr.pseudos.animated=function(e){return x.grep(x.timers,function(t){return e===t.elem}).length};x.offset={setOffset:function(e,t,n){var i,o,r,a,s,l,u,c=x.css(e,"position"),f=x(e),d={};if(c==="static"){e.style.position="relative"}s=f.offset();r=x.css(e,"top");l=x.css(e,"left");u=(c==="absolute"||c==="fixed")&&(r+l).indexOf("auto")>-1;if(u){i=f.position();a=i.top;o=i.left}else{a=parseFloat(r)||0;o=parseFloat(l)||0}if(v(t)){t=t.call(e,n,x.extend({},s))}if(t.top!=null){d.top=t.top-s.top+a}if(t.left!=null){d.left=t.left-s.left+o}if("using"in t){t.using.call(e,d)}else{f.css(d)}}};x.fn.extend({offset:function(e){if(arguments.length){return e===undefined?this:this.each(function(t){x.offset.setOffset(this,e,t)})}var t,n,i=this[0];if(!i){return}if(!i.getClientRects().length){return{top:0,left:0}}t=i.getBoundingClientRect();n=i.ownerDocument.defaultView;return{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}},position:function(){if(!this[0]){return}var e,t,n,i=this[0],o={top:0,left:0};if(x.css(i,"position")==="fixed"){t=i.getBoundingClientRect()}else{t=this.offset();n=i.ownerDocument;e=i.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&x.css(e,"position")==="static"){e=e.parentNode}if(e&&e!==i&&e.nodeType===1){o=x(e).offset();o.top+=x.css(e,"borderTopWidth",true);o.left+=x.css(e,"borderLeftWidth",true)}}return{top:t.top-o.top-x.css(i,"marginTop",true),left:t.left-o.left-x.css(i,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&x.css(e,"position")==="static"){e=e.offsetParent}return e||xe})}});x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;x.fn[e]=function(i){return W(this,function(e,i,o){var r;if(m(e)){r=e}else if(e.nodeType===9){r=e.defaultView}if(o===undefined){return r?r[t]:e[i]}if(r){r.scrollTo(!n?o:r.pageXOffset,n?o:r.pageYOffset)}else{e[i]=o}},e,i,arguments.length)}});x.each(["top","left"],function(e,t){x.cssHooks[t]=Ke(p.pixelPosition,function(e,n){if(n){n=Ue(e,t);return Be.test(n)?x(e).position()[t]+"px":n}})});x.each({Height:"height",Width:"width"},function(e,t){x.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){x.fn[i]=function(o,r){var a=arguments.length&&(n||typeof o!=="boolean"),s=n||(o===true||r===true?"margin":"border");return W(this,function(t,n,o){var r;if(m(t)){return i.indexOf("outer")===0?t["inner"+e]:t.document.documentElement["client"+e]}if(t.nodeType===9){r=t.documentElement;return Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])}return o===undefined?x.css(t,n,s):x.style(t,n,o,s)},t,a?o:undefined,a)}})});x.each(("blur focus focusin focusout resize scroll click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup contextmenu").split(" "),function(e,t){x.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});x.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});x.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)}});x.proxy=function(e,t){var n,i,o;if(typeof t==="string"){n=e[t];t=e;e=n}if(!v(e)){return undefined}i=r.call(arguments,2);o=function(){return e.apply(t||this,i.concat(r.call(arguments)))};o.guid=e.guid=e.guid||x.guid++;return o};x.holdReady=function(e){if(e){x.readyWait++}else{x.ready(true)}};x.isArray=Array.isArray;x.parseJSON=JSON.parse;x.nodeName=$;x.isFunction=v;x.isWindow=m;x.camelCase=Q;x.type=y;x.now=Date.now;x.isNumeric=function(e){var t=x.type(e);return(t==="number"||t==="string")&&!isNaN(e-parseFloat(e))};if(typeof define==="function"&&define.amd){define("jquery",[],function(){return x})}var Jt=e.jQuery,Zt=e.$;x.noConflict=function(t){if(e.$===x){e.$=Zt}if(t&&e.jQuery===x){e.jQuery=Jt}return x};if(!t){e.jQuery=e.$=x}return x});(function(e,t){if(typeof define==="function"&&define.amd){define("Translator",t)}else if(typeof module==="object"&&module.exports){module.exports=t()}else{e.Translator=t()}})(this,function(){"use strict";var e={},t="en",n=[],i=new RegExp(/^\w+\: +(.+)$/),o=new RegExp(/^\s*((\{\s*(\-?\d+[\s*,\s*\-?\d+]*)\s*\})|([\[\]])\s*(-Inf|\-?\d+)\s*,\s*(\+?Inf|\-?\d+)\s*([\[\]]))\s?(.+?)$/),r=new RegExp(/^\s*(\{\s*(\-?\d+[\s*,\s*\-?\d+]*)\s*\})|([\[\]])\s*(-Inf|\-?\d+)\s*,\s*(\+?Inf|\-?\d+)\s*([\[\]])/);var a={locale:p(),fallback:t,placeHolderPrefix:"%",placeHolderSuffix:"%",defaultDomain:"messages",pluralSeparator:"|",add:function(t,i,o,r){var a=r||this.locale||this.fallback,s=o||this.defaultDomain;if(!e[a]){e[a]={}}if(!e[a][s]){e[a][s]={}}e[a][s][t]=i;if(false===h(n,s)){n.push(s)}return this},trans:function(e,t,n,i){var o=l(e,n,i,this.locale,this.fallback);return s(o,t||{})},transChoice:function(e,t,n,i,o){var r=l(e,i,o,this.locale,this.fallback);var a=parseInt(t,10);n=n||{};if(n.count===undefined){n.count=t}if(typeof r!=="undefined"&&!isNaN(a)){r=c(r,a,o||this.locale||this.fallback)}return s(r,n)},fromJSON:function(e){if(typeof e==="string"){e=JSON.parse(e)}if(e.locale){this.locale=e.locale}if(e.fallback){this.fallback=e.fallback}if(e.defaultDomain){this.defaultDomain=e.defaultDomain}if(e.translations){for(var t in e.translations){for(var n in e.translations[t]){for(var i in e.translations[t][n]){this.add(i,e.translations[t][n][i],n,t)}}}}return this},reset:function(){e={};n=[];this.locale=p()}};function s(e,t){var n,i=a.placeHolderPrefix,o=a.placeHolderSuffix;for(n in t){var r=new RegExp(i+n+o,"g");if(r.test(e)){var s=String(t[n]).replace(new RegExp("\\$","g"),"$$$$");e=e.replace(r,s)}}return e}function l(t,i,o,r,a){var s=o||r||a,l=i;var c=s.split("_")[0];if(!(s in e)){if(!(c in e)){if(!(a in e)){return t}s=a}else{s=c}}if(typeof l==="undefined"||null===l){for(var f=0;f<n.length;f++){if(u(s,n[f],t)||u(c,n[f],t)||u(a,n[f],t)){l=n[f];break}}}if(u(s,l,t)){return e[s][l][t]}var d,h,p,v;while(s.length>2){d=s.length;h=s.split(/[\s_]+/);p=h[h.length-1];v=p.length;if(1===h.length){break}s=s.substring(0,d-(v+1));if(u(s,l,t)){return e[s][l][t]}}if(u(a,l,t)){return e[a][l][t]}return t}function u(t,n,i){if(!(t in e)){return false}if(!(n in e[t])){return false}if(!(i in e[t][n])){return false}return true}function c(e,t,n){var s,l,u=[],c=[],h=e.split(a.pluralSeparator),p=[];for(s=0;s<h.length;s++){var v=h[s];if(o.test(v)){p=v.match(o);u[p[0]]=p[p.length-1]}else if(i.test(v)){p=v.match(i);c.push(p[1])}else{c.push(v)}}for(l in u){if(r.test(l)){p=l.match(r);if(p[1]){var m=p[2].split(","),g;for(g in m){if(t==m[g]){return u[l]}}}else{var b=f(p[4]);var y=f(p[5]);if(("["===p[3]?t>=b:t>b)&&("]"===p[6]?t<=y:t<y)){return u[l]}}}}return c[d(t,n)]||c[0]||undefined}function f(e){if("-Inf"===e){return Number.NEGATIVE_INFINITY}else if("+Inf"===e||"Inf"===e){return Number.POSITIVE_INFINITY}return parseInt(e,10)}function d(e,t){var n=t;if("pt_BR"===n){n="xbr"}if(n.length>3){n=n.split("_")[0]}switch(n){case"bo":case"dz":case"id":case"ja":case"jv":case"ka":case"km":case"kn":case"ko":case"ms":case"th":case"tr":case"vi":case"zh":return 0;case"af":case"az":case"bn":case"bg":case"ca":case"da":case"de":case"el":case"en":case"eo":case"es":case"et":case"eu":case"fa":case"fi":case"fo":case"fur":case"fy":case"gl":case"gu":case"ha":case"he":case"hu":case"is":case"it":case"ku":case"lb":case"ml":case"mn":case"mr":case"nah":case"nb":case"ne":case"nl":case"nn":case"no":case"om":case"or":case"pa":case"pap":case"ps":case"pt":case"so":case"sq":case"sv":case"sw":case"ta":case"te":case"tk":case"ur":case"zu":return e==1?0:1;case"am":case"bh":case"fil":case"fr":case"gun":case"hi":case"ln":case"mg":case"nso":case"xbr":case"ti":case"wa":return e===0||e==1?0:1;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2;case"cs":case"sk":return e==1?0:e>=2&&e<=4?1:2;case"ga":return e==1?0:e==2?1:2;case"lt":return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2;case"sl":return e%100==1?0:e%100==2?1:e%100==3||e%100==4?2:3;case"mk":return e%10==1?0:1;case"mt":return e==1?0:e===0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3;case"lv":return e===0?0:e%10==1&&e%100!=11?1:2;case"pl":return e==1?0:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?1:2;case"cy":return e==1?0:e==2?1:e==8||e==11?2:3;case"ro":return e==1?0:e===0||e%100>0&&e%100<20?1:2;case"ar":return e===0?0:e==1?1:e==2?2:e>=3&&e<=10?3:e>=11&&e<=99?4:5;default:return 0}}function h(e,t){for(var n=0;n<e.length;n++){if(t===e[n]){return true}}return false}function p(){if(typeof document!=="undefined"){return document.documentElement.lang.replace("-","_")}else{return t}}return a});if(typeof jQuery==="undefined"){throw new Error("Bootstrap's JavaScript requires jQuery")}+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||t[0]==1&&t[1]==9&&t[2]<1||t[0]>3){throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}}(jQuery);+function(e){"use strict";function t(){var e=document.createElement("bootstrap");var t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t){if(e.style[n]!==undefined){return{end:t[n]}}}return false}e.fn.emulateTransitionEnd=function(t){var n=false;var i=this;e(this).one("bsTransitionEnd",function(){n=true});var o=function(){if(!n)e(i).trigger(e.support.transition.end)};setTimeout(o,t);return this};e(function(){e.support.transition=t();if(!e.support.transition)return;e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}}})}(jQuery);+function(e){"use strict";var t='[data-dismiss="alert"]';var n=function(n){e(n).on("click",t,this.close)};n.VERSION="3.3.7";n.TRANSITION_DURATION=150;n.prototype.close=function(t){var i=e(this);var o=i.attr("data-target");if(!o){o=i.attr("href");o=o&&o.replace(/.*(?=#[^\s]*$)/,"")}var r=e(o==="#"?[]:o);if(t)t.preventDefault();if(!r.length){r=i.closest(".alert")}r.trigger(t=e.Event("close.bs.alert"));if(t.isDefaultPrevented())return;r.removeClass("in");function a(){r.detach().trigger("closed.bs.alert").remove()}e.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",a).emulateTransitionEnd(n.TRANSITION_DURATION):a()};function i(t){return this.each(function(){var i=e(this);var o=i.data("bs.alert");if(!o)i.data("bs.alert",o=new n(this));if(typeof t=="string")o[t].call(i)})}var o=e.fn.alert;e.fn.alert=i;e.fn.alert.Constructor=n;e.fn.alert.noConflict=function(){e.fn.alert=o;return this};e(document).on("click.bs.alert.data-api",t,n.prototype.close)}(jQuery);+function(e){"use strict";var t=function(n,i){this.$element=e(n);this.options=e.extend({},t.DEFAULTS,i);this.isLoading=false};t.VERSION="3.3.7";t.DEFAULTS={loadingText:"loading..."};t.prototype.setState=function(t){var n="disabled";var i=this.$element;var o=i.is("input")?"val":"html";var r=i.data();t+="Text";if(r.resetText==null)i.data("resetText",i[o]());setTimeout(e.proxy(function(){i[o](r[t]==null?this.options[t]:r[t]);if(t=="loadingText"){this.isLoading=true;i.addClass(n).attr(n,n).prop(n,true)}else if(this.isLoading){this.isLoading=false;i.removeClass(n).removeAttr(n).prop(n,false)}},this),0)};t.prototype.toggle=function(){var e=true;var t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");if(n.prop("type")=="radio"){if(n.prop("checked"))e=false;t.find(".active").removeClass("active");this.$element.addClass("active")}else if(n.prop("type")=="checkbox"){if(n.prop("checked")!==this.$element.hasClass("active"))e=false;this.$element.toggleClass("active")}n.prop("checked",this.$element.hasClass("active"));if(e)n.trigger("change")}else{this.$element.attr("aria-pressed",!this.$element.hasClass("active"));this.$element.toggleClass("active")}};function n(n){return this.each(function(){var i=e(this);var o=i.data("bs.button");var r=typeof n=="object"&&n;if(!o)i.data("bs.button",o=new t(this,r));if(n=="toggle")o.toggle();else if(n)o.setState(n)})}var i=e.fn.button;e.fn.button=n;e.fn.button.Constructor=t;e.fn.button.noConflict=function(){e.fn.button=i;return this};e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var i=e(t.target).closest(".btn");n.call(i,"toggle");if(!e(t.target).is('input[type="radio"], input[type="checkbox"]')){t.preventDefault();if(i.is("input,button"))i.trigger("focus");else i.find("input:visible,button:visible").first().trigger("focus")}}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery);+function(e){"use strict";var t=function(t,n){this.$element=e(t);this.$indicators=this.$element.find(".carousel-indicators");this.options=n;this.paused=null;this.sliding=null;this.interval=null;this.$active=null;this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this));this.options.pause=="hover"&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};t.VERSION="3.3.7";t.TRANSITION_DURATION=600;t.DEFAULTS={interval:5e3,pause:"hover",wrap:true,keyboard:true};t.prototype.keydown=function(e){if(/input|textarea/i.test(e.target.tagName))return;switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()};t.prototype.cycle=function(t){t||(this.paused=false);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval));return this};t.prototype.getItemIndex=function(e){this.$items=e.parent().children(".item");return this.$items.index(e||this.$active)};t.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t);var i=e=="prev"&&n===0||e=="next"&&n==this.$items.length-1;if(i&&!this.options.wrap)return t;var o=e=="prev"?-1:1;var r=(n+o)%this.$items.length;return this.$items.eq(r)};t.prototype.to=function(e){var t=this;var n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(e>this.$items.length-1||e<0)return;if(this.sliding)return this.$element.one("slid.bs.carousel",function(){t.to(e)});if(n==e)return this.pause().cycle();return this.slide(e>n?"next":"prev",this.$items.eq(e))};t.prototype.pause=function(t){t||(this.paused=true);if(this.$element.find(".next, .prev").length&&e.support.transition){this.$element.trigger(e.support.transition.end);this.cycle(true)}this.interval=clearInterval(this.interval);return this};t.prototype.next=function(){if(this.sliding)return;return this.slide("next")};t.prototype.prev=function(){if(this.sliding)return;return this.slide("prev")};t.prototype.slide=function(n,i){var o=this.$element.find(".item.active");var r=i||this.getItemForDirection(n,o);var a=this.interval;var s=n=="next"?"left":"right";var l=this;if(r.hasClass("active"))return this.sliding=false;var u=r[0];var c=e.Event("slide.bs.carousel",{relatedTarget:u,direction:s});this.$element.trigger(c);if(c.isDefaultPrevented())return;this.sliding=true;a&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var f=e(this.$indicators.children()[this.getItemIndex(r)]);f&&f.addClass("active")}var d=e.Event("slid.bs.carousel",{relatedTarget:u,direction:s});if(e.support.transition&&this.$element.hasClass("slide")){r.addClass(n);r[0].offsetWidth;o.addClass(s);r.addClass(s);o.one("bsTransitionEnd",function(){r.removeClass([n,s].join(" ")).addClass("active");o.removeClass(["active",s].join(" "));l.sliding=false;setTimeout(function(){l.$element.trigger(d)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)}else{o.removeClass("active");r.addClass("active");this.sliding=false;this.$element.trigger(d)}a&&this.cycle();return this};function n(n){return this.each(function(){var i=e(this);var o=i.data("bs.carousel");var r=e.extend({},t.DEFAULTS,i.data(),typeof n=="object"&&n);var a=typeof n=="string"?n:r.slide;if(!o)i.data("bs.carousel",o=new t(this,r));if(typeof n=="number")o.to(n);else if(a)o[a]();else if(r.interval)o.pause().cycle()})}var i=e.fn.carousel;e.fn.carousel=n;e.fn.carousel.Constructor=t;e.fn.carousel.noConflict=function(){e.fn.carousel=i;return this};var o=function(t){var i;var o=e(this);var r=e(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(!r.hasClass("carousel"))return;var a=e.extend({},r.data(),o.data());var s=o.attr("data-slide-to");if(s)a.interval=false;n.call(r,a);if(s){r.data("bs.carousel").to(s)}t.preventDefault()};e(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o);e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery);+function(e){"use strict";var t=function(n,i){this.$element=e(n);this.options=e.extend({},t.DEFAULTS,i);this.$trigger=e('[data-toggle="collapse"][href="#'+n.id+'"],'+'[data-toggle="collapse"][data-target="#'+n.id+'"]');this.transitioning=null;if(this.options.parent){this.$parent=this.getParent()}else{this.addAriaAndCollapsedClass(this.$element,this.$trigger)}if(this.options.toggle)this.toggle()};t.VERSION="3.3.7";t.TRANSITION_DURATION=350;t.DEFAULTS={toggle:true};t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"};t.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var n;var o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(o&&o.length){n=o.data("bs.collapse");if(n&&n.transitioning)return}var r=e.Event("show.bs.collapse");this.$element.trigger(r);if(r.isDefaultPrevented())return;if(o&&o.length){i.call(o,"hide");n||o.data("bs.collapse",null)}var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",true);this.$trigger.removeClass("collapsed").attr("aria-expanded",true);this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var l=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[a](this.$element[0][l])};t.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var n=e.Event("hide.bs.collapse");this.$element.trigger(n);if(n.isDefaultPrevented())return;var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",false);this.$trigger.addClass("collapsed").attr("aria-expanded",false);this.transitioning=1;var o=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!e.support.transition)return o.call(this);this.$element[i](0).one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(t.TRANSITION_DURATION)};t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};t.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(t,i){var o=e(i);this.addAriaAndCollapsedClass(n(o),o)},this)).end()};t.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n);t.toggleClass("collapsed",!n).attr("aria-expanded",n)};function n(t){var n;var i=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(i)}function i(n){return this.each(function(){var i=e(this);var o=i.data("bs.collapse");var r=e.extend({},t.DEFAULTS,i.data(),typeof n=="object"&&n);if(!o&&r.toggle&&/show|hide/.test(n))r.toggle=false;if(!o)i.data("bs.collapse",o=new t(this,r));if(typeof n=="string")o[n]()})}var o=e.fn.collapse;e.fn.collapse=i;e.fn.collapse.Constructor=t;e.fn.collapse.noConflict=function(){e.fn.collapse=o;return this};e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var o=e(this);if(!o.attr("data-target"))t.preventDefault();var r=n(o);var a=r.data("bs.collapse");var s=a?"toggle":o.data();i.call(r,s)})}(jQuery);+function(e){"use strict";var t=".dropdown-backdrop";var n='[data-toggle="dropdown"]';var i=function(t){e(t).on("click.bs.dropdown",this.toggle)};i.VERSION="3.3.7";function o(t){var n=t.attr("data-target");if(!n){n=t.attr("href");n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")}var i=n&&e(n);return i&&i.length?i:t.parent()}function r(i){if(i&&i.which===3)return;e(t).remove();e(n).each(function(){var t=e(this);var n=o(t);var r={relatedTarget:this};if(!n.hasClass("open"))return;if(i&&i.type=="click"&&/input|textarea/i.test(i.target.tagName)&&e.contains(n[0],i.target))return;n.trigger(i=e.Event("hide.bs.dropdown",r));if(i.isDefaultPrevented())return;t.attr("aria-expanded","false");n.removeClass("open").trigger(e.Event("hidden.bs.dropdown",r))})}i.prototype.toggle=function(t){var n=e(this);if(n.is(".disabled, :disabled"))return;var i=o(n);var a=i.hasClass("open");r();if(!a){if("ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length){e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",r)}var s={relatedTarget:this};i.trigger(t=e.Event("show.bs.dropdown",s));if(t.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true");i.toggleClass("open").trigger(e.Event("shown.bs.dropdown",s))}return false};i.prototype.keydown=function(t){if(!/(38|40|27|32)/.test(t.which)||/input|textarea/i.test(t.target.tagName))return;var i=e(this);t.preventDefault();t.stopPropagation();if(i.is(".disabled, :disabled"))return;var r=o(i);var a=r.hasClass("open");if(!a&&t.which!=27||a&&t.which==27){if(t.which==27)r.find(n).trigger("focus");return i.trigger("click")}var s=" li:not(.disabled):visible a";var l=r.find(".dropdown-menu"+s);if(!l.length)return;var u=l.index(t.target);if(t.which==38&&u>0)u--;if(t.which==40&&u<l.length-1)u++;if(!~u)u=0;l.eq(u).trigger("focus")};function a(t){return this.each(function(){var n=e(this);var o=n.data("bs.dropdown");if(!o)n.data("bs.dropdown",o=new i(this));if(typeof t=="string")o[t].call(n)})}var s=e.fn.dropdown;e.fn.dropdown=a;e.fn.dropdown.Constructor=i;e.fn.dropdown.noConflict=function(){e.fn.dropdown=s;return this};e(document).on("click.bs.dropdown.data-api",r).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",n,i.prototype.toggle).on("keydown.bs.dropdown.data-api",n,i.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",i.prototype.keydown)}(jQuery);+function(e){"use strict";var t=function(t,n){this.options=n;this.$body=e(document.body);this.$element=e(t);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=false;if(this.options.remote){this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}};t.VERSION="3.3.7";t.TRANSITION_DURATION=300;t.BACKDROP_TRANSITION_DURATION=150;t.DEFAULTS={backdrop:true,keyboard:true,show:true};t.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)};t.prototype.show=function(n){var i=this;var o=e.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(o);if(this.isShown||o.isDefaultPrevented())return;this.isShown=true;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this));this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(t){if(e(t.target).is(i.$element))i.ignoreBackdropClick=true})});this.backdrop(function(){var o=e.support.transition&&i.$element.hasClass("fade");if(!i.$element.parent().length){i.$element.appendTo(i.$body)}i.$element.show().scrollTop(0);i.adjustDialog();if(o){i.$element[0].offsetWidth}i.$element.addClass("in");i.enforceFocus();var r=e.Event("shown.bs.modal",{relatedTarget:n});o?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(t.TRANSITION_DURATION):i.$element.trigger("focus").trigger(r)})};t.prototype.hide=function(n){if(n)n.preventDefault();n=e.Event("hide.bs.modal");this.$element.trigger(n);if(!this.isShown||n.isDefaultPrevented())return;this.isShown=false;this.escape();this.resize();e(document).off("focusin.bs.modal");this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal");this.$dialog.off("mousedown.dismiss.bs.modal");e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal()};t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){if(document!==e.target&&this.$element[0]!==e.target&&!this.$element.has(e.target).length){this.$element.trigger("focus")}},this))};t.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){e.which==27&&this.hide()},this))}else if(!this.isShown){this.$element.off("keydown.dismiss.bs.modal")}};t.prototype.resize=function(){if(this.isShown){e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this))}else{e(window).off("resize.bs.modal")}};t.prototype.hideModal=function(){var e=this;this.$element.hide();this.backdrop(function(){e.$body.removeClass("modal-open");e.resetAdjustments();e.resetScrollbar();e.$element.trigger("hidden.bs.modal")})};t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};t.prototype.backdrop=function(n){var i=this;var o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=e.support.transition&&o;this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){if(this.ignoreBackdropClick){this.ignoreBackdropClick=false;return}if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus():this.hide()},this));if(r)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");if(!n)return;r?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):n()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){i.removeBackdrop();n&&n()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):a()}else if(n){n()}};t.prototype.handleUpdate=function(){this.adjustDialog()};t.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})};t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};t.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e;this.scrollbarWidth=this.measureScrollbar()};t.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";if(this.bodyIsOverflowing)this.$body.css("padding-right",e+this.scrollbarWidth)};t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};t.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure";this.$body.append(e);var t=e.offsetWidth-e.clientWidth;this.$body[0].removeChild(e);return t};function n(n,i){return this.each(function(){var o=e(this);var r=o.data("bs.modal");var a=e.extend({},t.DEFAULTS,o.data(),typeof n=="object"&&n);if(!r)o.data("bs.modal",r=new t(this,a));if(typeof n=="string")r[n](i);else if(a.show)r.show(i)})}var i=e.fn.modal;e.fn.modal=n;e.fn.modal.Constructor=t;e.fn.modal.noConflict=function(){e.fn.modal=i;return this};e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var i=e(this);var o=i.attr("href");var r=e(i.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,""));var a=r.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(o)&&o},r.data(),i.data());if(i.is("a"))t.preventDefault();r.one("show.bs.modal",function(e){if(e.isDefaultPrevented())return;r.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})});n.call(r,a,this)})}(jQuery);+function(e){"use strict";var t=function(e,t){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.inState=null;this.init("tooltip",e,t)};t.VERSION="3.3.7";t.TRANSITION_DURATION=150;t.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0}};t.prototype.init=function(t,n,i){this.enabled=true;this.type=t;this.$element=e(n);this.options=this.getOptions(i);this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport);this.inState={click:false,hover:false,focus:false};if(this.$element[0]instanceof document.constructor&&!this.options.selector){throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!")}var o=this.options.trigger.split(" ");for(var r=o.length;r--;){var a=o[r];if(a=="click"){this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this))}else if(a!="manual"){var s=a=="hover"?"mouseenter":"focusin";var l=a=="hover"?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this));this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.getOptions=function(t){t=e.extend({},this.getDefaults(),this.$element.data(),t);if(t.delay&&typeof t.delay=="number"){t.delay={show:t.delay,hide:t.delay}}return t};t.prototype.getDelegateOptions=function(){var t={};var n=this.getDefaults();this._options&&e.each(this._options,function(e,i){if(n[e]!=i)t[e]=i});return t};t.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(!n){n=new this.constructor(t.currentTarget,this.getDelegateOptions());e(t.currentTarget).data("bs."+this.type,n)}if(t instanceof e.Event){n.inState[t.type=="focusin"?"focus":"hover"]=true}if(n.tip().hasClass("in")||n.hoverState=="in"){n.hoverState="in";return}clearTimeout(n.timeout);n.hoverState="in";if(!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){if(n.hoverState=="in")n.show()},n.options.delay.show)};t.prototype.isInStateTrue=function(){for(var e in this.inState){if(this.inState[e])return true}return false};t.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(!n){n=new this.constructor(t.currentTarget,this.getDelegateOptions());e(t.currentTarget).data("bs."+this.type,n)}if(t instanceof e.Event){n.inState[t.type=="focusout"?"focus":"hover"]=false}if(n.isInStateTrue())return;clearTimeout(n.timeout);n.hoverState="out";if(!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){if(n.hoverState=="out")n.hide()},n.options.delay.hide)};t.prototype.show=function(){var n=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(n);var i=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(n.isDefaultPrevented()||!i)return;var o=this;var r=this.tip();var a=this.getUID(this.type);this.setContent();r.attr("id",a);this.$element.attr("aria-describedby",a);if(this.options.animation)r.addClass("fade");var s=typeof this.options.placement=="function"?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement;var l=/\s?auto?\s?/i;var u=l.test(s);if(u)s=s.replace(l,"")||"top";r.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this);this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition();var f=r[0].offsetWidth;var d=r[0].offsetHeight;if(u){var h=s;var p=this.getPosition(this.$viewport);s=s=="bottom"&&c.bottom+d>p.bottom?"top":s=="top"&&c.top-d<p.top?"bottom":s=="right"&&c.right+f>p.width?"left":s=="left"&&c.left-f<p.left?"right":s;r.removeClass(h).addClass(s)}var v=this.getCalculatedOffset(s,c,f,d);this.applyPlacement(v,s);var m=function(){var e=o.hoverState;o.$element.trigger("shown.bs."+o.type);o.hoverState=null;if(e=="out")o.leave(o)};e.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",m).emulateTransitionEnd(t.TRANSITION_DURATION):m()}};t.prototype.applyPlacement=function(t,n){var i=this.tip();var o=i[0].offsetWidth;var r=i[0].offsetHeight;var a=parseInt(i.css("margin-top"),10);var s=parseInt(i.css("margin-left"),10);if(isNaN(a))a=0;if(isNaN(s))s=0;t.top+=a;t.left+=s;e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0);i.addClass("in");var l=i[0].offsetWidth;var u=i[0].offsetHeight;if(n=="top"&&u!=r){t.top=t.top+r-u}var c=this.getViewportAdjustedDelta(n,t,l,u);if(c.left)t.left+=c.left;else t.top+=c.top;var f=/top|bottom/.test(n);var d=f?c.left*2-o+l:c.top*2-r+u;var h=f?"offsetWidth":"offsetHeight";i.offset(t);this.replaceArrow(d,i[0][h],f)};t.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")};t.prototype.setContent=function(){var e=this.tip();var t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t);e.removeClass("fade in top bottom left right")};t.prototype.hide=function(n){var i=this;var o=e(this.$tip);var r=e.Event("hide.bs."+this.type);function a(){if(i.hoverState!="in")o.detach();if(i.$element){i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type)}n&&n()}this.$element.trigger(r);if(r.isDefaultPrevented())return;o.removeClass("in");e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",a).emulateTransitionEnd(t.TRANSITION_DURATION):a();this.hoverState=null;return this};t.prototype.fixTitle=function(){var e=this.$element;if(e.attr("title")||typeof e.attr("data-original-title")!="string"){e.attr("data-original-title",e.attr("title")||"").attr("title","")}};t.prototype.hasContent=function(){return this.getTitle()};t.prototype.getPosition=function(t){t=t||this.$element;var n=t[0];var i=n.tagName=="BODY";var o=n.getBoundingClientRect();if(o.width==null){o=e.extend({},o,{width:o.right-o.left,height:o.bottom-o.top})}var r=window.SVGElement&&n instanceof window.SVGElement;var a=i?{top:0,left:0}:r?null:t.offset();var s={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()};var l=i?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},o,s,l,a)};t.prototype.getCalculatedOffset=function(e,t,n,i){return e=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-n/2}:e=="top"?{top:t.top-i,left:t.left+t.width/2-n/2}:e=="left"?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}};t.prototype.getViewportAdjustedDelta=function(e,t,n,i){var o={top:0,left:0};if(!this.$viewport)return o;var r=this.options.viewport&&this.options.viewport.padding||0;var a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-r-a.scroll;var l=t.top+r-a.scroll+i;if(s<a.top){o.top=a.top-s}else if(l>a.top+a.height){o.top=a.top+a.height-l}}else{var u=t.left-r;var c=t.left+r+n;if(u<a.left){o.left=a.left-u}else if(c>a.right){o.left=a.left+a.width-c}}return o};t.prototype.getTitle=function(){var e;var t=this.$element;var n=this.options;e=t.attr("data-original-title")||(typeof n.title=="function"?n.title.call(t[0]):n.title);return e};t.prototype.getUID=function(e){do{e+=~~(Math.random()*1e6)}while(document.getElementById(e));return e};t.prototype.tip=function(){if(!this.$tip){this.$tip=e(this.options.template);if(this.$tip.length!=1){throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")}}return this.$tip};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};t.prototype.enable=function(){this.enabled=true};t.prototype.disable=function(){this.enabled=false};t.prototype.toggleEnabled=function(){this.enabled=!this.enabled};t.prototype.toggle=function(t){var n=this;if(t){n=e(t.currentTarget).data("bs."+this.type);if(!n){n=new this.constructor(t.currentTarget,this.getDelegateOptions());e(t.currentTarget).data("bs."+this.type,n)}}if(t){n.inState.click=!n.inState.click;if(n.isInStateTrue())n.enter(n);else n.leave(n)}else{n.tip().hasClass("in")?n.leave(n):n.enter(n)}};t.prototype.destroy=function(){var e=this;clearTimeout(this.timeout);this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type);if(e.$tip){e.$tip.detach()}e.$tip=null;e.$arrow=null;e.$viewport=null;e.$element=null})};function n(n){return this.each(function(){var i=e(this);var o=i.data("bs.tooltip");var r=typeof n=="object"&&n;if(!o&&/destroy|hide/.test(n))return;if(!o)i.data("bs.tooltip",o=new t(this,r));if(typeof n=="string")o[n]()})}var i=e.fn.tooltip;e.fn.tooltip=n;e.fn.tooltip.Constructor=t;e.fn.tooltip.noConflict=function(){e.fn.tooltip=i;return this}}(jQuery);+function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.7";t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype);t.prototype.constructor=t;t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.setContent=function(){var e=this.tip();var t=this.getTitle();var n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t);e.find(".popover-content").children().detach().end()[this.options.html?typeof n=="string"?"html":"append":"text"](n);e.removeClass("fade top bottom left right in");if(!e.find(".popover-title").html())e.find(".popover-title").hide()};t.prototype.hasContent=function(){return this.getTitle()||this.getContent()};t.prototype.getContent=function(){var e=this.$element;var t=this.options;return e.attr("data-content")||(typeof t.content=="function"?t.content.call(e[0]):t.content)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};function n(n){return this.each(function(){var i=e(this);var o=i.data("bs.popover");var r=typeof n=="object"&&n;if(!o&&/destroy|hide/.test(n))return;if(!o)i.data("bs.popover",o=new t(this,r));if(typeof n=="string")o[n]()})}var i=e.fn.popover;e.fn.popover=n;e.fn.popover.Constructor=t;e.fn.popover.noConflict=function(){e.fn.popover=i;return this}}(jQuery);+function(e){"use strict";function t(n,i){this.$body=e(document.body);this.$scrollElement=e(n).is(document.body)?e(window):e(n);this.options=e.extend({},t.DEFAULTS,i);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this));this.refresh();this.process()}t.VERSION="3.3.7";t.DEFAULTS={offset:10};t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};t.prototype.refresh=function(){var t=this;var n="offset";var i=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();if(!e.isWindow(this.$scrollElement[0])){n="position";i=this.$scrollElement.scrollTop()}this.$body.find(this.selector).map(function(){var t=e(this);var o=t.data("target")||t.attr("href");var r=/^#./.test(o)&&e(o);return r&&r.length&&r.is(":visible")&&[[r[n]().top+i,o]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]);t.targets.push(this[1])})};t.prototype.process=function(){var e=this.$scrollElement.scrollTop()+this.options.offset;var t=this.getScrollHeight();var n=this.options.offset+t-this.$scrollElement.height();var i=this.offsets;var o=this.targets;var r=this.activeTarget;var a;if(this.scrollHeight!=t){this.refresh()}if(e>=n){return r!=(a=o[o.length-1])&&this.activate(a)}if(r&&e<i[0]){this.activeTarget=null;return this.clear()}for(a=i.length;a--;){r!=o[a]&&e>=i[a]&&(i[a+1]===undefined||e<i[a+1])&&this.activate(o[a])}};t.prototype.activate=function(t){this.activeTarget=t;this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]';var i=e(n).parents("li").addClass("active");if(i.parent(".dropdown-menu").length){i=i.closest("li.dropdown").addClass("active")}i.trigger("activate.bs.scrollspy")};t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};function n(n){return this.each(function(){var i=e(this);var o=i.data("bs.scrollspy");var r=typeof n=="object"&&n;if(!o)i.data("bs.scrollspy",o=new t(this,r));if(typeof n=="string")o[n]()})}var i=e.fn.scrollspy;e.fn.scrollspy=n;e.fn.scrollspy.Constructor=t;e.fn.scrollspy.noConflict=function(){e.fn.scrollspy=i;return this};e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery);+function(e){"use strict";var t=function(t){this.element=e(t)};t.VERSION="3.3.7";t.TRANSITION_DURATION=150;t.prototype.show=function(){var t=this.element;var n=t.closest("ul:not(.dropdown-menu)");var i=t.data("target");if(!i){i=t.attr("href");i=i&&i.replace(/.*(?=#[^\s]*$)/,"")}if(t.parent("li").hasClass("active"))return;var o=n.find(".active:last a");var r=e.Event("hide.bs.tab",{relatedTarget:t[0]});var a=e.Event("show.bs.tab",{relatedTarget:o[0]});o.trigger(r);t.trigger(a);if(a.isDefaultPrevented()||r.isDefaultPrevented())return;var s=e(i);this.activate(t.closest("li"),n);this.activate(s,s.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:t[0]});t.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})};t.prototype.activate=function(n,i,o){var r=i.find("> .active");var a=o&&e.support.transition&&(r.length&&r.hasClass("fade")||!!i.find("> .fade").length);function s(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",false);n.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",true);if(a){n[0].offsetWidth;n.addClass("in")}else{n.removeClass("fade")}if(n.parent(".dropdown-menu").length){n.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",true)}o&&o()}r.length&&a?r.one("bsTransitionEnd",s).emulateTransitionEnd(t.TRANSITION_DURATION):s();r.removeClass("in")};function n(n){return this.each(function(){var i=e(this);var o=i.data("bs.tab");if(!o)i.data("bs.tab",o=new t(this));if(typeof n=="string")o[n]()})}var i=e.fn.tab;e.fn.tab=n;e.fn.tab.Constructor=t;e.fn.tab.noConflict=function(){e.fn.tab=i;return this};var o=function(t){t.preventDefault();n.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery);+function(e){"use strict";var t=function(n,i){this.options=e.extend({},t.DEFAULTS,i);this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this));this.$element=e(n);this.affixed=null;this.unpin=null;this.pinnedOffset=null;this.checkPosition()};t.VERSION="3.3.7";t.RESET="affix affix-top affix-bottom";t.DEFAULTS={offset:0,target:window};t.prototype.getState=function(e,t,n,i){var o=this.$target.scrollTop();var r=this.$element.offset();var a=this.$target.height();if(n!=null&&this.affixed=="top")return o<n?"top":false;if(this.affixed=="bottom"){if(n!=null)return o+this.unpin<=r.top?false:"bottom";return o+a<=e-i?false:"bottom"}var s=this.affixed==null;var l=s?o:r.top;var u=s?a:t;if(n!=null&&o<=n)return"top";if(i!=null&&l+u>=e-i)return"bottom";return false};t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$target.scrollTop();var n=this.$element.offset();return this.pinnedOffset=n.top-e};t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)};t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var n=this.$element.height();var i=this.options.offset;var o=i.top;var r=i.bottom;var a=Math.max(e(document).height(),e(document.body).height());if(typeof i!="object")r=o=i;if(typeof o=="function")o=i.top(this.$element);if(typeof r=="function")r=i.bottom(this.$element);var s=this.getState(a,n,o,r);if(this.affixed!=s){if(this.unpin!=null)this.$element.css("top","");var l="affix"+(s?"-"+s:"");var u=e.Event(l+".bs.affix");this.$element.trigger(u);if(u.isDefaultPrevented())return;this.affixed=s;this.unpin=s=="bottom"?this.getPinnedOffset():null;this.$element.removeClass(t.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}if(s=="bottom"){this.$element.offset({top:a-n-r})}};function n(n){return this.each(function(){var i=e(this);var o=i.data("bs.affix");var r=typeof n=="object"&&n;if(!o)i.data("bs.affix",o=new t(this,r));if(typeof n=="string")o[n]()})}var i=e.fn.affix;e.fn.affix=n;e.fn.affix.Constructor=t;e.fn.affix.noConflict=function(){e.fn.affix=i;return this};e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this);var i=t.data();i.offset=i.offset||{};if(i.offsetBottom!=null)i.offset.bottom=i.offsetBottom;if(i.offsetTop!=null)i.offset.top=i.offsetTop;n.call(t,i)})})}(jQuery);(function(e,t){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],t)}else if(typeof exports==="object"){module.exports=t(require("jquery"))}else{e.bootbox=t(e.jQuery)}})(this,function e(t,n){"use strict";var i={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'>"+"<div class='modal-dialog'>"+"<div class='modal-content'>"+"<div class='modal-body'><div class='bootbox-body'></div></div>"+"</div>"+"</div>"+"</div>",header:"<div class='modal-header'>"+"<h4 class='modal-title'></h4>"+"</div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}};var o={locale:"en",backdrop:"static",animate:true,className:null,closeButton:true,show:true,container:"body"};var r={};function a(e){var t=m[o.locale];return t?t[e]:m.en[e]}function s(e,n,i){e.stopPropagation();e.preventDefault();var o=t.isFunction(i)&&i.call(n,e)===false;if(!o){n.modal("hide")}}function l(e){var t,n=0;for(t in e){n++}return n}function u(e,n){var i=0;t.each(e,function(e,t){n(e,t,i++)})}function c(e){var n;var i;if(typeof e!=="object"){throw new Error("Please supply an object of options")}if(!e.message){throw new Error("Please specify a message")}e=t.extend({},o,e);if(!e.buttons){e.buttons={}}n=e.buttons;i=l(n);u(n,function(e,o,r){if(t.isFunction(o)){o=n[e]={callback:o}}if(t.type(o)!=="object"){throw new Error("button with key "+e+" must be an object")}if(!o.label){o.label=e}if(!o.className){if(i<=2&&r===i-1){o.className="btn-primary"}else{o.className="btn-default"}}});return e}function f(e,t){var n=e.length;var i={};if(n<1||n>2){throw new Error("Invalid argument length")}if(n===2||typeof e[0]==="string"){i[t[0]]=e[0];i[t[1]]=e[1]}else{i=e[0]}return i}function d(e,n,i){return t.extend(true,{},e,f(n,i))}function h(e,t,n,i){var o={className:"bootbox-"+e,buttons:p.apply(null,t)};return v(d(o,i,n),t)}function p(){var e={};for(var t=0,n=arguments.length;t<n;t++){var i=arguments[t];var o=i.toLowerCase();var r=i.toUpperCase();e[o]={label:a(r)}}return e}function v(e,t){var i={};u(t,function(e,t){i[t]=true});u(e.buttons,function(e){if(i[e]===n){throw new Error("button key "+e+" is not allowed (options are "+t.join("\n")+")")}});return e}r.alert=function(){var e;e=h("alert",["ok"],["message","callback"],arguments);if(e.callback&&!t.isFunction(e.callback)){throw new Error("alert requires callback property to be a function when provided")}e.buttons.ok.callback=e.onEscape=function(){if(t.isFunction(e.callback)){return e.callback.call(this)}return true};return r.dialog(e)};r.confirm=function(){var e;e=h("confirm",["cancel","confirm"],["message","callback"],arguments);e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,false)};e.buttons.confirm.callback=function(){return e.callback.call(this,true)};if(!t.isFunction(e.callback)){throw new Error("confirm requires a callback")}return r.dialog(e)};r.prompt=function(){var e;var o;var a;var s;var l;var c;var f;s=t(i.form);o={className:"bootbox-prompt",buttons:p("cancel","confirm"),value:"",inputType:"text"};e=v(d(o,arguments,["title","callback"]),["cancel","confirm"]);c=e.show===n?true:e.show;e.message=s;e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,null)};e.buttons.confirm.callback=function(){var n;switch(e.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":n=l.val();break;case"checkbox":var i=l.find("input:checked");n=[];u(i,function(e,i){n.push(t(i).val())});break}return e.callback.call(this,n)};e.show=false;if(!e.title){throw new Error("prompt requires a title")}if(!t.isFunction(e.callback)){throw new Error("prompt requires a callback")}if(!i.inputs[e.inputType]){throw new Error("invalid prompt type")}l=t(i.inputs[e.inputType]);switch(e.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":l.val(e.value);break;case"select":var h={};f=e.inputOptions||[];if(!t.isArray(f)){throw new Error("Please pass an array of input options")}if(!f.length){throw new Error("prompt with select requires options")}u(f,function(e,i){var o=l;if(i.value===n||i.text===n){throw new Error("given options in wrong format")}if(i.group){if(!h[i.group]){h[i.group]=t("<optgroup/>").attr("label",i.group)}o=h[i.group]}o.append("<option value='"+i.value+"'>"+i.text+"</option>")});u(h,function(e,t){l.append(t)});l.val(e.value);break;case"checkbox":var m=t.isArray(e.value)?e.value:[e.value];f=e.inputOptions||[];if(!f.length){throw new Error("prompt with checkbox requires options")}if(!f[0].value||!f[0].text){throw new Error("given options in wrong format")}l=t("<div/>");u(f,function(n,o){var r=t(i.inputs[e.inputType]);r.find("input").attr("value",o.value);r.find("label").append(o.text);u(m,function(e,t){if(t===o.value){r.find("input").prop("checked",true)}});l.append(r)});break}if(e.placeholder){l.attr("placeholder",e.placeholder)}if(e.pattern){l.attr("pattern",e.pattern)}if(e.maxlength){l.attr("maxlength",e.maxlength)}s.append(l);s.on("submit",function(e){e.preventDefault();e.stopPropagation();a.find(".btn-primary").click()});a=r.dialog(e);a.off("shown.bs.modal");a.on("shown.bs.modal",function(){l.focus()});if(c===true){a.modal("show")}return a};r.dialog=function(e){e=c(e);var o=t(i.dialog);var r=o.find(".modal-dialog");var a=o.find(".modal-body");var l=e.buttons;var f="";var d={onEscape:e.onEscape};if(t.fn.modal===n){throw new Error("$.fn.modal is not defined; please double check you have included "+"the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ "+"for more details.")}u(l,function(e,t){f+="<button data-bb-handler='"+e+"' type='button' class='btn "+t.className+"'>"+t.label+"</button>";d[e]=t.callback});a.find(".bootbox-body").html(e.message);if(e.animate===true){o.addClass("fade")}if(e.className){o.addClass(e.className)}if(e.size==="large"){r.addClass("modal-lg")}else if(e.size==="small"){r.addClass("modal-sm")}if(e.title){a.before(i.header)}if(e.closeButton){var h=t(i.closeButton);if(e.title){o.find(".modal-header").prepend(h)}else{h.css("margin-top","-10px").prependTo(a)}}if(e.title){o.find(".modal-title").html(e.title)}if(f.length){a.after(i.footer);o.find(".modal-footer").html(f)}o.on("hidden.bs.modal",function(e){if(e.target===this){o.remove()}});o.on("shown.bs.modal",function(){o.find(".btn-primary:first").focus()});if(e.backdrop!=="static"){o.on("click.dismiss.bs.modal",function(e){if(o.children(".modal-backdrop").length){e.currentTarget=o.children(".modal-backdrop").get(0)}if(e.target!==e.currentTarget){return}o.trigger("escape.close.bb")})}o.on("escape.close.bb",function(e){if(d.onEscape){s(e,o,d.onEscape)}});o.on("click",".modal-footer button",function(e){var n=t(this).data("bb-handler");s(e,o,d[n])});o.on("click",".bootbox-close-button",function(e){s(e,o,d.onEscape)});o.on("keyup",function(e){if(e.which===27){o.trigger("escape.close.bb")}});t(e.container).append(o);o.modal({backdrop:e.backdrop?"static":false,keyboard:false,show:false});if(e.show){o.modal("show")}return o};r.setDefaults=function(){var e={};if(arguments.length===2){e[arguments[0]]=arguments[1]}else{e=arguments[0]}t.extend(o,e)};r.hideAll=function(){t(".bootbox").modal("hide");return r};var m={bg_BG:{OK:"ÐÐº",CANCEL:"ÐÑÐºÐ°Ð·",CONFIRM:"ÐÐ¾ÑÐ²ÑÑÐ¶Ð´Ð°Ð²Ð°Ð¼"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"ZruÅ¡it",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"ÎÎ½ÏÎ¬Î¾ÎµÎ¹",CANCEL:"ÎÎºÏÏÏÏÎ·",CONFIRM:"ÎÏÎ¹Î²ÎµÎ²Î±Î¯ÏÏÎ·"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fa:{OK:"ÙØ¨ÙÙ",CANCEL:"ÙØºÙ",CONFIRM:"ØªØ§ÛÛØ¯"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"×××©××¨",CANCEL:"×××××",CONFIRM:"×××©××¨"},hu:{OK:"OK",CANCEL:"MÃ©gsem",CONFIRM:"MegerÅsÃ­t"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"ã­ã£ã³ã»ã«",CONFIRM:"ç¢ºèª"},lt:{OK:"Gerai",CANCEL:"AtÅ¡aukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"ApstiprinÄt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"PotwierdÅº"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"ÐÑÐ¼ÐµÐ½Ð°",CONFIRM:"ÐÑÐ¸Ð¼ÐµÐ½Ð¸ÑÑ"},sq:{OK:"OK",CANCEL:"Anulo",CONFIRM:"Prano"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},th:{OK:"à¸à¸à¸¥à¸",CANCEL:"à¸¢à¸à¹à¸¥à¸´à¸",CONFIRM:"à¸¢à¸·à¸à¸¢à¸±à¸"},tr:{OK:"Tamam",CANCEL:"Ä°ptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"åæ¶",CONFIRM:"ç¡®è®¤"},zh_TW:{OK:"OK",CANCEL:"åæ¶",CONFIRM:"ç¢ºèª"}};r.addLocale=function(e,n){t.each(["OK","CANCEL","CONFIRM"],function(e,t){if(!n[t]){throw new Error("Please supply a translation for '"+t+"'")}});m[e]={OK:n.OK,CANCEL:n.CANCEL,CONFIRM:n.CONFIRM};return r};r.removeLocale=function(e){delete m[e];return r};r.setLocale=function(e){return r.setDefaults("locale",e)};r.init=function(n){return e(n||t)};return r});(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?t(require("jquery")):typeof define==="function"&&define.amd?define(["jquery"],t):t(e.jQuery)})(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e;var t=function(){function t(e,t,n,i){this.markup=e;this.children=t;this.options=n;this.callback=i}t.prototype.render=function(t){var n=e(this.markup);if(this.options&&this.options.contents){n.html(this.options.contents)}if(this.options&&this.options.className){n.addClass(this.options.className)}if(this.options&&this.options.data){e.each(this.options.data,function(e,t){n.attr("data-"+e,t)})}if(this.options&&this.options.click){n.on("click",this.options.click)}if(this.children){var i=n.find(".note-children-container");this.children.forEach(function(e){e.render(i.length?i:n)})}if(this.callback){this.callback(n,this.options)}if(this.options&&this.options.callback){this.options.callback(n)}if(t){t.append(n)}return n};return t}();var n={create:function(n,i){return function(){var o=typeof arguments[1]==="object"?arguments[1]:arguments[0];var r=e.isArray(arguments[0])?arguments[0]:[];if(o&&o.children){r=o.children}return new t(n,r,o,i)}}};var i=n.create('<div class="note-editor note-frame panel"/>');var o=n.create('<div class="note-toolbar-wrapper panel-default"><div class="note-toolbar panel-heading" role="toolbar"></div></div>');var r=n.create('<div class="note-editing-area"/>');var a=n.create('<textarea class="note-codable" role="textbox" aria-multiline="true"/>');var s=n.create('<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>');var l=n.create(['<output class="note-status-output" aria-live="polite"/>','<div class="note-statusbar" role="status">','  <div class="note-resizebar" role="seperator" aria-orientation="horizontal" aria-label="Resize">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join(""));var u=n.create('<div class="note-editor"/>');var c=n.create(['  <output class="note-status-output" aria-live="polite"/>','<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>'].join(""));var f=n.create('<div class="note-btn-group btn-group">');var d=n.create('<ul class="dropdown-menu" role="list">',function(t,n){var i=e.isArray(n.items)?n.items.map(function(e){var t=typeof e==="string"?e:e.value||"";var i=n.template?n.template(e):e;var o=typeof e==="object"?e.option:undefined;var r='data-value="'+t+'"';var a=o!==undefined?' data-option="'+o+'"':"";return'<li role="listitem" aria-label="'+e+'"><a href="#" '+(r+a)+">"+i+"</a></li>"}).join(""):n.items;t.html(i).attr({"aria-label":n.title})});var h=function(e,t){return e+" "+y(t.icons.caret,"span")};var p=n.create('<ul class="dropdown-menu note-check" role="list">',function(t,n){var i=e.isArray(n.items)?n.items.map(function(e){var t=typeof e==="string"?e:e.value||"";var i=n.template?n.template(e):e;return'<li role="listitem" aria-label="'+e+'"><a href="#" data-value="'+t+'">'+y(n.checkClassName)+" "+i+"</a></li>"}).join(""):n.items;t.html(i).attr({"aria-label":n.title})});var v=n.create('<div class="note-color-palette"/>',function(e,t){var n=[];for(var i=0,o=t.colors.length;i<o;i++){var r=t.eventName;var a=t.colors[i];var s=t.colorsName[i];var l=[];for(var u=0,c=a.length;u<c;u++){var f=a[u];var d=s[u];l.push(['<button type="button" class="note-color-btn"','style="background-color:',f,'" ','data-event="',r,'" ','data-value="',f,'" ','title="',d,'" ','aria-label="',d,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}n.push('<div class="note-color-row">'+l.join("")+"</div>")}e.html(n.join(""));if(t.tooltip){e.find(".note-color-btn").tooltip({container:t.container,trigger:"hover",placement:"bottom"})}});var m=n.create('<div class="modal" aria-hidden="false" tabindex="-1" role="dialog"/>',function(e,t){if(t.fade){e.addClass("fade")}e.attr({"aria-label":t.title});e.html(['<div class="modal-dialog">','  <div class="modal-content">',t.title?'    <div class="modal-header">'+'      <button type="button" class="close" data-dismiss="modal" aria-label="Close" aria-hidden="true">&times;</button>'+'      <h4 class="modal-title">'+t.title+"</h4>"+"    </div>":"",'    <div class="modal-body">'+t.body+"</div>",t.footer?'    <div class="modal-footer">'+t.footer+"</div>":"","  </div>","</div>"].join(""))});var g=n.create(['<div class="note-popover popover in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(e,t){var n=typeof t.direction!=="undefined"?t.direction:"bottom";e.addClass(n);if(t.hideArrow){e.find(".arrow").hide()}});var b=n.create('<div class="checkbox"></div>',function(e,t){e.html([" <label"+(t.id?' for="'+t.id+'"':"")+">",' <input role="checkbox" type="checkbox"'+(t.id?' id="'+t.id+'"':""),t.checked?" checked":"",' aria-checked="'+(t.checked?"true":"false")+'"/>',t.text?t.text:"","</label>"].join(""))});var y=function(e,t){t=t||"i";return"<"+t+' class="'+e+'"/>'};var w={editor:i,toolbar:o,editingArea:r,codable:a,editable:s,statusbar:l,airEditor:u,airEditable:c,buttonGroup:f,dropdown:d,dropdownButtonContents:h,dropdownCheck:p,palette:v,dialog:m,popover:g,checkbox:b,icon:y,options:{},button:function(e,t){return n.create('<button type="button" class="note-btn btn btn-default btn-sm" role="button" tabindex="-1">',function(e,t){if(t&&t.tooltip){e.attr({title:t.tooltip,"aria-label":t.tooltip}).tooltip({container:t.container,trigger:"hover",placement:"bottom"})}})(e,t)},toggleBtn:function(e,t){e.toggleClass("disabled",!t);e.attr("disabled",!t)},toggleBtnActive:function(e,t){e.toggleClass("active",t)},onDialogShown:function(e,t){e.one("shown.bs.modal",t)},onDialogHidden:function(e,t){e.one("hidden.bs.modal",t)},showDialog:function(e){e.modal("show")},hideDialog:function(e){e.modal("hide")},createLayout:function(e,t){var n=(t.airMode?w.airEditor([w.editingArea([w.airEditable()])]):w.editor([w.toolbar(),w.editingArea([w.codable(),w.editable()]),w.statusbar()])).render();n.insertAfter(e);return{note:e,editor:n,toolbar:n.find(".note-toolbar"),editingArea:n.find(".note-editing-area"),editable:n.find(".note-editable"),codable:n.find(".note-codable"),statusbar:n.find(".note-statusbar")}},removeLayout:function(e,t){e.html(t.editable.html());t.editor.remove();e.show()}};function x(e){return function(t){return e===t}}function C(e,t){return e===t}function k(e){return function(t,n){return t[e]===n[e]}}function T(){return true}function S(){return false}function E(e){return function(){return!e.apply(e,arguments)}}function N(e,t){return function(n){return e(n)&&t(n)}}function A(e){return e}function I(e,t){return function(){return e[t].apply(e,arguments)}}var D=0;function R(e){var t=++D+"";return e?e+t:t}function L(e){var t=$(document);return{top:e.top+t.scrollTop(),left:e.left+t.scrollLeft(),width:e.right-e.left,height:e.bottom-e.top}}function O(e){var t={};for(var n in e){if(e.hasOwnProperty(n)){t[e[n]]=n}}return t}function P(e,t){t=t||"";return t+e.split(".").map(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}).join("")}function H(e,t,n){var i=this;var o;return function(){var r=i;var a=arguments;var s=function(){o=null;if(!n){e.apply(r,a)}};var l=n&&!o;clearTimeout(o);o=setTimeout(s,t);if(l){e.apply(r,a)}}}var F={eq:x,eq2:C,peq2:k,ok:T,fail:S,self:A,not:E,and:N,invoke:I,uniqueId:R,rect2bnd:L,invertObject:O,namespaceToCamel:P,debounce:H};function j(e){return e[0]}function M(e){return e[e.length-1]}function B(e){return e.slice(0,e.length-1)}function z(e){return e.slice(1)}function q(e,t){for(var n=0,i=e.length;n<i;n++){var o=e[n];if(t(o)){return o}}}function U(e,t){for(var n=0,i=e.length;n<i;n++){if(!t(e[n])){return false}}return true}function K(t,n){return e.inArray(n,t)}function W(e,t){return K(e,t)!==-1}function _(e,t){t=t||F.self;return e.reduce(function(e,n){return e+t(n)},0)}function V(e){var t=[];var n=e.length;var i=-1;while(++i<n){t[i]=e[i]}return t}function G(e){return!e||!e.length}function Q(e,t){if(!e.length){return[]}var n=z(e);return n.reduce(function(e,n){var i=M(e);if(t(M(i),n)){i[i.length]=n}else{e[e.length]=[n]}return e},[[j(e)]])}function X(e){var t=[];for(var n=0,i=e.length;n<i;n++){if(e[n]){t.push(e[n])}}return t}function Y(e){var t=[];for(var n=0,i=e.length;n<i;n++){if(!W(t,e[n])){t.push(e[n])}}return t}function J(e,t){var n=K(e,t);if(n===-1){return null}return e[n+1]}function Z(e,t){var n=K(e,t);if(n===-1){return null}return e[n-1]}var ee={head:j,last:M,initial:B,tail:z,prev:Z,next:J,find:q,contains:W,all:U,sum:_,from:V,isEmpty:G,clusterBy:Q,compact:X,unique:Y};var te=typeof define==="function"&&define.amd;function ne(t){var n=t==="Comic Sans MS"?"Courier New":"Comic Sans MS";var i=e("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body);var o=i.css("fontFamily",n).width();var r=i.css("fontFamily",t+","+n).width();i.remove();return o!==r}var ie=navigator.userAgent;var oe=/MSIE|Trident/i.test(ie);var re;if(oe){var ae=/MSIE (\d+[.]\d+)/.exec(ie);if(ae){re=parseFloat(ae[1])}ae=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(ie);if(ae){re=parseFloat(ae[1])}}var se=/Edge\/\d+/.test(ie);var le=!!window.CodeMirror;if(!le&&te){if(typeof __webpack_require__==="function"){try{require.resolve("codemirror");le=true}catch(e){}}else if(typeof require!=="undefined"){if(typeof require.resolve!=="undefined"){try{require.resolve("codemirror");le=true}catch(e){}}else if(typeof require.specified!=="undefined"){le=require.specified("codemirror")}}}var ue="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0;var ce=oe||se?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";var fe={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:oe,isEdge:se,isFF:!se&&/firefox/i.test(ie),isPhantom:/PhantomJS/i.test(ie),isWebkit:!se&&/webkit/i.test(ie),isChrome:!se&&/chrome/i.test(ie),isSafari:!se&&/safari/i.test(ie),browserVersion:re,jqueryVersion:parseFloat(e.fn.jquery),isSupportAmd:te,isSupportTouch:ue,hasCodeMirror:le,isFontInstalled:ne,isW3CRangeSupport:!!document.createRange,inputEventName:ce};var de=String.fromCharCode(160);var he="\ufeff";function pe(t){return t&&e(t).hasClass("note-editable")}function ve(t){return t&&e(t).hasClass("note-control-sizing")}function me(e){e=e.toUpperCase();return function(t){return t&&t.nodeName.toUpperCase()===e}}function ge(e){return e&&e.nodeType===3}function be(e){return e&&e.nodeType===1}function ye(e){return e&&/^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT/.test(e.nodeName.toUpperCase())}function we(e){if(pe(e)){return false}return e&&/^DIV|^P|^LI|^H[1-7]/.test(e.nodeName.toUpperCase())}function xe(e){return e&&/^H[1-7]/.test(e.nodeName.toUpperCase())}var Ce=me("PRE");var ke=me("LI");function Te(e){return we(e)&&!ke(e)}var Se=me("TABLE");var Ee=me("DATA");function Ne(e){return!Re(e)&&!$e(e)&&!Ae(e)&&!we(e)&&!Se(e)&&!De(e)&&!Ee(e)}function $e(e){return e&&/^UL|^OL/.test(e.nodeName.toUpperCase())}var Ae=me("HR");function Ie(e){return e&&/^TD|^TH/.test(e.nodeName.toUpperCase())}var De=me("BLOCKQUOTE");function Re(e){return Ie(e)||De(e)||pe(e)}var Le=me("A");function Oe(e){return Ne(e)&&!!Ue(e,we)}function Pe(e){return Ne(e)&&!Ue(e,we)}var He=me("BODY");function Fe(e,t){return e.nextSibling===t||e.previousSibling===t}function je(e,t){t=t||F.ok;var n=[];if(e.previousSibling&&t(e.previousSibling)){n.push(e.previousSibling)}n.push(e);if(e.nextSibling&&t(e.nextSibling)){n.push(e.nextSibling)}return n}var Me=fe.isMSIE&&fe.browserVersion<11?"&nbsp;":"<br>";function Be(e){if(ge(e)){return e.nodeValue.length}if(e){return e.childNodes.length}return 0}function ze(e){var t=Be(e);if(t===0){return true}else if(!ge(e)&&t===1&&e.innerHTML===Me){return true}else if(ee.all(e.childNodes,ge)&&e.innerHTML===""){return true}return false}function qe(e){if(!ye(e)&&!Be(e)){e.innerHTML=Me}}function Ue(e,t){while(e){if(t(e)){return e}if(pe(e)){break}e=e.parentNode}return null}function Ke(e,t){e=e.parentNode;while(e){if(Be(e)!==1){break}if(t(e)){return e}if(pe(e)){break}e=e.parentNode}return null}function We(e,t){t=t||F.fail;var n=[];Ue(e,function(e){if(!pe(e)){n.push(e)}return t(e)});return n}function _e(e,t){var n=We(e);return ee.last(n.filter(t))}function Ve(t,n){var i=We(t);for(var o=n;o;o=o.parentNode){if(e.inArray(o,i)>-1){return o}}return null}function Ge(e,t){t=t||F.fail;var n=[];while(e){if(t(e)){break}n.push(e);e=e.previousSibling}return n}function Qe(e,t){t=t||F.fail;var n=[];while(e){if(t(e)){break}n.push(e);e=e.nextSibling}return n}function Xe(e,t){var n=[];t=t||F.ok;(function i(o){if(e!==o&&t(o)){n.push(o)}for(var r=0,a=o.childNodes.length;r<a;r++){i(o.childNodes[r])}})(e);return n}function Ye(t,n){var i=t.parentNode;var o=e("<"+n+">")[0];i.insertBefore(o,t);o.appendChild(t);return o}function Je(e,t){var n=t.nextSibling;var i=t.parentNode;if(n){i.insertBefore(e,n)}else{i.appendChild(e)}return e}function Ze(t,n){e.each(n,function(e,n){t.appendChild(n)});return t}function et(e){return e.offset===0}function tt(e){return e.offset===Be(e.node)}function nt(e){return et(e)||tt(e)}function it(e,t){while(e&&e!==t){if(st(e)!==0){return false}e=e.parentNode}return true}function ot(e,t){if(!t){return false}while(e&&e!==t){if(st(e)!==Be(e.parentNode)-1){return false}e=e.parentNode}return true}function rt(e,t){return et(e)&&it(e.node,t)}function at(e,t){return tt(e)&&ot(e.node,t)}function st(e){var t=0;while(e=e.previousSibling){t+=1}return t}function lt(e){return!!(e&&e.childNodes&&e.childNodes.length)}function ut(e,t){var n;var i;if(e.offset===0){if(pe(e.node)){return null}n=e.node.parentNode;i=st(e.node)}else if(lt(e.node)){n=e.node.childNodes[e.offset-1];i=Be(n)}else{n=e.node;i=t?0:e.offset-1}return{node:n,offset:i}}function ct(e,t){var n,i;if(Be(e.node)===e.offset){if(pe(e.node)){return null}n=e.node.parentNode;i=st(e.node)+1}else if(lt(e.node)){n=e.node.childNodes[e.offset];i=0}else{n=e.node;i=t?Be(e.node):e.offset+1}return{node:n,offset:i}}function ft(e,t){return e.node===t.node&&e.offset===t.offset}function dt(e){if(ge(e.node)||!lt(e.node)||ze(e.node)){return true}var t=e.node.childNodes[e.offset-1];var n=e.node.childNodes[e.offset];if((!t||ye(t))&&(!n||ye(n))){return true}return false}function ht(e,t){while(e){if(t(e)){return e}e=ut(e)}return null}function pt(e,t){while(e){if(t(e)){return e}e=ct(e)}return null}function vt(e){if(!ge(e.node)){return false}var t=e.node.nodeValue.charAt(e.offset-1);return t&&(t!==" "&&t!==de)}function mt(e,t,n,i){var o=e;while(o){n(o);if(ft(o,t)){break}var r=i&&e.node!==o.node&&t.node!==o.node;o=ct(o,r)}}function gt(e,t){var n=We(t,F.eq(e));return n.map(st).reverse()}function bt(e,t){var n=e;for(var i=0,o=t.length;i<o;i++){if(n.childNodes.length<=t[i]){n=n.childNodes[n.childNodes.length-1]}else{n=n.childNodes[t[i]]}}return n}function yt(e,t){var n=t&&t.isSkipPaddingBlankHTML;var i=t&&t.isNotSplitEdgePoint;if(nt(e)&&(ge(e.node)||i)){if(et(e)){return e.node}else if(tt(e)){return e.node.nextSibling}}if(ge(e.node)){return e.node.splitText(e.offset)}else{var o=e.node.childNodes[e.offset];var r=Je(e.node.cloneNode(false),e.node);Ze(r,Qe(o));if(!n){qe(e.node);qe(r)}return r}}function wt(e,t,n){var i=We(t.node,F.eq(e));if(!i.length){return null}else if(i.length===1){return yt(t,n)}return i.reduce(function(e,i){if(e===t.node){e=yt(t,n)}return yt({node:i,offset:e?st(e):Be(i)},n)})}function xt(e,t){var n=t?we:Re;var i=We(e.node,n);var o=ee.last(i)||e.node;var r,a;if(n(o)){r=i[i.length-2];a=o}else{r=o;a=r.parentNode}var s=r&&wt(r,e,{isSkipPaddingBlankHTML:t,isNotSplitEdgePoint:t});if(!s&&a===e.node){s=e.node.childNodes[e.offset]}return{rightNode:s,container:a}}function Ct(e){return document.createElement(e)}function kt(e){return document.createTextNode(e)}function Tt(e,t){if(!e||!e.parentNode){return}if(e.removeNode){return e.removeNode(t)}var n=e.parentNode;if(!t){var i=[];for(var o=0,r=e.childNodes.length;o<r;o++){i.push(e.childNodes[o])}for(var o=0,r=i.length;o<r;o++){n.insertBefore(i[o],e)}}n.removeChild(e)}function St(e,t){while(e){if(pe(e)||!t(e)){break}var n=e.parentNode;Tt(e);e=n}}function Et(e,t){if(e.nodeName.toUpperCase()===t.toUpperCase()){return e}var n=Ct(t);if(e.style.cssText){n.style.cssText=e.style.cssText}Ze(n,ee.from(e.childNodes));Je(n,e);Tt(e);return n}var Nt=me("TEXTAREA");function $t(e,t){var n=Nt(e[0])?e.val():e.html();if(t){return n.replace(/[\n\r]/g,"")}return n}function At(t,n){var i=$t(t);if(n){var o=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;i=i.replace(o,function(e,t,n){n=n.toUpperCase();var i=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n)&&!!t;var o=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n);return e+(i||o?"\n":"")});i=e.trim(i)}return i}function It(t){var n=e(t);var i=n.offset();var o=n.outerHeight(true);return{left:i.left,top:i.top+o}}function Dt(e,t){Object.keys(t).forEach(function(n){e.on(n,t[n])})}function Rt(e,t){Object.keys(t).forEach(function(n){e.off(n,t[n])})}function Lt(e){return e&&!ge(e)&&ee.contains(e.classList,"note-styletag")}var Ot={NBSP_CHAR:de,ZERO_WIDTH_NBSP_CHAR:he,blank:Me,emptyPara:"<p>"+Me+"</p>",makePredByNodeName:me,isEditable:pe,isControlSizing:ve,isText:ge,isElement:be,isVoid:ye,isPara:we,isPurePara:Te,isHeading:xe,isInline:Ne,isBlock:F.not(Ne),isBodyInline:Pe,isBody:He,isParaInline:Oe,isPre:Ce,isList:$e,isTable:Se,isData:Ee,isCell:Ie,isBlockquote:De,isBodyContainer:Re,isAnchor:Le,isDiv:me("DIV"),isLi:ke,isBR:me("BR"),isSpan:me("SPAN"),isB:me("B"),isU:me("U"),isS:me("S"),isI:me("I"),isImg:me("IMG"),isTextarea:Nt,isEmpty:ze,isEmptyAnchor:F.and(Le,ze),isClosestSibling:Fe,withClosestSiblings:je,nodeLength:Be,isLeftEdgePoint:et,isRightEdgePoint:tt,isEdgePoint:nt,isLeftEdgeOf:it,isRightEdgeOf:ot,isLeftEdgePointOf:rt,isRightEdgePointOf:at,prevPoint:ut,nextPoint:ct,isSamePoint:ft,isVisiblePoint:dt,prevPointUntil:ht,nextPointUntil:pt,isCharPoint:vt,walkPoint:mt,ancestor:Ue,singleChildAncestor:Ke,listAncestor:We,lastAncestor:_e,listNext:Qe,listPrev:Ge,listDescendant:Xe,commonAncestor:Ve,wrap:Ye,insertAfter:Je,appendChildNodes:Ze,position:st,hasChildren:lt,makeOffsetPath:gt,fromOffsetPath:bt,splitTree:wt,splitPoint:xt,create:Ct,createText:kt,remove:Tt,removeWhile:St,replace:Et,html:At,value:$t,posFromPlaceholder:It,attachEvents:Dt,detachEvents:Rt,isCustomStyleTag:Lt};e.summernote=e.summernote||{lang:{}};e.extend(e.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image",original:"Original"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table",addRowAbove:"Add row above",addRowBelow:"Add row below",addColLeft:"Add column left",addColRight:"Add column right",delRow:"Delete row",delCol:"Delete column",delTable:"Delete table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",p:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var Pt={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,DELETE:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};var Ht={isEdit:function(e){return ee.contains([Pt.BACKSPACE,Pt.TAB,Pt.ENTER,Pt.SPACE,Pt.DELETE],e)},isMove:function(e){return ee.contains([Pt.LEFT,Pt.UP,Pt.RIGHT,Pt.DOWN],e)},nameFromCode:F.invertObject(Pt),code:Pt};function Ft(e,t){var n=e.parentElement();var i;var o=document.body.createTextRange();var r;var a=ee.from(n.childNodes);for(i=0;i<a.length;i++){if(Ot.isText(a[i])){continue}o.moveToElementText(a[i]);if(o.compareEndPoints("StartToStart",e)>=0){break}r=a[i]}if(i!==0&&Ot.isText(a[i-1])){var s=document.body.createTextRange();var l=null;s.moveToElementText(r||n);s.collapse(!r);l=r?r.nextSibling:n.firstChild;var u=e.duplicate();u.setEndPoint("StartToStart",s);var c=u.text.replace(/[\r\n]/g,"").length;while(c>l.nodeValue.length&&l.nextSibling){c-=l.nodeValue.length;l=l.nextSibling}var f=l.nodeValue;if(t&&l.nextSibling&&Ot.isText(l.nextSibling)&&c===l.nodeValue.length){c-=l.nodeValue.length;l=l.nextSibling}n=l;i=c}return{cont:n,offset:i}}function jt(e){var t=function(e,n){var i,o;if(Ot.isText(e)){var r=Ot.listPrev(e,F.not(Ot.isText));var a=ee.last(r).previousSibling;i=a||e.parentNode;n+=ee.sum(ee.tail(r),Ot.nodeLength);o=!a}else{i=e.childNodes[n]||e;if(Ot.isText(i)){return t(i,0)}n=0;o=false}return{node:i,collapseToStart:o,offset:n}};var n=document.body.createTextRange();var i=t(e.node,e.offset);n.moveToElementText(i.node);n.collapse(i.collapseToStart);n.moveStart("character",i.offset);return n}var Mt=function(){function t(e,t,n,i){this.sc=e;this.so=t;this.ec=n;this.eo=i;this.isOnEditable=this.makeIsOn(Ot.isEditable);this.isOnList=this.makeIsOn(Ot.isList);this.isOnAnchor=this.makeIsOn(Ot.isAnchor);this.isOnCell=this.makeIsOn(Ot.isCell);this.isOnData=this.makeIsOn(Ot.isData)}t.prototype.nativeRange=function(){if(fe.isW3CRangeSupport){var e=document.createRange();e.setStart(this.sc,this.so);e.setEnd(this.ec,this.eo);return e}else{var t=jt({node:this.sc,offset:this.so});t.setEndPoint("EndToEnd",jt({node:this.ec,offset:this.eo}));return t}};t.prototype.getPoints=function(){return{sc:this.sc,so:this.so,ec:this.ec,eo:this.eo}};t.prototype.getStartPoint=function(){return{node:this.sc,offset:this.so}};t.prototype.getEndPoint=function(){return{node:this.ec,offset:this.eo}};t.prototype.select=function(){var e=this.nativeRange();if(fe.isW3CRangeSupport){var t=document.getSelection();if(t.rangeCount>0){t.removeAllRanges()}t.addRange(e)}else{e.select()}return this};t.prototype.scrollIntoView=function(t){var n=e(t).height();if(t.scrollTop+n<this.sc.offsetTop){t.scrollTop+=Math.abs(t.scrollTop+n-this.sc.offsetTop)}return this};t.prototype.normalize=function(){var e=function(e,t){if(Ot.isVisiblePoint(e)&&!Ot.isEdgePoint(e)||Ot.isVisiblePoint(e)&&Ot.isRightEdgePoint(e)&&!t||Ot.isVisiblePoint(e)&&Ot.isLeftEdgePoint(e)&&t||Ot.isVisiblePoint(e)&&Ot.isBlock(e.node)&&Ot.isEmpty(e.node)){return e}var n=Ot.ancestor(e.node,Ot.isBlock);if((Ot.isLeftEdgePointOf(e,n)||Ot.isVoid(Ot.prevPoint(e).node))&&!t||(Ot.isRightEdgePointOf(e,n)||Ot.isVoid(Ot.nextPoint(e).node))&&t){if(Ot.isVisiblePoint(e)){return e}t=!t}var i=t?Ot.nextPointUntil(Ot.nextPoint(e),Ot.isVisiblePoint):Ot.prevPointUntil(Ot.prevPoint(e),Ot.isVisiblePoint);return i||e};var n=e(this.getEndPoint(),false);var i=this.isCollapsed()?n:e(this.getStartPoint(),true);return new t(i.node,i.offset,n.node,n.offset)};t.prototype.nodes=function(e,t){e=e||F.ok;var n=t&&t.includeAncestor;var i=t&&t.fullyContains;var o=this.getStartPoint();var r=this.getEndPoint();var a=[];var s=[];Ot.walkPoint(o,r,function(t){if(Ot.isEditable(t.node)){return}var o;if(i){if(Ot.isLeftEdgePoint(t)){s.push(t.node)}if(Ot.isRightEdgePoint(t)&&ee.contains(s,t.node)){o=t.node}}else if(n){o=Ot.ancestor(t.node,e)}else{o=t.node}if(o&&e(o)){a.push(o)}},true);return ee.unique(a)};t.prototype.commonAncestor=function(){return Ot.commonAncestor(this.sc,this.ec)};t.prototype.expand=function(e){var n=Ot.ancestor(this.sc,e);var i=Ot.ancestor(this.ec,e);if(!n&&!i){return new t(this.sc,this.so,this.ec,this.eo)}var o=this.getPoints();if(n){o.sc=n;o.so=0}if(i){o.ec=i;o.eo=Ot.nodeLength(i)}return new t(o.sc,o.so,o.ec,o.eo)};t.prototype.collapse=function(e){if(e){return new t(this.sc,this.so,this.sc,this.so)}else{return new t(this.ec,this.eo,this.ec,this.eo)}};t.prototype.splitText=function(){var e=this.sc===this.ec;var n=this.getPoints();if(Ot.isText(this.ec)&&!Ot.isEdgePoint(this.getEndPoint())){this.ec.splitText(this.eo)}if(Ot.isText(this.sc)&&!Ot.isEdgePoint(this.getStartPoint())){n.sc=this.sc.splitText(this.so);n.so=0;if(e){n.ec=n.sc;n.eo=this.eo-this.so}}return new t(n.sc,n.so,n.ec,n.eo)};t.prototype.deleteContents=function(){if(this.isCollapsed()){return this}var n=this.splitText();var i=n.nodes(null,{fullyContains:true});var o=Ot.prevPointUntil(n.getStartPoint(),function(e){return!ee.contains(i,e.node)});var r=[];e.each(i,function(e,t){var n=t.parentNode;if(o.node!==n&&Ot.nodeLength(n)===1){r.push(n)}Ot.remove(t,false)});e.each(r,function(e,t){Ot.remove(t,false)});return new t(o.node,o.offset,o.node,o.offset).normalize()};t.prototype.makeIsOn=function(e){return function(){var t=Ot.ancestor(this.sc,e);return!!t&&t===Ot.ancestor(this.ec,e)}};t.prototype.isLeftEdgeOf=function(e){if(!Ot.isLeftEdgePoint(this.getStartPoint())){return false}var t=Ot.ancestor(this.sc,e);return t&&Ot.isLeftEdgeOf(this.sc,t)};t.prototype.isCollapsed=function(){return this.sc===this.ec&&this.so===this.eo};t.prototype.wrapBodyInlineWithPara=function(){if(Ot.isBodyContainer(this.sc)&&Ot.isEmpty(this.sc)){this.sc.innerHTML=Ot.emptyPara;return new t(this.sc.firstChild,0,this.sc.firstChild,0)}var e=this.normalize();if(Ot.isParaInline(this.sc)||Ot.isPara(this.sc)){return e}var n;if(Ot.isInline(e.sc)){var i=Ot.listAncestor(e.sc,F.not(Ot.isInline));n=ee.last(i);if(!Ot.isInline(n)){n=i[i.length-2]||e.sc.childNodes[e.so]}}else{n=e.sc.childNodes[e.so>0?e.so-1:0]}var o=Ot.listPrev(n,Ot.isParaInline).reverse();o=o.concat(Ot.listNext(n.nextSibling,Ot.isParaInline));if(o.length){var r=Ot.wrap(ee.head(o),"p");Ot.appendChildNodes(r,ee.tail(o))}return this.normalize()};t.prototype.insertNode=function(e){var t=this.wrapBodyInlineWithPara().deleteContents();var n=Ot.splitPoint(t.getStartPoint(),Ot.isInline(e));if(n.rightNode){n.rightNode.parentNode.insertBefore(e,n.rightNode)}else{n.container.appendChild(e)}return e};t.prototype.pasteHTML=function(t){var n=e("<div></div>").html(t)[0];var i=ee.from(n.childNodes);var o=this.wrapBodyInlineWithPara().deleteContents();return i.reverse().map(function(e){return o.insertNode(e)}).reverse()};t.prototype.toString=function(){var e=this.nativeRange();return fe.isW3CRangeSupport?e.toString():e.text};t.prototype.getWordRange=function(e){var n=this.getEndPoint();if(!Ot.isCharPoint(n)){return this}var i=Ot.prevPointUntil(n,function(e){return!Ot.isCharPoint(e)});if(e){n=Ot.nextPointUntil(n,function(e){return!Ot.isCharPoint(e)})}return new t(i.node,i.offset,n.node,n.offset)};t.prototype.bookmark=function(e){return{s:{path:Ot.makeOffsetPath(e,this.sc),offset:this.so},e:{path:Ot.makeOffsetPath(e,this.ec),offset:this.eo}}};t.prototype.paraBookmark=function(e){return{s:{path:ee.tail(Ot.makeOffsetPath(ee.head(e),this.sc)),offset:this.so},e:{path:ee.tail(Ot.makeOffsetPath(ee.last(e),this.ec)),offset:this.eo}}};t.prototype.getClientRects=function(){var e=this.nativeRange();return e.getClientRects()};return t}();var Bt={create:function(e,t,n,i){if(arguments.length===4){return new Mt(e,t,n,i)}else if(arguments.length===2){n=e;i=t;return new Mt(e,t,n,i)}else{var o=this.createFromSelection();if(!o&&arguments.length===1){o=this.createFromNode(arguments[0]);return o.collapse(Ot.emptyPara===arguments[0].innerHTML)}return o}},createFromSelection:function(){var e,t,n,i;if(fe.isW3CRangeSupport){var o=document.getSelection();if(!o||o.rangeCount===0){return null}else if(Ot.isBody(o.anchorNode)){return null}var r=o.getRangeAt(0);e=r.startContainer;t=r.startOffset;n=r.endContainer;i=r.endOffset}else{var a=document.selection.createRange();var s=a.duplicate();s.collapse(false);var l=a;l.collapse(true);var u=Ft(l,true);var c=Ft(s,false);if(Ot.isText(u.node)&&Ot.isLeftEdgePoint(u)&&Ot.isTextNode(c.node)&&Ot.isRightEdgePoint(c)&&c.node.nextSibling===u.node){u=c}e=u.cont;t=u.offset;n=c.cont;i=c.offset}return new Mt(e,t,n,i)},createFromNode:function(e){var t=e;var n=0;var i=e;var o=Ot.nodeLength(i);if(Ot.isVoid(t)){n=Ot.listPrev(t).length-1;t=t.parentNode}if(Ot.isBR(i)){o=Ot.listPrev(i).length-1;i=i.parentNode}else if(Ot.isVoid(i)){o=Ot.listPrev(i).length;i=i.parentNode}return this.create(t,n,i,o)},createFromNodeBefore:function(e){return this.createFromNode(e).collapse(true)},createFromNodeAfter:function(e){return this.createFromNode(e).collapse()},createFromBookmark:function(e,t){var n=Ot.fromOffsetPath(e,t.s.path);var i=t.s.offset;var o=Ot.fromOffsetPath(e,t.e.path);var r=t.e.offset;return new Mt(n,i,o,r)},createFromParaBookmark:function(e,t){var n=e.s.offset;var i=e.e.offset;var o=Ot.fromOffsetPath(ee.head(t),e.s.path);var r=Ot.fromOffsetPath(ee.last(t),e.e.path);return new Mt(o,n,r,i)}};function zt(t){return e.Deferred(function(n){e.extend(new FileReader,{onload:function(e){var t=e.target.result;n.resolve(t)},onerror:function(e){n.reject(e)}}).readAsDataURL(t)}).promise()}function qt(t){return e.Deferred(function(n){var i=e("<img>");i.one("load",function(){i.off("error abort");n.resolve(i)}).one("error abort",function(){i.off("load").detach();n.reject(i)}).css({display:"none"}).appendTo(document.body).attr("src",t)}).promise()}var Ut=function(){function e(e){this.stack=[];this.stackOffset=-1;this.$editable=e;this.editable=e[0]}e.prototype.makeSnapshot=function(){var e=Bt.create(this.editable);var t={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:this.$editable.html(),bookmark:e?e.bookmark(this.editable):t}};e.prototype.applySnapshot=function(e){if(e.contents!==null){this.$editable.html(e.contents)}if(e.bookmark!==null){Bt.createFromBookmark(this.editable,e.bookmark).select()}};e.prototype.rewind=function(){if(this.$editable.html()!==this.stack[this.stackOffset].contents){this.recordUndo()}this.stackOffset=0;this.applySnapshot(this.stack[this.stackOffset])};e.prototype.reset=function(){this.stack=[];this.stackOffset=-1;this.$editable.html("");this.recordUndo()};e.prototype.undo=function(){if(this.$editable.html()!==this.stack[this.stackOffset].contents){this.recordUndo()}if(this.stackOffset>0){this.stackOffset--;this.applySnapshot(this.stack[this.stackOffset])}};e.prototype.redo=function(){if(this.stack.length-1>this.stackOffset){this.stackOffset++;this.applySnapshot(this.stack[this.stackOffset])}};e.prototype.recordUndo=function(){this.stackOffset++;if(this.stack.length>this.stackOffset){this.stack=this.stack.slice(0,this.stackOffset)}this.stack.push(this.makeSnapshot())};return e}();var Kt=function(){function t(){}t.prototype.jQueryCSS=function(t,n){if(fe.jqueryVersion<1.9){var i={};e.each(n,function(e,n){i[n]=t.css(n)});return i}return t.css(n)};t.prototype.fromNode=function(e){var t=["font-family","font-size","text-align","list-style-type","line-height"];var n=this.jQueryCSS(e,t)||{};n["font-size"]=parseInt(n["font-size"],10);return n};t.prototype.stylePara=function(t,n){e.each(t.nodes(Ot.isPara,{includeAncestor:true}),function(t,i){e(i).css(n)})};t.prototype.styleNodes=function(t,n){t=t.splitText();var i=n&&n.nodeName||"SPAN";var o=!!(n&&n.expandClosestSibling);var r=!!(n&&n.onlyPartialContains);if(t.isCollapsed()){return[t.insertNode(Ot.create(i))]}var a=Ot.makePredByNodeName(i);var s=t.nodes(Ot.isText,{fullyContains:true}).map(function(e){return Ot.singleChildAncestor(e,a)||Ot.wrap(e,i)});if(o){if(r){var l=t.nodes();a=F.and(a,function(e){return ee.contains(l,e)})}return s.map(function(t){var n=Ot.withClosestSiblings(t,a);var i=ee.head(n);var o=ee.tail(n);e.each(o,function(e,t){Ot.appendChildNodes(i,t.childNodes);Ot.remove(t)});return ee.head(n)})}else{return s}};t.prototype.current=function(t){var n=e(!Ot.isElement(t.sc)?t.sc.parentNode:t.sc);var i=this.fromNode(n);try{i=e.extend(i,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal","font-family":document.queryCommandValue("fontname")||i["font-family"]})}catch(e){}if(!t.isOnList()){i["list-style"]="none"}else{var o=["circle","disc","disc-leading-zero","square"];var r=e.inArray(i["list-style-type"],o)>-1;i["list-style"]=r?"unordered":"ordered"}var a=Ot.ancestor(t.sc,Ot.isPara);if(a&&a.style["line-height"]){i["line-height"]=a.style.lineHeight}else{var s=parseInt(i["line-height"],10)/parseInt(i["font-size"],10);i["line-height"]=s.toFixed(1)}i.anchor=t.isOnAnchor()&&Ot.ancestor(t.sc,Ot.isAnchor);i.ancestors=Ot.listAncestor(t.sc,Ot.isEditable);i.range=t;return i};return t}();var Wt=function(){function t(){}t.prototype.insertOrderedList=function(e){this.toggleList("OL",e)};t.prototype.insertUnorderedList=function(e){this.toggleList("UL",e)};t.prototype.indent=function(t){var n=this;var i=Bt.create(t).wrapBodyInlineWithPara();var o=i.nodes(Ot.isPara,{includeAncestor:true});var r=ee.clusterBy(o,F.peq2("parentNode"));e.each(r,function(t,i){var o=ee.head(i);if(Ot.isLi(o)){n.wrapList(i,o.parentNode.nodeName)}else{e.each(i,function(t,n){e(n).css("marginLeft",function(e,t){return(parseInt(t,10)||0)+25})})}});i.select()};t.prototype.outdent=function(t){var n=this;var i=Bt.create(t).wrapBodyInlineWithPara();var o=i.nodes(Ot.isPara,{includeAncestor:true});var r=ee.clusterBy(o,F.peq2("parentNode"));e.each(r,function(t,i){var o=ee.head(i);if(Ot.isLi(o)){n.releaseList([i])}else{e.each(i,function(t,n){e(n).css("marginLeft",function(e,t){t=parseInt(t,10)||0;return t>25?t-25:""})})}});i.select()};t.prototype.toggleList=function(t,n){var i=this;var o=Bt.create(n).wrapBodyInlineWithPara();var r=o.nodes(Ot.isPara,{includeAncestor:true});var a=o.paraBookmark(r);var s=ee.clusterBy(r,F.peq2("parentNode"));if(ee.find(r,Ot.isPurePara)){var l=[];e.each(s,function(e,n){l=l.concat(i.wrapList(n,t))});r=l}else{var u=o.nodes(Ot.isList,{includeAncestor:true}).filter(function(n){return!e.nodeName(n,t)});if(u.length){e.each(u,function(e,n){Ot.replace(n,t)})}else{r=this.releaseList(s,true)}}Bt.createFromParaBookmark(a,r).select()};t.prototype.wrapList=function(e,t){var n=ee.head(e);var i=ee.last(e);var o=Ot.isList(n.previousSibling)&&n.previousSibling;var r=Ot.isList(i.nextSibling)&&i.nextSibling;var a=o||Ot.insertAfter(Ot.create(t||"UL"),i);e=e.map(function(e){return Ot.isPurePara(e)?Ot.replace(e,"LI"):e});Ot.appendChildNodes(a,e);if(r){Ot.appendChildNodes(a,ee.from(r.childNodes));Ot.remove(r)}return e};t.prototype.releaseList=function(t,n){var i=[];e.each(t,function(t,o){var r=ee.head(o);var a=ee.last(o);var s=n?Ot.lastAncestor(r,Ot.isList):r.parentNode;var l=s.childNodes.length>1?Ot.splitTree(s,{node:a.parentNode,offset:Ot.position(a)+1},{isSkipPaddingBlankHTML:true}):null;var u=Ot.splitTree(s,{node:r.parentNode,offset:Ot.position(r)},{isSkipPaddingBlankHTML:true});o=n?Ot.listDescendant(u,Ot.isLi):ee.from(u.childNodes).filter(Ot.isLi);if(n||!Ot.isList(s.parentNode)){o=o.map(function(e){return Ot.replace(e,"P")})}e.each(ee.from(o).reverse(),function(e,t){Ot.insertAfter(t,s)});var c=ee.compact([s,u,l]);e.each(c,function(t,n){var i=[n].concat(Ot.listDescendant(n,Ot.isList));e.each(i.reverse(),function(e,t){if(!Ot.nodeLength(t)){Ot.remove(t,true)}})});i=i.concat(o)});return i};return t}();var _t=function(){function t(){this.bullet=new Wt}t.prototype.insertTab=function(e,t){var n=Ot.createText(new Array(t+1).join(Ot.NBSP_CHAR));e=e.deleteContents();e.insertNode(n,true);e=Bt.create(n,t);e.select()};t.prototype.insertParagraph=function(t){var n=Bt.create(t);n=n.deleteContents();n=n.wrapBodyInlineWithPara();var i=Ot.ancestor(n.sc,Ot.isPara);var o;if(i){if(Ot.isEmpty(i)&&Ot.isLi(i)){this.bullet.toggleList(i.parentNode.nodeName);return}else if(Ot.isEmpty(i)&&Ot.isPara(i)&&Ot.isBlockquote(i.parentNode)){Ot.insertAfter(i,i.parentNode);o=i}else{o=Ot.splitTree(i,n.getStartPoint());var r=Ot.listDescendant(i,Ot.isEmptyAnchor);r=r.concat(Ot.listDescendant(o,Ot.isEmptyAnchor));e.each(r,function(e,t){Ot.remove(t)});if((Ot.isHeading(o)||Ot.isPre(o)||Ot.isCustomStyleTag(o))&&Ot.isEmpty(o)){o=Ot.replace(o,"p")}}}else{var a=n.sc.childNodes[n.so];o=e(Ot.emptyPara)[0];if(a){n.sc.insertBefore(o,a)}else{n.sc.appendChild(o)}}Bt.create(o,0).normalize().select().scrollIntoView(t)};return t}();var Vt=function(e,t,n,i){var o={colPos:0,rowPos:0};var r=[];var a=[];function s(){if(!e||!e.tagName||e.tagName.toLowerCase()!=="td"&&e.tagName.toLowerCase()!=="th"){console.error("Impossible to identify start Cell point.",e);return}o.colPos=e.cellIndex;if(!e.parentElement||!e.parentElement.tagName||e.parentElement.tagName.toLowerCase()!=="tr"){console.error("Impossible to identify start Row point.",e);return}o.rowPos=e.parentElement.rowIndex}function l(e,t,n,i,o,a,s){var l={baseRow:n,baseCell:i,isRowSpan:o,isColSpan:a,isVirtual:s};if(!r[e]){r[e]=[]}r[e][t]=l}function u(e,t,n,i){return{baseCell:e.baseCell,action:t,virtualTable:{rowIndex:n,cellIndex:i}}}function c(e,t){if(!r[e]){return t}if(!r[e][t]){return t}var n=t;while(r[e][n]){n++;if(!r[e][n]){return n}}}function f(e,t){var n=c(e.rowIndex,t.cellIndex);var i=t.colSpan>1;var r=t.rowSpan>1;var a=e.rowIndex===o.rowPos&&t.cellIndex===o.colPos;l(e.rowIndex,n,e,t,r,i,false);var s=t.attributes.rowSpan?parseInt(t.attributes.rowSpan.value,10):0;if(s>1){for(var u=1;u<s;u++){var f=e.rowIndex+u;d(f,n,t,a);l(f,n,e,t,true,i,true)}}var h=t.attributes.colSpan?parseInt(t.attributes.colSpan.value,10):0;if(h>1){for(var p=1;p<h;p++){var v=c(e.rowIndex,n+p);d(e.rowIndex,v,t,a);l(e.rowIndex,v,e,t,r,true,true)}}}function d(e,t,n,i){if(e===o.rowPos&&o.colPos>=n.cellIndex&&n.cellIndex<=t&&!i){o.colPos++}}function h(){var e=i.rows;for(var t=0;t<e.length;t++){var n=e[t].cells;for(var o=0;o<n.length;o++){f(e[t],n[o])}}}function p(e){switch(t){case Vt.where.Column:if(e.isColSpan){return Vt.resultAction.SubtractSpanCount}break;case Vt.where.Row:if(!e.isVirtual&&e.isRowSpan){return Vt.resultAction.AddCell}else if(e.isRowSpan){return Vt.resultAction.SubtractSpanCount}break}return Vt.resultAction.RemoveCell}function v(e){switch(t){case Vt.where.Column:if(e.isColSpan){return Vt.resultAction.SumSpanCount}else if(e.isRowSpan&&e.isVirtual){return Vt.resultAction.Ignore}break;case Vt.where.Row:if(e.isRowSpan){return Vt.resultAction.SumSpanCount}else if(e.isColSpan&&e.isVirtual){return Vt.resultAction.Ignore}break}return Vt.resultAction.AddCell}function m(){s();h()}this.getActionList=function(){var e=t===Vt.where.Row?o.rowPos:-1;var i=t===Vt.where.Column?o.colPos:-1;var s=0;var l=true;while(l){var c=e>=0?e:s;var f=i>=0?i:s;var d=r[c];if(!d){l=false;return a}var h=d[f];if(!h){l=false;return a}var m=Vt.resultAction.Ignore;switch(n){case Vt.requestAction.Add:m=v(h);break;case Vt.requestAction.Delete:m=p(h);break}a.push(u(h,m,c,f));s++}return a};m()};Vt.where={Row:0,Column:1};Vt.requestAction={Add:0,Delete:1};Vt.resultAction={Ignore:0,SubtractSpanCount:1,RemoveCell:2,AddCell:3,SumSpanCount:4};var Gt=function(){function t(){}t.prototype.tab=function(e,t){var n=Ot.ancestor(e.commonAncestor(),Ot.isCell);var i=Ot.ancestor(n,Ot.isTable);var o=Ot.listDescendant(i,Ot.isCell);var r=ee[t?"prev":"next"](o,n);if(r){Bt.create(r,0).select()}};t.prototype.addRow=function(t,n){var i=Ot.ancestor(t.commonAncestor(),Ot.isCell);var o=e(i).closest("tr");var r=this.recoverAttributes(o);var a=e("<tr"+r+"></tr>");var s=new Vt(i,Vt.where.Row,Vt.requestAction.Add,e(o).closest("table")[0]);var l=s.getActionList();for(var u=0;u<l.length;u++){var c=l[u];var f=this.recoverAttributes(c.baseCell);switch(c.action){case Vt.resultAction.AddCell:a.append("<td"+f+">"+Ot.blank+"</td>");break;case Vt.resultAction.SumSpanCount:if(n==="top"){var d=c.baseCell.parent;var h=(!d?0:c.baseCell.closest("tr").rowIndex)<=o[0].rowIndex;if(h){var p=e("<div></div>").append(e("<td"+f+">"+Ot.blank+"</td>").removeAttr("rowspan")).html();a.append(p);break}}var v=parseInt(c.baseCell.rowSpan,10);v++;c.baseCell.setAttribute("rowSpan",v);break}}if(n==="top"){o.before(a)}else{var m=i.rowSpan>1;if(m){var g=o[0].rowIndex+(i.rowSpan-2);e(e(o).parent().find("tr")[g]).after(e(a));return}o.after(a)}};t.prototype.addCol=function(t,n){var i=Ot.ancestor(t.commonAncestor(),Ot.isCell);var o=e(i).closest("tr");var r=e(o).siblings();r.push(o);var a=new Vt(i,Vt.where.Column,Vt.requestAction.Add,e(o).closest("table")[0]);var s=a.getActionList();for(var l=0;l<s.length;l++){var u=s[l];var c=this.recoverAttributes(u.baseCell);switch(u.action){case Vt.resultAction.AddCell:if(n==="right"){e(u.baseCell).after("<td"+c+">"+Ot.blank+"</td>")}else{e(u.baseCell).before("<td"+c+">"+Ot.blank+"</td>")}break;case Vt.resultAction.SumSpanCount:if(n==="right"){var f=parseInt(u.baseCell.colSpan,10);f++;u.baseCell.setAttribute("colSpan",f)}else{e(u.baseCell).before("<td"+c+">"+Ot.blank+"</td>")}break}}};t.prototype.recoverAttributes=function(e){var t="";if(!e){return t}var n=e.attributes||[];for(var i=0;i<n.length;i++){if(n[i].name.toLowerCase()==="id"){continue}if(n[i].specified){t+=" "+n[i].name+"='"+n[i].value+"'"}}return t};t.prototype.deleteRow=function(t){var n=Ot.ancestor(t.commonAncestor(),Ot.isCell);var i=e(n).closest("tr");var o=i.children("td, th").index(e(n));var r=i[0].rowIndex;var a=new Vt(n,Vt.where.Row,Vt.requestAction.Delete,e(i).closest("table")[0]);var s=a.getActionList();for(var l=0;l<s.length;l++){if(!s[l]){continue}var u=s[l].baseCell;var c=s[l].virtualTable;var f=u.rowSpan&&u.rowSpan>1;var d=f?parseInt(u.rowSpan,10):0;switch(s[l].action){case Vt.resultAction.Ignore:continue;case Vt.resultAction.AddCell:var h=i.next("tr")[0];if(!h){continue}var p=i[0].cells[o];if(f){if(d>2){d--;h.insertBefore(p,h.cells[o]);h.cells[o].setAttribute("rowSpan",d);h.cells[o].innerHTML=""}else if(d===2){h.insertBefore(p,h.cells[o]);h.cells[o].removeAttribute("rowSpan");h.cells[o].innerHTML=""}}continue;case Vt.resultAction.SubtractSpanCount:if(f){if(d>2){d--;u.setAttribute("rowSpan",d);if(c.rowIndex!==r&&u.cellIndex===o){u.innerHTML=""}}else if(d===2){u.removeAttribute("rowSpan");if(c.rowIndex!==r&&u.cellIndex===o){u.innerHTML=""}}}continue;case Vt.resultAction.RemoveCell:continue}}i.remove()};t.prototype.deleteCol=function(t){var n=Ot.ancestor(t.commonAncestor(),Ot.isCell);var i=e(n).closest("tr");var o=i.children("td, th").index(e(n));var r=new Vt(n,Vt.where.Column,Vt.requestAction.Delete,e(i).closest("table")[0]);var a=r.getActionList();for(var s=0;s<a.length;s++){if(!a[s]){continue}switch(a[s].action){case Vt.resultAction.Ignore:continue;case Vt.resultAction.SubtractSpanCount:var l=a[s].baseCell;var u=l.colSpan&&l.colSpan>1;if(u){var c=l.colSpan?parseInt(l.colSpan,10):0;if(c>2){c--;l.setAttribute("colSpan",c);if(l.cellIndex===o){l.innerHTML=""}}else if(c===2){l.removeAttribute("colSpan");if(l.cellIndex===o){l.innerHTML=""}}}continue;case Vt.resultAction.RemoveCell:Ot.remove(a[s].baseCell,true);continue}}};t.prototype.createTable=function(t,n,i){var o=[];var r;for(var a=0;a<t;a++){o.push("<td>"+Ot.blank+"</td>")}r=o.join("");var s=[];var l;for(var u=0;u<n;u++){s.push("<tr>"+r+"</tr>")}l=s.join("");var c=e("<table>"+l+"</table>");if(i&&i.tableClassName){c.addClass(i.tableClassName)}return c[0]};t.prototype.deleteTable=function(t){var n=Ot.ancestor(t.commonAncestor(),Ot.isCell);e(n).closest("table").remove()};return t}();var Qt="bogus";var Xt=function(){function t(t){var n=this;this.context=t;this.$note=t.layoutInfo.note;this.$editor=t.layoutInfo.editor;this.$editable=t.layoutInfo.editable;this.options=t.options;this.lang=this.options.langInfo;this.editable=this.$editable[0];this.lastRange=null;this.style=new Kt;this.table=new Gt;this.typing=new _t;this.bullet=new Wt;this.history=new Ut(this.$editable);this.context.memo("help.undo",this.lang.help.undo);this.context.memo("help.redo",this.lang.help.redo);this.context.memo("help.tab",this.lang.help.tab);this.context.memo("help.untab",this.lang.help.untab);this.context.memo("help.insertParagraph",this.lang.help.insertParagraph);this.context.memo("help.insertOrderedList",this.lang.help.insertOrderedList);this.context.memo("help.insertUnorderedList",this.lang.help.insertUnorderedList);this.context.memo("help.indent",this.lang.help.indent);this.context.memo("help.outdent",this.lang.help.outdent);this.context.memo("help.formatPara",this.lang.help.formatPara);this.context.memo("help.insertHorizontalRule",this.lang.help.insertHorizontalRule);this.context.memo("help.fontName",this.lang.help.fontName);var i=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor"];for(var o=0,r=i.length;o<r;o++){this[i[o]]=function(e){return function(t){n.beforeCommand();document.execCommand(e,false,t);n.afterCommand(true)}}(i[o]);this.context.memo("help."+i[o],this.lang.help[i[o]])}this.fontName=this.wrapCommand(function(e){return n.fontStyling("font-family","'"+e+"'")});this.fontSize=this.wrapCommand(function(e){return n.fontStyling("font-size",e+"px")});for(var o=1;o<=6;o++){this["formatH"+o]=function(e){return function(){n.formatBlock("H"+e)}}(o);this.context.memo("help.formatH"+o,this.lang.help["formatH"+o])}this.insertParagraph=this.wrapCommand(function(){n.typing.insertParagraph(n.editable)});this.insertOrderedList=this.wrapCommand(function(){n.bullet.insertOrderedList(n.editable)});this.insertUnorderedList=this.wrapCommand(function(){n.bullet.insertUnorderedList(n.editable)});this.indent=this.wrapCommand(function(){n.bullet.indent(n.editable)});this.outdent=this.wrapCommand(function(){n.bullet.outdent(n.editable)});this.insertNode=this.wrapCommand(function(t){if(n.isLimited(e(t).text().length)){return}var i=n.createRange();i.insertNode(t);Bt.createFromNodeAfter(t).select()});this.insertText=this.wrapCommand(function(e){if(n.isLimited(e.length)){return}var t=n.createRange();var i=t.insertNode(Ot.createText(e));Bt.create(i,Ot.nodeLength(i)).select()});this.pasteHTML=this.wrapCommand(function(e){if(n.isLimited(e.length)){return}var t=n.createRange().pasteHTML(e);Bt.createFromNodeAfter(ee.last(t)).select()});this.formatBlock=this.wrapCommand(function(e,t){var i=n.options.callbacks.onApplyCustomStyle;if(i){i.call(n,t,n.context,n.onFormatBlock)}else{n.onFormatBlock(e,t)}});this.insertHorizontalRule=this.wrapCommand(function(){var e=n.createRange().insertNode(Ot.create("HR"));if(e.nextSibling){Bt.create(e.nextSibling,0).normalize().select()}});this.lineHeight=this.wrapCommand(function(e){n.style.stylePara(n.createRange(),{lineHeight:e})});this.createLink=this.wrapCommand(function(t){var i=t.url;var o=t.text;var r=t.isNewWindow;var a=t.range||n.createRange();var s=a.toString()!==o;if(typeof i==="string"){i=i.trim()}if(n.options.onCreateLink){i=n.options.onCreateLink(i)}else{i=/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/.test(i)?i:"http://"+i}var l=[];if(s){a=a.deleteContents();var u=a.insertNode(e("<A>"+o+"</A>")[0]);l.push(u)}else{l=n.style.styleNodes(a,{nodeName:"A",expandClosestSibling:true,onlyPartialContains:true})}e.each(l,function(t,n){e(n).attr("href",i);if(r){e(n).attr("target","_blank")}else{e(n).removeAttr("target")}});var c=Bt.createFromNodeBefore(ee.head(l));var f=c.getStartPoint();var d=Bt.createFromNodeAfter(ee.last(l));var h=d.getEndPoint();Bt.create(f.node,f.offset,h.node,h.offset).select()});this.color=this.wrapCommand(function(e){var t=e.foreColor;var n=e.backColor;if(t){document.execCommand("foreColor",false,t)}if(n){document.execCommand("backColor",false,n)}});this.foreColor=this.wrapCommand(function(e){document.execCommand("styleWithCSS",false,true);document.execCommand("foreColor",false,e)});this.insertTable=this.wrapCommand(function(e){var t=e.split("x");var i=n.createRange().deleteContents();i.insertNode(n.table.createTable(t[0],t[1],n.options))});this.removeMedia=this.wrapCommand(function(){var t=e(n.restoreTarget()).parent();if(t.parent("figure").length){t.parent("figure").remove()}else{t=e(n.restoreTarget()).detach()}n.context.triggerEvent("media.delete",t,n.$editable)});this.floatMe=this.wrapCommand(function(t){var i=e(n.restoreTarget());i.toggleClass("note-float-left",t==="left");i.toggleClass("note-float-right",t==="right");i.css("float",t)});this.resize=this.wrapCommand(function(t){var i=e(n.restoreTarget());i.css({width:t*100+"%",height:""})})}t.prototype.initialize=function(){var e=this;this.$editable.on("keydown",function(t){if(t.keyCode===Ht.code.ENTER){e.context.triggerEvent("enter",t)}e.context.triggerEvent("keydown",t);if(!t.isDefaultPrevented()){if(e.options.shortcuts){e.handleKeyMap(t)}else{e.preventDefaultEditableShortCuts(t)}}if(e.isLimited(1,t)){return false}}).on("keyup",function(t){e.context.triggerEvent("keyup",t)}).on("focus",function(t){e.context.triggerEvent("focus",t)}).on("blur",function(t){e.context.triggerEvent("blur",t)}).on("mousedown",function(t){e.context.triggerEvent("mousedown",t)}).on("mouseup",function(t){e.context.triggerEvent("mouseup",t)}).on("scroll",function(t){e.context.triggerEvent("scroll",t)}).on("paste",function(t){e.context.triggerEvent("paste",t)});this.$editable.html(Ot.html(this.$note)||Ot.emptyPara);this.$editable.on(fe.inputEventName,F.debounce(function(){e.context.triggerEvent("change",e.$editable.html())},100));this.$editor.on("focusin",function(t){e.context.triggerEvent("focusin",t)}).on("focusout",function(t){e.context.triggerEvent("focusout",t)});if(!this.options.airMode){if(this.options.width){this.$editor.outerWidth(this.options.width)}if(this.options.height){this.$editable.outerHeight(this.options.height)}if(this.options.maxHeight){this.$editable.css("max-height",this.options.maxHeight)}if(this.options.minHeight){this.$editable.css("min-height",this.options.minHeight)}}this.history.recordUndo()};t.prototype.destroy=function(){this.$editable.off()};t.prototype.handleKeyMap=function(e){var t=this.options.keyMap[fe.isMac?"mac":"pc"];var n=[];if(e.metaKey){n.push("CMD")}if(e.ctrlKey&&!e.altKey){n.push("CTRL")}if(e.shiftKey){n.push("SHIFT")}var i=Ht.nameFromCode[e.keyCode];if(i){n.push(i)}var o=t[n.join("+")];if(o){if(this.context.invoke(o)!==false){e.preventDefault()}}else if(Ht.isEdit(e.keyCode)){this.afterCommand()}};t.prototype.preventDefaultEditableShortCuts=function(e){if((e.ctrlKey||e.metaKey)&&ee.contains([66,73,85],e.keyCode)){e.preventDefault()}};t.prototype.isLimited=function(e,t){e=e||0;if(typeof t!=="undefined"){if(Ht.isMove(t.keyCode)||(t.ctrlKey||t.metaKey)||ee.contains([Ht.code.BACKSPACE,Ht.code.DELETE],t.keyCode)){return false}}if(this.options.maxTextLength>0){if(this.$editable.text().length+e>=this.options.maxTextLength){return true}}return false};t.prototype.createRange=function(){this.focus();return Bt.create(this.editable)};t.prototype.saveRange=function(e){this.lastRange=this.createRange();if(e){this.lastRange.collapse().select()}};t.prototype.restoreRange=function(){if(this.lastRange){this.lastRange.select();this.focus()}};t.prototype.saveTarget=function(e){this.$editable.data("target",e)};t.prototype.clearTarget=function(){this.$editable.removeData("target")};t.prototype.restoreTarget=function(){return this.$editable.data("target")};t.prototype.currentStyle=function(){var e=Bt.create();if(e){e=e.normalize()}return e?this.style.current(e):this.style.fromNode(this.$editable)};t.prototype.styleFromNode=function(e){return this.style.fromNode(e)};t.prototype.undo=function(){this.context.triggerEvent("before.command",this.$editable.html());this.history.undo();this.context.triggerEvent("change",this.$editable.html())};t.prototype.redo=function(){this.context.triggerEvent("before.command",this.$editable.html());this.history.redo();this.context.triggerEvent("change",this.$editable.html())};t.prototype.beforeCommand=function(){this.context.triggerEvent("before.command",this.$editable.html());this.focus()};t.prototype.afterCommand=function(e){this.normalizeContent();this.history.recordUndo();if(!e){this.context.triggerEvent("change",this.$editable.html())}};t.prototype.tab=function(){var e=this.createRange();if(e.isCollapsed()&&e.isOnCell()){this.table.tab(e)}else{if(this.options.tabSize===0){return false}if(!this.isLimited(this.options.tabSize)){this.beforeCommand();this.typing.insertTab(e,this.options.tabSize);this.afterCommand()}}};t.prototype.untab=function(){var e=this.createRange();if(e.isCollapsed()&&e.isOnCell()){this.table.tab(e,true)}else{if(this.options.tabSize===0){return false}}};t.prototype.wrapCommand=function(e){var t=this;return function(){t.beforeCommand();e.apply(t,arguments);t.afterCommand()}};t.prototype.insertImage=function(e,t){var n=this;return qt(e,t).then(function(e){n.beforeCommand();if(typeof t==="function"){t(e)}else{if(typeof t==="string"){e.attr("data-filename",t)}e.css("width",Math.min(n.$editable.width(),e.width()))}e.show();Bt.create(n.editable).insertNode(e[0]);Bt.createFromNodeAfter(e[0]).select();n.afterCommand()}).fail(function(e){n.context.triggerEvent("image.upload.error",e)})};t.prototype.insertImages=function(t){var n=this;e.each(t,function(e,t){var i=t.name;if(n.options.maximumImageFileSize&&n.options.maximumImageFileSize<t.size){n.context.triggerEvent("image.upload.error",n.lang.image.maximumFileSizeError)}else{zt(t).then(function(e){return n.insertImage(e,i)}).fail(function(){n.context.triggerEvent("image.upload.error")})}})};t.prototype.insertImagesOrCallback=function(e){var t=this.options.callbacks;if(t.onImageUpload){this.context.triggerEvent("image.upload",e)}else{this.insertImages(e)}};t.prototype.getSelectedText=function(){var e=this.createRange();if(e.isOnAnchor()){e=Bt.createFromNode(Ot.ancestor(e.sc,Ot.isAnchor))}return e.toString()};t.prototype.onFormatBlock=function(t,n){t=fe.isMSIE?"<"+t+">":t;document.execCommand("FormatBlock",false,t);if(n&&n.length){var i=n[0].className||"";if(i){var o=this.createRange();var r=e([o.sc,o.ec]).closest(t);r.addClass(i)}}};t.prototype.formatPara=function(){this.formatBlock("P")};t.prototype.fontStyling=function(t,n){var i=this.createRange();if(i){var o=this.style.styleNodes(i);e(o).css(t,n);if(i.isCollapsed()){var r=ee.head(o);if(r&&!Ot.nodeLength(r)){r.innerHTML=Ot.ZERO_WIDTH_NBSP_CHAR;Bt.createFromNodeAfter(r.firstChild).select();this.$editable.data(Qt,r)}}}};t.prototype.unlink=function(){var e=this.createRange();if(e.isOnAnchor()){var t=Ot.ancestor(e.sc,Ot.isAnchor);e=Bt.createFromNode(t);e.select();this.beforeCommand();document.execCommand("unlink");this.afterCommand()}};t.prototype.getLinkInfo=function(){var t=this.createRange().expand(Ot.isAnchor);var n=e(ee.head(t.nodes(Ot.isAnchor)));var i={range:t,text:t.toString(),url:n.length?n.attr("href"):""};if(n.length){i.isNewWindow=n.attr("target")==="_blank"}return i};t.prototype.addRow=function(e){var t=this.createRange(this.$editable);if(t.isCollapsed()&&t.isOnCell()){this.beforeCommand();this.table.addRow(t,e);this.afterCommand()}};t.prototype.addCol=function(e){var t=this.createRange(this.$editable);if(t.isCollapsed()&&t.isOnCell()){this.beforeCommand();this.table.addCol(t,e);this.afterCommand()}};t.prototype.deleteRow=function(){var e=this.createRange(this.$editable);if(e.isCollapsed()&&e.isOnCell()){this.beforeCommand();this.table.deleteRow(e);this.afterCommand()}};t.prototype.deleteCol=function(){var e=this.createRange(this.$editable);if(e.isCollapsed()&&e.isOnCell()){this.beforeCommand();this.table.deleteCol(e);this.afterCommand()}};t.prototype.deleteTable=function(){var e=this.createRange(this.$editable);if(e.isCollapsed()&&e.isOnCell()){this.beforeCommand();this.table.deleteTable(e);this.afterCommand()}};t.prototype.resizeTo=function(e,t,n){var i;if(n){var o=e.y/e.x;var r=t.data("ratio");i={width:r>o?e.x:e.y/r,height:r>o?e.x*r:e.y}}else{i={width:e.x,height:e.y}}t.css(i)};t.prototype.hasFocus=function(){return this.$editable.is(":focus")};t.prototype.focus=function(){if(!this.hasFocus()){this.$editable.focus()}};t.prototype.isEmpty=function(){return Ot.isEmpty(this.$editable[0])||Ot.emptyPara===this.$editable.html()};t.prototype.empty=function(){this.context.invoke("code",Ot.emptyPara)};t.prototype.normalizeContent=function(){this.$editable[0].normalize()};return t}();var Yt=function(){function e(e){this.context=e;this.$editable=e.layoutInfo.editable}e.prototype.initialize=function(){this.$editable.on("paste",this.pasteByEvent.bind(this))};e.prototype.pasteByEvent=function(e){var t=e.originalEvent.clipboardData;if(t&&t.items&&t.items.length){var n=ee.head(t.items);if(n.kind==="file"&&n.type.indexOf("image/")!==-1){this.context.invoke("editor.insertImagesOrCallback",[n.getAsFile()])}this.context.invoke("editor.afterCommand")}};return e}();var Jt=function(){function t(t){this.context=t;this.$eventListener=e(document);this.$editor=t.layoutInfo.editor;this.$editable=t.layoutInfo.editable;this.options=t.options;this.lang=this.options.langInfo;this.documentEventHandlers={};this.$dropzone=e(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(this.$editor)}t.prototype.initialize=function(){if(this.options.disableDragAndDrop){this.documentEventHandlers.onDrop=function(e){e.preventDefault()};this.$eventListener=this.$dropzone;this.$eventListener.on("drop",this.documentEventHandlers.onDrop)}else{this.attachDragAndDropEvent()}};t.prototype.attachDragAndDropEvent=function(){var t=this;var n=e();var i=this.$dropzone.find(".note-dropzone-message");this.documentEventHandlers.onDragenter=function(e){var o=t.context.invoke("codeview.isActivated");var r=t.$editor.width()>0&&t.$editor.height()>0;if(!o&&!n.length&&r){t.$editor.addClass("dragover");t.$dropzone.width(t.$editor.width());t.$dropzone.height(t.$editor.height());i.text(t.lang.image.dragImageHere)}n=n.add(e.target)};this.documentEventHandlers.onDragleave=function(e){n=n.not(e.target);if(!n.length){t.$editor.removeClass("dragover")}};this.documentEventHandlers.onDrop=function(){n=e();t.$editor.removeClass("dragover")};this.$eventListener.on("dragenter",this.documentEventHandlers.onDragenter).on("dragleave",this.documentEventHandlers.onDragleave).on("drop",this.documentEventHandlers.onDrop);this.$dropzone.on("dragenter",function(){t.$dropzone.addClass("hover");i.text(t.lang.image.dropImage)}).on("dragleave",function(){t.$dropzone.removeClass("hover");i.text(t.lang.image.dragImageHere)});this.$dropzone.on("drop",function(n){var i=n.originalEvent.dataTransfer;n.preventDefault();if(i&&i.files&&i.files.length){t.$editable.focus();t.context.invoke("editor.insertImagesOrCallback",i.files)}else{e.each(i.types,function(n,o){var r=i.getData(o);if(o.toLowerCase().indexOf("text")>-1){t.context.invoke("editor.pasteHTML",r)}else{e(r).each(function(e,n){t.context.invoke("editor.insertNode",n)})}})}}).on("dragover",false)};t.prototype.destroy=function(){var e=this;Object.keys(this.documentEventHandlers).forEach(function(t){e.$eventListener.off(t.substr(2).toLowerCase(),e.documentEventHandlers[t])});this.documentEventHandlers={}};return t}();var Zt;if(fe.hasCodeMirror){if(fe.isSupportAmd){require(["codemirror"],function(e){Zt=e})}else{Zt=window.CodeMirror}}var en=function(){function e(e){this.context=e;this.$editor=e.layoutInfo.editor;this.$editable=e.layoutInfo.editable;this.$codable=e.layoutInfo.codable;this.options=e.options}e.prototype.sync=function(){var e=this.isActivated();if(e&&fe.hasCodeMirror){this.$codable.data("cmEditor").save()}};e.prototype.isActivated=function(){return this.$editor.hasClass("codeview")};e.prototype.toggle=function(){if(this.isActivated()){this.deactivate()}else{this.activate()}this.context.triggerEvent("codeview.toggled")};e.prototype.activate=function(){var e=this;this.$codable.val(Ot.html(this.$editable,this.options.prettifyHtml));this.$codable.height(this.$editable.height());this.context.invoke("toolbar.updateCodeview",true);this.$editor.addClass("codeview");this.$codable.focus();if(fe.hasCodeMirror){var t=Zt.fromTextArea(this.$codable[0],this.options.codemirror);if(this.options.codemirror.tern){var n=new Zt.TernServer(this.options.codemirror.tern);t.ternServer=n;t.on("cursorActivity",function(e){n.updateArgHints(e)})}t.on("blur",function(n){e.context.triggerEvent("blur.codeview",t.getValue(),n)});t.setSize(null,this.$editable.outerHeight());this.$codable.data("cmEditor",t)}else{this.$codable.on("blur",function(t){e.context.triggerEvent("blur.codeview",e.$codable.val(),t)})}};e.prototype.deactivate=function(){if(fe.hasCodeMirror){var e=this.$codable.data("cmEditor");this.$codable.val(e.getValue());e.toTextArea()}var t=Ot.value(this.$codable,this.options.prettifyHtml)||Ot.emptyPara;var n=this.$editable.html()!==t;this.$editable.html(t);this.$editable.height(this.options.height?this.$codable.height():"auto");this.$editor.removeClass("codeview");if(n){this.context.triggerEvent("change",this.$editable.html(),this.$editable)}this.$editable.focus();this.context.invoke("toolbar.updateCodeview",false)};e.prototype.destroy=function(){if(this.isActivated()){this.deactivate()}};return e}();var tn=24;var nn=function(){function t(t){this.$document=e(document);this.$statusbar=t.layoutInfo.statusbar;this.$editable=t.layoutInfo.editable;this.options=t.options}t.prototype.initialize=function(){var e=this;if(this.options.airMode||this.options.disableResizeEditor){this.destroy();return}this.$statusbar.on("mousedown",function(t){t.preventDefault();t.stopPropagation();var n=e.$editable.offset().top-e.$document.scrollTop();var i=function(t){var i=t.clientY-(n+tn);i=e.options.minheight>0?Math.max(i,e.options.minheight):i;i=e.options.maxHeight>0?Math.min(i,e.options.maxHeight):i;e.$editable.height(i)};e.$document.on("mousemove",i).one("mouseup",function(){e.$document.off("mousemove",i)})})};t.prototype.destroy=function(){this.$statusbar.off();this.$statusbar.addClass("locked")};return t}();var on=function(){function t(t){var n=this;this.context=t;this.$editor=t.layoutInfo.editor;this.$toolbar=t.layoutInfo.toolbar;this.$editable=t.layoutInfo.editable;this.$codable=t.layoutInfo.codable;this.$window=e(window);this.$scrollbar=e("html, body");this.onResize=function(){n.resizeTo({h:n.$window.height()-n.$toolbar.outerHeight()})}}t.prototype.resizeTo=function(e){this.$editable.css("height",e.h);this.$codable.css("height",e.h);if(this.$codable.data("cmeditor")){this.$codable.data("cmeditor").setsize(null,e.h)}};t.prototype.toggle=function(){this.$editor.toggleClass("fullscreen");if(this.isFullscreen()){this.$editable.data("orgHeight",this.$editable.css("height"));this.$window.on("resize",this.onResize).trigger("resize");this.$scrollbar.css("overflow","hidden")}else{this.$window.off("resize",this.onResize);this.resizeTo({h:this.$editable.data("orgHeight")});this.$scrollbar.css("overflow","visible")}this.context.invoke("toolbar.updateFullscreen",this.isFullscreen())};t.prototype.isFullscreen=function(){return this.$editor.hasClass("fullscreen")};return t}();var rn=function(){function t(t){var n=this;this.context=t;this.$document=e(document);this.$editingArea=t.layoutInfo.editingArea;this.options=t.options;this.lang=this.options.langInfo;this.events={"summernote.mousedown":function(e,t){if(n.update(t.target)){t.preventDefault()}},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){n.update()},"summernote.disable":function(){n.hide()},"summernote.codeview.toggled":function(){n.update()}}}t.prototype.initialize=function(){var t=this;this.$handle=e(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',this.options.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',this.options.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(this.$editingArea);this.$handle.on("mousedown",function(e){if(Ot.isControlSizing(e.target)){e.preventDefault();e.stopPropagation();var n=t.$handle.find(".note-control-selection").data("target");var i=n.offset();var o=t.$document.scrollTop();var r=function(e){t.context.invoke("editor.resizeTo",{x:e.clientX-i.left,y:e.clientY-(i.top-o)},n,!e.shiftKey);t.update(n[0])};t.$document.on("mousemove",r).one("mouseup",function(e){e.preventDefault();t.$document.off("mousemove",r);t.context.invoke("editor.afterCommand")});if(!n.data("ratio")){n.data("ratio",n.height()/n.width())}}});this.$handle.on("wheel",function(e){e.preventDefault();t.update()})};t.prototype.destroy=function(){this.$handle.remove()};t.prototype.update=function(t){if(this.context.isDisabled()){return false}var n=Ot.isImg(t);var i=this.$handle.find(".note-control-selection");this.context.invoke("imagePopover.update",t);if(n){var o=e(t);var r=o.position();var a={left:r.left+parseInt(o.css("marginLeft"),10),top:r.top+parseInt(o.css("marginTop"),10)};var s={w:o.outerWidth(false),h:o.outerHeight(false)};i.css({display:"block",left:a.left,top:a.top,width:s.w,height:s.h}).data("target",o);var l=new Image;l.src=o.attr("src");var u=s.w+"x"+s.h+" ("+this.lang.image.original+": "+l.width+"x"+l.height+")";i.find(".note-control-selection-info").text(u);this.context.invoke("editor.saveTarget",t)}else{this.hide()}return n};t.prototype.hide=function(){this.context.invoke("editor.clearTarget");this.$handle.children().hide()};return t}();var an="http://";var sn=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;var ln=function(){function t(e){var t=this;this.context=e;this.events={"summernote.keyup":function(e,n){if(!n.isDefaultPrevented()){t.handleKeyup(n)}},"summernote.keydown":function(e,n){t.handleKeydown(n)}}}t.prototype.initialize=function(){this.lastWordRange=null};t.prototype.destroy=function(){this.lastWordRange=null};t.prototype.replace=function(){if(!this.lastWordRange){return}var t=this.lastWordRange.toString();var n=t.match(sn);if(n&&(n[1]||n[2])){var i=n[1]?t:an+t;var o=e("<a />").html(t).attr("href",i)[0];this.lastWordRange.insertNode(o);this.lastWordRange=null;this.context.invoke("editor.focus")}};t.prototype.handleKeydown=function(e){if(ee.contains([Ht.code.ENTER,Ht.code.SPACE],e.keyCode)){var t=this.context.invoke("editor.createRange").getWordRange();this.lastWordRange=t}};t.prototype.handleKeyup=function(e){if(ee.contains([Ht.code.ENTER,Ht.code.SPACE],e.keyCode)){this.replace()}};return t}();var un=function(){function e(e){var t=this;this.$note=e.layoutInfo.note;this.events={"summernote.change":function(){t.$note.val(e.invoke("code"))}}}e.prototype.shouldInitialize=function(){return Ot.isTextarea(this.$note[0])};return e}();var cn=function(){function t(e){var t=this;this.context=e;this.$editingArea=e.layoutInfo.editingArea;this.options=e.options;this.events={"summernote.init summernote.change":function(){t.update()},"summernote.codeview.toggled":function(){t.update()}}}t.prototype.shouldInitialize=function(){return!!this.options.placeholder};t.prototype.initialize=function(){var t=this;this.$placeholder=e('<div class="note-placeholder">');this.$placeholder.on("click",function(){t.context.invoke("focus")}).text(this.options.placeholder).prependTo(this.$editingArea);this.update()};t.prototype.destroy=function(){this.$placeholder.remove()};t.prototype.update=function(){var e=!this.context.invoke("codeview.isActivated")&&this.context.invoke("editor.isEmpty");this.$placeholder.toggle(e)};return t}();var fn=function(){function t(t){this.ui=e.summernote.ui;this.context=t;this.$toolbar=t.layoutInfo.toolbar;this.options=t.options;this.lang=this.options.langInfo;this.invertedKeyMap=F.invertObject(this.options.keyMap[fe.isMac?"mac":"pc"])}t.prototype.representShortcut=function(e){var t=this.invertedKeyMap[e];if(!this.options.shortcuts||!t){return""}if(fe.isMac){t=t.replace("CMD","â").replace("SHIFT","â§")}t=t.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]");return" ("+t+")"};t.prototype.button=function(e){if(!this.options.tooltip&&e.tooltip){delete e.tooltip}e.container=this.options.container;return this.ui.button(e)};t.prototype.initialize=function(){this.addToolbarButtons();this.addImagePopoverButtons();this.addLinkPopoverButtons();this.addTablePopoverButtons();this.fontInstalledMap={}};t.prototype.destroy=function(){delete this.fontInstalledMap};t.prototype.isFontInstalled=function(e){if(!this.fontInstalledMap.hasOwnProperty(e)){this.fontInstalledMap[e]=fe.isFontInstalled(e)||ee.contains(this.options.fontNamesIgnoreCheck,e)}return this.fontInstalledMap[e]};t.prototype.isFontDeservedToAdd=function(t){var n=["sans-serif","serif","monospace","cursive","fantasy"];t=t.toLowerCase();return t!==""&&this.isFontInstalled(t)&&e.inArray(t,n)===-1};t.prototype.addToolbarButtons=function(){var t=this;this.context.memo("button.style",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.magic),t.options),tooltip:t.lang.style.style,data:{toggle:"dropdown"}}),t.ui.dropdown({className:"dropdown-style",items:t.options.styleTags,title:t.lang.style.style,template:function(e){if(typeof e==="string"){e={tag:e,title:t.lang.style.hasOwnProperty(e)?t.lang.style[e]:e}}var n=e.tag;var i=e.title;var o=e.style?' style="'+e.style+'" ':"";var r=e.className?' class="'+e.className+'"':"";return"<"+n+o+r+">"+i+"</"+n+">"},click:t.context.createInvokeHandler("editor.formatBlock")})]).render()});var n=function(e,n){var o=i.options.styleTags[e];i.context.memo("button.style."+o,function(){return t.button({className:"note-btn-style-"+o,contents:'<div data-value="'+o+'">'+o.toUpperCase()+"</div>",tooltip:t.lang.style[o],click:t.context.createInvokeHandler("editor.formatBlock")}).render()})};var i=this;for(var o=0,r=this.options.styleTags.length;o<r;o++){n(o,r)}this.context.memo("button.bold",function(){return t.button({className:"note-btn-bold",contents:t.ui.icon(t.options.icons.bold),tooltip:t.lang.font.bold+t.representShortcut("bold"),click:t.context.createInvokeHandlerAndUpdateState("editor.bold")}).render()});this.context.memo("button.italic",function(){return t.button({className:"note-btn-italic",contents:t.ui.icon(t.options.icons.italic),tooltip:t.lang.font.italic+t.representShortcut("italic"),click:t.context.createInvokeHandlerAndUpdateState("editor.italic")}).render()});this.context.memo("button.underline",function(){return t.button({className:"note-btn-underline",contents:t.ui.icon(t.options.icons.underline),tooltip:t.lang.font.underline+t.representShortcut("underline"),click:t.context.createInvokeHandlerAndUpdateState("editor.underline")}).render()});this.context.memo("button.clear",function(){return t.button({contents:t.ui.icon(t.options.icons.eraser),tooltip:t.lang.font.clear+t.representShortcut("removeFormat"),click:t.context.createInvokeHandler("editor.removeFormat")}).render()});this.context.memo("button.strikethrough",function(){return t.button({className:"note-btn-strikethrough",contents:t.ui.icon(t.options.icons.strikethrough),tooltip:t.lang.font.strikethrough+t.representShortcut("strikethrough"),click:t.context.createInvokeHandlerAndUpdateState("editor.strikethrough")}).render()});this.context.memo("button.superscript",function(){return t.button({className:"note-btn-superscript",contents:t.ui.icon(t.options.icons.superscript),tooltip:t.lang.font.superscript,click:t.context.createInvokeHandlerAndUpdateState("editor.superscript")}).render()});this.context.memo("button.subscript",function(){return t.button({className:"note-btn-subscript",contents:t.ui.icon(t.options.icons.subscript),tooltip:t.lang.font.subscript,click:t.context.createInvokeHandlerAndUpdateState("editor.subscript")}).render()});this.context.memo("button.fontname",function(){var n=t.context.invoke("editor.currentStyle");e.each(n["font-family"].split(","),function(n,i){i=i.trim().replace(/['"]+/g,"");if(t.isFontDeservedToAdd(i)){if(e.inArray(i,t.options.fontNames)===-1){t.options.fontNames.push(i)}}});return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents('<span class="note-current-fontname"/>',t.options),tooltip:t.lang.font.name,data:{toggle:"dropdown"}}),t.ui.dropdownCheck({className:"dropdown-fontname",checkClassName:t.options.icons.menuCheck,items:t.options.fontNames.filter(t.isFontInstalled.bind(t)),title:t.lang.font.name,template:function(e){return"<span style=\"font-family: '"+e+"'\">"+e+"</span>"},click:t.context.createInvokeHandlerAndUpdateState("editor.fontName")})]).render()});this.context.memo("button.fontsize",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents('<span class="note-current-fontsize"/>',t.options),tooltip:t.lang.font.size,data:{toggle:"dropdown"}}),t.ui.dropdownCheck({className:"dropdown-fontsize",checkClassName:t.options.icons.menuCheck,items:t.options.fontSizes,title:t.lang.font.size,click:t.context.createInvokeHandlerAndUpdateState("editor.fontSize")})]).render()});this.context.memo("button.color",function(){return t.ui.buttonGroup({className:"note-color",children:[t.button({className:"note-current-color-button",contents:t.ui.icon(t.options.icons.font+" note-recent-color"),tooltip:t.lang.color.recent,click:function(n){var i=e(n.currentTarget);t.context.invoke("editor.color",{backColor:i.attr("data-backColor"),foreColor:i.attr("data-foreColor")})},callback:function(e){var t=e.find(".note-recent-color");t.css("background-color","#FFFF00");e.attr("data-backColor","#FFFF00")}}),t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents("",t.options),tooltip:t.lang.color.more,data:{toggle:"dropdown"}}),t.ui.dropdown({items:['<div class="note-palette">','  <div class="note-palette-title">'+t.lang.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="backColor" data-value="inherit">',t.lang.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"</div>",'<div class="note-palette">','  <div class="note-palette-title">'+t.lang.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="removeFormat" data-value="foreColor">',t.lang.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"</div>"].join(""),callback:function(n){n.find(".note-holder").each(function(n,i){var o=e(i);o.append(t.ui.palette({colors:t.options.colors,colorsName:t.options.colorsName,eventName:o.data("event"),container:t.options.container,tooltip:t.options.tooltip}).render())})},click:function(n){var i=e(n.target);var o=i.data("event");var r=i.data("value");if(o&&r){var a=o==="backColor"?"background-color":"color";var s=i.closest(".note-color").find(".note-recent-color");var l=i.closest(".note-color").find(".note-current-color-button");s.css(a,r);l.attr("data-"+o,r);t.context.invoke("editor."+o,r)}}})]}).render()});this.context.memo("button.ul",function(){return t.button({contents:t.ui.icon(t.options.icons.unorderedlist),tooltip:t.lang.lists.unordered+t.representShortcut("insertUnorderedList"),click:t.context.createInvokeHandler("editor.insertUnorderedList")}).render()});this.context.memo("button.ol",function(){return t.button({contents:t.ui.icon(t.options.icons.orderedlist),tooltip:t.lang.lists.ordered+t.representShortcut("insertOrderedList"),click:t.context.createInvokeHandler("editor.insertOrderedList")}).render()});var a=this.button({contents:this.ui.icon(this.options.icons.alignLeft),tooltip:this.lang.paragraph.left+this.representShortcut("justifyLeft"),click:this.context.createInvokeHandler("editor.justifyLeft")});var s=this.button({contents:this.ui.icon(this.options.icons.alignCenter),tooltip:this.lang.paragraph.center+this.representShortcut("justifyCenter"),click:this.context.createInvokeHandler("editor.justifyCenter")});var l=this.button({contents:this.ui.icon(this.options.icons.alignRight),tooltip:this.lang.paragraph.right+this.representShortcut("justifyRight"),click:this.context.createInvokeHandler("editor.justifyRight")});var u=this.button({contents:this.ui.icon(this.options.icons.alignJustify),tooltip:this.lang.paragraph.justify+this.representShortcut("justifyFull"),click:this.context.createInvokeHandler("editor.justifyFull")});var c=this.button({contents:this.ui.icon(this.options.icons.outdent),tooltip:this.lang.paragraph.outdent+this.representShortcut("outdent"),click:this.context.createInvokeHandler("editor.outdent")});var f=this.button({contents:this.ui.icon(this.options.icons.indent),tooltip:this.lang.paragraph.indent+this.representShortcut("indent"),click:this.context.createInvokeHandler("editor.indent")});this.context.memo("button.justifyLeft",F.invoke(a,"render"));this.context.memo("button.justifyCenter",F.invoke(s,"render"));this.context.memo("button.justifyRight",F.invoke(l,"render"));this.context.memo("button.justifyFull",F.invoke(u,"render"));this.context.memo("button.outdent",F.invoke(c,"render"));this.context.memo("button.indent",F.invoke(f,"render"));this.context.memo("button.paragraph",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.alignLeft),t.options),tooltip:t.lang.paragraph.paragraph,data:{toggle:"dropdown"}}),t.ui.dropdown([t.ui.buttonGroup({className:"note-align",children:[a,s,l,u]}),t.ui.buttonGroup({className:"note-list",children:[c,f]})])]).render()});this.context.memo("button.height",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.textHeight),t.options),tooltip:t.lang.font.height,data:{toggle:"dropdown"}}),t.ui.dropdownCheck({items:t.options.lineHeights,checkClassName:t.options.icons.menuCheck,className:"dropdown-line-height",title:t.lang.font.height,click:t.context.createInvokeHandler("editor.lineHeight")})]).render()});this.context.memo("button.table",function(){return t.ui.buttonGroup([t.button({className:"dropdown-toggle",contents:t.ui.dropdownButtonContents(t.ui.icon(t.options.icons.table),t.options),tooltip:t.lang.table.table,data:{toggle:"dropdown"}}),t.ui.dropdown({title:t.lang.table.table,className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(e){var n=e.find(".note-dimension-picker-mousecatcher");n.css({width:t.options.insertTableMaxSize.col+"em",height:t.options.insertTableMaxSize.row+"em"}).mousedown(t.context.createInvokeHandler("editor.insertTable")).on("mousemove",t.tableMoveHandler.bind(t))}}).render()});this.context.memo("button.link",function(){return t.button({contents:t.ui.icon(t.options.icons.link),tooltip:t.lang.link.link+t.representShortcut("linkDialog.show"),click:t.context.createInvokeHandler("linkDialog.show")}).render()});this.context.memo("button.picture",function(){return t.button({contents:t.ui.icon(t.options.icons.picture),tooltip:t.lang.image.image,click:t.context.createInvokeHandler("imageDialog.show")}).render()});this.context.memo("button.video",function(){return t.button({contents:t.ui.icon(t.options.icons.video),tooltip:t.lang.video.video,click:t.context.createInvokeHandler("videoDialog.show")}).render()});this.context.memo("button.hr",function(){return t.button({contents:t.ui.icon(t.options.icons.minus),tooltip:t.lang.hr.insert+t.representShortcut("insertHorizontalRule"),click:t.context.createInvokeHandler("editor.insertHorizontalRule")}).render()});this.context.memo("button.fullscreen",function(){return t.button({className:"btn-fullscreen",contents:t.ui.icon(t.options.icons.arrowsAlt),tooltip:t.lang.options.fullscreen,click:t.context.createInvokeHandler("fullscreen.toggle")}).render()});this.context.memo("button.codeview",function(){return t.button({className:"btn-codeview",contents:t.ui.icon(t.options.icons.code),tooltip:t.lang.options.codeview,click:t.context.createInvokeHandler("codeview.toggle")}).render()});this.context.memo("button.redo",function(){return t.button({contents:t.ui.icon(t.options.icons.redo),tooltip:t.lang.history.redo+t.representShortcut("redo"),click:t.context.createInvokeHandler("editor.redo")}).render()});this.context.memo("button.undo",function(){return t.button({contents:t.ui.icon(t.options.icons.undo),tooltip:t.lang.history.undo+t.representShortcut("undo"),click:t.context.createInvokeHandler("editor.undo")}).render()});this.context.memo("button.help",function(){return t.button({contents:t.ui.icon(t.options.icons.question),tooltip:t.lang.options.help,click:t.context.createInvokeHandler("helpDialog.show")}).render()})};t.prototype.addImagePopoverButtons=function(){var e=this;this.context.memo("button.imageSize100",function(){return e.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:e.lang.image.resizeFull,click:e.context.createInvokeHandler("editor.resize","1")}).render()});this.context.memo("button.imageSize50",function(){return e.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:e.lang.image.resizeHalf,click:e.context.createInvokeHandler("editor.resize","0.5")}).render()});this.context.memo("button.imageSize25",function(){return e.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:e.lang.image.resizeQuarter,click:e.context.createInvokeHandler("editor.resize","0.25")}).render()});this.context.memo("button.floatLeft",function(){return e.button({contents:e.ui.icon(e.options.icons.alignLeft),tooltip:e.lang.image.floatLeft,click:e.context.createInvokeHandler("editor.floatMe","left")}).render()});this.context.memo("button.floatRight",function(){return e.button({contents:e.ui.icon(e.options.icons.alignRight),tooltip:e.lang.image.floatRight,click:e.context.createInvokeHandler("editor.floatMe","right")}).render()});this.context.memo("button.floatNone",function(){return e.button({contents:e.ui.icon(e.options.icons.alignJustify),tooltip:e.lang.image.floatNone,click:e.context.createInvokeHandler("editor.floatMe","none")}).render()});this.context.memo("button.removeMedia",function(){return e.button({contents:e.ui.icon(e.options.icons.trash),tooltip:e.lang.image.remove,click:e.context.createInvokeHandler("editor.removeMedia")}).render()})};t.prototype.addLinkPopoverButtons=function(){var e=this;this.context.memo("button.linkDialogShow",function(){return e.button({contents:e.ui.icon(e.options.icons.link),tooltip:e.lang.link.edit,click:e.context.createInvokeHandler("linkDialog.show")}).render()});this.context.memo("button.unlink",function(){return e.button({contents:e.ui.icon(e.options.icons.unlink),tooltip:e.lang.link.unlink,click:e.context.createInvokeHandler("editor.unlink")}).render()})};t.prototype.addTablePopoverButtons=function(){var e=this;this.context.memo("button.addRowUp",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.rowAbove),tooltip:e.lang.table.addRowAbove,click:e.context.createInvokeHandler("editor.addRow","top")}).render()});this.context.memo("button.addRowDown",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.rowBelow),tooltip:e.lang.table.addRowBelow,click:e.context.createInvokeHandler("editor.addRow","bottom")}).render()});this.context.memo("button.addColLeft",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.colBefore),tooltip:e.lang.table.addColLeft,click:e.context.createInvokeHandler("editor.addCol","left")}).render()});this.context.memo("button.addColRight",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.colAfter),tooltip:e.lang.table.addColRight,click:e.context.createInvokeHandler("editor.addCol","right")}).render()});this.context.memo("button.deleteRow",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.rowRemove),tooltip:e.lang.table.delRow,click:e.context.createInvokeHandler("editor.deleteRow")}).render()});this.context.memo("button.deleteCol",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.colRemove),tooltip:e.lang.table.delCol,click:e.context.createInvokeHandler("editor.deleteCol")}).render()});this.context.memo("button.deleteTable",function(){return e.button({className:"btn-md",contents:e.ui.icon(e.options.icons.trash),tooltip:e.lang.table.delTable,click:e.context.createInvokeHandler("editor.deleteTable")}).render()})};t.prototype.build=function(t,n){for(var i=0,o=n.length;i<o;i++){var r=n[i];var a=e.isArray(r)?r[0]:r;var s=e.isArray(r)?r.length===1?[r[0]]:r[1]:[r];var l=this.ui.buttonGroup({className:"note-"+a}).render();for(var u=0,c=s.length;u<c;u++){var f=this.context.memo("button."+s[u]);if(f){l.append(typeof f==="function"?f(this.context):f)}}l.appendTo(t)}};t.prototype.updateCurrentStyle=function(t){var n=this;var i=t||this.$toolbar;var o=this.context.invoke("editor.currentStyle");this.updateBtnStates(i,{".note-btn-bold":function(){return o["font-bold"]==="bold"},".note-btn-italic":function(){return o["font-italic"]==="italic"},".note-btn-underline":function(){return o["font-underline"]==="underline"},".note-btn-subscript":function(){return o["font-subscript"]==="subscript"},".note-btn-superscript":function(){return o["font-superscript"]==="superscript"},".note-btn-strikethrough":function(){return o["font-strikethrough"]==="strikethrough"}});if(o["font-family"]){var r=o["font-family"].split(",").map(function(e){return e.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")});var a=ee.find(r,this.isFontInstalled.bind(this));i.find(".dropdown-fontname a").each(function(t,n){var i=e(n);var o=i.data("value")+""===a+"";i.toggleClass("checked",o)});i.find(".note-current-fontname").text(a).css("font-family",a)}if(o["font-size"]){var s=o["font-size"];i.find(".dropdown-fontsize a").each(function(t,n){var i=e(n);var o=i.data("value")+""===s+"";i.toggleClass("checked",o)});i.find(".note-current-fontsize").text(s)}if(o["line-height"]){var l=o["line-height"];i.find(".dropdown-line-height li a").each(function(t,i){var o=e(i).data("value")+""===l+"";n.className=o?"checked":""})}};t.prototype.updateBtnStates=function(t,n){var i=this;e.each(n,function(e,n){i.ui.toggleBtnActive(t.find(e),n())})};t.prototype.tableMoveHandler=function(t){var n=18;var i=e(t.target.parentNode);var o=i.next();var r=i.find(".note-dimension-picker-mousecatcher");var a=i.find(".note-dimension-picker-highlighted");var s=i.find(".note-dimension-picker-unhighlighted");var l;if(t.offsetX===undefined){var u=e(t.target).offset();l={x:t.pageX-u.left,y:t.pageY-u.top}}else{l={x:t.offsetX,y:t.offsetY}}var c={c:Math.ceil(l.x/n)||1,r:Math.ceil(l.y/n)||1};a.css({width:c.c+"em",height:c.r+"em"});r.data("value",c.c+"x"+c.r);if(c.c>3&&c.c<this.options.insertTableMaxSize.col){s.css({width:c.c+1+"em"})}if(c.r>3&&c.r<this.options.insertTableMaxSize.row){s.css({height:c.r+1+"em"})}o.html(c.c+" x "+c.r)};return t}();var dn=function(){function t(t){this.context=t;this.$window=e(window);this.$document=e(document);this.ui=e.summernote.ui;this.$note=t.layoutInfo.note;this.$editor=t.layoutInfo.editor;this.$toolbar=t.layoutInfo.toolbar;this.options=t.options;this.followScroll=this.followScroll.bind(this)}t.prototype.shouldInitialize=function(){return!this.options.airMode};t.prototype.initialize=function(){var e=this;this.options.toolbar=this.options.toolbar||[];if(!this.options.toolbar.length){this.$toolbar.hide()}else{this.context.invoke("buttons.build",this.$toolbar,this.options.toolbar)}if(this.options.toolbarContainer){this.$toolbar.appendTo(this.options.toolbarContainer)}this.changeContainer(false);this.$note.on("summernote.keyup summernote.mouseup summernote.change",function(){e.context.invoke("buttons.updateCurrentStyle")});this.context.invoke("buttons.updateCurrentStyle");if(this.options.followingToolbar){this.$window.on("scroll resize",this.followScroll)}};t.prototype.destroy=function(){this.$toolbar.children().remove();if(this.options.followingToolbar){this.$window.off("scroll resize",this.followScroll)}};t.prototype.followScroll=function(){if(this.$editor.hasClass("fullscreen")){return false}var t=this.$toolbar.parent(".note-toolbar-wrapper");var n=this.$editor.outerHeight();var i=this.$editor.width();var o=this.$toolbar.height();t.css({height:o});var r=0;if(this.options.otherStaticBar){r=e(this.options.otherStaticBar).outerHeight()}var a=this.$document.scrollTop();var s=this.$editor.offset().top;var l=s+n;var u=s-r;var c=l-r-o;if(a>u&&a<c){this.$toolbar.css({position:"fixed",top:r,width:i})}else{this.$toolbar.css({position:"relative",top:0,width:"100%"})}};t.prototype.changeContainer=function(e){if(e){this.$toolbar.prependTo(this.$editor)}else{if(this.options.toolbarContainer){this.$toolbar.appendTo(this.options.toolbarContainer)}}};t.prototype.updateFullscreen=function(e){this.ui.toggleBtnActive(this.$toolbar.find(".btn-fullscreen"),e);this.changeContainer(e)};t.prototype.updateCodeview=function(e){this.ui.toggleBtnActive(this.$toolbar.find(".btn-codeview"),e);if(e){this.deactivate()}else{this.activate()}};t.prototype.activate=function(e){var t=this.$toolbar.find("button");if(!e){t=t.not(".btn-codeview")}this.ui.toggleBtn(t,true)};t.prototype.deactivate=function(e){var t=this.$toolbar.find("button");if(!e){t=t.not(".btn-codeview")}this.ui.toggleBtn(t,false)};return t}();var hn=function(){function t(t){this.context=t;this.ui=e.summernote.ui;this.$body=e(document.body);this.$editor=t.layoutInfo.editor;this.options=t.options;this.lang=this.options.langInfo;t.memo("help.linkDialog.show",this.options.langInfo.help["linkDialog.show"])}t.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor;var n=['<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.textToDisplay+"</label>",'<input class="note-link-text form-control note-form-control  note-input" type="text" />',"</div>",'<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.url+"</label>",'<input class="note-link-url form-control note-form-control note-input" type="text" value="http://" />',"</div>",!this.options.disableLinkTarget?e("<div/>").append(this.ui.checkbox({id:"sn-checkbox-open-in-new-window",text:this.lang.link.openInNewWindow,checked:true}).render()).html():""].join("");var i="btn btn-primary note-btn note-btn-primary note-link-btn";var o='<button type="submit" href="#" class="'+i+'" disabled>'+this.lang.link.insert+"</button>";this.$dialog=this.ui.dialog({className:"link-dialog",title:this.lang.link.insert,fade:this.options.dialogsFade,body:n,footer:o}).render().appendTo(t)};t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()};t.prototype.bindEnterKey=function(e,t){e.on("keypress",function(e){if(e.keyCode===Ht.code.ENTER){e.preventDefault();t.trigger("click")}})};t.prototype.toggleLinkBtn=function(e,t,n){this.ui.toggleBtn(e,t.val()&&n.val())};t.prototype.showLinkDialog=function(t){var n=this;return e.Deferred(function(e){var i=n.$dialog.find(".note-link-text");var o=n.$dialog.find(".note-link-url");var r=n.$dialog.find(".note-link-btn");var a=n.$dialog.find("input[type=checkbox]");n.ui.onDialogShown(n.$dialog,function(){n.context.triggerEvent("dialog.shown");if(!t.url){t.url=t.text}i.val(t.text);var s=function(){n.toggleLinkBtn(r,i,o);t.text=i.val()};i.on("input",s).on("paste",function(){setTimeout(s,0)});var l=function(){n.toggleLinkBtn(r,i,o);if(!t.text){i.val(o.val())}};o.on("input",l).on("paste",function(){setTimeout(l,0)}).val(t.url);if(!fe.isSupportTouch){o.trigger("focus")}n.toggleLinkBtn(r,i,o);n.bindEnterKey(o,r);n.bindEnterKey(i,r);var u=t.isNewWindow!==undefined?t.isNewWindow:n.context.options.linkTargetBlank;a.prop("checked",u);r.one("click",function(r){r.preventDefault();e.resolve({range:t.range,url:o.val(),text:i.val(),isNewWindow:a.is(":checked")});n.ui.hideDialog(n.$dialog)})});n.ui.onDialogHidden(n.$dialog,function(){i.off("input paste keypress");o.off("input paste keypress");r.off("click");if(e.state()==="pending"){e.reject()}});n.ui.showDialog(n.$dialog)}).promise()};t.prototype.show=function(){var e=this;var t=this.context.invoke("editor.getLinkInfo");this.context.invoke("editor.saveRange");this.showLinkDialog(t).then(function(t){e.context.invoke("editor.restoreRange");e.context.invoke("editor.createLink",t)}).fail(function(){e.context.invoke("editor.restoreRange")})};return t}();var pn=function(){function t(t){var n=this;this.context=t;this.ui=e.summernote.ui;this.options=t.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){n.update()},"summernote.disable summernote.dialog.shown":function(){n.hide()}}}t.prototype.shouldInitialize=function(){return!ee.isEmpty(this.options.popover.link)};t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-link-popover",callback:function(e){var t=e.find(".popover-content,.note-popover-content");t.prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo(this.options.container);var e=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",e,this.options.popover.link)};t.prototype.destroy=function(){this.$popover.remove()};t.prototype.update=function(){if(!this.context.invoke("editor.hasFocus")){this.hide();return}var t=this.context.invoke("editor.createRange");if(t.isCollapsed()&&t.isOnAnchor()){var n=Ot.ancestor(t.sc,Ot.isAnchor);var i=e(n).attr("href");this.$popover.find("a").attr("href",i).html(i);var o=Ot.posFromPlaceholder(n);this.$popover.css({display:"block",left:o.left,top:o.top})}else{this.hide()}};t.prototype.hide=function(){this.$popover.hide()};return t}();var vn=function(){function t(t){this.context=t;this.ui=e.summernote.ui;this.$body=e(document.body);this.$editor=t.layoutInfo.editor;this.options=t.options;this.lang=this.options.langInfo}t.prototype.initialize=function(){var e=this.options.dialogsInBody?this.$body:this.$editor;var t="";if(this.options.maximumImageFileSize){var n=Math.floor(Math.log(this.options.maximumImageFileSize)/Math.log(1024));var i=(this.options.maximumImageFileSize/Math.pow(1024,n)).toFixed(2)*1+" "+" KMGTP"[n]+"B";t="<small>"+(this.lang.image.maximumFileSize+" : "+i)+"</small>"}var o=['<div class="form-group note-form-group note-group-select-from-files">','<label class="note-form-label">'+this.lang.image.selectFromFiles+"</label>",'<input class="note-image-input note-form-control note-input" ',' type="file" name="files" accept="image/*" multiple="multiple" />',t,"</div>",'<div class="form-group note-group-image-url" style="overflow:auto;">','<label class="note-form-label">'+this.lang.image.url+"</label>",'<input class="note-image-url form-control note-form-control note-input ',' col-md-12" type="text" />',"</div>"].join("");var r="btn btn-primary note-btn note-btn-primary note-image-btn";var a='<button type="submit" href="#" class="'+r+'" disabled>'+this.lang.image.insert+"</button>";this.$dialog=this.ui.dialog({title:this.lang.image.insert,fade:this.options.dialogsFade,body:o,footer:a}).render().appendTo(e)};t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()};t.prototype.bindEnterKey=function(e,t){e.on("keypress",function(e){if(e.keyCode===Ht.code.ENTER){e.preventDefault();t.trigger("click")}})};t.prototype.show=function(){var e=this;this.context.invoke("editor.saveRange");this.showImageDialog().then(function(t){e.ui.hideDialog(e.$dialog);e.context.invoke("editor.restoreRange");if(typeof t==="string"){e.context.invoke("editor.insertImage",t)}else{e.context.invoke("editor.insertImagesOrCallback",t)}}).fail(function(){e.context.invoke("editor.restoreRange")})};t.prototype.showImageDialog=function(){var t=this;return e.Deferred(function(e){var n=t.$dialog.find(".note-image-input");var i=t.$dialog.find(".note-image-url");var o=t.$dialog.find(".note-image-btn");t.ui.onDialogShown(t.$dialog,function(){t.context.triggerEvent("dialog.shown");n.replaceWith(n.clone().on("change",function(t){e.resolve(t.target.files||t.target.value)}).val(""));o.click(function(t){t.preventDefault();e.resolve(i.val())});i.on("keyup paste",function(){var e=i.val();t.ui.toggleBtn(o,e)}).val("");if(!fe.isSupportTouch){i.trigger("focus")}t.bindEnterKey(i,o)});t.ui.onDialogHidden(t.$dialog,function(){n.off("change");i.off("keyup paste keypress");o.off("click");if(e.state()==="pending"){e.reject()}});t.ui.showDialog(t.$dialog)})};return t}();var mn=function(){function t(t){var n=this;this.context=t;this.ui=e.summernote.ui;this.editable=t.layoutInfo.editable[0];this.options=t.options;this.events={"summernote.disable":function(){n.hide()}}}t.prototype.shouldInitialize=function(){return!ee.isEmpty(this.options.popover.image)};t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-image-popover"}).render().appendTo(this.options.container);var e=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",e,this.options.popover.image)};t.prototype.destroy=function(){this.$popover.remove()};t.prototype.update=function(e){if(Ot.isImg(e)){var t=Ot.posFromPlaceholder(e);var n=Ot.posFromPlaceholder(this.editable);this.$popover.css({display:"block",left:this.options.popatmouse?event.pageX-20:t.left,top:this.options.popatmouse?event.pageY:Math.min(t.top,n.top)})}else{this.hide()}};t.prototype.hide=function(){this.$popover.hide()};return t}();var gn=function(){function t(t){var n=this;this.context=t;this.ui=e.summernote.ui;this.options=t.options;this.events={"summernote.mousedown":function(e,t){n.update(t.target)},"summernote.keyup summernote.scroll summernote.change":function(){n.update()},"summernote.disable":function(){n.hide()}}}t.prototype.shouldInitialize=function(){return!ee.isEmpty(this.options.popover.table)};t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-table-popover"}).render().appendTo(this.options.container);var e=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",e,this.options.popover.table);if(fe.isFF){document.execCommand("enableInlineTableEditing",false,false)}};t.prototype.destroy=function(){this.$popover.remove()};t.prototype.update=function(e){if(this.context.isDisabled()){return false}var t=Ot.isCell(e);if(t){var n=Ot.posFromPlaceholder(e);this.$popover.css({display:"block",left:n.left,top:n.top})}else{this.hide()}return t};t.prototype.hide=function(){this.$popover.hide()};return t}();var bn=function(){function t(t){this.context=t;this.ui=e.summernote.ui;this.$body=e(document.body);this.$editor=t.layoutInfo.editor;this.options=t.options;this.lang=this.options.langInfo}t.prototype.initialize=function(){var e=this.options.dialogsInBody?this.$body:this.$editor;var t=['<div class="form-group note-form-group row-fluid">','<label class="note-form-label">'+this.lang.video.url+' <small class="text-muted">'+this.lang.video.providers+"</small></label>",'<input class="note-video-url form-control note-form-control note-input" type="text" />',"</div>"].join("");var n="btn btn-primary note-btn note-btn-primary note-video-btn";var i='<button type="submit" href="#" class="'+n+'" disabled>'+this.lang.video.insert+"</button>";this.$dialog=this.ui.dialog({title:this.lang.video.insert,fade:this.options.dialogsFade,body:t,footer:i}).render().appendTo(e)};t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()};t.prototype.bindEnterKey=function(e,t){e.on("keypress",function(e){if(e.keyCode===Ht.code.ENTER){e.preventDefault();t.trigger("click")}})};t.prototype.createVideoNode=function(t){var n=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;var i=t.match(n);var o=/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/;var r=t.match(o);var a=/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/;var s=t.match(a);var l=/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/;var u=t.match(l);var c=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/;var f=t.match(c);var d=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/;var h=t.match(d);var p=/\/\/v\.qq\.com.*?vid=(.+)/;var v=t.match(p);var m=/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/;var g=t.match(m);var b=/^.+.(mp4|m4v)$/;var y=t.match(b);var w=/^.+.(ogg|ogv)$/;var x=t.match(w);var C=/^.+.(webm)$/;var k=t.match(C);var T;if(i&&i[1].length===11){var S=i[1];T=e("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+S).attr("width","640").attr("height","360")}else if(r&&r[0].length){T=e("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+r[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true")}else if(s&&s[0].length){T=e("<iframe>").attr("frameborder",0).attr("src",s[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed")}else if(u&&u[3].length){T=e("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+u[3]).attr("width","640").attr("height","360")}else if(f&&f[2].length){T=e("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+f[2]).attr("width","640").attr("height","360")}else if(h&&h[1].length){T=e("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+h[1])}else if(v&&v[1].length||g&&g[2].length){var E=v&&v[1].length?v[1]:g[2];T=e("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","310").attr("width","500").attr("src","http://v.qq.com/iframe/player.html?vid="+E+"&amp;auto=0")}else if(y||x||k){T=e("<video controls>").attr("src",t).attr("width","640").attr("height","360")}else{return false}T.addClass("note-video-clip");return T[0]};t.prototype.show=function(){var e=this;var t=this.context.invoke("editor.getSelectedText");this.context.invoke("editor.saveRange");this.showVideoDialog(t).then(function(t){e.ui.hideDialog(e.$dialog);e.context.invoke("editor.restoreRange");var n=e.createVideoNode(t);if(n){e.context.invoke("editor.insertNode",n)}}).fail(function(){e.context.invoke("editor.restoreRange")})};t.prototype.showVideoDialog=function(t){var n=this;return e.Deferred(function(e){var i=n.$dialog.find(".note-video-url");var o=n.$dialog.find(".note-video-btn");n.ui.onDialogShown(n.$dialog,function(){n.context.triggerEvent("dialog.shown");i.val(t).on("input",function(){n.ui.toggleBtn(o,i.val())});if(!fe.isSupportTouch){i.trigger("focus")}o.click(function(t){t.preventDefault();e.resolve(i.val())});n.bindEnterKey(i,o)});n.ui.onDialogHidden(n.$dialog,function(){i.off("input");o.off("click");if(e.state()==="pending"){e.reject()}});n.ui.showDialog(n.$dialog)})};return t}();var yn=function(){function t(t){this.context=t;this.ui=e.summernote.ui;this.$body=e(document.body);this.$editor=t.layoutInfo.editor;this.options=t.options;this.lang=this.options.langInfo}t.prototype.initialize=function(){var e=this.options.dialogsInBody?this.$body:this.$editor;var t=['<p class="text-center">','<a href="http://summernote.org/" target="_blank">Summernote 0.8.10</a> Â· ','<a href="https://github.com/summernote/summernote" target="_blank">Project</a> Â· ','<a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=this.ui.dialog({title:this.lang.options.help,fade:this.options.dialogsFade,body:this.createShortcutList(),footer:t,callback:function(e){e.find(".modal-body,.note-modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(e)};t.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()};t.prototype.createShortcutList=function(){var t=this;var n=this.options.keyMap[fe.isMac?"mac":"pc"];return Object.keys(n).map(function(i){var o=n[i];var r=e('<div><div class="help-list-item"/></div>');r.append(e("<label><kbd>"+i+"</kdb></label>").css({width:180,"margin-right":10})).append(e("<span/>").html(t.context.memo("help."+o)||o));return r.html()}).join("")};t.prototype.showHelpDialog=function(){var t=this;return e.Deferred(function(e){t.ui.onDialogShown(t.$dialog,function(){t.context.triggerEvent("dialog.shown");e.resolve()});t.ui.showDialog(t.$dialog)}).promise()};t.prototype.show=function(){var e=this;this.context.invoke("editor.saveRange");this.showHelpDialog().then(function(){e.context.invoke("editor.restoreRange")})};return t}();var wn=20;var xn=function(){function t(t){var n=this;this.context=t;this.ui=e.summernote.ui;this.options=t.options;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){n.update()},"summernote.disable summernote.change summernote.dialog.shown":function(){n.hide()},"summernote.focusout":function(e,t){if(fe.isFF){return}if(!t.relatedTarget||!Ot.ancestor(t.relatedTarget,F.eq(n.$popover[0]))){n.hide()}}}}t.prototype.shouldInitialize=function(){return this.options.airMode&&!ee.isEmpty(this.options.popover.air)};t.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-air-popover"}).render().appendTo(this.options.container);var e=this.$popover.find(".popover-content");this.context.invoke("buttons.build",e,this.options.popover.air)};t.prototype.destroy=function(){this.$popover.remove()};t.prototype.update=function(){var e=this.context.invoke("editor.currentStyle");if(e.range&&!e.range.isCollapsed()){var t=ee.last(e.range.getClientRects());if(t){var n=F.rect2bnd(t);this.$popover.css({display:"block",left:Math.max(n.left+n.width/2,0)-wn,top:n.top+n.height});this.context.invoke("buttons.updateCurrentStyle",this.$popover)}}else{this.hide()}};t.prototype.hide=function(){this.$popover.hide()};return t}();var Cn=5;var kn=function(){function t(t){var n=this;this.context=t;this.ui=e.summernote.ui;this.$editable=t.layoutInfo.editable;this.options=t.options;this.hint=this.options.hint||[];this.direction=this.options.hintDirection||"bottom";this.hints=e.isArray(this.hint)?this.hint:[this.hint];this.events={"summernote.keyup":function(e,t){if(!t.isDefaultPrevented()){n.handleKeyup(t)}},"summernote.keydown":function(e,t){n.handleKeydown(t)},"summernote.disable summernote.dialog.shown":function(){n.hide()}}}t.prototype.shouldInitialize=function(){return this.hints.length>0};t.prototype.initialize=function(){var t=this;this.lastWordRange=null;this.$popover=this.ui.popover({className:"note-hint-popover",hideArrow:true,direction:""}).render().appendTo(this.options.container);this.$popover.hide();this.$content=this.$popover.find(".popover-content,.note-popover-content");this.$content.on("click",".note-hint-item",function(){t.$content.find(".active").removeClass("active");e(t).addClass("active");t.replace()})};t.prototype.destroy=function(){this.$popover.remove()};t.prototype.selectItem=function(e){this.$content.find(".active").removeClass("active");e.addClass("active");this.$content[0].scrollTop=e[0].offsetTop-this.$content.innerHeight()/2};t.prototype.moveDown=function(){var e=this.$content.find(".note-hint-item.active");var t=e.next();if(t.length){this.selectItem(t)}else{var n=e.parent().next();if(!n.length){n=this.$content.find(".note-hint-group").first()}this.selectItem(n.find(".note-hint-item").first())}};t.prototype.moveUp=function(){var e=this.$content.find(".note-hint-item.active");var t=e.prev();if(t.length){this.selectItem(t)}else{var n=e.parent().prev();if(!n.length){n=this.$content.find(".note-hint-group").last()}this.selectItem(n.find(".note-hint-item").last())}};t.prototype.replace=function(){var e=this.$content.find(".note-hint-item.active");if(e.length){var t=this.nodeFromItem(e);this.lastWordRange.insertNode(t);Bt.createFromNode(t).collapse().select();this.lastWordRange=null;this.hide();this.context.triggerEvent("change",this.$editable.html(),this.$editable[0]);this.context.invoke("editor.focus")}};t.prototype.nodeFromItem=function(e){var t=this.hints[e.data("index")];var n=e.data("item");var i=t.content?t.content(n):n;if(typeof i==="string"){i=Ot.createText(i)}return i};t.prototype.createItemTemplates=function(t,n){var i=this.hints[t];return n.map(function(n,o){var r=e('<div class="note-hint-item"/>');r.append(i.template?i.template(n):n+"");r.data({index:t,item:n});return r})};t.prototype.handleKeydown=function(e){if(!this.$popover.is(":visible")){return}if(e.keyCode===Ht.code.ENTER){e.preventDefault();this.replace()}else if(e.keyCode===Ht.code.UP){e.preventDefault();this.moveUp()}else if(e.keyCode===Ht.code.DOWN){e.preventDefault();this.moveDown()}};t.prototype.searchKeyword=function(e,t,n){var i=this.hints[e];if(i&&i.match.test(t)&&i.search){var o=i.match.exec(t);i.search(o[1],n)}else{n()}};t.prototype.createGroup=function(t,n){var i=this;var o=e('<div class="note-hint-group note-hint-group-'+t+'"/>');this.searchKeyword(t,n,function(e){e=e||[];if(e.length){o.html(i.createItemTemplates(t,e));i.show()}});return o};t.prototype.handleKeyup=function(e){var t=this;if(!ee.contains([Ht.code.ENTER,Ht.code.UP,Ht.code.DOWN],e.keyCode)){var n=this.context.invoke("editor.createRange").getWordRange();var i=n.toString();if(this.hints.length&&i){this.$content.empty();var o=F.rect2bnd(ee.last(n.getClientRects()));if(o){this.$popover.hide();this.lastWordRange=n;this.hints.forEach(function(e,n){if(e.match.test(i)){t.createGroup(n,i).appendTo(t.$content)}});this.$content.find(".note-hint-item:first").addClass("active");if(this.direction==="top"){this.$popover.css({left:o.left,top:o.top-this.$popover.outerHeight()-Cn})}else{this.$popover.css({left:o.left,top:o.top+o.height+Cn})}}}else{this.hide()}}};t.prototype.show=function(){this.$popover.show()};t.prototype.hide=function(){this.$popover.hide()};return t}();var Tn=function(){function t(t,n){this.ui=e.summernote.ui;this.$note=t;this.memos={};this.modules={};this.layoutInfo={};this.options=n;this.initialize()}t.prototype.initialize=function(){this.layoutInfo=this.ui.createLayout(this.$note,this.options);this._initialize();this.$note.hide();return this};t.prototype.destroy=function(){this._destroy();this.$note.removeData("summernote");this.ui.removeLayout(this.$note,this.layoutInfo)};t.prototype.reset=function(){var e=this.isDisabled();this.code(Ot.emptyPara);this._destroy();this._initialize();if(e){this.disable()}};t.prototype._initialize=function(){var t=this;var n=e.extend({},this.options.buttons);Object.keys(n).forEach(function(e){t.memo("button."+e,n[e])});var i=e.extend({},this.options.modules,e.summernote.plugins||{});Object.keys(i).forEach(function(e){t.module(e,i[e],true)});Object.keys(this.modules).forEach(function(e){t.initializeModule(e)})};t.prototype._destroy=function(){var e=this;Object.keys(this.modules).reverse().forEach(function(t){e.removeModule(t)});Object.keys(this.memos).forEach(function(t){e.removeMemo(t)});this.triggerEvent("destroy",this)};t.prototype.code=function(e){var t=this.invoke("codeview.isActivated");if(e===undefined){this.invoke("codeview.sync");return t?this.layoutInfo.codable.val():this.layoutInfo.editable.html()}else{if(t){this.layoutInfo.codable.val(e)}else{this.layoutInfo.editable.html(e)}this.$note.val(e);this.triggerEvent("change",e)}};t.prototype.isDisabled=function(){return this.layoutInfo.editable.attr("contenteditable")==="false"};t.prototype.enable=function(){this.layoutInfo.editable.attr("contenteditable",true);this.invoke("toolbar.activate",true);this.triggerEvent("disable",false)};t.prototype.disable=function(){if(this.invoke("codeview.isActivated")){this.invoke("codeview.deactivate")}this.layoutInfo.editable.attr("contenteditable",false);this.invoke("toolbar.deactivate",true);this.triggerEvent("disable",true)};t.prototype.triggerEvent=function(){var e=ee.head(arguments);var t=ee.tail(ee.from(arguments));var n=this.options.callbacks[F.namespaceToCamel(e,"on")];if(n){n.apply(this.$note[0],t)}this.$note.trigger("summernote."+e,t)};t.prototype.initializeModule=function(e){var t=this.modules[e];t.shouldInitialize=t.shouldInitialize||F.ok;if(!t.shouldInitialize()){return}if(t.initialize){t.initialize()}if(t.events){Ot.attachEvents(this.$note,t.events)}};t.prototype.module=function(e,t,n){if(arguments.length===1){return this.modules[e]}this.modules[e]=new t(this);if(!n){this.initializeModule(e)}};t.prototype.removeModule=function(e){var t=this.modules[e];if(t.shouldInitialize()){if(t.events){Ot.detachEvents(this.$note,t.events)}if(t.destroy){t.destroy()}}delete this.modules[e]};t.prototype.memo=function(e,t){if(arguments.length===1){return this.memos[e]}this.memos[e]=t};t.prototype.removeMemo=function(e){if(this.memos[e]&&this.memos[e].destroy){this.memos[e].destroy()}delete this.memos[e]};t.prototype.createInvokeHandlerAndUpdateState=function(e,t){var n=this;return function(i){n.createInvokeHandler(e,t)(i);n.invoke("buttons.updateCurrentStyle")}};t.prototype.createInvokeHandler=function(t,n){var i=this;return function(o){o.preventDefault();var r=e(o.target);i.invoke(t,n||r.closest("[data-value]").data("value"),r)}};t.prototype.invoke=function(){var e=ee.head(arguments);var t=ee.tail(ee.from(arguments));var n=e.split(".");var i=n.length>1;var o=i&&ee.head(n);var r=i?ee.last(n):ee.head(n);var a=this.modules[o||"editor"];if(!o&&this[r]){return this[r].apply(this,t)}else if(a&&a[r]&&a.shouldInitialize()){return a[r].apply(a,t)}};return t}();e.fn.extend({summernote:function(){var t=e.type(ee.head(arguments));var n=t==="string";var i=t==="object";var o=e.extend({},e.summernote.options,i?ee.head(arguments):{});o.langInfo=e.extend(true,{},e.summernote.lang["en-US"],e.summernote.lang[o.lang]);o.icons=e.extend(true,{},e.summernote.options.icons,o.icons);o.tooltip=o.tooltip==="auto"?!fe.isSupportTouch:o.tooltip;this.each(function(t,n){var i=e(n);if(!i.data("summernote")){var r=new Tn(i,o);i.data("summernote",r);i.data("summernote").triggerEvent("init",r.layoutInfo)}});var r=this.first();if(r.length){var a=r.data("summernote");if(n){return a.invoke.apply(a,ee.from(arguments))}else if(o.focus){a.invoke("editor.focus")}}return this}});e.summernote=e.extend(e.summernote,{version:"0.8.10",ui:w,dom:Ot,plugins:{},options:{modules:{editor:Xt,clipboard:Yt,dropzone:Jt,codeview:en,statusbar:nn,fullscreen:on,handle:rn,hintPopover:kn,autoLink:ln,autoSync:un,placeholder:cn,buttons:fn,toolbar:dn,linkDialog:hn,linkPopover:pn,imageDialog:vn,imagePopover:mn,tablePopover:gn,videoDialog:bn,helpDialog:yn,airPopover:xn},buttons:{},lang:"en-US",followingToolbar:true,otherStaticBar:"",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popatmouse:true,popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],table:[["add",["addRowDown","addRowUp","addColLeft","addColRight"]],["delete",["deleteRow","deleteCol","deleteTable"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:false,width:null,height:null,linkTargetBlank:true,focus:false,tabSize:4,styleWithSpan:true,shortcuts:true,textareaAutoSync:true,hintDirection:"bottom",tooltip:"auto",container:"body",maxTextLength:0,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],colorsName:[["Black","Tundora","Dove Gray","Star Dust","Pale Slate","Gallery","Alabaster","White"],["Red","Orange Peel","Yellow","Green","Cyan","Blue","Electric Violet","Magenta"],["Azalea","Karry","Egg White","Zanah","Botticelli","Tropical Blue","Mischka","Twilight"],["Tonys Pink","Peach Orange","Cream Brulee","Sprout","Casper","Perano","Cold Purple","Careys Pink"],["Mandy","Rajah","Dandelion","Olivine","Gulf Stream","Viking","Blue Marguerite","Puce"],["Guardsman Red","Fire Bush","Golden Dream","Chelsea Cucumber","Smalt Blue","Boston Blue","Butterfly Bush","Cadillac"],["Sangria","Mai Tai","Buddha Gold","Forest Green","Eden","Venice Blue","Meteorite","Claret"],["Rosewood","Cinnamon","Olive","Parsley","Tiber","Midnight Blue","Valentino","Loulou"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:false,dialogsFade:false,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onBlurCodeview:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:true,lineNumbers:true},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",rowBelow:"note-icon-row-below",colBefore:"note-icon-col-before",colAfter:"note-icon-col-after",rowAbove:"note-icon-row-above",rowRemove:"note-icon-row-remove",colRemove:"note-icon-col-remove",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-menu-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})});(function(e){e.extend(e.summernote.lang,{"da-DK":{font:{bold:"Fed",italic:"Kursiv",underline:"Understreget",clear:"Fjern formatering",height:"HÃ¸jde",name:"Skrifttype",strikethrough:"Gennemstreget",subscript:"SÃ¦nket skrift",superscript:"HÃ¦vet skrift",size:"SkriftstÃ¸rrelse"},image:{image:"Billede",insert:"IndsÃ¦t billede",resizeFull:"Original stÃ¸rrelse",resizeHalf:"Halv stÃ¸rrelse",resizeQuarter:"Kvart stÃ¸rrelse",floatLeft:"Venstrestillet",floatRight:"HÃ¸jrestillet",floatNone:"Fjern formatering",shapeRounded:"Form: Runde kanter",shapeCircle:"Form: Cirkel",shapeThumbnail:"Form: Miniature",shapeNone:"Form: Ingen",dragImageHere:"TrÃ¦k billede hertil",dropImage:"Slip billede",selectFromFiles:"VÃ¦lg billed-fil",maximumFileSize:"Maks fil stÃ¸rrelse",maximumFileSizeError:"Filen er stÃ¸rre end maks tilladte fil stÃ¸rrelse!",url:"Billede URL",remove:"Fjern billede",original:"Original"},video:{video:"Video",videoLink:"Video Link",insert:"IndsÃ¦t Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion eller Youku)"},link:{link:"Link",insert:"IndsÃ¦t link",unlink:"Fjern link",edit:"Rediger",textToDisplay:"Visningstekst",url:"Hvor skal linket pege hen?",openInNewWindow:"Ãbn i nyt vindue"},table:{table:"Tabel",addRowAbove:"Add row above",addRowBelow:"Add row below",addColLeft:"Add column left",addColRight:"Add column right",delRow:"Delete row",delCol:"Delete column",delTable:"Delete table"},hr:{insert:"IndsÃ¦t horisontal linje"},style:{style:"Stil",p:"p",blockquote:"Citat",pre:"Kode",h1:"Overskrift 1",h2:"Overskrift 2",h3:"Overskrift 3",h4:"Overskrift 4",h5:"Overskrift 5",h6:"Overskrift 6"},lists:{unordered:"Punktopstillet liste",ordered:"Nummereret liste"},options:{help:"HjÃ¦lp",fullscreen:"Fuld skÃ¦rm",codeview:"HTML-Visning"},paragraph:{paragraph:"Afsnit",outdent:"Formindsk indryk",indent:"ForÃ¸g indryk",left:"Venstrestillet",center:"Centreret",right:"HÃ¸jrestillet",justify:"Blokjuster"},color:{recent:"Nyligt valgt farve",more:"Flere farver",background:"Baggrund",foreground:"Forgrund",transparent:"Transparent",setTransparent:"SÃ¦t transparent",reset:"Nulstil",resetToDefault:"Gendan standardindstillinger"},shortcut:{shortcuts:"Genveje",close:"Luk",textFormatting:"Tekstformatering",action:"Handling",paragraphFormatting:"Afsnitsformatering",documentStyle:"Dokumentstil",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Fortryd",redo:"Annuller fortryd"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}})})(jQuery);var NoteSaveButton=function(e){var t=$.summernote.ui;var n=t.button({contents:'<i class="fa fa-child"/>Save',tooltip:"save",click:function(){var t={route:pageRoute,content:e.invoke("code")};var n=Router.generatePath("dime.api.page.content",{});$.post(n,JSON.stringify(t),function(e){})}});return n.render()};$("#pageedit").on("click",function(){if($(this).hasClass("active")){$(".inlineedit").summernote("destroy")}else{$(".inlineedit").summernote({lang:lang,focus:true,buttons:{save:NoteSaveButton},toolbar:[["style",["style"]],["font",["fontname","fontsize"]],["textstyle",["bold","italic","underline","strikethrough","superscript","subscript","clear"]],["color",["color"]],["para",["ul","ol","paragraph","height"]],["insert",["picture","link","video"]],["table",["table"]],["hr",["hr"]],["view",["fullscreen","codeview"]],["edit",["undo","redo"]],["help",["help"]],["save",["save"]]]})}});var Router=function(){var e="";var t=[];var n=function e(t,n){n=n===undefined?[]:n;this.base=this.base===undefined?"":this.base;var i=this.routes[t];if(i===undefined){return undefined}var o=this.base+i.path;for(var r in n){if(n.hasOwnProperty(r)){o=o.replace("{"+r+"}",n[r])}}return o};var i=function e(t){this.base=t};var o=function e(t){this.routes=t};return{generatePath:n,setBasePath:i,setRoutes:o}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9qcy9iYXNlL3JlbmRlcmVyLmpzIiwiLi4vc3JjL2pzL2JzMy91aS5qcyIsIi4uL3NyYy9qcy9iYXNlL2NvcmUvZnVuYy5qcyIsIi4uL3NyYy9qcy9iYXNlL2NvcmUvbGlzdHMuanMiLCIuLi9zcmMvanMvYmFzZS9jb3JlL2Vudi5qcyIsIi4uL3NyYy9qcy9iYXNlL2NvcmUvZG9tLmpzIiwiLi4vc3JjL2pzL2Jhc2Uvc3VtbWVybm90ZS1lbi1VUy5qcyIsIi4uL3NyYy9qcy9iYXNlL2NvcmUva2V5LmpzIiwiLi4vc3JjL2pzL2Jhc2UvY29yZS9yYW5nZS5qcyIsIi4uL3NyYy9qcy9iYXNlL2NvcmUvYXN5bmMuanMiLCIuLi9zcmMvanMvYmFzZS9lZGl0aW5nL0hpc3RvcnkuanMiLCIuLi9zcmMvanMvYmFzZS9lZGl0aW5nL1N0eWxlLmpzIiwiLi4vc3JjL2pzL2Jhc2UvZWRpdGluZy9CdWxsZXQuanMiLCIuLi9zcmMvanMvYmFzZS9lZGl0aW5nL1R5cGluZy5qcyIsIi4uL3NyYy9qcy9iYXNlL2VkaXRpbmcvVGFibGUuanMiLCIuLi9zcmMvanMvYmFzZS9tb2R1bGUvRWRpdG9yLmpzIiwiLi4vc3JjL2pzL2Jhc2UvbW9kdWxlL0NsaXBib2FyZC5qcyIsIi4uL3NyYy9qcy9iYXNlL21vZHVsZS9Ecm9wem9uZS5qcyIsIi4uL3NyYy9qcy9iYXNlL21vZHVsZS9Db2Rldmlldy5qcyIsIi4uL3NyYy9qcy9iYXNlL21vZHVsZS9TdGF0dXNiYXIuanMiLCIuLi9zcmMvanMvYmFzZS9tb2R1bGUvRnVsbHNjcmVlbi5qcyIsIi4uL3NyYy9qcy9iYXNlL21vZHVsZS9IYW5kbGUuanMiLCIuLi9zcmMvanMvYmFzZS9tb2R1bGUvQXV0b0xpbmsuanMiLCIuLi9zcmMvanMvYmFzZS9tb2R1bGUvQXV0b1N5bmMuanMiLCIuLi9zcmMvanMvYmFzZS9tb2R1bGUvUGxhY2Vob2xkZXIuanMiLCIuLi9zcmMvanMvYmFzZS9tb2R1bGUvQnV0dG9ucy5qcyIsIi4uL3NyYy9qcy9iYXNlL21vZHVsZS9Ub29sYmFyLmpzIiwiLi4vc3JjL2pzL2Jhc2UvbW9kdWxlL0xpbmtEaWFsb2cuanMiLCIuLi9zcmMvanMvYmFzZS9tb2R1bGUvTGlua1BvcG92ZXIuanMiLCIuLi9zcmMvanMvYmFzZS9tb2R1bGUvSW1hZ2VEaWFsb2cuanMiLCIuLi9zcmMvanMvYmFzZS9tb2R1bGUvSW1hZ2VQb3BvdmVyLmpzIiwiLi4vc3JjL2pzL2Jhc2UvbW9kdWxlL1RhYmxlUG9wb3Zlci5qcyIsIi4uL3NyYy9qcy9iYXNlL21vZHVsZS9WaWRlb0RpYWxvZy5qcyIsIi4uL3NyYy9qcy9iYXNlL21vZHVsZS9IZWxwRGlhbG9nLmpzIiwiLi4vc3JjL2pzL2Jhc2UvbW9kdWxlL0FpclBvcG92ZXIuanMiLCIuLi9zcmMvanMvYmFzZS9tb2R1bGUvSGludFBvcG92ZXIuanMiLCIuLi9zcmMvanMvYmFzZS9Db250ZXh0LmpzIiwiLi4vc3JjL2pzL3N1bW1lcm5vdGUuanMiLCIuLi9zcmMvanMvYnMzL3NldHRpbmdzLmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJnbG9iYWwiLCJkb2N1bWVudCIsInciLCJFcnJvciIsImZhY3RvcnkiLCJ3aW5kb3ciLCJ0aGlzIiwibm9HbG9iYWwiLCJPYmplY3QiLCJnZXRQcm90b3R5cGVPZiIsImFyciIsInNsaWNlIiwiY29uY2F0IiwicHVzaCIsImluZGV4T2YiLCJjbGFzczJ0eXBlIiwidG9TdHJpbmciLCJoYXNPd25Qcm9wZXJ0eSIsImhhc093biIsImZuVG9TdHJpbmciLCJjYWxsIiwiaXNGdW5jdGlvbiIsIm9iaiIsIm5vZGVUeXBlIiwiaXNXaW5kb3ciLCJwcmVzZXJ2ZWRTY3JpcHRBdHRyaWJ1dGVzIiwidHlwZSIsInNyYyIsIm5vTW9kdWxlIiwiRE9NRXZhbCIsImNvZGUiLCJkb2MiLCJub2RlIiwiY3JlYXRlRWxlbWVudCIsInRleHQiLCJpIiwic2NyaXB0IiwiYXBwZW5kQ2hpbGQiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJ0b1R5cGUiLCJzZWxlY3RvciIsImNvbnRleHQiLCJqUXVlcnkiLCJmbiIsImluaXQiLCJwcm90b3R5cGUiLCJ2ZXJzaW9uIiwibnVtIiwibGVuZ3RoIiwiZWxlbXMiLCJtZXJnZSIsImNvbnN0cnVjdG9yIiwicmV0IiwicHJldk9iamVjdCIsImNhbGxiYWNrIiwiZWFjaCIsInB1c2hTdGFjayIsIm1hcCIsImVsZW0iLCJhcHBseSIsImFyZ3VtZW50cyIsImVxIiwibGVuIiwiaiIsImV4dGVuZCIsIm9wdGlvbnMiLCJuYW1lIiwiY29weSIsImNvcHlJc0FycmF5IiwiY2xvbmUiLCJ0YXJnZXQiLCJkZWVwIiwiaXNQbGFpbk9iamVjdCIsIkFycmF5IiwiaXNBcnJheSIsImV4cGFuZG8iLCJNYXRoIiwicmFuZG9tIiwicmVwbGFjZSIsImlzUmVhZHkiLCJlcnJvciIsIm1zZyIsInByb3RvIiwiQ3RvciIsImdldFByb3RvIiwicmVzdWx0cyIsImZpcnN0Iiwic2Vjb25kIiwiaW52ZXJ0IiwiY2FsbGJhY2tJbnZlcnNlIiwiY2FsbGJhY2tFeHBlY3QiLCJhcmciLCJpc0FycmF5TGlrZSIsInZhbHVlIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJzcGxpdCIsInRvTG93ZXJDYXNlIiwiU2l6emxlIiwidG9rZW5pemUiLCJzb3J0SW5wdXQiLCJtYXRjaGVzIiwiRGF0ZSIsImNyZWF0ZUNhY2hlIiwiYSIsImIiLCJwdXNoX25hdGl2ZSIsImxpc3QiLCJhdHRyaWJ1dGVzIiwid2hpdGVzcGFjZSIsImlkZW50aWZpZXIiLCJycHNldWRvIiwiUmVnRXhwIiwicHNldWRvcyIsImJvb2xlYW5zIiwicnF1aWNrRXhwciIsIl8iLCJlc2NhcGVkIiwiZXNjYXBlZFdoaXRlc3BhY2UiLCJoaWdoIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiY2giLCJhc0NvZGVQb2ludCIsImFkZENvbWJpbmF0b3IiLCJkaXNhYmxlZCIsIm5leHQiLCJwcmVmZXJyZWREb2MiLCJjaGlsZE5vZGVzIiwiZWxzIiwic2VlZCIsIm0iLCJuaWQiLCJtYXRjaCIsImdyb3VwcyIsIm5ld1NlbGVjdG9yIiwib3duZXJEb2N1bWVudCIsIiQiLCJjb250YWlucyIsImlkIiwic3VwcG9ydCIsInFzYSIsImNvbXBpbGVyQ2FjaGUiLCJuZXdDb250ZXh0Iiwibm9kZU5hbWUiLCJnZXRBdHRyaWJ1dGUiLCJyY3NzZXNjYXBlIiwiZmNzc2VzY2FwZSIsInNldEF0dHJpYnV0ZSIsInRvU2VsZWN0b3IiLCJqb2luIiwicnNpYmxpbmciLCJ0ZXN0IiwidGVzdENvbnRleHQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicXNhRXJyb3IiLCJzZWxlY3QiLCJydHJpbSIsImtleXMiLCJjYWNoZSIsImtleSIsIkV4cHIiLCJjYWNoZUxlbmd0aCIsInNoaWZ0IiwiYXNzZXJ0IiwiZWwiLCJlIiwiYWRkSGFuZGxlIiwiYXR0cnMiLCJoYW5kbGVyIiwiYXR0ckhhbmRsZSIsImRpZmYiLCJjdXIiLCJuZXh0U2libGluZyIsImNyZWF0ZUlucHV0UHNldWRvIiwiY3JlYXRlQnV0dG9uUHNldWRvIiwiY3JlYXRlRGlzYWJsZWRQc2V1ZG8iLCJjcmVhdGVQb3NpdGlvbmFsUHNldWRvIiwibWFya0Z1bmN0aW9uIiwiYXJndW1lbnQiLCJtYXRjaEluZGV4ZXMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImRvY3VtZW50RWxlbWVudCIsImlzWE1MIiwic3ViV2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInVubG9hZEhhbmRsZXIiLCJhdHRhY2hFdmVudCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJybmF0aXZlIiwiZ2V0QnlJZCIsInJ1bmVzY2FwZSIsImZ1bmVzY2FwZSIsImF0dHJJZCIsImZpbHRlciIsImdldEF0dHJpYnV0ZU5vZGUiLCJmaW5kIiwidGFnIiwidG1wIiwiY2xhc3NOYW1lIiwiZG9jdW1lbnRJc0hUTUwiLCJkb2NFbGVtIiwiaW5uZXJIVE1MIiwicmJ1Z2d5UVNBIiwiZGlzY29ubmVjdGVkTWF0Y2giLCJyYnVnZ3lNYXRjaGVzIiwiYWRvd24iLCJidXAiLCJjb21wYXJlIiwic29ydERldGFjaGVkIiwiY29tcGFyZURvY3VtZW50UG9zaXRpb24iLCJhdXAiLCJzaWJsaW5nQ2hlY2siLCJhcCIsImJwIiwiZXhwciIsImVsZW1lbnRzIiwic2V0RG9jdW1lbnQiLCJyYXR0cmlidXRlUXVvdGVzIiwidmFsIiwidW5kZWZpbmVkIiwidW5pcXVlU29ydCIsImR1cGxpY2F0ZXMiLCJzb3J0U3RhYmxlIiwic29ydCIsInNvcnRPcmRlciIsImdldFRleHQiLCJ0ZXh0Q29udGVudCIsImZpcnN0Q2hpbGQiLCJkaXIiLCJleGNlc3MiLCJ1bnF1b3RlZCIsIm1hdGNoRXhwciIsIlRBRyIsIm5vZGVOYW1lU2VsZWN0b3IiLCJjbGFzc0NhY2hlIiwicGF0dGVybiIsIm9wZXJhdG9yIiwiY2hlY2siLCJhdHRyIiwicmVzdWx0IiwicndoaXRlc3BhY2UiLCJ3aGF0IiwibGFzdCIsInhtbCIsInVuaXF1ZUNhY2hlIiwib3V0ZXJDYWNoZSIsIm5vZGVJbmRleCIsInN0YXJ0Iiwic2ltcGxlIiwiZm9yd2FyZCIsIm9mVHlwZSIsInBhcmVudCIsImxhc3RDaGlsZCIsInVzZUNhY2hlIiwidW5pcXVlSUQiLCJkaXJydW5zIiwicG9wIiwicHNldWRvIiwiYXJncyIsInNldEZpbHRlcnMiLCJpZHgiLCJ1bm1hdGNoZWQiLCJpbnB1dCIsImlubmVyVGV4dCIsImxhbmciLCJyaWRlbnRpZmllciIsImVsZW1MYW5nIiwibG9jYXRpb24iLCJoYXNoIiwiZW5hYmxlZCIsImNoZWNrZWQiLCJzZWxlY3RlZCIsInNlbGVjdGVkSW5kZXgiLCJyaGVhZGVyIiwicmlucHV0cyIsInJhZGlvIiwiY2hlY2tib3giLCJmaWxlIiwicGFzc3dvcmQiLCJpbWFnZSIsImZpbHRlcnMiLCJwYXJzZU9ubHkiLCJtYXRjaGVkIiwidG9rZW5zIiwiY2FjaGVkIiwicHJlRmlsdGVyIiwicmNvbW1hIiwiZXhlYyIsInNvRmFyIiwicmNvbWJpbmF0b3JzIiwibWF0Y2hlciIsImNvbWJpbmF0b3IiLCJiYXNlIiwiZG9uZU5hbWUiLCJjaGVja05vbkVsZW1lbnRzIiwic2tpcCIsIm9sZENhY2hlIiwibmV3Q2FjaGUiLCJtYXRjaGVycyIsImNvbnRleHRzIiwibWFwcGVkIiwic2V0TWF0Y2hlciIsInBvc3RGaWx0ZXIiLCJwb3N0RmluZGVyIiwicG9zdFNlbGVjdG9yIiwiY29uZGVuc2UiLCJwcmVNYXAiLCJtYXRjaGVySW4iLCJtYXRjaGVyT3V0IiwicG9zdE1hcCIsInRlbXAiLCJzcGxpY2UiLCJwcmVleGlzdGluZyIsImxlYWRpbmdSZWxhdGl2ZSIsInJlbGF0aXZlIiwiY2hlY2tDb250ZXh0Iiwib3V0ZXJtb3N0Q29udGV4dCIsIm1hdGNoQW55Q29udGV4dCIsImVsZW1lbnRNYXRjaGVyIiwibWF0Y2hlckZyb21Ub2tlbnMiLCJtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMiLCJlbGVtZW50TWF0Y2hlcnMiLCJzZXRNYXRjaGVycyIsIm91dGVybW9zdCIsImRpcnJ1bnNVbmlxdWUiLCJieVNldCIsInNldE1hdGNoZWQiLCJjb250ZXh0QmFja3VwIiwidG9rZW4iLCJjb21waWxlZCIsImNvbXBpbGUiLCJkZWZhdWx0VmFsdWUiLCJzcGVjaWZpZWQiLCJzZWxlY3RvcnMiLCJ1bmlxdWUiLCJ0cnVuY2F0ZSIsImlzIiwidW50aWwiLCJuIiwiZ3JlcCIsInF1YWxpZmllciIsIm5vdCIsIm1hdGNoZXNTZWxlY3RvciIsInNlbGYiLCJ3aW5ub3ciLCJybmVlZHNDb250ZXh0Iiwicm9vdGpRdWVyeSIsInJvb3QiLCJqcXVlcnkiLCJyZWFkeSIsImwiLCJ0YXJnZXRzIiwicHJldkFsbCIsImFkZCIsInNpYmxpbmciLCJjb250ZW50RG9jdW1lbnQiLCJjb250ZW50IiwiZ3VhcmFudGVlZFVuaXF1ZSIsInJwYXJlbnRzcHJldiIsInJldmVyc2UiLCJmbGFnIiwibG9ja2VkIiwib25jZSIsImZpcmluZyIsImZpcmluZ0luZGV4IiwibWVtb3J5IiwicXVldWUiLCJoYXMiLCJpbkFycmF5IiwiaW5kZXgiLCJmaXJlZCIsIklkZW50aXR5IiwidiIsIm1ldGhvZCIsInByb21pc2UiLCJkb25lIiwicmVzb2x2ZSIsImZhaWwiLCJyZWplY3QiLCJ0aGVuIiwibm9WYWx1ZSIsIkNhbGxiYWNrcyIsInN0YXRlIiwiZm5zIiwidHVwbGUiLCJyZXR1cm5lZCIsIm5ld0RlZmVyIiwibm90aWZ5Iiwib25SZWplY3RlZCIsIm9uUHJvZ3Jlc3MiLCJkZWZlcnJlZCIsInNwZWNpYWwiLCJ0aGF0IiwiVHlwZUVycm9yIiwibWF4RGVwdGgiLCJUaHJvd2VyIiwibm90aWZ5V2l0aCIsInJlc29sdmVXaXRoIiwiZXhjZXB0aW9uSG9vayIsImRlcHRoIiwiRGVmZXJyZWQiLCJnZXRTdGFja0hvb2siLCJwcm9jZXNzIiwic3RhdGVTdHJpbmciLCJkaXNhYmxlIiwibG9jayIsImZpcmUiLCJmaXJlV2l0aCIsInNpbmdsZVZhbHVlIiwibWFzdGVyIiwidXBkYXRlRnVuYyIsInJlc29sdmVWYWx1ZXMiLCJzdGFjayIsInJlYWR5RXhjZXB0aW9uIiwid2FpdCIsInJlYWR5V2FpdCIsInJlYWR5TGlzdCIsImNvbXBsZXRlZCIsInJlYWR5U3RhdGUiLCJkb1Njcm9sbCIsImJ1bGsiLCJyYXciLCJlbXB0eUdldCIsImFsbCIsImxldHRlciIsInN0cmluZyIsInJtc1ByZWZpeCIsInJkYXNoQWxwaGEiLCJmY2FtZWxDYXNlIiwib3duZXIiLCJEYXRhIiwidWlkIiwiZGVmaW5lUHJvcGVydHkiLCJkYXRhIiwicHJvcCIsImNhbWVsQ2FzZSIsImdldCIsImlzRW1wdHlPYmplY3QiLCJkYXRhVXNlciIsImdldERhdGEiLCJwYXJzZSIsImRhdGFBdHRyIiwicm11bHRpRGFzaCIsImhhc0RhdGEiLCJkYXRhUHJpdiIsInJlbW92ZSIsImFjY2VzcyIsInNldCIsIm1ha2VBcnJheSIsInVuc2hpZnQiLCJob29rcyIsInN0b3AiLCJlbXB0eSIsInNldHRlciIsImRlcXVldWUiLCJjb3VudCIsImRlZmVyIiwicG51bSIsInNvdXJjZSIsInN0eWxlIiwiZGlzcGxheSIsIm9sZCIsInZhbHVlUGFydHMiLCJ0d2VlbiIsInNjYWxlIiwiY3NzIiwiY3VycmVudFZhbHVlIiwiY3NzTnVtYmVyIiwidW5pdCIsImluaXRpYWwiLCJpbml0aWFsSW5Vbml0IiwiZW5kIiwiYWRqdXN0ZWQiLCJzaG93SGlkZSIsInNob3ciLCJ2YWx1ZXMiLCJpc0hpZGRlbldpdGhpblRyZWUiLCJnZXREZWZhdWx0RGlzcGxheSIsImhpZGUiLCJ3cmFwTWFwIiwib3B0aW9uIiwidGJvZHkiLCJ0Zm9vdCIsImNvbGdyb3VwIiwiY2FwdGlvbiIsInRoZWFkIiwidGgiLCJ0ZCIsImdldEFsbCIsInJlZkVsZW1lbnRzIiwiYnVpbGRGcmFnbWVudCIsInNjcmlwdHMiLCJzZWxlY3Rpb24iLCJpZ25vcmVkIiwid3JhcCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJub2RlcyIsInJodG1sIiwiY3JlYXRlVGV4dE5vZGUiLCJmcmFnbWVudCIsInJ0YWdOYW1lIiwiX2RlZmF1bHQiLCJodG1sUHJlZmlsdGVyIiwicnNjcmlwdFR5cGUiLCJkaXYiLCJjbG9uZU5vZGUiLCJyZXR1cm5UcnVlIiwicmV0dXJuRmFsc2UiLCJhY3RpdmVFbGVtZW50IiwiZXJyIiwidHlwZXMiLCJvbmUiLCJldmVudCIsImd1aWQiLCJvcmlnRm4iLCJldmVudEhhbmRsZSIsImhhbmRsZU9iaiIsImhhbmRsZXJzIiwibmFtZXNwYWNlcyIsIm9yaWdUeXBlIiwiZWxlbURhdGEiLCJoYW5kbGVPYmpJbiIsImV2ZW50cyIsImhhbmRsZSIsInRyaWdnZXJlZCIsImRpc3BhdGNoIiwicm5vdGh0bWx3aGl0ZSIsInQiLCJydHlwZW5hbWVzcGFjZSIsImRlbGVnYXRlVHlwZSIsImJpbmRUeXBlIiwibmVlZHNDb250ZXh0IiwibmFtZXNwYWNlIiwiZGVsZWdhdGVDb3VudCIsInNldHVwIiwibWFwcGVkVHlwZXMiLCJvcmlnQ291bnQiLCJ0ZWFyZG93biIsInJlbW92ZUV2ZW50IiwibmF0aXZlRXZlbnQiLCJmaXgiLCJoYW5kbGVyUXVldWUiLCJwcmVEaXNwYXRjaCIsImlzUHJvcGFnYXRpb25TdG9wcGVkIiwiaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQiLCJybmFtZXNwYWNlIiwic2VsIiwibWF0Y2hlZEhhbmRsZXJzIiwibWF0Y2hlZFNlbGVjdG9ycyIsImJ1dHRvbiIsImhvb2siLCJFdmVudCIsImZvY3VzIiwic2FmZUFjdGl2ZUVsZW1lbnQiLCJibHVyIiwiY2xpY2siLCJvcmlnaW5hbEV2ZW50IiwicmV0dXJuVmFsdWUiLCJwcm9wcyIsImRlZmF1bHRQcmV2ZW50ZWQiLCJjdXJyZW50VGFyZ2V0IiwicmVsYXRlZFRhcmdldCIsInRpbWVTdGFtcCIsIm5vdyIsImlzU2ltdWxhdGVkIiwicmtleUV2ZW50IiwiY2hhckNvZGUiLCJrZXlDb2RlIiwicm1vdXNlRXZlbnQiLCJvcmlnIiwicmVsYXRlZCIsIm9uIiwiZGVsZWdhdGVUYXJnZXQiLCJvZmYiLCJjaGlsZHJlbiIsImNsb25lQ29weUV2ZW50IiwiZGVzdCIsInBkYXRhT2xkIiwicGRhdGFDdXIiLCJ1ZGF0YU9sZCIsInVkYXRhQ3VyIiwicmNoZWNrYWJsZVR5cGUiLCJjb2xsZWN0aW9uIiwiaGFzU2NyaXB0cyIsImh0bWwiLCJkaXNhYmxlU2NyaXB0IiwiaU5vQ2xvbmUiLCJyZXN0b3JlU2NyaXB0IiwiX2V2YWxVcmwiLCJyY2xlYW5TY3JpcHQiLCJrZWVwRGF0YSIsImNsZWFuRGF0YSIsInJ4aHRtbFRhZyIsImRhdGFBbmRFdmVudHMiLCJkZWVwRGF0YUFuZEV2ZW50cyIsInNyY0VsZW1lbnRzIiwiZGVzdEVsZW1lbnRzIiwibm9DbG9uZUNoZWNrZWQiLCJpc1hNTERvYyIsImluUGFnZSIsImFjY2VwdERhdGEiLCJkb21NYW5pcCIsIm1hbmlwdWxhdGlvblRhcmdldCIsImluc2VydEJlZm9yZSIsInJub0lubmVyaHRtbCIsImFwcGVuZCIsIm9yaWdpbmFsIiwiaW5zZXJ0IiwidmlldyIsImRlZmF1bHRWaWV3Iiwib3BlbmVyIiwiY3NzRXhwYW5kIiwiY29tcHV0ZVN0eWxlVGVzdHMiLCJjc3NUZXh0IiwiY29udGFpbmVyIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImRpdlN0eWxlIiwidG9wIiwicm91bmRQaXhlbE1lYXN1cmVzIiwibWFyZ2luTGVmdCIsInJpZ2h0IiwicGl4ZWxCb3hTdHlsZXNWYWwiLCJ3aWR0aCIsInBvc2l0aW9uIiwib2Zmc2V0V2lkdGgiLCJtZWFzdXJlIiwicm91bmQiLCJwYXJzZUZsb2F0IiwiYm94U2l6aW5nUmVsaWFibGVWYWwiLCJzY3JvbGxib3hTaXplVmFsIiwiYmFja2dyb3VuZENsaXAiLCJyZWxpYWJsZU1hcmdpbkxlZnRWYWwiLCJjb21wdXRlZCIsIm1heFdpZHRoIiwiZ2V0UHJvcGVydHlWYWx1ZSIsInBpeGVsQm94U3R5bGVzIiwicm51bW5vbnB4IiwicmJveFN0eWxlIiwibWluV2lkdGgiLCJhZGRHZXRIb29rSWYiLCJjb25kaXRpb25GbiIsImhvb2tGbiIsInZpc2liaWxpdHkiLCJlbXB0eVN0eWxlIiwiY2FwTmFtZSIsInRvVXBwZXJDYXNlIiwiY3NzUHJlZml4ZXMiLCJjc3NQcm9wcyIsInZlbmRvclByb3BOYW1lIiwic3VidHJhY3QiLCJyY3NzTnVtIiwiZGltZW5zaW9uIiwiaXNCb3JkZXJCb3giLCJib3giLCJzdHlsZXMiLCJleHRyYSIsImNvbXB1dGVkVmFsIiwibWF4IiwiY2VpbCIsImRlbHRhIiwiZ2V0U3R5bGVzIiwiY3VyQ1NTIiwidmFsdWVJc0JvcmRlckJveCIsImJveFNpemluZ1JlbGlhYmxlIiwiaXNDdXN0b21Qcm9wIiwib3JpZ05hbWUiLCJzZXRQcm9wZXJ0eSIsInJjdXN0b21Qcm9wIiwiZmluYWxQcm9wTmFtZSIsImNzc0hvb2tzIiwiY3NzTm9ybWFsVHJhbnNmb3JtIiwiaXNGaW5pdGUiLCJnZXRDbGllbnRSZWN0cyIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImNzc1Nob3ciLCJnZXRXaWR0aE9ySGVpZ2h0IiwiYm94TW9kZWxBZGp1c3RtZW50Iiwic2Nyb2xsYm94U2l6ZSIsInNldFBvc2l0aXZlTnVtYmVyIiwicmVsaWFibGVNYXJnaW5MZWZ0IiwibGVmdCIsIm1hcmdpbiIsImJvcmRlciIsInByZWZpeCIsInN1ZmZpeCIsInBhcnRzIiwiVHdlZW4iLCJlYXNpbmciLCJwcm9wSG9va3MiLCJwZXJjZW50IiwiZHVyYXRpb24iLCJlYXNlZCIsInBvcyIsInN0ZXAiLCJmeCIsInNjcm9sbFRvcCIsInNjcm9sbExlZnQiLCJwIiwiY29zIiwiUEkiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzY2hlZHVsZSIsImludGVydmFsIiwiZnhOb3ciLCJnZW5GeCIsImluY2x1ZGVXaWR0aCIsImhlaWdodCIsIm9wYWNpdHkiLCJhbmltYXRpb24iLCJkZWZhdWx0UHJlZmlsdGVyIiwib3B0cyIsInRvZ2dsZSIsIm9sZGZpcmUiLCJwcm9wVHdlZW4iLCJyZXN0b3JlRGlzcGxheSIsIl9xdWV1ZUhvb2tzIiwidW5xdWV1ZWQiLCJoaWRkZW4iLCJkYXRhU2hvdyIsIm92ZXJmbG93Iiwib3ZlcmZsb3dYIiwib3ZlcmZsb3dZIiwiY3JlYXRlVHdlZW4iLCJhbmltIiwic3BlY2lhbEVhc2luZyIsImV4cGFuZCIsIkFuaW1hdGlvbiIsInByb3BlcnRpZXMiLCJwcmVmaWx0ZXJzIiwiYWx3YXlzIiwic3RhcnRUaW1lIiwiY3VycmVudFRpbWUiLCJ0d2VlbnMiLCJydW4iLCJyZW1haW5pbmciLCJjcmVhdGVGeE5vdyIsImdvdG9FbmQiLCJyZWplY3RXaXRoIiwiYmluZCIsInByb2dyZXNzIiwiY29tcGxldGUiLCJ0aWNrIiwidHdlZW5lcnMiLCJwcmVwZW5kIiwic3BlZWQiLCJzcGVlZHMiLCJvcHQiLCJ0byIsIm9wdGFsbCIsImZpbmlzaCIsImRvQW5pbWF0aW9uIiwiY2xlYXJRdWV1ZSJdLCJtYXBwaW5ncyI6IjRCQUVBLFVBQUFBLFNBQUEsaUJBQUFBLE9BQUFDLFVBQUEsU0FBQSxRQVdJQSxRQUFTQyxFQUFPQyxXQUNkRCxFQUFNLGVBQ1BFLE9BRURBLEVBQUlELFNBQUssV0FDUEUsTUFBTSxtREFHUkMsRUFBU0Ysd0JBUVJHLFNBQUEsWUFBQUEsT0FBQUMsS0FBQSxT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RUFBRWYsU0FDUCxTQUFFOVIsU0FDUkEsRUFBQUMsY0FDQUEsT0FDRDZSIiwiZmlsZSI6ImFyay1zdGF0aWMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuXG5jbGFzcyBSZW5kZXJlciB7XG4gIGNvbnN0cnVjdG9yKG1hcmt1cCwgY2hpbGRyZW4sIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5tYXJrdXAgPSBtYXJrdXA7XG4gICAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICB9XG5cbiAgcmVuZGVyKCRwYXJlbnQpIHtcbiAgICBjb25zdCAkbm9kZSA9ICQodGhpcy5tYXJrdXApO1xuXG4gICAgaWYgKHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMuY29udGVudHMpIHtcbiAgICAgICRub2RlLmh0bWwodGhpcy5vcHRpb25zLmNvbnRlbnRzKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5jbGFzc05hbWUpIHtcbiAgICAgICRub2RlLmFkZENsYXNzKHRoaXMub3B0aW9ucy5jbGFzc05hbWUpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLmRhdGEpIHtcbiAgICAgICQuZWFjaCh0aGlzLm9wdGlvbnMuZGF0YSwgKGssIHYpID0+IHtcbiAgICAgICAgJG5vZGUuYXR0cignZGF0YS0nICsgaywgdik7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5jbGljaykge1xuICAgICAgJG5vZGUub24oJ2NsaWNrJywgdGhpcy5vcHRpb25zLmNsaWNrKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jaGlsZHJlbikge1xuICAgICAgY29uc3QgJGNvbnRhaW5lciA9ICRub2RlLmZpbmQoJy5ub3RlLWNoaWxkcmVuLWNvbnRhaW5lcicpO1xuICAgICAgdGhpcy5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICBjaGlsZC5yZW5kZXIoJGNvbnRhaW5lci5sZW5ndGggPyAkY29udGFpbmVyIDogJG5vZGUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY2FsbGJhY2spIHtcbiAgICAgIHRoaXMuY2FsbGJhY2soJG5vZGUsIHRoaXMub3B0aW9ucyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMuY2FsbGJhY2spIHtcbiAgICAgIHRoaXMub3B0aW9ucy5jYWxsYmFjaygkbm9kZSk7XG4gICAgfVxuXG4gICAgaWYgKCRwYXJlbnQpIHtcbiAgICAgICRwYXJlbnQuYXBwZW5kKCRub2RlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gJG5vZGU7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBjcmVhdGU6IChtYXJrdXAsIGNhbGxiYWNrKSA9PiB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB0eXBlb2YgYXJndW1lbnRzWzFdID09PSAnb2JqZWN0JyA/IGFyZ3VtZW50c1sxXSA6IGFyZ3VtZW50c1swXTtcbiAgICAgIGxldCBjaGlsZHJlbiA9ICQuaXNBcnJheShhcmd1bWVudHNbMF0pID8gYXJndW1lbnRzWzBdIDogW107XG4gICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmNoaWxkcmVuKSB7XG4gICAgICAgIGNoaWxkcmVuID0gb3B0aW9ucy5jaGlsZHJlbjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgUmVuZGVyZXIobWFya3VwLCBjaGlsZHJlbiwgb3B0aW9ucywgY2FsbGJhY2spO1xuICAgIH07XG4gIH1cbn07XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IHJlbmRlcmVyIGZyb20gJy4uL2Jhc2UvcmVuZGVyZXInO1xuXG5jb25zdCBlZGl0b3IgPSByZW5kZXJlci5jcmVhdGUoJzxkaXYgY2xhc3M9XCJub3RlLWVkaXRvciBub3RlLWZyYW1lIHBhbmVsXCIvPicpO1xuY29uc3QgdG9vbGJhciA9IHJlbmRlcmVyLmNyZWF0ZSgnPGRpdiBjbGFzcz1cIm5vdGUtdG9vbGJhci13cmFwcGVyIHBhbmVsLWRlZmF1bHRcIj48ZGl2IGNsYXNzPVwibm90ZS10b29sYmFyIHBhbmVsLWhlYWRpbmdcIiByb2xlPVwidG9vbGJhclwiPjwvZGl2PjwvZGl2PicpO1xuY29uc3QgZWRpdGluZ0FyZWEgPSByZW5kZXJlci5jcmVhdGUoJzxkaXYgY2xhc3M9XCJub3RlLWVkaXRpbmctYXJlYVwiLz4nKTtcbmNvbnN0IGNvZGFibGUgPSByZW5kZXJlci5jcmVhdGUoJzx0ZXh0YXJlYSBjbGFzcz1cIm5vdGUtY29kYWJsZVwiIHJvbGU9XCJ0ZXh0Ym94XCIgYXJpYS1tdWx0aWxpbmU9XCJ0cnVlXCIvPicpO1xuY29uc3QgZWRpdGFibGUgPSByZW5kZXJlci5jcmVhdGUoJzxkaXYgY2xhc3M9XCJub3RlLWVkaXRhYmxlXCIgY29udGVudEVkaXRhYmxlPVwidHJ1ZVwiIHJvbGU9XCJ0ZXh0Ym94XCIgYXJpYS1tdWx0aWxpbmU9XCJ0cnVlXCIvPicpO1xuY29uc3Qgc3RhdHVzYmFyID0gcmVuZGVyZXIuY3JlYXRlKFtcbiAgJzxvdXRwdXQgY2xhc3M9XCJub3RlLXN0YXR1cy1vdXRwdXRcIiBhcmlhLWxpdmU9XCJwb2xpdGVcIi8+JyxcbiAgJzxkaXYgY2xhc3M9XCJub3RlLXN0YXR1c2JhclwiIHJvbGU9XCJzdGF0dXNcIj4nLFxuICAnICA8ZGl2IGNsYXNzPVwibm90ZS1yZXNpemViYXJcIiByb2xlPVwic2VwZXJhdG9yXCIgYXJpYS1vcmllbnRhdGlvbj1cImhvcml6b250YWxcIiBhcmlhLWxhYmVsPVwiUmVzaXplXCI+JyxcbiAgJyAgICA8ZGl2IGNsYXNzPVwibm90ZS1pY29uLWJhclwiLz4nLFxuICAnICAgIDxkaXYgY2xhc3M9XCJub3RlLWljb24tYmFyXCIvPicsXG4gICcgICAgPGRpdiBjbGFzcz1cIm5vdGUtaWNvbi1iYXJcIi8+JyxcbiAgJyAgPC9kaXY+JyxcbiAgJzwvZGl2Pidcbl0uam9pbignJykpO1xuXG5jb25zdCBhaXJFZGl0b3IgPSByZW5kZXJlci5jcmVhdGUoJzxkaXYgY2xhc3M9XCJub3RlLWVkaXRvclwiLz4nKTtcbmNvbnN0IGFpckVkaXRhYmxlID0gcmVuZGVyZXIuY3JlYXRlKFtcbiAgJyAgPG91dHB1dCBjbGFzcz1cIm5vdGUtc3RhdHVzLW91dHB1dFwiIGFyaWEtbGl2ZT1cInBvbGl0ZVwiLz4nLFxuICAnPGRpdiBjbGFzcz1cIm5vdGUtZWRpdGFibGVcIiBjb250ZW50RWRpdGFibGU9XCJ0cnVlXCIgcm9sZT1cInRleHRib3hcIiBhcmlhLW11bHRpbGluZT1cInRydWVcIi8+J1xuXS5qb2luKCcnKSk7XG5cbmNvbnN0IGJ1dHRvbkdyb3VwID0gcmVuZGVyZXIuY3JlYXRlKCc8ZGl2IGNsYXNzPVwibm90ZS1idG4tZ3JvdXAgYnRuLWdyb3VwXCI+Jyk7XG5cbmNvbnN0IGRyb3Bkb3duID0gcmVuZGVyZXIuY3JlYXRlKCc8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51XCIgcm9sZT1cImxpc3RcIj4nLCBmdW5jdGlvbigkbm9kZSwgb3B0aW9ucykge1xuICBjb25zdCBtYXJrdXAgPSAkLmlzQXJyYXkob3B0aW9ucy5pdGVtcykgPyBvcHRpb25zLml0ZW1zLm1hcChmdW5jdGlvbihpdGVtKSB7XG4gICAgY29uc3QgdmFsdWUgPSAodHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnKSA/IGl0ZW0gOiAoaXRlbS52YWx1ZSB8fCAnJyk7XG4gICAgY29uc3QgY29udGVudCA9IG9wdGlvbnMudGVtcGxhdGUgPyBvcHRpb25zLnRlbXBsYXRlKGl0ZW0pIDogaXRlbTtcbiAgICBjb25zdCBvcHRpb24gPSAodHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnKSA/IGl0ZW0ub3B0aW9uIDogdW5kZWZpbmVkO1xuXG4gICAgY29uc3QgZGF0YVZhbHVlID0gJ2RhdGEtdmFsdWU9XCInICsgdmFsdWUgKyAnXCInO1xuICAgIGNvbnN0IGRhdGFPcHRpb24gPSAob3B0aW9uICE9PSB1bmRlZmluZWQpID8gJyBkYXRhLW9wdGlvbj1cIicgKyBvcHRpb24gKyAnXCInIDogJyc7XG4gICAgcmV0dXJuICc8bGkgcm9sZT1cImxpc3RpdGVtXCIgYXJpYS1sYWJlbD1cIicgKyBpdGVtICsgJ1wiPjxhIGhyZWY9XCIjXCIgJyArIChkYXRhVmFsdWUgKyBkYXRhT3B0aW9uKSArICc+JyArIGNvbnRlbnQgKyAnPC9hPjwvbGk+JztcbiAgfSkuam9pbignJykgOiBvcHRpb25zLml0ZW1zO1xuXG4gICRub2RlLmh0bWwobWFya3VwKS5hdHRyKHsnYXJpYS1sYWJlbCc6IG9wdGlvbnMudGl0bGV9KTtcbn0pO1xuXG5jb25zdCBkcm9wZG93bkJ1dHRvbkNvbnRlbnRzID0gZnVuY3Rpb24oY29udGVudHMsIG9wdGlvbnMpIHtcbiAgcmV0dXJuIGNvbnRlbnRzICsgJyAnICsgaWNvbihvcHRpb25zLmljb25zLmNhcmV0LCAnc3BhbicpO1xufTtcblxuY29uc3QgZHJvcGRvd25DaGVjayA9IHJlbmRlcmVyLmNyZWF0ZSgnPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudSBub3RlLWNoZWNrXCIgcm9sZT1cImxpc3RcIj4nLCBmdW5jdGlvbigkbm9kZSwgb3B0aW9ucykge1xuICBjb25zdCBtYXJrdXAgPSAkLmlzQXJyYXkob3B0aW9ucy5pdGVtcykgPyBvcHRpb25zLml0ZW1zLm1hcChmdW5jdGlvbihpdGVtKSB7XG4gICAgY29uc3QgdmFsdWUgPSAodHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnKSA/IGl0ZW0gOiAoaXRlbS52YWx1ZSB8fCAnJyk7XG4gICAgY29uc3QgY29udGVudCA9IG9wdGlvbnMudGVtcGxhdGUgPyBvcHRpb25zLnRlbXBsYXRlKGl0ZW0pIDogaXRlbTtcbiAgICByZXR1cm4gJzxsaSByb2xlPVwibGlzdGl0ZW1cIiBhcmlhLWxhYmVsPVwiJyArIGl0ZW0gKyAnXCI+PGEgaHJlZj1cIiNcIiBkYXRhLXZhbHVlPVwiJyArIHZhbHVlICsgJ1wiPicgKyBpY29uKG9wdGlvbnMuY2hlY2tDbGFzc05hbWUpICsgJyAnICsgY29udGVudCArICc8L2E+PC9saT4nO1xuICB9KS5qb2luKCcnKSA6IG9wdGlvbnMuaXRlbXM7XG4gICRub2RlLmh0bWwobWFya3VwKS5hdHRyKHsnYXJpYS1sYWJlbCc6IG9wdGlvbnMudGl0bGV9KTtcbn0pO1xuXG5jb25zdCBwYWxldHRlID0gcmVuZGVyZXIuY3JlYXRlKCc8ZGl2IGNsYXNzPVwibm90ZS1jb2xvci1wYWxldHRlXCIvPicsIGZ1bmN0aW9uKCRub2RlLCBvcHRpb25zKSB7XG4gIGNvbnN0IGNvbnRlbnRzID0gW107XG4gIGZvciAobGV0IHJvdyA9IDAsIHJvd1NpemUgPSBvcHRpb25zLmNvbG9ycy5sZW5ndGg7IHJvdyA8IHJvd1NpemU7IHJvdysrKSB7XG4gICAgY29uc3QgZXZlbnROYW1lID0gb3B0aW9ucy5ldmVudE5hbWU7XG4gICAgY29uc3QgY29sb3JzID0gb3B0aW9ucy5jb2xvcnNbcm93XTtcbiAgICBjb25zdCBjb2xvcnNOYW1lID0gb3B0aW9ucy5jb2xvcnNOYW1lW3Jvd107XG4gICAgY29uc3QgYnV0dG9ucyA9IFtdO1xuICAgIGZvciAobGV0IGNvbCA9IDAsIGNvbFNpemUgPSBjb2xvcnMubGVuZ3RoOyBjb2wgPCBjb2xTaXplOyBjb2wrKykge1xuICAgICAgY29uc3QgY29sb3IgPSBjb2xvcnNbY29sXTtcbiAgICAgIGNvbnN0IGNvbG9yTmFtZSA9IGNvbG9yc05hbWVbY29sXTtcbiAgICAgIGJ1dHRvbnMucHVzaChbXG4gICAgICAgICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cIm5vdGUtY29sb3ItYnRuXCInLFxuICAgICAgICAnc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOicsIGNvbG9yLCAnXCIgJyxcbiAgICAgICAgJ2RhdGEtZXZlbnQ9XCInLCBldmVudE5hbWUsICdcIiAnLFxuICAgICAgICAnZGF0YS12YWx1ZT1cIicsIGNvbG9yLCAnXCIgJyxcbiAgICAgICAgJ3RpdGxlPVwiJywgY29sb3JOYW1lLCAnXCIgJyxcbiAgICAgICAgJ2FyaWEtbGFiZWw9XCInLCBjb2xvck5hbWUsICdcIiAnLFxuICAgICAgICAnZGF0YS10b2dnbGU9XCJidXR0b25cIiB0YWJpbmRleD1cIi0xXCI+PC9idXR0b24+J1xuICAgICAgXS5qb2luKCcnKSk7XG4gICAgfVxuICAgIGNvbnRlbnRzLnB1c2goJzxkaXYgY2xhc3M9XCJub3RlLWNvbG9yLXJvd1wiPicgKyBidXR0b25zLmpvaW4oJycpICsgJzwvZGl2PicpO1xuICB9XG4gICRub2RlLmh0bWwoY29udGVudHMuam9pbignJykpO1xuXG4gIGlmIChvcHRpb25zLnRvb2x0aXApIHtcbiAgICAkbm9kZS5maW5kKCcubm90ZS1jb2xvci1idG4nKS50b29sdGlwKHtcbiAgICAgIGNvbnRhaW5lcjogb3B0aW9ucy5jb250YWluZXIsXG4gICAgICB0cmlnZ2VyOiAnaG92ZXInLFxuICAgICAgcGxhY2VtZW50OiAnYm90dG9tJ1xuICAgIH0pO1xuICB9XG59KTtcblxuY29uc3QgZGlhbG9nID0gcmVuZGVyZXIuY3JlYXRlKCc8ZGl2IGNsYXNzPVwibW9kYWxcIiBhcmlhLWhpZGRlbj1cImZhbHNlXCIgdGFiaW5kZXg9XCItMVwiIHJvbGU9XCJkaWFsb2dcIi8+JywgZnVuY3Rpb24oJG5vZGUsIG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMuZmFkZSkge1xuICAgICRub2RlLmFkZENsYXNzKCdmYWRlJyk7XG4gIH1cbiAgJG5vZGUuYXR0cih7XG4gICAgJ2FyaWEtbGFiZWwnOiBvcHRpb25zLnRpdGxlXG4gIH0pO1xuICAkbm9kZS5odG1sKFtcbiAgICAnPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZ1wiPicsXG4gICAgJyAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj4nLFxuICAgIChvcHRpb25zLnRpdGxlXG4gICAgICA/ICcgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPicgK1xuICAgICcgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9idXR0b24+JyArXG4gICAgJyAgICAgIDxoNCBjbGFzcz1cIm1vZGFsLXRpdGxlXCI+JyArIG9wdGlvbnMudGl0bGUgKyAnPC9oND4nICtcbiAgICAnICAgIDwvZGl2PicgOiAnJ1xuICAgICksXG4gICAgJyAgICA8ZGl2IGNsYXNzPVwibW9kYWwtYm9keVwiPicgKyBvcHRpb25zLmJvZHkgKyAnPC9kaXY+JyxcbiAgICAob3B0aW9ucy5mb290ZXJcbiAgICAgID8gJyAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+JyArIG9wdGlvbnMuZm9vdGVyICsgJzwvZGl2PicgOiAnJ1xuICAgICksXG4gICAgJyAgPC9kaXY+JyxcbiAgICAnPC9kaXY+J1xuICBdLmpvaW4oJycpKTtcbn0pO1xuXG5jb25zdCBwb3BvdmVyID0gcmVuZGVyZXIuY3JlYXRlKFtcbiAgJzxkaXYgY2xhc3M9XCJub3RlLXBvcG92ZXIgcG9wb3ZlciBpblwiPicsXG4gICcgIDxkaXYgY2xhc3M9XCJhcnJvd1wiLz4nLFxuICAnICA8ZGl2IGNsYXNzPVwicG9wb3Zlci1jb250ZW50IG5vdGUtY2hpbGRyZW4tY29udGFpbmVyXCIvPicsXG4gICc8L2Rpdj4nXG5dLmpvaW4oJycpLCBmdW5jdGlvbigkbm9kZSwgb3B0aW9ucykge1xuICBjb25zdCBkaXJlY3Rpb24gPSB0eXBlb2Ygb3B0aW9ucy5kaXJlY3Rpb24gIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5kaXJlY3Rpb24gOiAnYm90dG9tJztcblxuICAkbm9kZS5hZGRDbGFzcyhkaXJlY3Rpb24pO1xuXG4gIGlmIChvcHRpb25zLmhpZGVBcnJvdykge1xuICAgICRub2RlLmZpbmQoJy5hcnJvdycpLmhpZGUoKTtcbiAgfVxufSk7XG5cbmNvbnN0IGNoZWNrYm94ID0gcmVuZGVyZXIuY3JlYXRlKCc8ZGl2IGNsYXNzPVwiY2hlY2tib3hcIj48L2Rpdj4nLCBmdW5jdGlvbigkbm9kZSwgb3B0aW9ucykge1xuICAkbm9kZS5odG1sKFtcbiAgICAnIDxsYWJlbCcgKyAob3B0aW9ucy5pZCA/ICcgZm9yPVwiJyArIG9wdGlvbnMuaWQgKyAnXCInIDogJycpICsgJz4nLFxuICAgICcgPGlucHV0IHJvbGU9XCJjaGVja2JveFwiIHR5cGU9XCJjaGVja2JveFwiJyArIChvcHRpb25zLmlkID8gJyBpZD1cIicgKyBvcHRpb25zLmlkICsgJ1wiJyA6ICcnKSxcbiAgICAob3B0aW9ucy5jaGVja2VkID8gJyBjaGVja2VkJyA6ICcnKSxcbiAgICAnIGFyaWEtY2hlY2tlZD1cIicgKyAob3B0aW9ucy5jaGVja2VkID8gJ3RydWUnIDogJ2ZhbHNlJykgKyAnXCIvPicsXG4gICAgKG9wdGlvbnMudGV4dCA/IG9wdGlvbnMudGV4dCA6ICcnKSxcbiAgICAnPC9sYWJlbD4nXG4gIF0uam9pbignJykpO1xufSk7XG5cbmNvbnN0IGljb24gPSBmdW5jdGlvbihpY29uQ2xhc3NOYW1lLCB0YWdOYW1lKSB7XG4gIHRhZ05hbWUgPSB0YWdOYW1lIHx8ICdpJztcbiAgcmV0dXJuICc8JyArIHRhZ05hbWUgKyAnIGNsYXNzPVwiJyArIGljb25DbGFzc05hbWUgKyAnXCIvPic7XG59O1xuY29uc3QgdWkgPSB7XG4gIGVkaXRvcjogZWRpdG9yLFxuICB0b29sYmFyOiB0b29sYmFyLFxuICBlZGl0aW5nQXJlYTogZWRpdGluZ0FyZWEsXG4gIGNvZGFibGU6IGNvZGFibGUsXG4gIGVkaXRhYmxlOiBlZGl0YWJsZSxcbiAgc3RhdHVzYmFyOiBzdGF0dXNiYXIsXG4gIGFpckVkaXRvcjogYWlyRWRpdG9yLFxuICBhaXJFZGl0YWJsZTogYWlyRWRpdGFibGUsXG4gIGJ1dHRvbkdyb3VwOiBidXR0b25Hcm91cCxcbiAgZHJvcGRvd246IGRyb3Bkb3duLFxuICBkcm9wZG93bkJ1dHRvbkNvbnRlbnRzOiBkcm9wZG93bkJ1dHRvbkNvbnRlbnRzLFxuICBkcm9wZG93bkNoZWNrOiBkcm9wZG93bkNoZWNrLFxuICBwYWxldHRlOiBwYWxldHRlLFxuICBkaWFsb2c6IGRpYWxvZyxcbiAgcG9wb3ZlcjogcG9wb3ZlcixcbiAgY2hlY2tib3g6IGNoZWNrYm94LFxuICBpY29uOiBpY29uLFxuICBvcHRpb25zOiB7fSxcblxuICBidXR0b246IGZ1bmN0aW9uKCRub2RlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHJlbmRlcmVyLmNyZWF0ZSgnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJub3RlLWJ0biBidG4gYnRuLWRlZmF1bHQgYnRuLXNtXCIgcm9sZT1cImJ1dHRvblwiIHRhYmluZGV4PVwiLTFcIj4nLCBmdW5jdGlvbigkbm9kZSwgb3B0aW9ucykge1xuICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy50b29sdGlwKSB7XG4gICAgICAgICRub2RlLmF0dHIoe1xuICAgICAgICAgIHRpdGxlOiBvcHRpb25zLnRvb2x0aXAsXG4gICAgICAgICAgJ2FyaWEtbGFiZWwnOiBvcHRpb25zLnRvb2x0aXBcbiAgICAgICAgfSkudG9vbHRpcCh7XG4gICAgICAgICAgY29udGFpbmVyOiBvcHRpb25zLmNvbnRhaW5lcixcbiAgICAgICAgICB0cmlnZ2VyOiAnaG92ZXInLFxuICAgICAgICAgIHBsYWNlbWVudDogJ2JvdHRvbSdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSkoJG5vZGUsIG9wdGlvbnMpO1xuICB9LFxuXG4gIHRvZ2dsZUJ0bjogZnVuY3Rpb24oJGJ0biwgaXNFbmFibGUpIHtcbiAgICAkYnRuLnRvZ2dsZUNsYXNzKCdkaXNhYmxlZCcsICFpc0VuYWJsZSk7XG4gICAgJGJ0bi5hdHRyKCdkaXNhYmxlZCcsICFpc0VuYWJsZSk7XG4gIH0sXG5cbiAgdG9nZ2xlQnRuQWN0aXZlOiBmdW5jdGlvbigkYnRuLCBpc0FjdGl2ZSkge1xuICAgICRidG4udG9nZ2xlQ2xhc3MoJ2FjdGl2ZScsIGlzQWN0aXZlKTtcbiAgfSxcblxuICBvbkRpYWxvZ1Nob3duOiBmdW5jdGlvbigkZGlhbG9nLCBoYW5kbGVyKSB7XG4gICAgJGRpYWxvZy5vbmUoJ3Nob3duLmJzLm1vZGFsJywgaGFuZGxlcik7XG4gIH0sXG5cbiAgb25EaWFsb2dIaWRkZW46IGZ1bmN0aW9uKCRkaWFsb2csIGhhbmRsZXIpIHtcbiAgICAkZGlhbG9nLm9uZSgnaGlkZGVuLmJzLm1vZGFsJywgaGFuZGxlcik7XG4gIH0sXG5cbiAgc2hvd0RpYWxvZzogZnVuY3Rpb24oJGRpYWxvZykge1xuICAgICRkaWFsb2cubW9kYWwoJ3Nob3cnKTtcbiAgfSxcblxuICBoaWRlRGlhbG9nOiBmdW5jdGlvbigkZGlhbG9nKSB7XG4gICAgJGRpYWxvZy5tb2RhbCgnaGlkZScpO1xuICB9LFxuXG4gIGNyZWF0ZUxheW91dDogZnVuY3Rpb24oJG5vdGUsIG9wdGlvbnMpIHtcbiAgICBjb25zdCAkZWRpdG9yID0gKG9wdGlvbnMuYWlyTW9kZSA/IHVpLmFpckVkaXRvcihbXG4gICAgICB1aS5lZGl0aW5nQXJlYShbXG4gICAgICAgIHVpLmFpckVkaXRhYmxlKClcbiAgICAgIF0pXG4gICAgXSkgOiB1aS5lZGl0b3IoW1xuICAgICAgdWkudG9vbGJhcigpLFxuICAgICAgdWkuZWRpdGluZ0FyZWEoW1xuICAgICAgICB1aS5jb2RhYmxlKCksXG4gICAgICAgIHVpLmVkaXRhYmxlKClcbiAgICAgIF0pLFxuICAgICAgdWkuc3RhdHVzYmFyKClcbiAgICBdKSkucmVuZGVyKCk7XG5cbiAgICAkZWRpdG9yLmluc2VydEFmdGVyKCRub3RlKTtcblxuICAgIHJldHVybiB7XG4gICAgICBub3RlOiAkbm90ZSxcbiAgICAgIGVkaXRvcjogJGVkaXRvcixcbiAgICAgIHRvb2xiYXI6ICRlZGl0b3IuZmluZCgnLm5vdGUtdG9vbGJhcicpLFxuICAgICAgZWRpdGluZ0FyZWE6ICRlZGl0b3IuZmluZCgnLm5vdGUtZWRpdGluZy1hcmVhJyksXG4gICAgICBlZGl0YWJsZTogJGVkaXRvci5maW5kKCcubm90ZS1lZGl0YWJsZScpLFxuICAgICAgY29kYWJsZTogJGVkaXRvci5maW5kKCcubm90ZS1jb2RhYmxlJyksXG4gICAgICBzdGF0dXNiYXI6ICRlZGl0b3IuZmluZCgnLm5vdGUtc3RhdHVzYmFyJylcbiAgICB9O1xuICB9LFxuXG4gIHJlbW92ZUxheW91dDogZnVuY3Rpb24oJG5vdGUsIGxheW91dEluZm8pIHtcbiAgICAkbm90ZS5odG1sKGxheW91dEluZm8uZWRpdGFibGUuaHRtbCgpKTtcbiAgICBsYXlvdXRJbmZvLmVkaXRvci5yZW1vdmUoKTtcbiAgICAkbm90ZS5zaG93KCk7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHVpO1xuIiwiLyoqXG4gKiBAY2xhc3MgY29yZS5mdW5jXG4gKlxuICogZnVuYyB1dGlscyAoZm9yIGhpZ2gtb3JkZXIgZnVuYydzIGFyZylcbiAqXG4gKiBAc2luZ2xldG9uXG4gKiBAYWx0ZXJuYXRlQ2xhc3NOYW1lIGZ1bmNcbiAqL1xuZnVuY3Rpb24gZXEoaXRlbUEpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGl0ZW1CKSB7XG4gICAgcmV0dXJuIGl0ZW1BID09PSBpdGVtQjtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZXEyKGl0ZW1BLCBpdGVtQikge1xuICByZXR1cm4gaXRlbUEgPT09IGl0ZW1CO1xufVxuXG5mdW5jdGlvbiBwZXEyKHByb3BOYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbihpdGVtQSwgaXRlbUIpIHtcbiAgICByZXR1cm4gaXRlbUFbcHJvcE5hbWVdID09PSBpdGVtQltwcm9wTmFtZV07XG4gIH07XG59XG5cbmZ1bmN0aW9uIG9rKCkge1xuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gZmFpbCgpIHtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBub3QoZikge1xuICByZXR1cm4gKCkgPT4ge1xuICAgIHJldHVybiAhZi5hcHBseShmLCBhcmd1bWVudHMpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhbmQoZkEsIGZCKSB7XG4gIHJldHVybiBmdW5jdGlvbihpdGVtKSB7XG4gICAgcmV0dXJuIGZBKGl0ZW0pICYmIGZCKGl0ZW0pO1xuICB9O1xufVxuXG5mdW5jdGlvbiBzZWxmKGEpIHtcbiAgcmV0dXJuIGE7XG59XG5cbmZ1bmN0aW9uIGludm9rZShvYmosIG1ldGhvZCkge1xuICByZXR1cm4gKCkgPT4ge1xuICAgIHJldHVybiBvYmpbbWV0aG9kXS5hcHBseShvYmosIGFyZ3VtZW50cyk7XG4gIH07XG59XG5cbmxldCBpZENvdW50ZXIgPSAwO1xuXG4vKipcbiAqIGdlbmVyYXRlIGEgZ2xvYmFsbHktdW5pcXVlIGlkXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IFtwcmVmaXhdXG4gKi9cbmZ1bmN0aW9uIHVuaXF1ZUlkKHByZWZpeCkge1xuICBjb25zdCBpZCA9ICsraWRDb3VudGVyICsgJyc7XG4gIHJldHVybiBwcmVmaXggPyBwcmVmaXggKyBpZCA6IGlkO1xufVxuXG4vKipcbiAqIHJldHVybnMgYm5kIChib3VuZHMpIGZyb20gcmVjdFxuICpcbiAqIC0gSUUgQ29tcGF0aWJpbGl0eSBJc3N1ZTogaHR0cDovL2dvby5nbC9zUkxPQW9cbiAqIC0gU2Nyb2xsIElzc3VlOiBodHRwOi8vZ29vLmdsL3NOalVjXG4gKlxuICogQHBhcmFtIHtSZWN0fSByZWN0XG4gKiBAcmV0dXJuIHtPYmplY3R9IGJvdW5kc1xuICogQHJldHVybiB7TnVtYmVyfSBib3VuZHMudG9wXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IGJvdW5kcy5sZWZ0XG4gKiBAcmV0dXJuIHtOdW1iZXJ9IGJvdW5kcy53aWR0aFxuICogQHJldHVybiB7TnVtYmVyfSBib3VuZHMuaGVpZ2h0XG4gKi9cbmZ1bmN0aW9uIHJlY3QyYm5kKHJlY3QpIHtcbiAgY29uc3QgJGRvY3VtZW50ID0gJChkb2N1bWVudCk7XG4gIHJldHVybiB7XG4gICAgdG9wOiByZWN0LnRvcCArICRkb2N1bWVudC5zY3JvbGxUb3AoKSxcbiAgICBsZWZ0OiByZWN0LmxlZnQgKyAkZG9jdW1lbnQuc2Nyb2xsTGVmdCgpLFxuICAgIHdpZHRoOiByZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0LFxuICAgIGhlaWdodDogcmVjdC5ib3R0b20gLSByZWN0LnRvcFxuICB9O1xufVxuXG4vKipcbiAqIHJldHVybnMgYSBjb3B5IG9mIHRoZSBvYmplY3Qgd2hlcmUgdGhlIGtleXMgaGF2ZSBiZWNvbWUgdGhlIHZhbHVlcyBhbmQgdGhlIHZhbHVlcyB0aGUga2V5cy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gaW52ZXJ0T2JqZWN0KG9iaikge1xuICBjb25zdCBpbnZlcnRlZCA9IHt9O1xuICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcbiAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIGludmVydGVkW29ialtrZXldXSA9IGtleTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGludmVydGVkO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lc3BhY2VcbiAqIEBwYXJhbSB7U3RyaW5nfSBbcHJlZml4XVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBuYW1lc3BhY2VUb0NhbWVsKG5hbWVzcGFjZSwgcHJlZml4KSB7XG4gIHByZWZpeCA9IHByZWZpeCB8fCAnJztcbiAgcmV0dXJuIHByZWZpeCArIG5hbWVzcGFjZS5zcGxpdCgnLicpLm1hcChmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIG5hbWUuc3Vic3RyaW5nKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnN1YnN0cmluZygxKTtcbiAgfSkuam9pbignJyk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCBhcyBsb25nIGFzIGl0IGNvbnRpbnVlcyB0byBiZSBpbnZva2VkLCB3aWxsIG5vdFxuICogYmUgdHJpZ2dlcmVkLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgaXQgc3RvcHMgYmVpbmcgY2FsbGVkIGZvclxuICogTiBtaWxsaXNlY29uZHMuIElmIGBpbW1lZGlhdGVgIGlzIHBhc3NlZCwgdHJpZ2dlciB0aGUgZnVuY3Rpb24gb24gdGhlXG4gKiBsZWFkaW5nIGVkZ2UsIGluc3RlYWQgb2YgdGhlIHRyYWlsaW5nLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuY1xuICogQHBhcmFtIHtOdW1iZXJ9IHdhaXRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaW1tZWRpYXRlXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XG4gIGxldCB0aW1lb3V0O1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGNvbnN0IGNvbnRleHQgPSB0aGlzO1xuICAgIGNvbnN0IGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgY29uc3QgbGF0ZXIgPSAoKSA9PiB7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIGlmICghaW1tZWRpYXRlKSB7XG4gICAgICAgIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG4gICAgaWYgKGNhbGxOb3cpIHtcbiAgICAgIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGVxLFxuICBlcTIsXG4gIHBlcTIsXG4gIG9rLFxuICBmYWlsLFxuICBzZWxmLFxuICBub3QsXG4gIGFuZCxcbiAgaW52b2tlLFxuICB1bmlxdWVJZCxcbiAgcmVjdDJibmQsXG4gIGludmVydE9iamVjdCxcbiAgbmFtZXNwYWNlVG9DYW1lbCxcbiAgZGVib3VuY2Vcbn07XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGZ1bmMgZnJvbSAnLi9mdW5jJztcblxuLyoqXG4gKiByZXR1cm5zIHRoZSBmaXJzdCBpdGVtIG9mIGFuIGFycmF5LlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5XG4gKi9cbmZ1bmN0aW9uIGhlYWQoYXJyYXkpIHtcbiAgcmV0dXJuIGFycmF5WzBdO1xufVxuXG4vKipcbiAqIHJldHVybnMgdGhlIGxhc3QgaXRlbSBvZiBhbiBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheVxuICovXG5mdW5jdGlvbiBsYXN0KGFycmF5KSB7XG4gIHJldHVybiBhcnJheVthcnJheS5sZW5ndGggLSAxXTtcbn1cblxuLyoqXG4gKiByZXR1cm5zIGV2ZXJ5dGhpbmcgYnV0IHRoZSBsYXN0IGVudHJ5IG9mIHRoZSBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheVxuICovXG5mdW5jdGlvbiBpbml0aWFsKGFycmF5KSB7XG4gIHJldHVybiBhcnJheS5zbGljZSgwLCBhcnJheS5sZW5ndGggLSAxKTtcbn1cblxuLyoqXG4gKiByZXR1cm5zIHRoZSByZXN0IG9mIHRoZSBpdGVtcyBpbiBhbiBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheVxuICovXG5mdW5jdGlvbiB0YWlsKGFycmF5KSB7XG4gIHJldHVybiBhcnJheS5zbGljZSgxKTtcbn1cblxuLyoqXG4gKiByZXR1cm5zIGl0ZW0gb2YgYXJyYXlcbiAqL1xuZnVuY3Rpb24gZmluZChhcnJheSwgcHJlZCkge1xuICBmb3IgKGxldCBpZHggPSAwLCBsZW4gPSBhcnJheS5sZW5ndGg7IGlkeCA8IGxlbjsgaWR4KyspIHtcbiAgICBjb25zdCBpdGVtID0gYXJyYXlbaWR4XTtcbiAgICBpZiAocHJlZChpdGVtKSkge1xuICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogcmV0dXJucyB0cnVlIGlmIGFsbCBvZiB0aGUgdmFsdWVzIGluIHRoZSBhcnJheSBwYXNzIHRoZSBwcmVkaWNhdGUgdHJ1dGggdGVzdC5cbiAqL1xuZnVuY3Rpb24gYWxsKGFycmF5LCBwcmVkKSB7XG4gIGZvciAobGV0IGlkeCA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaWR4IDwgbGVuOyBpZHgrKykge1xuICAgIGlmICghcHJlZChhcnJheVtpZHhdKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiByZXR1cm5zIGluZGV4IG9mIGl0ZW1cbiAqL1xuZnVuY3Rpb24gaW5kZXhPZihhcnJheSwgaXRlbSkge1xuICByZXR1cm4gJC5pbkFycmF5KGl0ZW0sIGFycmF5KTtcbn1cblxuLyoqXG4gKiByZXR1cm5zIHRydWUgaWYgdGhlIHZhbHVlIGlzIHByZXNlbnQgaW4gdGhlIGxpc3QuXG4gKi9cbmZ1bmN0aW9uIGNvbnRhaW5zKGFycmF5LCBpdGVtKSB7XG4gIHJldHVybiBpbmRleE9mKGFycmF5LCBpdGVtKSAhPT0gLTE7XG59XG5cbi8qKlxuICogZ2V0IHN1bSBmcm9tIGEgbGlzdFxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IC0gYXJyYXlcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIC0gaXRlcmF0b3JcbiAqL1xuZnVuY3Rpb24gc3VtKGFycmF5LCBmbikge1xuICBmbiA9IGZuIHx8IGZ1bmMuc2VsZjtcbiAgcmV0dXJuIGFycmF5LnJlZHVjZShmdW5jdGlvbihtZW1vLCB2KSB7XG4gICAgcmV0dXJuIG1lbW8gKyBmbih2KTtcbiAgfSwgMCk7XG59XG5cbi8qKlxuICogcmV0dXJucyBhIGNvcHkgb2YgdGhlIGNvbGxlY3Rpb24gd2l0aCBhcnJheSB0eXBlLlxuICogQHBhcmFtIHtDb2xsZWN0aW9ufSBjb2xsZWN0aW9uIC0gY29sbGVjdGlvbiBlZykgbm9kZS5jaGlsZE5vZGVzLCAuLi5cbiAqL1xuZnVuY3Rpb24gZnJvbShjb2xsZWN0aW9uKSB7XG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICBjb25zdCBsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcbiAgbGV0IGlkeCA9IC0xO1xuICB3aGlsZSAoKytpZHggPCBsZW5ndGgpIHtcbiAgICByZXN1bHRbaWR4XSA9IGNvbGxlY3Rpb25baWR4XTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIHJldHVybnMgd2hldGhlciBsaXN0IGlzIGVtcHR5IG9yIG5vdFxuICovXG5mdW5jdGlvbiBpc0VtcHR5KGFycmF5KSB7XG4gIHJldHVybiAhYXJyYXkgfHwgIWFycmF5Lmxlbmd0aDtcbn1cblxuLyoqXG4gKiBjbHVzdGVyIGVsZW1lbnRzIGJ5IHByZWRpY2F0ZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSAtIGFycmF5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIHByZWRpY2F0ZSBmdW5jdGlvbiBmb3IgY2x1c3RlciBydWxlXG4gKiBAcGFyYW0ge0FycmF5W119XG4gKi9cbmZ1bmN0aW9uIGNsdXN0ZXJCeShhcnJheSwgZm4pIHtcbiAgaWYgKCFhcnJheS5sZW5ndGgpIHsgcmV0dXJuIFtdOyB9XG4gIGNvbnN0IGFUYWlsID0gdGFpbChhcnJheSk7XG4gIHJldHVybiBhVGFpbC5yZWR1Y2UoZnVuY3Rpb24obWVtbywgdikge1xuICAgIGNvbnN0IGFMYXN0ID0gbGFzdChtZW1vKTtcbiAgICBpZiAoZm4obGFzdChhTGFzdCksIHYpKSB7XG4gICAgICBhTGFzdFthTGFzdC5sZW5ndGhdID0gdjtcbiAgICB9IGVsc2Uge1xuICAgICAgbWVtb1ttZW1vLmxlbmd0aF0gPSBbdl07XG4gICAgfVxuICAgIHJldHVybiBtZW1vO1xuICB9LCBbW2hlYWQoYXJyYXkpXV0pO1xufVxuXG4vKipcbiAqIHJldHVybnMgYSBjb3B5IG9mIHRoZSBhcnJheSB3aXRoIGFsbCBmYWxzZSB2YWx1ZXMgcmVtb3ZlZFxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IC0gYXJyYXlcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIC0gcHJlZGljYXRlIGZ1bmN0aW9uIGZvciBjbHVzdGVyIHJ1bGVcbiAqL1xuZnVuY3Rpb24gY29tcGFjdChhcnJheSkge1xuICBjb25zdCBhUmVzdWx0ID0gW107XG4gIGZvciAobGV0IGlkeCA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaWR4IDwgbGVuOyBpZHgrKykge1xuICAgIGlmIChhcnJheVtpZHhdKSB7IGFSZXN1bHQucHVzaChhcnJheVtpZHhdKTsgfVxuICB9XG4gIHJldHVybiBhUmVzdWx0O1xufVxuXG4vKipcbiAqIHByb2R1Y2VzIGEgZHVwbGljYXRlLWZyZWUgdmVyc2lvbiBvZiB0aGUgYXJyYXlcbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheVxuICovXG5mdW5jdGlvbiB1bmlxdWUoYXJyYXkpIHtcbiAgY29uc3QgcmVzdWx0cyA9IFtdO1xuXG4gIGZvciAobGV0IGlkeCA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaWR4IDwgbGVuOyBpZHgrKykge1xuICAgIGlmICghY29udGFpbnMocmVzdWx0cywgYXJyYXlbaWR4XSkpIHtcbiAgICAgIHJlc3VsdHMucHVzaChhcnJheVtpZHhdKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0cztcbn1cblxuLyoqXG4gKiByZXR1cm5zIG5leHQgaXRlbS5cbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5XG4gKi9cbmZ1bmN0aW9uIG5leHQoYXJyYXksIGl0ZW0pIHtcbiAgY29uc3QgaWR4ID0gaW5kZXhPZihhcnJheSwgaXRlbSk7XG4gIGlmIChpZHggPT09IC0xKSB7IHJldHVybiBudWxsOyB9XG5cbiAgcmV0dXJuIGFycmF5W2lkeCArIDFdO1xufVxuXG4vKipcbiAqIHJldHVybnMgcHJldiBpdGVtLlxuICogQHBhcmFtIHtBcnJheX0gYXJyYXlcbiAqL1xuZnVuY3Rpb24gcHJldihhcnJheSwgaXRlbSkge1xuICBjb25zdCBpZHggPSBpbmRleE9mKGFycmF5LCBpdGVtKTtcbiAgaWYgKGlkeCA9PT0gLTEpIHsgcmV0dXJuIG51bGw7IH1cblxuICByZXR1cm4gYXJyYXlbaWR4IC0gMV07XG59XG5cbi8qKlxuICogQGNsYXNzIGNvcmUubGlzdFxuICpcbiAqIGxpc3QgdXRpbHNcbiAqXG4gKiBAc2luZ2xldG9uXG4gKiBAYWx0ZXJuYXRlQ2xhc3NOYW1lIGxpc3RcbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBoZWFkLFxuICBsYXN0LFxuICBpbml0aWFsLFxuICB0YWlsLFxuICBwcmV2LFxuICBuZXh0LFxuICBmaW5kLFxuICBjb250YWlucyxcbiAgYWxsLFxuICBzdW0sXG4gIGZyb20sXG4gIGlzRW1wdHksXG4gIGNsdXN0ZXJCeSxcbiAgY29tcGFjdCxcbiAgdW5pcXVlXG59O1xuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmNvbnN0IGlzU3VwcG9ydEFtZCA9IHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZDsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4vKipcbiAqIHJldHVybnMgd2hldGhlciBmb250IGlzIGluc3RhbGxlZCBvciBub3QuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGZvbnROYW1lXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBpc0ZvbnRJbnN0YWxsZWQoZm9udE5hbWUpIHtcbiAgY29uc3QgdGVzdEZvbnROYW1lID0gZm9udE5hbWUgPT09ICdDb21pYyBTYW5zIE1TJyA/ICdDb3VyaWVyIE5ldycgOiAnQ29taWMgU2FucyBNUyc7XG4gIGNvbnN0ICR0ZXN0ZXIgPSAkKCc8ZGl2PicpLmNzcyh7XG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgbGVmdDogJy05OTk5cHgnLFxuICAgIHRvcDogJy05OTk5cHgnLFxuICAgIGZvbnRTaXplOiAnMjAwcHgnXG4gIH0pLnRleHQoJ21tbW1tbW1tbXd3d3d3d3cnKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTtcblxuICBjb25zdCBvcmlnaW5hbFdpZHRoID0gJHRlc3Rlci5jc3MoJ2ZvbnRGYW1pbHknLCB0ZXN0Rm9udE5hbWUpLndpZHRoKCk7XG4gIGNvbnN0IHdpZHRoID0gJHRlc3Rlci5jc3MoJ2ZvbnRGYW1pbHknLCBmb250TmFtZSArICcsJyArIHRlc3RGb250TmFtZSkud2lkdGgoKTtcblxuICAkdGVzdGVyLnJlbW92ZSgpO1xuXG4gIHJldHVybiBvcmlnaW5hbFdpZHRoICE9PSB3aWR0aDtcbn1cblxuY29uc3QgdXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcbmNvbnN0IGlzTVNJRSA9IC9NU0lFfFRyaWRlbnQvaS50ZXN0KHVzZXJBZ2VudCk7XG5sZXQgYnJvd3NlclZlcnNpb247XG5pZiAoaXNNU0lFKSB7XG4gIGxldCBtYXRjaGVzID0gL01TSUUgKFxcZCtbLl1cXGQrKS8uZXhlYyh1c2VyQWdlbnQpO1xuICBpZiAobWF0Y2hlcykge1xuICAgIGJyb3dzZXJWZXJzaW9uID0gcGFyc2VGbG9hdChtYXRjaGVzWzFdKTtcbiAgfVxuICBtYXRjaGVzID0gL1RyaWRlbnRcXC8uKnJ2OihbMC05XXsxLH1bLjAtOV17MCx9KS8uZXhlYyh1c2VyQWdlbnQpO1xuICBpZiAobWF0Y2hlcykge1xuICAgIGJyb3dzZXJWZXJzaW9uID0gcGFyc2VGbG9hdChtYXRjaGVzWzFdKTtcbiAgfVxufVxuXG5jb25zdCBpc0VkZ2UgPSAvRWRnZVxcL1xcZCsvLnRlc3QodXNlckFnZW50KTtcblxubGV0IGhhc0NvZGVNaXJyb3IgPSAhIXdpbmRvdy5Db2RlTWlycm9yO1xuaWYgKCFoYXNDb2RlTWlycm9yICYmIGlzU3VwcG9ydEFtZCkge1xuICAvLyBXZWJwYWNrXG4gIGlmICh0eXBlb2YgX193ZWJwYWNrX3JlcXVpcmVfXyA9PT0gJ2Z1bmN0aW9uJykgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgdHJ5IHtcbiAgICAgIC8vIElmIENvZGVNaXJyb3IgY2FuJ3QgYmUgcmVzb2x2ZWQsIGByZXF1aXJlLnJlc29sdmVgIHdpbGwgdGhyb3cgYW5cbiAgICAgIC8vIGV4Y2VwdGlvbiBhbmQgYGhhc0NvZGVNaXJyb3JgIHdvbid0IGJlIHNldCB0byBgdHJ1ZWAuXG4gICAgICByZXF1aXJlLnJlc29sdmUoJ2NvZGVtaXJyb3InKTtcbiAgICAgIGhhc0NvZGVNaXJyb3IgPSB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIHJlcXVpcmUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gQnJvd3NlcmlmeVxuICAgIGlmICh0eXBlb2YgcmVxdWlyZS5yZXNvbHZlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gSWYgQ29kZU1pcnJvciBjYW4ndCBiZSByZXNvbHZlZCwgYHJlcXVpcmUucmVzb2x2ZWAgd2lsbCB0aHJvdyBhblxuICAgICAgICAvLyBleGNlcHRpb24gYW5kIGBoYXNDb2RlTWlycm9yYCB3b24ndCBiZSBzZXQgdG8gYHRydWVgLlxuICAgICAgICByZXF1aXJlLnJlc29sdmUoJ2NvZGVtaXJyb3InKTtcbiAgICAgICAgaGFzQ29kZU1pcnJvciA9IHRydWU7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICAgIH1cbiAgICAvLyBBbG1vbmQvUmVxdWlyZVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHJlcXVpcmUuc3BlY2lmaWVkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaGFzQ29kZU1pcnJvciA9IHJlcXVpcmUuc3BlY2lmaWVkKCdjb2RlbWlycm9yJyk7XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IGlzU3VwcG9ydFRvdWNoID1cbiAgKCgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHx8XG4gICAobmF2aWdhdG9yLk1heFRvdWNoUG9pbnRzID4gMCkgfHxcbiAgIChuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyA+IDApKTtcblxuLy8gW3dvcmthcm91bmRdIElFIGRvZXNuJ3QgaGF2ZSBpbnB1dCBldmVudHMgZm9yIGNvbnRlbnRFZGl0YWJsZVxuLy8gLSBzZWU6IGh0dHBzOi8vZ29vLmdsLzRiZkl2QVxuY29uc3QgaW5wdXRFdmVudE5hbWUgPSAoaXNNU0lFIHx8IGlzRWRnZSkgPyAnRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkIERPTVN1YnRyZWVNb2RpZmllZCBET01Ob2RlSW5zZXJ0ZWQnIDogJ2lucHV0JztcblxuLyoqXG4gKiBAY2xhc3MgY29yZS5lbnZcbiAqXG4gKiBPYmplY3Qgd2hpY2ggY2hlY2sgcGxhdGZvcm0gYW5kIGFnZW50XG4gKlxuICogQHNpbmdsZXRvblxuICogQGFsdGVybmF0ZUNsYXNzTmFtZSBlbnZcbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBpc01hYzogbmF2aWdhdG9yLmFwcFZlcnNpb24uaW5kZXhPZignTWFjJykgPiAtMSxcbiAgaXNNU0lFLFxuICBpc0VkZ2UsXG4gIGlzRkY6ICFpc0VkZ2UgJiYgL2ZpcmVmb3gvaS50ZXN0KHVzZXJBZ2VudCksXG4gIGlzUGhhbnRvbTogL1BoYW50b21KUy9pLnRlc3QodXNlckFnZW50KSxcbiAgaXNXZWJraXQ6ICFpc0VkZ2UgJiYgL3dlYmtpdC9pLnRlc3QodXNlckFnZW50KSxcbiAgaXNDaHJvbWU6ICFpc0VkZ2UgJiYgL2Nocm9tZS9pLnRlc3QodXNlckFnZW50KSxcbiAgaXNTYWZhcmk6ICFpc0VkZ2UgJiYgL3NhZmFyaS9pLnRlc3QodXNlckFnZW50KSxcbiAgYnJvd3NlclZlcnNpb24sXG4gIGpxdWVyeVZlcnNpb246IHBhcnNlRmxvYXQoJC5mbi5qcXVlcnkpLFxuICBpc1N1cHBvcnRBbWQsXG4gIGlzU3VwcG9ydFRvdWNoLFxuICBoYXNDb2RlTWlycm9yLFxuICBpc0ZvbnRJbnN0YWxsZWQsXG4gIGlzVzNDUmFuZ2VTdXBwb3J0OiAhIWRvY3VtZW50LmNyZWF0ZVJhbmdlLFxuICBpbnB1dEV2ZW50TmFtZVxufTtcbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgZnVuYyBmcm9tICcuL2Z1bmMnO1xuaW1wb3J0IGxpc3RzIGZyb20gJy4vbGlzdHMnO1xuaW1wb3J0IGVudiBmcm9tICcuL2Vudic7XG5cbmNvbnN0IE5CU1BfQ0hBUiA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMTYwKTtcbmNvbnN0IFpFUk9fV0lEVEhfTkJTUF9DSEFSID0gJ1xcdWZlZmYnO1xuXG4vKipcbiAqIEBtZXRob2QgaXNFZGl0YWJsZVxuICpcbiAqIHJldHVybnMgd2hldGhlciBub2RlIGlzIGBub3RlLWVkaXRhYmxlYCBvciBub3QuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBpc0VkaXRhYmxlKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgJChub2RlKS5oYXNDbGFzcygnbm90ZS1lZGl0YWJsZScpO1xufVxuXG4vKipcbiAqIEBtZXRob2QgaXNDb250cm9sU2l6aW5nXG4gKlxuICogcmV0dXJucyB3aGV0aGVyIG5vZGUgaXMgYG5vdGUtY29udHJvbC1zaXppbmdgIG9yIG5vdC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzQ29udHJvbFNpemluZyhub2RlKSB7XG4gIHJldHVybiBub2RlICYmICQobm9kZSkuaGFzQ2xhc3MoJ25vdGUtY29udHJvbC1zaXppbmcnKTtcbn1cblxuLyoqXG4gKiBAbWV0aG9kIG1ha2VQcmVkQnlOb2RlTmFtZVxuICpcbiAqIHJldHVybnMgcHJlZGljYXRlIHdoaWNoIGp1ZGdlIHdoZXRoZXIgbm9kZU5hbWUgaXMgc2FtZVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBub2RlTmFtZVxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cbmZ1bmN0aW9uIG1ha2VQcmVkQnlOb2RlTmFtZShub2RlTmFtZSkge1xuICBub2RlTmFtZSA9IG5vZGVOYW1lLnRvVXBwZXJDYXNlKCk7XG4gIHJldHVybiBmdW5jdGlvbihub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUgJiYgbm9kZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBub2RlTmFtZTtcbiAgfTtcbn1cblxuLyoqXG4gKiBAbWV0aG9kIGlzVGV4dFxuICpcbiAqXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIG5vZGUncyB0eXBlIGlzIHRleHQoMylcbiAqL1xuZnVuY3Rpb24gaXNUZXh0KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gMztcbn1cblxuLyoqXG4gKiBAbWV0aG9kIGlzRWxlbWVudFxuICpcbiAqXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIG5vZGUncyB0eXBlIGlzIGVsZW1lbnQoMSlcbiAqL1xuZnVuY3Rpb24gaXNFbGVtZW50KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gMTtcbn1cblxuLyoqXG4gKiBleCkgYnIsIGNvbCwgZW1iZWQsIGhyLCBpbWcsIGlucHV0LCAuLi5cbiAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvaHRtbC93Zy9kcmFmdHMvaHRtbC9tYXN0ZXIvc3ludGF4Lmh0bWwjdm9pZC1lbGVtZW50c1xuICovXG5mdW5jdGlvbiBpc1ZvaWQobm9kZSkge1xuICByZXR1cm4gbm9kZSAmJiAvXkJSfF5JTUd8XkhSfF5JRlJBTUV8XkJVVFRPTnxeSU5QVVQvLnRlc3Qobm9kZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpKTtcbn1cblxuZnVuY3Rpb24gaXNQYXJhKG5vZGUpIHtcbiAgaWYgKGlzRWRpdGFibGUobm9kZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBDaHJvbWUodjMxLjApLCBGRih2MjUuMC4xKSB1c2UgRElWIGZvciBwYXJhZ3JhcGhcbiAgcmV0dXJuIG5vZGUgJiYgL15ESVZ8XlB8XkxJfF5IWzEtN10vLnRlc3Qobm9kZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpKTtcbn1cblxuZnVuY3Rpb24gaXNIZWFkaW5nKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgL15IWzEtN10vLnRlc3Qobm9kZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpKTtcbn1cblxuY29uc3QgaXNQcmUgPSBtYWtlUHJlZEJ5Tm9kZU5hbWUoJ1BSRScpO1xuXG5jb25zdCBpc0xpID0gbWFrZVByZWRCeU5vZGVOYW1lKCdMSScpO1xuXG5mdW5jdGlvbiBpc1B1cmVQYXJhKG5vZGUpIHtcbiAgcmV0dXJuIGlzUGFyYShub2RlKSAmJiAhaXNMaShub2RlKTtcbn1cblxuY29uc3QgaXNUYWJsZSA9IG1ha2VQcmVkQnlOb2RlTmFtZSgnVEFCTEUnKTtcblxuY29uc3QgaXNEYXRhID0gbWFrZVByZWRCeU5vZGVOYW1lKCdEQVRBJyk7XG5cbmZ1bmN0aW9uIGlzSW5saW5lKG5vZGUpIHtcbiAgcmV0dXJuICFpc0JvZHlDb250YWluZXIobm9kZSkgJiZcbiAgICAgICAgICFpc0xpc3Qobm9kZSkgJiZcbiAgICAgICAgICFpc0hyKG5vZGUpICYmXG4gICAgICAgICAhaXNQYXJhKG5vZGUpICYmXG4gICAgICAgICAhaXNUYWJsZShub2RlKSAmJlxuICAgICAgICAgIWlzQmxvY2txdW90ZShub2RlKSAmJlxuICAgICAgICAgIWlzRGF0YShub2RlKTtcbn1cblxuZnVuY3Rpb24gaXNMaXN0KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgL15VTHxeT0wvLnRlc3Qobm9kZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpKTtcbn1cblxuY29uc3QgaXNIciA9IG1ha2VQcmVkQnlOb2RlTmFtZSgnSFInKTtcblxuZnVuY3Rpb24gaXNDZWxsKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgL15URHxeVEgvLnRlc3Qobm9kZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpKTtcbn1cblxuY29uc3QgaXNCbG9ja3F1b3RlID0gbWFrZVByZWRCeU5vZGVOYW1lKCdCTE9DS1FVT1RFJyk7XG5cbmZ1bmN0aW9uIGlzQm9keUNvbnRhaW5lcihub2RlKSB7XG4gIHJldHVybiBpc0NlbGwobm9kZSkgfHwgaXNCbG9ja3F1b3RlKG5vZGUpIHx8IGlzRWRpdGFibGUobm9kZSk7XG59XG5cbmNvbnN0IGlzQW5jaG9yID0gbWFrZVByZWRCeU5vZGVOYW1lKCdBJyk7XG5cbmZ1bmN0aW9uIGlzUGFyYUlubGluZShub2RlKSB7XG4gIHJldHVybiBpc0lubGluZShub2RlKSAmJiAhIWFuY2VzdG9yKG5vZGUsIGlzUGFyYSk7XG59XG5cbmZ1bmN0aW9uIGlzQm9keUlubGluZShub2RlKSB7XG4gIHJldHVybiBpc0lubGluZShub2RlKSAmJiAhYW5jZXN0b3Iobm9kZSwgaXNQYXJhKTtcbn1cblxuY29uc3QgaXNCb2R5ID0gbWFrZVByZWRCeU5vZGVOYW1lKCdCT0RZJyk7XG5cbi8qKlxuICogcmV0dXJucyB3aGV0aGVyIG5vZGVCIGlzIGNsb3Nlc3Qgc2libGluZyBvZiBub2RlQVxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZUFcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZUJcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzQ2xvc2VzdFNpYmxpbmcobm9kZUEsIG5vZGVCKSB7XG4gIHJldHVybiBub2RlQS5uZXh0U2libGluZyA9PT0gbm9kZUIgfHxcbiAgICAgICAgIG5vZGVBLnByZXZpb3VzU2libGluZyA9PT0gbm9kZUI7XG59XG5cbi8qKlxuICogcmV0dXJucyBhcnJheSBvZiBjbG9zZXN0IHNpYmxpbmdzIHdpdGggbm9kZVxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtmdW5jdGlvbn0gW3ByZWRdIC0gcHJlZGljYXRlIGZ1bmN0aW9uXG4gKiBAcmV0dXJuIHtOb2RlW119XG4gKi9cbmZ1bmN0aW9uIHdpdGhDbG9zZXN0U2libGluZ3Mobm9kZSwgcHJlZCkge1xuICBwcmVkID0gcHJlZCB8fCBmdW5jLm9rO1xuXG4gIGNvbnN0IHNpYmxpbmdzID0gW107XG4gIGlmIChub2RlLnByZXZpb3VzU2libGluZyAmJiBwcmVkKG5vZGUucHJldmlvdXNTaWJsaW5nKSkge1xuICAgIHNpYmxpbmdzLnB1c2gobm9kZS5wcmV2aW91c1NpYmxpbmcpO1xuICB9XG4gIHNpYmxpbmdzLnB1c2gobm9kZSk7XG4gIGlmIChub2RlLm5leHRTaWJsaW5nICYmIHByZWQobm9kZS5uZXh0U2libGluZykpIHtcbiAgICBzaWJsaW5ncy5wdXNoKG5vZGUubmV4dFNpYmxpbmcpO1xuICB9XG4gIHJldHVybiBzaWJsaW5ncztcbn1cblxuLyoqXG4gKiBibGFuayBIVE1MIGZvciBjdXJzb3IgcG9zaXRpb25cbiAqIC0gW3dvcmthcm91bmRdIG9sZCBJRSBvbmx5IHdvcmtzIHdpdGggJm5ic3A7XG4gKiAtIFt3b3JrYXJvdW5kXSBJRTExIGFuZCBvdGhlciBicm93c2VyIHdvcmtzIHdpdGggYm9ndXMgYnJcbiAqL1xuY29uc3QgYmxhbmtIVE1MID0gZW52LmlzTVNJRSAmJiBlbnYuYnJvd3NlclZlcnNpb24gPCAxMSA/ICcmbmJzcDsnIDogJzxicj4nO1xuXG4vKipcbiAqIEBtZXRob2Qgbm9kZUxlbmd0aFxuICpcbiAqIHJldHVybnMgI3RleHQncyB0ZXh0IHNpemUgb3IgZWxlbWVudCdzIGNoaWxkTm9kZXMgc2l6ZVxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICovXG5mdW5jdGlvbiBub2RlTGVuZ3RoKG5vZGUpIHtcbiAgaWYgKGlzVGV4dChub2RlKSkge1xuICAgIHJldHVybiBub2RlLm5vZGVWYWx1ZS5sZW5ndGg7XG4gIH1cblxuICBpZiAobm9kZSkge1xuICAgIHJldHVybiBub2RlLmNoaWxkTm9kZXMubGVuZ3RoO1xuICB9XG5cbiAgcmV0dXJuIDA7XG59XG5cbi8qKlxuICogcmV0dXJucyB3aGV0aGVyIG5vZGUgaXMgZW1wdHkgb3Igbm90LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNFbXB0eShub2RlKSB7XG4gIGNvbnN0IGxlbiA9IG5vZGVMZW5ndGgobm9kZSk7XG5cbiAgaWYgKGxlbiA9PT0gMCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2UgaWYgKCFpc1RleHQobm9kZSkgJiYgbGVuID09PSAxICYmIG5vZGUuaW5uZXJIVE1MID09PSBibGFua0hUTUwpIHtcbiAgICAvLyBleCkgPHA+PGJyPjwvcD4sIDxzcGFuPjxicj48L3NwYW4+XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSBpZiAobGlzdHMuYWxsKG5vZGUuY2hpbGROb2RlcywgaXNUZXh0KSAmJiBub2RlLmlubmVySFRNTCA9PT0gJycpIHtcbiAgICAvLyBleCkgPHA+PC9wPiwgPHNwYW4+PC9zcGFuPlxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIHBhZGRpbmcgYmxhbmtIVE1MIGlmIG5vZGUgaXMgZW1wdHkgKGZvciBjdXJzb3IgcG9zaXRpb24pXG4gKi9cbmZ1bmN0aW9uIHBhZGRpbmdCbGFua0hUTUwobm9kZSkge1xuICBpZiAoIWlzVm9pZChub2RlKSAmJiAhbm9kZUxlbmd0aChub2RlKSkge1xuICAgIG5vZGUuaW5uZXJIVE1MID0gYmxhbmtIVE1MO1xuICB9XG59XG5cbi8qKlxuICogZmluZCBuZWFyZXN0IGFuY2VzdG9yIHByZWRpY2F0ZSBoaXRcbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWQgLSBwcmVkaWNhdGUgZnVuY3Rpb25cbiAqL1xuZnVuY3Rpb24gYW5jZXN0b3Iobm9kZSwgcHJlZCkge1xuICB3aGlsZSAobm9kZSkge1xuICAgIGlmIChwcmVkKG5vZGUpKSB7IHJldHVybiBub2RlOyB9XG4gICAgaWYgKGlzRWRpdGFibGUobm9kZSkpIHsgYnJlYWs7IH1cblxuICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogZmluZCBuZWFyZXN0IGFuY2VzdG9yIG9ubHkgc2luZ2xlIGNoaWxkIGJsb29kIGxpbmUgYW5kIHByZWRpY2F0ZSBoaXRcbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWQgLSBwcmVkaWNhdGUgZnVuY3Rpb25cbiAqL1xuZnVuY3Rpb24gc2luZ2xlQ2hpbGRBbmNlc3Rvcihub2RlLCBwcmVkKSB7XG4gIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG5cbiAgd2hpbGUgKG5vZGUpIHtcbiAgICBpZiAobm9kZUxlbmd0aChub2RlKSAhPT0gMSkgeyBicmVhazsgfVxuICAgIGlmIChwcmVkKG5vZGUpKSB7IHJldHVybiBub2RlOyB9XG4gICAgaWYgKGlzRWRpdGFibGUobm9kZSkpIHsgYnJlYWs7IH1cblxuICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogcmV0dXJucyBuZXcgYXJyYXkgb2YgYW5jZXN0b3Igbm9kZXMgKHVudGlsIHByZWRpY2F0ZSBoaXQpLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdGlvbmFsXSBwcmVkIC0gcHJlZGljYXRlIGZ1bmN0aW9uXG4gKi9cbmZ1bmN0aW9uIGxpc3RBbmNlc3Rvcihub2RlLCBwcmVkKSB7XG4gIHByZWQgPSBwcmVkIHx8IGZ1bmMuZmFpbDtcblxuICBjb25zdCBhbmNlc3RvcnMgPSBbXTtcbiAgYW5jZXN0b3Iobm9kZSwgZnVuY3Rpb24oZWwpIHtcbiAgICBpZiAoIWlzRWRpdGFibGUoZWwpKSB7XG4gICAgICBhbmNlc3RvcnMucHVzaChlbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByZWQoZWwpO1xuICB9KTtcbiAgcmV0dXJuIGFuY2VzdG9ycztcbn1cblxuLyoqXG4gKiBmaW5kIGZhcnRoZXN0IGFuY2VzdG9yIHByZWRpY2F0ZSBoaXRcbiAqL1xuZnVuY3Rpb24gbGFzdEFuY2VzdG9yKG5vZGUsIHByZWQpIHtcbiAgY29uc3QgYW5jZXN0b3JzID0gbGlzdEFuY2VzdG9yKG5vZGUpO1xuICByZXR1cm4gbGlzdHMubGFzdChhbmNlc3RvcnMuZmlsdGVyKHByZWQpKTtcbn1cblxuLyoqXG4gKiByZXR1cm5zIGNvbW1vbiBhbmNlc3RvciBub2RlIGJldHdlZW4gdHdvIG5vZGVzLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZUFcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZUJcbiAqL1xuZnVuY3Rpb24gY29tbW9uQW5jZXN0b3Iobm9kZUEsIG5vZGVCKSB7XG4gIGNvbnN0IGFuY2VzdG9ycyA9IGxpc3RBbmNlc3Rvcihub2RlQSk7XG4gIGZvciAobGV0IG4gPSBub2RlQjsgbjsgbiA9IG4ucGFyZW50Tm9kZSkge1xuICAgIGlmICgkLmluQXJyYXkobiwgYW5jZXN0b3JzKSA+IC0xKSB7IHJldHVybiBuOyB9XG4gIH1cbiAgcmV0dXJuIG51bGw7IC8vIGRpZmZlcmVuY2UgZG9jdW1lbnQgYXJlYVxufVxuXG4vKipcbiAqIGxpc3RpbmcgYWxsIHByZXZpb3VzIHNpYmxpbmdzICh1bnRpbCBwcmVkaWNhdGUgaGl0KS5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25hbF0gcHJlZCAtIHByZWRpY2F0ZSBmdW5jdGlvblxuICovXG5mdW5jdGlvbiBsaXN0UHJldihub2RlLCBwcmVkKSB7XG4gIHByZWQgPSBwcmVkIHx8IGZ1bmMuZmFpbDtcblxuICBjb25zdCBub2RlcyA9IFtdO1xuICB3aGlsZSAobm9kZSkge1xuICAgIGlmIChwcmVkKG5vZGUpKSB7IGJyZWFrOyB9XG4gICAgbm9kZXMucHVzaChub2RlKTtcbiAgICBub2RlID0gbm9kZS5wcmV2aW91c1NpYmxpbmc7XG4gIH1cbiAgcmV0dXJuIG5vZGVzO1xufVxuXG4vKipcbiAqIGxpc3RpbmcgbmV4dCBzaWJsaW5ncyAodW50aWwgcHJlZGljYXRlIGhpdCkuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJlZF0gLSBwcmVkaWNhdGUgZnVuY3Rpb25cbiAqL1xuZnVuY3Rpb24gbGlzdE5leHQobm9kZSwgcHJlZCkge1xuICBwcmVkID0gcHJlZCB8fCBmdW5jLmZhaWw7XG5cbiAgY29uc3Qgbm9kZXMgPSBbXTtcbiAgd2hpbGUgKG5vZGUpIHtcbiAgICBpZiAocHJlZChub2RlKSkgeyBicmVhazsgfVxuICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7XG4gIH1cbiAgcmV0dXJuIG5vZGVzO1xufVxuXG4vKipcbiAqIGxpc3RpbmcgZGVzY2VuZGFudCBub2Rlc1xuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW3ByZWRdIC0gcHJlZGljYXRlIGZ1bmN0aW9uXG4gKi9cbmZ1bmN0aW9uIGxpc3REZXNjZW5kYW50KG5vZGUsIHByZWQpIHtcbiAgY29uc3QgZGVzY2VuZGFudHMgPSBbXTtcbiAgcHJlZCA9IHByZWQgfHwgZnVuYy5vaztcblxuICAvLyBzdGFydCBERlMoZGVwdGggZmlyc3Qgc2VhcmNoKSB3aXRoIG5vZGVcbiAgKGZ1bmN0aW9uIGZuV2FsayhjdXJyZW50KSB7XG4gICAgaWYgKG5vZGUgIT09IGN1cnJlbnQgJiYgcHJlZChjdXJyZW50KSkge1xuICAgICAgZGVzY2VuZGFudHMucHVzaChjdXJyZW50KTtcbiAgICB9XG4gICAgZm9yIChsZXQgaWR4ID0gMCwgbGVuID0gY3VycmVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaWR4IDwgbGVuOyBpZHgrKykge1xuICAgICAgZm5XYWxrKGN1cnJlbnQuY2hpbGROb2Rlc1tpZHhdKTtcbiAgICB9XG4gIH0pKG5vZGUpO1xuXG4gIHJldHVybiBkZXNjZW5kYW50cztcbn1cblxuLyoqXG4gKiB3cmFwIG5vZGUgd2l0aCBuZXcgdGFnLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtOb2RlfSB0YWdOYW1lIG9mIHdyYXBwZXJcbiAqIEByZXR1cm4ge05vZGV9IC0gd3JhcHBlclxuICovXG5mdW5jdGlvbiB3cmFwKG5vZGUsIHdyYXBwZXJOYW1lKSB7XG4gIGNvbnN0IHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgY29uc3Qgd3JhcHBlciA9ICQoJzwnICsgd3JhcHBlck5hbWUgKyAnPicpWzBdO1xuXG4gIHBhcmVudC5pbnNlcnRCZWZvcmUod3JhcHBlciwgbm9kZSk7XG4gIHdyYXBwZXIuYXBwZW5kQ2hpbGQobm9kZSk7XG5cbiAgcmV0dXJuIHdyYXBwZXI7XG59XG5cbi8qKlxuICogaW5zZXJ0IG5vZGUgYWZ0ZXIgcHJlY2VkaW5nXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge05vZGV9IHByZWNlZGluZyAtIHByZWRpY2F0ZSBmdW5jdGlvblxuICovXG5mdW5jdGlvbiBpbnNlcnRBZnRlcihub2RlLCBwcmVjZWRpbmcpIHtcbiAgY29uc3QgbmV4dCA9IHByZWNlZGluZy5uZXh0U2libGluZztcbiAgbGV0IHBhcmVudCA9IHByZWNlZGluZy5wYXJlbnROb2RlO1xuICBpZiAobmV4dCkge1xuICAgIHBhcmVudC5pbnNlcnRCZWZvcmUobm9kZSwgbmV4dCk7XG4gIH0gZWxzZSB7XG4gICAgcGFyZW50LmFwcGVuZENoaWxkKG5vZGUpO1xuICB9XG4gIHJldHVybiBub2RlO1xufVxuXG4vKipcbiAqIGFwcGVuZCBlbGVtZW50cy5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7Q29sbGVjdGlvbn0gYUNoaWxkXG4gKi9cbmZ1bmN0aW9uIGFwcGVuZENoaWxkTm9kZXMobm9kZSwgYUNoaWxkKSB7XG4gICQuZWFjaChhQ2hpbGQsIGZ1bmN0aW9uKGlkeCwgY2hpbGQpIHtcbiAgICBub2RlLmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgfSk7XG4gIHJldHVybiBub2RlO1xufVxuXG4vKipcbiAqIHJldHVybnMgd2hldGhlciBib3VuZGFyeVBvaW50IGlzIGxlZnQgZWRnZSBvciBub3QuXG4gKlxuICogQHBhcmFtIHtCb3VuZGFyeVBvaW50fSBwb2ludFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNMZWZ0RWRnZVBvaW50KHBvaW50KSB7XG4gIHJldHVybiBwb2ludC5vZmZzZXQgPT09IDA7XG59XG5cbi8qKlxuICogcmV0dXJucyB3aGV0aGVyIGJvdW5kYXJ5UG9pbnQgaXMgcmlnaHQgZWRnZSBvciBub3QuXG4gKlxuICogQHBhcmFtIHtCb3VuZGFyeVBvaW50fSBwb2ludFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNSaWdodEVkZ2VQb2ludChwb2ludCkge1xuICByZXR1cm4gcG9pbnQub2Zmc2V0ID09PSBub2RlTGVuZ3RoKHBvaW50Lm5vZGUpO1xufVxuXG4vKipcbiAqIHJldHVybnMgd2hldGhlciBib3VuZGFyeVBvaW50IGlzIGVkZ2Ugb3Igbm90LlxuICpcbiAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRWRnZVBvaW50KHBvaW50KSB7XG4gIHJldHVybiBpc0xlZnRFZGdlUG9pbnQocG9pbnQpIHx8IGlzUmlnaHRFZGdlUG9pbnQocG9pbnQpO1xufVxuXG4vKipcbiAqIHJldHVybnMgd2hldGhlciBub2RlIGlzIGxlZnQgZWRnZSBvZiBhbmNlc3RvciBvciBub3QuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge05vZGV9IGFuY2VzdG9yXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBpc0xlZnRFZGdlT2Yobm9kZSwgYW5jZXN0b3IpIHtcbiAgd2hpbGUgKG5vZGUgJiYgbm9kZSAhPT0gYW5jZXN0b3IpIHtcbiAgICBpZiAocG9zaXRpb24obm9kZSkgIT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIHJldHVybnMgd2hldGhlciBub2RlIGlzIHJpZ2h0IGVkZ2Ugb2YgYW5jZXN0b3Igb3Igbm90LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtOb2RlfSBhbmNlc3RvclxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNSaWdodEVkZ2VPZihub2RlLCBhbmNlc3Rvcikge1xuICBpZiAoIWFuY2VzdG9yKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHdoaWxlIChub2RlICYmIG5vZGUgIT09IGFuY2VzdG9yKSB7XG4gICAgaWYgKHBvc2l0aW9uKG5vZGUpICE9PSBub2RlTGVuZ3RoKG5vZGUucGFyZW50Tm9kZSkgLSAxKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiByZXR1cm5zIHdoZXRoZXIgcG9pbnQgaXMgbGVmdCBlZGdlIG9mIGFuY2VzdG9yIG9yIG5vdC5cbiAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRcbiAqIEBwYXJhbSB7Tm9kZX0gYW5jZXN0b3JcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzTGVmdEVkZ2VQb2ludE9mKHBvaW50LCBhbmNlc3Rvcikge1xuICByZXR1cm4gaXNMZWZ0RWRnZVBvaW50KHBvaW50KSAmJiBpc0xlZnRFZGdlT2YocG9pbnQubm9kZSwgYW5jZXN0b3IpO1xufVxuXG4vKipcbiAqIHJldHVybnMgd2hldGhlciBwb2ludCBpcyByaWdodCBlZGdlIG9mIGFuY2VzdG9yIG9yIG5vdC5cbiAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRcbiAqIEBwYXJhbSB7Tm9kZX0gYW5jZXN0b3JcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzUmlnaHRFZGdlUG9pbnRPZihwb2ludCwgYW5jZXN0b3IpIHtcbiAgcmV0dXJuIGlzUmlnaHRFZGdlUG9pbnQocG9pbnQpICYmIGlzUmlnaHRFZGdlT2YocG9pbnQubm9kZSwgYW5jZXN0b3IpO1xufVxuXG4vKipcbiAqIHJldHVybnMgb2Zmc2V0IGZyb20gcGFyZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICovXG5mdW5jdGlvbiBwb3NpdGlvbihub2RlKSB7XG4gIGxldCBvZmZzZXQgPSAwO1xuICB3aGlsZSAoKG5vZGUgPSBub2RlLnByZXZpb3VzU2libGluZykpIHtcbiAgICBvZmZzZXQgKz0gMTtcbiAgfVxuICByZXR1cm4gb2Zmc2V0O1xufVxuXG5mdW5jdGlvbiBoYXNDaGlsZHJlbihub2RlKSB7XG4gIHJldHVybiAhIShub2RlICYmIG5vZGUuY2hpbGROb2RlcyAmJiBub2RlLmNoaWxkTm9kZXMubGVuZ3RoKTtcbn1cblxuLyoqXG4gKiByZXR1cm5zIHByZXZpb3VzIGJvdW5kYXJ5UG9pbnRcbiAqXG4gKiBAcGFyYW0ge0JvdW5kYXJ5UG9pbnR9IHBvaW50XG4gKiBAcGFyYW0ge0Jvb2xlYW59IGlzU2tpcElubmVyT2Zmc2V0XG4gKiBAcmV0dXJuIHtCb3VuZGFyeVBvaW50fVxuICovXG5mdW5jdGlvbiBwcmV2UG9pbnQocG9pbnQsIGlzU2tpcElubmVyT2Zmc2V0KSB7XG4gIGxldCBub2RlO1xuICBsZXQgb2Zmc2V0O1xuXG4gIGlmIChwb2ludC5vZmZzZXQgPT09IDApIHtcbiAgICBpZiAoaXNFZGl0YWJsZShwb2ludC5ub2RlKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgbm9kZSA9IHBvaW50Lm5vZGUucGFyZW50Tm9kZTtcbiAgICBvZmZzZXQgPSBwb3NpdGlvbihwb2ludC5ub2RlKTtcbiAgfSBlbHNlIGlmIChoYXNDaGlsZHJlbihwb2ludC5ub2RlKSkge1xuICAgIG5vZGUgPSBwb2ludC5ub2RlLmNoaWxkTm9kZXNbcG9pbnQub2Zmc2V0IC0gMV07XG4gICAgb2Zmc2V0ID0gbm9kZUxlbmd0aChub2RlKTtcbiAgfSBlbHNlIHtcbiAgICBub2RlID0gcG9pbnQubm9kZTtcbiAgICBvZmZzZXQgPSBpc1NraXBJbm5lck9mZnNldCA/IDAgOiBwb2ludC5vZmZzZXQgLSAxO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBub2RlOiBub2RlLFxuICAgIG9mZnNldDogb2Zmc2V0XG4gIH07XG59XG5cbi8qKlxuICogcmV0dXJucyBuZXh0IGJvdW5kYXJ5UG9pbnRcbiAqXG4gKiBAcGFyYW0ge0JvdW5kYXJ5UG9pbnR9IHBvaW50XG4gKiBAcGFyYW0ge0Jvb2xlYW59IGlzU2tpcElubmVyT2Zmc2V0XG4gKiBAcmV0dXJuIHtCb3VuZGFyeVBvaW50fVxuICovXG5mdW5jdGlvbiBuZXh0UG9pbnQocG9pbnQsIGlzU2tpcElubmVyT2Zmc2V0KSB7XG4gIGxldCBub2RlLCBvZmZzZXQ7XG5cbiAgaWYgKG5vZGVMZW5ndGgocG9pbnQubm9kZSkgPT09IHBvaW50Lm9mZnNldCkge1xuICAgIGlmIChpc0VkaXRhYmxlKHBvaW50Lm5vZGUpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBub2RlID0gcG9pbnQubm9kZS5wYXJlbnROb2RlO1xuICAgIG9mZnNldCA9IHBvc2l0aW9uKHBvaW50Lm5vZGUpICsgMTtcbiAgfSBlbHNlIGlmIChoYXNDaGlsZHJlbihwb2ludC5ub2RlKSkge1xuICAgIG5vZGUgPSBwb2ludC5ub2RlLmNoaWxkTm9kZXNbcG9pbnQub2Zmc2V0XTtcbiAgICBvZmZzZXQgPSAwO1xuICB9IGVsc2Uge1xuICAgIG5vZGUgPSBwb2ludC5ub2RlO1xuICAgIG9mZnNldCA9IGlzU2tpcElubmVyT2Zmc2V0ID8gbm9kZUxlbmd0aChwb2ludC5ub2RlKSA6IHBvaW50Lm9mZnNldCArIDE7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG5vZGU6IG5vZGUsXG4gICAgb2Zmc2V0OiBvZmZzZXRcbiAgfTtcbn1cblxuLyoqXG4gKiByZXR1cm5zIHdoZXRoZXIgcG9pbnRBIGFuZCBwb2ludEIgaXMgc2FtZSBvciBub3QuXG4gKlxuICogQHBhcmFtIHtCb3VuZGFyeVBvaW50fSBwb2ludEFcbiAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRCXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBpc1NhbWVQb2ludChwb2ludEEsIHBvaW50Qikge1xuICByZXR1cm4gcG9pbnRBLm5vZGUgPT09IHBvaW50Qi5ub2RlICYmIHBvaW50QS5vZmZzZXQgPT09IHBvaW50Qi5vZmZzZXQ7XG59XG5cbi8qKlxuICogcmV0dXJucyB3aGV0aGVyIHBvaW50IGlzIHZpc2libGUgKGNhbiBzZXQgY3Vyc29yKSBvciBub3QuXG4gKlxuICogQHBhcmFtIHtCb3VuZGFyeVBvaW50fSBwb2ludFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNWaXNpYmxlUG9pbnQocG9pbnQpIHtcbiAgaWYgKGlzVGV4dChwb2ludC5ub2RlKSB8fCAhaGFzQ2hpbGRyZW4ocG9pbnQubm9kZSkgfHwgaXNFbXB0eShwb2ludC5ub2RlKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgY29uc3QgbGVmdE5vZGUgPSBwb2ludC5ub2RlLmNoaWxkTm9kZXNbcG9pbnQub2Zmc2V0IC0gMV07XG4gIGNvbnN0IHJpZ2h0Tm9kZSA9IHBvaW50Lm5vZGUuY2hpbGROb2Rlc1twb2ludC5vZmZzZXRdO1xuICBpZiAoKCFsZWZ0Tm9kZSB8fCBpc1ZvaWQobGVmdE5vZGUpKSAmJiAoIXJpZ2h0Tm9kZSB8fCBpc1ZvaWQocmlnaHROb2RlKSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBAbWV0aG9kIHByZXZQb2ludFV0aWxcbiAqXG4gKiBAcGFyYW0ge0JvdW5kYXJ5UG9pbnR9IHBvaW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkXG4gKiBAcmV0dXJuIHtCb3VuZGFyeVBvaW50fVxuICovXG5mdW5jdGlvbiBwcmV2UG9pbnRVbnRpbChwb2ludCwgcHJlZCkge1xuICB3aGlsZSAocG9pbnQpIHtcbiAgICBpZiAocHJlZChwb2ludCkpIHtcbiAgICAgIHJldHVybiBwb2ludDtcbiAgICB9XG5cbiAgICBwb2ludCA9IHByZXZQb2ludChwb2ludCk7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBAbWV0aG9kIG5leHRQb2ludFVudGlsXG4gKlxuICogQHBhcmFtIHtCb3VuZGFyeVBvaW50fSBwb2ludFxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZFxuICogQHJldHVybiB7Qm91bmRhcnlQb2ludH1cbiAqL1xuZnVuY3Rpb24gbmV4dFBvaW50VW50aWwocG9pbnQsIHByZWQpIHtcbiAgd2hpbGUgKHBvaW50KSB7XG4gICAgaWYgKHByZWQocG9pbnQpKSB7XG4gICAgICByZXR1cm4gcG9pbnQ7XG4gICAgfVxuXG4gICAgcG9pbnQgPSBuZXh0UG9pbnQocG9pbnQpO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogcmV0dXJucyB3aGV0aGVyIHBvaW50IGhhcyBjaGFyYWN0ZXIgb3Igbm90LlxuICpcbiAqIEBwYXJhbSB7UG9pbnR9IHBvaW50XG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBpc0NoYXJQb2ludChwb2ludCkge1xuICBpZiAoIWlzVGV4dChwb2ludC5ub2RlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNvbnN0IGNoID0gcG9pbnQubm9kZS5ub2RlVmFsdWUuY2hhckF0KHBvaW50Lm9mZnNldCAtIDEpO1xuICByZXR1cm4gY2ggJiYgKGNoICE9PSAnICcgJiYgY2ggIT09IE5CU1BfQ0hBUik7XG59XG5cbi8qKlxuICogQG1ldGhvZCB3YWxrUG9pbnRcbiAqXG4gKiBAcGFyYW0ge0JvdW5kYXJ5UG9pbnR9IHN0YXJ0UG9pbnRcbiAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gZW5kUG9pbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNTa2lwSW5uZXJPZmZzZXRcbiAqL1xuZnVuY3Rpb24gd2Fsa1BvaW50KHN0YXJ0UG9pbnQsIGVuZFBvaW50LCBoYW5kbGVyLCBpc1NraXBJbm5lck9mZnNldCkge1xuICBsZXQgcG9pbnQgPSBzdGFydFBvaW50O1xuXG4gIHdoaWxlIChwb2ludCkge1xuICAgIGhhbmRsZXIocG9pbnQpO1xuXG4gICAgaWYgKGlzU2FtZVBvaW50KHBvaW50LCBlbmRQb2ludCkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGNvbnN0IGlzU2tpcE9mZnNldCA9IGlzU2tpcElubmVyT2Zmc2V0ICYmXG4gICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0UG9pbnQubm9kZSAhPT0gcG9pbnQubm9kZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICBlbmRQb2ludC5ub2RlICE9PSBwb2ludC5ub2RlO1xuICAgIHBvaW50ID0gbmV4dFBvaW50KHBvaW50LCBpc1NraXBPZmZzZXQpO1xuICB9XG59XG5cbi8qKlxuICogQG1ldGhvZCBtYWtlT2Zmc2V0UGF0aFxuICpcbiAqIHJldHVybiBvZmZzZXRQYXRoKGFycmF5IG9mIG9mZnNldCkgZnJvbSBhbmNlc3RvclxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gYW5jZXN0b3IgLSBhbmNlc3RvciBub2RlXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqL1xuZnVuY3Rpb24gbWFrZU9mZnNldFBhdGgoYW5jZXN0b3IsIG5vZGUpIHtcbiAgY29uc3QgYW5jZXN0b3JzID0gbGlzdEFuY2VzdG9yKG5vZGUsIGZ1bmMuZXEoYW5jZXN0b3IpKTtcbiAgcmV0dXJuIGFuY2VzdG9ycy5tYXAocG9zaXRpb24pLnJldmVyc2UoKTtcbn1cblxuLyoqXG4gKiBAbWV0aG9kIGZyb21PZmZzZXRQYXRoXG4gKlxuICogcmV0dXJuIGVsZW1lbnQgZnJvbSBvZmZzZXRQYXRoKGFycmF5IG9mIG9mZnNldClcbiAqXG4gKiBAcGFyYW0ge05vZGV9IGFuY2VzdG9yIC0gYW5jZXN0b3Igbm9kZVxuICogQHBhcmFtIHthcnJheX0gb2Zmc2V0cyAtIG9mZnNldFBhdGhcbiAqL1xuZnVuY3Rpb24gZnJvbU9mZnNldFBhdGgoYW5jZXN0b3IsIG9mZnNldHMpIHtcbiAgbGV0IGN1cnJlbnQgPSBhbmNlc3RvcjtcbiAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IG9mZnNldHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBpZiAoY3VycmVudC5jaGlsZE5vZGVzLmxlbmd0aCA8PSBvZmZzZXRzW2ldKSB7XG4gICAgICBjdXJyZW50ID0gY3VycmVudC5jaGlsZE5vZGVzW2N1cnJlbnQuY2hpbGROb2Rlcy5sZW5ndGggLSAxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudCA9IGN1cnJlbnQuY2hpbGROb2Rlc1tvZmZzZXRzW2ldXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGN1cnJlbnQ7XG59XG5cbi8qKlxuICogQG1ldGhvZCBzcGxpdE5vZGVcbiAqXG4gKiBzcGxpdCBlbGVtZW50IG9yICN0ZXh0XG4gKlxuICogQHBhcmFtIHtCb3VuZGFyeVBvaW50fSBwb2ludFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5pc1NraXBQYWRkaW5nQmxhbmtIVE1MXSAtIGRlZmF1bHQ6IGZhbHNlXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmlzTm90U3BsaXRFZGdlUG9pbnRdIC0gZGVmYXVsdDogZmFsc2VcbiAqIEByZXR1cm4ge05vZGV9IHJpZ2h0IG5vZGUgb2YgYm91bmRhcnlQb2ludFxuICovXG5mdW5jdGlvbiBzcGxpdE5vZGUocG9pbnQsIG9wdGlvbnMpIHtcbiAgY29uc3QgaXNTa2lwUGFkZGluZ0JsYW5rSFRNTCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5pc1NraXBQYWRkaW5nQmxhbmtIVE1MO1xuICBjb25zdCBpc05vdFNwbGl0RWRnZVBvaW50ID0gb3B0aW9ucyAmJiBvcHRpb25zLmlzTm90U3BsaXRFZGdlUG9pbnQ7XG5cbiAgLy8gZWRnZSBjYXNlXG4gIGlmIChpc0VkZ2VQb2ludChwb2ludCkgJiYgKGlzVGV4dChwb2ludC5ub2RlKSB8fCBpc05vdFNwbGl0RWRnZVBvaW50KSkge1xuICAgIGlmIChpc0xlZnRFZGdlUG9pbnQocG9pbnQpKSB7XG4gICAgICByZXR1cm4gcG9pbnQubm9kZTtcbiAgICB9IGVsc2UgaWYgKGlzUmlnaHRFZGdlUG9pbnQocG9pbnQpKSB7XG4gICAgICByZXR1cm4gcG9pbnQubm9kZS5uZXh0U2libGluZztcbiAgICB9XG4gIH1cblxuICAvLyBzcGxpdCAjdGV4dFxuICBpZiAoaXNUZXh0KHBvaW50Lm5vZGUpKSB7XG4gICAgcmV0dXJuIHBvaW50Lm5vZGUuc3BsaXRUZXh0KHBvaW50Lm9mZnNldCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgY2hpbGROb2RlID0gcG9pbnQubm9kZS5jaGlsZE5vZGVzW3BvaW50Lm9mZnNldF07XG4gICAgY29uc3QgY2xvbmUgPSBpbnNlcnRBZnRlcihwb2ludC5ub2RlLmNsb25lTm9kZShmYWxzZSksIHBvaW50Lm5vZGUpO1xuICAgIGFwcGVuZENoaWxkTm9kZXMoY2xvbmUsIGxpc3ROZXh0KGNoaWxkTm9kZSkpO1xuXG4gICAgaWYgKCFpc1NraXBQYWRkaW5nQmxhbmtIVE1MKSB7XG4gICAgICBwYWRkaW5nQmxhbmtIVE1MKHBvaW50Lm5vZGUpO1xuICAgICAgcGFkZGluZ0JsYW5rSFRNTChjbG9uZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsb25lO1xuICB9XG59XG5cbi8qKlxuICogQG1ldGhvZCBzcGxpdFRyZWVcbiAqXG4gKiBzcGxpdCB0cmVlIGJ5IHBvaW50XG4gKlxuICogQHBhcmFtIHtOb2RlfSByb290IC0gc3BsaXQgcm9vdFxuICogQHBhcmFtIHtCb3VuZGFyeVBvaW50fSBwb2ludFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5pc1NraXBQYWRkaW5nQmxhbmtIVE1MXSAtIGRlZmF1bHQ6IGZhbHNlXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmlzTm90U3BsaXRFZGdlUG9pbnRdIC0gZGVmYXVsdDogZmFsc2VcbiAqIEByZXR1cm4ge05vZGV9IHJpZ2h0IG5vZGUgb2YgYm91bmRhcnlQb2ludFxuICovXG5mdW5jdGlvbiBzcGxpdFRyZWUocm9vdCwgcG9pbnQsIG9wdGlvbnMpIHtcbiAgLy8gZXgpIFsjdGV4dCwgPHNwYW4+LCA8cD5dXG4gIGNvbnN0IGFuY2VzdG9ycyA9IGxpc3RBbmNlc3Rvcihwb2ludC5ub2RlLCBmdW5jLmVxKHJvb3QpKTtcblxuICBpZiAoIWFuY2VzdG9ycy5sZW5ndGgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfSBlbHNlIGlmIChhbmNlc3RvcnMubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIHNwbGl0Tm9kZShwb2ludCwgb3B0aW9ucyk7XG4gIH1cblxuICByZXR1cm4gYW5jZXN0b3JzLnJlZHVjZShmdW5jdGlvbihub2RlLCBwYXJlbnQpIHtcbiAgICBpZiAobm9kZSA9PT0gcG9pbnQubm9kZSkge1xuICAgICAgbm9kZSA9IHNwbGl0Tm9kZShwb2ludCwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNwbGl0Tm9kZSh7XG4gICAgICBub2RlOiBwYXJlbnQsXG4gICAgICBvZmZzZXQ6IG5vZGUgPyBwb3NpdGlvbihub2RlKSA6IG5vZGVMZW5ndGgocGFyZW50KVxuICAgIH0sIG9wdGlvbnMpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBzcGxpdCBwb2ludFxuICpcbiAqIEBwYXJhbSB7UG9pbnR9IHBvaW50XG4gKiBAcGFyYW0ge0Jvb2xlYW59IGlzSW5saW5lXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIHNwbGl0UG9pbnQocG9pbnQsIGlzSW5saW5lKSB7XG4gIC8vIGZpbmQgc3BsaXRSb290LCBjb250YWluZXJcbiAgLy8gIC0gaW5saW5lOiBzcGxpdFJvb3QgaXMgYSBjaGlsZCBvZiBwYXJhZ3JhcGhcbiAgLy8gIC0gYmxvY2s6IHNwbGl0Um9vdCBpcyBhIGNoaWxkIG9mIGJvZHlDb250YWluZXJcbiAgY29uc3QgcHJlZCA9IGlzSW5saW5lID8gaXNQYXJhIDogaXNCb2R5Q29udGFpbmVyO1xuICBjb25zdCBhbmNlc3RvcnMgPSBsaXN0QW5jZXN0b3IocG9pbnQubm9kZSwgcHJlZCk7XG4gIGNvbnN0IHRvcEFuY2VzdG9yID0gbGlzdHMubGFzdChhbmNlc3RvcnMpIHx8IHBvaW50Lm5vZGU7XG5cbiAgbGV0IHNwbGl0Um9vdCwgY29udGFpbmVyO1xuICBpZiAocHJlZCh0b3BBbmNlc3RvcikpIHtcbiAgICBzcGxpdFJvb3QgPSBhbmNlc3RvcnNbYW5jZXN0b3JzLmxlbmd0aCAtIDJdO1xuICAgIGNvbnRhaW5lciA9IHRvcEFuY2VzdG9yO1xuICB9IGVsc2Uge1xuICAgIHNwbGl0Um9vdCA9IHRvcEFuY2VzdG9yO1xuICAgIGNvbnRhaW5lciA9IHNwbGl0Um9vdC5wYXJlbnROb2RlO1xuICB9XG5cbiAgLy8gaWYgc3BsaXRSb290IGlzIGV4aXN0cywgc3BsaXQgd2l0aCBzcGxpdFRyZWVcbiAgbGV0IHBpdm90ID0gc3BsaXRSb290ICYmIHNwbGl0VHJlZShzcGxpdFJvb3QsIHBvaW50LCB7XG4gICAgaXNTa2lwUGFkZGluZ0JsYW5rSFRNTDogaXNJbmxpbmUsXG4gICAgaXNOb3RTcGxpdEVkZ2VQb2ludDogaXNJbmxpbmVcbiAgfSk7XG5cbiAgLy8gaWYgY29udGFpbmVyIGlzIHBvaW50Lm5vZGUsIGZpbmQgcGl2b3Qgd2l0aCBwb2ludC5vZmZzZXRcbiAgaWYgKCFwaXZvdCAmJiBjb250YWluZXIgPT09IHBvaW50Lm5vZGUpIHtcbiAgICBwaXZvdCA9IHBvaW50Lm5vZGUuY2hpbGROb2Rlc1twb2ludC5vZmZzZXRdO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByaWdodE5vZGU6IHBpdm90LFxuICAgIGNvbnRhaW5lcjogY29udGFpbmVyXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZShub2RlTmFtZSkge1xuICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChub2RlTmFtZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRleHQodGV4dCkge1xuICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCk7XG59XG5cbi8qKlxuICogQG1ldGhvZCByZW1vdmVcbiAqXG4gKiByZW1vdmUgbm9kZSwgKGlzUmVtb3ZlQ2hpbGQ6IHJlbW92ZSBjaGlsZCBvciBub3QpXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGlzUmVtb3ZlQ2hpbGRcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlKG5vZGUsIGlzUmVtb3ZlQ2hpbGQpIHtcbiAgaWYgKCFub2RlIHx8ICFub2RlLnBhcmVudE5vZGUpIHsgcmV0dXJuOyB9XG4gIGlmIChub2RlLnJlbW92ZU5vZGUpIHsgcmV0dXJuIG5vZGUucmVtb3ZlTm9kZShpc1JlbW92ZUNoaWxkKTsgfVxuXG4gIGNvbnN0IHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgaWYgKCFpc1JlbW92ZUNoaWxkKSB7XG4gICAgY29uc3Qgbm9kZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gbm9kZS5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBub2Rlcy5wdXNoKG5vZGUuY2hpbGROb2Rlc1tpXSk7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IG5vZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKG5vZGVzW2ldLCBub2RlKTtcbiAgICB9XG4gIH1cblxuICBwYXJlbnQucmVtb3ZlQ2hpbGQobm9kZSk7XG59XG5cbi8qKlxuICogQG1ldGhvZCByZW1vdmVXaGlsZVxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZFxuICovXG5mdW5jdGlvbiByZW1vdmVXaGlsZShub2RlLCBwcmVkKSB7XG4gIHdoaWxlIChub2RlKSB7XG4gICAgaWYgKGlzRWRpdGFibGUobm9kZSkgfHwgIXByZWQobm9kZSkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGNvbnN0IHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICByZW1vdmUobm9kZSk7XG4gICAgbm9kZSA9IHBhcmVudDtcbiAgfVxufVxuXG4vKipcbiAqIEBtZXRob2QgcmVwbGFjZVxuICpcbiAqIHJlcGxhY2Ugbm9kZSB3aXRoIHByb3ZpZGVkIG5vZGVOYW1lXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge1N0cmluZ30gbm9kZU5hbWVcbiAqIEByZXR1cm4ge05vZGV9IC0gbmV3IG5vZGVcbiAqL1xuZnVuY3Rpb24gcmVwbGFjZShub2RlLCBub2RlTmFtZSkge1xuICBpZiAobm9kZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpID09PSBub2RlTmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH1cblxuICBjb25zdCBuZXdOb2RlID0gY3JlYXRlKG5vZGVOYW1lKTtcblxuICBpZiAobm9kZS5zdHlsZS5jc3NUZXh0KSB7XG4gICAgbmV3Tm9kZS5zdHlsZS5jc3NUZXh0ID0gbm9kZS5zdHlsZS5jc3NUZXh0O1xuICB9XG5cbiAgYXBwZW5kQ2hpbGROb2RlcyhuZXdOb2RlLCBsaXN0cy5mcm9tKG5vZGUuY2hpbGROb2RlcykpO1xuICBpbnNlcnRBZnRlcihuZXdOb2RlLCBub2RlKTtcbiAgcmVtb3ZlKG5vZGUpO1xuXG4gIHJldHVybiBuZXdOb2RlO1xufVxuXG5jb25zdCBpc1RleHRhcmVhID0gbWFrZVByZWRCeU5vZGVOYW1lKCdURVhUQVJFQScpO1xuXG4vKipcbiAqIEBwYXJhbSB7alF1ZXJ5fSAkbm9kZVxuICogQHBhcmFtIHtCb29sZWFufSBbc3RyaXBMaW5lYnJlYWtzXSAtIGRlZmF1bHQ6IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIHZhbHVlKCRub2RlLCBzdHJpcExpbmVicmVha3MpIHtcbiAgY29uc3QgdmFsID0gaXNUZXh0YXJlYSgkbm9kZVswXSkgPyAkbm9kZS52YWwoKSA6ICRub2RlLmh0bWwoKTtcbiAgaWYgKHN0cmlwTGluZWJyZWFrcykge1xuICAgIHJldHVybiB2YWwucmVwbGFjZSgvW1xcblxccl0vZywgJycpO1xuICB9XG4gIHJldHVybiB2YWw7XG59XG5cbi8qKlxuICogQG1ldGhvZCBodG1sXG4gKlxuICogZ2V0IHRoZSBIVE1MIGNvbnRlbnRzIG9mIG5vZGVcbiAqXG4gKiBAcGFyYW0ge2pRdWVyeX0gJG5vZGVcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW2lzTmV3bGluZU9uQmxvY2tdXG4gKi9cbmZ1bmN0aW9uIGh0bWwoJG5vZGUsIGlzTmV3bGluZU9uQmxvY2spIHtcbiAgbGV0IG1hcmt1cCA9IHZhbHVlKCRub2RlKTtcblxuICBpZiAoaXNOZXdsaW5lT25CbG9jaykge1xuICAgIGNvbnN0IHJlZ2V4VGFnID0gLzwoXFwvPykoXFxiKD8hISlbXj5cXHNdKikoLio/KShcXHMqXFwvPz4pL2c7XG4gICAgbWFya3VwID0gbWFya3VwLnJlcGxhY2UocmVnZXhUYWcsIGZ1bmN0aW9uKG1hdGNoLCBlbmRTbGFzaCwgbmFtZSkge1xuICAgICAgbmFtZSA9IG5hbWUudG9VcHBlckNhc2UoKTtcbiAgICAgIGNvbnN0IGlzRW5kT2ZJbmxpbmVDb250YWluZXIgPSAvXkRJVnxeVER8XlRIfF5QfF5MSXxeSFsxLTddLy50ZXN0KG5hbWUpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEhZW5kU2xhc2g7XG4gICAgICBjb25zdCBpc0Jsb2NrTm9kZSA9IC9eQkxPQ0tRVU9URXxeVEFCTEV8XlRCT0RZfF5UUnxeSFJ8XlVMfF5PTC8udGVzdChuYW1lKTtcblxuICAgICAgcmV0dXJuIG1hdGNoICsgKChpc0VuZE9mSW5saW5lQ29udGFpbmVyIHx8IGlzQmxvY2tOb2RlKSA/ICdcXG4nIDogJycpO1xuICAgIH0pO1xuICAgIG1hcmt1cCA9ICQudHJpbShtYXJrdXApO1xuICB9XG5cbiAgcmV0dXJuIG1hcmt1cDtcbn1cblxuZnVuY3Rpb24gcG9zRnJvbVBsYWNlaG9sZGVyKHBsYWNlaG9sZGVyKSB7XG4gIGNvbnN0ICRwbGFjZWhvbGRlciA9ICQocGxhY2Vob2xkZXIpO1xuICBjb25zdCBwb3MgPSAkcGxhY2Vob2xkZXIub2Zmc2V0KCk7XG4gIGNvbnN0IGhlaWdodCA9ICRwbGFjZWhvbGRlci5vdXRlckhlaWdodCh0cnVlKTsgLy8gaW5jbHVkZSBtYXJnaW5cblxuICByZXR1cm4ge1xuICAgIGxlZnQ6IHBvcy5sZWZ0LFxuICAgIHRvcDogcG9zLnRvcCArIGhlaWdodFxuICB9O1xufVxuXG5mdW5jdGlvbiBhdHRhY2hFdmVudHMoJG5vZGUsIGV2ZW50cykge1xuICBPYmplY3Qua2V5cyhldmVudHMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgJG5vZGUub24oa2V5LCBldmVudHNba2V5XSk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBkZXRhY2hFdmVudHMoJG5vZGUsIGV2ZW50cykge1xuICBPYmplY3Qua2V5cyhldmVudHMpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XG4gICAgJG5vZGUub2ZmKGtleSwgZXZlbnRzW2tleV0pO1xuICB9KTtcbn1cblxuLyoqXG4gKiBAbWV0aG9kIGlzQ3VzdG9tU3R5bGVUYWdcbiAqXG4gKiBhc3NlcnQgaWYgYSBub2RlIGNvbnRhaW5zIGEgXCJub3RlLXN0eWxldGFnXCIgY2xhc3MsXG4gKiB3aGljaCBpbXBsaWVzIHRoYXQncyBhIGN1c3RvbS1tYWRlIHN0eWxlIHRhZyBub2RlXG4gKlxuICogQHBhcmFtIHtOb2RlfSBhbiBIVE1MIERPTSBub2RlXG4gKi9cbmZ1bmN0aW9uIGlzQ3VzdG9tU3R5bGVUYWcobm9kZSkge1xuICByZXR1cm4gbm9kZSAmJiAhaXNUZXh0KG5vZGUpICYmIGxpc3RzLmNvbnRhaW5zKG5vZGUuY2xhc3NMaXN0LCAnbm90ZS1zdHlsZXRhZycpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8qKiBAcHJvcGVydHkge1N0cmluZ30gTkJTUF9DSEFSICovXG4gIE5CU1BfQ0hBUixcbiAgLyoqIEBwcm9wZXJ0eSB7U3RyaW5nfSBaRVJPX1dJRFRIX05CU1BfQ0hBUiAqL1xuICBaRVJPX1dJRFRIX05CU1BfQ0hBUixcbiAgLyoqIEBwcm9wZXJ0eSB7U3RyaW5nfSBibGFuayAqL1xuICBibGFuazogYmxhbmtIVE1MLFxuICAvKiogQHByb3BlcnR5IHtTdHJpbmd9IGVtcHR5UGFyYSAqL1xuICBlbXB0eVBhcmE6IGA8cD4ke2JsYW5rSFRNTH08L3A+YCxcbiAgbWFrZVByZWRCeU5vZGVOYW1lLFxuICBpc0VkaXRhYmxlLFxuICBpc0NvbnRyb2xTaXppbmcsXG4gIGlzVGV4dCxcbiAgaXNFbGVtZW50LFxuICBpc1ZvaWQsXG4gIGlzUGFyYSxcbiAgaXNQdXJlUGFyYSxcbiAgaXNIZWFkaW5nLFxuICBpc0lubGluZSxcbiAgaXNCbG9jazogZnVuYy5ub3QoaXNJbmxpbmUpLFxuICBpc0JvZHlJbmxpbmUsXG4gIGlzQm9keSxcbiAgaXNQYXJhSW5saW5lLFxuICBpc1ByZSxcbiAgaXNMaXN0LFxuICBpc1RhYmxlLFxuICBpc0RhdGEsXG4gIGlzQ2VsbCxcbiAgaXNCbG9ja3F1b3RlLFxuICBpc0JvZHlDb250YWluZXIsXG4gIGlzQW5jaG9yLFxuICBpc0RpdjogbWFrZVByZWRCeU5vZGVOYW1lKCdESVYnKSxcbiAgaXNMaSxcbiAgaXNCUjogbWFrZVByZWRCeU5vZGVOYW1lKCdCUicpLFxuICBpc1NwYW46IG1ha2VQcmVkQnlOb2RlTmFtZSgnU1BBTicpLFxuICBpc0I6IG1ha2VQcmVkQnlOb2RlTmFtZSgnQicpLFxuICBpc1U6IG1ha2VQcmVkQnlOb2RlTmFtZSgnVScpLFxuICBpc1M6IG1ha2VQcmVkQnlOb2RlTmFtZSgnUycpLFxuICBpc0k6IG1ha2VQcmVkQnlOb2RlTmFtZSgnSScpLFxuICBpc0ltZzogbWFrZVByZWRCeU5vZGVOYW1lKCdJTUcnKSxcbiAgaXNUZXh0YXJlYSxcbiAgaXNFbXB0eSxcbiAgaXNFbXB0eUFuY2hvcjogZnVuYy5hbmQoaXNBbmNob3IsIGlzRW1wdHkpLFxuICBpc0Nsb3Nlc3RTaWJsaW5nLFxuICB3aXRoQ2xvc2VzdFNpYmxpbmdzLFxuICBub2RlTGVuZ3RoLFxuICBpc0xlZnRFZGdlUG9pbnQsXG4gIGlzUmlnaHRFZGdlUG9pbnQsXG4gIGlzRWRnZVBvaW50LFxuICBpc0xlZnRFZGdlT2YsXG4gIGlzUmlnaHRFZGdlT2YsXG4gIGlzTGVmdEVkZ2VQb2ludE9mLFxuICBpc1JpZ2h0RWRnZVBvaW50T2YsXG4gIHByZXZQb2ludCxcbiAgbmV4dFBvaW50LFxuICBpc1NhbWVQb2ludCxcbiAgaXNWaXNpYmxlUG9pbnQsXG4gIHByZXZQb2ludFVudGlsLFxuICBuZXh0UG9pbnRVbnRpbCxcbiAgaXNDaGFyUG9pbnQsXG4gIHdhbGtQb2ludCxcbiAgYW5jZXN0b3IsXG4gIHNpbmdsZUNoaWxkQW5jZXN0b3IsXG4gIGxpc3RBbmNlc3RvcixcbiAgbGFzdEFuY2VzdG9yLFxuICBsaXN0TmV4dCxcbiAgbGlzdFByZXYsXG4gIGxpc3REZXNjZW5kYW50LFxuICBjb21tb25BbmNlc3RvcixcbiAgd3JhcCxcbiAgaW5zZXJ0QWZ0ZXIsXG4gIGFwcGVuZENoaWxkTm9kZXMsXG4gIHBvc2l0aW9uLFxuICBoYXNDaGlsZHJlbixcbiAgbWFrZU9mZnNldFBhdGgsXG4gIGZyb21PZmZzZXRQYXRoLFxuICBzcGxpdFRyZWUsXG4gIHNwbGl0UG9pbnQsXG4gIGNyZWF0ZSxcbiAgY3JlYXRlVGV4dCxcbiAgcmVtb3ZlLFxuICByZW1vdmVXaGlsZSxcbiAgcmVwbGFjZSxcbiAgaHRtbCxcbiAgdmFsdWUsXG4gIHBvc0Zyb21QbGFjZWhvbGRlcixcbiAgYXR0YWNoRXZlbnRzLFxuICBkZXRhY2hFdmVudHMsXG4gIGlzQ3VzdG9tU3R5bGVUYWdcbn07XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuXG4kLnN1bW1lcm5vdGUgPSAkLnN1bW1lcm5vdGUgfHwge1xuICBsYW5nOiB7fVxufTtcblxuJC5leHRlbmQoJC5zdW1tZXJub3RlLmxhbmcsIHtcbiAgJ2VuLVVTJzoge1xuICAgIGZvbnQ6IHtcbiAgICAgIGJvbGQ6ICdCb2xkJyxcbiAgICAgIGl0YWxpYzogJ0l0YWxpYycsXG4gICAgICB1bmRlcmxpbmU6ICdVbmRlcmxpbmUnLFxuICAgICAgY2xlYXI6ICdSZW1vdmUgRm9udCBTdHlsZScsXG4gICAgICBoZWlnaHQ6ICdMaW5lIEhlaWdodCcsXG4gICAgICBuYW1lOiAnRm9udCBGYW1pbHknLFxuICAgICAgc3RyaWtldGhyb3VnaDogJ1N0cmlrZXRocm91Z2gnLFxuICAgICAgc3Vic2NyaXB0OiAnU3Vic2NyaXB0JyxcbiAgICAgIHN1cGVyc2NyaXB0OiAnU3VwZXJzY3JpcHQnLFxuICAgICAgc2l6ZTogJ0ZvbnQgU2l6ZSdcbiAgICB9LFxuICAgIGltYWdlOiB7XG4gICAgICBpbWFnZTogJ1BpY3R1cmUnLFxuICAgICAgaW5zZXJ0OiAnSW5zZXJ0IEltYWdlJyxcbiAgICAgIHJlc2l6ZUZ1bGw6ICdSZXNpemUgRnVsbCcsXG4gICAgICByZXNpemVIYWxmOiAnUmVzaXplIEhhbGYnLFxuICAgICAgcmVzaXplUXVhcnRlcjogJ1Jlc2l6ZSBRdWFydGVyJyxcbiAgICAgIGZsb2F0TGVmdDogJ0Zsb2F0IExlZnQnLFxuICAgICAgZmxvYXRSaWdodDogJ0Zsb2F0IFJpZ2h0JyxcbiAgICAgIGZsb2F0Tm9uZTogJ0Zsb2F0IE5vbmUnLFxuICAgICAgc2hhcGVSb3VuZGVkOiAnU2hhcGU6IFJvdW5kZWQnLFxuICAgICAgc2hhcGVDaXJjbGU6ICdTaGFwZTogQ2lyY2xlJyxcbiAgICAgIHNoYXBlVGh1bWJuYWlsOiAnU2hhcGU6IFRodW1ibmFpbCcsXG4gICAgICBzaGFwZU5vbmU6ICdTaGFwZTogTm9uZScsXG4gICAgICBkcmFnSW1hZ2VIZXJlOiAnRHJhZyBpbWFnZSBvciB0ZXh0IGhlcmUnLFxuICAgICAgZHJvcEltYWdlOiAnRHJvcCBpbWFnZSBvciBUZXh0JyxcbiAgICAgIHNlbGVjdEZyb21GaWxlczogJ1NlbGVjdCBmcm9tIGZpbGVzJyxcbiAgICAgIG1heGltdW1GaWxlU2l6ZTogJ01heGltdW0gZmlsZSBzaXplJyxcbiAgICAgIG1heGltdW1GaWxlU2l6ZUVycm9yOiAnTWF4aW11bSBmaWxlIHNpemUgZXhjZWVkZWQuJyxcbiAgICAgIHVybDogJ0ltYWdlIFVSTCcsXG4gICAgICByZW1vdmU6ICdSZW1vdmUgSW1hZ2UnLFxuICAgICAgb3JpZ2luYWw6ICdPcmlnaW5hbCdcbiAgICB9LFxuICAgIHZpZGVvOiB7XG4gICAgICB2aWRlbzogJ1ZpZGVvJyxcbiAgICAgIHZpZGVvTGluazogJ1ZpZGVvIExpbmsnLFxuICAgICAgaW5zZXJ0OiAnSW5zZXJ0IFZpZGVvJyxcbiAgICAgIHVybDogJ1ZpZGVvIFVSTCcsXG4gICAgICBwcm92aWRlcnM6ICcoWW91VHViZSwgVmltZW8sIFZpbmUsIEluc3RhZ3JhbSwgRGFpbHlNb3Rpb24gb3IgWW91a3UpJ1xuICAgIH0sXG4gICAgbGluazoge1xuICAgICAgbGluazogJ0xpbmsnLFxuICAgICAgaW5zZXJ0OiAnSW5zZXJ0IExpbmsnLFxuICAgICAgdW5saW5rOiAnVW5saW5rJyxcbiAgICAgIGVkaXQ6ICdFZGl0JyxcbiAgICAgIHRleHRUb0Rpc3BsYXk6ICdUZXh0IHRvIGRpc3BsYXknLFxuICAgICAgdXJsOiAnVG8gd2hhdCBVUkwgc2hvdWxkIHRoaXMgbGluayBnbz8nLFxuICAgICAgb3BlbkluTmV3V2luZG93OiAnT3BlbiBpbiBuZXcgd2luZG93J1xuICAgIH0sXG4gICAgdGFibGU6IHtcbiAgICAgIHRhYmxlOiAnVGFibGUnLFxuICAgICAgYWRkUm93QWJvdmU6ICdBZGQgcm93IGFib3ZlJyxcbiAgICAgIGFkZFJvd0JlbG93OiAnQWRkIHJvdyBiZWxvdycsXG4gICAgICBhZGRDb2xMZWZ0OiAnQWRkIGNvbHVtbiBsZWZ0JyxcbiAgICAgIGFkZENvbFJpZ2h0OiAnQWRkIGNvbHVtbiByaWdodCcsXG4gICAgICBkZWxSb3c6ICdEZWxldGUgcm93JyxcbiAgICAgIGRlbENvbDogJ0RlbGV0ZSBjb2x1bW4nLFxuICAgICAgZGVsVGFibGU6ICdEZWxldGUgdGFibGUnXG4gICAgfSxcbiAgICBocjoge1xuICAgICAgaW5zZXJ0OiAnSW5zZXJ0IEhvcml6b250YWwgUnVsZSdcbiAgICB9LFxuICAgIHN0eWxlOiB7XG4gICAgICBzdHlsZTogJ1N0eWxlJyxcbiAgICAgIHA6ICdOb3JtYWwnLFxuICAgICAgYmxvY2txdW90ZTogJ1F1b3RlJyxcbiAgICAgIHByZTogJ0NvZGUnLFxuICAgICAgaDE6ICdIZWFkZXIgMScsXG4gICAgICBoMjogJ0hlYWRlciAyJyxcbiAgICAgIGgzOiAnSGVhZGVyIDMnLFxuICAgICAgaDQ6ICdIZWFkZXIgNCcsXG4gICAgICBoNTogJ0hlYWRlciA1JyxcbiAgICAgIGg2OiAnSGVhZGVyIDYnXG4gICAgfSxcbiAgICBsaXN0czoge1xuICAgICAgdW5vcmRlcmVkOiAnVW5vcmRlcmVkIGxpc3QnLFxuICAgICAgb3JkZXJlZDogJ09yZGVyZWQgbGlzdCdcbiAgICB9LFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIGhlbHA6ICdIZWxwJyxcbiAgICAgIGZ1bGxzY3JlZW46ICdGdWxsIFNjcmVlbicsXG4gICAgICBjb2RldmlldzogJ0NvZGUgVmlldydcbiAgICB9LFxuICAgIHBhcmFncmFwaDoge1xuICAgICAgcGFyYWdyYXBoOiAnUGFyYWdyYXBoJyxcbiAgICAgIG91dGRlbnQ6ICdPdXRkZW50JyxcbiAgICAgIGluZGVudDogJ0luZGVudCcsXG4gICAgICBsZWZ0OiAnQWxpZ24gbGVmdCcsXG4gICAgICBjZW50ZXI6ICdBbGlnbiBjZW50ZXInLFxuICAgICAgcmlnaHQ6ICdBbGlnbiByaWdodCcsXG4gICAgICBqdXN0aWZ5OiAnSnVzdGlmeSBmdWxsJ1xuICAgIH0sXG4gICAgY29sb3I6IHtcbiAgICAgIHJlY2VudDogJ1JlY2VudCBDb2xvcicsXG4gICAgICBtb3JlOiAnTW9yZSBDb2xvcicsXG4gICAgICBiYWNrZ3JvdW5kOiAnQmFja2dyb3VuZCBDb2xvcicsXG4gICAgICBmb3JlZ3JvdW5kOiAnRm9yZWdyb3VuZCBDb2xvcicsXG4gICAgICB0cmFuc3BhcmVudDogJ1RyYW5zcGFyZW50JyxcbiAgICAgIHNldFRyYW5zcGFyZW50OiAnU2V0IHRyYW5zcGFyZW50JyxcbiAgICAgIHJlc2V0OiAnUmVzZXQnLFxuICAgICAgcmVzZXRUb0RlZmF1bHQ6ICdSZXNldCB0byBkZWZhdWx0J1xuICAgIH0sXG4gICAgc2hvcnRjdXQ6IHtcbiAgICAgIHNob3J0Y3V0czogJ0tleWJvYXJkIHNob3J0Y3V0cycsXG4gICAgICBjbG9zZTogJ0Nsb3NlJyxcbiAgICAgIHRleHRGb3JtYXR0aW5nOiAnVGV4dCBmb3JtYXR0aW5nJyxcbiAgICAgIGFjdGlvbjogJ0FjdGlvbicsXG4gICAgICBwYXJhZ3JhcGhGb3JtYXR0aW5nOiAnUGFyYWdyYXBoIGZvcm1hdHRpbmcnLFxuICAgICAgZG9jdW1lbnRTdHlsZTogJ0RvY3VtZW50IFN0eWxlJyxcbiAgICAgIGV4dHJhS2V5czogJ0V4dHJhIGtleXMnXG4gICAgfSxcbiAgICBoZWxwOiB7XG4gICAgICAnaW5zZXJ0UGFyYWdyYXBoJzogJ0luc2VydCBQYXJhZ3JhcGgnLFxuICAgICAgJ3VuZG8nOiAnVW5kb2VzIHRoZSBsYXN0IGNvbW1hbmQnLFxuICAgICAgJ3JlZG8nOiAnUmVkb2VzIHRoZSBsYXN0IGNvbW1hbmQnLFxuICAgICAgJ3RhYic6ICdUYWInLFxuICAgICAgJ3VudGFiJzogJ1VudGFiJyxcbiAgICAgICdib2xkJzogJ1NldCBhIGJvbGQgc3R5bGUnLFxuICAgICAgJ2l0YWxpYyc6ICdTZXQgYSBpdGFsaWMgc3R5bGUnLFxuICAgICAgJ3VuZGVybGluZSc6ICdTZXQgYSB1bmRlcmxpbmUgc3R5bGUnLFxuICAgICAgJ3N0cmlrZXRocm91Z2gnOiAnU2V0IGEgc3RyaWtldGhyb3VnaCBzdHlsZScsXG4gICAgICAncmVtb3ZlRm9ybWF0JzogJ0NsZWFuIGEgc3R5bGUnLFxuICAgICAgJ2p1c3RpZnlMZWZ0JzogJ1NldCBsZWZ0IGFsaWduJyxcbiAgICAgICdqdXN0aWZ5Q2VudGVyJzogJ1NldCBjZW50ZXIgYWxpZ24nLFxuICAgICAgJ2p1c3RpZnlSaWdodCc6ICdTZXQgcmlnaHQgYWxpZ24nLFxuICAgICAgJ2p1c3RpZnlGdWxsJzogJ1NldCBmdWxsIGFsaWduJyxcbiAgICAgICdpbnNlcnRVbm9yZGVyZWRMaXN0JzogJ1RvZ2dsZSB1bm9yZGVyZWQgbGlzdCcsXG4gICAgICAnaW5zZXJ0T3JkZXJlZExpc3QnOiAnVG9nZ2xlIG9yZGVyZWQgbGlzdCcsXG4gICAgICAnb3V0ZGVudCc6ICdPdXRkZW50IG9uIGN1cnJlbnQgcGFyYWdyYXBoJyxcbiAgICAgICdpbmRlbnQnOiAnSW5kZW50IG9uIGN1cnJlbnQgcGFyYWdyYXBoJyxcbiAgICAgICdmb3JtYXRQYXJhJzogJ0NoYW5nZSBjdXJyZW50IGJsb2NrXFwncyBmb3JtYXQgYXMgYSBwYXJhZ3JhcGgoUCB0YWcpJyxcbiAgICAgICdmb3JtYXRIMSc6ICdDaGFuZ2UgY3VycmVudCBibG9ja1xcJ3MgZm9ybWF0IGFzIEgxJyxcbiAgICAgICdmb3JtYXRIMic6ICdDaGFuZ2UgY3VycmVudCBibG9ja1xcJ3MgZm9ybWF0IGFzIEgyJyxcbiAgICAgICdmb3JtYXRIMyc6ICdDaGFuZ2UgY3VycmVudCBibG9ja1xcJ3MgZm9ybWF0IGFzIEgzJyxcbiAgICAgICdmb3JtYXRINCc6ICdDaGFuZ2UgY3VycmVudCBibG9ja1xcJ3MgZm9ybWF0IGFzIEg0JyxcbiAgICAgICdmb3JtYXRINSc6ICdDaGFuZ2UgY3VycmVudCBibG9ja1xcJ3MgZm9ybWF0IGFzIEg1JyxcbiAgICAgICdmb3JtYXRINic6ICdDaGFuZ2UgY3VycmVudCBibG9ja1xcJ3MgZm9ybWF0IGFzIEg2JyxcbiAgICAgICdpbnNlcnRIb3Jpem9udGFsUnVsZSc6ICdJbnNlcnQgaG9yaXpvbnRhbCBydWxlJyxcbiAgICAgICdsaW5rRGlhbG9nLnNob3cnOiAnU2hvdyBMaW5rIERpYWxvZydcbiAgICB9LFxuICAgIGhpc3Rvcnk6IHtcbiAgICAgIHVuZG86ICdVbmRvJyxcbiAgICAgIHJlZG86ICdSZWRvJ1xuICAgIH0sXG4gICAgc3BlY2lhbENoYXI6IHtcbiAgICAgIHNwZWNpYWxDaGFyOiAnU1BFQ0lBTCBDSEFSQUNURVJTJyxcbiAgICAgIHNlbGVjdDogJ1NlbGVjdCBTcGVjaWFsIGNoYXJhY3RlcnMnXG4gICAgfVxuICB9XG59KTtcbiIsImltcG9ydCBsaXN0cyBmcm9tICcuL2xpc3RzJztcbmltcG9ydCBmdW5jIGZyb20gJy4vZnVuYyc7XG5cbmNvbnN0IEtFWV9NQVAgPSB7XG4gICdCQUNLU1BBQ0UnOiA4LFxuICAnVEFCJzogOSxcbiAgJ0VOVEVSJzogMTMsXG4gICdTUEFDRSc6IDMyLFxuICAnREVMRVRFJzogNDYsXG5cbiAgLy8gQXJyb3dcbiAgJ0xFRlQnOiAzNyxcbiAgJ1VQJzogMzgsXG4gICdSSUdIVCc6IDM5LFxuICAnRE9XTic6IDQwLFxuXG4gIC8vIE51bWJlcjogMC05XG4gICdOVU0wJzogNDgsXG4gICdOVU0xJzogNDksXG4gICdOVU0yJzogNTAsXG4gICdOVU0zJzogNTEsXG4gICdOVU00JzogNTIsXG4gICdOVU01JzogNTMsXG4gICdOVU02JzogNTQsXG4gICdOVU03JzogNTUsXG4gICdOVU04JzogNTYsXG5cbiAgLy8gQWxwaGFiZXQ6IGEtelxuICAnQic6IDY2LFxuICAnRSc6IDY5LFxuICAnSSc6IDczLFxuICAnSic6IDc0LFxuICAnSyc6IDc1LFxuICAnTCc6IDc2LFxuICAnUic6IDgyLFxuICAnUyc6IDgzLFxuICAnVSc6IDg1LFxuICAnVic6IDg2LFxuICAnWSc6IDg5LFxuICAnWic6IDkwLFxuXG4gICdTTEFTSCc6IDE5MSxcbiAgJ0xFRlRCUkFDS0VUJzogMjE5LFxuICAnQkFDS1NMQVNIJzogMjIwLFxuICAnUklHSFRCUkFDS0VUJzogMjIxXG59O1xuXG4vKipcbiAqIEBjbGFzcyBjb3JlLmtleVxuICpcbiAqIE9iamVjdCBmb3Iga2V5Y29kZXMuXG4gKlxuICogQHNpbmdsZXRvblxuICogQGFsdGVybmF0ZUNsYXNzTmFtZSBrZXlcbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAvKipcbiAgICogQG1ldGhvZCBpc0VkaXRcbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGtleUNvZGVcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG4gIGlzRWRpdDogKGtleUNvZGUpID0+IHtcbiAgICByZXR1cm4gbGlzdHMuY29udGFpbnMoW1xuICAgICAgS0VZX01BUC5CQUNLU1BBQ0UsXG4gICAgICBLRVlfTUFQLlRBQixcbiAgICAgIEtFWV9NQVAuRU5URVIsXG4gICAgICBLRVlfTUFQLlNQQUNFLFxuICAgICAgS0VZX01BUC5ERUxFVEVcbiAgICBdLCBrZXlDb2RlKTtcbiAgfSxcbiAgLyoqXG4gICAqIEBtZXRob2QgaXNNb3ZlXG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBrZXlDb2RlXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuICBpc01vdmU6IChrZXlDb2RlKSA9PiB7XG4gICAgcmV0dXJuIGxpc3RzLmNvbnRhaW5zKFtcbiAgICAgIEtFWV9NQVAuTEVGVCxcbiAgICAgIEtFWV9NQVAuVVAsXG4gICAgICBLRVlfTUFQLlJJR0hULFxuICAgICAgS0VZX01BUC5ET1dOXG4gICAgXSwga2V5Q29kZSk7XG4gIH0sXG4gIC8qKlxuICAgKiBAcHJvcGVydHkge09iamVjdH0gbmFtZUZyb21Db2RlXG4gICAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBuYW1lRnJvbUNvZGUuOCBcIkJBQ0tTUEFDRVwiXG4gICAqL1xuICBuYW1lRnJvbUNvZGU6IGZ1bmMuaW52ZXJ0T2JqZWN0KEtFWV9NQVApLFxuICBjb2RlOiBLRVlfTUFQXG59O1xuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBlbnYgZnJvbSAnLi9lbnYnO1xuaW1wb3J0IGZ1bmMgZnJvbSAnLi9mdW5jJztcbmltcG9ydCBsaXN0cyBmcm9tICcuL2xpc3RzJztcbmltcG9ydCBkb20gZnJvbSAnLi9kb20nO1xuXG4vKipcbiAqIHJldHVybiBib3VuZGFyeVBvaW50IGZyb20gVGV4dFJhbmdlLCBpbnNwaXJlZCBieSBBbmR5IE5hJ3MgSHVza3lSYW5nZS5qc1xuICpcbiAqIEBwYXJhbSB7VGV4dFJhbmdlfSB0ZXh0UmFuZ2VcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNTdGFydFxuICogQHJldHVybiB7Qm91bmRhcnlQb2ludH1cbiAqXG4gKiBAc2VlIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9tczUzNTg3Mih2PXZzLjg1KS5hc3B4XG4gKi9cbmZ1bmN0aW9uIHRleHRSYW5nZVRvUG9pbnQodGV4dFJhbmdlLCBpc1N0YXJ0KSB7XG4gIGxldCBjb250YWluZXIgPSB0ZXh0UmFuZ2UucGFyZW50RWxlbWVudCgpO1xuICBsZXQgb2Zmc2V0O1xuXG4gIGNvbnN0IHRlc3RlciA9IGRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7XG4gIGxldCBwcmV2Q29udGFpbmVyO1xuICBjb25zdCBjaGlsZE5vZGVzID0gbGlzdHMuZnJvbShjb250YWluZXIuY2hpbGROb2Rlcyk7XG4gIGZvciAob2Zmc2V0ID0gMDsgb2Zmc2V0IDwgY2hpbGROb2Rlcy5sZW5ndGg7IG9mZnNldCsrKSB7XG4gICAgaWYgKGRvbS5pc1RleHQoY2hpbGROb2Rlc1tvZmZzZXRdKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHRlc3Rlci5tb3ZlVG9FbGVtZW50VGV4dChjaGlsZE5vZGVzW29mZnNldF0pO1xuICAgIGlmICh0ZXN0ZXIuY29tcGFyZUVuZFBvaW50cygnU3RhcnRUb1N0YXJ0JywgdGV4dFJhbmdlKSA+PSAwKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgcHJldkNvbnRhaW5lciA9IGNoaWxkTm9kZXNbb2Zmc2V0XTtcbiAgfVxuXG4gIGlmIChvZmZzZXQgIT09IDAgJiYgZG9tLmlzVGV4dChjaGlsZE5vZGVzW29mZnNldCAtIDFdKSkge1xuICAgIGNvbnN0IHRleHRSYW5nZVN0YXJ0ID0gZG9jdW1lbnQuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKTtcbiAgICBsZXQgY3VyVGV4dE5vZGUgPSBudWxsO1xuICAgIHRleHRSYW5nZVN0YXJ0Lm1vdmVUb0VsZW1lbnRUZXh0KHByZXZDb250YWluZXIgfHwgY29udGFpbmVyKTtcbiAgICB0ZXh0UmFuZ2VTdGFydC5jb2xsYXBzZSghcHJldkNvbnRhaW5lcik7XG4gICAgY3VyVGV4dE5vZGUgPSBwcmV2Q29udGFpbmVyID8gcHJldkNvbnRhaW5lci5uZXh0U2libGluZyA6IGNvbnRhaW5lci5maXJzdENoaWxkO1xuXG4gICAgY29uc3QgcG9pbnRUZXN0ZXIgPSB0ZXh0UmFuZ2UuZHVwbGljYXRlKCk7XG4gICAgcG9pbnRUZXN0ZXIuc2V0RW5kUG9pbnQoJ1N0YXJ0VG9TdGFydCcsIHRleHRSYW5nZVN0YXJ0KTtcbiAgICBsZXQgdGV4dENvdW50ID0gcG9pbnRUZXN0ZXIudGV4dC5yZXBsYWNlKC9bXFxyXFxuXS9nLCAnJykubGVuZ3RoO1xuXG4gICAgd2hpbGUgKHRleHRDb3VudCA+IGN1clRleHROb2RlLm5vZGVWYWx1ZS5sZW5ndGggJiYgY3VyVGV4dE5vZGUubmV4dFNpYmxpbmcpIHtcbiAgICAgIHRleHRDb3VudCAtPSBjdXJUZXh0Tm9kZS5ub2RlVmFsdWUubGVuZ3RoO1xuICAgICAgY3VyVGV4dE5vZGUgPSBjdXJUZXh0Tm9kZS5uZXh0U2libGluZztcbiAgICB9XG5cbiAgICAvLyBbd29ya2Fyb3VuZF0gZW5mb3JjZSBJRSB0byByZS1yZWZlcmVuY2UgY3VyVGV4dE5vZGUsIGhhY2tcbiAgICBjb25zdCBkdW1teSA9IGN1clRleHROb2RlLm5vZGVWYWx1ZTsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuXG4gICAgaWYgKGlzU3RhcnQgJiYgY3VyVGV4dE5vZGUubmV4dFNpYmxpbmcgJiYgZG9tLmlzVGV4dChjdXJUZXh0Tm9kZS5uZXh0U2libGluZykgJiZcbiAgICAgIHRleHRDb3VudCA9PT0gY3VyVGV4dE5vZGUubm9kZVZhbHVlLmxlbmd0aCkge1xuICAgICAgdGV4dENvdW50IC09IGN1clRleHROb2RlLm5vZGVWYWx1ZS5sZW5ndGg7XG4gICAgICBjdXJUZXh0Tm9kZSA9IGN1clRleHROb2RlLm5leHRTaWJsaW5nO1xuICAgIH1cblxuICAgIGNvbnRhaW5lciA9IGN1clRleHROb2RlO1xuICAgIG9mZnNldCA9IHRleHRDb3VudDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgY29udDogY29udGFpbmVyLFxuICAgIG9mZnNldDogb2Zmc2V0XG4gIH07XG59XG5cbi8qKlxuICogcmV0dXJuIFRleHRSYW5nZSBmcm9tIGJvdW5kYXJ5IHBvaW50IChpbnNwaXJlZCBieSBnb29nbGUgY2xvc3VyZS1saWJyYXJ5KVxuICogQHBhcmFtIHtCb3VuZGFyeVBvaW50fSBwb2ludFxuICogQHJldHVybiB7VGV4dFJhbmdlfVxuICovXG5mdW5jdGlvbiBwb2ludFRvVGV4dFJhbmdlKHBvaW50KSB7XG4gIGNvbnN0IHRleHRSYW5nZUluZm8gPSBmdW5jdGlvbihjb250YWluZXIsIG9mZnNldCkge1xuICAgIGxldCBub2RlLCBpc0NvbGxhcHNlVG9TdGFydDtcblxuICAgIGlmIChkb20uaXNUZXh0KGNvbnRhaW5lcikpIHtcbiAgICAgIGNvbnN0IHByZXZUZXh0Tm9kZXMgPSBkb20ubGlzdFByZXYoY29udGFpbmVyLCBmdW5jLm5vdChkb20uaXNUZXh0KSk7XG4gICAgICBjb25zdCBwcmV2Q29udGFpbmVyID0gbGlzdHMubGFzdChwcmV2VGV4dE5vZGVzKS5wcmV2aW91c1NpYmxpbmc7XG4gICAgICBub2RlID0gcHJldkNvbnRhaW5lciB8fCBjb250YWluZXIucGFyZW50Tm9kZTtcbiAgICAgIG9mZnNldCArPSBsaXN0cy5zdW0obGlzdHMudGFpbChwcmV2VGV4dE5vZGVzKSwgZG9tLm5vZGVMZW5ndGgpO1xuICAgICAgaXNDb2xsYXBzZVRvU3RhcnQgPSAhcHJldkNvbnRhaW5lcjtcbiAgICB9IGVsc2Uge1xuICAgICAgbm9kZSA9IGNvbnRhaW5lci5jaGlsZE5vZGVzW29mZnNldF0gfHwgY29udGFpbmVyO1xuICAgICAgaWYgKGRvbS5pc1RleHQobm9kZSkpIHtcbiAgICAgICAgcmV0dXJuIHRleHRSYW5nZUluZm8obm9kZSwgMCk7XG4gICAgICB9XG5cbiAgICAgIG9mZnNldCA9IDA7XG4gICAgICBpc0NvbGxhcHNlVG9TdGFydCA9IGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBub2RlOiBub2RlLFxuICAgICAgY29sbGFwc2VUb1N0YXJ0OiBpc0NvbGxhcHNlVG9TdGFydCxcbiAgICAgIG9mZnNldDogb2Zmc2V0XG4gICAgfTtcbiAgfTtcblxuICBjb25zdCB0ZXh0UmFuZ2UgPSBkb2N1bWVudC5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpO1xuICBjb25zdCBpbmZvID0gdGV4dFJhbmdlSW5mbyhwb2ludC5ub2RlLCBwb2ludC5vZmZzZXQpO1xuXG4gIHRleHRSYW5nZS5tb3ZlVG9FbGVtZW50VGV4dChpbmZvLm5vZGUpO1xuICB0ZXh0UmFuZ2UuY29sbGFwc2UoaW5mby5jb2xsYXBzZVRvU3RhcnQpO1xuICB0ZXh0UmFuZ2UubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLCBpbmZvLm9mZnNldCk7XG4gIHJldHVybiB0ZXh0UmFuZ2U7XG59XG5cbi8qKlxuICAgKiBXcmFwcGVkIFJhbmdlXG4gICAqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge05vZGV9IHNjIC0gc3RhcnQgY29udGFpbmVyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBzbyAtIHN0YXJ0IG9mZnNldFxuICAgKiBAcGFyYW0ge05vZGV9IGVjIC0gZW5kIGNvbnRhaW5lclxuICAgKiBAcGFyYW0ge051bWJlcn0gZW8gLSBlbmQgb2Zmc2V0XG4gICAqL1xuY2xhc3MgV3JhcHBlZFJhbmdlIHtcbiAgY29uc3RydWN0b3Ioc2MsIHNvLCBlYywgZW8pIHtcbiAgICB0aGlzLnNjID0gc2M7XG4gICAgdGhpcy5zbyA9IHNvO1xuICAgIHRoaXMuZWMgPSBlYztcbiAgICB0aGlzLmVvID0gZW87XG5cbiAgICAvLyBpc09uRWRpdGFibGU6IGp1ZGdlIHdoZXRoZXIgcmFuZ2UgaXMgb24gZWRpdGFibGUgb3Igbm90XG4gICAgdGhpcy5pc09uRWRpdGFibGUgPSB0aGlzLm1ha2VJc09uKGRvbS5pc0VkaXRhYmxlKTtcbiAgICAvLyBpc09uTGlzdDoganVkZ2Ugd2hldGhlciByYW5nZSBpcyBvbiBsaXN0IG5vZGUgb3Igbm90XG4gICAgdGhpcy5pc09uTGlzdCA9IHRoaXMubWFrZUlzT24oZG9tLmlzTGlzdCk7XG4gICAgLy8gaXNPbkFuY2hvcjoganVkZ2Ugd2hldGhlciByYW5nZSBpcyBvbiBhbmNob3Igbm9kZSBvciBub3RcbiAgICB0aGlzLmlzT25BbmNob3IgPSB0aGlzLm1ha2VJc09uKGRvbS5pc0FuY2hvcik7XG4gICAgLy8gaXNPbkNlbGw6IGp1ZGdlIHdoZXRoZXIgcmFuZ2UgaXMgb24gY2VsbCBub2RlIG9yIG5vdFxuICAgIHRoaXMuaXNPbkNlbGwgPSB0aGlzLm1ha2VJc09uKGRvbS5pc0NlbGwpO1xuICAgIC8vIGlzT25EYXRhOiBqdWRnZSB3aGV0aGVyIHJhbmdlIGlzIG9uIGRhdGEgbm9kZSBvciBub3RcbiAgICB0aGlzLmlzT25EYXRhID0gdGhpcy5tYWtlSXNPbihkb20uaXNEYXRhKTtcbiAgfVxuXG4gIC8vIG5hdGl2ZVJhbmdlOiBnZXQgbmF0aXZlUmFuZ2UgZnJvbSBzYywgc28sIGVjLCBlb1xuICBuYXRpdmVSYW5nZSgpIHtcbiAgICBpZiAoZW52LmlzVzNDUmFuZ2VTdXBwb3J0KSB7XG4gICAgICBjb25zdCB3M2NSYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICB3M2NSYW5nZS5zZXRTdGFydCh0aGlzLnNjLCB0aGlzLnNvKTtcbiAgICAgIHczY1JhbmdlLnNldEVuZCh0aGlzLmVjLCB0aGlzLmVvKTtcblxuICAgICAgcmV0dXJuIHczY1JhbmdlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0ZXh0UmFuZ2UgPSBwb2ludFRvVGV4dFJhbmdlKHtcbiAgICAgICAgbm9kZTogdGhpcy5zYyxcbiAgICAgICAgb2Zmc2V0OiB0aGlzLnNvXG4gICAgICB9KTtcblxuICAgICAgdGV4dFJhbmdlLnNldEVuZFBvaW50KCdFbmRUb0VuZCcsIHBvaW50VG9UZXh0UmFuZ2Uoe1xuICAgICAgICBub2RlOiB0aGlzLmVjLFxuICAgICAgICBvZmZzZXQ6IHRoaXMuZW9cbiAgICAgIH0pKTtcblxuICAgICAgcmV0dXJuIHRleHRSYW5nZTtcbiAgICB9XG4gIH1cblxuICBnZXRQb2ludHMoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNjOiB0aGlzLnNjLFxuICAgICAgc286IHRoaXMuc28sXG4gICAgICBlYzogdGhpcy5lYyxcbiAgICAgIGVvOiB0aGlzLmVvXG4gICAgfTtcbiAgfVxuXG4gIGdldFN0YXJ0UG9pbnQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5vZGU6IHRoaXMuc2MsXG4gICAgICBvZmZzZXQ6IHRoaXMuc29cbiAgICB9O1xuICB9XG5cbiAgZ2V0RW5kUG9pbnQoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5vZGU6IHRoaXMuZWMsXG4gICAgICBvZmZzZXQ6IHRoaXMuZW9cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIHNlbGVjdCB1cGRhdGUgdmlzaWJsZSByYW5nZVxuICAgKi9cbiAgc2VsZWN0KCkge1xuICAgIGNvbnN0IG5hdGl2ZVJuZyA9IHRoaXMubmF0aXZlUmFuZ2UoKTtcbiAgICBpZiAoZW52LmlzVzNDUmFuZ2VTdXBwb3J0KSB7XG4gICAgICBjb25zdCBzZWxlY3Rpb24gPSBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKTtcbiAgICAgIGlmIChzZWxlY3Rpb24ucmFuZ2VDb3VudCA+IDApIHtcbiAgICAgICAgc2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpO1xuICAgICAgfVxuICAgICAgc2VsZWN0aW9uLmFkZFJhbmdlKG5hdGl2ZVJuZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5hdGl2ZVJuZy5zZWxlY3QoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBNb3ZlcyB0aGUgc2Nyb2xsYmFyIHRvIHN0YXJ0IGNvbnRhaW5lcihzYykgb2YgY3VycmVudCByYW5nZVxuICAgKlxuICAgKiBAcmV0dXJuIHtXcmFwcGVkUmFuZ2V9XG4gICAqL1xuICBzY3JvbGxJbnRvVmlldyhjb250YWluZXIpIHtcbiAgICBjb25zdCBoZWlnaHQgPSAkKGNvbnRhaW5lcikuaGVpZ2h0KCk7XG4gICAgaWYgKGNvbnRhaW5lci5zY3JvbGxUb3AgKyBoZWlnaHQgPCB0aGlzLnNjLm9mZnNldFRvcCkge1xuICAgICAgY29udGFpbmVyLnNjcm9sbFRvcCArPSBNYXRoLmFicyhjb250YWluZXIuc2Nyb2xsVG9wICsgaGVpZ2h0IC0gdGhpcy5zYy5vZmZzZXRUb3ApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge1dyYXBwZWRSYW5nZX1cbiAgICovXG4gIG5vcm1hbGl6ZSgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0JvdW5kYXJ5UG9pbnR9IHBvaW50XG4gICAgICogQHBhcmFtIHtCb29sZWFufSBpc0xlZnRUb1JpZ2h0XG4gICAgICogQHJldHVybiB7Qm91bmRhcnlQb2ludH1cbiAgICAgKi9cbiAgICBjb25zdCBnZXRWaXNpYmxlUG9pbnQgPSBmdW5jdGlvbihwb2ludCwgaXNMZWZ0VG9SaWdodCkge1xuICAgICAgaWYgKChkb20uaXNWaXNpYmxlUG9pbnQocG9pbnQpICYmICFkb20uaXNFZGdlUG9pbnQocG9pbnQpKSB8fFxuICAgICAgICAgIChkb20uaXNWaXNpYmxlUG9pbnQocG9pbnQpICYmIGRvbS5pc1JpZ2h0RWRnZVBvaW50KHBvaW50KSAmJiAhaXNMZWZ0VG9SaWdodCkgfHxcbiAgICAgICAgICAoZG9tLmlzVmlzaWJsZVBvaW50KHBvaW50KSAmJiBkb20uaXNMZWZ0RWRnZVBvaW50KHBvaW50KSAmJiBpc0xlZnRUb1JpZ2h0KSB8fFxuICAgICAgICAgIChkb20uaXNWaXNpYmxlUG9pbnQocG9pbnQpICYmIGRvbS5pc0Jsb2NrKHBvaW50Lm5vZGUpICYmIGRvbS5pc0VtcHR5KHBvaW50Lm5vZGUpKSkge1xuICAgICAgICByZXR1cm4gcG9pbnQ7XG4gICAgICB9XG5cbiAgICAgIC8vIHBvaW50IG9uIGJsb2NrJ3MgZWRnZVxuICAgICAgY29uc3QgYmxvY2sgPSBkb20uYW5jZXN0b3IocG9pbnQubm9kZSwgZG9tLmlzQmxvY2spO1xuICAgICAgaWYgKCgoZG9tLmlzTGVmdEVkZ2VQb2ludE9mKHBvaW50LCBibG9jaykgfHwgZG9tLmlzVm9pZChkb20ucHJldlBvaW50KHBvaW50KS5ub2RlKSkgJiYgIWlzTGVmdFRvUmlnaHQpIHx8XG4gICAgICAgICAgKChkb20uaXNSaWdodEVkZ2VQb2ludE9mKHBvaW50LCBibG9jaykgfHwgZG9tLmlzVm9pZChkb20ubmV4dFBvaW50KHBvaW50KS5ub2RlKSkgJiYgaXNMZWZ0VG9SaWdodCkpIHtcbiAgICAgICAgLy8gcmV0dXJucyBwb2ludCBhbHJlYWR5IG9uIHZpc2libGUgcG9pbnRcbiAgICAgICAgaWYgKGRvbS5pc1Zpc2libGVQb2ludChwb2ludCkpIHtcbiAgICAgICAgICByZXR1cm4gcG9pbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV2ZXJzZSBkaXJlY3Rpb25cbiAgICAgICAgaXNMZWZ0VG9SaWdodCA9ICFpc0xlZnRUb1JpZ2h0O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBuZXh0UG9pbnQgPSBpc0xlZnRUb1JpZ2h0ID8gZG9tLm5leHRQb2ludFVudGlsKGRvbS5uZXh0UG9pbnQocG9pbnQpLCBkb20uaXNWaXNpYmxlUG9pbnQpXG4gICAgICAgIDogZG9tLnByZXZQb2ludFVudGlsKGRvbS5wcmV2UG9pbnQocG9pbnQpLCBkb20uaXNWaXNpYmxlUG9pbnQpO1xuICAgICAgcmV0dXJuIG5leHRQb2ludCB8fCBwb2ludDtcbiAgICB9O1xuXG4gICAgY29uc3QgZW5kUG9pbnQgPSBnZXRWaXNpYmxlUG9pbnQodGhpcy5nZXRFbmRQb2ludCgpLCBmYWxzZSk7XG4gICAgY29uc3Qgc3RhcnRQb2ludCA9IHRoaXMuaXNDb2xsYXBzZWQoKSA/IGVuZFBvaW50IDogZ2V0VmlzaWJsZVBvaW50KHRoaXMuZ2V0U3RhcnRQb2ludCgpLCB0cnVlKTtcblxuICAgIHJldHVybiBuZXcgV3JhcHBlZFJhbmdlKFxuICAgICAgc3RhcnRQb2ludC5ub2RlLFxuICAgICAgc3RhcnRQb2ludC5vZmZzZXQsXG4gICAgICBlbmRQb2ludC5ub2RlLFxuICAgICAgZW5kUG9pbnQub2Zmc2V0XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiByZXR1cm5zIG1hdGNoZWQgbm9kZXMgb24gcmFuZ2VcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3ByZWRdIC0gcHJlZGljYXRlIGZ1bmN0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5pbmNsdWRlQW5jZXN0b3JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZnVsbHlDb250YWluc11cbiAgICogQHJldHVybiB7Tm9kZVtdfVxuICAgKi9cbiAgbm9kZXMocHJlZCwgb3B0aW9ucykge1xuICAgIHByZWQgPSBwcmVkIHx8IGZ1bmMub2s7XG5cbiAgICBjb25zdCBpbmNsdWRlQW5jZXN0b3IgPSBvcHRpb25zICYmIG9wdGlvbnMuaW5jbHVkZUFuY2VzdG9yO1xuICAgIGNvbnN0IGZ1bGx5Q29udGFpbnMgPSBvcHRpb25zICYmIG9wdGlvbnMuZnVsbHlDb250YWlucztcblxuICAgIC8vIFRPRE8gY29tcGFyZSBwb2ludHMgYW5kIHNvcnRcbiAgICBjb25zdCBzdGFydFBvaW50ID0gdGhpcy5nZXRTdGFydFBvaW50KCk7XG4gICAgY29uc3QgZW5kUG9pbnQgPSB0aGlzLmdldEVuZFBvaW50KCk7XG5cbiAgICBjb25zdCBub2RlcyA9IFtdO1xuICAgIGNvbnN0IGxlZnRFZGdlTm9kZXMgPSBbXTtcblxuICAgIGRvbS53YWxrUG9pbnQoc3RhcnRQb2ludCwgZW5kUG9pbnQsIGZ1bmN0aW9uKHBvaW50KSB7XG4gICAgICBpZiAoZG9tLmlzRWRpdGFibGUocG9pbnQubm9kZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBsZXQgbm9kZTtcbiAgICAgIGlmIChmdWxseUNvbnRhaW5zKSB7XG4gICAgICAgIGlmIChkb20uaXNMZWZ0RWRnZVBvaW50KHBvaW50KSkge1xuICAgICAgICAgIGxlZnRFZGdlTm9kZXMucHVzaChwb2ludC5ub2RlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZG9tLmlzUmlnaHRFZGdlUG9pbnQocG9pbnQpICYmIGxpc3RzLmNvbnRhaW5zKGxlZnRFZGdlTm9kZXMsIHBvaW50Lm5vZGUpKSB7XG4gICAgICAgICAgbm9kZSA9IHBvaW50Lm5vZGU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaW5jbHVkZUFuY2VzdG9yKSB7XG4gICAgICAgIG5vZGUgPSBkb20uYW5jZXN0b3IocG9pbnQubm9kZSwgcHJlZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlID0gcG9pbnQubm9kZTtcbiAgICAgIH1cblxuICAgICAgaWYgKG5vZGUgJiYgcHJlZChub2RlKSkge1xuICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgfVxuICAgIH0sIHRydWUpO1xuXG4gICAgcmV0dXJuIGxpc3RzLnVuaXF1ZShub2Rlcyk7XG4gIH1cblxuICAvKipcbiAgICogcmV0dXJucyBjb21tb25BbmNlc3RvciBvZiByYW5nZVxuICAgKiBAcmV0dXJuIHtFbGVtZW50fSAtIGNvbW1vbkFuY2VzdG9yXG4gICAqL1xuICBjb21tb25BbmNlc3RvcigpIHtcbiAgICByZXR1cm4gZG9tLmNvbW1vbkFuY2VzdG9yKHRoaXMuc2MsIHRoaXMuZWMpO1xuICB9XG5cbiAgLyoqXG4gICAqIHJldHVybnMgZXhwYW5kZWQgcmFuZ2UgYnkgcHJlZFxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkIC0gcHJlZGljYXRlIGZ1bmN0aW9uXG4gICAqIEByZXR1cm4ge1dyYXBwZWRSYW5nZX1cbiAgICovXG4gIGV4cGFuZChwcmVkKSB7XG4gICAgY29uc3Qgc3RhcnRBbmNlc3RvciA9IGRvbS5hbmNlc3Rvcih0aGlzLnNjLCBwcmVkKTtcbiAgICBjb25zdCBlbmRBbmNlc3RvciA9IGRvbS5hbmNlc3Rvcih0aGlzLmVjLCBwcmVkKTtcblxuICAgIGlmICghc3RhcnRBbmNlc3RvciAmJiAhZW5kQW5jZXN0b3IpIHtcbiAgICAgIHJldHVybiBuZXcgV3JhcHBlZFJhbmdlKHRoaXMuc2MsIHRoaXMuc28sIHRoaXMuZWMsIHRoaXMuZW8pO1xuICAgIH1cblxuICAgIGNvbnN0IGJvdW5kYXJ5UG9pbnRzID0gdGhpcy5nZXRQb2ludHMoKTtcblxuICAgIGlmIChzdGFydEFuY2VzdG9yKSB7XG4gICAgICBib3VuZGFyeVBvaW50cy5zYyA9IHN0YXJ0QW5jZXN0b3I7XG4gICAgICBib3VuZGFyeVBvaW50cy5zbyA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGVuZEFuY2VzdG9yKSB7XG4gICAgICBib3VuZGFyeVBvaW50cy5lYyA9IGVuZEFuY2VzdG9yO1xuICAgICAgYm91bmRhcnlQb2ludHMuZW8gPSBkb20ubm9kZUxlbmd0aChlbmRBbmNlc3Rvcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBXcmFwcGVkUmFuZ2UoXG4gICAgICBib3VuZGFyeVBvaW50cy5zYyxcbiAgICAgIGJvdW5kYXJ5UG9pbnRzLnNvLFxuICAgICAgYm91bmRhcnlQb2ludHMuZWMsXG4gICAgICBib3VuZGFyeVBvaW50cy5lb1xuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtCb29sZWFufSBpc0NvbGxhcHNlVG9TdGFydFxuICAgKiBAcmV0dXJuIHtXcmFwcGVkUmFuZ2V9XG4gICAqL1xuICBjb2xsYXBzZShpc0NvbGxhcHNlVG9TdGFydCkge1xuICAgIGlmIChpc0NvbGxhcHNlVG9TdGFydCkge1xuICAgICAgcmV0dXJuIG5ldyBXcmFwcGVkUmFuZ2UodGhpcy5zYywgdGhpcy5zbywgdGhpcy5zYywgdGhpcy5zbyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgV3JhcHBlZFJhbmdlKHRoaXMuZWMsIHRoaXMuZW8sIHRoaXMuZWMsIHRoaXMuZW8pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBzcGxpdFRleHQgb24gcmFuZ2VcbiAgICovXG4gIHNwbGl0VGV4dCgpIHtcbiAgICBjb25zdCBpc1NhbWVDb250YWluZXIgPSB0aGlzLnNjID09PSB0aGlzLmVjO1xuICAgIGNvbnN0IGJvdW5kYXJ5UG9pbnRzID0gdGhpcy5nZXRQb2ludHMoKTtcblxuICAgIGlmIChkb20uaXNUZXh0KHRoaXMuZWMpICYmICFkb20uaXNFZGdlUG9pbnQodGhpcy5nZXRFbmRQb2ludCgpKSkge1xuICAgICAgdGhpcy5lYy5zcGxpdFRleHQodGhpcy5lbyk7XG4gICAgfVxuXG4gICAgaWYgKGRvbS5pc1RleHQodGhpcy5zYykgJiYgIWRvbS5pc0VkZ2VQb2ludCh0aGlzLmdldFN0YXJ0UG9pbnQoKSkpIHtcbiAgICAgIGJvdW5kYXJ5UG9pbnRzLnNjID0gdGhpcy5zYy5zcGxpdFRleHQodGhpcy5zbyk7XG4gICAgICBib3VuZGFyeVBvaW50cy5zbyA9IDA7XG5cbiAgICAgIGlmIChpc1NhbWVDb250YWluZXIpIHtcbiAgICAgICAgYm91bmRhcnlQb2ludHMuZWMgPSBib3VuZGFyeVBvaW50cy5zYztcbiAgICAgICAgYm91bmRhcnlQb2ludHMuZW8gPSB0aGlzLmVvIC0gdGhpcy5zbztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFdyYXBwZWRSYW5nZShcbiAgICAgIGJvdW5kYXJ5UG9pbnRzLnNjLFxuICAgICAgYm91bmRhcnlQb2ludHMuc28sXG4gICAgICBib3VuZGFyeVBvaW50cy5lYyxcbiAgICAgIGJvdW5kYXJ5UG9pbnRzLmVvXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBkZWxldGUgY29udGVudHMgb24gcmFuZ2VcbiAgICogQHJldHVybiB7V3JhcHBlZFJhbmdlfVxuICAgKi9cbiAgZGVsZXRlQ29udGVudHMoKSB7XG4gICAgaWYgKHRoaXMuaXNDb2xsYXBzZWQoKSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgY29uc3Qgcm5nID0gdGhpcy5zcGxpdFRleHQoKTtcbiAgICBjb25zdCBub2RlcyA9IHJuZy5ub2RlcyhudWxsLCB7XG4gICAgICBmdWxseUNvbnRhaW5zOiB0cnVlXG4gICAgfSk7XG5cbiAgICAvLyBmaW5kIG5ldyBjdXJzb3IgcG9pbnRcbiAgICBjb25zdCBwb2ludCA9IGRvbS5wcmV2UG9pbnRVbnRpbChybmcuZ2V0U3RhcnRQb2ludCgpLCBmdW5jdGlvbihwb2ludCkge1xuICAgICAgcmV0dXJuICFsaXN0cy5jb250YWlucyhub2RlcywgcG9pbnQubm9kZSk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBlbXB0eVBhcmVudHMgPSBbXTtcbiAgICAkLmVhY2gobm9kZXMsIGZ1bmN0aW9uKGlkeCwgbm9kZSkge1xuICAgICAgLy8gZmluZCBlbXB0eSBwYXJlbnRzXG4gICAgICBjb25zdCBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICBpZiAocG9pbnQubm9kZSAhPT0gcGFyZW50ICYmIGRvbS5ub2RlTGVuZ3RoKHBhcmVudCkgPT09IDEpIHtcbiAgICAgICAgZW1wdHlQYXJlbnRzLnB1c2gocGFyZW50KTtcbiAgICAgIH1cbiAgICAgIGRvbS5yZW1vdmUobm9kZSwgZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgLy8gcmVtb3ZlIGVtcHR5IHBhcmVudHNcbiAgICAkLmVhY2goZW1wdHlQYXJlbnRzLCBmdW5jdGlvbihpZHgsIG5vZGUpIHtcbiAgICAgIGRvbS5yZW1vdmUobm9kZSwgZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIG5ldyBXcmFwcGVkUmFuZ2UoXG4gICAgICBwb2ludC5ub2RlLFxuICAgICAgcG9pbnQub2Zmc2V0LFxuICAgICAgcG9pbnQubm9kZSxcbiAgICAgIHBvaW50Lm9mZnNldFxuICAgICkubm9ybWFsaXplKCk7XG4gIH1cblxuICAvKipcbiAgICogbWFrZUlzT246IHJldHVybiBpc09uKHByZWQpIGZ1bmN0aW9uXG4gICAqL1xuICBtYWtlSXNPbihwcmVkKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgY29uc3QgYW5jZXN0b3IgPSBkb20uYW5jZXN0b3IodGhpcy5zYywgcHJlZCk7XG4gICAgICByZXR1cm4gISFhbmNlc3RvciAmJiAoYW5jZXN0b3IgPT09IGRvbS5hbmNlc3Rvcih0aGlzLmVjLCBwcmVkKSk7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuICBpc0xlZnRFZGdlT2YocHJlZCkge1xuICAgIGlmICghZG9tLmlzTGVmdEVkZ2VQb2ludCh0aGlzLmdldFN0YXJ0UG9pbnQoKSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBub2RlID0gZG9tLmFuY2VzdG9yKHRoaXMuc2MsIHByZWQpO1xuICAgIHJldHVybiBub2RlICYmIGRvbS5pc0xlZnRFZGdlT2YodGhpcy5zYywgbm9kZSk7XG4gIH1cblxuICAvKipcbiAgICogcmV0dXJucyB3aGV0aGVyIHJhbmdlIHdhcyBjb2xsYXBzZWQgb3Igbm90XG4gICAqL1xuICBpc0NvbGxhcHNlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zYyA9PT0gdGhpcy5lYyAmJiB0aGlzLnNvID09PSB0aGlzLmVvO1xuICB9XG5cbiAgLyoqXG4gICAqIHdyYXAgaW5saW5lIG5vZGVzIHdoaWNoIGNoaWxkcmVuIG9mIGJvZHkgd2l0aCBwYXJhZ3JhcGhcbiAgICpcbiAgICogQHJldHVybiB7V3JhcHBlZFJhbmdlfVxuICAgKi9cbiAgd3JhcEJvZHlJbmxpbmVXaXRoUGFyYSgpIHtcbiAgICBpZiAoZG9tLmlzQm9keUNvbnRhaW5lcih0aGlzLnNjKSAmJiBkb20uaXNFbXB0eSh0aGlzLnNjKSkge1xuICAgICAgdGhpcy5zYy5pbm5lckhUTUwgPSBkb20uZW1wdHlQYXJhO1xuICAgICAgcmV0dXJuIG5ldyBXcmFwcGVkUmFuZ2UodGhpcy5zYy5maXJzdENoaWxkLCAwLCB0aGlzLnNjLmZpcnN0Q2hpbGQsIDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFt3b3JrYXJvdW5kXSBmaXJlZm94IG9mdGVuIGNyZWF0ZSByYW5nZSBvbiBub3QgdmlzaWJsZSBwb2ludC4gc28gbm9ybWFsaXplIGhlcmUuXG4gICAgICogIC0gZmlyZWZveDogfDxwPnRleHQ8L3A+fFxuICAgICAqICAtIGNocm9tZTogPHA+fHRleHR8PC9wPlxuICAgICAqL1xuICAgIGNvbnN0IHJuZyA9IHRoaXMubm9ybWFsaXplKCk7XG4gICAgaWYgKGRvbS5pc1BhcmFJbmxpbmUodGhpcy5zYykgfHwgZG9tLmlzUGFyYSh0aGlzLnNjKSkge1xuICAgICAgcmV0dXJuIHJuZztcbiAgICB9XG5cbiAgICAvLyBmaW5kIGlubGluZSB0b3AgYW5jZXN0b3JcbiAgICBsZXQgdG9wQW5jZXN0b3I7XG4gICAgaWYgKGRvbS5pc0lubGluZShybmcuc2MpKSB7XG4gICAgICBjb25zdCBhbmNlc3RvcnMgPSBkb20ubGlzdEFuY2VzdG9yKHJuZy5zYywgZnVuYy5ub3QoZG9tLmlzSW5saW5lKSk7XG4gICAgICB0b3BBbmNlc3RvciA9IGxpc3RzLmxhc3QoYW5jZXN0b3JzKTtcbiAgICAgIGlmICghZG9tLmlzSW5saW5lKHRvcEFuY2VzdG9yKSkge1xuICAgICAgICB0b3BBbmNlc3RvciA9IGFuY2VzdG9yc1thbmNlc3RvcnMubGVuZ3RoIC0gMl0gfHwgcm5nLnNjLmNoaWxkTm9kZXNbcm5nLnNvXTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdG9wQW5jZXN0b3IgPSBybmcuc2MuY2hpbGROb2Rlc1tybmcuc28gPiAwID8gcm5nLnNvIC0gMSA6IDBdO1xuICAgIH1cblxuICAgIC8vIHNpYmxpbmdzIG5vdCBpbiBwYXJhZ3JhcGhcbiAgICBsZXQgaW5saW5lU2libGluZ3MgPSBkb20ubGlzdFByZXYodG9wQW5jZXN0b3IsIGRvbS5pc1BhcmFJbmxpbmUpLnJldmVyc2UoKTtcbiAgICBpbmxpbmVTaWJsaW5ncyA9IGlubGluZVNpYmxpbmdzLmNvbmNhdChkb20ubGlzdE5leHQodG9wQW5jZXN0b3IubmV4dFNpYmxpbmcsIGRvbS5pc1BhcmFJbmxpbmUpKTtcblxuICAgIC8vIHdyYXAgd2l0aCBwYXJhZ3JhcGhcbiAgICBpZiAoaW5saW5lU2libGluZ3MubGVuZ3RoKSB7XG4gICAgICBjb25zdCBwYXJhID0gZG9tLndyYXAobGlzdHMuaGVhZChpbmxpbmVTaWJsaW5ncyksICdwJyk7XG4gICAgICBkb20uYXBwZW5kQ2hpbGROb2RlcyhwYXJhLCBsaXN0cy50YWlsKGlubGluZVNpYmxpbmdzKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubm9ybWFsaXplKCk7XG4gIH1cblxuICAvKipcbiAgICogaW5zZXJ0IG5vZGUgYXQgY3VycmVudCBjdXJzb3JcbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSBub2RlXG4gICAqIEByZXR1cm4ge05vZGV9XG4gICAqL1xuICBpbnNlcnROb2RlKG5vZGUpIHtcbiAgICBjb25zdCBybmcgPSB0aGlzLndyYXBCb2R5SW5saW5lV2l0aFBhcmEoKS5kZWxldGVDb250ZW50cygpO1xuICAgIGNvbnN0IGluZm8gPSBkb20uc3BsaXRQb2ludChybmcuZ2V0U3RhcnRQb2ludCgpLCBkb20uaXNJbmxpbmUobm9kZSkpO1xuXG4gICAgaWYgKGluZm8ucmlnaHROb2RlKSB7XG4gICAgICBpbmZvLnJpZ2h0Tm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBpbmZvLnJpZ2h0Tm9kZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGluZm8uY29udGFpbmVyLmFwcGVuZENoaWxkKG5vZGUpO1xuICAgIH1cblxuICAgIHJldHVybiBub2RlO1xuICB9XG5cbiAgLyoqXG4gICAqIGluc2VydCBodG1sIGF0IGN1cnJlbnQgY3Vyc29yXG4gICAqL1xuICBwYXN0ZUhUTUwobWFya3VwKSB7XG4gICAgY29uc3QgY29udGVudHNDb250YWluZXIgPSAkKCc8ZGl2PjwvZGl2PicpLmh0bWwobWFya3VwKVswXTtcbiAgICBjb25zdCBjaGlsZE5vZGVzID0gbGlzdHMuZnJvbShjb250ZW50c0NvbnRhaW5lci5jaGlsZE5vZGVzKTtcblxuICAgIGNvbnN0IHJuZyA9IHRoaXMud3JhcEJvZHlJbmxpbmVXaXRoUGFyYSgpLmRlbGV0ZUNvbnRlbnRzKCk7XG5cbiAgICByZXR1cm4gY2hpbGROb2Rlcy5yZXZlcnNlKCkubWFwKGZ1bmN0aW9uKGNoaWxkTm9kZSkge1xuICAgICAgcmV0dXJuIHJuZy5pbnNlcnROb2RlKGNoaWxkTm9kZSk7XG4gICAgfSkucmV2ZXJzZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIHJldHVybnMgdGV4dCBpbiByYW5nZVxuICAgKlxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICBjb25zdCBuYXRpdmVSbmcgPSB0aGlzLm5hdGl2ZVJhbmdlKCk7XG4gICAgcmV0dXJuIGVudi5pc1czQ1JhbmdlU3VwcG9ydCA/IG5hdGl2ZVJuZy50b1N0cmluZygpIDogbmF0aXZlUm5nLnRleHQ7XG4gIH1cblxuICAvKipcbiAgICogcmV0dXJucyByYW5nZSBmb3Igd29yZCBiZWZvcmUgY3Vyc29yXG4gICAqXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2ZpbmRBZnRlcl0gLSBmaW5kIGFmdGVyIGN1cnNvciwgZGVmYXVsdDogZmFsc2VcbiAgICogQHJldHVybiB7V3JhcHBlZFJhbmdlfVxuICAgKi9cbiAgZ2V0V29yZFJhbmdlKGZpbmRBZnRlcikge1xuICAgIGxldCBlbmRQb2ludCA9IHRoaXMuZ2V0RW5kUG9pbnQoKTtcblxuICAgIGlmICghZG9tLmlzQ2hhclBvaW50KGVuZFBvaW50KSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnRQb2ludCA9IGRvbS5wcmV2UG9pbnRVbnRpbChlbmRQb2ludCwgZnVuY3Rpb24ocG9pbnQpIHtcbiAgICAgIHJldHVybiAhZG9tLmlzQ2hhclBvaW50KHBvaW50KTtcbiAgICB9KTtcblxuICAgIGlmIChmaW5kQWZ0ZXIpIHtcbiAgICAgIGVuZFBvaW50ID0gZG9tLm5leHRQb2ludFVudGlsKGVuZFBvaW50LCBmdW5jdGlvbihwb2ludCkge1xuICAgICAgICByZXR1cm4gIWRvbS5pc0NoYXJQb2ludChwb2ludCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFdyYXBwZWRSYW5nZShcbiAgICAgIHN0YXJ0UG9pbnQubm9kZSxcbiAgICAgIHN0YXJ0UG9pbnQub2Zmc2V0LFxuICAgICAgZW5kUG9pbnQubm9kZSxcbiAgICAgIGVuZFBvaW50Lm9mZnNldFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogY3JlYXRlIG9mZnNldFBhdGggYm9va21hcmtcbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSBlZGl0YWJsZVxuICAgKi9cbiAgYm9va21hcmsoZWRpdGFibGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgczoge1xuICAgICAgICBwYXRoOiBkb20ubWFrZU9mZnNldFBhdGgoZWRpdGFibGUsIHRoaXMuc2MpLFxuICAgICAgICBvZmZzZXQ6IHRoaXMuc29cbiAgICAgIH0sXG4gICAgICBlOiB7XG4gICAgICAgIHBhdGg6IGRvbS5tYWtlT2Zmc2V0UGF0aChlZGl0YWJsZSwgdGhpcy5lYyksXG4gICAgICAgIG9mZnNldDogdGhpcy5lb1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogY3JlYXRlIG9mZnNldFBhdGggYm9va21hcmsgYmFzZSBvbiBwYXJhZ3JhcGhcbiAgICpcbiAgICogQHBhcmFtIHtOb2RlW119IHBhcmFzXG4gICAqL1xuICBwYXJhQm9va21hcmsocGFyYXMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgczoge1xuICAgICAgICBwYXRoOiBsaXN0cy50YWlsKGRvbS5tYWtlT2Zmc2V0UGF0aChsaXN0cy5oZWFkKHBhcmFzKSwgdGhpcy5zYykpLFxuICAgICAgICBvZmZzZXQ6IHRoaXMuc29cbiAgICAgIH0sXG4gICAgICBlOiB7XG4gICAgICAgIHBhdGg6IGxpc3RzLnRhaWwoZG9tLm1ha2VPZmZzZXRQYXRoKGxpc3RzLmxhc3QocGFyYXMpLCB0aGlzLmVjKSksXG4gICAgICAgIG9mZnNldDogdGhpcy5lb1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogZ2V0Q2xpZW50UmVjdHNcbiAgICogQHJldHVybiB7UmVjdFtdfVxuICAgKi9cbiAgZ2V0Q2xpZW50UmVjdHMoKSB7XG4gICAgY29uc3QgbmF0aXZlUm5nID0gdGhpcy5uYXRpdmVSYW5nZSgpO1xuICAgIHJldHVybiBuYXRpdmVSbmcuZ2V0Q2xpZW50UmVjdHMoKTtcbiAgfVxufVxuXG4vKipcbiAqIERhdGEgc3RydWN0dXJlXG4gKiAgKiBCb3VuZGFyeVBvaW50OiBhIHBvaW50IG9mIGRvbSB0cmVlXG4gKiAgKiBCb3VuZGFyeVBvaW50czogdHdvIGJvdW5kYXJ5UG9pbnRzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHN0YXJ0IGFuZCB0aGUgZW5kIG9mIHRoZSBSYW5nZVxuICpcbiAqIFNlZSB0byBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMi1UcmF2ZXJzYWwtUmFuZ2UvcmFuZ2VzLmh0bWwjTGV2ZWwtMi1SYW5nZS1Qb3NpdGlvblxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8qKlxuICAgKiBjcmVhdGUgUmFuZ2UgT2JqZWN0IEZyb20gYXJndW1lbnRzIG9yIEJyb3dzZXIgU2VsZWN0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gc2MgLSBzdGFydCBjb250YWluZXJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHNvIC0gc3RhcnQgb2Zmc2V0XG4gICAqIEBwYXJhbSB7Tm9kZX0gZWMgLSBlbmQgY29udGFpbmVyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBlbyAtIGVuZCBvZmZzZXRcbiAgICogQHJldHVybiB7V3JhcHBlZFJhbmdlfVxuICAgKi9cbiAgY3JlYXRlOiBmdW5jdGlvbihzYywgc28sIGVjLCBlbykge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSA0KSB7XG4gICAgICByZXR1cm4gbmV3IFdyYXBwZWRSYW5nZShzYywgc28sIGVjLCBlbyk7XG4gICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7IC8vIGNvbGxhcHNlZFxuICAgICAgZWMgPSBzYztcbiAgICAgIGVvID0gc287XG4gICAgICByZXR1cm4gbmV3IFdyYXBwZWRSYW5nZShzYywgc28sIGVjLCBlbyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCB3cmFwcGVkUmFuZ2UgPSB0aGlzLmNyZWF0ZUZyb21TZWxlY3Rpb24oKTtcbiAgICAgIGlmICghd3JhcHBlZFJhbmdlICYmIGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgd3JhcHBlZFJhbmdlID0gdGhpcy5jcmVhdGVGcm9tTm9kZShhcmd1bWVudHNbMF0pO1xuICAgICAgICByZXR1cm4gd3JhcHBlZFJhbmdlLmNvbGxhcHNlKGRvbS5lbXB0eVBhcmEgPT09IGFyZ3VtZW50c1swXS5pbm5lckhUTUwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdyYXBwZWRSYW5nZTtcbiAgICB9XG4gIH0sXG5cbiAgY3JlYXRlRnJvbVNlbGVjdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgbGV0IHNjLCBzbywgZWMsIGVvO1xuICAgIGlmIChlbnYuaXNXM0NSYW5nZVN1cHBvcnQpIHtcbiAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IGRvY3VtZW50LmdldFNlbGVjdGlvbigpO1xuICAgICAgaWYgKCFzZWxlY3Rpb24gfHwgc2VsZWN0aW9uLnJhbmdlQ291bnQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9IGVsc2UgaWYgKGRvbS5pc0JvZHkoc2VsZWN0aW9uLmFuY2hvck5vZGUpKSB7XG4gICAgICAgIC8vIEZpcmVmb3g6IHJldHVybnMgZW50aXJlIGJvZHkgYXMgcmFuZ2Ugb24gaW5pdGlhbGl6YXRpb24uXG4gICAgICAgIC8vIFdlIHdvbid0IG5ldmVyIG5lZWQgaXQuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBuYXRpdmVSbmcgPSBzZWxlY3Rpb24uZ2V0UmFuZ2VBdCgwKTtcbiAgICAgIHNjID0gbmF0aXZlUm5nLnN0YXJ0Q29udGFpbmVyO1xuICAgICAgc28gPSBuYXRpdmVSbmcuc3RhcnRPZmZzZXQ7XG4gICAgICBlYyA9IG5hdGl2ZVJuZy5lbmRDb250YWluZXI7XG4gICAgICBlbyA9IG5hdGl2ZVJuZy5lbmRPZmZzZXQ7XG4gICAgfSBlbHNlIHsgLy8gSUU4OiBUZXh0UmFuZ2VcbiAgICAgIGNvbnN0IHRleHRSYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuICAgICAgY29uc3QgdGV4dFJhbmdlRW5kID0gdGV4dFJhbmdlLmR1cGxpY2F0ZSgpO1xuICAgICAgdGV4dFJhbmdlRW5kLmNvbGxhcHNlKGZhbHNlKTtcbiAgICAgIGNvbnN0IHRleHRSYW5nZVN0YXJ0ID0gdGV4dFJhbmdlO1xuICAgICAgdGV4dFJhbmdlU3RhcnQuY29sbGFwc2UodHJ1ZSk7XG5cbiAgICAgIGxldCBzdGFydFBvaW50ID0gdGV4dFJhbmdlVG9Qb2ludCh0ZXh0UmFuZ2VTdGFydCwgdHJ1ZSk7XG4gICAgICBsZXQgZW5kUG9pbnQgPSB0ZXh0UmFuZ2VUb1BvaW50KHRleHRSYW5nZUVuZCwgZmFsc2UpO1xuXG4gICAgICAvLyBzYW1lIHZpc2libGUgcG9pbnQgY2FzZTogcmFuZ2Ugd2FzIGNvbGxhcHNlZC5cbiAgICAgIGlmIChkb20uaXNUZXh0KHN0YXJ0UG9pbnQubm9kZSkgJiYgZG9tLmlzTGVmdEVkZ2VQb2ludChzdGFydFBvaW50KSAmJlxuICAgICAgICAgIGRvbS5pc1RleHROb2RlKGVuZFBvaW50Lm5vZGUpICYmIGRvbS5pc1JpZ2h0RWRnZVBvaW50KGVuZFBvaW50KSAmJlxuICAgICAgICAgIGVuZFBvaW50Lm5vZGUubmV4dFNpYmxpbmcgPT09IHN0YXJ0UG9pbnQubm9kZSkge1xuICAgICAgICBzdGFydFBvaW50ID0gZW5kUG9pbnQ7XG4gICAgICB9XG5cbiAgICAgIHNjID0gc3RhcnRQb2ludC5jb250O1xuICAgICAgc28gPSBzdGFydFBvaW50Lm9mZnNldDtcbiAgICAgIGVjID0gZW5kUG9pbnQuY29udDtcbiAgICAgIGVvID0gZW5kUG9pbnQub2Zmc2V0O1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgV3JhcHBlZFJhbmdlKHNjLCBzbywgZWMsIGVvKTtcbiAgfSxcblxuICAvKipcbiAgICogQG1ldGhvZFxuICAgKlxuICAgKiBjcmVhdGUgV3JhcHBlZFJhbmdlIGZyb20gbm9kZVxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAgICogQHJldHVybiB7V3JhcHBlZFJhbmdlfVxuICAgKi9cbiAgY3JlYXRlRnJvbU5vZGU6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICBsZXQgc2MgPSBub2RlO1xuICAgIGxldCBzbyA9IDA7XG4gICAgbGV0IGVjID0gbm9kZTtcbiAgICBsZXQgZW8gPSBkb20ubm9kZUxlbmd0aChlYyk7XG5cbiAgICAvLyBicm93c2VycyBjYW4ndCB0YXJnZXQgYSBwaWN0dXJlIG9yIHZvaWQgbm9kZVxuICAgIGlmIChkb20uaXNWb2lkKHNjKSkge1xuICAgICAgc28gPSBkb20ubGlzdFByZXYoc2MpLmxlbmd0aCAtIDE7XG4gICAgICBzYyA9IHNjLnBhcmVudE5vZGU7XG4gICAgfVxuICAgIGlmIChkb20uaXNCUihlYykpIHtcbiAgICAgIGVvID0gZG9tLmxpc3RQcmV2KGVjKS5sZW5ndGggLSAxO1xuICAgICAgZWMgPSBlYy5wYXJlbnROb2RlO1xuICAgIH0gZWxzZSBpZiAoZG9tLmlzVm9pZChlYykpIHtcbiAgICAgIGVvID0gZG9tLmxpc3RQcmV2KGVjKS5sZW5ndGg7XG4gICAgICBlYyA9IGVjLnBhcmVudE5vZGU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlKHNjLCBzbywgZWMsIGVvKTtcbiAgfSxcblxuICAvKipcbiAgICogY3JlYXRlIFdyYXBwZWRSYW5nZSBmcm9tIG5vZGUgYWZ0ZXIgcG9zaXRpb25cbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSBub2RlXG4gICAqIEByZXR1cm4ge1dyYXBwZWRSYW5nZX1cbiAgICovXG4gIGNyZWF0ZUZyb21Ob2RlQmVmb3JlOiBmdW5jdGlvbihub2RlKSB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlRnJvbU5vZGUobm9kZSkuY29sbGFwc2UodHJ1ZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIGNyZWF0ZSBXcmFwcGVkUmFuZ2UgZnJvbSBub2RlIGFmdGVyIHBvc2l0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgKiBAcmV0dXJuIHtXcmFwcGVkUmFuZ2V9XG4gICAqL1xuICBjcmVhdGVGcm9tTm9kZUFmdGVyOiBmdW5jdGlvbihub2RlKSB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlRnJvbU5vZGUobm9kZSkuY29sbGFwc2UoKTtcbiAgfSxcblxuICAvKipcbiAgICogQG1ldGhvZFxuICAgKlxuICAgKiBjcmVhdGUgV3JhcHBlZFJhbmdlIGZyb20gYm9va21hcmtcbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSBlZGl0YWJsZVxuICAgKiBAcGFyYW0ge09iamVjdH0gYm9va21hcmtcbiAgICogQHJldHVybiB7V3JhcHBlZFJhbmdlfVxuICAgKi9cbiAgY3JlYXRlRnJvbUJvb2ttYXJrOiBmdW5jdGlvbihlZGl0YWJsZSwgYm9va21hcmspIHtcbiAgICBjb25zdCBzYyA9IGRvbS5mcm9tT2Zmc2V0UGF0aChlZGl0YWJsZSwgYm9va21hcmsucy5wYXRoKTtcbiAgICBjb25zdCBzbyA9IGJvb2ttYXJrLnMub2Zmc2V0O1xuICAgIGNvbnN0IGVjID0gZG9tLmZyb21PZmZzZXRQYXRoKGVkaXRhYmxlLCBib29rbWFyay5lLnBhdGgpO1xuICAgIGNvbnN0IGVvID0gYm9va21hcmsuZS5vZmZzZXQ7XG4gICAgcmV0dXJuIG5ldyBXcmFwcGVkUmFuZ2Uoc2MsIHNvLCBlYywgZW8pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAbWV0aG9kXG4gICAqXG4gICAqIGNyZWF0ZSBXcmFwcGVkUmFuZ2UgZnJvbSBwYXJhQm9va21hcmtcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGJvb2ttYXJrXG4gICAqIEBwYXJhbSB7Tm9kZVtdfSBwYXJhc1xuICAgKiBAcmV0dXJuIHtXcmFwcGVkUmFuZ2V9XG4gICAqL1xuICBjcmVhdGVGcm9tUGFyYUJvb2ttYXJrOiBmdW5jdGlvbihib29rbWFyaywgcGFyYXMpIHtcbiAgICBjb25zdCBzbyA9IGJvb2ttYXJrLnMub2Zmc2V0O1xuICAgIGNvbnN0IGVvID0gYm9va21hcmsuZS5vZmZzZXQ7XG4gICAgY29uc3Qgc2MgPSBkb20uZnJvbU9mZnNldFBhdGgobGlzdHMuaGVhZChwYXJhcyksIGJvb2ttYXJrLnMucGF0aCk7XG4gICAgY29uc3QgZWMgPSBkb20uZnJvbU9mZnNldFBhdGgobGlzdHMubGFzdChwYXJhcyksIGJvb2ttYXJrLmUucGF0aCk7XG5cbiAgICByZXR1cm4gbmV3IFdyYXBwZWRSYW5nZShzYywgc28sIGVjLCBlbyk7XG4gIH1cbn07XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuXG4vKipcbiAqIEBtZXRob2QgcmVhZEZpbGVBc0RhdGFVUkxcbiAqXG4gKiByZWFkIGNvbnRlbnRzIG9mIGZpbGUgYXMgcmVwcmVzZW50aW5nIFVSTFxuICpcbiAqIEBwYXJhbSB7RmlsZX0gZmlsZVxuICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGVuOiBkYXRhVXJsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWFkRmlsZUFzRGF0YVVSTChmaWxlKSB7XG4gIHJldHVybiAkLkRlZmVycmVkKChkZWZlcnJlZCkgPT4ge1xuICAgICQuZXh0ZW5kKG5ldyBGaWxlUmVhZGVyKCksIHtcbiAgICAgIG9ubG9hZDogKGUpID0+IHtcbiAgICAgICAgY29uc3QgZGF0YVVSTCA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShkYXRhVVJMKTtcbiAgICAgIH0sXG4gICAgICBvbmVycm9yOiAoZXJyKSA9PiB7XG4gICAgICAgIGRlZmVycmVkLnJlamVjdChlcnIpO1xuICAgICAgfVxuICAgIH0pLnJlYWRBc0RhdGFVUkwoZmlsZSk7XG4gIH0pLnByb21pc2UoKTtcbn1cblxuLyoqXG4gKiBAbWV0aG9kIGNyZWF0ZUltYWdlXG4gKlxuICogY3JlYXRlIGA8aW1hZ2U+YCBmcm9tIHVybCBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gKiBAcmV0dXJuIHtQcm9taXNlfSAtIHRoZW46ICRpbWFnZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSW1hZ2UodXJsKSB7XG4gIHJldHVybiAkLkRlZmVycmVkKChkZWZlcnJlZCkgPT4ge1xuICAgIGNvbnN0ICRpbWcgPSAkKCc8aW1nPicpO1xuXG4gICAgJGltZy5vbmUoJ2xvYWQnLCAoKSA9PiB7XG4gICAgICAkaW1nLm9mZignZXJyb3IgYWJvcnQnKTtcbiAgICAgIGRlZmVycmVkLnJlc29sdmUoJGltZyk7XG4gICAgfSkub25lKCdlcnJvciBhYm9ydCcsICgpID0+IHtcbiAgICAgICRpbWcub2ZmKCdsb2FkJykuZGV0YWNoKCk7XG4gICAgICBkZWZlcnJlZC5yZWplY3QoJGltZyk7XG4gICAgfSkuY3NzKHtcbiAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgIH0pLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpLmF0dHIoJ3NyYycsIHVybCk7XG4gIH0pLnByb21pc2UoKTtcbn1cbiIsImltcG9ydCByYW5nZSBmcm9tICcuLi9jb3JlL3JhbmdlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGlzdG9yeSB7XG4gIGNvbnN0cnVjdG9yKCRlZGl0YWJsZSkge1xuICAgIHRoaXMuc3RhY2sgPSBbXTtcbiAgICB0aGlzLnN0YWNrT2Zmc2V0ID0gLTE7XG4gICAgdGhpcy4kZWRpdGFibGUgPSAkZWRpdGFibGU7XG4gICAgdGhpcy5lZGl0YWJsZSA9ICRlZGl0YWJsZVswXTtcbiAgfVxuXG4gIG1ha2VTbmFwc2hvdCgpIHtcbiAgICBjb25zdCBybmcgPSByYW5nZS5jcmVhdGUodGhpcy5lZGl0YWJsZSk7XG4gICAgY29uc3QgZW1wdHlCb29rbWFyayA9IHtzOiB7cGF0aDogW10sIG9mZnNldDogMH0sIGU6IHtwYXRoOiBbXSwgb2Zmc2V0OiAwfX07XG5cbiAgICByZXR1cm4ge1xuICAgICAgY29udGVudHM6IHRoaXMuJGVkaXRhYmxlLmh0bWwoKSxcbiAgICAgIGJvb2ttYXJrOiAocm5nID8gcm5nLmJvb2ttYXJrKHRoaXMuZWRpdGFibGUpIDogZW1wdHlCb29rbWFyaylcbiAgICB9O1xuICB9XG5cbiAgYXBwbHlTbmFwc2hvdChzbmFwc2hvdCkge1xuICAgIGlmIChzbmFwc2hvdC5jb250ZW50cyAhPT0gbnVsbCkge1xuICAgICAgdGhpcy4kZWRpdGFibGUuaHRtbChzbmFwc2hvdC5jb250ZW50cyk7XG4gICAgfVxuICAgIGlmIChzbmFwc2hvdC5ib29rbWFyayAhPT0gbnVsbCkge1xuICAgICAgcmFuZ2UuY3JlYXRlRnJvbUJvb2ttYXJrKHRoaXMuZWRpdGFibGUsIHNuYXBzaG90LmJvb2ttYXJrKS5zZWxlY3QoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgKiBAbWV0aG9kIHJld2luZFxuICAqIFJld2luZHMgdGhlIGhpc3Rvcnkgc3RhY2sgYmFjayB0byB0aGUgZmlyc3Qgc25hcHNob3QgdGFrZW4uXG4gICogTGVhdmVzIHRoZSBzdGFjayBpbnRhY3QsIHNvIHRoYXQgXCJSZWRvXCIgY2FuIHN0aWxsIGJlIHVzZWQuXG4gICovXG4gIHJld2luZCgpIHtcbiAgICAvLyBDcmVhdGUgc25hcCBzaG90IGlmIG5vdCB5ZXQgcmVjb3JkZWRcbiAgICBpZiAodGhpcy4kZWRpdGFibGUuaHRtbCgpICE9PSB0aGlzLnN0YWNrW3RoaXMuc3RhY2tPZmZzZXRdLmNvbnRlbnRzKSB7XG4gICAgICB0aGlzLnJlY29yZFVuZG8oKTtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gdG8gdGhlIGZpcnN0IGF2YWlsYWJsZSBzbmFwc2hvdC5cbiAgICB0aGlzLnN0YWNrT2Zmc2V0ID0gMDtcblxuICAgIC8vIEFwcGx5IHRoYXQgc25hcHNob3QuXG4gICAgdGhpcy5hcHBseVNuYXBzaG90KHRoaXMuc3RhY2tbdGhpcy5zdGFja09mZnNldF0pO1xuICB9XG5cbiAgLyoqXG4gICogQG1ldGhvZCByZXNldFxuICAqIFJlc2V0cyB0aGUgaGlzdG9yeSBzdGFjayBjb21wbGV0ZWx5OyByZXZlcnRpbmcgdG8gYW4gZW1wdHkgZWRpdG9yLlxuICAqL1xuICByZXNldCgpIHtcbiAgICAvLyBDbGVhciB0aGUgc3RhY2suXG4gICAgdGhpcy5zdGFjayA9IFtdO1xuXG4gICAgLy8gUmVzdG9yZSBzdGFja09mZnNldCB0byBpdHMgb3JpZ2luYWwgdmFsdWUuXG4gICAgdGhpcy5zdGFja09mZnNldCA9IC0xO1xuXG4gICAgLy8gQ2xlYXIgdGhlIGVkaXRhYmxlIGFyZWEuXG4gICAgdGhpcy4kZWRpdGFibGUuaHRtbCgnJyk7XG5cbiAgICAvLyBSZWNvcmQgb3VyIGZpcnN0IHNuYXBzaG90IChvZiBub3RoaW5nKS5cbiAgICB0aGlzLnJlY29yZFVuZG8oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiB1bmRvXG4gICAqL1xuICB1bmRvKCkge1xuICAgIC8vIENyZWF0ZSBzbmFwIHNob3QgaWYgbm90IHlldCByZWNvcmRlZFxuICAgIGlmICh0aGlzLiRlZGl0YWJsZS5odG1sKCkgIT09IHRoaXMuc3RhY2tbdGhpcy5zdGFja09mZnNldF0uY29udGVudHMpIHtcbiAgICAgIHRoaXMucmVjb3JkVW5kbygpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YWNrT2Zmc2V0ID4gMCkge1xuICAgICAgdGhpcy5zdGFja09mZnNldC0tO1xuICAgICAgdGhpcy5hcHBseVNuYXBzaG90KHRoaXMuc3RhY2tbdGhpcy5zdGFja09mZnNldF0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiByZWRvXG4gICAqL1xuICByZWRvKCkge1xuICAgIGlmICh0aGlzLnN0YWNrLmxlbmd0aCAtIDEgPiB0aGlzLnN0YWNrT2Zmc2V0KSB7XG4gICAgICB0aGlzLnN0YWNrT2Zmc2V0Kys7XG4gICAgICB0aGlzLmFwcGx5U25hcHNob3QodGhpcy5zdGFja1t0aGlzLnN0YWNrT2Zmc2V0XSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHJlY29yZGVkIHVuZG9cbiAgICovXG4gIHJlY29yZFVuZG8oKSB7XG4gICAgdGhpcy5zdGFja09mZnNldCsrO1xuXG4gICAgLy8gV2FzaCBvdXQgc3RhY2sgYWZ0ZXIgc3RhY2tPZmZzZXRcbiAgICBpZiAodGhpcy5zdGFjay5sZW5ndGggPiB0aGlzLnN0YWNrT2Zmc2V0KSB7XG4gICAgICB0aGlzLnN0YWNrID0gdGhpcy5zdGFjay5zbGljZSgwLCB0aGlzLnN0YWNrT2Zmc2V0KTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgbmV3IHNuYXBzaG90IGFuZCBwdXNoIGl0IHRvIHRoZSBlbmRcbiAgICB0aGlzLnN0YWNrLnB1c2godGhpcy5tYWtlU25hcHNob3QoKSk7XG4gIH1cbn1cbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgZW52IGZyb20gJy4uL2NvcmUvZW52JztcbmltcG9ydCBmdW5jIGZyb20gJy4uL2NvcmUvZnVuYyc7XG5pbXBvcnQgbGlzdHMgZnJvbSAnLi4vY29yZS9saXN0cyc7XG5pbXBvcnQgZG9tIGZyb20gJy4uL2NvcmUvZG9tJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3R5bGUge1xuICAvKipcbiAgICogQG1ldGhvZCBqUXVlcnlDU1NcbiAgICpcbiAgICogW3dvcmthcm91bmRdIGZvciBvbGQgalF1ZXJ5XG4gICAqIHBhc3NpbmcgYW4gYXJyYXkgb2Ygc3R5bGUgcHJvcGVydGllcyB0byAuY3NzKClcbiAgICogd2lsbCByZXN1bHQgaW4gYW4gb2JqZWN0IG9mIHByb3BlcnR5LXZhbHVlIHBhaXJzLlxuICAgKiAoY29tcGFiaWxpdHkgd2l0aCB2ZXJzaW9uIDwgMS45KVxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0gIHtqUXVlcnl9ICRvYmpcbiAgICogQHBhcmFtICB7QXJyYXl9IHByb3BlcnR5TmFtZXMgLSBBbiBhcnJheSBvZiBvbmUgb3IgbW9yZSBDU1MgcHJvcGVydGllcy5cbiAgICogQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgalF1ZXJ5Q1NTKCRvYmosIHByb3BlcnR5TmFtZXMpIHtcbiAgICBpZiAoZW52LmpxdWVyeVZlcnNpb24gPCAxLjkpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgICAgJC5lYWNoKHByb3BlcnR5TmFtZXMsIChpZHgsIHByb3BlcnR5TmFtZSkgPT4ge1xuICAgICAgICByZXN1bHRbcHJvcGVydHlOYW1lXSA9ICRvYmouY3NzKHByb3BlcnR5TmFtZSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIHJldHVybiAkb2JqLmNzcyhwcm9wZXJ0eU5hbWVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiByZXR1cm5zIHN0eWxlIG9iamVjdCBmcm9tIG5vZGVcbiAgICpcbiAgICogQHBhcmFtIHtqUXVlcnl9ICRub2RlXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIGZyb21Ob2RlKCRub2RlKSB7XG4gICAgY29uc3QgcHJvcGVydGllcyA9IFsnZm9udC1mYW1pbHknLCAnZm9udC1zaXplJywgJ3RleHQtYWxpZ24nLCAnbGlzdC1zdHlsZS10eXBlJywgJ2xpbmUtaGVpZ2h0J107XG4gICAgY29uc3Qgc3R5bGVJbmZvID0gdGhpcy5qUXVlcnlDU1MoJG5vZGUsIHByb3BlcnRpZXMpIHx8IHt9O1xuICAgIHN0eWxlSW5mb1snZm9udC1zaXplJ10gPSBwYXJzZUludChzdHlsZUluZm9bJ2ZvbnQtc2l6ZSddLCAxMCk7XG4gICAgcmV0dXJuIHN0eWxlSW5mbztcbiAgfVxuXG4gIC8qKlxuICAgKiBwYXJhZ3JhcGggbGV2ZWwgc3R5bGVcbiAgICpcbiAgICogQHBhcmFtIHtXcmFwcGVkUmFuZ2V9IHJuZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gc3R5bGVJbmZvXG4gICAqL1xuICBzdHlsZVBhcmEocm5nLCBzdHlsZUluZm8pIHtcbiAgICAkLmVhY2gocm5nLm5vZGVzKGRvbS5pc1BhcmEsIHtcbiAgICAgIGluY2x1ZGVBbmNlc3RvcjogdHJ1ZVxuICAgIH0pLCAoaWR4LCBwYXJhKSA9PiB7XG4gICAgICAkKHBhcmEpLmNzcyhzdHlsZUluZm8pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIGluc2VydCBhbmQgcmV0dXJucyBzdHlsZU5vZGVzIG9uIHJhbmdlLlxuICAgKlxuICAgKiBAcGFyYW0ge1dyYXBwZWRSYW5nZX0gcm5nXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBvcHRpb25zIGZvciBzdHlsZU5vZGVzXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy5ub2RlTmFtZV0gLSBkZWZhdWx0OiBgU1BBTmBcbiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5leHBhbmRDbG9zZXN0U2libGluZ10gLSBkZWZhdWx0OiBgZmFsc2VgXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMub25seVBhcnRpYWxDb250YWluc10gLSBkZWZhdWx0OiBgZmFsc2VgXG4gICAqIEByZXR1cm4ge05vZGVbXX1cbiAgICovXG4gIHN0eWxlTm9kZXMocm5nLCBvcHRpb25zKSB7XG4gICAgcm5nID0gcm5nLnNwbGl0VGV4dCgpO1xuXG4gICAgY29uc3Qgbm9kZU5hbWUgPSAob3B0aW9ucyAmJiBvcHRpb25zLm5vZGVOYW1lKSB8fCAnU1BBTic7XG4gICAgY29uc3QgZXhwYW5kQ2xvc2VzdFNpYmxpbmcgPSAhIShvcHRpb25zICYmIG9wdGlvbnMuZXhwYW5kQ2xvc2VzdFNpYmxpbmcpO1xuICAgIGNvbnN0IG9ubHlQYXJ0aWFsQ29udGFpbnMgPSAhIShvcHRpb25zICYmIG9wdGlvbnMub25seVBhcnRpYWxDb250YWlucyk7XG5cbiAgICBpZiAocm5nLmlzQ29sbGFwc2VkKCkpIHtcbiAgICAgIHJldHVybiBbcm5nLmluc2VydE5vZGUoZG9tLmNyZWF0ZShub2RlTmFtZSkpXTtcbiAgICB9XG5cbiAgICBsZXQgcHJlZCA9IGRvbS5tYWtlUHJlZEJ5Tm9kZU5hbWUobm9kZU5hbWUpO1xuICAgIGNvbnN0IG5vZGVzID0gcm5nLm5vZGVzKGRvbS5pc1RleHQsIHtcbiAgICAgIGZ1bGx5Q29udGFpbnM6IHRydWVcbiAgICB9KS5tYXAoKHRleHQpID0+IHtcbiAgICAgIHJldHVybiBkb20uc2luZ2xlQ2hpbGRBbmNlc3Rvcih0ZXh0LCBwcmVkKSB8fCBkb20ud3JhcCh0ZXh0LCBub2RlTmFtZSk7XG4gICAgfSk7XG5cbiAgICBpZiAoZXhwYW5kQ2xvc2VzdFNpYmxpbmcpIHtcbiAgICAgIGlmIChvbmx5UGFydGlhbENvbnRhaW5zKSB7XG4gICAgICAgIGNvbnN0IG5vZGVzSW5SYW5nZSA9IHJuZy5ub2RlcygpO1xuICAgICAgICAvLyBjb21wb3NlIHdpdGggcGFydGlhbCBjb250YWlucyBwcmVkaWNhdGlvblxuICAgICAgICBwcmVkID0gZnVuYy5hbmQocHJlZCwgKG5vZGUpID0+IHtcbiAgICAgICAgICByZXR1cm4gbGlzdHMuY29udGFpbnMobm9kZXNJblJhbmdlLCBub2RlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBub2Rlcy5tYXAoKG5vZGUpID0+IHtcbiAgICAgICAgY29uc3Qgc2libGluZ3MgPSBkb20ud2l0aENsb3Nlc3RTaWJsaW5ncyhub2RlLCBwcmVkKTtcbiAgICAgICAgY29uc3QgaGVhZCA9IGxpc3RzLmhlYWQoc2libGluZ3MpO1xuICAgICAgICBjb25zdCB0YWlscyA9IGxpc3RzLnRhaWwoc2libGluZ3MpO1xuICAgICAgICAkLmVhY2godGFpbHMsIChpZHgsIGVsZW0pID0+IHtcbiAgICAgICAgICBkb20uYXBwZW5kQ2hpbGROb2RlcyhoZWFkLCBlbGVtLmNoaWxkTm9kZXMpO1xuICAgICAgICAgIGRvbS5yZW1vdmUoZWxlbSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbGlzdHMuaGVhZChzaWJsaW5ncyk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5vZGVzO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBnZXQgY3VycmVudCBzdHlsZSBvbiBjdXJzb3JcbiAgICpcbiAgICogQHBhcmFtIHtXcmFwcGVkUmFuZ2V9IHJuZ1xuICAgKiBAcmV0dXJuIHtPYmplY3R9IC0gb2JqZWN0IGNvbnRhaW5zIHN0eWxlIHByb3BlcnRpZXMuXG4gICAqL1xuICBjdXJyZW50KHJuZykge1xuICAgIGNvbnN0ICRjb250ID0gJCghZG9tLmlzRWxlbWVudChybmcuc2MpID8gcm5nLnNjLnBhcmVudE5vZGUgOiBybmcuc2MpO1xuICAgIGxldCBzdHlsZUluZm8gPSB0aGlzLmZyb21Ob2RlKCRjb250KTtcblxuICAgIC8vIGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN0YXRlIGZvciB0b2dnbGUgc3RhdGVcbiAgICAvLyBbd29ya2Fyb3VuZF0gcHJldmVudCBGaXJlZm94IG5zcmVzdWx0OiBcIjB4ODAwMDQwMDUgKE5TX0VSUk9SX0ZBSUxVUkUpXCJcbiAgICB0cnkge1xuICAgICAgc3R5bGVJbmZvID0gJC5leHRlbmQoc3R5bGVJbmZvLCB7XG4gICAgICAgICdmb250LWJvbGQnOiBkb2N1bWVudC5xdWVyeUNvbW1hbmRTdGF0ZSgnYm9sZCcpID8gJ2JvbGQnIDogJ25vcm1hbCcsXG4gICAgICAgICdmb250LWl0YWxpYyc6IGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN0YXRlKCdpdGFsaWMnKSA/ICdpdGFsaWMnIDogJ25vcm1hbCcsXG4gICAgICAgICdmb250LXVuZGVybGluZSc6IGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN0YXRlKCd1bmRlcmxpbmUnKSA/ICd1bmRlcmxpbmUnIDogJ25vcm1hbCcsXG4gICAgICAgICdmb250LXN1YnNjcmlwdCc6IGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN0YXRlKCdzdWJzY3JpcHQnKSA/ICdzdWJzY3JpcHQnIDogJ25vcm1hbCcsXG4gICAgICAgICdmb250LXN1cGVyc2NyaXB0JzogZG9jdW1lbnQucXVlcnlDb21tYW5kU3RhdGUoJ3N1cGVyc2NyaXB0JykgPyAnc3VwZXJzY3JpcHQnIDogJ25vcm1hbCcsXG4gICAgICAgICdmb250LXN0cmlrZXRocm91Z2gnOiBkb2N1bWVudC5xdWVyeUNvbW1hbmRTdGF0ZSgnc3RyaWtldGhyb3VnaCcpID8gJ3N0cmlrZXRocm91Z2gnIDogJ25vcm1hbCcsXG4gICAgICAgICdmb250LWZhbWlseSc6IGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFZhbHVlKCdmb250bmFtZScpIHx8IHN0eWxlSW5mb1snZm9udC1mYW1pbHknXVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZSkge31cblxuICAgIC8vIGxpc3Qtc3R5bGUtdHlwZSB0byBsaXN0LXN0eWxlKHVub3JkZXJlZCwgb3JkZXJlZClcbiAgICBpZiAoIXJuZy5pc09uTGlzdCgpKSB7XG4gICAgICBzdHlsZUluZm9bJ2xpc3Qtc3R5bGUnXSA9ICdub25lJztcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgb3JkZXJlZFR5cGVzID0gWydjaXJjbGUnLCAnZGlzYycsICdkaXNjLWxlYWRpbmctemVybycsICdzcXVhcmUnXTtcbiAgICAgIGNvbnN0IGlzVW5vcmRlcmVkID0gJC5pbkFycmF5KHN0eWxlSW5mb1snbGlzdC1zdHlsZS10eXBlJ10sIG9yZGVyZWRUeXBlcykgPiAtMTtcbiAgICAgIHN0eWxlSW5mb1snbGlzdC1zdHlsZSddID0gaXNVbm9yZGVyZWQgPyAndW5vcmRlcmVkJyA6ICdvcmRlcmVkJztcbiAgICB9XG5cbiAgICBjb25zdCBwYXJhID0gZG9tLmFuY2VzdG9yKHJuZy5zYywgZG9tLmlzUGFyYSk7XG4gICAgaWYgKHBhcmEgJiYgcGFyYS5zdHlsZVsnbGluZS1oZWlnaHQnXSkge1xuICAgICAgc3R5bGVJbmZvWydsaW5lLWhlaWdodCddID0gcGFyYS5zdHlsZS5saW5lSGVpZ2h0O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBsaW5lSGVpZ2h0ID0gcGFyc2VJbnQoc3R5bGVJbmZvWydsaW5lLWhlaWdodCddLCAxMCkgLyBwYXJzZUludChzdHlsZUluZm9bJ2ZvbnQtc2l6ZSddLCAxMCk7XG4gICAgICBzdHlsZUluZm9bJ2xpbmUtaGVpZ2h0J10gPSBsaW5lSGVpZ2h0LnRvRml4ZWQoMSk7XG4gICAgfVxuXG4gICAgc3R5bGVJbmZvLmFuY2hvciA9IHJuZy5pc09uQW5jaG9yKCkgJiYgZG9tLmFuY2VzdG9yKHJuZy5zYywgZG9tLmlzQW5jaG9yKTtcbiAgICBzdHlsZUluZm8uYW5jZXN0b3JzID0gZG9tLmxpc3RBbmNlc3Rvcihybmcuc2MsIGRvbS5pc0VkaXRhYmxlKTtcbiAgICBzdHlsZUluZm8ucmFuZ2UgPSBybmc7XG5cbiAgICByZXR1cm4gc3R5bGVJbmZvO1xuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGxpc3RzIGZyb20gJy4uL2NvcmUvbGlzdHMnO1xuaW1wb3J0IGZ1bmMgZnJvbSAnLi4vY29yZS9mdW5jJztcbmltcG9ydCBkb20gZnJvbSAnLi4vY29yZS9kb20nO1xuaW1wb3J0IHJhbmdlIGZyb20gJy4uL2NvcmUvcmFuZ2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCdWxsZXQge1xuICAvKipcbiAgICogdG9nZ2xlIG9yZGVyZWQgbGlzdFxuICAgKi9cbiAgaW5zZXJ0T3JkZXJlZExpc3QoZWRpdGFibGUpIHtcbiAgICB0aGlzLnRvZ2dsZUxpc3QoJ09MJywgZWRpdGFibGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIHRvZ2dsZSB1bm9yZGVyZWQgbGlzdFxuICAgKi9cbiAgaW5zZXJ0VW5vcmRlcmVkTGlzdChlZGl0YWJsZSkge1xuICAgIHRoaXMudG9nZ2xlTGlzdCgnVUwnLCBlZGl0YWJsZSk7XG4gIH1cblxuICAvKipcbiAgICogaW5kZW50XG4gICAqL1xuICBpbmRlbnQoZWRpdGFibGUpIHtcbiAgICBjb25zdCBybmcgPSByYW5nZS5jcmVhdGUoZWRpdGFibGUpLndyYXBCb2R5SW5saW5lV2l0aFBhcmEoKTtcblxuICAgIGNvbnN0IHBhcmFzID0gcm5nLm5vZGVzKGRvbS5pc1BhcmEsIHsgaW5jbHVkZUFuY2VzdG9yOiB0cnVlIH0pO1xuICAgIGNvbnN0IGNsdXN0ZXJlZHMgPSBsaXN0cy5jbHVzdGVyQnkocGFyYXMsIGZ1bmMucGVxMigncGFyZW50Tm9kZScpKTtcblxuICAgICQuZWFjaChjbHVzdGVyZWRzLCAoaWR4LCBwYXJhcykgPT4ge1xuICAgICAgY29uc3QgaGVhZCA9IGxpc3RzLmhlYWQocGFyYXMpO1xuICAgICAgaWYgKGRvbS5pc0xpKGhlYWQpKSB7XG4gICAgICAgIHRoaXMud3JhcExpc3QocGFyYXMsIGhlYWQucGFyZW50Tm9kZS5ub2RlTmFtZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkLmVhY2gocGFyYXMsIChpZHgsIHBhcmEpID0+IHtcbiAgICAgICAgICAkKHBhcmEpLmNzcygnbWFyZ2luTGVmdCcsIChpZHgsIHZhbCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChwYXJzZUludCh2YWwsIDEwKSB8fCAwKSArIDI1O1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJuZy5zZWxlY3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBvdXRkZW50XG4gICAqL1xuICBvdXRkZW50KGVkaXRhYmxlKSB7XG4gICAgY29uc3Qgcm5nID0gcmFuZ2UuY3JlYXRlKGVkaXRhYmxlKS53cmFwQm9keUlubGluZVdpdGhQYXJhKCk7XG5cbiAgICBjb25zdCBwYXJhcyA9IHJuZy5ub2Rlcyhkb20uaXNQYXJhLCB7IGluY2x1ZGVBbmNlc3RvcjogdHJ1ZSB9KTtcbiAgICBjb25zdCBjbHVzdGVyZWRzID0gbGlzdHMuY2x1c3RlckJ5KHBhcmFzLCBmdW5jLnBlcTIoJ3BhcmVudE5vZGUnKSk7XG5cbiAgICAkLmVhY2goY2x1c3RlcmVkcywgKGlkeCwgcGFyYXMpID0+IHtcbiAgICAgIGNvbnN0IGhlYWQgPSBsaXN0cy5oZWFkKHBhcmFzKTtcbiAgICAgIGlmIChkb20uaXNMaShoZWFkKSkge1xuICAgICAgICB0aGlzLnJlbGVhc2VMaXN0KFtwYXJhc10pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJC5lYWNoKHBhcmFzLCAoaWR4LCBwYXJhKSA9PiB7XG4gICAgICAgICAgJChwYXJhKS5jc3MoJ21hcmdpbkxlZnQnLCAoaWR4LCB2YWwpID0+IHtcbiAgICAgICAgICAgIHZhbCA9IChwYXJzZUludCh2YWwsIDEwKSB8fCAwKTtcbiAgICAgICAgICAgIHJldHVybiB2YWwgPiAyNSA/IHZhbCAtIDI1IDogJyc7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcm5nLnNlbGVjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIHRvZ2dsZSBsaXN0XG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBsaXN0TmFtZSAtIE9MIG9yIFVMXG4gICAqL1xuICB0b2dnbGVMaXN0KGxpc3ROYW1lLCBlZGl0YWJsZSkge1xuICAgIGNvbnN0IHJuZyA9IHJhbmdlLmNyZWF0ZShlZGl0YWJsZSkud3JhcEJvZHlJbmxpbmVXaXRoUGFyYSgpO1xuXG4gICAgbGV0IHBhcmFzID0gcm5nLm5vZGVzKGRvbS5pc1BhcmEsIHsgaW5jbHVkZUFuY2VzdG9yOiB0cnVlIH0pO1xuICAgIGNvbnN0IGJvb2ttYXJrID0gcm5nLnBhcmFCb29rbWFyayhwYXJhcyk7XG4gICAgY29uc3QgY2x1c3RlcmVkcyA9IGxpc3RzLmNsdXN0ZXJCeShwYXJhcywgZnVuYy5wZXEyKCdwYXJlbnROb2RlJykpO1xuXG4gICAgLy8gcGFyYWdyYXBoIHRvIGxpc3RcbiAgICBpZiAobGlzdHMuZmluZChwYXJhcywgZG9tLmlzUHVyZVBhcmEpKSB7XG4gICAgICBsZXQgd3JhcHBlZFBhcmFzID0gW107XG4gICAgICAkLmVhY2goY2x1c3RlcmVkcywgKGlkeCwgcGFyYXMpID0+IHtcbiAgICAgICAgd3JhcHBlZFBhcmFzID0gd3JhcHBlZFBhcmFzLmNvbmNhdCh0aGlzLndyYXBMaXN0KHBhcmFzLCBsaXN0TmFtZSkpO1xuICAgICAgfSk7XG4gICAgICBwYXJhcyA9IHdyYXBwZWRQYXJhcztcbiAgICAvLyBsaXN0IHRvIHBhcmFncmFwaCBvciBjaGFuZ2UgbGlzdCBzdHlsZVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaWZmTGlzdHMgPSBybmcubm9kZXMoZG9tLmlzTGlzdCwge1xuICAgICAgICBpbmNsdWRlQW5jZXN0b3I6IHRydWVcbiAgICAgIH0pLmZpbHRlcigobGlzdE5vZGUpID0+IHtcbiAgICAgICAgcmV0dXJuICEkLm5vZGVOYW1lKGxpc3ROb2RlLCBsaXN0TmFtZSk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKGRpZmZMaXN0cy5sZW5ndGgpIHtcbiAgICAgICAgJC5lYWNoKGRpZmZMaXN0cywgKGlkeCwgbGlzdE5vZGUpID0+IHtcbiAgICAgICAgICBkb20ucmVwbGFjZShsaXN0Tm9kZSwgbGlzdE5hbWUpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmFzID0gdGhpcy5yZWxlYXNlTGlzdChjbHVzdGVyZWRzLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByYW5nZS5jcmVhdGVGcm9tUGFyYUJvb2ttYXJrKGJvb2ttYXJrLCBwYXJhcykuc2VsZWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtOb2RlW119IHBhcmFzXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBsaXN0TmFtZVxuICAgKiBAcmV0dXJuIHtOb2RlW119XG4gICAqL1xuICB3cmFwTGlzdChwYXJhcywgbGlzdE5hbWUpIHtcbiAgICBjb25zdCBoZWFkID0gbGlzdHMuaGVhZChwYXJhcyk7XG4gICAgY29uc3QgbGFzdCA9IGxpc3RzLmxhc3QocGFyYXMpO1xuXG4gICAgY29uc3QgcHJldkxpc3QgPSBkb20uaXNMaXN0KGhlYWQucHJldmlvdXNTaWJsaW5nKSAmJiBoZWFkLnByZXZpb3VzU2libGluZztcbiAgICBjb25zdCBuZXh0TGlzdCA9IGRvbS5pc0xpc3QobGFzdC5uZXh0U2libGluZykgJiYgbGFzdC5uZXh0U2libGluZztcblxuICAgIGNvbnN0IGxpc3ROb2RlID0gcHJldkxpc3QgfHwgZG9tLmluc2VydEFmdGVyKGRvbS5jcmVhdGUobGlzdE5hbWUgfHwgJ1VMJyksIGxhc3QpO1xuXG4gICAgLy8gUCB0byBMSVxuICAgIHBhcmFzID0gcGFyYXMubWFwKChwYXJhKSA9PiB7XG4gICAgICByZXR1cm4gZG9tLmlzUHVyZVBhcmEocGFyYSkgPyBkb20ucmVwbGFjZShwYXJhLCAnTEknKSA6IHBhcmE7XG4gICAgfSk7XG5cbiAgICAvLyBhcHBlbmQgdG8gbGlzdCg8dWw+LCA8b2w+KVxuICAgIGRvbS5hcHBlbmRDaGlsZE5vZGVzKGxpc3ROb2RlLCBwYXJhcyk7XG5cbiAgICBpZiAobmV4dExpc3QpIHtcbiAgICAgIGRvbS5hcHBlbmRDaGlsZE5vZGVzKGxpc3ROb2RlLCBsaXN0cy5mcm9tKG5leHRMaXN0LmNoaWxkTm9kZXMpKTtcbiAgICAgIGRvbS5yZW1vdmUobmV4dExpc3QpO1xuICAgIH1cblxuICAgIHJldHVybiBwYXJhcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIHJlbGVhc2VMaXN0XG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXlbXX0gY2x1c3RlcmVkc1xuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzRXNjYXBzZVRvQm9keVxuICAgKiBAcmV0dXJuIHtOb2RlW119XG4gICAqL1xuICByZWxlYXNlTGlzdChjbHVzdGVyZWRzLCBpc0VzY2Fwc2VUb0JvZHkpIHtcbiAgICBsZXQgcmVsZWFzZWRQYXJhcyA9IFtdO1xuXG4gICAgJC5lYWNoKGNsdXN0ZXJlZHMsIChpZHgsIHBhcmFzKSA9PiB7XG4gICAgICBjb25zdCBoZWFkID0gbGlzdHMuaGVhZChwYXJhcyk7XG4gICAgICBjb25zdCBsYXN0ID0gbGlzdHMubGFzdChwYXJhcyk7XG5cbiAgICAgIGNvbnN0IGhlYWRMaXN0ID0gaXNFc2NhcHNlVG9Cb2R5ID8gZG9tLmxhc3RBbmNlc3RvcihoZWFkLCBkb20uaXNMaXN0KSA6IGhlYWQucGFyZW50Tm9kZTtcbiAgICAgIGNvbnN0IGxhc3RMaXN0ID0gaGVhZExpc3QuY2hpbGROb2Rlcy5sZW5ndGggPiAxID8gZG9tLnNwbGl0VHJlZShoZWFkTGlzdCwge1xuICAgICAgICBub2RlOiBsYXN0LnBhcmVudE5vZGUsXG4gICAgICAgIG9mZnNldDogZG9tLnBvc2l0aW9uKGxhc3QpICsgMVxuICAgICAgfSwge1xuICAgICAgICBpc1NraXBQYWRkaW5nQmxhbmtIVE1MOiB0cnVlXG4gICAgICB9KSA6IG51bGw7XG5cbiAgICAgIGNvbnN0IG1pZGRsZUxpc3QgPSBkb20uc3BsaXRUcmVlKGhlYWRMaXN0LCB7XG4gICAgICAgIG5vZGU6IGhlYWQucGFyZW50Tm9kZSxcbiAgICAgICAgb2Zmc2V0OiBkb20ucG9zaXRpb24oaGVhZClcbiAgICAgIH0sIHtcbiAgICAgICAgaXNTa2lwUGFkZGluZ0JsYW5rSFRNTDogdHJ1ZVxuICAgICAgfSk7XG5cbiAgICAgIHBhcmFzID0gaXNFc2NhcHNlVG9Cb2R5ID8gZG9tLmxpc3REZXNjZW5kYW50KG1pZGRsZUxpc3QsIGRvbS5pc0xpKVxuICAgICAgICA6IGxpc3RzLmZyb20obWlkZGxlTGlzdC5jaGlsZE5vZGVzKS5maWx0ZXIoZG9tLmlzTGkpO1xuXG4gICAgICAvLyBMSSB0byBQXG4gICAgICBpZiAoaXNFc2NhcHNlVG9Cb2R5IHx8ICFkb20uaXNMaXN0KGhlYWRMaXN0LnBhcmVudE5vZGUpKSB7XG4gICAgICAgIHBhcmFzID0gcGFyYXMubWFwKChwYXJhKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGRvbS5yZXBsYWNlKHBhcmEsICdQJyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAkLmVhY2gobGlzdHMuZnJvbShwYXJhcykucmV2ZXJzZSgpLCAoaWR4LCBwYXJhKSA9PiB7XG4gICAgICAgIGRvbS5pbnNlcnRBZnRlcihwYXJhLCBoZWFkTGlzdCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gcmVtb3ZlIGVtcHR5IGxpc3RzXG4gICAgICBjb25zdCByb290TGlzdHMgPSBsaXN0cy5jb21wYWN0KFtoZWFkTGlzdCwgbWlkZGxlTGlzdCwgbGFzdExpc3RdKTtcbiAgICAgICQuZWFjaChyb290TGlzdHMsIChpZHgsIHJvb3RMaXN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGxpc3ROb2RlcyA9IFtyb290TGlzdF0uY29uY2F0KGRvbS5saXN0RGVzY2VuZGFudChyb290TGlzdCwgZG9tLmlzTGlzdCkpO1xuICAgICAgICAkLmVhY2gobGlzdE5vZGVzLnJldmVyc2UoKSwgKGlkeCwgbGlzdE5vZGUpID0+IHtcbiAgICAgICAgICBpZiAoIWRvbS5ub2RlTGVuZ3RoKGxpc3ROb2RlKSkge1xuICAgICAgICAgICAgZG9tLnJlbW92ZShsaXN0Tm9kZSwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICByZWxlYXNlZFBhcmFzID0gcmVsZWFzZWRQYXJhcy5jb25jYXQocGFyYXMpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlbGVhc2VkUGFyYXM7XG4gIH1cbn1cbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgZG9tIGZyb20gJy4uL2NvcmUvZG9tJztcbmltcG9ydCByYW5nZSBmcm9tICcuLi9jb3JlL3JhbmdlJztcbmltcG9ydCBCdWxsZXQgZnJvbSAnLi4vZWRpdGluZy9CdWxsZXQnO1xuXG4vKipcbiAqIEBjbGFzcyBlZGl0aW5nLlR5cGluZ1xuICpcbiAqIFR5cGluZ1xuICpcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVHlwaW5nIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gYSBCdWxsZXQgaW5zdGFuY2UgdG8gdG9nZ2xlIGxpc3RzIG9mZlxuICAgIHRoaXMuYnVsbGV0ID0gbmV3IEJ1bGxldCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIGluc2VydCB0YWJcbiAgICpcbiAgICogQHBhcmFtIHtXcmFwcGVkUmFuZ2V9IHJuZ1xuICAgKiBAcGFyYW0ge051bWJlcn0gdGFic2l6ZVxuICAgKi9cbiAgaW5zZXJ0VGFiKHJuZywgdGFic2l6ZSkge1xuICAgIGNvbnN0IHRhYiA9IGRvbS5jcmVhdGVUZXh0KG5ldyBBcnJheSh0YWJzaXplICsgMSkuam9pbihkb20uTkJTUF9DSEFSKSk7XG4gICAgcm5nID0gcm5nLmRlbGV0ZUNvbnRlbnRzKCk7XG4gICAgcm5nLmluc2VydE5vZGUodGFiLCB0cnVlKTtcblxuICAgIHJuZyA9IHJhbmdlLmNyZWF0ZSh0YWIsIHRhYnNpemUpO1xuICAgIHJuZy5zZWxlY3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBpbnNlcnQgcGFyYWdyYXBoXG4gICAqL1xuICBpbnNlcnRQYXJhZ3JhcGgoZWRpdGFibGUpIHtcbiAgICBsZXQgcm5nID0gcmFuZ2UuY3JlYXRlKGVkaXRhYmxlKTtcblxuICAgIC8vIGRlbGV0ZUNvbnRlbnRzIG9uIHJhbmdlLlxuICAgIHJuZyA9IHJuZy5kZWxldGVDb250ZW50cygpO1xuXG4gICAgLy8gV3JhcCByYW5nZSBpZiBpdCBuZWVkcyB0byBiZSB3cmFwcGVkIGJ5IHBhcmFncmFwaFxuICAgIHJuZyA9IHJuZy53cmFwQm9keUlubGluZVdpdGhQYXJhKCk7XG5cbiAgICAvLyBmaW5kaW5nIHBhcmFncmFwaFxuICAgIGNvbnN0IHNwbGl0Um9vdCA9IGRvbS5hbmNlc3Rvcihybmcuc2MsIGRvbS5pc1BhcmEpO1xuXG4gICAgbGV0IG5leHRQYXJhO1xuICAgIC8vIG9uIHBhcmFncmFwaDogc3BsaXQgcGFyYWdyYXBoXG4gICAgaWYgKHNwbGl0Um9vdCkge1xuICAgICAgLy8gaWYgaXQgaXMgYW4gZW1wdHkgbGluZSB3aXRoIGxpXG4gICAgICBpZiAoZG9tLmlzRW1wdHkoc3BsaXRSb290KSAmJiBkb20uaXNMaShzcGxpdFJvb3QpKSB7XG4gICAgICAgIC8vIHRvb2dsZSBVTC9PTCBhbmQgZXNjYXBlXG4gICAgICAgIHRoaXMuYnVsbGV0LnRvZ2dsZUxpc3Qoc3BsaXRSb290LnBhcmVudE5vZGUubm9kZU5hbWUpO1xuICAgICAgICByZXR1cm47XG4gICAgICAvLyBpZiBpdCBpcyBhbiBlbXB0eSBsaW5lIHdpdGggcGFyYSBvbiBibG9ja3F1b3RlXG4gICAgICB9IGVsc2UgaWYgKGRvbS5pc0VtcHR5KHNwbGl0Um9vdCkgJiYgZG9tLmlzUGFyYShzcGxpdFJvb3QpICYmIGRvbS5pc0Jsb2NrcXVvdGUoc3BsaXRSb290LnBhcmVudE5vZGUpKSB7XG4gICAgICAgIC8vIGVzY2FwZSBibG9ja3F1b3RlXG4gICAgICAgIGRvbS5pbnNlcnRBZnRlcihzcGxpdFJvb3QsIHNwbGl0Um9vdC5wYXJlbnROb2RlKTtcbiAgICAgICAgbmV4dFBhcmEgPSBzcGxpdFJvb3Q7XG4gICAgICAvLyBpZiBuZXcgbGluZSBoYXMgY29udGVudCAobm90IGEgbGluZSBicmVhaylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHRQYXJhID0gZG9tLnNwbGl0VHJlZShzcGxpdFJvb3QsIHJuZy5nZXRTdGFydFBvaW50KCkpO1xuXG4gICAgICAgIGxldCBlbXB0eUFuY2hvcnMgPSBkb20ubGlzdERlc2NlbmRhbnQoc3BsaXRSb290LCBkb20uaXNFbXB0eUFuY2hvcik7XG4gICAgICAgIGVtcHR5QW5jaG9ycyA9IGVtcHR5QW5jaG9ycy5jb25jYXQoZG9tLmxpc3REZXNjZW5kYW50KG5leHRQYXJhLCBkb20uaXNFbXB0eUFuY2hvcikpO1xuXG4gICAgICAgICQuZWFjaChlbXB0eUFuY2hvcnMsIChpZHgsIGFuY2hvcikgPT4ge1xuICAgICAgICAgIGRvbS5yZW1vdmUoYW5jaG9yKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gcmVwbGFjZSBlbXB0eSBoZWFkaW5nLCBwcmUgb3IgY3VzdG9tLW1hZGUgc3R5bGVUYWcgd2l0aCBQIHRhZ1xuICAgICAgICBpZiAoKGRvbS5pc0hlYWRpbmcobmV4dFBhcmEpIHx8IGRvbS5pc1ByZShuZXh0UGFyYSkgfHwgZG9tLmlzQ3VzdG9tU3R5bGVUYWcobmV4dFBhcmEpKSAmJiBkb20uaXNFbXB0eShuZXh0UGFyYSkpIHtcbiAgICAgICAgICBuZXh0UGFyYSA9IGRvbS5yZXBsYWNlKG5leHRQYXJhLCAncCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgLy8gbm8gcGFyYWdyYXBoOiBpbnNlcnQgZW1wdHkgcGFyYWdyYXBoXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG5leHQgPSBybmcuc2MuY2hpbGROb2Rlc1tybmcuc29dO1xuICAgICAgbmV4dFBhcmEgPSAkKGRvbS5lbXB0eVBhcmEpWzBdO1xuICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgcm5nLnNjLmluc2VydEJlZm9yZShuZXh0UGFyYSwgbmV4dCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBybmcuc2MuYXBwZW5kQ2hpbGQobmV4dFBhcmEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJhbmdlLmNyZWF0ZShuZXh0UGFyYSwgMCkubm9ybWFsaXplKCkuc2VsZWN0KCkuc2Nyb2xsSW50b1ZpZXcoZWRpdGFibGUpO1xuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGRvbSBmcm9tICcuLi9jb3JlL2RvbSc7XG5pbXBvcnQgcmFuZ2UgZnJvbSAnLi4vY29yZS9yYW5nZSc7XG5pbXBvcnQgbGlzdHMgZnJvbSAnLi4vY29yZS9saXN0cyc7XG5cbi8qKlxuICogQGNsYXNzIENyZWF0ZSBhIHZpcnR1YWwgdGFibGUgdG8gY3JlYXRlIHdoYXQgYWN0aW9ucyB0byBkbyBpbiBjaGFuZ2UuXG4gKiBAcGFyYW0ge29iamVjdH0gc3RhcnRQb2ludCBDZWxsIHNlbGVjdGVkIHRvIGFwcGx5IGNoYW5nZS5cbiAqIEBwYXJhbSB7ZW51bX0gd2hlcmUgIFdoZXJlIGNoYW5nZSB3aWxsIGJlIGFwcGxpZWQgUm93IG9yIENvbC4gVXNlIGVudW06IFRhYmxlUmVzdWx0QWN0aW9uLndoZXJlXG4gKiBAcGFyYW0ge2VudW19IGFjdGlvbiBBY3Rpb24gdG8gYmUgYXBwbGllZC4gVXNlIGVudW06IFRhYmxlUmVzdWx0QWN0aW9uLnJlcXVlc3RBY3Rpb25cbiAqIEBwYXJhbSB7b2JqZWN0fSBkb21UYWJsZSBEb20gZWxlbWVudCBvZiB0YWJsZSB0byBtYWtlIGNoYW5nZXMuXG4gKi9cbmNvbnN0IFRhYmxlUmVzdWx0QWN0aW9uID0gZnVuY3Rpb24oc3RhcnRQb2ludCwgd2hlcmUsIGFjdGlvbiwgZG9tVGFibGUpIHtcbiAgY29uc3QgX3N0YXJ0UG9pbnQgPSB7ICdjb2xQb3MnOiAwLCAncm93UG9zJzogMCB9O1xuICBjb25zdCBfdmlydHVhbFRhYmxlID0gW107XG4gIGNvbnN0IF9hY3Rpb25DZWxsTGlzdCA9IFtdO1xuXG4gIC8vLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vIFByaXZhdGUgZnVuY3Rpb25zXG4gIC8vLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgLyoqXG4gICAqIFNldCB0aGUgc3RhcnRQb2ludCBvZiBhY3Rpb24uXG4gICAqL1xuICBmdW5jdGlvbiBzZXRTdGFydFBvaW50KCkge1xuICAgIGlmICghc3RhcnRQb2ludCB8fCAhc3RhcnRQb2ludC50YWdOYW1lIHx8IChzdGFydFBvaW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ3RkJyAmJiBzdGFydFBvaW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gJ3RoJykpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ltcG9zc2libGUgdG8gaWRlbnRpZnkgc3RhcnQgQ2VsbCBwb2ludC4nLCBzdGFydFBvaW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgX3N0YXJ0UG9pbnQuY29sUG9zID0gc3RhcnRQb2ludC5jZWxsSW5kZXg7XG4gICAgaWYgKCFzdGFydFBvaW50LnBhcmVudEVsZW1lbnQgfHwgIXN0YXJ0UG9pbnQucGFyZW50RWxlbWVudC50YWdOYW1lIHx8IHN0YXJ0UG9pbnQucGFyZW50RWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICd0cicpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ltcG9zc2libGUgdG8gaWRlbnRpZnkgc3RhcnQgUm93IHBvaW50LicsIHN0YXJ0UG9pbnQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBfc3RhcnRQb2ludC5yb3dQb3MgPSBzdGFydFBvaW50LnBhcmVudEVsZW1lbnQucm93SW5kZXg7XG4gIH1cblxuICAvKipcbiAgICogRGVmaW5lIHZpcnR1YWwgdGFibGUgcG9zaXRpb24gaW5mbyBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7aW50fSByb3dJbmRleCBJbmRleCBwb3NpdGlvbiBpbiBsaW5lIG9mIHZpcnR1YWwgdGFibGUuXG4gICAqIEBwYXJhbSB7aW50fSBjZWxsSW5kZXggSW5kZXggcG9zaXRpb24gaW4gY29sdW1uIG9mIHZpcnR1YWwgdGFibGUuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBiYXNlUm93IFJvdyBhZmZlY3RlZCBieSB0aGlzIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0ge29iamVjdH0gYmFzZUNlbGwgQ2VsbCBhZmZlY3RlZCBieSB0aGlzIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0ge2Jvb2x9IGlzU3BhbiBJbmZvcm0gaWYgaXQgaXMgYW4gc3BhbiBjZWxsL3Jvdy5cbiAgICovXG4gIGZ1bmN0aW9uIHNldFZpcnR1YWxUYWJsZVBvc2l0aW9uKHJvd0luZGV4LCBjZWxsSW5kZXgsIGJhc2VSb3csIGJhc2VDZWxsLCBpc1Jvd1NwYW4sIGlzQ29sU3BhbiwgaXNWaXJ0dWFsQ2VsbCkge1xuICAgIGNvbnN0IG9ialBvc2l0aW9uID0ge1xuICAgICAgJ2Jhc2VSb3cnOiBiYXNlUm93LFxuICAgICAgJ2Jhc2VDZWxsJzogYmFzZUNlbGwsXG4gICAgICAnaXNSb3dTcGFuJzogaXNSb3dTcGFuLFxuICAgICAgJ2lzQ29sU3Bhbic6IGlzQ29sU3BhbixcbiAgICAgICdpc1ZpcnR1YWwnOiBpc1ZpcnR1YWxDZWxsXG4gICAgfTtcbiAgICBpZiAoIV92aXJ0dWFsVGFibGVbcm93SW5kZXhdKSB7XG4gICAgICBfdmlydHVhbFRhYmxlW3Jvd0luZGV4XSA9IFtdO1xuICAgIH1cbiAgICBfdmlydHVhbFRhYmxlW3Jvd0luZGV4XVtjZWxsSW5kZXhdID0gb2JqUG9zaXRpb247XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFjdGlvbiBjZWxsIG9iamVjdC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IHZpcnR1YWxUYWJsZUNlbGxPYmogT2JqZWN0IG9mIHNwZWNpZmljIHBvc2l0aW9uIG9uIHZpcnR1YWwgdGFibGUuXG4gICAqIEBwYXJhbSB7ZW51bX0gcmVzdWx0QWN0aW9uIEFjdGlvbiB0byBiZSBhcHBsaWVkIGluIHRoYXQgaXRlbS5cbiAgICovXG4gIGZ1bmN0aW9uIGdldEFjdGlvbkNlbGwodmlydHVhbFRhYmxlQ2VsbE9iaiwgcmVzdWx0QWN0aW9uLCB2aXJ0dWFsUm93UG9zaXRpb24sIHZpcnR1YWxDb2xQb3NpdGlvbikge1xuICAgIHJldHVybiB7XG4gICAgICAnYmFzZUNlbGwnOiB2aXJ0dWFsVGFibGVDZWxsT2JqLmJhc2VDZWxsLFxuICAgICAgJ2FjdGlvbic6IHJlc3VsdEFjdGlvbixcbiAgICAgICd2aXJ0dWFsVGFibGUnOiB7XG4gICAgICAgICdyb3dJbmRleCc6IHZpcnR1YWxSb3dQb3NpdGlvbixcbiAgICAgICAgJ2NlbGxJbmRleCc6IHZpcnR1YWxDb2xQb3NpdGlvblxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmVjb3ZlciBmcmVlIGluZGV4IG9mIHJvdyB0byBhcHBlbmQgQ2VsbC5cbiAgICpcbiAgICogQHBhcmFtIHtpbnR9IHJvd0luZGV4IEluZGV4IG9mIHJvdyB0byBmaW5kIGZyZWUgc3BhY2UuXG4gICAqIEBwYXJhbSB7aW50fSBjZWxsSW5kZXggSW5kZXggb2YgY2VsbCB0byBmaW5kIGZyZWUgc3BhY2UgaW4gdGFibGUuXG4gICAqL1xuICBmdW5jdGlvbiByZWNvdmVyQ2VsbEluZGV4KHJvd0luZGV4LCBjZWxsSW5kZXgpIHtcbiAgICBpZiAoIV92aXJ0dWFsVGFibGVbcm93SW5kZXhdKSB7XG4gICAgICByZXR1cm4gY2VsbEluZGV4O1xuICAgIH1cbiAgICBpZiAoIV92aXJ0dWFsVGFibGVbcm93SW5kZXhdW2NlbGxJbmRleF0pIHtcbiAgICAgIHJldHVybiBjZWxsSW5kZXg7XG4gICAgfVxuXG4gICAgbGV0IG5ld0NlbGxJbmRleCA9IGNlbGxJbmRleDtcbiAgICB3aGlsZSAoX3ZpcnR1YWxUYWJsZVtyb3dJbmRleF1bbmV3Q2VsbEluZGV4XSkge1xuICAgICAgbmV3Q2VsbEluZGV4Kys7XG4gICAgICBpZiAoIV92aXJ0dWFsVGFibGVbcm93SW5kZXhdW25ld0NlbGxJbmRleF0pIHtcbiAgICAgICAgcmV0dXJuIG5ld0NlbGxJbmRleDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVjb3ZlciBpbmZvIGFib3V0IHJvdyBhbmQgY2VsbCBhbmQgYWRkIGluZm9ybWF0aW9uIHRvIHZpcnR1YWwgdGFibGUuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSByb3cgUm93IHRvIHJlY292ZXIgaW5mb3JtYXRpb24uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjZWxsIENlbGwgdG8gcmVjb3ZlciBpbmZvcm1hdGlvbi5cbiAgICovXG4gIGZ1bmN0aW9uIGFkZENlbGxJbmZvVG9WaXJ0dWFsKHJvdywgY2VsbCkge1xuICAgIGNvbnN0IGNlbGxJbmRleCA9IHJlY292ZXJDZWxsSW5kZXgocm93LnJvd0luZGV4LCBjZWxsLmNlbGxJbmRleCk7XG4gICAgY29uc3QgY2VsbEhhc0NvbHNwYW4gPSAoY2VsbC5jb2xTcGFuID4gMSk7XG4gICAgY29uc3QgY2VsbEhhc1Jvd3NwYW4gPSAoY2VsbC5yb3dTcGFuID4gMSk7XG4gICAgY29uc3QgaXNUaGlzU2VsZWN0ZWRDZWxsID0gKHJvdy5yb3dJbmRleCA9PT0gX3N0YXJ0UG9pbnQucm93UG9zICYmIGNlbGwuY2VsbEluZGV4ID09PSBfc3RhcnRQb2ludC5jb2xQb3MpO1xuICAgIHNldFZpcnR1YWxUYWJsZVBvc2l0aW9uKHJvdy5yb3dJbmRleCwgY2VsbEluZGV4LCByb3csIGNlbGwsIGNlbGxIYXNSb3dzcGFuLCBjZWxsSGFzQ29sc3BhbiwgZmFsc2UpO1xuXG4gICAgLy8gQWRkIHNwYW4gcm93cyB0byB2aXJ0dWFsIFRhYmxlLlxuICAgIGNvbnN0IHJvd3NwYW5OdW1iZXIgPSBjZWxsLmF0dHJpYnV0ZXMucm93U3BhbiA/IHBhcnNlSW50KGNlbGwuYXR0cmlidXRlcy5yb3dTcGFuLnZhbHVlLCAxMCkgOiAwO1xuICAgIGlmIChyb3dzcGFuTnVtYmVyID4gMSkge1xuICAgICAgZm9yIChsZXQgcnAgPSAxOyBycCA8IHJvd3NwYW5OdW1iZXI7IHJwKyspIHtcbiAgICAgICAgY29uc3Qgcm93c3BhbkluZGV4ID0gcm93LnJvd0luZGV4ICsgcnA7XG4gICAgICAgIGFkanVzdFN0YXJ0UG9pbnQocm93c3BhbkluZGV4LCBjZWxsSW5kZXgsIGNlbGwsIGlzVGhpc1NlbGVjdGVkQ2VsbCk7XG4gICAgICAgIHNldFZpcnR1YWxUYWJsZVBvc2l0aW9uKHJvd3NwYW5JbmRleCwgY2VsbEluZGV4LCByb3csIGNlbGwsIHRydWUsIGNlbGxIYXNDb2xzcGFuLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBZGQgc3BhbiBjb2xzIHRvIHZpcnR1YWwgdGFibGUuXG4gICAgY29uc3QgY29sc3Bhbk51bWJlciA9IGNlbGwuYXR0cmlidXRlcy5jb2xTcGFuID8gcGFyc2VJbnQoY2VsbC5hdHRyaWJ1dGVzLmNvbFNwYW4udmFsdWUsIDEwKSA6IDA7XG4gICAgaWYgKGNvbHNwYW5OdW1iZXIgPiAxKSB7XG4gICAgICBmb3IgKGxldCBjcCA9IDE7IGNwIDwgY29sc3Bhbk51bWJlcjsgY3ArKykge1xuICAgICAgICBjb25zdCBjZWxsc3BhbkluZGV4ID0gcmVjb3ZlckNlbGxJbmRleChyb3cucm93SW5kZXgsIChjZWxsSW5kZXggKyBjcCkpO1xuICAgICAgICBhZGp1c3RTdGFydFBvaW50KHJvdy5yb3dJbmRleCwgY2VsbHNwYW5JbmRleCwgY2VsbCwgaXNUaGlzU2VsZWN0ZWRDZWxsKTtcbiAgICAgICAgc2V0VmlydHVhbFRhYmxlUG9zaXRpb24ocm93LnJvd0luZGV4LCBjZWxsc3BhbkluZGV4LCByb3csIGNlbGwsIGNlbGxIYXNSb3dzcGFuLCB0cnVlLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHJvY2VzcyB2YWxpZGF0aW9uIGFuZCBhZGp1c3Qgb2Ygc3RhcnQgcG9pbnQgaWYgbmVlZGVkXG4gICAqXG4gICAqIEBwYXJhbSB7aW50fSByb3dJbmRleFxuICAgKiBAcGFyYW0ge2ludH0gY2VsbEluZGV4XG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjZWxsXG4gICAqIEBwYXJhbSB7Ym9vbH0gaXNTZWxlY3RlZENlbGxcbiAgICovXG4gIGZ1bmN0aW9uIGFkanVzdFN0YXJ0UG9pbnQocm93SW5kZXgsIGNlbGxJbmRleCwgY2VsbCwgaXNTZWxlY3RlZENlbGwpIHtcbiAgICBpZiAocm93SW5kZXggPT09IF9zdGFydFBvaW50LnJvd1BvcyAmJiBfc3RhcnRQb2ludC5jb2xQb3MgPj0gY2VsbC5jZWxsSW5kZXggJiYgY2VsbC5jZWxsSW5kZXggPD0gY2VsbEluZGV4ICYmICFpc1NlbGVjdGVkQ2VsbCkge1xuICAgICAgX3N0YXJ0UG9pbnQuY29sUG9zKys7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSB2aXJ0dWFsIHRhYmxlIG9mIGNlbGxzIHdpdGggYWxsIGNlbGxzLCBpbmNsdWRpbmcgc3BhbiBjZWxscy5cbiAgICovXG4gIGZ1bmN0aW9uIGNyZWF0ZVZpcnR1YWxUYWJsZSgpIHtcbiAgICBjb25zdCByb3dzID0gZG9tVGFibGUucm93cztcbiAgICBmb3IgKGxldCByb3dJbmRleCA9IDA7IHJvd0luZGV4IDwgcm93cy5sZW5ndGg7IHJvd0luZGV4KyspIHtcbiAgICAgIGNvbnN0IGNlbGxzID0gcm93c1tyb3dJbmRleF0uY2VsbHM7XG4gICAgICBmb3IgKGxldCBjZWxsSW5kZXggPSAwOyBjZWxsSW5kZXggPCBjZWxscy5sZW5ndGg7IGNlbGxJbmRleCsrKSB7XG4gICAgICAgIGFkZENlbGxJbmZvVG9WaXJ0dWFsKHJvd3Nbcm93SW5kZXhdLCBjZWxsc1tjZWxsSW5kZXhdKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFjdGlvbiB0byBiZSBhcHBsaWVkIG9uIHRoZSBjZWxsLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gY2VsbCB2aXJ0dWFsIHRhYmxlIGNlbGwgdG8gYXBwbHkgYWN0aW9uXG4gICAqL1xuICBmdW5jdGlvbiBnZXREZWxldGVSZXN1bHRBY3Rpb25Ub0NlbGwoY2VsbCkge1xuICAgIHN3aXRjaCAod2hlcmUpIHtcbiAgICAgIGNhc2UgVGFibGVSZXN1bHRBY3Rpb24ud2hlcmUuQ29sdW1uOlxuICAgICAgICBpZiAoY2VsbC5pc0NvbFNwYW4pIHtcbiAgICAgICAgICByZXR1cm4gVGFibGVSZXN1bHRBY3Rpb24ucmVzdWx0QWN0aW9uLlN1YnRyYWN0U3BhbkNvdW50O1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBUYWJsZVJlc3VsdEFjdGlvbi53aGVyZS5Sb3c6XG4gICAgICAgIGlmICghY2VsbC5pc1ZpcnR1YWwgJiYgY2VsbC5pc1Jvd1NwYW4pIHtcbiAgICAgICAgICByZXR1cm4gVGFibGVSZXN1bHRBY3Rpb24ucmVzdWx0QWN0aW9uLkFkZENlbGw7XG4gICAgICAgIH0gZWxzZSBpZiAoY2VsbC5pc1Jvd1NwYW4pIHtcbiAgICAgICAgICByZXR1cm4gVGFibGVSZXN1bHRBY3Rpb24ucmVzdWx0QWN0aW9uLlN1YnRyYWN0U3BhbkNvdW50O1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gVGFibGVSZXN1bHRBY3Rpb24ucmVzdWx0QWN0aW9uLlJlbW92ZUNlbGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFjdGlvbiB0byBiZSBhcHBsaWVkIG9uIHRoZSBjZWxsLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gY2VsbCB2aXJ0dWFsIHRhYmxlIGNlbGwgdG8gYXBwbHkgYWN0aW9uXG4gICAqL1xuICBmdW5jdGlvbiBnZXRBZGRSZXN1bHRBY3Rpb25Ub0NlbGwoY2VsbCkge1xuICAgIHN3aXRjaCAod2hlcmUpIHtcbiAgICAgIGNhc2UgVGFibGVSZXN1bHRBY3Rpb24ud2hlcmUuQ29sdW1uOlxuICAgICAgICBpZiAoY2VsbC5pc0NvbFNwYW4pIHtcbiAgICAgICAgICByZXR1cm4gVGFibGVSZXN1bHRBY3Rpb24ucmVzdWx0QWN0aW9uLlN1bVNwYW5Db3VudDtcbiAgICAgICAgfSBlbHNlIGlmIChjZWxsLmlzUm93U3BhbiAmJiBjZWxsLmlzVmlydHVhbCkge1xuICAgICAgICAgIHJldHVybiBUYWJsZVJlc3VsdEFjdGlvbi5yZXN1bHRBY3Rpb24uSWdub3JlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBUYWJsZVJlc3VsdEFjdGlvbi53aGVyZS5Sb3c6XG4gICAgICAgIGlmIChjZWxsLmlzUm93U3Bhbikge1xuICAgICAgICAgIHJldHVybiBUYWJsZVJlc3VsdEFjdGlvbi5yZXN1bHRBY3Rpb24uU3VtU3BhbkNvdW50O1xuICAgICAgICB9IGVsc2UgaWYgKGNlbGwuaXNDb2xTcGFuICYmIGNlbGwuaXNWaXJ0dWFsKSB7XG4gICAgICAgICAgcmV0dXJuIFRhYmxlUmVzdWx0QWN0aW9uLnJlc3VsdEFjdGlvbi5JZ25vcmU7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBUYWJsZVJlc3VsdEFjdGlvbi5yZXN1bHRBY3Rpb24uQWRkQ2VsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgc2V0U3RhcnRQb2ludCgpO1xuICAgIGNyZWF0ZVZpcnR1YWxUYWJsZSgpO1xuICB9XG5cbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgLy8gUHVibGljIGZ1bmN0aW9uc1xuICAvLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIC8qKlxuICAgKiBSZWNvdmVyIGFycmF5IG9zIHdoYXQgdG8gZG8gaW4gdGFibGUuXG4gICAqL1xuICB0aGlzLmdldEFjdGlvbkxpc3QgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zdCBmaXhlZFJvdyA9ICh3aGVyZSA9PT0gVGFibGVSZXN1bHRBY3Rpb24ud2hlcmUuUm93KSA/IF9zdGFydFBvaW50LnJvd1BvcyA6IC0xO1xuICAgIGNvbnN0IGZpeGVkQ29sID0gKHdoZXJlID09PSBUYWJsZVJlc3VsdEFjdGlvbi53aGVyZS5Db2x1bW4pID8gX3N0YXJ0UG9pbnQuY29sUG9zIDogLTE7XG5cbiAgICBsZXQgYWN0dWFsUG9zaXRpb24gPSAwO1xuICAgIGxldCBjYW5Db250aW51ZSA9IHRydWU7XG4gICAgd2hpbGUgKGNhbkNvbnRpbnVlKSB7XG4gICAgICBjb25zdCByb3dQb3NpdGlvbiA9IChmaXhlZFJvdyA+PSAwKSA/IGZpeGVkUm93IDogYWN0dWFsUG9zaXRpb247XG4gICAgICBjb25zdCBjb2xQb3NpdGlvbiA9IChmaXhlZENvbCA+PSAwKSA/IGZpeGVkQ29sIDogYWN0dWFsUG9zaXRpb247XG4gICAgICBjb25zdCByb3cgPSBfdmlydHVhbFRhYmxlW3Jvd1Bvc2l0aW9uXTtcbiAgICAgIGlmICghcm93KSB7XG4gICAgICAgIGNhbkNvbnRpbnVlID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBfYWN0aW9uQ2VsbExpc3Q7XG4gICAgICB9XG4gICAgICBjb25zdCBjZWxsID0gcm93W2NvbFBvc2l0aW9uXTtcbiAgICAgIGlmICghY2VsbCkge1xuICAgICAgICBjYW5Db250aW51ZSA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gX2FjdGlvbkNlbGxMaXN0O1xuICAgICAgfVxuXG4gICAgICAvLyBEZWZpbmUgYWN0aW9uIHRvIGJlIGFwcGxpZWQgaW4gdGhpcyBjZWxsXG4gICAgICBsZXQgcmVzdWx0QWN0aW9uID0gVGFibGVSZXN1bHRBY3Rpb24ucmVzdWx0QWN0aW9uLklnbm9yZTtcbiAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICAgIGNhc2UgVGFibGVSZXN1bHRBY3Rpb24ucmVxdWVzdEFjdGlvbi5BZGQ6XG4gICAgICAgICAgcmVzdWx0QWN0aW9uID0gZ2V0QWRkUmVzdWx0QWN0aW9uVG9DZWxsKGNlbGwpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFRhYmxlUmVzdWx0QWN0aW9uLnJlcXVlc3RBY3Rpb24uRGVsZXRlOlxuICAgICAgICAgIHJlc3VsdEFjdGlvbiA9IGdldERlbGV0ZVJlc3VsdEFjdGlvblRvQ2VsbChjZWxsKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIF9hY3Rpb25DZWxsTGlzdC5wdXNoKGdldEFjdGlvbkNlbGwoY2VsbCwgcmVzdWx0QWN0aW9uLCByb3dQb3NpdGlvbiwgY29sUG9zaXRpb24pKTtcbiAgICAgIGFjdHVhbFBvc2l0aW9uKys7XG4gICAgfVxuXG4gICAgcmV0dXJuIF9hY3Rpb25DZWxsTGlzdDtcbiAgfTtcblxuICBpbml0KCk7XG59O1xuLyoqXG4qXG4qIFdoZXJlIGFjdGlvbiBvY2NvdXJzIGVudW0uXG4qL1xuVGFibGVSZXN1bHRBY3Rpb24ud2hlcmUgPSB7ICdSb3cnOiAwLCAnQ29sdW1uJzogMSB9O1xuLyoqXG4qXG4qIFJlcXVlc3RlZCBhY3Rpb24gdG8gYXBwbHkgZW51bS5cbiovXG5UYWJsZVJlc3VsdEFjdGlvbi5yZXF1ZXN0QWN0aW9uID0geyAnQWRkJzogMCwgJ0RlbGV0ZSc6IDEgfTtcbi8qKlxuKlxuKiBSZXN1bHQgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIGVudW0uXG4qL1xuVGFibGVSZXN1bHRBY3Rpb24ucmVzdWx0QWN0aW9uID0geyAnSWdub3JlJzogMCwgJ1N1YnRyYWN0U3BhbkNvdW50JzogMSwgJ1JlbW92ZUNlbGwnOiAyLCAnQWRkQ2VsbCc6IDMsICdTdW1TcGFuQ291bnQnOiA0IH07XG5cbi8qKlxuICpcbiAqIEBjbGFzcyBlZGl0aW5nLlRhYmxlXG4gKlxuICogVGFibGVcbiAqXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhYmxlIHtcbiAgLyoqXG4gICAqIGhhbmRsZSB0YWIga2V5XG4gICAqXG4gICAqIEBwYXJhbSB7V3JhcHBlZFJhbmdlfSBybmdcbiAgICogQHBhcmFtIHtCb29sZWFufSBpc1NoaWZ0XG4gICAqL1xuICB0YWIocm5nLCBpc1NoaWZ0KSB7XG4gICAgY29uc3QgY2VsbCA9IGRvbS5hbmNlc3RvcihybmcuY29tbW9uQW5jZXN0b3IoKSwgZG9tLmlzQ2VsbCk7XG4gICAgY29uc3QgdGFibGUgPSBkb20uYW5jZXN0b3IoY2VsbCwgZG9tLmlzVGFibGUpO1xuICAgIGNvbnN0IGNlbGxzID0gZG9tLmxpc3REZXNjZW5kYW50KHRhYmxlLCBkb20uaXNDZWxsKTtcblxuICAgIGNvbnN0IG5leHRDZWxsID0gbGlzdHNbaXNTaGlmdCA/ICdwcmV2JyA6ICduZXh0J10oY2VsbHMsIGNlbGwpO1xuICAgIGlmIChuZXh0Q2VsbCkge1xuICAgICAgcmFuZ2UuY3JlYXRlKG5leHRDZWxsLCAwKS5zZWxlY3QoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgbmV3IHJvd1xuICAgKlxuICAgKiBAcGFyYW0ge1dyYXBwZWRSYW5nZX0gcm5nXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwb3NpdGlvbiAodG9wL2JvdHRvbSlcbiAgICogQHJldHVybiB7Tm9kZX1cbiAgICovXG4gIGFkZFJvdyhybmcsIHBvc2l0aW9uKSB7XG4gICAgY29uc3QgY2VsbCA9IGRvbS5hbmNlc3RvcihybmcuY29tbW9uQW5jZXN0b3IoKSwgZG9tLmlzQ2VsbCk7XG5cbiAgICBjb25zdCBjdXJyZW50VHIgPSAkKGNlbGwpLmNsb3Nlc3QoJ3RyJyk7XG4gICAgY29uc3QgdHJBdHRyaWJ1dGVzID0gdGhpcy5yZWNvdmVyQXR0cmlidXRlcyhjdXJyZW50VHIpO1xuICAgIGNvbnN0IGh0bWwgPSAkKCc8dHInICsgdHJBdHRyaWJ1dGVzICsgJz48L3RyPicpO1xuXG4gICAgY29uc3QgdlRhYmxlID0gbmV3IFRhYmxlUmVzdWx0QWN0aW9uKGNlbGwsIFRhYmxlUmVzdWx0QWN0aW9uLndoZXJlLlJvdyxcbiAgICAgIFRhYmxlUmVzdWx0QWN0aW9uLnJlcXVlc3RBY3Rpb24uQWRkLCAkKGN1cnJlbnRUcikuY2xvc2VzdCgndGFibGUnKVswXSk7XG4gICAgY29uc3QgYWN0aW9ucyA9IHZUYWJsZS5nZXRBY3Rpb25MaXN0KCk7XG5cbiAgICBmb3IgKGxldCBpZENlbGwgPSAwOyBpZENlbGwgPCBhY3Rpb25zLmxlbmd0aDsgaWRDZWxsKyspIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRDZWxsID0gYWN0aW9uc1tpZENlbGxdO1xuICAgICAgY29uc3QgdGRBdHRyaWJ1dGVzID0gdGhpcy5yZWNvdmVyQXR0cmlidXRlcyhjdXJyZW50Q2VsbC5iYXNlQ2VsbCk7XG4gICAgICBzd2l0Y2ggKGN1cnJlbnRDZWxsLmFjdGlvbikge1xuICAgICAgICBjYXNlIFRhYmxlUmVzdWx0QWN0aW9uLnJlc3VsdEFjdGlvbi5BZGRDZWxsOlxuICAgICAgICAgIGh0bWwuYXBwZW5kKCc8dGQnICsgdGRBdHRyaWJ1dGVzICsgJz4nICsgZG9tLmJsYW5rICsgJzwvdGQ+Jyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgVGFibGVSZXN1bHRBY3Rpb24ucmVzdWx0QWN0aW9uLlN1bVNwYW5Db3VudDpcbiAgICAgICAgICBpZiAocG9zaXRpb24gPT09ICd0b3AnKSB7XG4gICAgICAgICAgICBjb25zdCBiYXNlQ2VsbFRyID0gY3VycmVudENlbGwuYmFzZUNlbGwucGFyZW50O1xuICAgICAgICAgICAgY29uc3QgaXNUb3BGcm9tUm93U3BhbiA9ICghYmFzZUNlbGxUciA/IDAgOiBjdXJyZW50Q2VsbC5iYXNlQ2VsbC5jbG9zZXN0KCd0cicpLnJvd0luZGV4KSA8PSBjdXJyZW50VHJbMF0ucm93SW5kZXg7XG4gICAgICAgICAgICBpZiAoaXNUb3BGcm9tUm93U3Bhbikge1xuICAgICAgICAgICAgICBjb25zdCBuZXdUZCA9ICQoJzxkaXY+PC9kaXY+JykuYXBwZW5kKCQoJzx0ZCcgKyB0ZEF0dHJpYnV0ZXMgKyAnPicgKyBkb20uYmxhbmsgKyAnPC90ZD4nKS5yZW1vdmVBdHRyKCdyb3dzcGFuJykpLmh0bWwoKTtcbiAgICAgICAgICAgICAgaHRtbC5hcHBlbmQobmV3VGQpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgbGV0IHJvd3NwYW5OdW1iZXIgPSBwYXJzZUludChjdXJyZW50Q2VsbC5iYXNlQ2VsbC5yb3dTcGFuLCAxMCk7XG4gICAgICAgICAgcm93c3Bhbk51bWJlcisrO1xuICAgICAgICAgIGN1cnJlbnRDZWxsLmJhc2VDZWxsLnNldEF0dHJpYnV0ZSgncm93U3BhbicsIHJvd3NwYW5OdW1iZXIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwb3NpdGlvbiA9PT0gJ3RvcCcpIHtcbiAgICAgIGN1cnJlbnRUci5iZWZvcmUoaHRtbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNlbGxIYXNSb3dzcGFuID0gKGNlbGwucm93U3BhbiA+IDEpO1xuICAgICAgaWYgKGNlbGxIYXNSb3dzcGFuKSB7XG4gICAgICAgIGNvbnN0IGxhc3RUckluZGV4ID0gY3VycmVudFRyWzBdLnJvd0luZGV4ICsgKGNlbGwucm93U3BhbiAtIDIpO1xuICAgICAgICAkKCQoY3VycmVudFRyKS5wYXJlbnQoKS5maW5kKCd0cicpW2xhc3RUckluZGV4XSkuYWZ0ZXIoJChodG1sKSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGN1cnJlbnRUci5hZnRlcihodG1sKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgbmV3IGNvbFxuICAgKlxuICAgKiBAcGFyYW0ge1dyYXBwZWRSYW5nZX0gcm5nXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwb3NpdGlvbiAobGVmdC9yaWdodClcbiAgICogQHJldHVybiB7Tm9kZX1cbiAgICovXG4gIGFkZENvbChybmcsIHBvc2l0aW9uKSB7XG4gICAgY29uc3QgY2VsbCA9IGRvbS5hbmNlc3RvcihybmcuY29tbW9uQW5jZXN0b3IoKSwgZG9tLmlzQ2VsbCk7XG4gICAgY29uc3Qgcm93ID0gJChjZWxsKS5jbG9zZXN0KCd0cicpO1xuICAgIGNvbnN0IHJvd3NHcm91cCA9ICQocm93KS5zaWJsaW5ncygpO1xuICAgIHJvd3NHcm91cC5wdXNoKHJvdyk7XG5cbiAgICBjb25zdCB2VGFibGUgPSBuZXcgVGFibGVSZXN1bHRBY3Rpb24oY2VsbCwgVGFibGVSZXN1bHRBY3Rpb24ud2hlcmUuQ29sdW1uLFxuICAgICAgVGFibGVSZXN1bHRBY3Rpb24ucmVxdWVzdEFjdGlvbi5BZGQsICQocm93KS5jbG9zZXN0KCd0YWJsZScpWzBdKTtcbiAgICBjb25zdCBhY3Rpb25zID0gdlRhYmxlLmdldEFjdGlvbkxpc3QoKTtcblxuICAgIGZvciAobGV0IGFjdGlvbkluZGV4ID0gMDsgYWN0aW9uSW5kZXggPCBhY3Rpb25zLmxlbmd0aDsgYWN0aW9uSW5kZXgrKykge1xuICAgICAgY29uc3QgY3VycmVudENlbGwgPSBhY3Rpb25zW2FjdGlvbkluZGV4XTtcbiAgICAgIGNvbnN0IHRkQXR0cmlidXRlcyA9IHRoaXMucmVjb3ZlckF0dHJpYnV0ZXMoY3VycmVudENlbGwuYmFzZUNlbGwpO1xuICAgICAgc3dpdGNoIChjdXJyZW50Q2VsbC5hY3Rpb24pIHtcbiAgICAgICAgY2FzZSBUYWJsZVJlc3VsdEFjdGlvbi5yZXN1bHRBY3Rpb24uQWRkQ2VsbDpcbiAgICAgICAgICBpZiAocG9zaXRpb24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgICQoY3VycmVudENlbGwuYmFzZUNlbGwpLmFmdGVyKCc8dGQnICsgdGRBdHRyaWJ1dGVzICsgJz4nICsgZG9tLmJsYW5rICsgJzwvdGQ+Jyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoY3VycmVudENlbGwuYmFzZUNlbGwpLmJlZm9yZSgnPHRkJyArIHRkQXR0cmlidXRlcyArICc+JyArIGRvbS5ibGFuayArICc8L3RkPicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBUYWJsZVJlc3VsdEFjdGlvbi5yZXN1bHRBY3Rpb24uU3VtU3BhbkNvdW50OlxuICAgICAgICAgIGlmIChwb3NpdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgbGV0IGNvbHNwYW5OdW1iZXIgPSBwYXJzZUludChjdXJyZW50Q2VsbC5iYXNlQ2VsbC5jb2xTcGFuLCAxMCk7XG4gICAgICAgICAgICBjb2xzcGFuTnVtYmVyKys7XG4gICAgICAgICAgICBjdXJyZW50Q2VsbC5iYXNlQ2VsbC5zZXRBdHRyaWJ1dGUoJ2NvbFNwYW4nLCBjb2xzcGFuTnVtYmVyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChjdXJyZW50Q2VsbC5iYXNlQ2VsbCkuYmVmb3JlKCc8dGQnICsgdGRBdHRyaWJ1dGVzICsgJz4nICsgZG9tLmJsYW5rICsgJzwvdGQ+Jyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qXG4gICogQ29weSBhdHRyaWJ1dGVzIGZyb20gZWxlbWVudC5cbiAgKlxuICAqIEBwYXJhbSB7b2JqZWN0fSBFbGVtZW50IHRvIHJlY292ZXIgYXR0cmlidXRlcy5cbiAgKiBAcmV0dXJuIHtzdHJpbmd9IENvcGllZCBzdHJpbmcgZWxlbWVudHMuXG4gICovXG4gIHJlY292ZXJBdHRyaWJ1dGVzKGVsKSB7XG4gICAgbGV0IHJlc3VsdFN0ciA9ICcnO1xuXG4gICAgaWYgKCFlbCkge1xuICAgICAgcmV0dXJuIHJlc3VsdFN0cjtcbiAgICB9XG5cbiAgICBjb25zdCBhdHRyTGlzdCA9IGVsLmF0dHJpYnV0ZXMgfHwgW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF0dHJMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoYXR0ckxpc3RbaV0ubmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaWQnKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoYXR0ckxpc3RbaV0uc3BlY2lmaWVkKSB7XG4gICAgICAgIHJlc3VsdFN0ciArPSAnICcgKyBhdHRyTGlzdFtpXS5uYW1lICsgJz1cXCcnICsgYXR0ckxpc3RbaV0udmFsdWUgKyAnXFwnJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0U3RyO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBjdXJyZW50IHJvd1xuICAgKlxuICAgKiBAcGFyYW0ge1dyYXBwZWRSYW5nZX0gcm5nXG4gICAqIEByZXR1cm4ge05vZGV9XG4gICAqL1xuICBkZWxldGVSb3cocm5nKSB7XG4gICAgY29uc3QgY2VsbCA9IGRvbS5hbmNlc3RvcihybmcuY29tbW9uQW5jZXN0b3IoKSwgZG9tLmlzQ2VsbCk7XG4gICAgY29uc3Qgcm93ID0gJChjZWxsKS5jbG9zZXN0KCd0cicpO1xuICAgIGNvbnN0IGNlbGxQb3MgPSByb3cuY2hpbGRyZW4oJ3RkLCB0aCcpLmluZGV4KCQoY2VsbCkpO1xuICAgIGNvbnN0IHJvd1BvcyA9IHJvd1swXS5yb3dJbmRleDtcblxuICAgIGNvbnN0IHZUYWJsZSA9IG5ldyBUYWJsZVJlc3VsdEFjdGlvbihjZWxsLCBUYWJsZVJlc3VsdEFjdGlvbi53aGVyZS5Sb3csXG4gICAgICBUYWJsZVJlc3VsdEFjdGlvbi5yZXF1ZXN0QWN0aW9uLkRlbGV0ZSwgJChyb3cpLmNsb3Nlc3QoJ3RhYmxlJylbMF0pO1xuICAgIGNvbnN0IGFjdGlvbnMgPSB2VGFibGUuZ2V0QWN0aW9uTGlzdCgpO1xuXG4gICAgZm9yIChsZXQgYWN0aW9uSW5kZXggPSAwOyBhY3Rpb25JbmRleCA8IGFjdGlvbnMubGVuZ3RoOyBhY3Rpb25JbmRleCsrKSB7XG4gICAgICBpZiAoIWFjdGlvbnNbYWN0aW9uSW5kZXhdKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBiYXNlQ2VsbCA9IGFjdGlvbnNbYWN0aW9uSW5kZXhdLmJhc2VDZWxsO1xuICAgICAgY29uc3QgdmlydHVhbFBvc2l0aW9uID0gYWN0aW9uc1thY3Rpb25JbmRleF0udmlydHVhbFRhYmxlO1xuICAgICAgY29uc3QgaGFzUm93c3BhbiA9IChiYXNlQ2VsbC5yb3dTcGFuICYmIGJhc2VDZWxsLnJvd1NwYW4gPiAxKTtcbiAgICAgIGxldCByb3dzcGFuTnVtYmVyID0gKGhhc1Jvd3NwYW4pID8gcGFyc2VJbnQoYmFzZUNlbGwucm93U3BhbiwgMTApIDogMDtcbiAgICAgIHN3aXRjaCAoYWN0aW9uc1thY3Rpb25JbmRleF0uYWN0aW9uKSB7XG4gICAgICAgIGNhc2UgVGFibGVSZXN1bHRBY3Rpb24ucmVzdWx0QWN0aW9uLklnbm9yZTpcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgY2FzZSBUYWJsZVJlc3VsdEFjdGlvbi5yZXN1bHRBY3Rpb24uQWRkQ2VsbDpcbiAgICAgICAgICBjb25zdCBuZXh0Um93ID0gcm93Lm5leHQoJ3RyJylbMF07XG4gICAgICAgICAgaWYgKCFuZXh0Um93KSB7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgY29uc3QgY2xvbmVSb3cgPSByb3dbMF0uY2VsbHNbY2VsbFBvc107XG4gICAgICAgICAgaWYgKGhhc1Jvd3NwYW4pIHtcbiAgICAgICAgICAgIGlmIChyb3dzcGFuTnVtYmVyID4gMikge1xuICAgICAgICAgICAgICByb3dzcGFuTnVtYmVyLS07XG4gICAgICAgICAgICAgIG5leHRSb3cuaW5zZXJ0QmVmb3JlKGNsb25lUm93LCBuZXh0Um93LmNlbGxzW2NlbGxQb3NdKTtcbiAgICAgICAgICAgICAgbmV4dFJvdy5jZWxsc1tjZWxsUG9zXS5zZXRBdHRyaWJ1dGUoJ3Jvd1NwYW4nLCByb3dzcGFuTnVtYmVyKTtcbiAgICAgICAgICAgICAgbmV4dFJvdy5jZWxsc1tjZWxsUG9zXS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocm93c3Bhbk51bWJlciA9PT0gMikge1xuICAgICAgICAgICAgICBuZXh0Um93Lmluc2VydEJlZm9yZShjbG9uZVJvdywgbmV4dFJvdy5jZWxsc1tjZWxsUG9zXSk7XG4gICAgICAgICAgICAgIG5leHRSb3cuY2VsbHNbY2VsbFBvc10ucmVtb3ZlQXR0cmlidXRlKCdyb3dTcGFuJyk7XG4gICAgICAgICAgICAgIG5leHRSb3cuY2VsbHNbY2VsbFBvc10uaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBjYXNlIFRhYmxlUmVzdWx0QWN0aW9uLnJlc3VsdEFjdGlvbi5TdWJ0cmFjdFNwYW5Db3VudDpcbiAgICAgICAgICBpZiAoaGFzUm93c3Bhbikge1xuICAgICAgICAgICAgaWYgKHJvd3NwYW5OdW1iZXIgPiAyKSB7XG4gICAgICAgICAgICAgIHJvd3NwYW5OdW1iZXItLTtcbiAgICAgICAgICAgICAgYmFzZUNlbGwuc2V0QXR0cmlidXRlKCdyb3dTcGFuJywgcm93c3Bhbk51bWJlcik7XG4gICAgICAgICAgICAgIGlmICh2aXJ0dWFsUG9zaXRpb24ucm93SW5kZXggIT09IHJvd1BvcyAmJiBiYXNlQ2VsbC5jZWxsSW5kZXggPT09IGNlbGxQb3MpIHsgYmFzZUNlbGwuaW5uZXJIVE1MID0gJyc7IH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAocm93c3Bhbk51bWJlciA9PT0gMikge1xuICAgICAgICAgICAgICBiYXNlQ2VsbC5yZW1vdmVBdHRyaWJ1dGUoJ3Jvd1NwYW4nKTtcbiAgICAgICAgICAgICAgaWYgKHZpcnR1YWxQb3NpdGlvbi5yb3dJbmRleCAhPT0gcm93UG9zICYmIGJhc2VDZWxsLmNlbGxJbmRleCA9PT0gY2VsbFBvcykgeyBiYXNlQ2VsbC5pbm5lckhUTUwgPSAnJzsgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgY2FzZSBUYWJsZVJlc3VsdEFjdGlvbi5yZXN1bHRBY3Rpb24uUmVtb3ZlQ2VsbDpcbiAgICAgICAgICAvLyBEbyBub3QgbmVlZCByZW1vdmUgY2VsbCBiZWNhdXNlIHJvdyB3aWxsIGJlIGRlbGV0ZWQuXG4gICAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJvdy5yZW1vdmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgY3VycmVudCBjb2xcbiAgICpcbiAgICogQHBhcmFtIHtXcmFwcGVkUmFuZ2V9IHJuZ1xuICAgKiBAcmV0dXJuIHtOb2RlfVxuICAgKi9cbiAgZGVsZXRlQ29sKHJuZykge1xuICAgIGNvbnN0IGNlbGwgPSBkb20uYW5jZXN0b3Iocm5nLmNvbW1vbkFuY2VzdG9yKCksIGRvbS5pc0NlbGwpO1xuICAgIGNvbnN0IHJvdyA9ICQoY2VsbCkuY2xvc2VzdCgndHInKTtcbiAgICBjb25zdCBjZWxsUG9zID0gcm93LmNoaWxkcmVuKCd0ZCwgdGgnKS5pbmRleCgkKGNlbGwpKTtcblxuICAgIGNvbnN0IHZUYWJsZSA9IG5ldyBUYWJsZVJlc3VsdEFjdGlvbihjZWxsLCBUYWJsZVJlc3VsdEFjdGlvbi53aGVyZS5Db2x1bW4sXG4gICAgICBUYWJsZVJlc3VsdEFjdGlvbi5yZXF1ZXN0QWN0aW9uLkRlbGV0ZSwgJChyb3cpLmNsb3Nlc3QoJ3RhYmxlJylbMF0pO1xuICAgIGNvbnN0IGFjdGlvbnMgPSB2VGFibGUuZ2V0QWN0aW9uTGlzdCgpO1xuXG4gICAgZm9yIChsZXQgYWN0aW9uSW5kZXggPSAwOyBhY3Rpb25JbmRleCA8IGFjdGlvbnMubGVuZ3RoOyBhY3Rpb25JbmRleCsrKSB7XG4gICAgICBpZiAoIWFjdGlvbnNbYWN0aW9uSW5kZXhdKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgc3dpdGNoIChhY3Rpb25zW2FjdGlvbkluZGV4XS5hY3Rpb24pIHtcbiAgICAgICAgY2FzZSBUYWJsZVJlc3VsdEFjdGlvbi5yZXN1bHRBY3Rpb24uSWdub3JlOlxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBjYXNlIFRhYmxlUmVzdWx0QWN0aW9uLnJlc3VsdEFjdGlvbi5TdWJ0cmFjdFNwYW5Db3VudDpcbiAgICAgICAgICBjb25zdCBiYXNlQ2VsbCA9IGFjdGlvbnNbYWN0aW9uSW5kZXhdLmJhc2VDZWxsO1xuICAgICAgICAgIGNvbnN0IGhhc0NvbHNwYW4gPSAoYmFzZUNlbGwuY29sU3BhbiAmJiBiYXNlQ2VsbC5jb2xTcGFuID4gMSk7XG4gICAgICAgICAgaWYgKGhhc0NvbHNwYW4pIHtcbiAgICAgICAgICAgIGxldCBjb2xzcGFuTnVtYmVyID0gKGJhc2VDZWxsLmNvbFNwYW4pID8gcGFyc2VJbnQoYmFzZUNlbGwuY29sU3BhbiwgMTApIDogMDtcbiAgICAgICAgICAgIGlmIChjb2xzcGFuTnVtYmVyID4gMikge1xuICAgICAgICAgICAgICBjb2xzcGFuTnVtYmVyLS07XG4gICAgICAgICAgICAgIGJhc2VDZWxsLnNldEF0dHJpYnV0ZSgnY29sU3BhbicsIGNvbHNwYW5OdW1iZXIpO1xuICAgICAgICAgICAgICBpZiAoYmFzZUNlbGwuY2VsbEluZGV4ID09PSBjZWxsUG9zKSB7IGJhc2VDZWxsLmlubmVySFRNTCA9ICcnOyB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbHNwYW5OdW1iZXIgPT09IDIpIHtcbiAgICAgICAgICAgICAgYmFzZUNlbGwucmVtb3ZlQXR0cmlidXRlKCdjb2xTcGFuJyk7XG4gICAgICAgICAgICAgIGlmIChiYXNlQ2VsbC5jZWxsSW5kZXggPT09IGNlbGxQb3MpIHsgYmFzZUNlbGwuaW5uZXJIVE1MID0gJyc7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIGNhc2UgVGFibGVSZXN1bHRBY3Rpb24ucmVzdWx0QWN0aW9uLlJlbW92ZUNlbGw6XG4gICAgICAgICAgZG9tLnJlbW92ZShhY3Rpb25zW2FjdGlvbkluZGV4XS5iYXNlQ2VsbCwgdHJ1ZSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGNyZWF0ZSBlbXB0eSB0YWJsZSBlbGVtZW50XG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSByb3dDb3VudFxuICAgKiBAcGFyYW0ge051bWJlcn0gY29sQ291bnRcbiAgICogQHJldHVybiB7Tm9kZX1cbiAgICovXG4gIGNyZWF0ZVRhYmxlKGNvbENvdW50LCByb3dDb3VudCwgb3B0aW9ucykge1xuICAgIGNvbnN0IHRkcyA9IFtdO1xuICAgIGxldCB0ZEhUTUw7XG4gICAgZm9yIChsZXQgaWR4Q29sID0gMDsgaWR4Q29sIDwgY29sQ291bnQ7IGlkeENvbCsrKSB7XG4gICAgICB0ZHMucHVzaCgnPHRkPicgKyBkb20uYmxhbmsgKyAnPC90ZD4nKTtcbiAgICB9XG4gICAgdGRIVE1MID0gdGRzLmpvaW4oJycpO1xuXG4gICAgY29uc3QgdHJzID0gW107XG4gICAgbGV0IHRySFRNTDtcbiAgICBmb3IgKGxldCBpZHhSb3cgPSAwOyBpZHhSb3cgPCByb3dDb3VudDsgaWR4Um93KyspIHtcbiAgICAgIHRycy5wdXNoKCc8dHI+JyArIHRkSFRNTCArICc8L3RyPicpO1xuICAgIH1cbiAgICB0ckhUTUwgPSB0cnMuam9pbignJyk7XG4gICAgY29uc3QgJHRhYmxlID0gJCgnPHRhYmxlPicgKyB0ckhUTUwgKyAnPC90YWJsZT4nKTtcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnRhYmxlQ2xhc3NOYW1lKSB7XG4gICAgICAkdGFibGUuYWRkQ2xhc3Mob3B0aW9ucy50YWJsZUNsYXNzTmFtZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuICR0YWJsZVswXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgY3VycmVudCB0YWJsZVxuICAgKlxuICAgKiBAcGFyYW0ge1dyYXBwZWRSYW5nZX0gcm5nXG4gICAqIEByZXR1cm4ge05vZGV9XG4gICAqL1xuICBkZWxldGVUYWJsZShybmcpIHtcbiAgICBjb25zdCBjZWxsID0gZG9tLmFuY2VzdG9yKHJuZy5jb21tb25BbmNlc3RvcigpLCBkb20uaXNDZWxsKTtcbiAgICAkKGNlbGwpLmNsb3Nlc3QoJ3RhYmxlJykucmVtb3ZlKCk7XG4gIH1cbn1cbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgZW52IGZyb20gJy4uL2NvcmUvZW52JztcbmltcG9ydCBrZXkgZnJvbSAnLi4vY29yZS9rZXknO1xuaW1wb3J0IGZ1bmMgZnJvbSAnLi4vY29yZS9mdW5jJztcbmltcG9ydCBsaXN0cyBmcm9tICcuLi9jb3JlL2xpc3RzJztcbmltcG9ydCBkb20gZnJvbSAnLi4vY29yZS9kb20nO1xuaW1wb3J0IHJhbmdlIGZyb20gJy4uL2NvcmUvcmFuZ2UnO1xuaW1wb3J0IHsgcmVhZEZpbGVBc0RhdGFVUkwsIGNyZWF0ZUltYWdlIH0gZnJvbSAnLi4vY29yZS9hc3luYyc7XG5pbXBvcnQgSGlzdG9yeSBmcm9tICcuLi9lZGl0aW5nL0hpc3RvcnknO1xuaW1wb3J0IFN0eWxlIGZyb20gJy4uL2VkaXRpbmcvU3R5bGUnO1xuaW1wb3J0IFR5cGluZyBmcm9tICcuLi9lZGl0aW5nL1R5cGluZyc7XG5pbXBvcnQgVGFibGUgZnJvbSAnLi4vZWRpdGluZy9UYWJsZSc7XG5pbXBvcnQgQnVsbGV0IGZyb20gJy4uL2VkaXRpbmcvQnVsbGV0JztcblxuY29uc3QgS0VZX0JPR1VTID0gJ2JvZ3VzJztcblxuLyoqXG4gKiBAY2xhc3MgRWRpdG9yXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVkaXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuXG4gICAgdGhpcy4kbm90ZSA9IGNvbnRleHQubGF5b3V0SW5mby5ub3RlO1xuICAgIHRoaXMuJGVkaXRvciA9IGNvbnRleHQubGF5b3V0SW5mby5lZGl0b3I7XG4gICAgdGhpcy4kZWRpdGFibGUgPSBjb250ZXh0LmxheW91dEluZm8uZWRpdGFibGU7XG4gICAgdGhpcy5vcHRpb25zID0gY29udGV4dC5vcHRpb25zO1xuICAgIHRoaXMubGFuZyA9IHRoaXMub3B0aW9ucy5sYW5nSW5mbztcblxuICAgIHRoaXMuZWRpdGFibGUgPSB0aGlzLiRlZGl0YWJsZVswXTtcbiAgICB0aGlzLmxhc3RSYW5nZSA9IG51bGw7XG5cbiAgICB0aGlzLnN0eWxlID0gbmV3IFN0eWxlKCk7XG4gICAgdGhpcy50YWJsZSA9IG5ldyBUYWJsZSgpO1xuICAgIHRoaXMudHlwaW5nID0gbmV3IFR5cGluZygpO1xuICAgIHRoaXMuYnVsbGV0ID0gbmV3IEJ1bGxldCgpO1xuICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KHRoaXMuJGVkaXRhYmxlKTtcblxuICAgIHRoaXMuY29udGV4dC5tZW1vKCdoZWxwLnVuZG8nLCB0aGlzLmxhbmcuaGVscC51bmRvKTtcbiAgICB0aGlzLmNvbnRleHQubWVtbygnaGVscC5yZWRvJywgdGhpcy5sYW5nLmhlbHAucmVkbyk7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2hlbHAudGFiJywgdGhpcy5sYW5nLmhlbHAudGFiKTtcbiAgICB0aGlzLmNvbnRleHQubWVtbygnaGVscC51bnRhYicsIHRoaXMubGFuZy5oZWxwLnVudGFiKTtcbiAgICB0aGlzLmNvbnRleHQubWVtbygnaGVscC5pbnNlcnRQYXJhZ3JhcGgnLCB0aGlzLmxhbmcuaGVscC5pbnNlcnRQYXJhZ3JhcGgpO1xuICAgIHRoaXMuY29udGV4dC5tZW1vKCdoZWxwLmluc2VydE9yZGVyZWRMaXN0JywgdGhpcy5sYW5nLmhlbHAuaW5zZXJ0T3JkZXJlZExpc3QpO1xuICAgIHRoaXMuY29udGV4dC5tZW1vKCdoZWxwLmluc2VydFVub3JkZXJlZExpc3QnLCB0aGlzLmxhbmcuaGVscC5pbnNlcnRVbm9yZGVyZWRMaXN0KTtcbiAgICB0aGlzLmNvbnRleHQubWVtbygnaGVscC5pbmRlbnQnLCB0aGlzLmxhbmcuaGVscC5pbmRlbnQpO1xuICAgIHRoaXMuY29udGV4dC5tZW1vKCdoZWxwLm91dGRlbnQnLCB0aGlzLmxhbmcuaGVscC5vdXRkZW50KTtcbiAgICB0aGlzLmNvbnRleHQubWVtbygnaGVscC5mb3JtYXRQYXJhJywgdGhpcy5sYW5nLmhlbHAuZm9ybWF0UGFyYSk7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2hlbHAuaW5zZXJ0SG9yaXpvbnRhbFJ1bGUnLCB0aGlzLmxhbmcuaGVscC5pbnNlcnRIb3Jpem9udGFsUnVsZSk7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2hlbHAuZm9udE5hbWUnLCB0aGlzLmxhbmcuaGVscC5mb250TmFtZSk7XG5cbiAgICAvLyBuYXRpdmUgY29tbWFuZHMod2l0aCBleGVjQ29tbWFuZCksIGdlbmVyYXRlIGZ1bmN0aW9uIGZvciBleGVjQ29tbWFuZFxuICAgIGNvbnN0IGNvbW1hbmRzID0gW1xuICAgICAgJ2JvbGQnLCAnaXRhbGljJywgJ3VuZGVybGluZScsICdzdHJpa2V0aHJvdWdoJywgJ3N1cGVyc2NyaXB0JywgJ3N1YnNjcmlwdCcsXG4gICAgICAnanVzdGlmeUxlZnQnLCAnanVzdGlmeUNlbnRlcicsICdqdXN0aWZ5UmlnaHQnLCAnanVzdGlmeUZ1bGwnLFxuICAgICAgJ2Zvcm1hdEJsb2NrJywgJ3JlbW92ZUZvcm1hdCcsICdiYWNrQ29sb3InXG4gICAgXTtcblxuICAgIGZvciAobGV0IGlkeCA9IDAsIGxlbiA9IGNvbW1hbmRzLmxlbmd0aDsgaWR4IDwgbGVuOyBpZHgrKykge1xuICAgICAgdGhpc1tjb21tYW5kc1tpZHhdXSA9ICgoc0NtZCkgPT4ge1xuICAgICAgICByZXR1cm4gKHZhbHVlKSA9PiB7XG4gICAgICAgICAgdGhpcy5iZWZvcmVDb21tYW5kKCk7XG4gICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoc0NtZCwgZmFsc2UsIHZhbHVlKTtcbiAgICAgICAgICB0aGlzLmFmdGVyQ29tbWFuZCh0cnVlKTtcbiAgICAgICAgfTtcbiAgICAgIH0pKGNvbW1hbmRzW2lkeF0pO1xuICAgICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2hlbHAuJyArIGNvbW1hbmRzW2lkeF0sIHRoaXMubGFuZy5oZWxwW2NvbW1hbmRzW2lkeF1dKTtcbiAgICB9XG5cbiAgICB0aGlzLmZvbnROYW1lID0gdGhpcy53cmFwQ29tbWFuZCgodmFsdWUpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmZvbnRTdHlsaW5nKCdmb250LWZhbWlseScsIFwiXFwnXCIgKyB2YWx1ZSArIFwiXFwnXCIpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5mb250U2l6ZSA9IHRoaXMud3JhcENvbW1hbmQoKHZhbHVlKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5mb250U3R5bGluZygnZm9udC1zaXplJywgdmFsdWUgKyAncHgnKTtcbiAgICB9KTtcblxuICAgIGZvciAobGV0IGlkeCA9IDE7IGlkeCA8PSA2OyBpZHgrKykge1xuICAgICAgdGhpc1snZm9ybWF0SCcgKyBpZHhdID0gKChpZHgpID0+IHtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICB0aGlzLmZvcm1hdEJsb2NrKCdIJyArIGlkeCk7XG4gICAgICAgIH07XG4gICAgICB9KShpZHgpO1xuICAgICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2hlbHAuZm9ybWF0SCcgKyBpZHgsIHRoaXMubGFuZy5oZWxwWydmb3JtYXRIJyArIGlkeF0pO1xuICAgIH07XG5cbiAgICB0aGlzLmluc2VydFBhcmFncmFwaCA9IHRoaXMud3JhcENvbW1hbmQoKCkgPT4ge1xuICAgICAgdGhpcy50eXBpbmcuaW5zZXJ0UGFyYWdyYXBoKHRoaXMuZWRpdGFibGUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5pbnNlcnRPcmRlcmVkTGlzdCA9IHRoaXMud3JhcENvbW1hbmQoKCkgPT4ge1xuICAgICAgdGhpcy5idWxsZXQuaW5zZXJ0T3JkZXJlZExpc3QodGhpcy5lZGl0YWJsZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmluc2VydFVub3JkZXJlZExpc3QgPSB0aGlzLndyYXBDb21tYW5kKCgpID0+IHtcbiAgICAgIHRoaXMuYnVsbGV0Lmluc2VydFVub3JkZXJlZExpc3QodGhpcy5lZGl0YWJsZSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmluZGVudCA9IHRoaXMud3JhcENvbW1hbmQoKCkgPT4ge1xuICAgICAgdGhpcy5idWxsZXQuaW5kZW50KHRoaXMuZWRpdGFibGUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5vdXRkZW50ID0gdGhpcy53cmFwQ29tbWFuZCgoKSA9PiB7XG4gICAgICB0aGlzLmJ1bGxldC5vdXRkZW50KHRoaXMuZWRpdGFibGUpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogaW5zZXJ0Tm9kZVxuICAgICAqIGluc2VydCBub2RlXG4gICAgICogQHBhcmFtIHtOb2RlfSBub2RlXG4gICAgICovXG4gICAgdGhpcy5pbnNlcnROb2RlID0gdGhpcy53cmFwQ29tbWFuZCgobm9kZSkgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNMaW1pdGVkKCQobm9kZSkudGV4dCgpLmxlbmd0aCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3Qgcm5nID0gdGhpcy5jcmVhdGVSYW5nZSgpO1xuICAgICAgcm5nLmluc2VydE5vZGUobm9kZSk7XG4gICAgICByYW5nZS5jcmVhdGVGcm9tTm9kZUFmdGVyKG5vZGUpLnNlbGVjdCgpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogaW5zZXJ0IHRleHRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuICAgICAqL1xuICAgIHRoaXMuaW5zZXJ0VGV4dCA9IHRoaXMud3JhcENvbW1hbmQoKHRleHQpID0+IHtcbiAgICAgIGlmICh0aGlzLmlzTGltaXRlZCh0ZXh0Lmxlbmd0aCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3Qgcm5nID0gdGhpcy5jcmVhdGVSYW5nZSgpO1xuICAgICAgY29uc3QgdGV4dE5vZGUgPSBybmcuaW5zZXJ0Tm9kZShkb20uY3JlYXRlVGV4dCh0ZXh0KSk7XG4gICAgICByYW5nZS5jcmVhdGUodGV4dE5vZGUsIGRvbS5ub2RlTGVuZ3RoKHRleHROb2RlKSkuc2VsZWN0KCk7XG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogcGFzdGUgSFRNTFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtYXJrdXBcbiAgICAgKi9cbiAgICB0aGlzLnBhc3RlSFRNTCA9IHRoaXMud3JhcENvbW1hbmQoKG1hcmt1cCkgPT4ge1xuICAgICAgaWYgKHRoaXMuaXNMaW1pdGVkKG1hcmt1cC5sZW5ndGgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNvbnRlbnRzID0gdGhpcy5jcmVhdGVSYW5nZSgpLnBhc3RlSFRNTChtYXJrdXApO1xuICAgICAgcmFuZ2UuY3JlYXRlRnJvbU5vZGVBZnRlcihsaXN0cy5sYXN0KGNvbnRlbnRzKSkuc2VsZWN0KCk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBmb3JtYXRCbG9ja1xuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRhZ05hbWVcbiAgICAgKi9cbiAgICB0aGlzLmZvcm1hdEJsb2NrID0gdGhpcy53cmFwQ29tbWFuZCgodGFnTmFtZSwgJHRhcmdldCkgPT4ge1xuICAgICAgY29uc3Qgb25BcHBseUN1c3RvbVN0eWxlID0gdGhpcy5vcHRpb25zLmNhbGxiYWNrcy5vbkFwcGx5Q3VzdG9tU3R5bGU7XG4gICAgICBpZiAob25BcHBseUN1c3RvbVN0eWxlKSB7XG4gICAgICAgIG9uQXBwbHlDdXN0b21TdHlsZS5jYWxsKHRoaXMsICR0YXJnZXQsIHRoaXMuY29udGV4dCwgdGhpcy5vbkZvcm1hdEJsb2NrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub25Gb3JtYXRCbG9jayh0YWdOYW1lLCAkdGFyZ2V0KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIGluc2VydCBob3Jpem9udGFsIHJ1bGVcbiAgICAgKi9cbiAgICB0aGlzLmluc2VydEhvcml6b250YWxSdWxlID0gdGhpcy53cmFwQ29tbWFuZCgoKSA9PiB7XG4gICAgICBjb25zdCBock5vZGUgPSB0aGlzLmNyZWF0ZVJhbmdlKCkuaW5zZXJ0Tm9kZShkb20uY3JlYXRlKCdIUicpKTtcbiAgICAgIGlmIChock5vZGUubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgcmFuZ2UuY3JlYXRlKGhyTm9kZS5uZXh0U2libGluZywgMCkubm9ybWFsaXplKCkuc2VsZWN0KCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBsaW5lSGVpZ2h0XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gICAgICovXG4gICAgdGhpcy5saW5lSGVpZ2h0ID0gdGhpcy53cmFwQ29tbWFuZCgodmFsdWUpID0+IHtcbiAgICAgIHRoaXMuc3R5bGUuc3R5bGVQYXJhKHRoaXMuY3JlYXRlUmFuZ2UoKSwge1xuICAgICAgICBsaW5lSGVpZ2h0OiB2YWx1ZVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBjcmVhdGUgbGluayAoY29tbWFuZClcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBsaW5rSW5mb1xuICAgICAqL1xuICAgIHRoaXMuY3JlYXRlTGluayA9IHRoaXMud3JhcENvbW1hbmQoKGxpbmtJbmZvKSA9PiB7XG4gICAgICBsZXQgbGlua1VybCA9IGxpbmtJbmZvLnVybDtcbiAgICAgIGNvbnN0IGxpbmtUZXh0ID0gbGlua0luZm8udGV4dDtcbiAgICAgIGNvbnN0IGlzTmV3V2luZG93ID0gbGlua0luZm8uaXNOZXdXaW5kb3c7XG4gICAgICBsZXQgcm5nID0gbGlua0luZm8ucmFuZ2UgfHwgdGhpcy5jcmVhdGVSYW5nZSgpO1xuICAgICAgY29uc3QgaXNUZXh0Q2hhbmdlZCA9IHJuZy50b1N0cmluZygpICE9PSBsaW5rVGV4dDtcblxuICAgICAgLy8gaGFuZGxlIHNwYWNlZCB1cmxzIGZyb20gaW5wdXRcbiAgICAgIGlmICh0eXBlb2YgbGlua1VybCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgbGlua1VybCA9IGxpbmtVcmwudHJpbSgpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLm9uQ3JlYXRlTGluaykge1xuICAgICAgICBsaW5rVXJsID0gdGhpcy5vcHRpb25zLm9uQ3JlYXRlTGluayhsaW5rVXJsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGlmIHVybCBkb2Vzbid0IG1hdGNoIGFuIFVSTCBzY2hlbWEsIHNldCBodHRwOi8vIGFzIGRlZmF1bHRcbiAgICAgICAgbGlua1VybCA9IC9eW0EtWmEtel1bQS1aYS16MC05Ky0uXSpcXDpbXFwvXFwvXT8vLnRlc3QobGlua1VybClcbiAgICAgICAgICA/IGxpbmtVcmwgOiAnaHR0cDovLycgKyBsaW5rVXJsO1xuICAgICAgfVxuXG4gICAgICBsZXQgYW5jaG9ycyA9IFtdO1xuICAgICAgaWYgKGlzVGV4dENoYW5nZWQpIHtcbiAgICAgICAgcm5nID0gcm5nLmRlbGV0ZUNvbnRlbnRzKCk7XG4gICAgICAgIGNvbnN0IGFuY2hvciA9IHJuZy5pbnNlcnROb2RlKCQoJzxBPicgKyBsaW5rVGV4dCArICc8L0E+JylbMF0pO1xuICAgICAgICBhbmNob3JzLnB1c2goYW5jaG9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFuY2hvcnMgPSB0aGlzLnN0eWxlLnN0eWxlTm9kZXMocm5nLCB7XG4gICAgICAgICAgbm9kZU5hbWU6ICdBJyxcbiAgICAgICAgICBleHBhbmRDbG9zZXN0U2libGluZzogdHJ1ZSxcbiAgICAgICAgICBvbmx5UGFydGlhbENvbnRhaW5zOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAkLmVhY2goYW5jaG9ycywgKGlkeCwgYW5jaG9yKSA9PiB7XG4gICAgICAgICQoYW5jaG9yKS5hdHRyKCdocmVmJywgbGlua1VybCk7XG4gICAgICAgIGlmIChpc05ld1dpbmRvdykge1xuICAgICAgICAgICQoYW5jaG9yKS5hdHRyKCd0YXJnZXQnLCAnX2JsYW5rJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJChhbmNob3IpLnJlbW92ZUF0dHIoJ3RhcmdldCcpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc3RhcnRSYW5nZSA9IHJhbmdlLmNyZWF0ZUZyb21Ob2RlQmVmb3JlKGxpc3RzLmhlYWQoYW5jaG9ycykpO1xuICAgICAgY29uc3Qgc3RhcnRQb2ludCA9IHN0YXJ0UmFuZ2UuZ2V0U3RhcnRQb2ludCgpO1xuICAgICAgY29uc3QgZW5kUmFuZ2UgPSByYW5nZS5jcmVhdGVGcm9tTm9kZUFmdGVyKGxpc3RzLmxhc3QoYW5jaG9ycykpO1xuICAgICAgY29uc3QgZW5kUG9pbnQgPSBlbmRSYW5nZS5nZXRFbmRQb2ludCgpO1xuXG4gICAgICByYW5nZS5jcmVhdGUoXG4gICAgICAgIHN0YXJ0UG9pbnQubm9kZSxcbiAgICAgICAgc3RhcnRQb2ludC5vZmZzZXQsXG4gICAgICAgIGVuZFBvaW50Lm5vZGUsXG4gICAgICAgIGVuZFBvaW50Lm9mZnNldFxuICAgICAgKS5zZWxlY3QoKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIHNldHRpbmcgY29sb3JcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzT2JqQ29sb3IgIGNvbG9yIGNvZGVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc09iakNvbG9yLmZvcmVDb2xvciBmb3JlZ3JvdW5kIGNvbG9yXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHNPYmpDb2xvci5iYWNrQ29sb3IgYmFja2dyb3VuZCBjb2xvclxuICAgICAqL1xuICAgIHRoaXMuY29sb3IgPSB0aGlzLndyYXBDb21tYW5kKChjb2xvckluZm8pID0+IHtcbiAgICAgIGNvbnN0IGZvcmVDb2xvciA9IGNvbG9ySW5mby5mb3JlQ29sb3I7XG4gICAgICBjb25zdCBiYWNrQ29sb3IgPSBjb2xvckluZm8uYmFja0NvbG9yO1xuXG4gICAgICBpZiAoZm9yZUNvbG9yKSB7IGRvY3VtZW50LmV4ZWNDb21tYW5kKCdmb3JlQ29sb3InLCBmYWxzZSwgZm9yZUNvbG9yKTsgfVxuICAgICAgaWYgKGJhY2tDb2xvcikgeyBkb2N1bWVudC5leGVjQ29tbWFuZCgnYmFja0NvbG9yJywgZmFsc2UsIGJhY2tDb2xvcik7IH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFNldCBmb3JlZ3JvdW5kIGNvbG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gY29sb3JDb2RlIGZvcmVncm91bmQgY29sb3IgY29kZVxuICAgICAqL1xuICAgIHRoaXMuZm9yZUNvbG9yID0gdGhpcy53cmFwQ29tbWFuZCgoY29sb3JJbmZvKSA9PiB7XG4gICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnc3R5bGVXaXRoQ1NTJywgZmFsc2UsIHRydWUpO1xuICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2ZvcmVDb2xvcicsIGZhbHNlLCBjb2xvckluZm8pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogaW5zZXJ0IFRhYmxlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGltZW5zaW9uIG9mIHRhYmxlIChleCA6IFwiNXg1XCIpXG4gICAgICovXG4gICAgdGhpcy5pbnNlcnRUYWJsZSA9IHRoaXMud3JhcENvbW1hbmQoKGRpbSkgPT4ge1xuICAgICAgY29uc3QgZGltZW5zaW9uID0gZGltLnNwbGl0KCd4Jyk7XG5cbiAgICAgIGNvbnN0IHJuZyA9IHRoaXMuY3JlYXRlUmFuZ2UoKS5kZWxldGVDb250ZW50cygpO1xuICAgICAgcm5nLmluc2VydE5vZGUodGhpcy50YWJsZS5jcmVhdGVUYWJsZShkaW1lbnNpb25bMF0sIGRpbWVuc2lvblsxXSwgdGhpcy5vcHRpb25zKSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiByZW1vdmUgbWVkaWEgb2JqZWN0IGFuZCBGaWd1cmUgRWxlbWVudHMgaWYgbWVkaWEgb2JqZWN0IGlzIGltZyB3aXRoIEZpZ3VyZS5cbiAgICAgKi9cbiAgICB0aGlzLnJlbW92ZU1lZGlhID0gdGhpcy53cmFwQ29tbWFuZCgoKSA9PiB7XG4gICAgICBsZXQgJHRhcmdldCA9ICQodGhpcy5yZXN0b3JlVGFyZ2V0KCkpLnBhcmVudCgpO1xuICAgICAgaWYgKCR0YXJnZXQucGFyZW50KCdmaWd1cmUnKS5sZW5ndGgpIHtcbiAgICAgICAgJHRhcmdldC5wYXJlbnQoJ2ZpZ3VyZScpLnJlbW92ZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHRhcmdldCA9ICQodGhpcy5yZXN0b3JlVGFyZ2V0KCkpLmRldGFjaCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnbWVkaWEuZGVsZXRlJywgJHRhcmdldCwgdGhpcy4kZWRpdGFibGUpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogZmxvYXQgbWVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIHRoaXMuZmxvYXRNZSA9IHRoaXMud3JhcENvbW1hbmQoKHZhbHVlKSA9PiB7XG4gICAgICBjb25zdCAkdGFyZ2V0ID0gJCh0aGlzLnJlc3RvcmVUYXJnZXQoKSk7XG4gICAgICAkdGFyZ2V0LnRvZ2dsZUNsYXNzKCdub3RlLWZsb2F0LWxlZnQnLCB2YWx1ZSA9PT0gJ2xlZnQnKTtcbiAgICAgICR0YXJnZXQudG9nZ2xlQ2xhc3MoJ25vdGUtZmxvYXQtcmlnaHQnLCB2YWx1ZSA9PT0gJ3JpZ2h0Jyk7XG4gICAgICAkdGFyZ2V0LmNzcygnZmxvYXQnLCB2YWx1ZSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiByZXNpemUgb3ZlcmxheSBlbGVtZW50XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gICAgICovXG4gICAgdGhpcy5yZXNpemUgPSB0aGlzLndyYXBDb21tYW5kKCh2YWx1ZSkgPT4ge1xuICAgICAgY29uc3QgJHRhcmdldCA9ICQodGhpcy5yZXN0b3JlVGFyZ2V0KCkpO1xuICAgICAgJHRhcmdldC5jc3Moe1xuICAgICAgICB3aWR0aDogdmFsdWUgKiAxMDAgKyAnJScsXG4gICAgICAgIGhlaWdodDogJydcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgaW5pdGlhbGl6ZSgpIHtcbiAgICAvLyBiaW5kIGN1c3RvbSBldmVudHNcbiAgICB0aGlzLiRlZGl0YWJsZS5vbigna2V5ZG93bicsIChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IGtleS5jb2RlLkVOVEVSKSB7XG4gICAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ2VudGVyJywgZXZlbnQpO1xuICAgICAgfVxuICAgICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgna2V5ZG93bicsIGV2ZW50KTtcblxuICAgICAgaWYgKCFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNob3J0Y3V0cykge1xuICAgICAgICAgIHRoaXMuaGFuZGxlS2V5TWFwKGV2ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnByZXZlbnREZWZhdWx0RWRpdGFibGVTaG9ydEN1dHMoZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pc0xpbWl0ZWQoMSwgZXZlbnQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9KS5vbigna2V5dXAnLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ2tleXVwJywgZXZlbnQpO1xuICAgIH0pLm9uKCdmb2N1cycsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnZm9jdXMnLCBldmVudCk7XG4gICAgfSkub24oJ2JsdXInLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ2JsdXInLCBldmVudCk7XG4gICAgfSkub24oJ21vdXNlZG93bicsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnbW91c2Vkb3duJywgZXZlbnQpO1xuICAgIH0pLm9uKCdtb3VzZXVwJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmNvbnRleHQudHJpZ2dlckV2ZW50KCdtb3VzZXVwJywgZXZlbnQpO1xuICAgIH0pLm9uKCdzY3JvbGwnLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ3Njcm9sbCcsIGV2ZW50KTtcbiAgICB9KS5vbigncGFzdGUnLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ3Bhc3RlJywgZXZlbnQpO1xuICAgIH0pO1xuXG4gICAgLy8gaW5pdCBjb250ZW50IGJlZm9yZSBzZXQgZXZlbnRcbiAgICB0aGlzLiRlZGl0YWJsZS5odG1sKGRvbS5odG1sKHRoaXMuJG5vdGUpIHx8IGRvbS5lbXB0eVBhcmEpO1xuXG4gICAgdGhpcy4kZWRpdGFibGUub24oZW52LmlucHV0RXZlbnROYW1lLCBmdW5jLmRlYm91bmNlKCgpID0+IHtcbiAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ2NoYW5nZScsIHRoaXMuJGVkaXRhYmxlLmh0bWwoKSk7XG4gICAgfSwgMTAwKSk7XG5cbiAgICB0aGlzLiRlZGl0b3Iub24oJ2ZvY3VzaW4nLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ2ZvY3VzaW4nLCBldmVudCk7XG4gICAgfSkub24oJ2ZvY3Vzb3V0JywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmNvbnRleHQudHJpZ2dlckV2ZW50KCdmb2N1c291dCcsIGV2ZW50KTtcbiAgICB9KTtcblxuICAgIGlmICghdGhpcy5vcHRpb25zLmFpck1vZGUpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMud2lkdGgpIHtcbiAgICAgICAgdGhpcy4kZWRpdG9yLm91dGVyV2lkdGgodGhpcy5vcHRpb25zLndpZHRoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuJGVkaXRhYmxlLm91dGVySGVpZ2h0KHRoaXMub3B0aW9ucy5oZWlnaHQpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5tYXhIZWlnaHQpIHtcbiAgICAgICAgdGhpcy4kZWRpdGFibGUuY3NzKCdtYXgtaGVpZ2h0JywgdGhpcy5vcHRpb25zLm1heEhlaWdodCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm1pbkhlaWdodCkge1xuICAgICAgICB0aGlzLiRlZGl0YWJsZS5jc3MoJ21pbi1oZWlnaHQnLCB0aGlzLm9wdGlvbnMubWluSGVpZ2h0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmhpc3RvcnkucmVjb3JkVW5kbygpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLiRlZGl0YWJsZS5vZmYoKTtcbiAgfVxuXG4gIGhhbmRsZUtleU1hcChldmVudCkge1xuICAgIGNvbnN0IGtleU1hcCA9IHRoaXMub3B0aW9ucy5rZXlNYXBbZW52LmlzTWFjID8gJ21hYycgOiAncGMnXTtcbiAgICBjb25zdCBrZXlzID0gW107XG5cbiAgICBpZiAoZXZlbnQubWV0YUtleSkgeyBrZXlzLnB1c2goJ0NNRCcpOyB9XG4gICAgaWYgKGV2ZW50LmN0cmxLZXkgJiYgIWV2ZW50LmFsdEtleSkgeyBrZXlzLnB1c2goJ0NUUkwnKTsgfVxuICAgIGlmIChldmVudC5zaGlmdEtleSkgeyBrZXlzLnB1c2goJ1NISUZUJyk7IH1cblxuICAgIGNvbnN0IGtleU5hbWUgPSBrZXkubmFtZUZyb21Db2RlW2V2ZW50LmtleUNvZGVdO1xuICAgIGlmIChrZXlOYW1lKSB7XG4gICAgICBrZXlzLnB1c2goa2V5TmFtZSk7XG4gICAgfVxuXG4gICAgY29uc3QgZXZlbnROYW1lID0ga2V5TWFwW2tleXMuam9pbignKycpXTtcbiAgICBpZiAoZXZlbnROYW1lKSB7XG4gICAgICBpZiAodGhpcy5jb250ZXh0Lmludm9rZShldmVudE5hbWUpICE9PSBmYWxzZSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoa2V5LmlzRWRpdChldmVudC5rZXlDb2RlKSkge1xuICAgICAgdGhpcy5hZnRlckNvbW1hbmQoKTtcbiAgICB9XG4gIH1cblxuICBwcmV2ZW50RGVmYXVsdEVkaXRhYmxlU2hvcnRDdXRzKGV2ZW50KSB7XG4gICAgLy8gQihCb2xkLCA2NikgLyBJKEl0YWxpYywgNzMpIC8gVShVbmRlcmxpbmUsIDg1KVxuICAgIGlmICgoZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSAmJlxuICAgICAgbGlzdHMuY29udGFpbnMoWzY2LCA3MywgODVdLCBldmVudC5rZXlDb2RlKSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cblxuICBpc0xpbWl0ZWQocGFkLCBldmVudCkge1xuICAgIHBhZCA9IHBhZCB8fCAwO1xuXG4gICAgaWYgKHR5cGVvZiBldmVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChrZXkuaXNNb3ZlKGV2ZW50LmtleUNvZGUpIHx8XG4gICAgICAgICAgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSkgfHxcbiAgICAgICAgICBsaXN0cy5jb250YWlucyhba2V5LmNvZGUuQkFDS1NQQUNFLCBrZXkuY29kZS5ERUxFVEVdLCBldmVudC5rZXlDb2RlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5tYXhUZXh0TGVuZ3RoID4gMCkge1xuICAgICAgaWYgKCh0aGlzLiRlZGl0YWJsZS50ZXh0KCkubGVuZ3RoICsgcGFkKSA+PSB0aGlzLm9wdGlvbnMubWF4VGV4dExlbmd0aCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBjcmVhdGUgcmFuZ2VcbiAgICogQHJldHVybiB7V3JhcHBlZFJhbmdlfVxuICAgKi9cbiAgY3JlYXRlUmFuZ2UoKSB7XG4gICAgdGhpcy5mb2N1cygpO1xuICAgIHJldHVybiByYW5nZS5jcmVhdGUodGhpcy5lZGl0YWJsZSk7XG4gIH1cblxuICAvKipcbiAgICogc2F2ZVJhbmdlXG4gICAqXG4gICAqIHNhdmUgY3VycmVudCByYW5nZVxuICAgKlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt0aGVuQ29sbGFwc2U9ZmFsc2VdXG4gICAqL1xuICBzYXZlUmFuZ2UodGhlbkNvbGxhcHNlKSB7XG4gICAgdGhpcy5sYXN0UmFuZ2UgPSB0aGlzLmNyZWF0ZVJhbmdlKCk7XG4gICAgaWYgKHRoZW5Db2xsYXBzZSkge1xuICAgICAgdGhpcy5sYXN0UmFuZ2UuY29sbGFwc2UoKS5zZWxlY3QoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogcmVzdG9yZVJhbmdlXG4gICAqXG4gICAqIHJlc3RvcmUgbGF0ZWx5IHJhbmdlXG4gICAqL1xuICByZXN0b3JlUmFuZ2UoKSB7XG4gICAgaWYgKHRoaXMubGFzdFJhbmdlKSB7XG4gICAgICB0aGlzLmxhc3RSYW5nZS5zZWxlY3QoKTtcbiAgICAgIHRoaXMuZm9jdXMoKTtcbiAgICB9XG4gIH1cblxuICBzYXZlVGFyZ2V0KG5vZGUpIHtcbiAgICB0aGlzLiRlZGl0YWJsZS5kYXRhKCd0YXJnZXQnLCBub2RlKTtcbiAgfVxuXG4gIGNsZWFyVGFyZ2V0KCkge1xuICAgIHRoaXMuJGVkaXRhYmxlLnJlbW92ZURhdGEoJ3RhcmdldCcpO1xuICB9XG5cbiAgcmVzdG9yZVRhcmdldCgpIHtcbiAgICByZXR1cm4gdGhpcy4kZWRpdGFibGUuZGF0YSgndGFyZ2V0Jyk7XG4gIH1cblxuICAvKipcbiAgICogY3VycmVudFN0eWxlXG4gICAqXG4gICAqIGN1cnJlbnQgc3R5bGVcbiAgICogQHJldHVybiB7T2JqZWN0fEJvb2xlYW59IHVuZm9jdXNcbiAgICovXG4gIGN1cnJlbnRTdHlsZSgpIHtcbiAgICBsZXQgcm5nID0gcmFuZ2UuY3JlYXRlKCk7XG4gICAgaWYgKHJuZykge1xuICAgICAgcm5nID0gcm5nLm5vcm1hbGl6ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gcm5nID8gdGhpcy5zdHlsZS5jdXJyZW50KHJuZykgOiB0aGlzLnN0eWxlLmZyb21Ob2RlKHRoaXMuJGVkaXRhYmxlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBzdHlsZSBmcm9tIG5vZGVcbiAgICpcbiAgICogQHBhcmFtIHtqUXVlcnl9ICRub2RlXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHN0eWxlRnJvbU5vZGUoJG5vZGUpIHtcbiAgICByZXR1cm4gdGhpcy5zdHlsZS5mcm9tTm9kZSgkbm9kZSk7XG4gIH1cblxuICAvKipcbiAgICogdW5kb1xuICAgKi9cbiAgdW5kbygpIHtcbiAgICB0aGlzLmNvbnRleHQudHJpZ2dlckV2ZW50KCdiZWZvcmUuY29tbWFuZCcsIHRoaXMuJGVkaXRhYmxlLmh0bWwoKSk7XG4gICAgdGhpcy5oaXN0b3J5LnVuZG8oKTtcbiAgICB0aGlzLmNvbnRleHQudHJpZ2dlckV2ZW50KCdjaGFuZ2UnLCB0aGlzLiRlZGl0YWJsZS5odG1sKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIHJlZG9cbiAgICovXG4gIHJlZG8oKSB7XG4gICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnYmVmb3JlLmNvbW1hbmQnLCB0aGlzLiRlZGl0YWJsZS5odG1sKCkpO1xuICAgIHRoaXMuaGlzdG9yeS5yZWRvKCk7XG4gICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnY2hhbmdlJywgdGhpcy4kZWRpdGFibGUuaHRtbCgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBiZWZvcmUgY29tbWFuZFxuICAgKi9cbiAgYmVmb3JlQ29tbWFuZCgpIHtcbiAgICB0aGlzLmNvbnRleHQudHJpZ2dlckV2ZW50KCdiZWZvcmUuY29tbWFuZCcsIHRoaXMuJGVkaXRhYmxlLmh0bWwoKSk7XG4gICAgLy8ga2VlcCBmb2N1cyBvbiBlZGl0YWJsZSBiZWZvcmUgY29tbWFuZCBleGVjdXRpb25cbiAgICB0aGlzLmZvY3VzKCk7XG4gIH1cblxuICAvKipcbiAgICogYWZ0ZXIgY29tbWFuZFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzUHJldmVudFRyaWdnZXJcbiAgICovXG4gIGFmdGVyQ29tbWFuZChpc1ByZXZlbnRUcmlnZ2VyKSB7XG4gICAgdGhpcy5ub3JtYWxpemVDb250ZW50KCk7XG4gICAgdGhpcy5oaXN0b3J5LnJlY29yZFVuZG8oKTtcbiAgICBpZiAoIWlzUHJldmVudFRyaWdnZXIpIHtcbiAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ2NoYW5nZScsIHRoaXMuJGVkaXRhYmxlLmh0bWwoKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGhhbmRsZSB0YWIga2V5XG4gICAqL1xuICB0YWIoKSB7XG4gICAgY29uc3Qgcm5nID0gdGhpcy5jcmVhdGVSYW5nZSgpO1xuICAgIGlmIChybmcuaXNDb2xsYXBzZWQoKSAmJiBybmcuaXNPbkNlbGwoKSkge1xuICAgICAgdGhpcy50YWJsZS50YWIocm5nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy50YWJTaXplID09PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmlzTGltaXRlZCh0aGlzLm9wdGlvbnMudGFiU2l6ZSkpIHtcbiAgICAgICAgdGhpcy5iZWZvcmVDb21tYW5kKCk7XG4gICAgICAgIHRoaXMudHlwaW5nLmluc2VydFRhYihybmcsIHRoaXMub3B0aW9ucy50YWJTaXplKTtcbiAgICAgICAgdGhpcy5hZnRlckNvbW1hbmQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogaGFuZGxlIHNoaWZ0K3RhYiBrZXlcbiAgICovXG4gIHVudGFiKCkge1xuICAgIGNvbnN0IHJuZyA9IHRoaXMuY3JlYXRlUmFuZ2UoKTtcbiAgICBpZiAocm5nLmlzQ29sbGFwc2VkKCkgJiYgcm5nLmlzT25DZWxsKCkpIHtcbiAgICAgIHRoaXMudGFibGUudGFiKHJuZywgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMudGFiU2l6ZSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHJ1biBnaXZlbiBmdW5jdGlvbiBiZXR3ZWVuIGJlZm9yZUNvbW1hbmQgYW5kIGFmdGVyQ29tbWFuZFxuICAgKi9cbiAgd3JhcENvbW1hbmQoZm4pIHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdGhpcy5iZWZvcmVDb21tYW5kKCk7XG4gICAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgdGhpcy5hZnRlckNvbW1hbmQoKTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIGluc2VydCBpbWFnZVxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gc3JjXG4gICAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBwYXJhbVxuICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgKi9cbiAgaW5zZXJ0SW1hZ2Uoc3JjLCBwYXJhbSkge1xuICAgIHJldHVybiBjcmVhdGVJbWFnZShzcmMsIHBhcmFtKS50aGVuKCgkaW1hZ2UpID0+IHtcbiAgICAgIHRoaXMuYmVmb3JlQ29tbWFuZCgpO1xuXG4gICAgICBpZiAodHlwZW9mIHBhcmFtID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHBhcmFtKCRpbWFnZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodHlwZW9mIHBhcmFtID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICRpbWFnZS5hdHRyKCdkYXRhLWZpbGVuYW1lJywgcGFyYW0pO1xuICAgICAgICB9XG4gICAgICAgICRpbWFnZS5jc3MoJ3dpZHRoJywgTWF0aC5taW4odGhpcy4kZWRpdGFibGUud2lkdGgoKSwgJGltYWdlLndpZHRoKCkpKTtcbiAgICAgIH1cblxuICAgICAgJGltYWdlLnNob3coKTtcbiAgICAgIHJhbmdlLmNyZWF0ZSh0aGlzLmVkaXRhYmxlKS5pbnNlcnROb2RlKCRpbWFnZVswXSk7XG4gICAgICByYW5nZS5jcmVhdGVGcm9tTm9kZUFmdGVyKCRpbWFnZVswXSkuc2VsZWN0KCk7XG4gICAgICB0aGlzLmFmdGVyQ29tbWFuZCgpO1xuICAgIH0pLmZhaWwoKGUpID0+IHtcbiAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ2ltYWdlLnVwbG9hZC5lcnJvcicsIGUpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIGluc2VydEltYWdlc1xuICAgKiBAcGFyYW0ge0ZpbGVbXX0gZmlsZXNcbiAgICovXG4gIGluc2VydEltYWdlcyhmaWxlcykge1xuICAgICQuZWFjaChmaWxlcywgKGlkeCwgZmlsZSkgPT4ge1xuICAgICAgY29uc3QgZmlsZW5hbWUgPSBmaWxlLm5hbWU7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLm1heGltdW1JbWFnZUZpbGVTaXplICYmIHRoaXMub3B0aW9ucy5tYXhpbXVtSW1hZ2VGaWxlU2l6ZSA8IGZpbGUuc2l6ZSkge1xuICAgICAgICB0aGlzLmNvbnRleHQudHJpZ2dlckV2ZW50KCdpbWFnZS51cGxvYWQuZXJyb3InLCB0aGlzLmxhbmcuaW1hZ2UubWF4aW11bUZpbGVTaXplRXJyb3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVhZEZpbGVBc0RhdGFVUkwoZmlsZSkudGhlbigoZGF0YVVSTCkgPT4ge1xuICAgICAgICAgIHJldHVybiB0aGlzLmluc2VydEltYWdlKGRhdGFVUkwsIGZpbGVuYW1lKTtcbiAgICAgICAgfSkuZmFpbCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnaW1hZ2UudXBsb2FkLmVycm9yJyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIGluc2VydEltYWdlc09yQ2FsbGJhY2tcbiAgICogQHBhcmFtIHtGaWxlW119IGZpbGVzXG4gICAqL1xuICBpbnNlcnRJbWFnZXNPckNhbGxiYWNrKGZpbGVzKSB7XG4gICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy5vcHRpb25zLmNhbGxiYWNrcztcblxuICAgIC8vIElmIG9uSW1hZ2VVcGxvYWQgdGhpcy5vcHRpb25zIHNldHRlZFxuICAgIGlmIChjYWxsYmFja3Mub25JbWFnZVVwbG9hZCkge1xuICAgICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnaW1hZ2UudXBsb2FkJywgZmlsZXMpO1xuICAgICAgLy8gZWxzZSBpbnNlcnQgSW1hZ2UgYXMgZGF0YVVSTFxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmluc2VydEltYWdlcyhmaWxlcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHJldHVybiBzZWxlY3RlZCBwbGFpbiB0ZXh0XG4gICAqIEByZXR1cm4ge1N0cmluZ30gdGV4dFxuICAgKi9cbiAgZ2V0U2VsZWN0ZWRUZXh0KCkge1xuICAgIGxldCBybmcgPSB0aGlzLmNyZWF0ZVJhbmdlKCk7XG5cbiAgICAvLyBpZiByYW5nZSBvbiBhbmNob3IsIGV4cGFuZCByYW5nZSB3aXRoIGFuY2hvclxuICAgIGlmIChybmcuaXNPbkFuY2hvcigpKSB7XG4gICAgICBybmcgPSByYW5nZS5jcmVhdGVGcm9tTm9kZShkb20uYW5jZXN0b3Iocm5nLnNjLCBkb20uaXNBbmNob3IpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcm5nLnRvU3RyaW5nKCk7XG4gIH1cblxuICBvbkZvcm1hdEJsb2NrKHRhZ05hbWUsICR0YXJnZXQpIHtcbiAgICAvLyBbd29ya2Fyb3VuZF0gZm9yIE1TSUUsIElFIG5lZWQgYDxgXG4gICAgdGFnTmFtZSA9IGVudi5pc01TSUUgPyAnPCcgKyB0YWdOYW1lICsgJz4nIDogdGFnTmFtZTtcbiAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnRm9ybWF0QmxvY2snLCBmYWxzZSwgdGFnTmFtZSk7XG5cbiAgICAvLyBzdXBwb3J0IGN1c3RvbSBjbGFzc1xuICAgIGlmICgkdGFyZ2V0ICYmICR0YXJnZXQubGVuZ3RoKSB7XG4gICAgICBjb25zdCBjbGFzc05hbWUgPSAkdGFyZ2V0WzBdLmNsYXNzTmFtZSB8fCAnJztcbiAgICAgIGlmIChjbGFzc05hbWUpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFJhbmdlID0gdGhpcy5jcmVhdGVSYW5nZSgpO1xuXG4gICAgICAgIGNvbnN0ICRwYXJlbnQgPSAkKFtjdXJyZW50UmFuZ2Uuc2MsIGN1cnJlbnRSYW5nZS5lY10pLmNsb3Nlc3QodGFnTmFtZSk7XG4gICAgICAgICRwYXJlbnQuYWRkQ2xhc3MoY2xhc3NOYW1lKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmb3JtYXRQYXJhKCkge1xuICAgIHRoaXMuZm9ybWF0QmxvY2soJ1AnKTtcbiAgfVxuXG4gIGZvbnRTdHlsaW5nKHRhcmdldCwgdmFsdWUpIHtcbiAgICBjb25zdCBybmcgPSB0aGlzLmNyZWF0ZVJhbmdlKCk7XG5cbiAgICBpZiAocm5nKSB7XG4gICAgICBjb25zdCBzcGFucyA9IHRoaXMuc3R5bGUuc3R5bGVOb2RlcyhybmcpO1xuICAgICAgJChzcGFucykuY3NzKHRhcmdldCwgdmFsdWUpO1xuXG4gICAgICAvLyBbd29ya2Fyb3VuZF0gYWRkZWQgc3R5bGVkIGJvZ3VzIHNwYW4gZm9yIHN0eWxlXG4gICAgICAvLyAgLSBhbHNvIGJvZ3VzIGNoYXJhY3RlciBuZWVkZWQgZm9yIGN1cnNvciBwb3NpdGlvblxuICAgICAgaWYgKHJuZy5pc0NvbGxhcHNlZCgpKSB7XG4gICAgICAgIGNvbnN0IGZpcnN0U3BhbiA9IGxpc3RzLmhlYWQoc3BhbnMpO1xuICAgICAgICBpZiAoZmlyc3RTcGFuICYmICFkb20ubm9kZUxlbmd0aChmaXJzdFNwYW4pKSB7XG4gICAgICAgICAgZmlyc3RTcGFuLmlubmVySFRNTCA9IGRvbS5aRVJPX1dJRFRIX05CU1BfQ0hBUjtcbiAgICAgICAgICByYW5nZS5jcmVhdGVGcm9tTm9kZUFmdGVyKGZpcnN0U3Bhbi5maXJzdENoaWxkKS5zZWxlY3QoKTtcbiAgICAgICAgICB0aGlzLiRlZGl0YWJsZS5kYXRhKEtFWV9CT0dVUywgZmlyc3RTcGFuKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiB1bmxpbmtcbiAgICpcbiAgICogQHR5cGUgY29tbWFuZFxuICAgKi9cbiAgdW5saW5rKCkge1xuICAgIGxldCBybmcgPSB0aGlzLmNyZWF0ZVJhbmdlKCk7XG4gICAgaWYgKHJuZy5pc09uQW5jaG9yKCkpIHtcbiAgICAgIGNvbnN0IGFuY2hvciA9IGRvbS5hbmNlc3Rvcihybmcuc2MsIGRvbS5pc0FuY2hvcik7XG4gICAgICBybmcgPSByYW5nZS5jcmVhdGVGcm9tTm9kZShhbmNob3IpO1xuICAgICAgcm5nLnNlbGVjdCgpO1xuXG4gICAgICB0aGlzLmJlZm9yZUNvbW1hbmQoKTtcbiAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCd1bmxpbmsnKTtcbiAgICAgIHRoaXMuYWZ0ZXJDb21tYW5kKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHJldHVybnMgbGluayBpbmZvXG4gICAqXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICogQHJldHVybiB7V3JhcHBlZFJhbmdlfSByZXR1cm4ucmFuZ2VcbiAgICogQHJldHVybiB7U3RyaW5nfSByZXR1cm4udGV4dFxuICAgKiBAcmV0dXJuIHtCb29sZWFufSBbcmV0dXJuLmlzTmV3V2luZG93PXRydWVdXG4gICAqIEByZXR1cm4ge1N0cmluZ30gW3JldHVybi51cmw9XCJcIl1cbiAgICovXG4gIGdldExpbmtJbmZvKCkge1xuICAgIGNvbnN0IHJuZyA9IHRoaXMuY3JlYXRlUmFuZ2UoKS5leHBhbmQoZG9tLmlzQW5jaG9yKTtcblxuICAgIC8vIEdldCB0aGUgZmlyc3QgYW5jaG9yIG9uIHJhbmdlKGZvciBlZGl0KS5cbiAgICBjb25zdCAkYW5jaG9yID0gJChsaXN0cy5oZWFkKHJuZy5ub2Rlcyhkb20uaXNBbmNob3IpKSk7XG4gICAgY29uc3QgbGlua0luZm8gPSB7XG4gICAgICByYW5nZTogcm5nLFxuICAgICAgdGV4dDogcm5nLnRvU3RyaW5nKCksXG4gICAgICB1cmw6ICRhbmNob3IubGVuZ3RoID8gJGFuY2hvci5hdHRyKCdocmVmJykgOiAnJ1xuICAgIH07XG5cbiAgICAvLyBEZWZpbmUgaXNOZXdXaW5kb3cgd2hlbiBhbmNob3IgZXhpc3RzLlxuICAgIGlmICgkYW5jaG9yLmxlbmd0aCkge1xuICAgICAgbGlua0luZm8uaXNOZXdXaW5kb3cgPSAkYW5jaG9yLmF0dHIoJ3RhcmdldCcpID09PSAnX2JsYW5rJztcbiAgICB9XG5cbiAgICByZXR1cm4gbGlua0luZm87XG4gIH1cblxuICBhZGRSb3cocG9zaXRpb24pIHtcbiAgICBjb25zdCBybmcgPSB0aGlzLmNyZWF0ZVJhbmdlKHRoaXMuJGVkaXRhYmxlKTtcbiAgICBpZiAocm5nLmlzQ29sbGFwc2VkKCkgJiYgcm5nLmlzT25DZWxsKCkpIHtcbiAgICAgIHRoaXMuYmVmb3JlQ29tbWFuZCgpO1xuICAgICAgdGhpcy50YWJsZS5hZGRSb3cocm5nLCBwb3NpdGlvbik7XG4gICAgICB0aGlzLmFmdGVyQ29tbWFuZCgpO1xuICAgIH1cbiAgfVxuXG4gIGFkZENvbChwb3NpdGlvbikge1xuICAgIGNvbnN0IHJuZyA9IHRoaXMuY3JlYXRlUmFuZ2UodGhpcy4kZWRpdGFibGUpO1xuICAgIGlmIChybmcuaXNDb2xsYXBzZWQoKSAmJiBybmcuaXNPbkNlbGwoKSkge1xuICAgICAgdGhpcy5iZWZvcmVDb21tYW5kKCk7XG4gICAgICB0aGlzLnRhYmxlLmFkZENvbChybmcsIHBvc2l0aW9uKTtcbiAgICAgIHRoaXMuYWZ0ZXJDb21tYW5kKCk7XG4gICAgfVxuICB9XG5cbiAgZGVsZXRlUm93KCkge1xuICAgIGNvbnN0IHJuZyA9IHRoaXMuY3JlYXRlUmFuZ2UodGhpcy4kZWRpdGFibGUpO1xuICAgIGlmIChybmcuaXNDb2xsYXBzZWQoKSAmJiBybmcuaXNPbkNlbGwoKSkge1xuICAgICAgdGhpcy5iZWZvcmVDb21tYW5kKCk7XG4gICAgICB0aGlzLnRhYmxlLmRlbGV0ZVJvdyhybmcpO1xuICAgICAgdGhpcy5hZnRlckNvbW1hbmQoKTtcbiAgICB9XG4gIH1cblxuICBkZWxldGVDb2woKSB7XG4gICAgY29uc3Qgcm5nID0gdGhpcy5jcmVhdGVSYW5nZSh0aGlzLiRlZGl0YWJsZSk7XG4gICAgaWYgKHJuZy5pc0NvbGxhcHNlZCgpICYmIHJuZy5pc09uQ2VsbCgpKSB7XG4gICAgICB0aGlzLmJlZm9yZUNvbW1hbmQoKTtcbiAgICAgIHRoaXMudGFibGUuZGVsZXRlQ29sKHJuZyk7XG4gICAgICB0aGlzLmFmdGVyQ29tbWFuZCgpO1xuICAgIH1cbiAgfVxuXG4gIGRlbGV0ZVRhYmxlKCkge1xuICAgIGNvbnN0IHJuZyA9IHRoaXMuY3JlYXRlUmFuZ2UodGhpcy4kZWRpdGFibGUpO1xuICAgIGlmIChybmcuaXNDb2xsYXBzZWQoKSAmJiBybmcuaXNPbkNlbGwoKSkge1xuICAgICAgdGhpcy5iZWZvcmVDb21tYW5kKCk7XG4gICAgICB0aGlzLnRhYmxlLmRlbGV0ZVRhYmxlKHJuZyk7XG4gICAgICB0aGlzLmFmdGVyQ29tbWFuZCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1Bvc2l0aW9ufSBwb3NcbiAgICogQHBhcmFtIHtqUXVlcnl9ICR0YXJnZXQgLSB0YXJnZXQgZWxlbWVudFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtiS2VlcFJhdGlvXSAtIGtlZXAgcmF0aW9cbiAgICovXG4gIHJlc2l6ZVRvKHBvcywgJHRhcmdldCwgYktlZXBSYXRpbykge1xuICAgIGxldCBpbWFnZVNpemU7XG4gICAgaWYgKGJLZWVwUmF0aW8pIHtcbiAgICAgIGNvbnN0IG5ld1JhdGlvID0gcG9zLnkgLyBwb3MueDtcbiAgICAgIGNvbnN0IHJhdGlvID0gJHRhcmdldC5kYXRhKCdyYXRpbycpO1xuICAgICAgaW1hZ2VTaXplID0ge1xuICAgICAgICB3aWR0aDogcmF0aW8gPiBuZXdSYXRpbyA/IHBvcy54IDogcG9zLnkgLyByYXRpbyxcbiAgICAgICAgaGVpZ2h0OiByYXRpbyA+IG5ld1JhdGlvID8gcG9zLnggKiByYXRpbyA6IHBvcy55XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBpbWFnZVNpemUgPSB7XG4gICAgICAgIHdpZHRoOiBwb3MueCxcbiAgICAgICAgaGVpZ2h0OiBwb3MueVxuICAgICAgfTtcbiAgICB9XG5cbiAgICAkdGFyZ2V0LmNzcyhpbWFnZVNpemUpO1xuICB9XG5cbiAgLyoqXG4gICAqIHJldHVybnMgd2hldGhlciBlZGl0YWJsZSBhcmVhIGhhcyBmb2N1cyBvciBub3QuXG4gICAqL1xuICBoYXNGb2N1cygpIHtcbiAgICByZXR1cm4gdGhpcy4kZWRpdGFibGUuaXMoJzpmb2N1cycpO1xuICB9XG5cbiAgLyoqXG4gICAqIHNldCBmb2N1c1xuICAgKi9cbiAgZm9jdXMoKSB7XG4gICAgLy8gW3dvcmthcm91bmRdIFNjcmVlbiB3aWxsIG1vdmUgd2hlbiBwYWdlIGlzIHNjb2xsZWQgaW4gSUUuXG4gICAgLy8gIC0gZG8gZm9jdXMgd2hlbiBub3QgZm9jdXNlZFxuICAgIGlmICghdGhpcy5oYXNGb2N1cygpKSB7XG4gICAgICB0aGlzLiRlZGl0YWJsZS5mb2N1cygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiByZXR1cm5zIHdoZXRoZXIgY29udGVudHMgaXMgZW1wdHkgb3Igbm90LlxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgaXNFbXB0eSgpIHtcbiAgICByZXR1cm4gZG9tLmlzRW1wdHkodGhpcy4kZWRpdGFibGVbMF0pIHx8IGRvbS5lbXB0eVBhcmEgPT09IHRoaXMuJGVkaXRhYmxlLmh0bWwoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFsbCBjb250ZW50cyBhbmQgcmVzdG9yZXMgdGhlIGVkaXRhYmxlIGluc3RhbmNlIHRvIGFuIF9lbXB0eVBhcmFfLlxuICAgKi9cbiAgZW1wdHkoKSB7XG4gICAgdGhpcy5jb250ZXh0Lmludm9rZSgnY29kZScsIGRvbS5lbXB0eVBhcmEpO1xuICB9XG5cbiAgLyoqXG4gICAqIG5vcm1hbGl6ZSBjb250ZW50XG4gICAqL1xuICBub3JtYWxpemVDb250ZW50KCkge1xuICAgIHRoaXMuJGVkaXRhYmxlWzBdLm5vcm1hbGl6ZSgpO1xuICB9XG59XG4iLCJpbXBvcnQgbGlzdHMgZnJvbSAnLi4vY29yZS9saXN0cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENsaXBib2FyZCB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIHRoaXMuJGVkaXRhYmxlID0gY29udGV4dC5sYXlvdXRJbmZvLmVkaXRhYmxlO1xuICB9XG5cbiAgaW5pdGlhbGl6ZSgpIHtcbiAgICB0aGlzLiRlZGl0YWJsZS5vbigncGFzdGUnLCB0aGlzLnBhc3RlQnlFdmVudC5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBwYXN0ZSBieSBjbGlwYm9hcmQgZXZlbnRcbiAgICpcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnRcbiAgICovXG4gIHBhc3RlQnlFdmVudChldmVudCkge1xuICAgIGNvbnN0IGNsaXBib2FyZERhdGEgPSBldmVudC5vcmlnaW5hbEV2ZW50LmNsaXBib2FyZERhdGE7XG4gICAgaWYgKGNsaXBib2FyZERhdGEgJiYgY2xpcGJvYXJkRGF0YS5pdGVtcyAmJiBjbGlwYm9hcmREYXRhLml0ZW1zLmxlbmd0aCkge1xuICAgICAgY29uc3QgaXRlbSA9IGxpc3RzLmhlYWQoY2xpcGJvYXJkRGF0YS5pdGVtcyk7XG4gICAgICBpZiAoaXRlbS5raW5kID09PSAnZmlsZScgJiYgaXRlbS50eXBlLmluZGV4T2YoJ2ltYWdlLycpICE9PSAtMSkge1xuICAgICAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3IuaW5zZXJ0SW1hZ2VzT3JDYWxsYmFjaycsIFtpdGVtLmdldEFzRmlsZSgpXSk7XG4gICAgICB9XG4gICAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3IuYWZ0ZXJDb21tYW5kJyk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEcm9wem9uZSB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIHRoaXMuJGV2ZW50TGlzdGVuZXIgPSAkKGRvY3VtZW50KTtcbiAgICB0aGlzLiRlZGl0b3IgPSBjb250ZXh0LmxheW91dEluZm8uZWRpdG9yO1xuICAgIHRoaXMuJGVkaXRhYmxlID0gY29udGV4dC5sYXlvdXRJbmZvLmVkaXRhYmxlO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcbiAgICB0aGlzLmxhbmcgPSB0aGlzLm9wdGlvbnMubGFuZ0luZm87XG4gICAgdGhpcy5kb2N1bWVudEV2ZW50SGFuZGxlcnMgPSB7fTtcblxuICAgIHRoaXMuJGRyb3B6b25lID0gJChbXG4gICAgICAnPGRpdiBjbGFzcz1cIm5vdGUtZHJvcHpvbmVcIj4nLFxuICAgICAgJyAgPGRpdiBjbGFzcz1cIm5vdGUtZHJvcHpvbmUtbWVzc2FnZVwiLz4nLFxuICAgICAgJzwvZGl2PidcbiAgICBdLmpvaW4oJycpKS5wcmVwZW5kVG8odGhpcy4kZWRpdG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBhdHRhY2ggRHJhZyBhbmQgRHJvcCBFdmVudHNcbiAgICovXG4gIGluaXRpYWxpemUoKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5kaXNhYmxlRHJhZ0FuZERyb3ApIHtcbiAgICAgIC8vIHByZXZlbnQgZGVmYXVsdCBkcm9wIGV2ZW50XG4gICAgICB0aGlzLmRvY3VtZW50RXZlbnRIYW5kbGVycy5vbkRyb3AgPSAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9O1xuICAgICAgLy8gZG8gbm90IGNvbnNpZGVyIG91dHNpZGUgb2YgZHJvcHpvbmVcbiAgICAgIHRoaXMuJGV2ZW50TGlzdGVuZXIgPSB0aGlzLiRkcm9wem9uZTtcbiAgICAgIHRoaXMuJGV2ZW50TGlzdGVuZXIub24oJ2Ryb3AnLCB0aGlzLmRvY3VtZW50RXZlbnRIYW5kbGVycy5vbkRyb3ApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmF0dGFjaERyYWdBbmREcm9wRXZlbnQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogYXR0YWNoIERyYWcgYW5kIERyb3AgRXZlbnRzXG4gICAqL1xuICBhdHRhY2hEcmFnQW5kRHJvcEV2ZW50KCkge1xuICAgIGxldCBjb2xsZWN0aW9uID0gJCgpO1xuICAgIGNvbnN0ICRkcm9wem9uZU1lc3NhZ2UgPSB0aGlzLiRkcm9wem9uZS5maW5kKCcubm90ZS1kcm9wem9uZS1tZXNzYWdlJyk7XG5cbiAgICB0aGlzLmRvY3VtZW50RXZlbnRIYW5kbGVycy5vbkRyYWdlbnRlciA9IChlKSA9PiB7XG4gICAgICBjb25zdCBpc0NvZGV2aWV3ID0gdGhpcy5jb250ZXh0Lmludm9rZSgnY29kZXZpZXcuaXNBY3RpdmF0ZWQnKTtcbiAgICAgIGNvbnN0IGhhc0VkaXRvclNpemUgPSB0aGlzLiRlZGl0b3Iud2lkdGgoKSA+IDAgJiYgdGhpcy4kZWRpdG9yLmhlaWdodCgpID4gMDtcbiAgICAgIGlmICghaXNDb2RldmlldyAmJiAhY29sbGVjdGlvbi5sZW5ndGggJiYgaGFzRWRpdG9yU2l6ZSkge1xuICAgICAgICB0aGlzLiRlZGl0b3IuYWRkQ2xhc3MoJ2RyYWdvdmVyJyk7XG4gICAgICAgIHRoaXMuJGRyb3B6b25lLndpZHRoKHRoaXMuJGVkaXRvci53aWR0aCgpKTtcbiAgICAgICAgdGhpcy4kZHJvcHpvbmUuaGVpZ2h0KHRoaXMuJGVkaXRvci5oZWlnaHQoKSk7XG4gICAgICAgICRkcm9wem9uZU1lc3NhZ2UudGV4dCh0aGlzLmxhbmcuaW1hZ2UuZHJhZ0ltYWdlSGVyZSk7XG4gICAgICB9XG4gICAgICBjb2xsZWN0aW9uID0gY29sbGVjdGlvbi5hZGQoZS50YXJnZXQpO1xuICAgIH07XG5cbiAgICB0aGlzLmRvY3VtZW50RXZlbnRIYW5kbGVycy5vbkRyYWdsZWF2ZSA9IChlKSA9PiB7XG4gICAgICBjb2xsZWN0aW9uID0gY29sbGVjdGlvbi5ub3QoZS50YXJnZXQpO1xuICAgICAgaWYgKCFjb2xsZWN0aW9uLmxlbmd0aCkge1xuICAgICAgICB0aGlzLiRlZGl0b3IucmVtb3ZlQ2xhc3MoJ2RyYWdvdmVyJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuZG9jdW1lbnRFdmVudEhhbmRsZXJzLm9uRHJvcCA9ICgpID0+IHtcbiAgICAgIGNvbGxlY3Rpb24gPSAkKCk7XG4gICAgICB0aGlzLiRlZGl0b3IucmVtb3ZlQ2xhc3MoJ2RyYWdvdmVyJyk7XG4gICAgfTtcblxuICAgIC8vIHNob3cgZHJvcHpvbmUgb24gZHJhZ2VudGVyIHdoZW4gZHJhZ2dpbmcgYSBvYmplY3QgdG8gZG9jdW1lbnRcbiAgICAvLyAtYnV0IG9ubHkgaWYgdGhlIGVkaXRvciBpcyB2aXNpYmxlLCBpLmUuIGhhcyBhIHBvc2l0aXZlIHdpZHRoIGFuZCBoZWlnaHRcbiAgICB0aGlzLiRldmVudExpc3RlbmVyLm9uKCdkcmFnZW50ZXInLCB0aGlzLmRvY3VtZW50RXZlbnRIYW5kbGVycy5vbkRyYWdlbnRlcilcbiAgICAgIC5vbignZHJhZ2xlYXZlJywgdGhpcy5kb2N1bWVudEV2ZW50SGFuZGxlcnMub25EcmFnbGVhdmUpXG4gICAgICAub24oJ2Ryb3AnLCB0aGlzLmRvY3VtZW50RXZlbnRIYW5kbGVycy5vbkRyb3ApO1xuXG4gICAgLy8gY2hhbmdlIGRyb3B6b25lJ3MgbWVzc2FnZSBvbiBob3Zlci5cbiAgICB0aGlzLiRkcm9wem9uZS5vbignZHJhZ2VudGVyJywgKCkgPT4ge1xuICAgICAgdGhpcy4kZHJvcHpvbmUuYWRkQ2xhc3MoJ2hvdmVyJyk7XG4gICAgICAkZHJvcHpvbmVNZXNzYWdlLnRleHQodGhpcy5sYW5nLmltYWdlLmRyb3BJbWFnZSk7XG4gICAgfSkub24oJ2RyYWdsZWF2ZScsICgpID0+IHtcbiAgICAgIHRoaXMuJGRyb3B6b25lLnJlbW92ZUNsYXNzKCdob3ZlcicpO1xuICAgICAgJGRyb3B6b25lTWVzc2FnZS50ZXh0KHRoaXMubGFuZy5pbWFnZS5kcmFnSW1hZ2VIZXJlKTtcbiAgICB9KTtcblxuICAgIC8vIGF0dGFjaCBkcm9wSW1hZ2VcbiAgICB0aGlzLiRkcm9wem9uZS5vbignZHJvcCcsIChldmVudCkgPT4ge1xuICAgICAgY29uc3QgZGF0YVRyYW5zZmVyID0gZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXI7XG5cbiAgICAgIC8vIHN0b3AgdGhlIGJyb3dzZXIgZnJvbSBvcGVuaW5nIHRoZSBkcm9wcGVkIGNvbnRlbnRcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGlmIChkYXRhVHJhbnNmZXIgJiYgZGF0YVRyYW5zZmVyLmZpbGVzICYmIGRhdGFUcmFuc2Zlci5maWxlcy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy4kZWRpdGFibGUuZm9jdXMoKTtcbiAgICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLmluc2VydEltYWdlc09yQ2FsbGJhY2snLCBkYXRhVHJhbnNmZXIuZmlsZXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJC5lYWNoKGRhdGFUcmFuc2Zlci50eXBlcywgKGlkeCwgdHlwZSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkYXRhVHJhbnNmZXIuZ2V0RGF0YSh0eXBlKTtcblxuICAgICAgICAgIGlmICh0eXBlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigndGV4dCcpID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5wYXN0ZUhUTUwnLCBjb250ZW50KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChjb250ZW50KS5lYWNoKChpZHgsIGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLmluc2VydE5vZGUnLCBpdGVtKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSkub24oJ2RyYWdvdmVyJywgZmFsc2UpOyAvLyBwcmV2ZW50IGRlZmF1bHQgZHJhZ292ZXIgZXZlbnRcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgT2JqZWN0LmtleXModGhpcy5kb2N1bWVudEV2ZW50SGFuZGxlcnMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgdGhpcy4kZXZlbnRMaXN0ZW5lci5vZmYoa2V5LnN1YnN0cigyKS50b0xvd2VyQ2FzZSgpLCB0aGlzLmRvY3VtZW50RXZlbnRIYW5kbGVyc1trZXldKTtcbiAgICB9KTtcbiAgICB0aGlzLmRvY3VtZW50RXZlbnRIYW5kbGVycyA9IHt9O1xuICB9XG59XG4iLCJpbXBvcnQgZW52IGZyb20gJy4uL2NvcmUvZW52JztcbmltcG9ydCBkb20gZnJvbSAnLi4vY29yZS9kb20nO1xuXG5sZXQgQ29kZU1pcnJvcjtcbmlmIChlbnYuaGFzQ29kZU1pcnJvcikge1xuICBpZiAoZW52LmlzU3VwcG9ydEFtZCkge1xuICAgIHJlcXVpcmUoWydjb2RlbWlycm9yJ10sIGZ1bmN0aW9uKGNtKSB7XG4gICAgICBDb2RlTWlycm9yID0gY207XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgQ29kZU1pcnJvciA9IHdpbmRvdy5Db2RlTWlycm9yO1xuICB9XG59XG5cbi8qKlxuICogQGNsYXNzIENvZGV2aWV3XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvZGVWaWV3IHtcbiAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgdGhpcy4kZWRpdG9yID0gY29udGV4dC5sYXlvdXRJbmZvLmVkaXRvcjtcbiAgICB0aGlzLiRlZGl0YWJsZSA9IGNvbnRleHQubGF5b3V0SW5mby5lZGl0YWJsZTtcbiAgICB0aGlzLiRjb2RhYmxlID0gY29udGV4dC5sYXlvdXRJbmZvLmNvZGFibGU7XG4gICAgdGhpcy5vcHRpb25zID0gY29udGV4dC5vcHRpb25zO1xuICB9XG5cbiAgc3luYygpIHtcbiAgICBjb25zdCBpc0NvZGV2aWV3ID0gdGhpcy5pc0FjdGl2YXRlZCgpO1xuICAgIGlmIChpc0NvZGV2aWV3ICYmIGVudi5oYXNDb2RlTWlycm9yKSB7XG4gICAgICB0aGlzLiRjb2RhYmxlLmRhdGEoJ2NtRWRpdG9yJykuc2F2ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgaXNBY3RpdmF0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuJGVkaXRvci5oYXNDbGFzcygnY29kZXZpZXcnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiB0b2dnbGUgY29kZXZpZXdcbiAgICovXG4gIHRvZ2dsZSgpIHtcbiAgICBpZiAodGhpcy5pc0FjdGl2YXRlZCgpKSB7XG4gICAgICB0aGlzLmRlYWN0aXZhdGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hY3RpdmF0ZSgpO1xuICAgIH1cbiAgICB0aGlzLmNvbnRleHQudHJpZ2dlckV2ZW50KCdjb2Rldmlldy50b2dnbGVkJyk7XG4gIH1cblxuICAvKipcbiAgICogYWN0aXZhdGUgY29kZSB2aWV3XG4gICAqL1xuICBhY3RpdmF0ZSgpIHtcbiAgICB0aGlzLiRjb2RhYmxlLnZhbChkb20uaHRtbCh0aGlzLiRlZGl0YWJsZSwgdGhpcy5vcHRpb25zLnByZXR0aWZ5SHRtbCkpO1xuICAgIHRoaXMuJGNvZGFibGUuaGVpZ2h0KHRoaXMuJGVkaXRhYmxlLmhlaWdodCgpKTtcblxuICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ3Rvb2xiYXIudXBkYXRlQ29kZXZpZXcnLCB0cnVlKTtcbiAgICB0aGlzLiRlZGl0b3IuYWRkQ2xhc3MoJ2NvZGV2aWV3Jyk7XG4gICAgdGhpcy4kY29kYWJsZS5mb2N1cygpO1xuXG4gICAgLy8gYWN0aXZhdGUgQ29kZU1pcnJvciBhcyBjb2RhYmxlXG4gICAgaWYgKGVudi5oYXNDb2RlTWlycm9yKSB7XG4gICAgICBjb25zdCBjbUVkaXRvciA9IENvZGVNaXJyb3IuZnJvbVRleHRBcmVhKHRoaXMuJGNvZGFibGVbMF0sIHRoaXMub3B0aW9ucy5jb2RlbWlycm9yKTtcblxuICAgICAgLy8gQ29kZU1pcnJvciBUZXJuU2VydmVyXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmNvZGVtaXJyb3IudGVybikge1xuICAgICAgICBjb25zdCBzZXJ2ZXIgPSBuZXcgQ29kZU1pcnJvci5UZXJuU2VydmVyKHRoaXMub3B0aW9ucy5jb2RlbWlycm9yLnRlcm4pO1xuICAgICAgICBjbUVkaXRvci50ZXJuU2VydmVyID0gc2VydmVyO1xuICAgICAgICBjbUVkaXRvci5vbignY3Vyc29yQWN0aXZpdHknLCAoY20pID0+IHtcbiAgICAgICAgICBzZXJ2ZXIudXBkYXRlQXJnSGludHMoY20pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY21FZGl0b3Iub24oJ2JsdXInLCAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnYmx1ci5jb2RldmlldycsIGNtRWRpdG9yLmdldFZhbHVlKCksIGV2ZW50KTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDb2RlTWlycm9yIGhhc24ndCBQYWRkaW5nLlxuICAgICAgY21FZGl0b3Iuc2V0U2l6ZShudWxsLCB0aGlzLiRlZGl0YWJsZS5vdXRlckhlaWdodCgpKTtcbiAgICAgIHRoaXMuJGNvZGFibGUuZGF0YSgnY21FZGl0b3InLCBjbUVkaXRvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJGNvZGFibGUub24oJ2JsdXInLCAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnYmx1ci5jb2RldmlldycsIHRoaXMuJGNvZGFibGUudmFsKCksIGV2ZW50KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBkZWFjdGl2YXRlIGNvZGUgdmlld1xuICAgKi9cbiAgZGVhY3RpdmF0ZSgpIHtcbiAgICAvLyBkZWFjdGl2YXRlIENvZGVNaXJyb3IgYXMgY29kYWJsZVxuICAgIGlmIChlbnYuaGFzQ29kZU1pcnJvcikge1xuICAgICAgY29uc3QgY21FZGl0b3IgPSB0aGlzLiRjb2RhYmxlLmRhdGEoJ2NtRWRpdG9yJyk7XG4gICAgICB0aGlzLiRjb2RhYmxlLnZhbChjbUVkaXRvci5nZXRWYWx1ZSgpKTtcbiAgICAgIGNtRWRpdG9yLnRvVGV4dEFyZWEoKTtcbiAgICB9XG5cbiAgICBjb25zdCB2YWx1ZSA9IGRvbS52YWx1ZSh0aGlzLiRjb2RhYmxlLCB0aGlzLm9wdGlvbnMucHJldHRpZnlIdG1sKSB8fCBkb20uZW1wdHlQYXJhO1xuICAgIGNvbnN0IGlzQ2hhbmdlID0gdGhpcy4kZWRpdGFibGUuaHRtbCgpICE9PSB2YWx1ZTtcblxuICAgIHRoaXMuJGVkaXRhYmxlLmh0bWwodmFsdWUpO1xuICAgIHRoaXMuJGVkaXRhYmxlLmhlaWdodCh0aGlzLm9wdGlvbnMuaGVpZ2h0ID8gdGhpcy4kY29kYWJsZS5oZWlnaHQoKSA6ICdhdXRvJyk7XG4gICAgdGhpcy4kZWRpdG9yLnJlbW92ZUNsYXNzKCdjb2RldmlldycpO1xuXG4gICAgaWYgKGlzQ2hhbmdlKSB7XG4gICAgICB0aGlzLmNvbnRleHQudHJpZ2dlckV2ZW50KCdjaGFuZ2UnLCB0aGlzLiRlZGl0YWJsZS5odG1sKCksIHRoaXMuJGVkaXRhYmxlKTtcbiAgICB9XG5cbiAgICB0aGlzLiRlZGl0YWJsZS5mb2N1cygpO1xuXG4gICAgdGhpcy5jb250ZXh0Lmludm9rZSgndG9vbGJhci51cGRhdGVDb2RldmlldycsIGZhbHNlKTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMuaXNBY3RpdmF0ZWQoKSkge1xuICAgICAgdGhpcy5kZWFjdGl2YXRlKCk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuY29uc3QgRURJVEFCTEVfUEFERElORyA9IDI0O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdGF0dXNiYXIge1xuICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7XG4gICAgdGhpcy4kZG9jdW1lbnQgPSAkKGRvY3VtZW50KTtcbiAgICB0aGlzLiRzdGF0dXNiYXIgPSBjb250ZXh0LmxheW91dEluZm8uc3RhdHVzYmFyO1xuICAgIHRoaXMuJGVkaXRhYmxlID0gY29udGV4dC5sYXlvdXRJbmZvLmVkaXRhYmxlO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5haXJNb2RlIHx8IHRoaXMub3B0aW9ucy5kaXNhYmxlUmVzaXplRWRpdG9yKSB7XG4gICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLiRzdGF0dXNiYXIub24oJ21vdXNlZG93bicsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICBjb25zdCBlZGl0YWJsZVRvcCA9IHRoaXMuJGVkaXRhYmxlLm9mZnNldCgpLnRvcCAtIHRoaXMuJGRvY3VtZW50LnNjcm9sbFRvcCgpO1xuICAgICAgY29uc3Qgb25Nb3VzZU1vdmUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgbGV0IGhlaWdodCA9IGV2ZW50LmNsaWVudFkgLSAoZWRpdGFibGVUb3AgKyBFRElUQUJMRV9QQURESU5HKTtcblxuICAgICAgICBoZWlnaHQgPSAodGhpcy5vcHRpb25zLm1pbmhlaWdodCA+IDApID8gTWF0aC5tYXgoaGVpZ2h0LCB0aGlzLm9wdGlvbnMubWluaGVpZ2h0KSA6IGhlaWdodDtcbiAgICAgICAgaGVpZ2h0ID0gKHRoaXMub3B0aW9ucy5tYXhIZWlnaHQgPiAwKSA/IE1hdGgubWluKGhlaWdodCwgdGhpcy5vcHRpb25zLm1heEhlaWdodCkgOiBoZWlnaHQ7XG5cbiAgICAgICAgdGhpcy4kZWRpdGFibGUuaGVpZ2h0KGhlaWdodCk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLiRkb2N1bWVudC5vbignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpLm9uZSgnbW91c2V1cCcsICgpID0+IHtcbiAgICAgICAgdGhpcy4kZG9jdW1lbnQub2ZmKCdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy4kc3RhdHVzYmFyLm9mZigpO1xuICAgIHRoaXMuJHN0YXR1c2Jhci5hZGRDbGFzcygnbG9ja2VkJyk7XG4gIH1cbn1cbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZ1bGxzY3JlZW4ge1xuICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7XG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcblxuICAgIHRoaXMuJGVkaXRvciA9IGNvbnRleHQubGF5b3V0SW5mby5lZGl0b3I7XG4gICAgdGhpcy4kdG9vbGJhciA9IGNvbnRleHQubGF5b3V0SW5mby50b29sYmFyO1xuICAgIHRoaXMuJGVkaXRhYmxlID0gY29udGV4dC5sYXlvdXRJbmZvLmVkaXRhYmxlO1xuICAgIHRoaXMuJGNvZGFibGUgPSBjb250ZXh0LmxheW91dEluZm8uY29kYWJsZTtcblxuICAgIHRoaXMuJHdpbmRvdyA9ICQod2luZG93KTtcbiAgICB0aGlzLiRzY3JvbGxiYXIgPSAkKCdodG1sLCBib2R5Jyk7XG5cbiAgICB0aGlzLm9uUmVzaXplID0gKCkgPT4ge1xuICAgICAgdGhpcy5yZXNpemVUbyh7XG4gICAgICAgIGg6IHRoaXMuJHdpbmRvdy5oZWlnaHQoKSAtIHRoaXMuJHRvb2xiYXIub3V0ZXJIZWlnaHQoKVxuICAgICAgfSk7XG4gICAgfTtcbiAgfVxuXG4gIHJlc2l6ZVRvKHNpemUpIHtcbiAgICB0aGlzLiRlZGl0YWJsZS5jc3MoJ2hlaWdodCcsIHNpemUuaCk7XG4gICAgdGhpcy4kY29kYWJsZS5jc3MoJ2hlaWdodCcsIHNpemUuaCk7XG4gICAgaWYgKHRoaXMuJGNvZGFibGUuZGF0YSgnY21lZGl0b3InKSkge1xuICAgICAgdGhpcy4kY29kYWJsZS5kYXRhKCdjbWVkaXRvcicpLnNldHNpemUobnVsbCwgc2l6ZS5oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogdG9nZ2xlIGZ1bGxzY3JlZW5cbiAgICovXG4gIHRvZ2dsZSgpIHtcbiAgICB0aGlzLiRlZGl0b3IudG9nZ2xlQ2xhc3MoJ2Z1bGxzY3JlZW4nKTtcbiAgICBpZiAodGhpcy5pc0Z1bGxzY3JlZW4oKSkge1xuICAgICAgdGhpcy4kZWRpdGFibGUuZGF0YSgnb3JnSGVpZ2h0JywgdGhpcy4kZWRpdGFibGUuY3NzKCdoZWlnaHQnKSk7XG4gICAgICB0aGlzLiR3aW5kb3cub24oJ3Jlc2l6ZScsIHRoaXMub25SZXNpemUpLnRyaWdnZXIoJ3Jlc2l6ZScpO1xuICAgICAgdGhpcy4kc2Nyb2xsYmFyLmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJHdpbmRvdy5vZmYoJ3Jlc2l6ZScsIHRoaXMub25SZXNpemUpO1xuICAgICAgdGhpcy5yZXNpemVUbyh7IGg6IHRoaXMuJGVkaXRhYmxlLmRhdGEoJ29yZ0hlaWdodCcpIH0pO1xuICAgICAgdGhpcy4kc2Nyb2xsYmFyLmNzcygnb3ZlcmZsb3cnLCAndmlzaWJsZScpO1xuICAgIH1cblxuICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ3Rvb2xiYXIudXBkYXRlRnVsbHNjcmVlbicsIHRoaXMuaXNGdWxsc2NyZWVuKCkpO1xuICB9XG5cbiAgaXNGdWxsc2NyZWVuKCkge1xuICAgIHJldHVybiB0aGlzLiRlZGl0b3IuaGFzQ2xhc3MoJ2Z1bGxzY3JlZW4nKTtcbiAgfVxufVxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBkb20gZnJvbSAnLi4vY29yZS9kb20nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIYW5kbGUge1xuICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7XG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICB0aGlzLiRkb2N1bWVudCA9ICQoZG9jdW1lbnQpO1xuICAgIHRoaXMuJGVkaXRpbmdBcmVhID0gY29udGV4dC5sYXlvdXRJbmZvLmVkaXRpbmdBcmVhO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcbiAgICB0aGlzLmxhbmcgPSB0aGlzLm9wdGlvbnMubGFuZ0luZm87XG5cbiAgICB0aGlzLmV2ZW50cyA9IHtcbiAgICAgICdzdW1tZXJub3RlLm1vdXNlZG93bic6ICh3ZSwgZSkgPT4ge1xuICAgICAgICBpZiAodGhpcy51cGRhdGUoZS50YXJnZXQpKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgJ3N1bW1lcm5vdGUua2V5dXAgc3VtbWVybm90ZS5zY3JvbGwgc3VtbWVybm90ZS5jaGFuZ2Ugc3VtbWVybm90ZS5kaWFsb2cuc2hvd24nOiAoKSA9PiB7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICB9LFxuICAgICAgJ3N1bW1lcm5vdGUuZGlzYWJsZSc6ICgpID0+IHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICB9LFxuICAgICAgJ3N1bW1lcm5vdGUuY29kZXZpZXcudG9nZ2xlZCc6ICgpID0+IHtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgaW5pdGlhbGl6ZSgpIHtcbiAgICB0aGlzLiRoYW5kbGUgPSAkKFtcbiAgICAgICc8ZGl2IGNsYXNzPVwibm90ZS1oYW5kbGVcIj4nLFxuICAgICAgJzxkaXYgY2xhc3M9XCJub3RlLWNvbnRyb2wtc2VsZWN0aW9uXCI+JyxcbiAgICAgICc8ZGl2IGNsYXNzPVwibm90ZS1jb250cm9sLXNlbGVjdGlvbi1iZ1wiPjwvZGl2PicsXG4gICAgICAnPGRpdiBjbGFzcz1cIm5vdGUtY29udHJvbC1ob2xkZXIgbm90ZS1jb250cm9sLW53XCI+PC9kaXY+JyxcbiAgICAgICc8ZGl2IGNsYXNzPVwibm90ZS1jb250cm9sLWhvbGRlciBub3RlLWNvbnRyb2wtbmVcIj48L2Rpdj4nLFxuICAgICAgJzxkaXYgY2xhc3M9XCJub3RlLWNvbnRyb2wtaG9sZGVyIG5vdGUtY29udHJvbC1zd1wiPjwvZGl2PicsXG4gICAgICAnPGRpdiBjbGFzcz1cIicsXG4gICAgICAodGhpcy5vcHRpb25zLmRpc2FibGVSZXNpemVJbWFnZSA/ICdub3RlLWNvbnRyb2wtaG9sZGVyJyA6ICdub3RlLWNvbnRyb2wtc2l6aW5nJyksXG4gICAgICAnIG5vdGUtY29udHJvbC1zZVwiPjwvZGl2PicsXG4gICAgICAodGhpcy5vcHRpb25zLmRpc2FibGVSZXNpemVJbWFnZSA/ICcnIDogJzxkaXYgY2xhc3M9XCJub3RlLWNvbnRyb2wtc2VsZWN0aW9uLWluZm9cIj48L2Rpdj4nKSxcbiAgICAgICc8L2Rpdj4nLFxuICAgICAgJzwvZGl2PidcbiAgICBdLmpvaW4oJycpKS5wcmVwZW5kVG8odGhpcy4kZWRpdGluZ0FyZWEpO1xuXG4gICAgdGhpcy4kaGFuZGxlLm9uKCdtb3VzZWRvd24nLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChkb20uaXNDb250cm9sU2l6aW5nKGV2ZW50LnRhcmdldCkpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgY29uc3QgJHRhcmdldCA9IHRoaXMuJGhhbmRsZS5maW5kKCcubm90ZS1jb250cm9sLXNlbGVjdGlvbicpLmRhdGEoJ3RhcmdldCcpO1xuICAgICAgICBjb25zdCBwb3NTdGFydCA9ICR0YXJnZXQub2Zmc2V0KCk7XG4gICAgICAgIGNvbnN0IHNjcm9sbFRvcCA9IHRoaXMuJGRvY3VtZW50LnNjcm9sbFRvcCgpO1xuXG4gICAgICAgIGNvbnN0IG9uTW91c2VNb3ZlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLnJlc2l6ZVRvJywge1xuICAgICAgICAgICAgeDogZXZlbnQuY2xpZW50WCAtIHBvc1N0YXJ0LmxlZnQsXG4gICAgICAgICAgICB5OiBldmVudC5jbGllbnRZIC0gKHBvc1N0YXJ0LnRvcCAtIHNjcm9sbFRvcClcbiAgICAgICAgICB9LCAkdGFyZ2V0LCAhZXZlbnQuc2hpZnRLZXkpO1xuXG4gICAgICAgICAgdGhpcy51cGRhdGUoJHRhcmdldFswXSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy4kZG9jdW1lbnRcbiAgICAgICAgICAub24oJ21vdXNlbW92ZScsIG9uTW91c2VNb3ZlKVxuICAgICAgICAgIC5vbmUoJ21vdXNldXAnLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy4kZG9jdW1lbnQub2ZmKCdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3IuYWZ0ZXJDb21tYW5kJyk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCEkdGFyZ2V0LmRhdGEoJ3JhdGlvJykpIHsgLy8gb3JpZ2luYWwgcmF0aW8uXG4gICAgICAgICAgJHRhcmdldC5kYXRhKCdyYXRpbycsICR0YXJnZXQuaGVpZ2h0KCkgLyAkdGFyZ2V0LndpZHRoKCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIHNjcm9sbGluZyBvbiB0aGUgaGFuZGxlIG92ZXJsYXkuXG4gICAgdGhpcy4kaGFuZGxlLm9uKCd3aGVlbCcsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLiRoYW5kbGUucmVtb3ZlKCk7XG4gIH1cblxuICB1cGRhdGUodGFyZ2V0KSB7XG4gICAgaWYgKHRoaXMuY29udGV4dC5pc0Rpc2FibGVkKCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBpc0ltYWdlID0gZG9tLmlzSW1nKHRhcmdldCk7XG4gICAgY29uc3QgJHNlbGVjdGlvbiA9IHRoaXMuJGhhbmRsZS5maW5kKCcubm90ZS1jb250cm9sLXNlbGVjdGlvbicpO1xuXG4gICAgdGhpcy5jb250ZXh0Lmludm9rZSgnaW1hZ2VQb3BvdmVyLnVwZGF0ZScsIHRhcmdldCk7XG5cbiAgICBpZiAoaXNJbWFnZSkge1xuICAgICAgY29uc3QgJGltYWdlID0gJCh0YXJnZXQpO1xuICAgICAgY29uc3QgcG9zaXRpb24gPSAkaW1hZ2UucG9zaXRpb24oKTtcbiAgICAgIGNvbnN0IHBvcyA9IHtcbiAgICAgICAgbGVmdDogcG9zaXRpb24ubGVmdCArIHBhcnNlSW50KCRpbWFnZS5jc3MoJ21hcmdpbkxlZnQnKSwgMTApLFxuICAgICAgICB0b3A6IHBvc2l0aW9uLnRvcCArIHBhcnNlSW50KCRpbWFnZS5jc3MoJ21hcmdpblRvcCcpLCAxMClcbiAgICAgIH07XG5cbiAgICAgIC8vIGV4Y2x1ZGUgbWFyZ2luXG4gICAgICBjb25zdCBpbWFnZVNpemUgPSB7XG4gICAgICAgIHc6ICRpbWFnZS5vdXRlcldpZHRoKGZhbHNlKSxcbiAgICAgICAgaDogJGltYWdlLm91dGVySGVpZ2h0KGZhbHNlKVxuICAgICAgfTtcblxuICAgICAgJHNlbGVjdGlvbi5jc3Moe1xuICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICBsZWZ0OiBwb3MubGVmdCxcbiAgICAgICAgdG9wOiBwb3MudG9wLFxuICAgICAgICB3aWR0aDogaW1hZ2VTaXplLncsXG4gICAgICAgIGhlaWdodDogaW1hZ2VTaXplLmhcbiAgICAgIH0pLmRhdGEoJ3RhcmdldCcsICRpbWFnZSk7IC8vIHNhdmUgY3VycmVudCBpbWFnZSBlbGVtZW50LlxuXG4gICAgICBjb25zdCBvcmlnSW1hZ2VPYmogPSBuZXcgSW1hZ2UoKTtcbiAgICAgIG9yaWdJbWFnZU9iai5zcmMgPSAkaW1hZ2UuYXR0cignc3JjJyk7XG5cbiAgICAgIGNvbnN0IHNpemluZ1RleHQgPSBpbWFnZVNpemUudyArICd4JyArIGltYWdlU2l6ZS5oICsgJyAoJyArIHRoaXMubGFuZy5pbWFnZS5vcmlnaW5hbCArICc6ICcgKyBvcmlnSW1hZ2VPYmoud2lkdGggKyAneCcgKyBvcmlnSW1hZ2VPYmouaGVpZ2h0ICsgJyknO1xuICAgICAgJHNlbGVjdGlvbi5maW5kKCcubm90ZS1jb250cm9sLXNlbGVjdGlvbi1pbmZvJykudGV4dChzaXppbmdUZXh0KTtcbiAgICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5zYXZlVGFyZ2V0JywgdGFyZ2V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlzSW1hZ2U7XG4gIH1cblxuICAvKipcbiAgICogaGlkZVxuICAgKlxuICAgKiBAcGFyYW0ge2pRdWVyeX0gJGhhbmRsZVxuICAgKi9cbiAgaGlkZSgpIHtcbiAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3IuY2xlYXJUYXJnZXQnKTtcbiAgICB0aGlzLiRoYW5kbGUuY2hpbGRyZW4oKS5oaWRlKCk7XG4gIH1cbn1cbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgbGlzdHMgZnJvbSAnLi4vY29yZS9saXN0cyc7XG5pbXBvcnQga2V5IGZyb20gJy4uL2NvcmUva2V5JztcblxuY29uc3QgZGVmYXVsdFNjaGVtZSA9ICdodHRwOi8vJztcbmNvbnN0IGxpbmtQYXR0ZXJuID0gL14oW0EtWmEtel1bQS1aYS16MC05Ky0uXSpcXDpbXFwvXFwvXT98bWFpbHRvOltBLVowLTkuXyUrLV0rQCk/KHd3d1xcLik/KC4rKSQvaTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXV0b0xpbmsge1xuICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7XG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICB0aGlzLmV2ZW50cyA9IHtcbiAgICAgICdzdW1tZXJub3RlLmtleXVwJzogKHdlLCBlKSA9PiB7XG4gICAgICAgIGlmICghZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkge1xuICAgICAgICAgIHRoaXMuaGFuZGxlS2V5dXAoZSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAnc3VtbWVybm90ZS5rZXlkb3duJzogKHdlLCBlKSA9PiB7XG4gICAgICAgIHRoaXMuaGFuZGxlS2V5ZG93bihlKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgaW5pdGlhbGl6ZSgpIHtcbiAgICB0aGlzLmxhc3RXb3JkUmFuZ2UgPSBudWxsO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLmxhc3RXb3JkUmFuZ2UgPSBudWxsO1xuICB9XG5cbiAgcmVwbGFjZSgpIHtcbiAgICBpZiAoIXRoaXMubGFzdFdvcmRSYW5nZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGtleXdvcmQgPSB0aGlzLmxhc3RXb3JkUmFuZ2UudG9TdHJpbmcoKTtcbiAgICBjb25zdCBtYXRjaCA9IGtleXdvcmQubWF0Y2gobGlua1BhdHRlcm4pO1xuXG4gICAgaWYgKG1hdGNoICYmIChtYXRjaFsxXSB8fCBtYXRjaFsyXSkpIHtcbiAgICAgIGNvbnN0IGxpbmsgPSBtYXRjaFsxXSA/IGtleXdvcmQgOiBkZWZhdWx0U2NoZW1lICsga2V5d29yZDtcbiAgICAgIGNvbnN0IG5vZGUgPSAkKCc8YSAvPicpLmh0bWwoa2V5d29yZCkuYXR0cignaHJlZicsIGxpbmspWzBdO1xuXG4gICAgICB0aGlzLmxhc3RXb3JkUmFuZ2UuaW5zZXJ0Tm9kZShub2RlKTtcbiAgICAgIHRoaXMubGFzdFdvcmRSYW5nZSA9IG51bGw7XG4gICAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3IuZm9jdXMnKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVLZXlkb3duKGUpIHtcbiAgICBpZiAobGlzdHMuY29udGFpbnMoW2tleS5jb2RlLkVOVEVSLCBrZXkuY29kZS5TUEFDRV0sIGUua2V5Q29kZSkpIHtcbiAgICAgIGNvbnN0IHdvcmRSYW5nZSA9IHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5jcmVhdGVSYW5nZScpLmdldFdvcmRSYW5nZSgpO1xuICAgICAgdGhpcy5sYXN0V29yZFJhbmdlID0gd29yZFJhbmdlO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUtleXVwKGUpIHtcbiAgICBpZiAobGlzdHMuY29udGFpbnMoW2tleS5jb2RlLkVOVEVSLCBrZXkuY29kZS5TUEFDRV0sIGUua2V5Q29kZSkpIHtcbiAgICAgIHRoaXMucmVwbGFjZSgpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IGRvbSBmcm9tICcuLi9jb3JlL2RvbSc7XG5cbi8qKlxuICogdGV4dGFyZWEgYXV0byBzeW5jLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBdXRvU3luYyB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICB0aGlzLiRub3RlID0gY29udGV4dC5sYXlvdXRJbmZvLm5vdGU7XG4gICAgdGhpcy5ldmVudHMgPSB7XG4gICAgICAnc3VtbWVybm90ZS5jaGFuZ2UnOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuJG5vdGUudmFsKGNvbnRleHQuaW52b2tlKCdjb2RlJykpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBzaG91bGRJbml0aWFsaXplKCkge1xuICAgIHJldHVybiBkb20uaXNUZXh0YXJlYSh0aGlzLiRub3RlWzBdKTtcbiAgfVxufVxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBsYWNlaG9sZGVyIHtcbiAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG5cbiAgICB0aGlzLiRlZGl0aW5nQXJlYSA9IGNvbnRleHQubGF5b3V0SW5mby5lZGl0aW5nQXJlYTtcbiAgICB0aGlzLm9wdGlvbnMgPSBjb250ZXh0Lm9wdGlvbnM7XG4gICAgdGhpcy5ldmVudHMgPSB7XG4gICAgICAnc3VtbWVybm90ZS5pbml0IHN1bW1lcm5vdGUuY2hhbmdlJzogKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgfSxcbiAgICAgICdzdW1tZXJub3RlLmNvZGV2aWV3LnRvZ2dsZWQnOiAoKSA9PiB7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHNob3VsZEluaXRpYWxpemUoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyO1xuICB9XG5cbiAgaW5pdGlhbGl6ZSgpIHtcbiAgICB0aGlzLiRwbGFjZWhvbGRlciA9ICQoJzxkaXYgY2xhc3M9XCJub3RlLXBsYWNlaG9sZGVyXCI+Jyk7XG4gICAgdGhpcy4kcGxhY2Vob2xkZXIub24oJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZm9jdXMnKTtcbiAgICB9KS50ZXh0KHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcikucHJlcGVuZFRvKHRoaXMuJGVkaXRpbmdBcmVhKTtcblxuICAgIHRoaXMudXBkYXRlKCk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuJHBsYWNlaG9sZGVyLnJlbW92ZSgpO1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGNvbnN0IGlzU2hvdyA9ICF0aGlzLmNvbnRleHQuaW52b2tlKCdjb2Rldmlldy5pc0FjdGl2YXRlZCcpICYmIHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5pc0VtcHR5Jyk7XG4gICAgdGhpcy4kcGxhY2Vob2xkZXIudG9nZ2xlKGlzU2hvdyk7XG4gIH1cbn1cbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgZnVuYyBmcm9tICcuLi9jb3JlL2Z1bmMnO1xuaW1wb3J0IGxpc3RzIGZyb20gJy4uL2NvcmUvbGlzdHMnO1xuaW1wb3J0IGVudiBmcm9tICcuLi9jb3JlL2Vudic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJ1dHRvbnMge1xuICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7XG4gICAgdGhpcy51aSA9ICQuc3VtbWVybm90ZS51aTtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIHRoaXMuJHRvb2xiYXIgPSBjb250ZXh0LmxheW91dEluZm8udG9vbGJhcjtcbiAgICB0aGlzLm9wdGlvbnMgPSBjb250ZXh0Lm9wdGlvbnM7XG4gICAgdGhpcy5sYW5nID0gdGhpcy5vcHRpb25zLmxhbmdJbmZvO1xuICAgIHRoaXMuaW52ZXJ0ZWRLZXlNYXAgPSBmdW5jLmludmVydE9iamVjdChcbiAgICAgIHRoaXMub3B0aW9ucy5rZXlNYXBbZW52LmlzTWFjID8gJ21hYycgOiAncGMnXVxuICAgICk7XG4gIH1cblxuICByZXByZXNlbnRTaG9ydGN1dChlZGl0b3JNZXRob2QpIHtcbiAgICBsZXQgc2hvcnRjdXQgPSB0aGlzLmludmVydGVkS2V5TWFwW2VkaXRvck1ldGhvZF07XG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuc2hvcnRjdXRzIHx8ICFzaG9ydGN1dCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIGlmIChlbnYuaXNNYWMpIHtcbiAgICAgIHNob3J0Y3V0ID0gc2hvcnRjdXQucmVwbGFjZSgnQ01EJywgJ+KMmCcpLnJlcGxhY2UoJ1NISUZUJywgJ+KHpycpO1xuICAgIH1cblxuICAgIHNob3J0Y3V0ID0gc2hvcnRjdXQucmVwbGFjZSgnQkFDS1NMQVNIJywgJ1xcXFwnKVxuICAgICAgLnJlcGxhY2UoJ1NMQVNIJywgJy8nKVxuICAgICAgLnJlcGxhY2UoJ0xFRlRCUkFDS0VUJywgJ1snKVxuICAgICAgLnJlcGxhY2UoJ1JJR0hUQlJBQ0tFVCcsICddJyk7XG5cbiAgICByZXR1cm4gJyAoJyArIHNob3J0Y3V0ICsgJyknO1xuICB9XG5cbiAgYnV0dG9uKG8pIHtcbiAgICBpZiAoIXRoaXMub3B0aW9ucy50b29sdGlwICYmIG8udG9vbHRpcCkge1xuICAgICAgZGVsZXRlIG8udG9vbHRpcDtcbiAgICB9XG4gICAgby5jb250YWluZXIgPSB0aGlzLm9wdGlvbnMuY29udGFpbmVyO1xuICAgIHJldHVybiB0aGlzLnVpLmJ1dHRvbihvKTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy5hZGRUb29sYmFyQnV0dG9ucygpO1xuICAgIHRoaXMuYWRkSW1hZ2VQb3BvdmVyQnV0dG9ucygpO1xuICAgIHRoaXMuYWRkTGlua1BvcG92ZXJCdXR0b25zKCk7XG4gICAgdGhpcy5hZGRUYWJsZVBvcG92ZXJCdXR0b25zKCk7XG4gICAgdGhpcy5mb250SW5zdGFsbGVkTWFwID0ge307XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIGRlbGV0ZSB0aGlzLmZvbnRJbnN0YWxsZWRNYXA7XG4gIH1cblxuICBpc0ZvbnRJbnN0YWxsZWQobmFtZSkge1xuICAgIGlmICghdGhpcy5mb250SW5zdGFsbGVkTWFwLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICB0aGlzLmZvbnRJbnN0YWxsZWRNYXBbbmFtZV0gPSBlbnYuaXNGb250SW5zdGFsbGVkKG5hbWUpIHx8XG4gICAgICAgIGxpc3RzLmNvbnRhaW5zKHRoaXMub3B0aW9ucy5mb250TmFtZXNJZ25vcmVDaGVjaywgbmFtZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZm9udEluc3RhbGxlZE1hcFtuYW1lXTtcbiAgfVxuXG4gIGlzRm9udERlc2VydmVkVG9BZGQobmFtZSkge1xuICAgIGNvbnN0IGdlbmVyaWNGYW1pbGllcyA9IFsnc2Fucy1zZXJpZicsICdzZXJpZicsICdtb25vc3BhY2UnLCAnY3Vyc2l2ZScsICdmYW50YXN5J107XG4gICAgbmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgIHJldHVybiAoKG5hbWUgIT09ICcnKSAmJiB0aGlzLmlzRm9udEluc3RhbGxlZChuYW1lKSAmJiAoJC5pbkFycmF5KG5hbWUsIGdlbmVyaWNGYW1pbGllcykgPT09IC0xKSk7XG4gIH1cblxuICBhZGRUb29sYmFyQnV0dG9ucygpIHtcbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLnN0eWxlJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMudWkuYnV0dG9uR3JvdXAoW1xuICAgICAgICB0aGlzLmJ1dHRvbih7XG4gICAgICAgICAgY2xhc3NOYW1lOiAnZHJvcGRvd24tdG9nZ2xlJyxcbiAgICAgICAgICBjb250ZW50czogdGhpcy51aS5kcm9wZG93bkJ1dHRvbkNvbnRlbnRzKFxuICAgICAgICAgICAgdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5tYWdpYyksIHRoaXMub3B0aW9uc1xuICAgICAgICAgICksXG4gICAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLnN0eWxlLnN0eWxlLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHRvZ2dsZTogJ2Ryb3Bkb3duJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIHRoaXMudWkuZHJvcGRvd24oe1xuICAgICAgICAgIGNsYXNzTmFtZTogJ2Ryb3Bkb3duLXN0eWxlJyxcbiAgICAgICAgICBpdGVtczogdGhpcy5vcHRpb25zLnN0eWxlVGFncyxcbiAgICAgICAgICB0aXRsZTogdGhpcy5sYW5nLnN0eWxlLnN0eWxlLFxuICAgICAgICAgIHRlbXBsYXRlOiAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBpdGVtID0geyB0YWc6IGl0ZW0sIHRpdGxlOiAodGhpcy5sYW5nLnN0eWxlLmhhc093blByb3BlcnR5KGl0ZW0pID8gdGhpcy5sYW5nLnN0eWxlW2l0ZW1dIDogaXRlbSkgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgdGFnID0gaXRlbS50YWc7XG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IGl0ZW0udGl0bGU7XG4gICAgICAgICAgICBjb25zdCBzdHlsZSA9IGl0ZW0uc3R5bGUgPyAnIHN0eWxlPVwiJyArIGl0ZW0uc3R5bGUgKyAnXCIgJyA6ICcnO1xuICAgICAgICAgICAgY29uc3QgY2xhc3NOYW1lID0gaXRlbS5jbGFzc05hbWUgPyAnIGNsYXNzPVwiJyArIGl0ZW0uY2xhc3NOYW1lICsgJ1wiJyA6ICcnO1xuXG4gICAgICAgICAgICByZXR1cm4gJzwnICsgdGFnICsgc3R5bGUgKyBjbGFzc05hbWUgKyAnPicgKyB0aXRsZSArICc8LycgKyB0YWcgKyAnPic7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ2VkaXRvci5mb3JtYXRCbG9jaycpXG4gICAgICAgIH0pXG4gICAgICBdKS5yZW5kZXIoKTtcbiAgICB9KTtcblxuICAgIGZvciAobGV0IHN0eWxlSWR4ID0gMCwgc3R5bGVMZW4gPSB0aGlzLm9wdGlvbnMuc3R5bGVUYWdzLmxlbmd0aDsgc3R5bGVJZHggPCBzdHlsZUxlbjsgc3R5bGVJZHgrKykge1xuICAgICAgY29uc3QgaXRlbSA9IHRoaXMub3B0aW9ucy5zdHlsZVRhZ3Nbc3R5bGVJZHhdO1xuXG4gICAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLnN0eWxlLicgKyBpdGVtLCAoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1dHRvbih7XG4gICAgICAgICAgY2xhc3NOYW1lOiAnbm90ZS1idG4tc3R5bGUtJyArIGl0ZW0sXG4gICAgICAgICAgY29udGVudHM6ICc8ZGl2IGRhdGEtdmFsdWU9XCInICsgaXRlbSArICdcIj4nICsgaXRlbS50b1VwcGVyQ2FzZSgpICsgJzwvZGl2PicsXG4gICAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLnN0eWxlW2l0ZW1dLFxuICAgICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignZWRpdG9yLmZvcm1hdEJsb2NrJylcbiAgICAgICAgfSkucmVuZGVyKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmJvbGQnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjbGFzc05hbWU6ICdub3RlLWJ0bi1ib2xkJyxcbiAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMuYm9sZCksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5mb250LmJvbGQgKyB0aGlzLnJlcHJlc2VudFNob3J0Y3V0KCdib2xkJyksXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlckFuZFVwZGF0ZVN0YXRlKCdlZGl0b3IuYm9sZCcpXG4gICAgICB9KS5yZW5kZXIoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24uaXRhbGljJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY2xhc3NOYW1lOiAnbm90ZS1idG4taXRhbGljJyxcbiAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMuaXRhbGljKSxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLmZvbnQuaXRhbGljICsgdGhpcy5yZXByZXNlbnRTaG9ydGN1dCgnaXRhbGljJyksXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlckFuZFVwZGF0ZVN0YXRlKCdlZGl0b3IuaXRhbGljJylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi51bmRlcmxpbmUnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjbGFzc05hbWU6ICdub3RlLWJ0bi11bmRlcmxpbmUnLFxuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy51bmRlcmxpbmUpLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcuZm9udC51bmRlcmxpbmUgKyB0aGlzLnJlcHJlc2VudFNob3J0Y3V0KCd1bmRlcmxpbmUnKSxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyQW5kVXBkYXRlU3RhdGUoJ2VkaXRvci51bmRlcmxpbmUnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmNsZWFyJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMuZXJhc2VyKSxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLmZvbnQuY2xlYXIgKyB0aGlzLnJlcHJlc2VudFNob3J0Y3V0KCdyZW1vdmVGb3JtYXQnKSxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IucmVtb3ZlRm9ybWF0JylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5zdHJpa2V0aHJvdWdoJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY2xhc3NOYW1lOiAnbm90ZS1idG4tc3RyaWtldGhyb3VnaCcsXG4gICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLnN0cmlrZXRocm91Z2gpLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcuZm9udC5zdHJpa2V0aHJvdWdoICsgdGhpcy5yZXByZXNlbnRTaG9ydGN1dCgnc3RyaWtldGhyb3VnaCcpLFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXJBbmRVcGRhdGVTdGF0ZSgnZWRpdG9yLnN0cmlrZXRocm91Z2gnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLnN1cGVyc2NyaXB0JywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY2xhc3NOYW1lOiAnbm90ZS1idG4tc3VwZXJzY3JpcHQnLFxuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5zdXBlcnNjcmlwdCksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5mb250LnN1cGVyc2NyaXB0LFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXJBbmRVcGRhdGVTdGF0ZSgnZWRpdG9yLnN1cGVyc2NyaXB0JylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5zdWJzY3JpcHQnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjbGFzc05hbWU6ICdub3RlLWJ0bi1zdWJzY3JpcHQnLFxuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5zdWJzY3JpcHQpLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcuZm9udC5zdWJzY3JpcHQsXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlckFuZFVwZGF0ZVN0YXRlKCdlZGl0b3Iuc3Vic2NyaXB0JylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5mb250bmFtZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHN0eWxlSW5mbyA9IHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5jdXJyZW50U3R5bGUnKTtcblxuICAgICAgLy8gQWRkICdkZWZhdWx0JyBmb250cyBpbnRvIHRoZSBmb250bmFtZXMgYXJyYXkgaWYgbm90IGV4aXN0XG4gICAgICAkLmVhY2goc3R5bGVJbmZvWydmb250LWZhbWlseSddLnNwbGl0KCcsJyksIChpZHgsIGZvbnRuYW1lKSA9PiB7XG4gICAgICAgIGZvbnRuYW1lID0gZm9udG5hbWUudHJpbSgpLnJlcGxhY2UoL1snXCJdKy9nLCAnJyk7XG4gICAgICAgIGlmICh0aGlzLmlzRm9udERlc2VydmVkVG9BZGQoZm9udG5hbWUpKSB7XG4gICAgICAgICAgaWYgKCQuaW5BcnJheShmb250bmFtZSwgdGhpcy5vcHRpb25zLmZvbnROYW1lcykgPT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZm9udE5hbWVzLnB1c2goZm9udG5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB0aGlzLnVpLmJ1dHRvbkdyb3VwKFtcbiAgICAgICAgdGhpcy5idXR0b24oe1xuICAgICAgICAgIGNsYXNzTmFtZTogJ2Ryb3Bkb3duLXRvZ2dsZScsXG4gICAgICAgICAgY29udGVudHM6IHRoaXMudWkuZHJvcGRvd25CdXR0b25Db250ZW50cyhcbiAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cIm5vdGUtY3VycmVudC1mb250bmFtZVwiLz4nLCB0aGlzLm9wdGlvbnNcbiAgICAgICAgICApLFxuICAgICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5mb250Lm5hbWUsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdG9nZ2xlOiAnZHJvcGRvd24nXG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgdGhpcy51aS5kcm9wZG93bkNoZWNrKHtcbiAgICAgICAgICBjbGFzc05hbWU6ICdkcm9wZG93bi1mb250bmFtZScsXG4gICAgICAgICAgY2hlY2tDbGFzc05hbWU6IHRoaXMub3B0aW9ucy5pY29ucy5tZW51Q2hlY2ssXG4gICAgICAgICAgaXRlbXM6IHRoaXMub3B0aW9ucy5mb250TmFtZXMuZmlsdGVyKHRoaXMuaXNGb250SW5zdGFsbGVkLmJpbmQodGhpcykpLFxuICAgICAgICAgIHRpdGxlOiB0aGlzLmxhbmcuZm9udC5uYW1lLFxuICAgICAgICAgIHRlbXBsYXRlOiAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICc8c3BhbiBzdHlsZT1cImZvbnQtZmFtaWx5OiBcXCcnICsgaXRlbSArICdcXCdcIj4nICsgaXRlbSArICc8L3NwYW4+JztcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlckFuZFVwZGF0ZVN0YXRlKCdlZGl0b3IuZm9udE5hbWUnKVxuICAgICAgICB9KVxuICAgICAgXSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmZvbnRzaXplJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMudWkuYnV0dG9uR3JvdXAoW1xuICAgICAgICB0aGlzLmJ1dHRvbih7XG4gICAgICAgICAgY2xhc3NOYW1lOiAnZHJvcGRvd24tdG9nZ2xlJyxcbiAgICAgICAgICBjb250ZW50czogdGhpcy51aS5kcm9wZG93bkJ1dHRvbkNvbnRlbnRzKCc8c3BhbiBjbGFzcz1cIm5vdGUtY3VycmVudC1mb250c2l6ZVwiLz4nLCB0aGlzLm9wdGlvbnMpLFxuICAgICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5mb250LnNpemUsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdG9nZ2xlOiAnZHJvcGRvd24nXG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgdGhpcy51aS5kcm9wZG93bkNoZWNrKHtcbiAgICAgICAgICBjbGFzc05hbWU6ICdkcm9wZG93bi1mb250c2l6ZScsXG4gICAgICAgICAgY2hlY2tDbGFzc05hbWU6IHRoaXMub3B0aW9ucy5pY29ucy5tZW51Q2hlY2ssXG4gICAgICAgICAgaXRlbXM6IHRoaXMub3B0aW9ucy5mb250U2l6ZXMsXG4gICAgICAgICAgdGl0bGU6IHRoaXMubGFuZy5mb250LnNpemUsXG4gICAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyQW5kVXBkYXRlU3RhdGUoJ2VkaXRvci5mb250U2l6ZScpXG4gICAgICAgIH0pXG4gICAgICBdKS5yZW5kZXIoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24uY29sb3InLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy51aS5idXR0b25Hcm91cCh7XG4gICAgICAgIGNsYXNzTmFtZTogJ25vdGUtY29sb3InLFxuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ25vdGUtY3VycmVudC1jb2xvci1idXR0b24nLFxuICAgICAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMuZm9udCArICcgbm90ZS1yZWNlbnQtY29sb3InKSxcbiAgICAgICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5jb2xvci5yZWNlbnQsXG4gICAgICAgICAgICBjbGljazogKGUpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgJGJ1dHRvbiA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLmNvbG9yJywge1xuICAgICAgICAgICAgICAgIGJhY2tDb2xvcjogJGJ1dHRvbi5hdHRyKCdkYXRhLWJhY2tDb2xvcicpLFxuICAgICAgICAgICAgICAgIGZvcmVDb2xvcjogJGJ1dHRvbi5hdHRyKCdkYXRhLWZvcmVDb2xvcicpXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoJGJ1dHRvbikgPT4ge1xuICAgICAgICAgICAgICBjb25zdCAkcmVjZW50Q29sb3IgPSAkYnV0dG9uLmZpbmQoJy5ub3RlLXJlY2VudC1jb2xvcicpO1xuICAgICAgICAgICAgICAkcmVjZW50Q29sb3IuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgJyNGRkZGMDAnKTtcbiAgICAgICAgICAgICAgJGJ1dHRvbi5hdHRyKCdkYXRhLWJhY2tDb2xvcicsICcjRkZGRjAwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSksXG4gICAgICAgICAgdGhpcy5idXR0b24oe1xuICAgICAgICAgICAgY2xhc3NOYW1lOiAnZHJvcGRvd24tdG9nZ2xlJyxcbiAgICAgICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmRyb3Bkb3duQnV0dG9uQ29udGVudHMoJycsIHRoaXMub3B0aW9ucyksXG4gICAgICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcuY29sb3IubW9yZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgdG9nZ2xlOiAnZHJvcGRvd24nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSksXG4gICAgICAgICAgdGhpcy51aS5kcm9wZG93bih7XG4gICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm5vdGUtcGFsZXR0ZVwiPicsXG4gICAgICAgICAgICAgICcgIDxkaXYgY2xhc3M9XCJub3RlLXBhbGV0dGUtdGl0bGVcIj4nICsgdGhpcy5sYW5nLmNvbG9yLmJhY2tncm91bmQgKyAnPC9kaXY+JyxcbiAgICAgICAgICAgICAgJyAgPGRpdj4nLFxuICAgICAgICAgICAgICAnICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwibm90ZS1jb2xvci1yZXNldCBidG4gYnRuLWxpZ2h0XCIgZGF0YS1ldmVudD1cImJhY2tDb2xvclwiIGRhdGEtdmFsdWU9XCJpbmhlcml0XCI+JyxcbiAgICAgICAgICAgICAgdGhpcy5sYW5nLmNvbG9yLnRyYW5zcGFyZW50LFxuICAgICAgICAgICAgICAnICAgIDwvYnV0dG9uPicsXG4gICAgICAgICAgICAgICcgIDwvZGl2PicsXG4gICAgICAgICAgICAgICcgIDxkaXYgY2xhc3M9XCJub3RlLWhvbGRlclwiIGRhdGEtZXZlbnQ9XCJiYWNrQ29sb3JcIi8+JyxcbiAgICAgICAgICAgICAgJzwvZGl2PicsXG4gICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibm90ZS1wYWxldHRlXCI+JyxcbiAgICAgICAgICAgICAgJyAgPGRpdiBjbGFzcz1cIm5vdGUtcGFsZXR0ZS10aXRsZVwiPicgKyB0aGlzLmxhbmcuY29sb3IuZm9yZWdyb3VuZCArICc8L2Rpdj4nLFxuICAgICAgICAgICAgICAnICA8ZGl2PicsXG4gICAgICAgICAgICAgICcgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJub3RlLWNvbG9yLXJlc2V0IGJ0biBidG4tbGlnaHRcIiBkYXRhLWV2ZW50PVwicmVtb3ZlRm9ybWF0XCIgZGF0YS12YWx1ZT1cImZvcmVDb2xvclwiPicsXG4gICAgICAgICAgICAgIHRoaXMubGFuZy5jb2xvci5yZXNldFRvRGVmYXVsdCxcbiAgICAgICAgICAgICAgJyAgICA8L2J1dHRvbj4nLFxuICAgICAgICAgICAgICAnICA8L2Rpdj4nLFxuICAgICAgICAgICAgICAnICA8ZGl2IGNsYXNzPVwibm90ZS1ob2xkZXJcIiBkYXRhLWV2ZW50PVwiZm9yZUNvbG9yXCIvPicsXG4gICAgICAgICAgICAgICc8L2Rpdj4nXG4gICAgICAgICAgICBdLmpvaW4oJycpLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgkZHJvcGRvd24pID0+IHtcbiAgICAgICAgICAgICAgJGRyb3Bkb3duLmZpbmQoJy5ub3RlLWhvbGRlcicpLmVhY2goKGlkeCwgaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0ICRob2xkZXIgPSAkKGl0ZW0pO1xuICAgICAgICAgICAgICAgICRob2xkZXIuYXBwZW5kKHRoaXMudWkucGFsZXR0ZSh7XG4gICAgICAgICAgICAgICAgICBjb2xvcnM6IHRoaXMub3B0aW9ucy5jb2xvcnMsXG4gICAgICAgICAgICAgICAgICBjb2xvcnNOYW1lOiB0aGlzLm9wdGlvbnMuY29sb3JzTmFtZSxcbiAgICAgICAgICAgICAgICAgIGV2ZW50TmFtZTogJGhvbGRlci5kYXRhKCdldmVudCcpLFxuICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiB0aGlzLm9wdGlvbnMuY29udGFpbmVyLFxuICAgICAgICAgICAgICAgICAgdG9vbHRpcDogdGhpcy5vcHRpb25zLnRvb2x0aXBcbiAgICAgICAgICAgICAgICB9KS5yZW5kZXIoKSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsaWNrOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgJGJ1dHRvbiA9ICQoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgICAgICAgY29uc3QgZXZlbnROYW1lID0gJGJ1dHRvbi5kYXRhKCdldmVudCcpO1xuICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9ICRidXR0b24uZGF0YSgndmFsdWUnKTtcblxuICAgICAgICAgICAgICBpZiAoZXZlbnROYW1lICYmIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gZXZlbnROYW1lID09PSAnYmFja0NvbG9yJyA/ICdiYWNrZ3JvdW5kLWNvbG9yJyA6ICdjb2xvcic7XG4gICAgICAgICAgICAgICAgY29uc3QgJGNvbG9yID0gJGJ1dHRvbi5jbG9zZXN0KCcubm90ZS1jb2xvcicpLmZpbmQoJy5ub3RlLXJlY2VudC1jb2xvcicpO1xuICAgICAgICAgICAgICAgIGNvbnN0ICRjdXJyZW50QnV0dG9uID0gJGJ1dHRvbi5jbG9zZXN0KCcubm90ZS1jb2xvcicpLmZpbmQoJy5ub3RlLWN1cnJlbnQtY29sb3ItYnV0dG9uJyk7XG5cbiAgICAgICAgICAgICAgICAkY29sb3IuY3NzKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICRjdXJyZW50QnV0dG9uLmF0dHIoJ2RhdGEtJyArIGV2ZW50TmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci4nICsgZXZlbnROYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICBdXG4gICAgICB9KS5yZW5kZXIoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24udWwnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy51bm9yZGVyZWRsaXN0KSxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLmxpc3RzLnVub3JkZXJlZCArIHRoaXMucmVwcmVzZW50U2hvcnRjdXQoJ2luc2VydFVub3JkZXJlZExpc3QnKSxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IuaW5zZXJ0VW5vcmRlcmVkTGlzdCcpXG4gICAgICB9KS5yZW5kZXIoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24ub2wnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5vcmRlcmVkbGlzdCksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5saXN0cy5vcmRlcmVkICsgdGhpcy5yZXByZXNlbnRTaG9ydGN1dCgnaW5zZXJ0T3JkZXJlZExpc3QnKSxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IuaW5zZXJ0T3JkZXJlZExpc3QnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBqdXN0aWZ5TGVmdCA9IHRoaXMuYnV0dG9uKHtcbiAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLmFsaWduTGVmdCksXG4gICAgICB0b29sdGlwOiB0aGlzLmxhbmcucGFyYWdyYXBoLmxlZnQgKyB0aGlzLnJlcHJlc2VudFNob3J0Y3V0KCdqdXN0aWZ5TGVmdCcpLFxuICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IuanVzdGlmeUxlZnQnKVxuICAgIH0pO1xuXG4gICAgY29uc3QganVzdGlmeUNlbnRlciA9IHRoaXMuYnV0dG9uKHtcbiAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLmFsaWduQ2VudGVyKSxcbiAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5wYXJhZ3JhcGguY2VudGVyICsgdGhpcy5yZXByZXNlbnRTaG9ydGN1dCgnanVzdGlmeUNlbnRlcicpLFxuICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IuanVzdGlmeUNlbnRlcicpXG4gICAgfSk7XG5cbiAgICBjb25zdCBqdXN0aWZ5UmlnaHQgPSB0aGlzLmJ1dHRvbih7XG4gICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5hbGlnblJpZ2h0KSxcbiAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5wYXJhZ3JhcGgucmlnaHQgKyB0aGlzLnJlcHJlc2VudFNob3J0Y3V0KCdqdXN0aWZ5UmlnaHQnKSxcbiAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignZWRpdG9yLmp1c3RpZnlSaWdodCcpXG4gICAgfSk7XG5cbiAgICBjb25zdCBqdXN0aWZ5RnVsbCA9IHRoaXMuYnV0dG9uKHtcbiAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLmFsaWduSnVzdGlmeSksXG4gICAgICB0b29sdGlwOiB0aGlzLmxhbmcucGFyYWdyYXBoLmp1c3RpZnkgKyB0aGlzLnJlcHJlc2VudFNob3J0Y3V0KCdqdXN0aWZ5RnVsbCcpLFxuICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IuanVzdGlmeUZ1bGwnKVxuICAgIH0pO1xuXG4gICAgY29uc3Qgb3V0ZGVudCA9IHRoaXMuYnV0dG9uKHtcbiAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLm91dGRlbnQpLFxuICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLnBhcmFncmFwaC5vdXRkZW50ICsgdGhpcy5yZXByZXNlbnRTaG9ydGN1dCgnb3V0ZGVudCcpLFxuICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3Iub3V0ZGVudCcpXG4gICAgfSk7XG5cbiAgICBjb25zdCBpbmRlbnQgPSB0aGlzLmJ1dHRvbih7XG4gICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5pbmRlbnQpLFxuICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLnBhcmFncmFwaC5pbmRlbnQgKyB0aGlzLnJlcHJlc2VudFNob3J0Y3V0KCdpbmRlbnQnKSxcbiAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignZWRpdG9yLmluZGVudCcpXG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmp1c3RpZnlMZWZ0JywgZnVuYy5pbnZva2UoanVzdGlmeUxlZnQsICdyZW5kZXInKSk7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5qdXN0aWZ5Q2VudGVyJywgZnVuYy5pbnZva2UoanVzdGlmeUNlbnRlciwgJ3JlbmRlcicpKTtcbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmp1c3RpZnlSaWdodCcsIGZ1bmMuaW52b2tlKGp1c3RpZnlSaWdodCwgJ3JlbmRlcicpKTtcbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmp1c3RpZnlGdWxsJywgZnVuYy5pbnZva2UoanVzdGlmeUZ1bGwsICdyZW5kZXInKSk7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5vdXRkZW50JywgZnVuYy5pbnZva2Uob3V0ZGVudCwgJ3JlbmRlcicpKTtcbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmluZGVudCcsIGZ1bmMuaW52b2tlKGluZGVudCwgJ3JlbmRlcicpKTtcblxuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24ucGFyYWdyYXBoJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMudWkuYnV0dG9uR3JvdXAoW1xuICAgICAgICB0aGlzLmJ1dHRvbih7XG4gICAgICAgICAgY2xhc3NOYW1lOiAnZHJvcGRvd24tdG9nZ2xlJyxcbiAgICAgICAgICBjb250ZW50czogdGhpcy51aS5kcm9wZG93bkJ1dHRvbkNvbnRlbnRzKHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMuYWxpZ25MZWZ0KSwgdGhpcy5vcHRpb25zKSxcbiAgICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcucGFyYWdyYXBoLnBhcmFncmFwaCxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0b2dnbGU6ICdkcm9wZG93bidcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICB0aGlzLnVpLmRyb3Bkb3duKFtcbiAgICAgICAgICB0aGlzLnVpLmJ1dHRvbkdyb3VwKHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ25vdGUtYWxpZ24nLFxuICAgICAgICAgICAgY2hpbGRyZW46IFtqdXN0aWZ5TGVmdCwganVzdGlmeUNlbnRlciwganVzdGlmeVJpZ2h0LCBqdXN0aWZ5RnVsbF1cbiAgICAgICAgICB9KSxcbiAgICAgICAgICB0aGlzLnVpLmJ1dHRvbkdyb3VwKHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ25vdGUtbGlzdCcsXG4gICAgICAgICAgICBjaGlsZHJlbjogW291dGRlbnQsIGluZGVudF1cbiAgICAgICAgICB9KVxuICAgICAgICBdKVxuICAgICAgXSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmhlaWdodCcsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLnVpLmJ1dHRvbkdyb3VwKFtcbiAgICAgICAgdGhpcy5idXR0b24oe1xuICAgICAgICAgIGNsYXNzTmFtZTogJ2Ryb3Bkb3duLXRvZ2dsZScsXG4gICAgICAgICAgY29udGVudHM6IHRoaXMudWkuZHJvcGRvd25CdXR0b25Db250ZW50cyh0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLnRleHRIZWlnaHQpLCB0aGlzLm9wdGlvbnMpLFxuICAgICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5mb250LmhlaWdodCxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB0b2dnbGU6ICdkcm9wZG93bidcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICB0aGlzLnVpLmRyb3Bkb3duQ2hlY2soe1xuICAgICAgICAgIGl0ZW1zOiB0aGlzLm9wdGlvbnMubGluZUhlaWdodHMsXG4gICAgICAgICAgY2hlY2tDbGFzc05hbWU6IHRoaXMub3B0aW9ucy5pY29ucy5tZW51Q2hlY2ssXG4gICAgICAgICAgY2xhc3NOYW1lOiAnZHJvcGRvd24tbGluZS1oZWlnaHQnLFxuICAgICAgICAgIHRpdGxlOiB0aGlzLmxhbmcuZm9udC5oZWlnaHQsXG4gICAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IubGluZUhlaWdodCcpXG4gICAgICAgIH0pXG4gICAgICBdKS5yZW5kZXIoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24udGFibGUnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy51aS5idXR0b25Hcm91cChbXG4gICAgICAgIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgICBjbGFzc05hbWU6ICdkcm9wZG93bi10b2dnbGUnLFxuICAgICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmRyb3Bkb3duQnV0dG9uQ29udGVudHModGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy50YWJsZSksIHRoaXMub3B0aW9ucyksXG4gICAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLnRhYmxlLnRhYmxlLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHRvZ2dsZTogJ2Ryb3Bkb3duJ1xuICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIHRoaXMudWkuZHJvcGRvd24oe1xuICAgICAgICAgIHRpdGxlOiB0aGlzLmxhbmcudGFibGUudGFibGUsXG4gICAgICAgICAgY2xhc3NOYW1lOiAnbm90ZS10YWJsZScsXG4gICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibm90ZS1kaW1lbnNpb24tcGlja2VyXCI+JyxcbiAgICAgICAgICAgICcgIDxkaXYgY2xhc3M9XCJub3RlLWRpbWVuc2lvbi1waWNrZXItbW91c2VjYXRjaGVyXCIgZGF0YS1ldmVudD1cImluc2VydFRhYmxlXCIgZGF0YS12YWx1ZT1cIjF4MVwiLz4nLFxuICAgICAgICAgICAgJyAgPGRpdiBjbGFzcz1cIm5vdGUtZGltZW5zaW9uLXBpY2tlci1oaWdobGlnaHRlZFwiLz4nLFxuICAgICAgICAgICAgJyAgPGRpdiBjbGFzcz1cIm5vdGUtZGltZW5zaW9uLXBpY2tlci11bmhpZ2hsaWdodGVkXCIvPicsXG4gICAgICAgICAgICAnPC9kaXY+JyxcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibm90ZS1kaW1lbnNpb24tZGlzcGxheVwiPjEgeCAxPC9kaXY+J1xuICAgICAgICAgIF0uam9pbignJylcbiAgICAgICAgfSlcbiAgICAgIF0sIHtcbiAgICAgICAgY2FsbGJhY2s6ICgkbm9kZSkgPT4ge1xuICAgICAgICAgIGNvbnN0ICRjYXRjaGVyID0gJG5vZGUuZmluZCgnLm5vdGUtZGltZW5zaW9uLXBpY2tlci1tb3VzZWNhdGNoZXInKTtcbiAgICAgICAgICAkY2F0Y2hlci5jc3Moe1xuICAgICAgICAgICAgd2lkdGg6IHRoaXMub3B0aW9ucy5pbnNlcnRUYWJsZU1heFNpemUuY29sICsgJ2VtJyxcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5vcHRpb25zLmluc2VydFRhYmxlTWF4U2l6ZS5yb3cgKyAnZW0nXG4gICAgICAgICAgfSkubW91c2Vkb3duKHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IuaW5zZXJ0VGFibGUnKSlcbiAgICAgICAgICAgIC5vbignbW91c2Vtb3ZlJywgdGhpcy50YWJsZU1vdmVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgICB9KS5yZW5kZXIoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24ubGluaycsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmJ1dHRvbih7XG4gICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLmxpbmspLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcubGluay5saW5rICsgdGhpcy5yZXByZXNlbnRTaG9ydGN1dCgnbGlua0RpYWxvZy5zaG93JyksXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignbGlua0RpYWxvZy5zaG93JylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5waWN0dXJlJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMucGljdHVyZSksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5pbWFnZS5pbWFnZSxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdpbWFnZURpYWxvZy5zaG93JylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi52aWRlbycsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmJ1dHRvbih7XG4gICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLnZpZGVvKSxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLnZpZGVvLnZpZGVvLFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ3ZpZGVvRGlhbG9nLnNob3cnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmhyJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMubWludXMpLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcuaHIuaW5zZXJ0ICsgdGhpcy5yZXByZXNlbnRTaG9ydGN1dCgnaW5zZXJ0SG9yaXpvbnRhbFJ1bGUnKSxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IuaW5zZXJ0SG9yaXpvbnRhbFJ1bGUnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmZ1bGxzY3JlZW4nLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjbGFzc05hbWU6ICdidG4tZnVsbHNjcmVlbicsXG4gICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLmFycm93c0FsdCksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5vcHRpb25zLmZ1bGxzY3JlZW4sXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignZnVsbHNjcmVlbi50b2dnbGUnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmNvZGV2aWV3JywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY2xhc3NOYW1lOiAnYnRuLWNvZGV2aWV3JyxcbiAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMuY29kZSksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5vcHRpb25zLmNvZGV2aWV3LFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ2NvZGV2aWV3LnRvZ2dsZScpXG4gICAgICB9KS5yZW5kZXIoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24ucmVkbycsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmJ1dHRvbih7XG4gICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLnJlZG8pLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcuaGlzdG9yeS5yZWRvICsgdGhpcy5yZXByZXNlbnRTaG9ydGN1dCgncmVkbycpLFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ2VkaXRvci5yZWRvJylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi51bmRvJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMudW5kbyksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5oaXN0b3J5LnVuZG8gKyB0aGlzLnJlcHJlc2VudFNob3J0Y3V0KCd1bmRvJyksXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignZWRpdG9yLnVuZG8nKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmhlbHAnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5xdWVzdGlvbiksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5vcHRpb25zLmhlbHAsXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignaGVscERpYWxvZy5zaG93JylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIGltYWdlIDogW1xuICAgKiAgIFsnaW1hZ2VzaXplJywgWydpbWFnZVNpemUxMDAnLCAnaW1hZ2VTaXplNTAnLCAnaW1hZ2VTaXplMjUnXV0sXG4gICAqICAgWydmbG9hdCcsIFsnZmxvYXRMZWZ0JywgJ2Zsb2F0UmlnaHQnLCAnZmxvYXROb25lJyBdXSxcbiAgICogICBbJ3JlbW92ZScsIFsncmVtb3ZlTWVkaWEnXV1cbiAgICogXSxcbiAgICovXG4gIGFkZEltYWdlUG9wb3ZlckJ1dHRvbnMoKSB7XG4gICAgLy8gSW1hZ2UgU2l6ZSBCdXR0b25zXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5pbWFnZVNpemUxMDAnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjb250ZW50czogJzxzcGFuIGNsYXNzPVwibm90ZS1mb250c2l6ZS0xMFwiPjEwMCU8L3NwYW4+JyxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLmltYWdlLnJlc2l6ZUZ1bGwsXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignZWRpdG9yLnJlc2l6ZScsICcxJylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24uaW1hZ2VTaXplNTAnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjb250ZW50czogJzxzcGFuIGNsYXNzPVwibm90ZS1mb250c2l6ZS0xMFwiPjUwJTwvc3Bhbj4nLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcuaW1hZ2UucmVzaXplSGFsZixcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IucmVzaXplJywgJzAuNScpXG4gICAgICB9KS5yZW5kZXIoKTtcbiAgICB9KTtcbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmltYWdlU2l6ZTI1JywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY29udGVudHM6ICc8c3BhbiBjbGFzcz1cIm5vdGUtZm9udHNpemUtMTBcIj4yNSU8L3NwYW4+JyxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLmltYWdlLnJlc2l6ZVF1YXJ0ZXIsXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignZWRpdG9yLnJlc2l6ZScsICcwLjI1JylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgLy8gRmxvYXQgQnV0dG9uc1xuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24uZmxvYXRMZWZ0JywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMuYWxpZ25MZWZ0KSxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLmltYWdlLmZsb2F0TGVmdCxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IuZmxvYXRNZScsICdsZWZ0JylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5mbG9hdFJpZ2h0JywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMuYWxpZ25SaWdodCksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5pbWFnZS5mbG9hdFJpZ2h0LFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ2VkaXRvci5mbG9hdE1lJywgJ3JpZ2h0JylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5mbG9hdE5vbmUnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5hbGlnbkp1c3RpZnkpLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcuaW1hZ2UuZmxvYXROb25lLFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ2VkaXRvci5mbG9hdE1lJywgJ25vbmUnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICAvLyBSZW1vdmUgQnV0dG9uc1xuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24ucmVtb3ZlTWVkaWEnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy50cmFzaCksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5pbWFnZS5yZW1vdmUsXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignZWRpdG9yLnJlbW92ZU1lZGlhJylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkTGlua1BvcG92ZXJCdXR0b25zKCkge1xuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24ubGlua0RpYWxvZ1Nob3cnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5saW5rKSxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLmxpbmsuZWRpdCxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdsaW5rRGlhbG9nLnNob3cnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLnVubGluaycsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmJ1dHRvbih7XG4gICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLnVubGluayksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5saW5rLnVubGluayxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IudW5saW5rJylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIHRhYmxlIDogW1xuICAgKiAgWydhZGQnLCBbJ2FkZFJvd0Rvd24nLCAnYWRkUm93VXAnLCAnYWRkQ29sTGVmdCcsICdhZGRDb2xSaWdodCddXSxcbiAgICogIFsnZGVsZXRlJywgWydkZWxldGVSb3cnLCAnZGVsZXRlQ29sJywgJ2RlbGV0ZVRhYmxlJ11dXG4gICAqIF0sXG4gICAqL1xuICBhZGRUYWJsZVBvcG92ZXJCdXR0b25zKCkge1xuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24uYWRkUm93VXAnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjbGFzc05hbWU6ICdidG4tbWQnLFxuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5yb3dBYm92ZSksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy50YWJsZS5hZGRSb3dBYm92ZSxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IuYWRkUm93JywgJ3RvcCcpXG4gICAgICB9KS5yZW5kZXIoKTtcbiAgICB9KTtcbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmFkZFJvd0Rvd24nLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjbGFzc05hbWU6ICdidG4tbWQnLFxuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5yb3dCZWxvdyksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy50YWJsZS5hZGRSb3dCZWxvdyxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IuYWRkUm93JywgJ2JvdHRvbScpXG4gICAgICB9KS5yZW5kZXIoKTtcbiAgICB9KTtcbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmFkZENvbExlZnQnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjbGFzc05hbWU6ICdidG4tbWQnLFxuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5jb2xCZWZvcmUpLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcudGFibGUuYWRkQ29sTGVmdCxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IuYWRkQ29sJywgJ2xlZnQnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5hZGRDb2xSaWdodCcsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmJ1dHRvbih7XG4gICAgICAgIGNsYXNzTmFtZTogJ2J0bi1tZCcsXG4gICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLmNvbEFmdGVyKSxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLnRhYmxlLmFkZENvbFJpZ2h0LFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ2VkaXRvci5hZGRDb2wnLCAncmlnaHQnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5kZWxldGVSb3cnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjbGFzc05hbWU6ICdidG4tbWQnLFxuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5yb3dSZW1vdmUpLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcudGFibGUuZGVsUm93LFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ2VkaXRvci5kZWxldGVSb3cnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5kZWxldGVDb2wnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjbGFzc05hbWU6ICdidG4tbWQnLFxuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5jb2xSZW1vdmUpLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcudGFibGUuZGVsQ29sLFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ2VkaXRvci5kZWxldGVDb2wnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5kZWxldGVUYWJsZScsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmJ1dHRvbih7XG4gICAgICAgIGNsYXNzTmFtZTogJ2J0bi1tZCcsXG4gICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLnRyYXNoKSxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLnRhYmxlLmRlbFRhYmxlLFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ2VkaXRvci5kZWxldGVUYWJsZScpXG4gICAgICB9KS5yZW5kZXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGJ1aWxkKCRjb250YWluZXIsIGdyb3Vwcykge1xuICAgIGZvciAobGV0IGdyb3VwSWR4ID0gMCwgZ3JvdXBMZW4gPSBncm91cHMubGVuZ3RoOyBncm91cElkeCA8IGdyb3VwTGVuOyBncm91cElkeCsrKSB7XG4gICAgICBjb25zdCBncm91cCA9IGdyb3Vwc1tncm91cElkeF07XG4gICAgICBjb25zdCBncm91cE5hbWUgPSAkLmlzQXJyYXkoZ3JvdXApID8gZ3JvdXBbMF0gOiBncm91cDtcbiAgICAgIGNvbnN0IGJ1dHRvbnMgPSAkLmlzQXJyYXkoZ3JvdXApID8gKChncm91cC5sZW5ndGggPT09IDEpID8gW2dyb3VwWzBdXSA6IGdyb3VwWzFdKSA6IFtncm91cF07XG5cbiAgICAgIGNvbnN0ICRncm91cCA9IHRoaXMudWkuYnV0dG9uR3JvdXAoe1xuICAgICAgICBjbGFzc05hbWU6ICdub3RlLScgKyBncm91cE5hbWVcbiAgICAgIH0pLnJlbmRlcigpO1xuXG4gICAgICBmb3IgKGxldCBpZHggPSAwLCBsZW4gPSBidXR0b25zLmxlbmd0aDsgaWR4IDwgbGVuOyBpZHgrKykge1xuICAgICAgICBjb25zdCBidG4gPSB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLicgKyBidXR0b25zW2lkeF0pO1xuICAgICAgICBpZiAoYnRuKSB7XG4gICAgICAgICAgJGdyb3VwLmFwcGVuZCh0eXBlb2YgYnRuID09PSAnZnVuY3Rpb24nID8gYnRuKHRoaXMuY29udGV4dCkgOiBidG4pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAkZ3JvdXAuYXBwZW5kVG8oJGNvbnRhaW5lcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBbJGNvbnRhaW5lcl1cbiAgICovXG4gIHVwZGF0ZUN1cnJlbnRTdHlsZSgkY29udGFpbmVyKSB7XG4gICAgY29uc3QgJGNvbnQgPSAkY29udGFpbmVyIHx8IHRoaXMuJHRvb2xiYXI7XG5cbiAgICBjb25zdCBzdHlsZUluZm8gPSB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3IuY3VycmVudFN0eWxlJyk7XG4gICAgdGhpcy51cGRhdGVCdG5TdGF0ZXMoJGNvbnQsIHtcbiAgICAgICcubm90ZS1idG4tYm9sZCc6ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHN0eWxlSW5mb1snZm9udC1ib2xkJ10gPT09ICdib2xkJztcbiAgICAgIH0sXG4gICAgICAnLm5vdGUtYnRuLWl0YWxpYyc6ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHN0eWxlSW5mb1snZm9udC1pdGFsaWMnXSA9PT0gJ2l0YWxpYyc7XG4gICAgICB9LFxuICAgICAgJy5ub3RlLWJ0bi11bmRlcmxpbmUnOiAoKSA9PiB7XG4gICAgICAgIHJldHVybiBzdHlsZUluZm9bJ2ZvbnQtdW5kZXJsaW5lJ10gPT09ICd1bmRlcmxpbmUnO1xuICAgICAgfSxcbiAgICAgICcubm90ZS1idG4tc3Vic2NyaXB0JzogKCkgPT4ge1xuICAgICAgICByZXR1cm4gc3R5bGVJbmZvWydmb250LXN1YnNjcmlwdCddID09PSAnc3Vic2NyaXB0JztcbiAgICAgIH0sXG4gICAgICAnLm5vdGUtYnRuLXN1cGVyc2NyaXB0JzogKCkgPT4ge1xuICAgICAgICByZXR1cm4gc3R5bGVJbmZvWydmb250LXN1cGVyc2NyaXB0J10gPT09ICdzdXBlcnNjcmlwdCc7XG4gICAgICB9LFxuICAgICAgJy5ub3RlLWJ0bi1zdHJpa2V0aHJvdWdoJzogKCkgPT4ge1xuICAgICAgICByZXR1cm4gc3R5bGVJbmZvWydmb250LXN0cmlrZXRocm91Z2gnXSA9PT0gJ3N0cmlrZXRocm91Z2gnO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHN0eWxlSW5mb1snZm9udC1mYW1pbHknXSkge1xuICAgICAgY29uc3QgZm9udE5hbWVzID0gc3R5bGVJbmZvWydmb250LWZhbWlseSddLnNwbGl0KCcsJykubWFwKChuYW1lKSA9PiB7XG4gICAgICAgIHJldHVybiBuYW1lLnJlcGxhY2UoL1tcXCdcXFwiXS9nLCAnJylcbiAgICAgICAgICAucmVwbGFjZSgvXFxzKyQvLCAnJylcbiAgICAgICAgICAucmVwbGFjZSgvXlxccysvLCAnJyk7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGZvbnROYW1lID0gbGlzdHMuZmluZChmb250TmFtZXMsIHRoaXMuaXNGb250SW5zdGFsbGVkLmJpbmQodGhpcykpO1xuXG4gICAgICAkY29udC5maW5kKCcuZHJvcGRvd24tZm9udG5hbWUgYScpLmVhY2goKGlkeCwgaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCAkaXRlbSA9ICQoaXRlbSk7XG4gICAgICAgIC8vIGFsd2F5cyBjb21wYXJlIHN0cmluZyB0byBhdm9pZCBjcmVhdGluZyBhbm90aGVyIGZ1bmMuXG4gICAgICAgIGNvbnN0IGlzQ2hlY2tlZCA9ICgkaXRlbS5kYXRhKCd2YWx1ZScpICsgJycpID09PSAoZm9udE5hbWUgKyAnJyk7XG4gICAgICAgICRpdGVtLnRvZ2dsZUNsYXNzKCdjaGVja2VkJywgaXNDaGVja2VkKTtcbiAgICAgIH0pO1xuICAgICAgJGNvbnQuZmluZCgnLm5vdGUtY3VycmVudC1mb250bmFtZScpLnRleHQoZm9udE5hbWUpLmNzcygnZm9udC1mYW1pbHknLCBmb250TmFtZSk7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlSW5mb1snZm9udC1zaXplJ10pIHtcbiAgICAgIGNvbnN0IGZvbnRTaXplID0gc3R5bGVJbmZvWydmb250LXNpemUnXTtcbiAgICAgICRjb250LmZpbmQoJy5kcm9wZG93bi1mb250c2l6ZSBhJykuZWFjaCgoaWR4LCBpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0ICRpdGVtID0gJChpdGVtKTtcbiAgICAgICAgLy8gYWx3YXlzIGNvbXBhcmUgd2l0aCBzdHJpbmcgdG8gYXZvaWQgY3JlYXRpbmcgYW5vdGhlciBmdW5jLlxuICAgICAgICBjb25zdCBpc0NoZWNrZWQgPSAoJGl0ZW0uZGF0YSgndmFsdWUnKSArICcnKSA9PT0gKGZvbnRTaXplICsgJycpO1xuICAgICAgICAkaXRlbS50b2dnbGVDbGFzcygnY2hlY2tlZCcsIGlzQ2hlY2tlZCk7XG4gICAgICB9KTtcbiAgICAgICRjb250LmZpbmQoJy5ub3RlLWN1cnJlbnQtZm9udHNpemUnKS50ZXh0KGZvbnRTaXplKTtcbiAgICB9XG5cbiAgICBpZiAoc3R5bGVJbmZvWydsaW5lLWhlaWdodCddKSB7XG4gICAgICBjb25zdCBsaW5lSGVpZ2h0ID0gc3R5bGVJbmZvWydsaW5lLWhlaWdodCddO1xuICAgICAgJGNvbnQuZmluZCgnLmRyb3Bkb3duLWxpbmUtaGVpZ2h0IGxpIGEnKS5lYWNoKChpZHgsIGl0ZW0pID0+IHtcbiAgICAgICAgLy8gYWx3YXlzIGNvbXBhcmUgd2l0aCBzdHJpbmcgdG8gYXZvaWQgY3JlYXRpbmcgYW5vdGhlciBmdW5jLlxuICAgICAgICBjb25zdCBpc0NoZWNrZWQgPSAoJChpdGVtKS5kYXRhKCd2YWx1ZScpICsgJycpID09PSAobGluZUhlaWdodCArICcnKTtcbiAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBpc0NoZWNrZWQgPyAnY2hlY2tlZCcgOiAnJztcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZUJ0blN0YXRlcygkY29udGFpbmVyLCBpbmZvcykge1xuICAgICQuZWFjaChpbmZvcywgKHNlbGVjdG9yLCBwcmVkKSA9PiB7XG4gICAgICB0aGlzLnVpLnRvZ2dsZUJ0bkFjdGl2ZSgkY29udGFpbmVyLmZpbmQoc2VsZWN0b3IpLCBwcmVkKCkpO1xuICAgIH0pO1xuICB9XG5cbiAgdGFibGVNb3ZlSGFuZGxlcihldmVudCkge1xuICAgIGNvbnN0IFBYX1BFUl9FTSA9IDE4O1xuICAgIGNvbnN0ICRwaWNrZXIgPSAkKGV2ZW50LnRhcmdldC5wYXJlbnROb2RlKTsgLy8gdGFyZ2V0IGlzIG1vdXNlY2F0Y2hlclxuICAgIGNvbnN0ICRkaW1lbnNpb25EaXNwbGF5ID0gJHBpY2tlci5uZXh0KCk7XG4gICAgY29uc3QgJGNhdGNoZXIgPSAkcGlja2VyLmZpbmQoJy5ub3RlLWRpbWVuc2lvbi1waWNrZXItbW91c2VjYXRjaGVyJyk7XG4gICAgY29uc3QgJGhpZ2hsaWdodGVkID0gJHBpY2tlci5maW5kKCcubm90ZS1kaW1lbnNpb24tcGlja2VyLWhpZ2hsaWdodGVkJyk7XG4gICAgY29uc3QgJHVuaGlnaGxpZ2h0ZWQgPSAkcGlja2VyLmZpbmQoJy5ub3RlLWRpbWVuc2lvbi1waWNrZXItdW5oaWdobGlnaHRlZCcpO1xuXG4gICAgbGV0IHBvc09mZnNldDtcbiAgICAvLyBIVE1MNSB3aXRoIGpRdWVyeSAtIGUub2Zmc2V0WCBpcyB1bmRlZmluZWQgaW4gRmlyZWZveFxuICAgIGlmIChldmVudC5vZmZzZXRYID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IHBvc0NhdGNoZXIgPSAkKGV2ZW50LnRhcmdldCkub2Zmc2V0KCk7XG4gICAgICBwb3NPZmZzZXQgPSB7XG4gICAgICAgIHg6IGV2ZW50LnBhZ2VYIC0gcG9zQ2F0Y2hlci5sZWZ0LFxuICAgICAgICB5OiBldmVudC5wYWdlWSAtIHBvc0NhdGNoZXIudG9wXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBwb3NPZmZzZXQgPSB7XG4gICAgICAgIHg6IGV2ZW50Lm9mZnNldFgsXG4gICAgICAgIHk6IGV2ZW50Lm9mZnNldFlcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgZGltID0ge1xuICAgICAgYzogTWF0aC5jZWlsKHBvc09mZnNldC54IC8gUFhfUEVSX0VNKSB8fCAxLFxuICAgICAgcjogTWF0aC5jZWlsKHBvc09mZnNldC55IC8gUFhfUEVSX0VNKSB8fCAxXG4gICAgfTtcblxuICAgICRoaWdobGlnaHRlZC5jc3MoeyB3aWR0aDogZGltLmMgKyAnZW0nLCBoZWlnaHQ6IGRpbS5yICsgJ2VtJyB9KTtcbiAgICAkY2F0Y2hlci5kYXRhKCd2YWx1ZScsIGRpbS5jICsgJ3gnICsgZGltLnIpO1xuXG4gICAgaWYgKGRpbS5jID4gMyAmJiBkaW0uYyA8IHRoaXMub3B0aW9ucy5pbnNlcnRUYWJsZU1heFNpemUuY29sKSB7XG4gICAgICAkdW5oaWdobGlnaHRlZC5jc3MoeyB3aWR0aDogZGltLmMgKyAxICsgJ2VtJyB9KTtcbiAgICB9XG5cbiAgICBpZiAoZGltLnIgPiAzICYmIGRpbS5yIDwgdGhpcy5vcHRpb25zLmluc2VydFRhYmxlTWF4U2l6ZS5yb3cpIHtcbiAgICAgICR1bmhpZ2hsaWdodGVkLmNzcyh7IGhlaWdodDogZGltLnIgKyAxICsgJ2VtJyB9KTtcbiAgICB9XG5cbiAgICAkZGltZW5zaW9uRGlzcGxheS5odG1sKGRpbS5jICsgJyB4ICcgKyBkaW0ucik7XG4gIH1cbn1cbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUb29sYmFyIHtcbiAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG5cbiAgICB0aGlzLiR3aW5kb3cgPSAkKHdpbmRvdyk7XG4gICAgdGhpcy4kZG9jdW1lbnQgPSAkKGRvY3VtZW50KTtcblxuICAgIHRoaXMudWkgPSAkLnN1bW1lcm5vdGUudWk7XG4gICAgdGhpcy4kbm90ZSA9IGNvbnRleHQubGF5b3V0SW5mby5ub3RlO1xuICAgIHRoaXMuJGVkaXRvciA9IGNvbnRleHQubGF5b3V0SW5mby5lZGl0b3I7XG4gICAgdGhpcy4kdG9vbGJhciA9IGNvbnRleHQubGF5b3V0SW5mby50b29sYmFyO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcblxuICAgIHRoaXMuZm9sbG93U2Nyb2xsID0gdGhpcy5mb2xsb3dTY3JvbGwuYmluZCh0aGlzKTtcbiAgfVxuXG4gIHNob3VsZEluaXRpYWxpemUoKSB7XG4gICAgcmV0dXJuICF0aGlzLm9wdGlvbnMuYWlyTW9kZTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy5vcHRpb25zLnRvb2xiYXIgPSB0aGlzLm9wdGlvbnMudG9vbGJhciB8fCBbXTtcblxuICAgIGlmICghdGhpcy5vcHRpb25zLnRvb2xiYXIubGVuZ3RoKSB7XG4gICAgICB0aGlzLiR0b29sYmFyLmhpZGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnYnV0dG9ucy5idWlsZCcsIHRoaXMuJHRvb2xiYXIsIHRoaXMub3B0aW9ucy50b29sYmFyKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnRvb2xiYXJDb250YWluZXIpIHtcbiAgICAgIHRoaXMuJHRvb2xiYXIuYXBwZW5kVG8odGhpcy5vcHRpb25zLnRvb2xiYXJDb250YWluZXIpO1xuICAgIH1cblxuICAgIHRoaXMuY2hhbmdlQ29udGFpbmVyKGZhbHNlKTtcblxuICAgIHRoaXMuJG5vdGUub24oJ3N1bW1lcm5vdGUua2V5dXAgc3VtbWVybm90ZS5tb3VzZXVwIHN1bW1lcm5vdGUuY2hhbmdlJywgKCkgPT4ge1xuICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnYnV0dG9ucy51cGRhdGVDdXJyZW50U3R5bGUnKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2J1dHRvbnMudXBkYXRlQ3VycmVudFN0eWxlJyk7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5mb2xsb3dpbmdUb29sYmFyKSB7XG4gICAgICB0aGlzLiR3aW5kb3cub24oJ3Njcm9sbCByZXNpemUnLCB0aGlzLmZvbGxvd1Njcm9sbCk7XG4gICAgfVxuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLiR0b29sYmFyLmNoaWxkcmVuKCkucmVtb3ZlKCk7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmZvbGxvd2luZ1Rvb2xiYXIpIHtcbiAgICAgIHRoaXMuJHdpbmRvdy5vZmYoJ3Njcm9sbCByZXNpemUnLCB0aGlzLmZvbGxvd1Njcm9sbCk7XG4gICAgfVxuICB9XG5cbiAgZm9sbG93U2Nyb2xsKCkge1xuICAgIGlmICh0aGlzLiRlZGl0b3IuaGFzQ2xhc3MoJ2Z1bGxzY3JlZW4nKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0ICR0b29sYmFyV3JhcHBlciA9IHRoaXMuJHRvb2xiYXIucGFyZW50KCcubm90ZS10b29sYmFyLXdyYXBwZXInKTtcbiAgICBjb25zdCBlZGl0b3JIZWlnaHQgPSB0aGlzLiRlZGl0b3Iub3V0ZXJIZWlnaHQoKTtcbiAgICBjb25zdCBlZGl0b3JXaWR0aCA9IHRoaXMuJGVkaXRvci53aWR0aCgpO1xuXG4gICAgY29uc3QgdG9vbGJhckhlaWdodCA9IHRoaXMuJHRvb2xiYXIuaGVpZ2h0KCk7XG4gICAgJHRvb2xiYXJXcmFwcGVyLmNzcyh7XG4gICAgICBoZWlnaHQ6IHRvb2xiYXJIZWlnaHRcbiAgICB9KTtcblxuICAgIC8vIGNoZWNrIGlmIHRoZSB3ZWIgYXBwIGlzIGN1cnJlbnRseSB1c2luZyBhbm90aGVyIHN0YXRpYyBiYXJcbiAgICBsZXQgb3RoZXJCYXJIZWlnaHQgPSAwO1xuICAgIGlmICh0aGlzLm9wdGlvbnMub3RoZXJTdGF0aWNCYXIpIHtcbiAgICAgIG90aGVyQmFySGVpZ2h0ID0gJCh0aGlzLm9wdGlvbnMub3RoZXJTdGF0aWNCYXIpLm91dGVySGVpZ2h0KCk7XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudE9mZnNldCA9IHRoaXMuJGRvY3VtZW50LnNjcm9sbFRvcCgpO1xuICAgIGNvbnN0IGVkaXRvck9mZnNldFRvcCA9IHRoaXMuJGVkaXRvci5vZmZzZXQoKS50b3A7XG4gICAgY29uc3QgZWRpdG9yT2Zmc2V0Qm90dG9tID0gZWRpdG9yT2Zmc2V0VG9wICsgZWRpdG9ySGVpZ2h0O1xuICAgIGNvbnN0IGFjdGl2YXRlT2Zmc2V0ID0gZWRpdG9yT2Zmc2V0VG9wIC0gb3RoZXJCYXJIZWlnaHQ7XG4gICAgY29uc3QgZGVhY3RpdmF0ZU9mZnNldEJvdHRvbSA9IGVkaXRvck9mZnNldEJvdHRvbSAtIG90aGVyQmFySGVpZ2h0IC0gdG9vbGJhckhlaWdodDtcblxuICAgIGlmICgoY3VycmVudE9mZnNldCA+IGFjdGl2YXRlT2Zmc2V0KSAmJiAoY3VycmVudE9mZnNldCA8IGRlYWN0aXZhdGVPZmZzZXRCb3R0b20pKSB7XG4gICAgICB0aGlzLiR0b29sYmFyLmNzcyh7XG4gICAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICAgICB0b3A6IG90aGVyQmFySGVpZ2h0LFxuICAgICAgICB3aWR0aDogZWRpdG9yV2lkdGhcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiR0b29sYmFyLmNzcyh7XG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICB0b3A6IDAsXG4gICAgICAgIHdpZHRoOiAnMTAwJSdcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGNoYW5nZUNvbnRhaW5lcihpc0Z1bGxzY3JlZW4pIHtcbiAgICBpZiAoaXNGdWxsc2NyZWVuKSB7XG4gICAgICB0aGlzLiR0b29sYmFyLnByZXBlbmRUbyh0aGlzLiRlZGl0b3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLnRvb2xiYXJDb250YWluZXIpIHtcbiAgICAgICAgdGhpcy4kdG9vbGJhci5hcHBlbmRUbyh0aGlzLm9wdGlvbnMudG9vbGJhckNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlRnVsbHNjcmVlbihpc0Z1bGxzY3JlZW4pIHtcbiAgICB0aGlzLnVpLnRvZ2dsZUJ0bkFjdGl2ZSh0aGlzLiR0b29sYmFyLmZpbmQoJy5idG4tZnVsbHNjcmVlbicpLCBpc0Z1bGxzY3JlZW4pO1xuXG4gICAgdGhpcy5jaGFuZ2VDb250YWluZXIoaXNGdWxsc2NyZWVuKTtcbiAgfVxuXG4gIHVwZGF0ZUNvZGV2aWV3KGlzQ29kZXZpZXcpIHtcbiAgICB0aGlzLnVpLnRvZ2dsZUJ0bkFjdGl2ZSh0aGlzLiR0b29sYmFyLmZpbmQoJy5idG4tY29kZXZpZXcnKSwgaXNDb2Rldmlldyk7XG4gICAgaWYgKGlzQ29kZXZpZXcpIHtcbiAgICAgIHRoaXMuZGVhY3RpdmF0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFjdGl2YXRlKCk7XG4gICAgfVxuICB9XG5cbiAgYWN0aXZhdGUoaXNJbmNsdWRlQ29kZXZpZXcpIHtcbiAgICBsZXQgJGJ0biA9IHRoaXMuJHRvb2xiYXIuZmluZCgnYnV0dG9uJyk7XG4gICAgaWYgKCFpc0luY2x1ZGVDb2Rldmlldykge1xuICAgICAgJGJ0biA9ICRidG4ubm90KCcuYnRuLWNvZGV2aWV3Jyk7XG4gICAgfVxuICAgIHRoaXMudWkudG9nZ2xlQnRuKCRidG4sIHRydWUpO1xuICB9XG5cbiAgZGVhY3RpdmF0ZShpc0luY2x1ZGVDb2Rldmlldykge1xuICAgIGxldCAkYnRuID0gdGhpcy4kdG9vbGJhci5maW5kKCdidXR0b24nKTtcbiAgICBpZiAoIWlzSW5jbHVkZUNvZGV2aWV3KSB7XG4gICAgICAkYnRuID0gJGJ0bi5ub3QoJy5idG4tY29kZXZpZXcnKTtcbiAgICB9XG4gICAgdGhpcy51aS50b2dnbGVCdG4oJGJ0biwgZmFsc2UpO1xuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGVudiBmcm9tICcuLi9jb3JlL2Vudic7XG5pbXBvcnQga2V5IGZyb20gJy4uL2NvcmUva2V5JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGlua0RpYWxvZyB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuXG4gICAgdGhpcy51aSA9ICQuc3VtbWVybm90ZS51aTtcbiAgICB0aGlzLiRib2R5ID0gJChkb2N1bWVudC5ib2R5KTtcbiAgICB0aGlzLiRlZGl0b3IgPSBjb250ZXh0LmxheW91dEluZm8uZWRpdG9yO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcbiAgICB0aGlzLmxhbmcgPSB0aGlzLm9wdGlvbnMubGFuZ0luZm87XG5cbiAgICBjb250ZXh0Lm1lbW8oJ2hlbHAubGlua0RpYWxvZy5zaG93JywgdGhpcy5vcHRpb25zLmxhbmdJbmZvLmhlbHBbJ2xpbmtEaWFsb2cuc2hvdyddKTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgY29uc3QgJGNvbnRhaW5lciA9IHRoaXMub3B0aW9ucy5kaWFsb2dzSW5Cb2R5ID8gdGhpcy4kYm9keSA6IHRoaXMuJGVkaXRvcjtcblxuICAgIGNvbnN0IGJvZHkgPSBbXG4gICAgICAnPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgbm90ZS1mb3JtLWdyb3VwXCI+JyxcbiAgICAgIGA8bGFiZWwgY2xhc3M9XCJub3RlLWZvcm0tbGFiZWxcIj4ke3RoaXMubGFuZy5saW5rLnRleHRUb0Rpc3BsYXl9PC9sYWJlbD5gLFxuICAgICAgJzxpbnB1dCBjbGFzcz1cIm5vdGUtbGluay10ZXh0IGZvcm0tY29udHJvbCBub3RlLWZvcm0tY29udHJvbCAgbm90ZS1pbnB1dFwiIHR5cGU9XCJ0ZXh0XCIgLz4nLFxuICAgICAgJzwvZGl2PicsXG4gICAgICAnPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgbm90ZS1mb3JtLWdyb3VwXCI+JyxcbiAgICAgIGA8bGFiZWwgY2xhc3M9XCJub3RlLWZvcm0tbGFiZWxcIj4ke3RoaXMubGFuZy5saW5rLnVybH08L2xhYmVsPmAsXG4gICAgICAnPGlucHV0IGNsYXNzPVwibm90ZS1saW5rLXVybCBmb3JtLWNvbnRyb2wgbm90ZS1mb3JtLWNvbnRyb2wgbm90ZS1pbnB1dFwiIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCJodHRwOi8vXCIgLz4nLFxuICAgICAgJzwvZGl2PicsXG4gICAgICAhdGhpcy5vcHRpb25zLmRpc2FibGVMaW5rVGFyZ2V0XG4gICAgICAgID8gJCgnPGRpdi8+JykuYXBwZW5kKHRoaXMudWkuY2hlY2tib3goe1xuICAgICAgICAgIGlkOiAnc24tY2hlY2tib3gtb3Blbi1pbi1uZXctd2luZG93JyxcbiAgICAgICAgICB0ZXh0OiB0aGlzLmxhbmcubGluay5vcGVuSW5OZXdXaW5kb3csXG4gICAgICAgICAgY2hlY2tlZDogdHJ1ZVxuICAgICAgICB9KS5yZW5kZXIoKSkuaHRtbCgpXG4gICAgICAgIDogJydcbiAgICBdLmpvaW4oJycpO1xuXG4gICAgY29uc3QgYnV0dG9uQ2xhc3MgPSAnYnRuIGJ0bi1wcmltYXJ5IG5vdGUtYnRuIG5vdGUtYnRuLXByaW1hcnkgbm90ZS1saW5rLWJ0bic7XG4gICAgY29uc3QgZm9vdGVyID0gYDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGhyZWY9XCIjXCIgY2xhc3M9XCIke2J1dHRvbkNsYXNzfVwiIGRpc2FibGVkPiR7dGhpcy5sYW5nLmxpbmsuaW5zZXJ0fTwvYnV0dG9uPmA7XG5cbiAgICB0aGlzLiRkaWFsb2cgPSB0aGlzLnVpLmRpYWxvZyh7XG4gICAgICBjbGFzc05hbWU6ICdsaW5rLWRpYWxvZycsXG4gICAgICB0aXRsZTogdGhpcy5sYW5nLmxpbmsuaW5zZXJ0LFxuICAgICAgZmFkZTogdGhpcy5vcHRpb25zLmRpYWxvZ3NGYWRlLFxuICAgICAgYm9keTogYm9keSxcbiAgICAgIGZvb3RlcjogZm9vdGVyXG4gICAgfSkucmVuZGVyKCkuYXBwZW5kVG8oJGNvbnRhaW5lcik7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMudWkuaGlkZURpYWxvZyh0aGlzLiRkaWFsb2cpO1xuICAgIHRoaXMuJGRpYWxvZy5yZW1vdmUoKTtcbiAgfVxuXG4gIGJpbmRFbnRlcktleSgkaW5wdXQsICRidG4pIHtcbiAgICAkaW5wdXQub24oJ2tleXByZXNzJywgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0ga2V5LmNvZGUuRU5URVIpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJGJ0bi50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIHRvZ2dsZSB1cGRhdGUgYnV0dG9uXG4gICAqL1xuICB0b2dnbGVMaW5rQnRuKCRsaW5rQnRuLCAkbGlua1RleHQsICRsaW5rVXJsKSB7XG4gICAgdGhpcy51aS50b2dnbGVCdG4oJGxpbmtCdG4sICRsaW5rVGV4dC52YWwoKSAmJiAkbGlua1VybC52YWwoKSk7XG4gIH1cblxuICAvKipcbiAgICogU2hvdyBsaW5rIGRpYWxvZyBhbmQgc2V0IGV2ZW50IGhhbmRsZXJzIG9uIGRpYWxvZyBjb250cm9scy5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGxpbmtJbmZvXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqL1xuICBzaG93TGlua0RpYWxvZyhsaW5rSW5mbykge1xuICAgIHJldHVybiAkLkRlZmVycmVkKChkZWZlcnJlZCkgPT4ge1xuICAgICAgY29uc3QgJGxpbmtUZXh0ID0gdGhpcy4kZGlhbG9nLmZpbmQoJy5ub3RlLWxpbmstdGV4dCcpO1xuICAgICAgY29uc3QgJGxpbmtVcmwgPSB0aGlzLiRkaWFsb2cuZmluZCgnLm5vdGUtbGluay11cmwnKTtcbiAgICAgIGNvbnN0ICRsaW5rQnRuID0gdGhpcy4kZGlhbG9nLmZpbmQoJy5ub3RlLWxpbmstYnRuJyk7XG4gICAgICBjb25zdCAkb3BlbkluTmV3V2luZG93ID0gdGhpcy4kZGlhbG9nLmZpbmQoJ2lucHV0W3R5cGU9Y2hlY2tib3hdJyk7XG5cbiAgICAgIHRoaXMudWkub25EaWFsb2dTaG93bih0aGlzLiRkaWFsb2csICgpID0+IHtcbiAgICAgICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnZGlhbG9nLnNob3duJyk7XG5cbiAgICAgICAgLy8gaWYgbm8gdXJsIHdhcyBnaXZlbiwgY29weSB0ZXh0IHRvIHVybFxuICAgICAgICBpZiAoIWxpbmtJbmZvLnVybCkge1xuICAgICAgICAgIGxpbmtJbmZvLnVybCA9IGxpbmtJbmZvLnRleHQ7XG4gICAgICAgIH1cblxuICAgICAgICAkbGlua1RleHQudmFsKGxpbmtJbmZvLnRleHQpO1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZUxpbmtUZXh0VXBkYXRlID0gKCkgPT4ge1xuICAgICAgICAgIHRoaXMudG9nZ2xlTGlua0J0bigkbGlua0J0biwgJGxpbmtUZXh0LCAkbGlua1VybCk7XG4gICAgICAgICAgLy8gaWYgbGlua3RleHQgd2FzIG1vZGlmaWVkIGJ5IGtleXVwLFxuICAgICAgICAgIC8vIHN0b3AgY2xvbmluZyB0ZXh0IGZyb20gbGlua1VybFxuICAgICAgICAgIGxpbmtJbmZvLnRleHQgPSAkbGlua1RleHQudmFsKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJGxpbmtUZXh0Lm9uKCdpbnB1dCcsIGhhbmRsZUxpbmtUZXh0VXBkYXRlKS5vbigncGFzdGUnLCAoKSA9PiB7XG4gICAgICAgICAgc2V0VGltZW91dChoYW5kbGVMaW5rVGV4dFVwZGF0ZSwgMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZUxpbmtVcmxVcGRhdGUgPSAoKSA9PiB7XG4gICAgICAgICAgdGhpcy50b2dnbGVMaW5rQnRuKCRsaW5rQnRuLCAkbGlua1RleHQsICRsaW5rVXJsKTtcbiAgICAgICAgICAvLyBkaXNwbGF5IHNhbWUgbGluayBvbiBgVGV4dCB0byBkaXNwbGF5YCBpbnB1dFxuICAgICAgICAgIC8vIHdoZW4gY3JlYXRlIGEgbmV3IGxpbmtcbiAgICAgICAgICBpZiAoIWxpbmtJbmZvLnRleHQpIHtcbiAgICAgICAgICAgICRsaW5rVGV4dC52YWwoJGxpbmtVcmwudmFsKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkbGlua1VybC5vbignaW5wdXQnLCBoYW5kbGVMaW5rVXJsVXBkYXRlKS5vbigncGFzdGUnLCAoKSA9PiB7XG4gICAgICAgICAgc2V0VGltZW91dChoYW5kbGVMaW5rVXJsVXBkYXRlLCAwKTtcbiAgICAgICAgfSkudmFsKGxpbmtJbmZvLnVybCk7XG5cbiAgICAgICAgaWYgKCFlbnYuaXNTdXBwb3J0VG91Y2gpIHtcbiAgICAgICAgICAkbGlua1VybC50cmlnZ2VyKCdmb2N1cycpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50b2dnbGVMaW5rQnRuKCRsaW5rQnRuLCAkbGlua1RleHQsICRsaW5rVXJsKTtcbiAgICAgICAgdGhpcy5iaW5kRW50ZXJLZXkoJGxpbmtVcmwsICRsaW5rQnRuKTtcbiAgICAgICAgdGhpcy5iaW5kRW50ZXJLZXkoJGxpbmtUZXh0LCAkbGlua0J0bik7XG5cbiAgICAgICAgY29uc3QgaXNDaGVja2VkID0gbGlua0luZm8uaXNOZXdXaW5kb3cgIT09IHVuZGVmaW5lZFxuICAgICAgICAgID8gbGlua0luZm8uaXNOZXdXaW5kb3cgOiB0aGlzLmNvbnRleHQub3B0aW9ucy5saW5rVGFyZ2V0Qmxhbms7XG5cbiAgICAgICAgJG9wZW5Jbk5ld1dpbmRvdy5wcm9wKCdjaGVja2VkJywgaXNDaGVja2VkKTtcblxuICAgICAgICAkbGlua0J0bi5vbmUoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoe1xuICAgICAgICAgICAgcmFuZ2U6IGxpbmtJbmZvLnJhbmdlLFxuICAgICAgICAgICAgdXJsOiAkbGlua1VybC52YWwoKSxcbiAgICAgICAgICAgIHRleHQ6ICRsaW5rVGV4dC52YWwoKSxcbiAgICAgICAgICAgIGlzTmV3V2luZG93OiAkb3BlbkluTmV3V2luZG93LmlzKCc6Y2hlY2tlZCcpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy51aS5oaWRlRGlhbG9nKHRoaXMuJGRpYWxvZyk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMudWkub25EaWFsb2dIaWRkZW4odGhpcy4kZGlhbG9nLCAoKSA9PiB7XG4gICAgICAgIC8vIGRldGFjaCBldmVudHNcbiAgICAgICAgJGxpbmtUZXh0Lm9mZignaW5wdXQgcGFzdGUga2V5cHJlc3MnKTtcbiAgICAgICAgJGxpbmtVcmwub2ZmKCdpbnB1dCBwYXN0ZSBrZXlwcmVzcycpO1xuICAgICAgICAkbGlua0J0bi5vZmYoJ2NsaWNrJyk7XG5cbiAgICAgICAgaWYgKGRlZmVycmVkLnN0YXRlKCkgPT09ICdwZW5kaW5nJykge1xuICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy51aS5zaG93RGlhbG9nKHRoaXMuJGRpYWxvZyk7XG4gICAgfSkucHJvbWlzZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBsYXlvdXRJbmZvXG4gICAqL1xuICBzaG93KCkge1xuICAgIGNvbnN0IGxpbmtJbmZvID0gdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLmdldExpbmtJbmZvJyk7XG5cbiAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3Iuc2F2ZVJhbmdlJyk7XG4gICAgdGhpcy5zaG93TGlua0RpYWxvZyhsaW5rSW5mbykudGhlbigobGlua0luZm8pID0+IHtcbiAgICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5yZXN0b3JlUmFuZ2UnKTtcbiAgICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5jcmVhdGVMaW5rJywgbGlua0luZm8pO1xuICAgIH0pLmZhaWwoKCkgPT4ge1xuICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLnJlc3RvcmVSYW5nZScpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGxpc3RzIGZyb20gJy4uL2NvcmUvbGlzdHMnO1xuaW1wb3J0IGRvbSBmcm9tICcuLi9jb3JlL2RvbSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpbmtQb3BvdmVyIHtcbiAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG5cbiAgICB0aGlzLnVpID0gJC5zdW1tZXJub3RlLnVpO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcbiAgICB0aGlzLmV2ZW50cyA9IHtcbiAgICAgICdzdW1tZXJub3RlLmtleXVwIHN1bW1lcm5vdGUubW91c2V1cCBzdW1tZXJub3RlLmNoYW5nZSBzdW1tZXJub3RlLnNjcm9sbCc6ICgpID0+IHtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgIH0sXG4gICAgICAnc3VtbWVybm90ZS5kaXNhYmxlIHN1bW1lcm5vdGUuZGlhbG9nLnNob3duJzogKCkgPT4ge1xuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgc2hvdWxkSW5pdGlhbGl6ZSgpIHtcbiAgICByZXR1cm4gIWxpc3RzLmlzRW1wdHkodGhpcy5vcHRpb25zLnBvcG92ZXIubGluayk7XG4gIH1cblxuICBpbml0aWFsaXplKCkge1xuICAgIHRoaXMuJHBvcG92ZXIgPSB0aGlzLnVpLnBvcG92ZXIoe1xuICAgICAgY2xhc3NOYW1lOiAnbm90ZS1saW5rLXBvcG92ZXInLFxuICAgICAgY2FsbGJhY2s6ICgkbm9kZSkgPT4ge1xuICAgICAgICBjb25zdCAkY29udGVudCA9ICRub2RlLmZpbmQoJy5wb3BvdmVyLWNvbnRlbnQsLm5vdGUtcG9wb3Zlci1jb250ZW50Jyk7XG4gICAgICAgICRjb250ZW50LnByZXBlbmQoJzxzcGFuPjxhIHRhcmdldD1cIl9ibGFua1wiPjwvYT4mbmJzcDs8L3NwYW4+Jyk7XG4gICAgICB9XG4gICAgfSkucmVuZGVyKCkuYXBwZW5kVG8odGhpcy5vcHRpb25zLmNvbnRhaW5lcik7XG4gICAgY29uc3QgJGNvbnRlbnQgPSB0aGlzLiRwb3BvdmVyLmZpbmQoJy5wb3BvdmVyLWNvbnRlbnQsLm5vdGUtcG9wb3Zlci1jb250ZW50Jyk7XG5cbiAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdidXR0b25zLmJ1aWxkJywgJGNvbnRlbnQsIHRoaXMub3B0aW9ucy5wb3BvdmVyLmxpbmspO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLiRwb3BvdmVyLnJlbW92ZSgpO1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIC8vIFByZXZlbnQgZm9jdXNpbmcgb24gZWRpdGFibGUgd2hlbiBpbnZva2UoJ2NvZGUnKSBpcyBleGVjdXRlZFxuICAgIGlmICghdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLmhhc0ZvY3VzJykpIHtcbiAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHJuZyA9IHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5jcmVhdGVSYW5nZScpO1xuICAgIGlmIChybmcuaXNDb2xsYXBzZWQoKSAmJiBybmcuaXNPbkFuY2hvcigpKSB7XG4gICAgICBjb25zdCBhbmNob3IgPSBkb20uYW5jZXN0b3Iocm5nLnNjLCBkb20uaXNBbmNob3IpO1xuICAgICAgY29uc3QgaHJlZiA9ICQoYW5jaG9yKS5hdHRyKCdocmVmJyk7XG4gICAgICB0aGlzLiRwb3BvdmVyLmZpbmQoJ2EnKS5hdHRyKCdocmVmJywgaHJlZikuaHRtbChocmVmKTtcblxuICAgICAgY29uc3QgcG9zID0gZG9tLnBvc0Zyb21QbGFjZWhvbGRlcihhbmNob3IpO1xuICAgICAgdGhpcy4kcG9wb3Zlci5jc3Moe1xuICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICBsZWZ0OiBwb3MubGVmdCxcbiAgICAgICAgdG9wOiBwb3MudG9wXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfVxuICB9XG5cbiAgaGlkZSgpIHtcbiAgICB0aGlzLiRwb3BvdmVyLmhpZGUoKTtcbiAgfVxufVxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBlbnYgZnJvbSAnLi4vY29yZS9lbnYnO1xuaW1wb3J0IGtleSBmcm9tICcuLi9jb3JlL2tleSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEltYWdlRGlhbG9nIHtcbiAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgdGhpcy51aSA9ICQuc3VtbWVybm90ZS51aTtcbiAgICB0aGlzLiRib2R5ID0gJChkb2N1bWVudC5ib2R5KTtcbiAgICB0aGlzLiRlZGl0b3IgPSBjb250ZXh0LmxheW91dEluZm8uZWRpdG9yO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcbiAgICB0aGlzLmxhbmcgPSB0aGlzLm9wdGlvbnMubGFuZ0luZm87XG4gIH1cblxuICBpbml0aWFsaXplKCkge1xuICAgIGNvbnN0ICRjb250YWluZXIgPSB0aGlzLm9wdGlvbnMuZGlhbG9nc0luQm9keSA/IHRoaXMuJGJvZHkgOiB0aGlzLiRlZGl0b3I7XG5cbiAgICBsZXQgaW1hZ2VMaW1pdGF0aW9uID0gJyc7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5tYXhpbXVtSW1hZ2VGaWxlU2l6ZSkge1xuICAgICAgY29uc3QgdW5pdCA9IE1hdGguZmxvb3IoTWF0aC5sb2codGhpcy5vcHRpb25zLm1heGltdW1JbWFnZUZpbGVTaXplKSAvIE1hdGgubG9nKDEwMjQpKTtcbiAgICAgIGNvbnN0IHJlYWRhYmxlU2l6ZSA9ICh0aGlzLm9wdGlvbnMubWF4aW11bUltYWdlRmlsZVNpemUgLyBNYXRoLnBvdygxMDI0LCB1bml0KSkudG9GaXhlZCgyKSAqIDEgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICcgJyArICcgS01HVFAnW3VuaXRdICsgJ0InO1xuICAgICAgaW1hZ2VMaW1pdGF0aW9uID0gYDxzbWFsbD4ke3RoaXMubGFuZy5pbWFnZS5tYXhpbXVtRmlsZVNpemUgKyAnIDogJyArIHJlYWRhYmxlU2l6ZX08L3NtYWxsPmA7XG4gICAgfVxuXG4gICAgY29uc3QgYm9keSA9IFtcbiAgICAgICc8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCBub3RlLWZvcm0tZ3JvdXAgbm90ZS1ncm91cC1zZWxlY3QtZnJvbS1maWxlc1wiPicsXG4gICAgICAnPGxhYmVsIGNsYXNzPVwibm90ZS1mb3JtLWxhYmVsXCI+JyArIHRoaXMubGFuZy5pbWFnZS5zZWxlY3RGcm9tRmlsZXMgKyAnPC9sYWJlbD4nLFxuICAgICAgJzxpbnB1dCBjbGFzcz1cIm5vdGUtaW1hZ2UtaW5wdXQgbm90ZS1mb3JtLWNvbnRyb2wgbm90ZS1pbnB1dFwiICcsXG4gICAgICAnIHR5cGU9XCJmaWxlXCIgbmFtZT1cImZpbGVzXCIgYWNjZXB0PVwiaW1hZ2UvKlwiIG11bHRpcGxlPVwibXVsdGlwbGVcIiAvPicsXG4gICAgICBpbWFnZUxpbWl0YXRpb24sXG4gICAgICAnPC9kaXY+JyxcbiAgICAgICc8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCBub3RlLWdyb3VwLWltYWdlLXVybFwiIHN0eWxlPVwib3ZlcmZsb3c6YXV0bztcIj4nLFxuICAgICAgJzxsYWJlbCBjbGFzcz1cIm5vdGUtZm9ybS1sYWJlbFwiPicgKyB0aGlzLmxhbmcuaW1hZ2UudXJsICsgJzwvbGFiZWw+JyxcbiAgICAgICc8aW5wdXQgY2xhc3M9XCJub3RlLWltYWdlLXVybCBmb3JtLWNvbnRyb2wgbm90ZS1mb3JtLWNvbnRyb2wgbm90ZS1pbnB1dCAnLFxuICAgICAgJyBjb2wtbWQtMTJcIiB0eXBlPVwidGV4dFwiIC8+JyxcbiAgICAgICc8L2Rpdj4nXG4gICAgXS5qb2luKCcnKTtcbiAgICBjb25zdCBidXR0b25DbGFzcyA9ICdidG4gYnRuLXByaW1hcnkgbm90ZS1idG4gbm90ZS1idG4tcHJpbWFyeSBub3RlLWltYWdlLWJ0bic7XG4gICAgY29uc3QgZm9vdGVyID0gYDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGhyZWY9XCIjXCIgY2xhc3M9XCIke2J1dHRvbkNsYXNzfVwiIGRpc2FibGVkPiR7dGhpcy5sYW5nLmltYWdlLmluc2VydH08L2J1dHRvbj5gO1xuXG4gICAgdGhpcy4kZGlhbG9nID0gdGhpcy51aS5kaWFsb2coe1xuICAgICAgdGl0bGU6IHRoaXMubGFuZy5pbWFnZS5pbnNlcnQsXG4gICAgICBmYWRlOiB0aGlzLm9wdGlvbnMuZGlhbG9nc0ZhZGUsXG4gICAgICBib2R5OiBib2R5LFxuICAgICAgZm9vdGVyOiBmb290ZXJcbiAgICB9KS5yZW5kZXIoKS5hcHBlbmRUbygkY29udGFpbmVyKTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy51aS5oaWRlRGlhbG9nKHRoaXMuJGRpYWxvZyk7XG4gICAgdGhpcy4kZGlhbG9nLnJlbW92ZSgpO1xuICB9XG5cbiAgYmluZEVudGVyS2V5KCRpbnB1dCwgJGJ0bikge1xuICAgICRpbnB1dC5vbigna2V5cHJlc3MnLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBrZXkuY29kZS5FTlRFUikge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkYnRuLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBzaG93KCkge1xuICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5zYXZlUmFuZ2UnKTtcbiAgICB0aGlzLnNob3dJbWFnZURpYWxvZygpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIC8vIFt3b3JrYXJvdW5kXSBoaWRlIGRpYWxvZyBiZWZvcmUgcmVzdG9yZSByYW5nZSBmb3IgSUUgcmFuZ2UgZm9jdXNcbiAgICAgIHRoaXMudWkuaGlkZURpYWxvZyh0aGlzLiRkaWFsb2cpO1xuICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLnJlc3RvcmVSYW5nZScpO1xuXG4gICAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7IC8vIGltYWdlIHVybFxuICAgICAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3IuaW5zZXJ0SW1hZ2UnLCBkYXRhKTtcbiAgICAgIH0gZWxzZSB7IC8vIGFycmF5IG9mIGZpbGVzXG4gICAgICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5pbnNlcnRJbWFnZXNPckNhbGxiYWNrJywgZGF0YSk7XG4gICAgICB9XG4gICAgfSkuZmFpbCgoKSA9PiB7XG4gICAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3IucmVzdG9yZVJhbmdlJyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogc2hvdyBpbWFnZSBkaWFsb2dcbiAgICpcbiAgICogQHBhcmFtIHtqUXVlcnl9ICRkaWFsb2dcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIHNob3dJbWFnZURpYWxvZygpIHtcbiAgICByZXR1cm4gJC5EZWZlcnJlZCgoZGVmZXJyZWQpID0+IHtcbiAgICAgIGNvbnN0ICRpbWFnZUlucHV0ID0gdGhpcy4kZGlhbG9nLmZpbmQoJy5ub3RlLWltYWdlLWlucHV0Jyk7XG4gICAgICBjb25zdCAkaW1hZ2VVcmwgPSB0aGlzLiRkaWFsb2cuZmluZCgnLm5vdGUtaW1hZ2UtdXJsJyk7XG4gICAgICBjb25zdCAkaW1hZ2VCdG4gPSB0aGlzLiRkaWFsb2cuZmluZCgnLm5vdGUtaW1hZ2UtYnRuJyk7XG5cbiAgICAgIHRoaXMudWkub25EaWFsb2dTaG93bih0aGlzLiRkaWFsb2csICgpID0+IHtcbiAgICAgICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnZGlhbG9nLnNob3duJyk7XG5cbiAgICAgICAgLy8gQ2xvbmluZyBpbWFnZUlucHV0IHRvIGNsZWFyIGVsZW1lbnQuXG4gICAgICAgICRpbWFnZUlucHV0LnJlcGxhY2VXaXRoKCRpbWFnZUlucHV0LmNsb25lKCkub24oJ2NoYW5nZScsIChldmVudCkgPT4ge1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZXZlbnQudGFyZ2V0LmZpbGVzIHx8IGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgICAgIH0pLnZhbCgnJykpO1xuXG4gICAgICAgICRpbWFnZUJ0bi5jbGljaygoZXZlbnQpID0+IHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgkaW1hZ2VVcmwudmFsKCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkaW1hZ2VVcmwub24oJ2tleXVwIHBhc3RlJywgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHVybCA9ICRpbWFnZVVybC52YWwoKTtcbiAgICAgICAgICB0aGlzLnVpLnRvZ2dsZUJ0bigkaW1hZ2VCdG4sIHVybCk7XG4gICAgICAgIH0pLnZhbCgnJyk7XG5cbiAgICAgICAgaWYgKCFlbnYuaXNTdXBwb3J0VG91Y2gpIHtcbiAgICAgICAgICAkaW1hZ2VVcmwudHJpZ2dlcignZm9jdXMnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJpbmRFbnRlcktleSgkaW1hZ2VVcmwsICRpbWFnZUJ0bik7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy51aS5vbkRpYWxvZ0hpZGRlbih0aGlzLiRkaWFsb2csICgpID0+IHtcbiAgICAgICAgJGltYWdlSW5wdXQub2ZmKCdjaGFuZ2UnKTtcbiAgICAgICAgJGltYWdlVXJsLm9mZigna2V5dXAgcGFzdGUga2V5cHJlc3MnKTtcbiAgICAgICAgJGltYWdlQnRuLm9mZignY2xpY2snKTtcblxuICAgICAgICBpZiAoZGVmZXJyZWQuc3RhdGUoKSA9PT0gJ3BlbmRpbmcnKSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnVpLnNob3dEaWFsb2codGhpcy4kZGlhbG9nKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBsaXN0cyBmcm9tICcuLi9jb3JlL2xpc3RzJztcbmltcG9ydCBkb20gZnJvbSAnLi4vY29yZS9kb20nO1xuXG4vKipcbiAqIEltYWdlIHBvcG92ZXIgbW9kdWxlXG4gKiAgbW91c2UgZXZlbnRzIHRoYXQgc2hvdy9oaWRlIHBvcG92ZXIgd2lsbCBiZSBoYW5kbGVkIGJ5IEhhbmRsZS5qcy5cbiAqICBIYW5kbGUuanMgd2lsbCByZWNlaXZlIHRoZSBldmVudHMgYW5kIGludm9rZSAnaW1hZ2VQb3BvdmVyLnVwZGF0ZScuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEltYWdlUG9wb3ZlciB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIHRoaXMudWkgPSAkLnN1bW1lcm5vdGUudWk7XG5cbiAgICB0aGlzLmVkaXRhYmxlID0gY29udGV4dC5sYXlvdXRJbmZvLmVkaXRhYmxlWzBdO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcblxuICAgIHRoaXMuZXZlbnRzID0ge1xuICAgICAgJ3N1bW1lcm5vdGUuZGlzYWJsZSc6ICgpID0+IHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHNob3VsZEluaXRpYWxpemUoKSB7XG4gICAgcmV0dXJuICFsaXN0cy5pc0VtcHR5KHRoaXMub3B0aW9ucy5wb3BvdmVyLmltYWdlKTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy4kcG9wb3ZlciA9IHRoaXMudWkucG9wb3Zlcih7XG4gICAgICBjbGFzc05hbWU6ICdub3RlLWltYWdlLXBvcG92ZXInXG4gICAgfSkucmVuZGVyKCkuYXBwZW5kVG8odGhpcy5vcHRpb25zLmNvbnRhaW5lcik7XG4gICAgY29uc3QgJGNvbnRlbnQgPSB0aGlzLiRwb3BvdmVyLmZpbmQoJy5wb3BvdmVyLWNvbnRlbnQsLm5vdGUtcG9wb3Zlci1jb250ZW50Jyk7XG4gICAgdGhpcy5jb250ZXh0Lmludm9rZSgnYnV0dG9ucy5idWlsZCcsICRjb250ZW50LCB0aGlzLm9wdGlvbnMucG9wb3Zlci5pbWFnZSk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuJHBvcG92ZXIucmVtb3ZlKCk7XG4gIH1cblxuICB1cGRhdGUodGFyZ2V0KSB7XG4gICAgaWYgKGRvbS5pc0ltZyh0YXJnZXQpKSB7XG4gICAgICBjb25zdCBwb3MgPSBkb20ucG9zRnJvbVBsYWNlaG9sZGVyKHRhcmdldCk7XG4gICAgICBjb25zdCBwb3NFZGl0b3IgPSBkb20ucG9zRnJvbVBsYWNlaG9sZGVyKHRoaXMuZWRpdGFibGUpO1xuICAgICAgdGhpcy4kcG9wb3Zlci5jc3Moe1xuICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICBsZWZ0OiB0aGlzLm9wdGlvbnMucG9wYXRtb3VzZSA/IGV2ZW50LnBhZ2VYIC0gMjAgOiBwb3MubGVmdCxcbiAgICAgICAgdG9wOiB0aGlzLm9wdGlvbnMucG9wYXRtb3VzZSA/IGV2ZW50LnBhZ2VZIDogTWF0aC5taW4ocG9zLnRvcCwgcG9zRWRpdG9yLnRvcClcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhpZGUoKTtcbiAgICB9XG4gIH1cblxuICBoaWRlKCkge1xuICAgIHRoaXMuJHBvcG92ZXIuaGlkZSgpO1xuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGVudiBmcm9tICcuLi9jb3JlL2Vudic7XG5pbXBvcnQgbGlzdHMgZnJvbSAnLi4vY29yZS9saXN0cyc7XG5pbXBvcnQgZG9tIGZyb20gJy4uL2NvcmUvZG9tJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFibGVQb3BvdmVyIHtcbiAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG5cbiAgICB0aGlzLnVpID0gJC5zdW1tZXJub3RlLnVpO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcbiAgICB0aGlzLmV2ZW50cyA9IHtcbiAgICAgICdzdW1tZXJub3RlLm1vdXNlZG93bic6ICh3ZSwgZSkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZShlLnRhcmdldCk7XG4gICAgICB9LFxuICAgICAgJ3N1bW1lcm5vdGUua2V5dXAgc3VtbWVybm90ZS5zY3JvbGwgc3VtbWVybm90ZS5jaGFuZ2UnOiAoKSA9PiB7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICB9LFxuICAgICAgJ3N1bW1lcm5vdGUuZGlzYWJsZSc6ICgpID0+IHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHNob3VsZEluaXRpYWxpemUoKSB7XG4gICAgcmV0dXJuICFsaXN0cy5pc0VtcHR5KHRoaXMub3B0aW9ucy5wb3BvdmVyLnRhYmxlKTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy4kcG9wb3ZlciA9IHRoaXMudWkucG9wb3Zlcih7XG4gICAgICBjbGFzc05hbWU6ICdub3RlLXRhYmxlLXBvcG92ZXInXG4gICAgfSkucmVuZGVyKCkuYXBwZW5kVG8odGhpcy5vcHRpb25zLmNvbnRhaW5lcik7XG4gICAgY29uc3QgJGNvbnRlbnQgPSB0aGlzLiRwb3BvdmVyLmZpbmQoJy5wb3BvdmVyLWNvbnRlbnQsLm5vdGUtcG9wb3Zlci1jb250ZW50Jyk7XG5cbiAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdidXR0b25zLmJ1aWxkJywgJGNvbnRlbnQsIHRoaXMub3B0aW9ucy5wb3BvdmVyLnRhYmxlKTtcblxuICAgIC8vIFt3b3JrYXJvdW5kXSBEaXNhYmxlIEZpcmVmb3gncyBkZWZhdWx0IHRhYmxlIGVkaXRvclxuICAgIGlmIChlbnYuaXNGRikge1xuICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2VuYWJsZUlubGluZVRhYmxlRWRpdGluZycsIGZhbHNlLCBmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLiRwb3BvdmVyLnJlbW92ZSgpO1xuICB9XG5cbiAgdXBkYXRlKHRhcmdldCkge1xuICAgIGlmICh0aGlzLmNvbnRleHQuaXNEaXNhYmxlZCgpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgaXNDZWxsID0gZG9tLmlzQ2VsbCh0YXJnZXQpO1xuXG4gICAgaWYgKGlzQ2VsbCkge1xuICAgICAgY29uc3QgcG9zID0gZG9tLnBvc0Zyb21QbGFjZWhvbGRlcih0YXJnZXQpO1xuICAgICAgdGhpcy4kcG9wb3Zlci5jc3Moe1xuICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICBsZWZ0OiBwb3MubGVmdCxcbiAgICAgICAgdG9wOiBwb3MudG9wXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlzQ2VsbDtcbiAgfVxuXG4gIGhpZGUoKSB7XG4gICAgdGhpcy4kcG9wb3Zlci5oaWRlKCk7XG4gIH1cbn1cbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgZW52IGZyb20gJy4uL2NvcmUvZW52JztcbmltcG9ydCBrZXkgZnJvbSAnLi4vY29yZS9rZXknO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWRlb0RpYWxvZyB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuXG4gICAgdGhpcy51aSA9ICQuc3VtbWVybm90ZS51aTtcbiAgICB0aGlzLiRib2R5ID0gJChkb2N1bWVudC5ib2R5KTtcbiAgICB0aGlzLiRlZGl0b3IgPSBjb250ZXh0LmxheW91dEluZm8uZWRpdG9yO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcbiAgICB0aGlzLmxhbmcgPSB0aGlzLm9wdGlvbnMubGFuZ0luZm87XG4gIH1cblxuICBpbml0aWFsaXplKCkge1xuICAgIGNvbnN0ICRjb250YWluZXIgPSB0aGlzLm9wdGlvbnMuZGlhbG9nc0luQm9keSA/IHRoaXMuJGJvZHkgOiB0aGlzLiRlZGl0b3I7XG5cbiAgICBjb25zdCBib2R5ID0gW1xuICAgICAgJzxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIG5vdGUtZm9ybS1ncm91cCByb3ctZmx1aWRcIj4nLFxuICAgICAgYDxsYWJlbCBjbGFzcz1cIm5vdGUtZm9ybS1sYWJlbFwiPiR7dGhpcy5sYW5nLnZpZGVvLnVybH0gPHNtYWxsIGNsYXNzPVwidGV4dC1tdXRlZFwiPiR7dGhpcy5sYW5nLnZpZGVvLnByb3ZpZGVyc308L3NtYWxsPjwvbGFiZWw+YCxcbiAgICAgICc8aW5wdXQgY2xhc3M9XCJub3RlLXZpZGVvLXVybCBmb3JtLWNvbnRyb2wgbm90ZS1mb3JtLWNvbnRyb2wgbm90ZS1pbnB1dFwiIHR5cGU9XCJ0ZXh0XCIgLz4nLFxuICAgICAgJzwvZGl2PidcbiAgICBdLmpvaW4oJycpO1xuICAgIGNvbnN0IGJ1dHRvbkNsYXNzID0gJ2J0biBidG4tcHJpbWFyeSBub3RlLWJ0biBub3RlLWJ0bi1wcmltYXJ5IG5vdGUtdmlkZW8tYnRuJztcbiAgICBjb25zdCBmb290ZXIgPSBgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgaHJlZj1cIiNcIiBjbGFzcz1cIiR7YnV0dG9uQ2xhc3N9XCIgZGlzYWJsZWQ+JHt0aGlzLmxhbmcudmlkZW8uaW5zZXJ0fTwvYnV0dG9uPmA7XG5cbiAgICB0aGlzLiRkaWFsb2cgPSB0aGlzLnVpLmRpYWxvZyh7XG4gICAgICB0aXRsZTogdGhpcy5sYW5nLnZpZGVvLmluc2VydCxcbiAgICAgIGZhZGU6IHRoaXMub3B0aW9ucy5kaWFsb2dzRmFkZSxcbiAgICAgIGJvZHk6IGJvZHksXG4gICAgICBmb290ZXI6IGZvb3RlclxuICAgIH0pLnJlbmRlcigpLmFwcGVuZFRvKCRjb250YWluZXIpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnVpLmhpZGVEaWFsb2codGhpcy4kZGlhbG9nKTtcbiAgICB0aGlzLiRkaWFsb2cucmVtb3ZlKCk7XG4gIH1cblxuICBiaW5kRW50ZXJLZXkoJGlucHV0LCAkYnRuKSB7XG4gICAgJGlucHV0Lm9uKCdrZXlwcmVzcycsIChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IGtleS5jb2RlLkVOVEVSKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICRidG4udHJpZ2dlcignY2xpY2snKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGNyZWF0ZVZpZGVvTm9kZSh1cmwpIHtcbiAgICAvLyB2aWRlbyB1cmwgcGF0dGVybnMoeW91dHViZSwgaW5zdGFncmFtLCB2aW1lbywgZGFpbHltb3Rpb24sIHlvdWt1LCBtcDQsIG9nZywgd2VibSlcbiAgICBjb25zdCB5dFJlZ0V4cCA9IC9eKD86aHR0cHM/OlxcL1xcLyk/KD86d3d3XFwuKT8oPzp5b3V0dVxcLmJlXFwvfHlvdXR1YmVcXC5jb21cXC8oPzplbWJlZFxcL3x2XFwvfHdhdGNoXFw/dj18d2F0Y2hcXD8uKyZ2PSkpKChcXHd8LSl7MTF9KSg/OlxcUyspPyQvO1xuICAgIGNvbnN0IHl0TWF0Y2ggPSB1cmwubWF0Y2goeXRSZWdFeHApO1xuXG4gICAgY29uc3QgaWdSZWdFeHAgPSAvKD86d3d3XFwufFxcL1xcLylpbnN0YWdyYW1cXC5jb21cXC9wXFwvKC5bYS16QS1aMC05Xy1dKikvO1xuICAgIGNvbnN0IGlnTWF0Y2ggPSB1cmwubWF0Y2goaWdSZWdFeHApO1xuXG4gICAgY29uc3QgdlJlZ0V4cCA9IC9cXC9cXC92aW5lXFwuY29cXC92XFwvKFthLXpBLVowLTldKykvO1xuICAgIGNvbnN0IHZNYXRjaCA9IHVybC5tYXRjaCh2UmVnRXhwKTtcblxuICAgIGNvbnN0IHZpbVJlZ0V4cCA9IC9cXC9cXC8ocGxheWVyXFwuKT92aW1lb1xcLmNvbVxcLyhbYS16XSpcXC8pKihcXGQrKVs/XT8uKi87XG4gICAgY29uc3QgdmltTWF0Y2ggPSB1cmwubWF0Y2godmltUmVnRXhwKTtcblxuICAgIGNvbnN0IGRtUmVnRXhwID0gLy4rZGFpbHltb3Rpb24uY29tXFwvKHZpZGVvfGh1YilcXC8oW15fXSspW14jXSooI3ZpZGVvPShbXl8mXSspKT8vO1xuICAgIGNvbnN0IGRtTWF0Y2ggPSB1cmwubWF0Y2goZG1SZWdFeHApO1xuXG4gICAgY29uc3QgeW91a3VSZWdFeHAgPSAvXFwvXFwvdlxcLnlvdWt1XFwuY29tXFwvdl9zaG93XFwvaWRfKFxcdyspPSpcXC5odG1sLztcbiAgICBjb25zdCB5b3VrdU1hdGNoID0gdXJsLm1hdGNoKHlvdWt1UmVnRXhwKTtcblxuICAgIGNvbnN0IHFxUmVnRXhwID0gL1xcL1xcL3ZcXC5xcVxcLmNvbS4qP3ZpZD0oLispLztcbiAgICBjb25zdCBxcU1hdGNoID0gdXJsLm1hdGNoKHFxUmVnRXhwKTtcblxuICAgIGNvbnN0IHFxUmVnRXhwMiA9IC9cXC9cXC92XFwucXFcXC5jb21cXC94P1xcLz8ocGFnZXxjb3ZlcikuKj9cXC8oW15cXC9dKylcXC5odG1sXFw/Py4qLztcbiAgICBjb25zdCBxcU1hdGNoMiA9IHVybC5tYXRjaChxcVJlZ0V4cDIpO1xuXG4gICAgY29uc3QgbXA0UmVnRXhwID0gL14uKy4obXA0fG00dikkLztcbiAgICBjb25zdCBtcDRNYXRjaCA9IHVybC5tYXRjaChtcDRSZWdFeHApO1xuXG4gICAgY29uc3Qgb2dnUmVnRXhwID0gL14uKy4ob2dnfG9ndikkLztcbiAgICBjb25zdCBvZ2dNYXRjaCA9IHVybC5tYXRjaChvZ2dSZWdFeHApO1xuXG4gICAgY29uc3Qgd2VibVJlZ0V4cCA9IC9eLisuKHdlYm0pJC87XG4gICAgY29uc3Qgd2VibU1hdGNoID0gdXJsLm1hdGNoKHdlYm1SZWdFeHApO1xuXG4gICAgbGV0ICR2aWRlbztcbiAgICBpZiAoeXRNYXRjaCAmJiB5dE1hdGNoWzFdLmxlbmd0aCA9PT0gMTEpIHtcbiAgICAgIGNvbnN0IHlvdXR1YmVJZCA9IHl0TWF0Y2hbMV07XG4gICAgICAkdmlkZW8gPSAkKCc8aWZyYW1lPicpXG4gICAgICAgIC5hdHRyKCdmcmFtZWJvcmRlcicsIDApXG4gICAgICAgIC5hdHRyKCdzcmMnLCAnLy93d3cueW91dHViZS5jb20vZW1iZWQvJyArIHlvdXR1YmVJZClcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgJzY0MCcpLmF0dHIoJ2hlaWdodCcsICczNjAnKTtcbiAgICB9IGVsc2UgaWYgKGlnTWF0Y2ggJiYgaWdNYXRjaFswXS5sZW5ndGgpIHtcbiAgICAgICR2aWRlbyA9ICQoJzxpZnJhbWU+JylcbiAgICAgICAgLmF0dHIoJ2ZyYW1lYm9yZGVyJywgMClcbiAgICAgICAgLmF0dHIoJ3NyYycsICdodHRwczovL2luc3RhZ3JhbS5jb20vcC8nICsgaWdNYXRjaFsxXSArICcvZW1iZWQvJylcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgJzYxMicpLmF0dHIoJ2hlaWdodCcsICc3MTAnKVxuICAgICAgICAuYXR0cignc2Nyb2xsaW5nJywgJ25vJylcbiAgICAgICAgLmF0dHIoJ2FsbG93dHJhbnNwYXJlbmN5JywgJ3RydWUnKTtcbiAgICB9IGVsc2UgaWYgKHZNYXRjaCAmJiB2TWF0Y2hbMF0ubGVuZ3RoKSB7XG4gICAgICAkdmlkZW8gPSAkKCc8aWZyYW1lPicpXG4gICAgICAgIC5hdHRyKCdmcmFtZWJvcmRlcicsIDApXG4gICAgICAgIC5hdHRyKCdzcmMnLCB2TWF0Y2hbMF0gKyAnL2VtYmVkL3NpbXBsZScpXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsICc2MDAnKS5hdHRyKCdoZWlnaHQnLCAnNjAwJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3ZpbmUtZW1iZWQnKTtcbiAgICB9IGVsc2UgaWYgKHZpbU1hdGNoICYmIHZpbU1hdGNoWzNdLmxlbmd0aCkge1xuICAgICAgJHZpZGVvID0gJCgnPGlmcmFtZSB3ZWJraXRhbGxvd2Z1bGxzY3JlZW4gbW96YWxsb3dmdWxsc2NyZWVuIGFsbG93ZnVsbHNjcmVlbj4nKVxuICAgICAgICAuYXR0cignZnJhbWVib3JkZXInLCAwKVxuICAgICAgICAuYXR0cignc3JjJywgJy8vcGxheWVyLnZpbWVvLmNvbS92aWRlby8nICsgdmltTWF0Y2hbM10pXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsICc2NDAnKS5hdHRyKCdoZWlnaHQnLCAnMzYwJyk7XG4gICAgfSBlbHNlIGlmIChkbU1hdGNoICYmIGRtTWF0Y2hbMl0ubGVuZ3RoKSB7XG4gICAgICAkdmlkZW8gPSAkKCc8aWZyYW1lPicpXG4gICAgICAgIC5hdHRyKCdmcmFtZWJvcmRlcicsIDApXG4gICAgICAgIC5hdHRyKCdzcmMnLCAnLy93d3cuZGFpbHltb3Rpb24uY29tL2VtYmVkL3ZpZGVvLycgKyBkbU1hdGNoWzJdKVxuICAgICAgICAuYXR0cignd2lkdGgnLCAnNjQwJykuYXR0cignaGVpZ2h0JywgJzM2MCcpO1xuICAgIH0gZWxzZSBpZiAoeW91a3VNYXRjaCAmJiB5b3VrdU1hdGNoWzFdLmxlbmd0aCkge1xuICAgICAgJHZpZGVvID0gJCgnPGlmcmFtZSB3ZWJraXRhbGxvd2Z1bGxzY3JlZW4gbW96YWxsb3dmdWxsc2NyZWVuIGFsbG93ZnVsbHNjcmVlbj4nKVxuICAgICAgICAuYXR0cignZnJhbWVib3JkZXInLCAwKVxuICAgICAgICAuYXR0cignaGVpZ2h0JywgJzQ5OCcpXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsICc1MTAnKVxuICAgICAgICAuYXR0cignc3JjJywgJy8vcGxheWVyLnlvdWt1LmNvbS9lbWJlZC8nICsgeW91a3VNYXRjaFsxXSk7XG4gICAgfSBlbHNlIGlmICgocXFNYXRjaCAmJiBxcU1hdGNoWzFdLmxlbmd0aCkgfHwgKHFxTWF0Y2gyICYmIHFxTWF0Y2gyWzJdLmxlbmd0aCkpIHtcbiAgICAgIGNvbnN0IHZpZCA9ICgocXFNYXRjaCAmJiBxcU1hdGNoWzFdLmxlbmd0aCkgPyBxcU1hdGNoWzFdIDogcXFNYXRjaDJbMl0pO1xuICAgICAgJHZpZGVvID0gJCgnPGlmcmFtZSB3ZWJraXRhbGxvd2Z1bGxzY3JlZW4gbW96YWxsb3dmdWxsc2NyZWVuIGFsbG93ZnVsbHNjcmVlbj4nKVxuICAgICAgICAuYXR0cignZnJhbWVib3JkZXInLCAwKVxuICAgICAgICAuYXR0cignaGVpZ2h0JywgJzMxMCcpXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsICc1MDAnKVxuICAgICAgICAuYXR0cignc3JjJywgJ2h0dHA6Ly92LnFxLmNvbS9pZnJhbWUvcGxheWVyLmh0bWw/dmlkPScgKyB2aWQgKyAnJmFtcDthdXRvPTAnKTtcbiAgICB9IGVsc2UgaWYgKG1wNE1hdGNoIHx8IG9nZ01hdGNoIHx8IHdlYm1NYXRjaCkge1xuICAgICAgJHZpZGVvID0gJCgnPHZpZGVvIGNvbnRyb2xzPicpXG4gICAgICAgIC5hdHRyKCdzcmMnLCB1cmwpXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsICc2NDAnKS5hdHRyKCdoZWlnaHQnLCAnMzYwJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHRoaXMgaXMgbm90IGEga25vd24gdmlkZW8gbGluay4gTm93IHdoYXQsIENhdD8gTm93IHdoYXQ/XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgJHZpZGVvLmFkZENsYXNzKCdub3RlLXZpZGVvLWNsaXAnKTtcblxuICAgIHJldHVybiAkdmlkZW9bMF07XG4gIH1cblxuICBzaG93KCkge1xuICAgIGNvbnN0IHRleHQgPSB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3IuZ2V0U2VsZWN0ZWRUZXh0Jyk7XG4gICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLnNhdmVSYW5nZScpO1xuICAgIHRoaXMuc2hvd1ZpZGVvRGlhbG9nKHRleHQpLnRoZW4oKHVybCkgPT4ge1xuICAgICAgLy8gW3dvcmthcm91bmRdIGhpZGUgZGlhbG9nIGJlZm9yZSByZXN0b3JlIHJhbmdlIGZvciBJRSByYW5nZSBmb2N1c1xuICAgICAgdGhpcy51aS5oaWRlRGlhbG9nKHRoaXMuJGRpYWxvZyk7XG4gICAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3IucmVzdG9yZVJhbmdlJyk7XG5cbiAgICAgIC8vIGJ1aWxkIG5vZGVcbiAgICAgIGNvbnN0ICRub2RlID0gdGhpcy5jcmVhdGVWaWRlb05vZGUodXJsKTtcblxuICAgICAgaWYgKCRub2RlKSB7XG4gICAgICAgIC8vIGluc2VydCB2aWRlbyBub2RlXG4gICAgICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5pbnNlcnROb2RlJywgJG5vZGUpO1xuICAgICAgfVxuICAgIH0pLmZhaWwoKCkgPT4ge1xuICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLnJlc3RvcmVSYW5nZScpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIHNob3cgaW1hZ2UgZGlhbG9nXG4gICAqXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSAkZGlhbG9nXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqL1xuICBzaG93VmlkZW9EaWFsb2codGV4dCkge1xuICAgIHJldHVybiAkLkRlZmVycmVkKChkZWZlcnJlZCkgPT4ge1xuICAgICAgY29uc3QgJHZpZGVvVXJsID0gdGhpcy4kZGlhbG9nLmZpbmQoJy5ub3RlLXZpZGVvLXVybCcpO1xuICAgICAgY29uc3QgJHZpZGVvQnRuID0gdGhpcy4kZGlhbG9nLmZpbmQoJy5ub3RlLXZpZGVvLWJ0bicpO1xuXG4gICAgICB0aGlzLnVpLm9uRGlhbG9nU2hvd24odGhpcy4kZGlhbG9nLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ2RpYWxvZy5zaG93bicpO1xuXG4gICAgICAgICR2aWRlb1VybC52YWwodGV4dCkub24oJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICAgIHRoaXMudWkudG9nZ2xlQnRuKCR2aWRlb0J0biwgJHZpZGVvVXJsLnZhbCgpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFlbnYuaXNTdXBwb3J0VG91Y2gpIHtcbiAgICAgICAgICAkdmlkZW9VcmwudHJpZ2dlcignZm9jdXMnKTtcbiAgICAgICAgfVxuXG4gICAgICAgICR2aWRlb0J0bi5jbGljaygoZXZlbnQpID0+IHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgkdmlkZW9VcmwudmFsKCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmJpbmRFbnRlcktleSgkdmlkZW9VcmwsICR2aWRlb0J0bik7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy51aS5vbkRpYWxvZ0hpZGRlbih0aGlzLiRkaWFsb2csICgpID0+IHtcbiAgICAgICAgJHZpZGVvVXJsLm9mZignaW5wdXQnKTtcbiAgICAgICAgJHZpZGVvQnRuLm9mZignY2xpY2snKTtcblxuICAgICAgICBpZiAoZGVmZXJyZWQuc3RhdGUoKSA9PT0gJ3BlbmRpbmcnKSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnVpLnNob3dEaWFsb2codGhpcy4kZGlhbG9nKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBlbnYgZnJvbSAnLi4vY29yZS9lbnYnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZWxwRGlhbG9nIHtcbiAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG5cbiAgICB0aGlzLnVpID0gJC5zdW1tZXJub3RlLnVpO1xuICAgIHRoaXMuJGJvZHkgPSAkKGRvY3VtZW50LmJvZHkpO1xuICAgIHRoaXMuJGVkaXRvciA9IGNvbnRleHQubGF5b3V0SW5mby5lZGl0b3I7XG4gICAgdGhpcy5vcHRpb25zID0gY29udGV4dC5vcHRpb25zO1xuICAgIHRoaXMubGFuZyA9IHRoaXMub3B0aW9ucy5sYW5nSW5mbztcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgY29uc3QgJGNvbnRhaW5lciA9IHRoaXMub3B0aW9ucy5kaWFsb2dzSW5Cb2R5ID8gdGhpcy4kYm9keSA6IHRoaXMuJGVkaXRvcjtcblxuICAgIGNvbnN0IGJvZHkgPSBbXG4gICAgICAnPHAgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPicsXG4gICAgICAnPGEgaHJlZj1cImh0dHA6Ly9zdW1tZXJub3RlLm9yZy9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5TdW1tZXJub3RlIEBAVkVSU0lPTkBAPC9hPiDCtyAnLFxuICAgICAgJzxhIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vc3VtbWVybm90ZS9zdW1tZXJub3RlXCIgdGFyZ2V0PVwiX2JsYW5rXCI+UHJvamVjdDwvYT4gwrcgJyxcbiAgICAgICc8YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL3N1bW1lcm5vdGUvc3VtbWVybm90ZS9pc3N1ZXNcIiB0YXJnZXQ9XCJfYmxhbmtcIj5Jc3N1ZXM8L2E+JyxcbiAgICAgICc8L3A+J1xuICAgIF0uam9pbignJyk7XG5cbiAgICB0aGlzLiRkaWFsb2cgPSB0aGlzLnVpLmRpYWxvZyh7XG4gICAgICB0aXRsZTogdGhpcy5sYW5nLm9wdGlvbnMuaGVscCxcbiAgICAgIGZhZGU6IHRoaXMub3B0aW9ucy5kaWFsb2dzRmFkZSxcbiAgICAgIGJvZHk6IHRoaXMuY3JlYXRlU2hvcnRjdXRMaXN0KCksXG4gICAgICBmb290ZXI6IGJvZHksXG4gICAgICBjYWxsYmFjazogKCRub2RlKSA9PiB7XG4gICAgICAgICRub2RlLmZpbmQoJy5tb2RhbC1ib2R5LC5ub3RlLW1vZGFsLWJvZHknKS5jc3Moe1xuICAgICAgICAgICdtYXgtaGVpZ2h0JzogMzAwLFxuICAgICAgICAgICdvdmVyZmxvdyc6ICdzY3JvbGwnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pLnJlbmRlcigpLmFwcGVuZFRvKCRjb250YWluZXIpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnVpLmhpZGVEaWFsb2codGhpcy4kZGlhbG9nKTtcbiAgICB0aGlzLiRkaWFsb2cucmVtb3ZlKCk7XG4gIH1cblxuICBjcmVhdGVTaG9ydGN1dExpc3QoKSB7XG4gICAgY29uc3Qga2V5TWFwID0gdGhpcy5vcHRpb25zLmtleU1hcFtlbnYuaXNNYWMgPyAnbWFjJyA6ICdwYyddO1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhrZXlNYXApLm1hcCgoa2V5KSA9PiB7XG4gICAgICBjb25zdCBjb21tYW5kID0ga2V5TWFwW2tleV07XG4gICAgICBjb25zdCAkcm93ID0gJCgnPGRpdj48ZGl2IGNsYXNzPVwiaGVscC1saXN0LWl0ZW1cIi8+PC9kaXY+Jyk7XG4gICAgICAkcm93LmFwcGVuZCgkKCc8bGFiZWw+PGtiZD4nICsga2V5ICsgJzwva2RiPjwvbGFiZWw+JykuY3NzKHtcbiAgICAgICAgJ3dpZHRoJzogMTgwLFxuICAgICAgICAnbWFyZ2luLXJpZ2h0JzogMTBcbiAgICAgIH0pKS5hcHBlbmQoJCgnPHNwYW4vPicpLmh0bWwodGhpcy5jb250ZXh0Lm1lbW8oJ2hlbHAuJyArIGNvbW1hbmQpIHx8IGNvbW1hbmQpKTtcbiAgICAgIHJldHVybiAkcm93Lmh0bWwoKTtcbiAgICB9KS5qb2luKCcnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBzaG93IGhlbHAgZGlhbG9nXG4gICAqXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqL1xuICBzaG93SGVscERpYWxvZygpIHtcbiAgICByZXR1cm4gJC5EZWZlcnJlZCgoZGVmZXJyZWQpID0+IHtcbiAgICAgIHRoaXMudWkub25EaWFsb2dTaG93bih0aGlzLiRkaWFsb2csICgpID0+IHtcbiAgICAgICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnZGlhbG9nLnNob3duJyk7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy51aS5zaG93RGlhbG9nKHRoaXMuJGRpYWxvZyk7XG4gICAgfSkucHJvbWlzZSgpO1xuICB9XG5cbiAgc2hvdygpIHtcbiAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3Iuc2F2ZVJhbmdlJyk7XG4gICAgdGhpcy5zaG93SGVscERpYWxvZygpLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLnJlc3RvcmVSYW5nZScpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGVudiBmcm9tICcuLi9jb3JlL2Vudic7XG5pbXBvcnQgZnVuYyBmcm9tICcuLi9jb3JlL2Z1bmMnO1xuaW1wb3J0IGxpc3RzIGZyb20gJy4uL2NvcmUvbGlzdHMnO1xuaW1wb3J0IGRvbSBmcm9tICcuLi9jb3JlL2RvbSc7XG5cbmNvbnN0IEFJUl9NT0RFX1BPUE9WRVJfWF9PRkZTRVQgPSAyMDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWlyUG9wb3ZlciB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIHRoaXMudWkgPSAkLnN1bW1lcm5vdGUudWk7XG4gICAgdGhpcy5vcHRpb25zID0gY29udGV4dC5vcHRpb25zO1xuICAgIHRoaXMuZXZlbnRzID0ge1xuICAgICAgJ3N1bW1lcm5vdGUua2V5dXAgc3VtbWVybm90ZS5tb3VzZXVwIHN1bW1lcm5vdGUuc2Nyb2xsJzogKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgfSxcbiAgICAgICdzdW1tZXJub3RlLmRpc2FibGUgc3VtbWVybm90ZS5jaGFuZ2Ugc3VtbWVybm90ZS5kaWFsb2cuc2hvd24nOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgfSxcbiAgICAgICdzdW1tZXJub3RlLmZvY3Vzb3V0JzogKHdlLCBlKSA9PiB7XG4gICAgICAgIC8vIFt3b3JrYXJvdW5kXSBGaXJlZm94IGRvZXNuJ3Qgc3VwcG9ydCByZWxhdGVkVGFyZ2V0IG9uIGZvY3Vzb3V0XG4gICAgICAgIC8vICAtIElnbm9yZSBoaWRlIGFjdGlvbiBvbiBmb2N1cyBvdXQgaW4gRkYuXG4gICAgICAgIGlmIChlbnYuaXNGRikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZS5yZWxhdGVkVGFyZ2V0IHx8ICFkb20uYW5jZXN0b3IoZS5yZWxhdGVkVGFyZ2V0LCBmdW5jLmVxKHRoaXMuJHBvcG92ZXJbMF0pKSkge1xuICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHNob3VsZEluaXRpYWxpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5haXJNb2RlICYmICFsaXN0cy5pc0VtcHR5KHRoaXMub3B0aW9ucy5wb3BvdmVyLmFpcik7XG4gIH1cblxuICBpbml0aWFsaXplKCkge1xuICAgIHRoaXMuJHBvcG92ZXIgPSB0aGlzLnVpLnBvcG92ZXIoe1xuICAgICAgY2xhc3NOYW1lOiAnbm90ZS1haXItcG9wb3ZlcidcbiAgICB9KS5yZW5kZXIoKS5hcHBlbmRUbyh0aGlzLm9wdGlvbnMuY29udGFpbmVyKTtcbiAgICBjb25zdCAkY29udGVudCA9IHRoaXMuJHBvcG92ZXIuZmluZCgnLnBvcG92ZXItY29udGVudCcpO1xuXG4gICAgdGhpcy5jb250ZXh0Lmludm9rZSgnYnV0dG9ucy5idWlsZCcsICRjb250ZW50LCB0aGlzLm9wdGlvbnMucG9wb3Zlci5haXIpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLiRwb3BvdmVyLnJlbW92ZSgpO1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGNvbnN0IHN0eWxlSW5mbyA9IHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5jdXJyZW50U3R5bGUnKTtcbiAgICBpZiAoc3R5bGVJbmZvLnJhbmdlICYmICFzdHlsZUluZm8ucmFuZ2UuaXNDb2xsYXBzZWQoKSkge1xuICAgICAgY29uc3QgcmVjdCA9IGxpc3RzLmxhc3Qoc3R5bGVJbmZvLnJhbmdlLmdldENsaWVudFJlY3RzKCkpO1xuICAgICAgaWYgKHJlY3QpIHtcbiAgICAgICAgY29uc3QgYm5kID0gZnVuYy5yZWN0MmJuZChyZWN0KTtcbiAgICAgICAgdGhpcy4kcG9wb3Zlci5jc3Moe1xuICAgICAgICAgIGRpc3BsYXk6ICdibG9jaycsXG4gICAgICAgICAgbGVmdDogTWF0aC5tYXgoYm5kLmxlZnQgKyBibmQud2lkdGggLyAyLCAwKSAtIEFJUl9NT0RFX1BPUE9WRVJfWF9PRkZTRVQsXG4gICAgICAgICAgdG9wOiBibmQudG9wICsgYm5kLmhlaWdodFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnYnV0dG9ucy51cGRhdGVDdXJyZW50U3R5bGUnLCB0aGlzLiRwb3BvdmVyKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfVxuICB9XG5cbiAgaGlkZSgpIHtcbiAgICB0aGlzLiRwb3BvdmVyLmhpZGUoKTtcbiAgfVxufVxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBmdW5jIGZyb20gJy4uL2NvcmUvZnVuYyc7XG5pbXBvcnQgbGlzdHMgZnJvbSAnLi4vY29yZS9saXN0cyc7XG5pbXBvcnQgZG9tIGZyb20gJy4uL2NvcmUvZG9tJztcbmltcG9ydCByYW5nZSBmcm9tICcuLi9jb3JlL3JhbmdlJztcbmltcG9ydCBrZXkgZnJvbSAnLi4vY29yZS9rZXknO1xuXG5jb25zdCBQT1BPVkVSX0RJU1QgPSA1O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIaW50UG9wb3ZlciB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuXG4gICAgdGhpcy51aSA9ICQuc3VtbWVybm90ZS51aTtcbiAgICB0aGlzLiRlZGl0YWJsZSA9IGNvbnRleHQubGF5b3V0SW5mby5lZGl0YWJsZTtcbiAgICB0aGlzLm9wdGlvbnMgPSBjb250ZXh0Lm9wdGlvbnM7XG4gICAgdGhpcy5oaW50ID0gdGhpcy5vcHRpb25zLmhpbnQgfHwgW107XG4gICAgdGhpcy5kaXJlY3Rpb24gPSB0aGlzLm9wdGlvbnMuaGludERpcmVjdGlvbiB8fCAnYm90dG9tJztcbiAgICB0aGlzLmhpbnRzID0gJC5pc0FycmF5KHRoaXMuaGludCkgPyB0aGlzLmhpbnQgOiBbdGhpcy5oaW50XTtcblxuICAgIHRoaXMuZXZlbnRzID0ge1xuICAgICAgJ3N1bW1lcm5vdGUua2V5dXAnOiAod2UsIGUpID0+IHtcbiAgICAgICAgaWYgKCFlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgICAgdGhpcy5oYW5kbGVLZXl1cChlKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICdzdW1tZXJub3RlLmtleWRvd24nOiAod2UsIGUpID0+IHtcbiAgICAgICAgdGhpcy5oYW5kbGVLZXlkb3duKGUpO1xuICAgICAgfSxcbiAgICAgICdzdW1tZXJub3RlLmRpc2FibGUgc3VtbWVybm90ZS5kaWFsb2cuc2hvd24nOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBzaG91bGRJbml0aWFsaXplKCkge1xuICAgIHJldHVybiB0aGlzLmhpbnRzLmxlbmd0aCA+IDA7XG4gIH1cblxuICBpbml0aWFsaXplKCkge1xuICAgIHRoaXMubGFzdFdvcmRSYW5nZSA9IG51bGw7XG4gICAgdGhpcy4kcG9wb3ZlciA9IHRoaXMudWkucG9wb3Zlcih7XG4gICAgICBjbGFzc05hbWU6ICdub3RlLWhpbnQtcG9wb3ZlcicsXG4gICAgICBoaWRlQXJyb3c6IHRydWUsXG4gICAgICBkaXJlY3Rpb246ICcnXG4gICAgfSkucmVuZGVyKCkuYXBwZW5kVG8odGhpcy5vcHRpb25zLmNvbnRhaW5lcik7XG5cbiAgICB0aGlzLiRwb3BvdmVyLmhpZGUoKTtcbiAgICB0aGlzLiRjb250ZW50ID0gdGhpcy4kcG9wb3Zlci5maW5kKCcucG9wb3Zlci1jb250ZW50LC5ub3RlLXBvcG92ZXItY29udGVudCcpO1xuICAgIHRoaXMuJGNvbnRlbnQub24oJ2NsaWNrJywgJy5ub3RlLWhpbnQtaXRlbScsICgpID0+IHtcbiAgICAgIHRoaXMuJGNvbnRlbnQuZmluZCgnLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgdGhpcy5yZXBsYWNlKCk7XG4gICAgfSk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuJHBvcG92ZXIucmVtb3ZlKCk7XG4gIH1cblxuICBzZWxlY3RJdGVtKCRpdGVtKSB7XG4gICAgdGhpcy4kY29udGVudC5maW5kKCcuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICRpdGVtLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgIHRoaXMuJGNvbnRlbnRbMF0uc2Nyb2xsVG9wID0gJGl0ZW1bMF0ub2Zmc2V0VG9wIC0gKHRoaXMuJGNvbnRlbnQuaW5uZXJIZWlnaHQoKSAvIDIpO1xuICB9XG5cbiAgbW92ZURvd24oKSB7XG4gICAgY29uc3QgJGN1cnJlbnQgPSB0aGlzLiRjb250ZW50LmZpbmQoJy5ub3RlLWhpbnQtaXRlbS5hY3RpdmUnKTtcbiAgICBjb25zdCAkbmV4dCA9ICRjdXJyZW50Lm5leHQoKTtcblxuICAgIGlmICgkbmV4dC5sZW5ndGgpIHtcbiAgICAgIHRoaXMuc2VsZWN0SXRlbSgkbmV4dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCAkbmV4dEdyb3VwID0gJGN1cnJlbnQucGFyZW50KCkubmV4dCgpO1xuXG4gICAgICBpZiAoISRuZXh0R3JvdXAubGVuZ3RoKSB7XG4gICAgICAgICRuZXh0R3JvdXAgPSB0aGlzLiRjb250ZW50LmZpbmQoJy5ub3RlLWhpbnQtZ3JvdXAnKS5maXJzdCgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNlbGVjdEl0ZW0oJG5leHRHcm91cC5maW5kKCcubm90ZS1oaW50LWl0ZW0nKS5maXJzdCgpKTtcbiAgICB9XG4gIH1cblxuICBtb3ZlVXAoKSB7XG4gICAgY29uc3QgJGN1cnJlbnQgPSB0aGlzLiRjb250ZW50LmZpbmQoJy5ub3RlLWhpbnQtaXRlbS5hY3RpdmUnKTtcbiAgICBjb25zdCAkcHJldiA9ICRjdXJyZW50LnByZXYoKTtcblxuICAgIGlmICgkcHJldi5sZW5ndGgpIHtcbiAgICAgIHRoaXMuc2VsZWN0SXRlbSgkcHJldik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCAkcHJldkdyb3VwID0gJGN1cnJlbnQucGFyZW50KCkucHJldigpO1xuXG4gICAgICBpZiAoISRwcmV2R3JvdXAubGVuZ3RoKSB7XG4gICAgICAgICRwcmV2R3JvdXAgPSB0aGlzLiRjb250ZW50LmZpbmQoJy5ub3RlLWhpbnQtZ3JvdXAnKS5sYXN0KCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2VsZWN0SXRlbSgkcHJldkdyb3VwLmZpbmQoJy5ub3RlLWhpbnQtaXRlbScpLmxhc3QoKSk7XG4gICAgfVxuICB9XG5cbiAgcmVwbGFjZSgpIHtcbiAgICBjb25zdCAkaXRlbSA9IHRoaXMuJGNvbnRlbnQuZmluZCgnLm5vdGUtaGludC1pdGVtLmFjdGl2ZScpO1xuXG4gICAgaWYgKCRpdGVtLmxlbmd0aCkge1xuICAgICAgY29uc3Qgbm9kZSA9IHRoaXMubm9kZUZyb21JdGVtKCRpdGVtKTtcbiAgICAgIC8vIFhYWDogY29uc2lkZXIgdG8gbW92ZSBjb2RlcyB0byBlZGl0b3IgZm9yIHJlY29yZGluZyByZWRvL3VuZG8uXG4gICAgICB0aGlzLmxhc3RXb3JkUmFuZ2UuaW5zZXJ0Tm9kZShub2RlKTtcbiAgICAgIHJhbmdlLmNyZWF0ZUZyb21Ob2RlKG5vZGUpLmNvbGxhcHNlKCkuc2VsZWN0KCk7XG5cbiAgICAgIHRoaXMubGFzdFdvcmRSYW5nZSA9IG51bGw7XG4gICAgICB0aGlzLmhpZGUoKTtcbiAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ2NoYW5nZScsIHRoaXMuJGVkaXRhYmxlLmh0bWwoKSwgdGhpcy4kZWRpdGFibGVbMF0pO1xuICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLmZvY3VzJyk7XG4gICAgfVxuICB9XG5cbiAgbm9kZUZyb21JdGVtKCRpdGVtKSB7XG4gICAgY29uc3QgaGludCA9IHRoaXMuaGludHNbJGl0ZW0uZGF0YSgnaW5kZXgnKV07XG4gICAgY29uc3QgaXRlbSA9ICRpdGVtLmRhdGEoJ2l0ZW0nKTtcbiAgICBsZXQgbm9kZSA9IGhpbnQuY29udGVudCA/IGhpbnQuY29udGVudChpdGVtKSA6IGl0ZW07XG4gICAgaWYgKHR5cGVvZiBub2RlID09PSAnc3RyaW5nJykge1xuICAgICAgbm9kZSA9IGRvbS5jcmVhdGVUZXh0KG5vZGUpO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuXG4gIGNyZWF0ZUl0ZW1UZW1wbGF0ZXMoaGludElkeCwgaXRlbXMpIHtcbiAgICBjb25zdCBoaW50ID0gdGhpcy5oaW50c1toaW50SWR4XTtcbiAgICByZXR1cm4gaXRlbXMubWFwKChpdGVtLCBpZHgpID0+IHtcbiAgICAgIGNvbnN0ICRpdGVtID0gJCgnPGRpdiBjbGFzcz1cIm5vdGUtaGludC1pdGVtXCIvPicpO1xuICAgICAgJGl0ZW0uYXBwZW5kKGhpbnQudGVtcGxhdGUgPyBoaW50LnRlbXBsYXRlKGl0ZW0pIDogaXRlbSArICcnKTtcbiAgICAgICRpdGVtLmRhdGEoe1xuICAgICAgICAnaW5kZXgnOiBoaW50SWR4LFxuICAgICAgICAnaXRlbSc6IGl0ZW1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuICRpdGVtO1xuICAgIH0pO1xuICB9XG5cbiAgaGFuZGxlS2V5ZG93bihlKSB7XG4gICAgaWYgKCF0aGlzLiRwb3BvdmVyLmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGUua2V5Q29kZSA9PT0ga2V5LmNvZGUuRU5URVIpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMucmVwbGFjZSgpO1xuICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSBrZXkuY29kZS5VUCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5tb3ZlVXAoKTtcbiAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0ga2V5LmNvZGUuRE9XTikge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5tb3ZlRG93bigpO1xuICAgIH1cbiAgfVxuXG4gIHNlYXJjaEtleXdvcmQoaW5kZXgsIGtleXdvcmQsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgaGludCA9IHRoaXMuaGludHNbaW5kZXhdO1xuICAgIGlmIChoaW50ICYmIGhpbnQubWF0Y2gudGVzdChrZXl3b3JkKSAmJiBoaW50LnNlYXJjaCkge1xuICAgICAgY29uc3QgbWF0Y2hlcyA9IGhpbnQubWF0Y2guZXhlYyhrZXl3b3JkKTtcbiAgICAgIGhpbnQuc2VhcmNoKG1hdGNoZXNbMV0sIGNhbGxiYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG4gIH1cblxuICBjcmVhdGVHcm91cChpZHgsIGtleXdvcmQpIHtcbiAgICBjb25zdCAkZ3JvdXAgPSAkKCc8ZGl2IGNsYXNzPVwibm90ZS1oaW50LWdyb3VwIG5vdGUtaGludC1ncm91cC0nICsgaWR4ICsgJ1wiLz4nKTtcbiAgICB0aGlzLnNlYXJjaEtleXdvcmQoaWR4LCBrZXl3b3JkLCAoaXRlbXMpID0+IHtcbiAgICAgIGl0ZW1zID0gaXRlbXMgfHwgW107XG4gICAgICBpZiAoaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICRncm91cC5odG1sKHRoaXMuY3JlYXRlSXRlbVRlbXBsYXRlcyhpZHgsIGl0ZW1zKSk7XG4gICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuICRncm91cDtcbiAgfVxuXG4gIGhhbmRsZUtleXVwKGUpIHtcbiAgICBpZiAoIWxpc3RzLmNvbnRhaW5zKFtrZXkuY29kZS5FTlRFUiwga2V5LmNvZGUuVVAsIGtleS5jb2RlLkRPV05dLCBlLmtleUNvZGUpKSB7XG4gICAgICBjb25zdCB3b3JkUmFuZ2UgPSB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3IuY3JlYXRlUmFuZ2UnKS5nZXRXb3JkUmFuZ2UoKTtcbiAgICAgIGNvbnN0IGtleXdvcmQgPSB3b3JkUmFuZ2UudG9TdHJpbmcoKTtcbiAgICAgIGlmICh0aGlzLmhpbnRzLmxlbmd0aCAmJiBrZXl3b3JkKSB7XG4gICAgICAgIHRoaXMuJGNvbnRlbnQuZW1wdHkoKTtcblxuICAgICAgICBjb25zdCBibmQgPSBmdW5jLnJlY3QyYm5kKGxpc3RzLmxhc3Qod29yZFJhbmdlLmdldENsaWVudFJlY3RzKCkpKTtcbiAgICAgICAgaWYgKGJuZCkge1xuICAgICAgICAgIHRoaXMuJHBvcG92ZXIuaGlkZSgpO1xuICAgICAgICAgIHRoaXMubGFzdFdvcmRSYW5nZSA9IHdvcmRSYW5nZTtcbiAgICAgICAgICB0aGlzLmhpbnRzLmZvckVhY2goKGhpbnQsIGlkeCkgPT4ge1xuICAgICAgICAgICAgaWYgKGhpbnQubWF0Y2gudGVzdChrZXl3b3JkKSkge1xuICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUdyb3VwKGlkeCwga2V5d29yZCkuYXBwZW5kVG8odGhpcy4kY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy8gc2VsZWN0IGZpcnN0IC5ub3RlLWhpbnQtaXRlbVxuICAgICAgICAgIHRoaXMuJGNvbnRlbnQuZmluZCgnLm5vdGUtaGludC1pdGVtOmZpcnN0JykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgLy8gc2V0IHBvc2l0aW9uIGZvciBwb3BvdmVyIGFmdGVyIGdyb3VwIGlzIGNyZWF0ZWRcbiAgICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT09ICd0b3AnKSB7XG4gICAgICAgICAgICB0aGlzLiRwb3BvdmVyLmNzcyh7XG4gICAgICAgICAgICAgIGxlZnQ6IGJuZC5sZWZ0LFxuICAgICAgICAgICAgICB0b3A6IGJuZC50b3AgLSB0aGlzLiRwb3BvdmVyLm91dGVySGVpZ2h0KCkgLSBQT1BPVkVSX0RJU1RcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiRwb3BvdmVyLmNzcyh7XG4gICAgICAgICAgICAgIGxlZnQ6IGJuZC5sZWZ0LFxuICAgICAgICAgICAgICB0b3A6IGJuZC50b3AgKyBibmQuaGVpZ2h0ICsgUE9QT1ZFUl9ESVNUXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNob3coKSB7XG4gICAgdGhpcy4kcG9wb3Zlci5zaG93KCk7XG4gIH1cblxuICBoaWRlKCkge1xuICAgIHRoaXMuJHBvcG92ZXIuaGlkZSgpO1xuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGZ1bmMgZnJvbSAnLi9jb3JlL2Z1bmMnO1xuaW1wb3J0IGxpc3RzIGZyb20gJy4vY29yZS9saXN0cyc7XG5pbXBvcnQgZG9tIGZyb20gJy4vY29yZS9kb20nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250ZXh0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSAkbm90ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKi9cbiAgY29uc3RydWN0b3IoJG5vdGUsIG9wdGlvbnMpIHtcbiAgICB0aGlzLnVpID0gJC5zdW1tZXJub3RlLnVpO1xuICAgIHRoaXMuJG5vdGUgPSAkbm90ZTtcblxuICAgIHRoaXMubWVtb3MgPSB7fTtcbiAgICB0aGlzLm1vZHVsZXMgPSB7fTtcbiAgICB0aGlzLmxheW91dEluZm8gPSB7fTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgdGhpcy5pbml0aWFsaXplKCk7XG4gIH1cblxuICAvKipcbiAgICogY3JlYXRlIGxheW91dCBhbmQgaW5pdGlhbGl6ZSBtb2R1bGVzIGFuZCBvdGhlciByZXNvdXJjZXNcbiAgICovXG4gIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy5sYXlvdXRJbmZvID0gdGhpcy51aS5jcmVhdGVMYXlvdXQodGhpcy4kbm90ZSwgdGhpcy5vcHRpb25zKTtcbiAgICB0aGlzLl9pbml0aWFsaXplKCk7XG4gICAgdGhpcy4kbm90ZS5oaWRlKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogZGVzdHJveSBtb2R1bGVzIGFuZCBvdGhlciByZXNvdXJjZXMgYW5kIHJlbW92ZSBsYXlvdXRcbiAgICovXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5fZGVzdHJveSgpO1xuICAgIHRoaXMuJG5vdGUucmVtb3ZlRGF0YSgnc3VtbWVybm90ZScpO1xuICAgIHRoaXMudWkucmVtb3ZlTGF5b3V0KHRoaXMuJG5vdGUsIHRoaXMubGF5b3V0SW5mbyk7XG4gIH1cblxuICAvKipcbiAgICogZGVzdG9yeSBtb2R1bGVzIGFuZCBvdGhlciByZXNvdXJjZXMgYW5kIGluaXRpYWxpemUgaXQgYWdhaW5cbiAgICovXG4gIHJlc2V0KCkge1xuICAgIGNvbnN0IGRpc2FibGVkID0gdGhpcy5pc0Rpc2FibGVkKCk7XG4gICAgdGhpcy5jb2RlKGRvbS5lbXB0eVBhcmEpO1xuICAgIHRoaXMuX2Rlc3Ryb3koKTtcbiAgICB0aGlzLl9pbml0aWFsaXplKCk7XG5cbiAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgIHRoaXMuZGlzYWJsZSgpO1xuICAgIH1cbiAgfVxuXG4gIF9pbml0aWFsaXplKCkge1xuICAgIC8vIGFkZCBvcHRpb25hbCBidXR0b25zXG4gICAgY29uc3QgYnV0dG9ucyA9ICQuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMuYnV0dG9ucyk7XG4gICAgT2JqZWN0LmtleXMoYnV0dG9ucykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICB0aGlzLm1lbW8oJ2J1dHRvbi4nICsga2V5LCBidXR0b25zW2tleV0pO1xuICAgIH0pO1xuXG4gICAgY29uc3QgbW9kdWxlcyA9ICQuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMubW9kdWxlcywgJC5zdW1tZXJub3RlLnBsdWdpbnMgfHwge30pO1xuXG4gICAgLy8gYWRkIGFuZCBpbml0aWFsaXplIG1vZHVsZXNcbiAgICBPYmplY3Qua2V5cyhtb2R1bGVzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIHRoaXMubW9kdWxlKGtleSwgbW9kdWxlc1trZXldLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIE9iamVjdC5rZXlzKHRoaXMubW9kdWxlcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICB0aGlzLmluaXRpYWxpemVNb2R1bGUoa2V5KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9kZXN0cm95KCkge1xuICAgIC8vIGRlc3Ryb3kgbW9kdWxlcyB3aXRoIHJldmVyc2VkIG9yZGVyXG4gICAgT2JqZWN0LmtleXModGhpcy5tb2R1bGVzKS5yZXZlcnNlKCkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICB0aGlzLnJlbW92ZU1vZHVsZShrZXkpO1xuICAgIH0pO1xuXG4gICAgT2JqZWN0LmtleXModGhpcy5tZW1vcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICB0aGlzLnJlbW92ZU1lbW8oa2V5KTtcbiAgICB9KTtcbiAgICAvLyB0cmlnZ2VyIGN1c3RvbSBvbkRlc3Ryb3kgY2FsbGJhY2tcbiAgICB0aGlzLnRyaWdnZXJFdmVudCgnZGVzdHJveScsIHRoaXMpO1xuICB9XG5cbiAgY29kZShodG1sKSB7XG4gICAgY29uc3QgaXNBY3RpdmF0ZWQgPSB0aGlzLmludm9rZSgnY29kZXZpZXcuaXNBY3RpdmF0ZWQnKTtcblxuICAgIGlmIChodG1sID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuaW52b2tlKCdjb2Rldmlldy5zeW5jJyk7XG4gICAgICByZXR1cm4gaXNBY3RpdmF0ZWQgPyB0aGlzLmxheW91dEluZm8uY29kYWJsZS52YWwoKSA6IHRoaXMubGF5b3V0SW5mby5lZGl0YWJsZS5odG1sKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpc0FjdGl2YXRlZCkge1xuICAgICAgICB0aGlzLmxheW91dEluZm8uY29kYWJsZS52YWwoaHRtbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxheW91dEluZm8uZWRpdGFibGUuaHRtbChodG1sKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuJG5vdGUudmFsKGh0bWwpO1xuICAgICAgdGhpcy50cmlnZ2VyRXZlbnQoJ2NoYW5nZScsIGh0bWwpO1xuICAgIH1cbiAgfVxuXG4gIGlzRGlzYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMubGF5b3V0SW5mby5lZGl0YWJsZS5hdHRyKCdjb250ZW50ZWRpdGFibGUnKSA9PT0gJ2ZhbHNlJztcbiAgfVxuXG4gIGVuYWJsZSgpIHtcbiAgICB0aGlzLmxheW91dEluZm8uZWRpdGFibGUuYXR0cignY29udGVudGVkaXRhYmxlJywgdHJ1ZSk7XG4gICAgdGhpcy5pbnZva2UoJ3Rvb2xiYXIuYWN0aXZhdGUnLCB0cnVlKTtcbiAgICB0aGlzLnRyaWdnZXJFdmVudCgnZGlzYWJsZScsIGZhbHNlKTtcbiAgfVxuXG4gIGRpc2FibGUoKSB7XG4gICAgLy8gY2xvc2UgY29kZXZpZXcgaWYgY29kZXZpZXcgaXMgb3BlbmRcbiAgICBpZiAodGhpcy5pbnZva2UoJ2NvZGV2aWV3LmlzQWN0aXZhdGVkJykpIHtcbiAgICAgIHRoaXMuaW52b2tlKCdjb2Rldmlldy5kZWFjdGl2YXRlJyk7XG4gICAgfVxuICAgIHRoaXMubGF5b3V0SW5mby5lZGl0YWJsZS5hdHRyKCdjb250ZW50ZWRpdGFibGUnLCBmYWxzZSk7XG4gICAgdGhpcy5pbnZva2UoJ3Rvb2xiYXIuZGVhY3RpdmF0ZScsIHRydWUpO1xuXG4gICAgdGhpcy50cmlnZ2VyRXZlbnQoJ2Rpc2FibGUnLCB0cnVlKTtcbiAgfVxuXG4gIHRyaWdnZXJFdmVudCgpIHtcbiAgICBjb25zdCBuYW1lc3BhY2UgPSBsaXN0cy5oZWFkKGFyZ3VtZW50cyk7XG4gICAgY29uc3QgYXJncyA9IGxpc3RzLnRhaWwobGlzdHMuZnJvbShhcmd1bWVudHMpKTtcblxuICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5vcHRpb25zLmNhbGxiYWNrc1tmdW5jLm5hbWVzcGFjZVRvQ2FtZWwobmFtZXNwYWNlLCAnb24nKV07XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICBjYWxsYmFjay5hcHBseSh0aGlzLiRub3RlWzBdLCBhcmdzKTtcbiAgICB9XG4gICAgdGhpcy4kbm90ZS50cmlnZ2VyKCdzdW1tZXJub3RlLicgKyBuYW1lc3BhY2UsIGFyZ3MpO1xuICB9XG5cbiAgaW5pdGlhbGl6ZU1vZHVsZShrZXkpIHtcbiAgICBjb25zdCBtb2R1bGUgPSB0aGlzLm1vZHVsZXNba2V5XTtcbiAgICBtb2R1bGUuc2hvdWxkSW5pdGlhbGl6ZSA9IG1vZHVsZS5zaG91bGRJbml0aWFsaXplIHx8IGZ1bmMub2s7XG4gICAgaWYgKCFtb2R1bGUuc2hvdWxkSW5pdGlhbGl6ZSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gaW5pdGlhbGl6ZSBtb2R1bGVcbiAgICBpZiAobW9kdWxlLmluaXRpYWxpemUpIHtcbiAgICAgIG1vZHVsZS5pbml0aWFsaXplKCk7XG4gICAgfVxuXG4gICAgLy8gYXR0YWNoIGV2ZW50c1xuICAgIGlmIChtb2R1bGUuZXZlbnRzKSB7XG4gICAgICBkb20uYXR0YWNoRXZlbnRzKHRoaXMuJG5vdGUsIG1vZHVsZS5ldmVudHMpO1xuICAgIH1cbiAgfVxuXG4gIG1vZHVsZShrZXksIE1vZHVsZUNsYXNzLCB3aXRob3V0SW50aWFsaXplKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHJldHVybiB0aGlzLm1vZHVsZXNba2V5XTtcbiAgICB9XG5cbiAgICB0aGlzLm1vZHVsZXNba2V5XSA9IG5ldyBNb2R1bGVDbGFzcyh0aGlzKTtcblxuICAgIGlmICghd2l0aG91dEludGlhbGl6ZSkge1xuICAgICAgdGhpcy5pbml0aWFsaXplTW9kdWxlKGtleSk7XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlTW9kdWxlKGtleSkge1xuICAgIGNvbnN0IG1vZHVsZSA9IHRoaXMubW9kdWxlc1trZXldO1xuICAgIGlmIChtb2R1bGUuc2hvdWxkSW5pdGlhbGl6ZSgpKSB7XG4gICAgICBpZiAobW9kdWxlLmV2ZW50cykge1xuICAgICAgICBkb20uZGV0YWNoRXZlbnRzKHRoaXMuJG5vdGUsIG1vZHVsZS5ldmVudHMpO1xuICAgICAgfVxuXG4gICAgICBpZiAobW9kdWxlLmRlc3Ryb3kpIHtcbiAgICAgICAgbW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkZWxldGUgdGhpcy5tb2R1bGVzW2tleV07XG4gIH1cblxuICBtZW1vKGtleSwgb2JqKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbW9zW2tleV07XG4gICAgfVxuICAgIHRoaXMubWVtb3Nba2V5XSA9IG9iajtcbiAgfVxuXG4gIHJlbW92ZU1lbW8oa2V5KSB7XG4gICAgaWYgKHRoaXMubWVtb3Nba2V5XSAmJiB0aGlzLm1lbW9zW2tleV0uZGVzdHJveSkge1xuICAgICAgdGhpcy5tZW1vc1trZXldLmRlc3Ryb3koKTtcbiAgICB9XG5cbiAgICBkZWxldGUgdGhpcy5tZW1vc1trZXldO1xuICB9XG5cbiAgLyoqXG4gICAqIFNvbWUgYnV0dG9ucyBuZWVkIHRvIGNoYW5nZSB0aGVpciB2aXN1YWwgc3R5bGUgaW1tZWRpYXRlbHkgb25jZSB0aGV5IGdldCBwcmVzc2VkXG4gICAqL1xuICBjcmVhdGVJbnZva2VIYW5kbGVyQW5kVXBkYXRlU3RhdGUobmFtZXNwYWNlLCB2YWx1ZSkge1xuICAgIHJldHVybiAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuY3JlYXRlSW52b2tlSGFuZGxlcihuYW1lc3BhY2UsIHZhbHVlKShldmVudCk7XG4gICAgICB0aGlzLmludm9rZSgnYnV0dG9ucy51cGRhdGVDdXJyZW50U3R5bGUnKTtcbiAgICB9O1xuICB9XG5cbiAgY3JlYXRlSW52b2tlSGFuZGxlcihuYW1lc3BhY2UsIHZhbHVlKSB7XG4gICAgcmV0dXJuIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0ICR0YXJnZXQgPSAkKGV2ZW50LnRhcmdldCk7XG4gICAgICB0aGlzLmludm9rZShuYW1lc3BhY2UsIHZhbHVlIHx8ICR0YXJnZXQuY2xvc2VzdCgnW2RhdGEtdmFsdWVdJykuZGF0YSgndmFsdWUnKSwgJHRhcmdldCk7XG4gICAgfTtcbiAgfVxuXG4gIGludm9rZSgpIHtcbiAgICBjb25zdCBuYW1lc3BhY2UgPSBsaXN0cy5oZWFkKGFyZ3VtZW50cyk7XG4gICAgY29uc3QgYXJncyA9IGxpc3RzLnRhaWwobGlzdHMuZnJvbShhcmd1bWVudHMpKTtcblxuICAgIGNvbnN0IHNwbGl0cyA9IG5hbWVzcGFjZS5zcGxpdCgnLicpO1xuICAgIGNvbnN0IGhhc1NlcGFyYXRvciA9IHNwbGl0cy5sZW5ndGggPiAxO1xuICAgIGNvbnN0IG1vZHVsZU5hbWUgPSBoYXNTZXBhcmF0b3IgJiYgbGlzdHMuaGVhZChzcGxpdHMpO1xuICAgIGNvbnN0IG1ldGhvZE5hbWUgPSBoYXNTZXBhcmF0b3IgPyBsaXN0cy5sYXN0KHNwbGl0cykgOiBsaXN0cy5oZWFkKHNwbGl0cyk7XG5cbiAgICBjb25zdCBtb2R1bGUgPSB0aGlzLm1vZHVsZXNbbW9kdWxlTmFtZSB8fCAnZWRpdG9yJ107XG4gICAgaWYgKCFtb2R1bGVOYW1lICYmIHRoaXNbbWV0aG9kTmFtZV0pIHtcbiAgICAgIHJldHVybiB0aGlzW21ldGhvZE5hbWVdLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH0gZWxzZSBpZiAobW9kdWxlICYmIG1vZHVsZVttZXRob2ROYW1lXSAmJiBtb2R1bGUuc2hvdWxkSW5pdGlhbGl6ZSgpKSB7XG4gICAgICByZXR1cm4gbW9kdWxlW21ldGhvZE5hbWVdLmFwcGx5KG1vZHVsZSwgYXJncyk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGVudiBmcm9tICcuL2Jhc2UvY29yZS9lbnYnO1xuaW1wb3J0IGxpc3RzIGZyb20gJy4vYmFzZS9jb3JlL2xpc3RzJztcbmltcG9ydCBDb250ZXh0IGZyb20gJy4vYmFzZS9Db250ZXh0JztcblxuJC5mbi5leHRlbmQoe1xuICAvKipcbiAgICogU3VtbWVybm90ZSBBUElcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfVxuICAgKiBAcmV0dXJuIHt0aGlzfVxuICAgKi9cbiAgc3VtbWVybm90ZTogZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgdHlwZSA9ICQudHlwZShsaXN0cy5oZWFkKGFyZ3VtZW50cykpO1xuICAgIGNvbnN0IGlzRXh0ZXJuYWxBUElDYWxsZWQgPSB0eXBlID09PSAnc3RyaW5nJztcbiAgICBjb25zdCBoYXNJbml0T3B0aW9ucyA9IHR5cGUgPT09ICdvYmplY3QnO1xuXG4gICAgY29uc3Qgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCAkLnN1bW1lcm5vdGUub3B0aW9ucywgaGFzSW5pdE9wdGlvbnMgPyBsaXN0cy5oZWFkKGFyZ3VtZW50cykgOiB7fSk7XG5cbiAgICAvLyBVcGRhdGUgb3B0aW9uc1xuICAgIG9wdGlvbnMubGFuZ0luZm8gPSAkLmV4dGVuZCh0cnVlLCB7fSwgJC5zdW1tZXJub3RlLmxhbmdbJ2VuLVVTJ10sICQuc3VtbWVybm90ZS5sYW5nW29wdGlvbnMubGFuZ10pO1xuICAgIG9wdGlvbnMuaWNvbnMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgJC5zdW1tZXJub3RlLm9wdGlvbnMuaWNvbnMsIG9wdGlvbnMuaWNvbnMpO1xuICAgIG9wdGlvbnMudG9vbHRpcCA9IG9wdGlvbnMudG9vbHRpcCA9PT0gJ2F1dG8nID8gIWVudi5pc1N1cHBvcnRUb3VjaCA6IG9wdGlvbnMudG9vbHRpcDtcblxuICAgIHRoaXMuZWFjaCgoaWR4LCBub3RlKSA9PiB7XG4gICAgICBjb25zdCAkbm90ZSA9ICQobm90ZSk7XG4gICAgICBpZiAoISRub3RlLmRhdGEoJ3N1bW1lcm5vdGUnKSkge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gbmV3IENvbnRleHQoJG5vdGUsIG9wdGlvbnMpO1xuICAgICAgICAkbm90ZS5kYXRhKCdzdW1tZXJub3RlJywgY29udGV4dCk7XG4gICAgICAgICRub3RlLmRhdGEoJ3N1bW1lcm5vdGUnKS50cmlnZ2VyRXZlbnQoJ2luaXQnLCBjb250ZXh0LmxheW91dEluZm8pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgJG5vdGUgPSB0aGlzLmZpcnN0KCk7XG4gICAgaWYgKCRub3RlLmxlbmd0aCkge1xuICAgICAgY29uc3QgY29udGV4dCA9ICRub3RlLmRhdGEoJ3N1bW1lcm5vdGUnKTtcbiAgICAgIGlmIChpc0V4dGVybmFsQVBJQ2FsbGVkKSB7XG4gICAgICAgIHJldHVybiBjb250ZXh0Lmludm9rZS5hcHBseShjb250ZXh0LCBsaXN0cy5mcm9tKGFyZ3VtZW50cykpO1xuICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmZvY3VzKSB7XG4gICAgICAgIGNvbnRleHQuaW52b2tlKCdlZGl0b3IuZm9jdXMnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxufSk7XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IHVpIGZyb20gJy4uL2JzMy91aSc7XG5pbXBvcnQgZG9tIGZyb20gJy4uL2Jhc2UvY29yZS9kb20nO1xuaW1wb3J0ICcuLi9iYXNlL3N1bW1lcm5vdGUtZW4tVVMnO1xuaW1wb3J0IEVkaXRvciBmcm9tICcuLi9iYXNlL21vZHVsZS9FZGl0b3InO1xuaW1wb3J0IENsaXBib2FyZCBmcm9tICcuLi9iYXNlL21vZHVsZS9DbGlwYm9hcmQnO1xuaW1wb3J0IERyb3B6b25lIGZyb20gJy4uL2Jhc2UvbW9kdWxlL0Ryb3B6b25lJztcbmltcG9ydCBDb2RldmlldyBmcm9tICcuLi9iYXNlL21vZHVsZS9Db2Rldmlldyc7XG5pbXBvcnQgU3RhdHVzYmFyIGZyb20gJy4uL2Jhc2UvbW9kdWxlL1N0YXR1c2Jhcic7XG5pbXBvcnQgRnVsbHNjcmVlbiBmcm9tICcuLi9iYXNlL21vZHVsZS9GdWxsc2NyZWVuJztcbmltcG9ydCBIYW5kbGUgZnJvbSAnLi4vYmFzZS9tb2R1bGUvSGFuZGxlJztcbmltcG9ydCBBdXRvTGluayBmcm9tICcuLi9iYXNlL21vZHVsZS9BdXRvTGluayc7XG5pbXBvcnQgQXV0b1N5bmMgZnJvbSAnLi4vYmFzZS9tb2R1bGUvQXV0b1N5bmMnO1xuaW1wb3J0IFBsYWNlaG9sZGVyIGZyb20gJy4uL2Jhc2UvbW9kdWxlL1BsYWNlaG9sZGVyJztcbmltcG9ydCBCdXR0b25zIGZyb20gJy4uL2Jhc2UvbW9kdWxlL0J1dHRvbnMnO1xuaW1wb3J0IFRvb2xiYXIgZnJvbSAnLi4vYmFzZS9tb2R1bGUvVG9vbGJhcic7XG5pbXBvcnQgTGlua0RpYWxvZyBmcm9tICcuLi9iYXNlL21vZHVsZS9MaW5rRGlhbG9nJztcbmltcG9ydCBMaW5rUG9wb3ZlciBmcm9tICcuLi9iYXNlL21vZHVsZS9MaW5rUG9wb3Zlcic7XG5pbXBvcnQgSW1hZ2VEaWFsb2cgZnJvbSAnLi4vYmFzZS9tb2R1bGUvSW1hZ2VEaWFsb2cnO1xuaW1wb3J0IEltYWdlUG9wb3ZlciBmcm9tICcuLi9iYXNlL21vZHVsZS9JbWFnZVBvcG92ZXInO1xuaW1wb3J0IFRhYmxlUG9wb3ZlciBmcm9tICcuLi9iYXNlL21vZHVsZS9UYWJsZVBvcG92ZXInO1xuaW1wb3J0IFZpZGVvRGlhbG9nIGZyb20gJy4uL2Jhc2UvbW9kdWxlL1ZpZGVvRGlhbG9nJztcbmltcG9ydCBIZWxwRGlhbG9nIGZyb20gJy4uL2Jhc2UvbW9kdWxlL0hlbHBEaWFsb2cnO1xuaW1wb3J0IEFpclBvcG92ZXIgZnJvbSAnLi4vYmFzZS9tb2R1bGUvQWlyUG9wb3Zlcic7XG5pbXBvcnQgSGludFBvcG92ZXIgZnJvbSAnLi4vYmFzZS9tb2R1bGUvSGludFBvcG92ZXInO1xuXG4kLnN1bW1lcm5vdGUgPSAkLmV4dGVuZCgkLnN1bW1lcm5vdGUsIHtcbiAgdmVyc2lvbjogJ0BAVkVSU0lPTkBAJyxcbiAgdWk6IHVpLFxuICBkb206IGRvbSxcblxuICBwbHVnaW5zOiB7fSxcblxuICBvcHRpb25zOiB7XG4gICAgbW9kdWxlczoge1xuICAgICAgJ2VkaXRvcic6IEVkaXRvcixcbiAgICAgICdjbGlwYm9hcmQnOiBDbGlwYm9hcmQsXG4gICAgICAnZHJvcHpvbmUnOiBEcm9wem9uZSxcbiAgICAgICdjb2Rldmlldyc6IENvZGV2aWV3LFxuICAgICAgJ3N0YXR1c2Jhcic6IFN0YXR1c2JhcixcbiAgICAgICdmdWxsc2NyZWVuJzogRnVsbHNjcmVlbixcbiAgICAgICdoYW5kbGUnOiBIYW5kbGUsXG4gICAgICAvLyBGSVhNRTogSGludFBvcG92ZXIgbXVzdCBiZSBmcm9udCBvZiBhdXRvbGlua1xuICAgICAgLy8gIC0gU2NyaXB0IGVycm9yIGFib3V0IHJhbmdlIHdoZW4gRW50ZXIga2V5IGlzIHByZXNzZWQgb24gaGludCBwb3BvdmVyXG4gICAgICAnaGludFBvcG92ZXInOiBIaW50UG9wb3ZlcixcbiAgICAgICdhdXRvTGluayc6IEF1dG9MaW5rLFxuICAgICAgJ2F1dG9TeW5jJzogQXV0b1N5bmMsXG4gICAgICAncGxhY2Vob2xkZXInOiBQbGFjZWhvbGRlcixcbiAgICAgICdidXR0b25zJzogQnV0dG9ucyxcbiAgICAgICd0b29sYmFyJzogVG9vbGJhcixcbiAgICAgICdsaW5rRGlhbG9nJzogTGlua0RpYWxvZyxcbiAgICAgICdsaW5rUG9wb3Zlcic6IExpbmtQb3BvdmVyLFxuICAgICAgJ2ltYWdlRGlhbG9nJzogSW1hZ2VEaWFsb2csXG4gICAgICAnaW1hZ2VQb3BvdmVyJzogSW1hZ2VQb3BvdmVyLFxuICAgICAgJ3RhYmxlUG9wb3Zlcic6IFRhYmxlUG9wb3ZlcixcbiAgICAgICd2aWRlb0RpYWxvZyc6IFZpZGVvRGlhbG9nLFxuICAgICAgJ2hlbHBEaWFsb2cnOiBIZWxwRGlhbG9nLFxuICAgICAgJ2FpclBvcG92ZXInOiBBaXJQb3BvdmVyXG4gICAgfSxcblxuICAgIGJ1dHRvbnM6IHt9LFxuXG4gICAgbGFuZzogJ2VuLVVTJyxcblxuICAgIGZvbGxvd2luZ1Rvb2xiYXI6IHRydWUsXG4gICAgb3RoZXJTdGF0aWNCYXI6ICcnLFxuXG4gICAgLy8gdG9vbGJhclxuICAgIHRvb2xiYXI6IFtcbiAgICAgIFsnc3R5bGUnLCBbJ3N0eWxlJ11dLFxuICAgICAgWydmb250JywgWydib2xkJywgJ3VuZGVybGluZScsICdjbGVhciddXSxcbiAgICAgIFsnZm9udG5hbWUnLCBbJ2ZvbnRuYW1lJ11dLFxuICAgICAgWydjb2xvcicsIFsnY29sb3InXV0sXG4gICAgICBbJ3BhcmEnLCBbJ3VsJywgJ29sJywgJ3BhcmFncmFwaCddXSxcbiAgICAgIFsndGFibGUnLCBbJ3RhYmxlJ11dLFxuICAgICAgWydpbnNlcnQnLCBbJ2xpbmsnLCAncGljdHVyZScsICd2aWRlbyddXSxcbiAgICAgIFsndmlldycsIFsnZnVsbHNjcmVlbicsICdjb2RldmlldycsICdoZWxwJ11dXG4gICAgXSxcblxuICAgIC8vIHBvcG92ZXJcbiAgICBwb3BhdG1vdXNlOiB0cnVlLFxuICAgIHBvcG92ZXI6IHtcbiAgICAgIGltYWdlOiBbXG4gICAgICAgIFsnaW1hZ2VzaXplJywgWydpbWFnZVNpemUxMDAnLCAnaW1hZ2VTaXplNTAnLCAnaW1hZ2VTaXplMjUnXV0sXG4gICAgICAgIFsnZmxvYXQnLCBbJ2Zsb2F0TGVmdCcsICdmbG9hdFJpZ2h0JywgJ2Zsb2F0Tm9uZSddXSxcbiAgICAgICAgWydyZW1vdmUnLCBbJ3JlbW92ZU1lZGlhJ11dXG4gICAgICBdLFxuICAgICAgbGluazogW1xuICAgICAgICBbJ2xpbmsnLCBbJ2xpbmtEaWFsb2dTaG93JywgJ3VubGluayddXVxuICAgICAgXSxcbiAgICAgIHRhYmxlOiBbXG4gICAgICAgIFsnYWRkJywgWydhZGRSb3dEb3duJywgJ2FkZFJvd1VwJywgJ2FkZENvbExlZnQnLCAnYWRkQ29sUmlnaHQnXV0sXG4gICAgICAgIFsnZGVsZXRlJywgWydkZWxldGVSb3cnLCAnZGVsZXRlQ29sJywgJ2RlbGV0ZVRhYmxlJ11dXG4gICAgICBdLFxuICAgICAgYWlyOiBbXG4gICAgICAgIFsnY29sb3InLCBbJ2NvbG9yJ11dLFxuICAgICAgICBbJ2ZvbnQnLCBbJ2JvbGQnLCAndW5kZXJsaW5lJywgJ2NsZWFyJ11dLFxuICAgICAgICBbJ3BhcmEnLCBbJ3VsJywgJ3BhcmFncmFwaCddXSxcbiAgICAgICAgWyd0YWJsZScsIFsndGFibGUnXV0sXG4gICAgICAgIFsnaW5zZXJ0JywgWydsaW5rJywgJ3BpY3R1cmUnXV1cbiAgICAgIF1cbiAgICB9LFxuXG4gICAgLy8gYWlyIG1vZGU6IGlubGluZSBlZGl0b3JcbiAgICBhaXJNb2RlOiBmYWxzZSxcblxuICAgIHdpZHRoOiBudWxsLFxuICAgIGhlaWdodDogbnVsbCxcbiAgICBsaW5rVGFyZ2V0Qmxhbms6IHRydWUsXG5cbiAgICBmb2N1czogZmFsc2UsXG4gICAgdGFiU2l6ZTogNCxcbiAgICBzdHlsZVdpdGhTcGFuOiB0cnVlLFxuICAgIHNob3J0Y3V0czogdHJ1ZSxcbiAgICB0ZXh0YXJlYUF1dG9TeW5jOiB0cnVlLFxuICAgIGhpbnREaXJlY3Rpb246ICdib3R0b20nLFxuICAgIHRvb2x0aXA6ICdhdXRvJyxcbiAgICBjb250YWluZXI6ICdib2R5JyxcbiAgICBtYXhUZXh0TGVuZ3RoOiAwLFxuXG4gICAgc3R5bGVUYWdzOiBbJ3AnLCAnYmxvY2txdW90ZScsICdwcmUnLCAnaDEnLCAnaDInLCAnaDMnLCAnaDQnLCAnaDUnLCAnaDYnXSxcblxuICAgIGZvbnROYW1lczogW1xuICAgICAgJ0FyaWFsJywgJ0FyaWFsIEJsYWNrJywgJ0NvbWljIFNhbnMgTVMnLCAnQ291cmllciBOZXcnLFxuICAgICAgJ0hlbHZldGljYSBOZXVlJywgJ0hlbHZldGljYScsICdJbXBhY3QnLCAnTHVjaWRhIEdyYW5kZScsXG4gICAgICAnVGFob21hJywgJ1RpbWVzIE5ldyBSb21hbicsICdWZXJkYW5hJ1xuICAgIF0sXG5cbiAgICBmb250U2l6ZXM6IFsnOCcsICc5JywgJzEwJywgJzExJywgJzEyJywgJzE0JywgJzE4JywgJzI0JywgJzM2J10sXG5cbiAgICAvLyBwYWxsZXRlIGNvbG9ycyhuIHggbilcbiAgICBjb2xvcnM6IFtcbiAgICAgIFsnIzAwMDAwMCcsICcjNDI0MjQyJywgJyM2MzYzNjMnLCAnIzlDOUM5NCcsICcjQ0VDNkNFJywgJyNFRkVGRUYnLCAnI0Y3RjdGNycsICcjRkZGRkZGJ10sXG4gICAgICBbJyNGRjAwMDAnLCAnI0ZGOUMwMCcsICcjRkZGRjAwJywgJyMwMEZGMDAnLCAnIzAwRkZGRicsICcjMDAwMEZGJywgJyM5QzAwRkYnLCAnI0ZGMDBGRiddLFxuICAgICAgWycjRjdDNkNFJywgJyNGRkU3Q0UnLCAnI0ZGRUZDNicsICcjRDZFRkQ2JywgJyNDRURFRTcnLCAnI0NFRTdGNycsICcjRDZENkU3JywgJyNFN0Q2REUnXSxcbiAgICAgIFsnI0U3OUM5QycsICcjRkZDNjlDJywgJyNGRkU3OUMnLCAnI0I1RDZBNScsICcjQTVDNkNFJywgJyM5Q0M2RUYnLCAnI0I1QTVENicsICcjRDZBNUJEJ10sXG4gICAgICBbJyNFNzYzNjMnLCAnI0Y3QUQ2QicsICcjRkZENjYzJywgJyM5NEJEN0InLCAnIzczQTVBRCcsICcjNkJBRERFJywgJyM4QzdCQzYnLCAnI0M2N0JBNSddLFxuICAgICAgWycjQ0UwMDAwJywgJyNFNzk0MzknLCAnI0VGQzYzMScsICcjNkJBNTRBJywgJyM0QTdCOEMnLCAnIzM5ODRDNicsICcjNjM0QUE1JywgJyNBNTRBN0InXSxcbiAgICAgIFsnIzlDMDAwMCcsICcjQjU2MzA4JywgJyNCRDk0MDAnLCAnIzM5N0IyMScsICcjMTA0QTVBJywgJyMwODUyOTQnLCAnIzMxMTg3MycsICcjNzMxODQyJ10sXG4gICAgICBbJyM2MzAwMDAnLCAnIzdCMzkwMCcsICcjODQ2MzAwJywgJyMyOTUyMTgnLCAnIzA4MzEzOScsICcjMDAzMTYzJywgJyMyMTEwNEEnLCAnIzRBMTAzMSddXG4gICAgXSxcblxuICAgIC8vIGh0dHA6Ly9jaGlyLmFnL3Byb2plY3RzL25hbWUtdGhhdC1jb2xvci9cbiAgICBjb2xvcnNOYW1lOiBbXG4gICAgICBbJ0JsYWNrJywgJ1R1bmRvcmEnLCAnRG92ZSBHcmF5JywgJ1N0YXIgRHVzdCcsICdQYWxlIFNsYXRlJywgJ0dhbGxlcnknLCAnQWxhYmFzdGVyJywgJ1doaXRlJ10sXG4gICAgICBbJ1JlZCcsICdPcmFuZ2UgUGVlbCcsICdZZWxsb3cnLCAnR3JlZW4nLCAnQ3lhbicsICdCbHVlJywgJ0VsZWN0cmljIFZpb2xldCcsICdNYWdlbnRhJ10sXG4gICAgICBbJ0F6YWxlYScsICdLYXJyeScsICdFZ2cgV2hpdGUnLCAnWmFuYWgnLCAnQm90dGljZWxsaScsICdUcm9waWNhbCBCbHVlJywgJ01pc2Noa2EnLCAnVHdpbGlnaHQnXSxcbiAgICAgIFsnVG9ueXMgUGluaycsICdQZWFjaCBPcmFuZ2UnLCAnQ3JlYW0gQnJ1bGVlJywgJ1Nwcm91dCcsICdDYXNwZXInLCAnUGVyYW5vJywgJ0NvbGQgUHVycGxlJywgJ0NhcmV5cyBQaW5rJ10sXG4gICAgICBbJ01hbmR5JywgJ1JhamFoJywgJ0RhbmRlbGlvbicsICdPbGl2aW5lJywgJ0d1bGYgU3RyZWFtJywgJ1Zpa2luZycsICdCbHVlIE1hcmd1ZXJpdGUnLCAnUHVjZSddLFxuICAgICAgWydHdWFyZHNtYW4gUmVkJywgJ0ZpcmUgQnVzaCcsICdHb2xkZW4gRHJlYW0nLCAnQ2hlbHNlYSBDdWN1bWJlcicsICdTbWFsdCBCbHVlJywgJ0Jvc3RvbiBCbHVlJywgJ0J1dHRlcmZseSBCdXNoJywgJ0NhZGlsbGFjJ10sXG4gICAgICBbJ1NhbmdyaWEnLCAnTWFpIFRhaScsICdCdWRkaGEgR29sZCcsICdGb3Jlc3QgR3JlZW4nLCAnRWRlbicsICdWZW5pY2UgQmx1ZScsICdNZXRlb3JpdGUnLCAnQ2xhcmV0J10sXG4gICAgICBbJ1Jvc2V3b29kJywgJ0Npbm5hbW9uJywgJ09saXZlJywgJ1BhcnNsZXknLCAnVGliZXInLCAnTWlkbmlnaHQgQmx1ZScsICdWYWxlbnRpbm8nLCAnTG91bG91J11cbiAgICBdLFxuXG4gICAgbGluZUhlaWdodHM6IFsnMS4wJywgJzEuMicsICcxLjQnLCAnMS41JywgJzEuNicsICcxLjgnLCAnMi4wJywgJzMuMCddLFxuXG4gICAgdGFibGVDbGFzc05hbWU6ICd0YWJsZSB0YWJsZS1ib3JkZXJlZCcsXG5cbiAgICBpbnNlcnRUYWJsZU1heFNpemU6IHtcbiAgICAgIGNvbDogMTAsXG4gICAgICByb3c6IDEwXG4gICAgfSxcblxuICAgIGRpYWxvZ3NJbkJvZHk6IGZhbHNlLFxuICAgIGRpYWxvZ3NGYWRlOiBmYWxzZSxcblxuICAgIG1heGltdW1JbWFnZUZpbGVTaXplOiBudWxsLFxuXG4gICAgY2FsbGJhY2tzOiB7XG4gICAgICBvbkluaXQ6IG51bGwsXG4gICAgICBvbkZvY3VzOiBudWxsLFxuICAgICAgb25CbHVyOiBudWxsLFxuICAgICAgb25CbHVyQ29kZXZpZXc6IG51bGwsXG4gICAgICBvbkVudGVyOiBudWxsLFxuICAgICAgb25LZXl1cDogbnVsbCxcbiAgICAgIG9uS2V5ZG93bjogbnVsbCxcbiAgICAgIG9uSW1hZ2VVcGxvYWQ6IG51bGwsXG4gICAgICBvbkltYWdlVXBsb2FkRXJyb3I6IG51bGxcbiAgICB9LFxuXG4gICAgY29kZW1pcnJvcjoge1xuICAgICAgbW9kZTogJ3RleHQvaHRtbCcsXG4gICAgICBodG1sTW9kZTogdHJ1ZSxcbiAgICAgIGxpbmVOdW1iZXJzOiB0cnVlXG4gICAgfSxcblxuICAgIGtleU1hcDoge1xuICAgICAgcGM6IHtcbiAgICAgICAgJ0VOVEVSJzogJ2luc2VydFBhcmFncmFwaCcsXG4gICAgICAgICdDVFJMK1onOiAndW5kbycsXG4gICAgICAgICdDVFJMK1knOiAncmVkbycsXG4gICAgICAgICdUQUInOiAndGFiJyxcbiAgICAgICAgJ1NISUZUK1RBQic6ICd1bnRhYicsXG4gICAgICAgICdDVFJMK0InOiAnYm9sZCcsXG4gICAgICAgICdDVFJMK0knOiAnaXRhbGljJyxcbiAgICAgICAgJ0NUUkwrVSc6ICd1bmRlcmxpbmUnLFxuICAgICAgICAnQ1RSTCtTSElGVCtTJzogJ3N0cmlrZXRocm91Z2gnLFxuICAgICAgICAnQ1RSTCtCQUNLU0xBU0gnOiAncmVtb3ZlRm9ybWF0JyxcbiAgICAgICAgJ0NUUkwrU0hJRlQrTCc6ICdqdXN0aWZ5TGVmdCcsXG4gICAgICAgICdDVFJMK1NISUZUK0UnOiAnanVzdGlmeUNlbnRlcicsXG4gICAgICAgICdDVFJMK1NISUZUK1InOiAnanVzdGlmeVJpZ2h0JyxcbiAgICAgICAgJ0NUUkwrU0hJRlQrSic6ICdqdXN0aWZ5RnVsbCcsXG4gICAgICAgICdDVFJMK1NISUZUK05VTTcnOiAnaW5zZXJ0VW5vcmRlcmVkTGlzdCcsXG4gICAgICAgICdDVFJMK1NISUZUK05VTTgnOiAnaW5zZXJ0T3JkZXJlZExpc3QnLFxuICAgICAgICAnQ1RSTCtMRUZUQlJBQ0tFVCc6ICdvdXRkZW50JyxcbiAgICAgICAgJ0NUUkwrUklHSFRCUkFDS0VUJzogJ2luZGVudCcsXG4gICAgICAgICdDVFJMK05VTTAnOiAnZm9ybWF0UGFyYScsXG4gICAgICAgICdDVFJMK05VTTEnOiAnZm9ybWF0SDEnLFxuICAgICAgICAnQ1RSTCtOVU0yJzogJ2Zvcm1hdEgyJyxcbiAgICAgICAgJ0NUUkwrTlVNMyc6ICdmb3JtYXRIMycsXG4gICAgICAgICdDVFJMK05VTTQnOiAnZm9ybWF0SDQnLFxuICAgICAgICAnQ1RSTCtOVU01JzogJ2Zvcm1hdEg1JyxcbiAgICAgICAgJ0NUUkwrTlVNNic6ICdmb3JtYXRINicsXG4gICAgICAgICdDVFJMK0VOVEVSJzogJ2luc2VydEhvcml6b250YWxSdWxlJyxcbiAgICAgICAgJ0NUUkwrSyc6ICdsaW5rRGlhbG9nLnNob3cnXG4gICAgICB9LFxuXG4gICAgICBtYWM6IHtcbiAgICAgICAgJ0VOVEVSJzogJ2luc2VydFBhcmFncmFwaCcsXG4gICAgICAgICdDTUQrWic6ICd1bmRvJyxcbiAgICAgICAgJ0NNRCtTSElGVCtaJzogJ3JlZG8nLFxuICAgICAgICAnVEFCJzogJ3RhYicsXG4gICAgICAgICdTSElGVCtUQUInOiAndW50YWInLFxuICAgICAgICAnQ01EK0InOiAnYm9sZCcsXG4gICAgICAgICdDTUQrSSc6ICdpdGFsaWMnLFxuICAgICAgICAnQ01EK1UnOiAndW5kZXJsaW5lJyxcbiAgICAgICAgJ0NNRCtTSElGVCtTJzogJ3N0cmlrZXRocm91Z2gnLFxuICAgICAgICAnQ01EK0JBQ0tTTEFTSCc6ICdyZW1vdmVGb3JtYXQnLFxuICAgICAgICAnQ01EK1NISUZUK0wnOiAnanVzdGlmeUxlZnQnLFxuICAgICAgICAnQ01EK1NISUZUK0UnOiAnanVzdGlmeUNlbnRlcicsXG4gICAgICAgICdDTUQrU0hJRlQrUic6ICdqdXN0aWZ5UmlnaHQnLFxuICAgICAgICAnQ01EK1NISUZUK0onOiAnanVzdGlmeUZ1bGwnLFxuICAgICAgICAnQ01EK1NISUZUK05VTTcnOiAnaW5zZXJ0VW5vcmRlcmVkTGlzdCcsXG4gICAgICAgICdDTUQrU0hJRlQrTlVNOCc6ICdpbnNlcnRPcmRlcmVkTGlzdCcsXG4gICAgICAgICdDTUQrTEVGVEJSQUNLRVQnOiAnb3V0ZGVudCcsXG4gICAgICAgICdDTUQrUklHSFRCUkFDS0VUJzogJ2luZGVudCcsXG4gICAgICAgICdDTUQrTlVNMCc6ICdmb3JtYXRQYXJhJyxcbiAgICAgICAgJ0NNRCtOVU0xJzogJ2Zvcm1hdEgxJyxcbiAgICAgICAgJ0NNRCtOVU0yJzogJ2Zvcm1hdEgyJyxcbiAgICAgICAgJ0NNRCtOVU0zJzogJ2Zvcm1hdEgzJyxcbiAgICAgICAgJ0NNRCtOVU00JzogJ2Zvcm1hdEg0JyxcbiAgICAgICAgJ0NNRCtOVU01JzogJ2Zvcm1hdEg1JyxcbiAgICAgICAgJ0NNRCtOVU02JzogJ2Zvcm1hdEg2JyxcbiAgICAgICAgJ0NNRCtFTlRFUic6ICdpbnNlcnRIb3Jpem9udGFsUnVsZScsXG4gICAgICAgICdDTUQrSyc6ICdsaW5rRGlhbG9nLnNob3cnXG4gICAgICB9XG4gICAgfSxcbiAgICBpY29uczoge1xuICAgICAgJ2FsaWduJzogJ25vdGUtaWNvbi1hbGlnbicsXG4gICAgICAnYWxpZ25DZW50ZXInOiAnbm90ZS1pY29uLWFsaWduLWNlbnRlcicsXG4gICAgICAnYWxpZ25KdXN0aWZ5JzogJ25vdGUtaWNvbi1hbGlnbi1qdXN0aWZ5JyxcbiAgICAgICdhbGlnbkxlZnQnOiAnbm90ZS1pY29uLWFsaWduLWxlZnQnLFxuICAgICAgJ2FsaWduUmlnaHQnOiAnbm90ZS1pY29uLWFsaWduLXJpZ2h0JyxcbiAgICAgICdyb3dCZWxvdyc6ICdub3RlLWljb24tcm93LWJlbG93JyxcbiAgICAgICdjb2xCZWZvcmUnOiAnbm90ZS1pY29uLWNvbC1iZWZvcmUnLFxuICAgICAgJ2NvbEFmdGVyJzogJ25vdGUtaWNvbi1jb2wtYWZ0ZXInLFxuICAgICAgJ3Jvd0Fib3ZlJzogJ25vdGUtaWNvbi1yb3ctYWJvdmUnLFxuICAgICAgJ3Jvd1JlbW92ZSc6ICdub3RlLWljb24tcm93LXJlbW92ZScsXG4gICAgICAnY29sUmVtb3ZlJzogJ25vdGUtaWNvbi1jb2wtcmVtb3ZlJyxcbiAgICAgICdpbmRlbnQnOiAnbm90ZS1pY29uLWFsaWduLWluZGVudCcsXG4gICAgICAnb3V0ZGVudCc6ICdub3RlLWljb24tYWxpZ24tb3V0ZGVudCcsXG4gICAgICAnYXJyb3dzQWx0JzogJ25vdGUtaWNvbi1hcnJvd3MtYWx0JyxcbiAgICAgICdib2xkJzogJ25vdGUtaWNvbi1ib2xkJyxcbiAgICAgICdjYXJldCc6ICdub3RlLWljb24tY2FyZXQnLFxuICAgICAgJ2NpcmNsZSc6ICdub3RlLWljb24tY2lyY2xlJyxcbiAgICAgICdjbG9zZSc6ICdub3RlLWljb24tY2xvc2UnLFxuICAgICAgJ2NvZGUnOiAnbm90ZS1pY29uLWNvZGUnLFxuICAgICAgJ2VyYXNlcic6ICdub3RlLWljb24tZXJhc2VyJyxcbiAgICAgICdmb250JzogJ25vdGUtaWNvbi1mb250JyxcbiAgICAgICdmcmFtZSc6ICdub3RlLWljb24tZnJhbWUnLFxuICAgICAgJ2l0YWxpYyc6ICdub3RlLWljb24taXRhbGljJyxcbiAgICAgICdsaW5rJzogJ25vdGUtaWNvbi1saW5rJyxcbiAgICAgICd1bmxpbmsnOiAnbm90ZS1pY29uLWNoYWluLWJyb2tlbicsXG4gICAgICAnbWFnaWMnOiAnbm90ZS1pY29uLW1hZ2ljJyxcbiAgICAgICdtZW51Q2hlY2snOiAnbm90ZS1pY29uLW1lbnUtY2hlY2snLFxuICAgICAgJ21pbnVzJzogJ25vdGUtaWNvbi1taW51cycsXG4gICAgICAnb3JkZXJlZGxpc3QnOiAnbm90ZS1pY29uLW9yZGVyZWRsaXN0JyxcbiAgICAgICdwZW5jaWwnOiAnbm90ZS1pY29uLXBlbmNpbCcsXG4gICAgICAncGljdHVyZSc6ICdub3RlLWljb24tcGljdHVyZScsXG4gICAgICAncXVlc3Rpb24nOiAnbm90ZS1pY29uLXF1ZXN0aW9uJyxcbiAgICAgICdyZWRvJzogJ25vdGUtaWNvbi1yZWRvJyxcbiAgICAgICdzcXVhcmUnOiAnbm90ZS1pY29uLXNxdWFyZScsXG4gICAgICAnc3RyaWtldGhyb3VnaCc6ICdub3RlLWljb24tc3RyaWtldGhyb3VnaCcsXG4gICAgICAnc3Vic2NyaXB0JzogJ25vdGUtaWNvbi1zdWJzY3JpcHQnLFxuICAgICAgJ3N1cGVyc2NyaXB0JzogJ25vdGUtaWNvbi1zdXBlcnNjcmlwdCcsXG4gICAgICAndGFibGUnOiAnbm90ZS1pY29uLXRhYmxlJyxcbiAgICAgICd0ZXh0SGVpZ2h0JzogJ25vdGUtaWNvbi10ZXh0LWhlaWdodCcsXG4gICAgICAndHJhc2gnOiAnbm90ZS1pY29uLXRyYXNoJyxcbiAgICAgICd1bmRlcmxpbmUnOiAnbm90ZS1pY29uLXVuZGVybGluZScsXG4gICAgICAndW5kbyc6ICdub3RlLWljb24tdW5kbycsXG4gICAgICAndW5vcmRlcmVkbGlzdCc6ICdub3RlLWljb24tdW5vcmRlcmVkbGlzdCcsXG4gICAgICAndmlkZW8nOiAnbm90ZS1pY29uLXZpZGVvJ1xuICAgIH1cbiAgfVxufSk7XG5cbmltcG9ydCAnLi4vc3VtbWVybm90ZSc7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbiJdfQ==
