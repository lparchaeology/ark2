(function(t,e){"use strict";if(typeof module==="object"&&typeof module.exports==="object"){module.exports=t.document?e(t,true):function(t){if(!t.document){throw new Error("jQuery requires a window with a document")}return e(t)}}else{e(t)}})(typeof window!=="undefined"?window:this,function(t,e){"use strict";var n=[];var i=t.document;var o=Object.getPrototypeOf;var r=n.slice;var s=n.concat;var a=n.push;var l=n.indexOf;var u={};var c=u.toString;var f=u.hasOwnProperty;var d=f.toString;var h=d.call(Object);var p={};function v(t,e){e=e||i;var n=e.createElement("script");n.text=t;e.head.appendChild(n).parentNode.removeChild(n)}var m="3.2.1",g=function(t,e){return new g.fn.init(t,e)},y=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,b=/^-ms-/,w=/-([a-z])/g,x=function(t,e){return e.toUpperCase()};g.fn=g.prototype={jquery:m,constructor:g,length:0,toArray:function(){return r.call(this)},get:function(t){if(t==null){return r.call(this)}return t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=g.merge(this.constructor(),t);e.prevObject=this;return e},each:function(t){return g.each(this,t)},map:function(t){return this.pushStack(g.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice};g.extend=g.fn.extend=function(){var t,e,n,i,o,r,s=arguments[0]||{},a=1,l=arguments.length,u=false;if(typeof s==="boolean"){u=s;s=arguments[a]||{};a++}if(typeof s!=="object"&&!g.isFunction(s)){s={}}if(a===l){s=this;a--}for(;a<l;a++){if((t=arguments[a])!=null){for(e in t){n=s[e];i=t[e];if(s===i){continue}if(u&&i&&(g.isPlainObject(i)||(o=Array.isArray(i)))){if(o){o=false;r=n&&Array.isArray(n)?n:[]}else{r=n&&g.isPlainObject(n)?n:{}}s[e]=g.extend(u,r,i)}else if(i!==undefined){s[e]=i}}}}return s};g.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:true,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return g.type(t)==="function"},isWindow:function(t){return t!=null&&t===t.window},isNumeric:function(t){var e=g.type(t);return(e==="number"||e==="string")&&!isNaN(t-parseFloat(t))},isPlainObject:function(t){var e,n;if(!t||c.call(t)!=="[object Object]"){return false}e=o(t);if(!e){return true}n=f.call(e,"constructor")&&e.constructor;return typeof n==="function"&&d.call(n)===h},isEmptyObject:function(t){var e;for(e in t){return false}return true},type:function(t){if(t==null){return t+""}return typeof t==="object"||typeof t==="function"?u[c.call(t)]||"object":typeof t},globalEval:function(t){v(t)},camelCase:function(t){return t.replace(b,"ms-").replace(w,x)},each:function(t,e){var n,i=0;if(C(t)){n=t.length;for(;i<n;i++){if(e.call(t[i],i,t[i])===false){break}}}else{for(i in t){if(e.call(t[i],i,t[i])===false){break}}}return t},trim:function(t){return t==null?"":(t+"").replace(y,"")},makeArray:function(t,e){var n=e||[];if(t!=null){if(C(Object(t))){g.merge(n,typeof t==="string"?[t]:t)}else{a.call(n,t)}}return n},inArray:function(t,e,n){return e==null?-1:l.call(e,t,n)},merge:function(t,e){var n=+e.length,i=0,o=t.length;for(;i<n;i++){t[o++]=e[i]}t.length=o;return t},grep:function(t,e,n){var i,o=[],r=0,s=t.length,a=!n;for(;r<s;r++){i=!e(t[r],r);if(i!==a){o.push(t[r])}}return o},map:function(t,e,n){var i,o,r=0,a=[];if(C(t)){i=t.length;for(;r<i;r++){o=e(t[r],r,n);if(o!=null){a.push(o)}}}else{for(r in t){o=e(t[r],r,n);if(o!=null){a.push(o)}}}return s.apply([],a)},guid:1,proxy:function(t,e){var n,i,o;if(typeof e==="string"){n=t[e];e=t;t=n}if(!g.isFunction(t)){return undefined}i=r.call(arguments,2);o=function(){return t.apply(e||this,i.concat(r.call(arguments)))};o.guid=t.guid=t.guid||g.guid++;return o},now:Date.now,support:p});if(typeof Symbol==="function"){g.fn[Symbol.iterator]=n[Symbol.iterator]}g.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){u["[object "+e+"]"]=e.toLowerCase()});function C(t){var e=!!t&&"length"in t&&t.length,n=g.type(t);if(n==="function"||g.isWindow(t)){return false}return n==="array"||e===0||typeof e==="number"&&e>0&&e-1 in t}var k=function(t){var e,n,i,o,r,s,a,l,u,c,f,d,h,p,v,m,g,y,b,w="sizzle"+1*new Date,x=t.document,C=0,k=0,T=st(),S=st(),$=st(),E=function(t,e){if(t===e){f=true}return 0},N={}.hasOwnProperty,A=[],I=A.pop,D=A.push,R=A.push,L=A.slice,H=function(t,e){var n=0,i=t.length;for(;n<i;n++){if(t[n]===e){return n}}return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",j="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",O="\\["+F+"*("+j+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+F+"*\\]",M=":("+j+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|"+".*"+")\\)|)",B=new RegExp(F+"+","g"),z=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),q=new RegExp("^"+F+"*,"+F+"*"),U=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),W=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),V=new RegExp(M),_=new RegExp("^"+j+"$"),K={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+M),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),tt=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,i&1023|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){if(e){if(t==="\0"){return"ï¿½"}return t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" "}return"\\"+t},it=function(){d()},ot=yt(function(t){return t.disabled===true&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{R.apply(A=L.call(x.childNodes),x.childNodes);A[x.childNodes.length].nodeType}catch(t){R={apply:A.length?function(t,e){D.apply(t,L.call(e))}:function(t,e){var n=t.length,i=0;while(t[n++]=e[i++]){}t.length=n-1}}}function rt(t,e,i,o){var r,a,u,c,f,p,g,y=e&&e.ownerDocument,C=e?e.nodeType:9;i=i||[];if(typeof t!=="string"||!t||C!==1&&C!==9&&C!==11){return i}if(!o){if((e?e.ownerDocument||e:x)!==h){d(e)}e=e||h;if(v){if(C!==11&&(f=Y.exec(t))){if(r=f[1]){if(C===9){if(u=e.getElementById(r)){if(u.id===r){i.push(u);return i}}else{return i}}else{if(y&&(u=y.getElementById(r))&&b(e,u)&&u.id===r){i.push(u);return i}}}else if(f[2]){R.apply(i,e.getElementsByTagName(t));return i}else if((r=f[3])&&n.getElementsByClassName&&e.getElementsByClassName){R.apply(i,e.getElementsByClassName(r));return i}}if(n.qsa&&!$[t+" "]&&(!m||!m.test(t))){if(C!==1){y=e;g=t}else if(e.nodeName.toLowerCase()!=="object"){if(c=e.getAttribute("id")){c=c.replace(et,nt)}else{e.setAttribute("id",c=w)}p=s(t);a=p.length;while(a--){p[a]="#"+c+" "+gt(p[a])}g=p.join(",");y=J.test(t)&&vt(e.parentNode)||e}if(g){try{R.apply(i,y.querySelectorAll(g));return i}catch(t){}finally{if(c===w){e.removeAttribute("id")}}}}}}return l(t.replace(z,"$1"),e,i,o)}function st(){var t=[];function e(n,o){if(t.push(n+" ")>i.cacheLength){delete e[t.shift()]}return e[n+" "]=o}return e}function at(t){t[w]=true;return t}function lt(t){var e=h.createElement("fieldset");try{return!!t(e)}catch(t){return false}finally{if(e.parentNode){e.parentNode.removeChild(e)}e=null}}function ut(t,e){var n=t.split("|"),o=n.length;while(o--){i.attrHandle[n[o]]=e}}function ct(t,e){var n=e&&t,i=n&&t.nodeType===1&&e.nodeType===1&&t.sourceIndex-e.sourceIndex;if(i){return i}if(n){while(n=n.nextSibling){if(n===e){return-1}}}return t?1:-1}function ft(t){return function(e){var n=e.nodeName.toLowerCase();return n==="input"&&e.type===t}}function dt(t){return function(e){var n=e.nodeName.toLowerCase();return(n==="input"||n==="button")&&e.type===t}}function ht(t){return function(e){if("form"in e){if(e.parentNode&&e.disabled===false){if("label"in e){if("label"in e.parentNode){return e.parentNode.disabled===t}else{return e.disabled===t}}return e.isDisabled===t||e.isDisabled!==!t&&ot(e)===t}return e.disabled===t}else if("label"in e){return e.disabled===t}return false}}function pt(t){return at(function(e){e=+e;return at(function(n,i){var o,r=t([],n.length,e),s=r.length;while(s--){if(n[o=r[s]]){n[o]=!(i[o]=n[o])}}})})}function vt(t){return t&&typeof t.getElementsByTagName!=="undefined"&&t}n=rt.support={};r=rt.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?e.nodeName!=="HTML":false};d=rt.setDocument=function(t){var e,o,s=t?t.ownerDocument||t:x;if(s===h||s.nodeType!==9||!s.documentElement){return h}h=s;p=h.documentElement;v=!r(h);if(x!==h&&(o=h.defaultView)&&o.top!==o){if(o.addEventListener){o.addEventListener("unload",it,false)}else if(o.attachEvent){o.attachEvent("onunload",it)}}n.attributes=lt(function(t){t.className="i";return!t.getAttribute("className")});n.getElementsByTagName=lt(function(t){t.appendChild(h.createComment(""));return!t.getElementsByTagName("*").length});n.getElementsByClassName=X.test(h.getElementsByClassName);n.getById=lt(function(t){p.appendChild(t).id=w;return!h.getElementsByName||!h.getElementsByName(w).length});if(n.getById){i.filter["ID"]=function(t){var e=t.replace(Z,tt);return function(t){return t.getAttribute("id")===e}};i.find["ID"]=function(t,e){if(typeof e.getElementById!=="undefined"&&v){var n=e.getElementById(t);return n?[n]:[]}}}else{i.filter["ID"]=function(t){var e=t.replace(Z,tt);return function(t){var n=typeof t.getAttributeNode!=="undefined"&&t.getAttributeNode("id");return n&&n.value===e}};i.find["ID"]=function(t,e){if(typeof e.getElementById!=="undefined"&&v){var n,i,o,r=e.getElementById(t);if(r){n=r.getAttributeNode("id");if(n&&n.value===t){return[r]}o=e.getElementsByName(t);i=0;while(r=o[i++]){n=r.getAttributeNode("id");if(n&&n.value===t){return[r]}}}return[]}}}i.find["TAG"]=n.getElementsByTagName?function(t,e){if(typeof e.getElementsByTagName!=="undefined"){return e.getElementsByTagName(t)}else if(n.qsa){return e.querySelectorAll(t)}}:function(t,e){var n,i=[],o=0,r=e.getElementsByTagName(t);if(t==="*"){while(n=r[o++]){if(n.nodeType===1){i.push(n)}}return i}return r};i.find["CLASS"]=n.getElementsByClassName&&function(t,e){if(typeof e.getElementsByClassName!=="undefined"&&v){return e.getElementsByClassName(t)}};g=[];m=[];if(n.qsa=X.test(h.querySelectorAll)){lt(function(t){p.appendChild(t).innerHTML="<a id='"+w+"'></a>"+"<select id='"+w+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(t.querySelectorAll("[msallowcapture^='']").length){m.push("[*^$]="+F+"*(?:''|\"\")")}if(!t.querySelectorAll("[selected]").length){m.push("\\["+F+"*(?:value|"+P+")")}if(!t.querySelectorAll("[id~="+w+"-]").length){m.push("~=")}if(!t.querySelectorAll(":checked").length){m.push(":checked")}if(!t.querySelectorAll("a#"+w+"+*").length){m.push(".#.+[+~]")}});lt(function(t){t.innerHTML="<a href='' disabled='disabled'></a>"+"<select disabled='disabled'><option/></select>";var e=h.createElement("input");e.setAttribute("type","hidden");t.appendChild(e).setAttribute("name","D");if(t.querySelectorAll("[name=d]").length){m.push("name"+F+"*[*^$|!~]?=")}if(t.querySelectorAll(":enabled").length!==2){m.push(":enabled",":disabled")}p.appendChild(t).disabled=true;if(t.querySelectorAll(":disabled").length!==2){m.push(":enabled",":disabled")}t.querySelectorAll("*,:x");m.push(",.*:")})}if(n.matchesSelector=X.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector)){lt(function(t){n.disconnectedMatch=y.call(t,"*");y.call(t,"[s!='']:x");g.push("!=",M)})}m=m.length&&new RegExp(m.join("|"));g=g.length&&new RegExp(g.join("|"));e=X.test(p.compareDocumentPosition);b=e||X.test(p.contains)?function(t,e){var n=t.nodeType===9?t.documentElement:t,i=e&&e.parentNode;return t===i||!!(i&&i.nodeType===1&&(n.contains?n.contains(i):t.compareDocumentPosition&&t.compareDocumentPosition(i)&16))}:function(t,e){if(e){while(e=e.parentNode){if(e===t){return true}}}return false};E=e?function(t,e){if(t===e){f=true;return 0}var i=!t.compareDocumentPosition-!e.compareDocumentPosition;if(i){return i}i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1;if(i&1||!n.sortDetached&&e.compareDocumentPosition(t)===i){if(t===h||t.ownerDocument===x&&b(x,t)){return-1}if(e===h||e.ownerDocument===x&&b(x,e)){return 1}return c?H(c,t)-H(c,e):0}return i&4?-1:1}:function(t,e){if(t===e){f=true;return 0}var n,i=0,o=t.parentNode,r=e.parentNode,s=[t],a=[e];if(!o||!r){return t===h?-1:e===h?1:o?-1:r?1:c?H(c,t)-H(c,e):0}else if(o===r){return ct(t,e)}n=t;while(n=n.parentNode){s.unshift(n)}n=e;while(n=n.parentNode){a.unshift(n)}while(s[i]===a[i]){i++}return i?ct(s[i],a[i]):s[i]===x?-1:a[i]===x?1:0};return h};rt.matches=function(t,e){return rt(t,null,null,e)};rt.matchesSelector=function(t,e){if((t.ownerDocument||t)!==h){d(t)}e=e.replace(W,"='$1']");if(n.matchesSelector&&v&&!$[e+" "]&&(!g||!g.test(e))&&(!m||!m.test(e))){try{var i=y.call(t,e);if(i||n.disconnectedMatch||t.document&&t.document.nodeType!==11){return i}}catch(t){}}return rt(e,h,null,[t]).length>0};rt.contains=function(t,e){if((t.ownerDocument||t)!==h){d(t)}return b(t,e)};rt.attr=function(t,e){if((t.ownerDocument||t)!==h){d(t)}var o=i.attrHandle[e.toLowerCase()],r=o&&N.call(i.attrHandle,e.toLowerCase())?o(t,e,!v):undefined;return r!==undefined?r:n.attributes||!v?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null};rt.escape=function(t){return(t+"").replace(et,nt)};rt.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)};rt.uniqueSort=function(t){var e,i=[],o=0,r=0;f=!n.detectDuplicates;c=!n.sortStable&&t.slice(0);t.sort(E);if(f){while(e=t[r++]){if(e===t[r]){o=i.push(r)}}while(o--){t.splice(i[o],1)}}c=null;return t};o=rt.getText=function(t){var e,n="",i=0,r=t.nodeType;if(!r){while(e=t[i++]){n+=o(e)}}else if(r===1||r===9||r===11){if(typeof t.textContent==="string"){return t.textContent}else{for(t=t.firstChild;t;t=t.nextSibling){n+=o(t)}}}else if(r===3||r===4){return t.nodeValue}return n};i=rt.selectors={cacheLength:50,createPseudo:at,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){t[1]=t[1].replace(Z,tt);t[3]=(t[3]||t[4]||t[5]||"").replace(Z,tt);if(t[2]==="~="){t[3]=" "+t[3]+" "}return t.slice(0,4)},CHILD:function(t){t[1]=t[1].toLowerCase();if(t[1].slice(0,3)==="nth"){if(!t[3]){rt.error(t[0])}t[4]=+(t[4]?t[5]+(t[6]||1):2*(t[3]==="even"||t[3]==="odd"));t[5]=+(t[7]+t[8]||t[3]==="odd")}else if(t[3]){rt.error(t[0])}return t},PSEUDO:function(t){var e,n=!t[6]&&t[2];if(K["CHILD"].test(t[0])){return null}if(t[3]){t[2]=t[4]||t[5]||""}else if(n&&V.test(n)&&(e=s(n,true))&&(e=n.indexOf(")",n.length-e)-n.length)){t[0]=t[0].slice(0,e);t[2]=n.slice(0,e)}return t.slice(0,3)}},filter:{TAG:function(t){var e=t.replace(Z,tt).toLowerCase();return t==="*"?function(){return true}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=T[t+" "];return e||(e=new RegExp("(^|"+F+")"+t+"("+F+"|$)"))&&T(t,function(t){return e.test(typeof t.className==="string"&&t.className||typeof t.getAttribute!=="undefined"&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var o=rt.attr(i,t);if(o==null){return e==="!="}if(!e){return true}o+="";return e==="="?o===n:e==="!="?o!==n:e==="^="?n&&o.indexOf(n)===0:e==="*="?n&&o.indexOf(n)>-1:e==="$="?n&&o.slice(-n.length)===n:e==="~="?(" "+o.replace(B," ")+" ").indexOf(n)>-1:e==="|="?o===n||o.slice(0,n.length+1)===n+"-":false}},CHILD:function(t,e,n,i,o){var r=t.slice(0,3)!=="nth",s=t.slice(-4)!=="last",a=e==="of-type";return i===1&&o===0?function(t){return!!t.parentNode}:function(e,n,l){var u,c,f,d,h,p,v=r!==s?"nextSibling":"previousSibling",m=e.parentNode,g=a&&e.nodeName.toLowerCase(),y=!l&&!a,b=false;if(m){if(r){while(v){d=e;while(d=d[v]){if(a?d.nodeName.toLowerCase()===g:d.nodeType===1){return false}}p=v=t==="only"&&!p&&"nextSibling"}return true}p=[s?m.firstChild:m.lastChild];if(s&&y){d=m;f=d[w]||(d[w]={});c=f[d.uniqueID]||(f[d.uniqueID]={});u=c[t]||[];h=u[0]===C&&u[1];b=h&&u[2];d=h&&m.childNodes[h];while(d=++h&&d&&d[v]||(b=h=0)||p.pop()){if(d.nodeType===1&&++b&&d===e){c[t]=[C,h,b];break}}}else{if(y){d=e;f=d[w]||(d[w]={});c=f[d.uniqueID]||(f[d.uniqueID]={});u=c[t]||[];h=u[0]===C&&u[1];b=h}if(b===false){while(d=++h&&d&&d[v]||(b=h=0)||p.pop()){if((a?d.nodeName.toLowerCase()===g:d.nodeType===1)&&++b){if(y){f=d[w]||(d[w]={});c=f[d.uniqueID]||(f[d.uniqueID]={});c[t]=[C,b]}if(d===e){break}}}}}b-=o;return b===i||b%i===0&&b/i>=0}}},PSEUDO:function(t,e){var n,o=i.pseudos[t]||i.setFilters[t.toLowerCase()]||rt.error("unsupported pseudo: "+t);if(o[w]){return o(e)}if(o.length>1){n=[t,t,"",e];return i.setFilters.hasOwnProperty(t.toLowerCase())?at(function(t,n){var i,r=o(t,e),s=r.length;while(s--){i=H(t,r[s]);t[i]=!(n[i]=r[s])}}):function(t){return o(t,0,n)}}return o}},pseudos:{not:at(function(t){var e=[],n=[],i=a(t.replace(z,"$1"));return i[w]?at(function(t,e,n,o){var r,s=i(t,null,o,[]),a=t.length;while(a--){if(r=s[a]){t[a]=!(e[a]=r)}}}):function(t,o,r){e[0]=t;i(e,null,r,n);e[0]=null;return!n.pop()}}),has:at(function(t){return function(e){return rt(t,e).length>0}}),contains:at(function(t){t=t.replace(Z,tt);return function(e){return(e.textContent||e.innerText||o(e)).indexOf(t)>-1}}),lang:at(function(t){if(!_.test(t||"")){rt.error("unsupported lang: "+t)}t=t.replace(Z,tt).toLowerCase();return function(e){var n;do{if(n=v?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang")){n=n.toLowerCase();return n===t||n.indexOf(t+"-")===0}}while((e=e.parentNode)&&e.nodeType===1);return false}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:ht(false),disabled:ht(true),checked:function(t){var e=t.nodeName.toLowerCase();return e==="input"&&!!t.checked||e==="option"&&!!t.selected},selected:function(t){if(t.parentNode){t.parentNode.selectedIndex}return t.selected===true},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling){if(t.nodeType<6){return false}}return true},parent:function(t){return!i.pseudos["empty"](t)},header:function(t){return Q.test(t.nodeName)},input:function(t){return G.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return e==="input"&&t.type==="button"||e==="button"},text:function(t){var e;return t.nodeName.toLowerCase()==="input"&&t.type==="text"&&((e=t.getAttribute("type"))==null||e.toLowerCase()==="text")},first:pt(function(){return[0]}),last:pt(function(t,e){return[e-1]}),eq:pt(function(t,e,n){return[n<0?n+e:n]}),even:pt(function(t,e){var n=0;for(;n<e;n+=2){t.push(n)}return t}),odd:pt(function(t,e){var n=1;for(;n<e;n+=2){t.push(n)}return t}),lt:pt(function(t,e,n){var i=n<0?n+e:n;for(;--i>=0;){t.push(i)}return t}),gt:pt(function(t,e,n){var i=n<0?n+e:n;for(;++i<e;){t.push(i)}return t})}};i.pseudos["nth"]=i.pseudos["eq"];for(e in{radio:true,checkbox:true,file:true,password:true,image:true}){i.pseudos[e]=ft(e)}for(e in{submit:true,reset:true}){i.pseudos[e]=dt(e)}function mt(){}mt.prototype=i.filters=i.pseudos;i.setFilters=new mt;s=rt.tokenize=function(t,e){var n,o,r,s,a,l,u,c=S[t+" "];if(c){return e?0:c.slice(0)}a=t;l=[];u=i.preFilter;while(a){if(!n||(o=q.exec(a))){if(o){a=a.slice(o[0].length)||a}l.push(r=[])}n=false;if(o=U.exec(a)){n=o.shift();r.push({value:n,type:o[0].replace(z," ")});a=a.slice(n.length)}for(s in i.filter){if((o=K[s].exec(a))&&(!u[s]||(o=u[s](o)))){n=o.shift();r.push({value:n,type:s,matches:o});a=a.slice(n.length)}}if(!n){break}}return e?a.length:a?rt.error(t):S(t,l).slice(0)};function gt(t){var e=0,n=t.length,i="";for(;e<n;e++){i+=t[e].value}return i}function yt(t,e,n){var i=e.dir,o=e.next,r=o||i,s=n&&r==="parentNode",a=k++;return e.first?function(e,n,o){while(e=e[i]){if(e.nodeType===1||s){return t(e,n,o)}}return false}:function(e,n,l){var u,c,f,d=[C,a];if(l){while(e=e[i]){if(e.nodeType===1||s){if(t(e,n,l)){return true}}}}else{while(e=e[i]){if(e.nodeType===1||s){f=e[w]||(e[w]={});c=f[e.uniqueID]||(f[e.uniqueID]={});if(o&&o===e.nodeName.toLowerCase()){e=e[i]||e}else if((u=c[r])&&u[0]===C&&u[1]===a){return d[2]=u[2]}else{c[r]=d;if(d[2]=t(e,n,l)){return true}}}}}return false}}function bt(t){return t.length>1?function(e,n,i){var o=t.length;while(o--){if(!t[o](e,n,i)){return false}}return true}:t[0]}function wt(t,e,n){var i=0,o=e.length;for(;i<o;i++){rt(t,e[i],n)}return n}function xt(t,e,n,i,o){var r,s=[],a=0,l=t.length,u=e!=null;for(;a<l;a++){if(r=t[a]){if(!n||n(r,i,o)){s.push(r);if(u){e.push(a)}}}}return s}function Ct(t,e,n,i,o,r){if(i&&!i[w]){i=Ct(i)}if(o&&!o[w]){o=Ct(o,r)}return at(function(r,s,a,l){var u,c,f,d=[],h=[],p=s.length,v=r||wt(e||"*",a.nodeType?[a]:a,[]),m=t&&(r||!e)?xt(v,d,t,a,l):v,g=n?o||(r?t:p||i)?[]:s:m;if(n){n(m,g,a,l)}if(i){u=xt(g,h);i(u,[],a,l);c=u.length;while(c--){if(f=u[c]){g[h[c]]=!(m[h[c]]=f)}}}if(r){if(o||t){if(o){u=[];c=g.length;while(c--){if(f=g[c]){u.push(m[c]=f)}}o(null,g=[],u,l)}c=g.length;while(c--){if((f=g[c])&&(u=o?H(r,f):d[c])>-1){r[u]=!(s[u]=f)}}}}else{g=xt(g===s?g.splice(p,g.length):g);if(o){o(null,s,g,l)}else{R.apply(s,g)}}})}function kt(t){var e,n,o,r=t.length,s=i.relative[t[0].type],a=s||i.relative[" "],l=s?1:0,c=yt(function(t){return t===e},a,true),f=yt(function(t){return H(e,t)>-1},a,true),d=[function(t,n,i){var o=!s&&(i||n!==u)||((e=n).nodeType?c(t,n,i):f(t,n,i));e=null;return o}];for(;l<r;l++){if(n=i.relative[t[l].type]){d=[yt(bt(d),n)]}else{n=i.filter[t[l].type].apply(null,t[l].matches);if(n[w]){o=++l;for(;o<r;o++){if(i.relative[t[o].type]){break}}return Ct(l>1&&bt(d),l>1&&gt(t.slice(0,l-1).concat({value:t[l-2].type===" "?"*":""})).replace(z,"$1"),n,l<o&&kt(t.slice(l,o)),o<r&&kt(t=t.slice(o)),o<r&&gt(t))}d.push(n)}}return bt(d)}function Tt(t,e){var n=e.length>0,o=t.length>0,r=function(r,s,a,l,c){var f,p,m,g=0,y="0",b=r&&[],w=[],x=u,k=r||o&&i.find["TAG"]("*",c),T=C+=x==null?1:Math.random()||.1,S=k.length;if(c){u=s===h||s||c}for(;y!==S&&(f=k[y])!=null;y++){if(o&&f){p=0;if(!s&&f.ownerDocument!==h){d(f);a=!v}while(m=t[p++]){if(m(f,s||h,a)){l.push(f);break}}if(c){C=T}}if(n){if(f=!m&&f){g--}if(r){b.push(f)}}}g+=y;if(n&&y!==g){p=0;while(m=e[p++]){m(b,w,s,a)}if(r){if(g>0){while(y--){if(!(b[y]||w[y])){w[y]=I.call(l)}}}w=xt(w)}R.apply(l,w);if(c&&!r&&w.length>0&&g+e.length>1){rt.uniqueSort(l)}}if(c){C=T;u=x}return b};return n?at(r):r}a=rt.compile=function(t,e){var n,i=[],o=[],r=$[t+" "];if(!r){if(!e){e=s(t)}n=e.length;while(n--){r=kt(e[n]);if(r[w]){i.push(r)}else{o.push(r)}}r=$(t,Tt(o,i));r.selector=t}return r};l=rt.select=function(t,e,n,o){var r,l,u,c,f,d=typeof t==="function"&&t,h=!o&&s(t=d.selector||t);n=n||[];if(h.length===1){l=h[0]=h[0].slice(0);if(l.length>2&&(u=l[0]).type==="ID"&&e.nodeType===9&&v&&i.relative[l[1].type]){e=(i.find["ID"](u.matches[0].replace(Z,tt),e)||[])[0];if(!e){return n}else if(d){e=e.parentNode}t=t.slice(l.shift().value.length)}r=K["needsContext"].test(t)?0:l.length;while(r--){u=l[r];if(i.relative[c=u.type]){break}if(f=i.find[c]){if(o=f(u.matches[0].replace(Z,tt),J.test(l[0].type)&&vt(e.parentNode)||e)){l.splice(r,1);t=o.length&&gt(l);if(!t){R.apply(n,o);return n}break}}}}(d||a(t,h))(o,e,!v,n,!e||J.test(t)&&vt(e.parentNode)||e);return n};n.sortStable=w.split("").sort(E).join("")===w;n.detectDuplicates=!!f;d();n.sortDetached=lt(function(t){return t.compareDocumentPosition(h.createElement("fieldset"))&1});if(!lt(function(t){t.innerHTML="<a href='#'></a>";return t.firstChild.getAttribute("href")==="#"})){ut("type|href|height|width",function(t,e,n){if(!n){return t.getAttribute(e,e.toLowerCase()==="type"?1:2)}})}if(!n.attributes||!lt(function(t){t.innerHTML="<input/>";t.firstChild.setAttribute("value","");return t.firstChild.getAttribute("value")===""})){ut("value",function(t,e,n){if(!n&&t.nodeName.toLowerCase()==="input"){return t.defaultValue}})}if(!lt(function(t){return t.getAttribute("disabled")==null})){ut(P,function(t,e,n){var i;if(!n){return t[e]===true?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}})}return rt}(t);g.find=k;g.expr=k.selectors;g.expr[":"]=g.expr.pseudos;g.uniqueSort=g.unique=k.uniqueSort;g.text=k.getText;g.isXMLDoc=k.isXML;g.contains=k.contains;g.escapeSelector=k.escape;var T=function(t,e,n){var i=[],o=n!==undefined;while((t=t[e])&&t.nodeType!==9){if(t.nodeType===1){if(o&&g(t).is(n)){break}i.push(t)}}return i};var S=function(t,e){var n=[];for(;t;t=t.nextSibling){if(t.nodeType===1&&t!==e){n.push(t)}}return n};var $=g.expr.match.needsContext;function E(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;var A=/^.[^:#\[\.,]*$/;function I(t,e,n){if(g.isFunction(e)){return g.grep(t,function(t,i){return!!e.call(t,i,t)!==n})}if(e.nodeType){return g.grep(t,function(t){return t===e!==n})}if(typeof e!=="string"){return g.grep(t,function(t){return l.call(e,t)>-1!==n})}if(A.test(e)){return g.filter(e,t,n)}e=g.filter(e,t);return g.grep(t,function(t){return l.call(e,t)>-1!==n&&t.nodeType===1})}g.filter=function(t,e,n){var i=e[0];if(n){t=":not("+t+")"}if(e.length===1&&i.nodeType===1){return g.find.matchesSelector(i,t)?[i]:[]}return g.find.matches(t,g.grep(e,function(t){return t.nodeType===1}))};g.fn.extend({find:function(t){var e,n,i=this.length,o=this;if(typeof t!=="string"){return this.pushStack(g(t).filter(function(){for(e=0;e<i;e++){if(g.contains(o[e],this)){return true}}}))}n=this.pushStack([]);for(e=0;e<i;e++){g.find(t,o[e],n)}return i>1?g.uniqueSort(n):n},filter:function(t){return this.pushStack(I(this,t||[],false))},not:function(t){return this.pushStack(I(this,t||[],true))},is:function(t){return!!I(this,typeof t==="string"&&$.test(t)?g(t):t||[],false).length}});var D,R=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,L=g.fn.init=function(t,e,n){var o,r;if(!t){return this}n=n||D;if(typeof t==="string"){if(t[0]==="<"&&t[t.length-1]===">"&&t.length>=3){o=[null,t,null]}else{o=R.exec(t)}if(o&&(o[1]||!e)){if(o[1]){e=e instanceof g?e[0]:e;g.merge(this,g.parseHTML(o[1],e&&e.nodeType?e.ownerDocument||e:i,true));if(N.test(o[1])&&g.isPlainObject(e)){for(o in e){if(g.isFunction(this[o])){this[o](e[o])}else{this.attr(o,e[o])}}}return this}else{r=i.getElementById(o[2]);if(r){this[0]=r;this.length=1}return this}}else if(!e||e.jquery){return(e||n).find(t)}else{return this.constructor(e).find(t)}}else if(t.nodeType){this[0]=t;this.length=1;return this}else if(g.isFunction(t)){return n.ready!==undefined?n.ready(t):t(g)}return g.makeArray(t,this)};L.prototype=g.fn;D=g(i);var H=/^(?:parents|prev(?:Until|All))/,P={children:true,contents:true,next:true,prev:true};g.fn.extend({has:function(t){var e=g(t,this),n=e.length;return this.filter(function(){var t=0;for(;t<n;t++){if(g.contains(this,e[t])){return true}}})},closest:function(t,e){var n,i=0,o=this.length,r=[],s=typeof t!=="string"&&g(t);if(!$.test(t)){for(;i<o;i++){for(n=this[i];n&&n!==e;n=n.parentNode){if(n.nodeType<11&&(s?s.index(n)>-1:n.nodeType===1&&g.find.matchesSelector(n,t))){r.push(n);break}}}}return this.pushStack(r.length>1?g.uniqueSort(r):r)},index:function(t){if(!t){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof t==="string"){return l.call(g(t),this[0])}return l.call(this,t.jquery?t[0]:t)},add:function(t,e){return this.pushStack(g.uniqueSort(g.merge(this.get(),g(t,e))))},addBack:function(t){return this.add(t==null?this.prevObject:this.prevObject.filter(t))}});function F(t,e){while((t=t[e])&&t.nodeType!==1){}return t}g.each({parent:function(t){var e=t.parentNode;return e&&e.nodeType!==11?e:null},parents:function(t){return T(t,"parentNode")},parentsUntil:function(t,e,n){return T(t,"parentNode",n)},next:function(t){return F(t,"nextSibling")},prev:function(t){return F(t,"previousSibling")},nextAll:function(t){return T(t,"nextSibling")},prevAll:function(t){return T(t,"previousSibling")},nextUntil:function(t,e,n){return T(t,"nextSibling",n)},prevUntil:function(t,e,n){return T(t,"previousSibling",n)},siblings:function(t){return S((t.parentNode||{}).firstChild,t)},children:function(t){return S(t.firstChild)},contents:function(t){if(E(t,"iframe")){return t.contentDocument}if(E(t,"template")){t=t.content||t}return g.merge([],t.childNodes)}},function(t,e){g.fn[t]=function(n,i){var o=g.map(this,e,n);if(t.slice(-5)!=="Until"){i=n}if(i&&typeof i==="string"){o=g.filter(i,o)}if(this.length>1){if(!P[t]){g.uniqueSort(o)}if(H.test(t)){o.reverse()}}return this.pushStack(o)}});var j=/[^\x20\t\r\n\f]+/g;function O(t){var e={};g.each(t.match(j)||[],function(t,n){e[n]=true});return e}g.Callbacks=function(t){t=typeof t==="string"?O(t):g.extend({},t);var e,n,i,o,r=[],s=[],a=-1,l=function(){o=o||t.once;i=e=true;for(;s.length;a=-1){n=s.shift();while(++a<r.length){if(r[a].apply(n[0],n[1])===false&&t.stopOnFalse){a=r.length;n=false}}}if(!t.memory){n=false}e=false;if(o){if(n){r=[]}else{r=""}}},u={add:function(){if(r){if(n&&!e){a=r.length-1;s.push(n)}(function e(n){g.each(n,function(n,i){if(g.isFunction(i)){if(!t.unique||!u.has(i)){r.push(i)}}else if(i&&i.length&&g.type(i)!=="string"){e(i)}})})(arguments);if(n&&!e){l()}}return this},remove:function(){g.each(arguments,function(t,e){var n;while((n=g.inArray(e,r,n))>-1){r.splice(n,1);if(n<=a){a--}}});return this},has:function(t){return t?g.inArray(t,r)>-1:r.length>0},empty:function(){if(r){r=[]}return this},disable:function(){o=s=[];r=n="";return this},disabled:function(){return!r},lock:function(){o=s=[];if(!n&&!e){r=n=""}return this},locked:function(){return!!o},fireWith:function(t,n){if(!o){n=n||[];n=[t,n.slice?n.slice():n];s.push(n);if(!e){l()}}return this},fire:function(){u.fireWith(this,arguments);return this},fired:function(){return!!i}};return u};function M(t){return t}function B(t){throw t}function z(t,e,n,i){var o;try{if(t&&g.isFunction(o=t.promise)){o.call(t).done(e).fail(n)}else if(t&&g.isFunction(o=t.then)){o.call(t,e,n)}else{e.apply(undefined,[t].slice(i))}}catch(t){n.apply(undefined,[t])}}g.extend({Deferred:function(e){var n=[["notify","progress",g.Callbacks("memory"),g.Callbacks("memory"),2],["resolve","done",g.Callbacks("once memory"),g.Callbacks("once memory"),0,"resolved"],["reject","fail",g.Callbacks("once memory"),g.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){r.done(arguments).fail(arguments);return this},catch:function(t){return o.then(null,t)},pipe:function(){var t=arguments;return g.Deferred(function(e){g.each(n,function(n,i){var o=g.isFunction(t[i[4]])&&t[i[4]];r[i[1]](function(){var t=o&&o.apply(this,arguments);if(t&&g.isFunction(t.promise)){t.promise().progress(e.notify).done(e.resolve).fail(e.reject)}else{e[i[0]+"With"](this,o?[t]:arguments)}})});t=null}).promise()},then:function(e,i,o){var r=0;function s(e,n,i,o){return function(){var a=this,l=arguments,u=function(){var t,u;if(e<r){return}t=i.apply(a,l);if(t===n.promise()){throw new TypeError("Thenable self-resolution")}u=t&&(typeof t==="object"||typeof t==="function")&&t.then;if(g.isFunction(u)){if(o){u.call(t,s(r,n,M,o),s(r,n,B,o))}else{r++;u.call(t,s(r,n,M,o),s(r,n,B,o),s(r,n,M,n.notifyWith))}}else{if(i!==M){a=undefined;l=[t]}(o||n.resolveWith)(a,l)}},c=o?u:function(){try{u()}catch(t){if(g.Deferred.exceptionHook){g.Deferred.exceptionHook(t,c.stackTrace)}if(e+1>=r){if(i!==B){a=undefined;l=[t]}n.rejectWith(a,l)}}};if(e){c()}else{if(g.Deferred.getStackHook){c.stackTrace=g.Deferred.getStackHook()}t.setTimeout(c)}}}return g.Deferred(function(t){n[0][3].add(s(0,t,g.isFunction(o)?o:M,t.notifyWith));n[1][3].add(s(0,t,g.isFunction(e)?e:M));n[2][3].add(s(0,t,g.isFunction(i)?i:B))}).promise()},promise:function(t){return t!=null?g.extend(t,o):o}},r={};g.each(n,function(t,e){var s=e[2],a=e[5];o[e[1]]=s.add;if(a){s.add(function(){i=a},n[3-t][2].disable,n[0][2].lock)}s.add(e[3].fire);r[e[0]]=function(){r[e[0]+"With"](this===r?undefined:this,arguments);return this};r[e[0]+"With"]=s.fireWith});o.promise(r);if(e){e.call(r,r)}return r},when:function(t){var e=arguments.length,n=e,i=Array(n),o=r.call(arguments),s=g.Deferred(),a=function(t){return function(n){i[t]=this;o[t]=arguments.length>1?r.call(arguments):n;if(!--e){s.resolveWith(i,o)}}};if(e<=1){z(t,s.done(a(n)).resolve,s.reject,!e);if(s.state()==="pending"||g.isFunction(o[n]&&o[n].then)){return s.then()}}while(n--){z(o[n],a(n),s.reject)}return s.promise()}});var q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;g.Deferred.exceptionHook=function(e,n){if(t.console&&t.console.warn&&e&&q.test(e.name)){t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)}};g.readyException=function(e){t.setTimeout(function(){throw e})};var U=g.Deferred();g.fn.ready=function(t){U.then(t).catch(function(t){g.readyException(t)});return this};g.extend({isReady:false,readyWait:1,ready:function(t){if(t===true?--g.readyWait:g.isReady){return}g.isReady=true;if(t!==true&&--g.readyWait>0){return}U.resolveWith(i,[g])}});g.ready.then=U.then;function W(){i.removeEventListener("DOMContentLoaded",W);t.removeEventListener("load",W);g.ready()}if(i.readyState==="complete"||i.readyState!=="loading"&&!i.documentElement.doScroll){t.setTimeout(g.ready)}else{i.addEventListener("DOMContentLoaded",W);t.addEventListener("load",W)}var V=function(t,e,n,i,o,r,s){var a=0,l=t.length,u=n==null;if(g.type(n)==="object"){o=true;for(a in n){V(t,e,a,n[a],true,r,s)}}else if(i!==undefined){o=true;if(!g.isFunction(i)){s=true}if(u){if(s){e.call(t,i);e=null}else{u=e;e=function(t,e,n){return u.call(g(t),n)}}}if(e){for(;a<l;a++){e(t[a],n,s?i:i.call(t[a],a,e(t[a],n)))}}}if(o){return t}if(u){return e.call(t)}return l?e(t[0],n):r};var _=function(t){return t.nodeType===1||t.nodeType===9||!+t.nodeType};function K(){this.expando=g.expando+K.uid++}K.uid=1;K.prototype={cache:function(t){var e=t[this.expando];if(!e){e={};if(_(t)){if(t.nodeType){t[this.expando]=e}else{Object.defineProperty(t,this.expando,{value:e,configurable:true})}}}return e},set:function(t,e,n){var i,o=this.cache(t);if(typeof e==="string"){o[g.camelCase(e)]=n}else{for(i in e){o[g.camelCase(i)]=e[i]}}return o},get:function(t,e){return e===undefined?this.cache(t):t[this.expando]&&t[this.expando][g.camelCase(e)]},access:function(t,e,n){if(e===undefined||e&&typeof e==="string"&&n===undefined){return this.get(t,e)}this.set(t,e,n);return n!==undefined?n:e},remove:function(t,e){var n,i=t[this.expando];if(i===undefined){return}if(e!==undefined){if(Array.isArray(e)){e=e.map(g.camelCase)}else{e=g.camelCase(e);e=e in i?[e]:e.match(j)||[]}n=e.length;while(n--){delete i[e[n]]}}if(e===undefined||g.isEmptyObject(i)){if(t.nodeType){t[this.expando]=undefined}else{delete t[this.expando]}}},hasData:function(t){var e=t[this.expando];return e!==undefined&&!g.isEmptyObject(e)}};var G=new K;var Q=new K;var X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Y=/[A-Z]/g;function J(t){if(t==="true"){return true}if(t==="false"){return false}if(t==="null"){return null}if(t===+t+""){return+t}if(X.test(t)){return JSON.parse(t)}return t}function Z(t,e,n){var i;if(n===undefined&&t.nodeType===1){i="data-"+e.replace(Y,"-$&").toLowerCase();n=t.getAttribute(i);if(typeof n==="string"){try{n=J(n)}catch(t){}Q.set(t,e,n)}else{n=undefined}}return n}g.extend({hasData:function(t){return Q.hasData(t)||G.hasData(t)},data:function(t,e,n){return Q.access(t,e,n)},removeData:function(t,e){Q.remove(t,e)},_data:function(t,e,n){return G.access(t,e,n)},_removeData:function(t,e){G.remove(t,e)}});g.fn.extend({data:function(t,e){var n,i,o,r=this[0],s=r&&r.attributes;if(t===undefined){if(this.length){o=Q.get(r);if(r.nodeType===1&&!G.get(r,"hasDataAttrs")){n=s.length;while(n--){if(s[n]){i=s[n].name;if(i.indexOf("data-")===0){i=g.camelCase(i.slice(5));Z(r,i,o[i])}}}G.set(r,"hasDataAttrs",true)}}return o}if(typeof t==="object"){return this.each(function(){Q.set(this,t)})}return V(this,function(e){var n;if(r&&e===undefined){n=Q.get(r,t);if(n!==undefined){return n}n=Z(r,t);if(n!==undefined){return n}return}this.each(function(){Q.set(this,t,e)})},null,e,arguments.length>1,null,true)},removeData:function(t){return this.each(function(){Q.remove(this,t)})}});g.extend({queue:function(t,e,n){var i;if(t){e=(e||"fx")+"queue";i=G.get(t,e);if(n){if(!i||Array.isArray(n)){i=G.access(t,e,g.makeArray(n))}else{i.push(n)}}return i||[]}},dequeue:function(t,e){e=e||"fx";var n=g.queue(t,e),i=n.length,o=n.shift(),r=g._queueHooks(t,e),s=function(){g.dequeue(t,e)};if(o==="inprogress"){o=n.shift();i--}if(o){if(e==="fx"){n.unshift("inprogress")}delete r.stop;o.call(t,s,r)}if(!i&&r){r.empty.fire()}},_queueHooks:function(t,e){var n=e+"queueHooks";return G.get(t,n)||G.access(t,n,{empty:g.Callbacks("once memory").add(function(){G.remove(t,[e+"queue",n])})})}});g.fn.extend({queue:function(t,e){var n=2;if(typeof t!=="string"){e=t;t="fx";n--}if(arguments.length<n){return g.queue(this[0],t)}return e===undefined?this:this.each(function(){var n=g.queue(this,t,e);g._queueHooks(this,t);if(t==="fx"&&n[0]!=="inprogress"){g.dequeue(this,t)}})},dequeue:function(t){return this.each(function(){g.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,o=g.Deferred(),r=this,s=this.length,a=function(){if(!--i){o.resolveWith(r,[r])}};if(typeof t!=="string"){e=t;t=undefined}t=t||"fx";while(s--){n=G.get(r[s],t+"queueHooks");if(n&&n.empty){i++;n.empty.add(a)}}a();return o.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i");var nt=["Top","Right","Bottom","Left"];var it=function(t,e){t=e||t;return t.style.display==="none"||t.style.display===""&&g.contains(t.ownerDocument,t)&&g.css(t,"display")==="none"};var ot=function(t,e,n,i){var o,r,s={};for(r in e){s[r]=t.style[r];t.style[r]=e[r]}o=n.apply(t,i||[]);for(r in e){t.style[r]=s[r]}return o};function rt(t,e,n,i){var o,r=1,s=20,a=i?function(){return i.cur()}:function(){return g.css(t,e,"")},l=a(),u=n&&n[3]||(g.cssNumber[e]?"":"px"),c=(g.cssNumber[e]||u!=="px"&&+l)&&et.exec(g.css(t,e));if(c&&c[3]!==u){u=u||c[3];n=n||[];c=+l||1;do{r=r||".5";c=c/r;g.style(t,e,c+u)}while(r!==(r=a()/l)&&r!==1&&--s)}if(n){c=+c||+l||0;o=n[1]?c+(n[1]+1)*n[2]:+n[2];if(i){i.unit=u;i.start=c;i.end=o}}return o}var st={};function at(t){var e,n=t.ownerDocument,i=t.nodeName,o=st[i];if(o){return o}e=n.body.appendChild(n.createElement(i));o=g.css(e,"display");e.parentNode.removeChild(e);if(o==="none"){o="block"}st[i]=o;return o}function lt(t,e){var n,i,o=[],r=0,s=t.length;for(;r<s;r++){i=t[r];if(!i.style){continue}n=i.style.display;if(e){if(n==="none"){o[r]=G.get(i,"display")||null;if(!o[r]){i.style.display=""}}if(i.style.display===""&&it(i)){o[r]=at(i)}}else{if(n!=="none"){o[r]="none";G.set(i,"display",n)}}}for(r=0;r<s;r++){if(o[r]!=null){t[r].style.display=o[r]}}return t}g.fn.extend({show:function(){return lt(this,true)},hide:function(){return lt(this)},toggle:function(t){if(typeof t==="boolean"){return t?this.show():this.hide()}return this.each(function(){if(it(this)){g(this).show()}else{g(this).hide()}})}});var ut=/^(?:checkbox|radio)$/i;var ct=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;var ft=/^$|\/(?:java|ecma)script/i;var dt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};dt.optgroup=dt.option;dt.tbody=dt.tfoot=dt.colgroup=dt.caption=dt.thead;dt.th=dt.td;function ht(t,e){var n;if(typeof t.getElementsByTagName!=="undefined"){n=t.getElementsByTagName(e||"*")}else if(typeof t.querySelectorAll!=="undefined"){n=t.querySelectorAll(e||"*")}else{n=[]}if(e===undefined||e&&E(t,e)){return g.merge([t],n)}return n}function pt(t,e){var n=0,i=t.length;for(;n<i;n++){G.set(t[n],"globalEval",!e||G.get(e[n],"globalEval"))}}var vt=/<|&#?\w+;/;function mt(t,e,n,i,o){var r,s,a,l,u,c,f=e.createDocumentFragment(),d=[],h=0,p=t.length;for(;h<p;h++){r=t[h];if(r||r===0){if(g.type(r)==="object"){g.merge(d,r.nodeType?[r]:r)}else if(!vt.test(r)){d.push(e.createTextNode(r))}else{s=s||f.appendChild(e.createElement("div"));a=(ct.exec(r)||["",""])[1].toLowerCase();l=dt[a]||dt._default;s.innerHTML=l[1]+g.htmlPrefilter(r)+l[2];c=l[0];while(c--){s=s.lastChild}g.merge(d,s.childNodes);s=f.firstChild;s.textContent=""}}}f.textContent="";h=0;while(r=d[h++]){if(i&&g.inArray(r,i)>-1){if(o){o.push(r)}continue}u=g.contains(r.ownerDocument,r);s=ht(f.appendChild(r),"script");if(u){pt(s)}if(n){c=0;while(r=s[c++]){if(ft.test(r.type||"")){n.push(r)}}}}return f}(function(){var t=i.createDocumentFragment(),e=t.appendChild(i.createElement("div")),n=i.createElement("input");n.setAttribute("type","radio");n.setAttribute("checked","checked");n.setAttribute("name","t");e.appendChild(n);p.checkClone=e.cloneNode(true).cloneNode(true).lastChild.checked;e.innerHTML="<textarea>x</textarea>";p.noCloneChecked=!!e.cloneNode(true).lastChild.defaultValue})();var gt=i.documentElement;var yt=/^key/,bt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,wt=/^([^.]*)(?:\.(.+)|)/;function xt(){return true}function Ct(){return false}function kt(){try{return i.activeElement}catch(t){}}function Tt(t,e,n,i,o,r){var s,a;if(typeof e==="object"){if(typeof n!=="string"){i=i||n;n=undefined}for(a in e){Tt(t,a,n,i,e[a],r)}return t}if(i==null&&o==null){o=n;i=n=undefined}else if(o==null){if(typeof n==="string"){o=i;i=undefined}else{o=i;i=n;n=undefined}}if(o===false){o=Ct}else if(!o){return t}if(r===1){s=o;o=function(t){g().off(t);return s.apply(this,arguments)};o.guid=s.guid||(s.guid=g.guid++)}return t.each(function(){g.event.add(this,e,o,i,n)})}g.event={global:{},add:function(t,e,n,i,o){var r,s,a,l,u,c,f,d,h,p,v,m=G.get(t);if(!m){return}if(n.handler){r=n;n=r.handler;o=r.selector}if(o){g.find.matchesSelector(gt,o)}if(!n.guid){n.guid=g.guid++}if(!(l=m.events)){l=m.events={}}if(!(s=m.handle)){s=m.handle=function(e){return typeof g!=="undefined"&&g.event.triggered!==e.type?g.event.dispatch.apply(t,arguments):undefined}}e=(e||"").match(j)||[""];u=e.length;while(u--){a=wt.exec(e[u])||[];h=v=a[1];p=(a[2]||"").split(".").sort();if(!h){continue}f=g.event.special[h]||{};h=(o?f.delegateType:f.bindType)||h;f=g.event.special[h]||{};c=g.extend({type:h,origType:v,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&g.expr.match.needsContext.test(o),namespace:p.join(".")},r);if(!(d=l[h])){d=l[h]=[];d.delegateCount=0;if(!f.setup||f.setup.call(t,i,p,s)===false){if(t.addEventListener){t.addEventListener(h,s)}}}if(f.add){f.add.call(t,c);if(!c.handler.guid){c.handler.guid=n.guid}}if(o){d.splice(d.delegateCount++,0,c)}else{d.push(c)}g.event.global[h]=true}},remove:function(t,e,n,i,o){var r,s,a,l,u,c,f,d,h,p,v,m=G.hasData(t)&&G.get(t);if(!m||!(l=m.events)){return}e=(e||"").match(j)||[""];u=e.length;while(u--){a=wt.exec(e[u])||[];h=v=a[1];p=(a[2]||"").split(".").sort();if(!h){for(h in l){g.event.remove(t,h+e[u],n,i,true)}continue}f=g.event.special[h]||{};h=(i?f.delegateType:f.bindType)||h;d=l[h]||[];a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)");s=r=d.length;while(r--){c=d[r];if((o||v===c.origType)&&(!n||n.guid===c.guid)&&(!a||a.test(c.namespace))&&(!i||i===c.selector||i==="**"&&c.selector)){d.splice(r,1);if(c.selector){d.delegateCount--}if(f.remove){f.remove.call(t,c)}}}if(s&&!d.length){if(!f.teardown||f.teardown.call(t,p,m.handle)===false){g.removeEvent(t,h,m.handle)}delete l[h]}}if(g.isEmptyObject(l)){G.remove(t,"handle events")}},dispatch:function(t){var e=g.event.fix(t);var n,i,o,r,s,a,l=new Array(arguments.length),u=(G.get(this,"events")||{})[e.type]||[],c=g.event.special[e.type]||{};l[0]=e;for(n=1;n<arguments.length;n++){l[n]=arguments[n]}e.delegateTarget=this;if(c.preDispatch&&c.preDispatch.call(this,e)===false){return}a=g.event.handlers.call(this,e,u);n=0;while((r=a[n++])&&!e.isPropagationStopped()){e.currentTarget=r.elem;i=0;while((s=r.handlers[i++])&&!e.isImmediatePropagationStopped()){if(!e.rnamespace||e.rnamespace.test(s.namespace)){e.handleObj=s;e.data=s.data;o=((g.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,l);if(o!==undefined){if((e.result=o)===false){e.preventDefault();e.stopPropagation()}}}}}if(c.postDispatch){c.postDispatch.call(this,e)}return e.result},handlers:function(t,e){var n,i,o,r,s,a=[],l=e.delegateCount,u=t.target;if(l&&u.nodeType&&!(t.type==="click"&&t.button>=1)){for(;u!==this;u=u.parentNode||this){if(u.nodeType===1&&!(t.type==="click"&&u.disabled===true)){r=[];s={};for(n=0;n<l;n++){i=e[n];o=i.selector+" ";if(s[o]===undefined){s[o]=i.needsContext?g(o,this).index(u)>-1:g.find(o,this,null,[u]).length}if(s[o]){r.push(i)}}if(r.length){a.push({elem:u,handlers:r})}}}}u=this;if(l<e.length){a.push({elem:u,handlers:e.slice(l)})}return a},addProp:function(t,e){Object.defineProperty(g.Event.prototype,t,{enumerable:true,configurable:true,get:g.isFunction(e)?function(){if(this.originalEvent){return e(this.originalEvent)}}:function(){if(this.originalEvent){return this.originalEvent[t]}},set:function(e){Object.defineProperty(this,t,{enumerable:true,configurable:true,writable:true,value:e})}})},fix:function(t){return t[g.expando]?t:new g.Event(t)},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==kt()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===kt()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&E(this,"input")){this.click();return false}},_default:function(t){return E(t.target,"a")}},beforeunload:{postDispatch:function(t){if(t.result!==undefined&&t.originalEvent){t.originalEvent.returnValue=t.result}}}}};g.removeEvent=function(t,e,n){if(t.removeEventListener){t.removeEventListener(e,n)}};g.Event=function(t,e){if(!(this instanceof g.Event)){return new g.Event(t,e)}if(t&&t.type){this.originalEvent=t;this.type=t.type;this.isDefaultPrevented=t.defaultPrevented||t.defaultPrevented===undefined&&t.returnValue===false?xt:Ct;this.target=t.target&&t.target.nodeType===3?t.target.parentNode:t.target;this.currentTarget=t.currentTarget;this.relatedTarget=t.relatedTarget}else{this.type=t}if(e){g.extend(this,e)}this.timeStamp=t&&t.timeStamp||g.now();this[g.expando]=true};g.Event.prototype={constructor:g.Event,isDefaultPrevented:Ct,isPropagationStopped:Ct,isImmediatePropagationStopped:Ct,isSimulated:false,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=xt;if(t&&!this.isSimulated){t.preventDefault()}},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=xt;if(t&&!this.isSimulated){t.stopPropagation()}},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=xt;if(t&&!this.isSimulated){t.stopImmediatePropagation()}this.stopPropagation()}};g.each({altKey:true,bubbles:true,cancelable:true,changedTouches:true,ctrlKey:true,detail:true,eventPhase:true,metaKey:true,pageX:true,pageY:true,shiftKey:true,view:true,char:true,charCode:true,key:true,keyCode:true,button:true,buttons:true,clientX:true,clientY:true,offsetX:true,offsetY:true,pointerId:true,pointerType:true,screenX:true,screenY:true,targetTouches:true,toElement:true,touches:true,which:function(t){var e=t.button;if(t.which==null&&yt.test(t.type)){return t.charCode!=null?t.charCode:t.keyCode}if(!t.which&&e!==undefined&&bt.test(t.type)){if(e&1){return 1}if(e&2){return 3}if(e&4){return 2}return 0}return t.which}},g.event.addProp);g.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){g.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,o=t.relatedTarget,r=t.handleObj;if(!o||o!==i&&!g.contains(i,o)){t.type=r.origType;n=r.handler.apply(this,arguments);t.type=e}return n}}});g.fn.extend({on:function(t,e,n,i){return Tt(this,t,e,n,i)},one:function(t,e,n,i){return Tt(this,t,e,n,i,1)},off:function(t,e,n){var i,o;if(t&&t.preventDefault&&t.handleObj){i=t.handleObj;g(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler);return this}if(typeof t==="object"){for(o in t){this.off(o,e,t[o])}return this}if(e===false||typeof e==="function"){n=e;e=undefined}if(n===false){n=Ct}return this.each(function(){g.event.remove(this,t,n,e)})}});var St=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,$t=/<script|<style|<link/i,Et=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^true\/(.*)/,At=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function It(t,e){if(E(t,"table")&&E(e.nodeType!==11?e:e.firstChild,"tr")){return g(">tbody",t)[0]||t}return t}function Dt(t){t.type=(t.getAttribute("type")!==null)+"/"+t.type;return t}function Rt(t){var e=Nt.exec(t.type);if(e){t.type=e[1]}else{t.removeAttribute("type")}return t}function Lt(t,e){var n,i,o,r,s,a,l,u;if(e.nodeType!==1){return}if(G.hasData(t)){r=G.access(t);s=G.set(e,r);u=r.events;if(u){delete s.handle;s.events={};for(o in u){for(n=0,i=u[o].length;n<i;n++){g.event.add(e,o,u[o][n])}}}}if(Q.hasData(t)){a=Q.access(t);l=g.extend({},a);Q.set(e,l)}}function Ht(t,e){var n=e.nodeName.toLowerCase();if(n==="input"&&ut.test(t.type)){e.checked=t.checked}else if(n==="input"||n==="textarea"){e.defaultValue=t.defaultValue}}function Pt(t,e,n,i){e=s.apply([],e);var o,r,a,l,u,c,f=0,d=t.length,h=d-1,m=e[0],y=g.isFunction(m);if(y||d>1&&typeof m==="string"&&!p.checkClone&&Et.test(m)){return t.each(function(o){var r=t.eq(o);if(y){e[0]=m.call(this,o,r.html())}Pt(r,e,n,i)})}if(d){o=mt(e,t[0].ownerDocument,false,t,i);r=o.firstChild;if(o.childNodes.length===1){o=r}if(r||i){a=g.map(ht(o,"script"),Dt);l=a.length;for(;f<d;f++){u=o;if(f!==h){u=g.clone(u,true,true);if(l){g.merge(a,ht(u,"script"))}}n.call(t[f],u,f)}if(l){c=a[a.length-1].ownerDocument;g.map(a,Rt);for(f=0;f<l;f++){u=a[f];if(ft.test(u.type||"")&&!G.access(u,"globalEval")&&g.contains(c,u)){if(u.src){if(g._evalUrl){g._evalUrl(u.src)}}else{v(u.textContent.replace(At,""),c)}}}}}}return t}function Ft(t,e,n){var i,o=e?g.filter(e,t):t,r=0;for(;(i=o[r])!=null;r++){if(!n&&i.nodeType===1){g.cleanData(ht(i))}if(i.parentNode){if(n&&g.contains(i.ownerDocument,i)){pt(ht(i,"script"))}i.parentNode.removeChild(i)}}return t}g.extend({htmlPrefilter:function(t){return t.replace(St,"<$1></$2>")},clone:function(t,e,n){var i,o,r,s,a=t.cloneNode(true),l=g.contains(t.ownerDocument,t);if(!p.noCloneChecked&&(t.nodeType===1||t.nodeType===11)&&!g.isXMLDoc(t)){s=ht(a);r=ht(t);for(i=0,o=r.length;i<o;i++){Ht(r[i],s[i])}}if(e){if(n){r=r||ht(t);s=s||ht(a);for(i=0,o=r.length;i<o;i++){Lt(r[i],s[i])}}else{Lt(t,a)}}s=ht(a,"script");if(s.length>0){pt(s,!l&&ht(t,"script"))}return a},cleanData:function(t){var e,n,i,o=g.event.special,r=0;for(;(n=t[r])!==undefined;r++){if(_(n)){if(e=n[G.expando]){if(e.events){for(i in e.events){if(o[i]){g.event.remove(n,i)}else{g.removeEvent(n,i,e.handle)}}}n[G.expando]=undefined}if(n[Q.expando]){n[Q.expando]=undefined}}}}});g.fn.extend({detach:function(t){return Ft(this,t,true)},remove:function(t){return Ft(this,t)},text:function(t){return V(this,function(t){return t===undefined?g.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=t}})},null,t,arguments.length)},append:function(){return Pt(this,arguments,function(t){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var e=It(this,t);e.appendChild(t)}})},prepend:function(){return Pt(this,arguments,function(t){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var e=It(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Pt(this,arguments,function(t){if(this.parentNode){this.parentNode.insertBefore(t,this)}})},after:function(){return Pt(this,arguments,function(t){if(this.parentNode){this.parentNode.insertBefore(t,this.nextSibling)}})},empty:function(){var t,e=0;for(;(t=this[e])!=null;e++){if(t.nodeType===1){g.cleanData(ht(t,false));t.textContent=""}}return this},clone:function(t,e){t=t==null?false:t;e=e==null?t:e;return this.map(function(){return g.clone(this,t,e)})},html:function(t){return V(this,function(t){var e=this[0]||{},n=0,i=this.length;if(t===undefined&&e.nodeType===1){return e.innerHTML}if(typeof t==="string"&&!$t.test(t)&&!dt[(ct.exec(t)||["",""])[1].toLowerCase()]){t=g.htmlPrefilter(t);try{for(;n<i;n++){e=this[n]||{};if(e.nodeType===1){g.cleanData(ht(e,false));e.innerHTML=t}}e=0}catch(t){}}if(e){this.empty().append(t)}},null,t,arguments.length)},replaceWith:function(){var t=[];return Pt(this,arguments,function(e){var n=this.parentNode;if(g.inArray(this,t)<0){g.cleanData(ht(this));if(n){n.replaceChild(e,this)}}},t)}});g.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){g.fn[t]=function(t){var n,i=[],o=g(t),r=o.length-1,s=0;for(;s<=r;s++){n=s===r?this:this.clone(true);g(o[s])[e](n);a.apply(i,n.get())}return this.pushStack(i)}});var jt=/^margin/;var Ot=new RegExp("^("+tt+")(?!px)[a-z%]+$","i");var Mt=function(e){var n=e.ownerDocument.defaultView;if(!n||!n.opener){n=t}return n.getComputedStyle(e)};(function(){function e(){if(!l){return}l.style.cssText="box-sizing:border-box;"+"position:relative;display:block;"+"margin:auto;border:1px;padding:1px;"+"top:1%;width:50%";l.innerHTML="";gt.appendChild(a);var e=t.getComputedStyle(l);n=e.top!=="1%";s=e.marginLeft==="2px";o=e.width==="4px";l.style.marginRight="50%";r=e.marginRight==="4px";gt.removeChild(a);l=null}var n,o,r,s,a=i.createElement("div"),l=i.createElement("div");if(!l.style){return}l.style.backgroundClip="content-box";l.cloneNode(true).style.backgroundClip="";p.clearCloneStyle=l.style.backgroundClip==="content-box";a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;"+"padding:0;margin-top:1px;position:absolute";a.appendChild(l);g.extend(p,{pixelPosition:function(){e();return n},boxSizingReliable:function(){e();return o},pixelMarginRight:function(){e();return r},reliableMarginLeft:function(){e();return s}})})();function Bt(t,e,n){var i,o,r,s,a=t.style;n=n||Mt(t);if(n){s=n.getPropertyValue(e)||n[e];if(s===""&&!g.contains(t.ownerDocument,t)){s=g.style(t,e)}if(!p.pixelMarginRight()&&Ot.test(s)&&jt.test(e)){i=a.width;o=a.minWidth;r=a.maxWidth;a.minWidth=a.maxWidth=a.width=s;s=n.width;a.width=i;a.minWidth=o;a.maxWidth=r}}return s!==undefined?s+"":s}function zt(t,e){return{get:function(){if(t()){delete this.get;return}return(this.get=e).apply(this,arguments)}}}var qt=/^(none|table(?!-c[ea]).+)/,Ut=/^--/,Wt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:"0",fontWeight:"400"},_t=["Webkit","Moz","ms"],Kt=i.createElement("div").style;function Gt(t){if(t in Kt){return t}var e=t[0].toUpperCase()+t.slice(1),n=_t.length;while(n--){t=_t[n]+e;if(t in Kt){return t}}}function Qt(t){var e=g.cssProps[t];if(!e){e=g.cssProps[t]=Gt(t)||t}return e}function Xt(t,e,n){var i=et.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function Yt(t,e,n,i,o){var r,s=0;if(n===(i?"border":"content")){r=4}else{r=e==="width"?1:0}for(;r<4;r+=2){if(n==="margin"){s+=g.css(t,n+nt[r],true,o)}if(i){if(n==="content"){s-=g.css(t,"padding"+nt[r],true,o)}if(n!=="margin"){s-=g.css(t,"border"+nt[r]+"Width",true,o)}}else{s+=g.css(t,"padding"+nt[r],true,o);if(n!=="padding"){s+=g.css(t,"border"+nt[r]+"Width",true,o)}}}return s}function Jt(t,e,n){var i,o=Mt(t),r=Bt(t,e,o),s=g.css(t,"boxSizing",false,o)==="border-box";if(Ot.test(r)){return r}i=s&&(p.boxSizingReliable()||r===t.style[e]);if(r==="auto"){r=t["offset"+e[0].toUpperCase()+e.slice(1)]}r=parseFloat(r)||0;return r+Yt(t,e,n||(s?"border":"content"),i,o)+"px"}g.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Bt(t,"opacity");return n===""?"1":n}}}},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{float:"cssFloat"},style:function(t,e,n,i){if(!t||t.nodeType===3||t.nodeType===8||!t.style){return}var o,r,s,a=g.camelCase(e),l=Ut.test(e),u=t.style;if(!l){e=Qt(a)}s=g.cssHooks[e]||g.cssHooks[a];if(n!==undefined){r=typeof n;if(r==="string"&&(o=et.exec(n))&&o[1]){n=rt(t,e,o);r="number"}if(n==null||n!==n){return}if(r==="number"){n+=o&&o[3]||(g.cssNumber[a]?"":"px")}if(!p.clearCloneStyle&&n===""&&e.indexOf("background")===0){u[e]="inherit"}if(!s||!("set"in s)||(n=s.set(t,n,i))!==undefined){if(l){u.setProperty(e,n)}else{u[e]=n}}}else{if(s&&"get"in s&&(o=s.get(t,false,i))!==undefined){return o}return u[e]}},css:function(t,e,n,i){var o,r,s,a=g.camelCase(e),l=Ut.test(e);if(!l){e=Qt(a)}s=g.cssHooks[e]||g.cssHooks[a];if(s&&"get"in s){o=s.get(t,true,n)}if(o===undefined){o=Bt(t,e,i)}if(o==="normal"&&e in Vt){o=Vt[e]}if(n===""||n){r=parseFloat(o);return n===true||isFinite(r)?r||0:o}return o}});g.each(["height","width"],function(t,e){g.cssHooks[e]={get:function(t,n,i){if(n){return qt.test(g.css(t,"display"))&&(!t.getClientRects().length||!t.getBoundingClientRect().width)?ot(t,Wt,function(){return Jt(t,e,i)}):Jt(t,e,i)}},set:function(t,n,i){var o,r=i&&Mt(t),s=i&&Yt(t,e,i,g.css(t,"boxSizing",false,r)==="border-box",r);if(s&&(o=et.exec(n))&&(o[3]||"px")!=="px"){t.style[e]=n;n=g.css(t,e)}return Xt(t,n,s)}}});g.cssHooks.marginLeft=zt(p.reliableMarginLeft,function(t,e){if(e){return(parseFloat(Bt(t,"marginLeft"))||t.getBoundingClientRect().left-ot(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}});g.each({margin:"",padding:"",border:"Width"},function(t,e){g.cssHooks[t+e]={expand:function(n){var i=0,o={},r=typeof n==="string"?n.split(" "):[n];for(;i<4;i++){o[t+nt[i]+e]=r[i]||r[i-2]||r[0]}return o}};if(!jt.test(t)){g.cssHooks[t+e].set=Xt}});g.fn.extend({css:function(t,e){return V(this,function(t,e,n){var i,o,r={},s=0;if(Array.isArray(e)){i=Mt(t);o=e.length;for(;s<o;s++){r[e[s]]=g.css(t,e[s],false,i)}return r}return n!==undefined?g.style(t,e,n):g.css(t,e)},t,e,arguments.length>1)}});function Zt(t,e,n,i,o){return new Zt.prototype.init(t,e,n,i,o)}g.Tween=Zt;Zt.prototype={constructor:Zt,init:function(t,e,n,i,o,r){this.elem=t;this.prop=n;this.easing=o||g.easing._default;this.options=e;this.start=this.now=this.cur();this.end=i;this.unit=r||(g.cssNumber[n]?"":"px")},cur:function(){var t=Zt.propHooks[this.prop];return t&&t.get?t.get(this):Zt.propHooks._default.get(this)},run:function(t){var e,n=Zt.propHooks[this.prop];if(this.options.duration){this.pos=e=g.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration)}else{this.pos=e=t}this.now=(this.end-this.start)*e+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(n&&n.set){n.set(this)}else{Zt.propHooks._default.set(this)}return this}};Zt.prototype.init.prototype=Zt.prototype;Zt.propHooks={_default:{get:function(t){var e;if(t.elem.nodeType!==1||t.elem[t.prop]!=null&&t.elem.style[t.prop]==null){return t.elem[t.prop]}e=g.css(t.elem,t.prop,"");return!e||e==="auto"?0:e},set:function(t){if(g.fx.step[t.prop]){g.fx.step[t.prop](t)}else if(t.elem.nodeType===1&&(t.elem.style[g.cssProps[t.prop]]!=null||g.cssHooks[t.prop])){g.style(t.elem,t.prop,t.now+t.unit)}else{t.elem[t.prop]=t.now}}}};Zt.propHooks.scrollTop=Zt.propHooks.scrollLeft={set:function(t){if(t.elem.nodeType&&t.elem.parentNode){t.elem[t.prop]=t.now}}};g.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"};g.fx=Zt.prototype.init;g.fx.step={};var te,ee,ne=/^(?:toggle|show|hide)$/,ie=/queueHooks$/;function oe(){if(ee){if(i.hidden===false&&t.requestAnimationFrame){t.requestAnimationFrame(oe)}else{t.setTimeout(oe,g.fx.interval)}g.fx.tick()}}function re(){t.setTimeout(function(){te=undefined});return te=g.now()}function se(t,e){var n,i=0,o={height:t};e=e?1:0;for(;i<4;i+=2-e){n=nt[i];o["margin"+n]=o["padding"+n]=t}if(e){o.opacity=o.width=t}return o}function ae(t,e,n){var i,o=(ce.tweeners[e]||[]).concat(ce.tweeners["*"]),r=0,s=o.length;for(;r<s;r++){if(i=o[r].call(n,e,t)){return i}}}function le(t,e,n){var i,o,r,s,a,l,u,c,f="width"in e||"height"in e,d=this,h={},p=t.style,v=t.nodeType&&it(t),m=G.get(t,"fxshow");if(!n.queue){s=g._queueHooks(t,"fx");if(s.unqueued==null){s.unqueued=0;a=s.empty.fire;s.empty.fire=function(){if(!s.unqueued){a()}}}s.unqueued++;d.always(function(){d.always(function(){s.unqueued--;if(!g.queue(t,"fx").length){s.empty.fire()}})})}for(i in e){o=e[i];if(ne.test(o)){delete e[i];r=r||o==="toggle";if(o===(v?"hide":"show")){if(o==="show"&&m&&m[i]!==undefined){v=true}else{continue}}h[i]=m&&m[i]||g.style(t,i)}}l=!g.isEmptyObject(e);if(!l&&g.isEmptyObject(h)){return}if(f&&t.nodeType===1){n.overflow=[p.overflow,p.overflowX,p.overflowY];u=m&&m.display;if(u==null){u=G.get(t,"display")}c=g.css(t,"display");if(c==="none"){if(u){c=u}else{lt([t],true);u=t.style.display||u;c=g.css(t,"display");lt([t])}}if(c==="inline"||c==="inline-block"&&u!=null){if(g.css(t,"float")==="none"){if(!l){d.done(function(){p.display=u});if(u==null){c=p.display;u=c==="none"?"":c}}p.display="inline-block"}}}if(n.overflow){p.overflow="hidden";d.always(function(){p.overflow=n.overflow[0];p.overflowX=n.overflow[1];p.overflowY=n.overflow[2]})}l=false;for(i in h){if(!l){if(m){if("hidden"in m){v=m.hidden}}else{m=G.access(t,"fxshow",{display:u})}if(r){m.hidden=!v}if(v){lt([t],true)}d.done(function(){if(!v){lt([t])}G.remove(t,"fxshow");for(i in h){g.style(t,i,h[i])}})}l=ae(v?m[i]:0,i,d);if(!(i in m)){m[i]=l.start;if(v){l.end=l.start;l.start=0}}}}function ue(t,e){var n,i,o,r,s;for(n in t){i=g.camelCase(n);o=e[i];r=t[n];if(Array.isArray(r)){o=r[1];r=t[n]=r[0]}if(n!==i){t[i]=r;delete t[n]}s=g.cssHooks[i];if(s&&"expand"in s){r=s.expand(r);delete t[i];for(n in r){if(!(n in t)){t[n]=r[n];e[n]=o}}}else{e[i]=o}}}function ce(t,e,n){var i,o,r=0,s=ce.prefilters.length,a=g.Deferred().always(function(){delete l.elem}),l=function(){if(o){return false}var e=te||re(),n=Math.max(0,u.startTime+u.duration-e),i=n/u.duration||0,r=1-i,s=0,l=u.tweens.length;for(;s<l;s++){u.tweens[s].run(r)}a.notifyWith(t,[u,r,n]);if(r<1&&l){return n}if(!l){a.notifyWith(t,[u,1,0])}a.resolveWith(t,[u]);return false},u=a.promise({elem:t,props:g.extend({},e),opts:g.extend(true,{specialEasing:{},easing:g.easing._default},n),originalProperties:e,originalOptions:n,startTime:te||re(),duration:n.duration,tweens:[],createTween:function(e,n){var i=g.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);u.tweens.push(i);return i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(o){return this}o=true;for(;n<i;n++){u.tweens[n].run(1)}if(e){a.notifyWith(t,[u,1,0]);a.resolveWith(t,[u,e])}else{a.rejectWith(t,[u,e])}return this}}),c=u.props;ue(c,u.opts.specialEasing);for(;r<s;r++){i=ce.prefilters[r].call(u,t,c,u.opts);if(i){if(g.isFunction(i.stop)){g._queueHooks(u.elem,u.opts.queue).stop=g.proxy(i.stop,i)}return i}}g.map(c,ae,u);if(g.isFunction(u.opts.start)){u.opts.start.call(t,u)}u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always);g.fx.timer(g.extend(l,{elem:t,anim:u,queue:u.opts.queue}));return u}g.Animation=g.extend(ce,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);rt(n.elem,t,et.exec(e),n);return n}]},tweener:function(t,e){if(g.isFunction(t)){e=t;t=["*"]}else{t=t.match(j)}var n,i=0,o=t.length;for(;i<o;i++){n=t[i];ce.tweeners[n]=ce.tweeners[n]||[];ce.tweeners[n].unshift(e)}},prefilters:[le],prefilter:function(t,e){if(e){ce.prefilters.unshift(t)}else{ce.prefilters.push(t)}}});g.speed=function(t,e,n){var i=t&&typeof t==="object"?g.extend({},t):{complete:n||!n&&e||g.isFunction(t)&&t,duration:t,easing:n&&e||e&&!g.isFunction(e)&&e};if(g.fx.off){i.duration=0}else{if(typeof i.duration!=="number"){if(i.duration in g.fx.speeds){i.duration=g.fx.speeds[i.duration]}else{i.duration=g.fx.speeds._default}}}if(i.queue==null||i.queue===true){i.queue="fx"}i.old=i.complete;i.complete=function(){if(g.isFunction(i.old)){i.old.call(this)}if(i.queue){g.dequeue(this,i.queue)}};return i};g.fn.extend({fadeTo:function(t,e,n,i){return this.filter(it).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var o=g.isEmptyObject(t),r=g.speed(e,n,i),s=function(){var e=ce(this,g.extend({},t),r);if(o||G.get(this,"finish")){e.stop(true)}};s.finish=s;return o||r.queue===false?this.each(s):this.queue(r.queue,s)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop;e(n)};if(typeof t!=="string"){n=e;e=t;t=undefined}if(e&&t!==false){this.queue(t||"fx",[])}return this.each(function(){var e=true,o=t!=null&&t+"queueHooks",r=g.timers,s=G.get(this);if(o){if(s[o]&&s[o].stop){i(s[o])}}else{for(o in s){if(s[o]&&s[o].stop&&ie.test(o)){i(s[o])}}}for(o=r.length;o--;){if(r[o].elem===this&&(t==null||r[o].queue===t)){r[o].anim.stop(n);e=false;r.splice(o,1)}}if(e||!n){g.dequeue(this,t)}})},finish:function(t){if(t!==false){t=t||"fx"}return this.each(function(){var e,n=G.get(this),i=n[t+"queue"],o=n[t+"queueHooks"],r=g.timers,s=i?i.length:0;n.finish=true;g.queue(this,t,[]);if(o&&o.stop){o.stop.call(this,true)}for(e=r.length;e--;){if(r[e].elem===this&&r[e].queue===t){r[e].anim.stop(true);r.splice(e,1)}}for(e=0;e<s;e++){if(i[e]&&i[e].finish){i[e].finish.call(this)}}delete n.finish})}});g.each(["toggle","show","hide"],function(t,e){var n=g.fn[e];g.fn[e]=function(t,i,o){return t==null||typeof t==="boolean"?n.apply(this,arguments):this.animate(se(e,true),t,i,o)}});g.each({slideDown:se("show"),slideUp:se("hide"),slideToggle:se("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){g.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}});g.timers=[];g.fx.tick=function(){var t,e=0,n=g.timers;te=g.now();for(;e<n.length;e++){t=n[e];if(!t()&&n[e]===t){n.splice(e--,1)}}if(!n.length){g.fx.stop()}te=undefined};g.fx.timer=function(t){g.timers.push(t);g.fx.start()};g.fx.interval=13;g.fx.start=function(){if(ee){return}ee=true;oe()};g.fx.stop=function(){ee=null};g.fx.speeds={slow:600,fast:200,_default:400};g.fn.delay=function(e,n){e=g.fx?g.fx.speeds[e]||e:e;n=n||"fx";return this.queue(n,function(n,i){var o=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(o)}})};(function(){var t=i.createElement("input"),e=i.createElement("select"),n=e.appendChild(i.createElement("option"));t.type="checkbox";p.checkOn=t.value!=="";p.optSelected=n.selected;t=i.createElement("input");t.value="t";t.type="radio";p.radioValue=t.value==="t"})();var fe,de=g.expr.attrHandle;g.fn.extend({attr:function(t,e){return V(this,g.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){g.removeAttr(this,t)})}});g.extend({attr:function(t,e,n){var i,o,r=t.nodeType;if(r===3||r===8||r===2){return}if(typeof t.getAttribute==="undefined"){return g.prop(t,e,n)}if(r!==1||!g.isXMLDoc(t)){o=g.attrHooks[e.toLowerCase()]||(g.expr.match.bool.test(e)?fe:undefined)}if(n!==undefined){if(n===null){g.removeAttr(t,e);return}if(o&&"set"in o&&(i=o.set(t,n,e))!==undefined){return i}t.setAttribute(e,n+"");return n}if(o&&"get"in o&&(i=o.get(t,e))!==null){return i}i=g.find.attr(t,e);return i==null?undefined:i},attrHooks:{type:{set:function(t,e){if(!p.radioValue&&e==="radio"&&E(t,"input")){var n=t.value;t.setAttribute("type",e);if(n){t.value=n}return e}}}},removeAttr:function(t,e){var n,i=0,o=e&&e.match(j);if(o&&t.nodeType===1){while(n=o[i++]){t.removeAttribute(n)}}}});fe={set:function(t,e,n){if(e===false){g.removeAttr(t,n)}else{t.setAttribute(n,n)}return n}};g.each(g.expr.match.bool.source.match(/\w+/g),function(t,e){var n=de[e]||g.find.attr;de[e]=function(t,e,i){var o,r,s=e.toLowerCase();if(!i){r=de[s];de[s]=o;o=n(t,e,i)!=null?s:null;de[s]=r}return o}});var he=/^(?:input|select|textarea|button)$/i,pe=/^(?:a|area)$/i;g.fn.extend({prop:function(t,e){return V(this,g.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[g.propFix[t]||t]})}});g.extend({prop:function(t,e,n){var i,o,r=t.nodeType;if(r===3||r===8||r===2){return}if(r!==1||!g.isXMLDoc(t)){e=g.propFix[e]||e;o=g.propHooks[e]}if(n!==undefined){if(o&&"set"in o&&(i=o.set(t,n,e))!==undefined){return i}return t[e]=n}if(o&&"get"in o&&(i=o.get(t,e))!==null){return i}return t[e]},propHooks:{tabIndex:{get:function(t){var e=g.find.attr(t,"tabindex");if(e){return parseInt(e,10)}if(he.test(t.nodeName)||pe.test(t.nodeName)&&t.href){return 0}return-1}}},propFix:{for:"htmlFor",class:"className"}});if(!p.optSelected){g.propHooks.selected={get:function(t){var e=t.parentNode;if(e&&e.parentNode){e.parentNode.selectedIndex}return null},set:function(t){var e=t.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}}}}g.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){g.propFix[this.toLowerCase()]=this});function ve(t){var e=t.match(j)||[];return e.join(" ")}function me(t){return t.getAttribute&&t.getAttribute("class")||""}g.fn.extend({addClass:function(t){var e,n,i,o,r,s,a,l=0;if(g.isFunction(t)){return this.each(function(e){g(this).addClass(t.call(this,e,me(this)))})}if(typeof t==="string"&&t){e=t.match(j)||[];while(n=this[l++]){o=me(n);i=n.nodeType===1&&" "+ve(o)+" ";if(i){s=0;while(r=e[s++]){if(i.indexOf(" "+r+" ")<0){i+=r+" "}}a=ve(i);if(o!==a){n.setAttribute("class",a)}}}}return this},removeClass:function(t){var e,n,i,o,r,s,a,l=0;if(g.isFunction(t)){return this.each(function(e){g(this).removeClass(t.call(this,e,me(this)))})}if(!arguments.length){return this.attr("class","")}if(typeof t==="string"&&t){e=t.match(j)||[];while(n=this[l++]){o=me(n);i=n.nodeType===1&&" "+ve(o)+" ";if(i){s=0;while(r=e[s++]){while(i.indexOf(" "+r+" ")>-1){i=i.replace(" "+r+" "," ")}}a=ve(i);if(o!==a){n.setAttribute("class",a)}}}}return this},toggleClass:function(t,e){var n=typeof t;if(typeof e==="boolean"&&n==="string"){return e?this.addClass(t):this.removeClass(t)}if(g.isFunction(t)){return this.each(function(n){g(this).toggleClass(t.call(this,n,me(this),e),e)})}return this.each(function(){var e,i,o,r;if(n==="string"){i=0;o=g(this);r=t.match(j)||[];while(e=r[i++]){if(o.hasClass(e)){o.removeClass(e)}else{o.addClass(e)}}}else if(t===undefined||n==="boolean"){e=me(this);if(e){G.set(this,"__className__",e)}if(this.setAttribute){this.setAttribute("class",e||t===false?"":G.get(this,"__className__")||"")}}})},hasClass:function(t){var e,n,i=0;e=" "+t+" ";while(n=this[i++]){if(n.nodeType===1&&(" "+ve(me(n))+" ").indexOf(e)>-1){return true}}return false}});var ge=/\r/g;g.fn.extend({val:function(t){var e,n,i,o=this[0];if(!arguments.length){if(o){e=g.valHooks[o.type]||g.valHooks[o.nodeName.toLowerCase()];if(e&&"get"in e&&(n=e.get(o,"value"))!==undefined){return n}n=o.value;if(typeof n==="string"){return n.replace(ge,"")}return n==null?"":n}return}i=g.isFunction(t);return this.each(function(n){var o;if(this.nodeType!==1){return}if(i){o=t.call(this,n,g(this).val())}else{o=t}if(o==null){o=""}else if(typeof o==="number"){o+=""}else if(Array.isArray(o)){o=g.map(o,function(t){return t==null?"":t+""})}e=g.valHooks[this.type]||g.valHooks[this.nodeName.toLowerCase()];if(!e||!("set"in e)||e.set(this,o,"value")===undefined){this.value=o}})}});g.extend({valHooks:{option:{get:function(t){var e=g.find.attr(t,"value");return e!=null?e:ve(g.text(t))}},select:{get:function(t){var e,n,i,o=t.options,r=t.selectedIndex,s=t.type==="select-one",a=s?null:[],l=s?r+1:o.length;if(r<0){i=l}else{i=s?r:0}for(;i<l;i++){n=o[i];if((n.selected||i===r)&&!n.disabled&&(!n.parentNode.disabled||!E(n.parentNode,"optgroup"))){e=g(n).val();if(s){return e}a.push(e)}}return a},set:function(t,e){var n,i,o=t.options,r=g.makeArray(e),s=o.length;while(s--){i=o[s];if(i.selected=g.inArray(g.valHooks.option.get(i),r)>-1){n=true}}if(!n){t.selectedIndex=-1}return r}}}});g.each(["radio","checkbox"],function(){g.valHooks[this]={set:function(t,e){if(Array.isArray(e)){return t.checked=g.inArray(g(t).val(),e)>-1}}};if(!p.checkOn){g.valHooks[this].get=function(t){return t.getAttribute("value")===null?"on":t.value}}});var ye=/^(?:focusinfocus|focusoutblur)$/;g.extend(g.event,{trigger:function(e,n,o,r){var s,a,l,u,c,d,h,p=[o||i],v=f.call(e,"type")?e.type:e,m=f.call(e,"namespace")?e.namespace.split("."):[];a=l=o=o||i;if(o.nodeType===3||o.nodeType===8){return}if(ye.test(v+g.event.triggered)){return}if(v.indexOf(".")>-1){m=v.split(".");v=m.shift();m.sort()}c=v.indexOf(":")<0&&"on"+v;e=e[g.expando]?e:new g.Event(v,typeof e==="object"&&e);e.isTrigger=r?2:3;e.namespace=m.join(".");e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;e.result=undefined;if(!e.target){e.target=o}n=n==null?[e]:g.makeArray(n,[e]);h=g.event.special[v]||{};if(!r&&h.trigger&&h.trigger.apply(o,n)===false){return}if(!r&&!h.noBubble&&!g.isWindow(o)){u=h.delegateType||v;if(!ye.test(u+v)){a=a.parentNode}for(;a;a=a.parentNode){p.push(a);l=a}if(l===(o.ownerDocument||i)){p.push(l.defaultView||l.parentWindow||t)}}s=0;while((a=p[s++])&&!e.isPropagationStopped()){e.type=s>1?u:h.bindType||v;d=(G.get(a,"events")||{})[e.type]&&G.get(a,"handle");if(d){d.apply(a,n)}d=c&&a[c];if(d&&d.apply&&_(a)){e.result=d.apply(a,n);if(e.result===false){e.preventDefault()}}}e.type=v;if(!r&&!e.isDefaultPrevented()){if((!h._default||h._default.apply(p.pop(),n)===false)&&_(o)){if(c&&g.isFunction(o[v])&&!g.isWindow(o)){l=o[c];if(l){o[c]=null}g.event.triggered=v;o[v]();g.event.triggered=undefined;if(l){o[c]=l}}}}return e.result},simulate:function(t,e,n){var i=g.extend(new g.Event,n,{type:t,isSimulated:true});g.event.trigger(i,null,e)}});g.fn.extend({trigger:function(t,e){return this.each(function(){g.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n){return g.event.trigger(t,e,n,true)}}});g.each(("blur focus focusin focusout resize scroll click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup contextmenu").split(" "),function(t,e){g.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}});g.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}});p.focusin="onfocusin"in t;if(!p.focusin){g.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){g.event.simulate(e,t.target,g.event.fix(t))};g.event.special[e]={setup:function(){var i=this.ownerDocument||this,o=G.access(i,e);if(!o){i.addEventListener(t,n,true)}G.access(i,e,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=G.access(i,e)-1;if(!o){i.removeEventListener(t,n,true);G.remove(i,e)}else{G.access(i,e,o)}}}})}var be=t.location;var we=g.now();var xe=/\?/;g.parseXML=function(e){var n;if(!e||typeof e!=="string"){return null}try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){n=undefined}if(!n||n.getElementsByTagName("parsererror").length){g.error("Invalid XML: "+e)}return n};var Ce=/\[\]$/,ke=/\r?\n/g,Te=/^(?:submit|button|image|reset|file)$/i,Se=/^(?:input|select|textarea|keygen)/i;function $e(t,e,n,i){var o;if(Array.isArray(e)){g.each(e,function(e,o){if(n||Ce.test(t)){i(t,o)}else{$e(t+"["+(typeof o==="object"&&o!=null?e:"")+"]",o,n,i)}})}else if(!n&&g.type(e)==="object"){for(o in e){$e(t+"["+o+"]",e[o],n,i)}}else{i(t,e)}}g.param=function(t,e){var n,i=[],o=function(t,e){var n=g.isFunction(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(n==null?"":n)};if(Array.isArray(t)||t.jquery&&!g.isPlainObject(t)){g.each(t,function(){o(this.name,this.value)})}else{for(n in t){$e(n,t[n],e,o)}}return i.join("&")};g.fn.extend({serialize:function(){return g.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=g.prop(this,"elements");return t?g.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!g(this).is(":disabled")&&Se.test(this.nodeName)&&!Te.test(t)&&(this.checked||!ut.test(t))}).map(function(t,e){var n=g(this).val();if(n==null){return null}if(Array.isArray(n)){return g.map(n,function(t){return{name:e.name,value:t.replace(ke,"\r\n")}})}return{name:e.name,value:n.replace(ke,"\r\n")}}).get()}});var Ee=/%20/g,Ne=/#.*$/,Ae=/([?&])_=[^&]*/,Ie=/^(.*?):[ \t]*([^\r\n]*)$/gm,De=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Re=/^(?:GET|HEAD)$/,Le=/^\/\//,He={},Pe={},Fe="*/".concat("*"),je=i.createElement("a");je.href=be.href;function Oe(t){return function(e,n){if(typeof e!=="string"){n=e;e="*"}var i,o=0,r=e.toLowerCase().match(j)||[];if(g.isFunction(n)){while(i=r[o++]){if(i[0]==="+"){i=i.slice(1)||"*";(t[i]=t[i]||[]).unshift(n)}else{(t[i]=t[i]||[]).push(n)}}}}}function Me(t,e,n,i){var o={},r=t===Pe;function s(a){var l;o[a]=true;g.each(t[a]||[],function(t,a){var u=a(e,n,i);if(typeof u==="string"&&!r&&!o[u]){e.dataTypes.unshift(u);s(u);return false}else if(r){return!(l=u)}});return l}return s(e.dataTypes[0])||!o["*"]&&s("*")}function Be(t,e){var n,i,o=g.ajaxSettings.flatOptions||{};for(n in e){if(e[n]!==undefined){(o[n]?t:i||(i={}))[n]=e[n]}}if(i){g.extend(true,t,i)}return t}function ze(t,e,n){var i,o,r,s,a=t.contents,l=t.dataTypes;while(l[0]==="*"){l.shift();if(i===undefined){i=t.mimeType||e.getResponseHeader("Content-Type")}}if(i){for(o in a){if(a[o]&&a[o].test(i)){l.unshift(o);break}}}if(l[0]in n){r=l[0]}else{for(o in n){if(!l[0]||t.converters[o+" "+l[0]]){r=o;break}if(!s){s=o}}r=r||s}if(r){if(r!==l[0]){l.unshift(r)}return n[r]}}function qe(t,e,n,i){var o,r,s,a,l,u={},c=t.dataTypes.slice();if(c[1]){for(s in t.converters){u[s.toLowerCase()]=t.converters[s]}}r=c.shift();while(r){if(t.responseFields[r]){n[t.responseFields[r]]=e}if(!l&&i&&t.dataFilter){e=t.dataFilter(e,t.dataType)}l=r;r=c.shift();if(r){if(r==="*"){r=l}else if(l!=="*"&&l!==r){s=u[l+" "+r]||u["* "+r];if(!s){for(o in u){a=o.split(" ");if(a[1]===r){s=u[l+" "+a[0]]||u["* "+a[0]];if(s){if(s===true){s=u[o]}else if(u[o]!==true){r=a[0];c.unshift(a[1])}break}}}}if(s!==true){if(s&&t.throws){e=s(e)}else{try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+l+" to "+r}}}}}}}return{state:"success",data:e}}g.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:be.href,type:"GET",isLocal:De.test(be.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Fe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":JSON.parse,"text xml":g.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(t,e){return e?Be(Be(t,g.ajaxSettings),e):Be(g.ajaxSettings,t)},ajaxPrefilter:Oe(He),ajaxTransport:Oe(Pe),ajax:function(e,n){if(typeof e==="object"){n=e;e=undefined}n=n||{};var o,r,s,a,l,u,c,f,d,h,p=g.ajaxSetup({},n),v=p.context||p,m=p.context&&(v.nodeType||v.jquery)?g(v):g.event,y=g.Deferred(),b=g.Callbacks("once memory"),w=p.statusCode||{},x={},C={},k="canceled",T={readyState:0,getResponseHeader:function(t){var e;if(c){if(!a){a={};while(e=Ie.exec(s)){a[e[1].toLowerCase()]=e[2]}}e=a[t.toLowerCase()]}return e==null?null:e},getAllResponseHeaders:function(){return c?s:null},setRequestHeader:function(t,e){if(c==null){t=C[t.toLowerCase()]=C[t.toLowerCase()]||t;x[t]=e}return this},overrideMimeType:function(t){if(c==null){p.mimeType=t}return this},statusCode:function(t){var e;if(t){if(c){T.always(t[T.status])}else{for(e in t){w[e]=[w[e],t[e]]}}}return this},abort:function(t){var e=t||k;if(o){o.abort(e)}S(0,e);return this}};y.promise(T);p.url=((e||p.url||be.href)+"").replace(Le,be.protocol+"//");p.type=n.method||n.type||p.method||p.type;p.dataTypes=(p.dataType||"*").toLowerCase().match(j)||[""];if(p.crossDomain==null){u=i.createElement("a");try{u.href=p.url;u.href=u.href;p.crossDomain=je.protocol+"//"+je.host!==u.protocol+"//"+u.host}catch(t){p.crossDomain=true}}if(p.data&&p.processData&&typeof p.data!=="string"){p.data=g.param(p.data,p.traditional)}Me(He,p,n,T);if(c){return T}f=g.event&&p.global;if(f&&g.active++===0){g.event.trigger("ajaxStart")}p.type=p.type.toUpperCase();p.hasContent=!Re.test(p.type);r=p.url.replace(Ne,"");if(!p.hasContent){h=p.url.slice(r.length);if(p.data){r+=(xe.test(r)?"&":"?")+p.data;delete p.data}if(p.cache===false){r=r.replace(Ae,"$1");h=(xe.test(r)?"&":"?")+"_="+we+++h}p.url=r+h}else if(p.data&&p.processData&&(p.contentType||"").indexOf("application/x-www-form-urlencoded")===0){p.data=p.data.replace(Ee,"+")}if(p.ifModified){if(g.lastModified[r]){T.setRequestHeader("If-Modified-Since",g.lastModified[r])}if(g.etag[r]){T.setRequestHeader("If-None-Match",g.etag[r])}}if(p.data&&p.hasContent&&p.contentType!==false||n.contentType){T.setRequestHeader("Content-Type",p.contentType)}T.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+(p.dataTypes[0]!=="*"?", "+Fe+"; q=0.01":""):p.accepts["*"]);for(d in p.headers){T.setRequestHeader(d,p.headers[d])}if(p.beforeSend&&(p.beforeSend.call(v,T,p)===false||c)){return T.abort()}k="abort";b.add(p.complete);T.done(p.success);T.fail(p.error);o=Me(Pe,p,n,T);if(!o){S(-1,"No Transport")}else{T.readyState=1;if(f){m.trigger("ajaxSend",[T,p])}if(c){return T}if(p.async&&p.timeout>0){l=t.setTimeout(function(){T.abort("timeout")},p.timeout)}try{c=false;o.send(x,S)}catch(t){if(c){throw t}S(-1,t)}}function S(e,n,i,a){var u,d,h,x,C,k=n;if(c){return}c=true;if(l){t.clearTimeout(l)}o=undefined;s=a||"";T.readyState=e>0?4:0;u=e>=200&&e<300||e===304;if(i){x=ze(p,T,i)}x=qe(p,x,T,u);if(u){if(p.ifModified){C=T.getResponseHeader("Last-Modified");if(C){g.lastModified[r]=C}C=T.getResponseHeader("etag");if(C){g.etag[r]=C}}if(e===204||p.type==="HEAD"){k="nocontent"}else if(e===304){k="notmodified"}else{k=x.state;d=x.data;h=x.error;u=!h}}else{h=k;if(e||!k){k="error";if(e<0){e=0}}}T.status=e;T.statusText=(n||k)+"";if(u){y.resolveWith(v,[d,k,T])}else{y.rejectWith(v,[T,k,h])}T.statusCode(w);w=undefined;if(f){m.trigger(u?"ajaxSuccess":"ajaxError",[T,p,u?d:h])}b.fireWith(v,[T,k]);if(f){m.trigger("ajaxComplete",[T,p]);if(!--g.active){g.event.trigger("ajaxStop")}}}return T},getJSON:function(t,e,n){return g.get(t,e,n,"json")},getScript:function(t,e){return g.get(t,undefined,e,"script")}});g.each(["get","post"],function(t,e){g[e]=function(t,n,i,o){if(g.isFunction(n)){o=o||i;i=n;n=undefined}return g.ajax(g.extend({url:t,type:e,dataType:o,data:n,success:i},g.isPlainObject(t)&&t))}});g._evalUrl=function(t){return g.ajax({url:t,type:"GET",dataType:"script",cache:true,async:false,global:false,throws:true})};g.fn.extend({wrapAll:function(t){var e;if(this[0]){if(g.isFunction(t)){t=t.call(this[0])}e=g(t,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){e.insertBefore(this[0])}e.map(function(){var t=this;while(t.firstElementChild){t=t.firstElementChild}return t}).append(this)}return this},wrapInner:function(t){if(g.isFunction(t)){return this.each(function(e){g(this).wrapInner(t.call(this,e))})}return this.each(function(){var e=g(this),n=e.contents();if(n.length){n.wrapAll(t)}else{e.append(t)}})},wrap:function(t){var e=g.isFunction(t);return this.each(function(n){g(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){this.parent(t).not("body").each(function(){g(this).replaceWith(this.childNodes)});return this}});g.expr.pseudos.hidden=function(t){return!g.expr.pseudos.visible(t)};g.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)};g.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var Ue={0:200,1223:204},We=g.ajaxSettings.xhr();p.cors=!!We&&"withCredentials"in We;p.ajax=We=!!We;g.ajaxTransport(function(e){var n,i;if(p.cors||We&&!e.crossDomain){return{send:function(o,r){var s,a=e.xhr();a.open(e.type,e.url,e.async,e.username,e.password);if(e.xhrFields){for(s in e.xhrFields){a[s]=e.xhrFields[s]}}if(e.mimeType&&a.overrideMimeType){a.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!o["X-Requested-With"]){o["X-Requested-With"]="XMLHttpRequest"}for(s in o){a.setRequestHeader(s,o[s])}n=function(t){return function(){if(n){n=i=a.onload=a.onerror=a.onabort=a.onreadystatechange=null;if(t==="abort"){a.abort()}else if(t==="error"){if(typeof a.status!=="number"){r(0,"error")}else{r(a.status,a.statusText)}}else{r(Ue[a.status]||a.status,a.statusText,(a.responseType||"text")!=="text"||typeof a.responseText!=="string"?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders())}}}};a.onload=n();i=a.onerror=n("error");if(a.onabort!==undefined){a.onabort=i}else{a.onreadystatechange=function(){if(a.readyState===4){t.setTimeout(function(){if(n){i()}})}}}n=n("abort");try{a.send(e.hasContent&&e.data||null)}catch(t){if(n){throw t}}},abort:function(){if(n){n()}}}}});g.ajaxPrefilter(function(t){if(t.crossDomain){t.contents.script=false}});g.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){g.globalEval(t);return t}}});g.ajaxPrefilter("script",function(t){if(t.cache===undefined){t.cache=false}if(t.crossDomain){t.type="GET"}});g.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(o,r){e=g("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove();n=null;if(t){r(t.type==="error"?404:200,t.type)}});i.head.appendChild(e[0])},abort:function(){if(n){n()}}}}});var Ve=[],_e=/(=)\?(?=&|$)|\?\?/;g.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ve.pop()||g.expando+"_"+we++;this[t]=true;return t}});g.ajaxPrefilter("json jsonp",function(e,n,i){var o,r,s,a=e.jsonp!==false&&(_e.test(e.url)?"url":typeof e.data==="string"&&(e.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&_e.test(e.data)&&"data");if(a||e.dataTypes[0]==="jsonp"){o=e.jsonpCallback=g.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback;if(a){e[a]=e[a].replace(_e,"$1"+o)}else if(e.jsonp!==false){e.url+=(xe.test(e.url)?"&":"?")+e.jsonp+"="+o}e.converters["script json"]=function(){if(!s){g.error(o+" was not called")}return s[0]};e.dataTypes[0]="json";r=t[o];t[o]=function(){s=arguments};i.always(function(){if(r===undefined){g(t).removeProp(o)}else{t[o]=r}if(e[o]){e.jsonpCallback=n.jsonpCallback;Ve.push(o)}if(s&&g.isFunction(r)){r(s[0])}s=r=undefined});return"script"}});p.createHTMLDocument=function(){var t=i.implementation.createHTMLDocument("").body;t.innerHTML="<form></form><form></form>";return t.childNodes.length===2}();g.parseHTML=function(t,e,n){if(typeof t!=="string"){return[]}if(typeof e==="boolean"){n=e;e=false}var o,r,s;if(!e){if(p.createHTMLDocument){e=i.implementation.createHTMLDocument("");o=e.createElement("base");o.href=i.location.href;e.head.appendChild(o)}else{e=i}}r=N.exec(t);s=!n&&[];if(r){return[e.createElement(r[1])]}r=mt([t],e,s);if(s&&s.length){g(s).remove()}return g.merge([],r.childNodes)};g.fn.load=function(t,e,n){var i,o,r,s=this,a=t.indexOf(" ");if(a>-1){i=ve(t.slice(a));t=t.slice(0,a)}if(g.isFunction(e)){n=e;e=undefined}else if(e&&typeof e==="object"){o="POST"}if(s.length>0){g.ajax({url:t,type:o||"GET",dataType:"html",data:e}).done(function(t){r=arguments;s.html(i?g("<div>").append(g.parseHTML(t)).find(i):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,r||[t.responseText,e,t])})})}return this};g.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){g.fn[e]=function(t){return this.on(e,t)}});g.expr.pseudos.animated=function(t){return g.grep(g.timers,function(e){return t===e.elem}).length};g.offset={setOffset:function(t,e,n){var i,o,r,s,a,l,u,c=g.css(t,"position"),f=g(t),d={};if(c==="static"){t.style.position="relative"}a=f.offset();r=g.css(t,"top");l=g.css(t,"left");u=(c==="absolute"||c==="fixed")&&(r+l).indexOf("auto")>-1;if(u){i=f.position();s=i.top;o=i.left}else{s=parseFloat(r)||0;o=parseFloat(l)||0}if(g.isFunction(e)){e=e.call(t,n,g.extend({},a))}if(e.top!=null){d.top=e.top-a.top+s}if(e.left!=null){d.left=e.left-a.left+o}if("using"in e){e.using.call(t,d)}else{f.css(d)}}};g.fn.extend({offset:function(t){if(arguments.length){return t===undefined?this:this.each(function(e){g.offset.setOffset(this,t,e)})}var e,n,i,o,r=this[0];if(!r){return}if(!r.getClientRects().length){return{top:0,left:0}}i=r.getBoundingClientRect();e=r.ownerDocument;n=e.documentElement;o=e.defaultView;return{top:i.top+o.pageYOffset-n.clientTop,left:i.left+o.pageXOffset-n.clientLeft}},position:function(){if(!this[0]){return}var t,e,n=this[0],i={top:0,left:0};if(g.css(n,"position")==="fixed"){e=n.getBoundingClientRect()}else{t=this.offsetParent();e=this.offset();if(!E(t[0],"html")){i=t.offset()}i={top:i.top+g.css(t[0],"borderTopWidth",true),left:i.left+g.css(t[0],"borderLeftWidth",true)}}return{top:e.top-i.top-g.css(n,"marginTop",true),left:e.left-i.left-g.css(n,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var t=this.offsetParent;while(t&&g.css(t,"position")==="static"){t=t.offsetParent}return t||gt})}});g.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;g.fn[t]=function(i){return V(this,function(t,i,o){var r;if(g.isWindow(t)){r=t}else if(t.nodeType===9){r=t.defaultView}if(o===undefined){return r?r[e]:t[i]}if(r){r.scrollTo(!n?o:r.pageXOffset,n?o:r.pageYOffset)}else{t[i]=o}},t,i,arguments.length)}});g.each(["top","left"],function(t,e){g.cssHooks[e]=zt(p.pixelPosition,function(t,n){if(n){n=Bt(t,e);return Ot.test(n)?g(t).position()[e]+"px":n}})});g.each({Height:"height",Width:"width"},function(t,e){g.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){g.fn[i]=function(o,r){var s=arguments.length&&(n||typeof o!=="boolean"),a=n||(o===true||r===true?"margin":"border");return V(this,function(e,n,o){var r;if(g.isWindow(e)){return i.indexOf("outer")===0?e["inner"+t]:e.document.documentElement["client"+t]}if(e.nodeType===9){r=e.documentElement;return Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])}return o===undefined?g.css(e,n,a):g.style(e,n,o,a)},e,s?o:undefined,s)}})});g.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return arguments.length===1?this.off(t,"**"):this.off(e,t||"**",n)}});g.holdReady=function(t){if(t){g.readyWait++}else{g.ready(true)}};g.isArray=Array.isArray;g.parseJSON=JSON.parse;g.nodeName=E;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return g})}var Ke=t.jQuery,Ge=t.$;g.noConflict=function(e){if(t.$===g){t.$=Ge}if(e&&t.jQuery===g){t.jQuery=Ke}return g};if(!e){t.jQuery=t.$=g}return g});if(typeof jQuery==="undefined"){throw new Error("Bootstrap's JavaScript requires jQuery")}+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||e[0]==1&&e[1]==9&&e[2]<1||e[0]>3){throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}}(jQuery);+function(t){"use strict";function e(){var t=document.createElement("bootstrap");var e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e){if(t.style[n]!==undefined){return{end:e[n]}}}return false}t.fn.emulateTransitionEnd=function(e){var n=false;var i=this;t(this).one("bsTransitionEnd",function(){n=true});var o=function(){if(!n)t(i).trigger(t.support.transition.end)};setTimeout(o,e);return this};t(function(){t.support.transition=e();if(!t.support.transition)return;t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}})}(jQuery);+function(t){"use strict";var e='[data-dismiss="alert"]';var n=function(n){t(n).on("click",e,this.close)};n.VERSION="3.3.7";n.TRANSITION_DURATION=150;n.prototype.close=function(e){var i=t(this);var o=i.attr("data-target");if(!o){o=i.attr("href");o=o&&o.replace(/.*(?=#[^\s]*$)/,"")}var r=t(o==="#"?[]:o);if(e)e.preventDefault();if(!r.length){r=i.closest(".alert")}r.trigger(e=t.Event("close.bs.alert"));if(e.isDefaultPrevented())return;r.removeClass("in");function s(){r.detach().trigger("closed.bs.alert").remove()}t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",s).emulateTransitionEnd(n.TRANSITION_DURATION):s()};function i(e){return this.each(function(){var i=t(this);var o=i.data("bs.alert");if(!o)i.data("bs.alert",o=new n(this));if(typeof e=="string")o[e].call(i)})}var o=t.fn.alert;t.fn.alert=i;t.fn.alert.Constructor=n;t.fn.alert.noConflict=function(){t.fn.alert=o;return this};t(document).on("click.bs.alert.data-api",e,n.prototype.close)}(jQuery);+function(t){"use strict";var e=function(n,i){this.$element=t(n);this.options=t.extend({},e.DEFAULTS,i);this.isLoading=false};e.VERSION="3.3.7";e.DEFAULTS={loadingText:"loading..."};e.prototype.setState=function(e){var n="disabled";var i=this.$element;var o=i.is("input")?"val":"html";var r=i.data();e+="Text";if(r.resetText==null)i.data("resetText",i[o]());setTimeout(t.proxy(function(){i[o](r[e]==null?this.options[e]:r[e]);if(e=="loadingText"){this.isLoading=true;i.addClass(n).attr(n,n).prop(n,true)}else if(this.isLoading){this.isLoading=false;i.removeClass(n).removeAttr(n).prop(n,false)}},this),0)};e.prototype.toggle=function(){var t=true;var e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");if(n.prop("type")=="radio"){if(n.prop("checked"))t=false;e.find(".active").removeClass("active");this.$element.addClass("active")}else if(n.prop("type")=="checkbox"){if(n.prop("checked")!==this.$element.hasClass("active"))t=false;this.$element.toggleClass("active")}n.prop("checked",this.$element.hasClass("active"));if(t)n.trigger("change")}else{this.$element.attr("aria-pressed",!this.$element.hasClass("active"));this.$element.toggleClass("active")}};function n(n){return this.each(function(){var i=t(this);var o=i.data("bs.button");var r=typeof n=="object"&&n;if(!o)i.data("bs.button",o=new e(this,r));if(n=="toggle")o.toggle();else if(n)o.setState(n)})}var i=t.fn.button;t.fn.button=n;t.fn.button.Constructor=e;t.fn.button.noConflict=function(){t.fn.button=i;return this};t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var i=t(e.target).closest(".btn");n.call(i,"toggle");if(!t(e.target).is('input[type="radio"], input[type="checkbox"]')){e.preventDefault();if(i.is("input,button"))i.trigger("focus");else i.find("input:visible,button:visible").first().trigger("focus")}}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery);+function(t){"use strict";var e=function(e,n){this.$element=t(e);this.$indicators=this.$element.find(".carousel-indicators");this.options=n;this.paused=null;this.sliding=null;this.interval=null;this.$active=null;this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this));this.options.pause=="hover"&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};e.VERSION="3.3.7";e.TRANSITION_DURATION=600;e.DEFAULTS={interval:5e3,pause:"hover",wrap:true,keyboard:true};e.prototype.keydown=function(t){if(/input|textarea/i.test(t.target.tagName))return;switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()};e.prototype.cycle=function(e){e||(this.paused=false);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval));return this};e.prototype.getItemIndex=function(t){this.$items=t.parent().children(".item");return this.$items.index(t||this.$active)};e.prototype.getItemForDirection=function(t,e){var n=this.getItemIndex(e);var i=t=="prev"&&n===0||t=="next"&&n==this.$items.length-1;if(i&&!this.options.wrap)return e;var o=t=="prev"?-1:1;var r=(n+o)%this.$items.length;return this.$items.eq(r)};e.prototype.to=function(t){var e=this;var n=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(t>this.$items.length-1||t<0)return;if(this.sliding)return this.$element.one("slid.bs.carousel",function(){e.to(t)});if(n==t)return this.pause().cycle();return this.slide(t>n?"next":"prev",this.$items.eq(t))};e.prototype.pause=function(e){e||(this.paused=true);if(this.$element.find(".next, .prev").length&&t.support.transition){this.$element.trigger(t.support.transition.end);this.cycle(true)}this.interval=clearInterval(this.interval);return this};e.prototype.next=function(){if(this.sliding)return;return this.slide("next")};e.prototype.prev=function(){if(this.sliding)return;return this.slide("prev")};e.prototype.slide=function(n,i){var o=this.$element.find(".item.active");var r=i||this.getItemForDirection(n,o);var s=this.interval;var a=n=="next"?"left":"right";var l=this;if(r.hasClass("active"))return this.sliding=false;var u=r[0];var c=t.Event("slide.bs.carousel",{relatedTarget:u,direction:a});this.$element.trigger(c);if(c.isDefaultPrevented())return;this.sliding=true;s&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var f=t(this.$indicators.children()[this.getItemIndex(r)]);f&&f.addClass("active")}var d=t.Event("slid.bs.carousel",{relatedTarget:u,direction:a});if(t.support.transition&&this.$element.hasClass("slide")){r.addClass(n);r[0].offsetWidth;o.addClass(a);r.addClass(a);o.one("bsTransitionEnd",function(){r.removeClass([n,a].join(" ")).addClass("active");o.removeClass(["active",a].join(" "));l.sliding=false;setTimeout(function(){l.$element.trigger(d)},0)}).emulateTransitionEnd(e.TRANSITION_DURATION)}else{o.removeClass("active");r.addClass("active");this.sliding=false;this.$element.trigger(d)}s&&this.cycle();return this};function n(n){return this.each(function(){var i=t(this);var o=i.data("bs.carousel");var r=t.extend({},e.DEFAULTS,i.data(),typeof n=="object"&&n);var s=typeof n=="string"?n:r.slide;if(!o)i.data("bs.carousel",o=new e(this,r));if(typeof n=="number")o.to(n);else if(s)o[s]();else if(r.interval)o.pause().cycle()})}var i=t.fn.carousel;t.fn.carousel=n;t.fn.carousel.Constructor=e;t.fn.carousel.noConflict=function(){t.fn.carousel=i;return this};var o=function(e){var i;var o=t(this);var r=t(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(!r.hasClass("carousel"))return;var s=t.extend({},r.data(),o.data());var a=o.attr("data-slide-to");if(a)s.interval=false;n.call(r,s);if(a){r.data("bs.carousel").to(a)}e.preventDefault()};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o);t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery);+function(t){"use strict";var e=function(n,i){this.$element=t(n);this.options=t.extend({},e.DEFAULTS,i);this.$trigger=t('[data-toggle="collapse"][href="#'+n.id+'"],'+'[data-toggle="collapse"][data-target="#'+n.id+'"]');this.transitioning=null;if(this.options.parent){this.$parent=this.getParent()}else{this.addAriaAndCollapsedClass(this.$element,this.$trigger)}if(this.options.toggle)this.toggle()};e.VERSION="3.3.7";e.TRANSITION_DURATION=350;e.DEFAULTS={toggle:true};e.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"};e.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var n;var o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(o&&o.length){n=o.data("bs.collapse");if(n&&n.transitioning)return}var r=t.Event("show.bs.collapse");this.$element.trigger(r);if(r.isDefaultPrevented())return;if(o&&o.length){i.call(o,"hide");n||o.data("bs.collapse",null)}var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",true);this.$trigger.removeClass("collapsed").attr("aria-expanded",true);this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var l=t.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(e.TRANSITION_DURATION)[s](this.$element[0][l])};e.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var n=t.Event("hide.bs.collapse");this.$element.trigger(n);if(n.isDefaultPrevented())return;var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",false);this.$trigger.addClass("collapsed").attr("aria-expanded",false);this.transitioning=1;var o=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!t.support.transition)return o.call(this);this.$element[i](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(e.TRANSITION_DURATION)};e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};e.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(e,i){var o=t(i);this.addAriaAndCollapsedClass(n(o),o)},this)).end()};e.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n);e.toggleClass("collapsed",!n).attr("aria-expanded",n)};function n(e){var n;var i=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(i)}function i(n){return this.each(function(){var i=t(this);var o=i.data("bs.collapse");var r=t.extend({},e.DEFAULTS,i.data(),typeof n=="object"&&n);if(!o&&r.toggle&&/show|hide/.test(n))r.toggle=false;if(!o)i.data("bs.collapse",o=new e(this,r));if(typeof n=="string")o[n]()})}var o=t.fn.collapse;t.fn.collapse=i;t.fn.collapse.Constructor=e;t.fn.collapse.noConflict=function(){t.fn.collapse=o;return this};t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var o=t(this);if(!o.attr("data-target"))e.preventDefault();var r=n(o);var s=r.data("bs.collapse");var a=s?"toggle":o.data();i.call(r,a)})}(jQuery);+function(t){"use strict";var e=".dropdown-backdrop";var n='[data-toggle="dropdown"]';var i=function(e){t(e).on("click.bs.dropdown",this.toggle)};i.VERSION="3.3.7";function o(e){var n=e.attr("data-target");if(!n){n=e.attr("href");n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")}var i=n&&t(n);return i&&i.length?i:e.parent()}function r(i){if(i&&i.which===3)return;t(e).remove();t(n).each(function(){var e=t(this);var n=o(e);var r={relatedTarget:this};if(!n.hasClass("open"))return;if(i&&i.type=="click"&&/input|textarea/i.test(i.target.tagName)&&t.contains(n[0],i.target))return;n.trigger(i=t.Event("hide.bs.dropdown",r));if(i.isDefaultPrevented())return;e.attr("aria-expanded","false");n.removeClass("open").trigger(t.Event("hidden.bs.dropdown",r))})}i.prototype.toggle=function(e){var n=t(this);if(n.is(".disabled, :disabled"))return;var i=o(n);var s=i.hasClass("open");r();if(!s){if("ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length){t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",r)}var a={relatedTarget:this};i.trigger(e=t.Event("show.bs.dropdown",a));if(e.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true");i.toggleClass("open").trigger(t.Event("shown.bs.dropdown",a))}return false};i.prototype.keydown=function(e){if(!/(38|40|27|32)/.test(e.which)||/input|textarea/i.test(e.target.tagName))return;var i=t(this);e.preventDefault();e.stopPropagation();if(i.is(".disabled, :disabled"))return;var r=o(i);var s=r.hasClass("open");if(!s&&e.which!=27||s&&e.which==27){if(e.which==27)r.find(n).trigger("focus");return i.trigger("click")}var a=" li:not(.disabled):visible a";var l=r.find(".dropdown-menu"+a);if(!l.length)return;var u=l.index(e.target);if(e.which==38&&u>0)u--;if(e.which==40&&u<l.length-1)u++;if(!~u)u=0;l.eq(u).trigger("focus")};function s(e){return this.each(function(){var n=t(this);var o=n.data("bs.dropdown");if(!o)n.data("bs.dropdown",o=new i(this));if(typeof e=="string")o[e].call(n)})}var a=t.fn.dropdown;t.fn.dropdown=s;t.fn.dropdown.Constructor=i;t.fn.dropdown.noConflict=function(){t.fn.dropdown=a;return this};t(document).on("click.bs.dropdown.data-api",r).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",n,i.prototype.toggle).on("keydown.bs.dropdown.data-api",n,i.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",i.prototype.keydown)}(jQuery);+function(t){"use strict";var e=function(e,n){this.options=n;this.$body=t(document.body);this.$element=t(e);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=false;if(this.options.remote){this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}};e.VERSION="3.3.7";e.TRANSITION_DURATION=300;e.BACKDROP_TRANSITION_DURATION=150;e.DEFAULTS={backdrop:true,keyboard:true,show:true};e.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)};e.prototype.show=function(n){var i=this;var o=t.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(o);if(this.isShown||o.isDefaultPrevented())return;this.isShown=true;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this));this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(e){if(t(e.target).is(i.$element))i.ignoreBackdropClick=true})});this.backdrop(function(){var o=t.support.transition&&i.$element.hasClass("fade");if(!i.$element.parent().length){i.$element.appendTo(i.$body)}i.$element.show().scrollTop(0);i.adjustDialog();if(o){i.$element[0].offsetWidth}i.$element.addClass("in");i.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:n});o?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(e.TRANSITION_DURATION):i.$element.trigger("focus").trigger(r)})};e.prototype.hide=function(n){if(n)n.preventDefault();n=t.Event("hide.bs.modal");this.$element.trigger(n);if(!this.isShown||n.isDefaultPrevented())return;this.isShown=false;this.escape();this.resize();t(document).off("focusin.bs.modal");this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal");this.$dialog.off("mousedown.dismiss.bs.modal");t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(e.TRANSITION_DURATION):this.hideModal()};e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){if(document!==t.target&&this.$element[0]!==t.target&&!this.$element.has(t.target).length){this.$element.trigger("focus")}},this))};e.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){t.which==27&&this.hide()},this))}else if(!this.isShown){this.$element.off("keydown.dismiss.bs.modal")}};e.prototype.resize=function(){if(this.isShown){t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this))}else{t(window).off("resize.bs.modal")}};e.prototype.hideModal=function(){var t=this;this.$element.hide();this.backdrop(function(){t.$body.removeClass("modal-open");t.resetAdjustments();t.resetScrollbar();t.$element.trigger("hidden.bs.modal")})};e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};e.prototype.backdrop=function(n){var i=this;var o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&o;this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){if(this.ignoreBackdropClick){this.ignoreBackdropClick=false;return}if(t.target!==t.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus():this.hide()},this));if(r)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");if(!n)return;r?this.$backdrop.one("bsTransitionEnd",n).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):n()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){i.removeBackdrop();n&&n()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(e.BACKDROP_TRANSITION_DURATION):s()}else if(n){n()}};e.prototype.handleUpdate=function(){this.adjustDialog()};e.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})};e.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};e.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t;this.scrollbarWidth=this.measureScrollbar()};e.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";if(this.bodyIsOverflowing)this.$body.css("padding-right",t+this.scrollbarWidth)};e.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};e.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure";this.$body.append(t);var e=t.offsetWidth-t.clientWidth;this.$body[0].removeChild(t);return e};function n(n,i){return this.each(function(){var o=t(this);var r=o.data("bs.modal");var s=t.extend({},e.DEFAULTS,o.data(),typeof n=="object"&&n);if(!r)o.data("bs.modal",r=new e(this,s));if(typeof n=="string")r[n](i);else if(s.show)r.show(i)})}var i=t.fn.modal;t.fn.modal=n;t.fn.modal.Constructor=e;t.fn.modal.noConflict=function(){t.fn.modal=i;return this};t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var i=t(this);var o=i.attr("href");var r=t(i.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,""));var s=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},r.data(),i.data());if(i.is("a"))e.preventDefault();r.one("show.bs.modal",function(t){if(t.isDefaultPrevented())return;r.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})});n.call(r,s,this)})}(jQuery);+function(t){"use strict";var e=function(t,e){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.inState=null;this.init("tooltip",t,e)};e.VERSION="3.3.7";e.TRANSITION_DURATION=150;e.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0}};e.prototype.init=function(e,n,i){this.enabled=true;this.type=e;this.$element=t(n);this.options=this.getOptions(i);this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport);this.inState={click:false,hover:false,focus:false};if(this.$element[0]instanceof document.constructor&&!this.options.selector){throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!")}var o=this.options.trigger.split(" ");for(var r=o.length;r--;){var s=o[r];if(s=="click"){this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this))}else if(s!="manual"){var a=s=="hover"?"mouseenter":"focusin";var l=s=="hover"?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this));this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};e.prototype.getDefaults=function(){return e.DEFAULTS};e.prototype.getOptions=function(e){e=t.extend({},this.getDefaults(),this.$element.data(),e);if(e.delay&&typeof e.delay=="number"){e.delay={show:e.delay,hide:e.delay}}return e};e.prototype.getDelegateOptions=function(){var e={};var n=this.getDefaults();this._options&&t.each(this._options,function(t,i){if(n[t]!=i)e[t]=i});return e};e.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(!n){n=new this.constructor(e.currentTarget,this.getDelegateOptions());t(e.currentTarget).data("bs."+this.type,n)}if(e instanceof t.Event){n.inState[e.type=="focusin"?"focus":"hover"]=true}if(n.tip().hasClass("in")||n.hoverState=="in"){n.hoverState="in";return}clearTimeout(n.timeout);n.hoverState="in";if(!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout(function(){if(n.hoverState=="in")n.show()},n.options.delay.show)};e.prototype.isInStateTrue=function(){for(var t in this.inState){if(this.inState[t])return true}return false};e.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(!n){n=new this.constructor(e.currentTarget,this.getDelegateOptions());t(e.currentTarget).data("bs."+this.type,n)}if(e instanceof t.Event){n.inState[e.type=="focusout"?"focus":"hover"]=false}if(n.isInStateTrue())return;clearTimeout(n.timeout);n.hoverState="out";if(!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout(function(){if(n.hoverState=="out")n.hide()},n.options.delay.hide)};e.prototype.show=function(){var n=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(n);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(n.isDefaultPrevented()||!i)return;var o=this;var r=this.tip();var s=this.getUID(this.type);this.setContent();r.attr("id",s);this.$element.attr("aria-describedby",s);if(this.options.animation)r.addClass("fade");var a=typeof this.options.placement=="function"?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement;var l=/\s?auto?\s?/i;var u=l.test(a);if(u)a=a.replace(l,"")||"top";r.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this);this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition();var f=r[0].offsetWidth;var d=r[0].offsetHeight;if(u){var h=a;var p=this.getPosition(this.$viewport);a=a=="bottom"&&c.bottom+d>p.bottom?"top":a=="top"&&c.top-d<p.top?"bottom":a=="right"&&c.right+f>p.width?"left":a=="left"&&c.left-f<p.left?"right":a;r.removeClass(h).addClass(a)}var v=this.getCalculatedOffset(a,c,f,d);this.applyPlacement(v,a);var m=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type);o.hoverState=null;if(t=="out")o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",m).emulateTransitionEnd(e.TRANSITION_DURATION):m()}};e.prototype.applyPlacement=function(e,n){var i=this.tip();var o=i[0].offsetWidth;var r=i[0].offsetHeight;var s=parseInt(i.css("margin-top"),10);var a=parseInt(i.css("margin-left"),10);if(isNaN(s))s=0;if(isNaN(a))a=0;e.top+=s;e.left+=a;t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0);i.addClass("in");var l=i[0].offsetWidth;var u=i[0].offsetHeight;if(n=="top"&&u!=r){e.top=e.top+r-u}var c=this.getViewportAdjustedDelta(n,e,l,u);if(c.left)e.left+=c.left;else e.top+=c.top;var f=/top|bottom/.test(n);var d=f?c.left*2-o+l:c.top*2-r+u;var h=f?"offsetWidth":"offsetHeight";i.offset(e);this.replaceArrow(d,i[0][h],f)};e.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")};e.prototype.setContent=function(){var t=this.tip();var e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e);t.removeClass("fade in top bottom left right")};e.prototype.hide=function(n){var i=this;var o=t(this.$tip);var r=t.Event("hide.bs."+this.type);function s(){if(i.hoverState!="in")o.detach();if(i.$element){i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type)}n&&n()}this.$element.trigger(r);if(r.isDefaultPrevented())return;o.removeClass("in");t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",s).emulateTransitionEnd(e.TRANSITION_DURATION):s();this.hoverState=null;return this};e.prototype.fixTitle=function(){var t=this.$element;if(t.attr("title")||typeof t.attr("data-original-title")!="string"){t.attr("data-original-title",t.attr("title")||"").attr("title","")}};e.prototype.hasContent=function(){return this.getTitle()};e.prototype.getPosition=function(e){e=e||this.$element;var n=e[0];var i=n.tagName=="BODY";var o=n.getBoundingClientRect();if(o.width==null){o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top})}var r=window.SVGElement&&n instanceof window.SVGElement;var s=i?{top:0,left:0}:r?null:e.offset();var a={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()};var l=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,a,l,s)};e.prototype.getCalculatedOffset=function(t,e,n,i){return t=="bottom"?{top:e.top+e.height,left:e.left+e.width/2-n/2}:t=="top"?{top:e.top-i,left:e.left+e.width/2-n/2}:t=="left"?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}};e.prototype.getViewportAdjustedDelta=function(t,e,n,i){var o={top:0,left:0};if(!this.$viewport)return o;var r=this.options.viewport&&this.options.viewport.padding||0;var s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-r-s.scroll;var l=e.top+r-s.scroll+i;if(a<s.top){o.top=s.top-a}else if(l>s.top+s.height){o.top=s.top+s.height-l}}else{var u=e.left-r;var c=e.left+r+n;if(u<s.left){o.left=s.left-u}else if(c>s.right){o.left=s.left+s.width-c}}return o};e.prototype.getTitle=function(){var t;var e=this.$element;var n=this.options;t=e.attr("data-original-title")||(typeof n.title=="function"?n.title.call(e[0]):n.title);return t};e.prototype.getUID=function(t){do{t+=~~(Math.random()*1e6)}while(document.getElementById(t));return t};e.prototype.tip=function(){if(!this.$tip){this.$tip=t(this.options.template);if(this.$tip.length!=1){throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")}}return this.$tip};e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};e.prototype.enable=function(){this.enabled=true};e.prototype.disable=function(){this.enabled=false};e.prototype.toggleEnabled=function(){this.enabled=!this.enabled};e.prototype.toggle=function(e){var n=this;if(e){n=t(e.currentTarget).data("bs."+this.type);if(!n){n=new this.constructor(e.currentTarget,this.getDelegateOptions());t(e.currentTarget).data("bs."+this.type,n)}}if(e){n.inState.click=!n.inState.click;if(n.isInStateTrue())n.enter(n);else n.leave(n)}else{n.tip().hasClass("in")?n.leave(n):n.enter(n)}};e.prototype.destroy=function(){var t=this;clearTimeout(this.timeout);this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type);if(t.$tip){t.$tip.detach()}t.$tip=null;t.$arrow=null;t.$viewport=null;t.$element=null})};function n(n){return this.each(function(){var i=t(this);var o=i.data("bs.tooltip");var r=typeof n=="object"&&n;if(!o&&/destroy|hide/.test(n))return;if(!o)i.data("bs.tooltip",o=new e(this,r));if(typeof n=="string")o[n]()})}var i=t.fn.tooltip;t.fn.tooltip=n;t.fn.tooltip.Constructor=e;t.fn.tooltip.noConflict=function(){t.fn.tooltip=i;return this}}(jQuery);+function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.VERSION="3.3.7";e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype);e.prototype.constructor=e;e.prototype.getDefaults=function(){return e.DEFAULTS};e.prototype.setContent=function(){var t=this.tip();var e=this.getTitle();var n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e);t.find(".popover-content").children().detach().end()[this.options.html?typeof n=="string"?"html":"append":"text"](n);t.removeClass("fade top bottom left right in");if(!t.find(".popover-title").html())t.find(".popover-title").hide()};e.prototype.hasContent=function(){return this.getTitle()||this.getContent()};e.prototype.getContent=function(){var t=this.$element;var e=this.options;return t.attr("data-content")||(typeof e.content=="function"?e.content.call(t[0]):e.content)};e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};function n(n){return this.each(function(){var i=t(this);var o=i.data("bs.popover");var r=typeof n=="object"&&n;if(!o&&/destroy|hide/.test(n))return;if(!o)i.data("bs.popover",o=new e(this,r));if(typeof n=="string")o[n]()})}var i=t.fn.popover;t.fn.popover=n;t.fn.popover.Constructor=e;t.fn.popover.noConflict=function(){t.fn.popover=i;return this}}(jQuery);+function(t){"use strict";function e(n,i){this.$body=t(document.body);this.$scrollElement=t(n).is(document.body)?t(window):t(n);this.options=t.extend({},e.DEFAULTS,i);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this));this.refresh();this.process()}e.VERSION="3.3.7";e.DEFAULTS={offset:10};e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};e.prototype.refresh=function(){var e=this;var n="offset";var i=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();if(!t.isWindow(this.$scrollElement[0])){n="position";i=this.$scrollElement.scrollTop()}this.$body.find(this.selector).map(function(){var e=t(this);var o=e.data("target")||e.attr("href");var r=/^#./.test(o)&&t(o);return r&&r.length&&r.is(":visible")&&[[r[n]().top+i,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]);e.targets.push(this[1])})};e.prototype.process=function(){var t=this.$scrollElement.scrollTop()+this.options.offset;var e=this.getScrollHeight();var n=this.options.offset+e-this.$scrollElement.height();var i=this.offsets;var o=this.targets;var r=this.activeTarget;var s;if(this.scrollHeight!=e){this.refresh()}if(t>=n){return r!=(s=o[o.length-1])&&this.activate(s)}if(r&&t<i[0]){this.activeTarget=null;return this.clear()}for(s=i.length;s--;){r!=o[s]&&t>=i[s]&&(i[s+1]===undefined||t<i[s+1])&&this.activate(o[s])}};e.prototype.activate=function(e){this.activeTarget=e;this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]';var i=t(n).parents("li").addClass("active");if(i.parent(".dropdown-menu").length){i=i.closest("li.dropdown").addClass("active")}i.trigger("activate.bs.scrollspy")};e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};function n(n){return this.each(function(){var i=t(this);var o=i.data("bs.scrollspy");var r=typeof n=="object"&&n;if(!o)i.data("bs.scrollspy",o=new e(this,r));if(typeof n=="string")o[n]()})}var i=t.fn.scrollspy;t.fn.scrollspy=n;t.fn.scrollspy.Constructor=e;t.fn.scrollspy.noConflict=function(){t.fn.scrollspy=i;return this};t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery);+function(t){"use strict";var e=function(e){this.element=t(e)};e.VERSION="3.3.7";e.TRANSITION_DURATION=150;e.prototype.show=function(){var e=this.element;var n=e.closest("ul:not(.dropdown-menu)");var i=e.data("target");if(!i){i=e.attr("href");i=i&&i.replace(/.*(?=#[^\s]*$)/,"")}if(e.parent("li").hasClass("active"))return;var o=n.find(".active:last a");var r=t.Event("hide.bs.tab",{relatedTarget:e[0]});var s=t.Event("show.bs.tab",{relatedTarget:o[0]});o.trigger(r);e.trigger(s);if(s.isDefaultPrevented()||r.isDefaultPrevented())return;var a=t(i);this.activate(e.closest("li"),n);this.activate(a,a.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]});e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})};e.prototype.activate=function(n,i,o){var r=i.find("> .active");var s=o&&t.support.transition&&(r.length&&r.hasClass("fade")||!!i.find("> .fade").length);function a(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",false);n.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",true);if(s){n[0].offsetWidth;n.addClass("in")}else{n.removeClass("fade")}if(n.parent(".dropdown-menu").length){n.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",true)}o&&o()}r.length&&s?r.one("bsTransitionEnd",a).emulateTransitionEnd(e.TRANSITION_DURATION):a();r.removeClass("in")};function n(n){return this.each(function(){var i=t(this);var o=i.data("bs.tab");if(!o)i.data("bs.tab",o=new e(this));if(typeof n=="string")o[n]()})}var i=t.fn.tab;t.fn.tab=n;t.fn.tab.Constructor=e;t.fn.tab.noConflict=function(){t.fn.tab=i;return this};var o=function(e){e.preventDefault();n.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery);+function(t){"use strict";var e=function(n,i){this.options=t.extend({},e.DEFAULTS,i);this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this));this.$element=t(n);this.affixed=null;this.unpin=null;this.pinnedOffset=null;this.checkPosition()};e.VERSION="3.3.7";e.RESET="affix affix-top affix-bottom";e.DEFAULTS={offset:0,target:window};e.prototype.getState=function(t,e,n,i){var o=this.$target.scrollTop();var r=this.$element.offset();var s=this.$target.height();if(n!=null&&this.affixed=="top")return o<n?"top":false;if(this.affixed=="bottom"){if(n!=null)return o+this.unpin<=r.top?false:"bottom";return o+s<=t-i?false:"bottom"}var a=this.affixed==null;var l=a?o:r.top;var u=a?s:e;if(n!=null&&o<=n)return"top";if(i!=null&&l+u>=t-i)return"bottom";return false};e.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(e.RESET).addClass("affix");var t=this.$target.scrollTop();var n=this.$element.offset();return this.pinnedOffset=n.top-t};e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)};e.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var n=this.$element.height();var i=this.options.offset;var o=i.top;var r=i.bottom;var s=Math.max(t(document).height(),t(document.body).height());if(typeof i!="object")r=o=i;if(typeof o=="function")o=i.top(this.$element);if(typeof r=="function")r=i.bottom(this.$element);var a=this.getState(s,n,o,r);if(this.affixed!=a){if(this.unpin!=null)this.$element.css("top","");var l="affix"+(a?"-"+a:"");var u=t.Event(l+".bs.affix");this.$element.trigger(u);if(u.isDefaultPrevented())return;this.affixed=a;this.unpin=a=="bottom"?this.getPinnedOffset():null;this.$element.removeClass(e.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}if(a=="bottom"){this.$element.offset({top:s-n-r})}};function n(n){return this.each(function(){var i=t(this);var o=i.data("bs.affix");var r=typeof n=="object"&&n;if(!o)i.data("bs.affix",o=new e(this,r));if(typeof n=="string")o[n]()})}var i=t.fn.affix;t.fn.affix=n;t.fn.affix.Constructor=e;t.fn.affix.noConflict=function(){t.fn.affix=i;return this};t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this);var i=e.data();i.offset=i.offset||{};if(i.offsetBottom!=null)i.offset.bottom=i.offsetBottom;if(i.offsetTop!=null)i.offset.top=i.offsetTop;n.call(e,i)})})}(jQuery);(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(require("jquery")):typeof define==="function"&&define.amd?define(["jquery"],e):e(t.jQuery)})(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t["default"]:t;var e=function(){function e(t,e,n,i){this.markup=t;this.children=e;this.options=n;this.callback=i}e.prototype.render=function(e){var n=t(this.markup);if(this.options&&this.options.contents){n.html(this.options.contents)}if(this.options&&this.options.className){n.addClass(this.options.className)}if(this.options&&this.options.data){t.each(this.options.data,function(t,e){n.attr("data-"+t,e)})}if(this.options&&this.options.click){n.on("click",this.options.click)}if(this.children){var i=n.find(".note-children-container");this.children.forEach(function(t){t.render(i.length?i:n)})}if(this.callback){this.callback(n,this.options)}if(this.options&&this.options.callback){this.options.callback(n)}if(e){e.append(n)}return n};return e}();var n={create:function(n,i){return function(){var o=typeof arguments[1]==="object"?arguments[1]:arguments[0];var r=t.isArray(arguments[0])?arguments[0]:[];if(o&&o.children){r=o.children}return new e(n,r,o,i)}}};var i=n.create('<div class="note-editor note-frame panel"/>');var o=n.create('<div class="note-toolbar-wrapper panel-default"><div class="note-toolbar panel-heading"></div></div>');var r=n.create('<div class="note-editing-area"/>');var s=n.create('<textarea class="note-codable"/>');var a=n.create('<div class="note-editable" contentEditable="true"/>');var l=n.create(['<div class="note-statusbar">','  <div class="note-resizebar">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join(""));var u=n.create('<div class="note-editor"/>');var c=n.create('<div class="note-editable" contentEditable="true"/>');var f=n.create('<div class="note-btn-group btn-group">');var d=n.create('<div class="dropdown-menu">',function(e,n){var i=t.isArray(n.items)?n.items.map(function(t){var e=typeof t==="string"?t:t.value||"";var i=n.template?n.template(t):t;var o=typeof t==="object"?t.option:undefined;var r='data-value="'+e+'"';var s=o!==undefined?' data-option="'+o+'"':"";return'<li><a href="#" '+(r+s)+">"+i+"</a></li>"}).join(""):n.items;e.html(i)});var h=function(t,e){return t+" "+b(e.icons.caret,"span")};var p=n.create('<div class="dropdown-menu note-check">',function(e,n){var i=t.isArray(n.items)?n.items.map(function(t){var e=typeof t==="string"?t:t.value||"";var i=n.template?n.template(t):t;return'<li><a href="#" data-value="'+e+'">'+b(n.checkClassName)+" "+i+"</a></li>"}).join(""):n.items;e.html(i)});var v=n.create('<div class="note-color-palette"/>',function(t,e){var n=[];for(var i=0,o=e.colors.length;i<o;i++){var r=e.eventName;var s=e.colors[i];var a=[];for(var l=0,u=s.length;l<u;l++){var c=s[l];a.push(['<button type="button" class="note-color-btn"','style="background-color:',c,'" ','data-event="',r,'" ','data-value="',c,'" ','title="',c,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}n.push('<div class="note-color-row">'+a.join("")+"</div>")}t.html(n.join(""));if(e.tooltip){t.find(".note-color-btn").tooltip({container:e.container,trigger:"hover",placement:"bottom"})}});var m=n.create('<div class="modal" aria-hidden="false" tabindex="-1"/>',function(t,e){if(e.fade){t.addClass("fade")}t.html(['<div class="modal-dialog">','  <div class="modal-content">',e.title?'    <div class="modal-header">'+'      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+'      <h4 class="modal-title">'+e.title+"</h4>"+"    </div>":"",'    <div class="modal-body">'+e.body+"</div>",e.footer?'    <div class="modal-footer">'+e.footer+"</div>":"","  </div>","</div>"].join(""))});var g=n.create(['<div class="note-popover popover in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(t,e){var n=typeof e.direction!=="undefined"?e.direction:"bottom";t.addClass(n);if(e.hideArrow){t.find(".arrow").hide()}});var y=n.create('<div class="checkbox"></div>',function(t,e){t.html([" <label"+(e.id?' for="'+e.id+'"':"")+">",' <input type="checkbox"'+(e.id?' id="'+e.id+'"':""),(e.checked?" checked":"")+"/>",e.text?e.text:"","</label>"].join(""))});var b=function(t,e){e=e||"i";return"<"+e+' class="'+t+'"/>'};var w={editor:i,toolbar:o,editingArea:r,codable:s,editable:a,statusbar:l,airEditor:u,airEditable:c,buttonGroup:f,dropdown:d,dropdownButtonContents:h,dropdownCheck:p,palette:v,dialog:m,popover:g,checkbox:y,icon:b,options:{},button:function(t,e){return n.create('<button type="button" class="note-btn btn btn-default btn-sm" tabindex="-1">',function(t,e){if(e&&e.tooltip){t.attr({title:e.tooltip}).tooltip({container:e.container,trigger:"hover",placement:"bottom"})}})(t,e)},toggleBtn:function(t,e){t.toggleClass("disabled",!e);t.attr("disabled",!e)},toggleBtnActive:function(t,e){t.toggleClass("active",e)},onDialogShown:function(t,e){t.one("shown.bs.modal",e)},onDialogHidden:function(t,e){t.one("hidden.bs.modal",e)},showDialog:function(t){t.modal("show")},hideDialog:function(t){t.modal("hide")},createLayout:function(t,e){var n=(e.airMode?w.airEditor([w.editingArea([w.airEditable()])]):w.editor([w.toolbar(),w.editingArea([w.codable(),w.editable()]),w.statusbar()])).render();n.insertAfter(t);return{note:t,editor:n,toolbar:n.find(".note-toolbar"),editingArea:n.find(".note-editing-area"),editable:n.find(".note-editable"),codable:n.find(".note-codable"),statusbar:n.find(".note-statusbar")}},removeLayout:function(t,e){t.html(e.editable.html());e.editor.remove();t.show()}};function x(t){return function(e){return t===e}}function C(t,e){return t===e}function k(t){return function(e,n){return e[t]===n[t]}}function T(){return true}function S(){return false}function E(t){return function(){return!t.apply(t,arguments)}}function N(t,e){return function(n){return t(n)&&e(n)}}function A(t){return t}function I(t,e){return function(){return t[e].apply(t,arguments)}}var D=0;function R(t){var e=++D+"";return t?t+e:e}function L(t){var e=$(document);return{top:t.top+e.scrollTop(),left:t.left+e.scrollLeft(),width:t.right-t.left,height:t.bottom-t.top}}function H(t){var e={};for(var n in t){if(t.hasOwnProperty(n)){e[t[n]]=n}}return e}function P(t,e){e=e||"";return e+t.split(".").map(function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}).join("")}function F(t,e,n){var i=this;var o;return function(){var r=i;var s=arguments;var a=function(){o=null;if(!n){t.apply(r,s)}};var l=n&&!o;clearTimeout(o);o=setTimeout(a,e);if(l){t.apply(r,s)}}}var j={eq:x,eq2:C,peq2:k,ok:T,fail:S,self:A,not:E,and:N,invoke:I,uniqueId:R,rect2bnd:L,invertObject:H,namespaceToCamel:P,debounce:F};function O(t){return t[0]}function M(t){return t[t.length-1]}function B(t){return t.slice(0,t.length-1)}function z(t){return t.slice(1)}function q(t,e){for(var n=0,i=t.length;n<i;n++){var o=t[n];if(e(o)){return o}}}function U(t,e){for(var n=0,i=t.length;n<i;n++){if(!e(t[n])){return false}}return true}function W(e,n){return t.inArray(n,e)}function V(t,e){return W(t,e)!==-1}function _(t,e){e=e||j.self;return t.reduce(function(t,n){return t+e(n)},0)}function K(t){var e=[];var n=t.length;var i=-1;while(++i<n){e[i]=t[i]}return e}function G(t){return!t||!t.length}function Q(t,e){if(!t.length){return[]}var n=z(t);return n.reduce(function(t,n){var i=M(t);if(e(M(i),n)){i[i.length]=n}else{t[t.length]=[n]}return t},[[O(t)]])}function X(t){var e=[];for(var n=0,i=t.length;n<i;n++){if(t[n]){e.push(t[n])}}return e}function Y(t){var e=[];for(var n=0,i=t.length;n<i;n++){if(!V(e,t[n])){e.push(t[n])}}return e}function J(t,e){var n=W(t,e);if(n===-1){return null}return t[n+1]}function Z(t,e){var n=W(t,e);if(n===-1){return null}return t[n-1]}var tt={head:O,last:M,initial:B,tail:z,prev:Z,next:J,find:q,contains:V,all:U,sum:_,from:K,isEmpty:G,clusterBy:Q,compact:X,unique:Y};var et=typeof define==="function"&&define.amd;function nt(e){var n=e==="Comic Sans MS"?"Courier New":"Comic Sans MS";var i=t("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body);var o=i.css("fontFamily",n).width();var r=i.css("fontFamily",e+","+n).width();i.remove();return o!==r}var it=navigator.userAgent;var ot=/MSIE|Trident/i.test(it);var rt;if(ot){var st=/MSIE (\d+[.]\d+)/.exec(it);if(st){rt=parseFloat(st[1])}st=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(it);if(st){rt=parseFloat(st[1])}}var at=/Edge\/\d+/.test(it);var lt=!!window.CodeMirror;if(!lt&&et){if(typeof __webpack_require__==="function"){try{require.resolve("codemirror");lt=true}catch(t){}}else if(typeof require!=="undefined"){if(typeof require.resolve!=="undefined"){try{require.resolve("codemirror");lt=true}catch(t){}}else if(typeof require.specified!=="undefined"){lt=require.specified("codemirror")}}}var ut="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0;var ct=ot||at?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";var ft={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:ot,isEdge:at,isFF:!at&&/firefox/i.test(it),isPhantom:/PhantomJS/i.test(it),isWebkit:!at&&/webkit/i.test(it),isChrome:!at&&/chrome/i.test(it),isSafari:!at&&/safari/i.test(it),browserVersion:rt,jqueryVersion:parseFloat(t.fn.jquery),isSupportAmd:et,isSupportTouch:ut,hasCodeMirror:lt,isFontInstalled:nt,isW3CRangeSupport:!!document.createRange,inputEventName:ct};var dt=String.fromCharCode(160);var ht="\ufeff";function pt(e){return e&&t(e).hasClass("note-editable")}function vt(e){return e&&t(e).hasClass("note-control-sizing")}function mt(t){t=t.toUpperCase();return function(e){return e&&e.nodeName.toUpperCase()===t}}function gt(t){return t&&t.nodeType===3}function yt(t){return t&&t.nodeType===1}function bt(t){return t&&/^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT/.test(t.nodeName.toUpperCase())}function wt(t){if(pt(t)){return false}return t&&/^DIV|^P|^LI|^H[1-7]/.test(t.nodeName.toUpperCase())}function xt(t){return t&&/^H[1-7]/.test(t.nodeName.toUpperCase())}var Ct=mt("PRE");var kt=mt("LI");function Tt(t){return wt(t)&&!kt(t)}var St=mt("TABLE");var $t=mt("DATA");function Et(t){return!Rt(t)&&!Nt(t)&&!At(t)&&!wt(t)&&!St(t)&&!Dt(t)&&!$t(t)}function Nt(t){return t&&/^UL|^OL/.test(t.nodeName.toUpperCase())}var At=mt("HR");function It(t){return t&&/^TD|^TH/.test(t.nodeName.toUpperCase())}var Dt=mt("BLOCKQUOTE");function Rt(t){return It(t)||Dt(t)||pt(t)}var Lt=mt("A");function Ht(t){return Et(t)&&!!Ut(t,wt)}function Pt(t){return Et(t)&&!Ut(t,wt)}var Ft=mt("BODY");function jt(t,e){return t.nextSibling===e||t.previousSibling===e}function Ot(t,e){e=e||j.ok;var n=[];if(t.previousSibling&&e(t.previousSibling)){n.push(t.previousSibling)}n.push(t);if(t.nextSibling&&e(t.nextSibling)){n.push(t.nextSibling)}return n}var Mt=ft.isMSIE&&ft.browserVersion<11?"&nbsp;":"<br>";function Bt(t){if(gt(t)){return t.nodeValue.length}if(t){return t.childNodes.length}return 0}function zt(t){var e=Bt(t);if(e===0){return true}else if(!gt(t)&&e===1&&t.innerHTML===Mt){return true}else if(tt.all(t.childNodes,gt)&&t.innerHTML===""){return true}return false}function qt(t){if(!bt(t)&&!Bt(t)){t.innerHTML=Mt}}function Ut(t,e){while(t){if(e(t)){return t}if(pt(t)){break}t=t.parentNode}return null}function Wt(t,e){t=t.parentNode;while(t){if(Bt(t)!==1){break}if(e(t)){return t}if(pt(t)){break}t=t.parentNode}return null}function Vt(t,e){e=e||j.fail;var n=[];Ut(t,function(t){if(!pt(t)){n.push(t)}return e(t)});return n}function _t(t,e){var n=Vt(t);return tt.last(n.filter(e))}function Kt(e,n){var i=Vt(e);for(var o=n;o;o=o.parentNode){if(t.inArray(o,i)>-1){return o}}return null}function Gt(t,e){e=e||j.fail;var n=[];while(t){if(e(t)){break}n.push(t);t=t.previousSibling}return n}function Qt(t,e){e=e||j.fail;var n=[];while(t){if(e(t)){break}n.push(t);t=t.nextSibling}return n}function Xt(t,e){var n=[];e=e||j.ok;(function i(o){if(t!==o&&e(o)){n.push(o)}for(var r=0,s=o.childNodes.length;r<s;r++){i(o.childNodes[r])}})(t);return n}function Yt(e,n){var i=e.parentNode;var o=t("<"+n+">")[0];i.insertBefore(o,e);o.appendChild(e);return o}function Jt(t,e){var n=e.nextSibling;var i=e.parentNode;if(n){i.insertBefore(t,n)}else{i.appendChild(t)}return t}function Zt(e,n){t.each(n,function(t,n){e.appendChild(n)});return e}function te(t){return t.offset===0}function ee(t){return t.offset===Bt(t.node)}function ne(t){return te(t)||ee(t)}function ie(t,e){while(t&&t!==e){if(ae(t)!==0){return false}t=t.parentNode}return true}function oe(t,e){if(!e){return false}while(t&&t!==e){if(ae(t)!==Bt(t.parentNode)-1){return false}t=t.parentNode}return true}function re(t,e){return te(t)&&ie(t.node,e)}function se(t,e){return ee(t)&&oe(t.node,e)}function ae(t){var e=0;while(t=t.previousSibling){e+=1}return e}function le(t){return!!(t&&t.childNodes&&t.childNodes.length)}function ue(t,e){var n;var i;if(t.offset===0){if(pt(t.node)){return null}n=t.node.parentNode;i=ae(t.node)}else if(le(t.node)){n=t.node.childNodes[t.offset-1];i=Bt(n)}else{n=t.node;i=e?0:t.offset-1}return{node:n,offset:i}}function ce(t,e){var n,i;if(Bt(t.node)===t.offset){if(pt(t.node)){return null}n=t.node.parentNode;i=ae(t.node)+1}else if(le(t.node)){n=t.node.childNodes[t.offset];i=0}else{n=t.node;i=e?Bt(t.node):t.offset+1}return{node:n,offset:i}}function fe(t,e){return t.node===e.node&&t.offset===e.offset}function de(t){if(gt(t.node)||!le(t.node)||zt(t.node)){return true}var e=t.node.childNodes[t.offset-1];var n=t.node.childNodes[t.offset];if((!e||bt(e))&&(!n||bt(n))){return true}return false}function he(t,e){while(t){if(e(t)){return t}t=ue(t)}return null}function pe(t,e){while(t){if(e(t)){return t}t=ce(t)}return null}function ve(t){if(!gt(t.node)){return false}var e=t.node.nodeValue.charAt(t.offset-1);return e&&(e!==" "&&e!==dt)}function me(t,e,n,i){var o=t;while(o){n(o);if(fe(o,e)){break}var r=i&&t.node!==o.node&&e.node!==o.node;o=ce(o,r)}}function ge(t,e){var n=Vt(e,j.eq(t));return n.map(ae).reverse()}function ye(t,e){var n=t;for(var i=0,o=e.length;i<o;i++){if(n.childNodes.length<=e[i]){n=n.childNodes[n.childNodes.length-1]}else{n=n.childNodes[e[i]]}}return n}function be(t,e){var n=e&&e.isSkipPaddingBlankHTML;var i=e&&e.isNotSplitEdgePoint;if(ne(t)&&(gt(t.node)||i)){if(te(t)){return t.node}else if(ee(t)){return t.node.nextSibling}}if(gt(t.node)){return t.node.splitText(t.offset)}else{var o=t.node.childNodes[t.offset];var r=Jt(t.node.cloneNode(false),t.node);Zt(r,Qt(o));if(!n){qt(t.node);qt(r)}return r}}function we(t,e,n){var i=Vt(e.node,j.eq(t));if(!i.length){return null}else if(i.length===1){return be(e,n)}return i.reduce(function(t,i){if(t===e.node){t=be(e,n)}return be({node:i,offset:t?ae(t):Bt(i)},n)})}function xe(t,e){var n=e?wt:Rt;var i=Vt(t.node,n);var o=tt.last(i)||t.node;var r,s;if(n(o)){r=i[i.length-2];s=o}else{r=o;s=r.parentNode}var a=r&&we(r,t,{isSkipPaddingBlankHTML:e,isNotSplitEdgePoint:e});if(!a&&s===t.node){a=t.node.childNodes[t.offset]}return{rightNode:a,container:s}}function Ce(t){return document.createElement(t)}function ke(t){return document.createTextNode(t)}function Te(t,e){if(!t||!t.parentNode){return}if(t.removeNode){return t.removeNode(e)}var n=t.parentNode;if(!e){var i=[];for(var o=0,r=t.childNodes.length;o<r;o++){i.push(t.childNodes[o])}for(var o=0,r=i.length;o<r;o++){n.insertBefore(i[o],t)}}n.removeChild(t)}function Se(t,e){while(t){if(pt(t)||!e(t)){break}var n=t.parentNode;Te(t);t=n}}function $e(t,e){if(t.nodeName.toUpperCase()===e.toUpperCase()){return t}var n=Ce(e);if(t.style.cssText){n.style.cssText=t.style.cssText}Zt(n,tt.from(t.childNodes));Jt(n,t);Te(t);return n}var Ee=mt("TEXTAREA");function Ne(t,e){var n=Ee(t[0])?t.val():t.html();if(e){return n.replace(/[\n\r]/g,"")}return n}function Ae(e,n){var i=Ne(e);if(n){var o=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;i=i.replace(o,function(t,e,n){n=n.toUpperCase();var i=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n)&&!!e;var o=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n);return t+(i||o?"\n":"")});i=t.trim(i)}return i}function Ie(e){var n=t(e);var i=n.offset();var o=n.outerHeight(true);return{left:i.left,top:i.top+o}}function De(t,e){Object.keys(e).forEach(function(n){t.on(n,e[n])})}function Re(t,e){Object.keys(e).forEach(function(n){t.off(n,e[n])})}function Le(t){return t&&!gt(t)&&tt.contains(t.classList,"note-styletag")}var He={NBSP_CHAR:dt,ZERO_WIDTH_NBSP_CHAR:ht,blank:Mt,emptyPara:"<p>"+Mt+"</p>",makePredByNodeName:mt,isEditable:pt,isControlSizing:vt,isText:gt,isElement:yt,isVoid:bt,isPara:wt,isPurePara:Tt,isHeading:xt,isInline:Et,isBlock:j.not(Et),isBodyInline:Pt,isBody:Ft,isParaInline:Ht,isPre:Ct,isList:Nt,isTable:St,isData:$t,isCell:It,isBlockquote:Dt,isBodyContainer:Rt,isAnchor:Lt,isDiv:mt("DIV"),isLi:kt,isBR:mt("BR"),isSpan:mt("SPAN"),isB:mt("B"),isU:mt("U"),isS:mt("S"),isI:mt("I"),isImg:mt("IMG"),isTextarea:Ee,isEmpty:zt,isEmptyAnchor:j.and(Lt,zt),isClosestSibling:jt,withClosestSiblings:Ot,nodeLength:Bt,isLeftEdgePoint:te,isRightEdgePoint:ee,isEdgePoint:ne,isLeftEdgeOf:ie,isRightEdgeOf:oe,isLeftEdgePointOf:re,isRightEdgePointOf:se,prevPoint:ue,nextPoint:ce,isSamePoint:fe,isVisiblePoint:de,prevPointUntil:he,nextPointUntil:pe,isCharPoint:ve,walkPoint:me,ancestor:Ut,singleChildAncestor:Wt,listAncestor:Vt,lastAncestor:_t,listNext:Qt,listPrev:Gt,listDescendant:Xt,commonAncestor:Kt,wrap:Yt,insertAfter:Jt,appendChildNodes:Zt,position:ae,hasChildren:le,makeOffsetPath:ge,fromOffsetPath:ye,splitTree:we,splitPoint:xe,create:Ce,createText:ke,remove:Te,removeWhile:Se,replace:$e,html:Ae,value:Ne,posFromPlaceholder:Ie,attachEvents:De,detachEvents:Re,isCustomStyleTag:Le};t.summernote=t.summernote||{lang:{}};t.extend(t.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image",original:"Original"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table",addRowAbove:"Add row above",addRowBelow:"Add row below",addColLeft:"Add column left",addColRight:"Add column right",delRow:"Delete row",delCol:"Delete column",delTable:"Delete table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",p:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var Pe={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,DELETE:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};var Fe={isEdit:function(t){return tt.contains([Pe.BACKSPACE,Pe.TAB,Pe.ENTER,Pe.SPACE,Pe.DELETE],t)},isMove:function(t){return tt.contains([Pe.LEFT,Pe.UP,Pe.RIGHT,Pe.DOWN],t)},nameFromCode:j.invertObject(Pe),code:Pe};function je(t,e){var n=t.parentElement();var i;var o=document.body.createTextRange();var r;var s=tt.from(n.childNodes);for(i=0;i<s.length;i++){if(He.isText(s[i])){continue}o.moveToElementText(s[i]);if(o.compareEndPoints("StartToStart",t)>=0){break}r=s[i]}if(i!==0&&He.isText(s[i-1])){var a=document.body.createTextRange();var l=null;a.moveToElementText(r||n);a.collapse(!r);l=r?r.nextSibling:n.firstChild;var u=t.duplicate();u.setEndPoint("StartToStart",a);var c=u.text.replace(/[\r\n]/g,"").length;while(c>l.nodeValue.length&&l.nextSibling){c-=l.nodeValue.length;l=l.nextSibling}var f=l.nodeValue;if(e&&l.nextSibling&&He.isText(l.nextSibling)&&c===l.nodeValue.length){c-=l.nodeValue.length;l=l.nextSibling}n=l;i=c}return{cont:n,offset:i}}function Oe(t){var e=function(t,n){var i,o;if(He.isText(t)){var r=He.listPrev(t,j.not(He.isText));var s=tt.last(r).previousSibling;i=s||t.parentNode;n+=tt.sum(tt.tail(r),He.nodeLength);o=!s}else{i=t.childNodes[n]||t;if(He.isText(i)){return e(i,0)}n=0;o=false}return{node:i,collapseToStart:o,offset:n}};var n=document.body.createTextRange();var i=e(t.node,t.offset);n.moveToElementText(i.node);n.collapse(i.collapseToStart);n.moveStart("character",i.offset);return n}var Me=function(){function e(t,e,n,i){this.sc=t;this.so=e;this.ec=n;this.eo=i;this.isOnEditable=this.makeIsOn(He.isEditable);this.isOnList=this.makeIsOn(He.isList);this.isOnAnchor=this.makeIsOn(He.isAnchor);this.isOnCell=this.makeIsOn(He.isCell);this.isOnData=this.makeIsOn(He.isData)}e.prototype.nativeRange=function(){if(ft.isW3CRangeSupport){var t=document.createRange();t.setStart(this.sc,this.so);t.setEnd(this.ec,this.eo);return t}else{var e=Oe({node:this.sc,offset:this.so});e.setEndPoint("EndToEnd",Oe({node:this.ec,offset:this.eo}));return e}};e.prototype.getPoints=function(){return{sc:this.sc,so:this.so,ec:this.ec,eo:this.eo}};e.prototype.getStartPoint=function(){return{node:this.sc,offset:this.so}};e.prototype.getEndPoint=function(){return{node:this.ec,offset:this.eo}};e.prototype.select=function(){var t=this.nativeRange();if(ft.isW3CRangeSupport){var e=document.getSelection();if(e.rangeCount>0){e.removeAllRanges()}e.addRange(t)}else{t.select()}return this};e.prototype.scrollIntoView=function(e){var n=t(e).height();if(e.scrollTop+n<this.sc.offsetTop){e.scrollTop+=Math.abs(e.scrollTop+n-this.sc.offsetTop)}return this};e.prototype.normalize=function(){var t=function(t,e){if(He.isVisiblePoint(t)&&!He.isEdgePoint(t)||He.isVisiblePoint(t)&&He.isRightEdgePoint(t)&&!e||He.isVisiblePoint(t)&&He.isLeftEdgePoint(t)&&e||He.isVisiblePoint(t)&&He.isBlock(t.node)&&He.isEmpty(t.node)){return t}var n=He.ancestor(t.node,He.isBlock);if((He.isLeftEdgePointOf(t,n)||He.isVoid(He.prevPoint(t).node))&&!e||(He.isRightEdgePointOf(t,n)||He.isVoid(He.nextPoint(t).node))&&e){if(He.isVisiblePoint(t)){return t}e=!e}var i=e?He.nextPointUntil(He.nextPoint(t),He.isVisiblePoint):He.prevPointUntil(He.prevPoint(t),He.isVisiblePoint);return i||t};var n=t(this.getEndPoint(),false);var i=this.isCollapsed()?n:t(this.getStartPoint(),true);return new e(i.node,i.offset,n.node,n.offset)};e.prototype.nodes=function(t,e){t=t||j.ok;var n=e&&e.includeAncestor;var i=e&&e.fullyContains;var o=this.getStartPoint();var r=this.getEndPoint();var s=[];var a=[];He.walkPoint(o,r,function(e){if(He.isEditable(e.node)){return}var o;if(i){if(He.isLeftEdgePoint(e)){a.push(e.node)}if(He.isRightEdgePoint(e)&&tt.contains(a,e.node)){o=e.node}}else if(n){o=He.ancestor(e.node,t)}else{o=e.node}if(o&&t(o)){s.push(o)}},true);return tt.unique(s)};e.prototype.commonAncestor=function(){return He.commonAncestor(this.sc,this.ec)};e.prototype.expand=function(t){var n=He.ancestor(this.sc,t);var i=He.ancestor(this.ec,t);if(!n&&!i){return new e(this.sc,this.so,this.ec,this.eo)}var o=this.getPoints();if(n){o.sc=n;o.so=0}if(i){o.ec=i;o.eo=He.nodeLength(i)}return new e(o.sc,o.so,o.ec,o.eo)};e.prototype.collapse=function(t){if(t){return new e(this.sc,this.so,this.sc,this.so)}else{return new e(this.ec,this.eo,this.ec,this.eo)}};e.prototype.splitText=function(){var t=this.sc===this.ec;var n=this.getPoints();if(He.isText(this.ec)&&!He.isEdgePoint(this.getEndPoint())){this.ec.splitText(this.eo)}if(He.isText(this.sc)&&!He.isEdgePoint(this.getStartPoint())){n.sc=this.sc.splitText(this.so);n.so=0;if(t){n.ec=n.sc;n.eo=this.eo-this.so}}return new e(n.sc,n.so,n.ec,n.eo)};e.prototype.deleteContents=function(){if(this.isCollapsed()){return this}var n=this.splitText();var i=n.nodes(null,{fullyContains:true});var o=He.prevPointUntil(n.getStartPoint(),function(t){return!tt.contains(i,t.node)});var r=[];t.each(i,function(t,e){var n=e.parentNode;if(o.node!==n&&He.nodeLength(n)===1){r.push(n)}He.remove(e,false)});t.each(r,function(t,e){He.remove(e,false)});return new e(o.node,o.offset,o.node,o.offset).normalize()};e.prototype.makeIsOn=function(t){return function(){var e=He.ancestor(this.sc,t);return!!e&&e===He.ancestor(this.ec,t)}};e.prototype.isLeftEdgeOf=function(t){if(!He.isLeftEdgePoint(this.getStartPoint())){return false}var e=He.ancestor(this.sc,t);return e&&He.isLeftEdgeOf(this.sc,e)};e.prototype.isCollapsed=function(){return this.sc===this.ec&&this.so===this.eo};e.prototype.wrapBodyInlineWithPara=function(){if(He.isBodyContainer(this.sc)&&He.isEmpty(this.sc)){this.sc.innerHTML=He.emptyPara;return new e(this.sc.firstChild,0,this.sc.firstChild,0)}var t=this.normalize();if(He.isParaInline(this.sc)||He.isPara(this.sc)){return t}var n;if(He.isInline(t.sc)){var i=He.listAncestor(t.sc,j.not(He.isInline));n=tt.last(i);if(!He.isInline(n)){n=i[i.length-2]||t.sc.childNodes[t.so]}}else{n=t.sc.childNodes[t.so>0?t.so-1:0]}var o=He.listPrev(n,He.isParaInline).reverse();o=o.concat(He.listNext(n.nextSibling,He.isParaInline));if(o.length){var r=He.wrap(tt.head(o),"p");He.appendChildNodes(r,tt.tail(o))}return this.normalize()};e.prototype.insertNode=function(t){var e=this.wrapBodyInlineWithPara().deleteContents();var n=He.splitPoint(e.getStartPoint(),He.isInline(t));if(n.rightNode){n.rightNode.parentNode.insertBefore(t,n.rightNode)}else{n.container.appendChild(t)}return t};e.prototype.pasteHTML=function(e){var n=t("<div></div>").html(e)[0];var i=tt.from(n.childNodes);var o=this.wrapBodyInlineWithPara().deleteContents();return i.reverse().map(function(t){return o.insertNode(t)}).reverse()};e.prototype.toString=function(){var t=this.nativeRange();return ft.isW3CRangeSupport?t.toString():t.text};e.prototype.getWordRange=function(t){var n=this.getEndPoint();if(!He.isCharPoint(n)){return this}var i=He.prevPointUntil(n,function(t){return!He.isCharPoint(t)});if(t){n=He.nextPointUntil(n,function(t){return!He.isCharPoint(t)})}return new e(i.node,i.offset,n.node,n.offset)};e.prototype.bookmark=function(t){return{s:{path:He.makeOffsetPath(t,this.sc),offset:this.so},e:{path:He.makeOffsetPath(t,this.ec),offset:this.eo}}};e.prototype.paraBookmark=function(t){return{s:{path:tt.tail(He.makeOffsetPath(tt.head(t),this.sc)),offset:this.so},e:{path:tt.tail(He.makeOffsetPath(tt.last(t),this.ec)),offset:this.eo}}};e.prototype.getClientRects=function(){var t=this.nativeRange();return t.getClientRects()};return e}();var Be={create:function(t,e,n,i){if(arguments.length===4){return new Me(t,e,n,i)}else if(arguments.length===2){n=t;i=e;return new Me(t,e,n,i)}else{var o=this.createFromSelection();if(!o&&arguments.length===1){o=this.createFromNode(arguments[0]);return o.collapse(He.emptyPara===arguments[0].innerHTML)}return o}},createFromSelection:function(){var t,e,n,i;if(ft.isW3CRangeSupport){var o=document.getSelection();if(!o||o.rangeCount===0){return null}else if(He.isBody(o.anchorNode)){return null}var r=o.getRangeAt(0);t=r.startContainer;e=r.startOffset;n=r.endContainer;i=r.endOffset}else{var s=document.selection.createRange();var a=s.duplicate();a.collapse(false);var l=s;l.collapse(true);var u=je(l,true);var c=je(a,false);if(He.isText(u.node)&&He.isLeftEdgePoint(u)&&He.isTextNode(c.node)&&He.isRightEdgePoint(c)&&c.node.nextSibling===u.node){u=c}t=u.cont;e=u.offset;n=c.cont;i=c.offset}return new Me(t,e,n,i)},createFromNode:function(t){var e=t;var n=0;var i=t;var o=He.nodeLength(i);if(He.isVoid(e)){n=He.listPrev(e).length-1;e=e.parentNode}if(He.isBR(i)){o=He.listPrev(i).length-1;i=i.parentNode}else if(He.isVoid(i)){o=He.listPrev(i).length;i=i.parentNode}return this.create(e,n,i,o)},createFromNodeBefore:function(t){return this.createFromNode(t).collapse(true)},createFromNodeAfter:function(t){return this.createFromNode(t).collapse()},createFromBookmark:function(t,e){var n=He.fromOffsetPath(t,e.s.path);var i=e.s.offset;var o=He.fromOffsetPath(t,e.e.path);var r=e.e.offset;return new Me(n,i,o,r)},createFromParaBookmark:function(t,e){var n=t.s.offset;var i=t.e.offset;var o=He.fromOffsetPath(tt.head(e),t.s.path);var r=He.fromOffsetPath(tt.last(e),t.e.path);return new Me(o,n,r,i)}};function ze(e){return t.Deferred(function(n){t.extend(new FileReader,{onload:function(t){var e=t.target.result;n.resolve(e)},onerror:function(t){n.reject(t)}}).readAsDataURL(e)}).promise()}function qe(e){return t.Deferred(function(n){var i=t("<img>");i.one("load",function(){i.off("error abort");n.resolve(i)}).one("error abort",function(){i.off("load").detach();n.reject(i)}).css({display:"none"}).appendTo(document.body).attr("src",e)}).promise()}var Ue=function(){function t(t){this.stack=[];this.stackOffset=-1;this.$editable=t;this.editable=t[0]}t.prototype.makeSnapshot=function(){var t=Be.create(this.editable);var e={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:this.$editable.html(),bookmark:t?t.bookmark(this.editable):e}};t.prototype.applySnapshot=function(t){if(t.contents!==null){this.$editable.html(t.contents)}if(t.bookmark!==null){Be.createFromBookmark(this.editable,t.bookmark).select()}};t.prototype.rewind=function(){if(this.$editable.html()!==this.stack[this.stackOffset].contents){this.recordUndo()}this.stackOffset=0;this.applySnapshot(this.stack[this.stackOffset])};t.prototype.reset=function(){this.stack=[];this.stackOffset=-1;this.$editable.html("");this.recordUndo()};t.prototype.undo=function(){if(this.$editable.html()!==this.stack[this.stackOffset].contents){this.recordUndo()}if(this.stackOffset>0){this.stackOffset--;this.applySnapshot(this.stack[this.stackOffset])}};t.prototype.redo=function(){if(this.stack.length-1>this.stackOffset){this.stackOffset++;this.applySnapshot(this.stack[this.stackOffset])}};t.prototype.recordUndo=function(){this.stackOffset++;if(this.stack.length>this.stackOffset){this.stack=this.stack.slice(0,this.stackOffset)}this.stack.push(this.makeSnapshot())};return t}();var We=function(){function e(){}e.prototype.jQueryCSS=function(e,n){if(ft.jqueryVersion<1.9){var i={};t.each(n,function(t,n){i[n]=e.css(n)});return i}return e.css(n)};e.prototype.fromNode=function(t){var e=["font-family","font-size","text-align","list-style-type","line-height"];var n=this.jQueryCSS(t,e)||{};n["font-size"]=parseInt(n["font-size"],10);return n};e.prototype.stylePara=function(e,n){t.each(e.nodes(He.isPara,{includeAncestor:true}),function(e,i){t(i).css(n)})};e.prototype.styleNodes=function(e,n){e=e.splitText();var i=n&&n.nodeName||"SPAN";var o=!!(n&&n.expandClosestSibling);var r=!!(n&&n.onlyPartialContains);if(e.isCollapsed()){return[e.insertNode(He.create(i))]}var s=He.makePredByNodeName(i);var a=e.nodes(He.isText,{fullyContains:true}).map(function(t){return He.singleChildAncestor(t,s)||He.wrap(t,i)});if(o){if(r){var l=e.nodes();s=j.and(s,function(t){return tt.contains(l,t)})}return a.map(function(e){var n=He.withClosestSiblings(e,s);var i=tt.head(n);var o=tt.tail(n);t.each(o,function(t,e){He.appendChildNodes(i,e.childNodes);He.remove(e)});return tt.head(n)})}else{return a}};e.prototype.current=function(e){var n=t(!He.isElement(e.sc)?e.sc.parentNode:e.sc);var i=this.fromNode(n);try{i=t.extend(i,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal","font-family":document.queryCommandValue("fontname")||i["font-family"]})}catch(t){}if(!e.isOnList()){i["list-style"]="none"}else{var o=["circle","disc","disc-leading-zero","square"];var r=t.inArray(i["list-style-type"],o)>-1;i["list-style"]=r?"unordered":"ordered"}var s=He.ancestor(e.sc,He.isPara);if(s&&s.style["line-height"]){i["line-height"]=s.style.lineHeight}else{var a=parseInt(i["line-height"],10)/parseInt(i["font-size"],10);i["line-height"]=a.toFixed(1)}i.anchor=e.isOnAnchor()&&He.ancestor(e.sc,He.isAnchor);i.ancestors=He.listAncestor(e.sc,He.isEditable);i.range=e;return i};return e}();var Ve=function(){function e(){}e.prototype.insertOrderedList=function(t){this.toggleList("OL",t)};e.prototype.insertUnorderedList=function(t){this.toggleList("UL",t)};e.prototype.indent=function(e){var n=this;var i=Be.create(e).wrapBodyInlineWithPara();var o=i.nodes(He.isPara,{includeAncestor:true});var r=tt.clusterBy(o,j.peq2("parentNode"));t.each(r,function(e,i){var o=tt.head(i);if(He.isLi(o)){n.wrapList(i,o.parentNode.nodeName)}else{t.each(i,function(e,n){t(n).css("marginLeft",function(t,e){return(parseInt(e,10)||0)+25})})}});i.select()};e.prototype.outdent=function(e){var n=this;var i=Be.create(e).wrapBodyInlineWithPara();var o=i.nodes(He.isPara,{includeAncestor:true});var r=tt.clusterBy(o,j.peq2("parentNode"));t.each(r,function(e,i){var o=tt.head(i);if(He.isLi(o)){n.releaseList([i])}else{t.each(i,function(e,n){t(n).css("marginLeft",function(t,e){e=parseInt(e,10)||0;return e>25?e-25:""})})}});i.select()};e.prototype.toggleList=function(e,n){var i=this;var o=Be.create(n).wrapBodyInlineWithPara();var r=o.nodes(He.isPara,{includeAncestor:true});var s=o.paraBookmark(r);var a=tt.clusterBy(r,j.peq2("parentNode"));if(tt.find(r,He.isPurePara)){var l=[];t.each(a,function(t,n){l=l.concat(i.wrapList(n,e))});r=l}else{var u=o.nodes(He.isList,{includeAncestor:true}).filter(function(n){return!t.nodeName(n,e)});if(u.length){t.each(u,function(t,n){He.replace(n,e)})}else{r=this.releaseList(a,true)}}Be.createFromParaBookmark(s,r).select()};e.prototype.wrapList=function(t,e){var n=tt.head(t);var i=tt.last(t);var o=He.isList(n.previousSibling)&&n.previousSibling;var r=He.isList(i.nextSibling)&&i.nextSibling;var s=o||He.insertAfter(He.create(e||"UL"),i);t=t.map(function(t){return He.isPurePara(t)?He.replace(t,"LI"):t});He.appendChildNodes(s,t);if(r){He.appendChildNodes(s,tt.from(r.childNodes));He.remove(r)}return t};e.prototype.releaseList=function(e,n){var i=[];t.each(e,function(e,o){var r=tt.head(o);var s=tt.last(o);var a=n?He.lastAncestor(r,He.isList):r.parentNode;var l=a.childNodes.length>1?He.splitTree(a,{node:s.parentNode,offset:He.position(s)+1},{isSkipPaddingBlankHTML:true}):null;var u=He.splitTree(a,{node:r.parentNode,offset:He.position(r)},{isSkipPaddingBlankHTML:true});o=n?He.listDescendant(u,He.isLi):tt.from(u.childNodes).filter(He.isLi);if(n||!He.isList(a.parentNode)){o=o.map(function(t){return He.replace(t,"P")})}t.each(tt.from(o).reverse(),function(t,e){He.insertAfter(e,a)});var c=tt.compact([a,u,l]);t.each(c,function(e,n){var i=[n].concat(He.listDescendant(n,He.isList));t.each(i.reverse(),function(t,e){if(!He.nodeLength(e)){He.remove(e,true)}})});i=i.concat(o)});return i};return e}();var _e=function(){function e(){this.bullet=new Ve}e.prototype.insertTab=function(t,e){var n=He.createText(new Array(e+1).join(He.NBSP_CHAR));t=t.deleteContents();t.insertNode(n,true);t=Be.create(n,e);t.select()};e.prototype.insertParagraph=function(e){var n=Be.create(e);n=n.deleteContents();n=n.wrapBodyInlineWithPara();var i=He.ancestor(n.sc,He.isPara);var o;if(i){if(He.isEmpty(i)&&He.isLi(i)){this.bullet.toggleList(i.parentNode.nodeName);return}else if(He.isEmpty(i)&&He.isPara(i)&&He.isBlockquote(i.parentNode)){He.insertAfter(i,i.parentNode);o=i}else{o=He.splitTree(i,n.getStartPoint());var r=He.listDescendant(i,He.isEmptyAnchor);r=r.concat(He.listDescendant(o,He.isEmptyAnchor));t.each(r,function(t,e){He.remove(e)});if((He.isHeading(o)||He.isPre(o)||He.isCustomStyleTag(o))&&He.isEmpty(o)){o=He.replace(o,"p")}}}else{var s=n.sc.childNodes[n.so];o=t(He.emptyPara)[0];if(s){n.sc.insertBefore(o,s)}else{n.sc.appendChild(o)}}Be.create(o,0).normalize().select().scrollIntoView(e)};return e}();var Ke=function(t,e,n,i){var o={colPos:0,rowPos:0};var r=[];var s=[];function a(){if(!t||!t.tagName||t.tagName.toLowerCase()!=="td"&&t.tagName.toLowerCase()!=="th"){console.error("Impossible to identify start Cell point.",t);return}o.colPos=t.cellIndex;if(!t.parentElement||!t.parentElement.tagName||t.parentElement.tagName.toLowerCase()!=="tr"){console.error("Impossible to identify start Row point.",t);return}o.rowPos=t.parentElement.rowIndex}function l(t,e,n,i,o,s,a){var l={baseRow:n,baseCell:i,isRowSpan:o,isColSpan:s,isVirtual:a};if(!r[t]){r[t]=[]}r[t][e]=l}function u(t,e,n,i){return{baseCell:t.baseCell,action:e,virtualTable:{rowIndex:n,cellIndex:i}}}function c(t,e){if(!r[t]){return e}if(!r[t][e]){return e}var n=e;while(r[t][n]){n++;if(!r[t][n]){return n}}}function f(t,e){var n=c(t.rowIndex,e.cellIndex);var i=e.colSpan>1;var r=e.rowSpan>1;var s=t.rowIndex===o.rowPos&&e.cellIndex===o.colPos;l(t.rowIndex,n,t,e,r,i,false);var a=e.attributes.rowSpan?parseInt(e.attributes.rowSpan.value,10):0;if(a>1){for(var u=1;u<a;u++){var f=t.rowIndex+u;d(f,n,e,s);l(f,n,t,e,true,i,true)}}var h=e.attributes.colSpan?parseInt(e.attributes.colSpan.value,10):0;if(h>1){for(var p=1;p<h;p++){var v=c(t.rowIndex,n+p);d(t.rowIndex,v,e,s);l(t.rowIndex,v,t,e,r,true,true)}}}function d(t,e,n,i){if(t===o.rowPos&&o.colPos>=n.cellIndex&&n.cellIndex<=e&&!i){o.colPos++}}function h(){var t=i.rows;for(var e=0;e<t.length;e++){var n=t[e].cells;for(var o=0;o<n.length;o++){f(t[e],n[o])}}}function p(t){switch(e){case Ke.where.Column:if(t.isColSpan){return Ke.resultAction.SubtractSpanCount}break;case Ke.where.Row:if(!t.isVirtual&&t.isRowSpan){return Ke.resultAction.AddCell}else if(t.isRowSpan){return Ke.resultAction.SubtractSpanCount}break}return Ke.resultAction.RemoveCell}function v(t){switch(e){case Ke.where.Column:if(t.isColSpan){return Ke.resultAction.SumSpanCount}else if(t.isRowSpan&&t.isVirtual){return Ke.resultAction.Ignore}break;case Ke.where.Row:if(t.isRowSpan){return Ke.resultAction.SumSpanCount}else if(t.isColSpan&&t.isVirtual){return Ke.resultAction.Ignore}break}return Ke.resultAction.AddCell}function m(){a();h()}this.getActionList=function(){var t=e===Ke.where.Row?o.rowPos:-1;var i=e===Ke.where.Column?o.colPos:-1;var a=0;var l=true;while(l){var c=t>=0?t:a;var f=i>=0?i:a;var d=r[c];if(!d){l=false;return s}var h=d[f];if(!h){l=false;return s}var m=Ke.resultAction.Ignore;switch(n){case Ke.requestAction.Add:m=v(h);break;case Ke.requestAction.Delete:m=p(h);break}s.push(u(h,m,c,f));a++}return s};m()};Ke.where={Row:0,Column:1};Ke.requestAction={Add:0,Delete:1};Ke.resultAction={Ignore:0,SubtractSpanCount:1,RemoveCell:2,AddCell:3,SumSpanCount:4};var Ge=function(){function e(){}e.prototype.tab=function(t,e){var n=He.ancestor(t.commonAncestor(),He.isCell);var i=He.ancestor(n,He.isTable);var o=He.listDescendant(i,He.isCell);var r=tt[e?"prev":"next"](o,n);if(r){Be.create(r,0).select()}};e.prototype.addRow=function(e,n){var i=He.ancestor(e.commonAncestor(),He.isCell);var o=t(i).closest("tr");var r=this.recoverAttributes(o);var s=t("<tr"+r+"></tr>");var a=new Ke(i,Ke.where.Row,Ke.requestAction.Add,t(o).closest("table")[0]);var l=a.getActionList();for(var u=0;u<l.length;u++){var c=l[u];var f=this.recoverAttributes(c.baseCell);switch(c.action){case Ke.resultAction.AddCell:s.append("<td"+f+">"+He.blank+"</td>");break;case Ke.resultAction.SumSpanCount:if(n==="top"){var d=c.baseCell.parent;var h=(!d?0:c.baseCell.closest("tr").rowIndex)<=o[0].rowIndex;if(h){var p=t("<div></div>").append(t("<td"+f+">"+He.blank+"</td>").removeAttr("rowspan")).html();s.append(p);break}}var v=parseInt(c.baseCell.rowSpan,10);v++;c.baseCell.setAttribute("rowSpan",v);break}}if(n==="top"){o.before(s)}else{var m=i.rowSpan>1;if(m){var g=o[0].rowIndex+(i.rowSpan-2);t(t(o).parent().find("tr")[g]).after(t(s));return}o.after(s)}};e.prototype.addCol=function(e,n){var i=He.ancestor(e.commonAncestor(),He.isCell);var o=t(i).closest("tr");var r=t(o).siblings();r.push(o);var s=new Ke(i,Ke.where.Column,Ke.requestAction.Add,t(o).closest("table")[0]);var a=s.getActionList();for(var l=0;l<a.length;l++){var u=a[l];var c=this.recoverAttributes(u.baseCell);switch(u.action){case Ke.resultAction.AddCell:if(n==="right"){t(u.baseCell).after("<td"+c+">"+He.blank+"</td>")}else{t(u.baseCell).before("<td"+c+">"+He.blank+"</td>")}break;case Ke.resultAction.SumSpanCount:if(n==="right"){var f=parseInt(u.baseCell.colSpan,10);f++;u.baseCell.setAttribute("colSpan",f)}else{t(u.baseCell).before("<td"+c+">"+He.blank+"</td>")}break}}};e.prototype.recoverAttributes=function(t){var e="";if(!t){return e}var n=t.attributes||[];for(var i=0;i<n.length;i++){if(n[i].name.toLowerCase()==="id"){continue}if(n[i].specified){e+=" "+n[i].name+"='"+n[i].value+"'"}}return e};e.prototype.deleteRow=function(e){var n=He.ancestor(e.commonAncestor(),He.isCell);var i=t(n).closest("tr");var o=i.children("td, th").index(t(n));var r=i[0].rowIndex;var s=new Ke(n,Ke.where.Row,Ke.requestAction.Delete,t(i).closest("table")[0]);var a=s.getActionList();for(var l=0;l<a.length;l++){if(!a[l]){continue}var u=a[l].baseCell;var c=a[l].virtualTable;var f=u.rowSpan&&u.rowSpan>1;var d=f?parseInt(u.rowSpan,10):0;switch(a[l].action){case Ke.resultAction.Ignore:continue;case Ke.resultAction.AddCell:var h=i.next("tr")[0];if(!h){continue}var p=i[0].cells[o];if(f){if(d>2){d--;h.insertBefore(p,h.cells[o]);h.cells[o].setAttribute("rowSpan",d);h.cells[o].innerHTML=""}else if(d===2){h.insertBefore(p,h.cells[o]);h.cells[o].removeAttribute("rowSpan");h.cells[o].innerHTML=""}}continue;case Ke.resultAction.SubtractSpanCount:if(f){if(d>2){d--;u.setAttribute("rowSpan",d);if(c.rowIndex!==r&&u.cellIndex===o){u.innerHTML=""}}else if(d===2){u.removeAttribute("rowSpan");if(c.rowIndex!==r&&u.cellIndex===o){u.innerHTML=""}}}continue;case Ke.resultAction.RemoveCell:continue}}i.remove()};e.prototype.deleteCol=function(e){var n=He.ancestor(e.commonAncestor(),He.isCell);var i=t(n).closest("tr");var o=i.children("td, th").index(t(n));var r=new Ke(n,Ke.where.Column,Ke.requestAction.Delete,t(i).closest("table")[0]);var s=r.getActionList();for(var a=0;a<s.length;a++){if(!s[a]){continue}switch(s[a].action){case Ke.resultAction.Ignore:continue;case Ke.resultAction.SubtractSpanCount:var l=s[a].baseCell;var u=l.colSpan&&l.colSpan>1;if(u){var c=l.colSpan?parseInt(l.colSpan,10):0;if(c>2){c--;l.setAttribute("colSpan",c);if(l.cellIndex===o){l.innerHTML=""}}else if(c===2){l.removeAttribute("colSpan");if(l.cellIndex===o){l.innerHTML=""}}}continue;case Ke.resultAction.RemoveCell:He.remove(s[a].baseCell,true);continue}}};e.prototype.createTable=function(e,n,i){var o=[];var r;for(var s=0;s<e;s++){o.push("<td>"+He.blank+"</td>")}r=o.join("");var a=[];var l;for(var u=0;u<n;u++){a.push("<tr>"+r+"</tr>")}l=a.join("");var c=t("<table>"+l+"</table>");if(i&&i.tableClassName){c.addClass(i.tableClassName)}return c[0]};e.prototype.deleteTable=function(e){var n=He.ancestor(e.commonAncestor(),He.isCell);t(n).closest("table").remove()};return e}();var Qe="bogus";var Xe=function(){function e(e){var n=this;this.context=e;this.$note=e.layoutInfo.note;this.$editor=e.layoutInfo.editor;this.$editable=e.layoutInfo.editable;this.options=e.options;this.lang=this.options.langInfo;this.editable=this.$editable[0];this.lastRange=null;this.style=new We;this.table=new Ge;this.typing=new _e;this.bullet=new Ve;this.history=new Ue(this.$editable);this.context.memo("help.undo",this.lang.help.undo);this.context.memo("help.redo",this.lang.help.redo);this.context.memo("help.tab",this.lang.help.tab);this.context.memo("help.untab",this.lang.help.untab);this.context.memo("help.insertParagraph",this.lang.help.insertParagraph);this.context.memo("help.insertOrderedList",this.lang.help.insertOrderedList);this.context.memo("help.insertUnorderedList",this.lang.help.insertUnorderedList);this.context.memo("help.indent",this.lang.help.indent);this.context.memo("help.outdent",this.lang.help.outdent);this.context.memo("help.formatPara",this.lang.help.formatPara);this.context.memo("help.insertHorizontalRule",this.lang.help.insertHorizontalRule);this.context.memo("help.fontName",this.lang.help.fontName);var i=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor"];for(var o=0,r=i.length;o<r;o++){this[i[o]]=function(t){return function(e){n.beforeCommand();document.execCommand(t,false,e);n.afterCommand(true)}}(i[o]);this.context.memo("help."+i[o],this.lang.help[i[o]])}this.fontName=this.wrapCommand(function(t){return n.fontStyling("font-family","'"+t+"'")});this.fontSize=this.wrapCommand(function(t){return n.fontStyling("font-size",t+"px")});for(var o=1;o<=6;o++){this["formatH"+o]=function(t){return function(){n.formatBlock("H"+t)}}(o);this.context.memo("help.formatH"+o,this.lang.help["formatH"+o])}this.insertParagraph=this.wrapCommand(function(){n.typing.insertParagraph(n.editable)});this.insertOrderedList=this.wrapCommand(function(){n.bullet.insertOrderedList(n.editable)});this.insertUnorderedList=this.wrapCommand(function(){n.bullet.insertUnorderedList(n.editable)});this.indent=this.wrapCommand(function(){n.bullet.indent(n.editable)});this.outdent=this.wrapCommand(function(){n.bullet.outdent(n.editable)});this.insertNode=this.wrapCommand(function(e){if(n.isLimited(t(e).text().length)){return}var i=n.createRange();i.insertNode(e);Be.createFromNodeAfter(e).select()});this.insertText=this.wrapCommand(function(t){if(n.isLimited(t.length)){return}var e=n.createRange();var i=e.insertNode(He.createText(t));Be.create(i,He.nodeLength(i)).select()});this.pasteHTML=this.wrapCommand(function(t){if(n.isLimited(t.length)){return}var e=n.createRange().pasteHTML(t);Be.createFromNodeAfter(tt.last(e)).select()});this.formatBlock=this.wrapCommand(function(t,e){var i=n.options.callbacks.onApplyCustomStyle;if(i){i.call(n,e,n.context,n.onFormatBlock)}else{n.onFormatBlock(t,e)}});this.insertHorizontalRule=this.wrapCommand(function(){var t=n.createRange().insertNode(He.create("HR"));if(t.nextSibling){Be.create(t.nextSibling,0).normalize().select()}});this.lineHeight=this.wrapCommand(function(t){n.style.stylePara(n.createRange(),{lineHeight:t})});this.createLink=this.wrapCommand(function(e){var i=e.url;var o=e.text;var r=e.isNewWindow;var s=e.range||n.createRange();var a=s.toString()!==o;if(typeof i==="string"){i=i.trim()}if(n.options.onCreateLink){i=n.options.onCreateLink(i)}else{i=/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/.test(i)?i:"http://"+i}var l=[];if(a){s=s.deleteContents();var u=s.insertNode(t("<A>"+o+"</A>")[0]);l.push(u)}else{l=n.style.styleNodes(s,{nodeName:"A",expandClosestSibling:true,onlyPartialContains:true})}t.each(l,function(e,n){t(n).attr("href",i);if(r){t(n).attr("target","_blank")}else{t(n).removeAttr("target")}});var c=Be.createFromNodeBefore(tt.head(l));var f=c.getStartPoint();var d=Be.createFromNodeAfter(tt.last(l));var h=d.getEndPoint();Be.create(f.node,f.offset,h.node,h.offset).select()});this.color=this.wrapCommand(function(t){var e=t.foreColor;var n=t.backColor;if(e){document.execCommand("foreColor",false,e)}if(n){document.execCommand("backColor",false,n)}});this.foreColor=this.wrapCommand(function(t){document.execCommand("styleWithCSS",false,true);document.execCommand("foreColor",false,t)});this.insertTable=this.wrapCommand(function(t){var e=t.split("x");var i=n.createRange().deleteContents();i.insertNode(n.table.createTable(e[0],e[1],n.options))});this.removeMedia=this.wrapCommand(function(){var e=t(n.restoreTarget()).parent();if(e.parent("figure").length){e.parent("figure").remove()}else{e=t(n.restoreTarget()).detach()}n.context.triggerEvent("media.delete",e,n.$editable)});this.floatMe=this.wrapCommand(function(e){var i=t(n.restoreTarget());i.toggleClass("note-float-left",e==="left");i.toggleClass("note-float-right",e==="right");i.css("float",e)});this.resize=this.wrapCommand(function(e){var i=t(n.restoreTarget());i.css({width:e*100+"%",height:""})})}e.prototype.initialize=function(){var t=this;this.$editable.on("keydown",function(e){if(e.keyCode===Fe.code.ENTER){t.context.triggerEvent("enter",e)}t.context.triggerEvent("keydown",e);if(!e.isDefaultPrevented()){if(t.options.shortcuts){t.handleKeyMap(e)}else{t.preventDefaultEditableShortCuts(e)}}if(t.isLimited(1,e)){return false}}).on("keyup",function(e){t.context.triggerEvent("keyup",e)}).on("focus",function(e){t.context.triggerEvent("focus",e)}).on("blur",function(e){t.context.triggerEvent("blur",e)}).on("mousedown",function(e){t.context.triggerEvent("mousedown",e)}).on("mouseup",function(e){t.context.triggerEvent("mouseup",e)}).on("scroll",function(e){t.context.triggerEvent("scroll",e)}).on("paste",function(e){t.context.triggerEvent("paste",e)});this.$editable.html(He.html(this.$note)||He.emptyPara);this.$editable.on(ft.inputEventName,j.debounce(function(){t.context.triggerEvent("change",t.$editable.html())},100));this.$editor.on("focusin",function(e){t.context.triggerEvent("focusin",e)}).on("focusout",function(e){t.context.triggerEvent("focusout",e)});if(!this.options.airMode){if(this.options.width){this.$editor.outerWidth(this.options.width)}if(this.options.height){this.$editable.outerHeight(this.options.height)}if(this.options.maxHeight){this.$editable.css("max-height",this.options.maxHeight)}if(this.options.minHeight){this.$editable.css("min-height",this.options.minHeight)}}this.history.recordUndo()};e.prototype.destroy=function(){this.$editable.off()};e.prototype.handleKeyMap=function(t){var e=this.options.keyMap[ft.isMac?"mac":"pc"];var n=[];if(t.metaKey){n.push("CMD")}if(t.ctrlKey&&!t.altKey){n.push("CTRL")}if(t.shiftKey){n.push("SHIFT")}var i=Fe.nameFromCode[t.keyCode];if(i){n.push(i)}var o=e[n.join("+")];if(o){if(this.context.invoke(o)!==false){t.preventDefault()}}else if(Fe.isEdit(t.keyCode)){this.afterCommand()}};e.prototype.preventDefaultEditableShortCuts=function(t){if((t.ctrlKey||t.metaKey)&&tt.contains([66,73,85],t.keyCode)){t.preventDefault()}};e.prototype.isLimited=function(t,e){t=t||0;if(typeof e!=="undefined"){if(Fe.isMove(e.keyCode)||(e.ctrlKey||e.metaKey)||tt.contains([Fe.code.BACKSPACE,Fe.code.DELETE],e.keyCode)){return false}}if(this.options.maxTextLength>0){if(this.$editable.text().length+t>=this.options.maxTextLength){return true}}return false};e.prototype.createRange=function(){this.focus();return Be.create(this.editable)};e.prototype.saveRange=function(t){this.lastRange=this.createRange();if(t){this.lastRange.collapse().select()}};e.prototype.restoreRange=function(){if(this.lastRange){this.lastRange.select();this.focus()}};e.prototype.saveTarget=function(t){this.$editable.data("target",t)};e.prototype.clearTarget=function(){this.$editable.removeData("target")};e.prototype.restoreTarget=function(){return this.$editable.data("target")};e.prototype.currentStyle=function(){var t=Be.create();if(t){t=t.normalize()}return t?this.style.current(t):this.style.fromNode(this.$editable)};e.prototype.styleFromNode=function(t){return this.style.fromNode(t)};e.prototype.undo=function(){this.context.triggerEvent("before.command",this.$editable.html());this.history.undo();this.context.triggerEvent("change",this.$editable.html())};e.prototype.redo=function(){this.context.triggerEvent("before.command",this.$editable.html());this.history.redo();this.context.triggerEvent("change",this.$editable.html())};e.prototype.beforeCommand=function(){this.context.triggerEvent("before.command",this.$editable.html());this.focus()};e.prototype.afterCommand=function(t){this.history.recordUndo();if(!t){this.context.triggerEvent("change",this.$editable.html())}};e.prototype.tab=function(){var t=this.createRange();if(t.isCollapsed()&&t.isOnCell()){this.table.tab(t)}else{if(this.options.tabSize===0){return false}if(!this.isLimited(this.options.tabSize)){this.beforeCommand();this.typing.insertTab(t,this.options.tabSize);this.afterCommand()}}};e.prototype.untab=function(){var t=this.createRange();if(t.isCollapsed()&&t.isOnCell()){this.table.tab(t,true)}else{if(this.options.tabSize===0){return false}}};e.prototype.wrapCommand=function(t){var e=this;return function(){e.beforeCommand();t.apply(e,arguments);e.afterCommand()}};e.prototype.insertImage=function(t,e){var n=this;return qe(t,e).then(function(t){n.beforeCommand();if(typeof e==="function"){e(t)}else{if(typeof e==="string"){t.attr("data-filename",e)}t.css("width",Math.min(n.$editable.width(),t.width()))}t.show();Be.create(n.editable).insertNode(t[0]);Be.createFromNodeAfter(t[0]).select();n.afterCommand()}).fail(function(t){n.context.triggerEvent("image.upload.error",t)})};e.prototype.insertImages=function(e){var n=this;t.each(e,function(t,e){var i=e.name;if(n.options.maximumImageFileSize&&n.options.maximumImageFileSize<e.size){n.context.triggerEvent("image.upload.error",n.lang.image.maximumFileSizeError)}else{ze(e).then(function(t){return n.insertImage(t,i)}).fail(function(){n.context.triggerEvent("image.upload.error")})}})};e.prototype.insertImagesOrCallback=function(t){var e=this.options.callbacks;if(e.onImageUpload){this.context.triggerEvent("image.upload",t)}else{this.insertImages(t)}};e.prototype.getSelectedText=function(){var t=this.createRange();if(t.isOnAnchor()){t=Be.createFromNode(He.ancestor(t.sc,He.isAnchor))}return t.toString()};e.prototype.onFormatBlock=function(e,n){e=ft.isMSIE?"<"+e+">":e;document.execCommand("FormatBlock",false,e);if(n&&n.length){var i=n[0].className||"";if(i){var o=this.createRange();var r=t([o.sc,o.ec]).closest(e);r.addClass(i)}}};e.prototype.formatPara=function(){this.formatBlock("P")};e.prototype.fontStyling=function(e,n){var i=this.createRange();if(i){var o=this.style.styleNodes(i);t(o).css(e,n);if(i.isCollapsed()){var r=tt.head(o);if(r&&!He.nodeLength(r)){r.innerHTML=He.ZERO_WIDTH_NBSP_CHAR;Be.createFromNodeAfter(r.firstChild).select();this.$editable.data(Qe,r)}}}};e.prototype.unlink=function(){var t=this.createRange();if(t.isOnAnchor()){var e=He.ancestor(t.sc,He.isAnchor);t=Be.createFromNode(e);t.select();this.beforeCommand();document.execCommand("unlink");this.afterCommand()}};e.prototype.getLinkInfo=function(){var e=this.createRange().expand(He.isAnchor);var n=t(tt.head(e.nodes(He.isAnchor)));var i={range:e,text:e.toString(),url:n.length?n.attr("href"):""};if(n.length){i.isNewWindow=n.attr("target")==="_blank"}return i};e.prototype.addRow=function(t){var e=this.createRange(this.$editable);if(e.isCollapsed()&&e.isOnCell()){this.beforeCommand();this.table.addRow(e,t);this.afterCommand()}};e.prototype.addCol=function(t){var e=this.createRange(this.$editable);if(e.isCollapsed()&&e.isOnCell()){this.beforeCommand();this.table.addCol(e,t);this.afterCommand()}};e.prototype.deleteRow=function(){var t=this.createRange(this.$editable);if(t.isCollapsed()&&t.isOnCell()){this.beforeCommand();this.table.deleteRow(t);this.afterCommand()}};e.prototype.deleteCol=function(){var t=this.createRange(this.$editable);if(t.isCollapsed()&&t.isOnCell()){this.beforeCommand();this.table.deleteCol(t);this.afterCommand()}};e.prototype.deleteTable=function(){var t=this.createRange(this.$editable);if(t.isCollapsed()&&t.isOnCell()){this.beforeCommand();this.table.deleteTable(t);this.afterCommand()}};e.prototype.resizeTo=function(t,e,n){var i;if(n){var o=t.y/t.x;var r=e.data("ratio");i={width:r>o?t.x:t.y/r,height:r>o?t.x*r:t.y}}else{i={width:t.x,height:t.y}}e.css(i)};e.prototype.hasFocus=function(){return this.$editable.is(":focus")};e.prototype.focus=function(){if(!this.hasFocus()){this.$editable.focus()}};e.prototype.isEmpty=function(){return He.isEmpty(this.$editable[0])||He.emptyPara===this.$editable.html()};e.prototype.empty=function(){this.context.invoke("code",He.emptyPara)};return e}();var Ye=function(){function t(t){this.context=t;this.$editable=t.layoutInfo.editable}t.prototype.initialize=function(){this.$editable.on("paste",this.pasteByEvent.bind(this))};t.prototype.pasteByEvent=function(t){var e=t.originalEvent.clipboardData;if(e&&e.items&&e.items.length){var n=tt.head(e.items);if(n.kind==="file"&&n.type.indexOf("image/")!==-1){this.context.invoke("editor.insertImagesOrCallback",[n.getAsFile()])}this.context.invoke("editor.afterCommand")}};return t}();var Je=function(){function e(e){this.context=e;this.$eventListener=t(document);this.$editor=e.layoutInfo.editor;this.$editable=e.layoutInfo.editable;this.options=e.options;this.lang=this.options.langInfo;this.documentEventHandlers={};this.$dropzone=t(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(this.$editor)}e.prototype.initialize=function(){if(this.options.disableDragAndDrop){this.documentEventHandlers.onDrop=function(t){t.preventDefault()};this.$eventListener=this.$dropzone;this.$eventListener.on("drop",this.documentEventHandlers.onDrop)}else{this.attachDragAndDropEvent()}};e.prototype.attachDragAndDropEvent=function(){var e=this;var n=t();var i=this.$dropzone.find(".note-dropzone-message");this.documentEventHandlers.onDragenter=function(t){var o=e.context.invoke("codeview.isActivated");var r=e.$editor.width()>0&&e.$editor.height()>0;if(!o&&!n.length&&r){e.$editor.addClass("dragover");e.$dropzone.width(e.$editor.width());e.$dropzone.height(e.$editor.height());i.text(e.lang.image.dragImageHere)}n=n.add(t.target)};this.documentEventHandlers.onDragleave=function(t){n=n.not(t.target);if(!n.length){e.$editor.removeClass("dragover")}};this.documentEventHandlers.onDrop=function(){n=t();e.$editor.removeClass("dragover")};this.$eventListener.on("dragenter",this.documentEventHandlers.onDragenter).on("dragleave",this.documentEventHandlers.onDragleave).on("drop",this.documentEventHandlers.onDrop);this.$dropzone.on("dragenter",function(){e.$dropzone.addClass("hover");i.text(e.lang.image.dropImage)}).on("dragleave",function(){e.$dropzone.removeClass("hover");i.text(e.lang.image.dragImageHere)});this.$dropzone.on("drop",function(n){var i=n.originalEvent.dataTransfer;n.preventDefault();if(i&&i.files&&i.files.length){e.$editable.focus();e.context.invoke("editor.insertImagesOrCallback",i.files)}else{t.each(i.types,function(n,o){var r=i.getData(o);if(o.toLowerCase().indexOf("text")>-1){e.context.invoke("editor.pasteHTML",r)}else{t(r).each(function(t,n){e.context.invoke("editor.insertNode",n)})}})}}).on("dragover",false)};e.prototype.destroy=function(){var t=this;Object.keys(this.documentEventHandlers).forEach(function(e){t.$eventListener.off(e.substr(2).toLowerCase(),t.documentEventHandlers[e])});this.documentEventHandlers={}};return e}();var Ze;if(ft.hasCodeMirror){if(ft.isSupportAmd){require(["codemirror"],function(t){Ze=t})}else{Ze=window.CodeMirror}}var tn=function(){function t(t){this.context=t;this.$editor=t.layoutInfo.editor;this.$editable=t.layoutInfo.editable;this.$codable=t.layoutInfo.codable;this.options=t.options}t.prototype.sync=function(){var t=this.isActivated();if(t&&ft.hasCodeMirror){this.$codable.data("cmEditor").save()}};t.prototype.isActivated=function(){return this.$editor.hasClass("codeview")};t.prototype.toggle=function(){if(this.isActivated()){this.deactivate()}else{this.activate()}this.context.triggerEvent("codeview.toggled")};t.prototype.activate=function(){var t=this;this.$codable.val(He.html(this.$editable,this.options.prettifyHtml));this.$codable.height(this.$editable.height());this.context.invoke("toolbar.updateCodeview",true);this.$editor.addClass("codeview");this.$codable.focus();if(ft.hasCodeMirror){var e=Ze.fromTextArea(this.$codable[0],this.options.codemirror);if(this.options.codemirror.tern){var n=new Ze.TernServer(this.options.codemirror.tern);e.ternServer=n;e.on("cursorActivity",function(t){n.updateArgHints(t)})}e.on("blur",function(n){t.context.triggerEvent("blur.codeview",e.getValue(),n)});e.setSize(null,this.$editable.outerHeight());this.$codable.data("cmEditor",e)}else{this.$codable.on("blur",function(e){t.context.triggerEvent("blur.codeview",t.$codable.val(),e)})}};t.prototype.deactivate=function(){if(ft.hasCodeMirror){var t=this.$codable.data("cmEditor");this.$codable.val(t.getValue());t.toTextArea()}var e=He.value(this.$codable,this.options.prettifyHtml)||He.emptyPara;var n=this.$editable.html()!==e;this.$editable.html(e);this.$editable.height(this.options.height?this.$codable.height():"auto");this.$editor.removeClass("codeview");if(n){this.context.triggerEvent("change",this.$editable.html(),this.$editable)}this.$editable.focus();this.context.invoke("toolbar.updateCodeview",false)};t.prototype.destroy=function(){if(this.isActivated()){this.deactivate()}};return t}();var en=24;var nn=function(){function e(e){this.$document=t(document);this.$statusbar=e.layoutInfo.statusbar;this.$editable=e.layoutInfo.editable;this.options=e.options}e.prototype.initialize=function(){var t=this;if(this.options.airMode||this.options.disableResizeEditor){this.destroy();return}this.$statusbar.on("mousedown",function(e){e.preventDefault();e.stopPropagation();var n=t.$editable.offset().top-t.$document.scrollTop();var i=function(e){var i=e.clientY-(n+en);i=t.options.minheight>0?Math.max(i,t.options.minheight):i;i=t.options.maxHeight>0?Math.min(i,t.options.maxHeight):i;t.$editable.height(i)};t.$document.on("mousemove",i).one("mouseup",function(){t.$document.off("mousemove",i)})})};e.prototype.destroy=function(){this.$statusbar.off()};return e}();var on=function(){function e(e){var n=this;this.context=e;this.$editor=e.layoutInfo.editor;this.$toolbar=e.layoutInfo.toolbar;this.$editable=e.layoutInfo.editable;this.$codable=e.layoutInfo.codable;this.$window=t(window);this.$scrollbar=t("html, body");this.onResize=function(){n.resizeTo({h:n.$window.height()-n.$toolbar.outerHeight()})}}e.prototype.resizeTo=function(t){this.$editable.css("height",t.h);this.$codable.css("height",t.h);if(this.$codable.data("cmeditor")){this.$codable.data("cmeditor").setsize(null,t.h)}};e.prototype.toggle=function(){this.$editor.toggleClass("fullscreen");if(this.isFullscreen()){this.$editable.data("orgHeight",this.$editable.css("height"));this.$window.on("resize",this.onResize).trigger("resize");this.$scrollbar.css("overflow","hidden")}else{this.$window.off("resize",this.onResize);this.resizeTo({h:this.$editable.data("orgHeight")});this.$scrollbar.css("overflow","visible")}this.context.invoke("toolbar.updateFullscreen",this.isFullscreen())};e.prototype.isFullscreen=function(){return this.$editor.hasClass("fullscreen")};return e}();var rn=function(){function e(e){var n=this;this.context=e;this.$document=t(document);this.$editingArea=e.layoutInfo.editingArea;this.options=e.options;this.lang=this.options.langInfo;this.events={"summernote.mousedown":function(t,e){if(n.update(e.target)){e.preventDefault()}},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){n.update()},"summernote.disable":function(){n.hide()},"summernote.codeview.toggled":function(){n.update()}}}e.prototype.initialize=function(){var e=this;this.$handle=t(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',this.options.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',this.options.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(this.$editingArea);this.$handle.on("mousedown",function(t){if(He.isControlSizing(t.target)){t.preventDefault();t.stopPropagation();var n=e.$handle.find(".note-control-selection").data("target");var i=n.offset();var o=e.$document.scrollTop();var r=function(t){e.context.invoke("editor.resizeTo",{x:t.clientX-i.left,y:t.clientY-(i.top-o)},n,!t.shiftKey);e.update(n[0])};e.$document.on("mousemove",r).one("mouseup",function(t){t.preventDefault();e.$document.off("mousemove",r);e.context.invoke("editor.afterCommand")});if(!n.data("ratio")){n.data("ratio",n.height()/n.width())}}});this.$handle.on("wheel",function(t){t.preventDefault();e.update()})};e.prototype.destroy=function(){this.$handle.remove()};e.prototype.update=function(e){if(this.context.isDisabled()){return false}var n=He.isImg(e);var i=this.$handle.find(".note-control-selection");this.context.invoke("imagePopover.update",e);if(n){var o=t(e);var r=o.position();var s={left:r.left+parseInt(o.css("marginLeft"),10),top:r.top+parseInt(o.css("marginTop"),10)};var a={w:o.outerWidth(false),h:o.outerHeight(false)};i.css({display:"block",left:s.left,top:s.top,width:a.w,height:a.h}).data("target",o);var l=new Image;l.src=o.attr("src");var u=a.w+"x"+a.h+" ("+this.lang.image.original+": "+l.width+"x"+l.height+")";i.find(".note-control-selection-info").text(u);this.context.invoke("editor.saveTarget",e)}else{this.hide()}return n};e.prototype.hide=function(){this.context.invoke("editor.clearTarget");this.$handle.children().hide()};return e}();var sn="http://";var an=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;var ln=function(){function e(t){var e=this;this.context=t;this.events={"summernote.keyup":function(t,n){if(!n.isDefaultPrevented()){e.handleKeyup(n)}},"summernote.keydown":function(t,n){e.handleKeydown(n)}}}e.prototype.initialize=function(){this.lastWordRange=null};e.prototype.destroy=function(){this.lastWordRange=null};e.prototype.replace=function(){if(!this.lastWordRange){return}var e=this.lastWordRange.toString();var n=e.match(an);if(n&&(n[1]||n[2])){var i=n[1]?e:sn+e;var o=t("<a />").html(e).attr("href",i)[0];this.lastWordRange.insertNode(o);this.lastWordRange=null;this.context.invoke("editor.focus")}};e.prototype.handleKeydown=function(t){if(tt.contains([Fe.code.ENTER,Fe.code.SPACE],t.keyCode)){var e=this.context.invoke("editor.createRange").getWordRange();this.lastWordRange=e}};e.prototype.handleKeyup=function(t){if(tt.contains([Fe.code.ENTER,Fe.code.SPACE],t.keyCode)){this.replace()}};return e}();var un=function(){function t(t){var e=this;this.$note=t.layoutInfo.note;this.events={"summernote.change":function(){e.$note.val(t.invoke("code"))}}}t.prototype.shouldInitialize=function(){return He.isTextarea(this.$note[0])};return t}();var cn=function(){function e(t){var e=this;this.context=t;this.$editingArea=t.layoutInfo.editingArea;this.options=t.options;this.events={"summernote.init summernote.change":function(){e.update()},"summernote.codeview.toggled":function(){e.update()}}}e.prototype.shouldInitialize=function(){return!!this.options.placeholder};e.prototype.initialize=function(){var e=this;this.$placeholder=t('<div class="note-placeholder">');this.$placeholder.on("click",function(){e.context.invoke("focus")}).text(this.options.placeholder).prependTo(this.$editingArea);this.update()};e.prototype.destroy=function(){this.$placeholder.remove()};e.prototype.update=function(){var t=!this.context.invoke("codeview.isActivated")&&this.context.invoke("editor.isEmpty");this.$placeholder.toggle(t)};return e}();var fn=function(){function e(e){this.ui=t.summernote.ui;this.context=e;this.$toolbar=e.layoutInfo.toolbar;this.options=e.options;this.lang=this.options.langInfo;this.invertedKeyMap=j.invertObject(this.options.keyMap[ft.isMac?"mac":"pc"])}e.prototype.representShortcut=function(t){var e=this.invertedKeyMap[t];if(!this.options.shortcuts||!e){return""}if(ft.isMac){e=e.replace("CMD","â").replace("SHIFT","â§")}e=e.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]");return" ("+e+")"};e.prototype.button=function(t){if(!this.options.tooltip&&t.tooltip){delete t.tooltip}t.container=this.options.container;return this.ui.button(t)};e.prototype.initialize=function(){this.addToolbarButtons();this.addImagePopoverButtons();this.addLinkPopoverButtons();this.addTablePopoverButtons();this.fontInstalledMap={}};e.prototype.destroy=function(){delete this.fontInstalledMap};e.prototype.isFontInstalled=function(t){if(!this.fontInstalledMap.hasOwnProperty(t)){this.fontInstalledMap[t]=ft.isFontInstalled(t)||tt.contains(this.options.fontNamesIgnoreCheck,t)}return this.fontInstalledMap[t]};e.prototype.isFontDeservedToAdd=function(e){var n=["sans-serif","serif","monospace","cursive","fantasy"];e=e.toLowerCase();return e!==""&&this.isFontInstalled(e)&&t.inArray(e,n)===-1};e.prototype.addToolbarButtons=function(){var e=this;this.context.memo("button.style",function(){return e.ui.buttonGroup([e.button({className:"dropdown-toggle",contents:e.ui.dropdownButtonContents(e.ui.icon(e.options.icons.magic),e.options),tooltip:e.lang.style.style,data:{toggle:"dropdown"}}),e.ui.dropdown({className:"dropdown-style",items:e.options.styleTags,template:function(t){if(typeof t==="string"){t={tag:t,title:e.lang.style.hasOwnProperty(t)?e.lang.style[t]:t}}var n=t.tag;var i=t.title;var o=t.style?' style="'+t.style+'" ':"";var r=t.className?' class="'+t.className+'"':"";return"<"+n+o+r+">"+i+"</"+n+">"},click:e.context.createInvokeHandler("editor.formatBlock")})]).render()});var n=function(t,n){var o=i.options.styleTags[t];i.context.memo("button.style."+o,function(){return e.button({className:"note-btn-style-"+o,contents:'<div data-value="'+o+'">'+o.toUpperCase()+"</div>",tooltip:o.toUpperCase(),click:e.context.createInvokeHandler("editor.formatBlock")}).render()})};var i=this;for(var o=0,r=this.options.styleTags.length;o<r;o++){n(o,r)}this.context.memo("button.bold",function(){return e.button({className:"note-btn-bold",contents:e.ui.icon(e.options.icons.bold),tooltip:e.lang.font.bold+e.representShortcut("bold"),click:e.context.createInvokeHandlerAndUpdateState("editor.bold")}).render()});this.context.memo("button.italic",function(){return e.button({className:"note-btn-italic",contents:e.ui.icon(e.options.icons.italic),tooltip:e.lang.font.italic+e.representShortcut("italic"),click:e.context.createInvokeHandlerAndUpdateState("editor.italic")}).render()});this.context.memo("button.underline",function(){return e.button({className:"note-btn-underline",contents:e.ui.icon(e.options.icons.underline),tooltip:e.lang.font.underline+e.representShortcut("underline"),click:e.context.createInvokeHandlerAndUpdateState("editor.underline")}).render()});this.context.memo("button.clear",function(){return e.button({contents:e.ui.icon(e.options.icons.eraser),tooltip:e.lang.font.clear+e.representShortcut("removeFormat"),click:e.context.createInvokeHandler("editor.removeFormat")}).render()});this.context.memo("button.strikethrough",function(){return e.button({className:"note-btn-strikethrough",contents:e.ui.icon(e.options.icons.strikethrough),tooltip:e.lang.font.strikethrough+e.representShortcut("strikethrough"),click:e.context.createInvokeHandlerAndUpdateState("editor.strikethrough")}).render()});this.context.memo("button.superscript",function(){return e.button({className:"note-btn-superscript",contents:e.ui.icon(e.options.icons.superscript),tooltip:e.lang.font.superscript,click:e.context.createInvokeHandlerAndUpdateState("editor.superscript")}).render()});this.context.memo("button.subscript",function(){return e.button({className:"note-btn-subscript",contents:e.ui.icon(e.options.icons.subscript),tooltip:e.lang.font.subscript,click:e.context.createInvokeHandlerAndUpdateState("editor.subscript")}).render()});this.context.memo("button.fontname",function(){var n=e.context.invoke("editor.currentStyle");t.each(n["font-family"].split(","),function(n,i){i=i.trim().replace(/['"]+/g,"");if(e.isFontDeservedToAdd(i)){if(t.inArray(i,e.options.fontNames)===-1){e.options.fontNames.push(i)}}});return e.ui.buttonGroup([e.button({className:"dropdown-toggle",contents:e.ui.dropdownButtonContents('<span class="note-current-fontname"/>',e.options),tooltip:e.lang.font.name,data:{toggle:"dropdown"}}),e.ui.dropdownCheck({className:"dropdown-fontname",checkClassName:e.options.icons.menuCheck,items:e.options.fontNames.filter(e.isFontInstalled.bind(e)),template:function(t){return"<span style=\"font-family: '"+t+"'\">"+t+"</span>"},click:e.context.createInvokeHandlerAndUpdateState("editor.fontName")})]).render()});this.context.memo("button.fontsize",function(){return e.ui.buttonGroup([e.button({className:"dropdown-toggle",contents:e.ui.dropdownButtonContents('<span class="note-current-fontsize"/>',e.options),tooltip:e.lang.font.size,data:{toggle:"dropdown"}}),e.ui.dropdownCheck({className:"dropdown-fontsize",checkClassName:e.options.icons.menuCheck,items:e.options.fontSizes,click:e.context.createInvokeHandlerAndUpdateState("editor.fontSize")})]).render()});this.context.memo("button.color",function(){return e.ui.buttonGroup({className:"note-color",children:[e.button({className:"note-current-color-button",contents:e.ui.icon(e.options.icons.font+" note-recent-color"),tooltip:e.lang.color.recent,click:function(n){var i=t(n.currentTarget);e.context.invoke("editor.color",{backColor:i.attr("data-backColor"),foreColor:i.attr("data-foreColor")})},callback:function(t){var e=t.find(".note-recent-color");e.css("background-color","#FFFF00");t.attr("data-backColor","#FFFF00")}}),e.button({className:"dropdown-toggle",contents:e.ui.dropdownButtonContents("",e.options),tooltip:e.lang.color.more,data:{toggle:"dropdown"}}),e.ui.dropdown({items:['<div class="note-palette">','  <div class="note-palette-title">'+e.lang.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="backColor" data-value="inherit">',e.lang.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"</div>",'<div class="note-palette">','  <div class="note-palette-title">'+e.lang.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="removeFormat" data-value="foreColor">',e.lang.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"</div>"].join(""),callback:function(n){n.find(".note-holder").each(function(n,i){var o=t(i);o.append(e.ui.palette({colors:e.options.colors,eventName:o.data("event"),container:e.options.container,tooltip:e.options.tooltip}).render())})},click:function(n){var i=t(n.target);var o=i.data("event");var r=i.data("value");if(o&&r){var s=o==="backColor"?"background-color":"color";var a=i.closest(".note-color").find(".note-recent-color");var l=i.closest(".note-color").find(".note-current-color-button");a.css(s,r);l.attr("data-"+o,r);e.context.invoke("editor."+o,r)}}})]}).render()});this.context.memo("button.ul",function(){return e.button({contents:e.ui.icon(e.options.icons.unorderedlist),tooltip:e.lang.lists.unordered+e.representShortcut("insertUnorderedList"),click:e.context.createInvokeHandler("editor.insertUnorderedList")}).render()});this.context.memo("button.ol",function(){return e.button({contents:e.ui.icon(e.options.icons.orderedlist),tooltip:e.lang.lists.ordered+e.representShortcut("insertOrderedList"),click:e.context.createInvokeHandler("editor.insertOrderedList")}).render()});var s=this.button({contents:this.ui.icon(this.options.icons.alignLeft),tooltip:this.lang.paragraph.left+this.representShortcut("justifyLeft"),click:this.context.createInvokeHandler("editor.justifyLeft")});var a=this.button({contents:this.ui.icon(this.options.icons.alignCenter),tooltip:this.lang.paragraph.center+this.representShortcut("justifyCenter"),click:this.context.createInvokeHandler("editor.justifyCenter")});var l=this.button({contents:this.ui.icon(this.options.icons.alignRight),tooltip:this.lang.paragraph.right+this.representShortcut("justifyRight"),click:this.context.createInvokeHandler("editor.justifyRight")});var u=this.button({contents:this.ui.icon(this.options.icons.alignJustify),tooltip:this.lang.paragraph.justify+this.representShortcut("justifyFull"),click:this.context.createInvokeHandler("editor.justifyFull")});var c=this.button({contents:this.ui.icon(this.options.icons.outdent),tooltip:this.lang.paragraph.outdent+this.representShortcut("outdent"),click:this.context.createInvokeHandler("editor.outdent")});var f=this.button({contents:this.ui.icon(this.options.icons.indent),tooltip:this.lang.paragraph.indent+this.representShortcut("indent"),click:this.context.createInvokeHandler("editor.indent")});this.context.memo("button.justifyLeft",j.invoke(s,"render"));this.context.memo("button.justifyCenter",j.invoke(a,"render"));this.context.memo("button.justifyRight",j.invoke(l,"render"));this.context.memo("button.justifyFull",j.invoke(u,"render"));this.context.memo("button.outdent",j.invoke(c,"render"));this.context.memo("button.indent",j.invoke(f,"render"));this.context.memo("button.paragraph",function(){return e.ui.buttonGroup([e.button({className:"dropdown-toggle",contents:e.ui.dropdownButtonContents(e.ui.icon(e.options.icons.alignLeft),e.options),tooltip:e.lang.paragraph.paragraph,data:{toggle:"dropdown"}}),e.ui.dropdown([e.ui.buttonGroup({className:"note-align",children:[s,a,l,u]}),e.ui.buttonGroup({className:"note-list",children:[c,f]})])]).render()});this.context.memo("button.height",function(){return e.ui.buttonGroup([e.button({className:"dropdown-toggle",contents:e.ui.dropdownButtonContents(e.ui.icon(e.options.icons.textHeight),e.options),tooltip:e.lang.font.height,data:{toggle:"dropdown"}}),e.ui.dropdownCheck({items:e.options.lineHeights,checkClassName:e.options.icons.menuCheck,className:"dropdown-line-height",click:e.context.createInvokeHandler("editor.lineHeight")})]).render()});this.context.memo("button.table",function(){return e.ui.buttonGroup([e.button({className:"dropdown-toggle",contents:e.ui.dropdownButtonContents(e.ui.icon(e.options.icons.table),e.options),tooltip:e.lang.table.table,data:{toggle:"dropdown"}}),e.ui.dropdown({className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(t){var n=t.find(".note-dimension-picker-mousecatcher");n.css({width:e.options.insertTableMaxSize.col+"em",height:e.options.insertTableMaxSize.row+"em"}).mousedown(e.context.createInvokeHandler("editor.insertTable")).on("mousemove",e.tableMoveHandler.bind(e))}}).render()});this.context.memo("button.link",function(){return e.button({contents:e.ui.icon(e.options.icons.link),tooltip:e.lang.link.link+e.representShortcut("linkDialog.show"),click:e.context.createInvokeHandler("linkDialog.show")}).render()});this.context.memo("button.picture",function(){return e.button({contents:e.ui.icon(e.options.icons.picture),tooltip:e.lang.image.image,click:e.context.createInvokeHandler("imageDialog.show")}).render()});this.context.memo("button.video",function(){return e.button({contents:e.ui.icon(e.options.icons.video),tooltip:e.lang.video.video,click:e.context.createInvokeHandler("videoDialog.show")}).render()});this.context.memo("button.hr",function(){return e.button({contents:e.ui.icon(e.options.icons.minus),tooltip:e.lang.hr.insert+e.representShortcut("insertHorizontalRule"),click:e.context.createInvokeHandler("editor.insertHorizontalRule")}).render()});this.context.memo("button.fullscreen",function(){return e.button({className:"btn-fullscreen",contents:e.ui.icon(e.options.icons.arrowsAlt),tooltip:e.options.fullscreen,click:e.context.createInvokeHandler("fullscreen.toggle")}).render()});this.context.memo("button.codeview",function(){return e.button({className:"btn-codeview",contents:e.ui.icon(e.options.icons.code),tooltip:e.options.codeview,click:e.context.createInvokeHandler("codeview.toggle")}).render()});this.context.memo("button.redo",function(){return e.button({contents:e.ui.icon(e.options.icons.redo),tooltip:e.lang.history.redo+e.representShortcut("redo"),click:e.context.createInvokeHandler("editor.redo")}).render()});this.context.memo("button.undo",function(){return e.button({contents:e.ui.icon(e.options.icons.undo),tooltip:e.lang.history.undo+e.representShortcut("undo"),click:e.context.createInvokeHandler("editor.undo")}).render()});this.context.memo("button.help",function(){return e.button({contents:e.ui.icon(e.options.icons.question),tooltip:e.options.help,click:e.context.createInvokeHandler("helpDialog.show")}).render()})};e.prototype.addImagePopoverButtons=function(){var t=this;this.context.memo("button.imageSize100",function(){return t.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:t.lang.image.resizeFull,click:t.context.createInvokeHandler("editor.resize","1")}).render()});this.context.memo("button.imageSize50",function(){return t.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:t.lang.image.resizeHalf,click:t.context.createInvokeHandler("editor.resize","0.5")}).render()});this.context.memo("button.imageSize25",function(){return t.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:t.lang.image.resizeQuarter,click:t.context.createInvokeHandler("editor.resize","0.25")}).render()});this.context.memo("button.floatLeft",function(){return t.button({contents:t.ui.icon(t.options.icons.alignLeft),tooltip:t.lang.image.floatLeft,click:t.context.createInvokeHandler("editor.floatMe","left")}).render()});this.context.memo("button.floatRight",function(){return t.button({contents:t.ui.icon(t.options.icons.alignRight),tooltip:t.lang.image.floatRight,click:t.context.createInvokeHandler("editor.floatMe","right")}).render()});this.context.memo("button.floatNone",function(){return t.button({contents:t.ui.icon(t.options.icons.alignJustify),tooltip:t.lang.image.floatNone,click:t.context.createInvokeHandler("editor.floatMe","none")}).render()});this.context.memo("button.removeMedia",function(){return t.button({contents:t.ui.icon(t.options.icons.trash),tooltip:t.lang.image.remove,click:t.context.createInvokeHandler("editor.removeMedia")}).render()})};e.prototype.addLinkPopoverButtons=function(){var t=this;this.context.memo("button.linkDialogShow",function(){return t.button({contents:t.ui.icon(t.options.icons.link),tooltip:t.lang.link.edit,click:t.context.createInvokeHandler("linkDialog.show")}).render()});this.context.memo("button.unlink",function(){return t.button({contents:t.ui.icon(t.options.icons.unlink),tooltip:t.lang.link.unlink,click:t.context.createInvokeHandler("editor.unlink")}).render()})};e.prototype.addTablePopoverButtons=function(){var t=this;this.context.memo("button.addRowUp",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.rowAbove),tooltip:t.lang.table.addRowAbove,click:t.context.createInvokeHandler("editor.addRow","top")}).render()});this.context.memo("button.addRowDown",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.rowBelow),tooltip:t.lang.table.addRowBelow,click:t.context.createInvokeHandler("editor.addRow","bottom")}).render()});this.context.memo("button.addColLeft",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.colBefore),tooltip:t.lang.table.addColLeft,click:t.context.createInvokeHandler("editor.addCol","left")}).render()});this.context.memo("button.addColRight",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.colAfter),tooltip:t.lang.table.addColRight,click:t.context.createInvokeHandler("editor.addCol","right")}).render()});this.context.memo("button.deleteRow",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.rowRemove),tooltip:t.lang.table.delRow,click:t.context.createInvokeHandler("editor.deleteRow")}).render()});this.context.memo("button.deleteCol",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.colRemove),tooltip:t.lang.table.delCol,click:t.context.createInvokeHandler("editor.deleteCol")}).render()});this.context.memo("button.deleteTable",function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.trash),tooltip:t.lang.table.delTable,click:t.context.createInvokeHandler("editor.deleteTable")}).render()})};e.prototype.build=function(e,n){for(var i=0,o=n.length;i<o;i++){var r=n[i];var s=t.isArray(r)?r[0]:r;var a=t.isArray(r)?r.length===1?[r[0]]:r[1]:[r];var l=this.ui.buttonGroup({className:"note-"+s}).render();for(var u=0,c=a.length;u<c;u++){var f=this.context.memo("button."+a[u]);if(f){l.append(typeof f==="function"?f(this.context):f)}}l.appendTo(e)}};e.prototype.updateCurrentStyle=function(e){var n=this;var i=e||this.$toolbar;var o=this.context.invoke("editor.currentStyle");this.updateBtnStates(i,{".note-btn-bold":function(){return o["font-bold"]==="bold"},".note-btn-italic":function(){return o["font-italic"]==="italic"},".note-btn-underline":function(){return o["font-underline"]==="underline"},".note-btn-subscript":function(){return o["font-subscript"]==="subscript"},".note-btn-superscript":function(){return o["font-superscript"]==="superscript"},".note-btn-strikethrough":function(){return o["font-strikethrough"]==="strikethrough"}});if(o["font-family"]){var r=o["font-family"].split(",").map(function(t){return t.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")});var s=tt.find(r,this.isFontInstalled.bind(this));i.find(".dropdown-fontname a").each(function(e,n){var i=t(n);var o=i.data("value")+""===s+"";i.toggleClass("checked",o)});i.find(".note-current-fontname").text(s).css("font-family",s)}if(o["font-size"]){var a=o["font-size"];i.find(".dropdown-fontsize a").each(function(e,n){var i=t(n);var o=i.data("value")+""===a+"";i.toggleClass("checked",o)});i.find(".note-current-fontsize").text(a)}if(o["line-height"]){var l=o["line-height"];i.find(".dropdown-line-height li a").each(function(e,i){var o=t(i).data("value")+""===l+"";n.className=o?"checked":""})}};e.prototype.updateBtnStates=function(e,n){var i=this;t.each(n,function(t,n){i.ui.toggleBtnActive(e.find(t),n())})};e.prototype.tableMoveHandler=function(e){var n=18;var i=t(e.target.parentNode);var o=i.next();var r=i.find(".note-dimension-picker-mousecatcher");var s=i.find(".note-dimension-picker-highlighted");var a=i.find(".note-dimension-picker-unhighlighted");var l;if(e.offsetX===undefined){var u=t(e.target).offset();l={x:e.pageX-u.left,y:e.pageY-u.top}}else{l={x:e.offsetX,y:e.offsetY}}var c={c:Math.ceil(l.x/n)||1,r:Math.ceil(l.y/n)||1};s.css({width:c.c+"em",height:c.r+"em"});r.data("value",c.c+"x"+c.r);if(c.c>3&&c.c<this.options.insertTableMaxSize.col){a.css({width:c.c+1+"em"})}if(c.r>3&&c.r<this.options.insertTableMaxSize.row){a.css({height:c.r+1+"em"})}o.html(c.c+" x "+c.r)};return e}();var dn=function(){function e(e){this.context=e;this.$window=t(window);this.$document=t(document);this.ui=t.summernote.ui;this.$note=e.layoutInfo.note;this.$editor=e.layoutInfo.editor;this.$toolbar=e.layoutInfo.toolbar;this.options=e.options;this.followScroll=this.followScroll.bind(this)}e.prototype.shouldInitialize=function(){return!this.options.airMode};e.prototype.initialize=function(){var t=this;this.options.toolbar=this.options.toolbar||[];if(!this.options.toolbar.length){this.$toolbar.hide()}else{this.context.invoke("buttons.build",this.$toolbar,this.options.toolbar)}if(this.options.toolbarContainer){this.$toolbar.appendTo(this.options.toolbarContainer)}this.changeContainer(false);this.$note.on("summernote.keyup summernote.mouseup summernote.change",function(){t.context.invoke("buttons.updateCurrentStyle")});this.context.invoke("buttons.updateCurrentStyle");if(this.options.followingToolbar){this.$window.on("scroll resize",this.followScroll)}};e.prototype.destroy=function(){this.$toolbar.children().remove();if(this.options.followingToolbar){this.$window.off("scroll resize",this.followScroll)}};e.prototype.followScroll=function(){if(this.$editor.hasClass("fullscreen")){return false}var e=this.$toolbar.parent(".note-toolbar-wrapper");var n=this.$editor.outerHeight();var i=this.$editor.width();var o=this.$toolbar.height();e.css({height:o});var r=0;if(this.options.otherStaticBar){r=t(this.options.otherStaticBar).outerHeight()}var s=this.$document.scrollTop();var a=this.$editor.offset().top;var l=a+n;var u=a-r;var c=l-r-o;if(s>u&&s<c){this.$toolbar.css({position:"fixed",top:r,width:i})}else{this.$toolbar.css({position:"relative",top:0,width:"100%"})}};e.prototype.changeContainer=function(t){if(t){this.$toolbar.prependTo(this.$editor)}else{if(this.options.toolbarContainer){this.$toolbar.appendTo(this.options.toolbarContainer)}}};e.prototype.updateFullscreen=function(t){this.ui.toggleBtnActive(this.$toolbar.find(".btn-fullscreen"),t);this.changeContainer(t)};e.prototype.updateCodeview=function(t){this.ui.toggleBtnActive(this.$toolbar.find(".btn-codeview"),t);if(t){this.deactivate()}else{this.activate()}};e.prototype.activate=function(t){var e=this.$toolbar.find("button");if(!t){e=e.not(".btn-codeview")}this.ui.toggleBtn(e,true)};e.prototype.deactivate=function(t){var e=this.$toolbar.find("button");if(!t){e=e.not(".btn-codeview")}this.ui.toggleBtn(e,false)};return e}();var hn=function(){function e(e){this.context=e;this.ui=t.summernote.ui;this.$body=t(document.body);this.$editor=e.layoutInfo.editor;this.options=e.options;this.lang=this.options.langInfo;e.memo("help.linkDialog.show",this.options.langInfo.help["linkDialog.show"])}e.prototype.initialize=function(){var e=this.options.dialogsInBody?this.$body:this.$editor;var n=['<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.textToDisplay+"</label>",'<input class="note-link-text form-control note-form-control  note-input" type="text" />',"</div>",'<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.url+"</label>",'<input class="note-link-url form-control note-form-control note-input" type="text" value="http://" />',"</div>",!this.options.disableLinkTarget?t("<div/>").append(this.ui.checkbox({id:"sn-checkbox-open-in-new-window",text:this.lang.link.openInNewWindow,checked:true}).render()).html():""].join("");var i="btn btn-primary note-btn note-btn-primary note-link-btn";var o='<button type="submit" href="#" class="'+i+'" disabled>'+this.lang.link.insert+"</button>";this.$dialog=this.ui.dialog({className:"link-dialog",title:this.lang.link.insert,fade:this.options.dialogsFade,body:n,footer:o}).render().appendTo(e)};e.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()};e.prototype.bindEnterKey=function(t,e){t.on("keypress",function(t){if(t.keyCode===Fe.code.ENTER){t.preventDefault();e.trigger("click")}})};e.prototype.toggleLinkBtn=function(t,e,n){this.ui.toggleBtn(t,e.val()&&n.val())};e.prototype.showLinkDialog=function(e){var n=this;return t.Deferred(function(t){var i=n.$dialog.find(".note-link-text");var o=n.$dialog.find(".note-link-url");var r=n.$dialog.find(".note-link-btn");var s=n.$dialog.find("input[type=checkbox]");n.ui.onDialogShown(n.$dialog,function(){n.context.triggerEvent("dialog.shown");if(!e.url){e.url=e.text}i.val(e.text);var a=function(){n.toggleLinkBtn(r,i,o);e.text=i.val()};i.on("input",a).on("paste",function(){setTimeout(a,0)});var l=function(){n.toggleLinkBtn(r,i,o);if(!e.text){i.val(o.val())}};o.on("input",l).on("paste",function(){setTimeout(l,0)}).val(e.url);if(!ft.isSupportTouch){o.trigger("focus")}n.toggleLinkBtn(r,i,o);n.bindEnterKey(o,r);n.bindEnterKey(i,r);var u=e.isNewWindow!==undefined?e.isNewWindow:n.context.options.linkTargetBlank;s.prop("checked",u);r.one("click",function(r){r.preventDefault();t.resolve({range:e.range,url:o.val(),text:i.val(),isNewWindow:s.is(":checked")});n.ui.hideDialog(n.$dialog)})});n.ui.onDialogHidden(n.$dialog,function(){i.off("input paste keypress");o.off("input paste keypress");r.off("click");if(t.state()==="pending"){t.reject()}});n.ui.showDialog(n.$dialog)}).promise()};e.prototype.show=function(){var t=this;var e=this.context.invoke("editor.getLinkInfo");this.context.invoke("editor.saveRange");this.showLinkDialog(e).then(function(e){t.context.invoke("editor.restoreRange");t.context.invoke("editor.createLink",e)}).fail(function(){t.context.invoke("editor.restoreRange")})};return e}();var pn=function(){function e(e){var n=this;this.context=e;this.ui=t.summernote.ui;this.options=e.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){n.update()},"summernote.disable summernote.dialog.shown":function(){n.hide()}}}e.prototype.shouldInitialize=function(){return!tt.isEmpty(this.options.popover.link)};e.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-link-popover",callback:function(t){var e=t.find(".popover-content,.note-popover-content");e.prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.link)};e.prototype.destroy=function(){this.$popover.remove()};e.prototype.update=function(){if(!this.context.invoke("editor.hasFocus")){this.hide();return}var e=this.context.invoke("editor.createRange");if(e.isCollapsed()&&e.isOnAnchor()){var n=He.ancestor(e.sc,He.isAnchor);var i=t(n).attr("href");this.$popover.find("a").attr("href",i).html(i);var o=He.posFromPlaceholder(n);this.$popover.css({display:"block",left:o.left,top:o.top})}else{this.hide()}};e.prototype.hide=function(){this.$popover.hide()};return e}();var vn=function(){function e(e){this.context=e;this.ui=t.summernote.ui;this.$body=t(document.body);this.$editor=e.layoutInfo.editor;this.options=e.options;this.lang=this.options.langInfo}e.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor;var e="";if(this.options.maximumImageFileSize){var n=Math.floor(Math.log(this.options.maximumImageFileSize)/Math.log(1024));var i=(this.options.maximumImageFileSize/Math.pow(1024,n)).toFixed(2)*1+" "+" KMGTP"[n]+"B";e="<small>"+(this.lang.image.maximumFileSize+" : "+i)+"</small>"}var o=['<div class="form-group note-form-group note-group-select-from-files">','<label class="note-form-label">'+this.lang.image.selectFromFiles+"</label>",'<input class="note-image-input note-form-control note-input" ',' type="file" name="files" accept="image/*" multiple="multiple" />',e,"</div>",'<div class="form-group note-group-image-url" style="overflow:auto;">','<label class="note-form-label">'+this.lang.image.url+"</label>",'<input class="note-image-url form-control note-form-control note-input ',' col-md-12" type="text" />',"</div>"].join("");var r="btn btn-primary note-btn note-btn-primary note-image-btn";var s='<button type="submit" href="#" class="'+r+'" disabled>'+this.lang.image.insert+"</button>";this.$dialog=this.ui.dialog({title:this.lang.image.insert,fade:this.options.dialogsFade,body:o,footer:s}).render().appendTo(t)};e.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()};e.prototype.bindEnterKey=function(t,e){t.on("keypress",function(t){if(t.keyCode===Fe.code.ENTER){t.preventDefault();e.trigger("click")}})};e.prototype.show=function(){var t=this;this.context.invoke("editor.saveRange");this.showImageDialog().then(function(e){t.ui.hideDialog(t.$dialog);t.context.invoke("editor.restoreRange");if(typeof e==="string"){t.context.invoke("editor.insertImage",e)}else{t.context.invoke("editor.insertImagesOrCallback",e)}}).fail(function(){t.context.invoke("editor.restoreRange")})};e.prototype.showImageDialog=function(){var e=this;return t.Deferred(function(t){var n=e.$dialog.find(".note-image-input");var i=e.$dialog.find(".note-image-url");var o=e.$dialog.find(".note-image-btn");e.ui.onDialogShown(e.$dialog,function(){e.context.triggerEvent("dialog.shown");n.replaceWith(n.clone().on("change",function(e){t.resolve(e.target.files||e.target.value)}).val(""));o.click(function(e){e.preventDefault();t.resolve(i.val())});i.on("keyup paste",function(){var t=i.val();e.ui.toggleBtn(o,t)}).val("");if(!ft.isSupportTouch){i.trigger("focus")}e.bindEnterKey(i,o)});e.ui.onDialogHidden(e.$dialog,function(){n.off("change");i.off("keyup paste keypress");o.off("click");if(t.state()==="pending"){t.reject()}});e.ui.showDialog(e.$dialog)})};return e}();var mn=function(){function e(e){var n=this;this.context=e;this.ui=t.summernote.ui;this.editable=e.layoutInfo.editable[0];this.options=e.options;this.events={"summernote.disable":function(){n.hide()}}}e.prototype.shouldInitialize=function(){return!tt.isEmpty(this.options.popover.image)};e.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-image-popover"}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.image)};e.prototype.destroy=function(){this.$popover.remove()};e.prototype.update=function(t){if(He.isImg(t)){var e=He.posFromPlaceholder(t);var n=He.posFromPlaceholder(this.editable);this.$popover.css({display:"block",left:this.options.popatmouse?event.pageX-20:e.left,top:this.options.popatmouse?event.pageY:Math.min(e.top,n.top)})}else{this.hide()}};e.prototype.hide=function(){this.$popover.hide()};return e}();var gn=function(){function e(e){var n=this;this.context=e;this.ui=t.summernote.ui;this.options=e.options;this.events={"summernote.mousedown":function(t,e){n.update(e.target)},"summernote.keyup summernote.scroll summernote.change":function(){n.update()},"summernote.disable":function(){n.hide()}}}e.prototype.shouldInitialize=function(){return!tt.isEmpty(this.options.popover.table)};e.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-table-popover"}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.table);if(ft.isFF){document.execCommand("enableInlineTableEditing",false,false)}};e.prototype.destroy=function(){this.$popover.remove()};e.prototype.update=function(t){if(this.context.isDisabled()){return false}var e=He.isCell(t);if(e){var n=He.posFromPlaceholder(t);this.$popover.css({display:"block",left:n.left,top:n.top})}else{this.hide()}return e};e.prototype.hide=function(){this.$popover.hide()};return e}();var yn=function(){function e(e){this.context=e;this.ui=t.summernote.ui;this.$body=t(document.body);this.$editor=e.layoutInfo.editor;this.options=e.options;this.lang=this.options.langInfo}e.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor;var e=['<div class="form-group note-form-group row-fluid">','<label class="note-form-label">'+this.lang.video.url+' <small class="text-muted">'+this.lang.video.providers+"</small></label>",'<input class="note-video-url form-control note-form-control note-input" type="text" />',"</div>"].join("");var n="btn btn-primary note-btn note-btn-primary note-video-btn";var i='<button type="submit" href="#" class="'+n+'" disabled>'+this.lang.video.insert+"</button>";this.$dialog=this.ui.dialog({title:this.lang.video.insert,fade:this.options.dialogsFade,body:e,footer:i}).render().appendTo(t)};e.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()};e.prototype.bindEnterKey=function(t,e){t.on("keypress",function(t){if(t.keyCode===Fe.code.ENTER){t.preventDefault();e.trigger("click")}})};e.prototype.createVideoNode=function(e){var n=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;var i=e.match(n);var o=/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/;var r=e.match(o);var s=/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/;var a=e.match(s);var l=/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/;var u=e.match(l);var c=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/;var f=e.match(c);var d=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/;var h=e.match(d);var p=/\/\/v\.qq\.com.*?vid=(.+)/;var v=e.match(p);var m=/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/;var g=e.match(m);var y=/^.+.(mp4|m4v)$/;var b=e.match(y);var w=/^.+.(ogg|ogv)$/;var x=e.match(w);var C=/^.+.(webm)$/;var k=e.match(C);var T;if(i&&i[1].length===11){var S=i[1];T=t("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+S).attr("width","640").attr("height","360")}else if(r&&r[0].length){T=t("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+r[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true")}else if(a&&a[0].length){T=t("<iframe>").attr("frameborder",0).attr("src",a[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed")}else if(u&&u[3].length){T=t("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+u[3]).attr("width","640").attr("height","360")}else if(f&&f[2].length){T=t("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+f[2]).attr("width","640").attr("height","360")}else if(h&&h[1].length){T=t("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+h[1])}else if(v&&v[1].length||g&&g[2].length){var $=v&&v[1].length?v[1]:g[2];T=t("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","310").attr("width","500").attr("src","http://v.qq.com/iframe/player.html?vid="+$+"&amp;auto=0")}else if(b||x||k){T=t("<video controls>").attr("src",e).attr("width","640").attr("height","360")}else{return false}T.addClass("note-video-clip");return T[0]};e.prototype.show=function(){var t=this;var e=this.context.invoke("editor.getSelectedText");this.context.invoke("editor.saveRange");this.showVideoDialog(e).then(function(e){t.ui.hideDialog(t.$dialog);t.context.invoke("editor.restoreRange");var n=t.createVideoNode(e);if(n){t.context.invoke("editor.insertNode",n)}}).fail(function(){t.context.invoke("editor.restoreRange")})};e.prototype.showVideoDialog=function(e){var n=this;return t.Deferred(function(t){var i=n.$dialog.find(".note-video-url");var o=n.$dialog.find(".note-video-btn");n.ui.onDialogShown(n.$dialog,function(){n.context.triggerEvent("dialog.shown");i.val(e).on("input",function(){n.ui.toggleBtn(o,i.val())});if(!ft.isSupportTouch){i.trigger("focus")}o.click(function(e){e.preventDefault();t.resolve(i.val())});n.bindEnterKey(i,o)});n.ui.onDialogHidden(n.$dialog,function(){i.off("input");o.off("click");if(t.state()==="pending"){t.reject()}});n.ui.showDialog(n.$dialog)})};return e}();var bn=function(){function e(e){this.context=e;this.ui=t.summernote.ui;this.$body=t(document.body);this.$editor=e.layoutInfo.editor;this.options=e.options;this.lang=this.options.langInfo}e.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor;var e=['<p class="text-center">','<a href="http://summernote.org/" target="_blank">Summernote 0.8.9</a> Â· ','<a href="https://github.com/summernote/summernote" target="_blank">Project</a> Â· ','<a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=this.ui.dialog({title:this.lang.options.help,fade:this.options.dialogsFade,body:this.createShortcutList(),footer:e,callback:function(t){t.find(".modal-body,.note-modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(t)};e.prototype.destroy=function(){this.ui.hideDialog(this.$dialog);this.$dialog.remove()};e.prototype.createShortcutList=function(){var e=this;var n=this.options.keyMap[ft.isMac?"mac":"pc"];return Object.keys(n).map(function(i){var o=n[i];var r=t('<div><div class="help-list-item"/></div>');r.append(t("<label><kbd>"+i+"</kdb></label>").css({width:180,"margin-right":10})).append(t("<span/>").html(e.context.memo("help."+o)||o));return r.html()}).join("")};e.prototype.showHelpDialog=function(){var e=this;return t.Deferred(function(t){e.ui.onDialogShown(e.$dialog,function(){e.context.triggerEvent("dialog.shown");t.resolve()});e.ui.showDialog(e.$dialog)}).promise()};e.prototype.show=function(){var t=this;this.context.invoke("editor.saveRange");this.showHelpDialog().then(function(){t.context.invoke("editor.restoreRange")})};return e}();var wn=20;var xn=function(){function e(e){var n=this;this.context=e;this.ui=t.summernote.ui;this.options=e.options;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){n.update()},"summernote.disable summernote.change summernote.dialog.shown":function(){n.hide()},"summernote.focusout":function(t,e){if(ft.isFF){return}if(!e.relatedTarget||!He.ancestor(e.relatedTarget,j.eq(n.$popover[0]))){n.hide()}}}}e.prototype.shouldInitialize=function(){return this.options.airMode&&!tt.isEmpty(this.options.popover.air)};e.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-air-popover"}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content");this.context.invoke("buttons.build",t,this.options.popover.air)};e.prototype.destroy=function(){this.$popover.remove()};e.prototype.update=function(){var t=this.context.invoke("editor.currentStyle");if(t.range&&!t.range.isCollapsed()){var e=tt.last(t.range.getClientRects());if(e){var n=j.rect2bnd(e);this.$popover.css({display:"block",left:Math.max(n.left+n.width/2,0)-wn,top:n.top+n.height});this.context.invoke("buttons.updateCurrentStyle",this.$popover)}}else{this.hide()}};e.prototype.hide=function(){this.$popover.hide()};return e}();var Cn=5;var kn=function(){function e(e){var n=this;this.context=e;this.ui=t.summernote.ui;this.$editable=e.layoutInfo.editable;this.options=e.options;this.hint=this.options.hint||[];this.direction=this.options.hintDirection||"bottom";this.hints=t.isArray(this.hint)?this.hint:[this.hint];this.events={"summernote.keyup":function(t,e){if(!e.isDefaultPrevented()){n.handleKeyup(e)}},"summernote.keydown":function(t,e){n.handleKeydown(e)},"summernote.disable summernote.dialog.shown":function(){n.hide()}}}e.prototype.shouldInitialize=function(){return this.hints.length>0};e.prototype.initialize=function(){var e=this;this.lastWordRange=null;this.$popover=this.ui.popover({className:"note-hint-popover",hideArrow:true,direction:""}).render().appendTo(this.options.container);this.$popover.hide();this.$content=this.$popover.find(".popover-content,.note-popover-content");this.$content.on("click",".note-hint-item",function(){e.$content.find(".active").removeClass("active");t(e).addClass("active");e.replace()})};e.prototype.destroy=function(){this.$popover.remove()};e.prototype.selectItem=function(t){this.$content.find(".active").removeClass("active");t.addClass("active");this.$content[0].scrollTop=t[0].offsetTop-this.$content.innerHeight()/2};e.prototype.moveDown=function(){var t=this.$content.find(".note-hint-item.active");var e=t.next();if(e.length){this.selectItem(e)}else{var n=t.parent().next();if(!n.length){n=this.$content.find(".note-hint-group").first()}this.selectItem(n.find(".note-hint-item").first())}};e.prototype.moveUp=function(){var t=this.$content.find(".note-hint-item.active");var e=t.prev();if(e.length){this.selectItem(e)}else{var n=t.parent().prev();if(!n.length){n=this.$content.find(".note-hint-group").last()}this.selectItem(n.find(".note-hint-item").last())}};e.prototype.replace=function(){var t=this.$content.find(".note-hint-item.active");if(t.length){var e=this.nodeFromItem(t);this.lastWordRange.insertNode(e);Be.createFromNode(e).collapse().select();this.lastWordRange=null;this.hide();this.context.triggerEvent("change",this.$editable.html(),this.$editable[0]);this.context.invoke("editor.focus")}};e.prototype.nodeFromItem=function(t){var e=this.hints[t.data("index")];var n=t.data("item");var i=e.content?e.content(n):n;if(typeof i==="string"){i=He.createText(i)}return i};e.prototype.createItemTemplates=function(e,n){var i=this.hints[e];return n.map(function(n,o){var r=t('<div class="note-hint-item"/>');r.append(i.template?i.template(n):n+"");r.data({index:e,item:n});return r})};e.prototype.handleKeydown=function(t){if(!this.$popover.is(":visible")){return}if(t.keyCode===Fe.code.ENTER){t.preventDefault();this.replace()}else if(t.keyCode===Fe.code.UP){t.preventDefault();this.moveUp()}else if(t.keyCode===Fe.code.DOWN){t.preventDefault();this.moveDown()}};e.prototype.searchKeyword=function(t,e,n){var i=this.hints[t];if(i&&i.match.test(e)&&i.search){var o=i.match.exec(e);i.search(o[1],n)}else{n()}};e.prototype.createGroup=function(e,n){var i=this;var o=t('<div class="note-hint-group note-hint-group-'+e+'"/>');this.searchKeyword(e,n,function(t){t=t||[];if(t.length){o.html(i.createItemTemplates(e,t));i.show()}});return o};e.prototype.handleKeyup=function(t){var e=this;if(!tt.contains([Fe.code.ENTER,Fe.code.UP,Fe.code.DOWN],t.keyCode)){var n=this.context.invoke("editor.createRange").getWordRange();var i=n.toString();if(this.hints.length&&i){this.$content.empty();var o=j.rect2bnd(tt.last(n.getClientRects()));if(o){this.$popover.hide();this.lastWordRange=n;this.hints.forEach(function(t,n){if(t.match.test(i)){e.createGroup(n,i).appendTo(e.$content)}});this.$content.find(".note-hint-item:first").addClass("active");if(this.direction==="top"){this.$popover.css({left:o.left,top:o.top-this.$popover.outerHeight()-Cn})}else{this.$popover.css({left:o.left,top:o.top+o.height+Cn})}}}else{this.hide()}}};e.prototype.show=function(){this.$popover.show()};e.prototype.hide=function(){this.$popover.hide()};return e}();var Tn=function(){function e(e,n){this.ui=t.summernote.ui;this.$note=e;this.memos={};this.modules={};this.layoutInfo={};this.options=n;this.initialize()}e.prototype.initialize=function(){this.layoutInfo=this.ui.createLayout(this.$note,this.options);this._initialize();this.$note.hide();return this};e.prototype.destroy=function(){this._destroy();this.$note.removeData("summernote");this.ui.removeLayout(this.$note,this.layoutInfo)};e.prototype.reset=function(){var t=this.isDisabled();this.code(He.emptyPara);this._destroy();this._initialize();if(t){this.disable()}};e.prototype._initialize=function(){var e=this;var n=t.extend({},this.options.buttons);Object.keys(n).forEach(function(t){e.memo("button."+t,n[t])});var i=t.extend({},this.options.modules,t.summernote.plugins||{});Object.keys(i).forEach(function(t){e.module(t,i[t],true)});Object.keys(this.modules).forEach(function(t){e.initializeModule(t)})};e.prototype._destroy=function(){var t=this;Object.keys(this.modules).reverse().forEach(function(e){t.removeModule(e)});Object.keys(this.memos).forEach(function(e){t.removeMemo(e)});this.triggerEvent("destroy",this)};e.prototype.code=function(t){var e=this.invoke("codeview.isActivated");if(t===undefined){this.invoke("codeview.sync");return e?this.layoutInfo.codable.val():this.layoutInfo.editable.html()}else{if(e){this.layoutInfo.codable.val(t)}else{this.layoutInfo.editable.html(t)}this.$note.val(t);this.triggerEvent("change",t)}};e.prototype.isDisabled=function(){return this.layoutInfo.editable.attr("contenteditable")==="false"};e.prototype.enable=function(){this.layoutInfo.editable.attr("contenteditable",true);this.invoke("toolbar.activate",true);this.triggerEvent("disable",false)};e.prototype.disable=function(){if(this.invoke("codeview.isActivated")){this.invoke("codeview.deactivate")}this.layoutInfo.editable.attr("contenteditable",false);this.invoke("toolbar.deactivate",true);this.triggerEvent("disable",true)};e.prototype.triggerEvent=function(){var t=tt.head(arguments);var e=tt.tail(tt.from(arguments));var n=this.options.callbacks[j.namespaceToCamel(t,"on")];if(n){n.apply(this.$note[0],e)}this.$note.trigger("summernote."+t,e)};e.prototype.initializeModule=function(t){var e=this.modules[t];e.shouldInitialize=e.shouldInitialize||j.ok;if(!e.shouldInitialize()){return}if(e.initialize){e.initialize()}if(e.events){He.attachEvents(this.$note,e.events)}};e.prototype.module=function(t,e,n){if(arguments.length===1){return this.modules[t]}this.modules[t]=new e(this);if(!n){this.initializeModule(t)}};e.prototype.removeModule=function(t){var e=this.modules[t];if(e.shouldInitialize()){if(e.events){He.detachEvents(this.$note,e.events)}if(e.destroy){e.destroy()}}delete this.modules[t]};e.prototype.memo=function(t,e){if(arguments.length===1){return this.memos[t]}this.memos[t]=e};e.prototype.removeMemo=function(t){if(this.memos[t]&&this.memos[t].destroy){this.memos[t].destroy()}delete this.memos[t]};e.prototype.createInvokeHandlerAndUpdateState=function(t,e){var n=this;return function(i){n.createInvokeHandler(t,e)(i);n.invoke("buttons.updateCurrentStyle")}};e.prototype.createInvokeHandler=function(e,n){var i=this;return function(o){o.preventDefault();var r=t(o.target);i.invoke(e,n||r.closest("[data-value]").data("value"),r)}};e.prototype.invoke=function(){var t=tt.head(arguments);var e=tt.tail(tt.from(arguments));var n=t.split(".");var i=n.length>1;var o=i&&tt.head(n);var r=i?tt.last(n):tt.head(n);var s=this.modules[o||"editor"];if(!o&&this[r]){return this[r].apply(this,e)}else if(s&&s[r]&&s.shouldInitialize()){return s[r].apply(s,e)}};return e}();t.fn.extend({summernote:function(){var e=t.type(tt.head(arguments));var n=e==="string";var i=e==="object";var o=t.extend({},t.summernote.options,i?tt.head(arguments):{});o.langInfo=t.extend(true,{},t.summernote.lang["en-US"],t.summernote.lang[o.lang]);o.icons=t.extend(true,{},t.summernote.options.icons,o.icons);o.tooltip=o.tooltip==="auto"?!ft.isSupportTouch:o.tooltip;this.each(function(e,n){var i=t(n);if(!i.data("summernote")){var r=new Tn(i,o);i.data("summernote",r);i.data("summernote").triggerEvent("init",r.layoutInfo)}});var r=this.first();if(r.length){var s=r.data("summernote");if(n){return s.invoke.apply(s,tt.from(arguments))}else if(o.focus){s.invoke("editor.focus")}}return this}});t.summernote=t.extend(t.summernote,{version:"0.8.9",ui:w,dom:He,plugins:{},options:{modules:{editor:Xe,clipboard:Ye,dropzone:Je,codeview:tn,statusbar:nn,fullscreen:on,handle:rn,hintPopover:kn,autoLink:ln,autoSync:un,placeholder:cn,buttons:fn,toolbar:dn,linkDialog:hn,linkPopover:pn,imageDialog:vn,imagePopover:mn,tablePopover:gn,videoDialog:yn,helpDialog:bn,airPopover:xn},buttons:{},lang:"en-US",followingToolbar:true,otherStaticBar:"",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popatmouse:true,popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],table:[["add",["addRowDown","addRowUp","addColLeft","addColRight"]],["delete",["deleteRow","deleteCol","deleteTable"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:false,width:null,height:null,linkTargetBlank:true,focus:false,tabSize:4,styleWithSpan:true,shortcuts:true,textareaAutoSync:true,hintDirection:"bottom",tooltip:"auto",container:"body",maxTextLength:0,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:false,dialogsFade:false,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onBlurCodeview:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:true,lineNumbers:true},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",rowBelow:"note-icon-row-below",colBefore:"note-icon-col-before",colAfter:"note-icon-col-after",rowAbove:"note-icon-row-above",rowRemove:"note-icon-row-remove",colRemove:"note-icon-col-remove",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-menu-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})});(function(t){t.extend(t.summernote.lang,{"da-DK":{font:{bold:"Fed",italic:"Kursiv",underline:"Understreget",clear:"Fjern formatering",height:"HÃ¸jde",name:"Skrifttype",strikethrough:"Gennemstreget",subscript:"SÃ¦nket skrift",superscript:"HÃ¦vet skrift",size:"SkriftstÃ¸rrelse"},image:{image:"Billede",insert:"IndsÃ¦t billede",resizeFull:"Original stÃ¸rrelse",resizeHalf:"Halv stÃ¸rrelse",resizeQuarter:"Kvart stÃ¸rrelse",floatLeft:"Venstrestillet",floatRight:"HÃ¸jrestillet",floatNone:"Fjern formatering",shapeRounded:"Form: Runde kanter",shapeCircle:"Form: Cirkel",shapeThumbnail:"Form: Miniature",shapeNone:"Form: Ingen",dragImageHere:"TrÃ¦k billede hertil",dropImage:"Slip billede",selectFromFiles:"VÃ¦lg billed-fil",maximumFileSize:"Maks fil stÃ¸rrelse",maximumFileSizeError:"Filen er stÃ¸rre end maks tilladte fil stÃ¸rrelse!",url:"Billede URL",remove:"Fjern billede",original:"Original"},video:{video:"Video",videoLink:"Video Link",insert:"IndsÃ¦t Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion eller Youku)"},link:{link:"Link",insert:"IndsÃ¦t link",unlink:"Fjern link",edit:"Rediger",textToDisplay:"Visningstekst",url:"Hvor skal linket pege hen?",openInNewWindow:"Ãbn i nyt vindue"},table:{table:"Tabel",addRowAbove:"Add row above",addRowBelow:"Add row below",addColLeft:"Add column left",addColRight:"Add column right",delRow:"Delete row",delCol:"Delete column",delTable:"Delete table"},hr:{insert:"IndsÃ¦t horisontal linje"},style:{style:"Stil",p:"p",blockquote:"Citat",pre:"Kode",h1:"Overskrift 1",h2:"Overskrift 2",h3:"Overskrift 3",h4:"Overskrift 4",h5:"Overskrift 5",h6:"Overskrift 6"},lists:{unordered:"Punktopstillet liste",ordered:"Nummereret liste"},options:{help:"HjÃ¦lp",fullscreen:"Fuld skÃ¦rm",codeview:"HTML-Visning"},paragraph:{paragraph:"Afsnit",outdent:"Formindsk indryk",indent:"ForÃ¸g indryk",left:"Venstrestillet",center:"Centreret",right:"HÃ¸jrestillet",justify:"Blokjuster"},color:{recent:"Nyligt valgt farve",more:"Flere farver",background:"Baggrund",foreground:"Forgrund",transparent:"Transparent",setTransparent:"SÃ¦t transparent",reset:"Nulstil",resetToDefault:"Gendan standardindstillinger"},shortcut:{shortcuts:"Genveje",close:"Luk",textFormatting:"Tekstformatering",action:"Handling",paragraphFormatting:"Afsnitsformatering",documentStyle:"Dokumentstil",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Fortryd",redo:"Annuller fortryd"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}})})(jQuery);var NoteSaveButton=function(t){var e=$.summernote.ui;var n=e.button({contents:'<i class="fa fa-child"/>Save',tooltip:"save",click:function(){$.post(window.location.pathname,t.invoke("code"))}});return n.render()};$("#pageedit").on("click",function(){if($(this).hasClass("active")){$(".inlineedit").summernote("destroy")}else{$(".inlineedit").summernote({lang:lang,focus:true,buttons:{save:NoteSaveButton},toolbar:[["style",["style"]],["font",["fontname","fontsize"]],["textstyle",["bold","italic","underline","strikethrough","superscript","subscript","clear"]],["color",["color"]],["para",["ul","ol","paragraph","height"]],["insert",["picture","link","video"]],["table",["table"]],["hr",["hr"]],["view",["fullscreen","codeview"]],["edit",["undo","redo"]],["help",["help"]],["save",["save"]]]})}});var Router=function(){var t="";var e=[];var n=function t(e,n){n=n===undefined?[]:n;this.base=this.base===undefined?"":this.base;var i=this.routes[e];if(i===undefined){return undefined}var o=this.base+i.path;for(var r in n){if(n.hasOwnProperty(r)){o=o.replace("{"+r+"}",n[r])}}return o};var i=function t(e){this.base=e};var o=function t(e){this.routes=e};return{generatePath:n,setBasePath:i,setRoutes:o}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9qcy9iYXNlL3JlbmRlcmVyLmpzIiwiLi4vc3JjL2pzL2JzMy91aS5qcyIsIi4uL3NyYy9qcy9iYXNlL2NvcmUvZnVuYy5qcyIsIi4uL3NyYy9qcy9iYXNlL2NvcmUvbGlzdHMuanMiLCIuLi9zcmMvanMvYmFzZS9jb3JlL2Vudi5qcyIsIi4uL3NyYy9qcy9iYXNlL2NvcmUvZG9tLmpzIiwiLi4vc3JjL2pzL2Jhc2Uvc3VtbWVybm90ZS1lbi1VUy5qcyIsIi4uL3NyYy9qcy9iYXNlL2NvcmUva2V5LmpzIiwiLi4vc3JjL2pzL2Jhc2UvY29yZS9yYW5nZS5qcyIsIi4uL3NyYy9qcy9iYXNlL2NvcmUvYXN5bmMuanMiLCIuLi9zcmMvanMvYmFzZS9lZGl0aW5nL0hpc3RvcnkuanMiLCIuLi9zcmMvanMvYmFzZS9lZGl0aW5nL1N0eWxlLmpzIiwiLi4vc3JjL2pzL2Jhc2UvZWRpdGluZy9CdWxsZXQuanMiLCIuLi9zcmMvanMvYmFzZS9lZGl0aW5nL1R5cGluZy5qcyIsIi4uL3NyYy9qcy9iYXNlL2VkaXRpbmcvVGFibGUuanMiLCIuLi9zcmMvanMvYmFzZS9tb2R1bGUvRWRpdG9yLmpzIiwiLi4vc3JjL2pzL2Jhc2UvbW9kdWxlL0NsaXBib2FyZC5qcyIsIi4uL3NyYy9qcy9iYXNlL21vZHVsZS9Ecm9wem9uZS5qcyIsIi4uL3NyYy9qcy9iYXNlL21vZHVsZS9Db2Rldmlldy5qcyIsIi4uL3NyYy9qcy9iYXNlL21vZHVsZS9TdGF0dXNiYXIuanMiLCIuLi9zcmMvanMvYmFzZS9tb2R1bGUvRnVsbHNjcmVlbi5qcyIsIi4uL3NyYy9qcy9iYXNlL21vZHVsZS9IYW5kbGUuanMiLCIuLi9zcmMvanMvYmFzZS9tb2R1bGUvQXV0b0xpbmsuanMiLCIuLi9zcmMvanMvYmFzZS9tb2R1bGUvQXV0b1N5bmMuanMiLCIuLi9zcmMvanMvYmFzZS9tb2R1bGUvUGxhY2Vob2xkZXIuanMiLCIuLi9zcmMvanMvYmFzZS9tb2R1bGUvQnV0dG9ucy5qcyIsIi4uL3NyYy9qcy9iYXNlL21vZHVsZS9Ub29sYmFyLmpzIiwiLi4vc3JjL2pzL2Jhc2UvbW9kdWxlL0xpbmtEaWFsb2cuanMiLCIuLi9zcmMvanMvYmFzZS9tb2R1bGUvTGlua1BvcG92ZXIuanMiLCIuLi9zcmMvanMvYmFzZS9tb2R1bGUvSW1hZ2VEaWFsb2cuanMiLCIuLi9zcmMvanMvYmFzZS9tb2R1bGUvSW1hZ2VQb3BvdmVyLmpzIiwiLi4vc3JjL2pzL2Jhc2UvbW9kdWxlL1RhYmxlUG9wb3Zlci5qcyIsIi4uL3NyYy9qcy9iYXNlL21vZHVsZS9WaWRlb0RpYWxvZy5qcyIsIi4uL3NyYy9qcy9iYXNlL21vZHVsZS9IZWxwRGlhbG9nLmpzIiwiLi4vc3JjL2pzL2Jhc2UvbW9kdWxlL0FpclBvcG92ZXIuanMiLCIuLi9zcmMvanMvYmFzZS9tb2R1bGUvSGludFBvcG92ZXIuanMiLCIuLi9zcmMvanMvYmFzZS9Db250ZXh0LmpzIiwiLi4vc3JjL2pzL3N1bW1lcm5vdGUuanMiLCIuLi9zcmMvanMvYnMzL3NldHRpbmdzLmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJnbG9iYWwiLCJkb2N1bWVudCIsInciLCJFcnJvciIsImZhY3RvcnkiLCJ3aW5kb3ciLCJ0aGlzIiwibm9HbG9iYWwiLCJPYmplY3QiLCJnZXRQcm90b3R5cGVPZiIsImFyciIsInNsaWNlIiwiY29uY2F0IiwicHVzaCIsImluZGV4T2YiLCJjbGFzczJ0eXBlIiwidG9TdHJpbmciLCJoYXNPd25Qcm9wZXJ0eSIsImhhc093biIsImZuVG9TdHJpbmciLCJjYWxsIiwiRE9NRXZhbCIsImNvZGUiLCJkb2MiLCJzY3JpcHQiLCJjcmVhdGVFbGVtZW50IiwidGV4dCIsImhlYWQiLCJhcHBlbmRDaGlsZCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInNlbGVjdG9yIiwiY29udGV4dCIsImpRdWVyeSIsImZuIiwiaW5pdCIsInJ0cmltIiwiYWxsIiwibGV0dGVyIiwidG9VcHBlckNhc2UiLCJwcm90b3R5cGUiLCJ2ZXJzaW9uIiwibnVtIiwibGVuZ3RoIiwiZWxlbXMiLCJtZXJnZSIsImNvbnN0cnVjdG9yIiwicmV0IiwiY2FsbGJhY2siLCJlYWNoIiwicHVzaFN0YWNrIiwibWFwIiwiZWxlbSIsImkiLCJhcHBseSIsImFyZ3VtZW50cyIsImZpcnN0IiwiZXEiLCJsZW4iLCJqIiwiZW5kIiwicHJldk9iamVjdCIsInNvcnQiLCJzcGxpY2UiLCJleHRlbmQiLCJvcHRpb25zIiwibmFtZSIsInNyYyIsImNvcHkiLCJjb3B5SXNBcnJheSIsImNsb25lIiwidGFyZ2V0IiwiaXNGdW5jdGlvbiIsImlzUGxhaW5PYmplY3QiLCJBcnJheSIsImlzQXJyYXkiLCJkZWVwIiwidW5kZWZpbmVkIiwib2JqIiwidHlwZSIsImlzV2luZG93IiwiaXNOdW1lcmljIiwiaXNOYU4iLCJwYXJzZUZsb2F0IiwicHJvdG8iLCJDdG9yIiwiZ2V0UHJvdG8iLCJPYmplY3RGdW5jdGlvblN0cmluZyIsInN0cmluZyIsInJlcGxhY2UiLCJybXNQcmVmaXgiLCJyZGFzaEFscGhhIiwiZmNhbWVsQ2FzZSIsInRyaW0iLCJyZXN1bHRzIiwic2Vjb25kIiwiZ3JlcCIsImludmVydCIsIm1hdGNoZXMiLCJ2YWx1ZSIsImFyZyIsImd1aWQiLCJwcm94eSIsInRtcCIsImFyZ3MiLCJub3ciLCJEYXRlIiwic3VwcG9ydCIsInRvTG93ZXJDYXNlIiwiaXNBcnJheUxpa2UiLCJpc1hNTCIsInJidWdneVFTQSIsImV4cGFuZG8iLCJ0b2tlbkNhY2hlIiwiY3JlYXRlQ2FjaGUiLCJhIiwiYiIsImxpc3QiLCJhdHRyaWJ1dGVzIiwid2hpdGVzcGFjZSIsImlkZW50aWZpZXIiLCIkIiwiUmVnRXhwIiwicnBzZXVkbyIsInBzZXVkb3MiLCJyaWRlbnRpZmllciIsIl8iLCJlc2NhcGVkIiwiZXNjYXBlZFdoaXRlc3BhY2UiLCJoaWdoIiwicmNzc2VzY2FwZSIsImNoIiwiYXNDb2RlUG9pbnQiLCJjaGFyQ29kZUF0IiwiZGlyIiwibmV4dCIsInByZWZlcnJlZERvYyIsImNoaWxkTm9kZXMiLCJub2RlVHlwZSIsImUiLCJlbHMiLCJzZWVkIiwiZG9jdW1lbnRJc0hUTUwiLCJtYXRjaCIsInJxdWlja0V4cHIiLCJleGVjIiwibSIsImdldEVsZW1lbnRCeUlkIiwiaWQiLCJuZXdDb250ZXh0IiwiY29udGFpbnMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJxc2EiLCJ0ZXN0Iiwibm9kZU5hbWUiLCJuaWQiLCJnZXRBdHRyaWJ1dGUiLCJmY3NzZXNjYXBlIiwic2V0QXR0cmlidXRlIiwibmV3U2VsZWN0b3IiLCJncm91cHMiLCJqb2luIiwicXVlcnlTZWxlY3RvckFsbCIsInFzYUVycm9yIiwicmVtb3ZlQXR0cmlidXRlIiwic2VsZWN0Iiwia2V5cyIsImNhY2hlIiwia2V5Iiwic2hpZnQiLCJtYXJrRnVuY3Rpb24iLCJhc3NlcnQiLCJlbCIsImFkZEhhbmRsZSIsImF0dHJzIiwiaGFuZGxlciIsInNwbGl0Iiwic2libGluZ0NoZWNrIiwiY3VyIiwic291cmNlSW5kZXgiLCJjcmVhdGVJbnB1dFBzZXVkbyIsImNyZWF0ZUJ1dHRvblBzZXVkbyIsImRpc2FibGVkIiwiaXNEaXNhYmxlZCIsImNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8iLCJhcmd1bWVudCIsIm1hdGNoSW5kZXhlcyIsIlNpenpsZSIsImRvY3VtZW50RWxlbWVudCIsIm93bmVyRG9jdW1lbnQiLCJzZXREb2N1bWVudCIsIm5vZGUiLCJoYXNDb21wYXJlIiwic3ViV2luZG93IiwiZGVmYXVsdFZpZXciLCJ0b3AiLCJhdHRhY2hFdmVudCIsInVubG9hZEhhbmRsZXIiLCJjbGFzc05hbWUiLCJjcmVhdGVDb21tZW50IiwiZ2V0QnlJZCIsImF0dHJJZCIsInJ1bmVzY2FwZSIsImZ1bmVzY2FwZSIsIkV4cHIiLCJmaW5kIiwiZ2V0QXR0cmlidXRlTm9kZSIsInRhZyIsInJuYXRpdmUiLCJkb2NFbGVtIiwiaW5uZXJIVE1MIiwiYm9vbGVhbnMiLCJtYXRjaGVzU2VsZWN0b3IiLCJ3ZWJraXRNYXRjaGVzU2VsZWN0b3IiLCJyYnVnZ3lNYXRjaGVzIiwiY29tcGFyZURvY3VtZW50UG9zaXRpb24iLCJidXAiLCJjb21wYXJlIiwic29ydElucHV0IiwiYnAiLCJhdXAiLCJhcCIsImV4cHIiLCJlbGVtZW50cyIsImNvbXBpbGVyQ2FjaGUiLCJkaXNjb25uZWN0ZWRNYXRjaCIsImF0dHJIYW5kbGUiLCJ2YWwiLCJzcGVjaWZpZWQiLCJlc2NhcGUiLCJzZWwiLCJtc2ciLCJ1bmlxdWVTb3J0IiwiZHVwbGljYXRlcyIsImdldFRleHQiLCJ0ZXh0Q29udGVudCIsImZpcnN0Q2hpbGQiLCJuZXh0U2libGluZyIsIm5vZGVWYWx1ZSIsInNlbGVjdG9ycyIsIm1hdGNoRXhwciIsImVycm9yIiwidW5xdW90ZWQiLCJ0b2tlbml6ZSIsImV4Y2VzcyIsIm5vZGVOYW1lU2VsZWN0b3IiLCJjbGFzc0NhY2hlIiwicGF0dGVybiIsIm9wZXJhdG9yIiwiY2hlY2siLCJhdHRyIiwicmVzdWx0IiwicndoaXRlc3BhY2UiLCJ3aGF0IiwibGFzdCIsInhtbCIsInVuaXF1ZUNhY2hlIiwib3V0ZXJDYWNoZSIsIm5vZGVJbmRleCIsInN0YXJ0Iiwic2ltcGxlIiwiZm9yd2FyZCIsIm9mVHlwZSIsInBhcmVudCIsImxhc3RDaGlsZCIsInVzZUNhY2hlIiwidW5pcXVlSUQiLCJkaXJydW5zIiwiZGlmZiIsInBvcCIsInBzZXVkbyIsInNldEZpbHRlcnMiLCJpZHgiLCJtYXRjaGVkIiwiY29tcGlsZSIsIm1hdGNoZXIiLCJ1bm1hdGNoZWQiLCJpbnB1dCIsImlubmVyVGV4dCIsImxhbmciLCJlbGVtTGFuZyIsImFjdGl2ZUVsZW1lbnQiLCJoYXNGb2N1cyIsImhyZWYiLCJ0YWJJbmRleCIsImNyZWF0ZURpc2FibGVkUHNldWRvIiwiY2hlY2tlZCIsInNlbGVjdGVkIiwic2VsZWN0ZWRJbmRleCIsInJoZWFkZXIiLCJyaW5wdXRzIiwiZmlsdGVycyIsInBhcnNlT25seSIsInRva2VucyIsInByZUZpbHRlcnMiLCJjYWNoZWQiLCJyY29tbWEiLCJzb0ZhciIsInJjb21iaW5hdG9ycyIsImFkZENvbWJpbmF0b3IiLCJjb21iaW5hdG9yIiwiYmFzZSIsInNraXAiLCJkb25lIiwiY2hlY2tOb25FbGVtZW50cyIsImRvbmVOYW1lIiwib2xkQ2FjaGUiLCJuZXdDYWNoZSIsIm1hdGNoZXJzIiwiY29udGV4dHMiLCJmaWx0ZXIiLCJuZXdVbm1hdGNoZWQiLCJzZXRNYXRjaGVyIiwicHJlRmlsdGVyIiwicG9zdEZpbHRlciIsInBvc3RGaW5kZXIiLCJwb3N0U2VsZWN0b3IiLCJtdWx0aXBsZUNvbnRleHRzIiwicHJlTWFwIiwicHJlZXhpc3RpbmciLCJjb25kZW5zZSIsIm1hdGNoZXJPdXQiLCJwb3N0TWFwIiwibWF0Y2hlckluIiwidGVtcCIsIm1hdGNoZXJGcm9tVG9rZW5zIiwiY2hlY2tDb250ZXh0IiwiaW1wbGljaXRSZWxhdGl2ZSIsIm1hdGNoQW55Q29udGV4dCIsInJlbGF0aXZlIiwiZWxlbWVudE1hdGNoZXIiLCJ0b1NlbGVjdG9yIiwiZWxlbWVudE1hdGNoZXJzIiwic2V0TWF0Y2hlcnMiLCJvdXRlcm1vc3QiLCJvdXRlcm1vc3RDb250ZXh0IiwiYnlFbGVtZW50IiwiY29udGV4dEJhY2t1cCIsIk1hdGgiLCJyYW5kb20iLCJkaXJydW5zVW5pcXVlIiwiYnlTZXQiLCJzZXRNYXRjaGVkIiwic3VwZXJNYXRjaGVyIiwiY29tcGlsZWQiLCJ0b2tlbiIsInJzaWJsaW5nIiwidGVzdENvbnRleHQiLCJzb3J0T3JkZXIiLCJkZWZhdWx0VmFsdWUiLCJ1bnRpbCIsImlzIiwibiIsIm5lZWRzQ29udGV4dCIsInJpc1NpbXBsZSIsInF1YWxpZmllciIsIm5vdCIsInNlbGYiLCJ3aW5ub3ciLCJybmVlZHNDb250ZXh0Iiwicm9vdCIsInJvb3RqUXVlcnkiLCJyc2luZ2xlVGFnIiwianF1ZXJ5IiwicnBhcmVudHNwcmV2IiwidGFyZ2V0cyIsImwiLCJpbmRleCIsImdldCIsInNpYmxpbmciLCJjb250ZW50IiwiY3JlYXRlT3B0aW9ucyIsInJub3RodG1sd2hpdGUiLCJmbGFnIiwib2JqZWN0Iiwib25jZSIsInF1ZXVlIiwiZmlyaW5nSW5kZXgiLCJtZW1vcnkiLCJmaXJpbmciLCJhZGQiLCJ1bmlxdWUiLCJoYXMiLCJsb2NrZWQiLCJmaXJlZCIsInYiLCJleCIsInJlc29sdmUiLCJmYWlsIiwicmVqZWN0IiwibWV0aG9kIiwidGhlbiIsIm5vVmFsdWUiLCJmdW5jIiwiQ2FsbGJhY2tzIiwic3RhdGUiLCJmbnMiLCJ0dXBsZSIsInJldHVybmVkIiwicHJvbWlzZSIsIm5ld0RlZmVyIiwibm90aWZ5Iiwib25GdWxmaWxsZWQiLCJvblJlamVjdGVkIiwib25Qcm9ncmVzcyIsImRlZmVycmVkIiwic3BlY2lhbCIsIm1heERlcHRoIiwidGhhdCIsIklkZW50aXR5IiwiVGhyb3dlciIsIm5vdGlmeVdpdGgiLCJyZXNvbHZlV2l0aCIsIm1pZ2h0VGhyb3ciLCJkZXB0aCIsInJlamVjdFdpdGgiLCJEZWZlcnJlZCIsImdldFN0YWNrSG9vayIsInByb2Nlc3MiLCJzdGFja1RyYWNlIiwic2V0VGltZW91dCIsInR1cGxlcyIsInN0YXRlU3RyaW5nIiwiZGlzYWJsZSIsImxvY2siLCJmaXJlIiwiZmlyZVdpdGgiLCJzaW5nbGVWYWx1ZSIsInJlbWFpbmluZyIsInJlc29sdmVDb250ZXh0cyIsInJlc29sdmVWYWx1ZXMiLCJtYXN0ZXIiLCJ1cGRhdGVGdW5jIiwiZXhjZXB0aW9uSG9vayIsInN0YWNrIiwiY29uc29sZSIsIndhcm4iLCJyZXJyb3JOYW1lcyIsIm1lc3NhZ2UiLCJjb21wbGV0ZWQiLCJjaGFpbmFibGUiLCJlbXB0eUdldCIsInJhdyIsImJ1bGsiLCJvd25lciIsIkRhdGEiLCJ1aWQiLCJhY2NlcHREYXRhIiwiZGF0YSIsImNhbWVsQ2FzZSIsImlzRW1wdHlPYmplY3QiLCJnZXREYXRhIiwicm11bHRpRGFzaCIsInNldCIsImhhc0RhdGEiLCJkYXRhUHJpdiIsInJlbW92ZSIsImRhdGFVc2VyIiwiZGF0YUF0dHIiLCJhY2Nlc3MiLCJtYWtlQXJyYXkiLCJfcXVldWVIb29rcyIsImRlcXVldWUiLCJlbXB0eSIsInNldHRlciIsImNvdW50IiwiZGVmZXIiLCJzb3VyY2UiLCJwbnVtIiwiZGlzcGxheSIsInN0eWxlIiwib2xkIiwiYWRqdXN0Q1NTIiwicHJvcCIsInZhbHVlUGFydHMiLCJ0d2VlbiIsImNzcyIsImN1cnJlbnRWYWx1ZSIsImNzc051bWJlciIsInVuaXQiLCJpbml0aWFsIiwic2NhbGUiLCJpbml0aWFsSW5Vbml0IiwibWF4SXRlcmF0aW9ucyIsImFkanVzdGVkIiwiZGVmYXVsdERpc3BsYXlNYXAiLCJib2R5IiwidmFsdWVzIiwiaXNIaWRkZW5XaXRoaW5UcmVlIiwiZ2V0RGVmYXVsdERpc3BsYXkiLCJzaG93SGlkZSIsInNob3ciLCJoaWRlIiwicnRhZ05hbWUiLCJyc2NyaXB0VHlwZSIsIndyYXBNYXAiLCJvcHRpb24iLCJ0Zm9vdCIsImNvbGdyb3VwIiwiY2FwdGlvbiIsInRoZWFkIiwidGQiLCJnZXRBbGwiLCJzZXRHbG9iYWxFdmFsIiwicmVmRWxlbWVudHMiLCJzY3JpcHRzIiwic2VsZWN0aW9uIiwiaWdub3JlZCIsIndyYXAiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50Iiwibm9kZXMiLCJyaHRtbCIsImNyZWF0ZVRleHROb2RlIiwiZnJhZ21lbnQiLCJfZGVmYXVsdCIsImh0bWxQcmVmaWx0ZXIiLCJpbkFycmF5IiwiZGl2IiwiY2xvbmVOb2RlIiwicmV0dXJuVHJ1ZSIsInNhZmVBY3RpdmVFbGVtZW50Iiwib24iLCJ0eXBlcyIsIm9uZSIsIm9yaWdGbiIsImV2ZW50Iiwib2ZmIiwiZXZlbnRIYW5kbGUiLCJ0IiwiaGFuZGxlT2JqIiwiaGFuZGxlcnMiLCJuYW1lc3BhY2VzIiwib3JpZ1R5cGUiLCJoYW5kbGVPYmpJbiIsImV2ZW50cyIsImVsZW1EYXRhIiwiaGFuZGxlIiwidHJpZ2dlcmVkIiwiZGlzcGF0Y2giLCJydHlwZW5hbWVzcGFjZSIsImRlbGVnYXRlVHlwZSIsImJpbmRUeXBlIiwibmFtZXNwYWNlIiwiZGVsZWdhdGVDb3VudCIsInNldHVwIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm1hcHBlZFR5cGVzIiwidGVhcmRvd24iLCJmaXgiLCJuYXRpdmVFdmVudCIsImhhbmRsZXJRdWV1ZSIsInByZURpc3BhdGNoIiwiaXNQcm9wYWdhdGlvblN0b3BwZWQiLCJybmFtZXNwYWNlIiwicHJldmVudERlZmF1bHQiLCJtYXRjaGVkU2VsZWN0b3JzIiwiYnV0dG9uIiwibWF0Y2hlZEhhbmRsZXJzIiwiaG9vayIsIkV2ZW50Iiwib3JpZ2luYWxFdmVudCIsImZvY3VzIiwiYmx1ciIsImNsaWNrIiwicmV0dXJuVmFsdWUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicHJvcHMiLCJkZWZhdWx0UHJldmVudGVkIiwiY3VycmVudFRhcmdldCIsInJlbGF0ZWRUYXJnZXQiLCJ0aW1lU3RhbXAiLCJyZXR1cm5GYWxzZSIsImlzU2ltdWxhdGVkIiwiY2hhckNvZGUiLCJrZXlDb2RlIiwicm1vdXNlRXZlbnQiLCJ3aGljaCIsImFkZFByb3AiLCJvcmlnIiwiZGVsZWdhdGVUYXJnZXQiLCJtYW5pcHVsYXRpb25UYXJnZXQiLCJyc2NyaXB0VHlwZU1hc2tlZCIsImRlc3QiLCJwZGF0YU9sZCIsInBkYXRhQ3VyIiwidWRhdGFPbGQiLCJ1ZGF0YUN1ciIsImZpeElucHV0IiwicmNoZWNrYWJsZVR5cGUiLCJkb21NYW5pcCIsImNvbGxlY3Rpb24iLCJoYXNTY3JpcHRzIiwiY2hlY2tDbG9uZSIsInJjaGVja2VkIiwiaHRtbCIsImJ1aWxkRnJhZ21lbnQiLCJkaXNhYmxlU2NyaXB0IiwiaU5vQ2xvbmUiLCJyZXN0b3JlU2NyaXB0IiwiX2V2YWxVcmwiLCJyY2xlYW5TY3JpcHQiLCJrZWVwRGF0YSIsInJ4aHRtbFRhZyIsImRhdGFBbmRFdmVudHMiLCJkZWVwRGF0YUFuZEV2ZW50cyIsImRlc3RFbGVtZW50cyIsIm5vQ2xvbmVDaGVja2VkIiwiaXNYTUxEb2MiLCJzcmNFbGVtZW50cyIsImNsb25lQ29weUV2ZW50IiwiaW5QYWdlIiwiaW5zZXJ0QmVmb3JlIiwicm5vSW5uZXJodG1sIiwiY2xlYW5EYXRhIiwiYXBwZW5kIiwicmVwbGFjZUNoaWxkIiwib3JpZ2luYWwiLCJpbnNlcnQiLCJ2aWV3Iiwib3BlbmVyIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImNzc1RleHQiLCJjb250YWluZXIiLCJkaXZTdHlsZSIsIm1hcmdpbkxlZnQiLCJ3aWR0aCIsIm1hcmdpblJpZ2h0IiwiYm94U2l6aW5nUmVsaWFibGVWYWwiLCJwaXhlbE1hcmdpblJpZ2h0VmFsIiwicmVsaWFibGVNYXJnaW5MZWZ0VmFsIiwiY29tcHV0ZWQiLCJtYXhXaWR0aCIsImdldFN0eWxlcyIsInBpeGVsTWFyZ2luUmlnaHQiLCJybnVtbm9ucHgiLCJybWFyZ2luIiwibWluV2lkdGgiLCJjb25kaXRpb25GbiIsImhvb2tGbiIsInBvc2l0aW9uIiwidmlzaWJpbGl0eSIsInZlbmRvclByb3BOYW1lIiwiZW1wdHlTdHlsZSIsImNzc1ByZWZpeGVzIiwiY2FwTmFtZSIsImNzc1Byb3BzIiwic2V0UG9zaXRpdmVOdW1iZXIiLCJzdWJ0cmFjdCIsImF1Z21lbnRXaWR0aE9ySGVpZ2h0IiwiZXh0cmEiLCJpc0JvcmRlckJveCIsInN0eWxlcyIsImNzc0V4cGFuZCIsImdldFdpZHRoT3JIZWlnaHQiLCJjdXJDU1MiLCJib3hTaXppbmdSZWxpYWJsZSIsImhvb2tzIiwiaXNDdXN0b21Qcm9wIiwiZmluYWxQcm9wTmFtZSIsIm9yaWdOYW1lIiwiY3NzSG9va3MiLCJyY3NzTnVtIiwic2V0UHJvcGVydHkiLCJyY3VzdG9tUHJvcCIsImNzc05vcm1hbFRyYW5zZm9ybSIsImlzRmluaXRlIiwicmRpc3BsYXlzd2FwIiwiZ2V0Q2xpZW50UmVjdHMiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJjc3NTaG93IiwiYWRkR2V0SG9va0lmIiwicmVsaWFibGVNYXJnaW5MZWZ0IiwibGVmdCIsInByZWZpeCIsInN1ZmZpeCIsImV4cGFuZGVkIiwicGFydHMiLCJUd2VlbiIsImVhc2luZyIsInByb3BIb29rcyIsInBlcmNlbnQiLCJkdXJhdGlvbiIsImVhc2VkIiwic3RlcCIsImZ4Iiwic2Nyb2xsVG9wIiwic2Nyb2xsTGVmdCIsInAiLCJjb3MiLCJQSSIsInNjaGVkdWxlIiwiaW50ZXJ2YWwiLCJnZW5GeCIsImluY2x1ZGVXaWR0aCIsImhlaWdodCIsImNyZWF0ZVR3ZWVuIiwiYW5pbWF0aW9uIiwiQW5pbWF0aW9uIiwidHdlZW5lcnMiLCJvcHRzIiwidW5xdWV1ZWQiLCJhbHdheXMiLCJ0b2dnbGUiLCJoaWRkZW4iLCJkYXRhU2hvdyIsImlzQm94Iiwib3ZlcmZsb3ciLCJvdmVyZmxvd1giLCJvdmVyZmxvd1kiLCJyZXN0b3JlRGlzcGxheSIsInByb3BUd2VlbiIsImFuaW0iLCJwcm9wRmlsdGVyIiwic3BlY2lhbEVhc2luZyIsImV4cGFuZCIsInByb3BlcnRpZXMiLCJzdG9wcGVkIiwicHJlZmlsdGVycyIsInRpY2siLCJmeE5vdyIsIkNvZGV2aWV3IiwibWF4Iiwic3RhcnRUaW1lIiwiY3VycmVudFRpbWUiLCJ0d2VlbnMiLCJydW4iLCJjcmVhdGVGeE5vdyIsImdvdG9FbmQiLCJzdG9wIiwicHJvZ3Jlc3MiLCJjb21wbGV0ZSIsInRpbWVyIiwidW5zaGlmdCIsInByZXBlbmQiLCJzcGVlZCIsInNwZWVkcyIsIm9wdCIsInRvIiwib3BhY2l0eSIsIm9wdGFsbCIsImZpbmlzaCIsImRvQW5pbWF0aW9uIiwiY2xlYXJRdWV1ZSJdLCJtYXBwaW5ncyI6IjRCQUVBLFVBQUFBLFNBQUEsaUJBQUFBLE9BQUFDLFVBQUEsU0FBQSxRQVdJQSxRQUFTQyxFQUFPQyxXQUNkRCxFQUFNLGVBQ1BFLE9BRURBLEVBQUlELFNBQUssV0FDUEUsTUFBTSxtREFHUkMsRUFBU0Ysd0JBUVJHLFNBQUEsWUFBQUEsT0FBQUMsS0FBQSxTQUFBRCxFQUFBRSwrQkFhR0YsRUFBS0osZUFFUk8sT0FBQUMscUJBR0NDLEVBQUFDLFlBR0ZELEVBQU9FLFdBRVhDLEVBQUFILEVBQUFHLEtBRUEsSUFBQUMsRUFBQUosRUFBZUksdUJBSVRDLEVBQVlDLGlCQUVGQyxxQkFFVkMsRUFBV0YsZUFFZEcsRUFBQUMsS0FBQVosaUJDMURILFNBQU1hLEVBQVVDLEVBQVNDLEdBQ3pCQSxFQUFNQSxHQUFXdEIsTUFFZnVCLEVBQUFELEVBQUFFLGNBQThCLFlBRTlCQyxLQUFBSixJQUNBSyxLQUFBQyxZQUFBSixHQUFBSyxXQUFrQ0MsWUFBQU4sR0FXcEMsTUFDUSxVQUdKLFNBQVlPLEVBQVdDLFVBS3RCLElBQUtDLEVBQU1DLEdBQUFDLEtBQVFKLEVBQU1DLElBTzdCSSxFQUFDLHVDQUlRLFVBQ0EsY0FHRSxTQUFTQyxFQUFBQyxHQUNuQixPQUFDQSxFQUFBQyxpQkFJREwsR0FBS0QsRUFBVU8sa0JBR2JDLGNBRUVSLDRDQU1FM0IsV0FLTCxTQUFBb0MsU0FJTyxLQUFLLFVBQ1R0QixLQUFTZCxhQUlab0MsRUFBQSxFQUFBcEMsS0FBQW9DLEVBQUFwQyxLQUFBcUMsUUFBQXJDLEtBQUFvQyxjQU1BLFNBQUFFLFNBR0NYLEVBQUFZLE1BQUF2QyxLQUFBd0MsY0FBK0JGLGdCQUcvQnRDLFlBSUF5QyxpQkFLUUMsVUFDUmYsRUFBVWdCLEtBQUEzQyxLQUFBMEMsUUFJWixTQUFBQSxVQUNBMUMsS0FBQTRDLFVBQUFqQixFQUF3QmtCLElBQUE3QyxLQUFBLFNBQUE4QyxFQUFBQyxVQUN4QkwsRUFBQTVCLEtBQUFnQyxFQUFBQyxFQUFBRCxhQUtBLGtCQUVJOUMsS0FBQTRDLFVBQWlCdkMsRUFBRTJDLE1BQUFoRCxLQUFBaUQsYUFHeEJDLE1BQUUsV0FFSCxPQUFNbEQsS0FBUW1ELEdBQUcsMkJBSVpuRCxLQUFBbUQsSUFBUSxPQUdWLFNBQVVKLEdBQ1gsSUFBQ0ssRUFBQXBELEtBQUFxQyxPQUVIZ0IsR0FBVU4sR0FBR0EsRUFBQSxFQUFTSyxFQUFBLFVBQ3BCcEQsS0FBVTRDLFVBQVdTLEdBQUksR0FBQUEsRUFBQUQsR0FBQXBELEtBQUFxRCxTQUczQkMsSUFBUSxrQkFDTnRELEtBQVF1RCxZQUFNdkQsS0FBQXdDLG9CQUtkakMsT0FDQUgsRUFBQW9ELFlBQ0FwRCxFQUFBcUQsVUFHQUMsT0FBQS9CLEVBQUFDLEdBQXNCOEIsT0FBRSxlQUN4QkMsRUFBQUMsRUFBZUMsRUFBQUMsRUFBQUMsRUFBYUMsSUFDckJmLFVBQVMsU0FDaEIsSUFDT0EsVUFBU1osU0FDaEIsZ0JBSVE0QixJQUFTLFVBQWMsR0FDN0JBLGNBR01sQix5QkFLQyxXQUFBcEIsRUFBQXVDLFdBQUFELEdBQUEsYUFNSDVCLEVBQUMsR0FDTHJDLGNBS0QrQyxFQUFBVixFQUFBVSxJQUFBLEtBSUFZLEVBQUFWLFVBQUFGLEtBQUEsS0FBQSxLQUlBYSxLQUFBRCxFQUFBLENBRURFLEVBQUFJLEVBQVlMLEtBQ1ZELEVBQVFDLE1BSVJLLElBQVFILEVBQU0sQ0FDZixlQUtLQSxJQUFHbkMsRUFBYXdDLGNBQUFMLE9BQ2hCTSxNQUFBQyxRQUFBUCxLQUFBLE1BRVUsR0FDVCxXQUNFTSxNQUFPQyxRQUFFUixHQUFBQSxZQUdaQSxHQUFDbEMsRUFBV3dDLGNBQUFOLEdBQUFBLE9BTWRELEdBQU1qQyxFQUFLK0IsT0FBQVksRUFBQU4sRUFBQUYsV0FHWEEsSUFBYVMsVUFBWSxHQUN6QlgsR0FBVUUsWUFRWkcsS0FHSFAsa0lDbE5BUSxXQUFBLFNBQUFNLEdBRUQsT0FBQTdDLEVBQWE4QyxLQUFPRCxLQUFLLFlBSXpCRSxTQUFBLFNBQWNGLFVBQ1pBLEdBQU8sTUFBU0EsSUFBT0EsRUFBS3pFLFFBRzdCNEUsVUFBQSxTQUFBSCxPQU9DQyxFQUFPOUMsRUFBTThDLEtBQUFELEdBQ2QsT0FBQUMsSUFBQSxVQUFBQSxJQUFBLFlBTUFHLE1BQUFKLEVBQUFLLFdBQUFMLG1CQUlVLFNBQVFBLE9BQ2ZNLEVBQUFDLEVBS0gsSUFBQVAsR0FBQTlELEVBQUFJLEtBQUEwRCxLQUFBLGtCQUFBLENBRUQsT0FBQSxRQUdJUSxFQUFBUixzQkFVSk8sRUFBQW5FLEVBQUFFLEtBQWtCZ0UsRUFBTSxnQkFBQUEsRUFBQXRDLDBCQUNUdUMsSUFBUyxZQUFNbEUsRUFBQUMsS0FBQWlFLEtBQUFFLDBGQWlCOUIsR0FBQVQsR0FBQSxLQUFrQixRQUNWQSxFQUFBLGlCQUlHQSxJQUFLLGlCQUFpQkEsSUFBQSxhQUN2QjlELEVBQU9JLEtBQVMwRCxLQUFRLGdCQUM5QkEsMENBWUUsU0FBU1UsVUFDVkEsRUFBQUMsUUFBQUMsRUFBQSxPQUFBRCxRQUFBRSxFQUFBQyxJQUdKM0MsS0FBQSxTQUFBNkIsRUFBQTlCLCtDQU9ELEdBQUFBLEVBQUE1QixLQUFBMEQsRUFBMEJ6QixHQUFBQSxFQUFXeUIsRUFBQXpCLE1BQU0sTUFBQSxDQUN6QyxZQUdHLENBQ0osSUFBQUEsS0FBQXlCLEVBQUEsbURBWURlLEtBQUEsU0FBQW5FLFVBQUFBLEdBQUEsU0FFRUEsRUFBTyxJQUFBK0QsUUFBQXJELEVBQUEsZUFJSCxTQUFVMUIsRUFBS29GLFNBQ2ZBLFlBRUMsS0FBQSxNQUNEdEYsT0FBQUUsSUFBQSxHQUNGbUMsTUFBTUUsU0FDTnJDLElBQVksYUFDTEEsVUFHTlUsS0FBQTJCLEVBQUFyQyxXQUtEcUMsV0FHQSxTQUFBSyxFQUFBMUMsRUFBQTJDLFVBQ0UzQyxHQUFBLE1BQUEsRUFBQUksRUFBQU0sS0FBQVYsRUFBQTBDLEVBQUFDLFVBS0osU0FBUUcsRUFBQXVDLE9BQ1JyQyxHQUFRcUMsRUFBQXBELFNBQ1IsSUFDQWEsRUFBQWIsT0FFQSxLQUFBZ0IsRUFBQUQsRUFBQUMsSUFBQSxrQ0N2SkRxQyxLQUFBLFNBQUFwRCxFQUFBSSxFQUFBaUQscUZBa0JBLE9BQUFDLCtCQU9EN0MsRUFBQSwyQkFPQSxLQUFBQSxFQUFjVixFQUFPVSxJQUFJLENBQ3ZCOEMsRUFBS25ELEVBQWFKLEVBQU1TLEdBQU1BLEVBQUErQyxNQUU1QkQsR0FBUyxLQUFPLFFBQ2RBLHNCQVFOQSxFQUFBbkQsRUFBb0JKLEVBQUlTLEdBQUFBLEVBQUErQyxNQUVwQkQsR0FBVSxLQUFNLFFBQ2RBLDJCQVdMRSxLQUFBLEVBS0RDLE1BQUEsU0FBa0JwRSxFQUFBRixPQUNoQnVFLEVBQU9DLEVBQUFGLDZDQVdQckUsRUFBT3VDLFdBQWF0QyxHQUFTLFFBQzNCMkMsb0dBV0V3QixLQUFPbkUsRUFBRW1FLEtBQUFuRSxFQUFBbUUsTUFBQXBFLEVBQUFvRSxjQUVYQyxHQUdIRyxJQUFBQyxLQUFBRCxJQUtERSxRQUFBQSxtTEFXQTVGLEVBQUEsV0FBMEJtRCxFQUFFLEtBQUFBLEVBQUEwQyx5QkFDT0MsRUFBQS9CLFdBTTlCQSxHQUFBLFdBQUFBLEdBQUFBLEVBQUFuQyxXQUFNb0MsS0FBQUQsVUFFTixZQUFBN0MsRUFBQStDLFNBQUFGLEdBQUEsUUFDRCxtRkFnQkh6RSxlQU9EeUcsc0JBZ0JBQyxRQUtDQyxFQUFBLFNBQUEsRUFBQSxJQUFBTixpQ0FNRE8sRUFBY0MsT0FDQUEsT0FDTCxTQUFTQyxFQUFBQyxVQUFFQSxFQUFPLEdBQU8sS0FHakMsT0FBQSxzREFVRHpHLEVBQUFELEVBQWVDLFFBR04sU0FBQTBHLEVBQUFqRSxPQUNQQyxFQUFJLElBQ0FnRSxFQUFBMUUsWUFDQVUsRUFBQUssRUFBQUwsSUFBQSxJQUNBZ0UsRUFBQWhFLEtBQUFELEVBQUEsQ0FDSixPQUFBQyxVQUdJLEtBR0csdUxDdE1UaUUsRUFBQSxNQUFBQyxFQUFpQyxLQUFBQyxFQUFBLE9BQUFELGtCQUVmRSw2REFFQ0QsRUFBQSxPQUFBRCxXQUdWLEtBQUNDLEVBQW1CLG1FQVE1QiwyQkFBQUYsRUFBQSxPQUdELEtBQ0EsV0FHYSxJQUFFSSxPQUFBSCxFQUFBLElBQUEsT0FDWCxJQUFBRyxPQUFBLElBQWlCSCxFQUFXLDhCQUFZQSxFQUFBLEtBQUEsT0FFMUMsSUFBVUcsT0FBQSxJQUFBSCxFQUFBLEtBQUFBLEVBQTJDLE9BQzFDLElBQUVHLE9BQUEsSUFBQUgsRUFBQSxXQUFBQSxFQUFBLElBQUFBLEVBQUEsT0FFWixJQUFBRyxPQUFBLElBQUFILEVBQUEsaUJBQUFBLEVBQUEsT0FBQSxLQUdISSxFQUFZLElBQUdELE9BQUFFLEdBRWZDLEVBQUksSUFBYUgsT0FBSyxJQUFPRixFQUFXLFdBR2xDLElBQUFFLE9BQU8sTUFBQUYsRUFBd0IsV0FDakMsSUFBSUUsT0FBQSxRQUFBRixFQUFBLGtFQUdGLElBQUFFLE9BQVEsSUFBUUUsYUFDaEJGLE9BQUEseURBQXFCSCxpQ0FDdEJBLEVBQUEsY0FBQUEsZUFBV0EsRUFBQSxTQUFBLHFEQUdILElBQU9HLE9BQU8sSUFBS0gsRUFBYSxpT0FjeEMsSUFBQUcsT0FBQSxxQkFBQUgsRUFBQSxNQUFBQSxFQUFBLE9BQUEsU0FDRixTQUFBTyxFQUFBQyxFQUFBQyxHQUNGLElBQUFDLEVBQUEsS0FBQUYsRUFBQSx3QkFTREUsRUFBTSw4RUFVTkMsR0FBZSx5REFDTixTQUFVQyxFQUFBQyxNQUNqQkEsRUFBTSxJQUdORCxJQUFXLEtBQUEsQ0FDWCxNQUFBLFdBSUFBLEVBQUF4SCxNQUFlLEdBQUEsR0FBVzhHLEtBQUtVLEVBQUFFLFdBQU9GLEVBQUF4RixPQUFBLEdBQUEzQixTQUFBLElBQUEsVUFJdEMsS0FBQW1ILDhGQ3ZGRkcsSUFBQSxhQUFvQkMsS0FBSSw0REFZeEI3SCxFQUFBOEgsRUFBQUMsV0FBNkI5RixRQUFBK0YsZUFDM0JDLEdBQ0Q5SCxHQUFBeUMsTUFBQTVDLEVBQUFpQywyQ0FVRCxTQUFBNEIsRUFBQXFFLE9BQ0VqRixFQUFBWSxFQUFXNUIsT0FDWFUsRUFBQSxRQUVFa0IsRUFBQVosS0FBQWlGLEVBQUF2RixLQUFBLEVBQ0hrQixFQUFBNUIsT0FBQWdCLEVBQUEsa0VBV1EzQixFQUFZQSxFQUFDMEcsU0FBZSxxRUFhcEMsSUFBQUcsRUFBQSx1Q0FNRDdHLEVBQUFBLEdBQW9CL0IsRUFFbkIsR0FBQTZJLEVBQUEsSUFLRUosSUFBQSxLQUFBSyxFQUFBQyxFQUFBQyxLQUFBbEgsSUFBQSxDQUlGLEdBQUFtSCxFQUFBSCxFQUFBLEdBQUEsQ0FJQSxHQUFBTCxJQUFBLEVBQUEsQ0FFSyxHQUFRdEYsRUFBQXBCLEVBQUFtSCxlQUEwQkQsR0FBQSxDQVFsQyxHQUFPOUYsRUFBR2dHLEtBQUFGLEVBQUEsQ0FFVnBELEVBQVNqRixLQUFBdUMsR0FFZixPQUFBMEMsT0FFVSxRQUNLQSxPQUlMLENBT0osR0FBT3VELElBQUFqRyxFQUFtQmlHLEVBQU1GLGVBQUFELEtBRXRDSSxFQUFnQnRILEVBQUlvQixJQUNsQkEsRUFBT2dHLEtBQVFGLEVBQUEsQ0FHWHBELEVBQUFqRixLQUFldUMsR0FFckIsT0FBQTBDLFNBT1MsR0FBQWlELEVBQVMsR0FBSyxDQUN0QmxJLEVBQUF5QyxNQUFBd0MsRUFBQTlELEVBQUF1SCxxQkFBQXhILElBRUQsT0FBQStELE9BSVksSUFBR29ELEVBQUFILEVBQUEsS0FBbUJwQyxFQUFRNkMsc0dBVXhDN0MsRUFBWThDLFFBQ0MxSCxFQUFlLFFBQzdCZ0YsSUFBQUEsRUFBQTJDLEtBQUEzSCxJQUFBLHdCQVlPLEdBQVFDLEVBQU0ySCxTQUFBL0MsZ0JBQUEsU0FBQSxDQUduQixHQUFBZ0QsRUFBQTVILEVBQUE2SCxhQUFBLE1BQUEsQ0FDREQsRUFBUUEsRUFBQ25FLFFBQVd5QyxHQUFBNEIsUUFDWixHQUNOQyxhQUFtQixLQUFBSCxFQUFhNUMsd0RBVTlCZ0QsRUFBZUMsRUFBT0MsS0FBSSw0Q0FTaEMsSUFDRXJKLEVBQUl5QyxNQUFPd0MsSUFDRnFFLGlCQUFxQkgsSUFHOUIsT0FBUWxFLFFBQ0NzRSxJQUNSLFFBRUQsR0FBT1IsSUFBRTVDLEVBQUEsQ0FDVmhGLEVBQUFxSSxnQkFBQSxrQkFXS0MsRUFBUXZJLEVBQUcwRCxRQUFBckQsRUFBQSxNQUFBSixFQUFBOEQsRUFBQStDLFlBT2IzQixTQUNEcUQsS0FHRixTQUFBQyxFQUFBQyxFQUFBdEUsMENBS0RxRSxFQUFBRCxFQUFBRyxnQkFFSUYsRUFBS0MsRUFBUyxLQUFHdEUsRUFFcEIsT0FBQXFFLEVBUUQsU0FBQUcsR0FBc0J6SSxLQUNwQjhFLEdBQWEsWUFDWDlFLFdBSUQwSSxHQUFBMUksT0FDRDJJLEVBQUE1SyxFQUFZd0IsY0FBQSwyREFTZCxHQUFBb0osRUFBQWhKLFdBQUEsR0FDRUEsV0FBWUMsWUFBVytJLG9CQVF0QkMsR0FBQUMsRUFBQUMsT0FDRHRLLEVBQU9xSyxFQUFLRSxNQUFBLEtBQ2I1SCxFQUFBM0MsRUFBQWlDLGlEQWVJdUksR0FBQS9ELEVBQUFDLFNBRURBLEdBQU9ELElBQ05nRSxHQUFBaEUsRUFBQXVCLFdBQUEsR0FBQXRCLEVBQUFzQixXQUFBLEtBQ0gwQyxZQUFPaEUsRUFBVWdFLDJCQVNsQixHQUFBRCxFQUFBLG9EQVNPaEUsRUFBQSxHQUFTLFdBS2hCa0UsR0FBQXRHLDhGQWFHdUcsR0FBZ0J2RyxtQkFBUTNCLFNBQUVBLEVBQUF1RyxTQUFBL0MscUJBQzFCMUMsSUFBVyxTQUFNQSxJQUFBLFdBQUFkLEVBQUEyQixPQUFBQSxrQkFZckIsT0FBQSxTQUFrQjNCLGVBS0lBLEVBQU0sc0RBYTVCLEdBQUEsVUFBQUEsRUFBd0J2QixXQUFVLENBQ2hDLE9BQU11QixFQUFBdkIsV0FBaUIwSixXQUFBQSxNQUNoQixpQ0FRSEMsYUFBZUQsR0FLcEJuSSxFQUFBb0ksY0FBQUQsd0NBVU8sR0FBTSxVQUFRbkksRUFBVSxRQUN4QkEsRUFBT21JLFdBQVdBLEVBTXpCLE9BQUEsZ0JBU09FLEdBQWlCdkosVUFDbkJ5SSxHQUFTLFNBQVVlLE1BQ2JBLFNBQ1JmLEdBQU8sU0FBaUI5QixFQUFNM0MsT0FDL0J2QyxJQUFNekIsS0FBQTJHLEVBQUFsRyxPQUFBK0ksS0FDTEMsRUFBT2hKLE9BR1YsTUFBQVUsSUFBQSwrR0FxQkRzRCxFQUFBaUYsR0FBQWpGLHNDQVdFa0YsRUFBbUJ6SSxJQUFLQSxFQUFBMEksZUFBdUIxSSxHQUFBeUksZ0JBQ2hELE9BQUFBLEVBQUFBLEVBQUFsQyxXQUFBLE9BQUEsU0FTUWlDLEdBQUFHLFlBQXNCLFNBQUlDLEdBQ2xDLElBQUFDLEVBQUFDLG9GQVVRM0ssSUFDTHRCLEVBQVk0TCxtQkFDSC9FLEVBQU03RyxNQUtqQnVJLElBQVl2SSxJQUNiaU0sRUFBQWpNLEVBQUFrTSxjQUFBRCxFQUFBRSxNQUFBRixFQUFBLHFGQVNEQSxFQUFBRyxZQUF1QixXQUFjQyxPQVduQ2hGLFdBQVlzRCxHQUFBLFNBQUFDLEdBQ2JBLEVBQUEwQixVQUFBLDJDQVNDaEQscUJBQTRCcUIsR0FBSyxTQUFZQyxHQUM5Q0EsRUFBQWpKLFlBQUEzQixFQUFBdU0sY0FBQSwwTkFtQkM3RixFQUFROEYsUUFBWSxVQUNaLE1BQU0sU0FBQXJELE9BQ2JzRCxFQUFBdEQsRUFBQTNELFFBQUFrSCxFQUFBQyxXQUNELFNBQWN4SixHQUNmLE9BQUFBLEVBQUF5RyxhQUFBLFFBQUE2QyxJQUlBRyxFQUFBQyxLQUFBLE1BQUEsU0FBQTFELEVBQUFwSCw0SEFTRCxJQUFBMEssRUFBQXRELEVBQW1CM0QsUUFBT2tILEVBQUFDLFdBQ3BCLFNBQUt4SixHQUNULElBQUk0SSxTQUFPNUksRUFBQTJKLG1CQUFBLGFBRVgzSixFQUFJMkosaUJBQWtCLGFBQ3BCZixHQUFJQSxFQUFXN0YsUUFBV3VHLFdBTXJCLE1BQUksU0FBaUJ0RCxFQUFDcEgsYUFDcEJBLEVBQU1tSCxpQkFBcUIsYUFBYUwsRUFBQSxLQUMvQ2tELEVBQU0zSSxFQUFHVCxFQUNWUSxFQUFBcEIsRUFBQW1ILGVBQUFDLE1BQ0NoRyxFQUFPLENBSVQ0SSxFQUFPNUksRUFBQTJKLGlCQUFBLFNBQ0xmLEdBQVVBLEVBQUE3RixRQUFBaUQsRUFBQSxRQUNKaEcsNEhBc0JOLE9BQVl1RCxFQUFNNEMsOEJBQ2xCeUQsRUFBU2hMLGFBQ1ZBLEVBQUF1SCx1QkFBQSxZQUFBLFFBQU12SCxFQUFBdUgscUJBQUF5RCxRQUdOLEdBQUFyRyxFQUFBOEMsSUFBQSxDQUVELE9BQU96SCxFQUFBbUksaUJBQUE2QyxLQUlSLFNBQUFBLEVBQUFoTCw4Q0FTRCxHQUFBZ0wsSUFBQSxJQUFxQixDQUNuQixNQUFPNUosRUFBTzBDLEVBQVN6QyxLQUFPLENBQy9CLEdBQUFELEVBQUFzRixXQUFBLEVBQUEscUJBUUQsT0FBQTVDLEtBS0VnSCxLQUFNLFNBQVduRyxFQUFXNkMsd0JBQTBCLFNBQUcrQyxFQUFBdkssYUFDbkRBLEVBQVl3SCx5QkFBNEIsYUFBUVYsRUFBQSxRQUNoRDlHLEVBQVF3SCx1QkFBb0IrQyxrQkF1QmxDNUYsRUFBVzhDLElBQUN3RCxFQUFBdkQsS0FBQXpKLEVBQUFrSyxrQkFBQSxnQkFVZCtDLEVBQUF0TCxZQUF3QmlKLEdBQUtzQyxVQUFNLFVBQUFuRyxFQUFBLFNBQ2pDLGVBQWNBLEVBQUEscUVBU2YsR0FBQTZELEVBQUFWLGlCQUFBLHdCQUFBeEgsT0FBQSxnRkFRRG9FLEVBQUFsRyxLQUFBLE1BQTBCMEcsRUFBQSxhQUFBNkYsRUFBQSxTQUtsQnZDLEVBQUVWLGlCQUFjLFFBQWdCbkQsRUFBTyxNQUFVckUsT0FBRSxDQUN6RG9FLEVBQVNsRyxLQUFLLHdFQWVaZ0ssRUFBQVYsaUJBQWUsS0FBQW5ELEVBQUEsTUFBQXJFLE9BQUEsR0FFWDlCLEtBQUEsMkJBS2VnSyxlQUNBLDBPQWF2QjlELEVBQUFsRyxLQUFBLE9BQXdCMEcsRUFBYywySEFhdEMsR0FBQXNELEVBQUFWLGlCQUF3QixhQUFpQnhILFNBQUEsRUFBQSxDQUN2Q29FLEVBQUlsRyxLQUFVLFdBQVMsZ0NBSXBCLFVBQU1BLEtBQUEsYUFJVDhGLEVBQU8wRyxnQkFBUUosRUFBQXZELEtBQUF4RCxFQUFBZ0gsRUFBQWhILFNBQ2hCZ0gsRUFBQUksd0lBYURwSCxFQUFBOUUsS0FBQXlKLEVBQW1CLGVBQ1hoSyxLQUFBLEtBQUErRyxPQUtBYixFQUFBcEUsUUFBcUIsSUFBRytFLE9BQUFYLEVBQUFtRCxLQUFBLFFBQzFCcUQsRUFBa0I1SyxRQUFBLElBQUErRSxPQUFBNkYsRUFBQXJELEtBQUEsUUFHbkIrQyxFQUFBdkQsS0FBQXdELEVBQUFNLDJCQU1GdkIsR0FBQWdCLEVBQUF2RCxLQUFBd0QsRUFBQTVELG1CQUFNbkMsRUFBQUMsU0FDQ0QsRUFBQXVCLFdBQWtCLEVBQUl2QixFQUFDMEUsZ0JBQWlCMUUsSUFDOUNDLEdBQU1BLEVBQUt2RixrQkFDWHNGLElBQUFzRyxNQUFpQkEsR0FBT0EsRUFBQS9FLFdBQW1CLE1BRTNDWSxvQkFDRW1FLDhCQUNzQnRHLEVBQUVxRyx3QkFBQUMsR0FBQSxlQUkzQnRHLEVBQUFDLEdBQ0YsR0FBQUEsRUFBQSwwRUFnQk9ELEVBQUFDLE1BSUxELElBQUFDLEVBQUEsR0FBVSxZQUNULFNBS01ELEVBQUdxRyx5QkFBMEJwRyxFQUFBb0csNkJBQ2xDLFFBRURFLEtBSUN2RyxFQUFBMkUsZUFBQTNFLE1BQUFDLEVBQUEwRSxlQUFBMUUsR0FDSkQsRUFBQXFHLHdCQUFBcEcsbUhBY09BLElBQUFuSCxHQUFZbUgsRUFBQTBFLGdCQUF5QnRELEdBQU1jLEVBQUFkLEVBQUFwQixHQUFBLENBQ2pELE9BQU0sU0FLSnVHLEVBQ0Q3TSxFQUFBNk0sRUFBQXhHLEdBQUFyRyxFQUFBNk0sRUFBQXZHLFlBR0FzRyxFQUFBLEdBQUEsRUFBQSxZQUdHdkcsRUFBS0MsVUFFUEEsRUFBQSxHQUNDLGtCQUtGK0QsSUFFRCxJQUNFaEUsRUFBQXRGLGFBQ0F1RixFQUFBdkYsY0FDQXNGLEdBQ0h5RyxHQUFBeEcsR0FJQSxJQUFBeUcsSUFBQUosRUFBQSxDQUVELE9BQUF0RyxJQUFBbEgsR0FBd0IsRUFDdEJtSCxJQUFBbkgsRUFBZ0IsRUFDakI0TixHQUFBLHdEQVcyQzFHLFFBQ3RDZ0UsRUFBS0EsRUFBQXRKLFdBQVksV0FBU3NKLEtBRXhCL0QsUUFDRCtELEVBQUFBLEVBQUF0SixXQUFlLFdBQ1pzSixTQUtOMkMsRUFBS3pLLEtBQUt1SyxFQUFJdkssR0FBSyxZQUtyQkEsaURBV0VwRCxjQUlNLFNBQWM4TixFQUFBQyxVQUNwQnBDLEdBQU9tQyxFQUFNLEtBQUEsS0FBQUMsT0FHaEJYLGdCQUFBLFNBQUFqSyxFQUFBMkssdUZBV0RFLEVBQWlCRixFQUFNLFFBQ3JCUixJQUFrQkEsRUFBYTdELEtBQUtxRSxXQUN0QmhILEVBQUEyQyxLQUFBcUUsSUFBQSxTQUtkaEwsRUFBU21ELEVBQU05RSxLQUFPZ0MsRUFBRTJLLE1BSXhCaEwsR0FBQTRELEVBQWlCdUgsbUJBSWpCOUssRUFBQW5ELFVBQWVtRCxFQUFBbkQsU0FBQXlJLFdBQUEsR0FBQSxDQUNoQixPQUFBM0YsbURBVUN1RyxTQUFJLFNBQWlCdEgsRUFBQW9CLE9BRXBCcEIsRUFBQThKLGVBQUE5SixLQUFBL0IsRUFBQSxHQUNVK0IsOEVBWVhFLEVBQUkySyxFQUFNc0IsV0FBU2pLLEVBQU8wQyxpQkFHeEIxRSxHQUFNaEIsRUFBUUUsS0FBR3lMLEVBQUFzQixXQUFBakssRUFBQTBDLG1CQUNqQjFDLEdBQVM0RSx3QkFHc0JqRSwyQkFHakJpRSxpQkFDWDVFLE1BQ0hkLEVBQU0ySixpQkFBZ0I3SSxLQUFFa0ssRUFBQUMsWUFDekJsSSxNQUVELFNBSUFtSSxPQUFNLFNBQWdCQyxVQUNoQkEsRUFBTSxJQUFBOUksUUFBYXlDLEdBQVM0QixjQUkxQixTQUFRMEUsYUFDWHJPLE1BQU0sMENBQVlxTyxPQVF4QkMsV0FBQSxTQUFBM0ksR0FFRCxJQUFBMUMsYUFHSSxpR0FXSk8sRUFBQStLLEVBQUE3TixLQUFBd0MsSUFJQSxNQUFlTSxJQUFBLGlDQVNibUMsS0FPQThGLEdBQVUrQyxRQUFBLFNBQUF2TCxPQUNWNEksSUFDQSxLQUNBLElBQ0E1SSxFQUFZc0YsYUFFWkEsRUFBWSxPQUVOc0QsRUFBQTVJLEVBQUFDLEtBQUEsSUFFQXNMLEVBQUEzQyxTQUVOLEdBQUF0RCxJQUFZLEdBQUFBLElBQUEsR0FBQUEsSUFBQSxHQUFBLFdBR0x0RixFQUFBd0wsY0FBd0IsU0FBQyxRQUM1QnhMLEVBQUF3TCxnQkFDQSxLQUVDeEwsRUFBQUEsRUFBQXlMLFdBQXVCekwsRUFBQUEsRUFBQUEsRUFBQTBMLFlBQUEsQ0FDNUIvTCxHQUFLNEwsRUFBQXZMLFVBR0wsR0FBT3NGLElBQUEsR0FBbUJBLElBQU0sRUFBQSxRQUNoQ3RGLEVBQVUyTCxpQkFJVmhNLEtBR0E2SSxHQUFBb0QsdUJBR0EsZ0JBRUFyRSxTQUVBc0UsdUNBT0EzRyxJQUFRLGFBQUE5RSxNQUFBLFdBQ1I4RSxJQUFBLG1CQUNBQSxJQUFBLGtCQUFZOUUsTUFBQSxXQUNaOEUsSUFBQSxvQ0FJQSxTQUFjUyxLQUNWLEdBQUFBLEVBQUEsR0FBQXRELFFBQUFrSCxFQUFBQyxNQUdKLElBQVE3RCxFQUFBLElBQUFBLEVBQUEsSUFBQUEsRUFBQSxJQUFBLElBQUF0RCxRQUFBa0gsRUFBQUMsT0FFUjdELEVBQUEsS0FBYyxLQUFBLENBQ2RBLEVBQUEsR0FBQSxJQUFjQSxFQUFBLEdBQUEsV0FHUkEsRUFBQXBJLE1BQUEsRUFBQSxVQUdOLFNBQVdvSSxLQ3BqQ1AsR0FBSUEsRUFBQSxHQUFBbkMsY0FHVCxHQUFDbUMsRUFBUSxHQUFDcEksTUFBQSxFQUFXLEtBQU0sTUFBQSxLQUV4Qm9JLEVBQU0sR0FBQSxJQUNKbUcsTUFBTW5HLEVBQU0sV0FLTkEsRUFBQSxHQUFBQSxFQUFhLElBQUFBLEVBQUEsSUFBQSxHQUFBLEdBQUFBLEVBQUEsS0FBQSxRQUFBQSxFQUFBLEtBQUEsZUFDbkJBLEVBQWEsR0FBRUEsRUFBQSxJQUFlQSxFQUFBLEtBQUEsZUFHOUJBLEVBQU0sR0FBQSxJQUNQbUcsTUFBQW5HLEVBQUEscUJBTUMsU0FBQUEsWUFFQUEsRUFBVSxJQUFFQSxFQUFBLFFBRVosU0FBY1csS0FBQVgsRUFBQSxJQUFnQixrQkFLOUIsR0FBQSxNQUNBQSxFQUFBLElBQWVBLEVBQUUsSUFBQSxXQUdkb0csR0FBRXhILEVBQVcrQixLQUFBeUYsT0FFaEJDLEVBQVVELEVBQVUsV0FFakJBLEVBQUVyTyxRQUFBLElBQUFxTyxFQUFBeE0sT0FBQTBNLEdBQUFGLEVBQUF4TSxRQUFBLE1BR0xvRyxFQUFRLEdBQUFwSSxNQUFBLEVBQWMwTyxRQUNuQkYsRUFBRXhPLE1BQVcsRUFBQTBPLFlBSVoxTyxNQUFFLEVBQU0sMEJBTVoyTyxTQUNEQSxFQUFBN0osUUFBQWtILEVBQUFDLElBQUFoRyxxQkFDRDBJLElBQU8sZUFDQSxPQUFFLGVBQ1BsTSxVQUNBQSxFQUFBdUcsVUFBYXZHLEVBQUF1RyxTQUFlL0MsZ0JBQUErQyxtQkFJcEI0QyxTQUNSZ0QsRUFBVWhELEVBQWMsWUFFeEJpRCxNQUNBLElBQU05SCxPQUFFLE1BQUFILEVBQXdCLElBQUFnRixFQUFBLElBQUFoRixFQUFBLFdBQ2pDZ0YsRUFBQSxTQUFBbkosVUFDRG9NLEVBQU85RixZQUFBdEcsRUFBQW1KLFlBQUEsVUFBQW5KLEVBQUFtSixrQkFBQW5KLEVBQUF5RyxlQUFBLGFBQUF6RyxFQUFBeUcsYUFBQSxVQUFBLHFCQUlBM0YsRUFBTXVMLEVBQUFDLG1CQUNQdE0sU0FDQXdJLEdBQUErRCxLQUFVdk0sRUFBQWMsU0FFVixLQUFVLFFBQ2R1TCxJQUFJLFNBRUxBLEVBQUEsUUFDRCxRQUdDLGNBRWEsSUFBQUcsSUFBQUYsTUFDWixLQUFZRSxJQUFBRixNQUNaLEtBQVVBLEdBQVdFLEVBQUE5TyxRQUFBNE8sS0FBQSxNQUN0QixLQUFBQSxHQUFBRSxFQUFBOU8sUUFBQTRPLElBQUEsTUFDUSxLQUFFQSxHQUFBRSxFQUFBalAsT0FBQStPLEVBQUEvTSxVQUFBK00sTUFDVCxNQUFXLElBQUFFLEVBQVduSyxRQUFBb0ssRUFBQSxLQUFBLEtBQUEvTyxRQUFBNE8sSUFBQSxNQUN0QixLQUFTRSxJQUFTRixHQUFBRSxFQUFBalAsTUFBQSxFQUFBK08sRUFBQS9NLE9BQUEsS0FBQStNLEVBQUEsMkJBS1QzSyxFQUFBK0ssRUFBQXBFLEVBQWNsSSxFQUFBdU0sU0FDeEJoTCxFQUFBcEUsTUFBQSxFQUFBLEtBQUEsUUFDSW9FLEVBQUVwRSxPQUFBLEtBQUEsU0FDTG1QLElBQVEscUJBRVIsR0FBWUMsSUFBQSxXQUdaM00sV0FDQUEsRUFBT3ZCLHFCQUdUdUIsRUFBVXBCLEVBQUFnTyxTQUNSQyxFQUFXQyxFQUFBbEUsRUFBb0JtRSxFQUFBQyxJQUMvQkMsSUFBT0MsRUFBTyxjQUFBLG9CQUNkbE4sRUFBQXZCLGFBQ0EwTyxHQUFRbk4sRUFBUXVHLFNBQUEvQyxpQkFDaEJvSixJQUFBTyxJQUNBLFNBRURDLEVBQUEsTUFHUyxPQUNSbEksRUFBUSxHQUNSbEYsUUFDQTRJLEVBQVNBLEVBQU8xRCxHQUFBLElBQ2hCaUksSUFDQTVHLFNBQVUvQyxnQkFBb0IxQyxJQUM5QndFLFdBQWEsRUFBQSxRQUViLFNBSUFKLEVBQUF2RCxJQUFlLFNBQUFxTCxHQUFnQixxQkFFL0IsUUFHQUUsRUFBY0UsRUFBQTNCLFdBQUEyQixFQUFBQyxpQkFHSkMsRUFBRSxHQUtaRixJQUNEeEUsRUFBQWhGLEtBQUFnRixFQUFBaEYsU0FJQWtKLEVBQUFsRSxFQUFBMkUsWUFDRFQsRUFBYWxFLEVBQUEyRSxnQkFFWFYsRUFBUWxMLFNBQ1R5RixFQUFBLEtBQUFvRyxHQUFBcEcsRUFBQSxHQUNGcUcsRUFBQVYsR0FBQTNGLEVBQUEsR0FDQXdCLEVBQUFtRSxHQUFBSyxFQUFBL0gsV0FBQTBILEdDM0pHLE1BQVVuRSxJQUFBbUUsR0FBQW5FLEdBQUFBLEVBQUExRCxLQUdkdUksRUFBV1YsRUFBQSxJQUFBQyxFQUFBVSxNQUFBLGdDQUtYYixFQUFVbEwsSUFBQTZMLEVBQUFULEVBQUFVLEdBQ04sWUFLSSxDQUVSLEdBQVFILEVBQUUsQ0FFVjFFLEVBQVU1SSxFQUNWOE0sRUFBVWxFLEVBQUFoRixLQUFBZ0YsRUFBQWhGLHlCQU1Ma0osRUFBRWxFLEVBQUEyRSxjQUVKbkcsRUFBSXlGLEVBQUFsTCxPQUNKb0wsRUFBSTNGLEVBQUEsS0FBQW9HLEdBQUFwRyxFQUFBLEdBQ0pxRyxFQUFJVixFQUtKLEdBQUlVLElBQUEsTUFBQSxDQUVKLE1BQUk3RSxJQUFBbUUsR0FBQW5FLEdBQUFBLEVBQUExRCxLQUVQdUksRUFBWVYsRUFBQSxJQUFBQyxFQUFBVSxNQUFBLENBRVosSUFBV1AsRUFDWHZFLEVBQUFyQyxTQUFtQi9DLGdCQUFBMUMsRUFDbkI4SCxFQUFBdEQsV0FBQSxpQ0FVYXVILEVBQUFDLEVBQUFsRSxFQUFBMkUsbURBT1AsVUFRTEUsR0FBQWQsa0VBWUduSSxRQUFRbUosSUFBSWxFLEVBQUFtRSxXQUFBRCxFQUFBbkssbUJBQ1hzSSxNQUFRLHVCQUFDNkIsWUFNZCxPQUFBN08sRUFBQXdKLEdDbkZGLEdBQUF4SixFQUFBUyxPQUFBLEVBQUEsb0lBU0FrRyxFQUFBb0ksS0FBQS9LLEVBQTBCK0ssR0FBV0MsRUFBTzdOLE9BSTFDLFNBQVlELEdBQ1osT0FBSWxCLEVBQUFrQixFQUFjLEVBQUFvRCw0QkFVaEJtRSxHQUFhLFNBQUc1SSxtQkFPaEJvUCxFQUFlcFAsRUFBUzBELFFBQUNyRCxFQUFlLGNBR3hDZ1AsRUFBTXBLLE1BQ04sU0FBWTZCLEVBQVkzQyxFQUFBbEUsRUFBZ0JnTyxPQUN4QzVNLElBRU9nTyxFQUFZdkksRUFBQSxLQUFZbUgsVUFDN0JyTixxQkFLSVMsRUFBS2lPLEVBQUdoTyxHQUFZLEdBRXRCQSxLQUFPNkMsRUFBSTdDLEdBQUFELGdCQUlkQSxFQUFBcEIsRUFBQWdPLEtBRUQsR0FBQTVNLElBQ01rTyxFQUFHLEtBQVV0QixFQUFBbEssR0FHckJ3TCxFQUFPLEdBQUEsWUFDRHhMLEVBQUVnTCxtRkFXRm5HLEdBQWdCLFNBQVNqSixLQUM3QkEsRUFBSStELFFBQU1rSCxFQUFpQkMsV0FFM0IsU0FBUXhKLFVBQ05BLEVBQU13TCxhQUFnQnhMLEVBQUltTyxXQUFTNUMsRUFBZXZMLElBQVN0QyxRQUFTWSxJQUFBLGFBV3pELFNBQUE4UCxPQUVaM0osRUFBQTZCLEtBQUE4SCxHQUFBLElBQUEsSUFFRHRDLE1BQU8scUJBQUFzQyxPQUVML0wsUUFBQWtILEVBQWlCQyxJQUFpQmhHLDhCQUMxQnhELFdBRVYsQ0FFRixHQUFNcU8sRUFBWTNJLEVBQ2xCMUYsRUFBTW9PLEtBRU5wTyxFQUFBeUcsYUFBVSxhQUF1QnpHLEVBQU15RyxhQUFBLFFBQUEsQ0FFdkM0SCxFQUFVQSxFQUFVN0ssY0FDcEIsT0FBTzZLLElBQVVELEdBQUFDLEVBQUEzUSxRQUFBMFEsRUFBQSxPQUFBLGtKQWNmLFNBQVlwTyxVQUNaQSxJQUFVOEosNEJBS1Y5SixJQUFLbkQsRUFBZXlSLGlCQUFrQnpSLEVBQVUwUixVQUFFMVIsRUFBQTBSLGdCQUFBdk8sRUFBQTJCLE1BQUEzQixFQUFBd08sT0FBQXhPLEVBQUF5TyxtQkFJN0NDLEdBQWtCLG1GQVF6Qm5JLElBQUEsV0FBQXZHLEVBQUEyTyxTQUFBcEksSUFBQSxZQUFBdkcsRUFBQTRPLG1CQUdJLFNBQVM1TyxRQUlWdkIsV0FBQSxjQUFNb1Esa0NBR1MscUJBS1o3TyxPQU9OQSxFQUFBQSxFQUFBeUwsV0FBQXpMLEVBQUFBLEVBQUFBLEVBQUEwTCxZQUFBLElBQ0UxTCxFQUFBc0YsU0FBTyxFQUFBLFFBQ0wsMkJBT0osU0FBQXRGLFVBQ0V5SixFQUFPakYsUUFBQSxTQUFBeEUsV0FJUixTQUFBQSxVQUVEOE8sRUFBQXhJLEtBQUF0RyxFQUFBdUcsMEJBR1l2RyxVQUNSK08sRUFBQXpJLEtBQUF0RyxFQUFBdUcsb0VBTUp6RixJQUFBLFNBQUFkLEVBQU0yQixPQUFOLFVBQUFiLElBQUEsd0JBR1VkLDJCQUVKd0QsZ0JBQXlCLGtCQUMxQixZQUdEeEQsRUFBQXlHLGFBQW1CLFVBQUEsTUFBQThGLEVBQUEvSSxnQkFBQSxzRUFXdkJqRSxFQUFBLFdBR3VCLFNBQVNnSixFQUFjaEosRUFBUytJLFVBQ3BEQSxFQUFBLEVBQUFBLEVBQUEvSSxFQUFBK0ksa0RBUUhDLEVBQUE5SyxLQUFBd0MseUNBTUUsU0FDRVYsRUFBU1UsR0FBQSxFQUFBLEdBQ0p4QyxLQUFJd0MsNENBT0UsRUFBR3FJLEVBQWEvSSxFQUFNK0ksU0FDakNySSxHQUFNLEdBQUksR0FDTHhDLEtBQUt3Qyw0Q0FNUixFQUFBcUksRUFBaUIvSSxFQUFhK0ksU0FDL0JySSxFQUFBVixHQUFBLEdBRUs5QixLQUFBd0Msa0JBY1R1RSxRQUFBLE9BQUFpRixFQUFBakYsUUFBQSw4SkFZQ29KLFNBRUF4TyxVQUFNcUssRUFBZXVGLFFBQVV2RixFQUFJakYscUJBQzdCLElBQUFvSixLQUdOcEYsR0FBTXdELFNBQWlCLFNBQUNyTixFQUFnQnNRLFNBQ2xDdEosRUFBUXVKLEVBQVF2TixJQUV0QmtGLEVBQVdzSSxJQUNYdEwsRUFBTWxGLEVBQW1CLFVBR3ZCLFVBQ0UsRUFBT3lRLEVBQUE3UixNQUFBLGtDQVFQLFNBR0RvSSxFQUFBMEosRUFBQXhKLEtBQUF5SixJQUFBLFdBRUEvUixNQUFBb0ksRUFBQSxHQUFBcEcsU0FBQStQLFNBQ0NKLGlCQVFKdkosRUFBTzRKLEVBQWExSixLQUFPeUosR0FBQSxHQUM1QjNKLEVBQUEyQixxREFPQ2dJLEVBQU8vUixNQUFJdVEsRUFBQXZPLGtGQVNiMlAsRUFBQXpSLFlBQ1FxUSxPQUNObk0sVUFFS2dFLE1BRUoySixFQUFBL1IsTUFBQXVRLEVBQUF2TyxlQU1DLDBDQXFCRVosRUFBQWtJLEdBQW1CdEosTUFBQSxnQkFFaEIyUixlQUVOM1AsU0FDRixzQ0FLRFosV0FJRTZRLEdBQWV4QixFQUFReUIsRUFBU0MsV0FDdEJ4SyxNQUNUdUssRUFBQXRLLE9BRUR3SyxHQUFRekssSUFDTndLLEdBQWlCckksSUFBUSxlQUN6QnVJLGFBR0V4UCxpQkFFRHhCLEVBQUFnTyxTQUNGNU0sRUFBQUEsRUFBQWtGLEdBQUEsSUFFRGxGLEVBQUFzRixXQUFXLEdBQ1R1SyxFQUNBLENBSUgsT0FBQTdCLEVBQUFoTyxFQUFBcEIsRUFBQWdPLDJCQVFHNU0sRUFBQXBCLEVBQVlnTyxTQUNiQyxFQUFBQyxLQUVRVSxFQUFRc0MsUUFHZCxrQkFHSDlQLEVBQU1zRixXQUFZLEdBQUF1SyxFQUFtQixNQUMzQjdQLEVBQU1wQixFQUFTZ08sR0FBTyxRQUM3QixtQkFNRDVNLEVBQUlBLEVBQVVrRixHQUFLLGlCQUNMLEdBQUsySyxFQUFTLEdBQzNCN1AsRUFBQTRELEtBQUE1RCxFQUFBNEQsU0FLSWtKLEVBQWM5TSxFQUFBdU4sWUFBa0JULEVBQUE5TSxFQUFBdU4saUJBRXBDb0MsR0FBQUEsSUFBQTNQLEVBQUF1RyxTQUFBL0MsY0FBQSxHQUVIeEQsRUFBV2tGLElBQUFsRixPQU1aLElBQUErUCxFQUFBbEQsRUFBQXhGLHlCQUtELE9BQUEySSxFQUFBLEdBQUFELEVBQUEsT0FDRSxHQUVVMUksR0FBQzJJLDJDQVdWLDREQVNIL1AsRUFBQWdRLEVBQUExUSxhQUNFVSxJQUFPLEtBQ1JnUSxFQUFBaFEsR0FBQUQsRUFBQXBCLEVBQUFnTyxHQUFBLDhCQU9ELGVBR2VqTyxFQUFhdVIsRUFBUXhOLFNBQ2pDLDZEQVNRdUwsRUFBSWxPLEVBQUFvUSxFQUFBdlIsRUFBQWdPLG9CQUticUIsRUFBUTFPLFlBQ0EsWUFFTmUsRUFBS0wsSUFBSSxRQUNQQSxHQUFjLFFBQ2ZrUSxFQUFBblEsRUFBQXBCLEVBQUFnTyxHQUFBLEdBQ0ZuUCxLQUFBdUMsUUFBTSxRQUNMQyxhQVFGbVEsV0FHQ0MsR0FBQUMsRUFBQTNSLEVBQUFxUCxFQUFBdUMsRUFBQUMsRUFBQUMsVUFFV0YsRUFBWTNNLEdBQUEsR0FDekJ5TSxHQUFBRSw0RUFVVzdOLEVBQU9uRCxTQUloQmtHLEdBQUFpTCxHQUFBL1IsR0FBQSxJQUFBQyxFQUFBMEcsVUFBQTFHLEdBQUFBLFFBRUEwUixJQUFBN0ssSUFBQTlHLE1BRURhLEVBQVltUixFQUFBTCxFQUFBMVIsRUFBQWdPLFNBTWQ0RCxJQUFBL0ssRUFBQTZLLEVBQUFNLEdBQVVMLGdDQWtCRyxHQUNaTSxHQUFBQyxFQUFBQyxnREFRREQsRUFBQUMsRUFBQTlRLE1BQUErUSxFQUFBRCxFQUFhOVEsSUFBQUQsVUFPTCxPQUNJc1EsRUFBSSxJQUNiRSxFQUFFLFVBSUNqUixhQUNEVSxJQUFFLElBQ0pELEVBQUE4USxFQUFBN1EsR0FBQSxDQVFGZ1IsRUFBQXhULEtBQUF1VCxFQUFBL1EsR0FBQUQsdUJBUUM4USxFQUFPdlIsYUFDTFUsSUFBRyxPQUNENlEsRUFBVTdRLFVBQ0Z2QyxFQUFPK0gsRUFBQXpGLEdBQUEyUSxFQUFBMVEsS0FBQSxFQUFBLFFBRWR5QyxFQUFBdU8sR0FBQWpSLGlEQWFMd1EsRUFBTyxHQUNGLEtBQUE5TixFQUFBb08sRUFBQWxFLGdCQUVEbEssRUFBUW9PLGdCQU1YSSxHQUFDaEMsT0FDSGlDLEVBQUFuRCxFQUFBek4sb0VBUVFpUCxHQUFVLFNBQWlCeFAsVUFDbkNBLElBQUFtUixHQUNIQyxFQUFDLE1BQUFDLEVBQUE3QixHQUFBLFNBQUF4UCw4T0FxQks0RCxHQUFXLFlBRVhyRCxFQUFFRCxFQUFNQyxJQUFBLE1BQ04rUSxTQUFNcEMsRUFBQTNPLEdBQUFvQixNQUFBLHVCQUlSNFAsR0FBaUJ0QixhQUdoQjFTLE1BQUEsRUFBQTBDLEVBQUEsR0FBQXpDLFFBQUF1RixNQUFBbU0sRUFBQWpQLEVBQUEsR0FBQTBCLE9BQUEsSUFBQSxJQUFBLGNBQ0QzQyxFQUFPLFFBRVZpQixFQUFBTSxHQUFBMlEsR0FBQWhDLEVBQUEzUixNQUFBMEMsRUFBQU0sSUFFREEsRUFBQUQsR0FBQTRRLEdBQXFCaEMsRUFBQUEsRUFBQTNSLE1BQUFnRCxNQUNuQkQsR0FBUWtSLEdBQVd0QyxNQUdqQnpSLEtBQUt1USw2QkFNSnlELEVBQUFDLFNBRURBLEVBQWVuUyxPQUFHLElBQ2hCa1MsRUFBYWxTLE9BQUEsSUFDVixTQUFVa0csRUFBQTdHLEVBQVlnTyxFQUFBbEssRUFBQWlQLFNBQzNCcFIsRUFBRXlOLElBQ0csVUFDQXZJLGFBRUNtTSxJQUVObk0sR0FBTW9NLEdBQWlCcEksRUFBQUMsS0FBVSxPQUFBLElBQUFpSSxLQUc3Qm5FLEdBQWFzRSxHQUFpQixLQUFBLEVBQWNDLEtBQUVDLFVBQU0sT0FDcER6UyxZQUdJLEdBQ0FYLElBQVcvQixHQUFjK0IsR0FBUStTLFdBT3BDclIsSUFBUU4sRUFBTVIsRUFBQVMsS0FBQSxLQUFBQSxJQUFBLE9BQ2RELEVBQVMsR0FDZixNQUVEcEIsR0FBV29CLEVBQUEwSSxnQkFBeUI3TCxFQUFJLENBQ3pDOEwsRUFBQTNJLHlEQVVELEdBQUEyUixFQUFnQixHQUNSTSxNQU1OQyxFQUFRLE9BRUNsRSxHQUFXaE8sRUFBQyxRQUtwQnlGLEVBQUEsR0FBTWhJLEtBQVF1Qyx5REF5QmZ5RixFQUFPLHVEQVlUME0sRUFBQXRCLEdBQW9Cc0IsS0FJbEJqUyxNQUFRd0MsRUFBV3lQLCtEQWFyQjNFLEVBQUF5RSxJQUNhSCxTQUdYN0QsR0FJSCxPQUFDaUUsUUNyeEJGRSw0REFTRWhELEVBQVMsT0FFTCxLQUNRelEsd0JBR1IsTUFDaUJnSCxFQUFNMUYsU0FDdEIyRCxHQUFBLEdBQ0FuRyxLQUFBMlIsT0FDRixDQUNKcUMsRUFBQWhVLEtBQUEyUix1Q0FXQ0EsS0FhRDVHLEdBQUF0QixPQUFBLFNBQUF2SSxFQUFBQyxFQUFBOEQsRUFBQStDLGlCQzVDYzRNLFNBQUExVCxJQUFBLFlBQUFBLEtBQ2I4RyxHQUFBdUcsRUFBcUJyTixFQUFBMFQsRUFBQTFULFVBQUFBLEtBRW5CK0QsU0FLRmlELEVBQUFwRyxTQUFBLEVBQUEsR0FJRW9HLEVBQU8sR0FBQUEsRUFBQSxHQUFBcEksTUFBQSxRQUNMZ0MsT0FBVSxJQUFLK1MsRUFBVXBELEVBQU0sSUFBQXZOLE9BQUEsUUFDL0IyRCxXQUFXLEdBQU1JLEdBQWtCK0QsRUFBQTZILFNBQVlwQyxFQUFBLEdBQWN2TixNQUFBLElBRWhFOEgsRUFBQUMsS0FBQSxNQUFBNEksRUFBQXhQLFFBQUEsR0FBQVQsUUFBQWtILEVBQUFDLElBQUE1SyxRQUFBLE9BRURBLEVBQUEsUUFDRThELE9BR0EsR0FBSTJQLEVBQVMsR0FDWHpULEVBQU1ILDBGQVNWd0IsSUFBQSxhQUlHcVIsU0FBQTNQLEVBQUEyUSxFQUFBM1EsTUFBQSwwQkFPRjhELEVBQUFpRSxzRkFRTWpFLEVBQVFsRyxRQUFHaVMsR0FBQXRDLFlBR2hCaFAsTUFBS3dDLEVBQWMrQyx5QkFlakJzSSxFQUFLcFAsRUFBYWdILGlCQU1uQjRNLEVBQUFqTSxLQUFBM0gsSUFBQTZULEdBQUE1VCxFQUFBSCxhQUFBRywwQkFTTWdGLEVBQUFpRSxNQUFrQixJQUFDbkgsS0FBTStSLEdBQUszTCxLQUFjLE1BQUFsRCw0Q0FhbEQ0RCxHQUFBLFNBQUFDLFVBR0RBLEVBQUEyQyx3QkFBcUJ2TixFQUFnQndCLGNBQUEsYUFBQSxRQ2hHMUJtSixHQUFBLFNBQUFDLGVBdUpkLDRPQXpJQ2dFLFdBQUE5RSxhQUFTLFFBQVQsV0FDRWMsRUFBQWdFLFdBQVFoRixhQUFtQixXQUFFLFNBRTNCcEMsUUFBTyxTQUFBckUsRUFBZWMsRUFBQTRDLFVBQ3BCMUQsRUFBQXVHLFNBQU8vQyxnQkFBd0IsUUFBQyxVQUMvQmtQLHVHQVlQMUgsTUFDRXRILEVBQU0sUUFDTjFELEVBQU1jLEtBQVksS0FBS0EsRUFBVTBDLGlCQUNqQ3hELEVBQVMySixpQkFBZ0I3SSxLQUFTa0ssRUFBQUMsWUFDbENsSSx5QkFTRjlGLFVBSUlvSCxTQUNDbUUsRUFBQW9ELGtLQWNILFNBQVU1TCxFQUFBa0YsRUFBWXlOLGNBR2hCQSxJQUFBbFIsaUJBR056QixFQUFRQSxFQUFBa0YsS0FBZWxGLEVBQUFzRixXQUFBLEVBQUEsTUFDckJBLFdBQVksRUFBQSxPQUNiekcsRUFBQW1CLEdBQUE0UyxHQUFBRCxHQUFBLGNBSUMzUyxzREFXSTBMLFlBQUMsaUJBQ0osR0FBQW1ILElBQUE3UyxFQUFBLFFBRUQ2UyxvQkFRRWhVLEVBQU84TCxLQUFNaEYsTUFBS21OLHdCQUdiOVMsRUFBTWMsVUFFaEJkLEVBQUF1RyxVQUFBdkcsRUFBQXVHLFNBQUEvQyxnQkFBQTFDLEVBQUEwQywwRkFRRHVQLEVBQUEsOERBTUVsVSxFQUFJK0QsS0FBQWdJLEVBQUEsU0FBQTVLLEVBQUFDLFdBQ0YrUyxFQUFTaFYsS0FBS2dDLEVBQU1DLEVBQUNELEtBQVdpVCxTQUs5QjNOLFNBQUEsVUFDQTFDLEtBQUFnSSxFQUFBLFNBQXNCNUssY0FDdEJnVCxJQUFlQyxjQUtkRCxJQUFjLFNBQUUsVUFDbkJwUSxLQUFVZ0ksRUFBQSxTQUFnQjVLLFVBQzNCdEMsRUFBQU0sS0FBQWdWLEVBQUFoVCxJQUFBLElBQUFpVCxTQUlBM00sS0FBQTBNLEdBQUEsUUFFRG5VLEVBQVVzUixPQUFPNkMsRUFBWXBJLEVBQVNxSSxLQUcvQnBVLEVBQUFzUixPQUFBNkMsRUFBQXBJLFlBQ0xoSSxLQUFNZ0ksRUFBYSxTQUFTNUssWUFDNUJoQyxLQUFVZ1YsRUFBY2hULElBQUcsSUFBV2lULEdBQVdqVCxFQUFBc0YsV0FBQSxhQUtuRCxTQUFrQnFGLEVBQUluTCxFQUFBeVQsU0FFdEJ6VCxFQUFPLE1BRVh5VCxFQUFBLENBQUN0SSxFQUFBLFFBQUFBLEVBQUEsT0N2SmNuTCxFQUFBRCxTQUFBLEdBQUFTLEVBQUFzRixXQUFBLEVBQUEsUUFrTWR6RyxFQUFBNkssS0FBQU8sZ0JBQUFqSyxFQUFBMkssSUFBQTNLLDBEQTlMQ0EsRUFBQXNGLFdBQUEsd0NBT0FyRixFQUFBTixJQUNFekMsS0FBS3FDLFNBQ05yQywwRUFLRCxJQUFBK0MsRUFBQSxFQUFBQSxFQUFBSyxFQUFBTCxJQUFBLElBQUFwQixFQUFBcUgsU0FvQkNnTixFQUFBalQsR0FBQS9DLE1BQUEsUUFuQk8seUNBU0dvRCxFQUFBTCxJQUFBLFFBQ0xvRSxFQUFPNk8sRUFBT2pULEdBQUFOLGdCQUdUMEwsV0FBQTFMLEdBQUFBLG1CQUVOaEIsVUFDRnpCLEtBQUU0QyxVQUFBcVQsRUFBQWpXLEtBQUF5QixNQUFBLGFBR0osU0FBQUEscUVBS0R3VSxjQU1FOU8sSUFBTyxVQUFZK08sRUFBVzlNLEtBQUEzSCxLQUM1QkEsMEVBcUJKRSxFQUFBQyxHQUFBQyxLQUFBLFNBQUFKLEVBQVdDLEVBQVV5VSxTQUFyQnJULE1BSUVyQixFQUFNLFFBQ056QixVQU1Jb1csK0JBSUgsS0FBQSxPQUFNM1UsRUFBQVksT0FBQSxLQUFBLE9BQ0xBLFFBQU0sRUFBUyxTQUdiWixFQUFVLGVBSVJrSCxLQUFLbEgsVUFHRmdILEVBQUEsS0FBQS9HLEdBQUEsSUFHUitHLEVBQUEsR0FBQSxHQUVLL0csYUFBQUMsRUFBdUJELEVBQWUsR0FBRUEsbUVBUWhELFVBS0UyVSxFQUFjak4sS0FBT1gsRUFBTyxLQUFLOUcsRUFBV3dDLGNBQVV6QyxHQUFZLEtBRTVEK0csS0FBUS9HLEVBQVcsSUFJdkJDLEVBQU91QyxXQUFJbEUsS0FBV3lJLElBQVksTUFDakNBLEdBQUEvRyxFQUFBK0csUUFLQyxNQUNGNEcsS0FBSTVHLEVBQUEvRyxFQUFpQitHLDJEQWlCckIsR0FBSzNGLGNBQ0ssU0FHVjlDLGVBSUcwQixHQUFBQSxFQUFBNFUsT0FBQSxXQUNESCxHQUFBM0osS0FBQS9LLG9CQU1DZSxZQUFBZCxHQUFBOEssS0FBQS9LLGNBS00yRyxTQUFNLHVCQUdYLHNCQU1KakIsRUFBT2pELFdBQVd6QyxHQUFjLGtCQUMxQjhDLGtCQUNIOUMsS0FJSDBGLHNCQUdTMUYsRUFBSXpCLG1CQUlWMkIsRUFBQUMsS0FLTEQsRUFBT2hDLE9BRVY0VyxFQUFBLCtHQzFMUXRTLE9BQ051UyxFQUFBN1UsRUFBQXNDLEVBQUFqRSwrRkFRRCxPQUFBLGtCQU9DLFNBQUEwTyxFQUFBaE4seUNBTVdnTixJQUFhLFVBQVUvTSxFQUFBK00sdUJBTTlCM0wsRUFBRzBULEVBQUkxVCxJQUFBLCtEQU9OMlQsTUFBUzdMLElBQUUseUJBSVhrQyxnQkFBWWxDLEVBQVc2RCxJQUFVLGdDQVFsQzlMLFVBQUFnTyxFQUFBdk8sT0FBQSxFQUFBVixFQUFBd00sV0FBQXlDLEdBQUFBLG1CQUlDOU4sd0ZBVURBLElBQUEsU0FBQSxzQ0FJRGhDLEtBQVdxRyxjQUdWckUsRUFBQSxHQUFBQSxpQkFHRnJCLEVBQUFDLFVBRUQxQixLQUFNNEMsWUFDUHVMLFdBQ0h4TSxFQUFBWSxNQUFDdkMsS0FBQTJXLE1BQUFoVixFQUFBRixFQUFBQywwR0MzRU9rVixFQUFBL0wsRUFBYTdDLFVBQ2I2QyxFQUFBQSxFQUFBN0MsS0FBcUI2QyxFQUFBekMsV0FBQSxFQUFBLGdFQVMzQjhILEdBQUFBLEVBQUE5SCxXQUFBLEdBQUE4SCxFQUFBLHVCQUVZcE4sWUFDUkEsRUFBTyw0QkFFVCxTQUFZQSxFQUFTQyxFQUFBMFMsVUFDckJ6TixFQUFLbEYsRUFBQSxhQUFXMlMsa0JBRWQzUyxVQUNEOFQsRUFBQTlULEVBQUEscUJBRUYsU0FBQUEscUtBV0RrRixFQUFBbEYsRUFBQSxjQUFBMlMsY0FFSSxTQUFTM1MsRUFBRUMsRUFBTzBTLFlBQ2xCM1MsRUFBQSxrQkFBb0IyUyxzQkFFcEIzUyxhQUNBQSxFQUFhdkIsZ0JBQWFnTixXQUFBekwsYUFFNUIsU0FBS0EsWUFDSEEsRUFBQXlMLHNCQUVGLFNBQWF6TCxHQUNkLEdBQUF1RyxFQUFBdkcsRUFBQSxVQUFBLDBCQVFELEdBQUF1RyxFQUFBdkcsRUFBdUIsWUFBQSxDQUNyQkEsRUFBT0EsRUFBQStULFNBQUEvVCxTQUdMbkIsRUFBQVksU0FBZ0JPLEVBQUFxRix5QkFFZHZHLFdBQ0QsU0FBQTZULEVBQUFoVSxTQUNERSxFQUFBa0IsSUFBQTdDLEtBQUE0QixFQUFBNlQsb0ZBV0FwVCxPQUFPLEVBQUEsT0FHQXVCLEdBQVUsR0FDbEJ1SyxXQUFBeUMsUUFLTXhILEtBQUF4RixHQUFjLDZFQWNyQmtULEVBQU1uVCxjQUVOaEIsS0FBTWdCLEVBQUE4RSxNQUFBc08sT0FBdUMsU0FBV3ZQLEVBQUN3UCxLQUN6REEsR0FBQSxjQUdBQyxtQ0ErQkN0VCxJQUFBLFdBQ0ZBLCtEQThCTUEsRUFBQXVULFNBR0QsVUFDSEMsRUFBQTlVLE9BQUErVSxHQUFBLEVBQUEsR0FDREQsRUFBTy9NLGdCQUNSZ04sRUFBQXJRLEVBQUExRSxPQUFBLG9EQVFTMEUsRUFBSzFFLFNBQ1gsY0FLR2dWLE9BQUEsMEJBU0pBLEVBQUEsVUFLRCxHQUNBLGFBV0EsY0FDQXRRLEVBQU0sSUFJTnNRLElBQU9DLEVBQWEsR0FDWnZRLEVBQUExRSxPQUFlLElBQ3JCOUIsS0FBTThXLGFBR0pFLEVBQUFyUixVQUNBQSxFQUFPLFNBQUFzQixFQUFlMUIsUUFDdkI1QixXQUFBNEIsR0FBQSxLQUNEbkMsRUFBVTZULFNBQU94QixFQUFXeUIsSUFBRTNSLEdBQUEsR0FDOUJ2RixLQUFLdUYsWUFFSEEsR0FBT0EsRUFBQXpELFFBQWdCVixFQUFBOEMsS0FBQXFCLEtBQUEsU0FBQSxHQUl6QkEsMEJBS093UixFQUFBLDBCQVNULFdBRUYzVixFQUFPZ0IsS0FBQU0sVUFBQSxTQUFBdUUsRUFBQTFCLEdBQ1AsSUFBQTRRLCtDQUtGLEdBQUFBLEdBQWtCVSxFQUFlLFNBS2pDLE9BQUFwWCxNQUtBeVgsSUFBQSxTQUFrQjdWLDJEQVNILEdBQUFtRixFQUFBLENBQUFBLDBCQU9iLGFBQ1FvUSxPQUNORSxFQUFjLFVBQ2RyWCxlQUdJLGtCQUNGK0csbURBWUYvRyxhQUdBLG1CQUNNMFgsWUFPSixTQUFNaFcsRUFBY3dFLFNBQ2QsR0FDTkEsV0FDT0EsRUFBQTdGLE1BQUE2RixFQUFrQjdGLFFBQVk2RixtQkFFakMsbURBU0dqRCxpREFNTjBVLHlCQVFDQyx1QkFHREMsNEVBWUwvVyxLQUFBK0UsR0FBQTZNLEtBQUFvRixHQUFPQyxLQUFLQyxRQUdWLEdBQU1uUyxHQUFTbEUsRUFBS3VDLFdBQWdCK1QsRUFBQXBTLEVBQUFxUyxNQUFBLEdBQ3BDcFgsS0FBQStFLEVBQWVpUyxFQUFLRSxPQU1wQixvQkFLVW5TLEdBQWF4RixNQUFTOFgsaUNBU3hCdFMsaUNBS0Z1UyxnTkFXUnpXLEVBQUEwVyxVQUFBLGVBQUEsRUFBQSxlQUdFLG1CQUVDLGtCQUVLQyxVQUdKLGtCQUNFclYsV0FBUzhVLEtBQUE5VSx1Q0FJVHJCLFlBQ0RzVyxLQUFBLEtBQUF0Vyw2RkFhSEEsRUFBVUQsRUFBT3VDLFdBQVlxVSxFQUFDQyxFQUFBLE1BQXNCRCxFQUFBQyxFQUFRLE1BT3REQSxFQUFVLElBQU8sV0FFdkIsSUFBQUMsRUFBUzdXLEdBQVdBLEVBQUlvQixNQUFFaEQsS0FBV2lELGNBQ25Dd1YsR0FBYTlXLEVBQUF1QyxXQUFjdVUsRUFBQUMsU0FBQSxHQUN6QkEsbUJBQ0RDLEVBQUFDLGFBRUtELEVBQVFiLGNBQ1JhLEVBQUFYLFlBQ04sR0FDSVEsRUFBQSxHQUFnQixnQkFFbEJDLEdBQUt4VixrREFNSDRWLEVBQUlDLEVBQVlDLHdCQUVaQyxFQUFBdE8sRUFBZ0J1TyxzRUFTbkJDLEVBQUEsWUFJS2xXLE1BQUFtVyxFQUFhalQsWUFHOER3UyxVQUFTLHFCQUFpQiw2Q0FTbEcsaUJBQ1pELElBQUEsYUFDRkEsRUFBQVAsd0NBVUhKLEVBQUFvQixFQUFTRixFQUFUSSxFQUFhSCxHQUNMbkIsRUFBT29CLEVBQVlGLEVBQUtLLEVBQWNKLFFBTXRDLE9BTUpuWSxTQUVJb1ksRUFBU0YsRUFBQUksRUFBQUgsS0FDTkMsRUFBQUYsRUFBa0JLLEVBQUFKLEtBQ3JCQyxFQUFNRixFQUFXSSxJQUNqQkUsMEJBT0dGLEVBQUEsdUJBSUZKLEVBQUFPLGFBQUFKLEVBQUFqVCxPQUtKK1MsRUFDRk8sRUFDRixrR0FjRSxHQUFBQyxFQUFBLEdBQUFQLEVBQUEsQ0FLRCxHQUFTeE8sSUFBWTJPLEVBQVMsQ0FDNUJGLEVBQVE1VSxVQUNUMkIsR0FBQW1DLEdBR0cyUSxFQUFPVSxXQUFZUCxFQUFBalQsb0JBYXpCLENBSUYsR0FBQXZFLEVBQUNnWSxTQUFBQyxhQUFBLENBQUFDLEVBQUFDLFdBQUFuWSxFQUFBZ1ksU0FBQUMsZUMvaUJLN1osRUFBU2dhLFdBQVdGLEtBTXhCLE9BQUFsWSxFQUFBZ1ksU0FBbUIsU0FBQWhCLEtBR1osR0FBSyxHQUFHcEIsTUFFYixFQUNBb0IsRUFDQWhYLEVBQUt1QyxXQUFZNlUsR0FFakJBLEVBQ0FLLEVBRUFULEVBQUtXLGVBTUEsR0FBQSxHQUFRL0IsTUFFYixFQUNBb0IsRUFDQWhYLEVBQUt1QyxXQUFhMlUsR0FDbEJBLEVBQ0FPLE1BS0ssR0FBQSxHQUFRN0IsTUFHYixNQUVFclQsV0FBZTRVLEtBRWhCTyx5QkFTRSxTQUFVN1UsVUFDWEEsR0FBSyxLQUFRN0MsRUFBSytCLE9BQVVjLEVBQUFrVSxHQUFlQSxnQkFRM0NzQixFQUFPLFNBQUtqWCxFQUFXeVYsU0FDdEJBLEVBQUEsS0FFTUEsRUFBTyxPQUtQLElBQUN6UixFQUFBd1EsT0FFVDBDLEVBQUEsR0FFRDFDLGlCQU1HMEMsS0FPRCxFQUFJbFgsR0FBQyxHQUFPbVgsVUFJWixHQUFLLEdBQUFDLFFBUVA1QyxJQUFLaUIsRUFBQSxHQUFVNEIsUUFLYjVCLEVBQUksSUFBVyxhQUNmQSxFQUFNLEdBQUEsUUFBbUJ4WSxPQUFPZ1osRUFBU3pVLFVBQUF2RSxLQUFBaUQsa0JBQ3hDakQsUUFPRHdZLEVBQUksR0FBSyxRQUFlelIsRUFBQXNULHFCQUlsQnJCLDZDQVlEc0IsZ0NBV0hsVyxNQUFBckIsS0FDRDFDLEVBQUFTLEtBQUFtQyxlQUVBMFcsOENBTUU1VyxHQUFBL0MsT0FDRytDLEdBQVNFLFVBQUtaLE9BQWMsRUFBQWhDLEVBQVVTLEtBQUttQyxXQUFjNEMsUUFDL0QwVSxFQUFXLGVBQ0hDLEVBQWNDLGlCQVFuQkgsRUFBYUksRUFBS2hJLEtBQUFpSSxFQUFhNVgsSUFBSytVLFFBQUE0QyxFQUFBMUMsZ0JBSXRDTSxVQUFBLHFFQVNLLEdBQ05tQyxFQUFvQjFYLEdBQUE0WCxFQUFTNVgsR0FBWTJYLEVBQUExQyxvQ0FXbEMsb0VBRUw0QyxjQUFVLFNBQUFoTSxFQUFBaU0sUUFLWkMsU0FBSS9hLEVBQWUrYSxRQUFBQyxNQUFBbk0sR0FBQW9NLEVBQUE1UixLQUFBd0YsRUFBQWhMLE1BQUEsV0FDakJtWCxLQUFNLDhCQUFxQm5NLEVBQUFxTSxRQUFBck0sRUFBQWlNLE1BQUFBLHNCQU16QixTQUFBak0sZ0JBQ0EsOEJBU0MrSyxzQkFFRixTQUFBL1gsME5BaURIMlgsWUFBSTVaLEdBQWdCZ0MsOERBU0gsbUJBQW1CdVoseUJBQ25DLE9BQUFBLCtHQVlLdlosRUFBVXdGLHdGQWlCbkIsU0FBQTdFLEVBQUFWLEVBQUF1SSxFQUFBdEUsRUFBQXNWLEVBQUFDLEVBQUFDLE9BRUR0WSxFQUFBLElBQUFULEVBQUFELDJCQUlNOEgsS0FBWSxTQUFDLEdBQ2QsY0FDREEsRUFBSyxLQUVBdkksRUFBS21CLEVBQUNvSCxFQUFBcEgsR0FBQSxLQUFrQnFZLEVBQUlDLGdCQUd4QjlXLFVBQUEsY0FHUkwsV0FBQTJCLEdBQUEsYUFJRyxNQUdKLFFBQ0d2RCxFQUFPdUQsY0FJVixPQUVELFNBQUsvQyxFQUFVcUgsRUFBQXRFLFVBQ2R5VixFQUFJeGEsS0FBQ2EsRUFBUW1CLEdBQWErQyxVQU14QixNQUVKOUMsRUFBS0ssRUFBQUwsSUFBYSxLQUVmQSxHQUFNb0gsRUFBQWtSLFdBR0gvWSxFQUFDUyxHQUFRQSxFQUFBbkIsRUFBQVUsRUFBYVMsR0FBU29ILFlBT2pDLGVBS0YsZUFDRTdILGNBR0FBLEVBQUssR0FBUzZILEdBQUtpUixTQUV0QixTQUFBRyxVQVdEQSxFQUFNblQsV0FBVSxHQUFBbVQsRUFBQW5ULFdBQUEsS0FBQW1ULEVBQUFuVCxtQkFHMENvVCxpQkFDdEQ3WixFQUFNK0UsUUFBVThVLEVBQUFDLFlBRXBCLHFCQUtBLFNBQU1GLFdBR0d2YixLQUFDMEcsZUFFSCxTQU9QZ1YsRUFBV0gsR0FBVyxJQUl2QkEsRUFBQW5ULFNBQUEsQ0FFRG1ULEVBQUF2YixLQUFBMEcsU0FBQWIsNkJBT2tCMFYsRUFBQ3ZiLEtBQUEwRyxlQUNkYixlQUNGLGdCQU9EQSx1REFRQThWLElBQWEsU0FBWSxHQUMxQmhhLEVBQUFpYSxVQUFBRCxJQUFBOVYsa0RBV0NxRSxnQkFFQ3FSLEVBQUFwUixVQUNGQSxJQUFBNUYsaUZBT0QsU0FBQWdYLEVBQUFwUixFQUFBdEUsVUFnQlN0QixXQUNSNEYsVUFBQUEsSUFBQSxVQUFBdEUsSUFBQXRCLFVBQUEsK0JBWUVnWCxFQUFBcFIsRUFBQXRFLGlGQVdNdEIsVUFBVyw2QkFRbEJILE1BQUtDLFFBQVE4RixHQUFPLDJCQU90QkEsRUFBQXhJLEVBQUFpYSxVQUFBelIsS0FJQ0EsS0FBQUQseUJBTUM3SCxhQUVBVSxJQUFLLFFBQ05tSCxFQUFBQyxFQUFBcEgsUUFNRG9ILElBQUE1RixXQUFBNUMsRUFBWWthLGNBQUMzUixHQUFBLHNEQVVicVIsRUFBQXZiLEtBQUEwRyxvQkFJRyxTQUFBNlUsU0FBTUEsRUFBQXZiLEtBQUEwRyxvQkFDRG5DLFlBQWE1QyxFQUFPa2EsY0FBUTNSLFdBSWhDLElBQUtzUixZQUVIQSxRQWNGLG9EQUdETSxFQUFBSCxNQUNGQSxJQUFBLE9BQUEsZ0JBS0RBLElBQUEsUUFBQSxRQUFBLGFBR08sT0FBTSw4RUFhWEEsYUFJSTdZLEVBQU1xSCxFQUFRd1IsMkJBSWI3WSxFQUFBc0YsV0FBQSxFQUFBLFdBQ0QrQixFQUFPaEYsUUFBSTRXLEVBQWlCLE9BQU16VixrQkFDbkNpRCxhQUFBM0YsYUFHRCtYLElBQU0sU0FBWSxTQUViQSxTQUNKdFQsTUFHSjJULElBQUFsWixFQUFBcUgsRUFBQXdSLDRCQU1EQSw2QkFHUTdZLFlBQ0ZtWixRQUFLblosSUFBUW9aLEVBQWFELFFBQUFuWixrQkFFMUJBLEVBQUFjLEVBQUErWCxtQkFDRTdZLEVBQVdjLEVBQUMrWCx3QkFHWDdZLEVBQUFjLFlBQ0pkLEVBQUFjLDhFQVlIdVksT0FBSXJaLEVBQVVjLGlDQUlQdUcsRUFBQXRFLFNBQ05qQyxFQUFBK1gsSUFDRjNiLEtBQUEsMENBTURBLEtBQUFxQyxPQUFBLEdBQ0UrWixFQUFVekYsSUFBSzdULE1BR2ZBLEVBQUlzRixXQUFjLElBQUk4VCxFQUFBdkYsSUFBQTdULEVBQUEsZ0JBQUEsS0FDakJULGFBQ0pVLElBQUEsWUFPRDBILEVBQWExSCxHQUFDYSxRQUNkQSxFQUFTcEQsUUFBQSxXQUFZLEVBQWUsMkJBR3BDNmIsRUFBSXZaLEVBQVdjLEVBQU8rWCxFQUFDL1gsWUFLbkJkLEVBQU0sZUFBYSxjQUl4QjZZLFlBTUR4UixJQUFBLFNBQVcsUUFDVG5LLEtBQVMyQyxLQUFHLGFBRVJxWixJQUFLaGMsS0FBQW1LLDJDQWFOdEUsSUFBQXRCLFVBQUEsNkNBWUt6QixFQUFTcUgsVUFDVDVGLFVBQU0sUUFDWm9YLGtHQWtCSSxTQUFXeFIsaUNBR1hnUyxPQUFPbmMsS0FBS21LLHdCQVFsQixTQUFJckgsRUFBUTJCLEVBQVFrWCxjQUlwQixJQUNEbFgsR0FBQSxNQUFBLFVBRUR5WCxFQUFBdkYsSUFBQTdULEVBQUEyQixRQUdJLFFBQ0tMLE1BQU1DLFFBQVVzWCxHQUFVLEdBQy9CTyxFQUFLSSxPQUFZeFosRUFBRzJCLEVBQUE5QyxFQUFBNGEsVUFBQVosUUFDckIsQ0FDRnhFLEVBQUE1VyxLQUFBb2IsV0FJQ3hFLGdCQUlDLFNBQUFyVSxFQUFBMkIsS0FDRkEsR0FBQSxXQUdPOUMsRUFBTXdWLE1BQUtyVSxFQUFXMkIsS0FDcEIwUyxFQUFBOVUsV0FDTitILFlBQ0tvUyxZQUFNMVosRUFBYzJCLGtCQUUxQmdZLFFBQUEzWixFQUFBMkIsV0FLRyxhQUFpQixLQUNuQjJGLGVBSUh4SSxFQUFBLFFBS1EsS0FBQSxXQUNBLHNEQVVUOGEsTUFBQXRDLHFCQUtJLFNBQVl0WCxFQUFBMkIsV0FDVixzQkFDQWtTLElBQU03VCxFQUFPcUgsSUFBRytSLEVBQWVJLE9BQUl4WixFQUFRcUgsV0FDM0NrTyxVQUFBLGVBQUFkLElBQUEsYUFDSDRFLE9BQUFyWixHQUFBMkIsRUFBQSxRQUFBMEYsZ0JBS0F6RyxjQUVELFNBQVFlLEVBQUlrWCxPQUNiZ0IsRUFBQSxnQ0FLRCw4RkFXSSxpQkFDRGhiLEVBQUF3VixNQUFBblgsS0FBQXlFLEVBQUFrWCwyREFPSGhhLEVBQUE4YSxRQUFBemMsS0FBQXlFLHlEQU9BZ1ksUUFBQXpjLEtBQUF5RSxpQkFHRixTQUFDQSxHQUFBLE9BQUF6RSxLQUFBbVgsTUFBQTFTLEdBQUEsa0JDLzBCRyxTQUFLQSxFQUFZRCxPQUNsQnlCLElBRUQsSUFDRXRFLEVBQUtnWSxhQUNOM1osMEVBU0t5RSxJQUFBLFNBQWlCLHNCQUlsQixXQUVGMUIsSUFBQSxHQUNGbVosRUFBQXZGLElBQUFqSixFQUFBM0ssR0FBQTBCLEVBQUEsaUJBQ0h3QixHQUFBQSxFQUFBeVcsTUFBQyxDQUFBRSwrQkN0QkdDLEVBQUtuRSxRQUFBbFUsYUFHTCxzQ0FBK0JzWSxjQUUxQixJQUFBMVYsT0FBQSxpQkFBMkIyVixHQUFBLGNBQUEsYUFJOUIsTUFBQSxRQUFBLFNBQUEsZUFFVSxTQUFlamEsRUFBQXlILG1EQVN6QnlTLFVBQUssTUFNTmhVLFNBQUFsRyxFQUFBMEksY0FBQTFJLFVBQ0NBLEVBQUssYUFBQSx1REFRSGEsRUFBYXdELE1BQ1hyRSxFQUFBbWEsTUFBZ0JyWixXQUVqQkEsR0FBQUQsRUFBQUMsT0FHQ1osTUFBQ0YsRUFBVW9ELGtCQUdSLFlBQ0xnWCxFQUFBdFosc0JBVUh1WixHQUFDcmEsRUFBQXNhLEVBQUFDLEVBQUFDLGVBSUssS0FDTEEsaURBTUlDLElBQU16YSxFQUFPc2EsRUFBQSxPQUdmSSxTQUNHSCxFQUFVLEtBQWdCMWIsRUFBRThiLFVBQUFMLEdBQUEsR0FBQSxTQUc1QnpiLEVBQVM4YixVQUFDTCxJQUFvQk0sSUFBQyxPQUFBQyxZQUNwQ2hjLEVBQUE0YixJQUFpQnphLEVBQUtzYSx5Q0FhZk8sR0FBQSxtQkFTRUMsWUFDSlIsRUFBQVMsRUFBQUgsY0FNVEUsRUFBQUosSUFBQUcsSUFBQUMsSUFBQSxLQUFBRSxRQUdLLElBQ0VELElBQXdCRixHQUFHLEVBRW5DSSxFQUFBVixFQUFBLG9CQy9HR0EsRUFBVyxHQUNmLEdBQU9DLEVBQUMsR0FDRkksS0FBSUEsSUFDTjVOLE1BQVMrTixRQUNQRSxxQ0FVUyxJQUFBaEssSUFDYmpSLEVBQUEwSSxnQkFDTzFJLEVBQUF1RyxXQUNEMlUsR0FBbUIzVSxRQUVsQixRQUNMMlQsSUFJQS9iLEVBQU1nZCxLQUFBM2MsWUFBa0JMLEVBQUFFLGNBQWNrSSxNQUN0QzFILEVBQUk0YixJQUFVeEosRUFBTyx3QkFFcEJ2UyxZQUFBdVMsK0JBTUgxSyxHQUFBMlQsU0FFQ0EsdUJBS0RBLEVBQUFsYSxhQUdHNEssRUFBQXJMLFlBRUFxVSxFQUFBclUsRUFBQXFVLElBQUEsR0FDRGhKLEVBQUtnSixPQUNONVQsRUFBQW1hLE1BQUEsWUFLRG5hLEVBQUFtYSxNQUFBRCxhQUFBLElBTUVBLElBQUssT0FBZ0IsbUNBR3JCa0IsRUFBUXhILEdBQUEsU0FDQXNHLFFBQVEsZUFJWkEsVUFBZSxJQUFJbUIsR0FBc0JyYixHQUFLLE1BQzlDc2IsR0FBc0J0YixnQkFHbkIsT0FBQSxNQUNKLFNBSUFrWixJQUFFbFosRUFBQSxVQUFBa2EsV0FNSCxFQUFLdEcsRUFBU3JVLEVBQUdxVSxJQUFRLFVBQ2xCLEtBQVEsR0FDZEEsR0FBRXVHLE1BQUFELFFBQUFrQixFQUFBeEgsb0RBVUcxVyxLQUFRLDhCQUdmcWUsR0FBQXJlLGNBR0QsU0FBTXNZLGFBRURBLElBQVUsVUFBWSxRQUMzQkEsRUFBS3RZLEtBQVVzZSxPQUFPdGUsS0FBS3VlLG1CQUl6QjViLEtBQUssaUJBQ04zQyxNQUFBLEdBRUdBLE1BQUNzZSxXQUVMLEdBQ0R0ZSxNQUFBdWUsb0JBTUEsNEJBQ0ZDLEdBQUEsaUNDekhELElBQU1DLEdBQUEsNENBVUosRUFBQSwrQkFBQSxvQkFJRyxFQUFBLFVBQUEsaUJBRUQsRUFBQSxvQkFBbUIsOENBQ1gsK0NBQ0EsbUNBR04sRUFBTSxHQUFBLGlCQU1KQyxHQUFLQyxnQkFHUEQsR0FBS0UsTUFBYUYsR0FBQUcsU0FBYUgsR0FBYUksUUFBSUosR0FBV0ssZUFDckRDLFlBR1RDLEdBQUF2ZCxFQUFBZ0wsT0FLSGpLLGtEQ3RDZUEsRUFBQWYsRUFBQXVILHFCQUFBeUQsR0FBQSxVQUNiLFVBQUFoTCxFQWdCQ21JLG1CQUFBLFlBQUEsR0FmQ25JLEVBQUttSSxpQkFBa0I2QyxHQUFBLFNBR3ZCLGFBS0tuSSxXQUFhNEMsR0FBRWtDLEVBQWMzSCxFQUFBZ0wsR0FBQSxRQUVsQy9LLEVBQUtZLE9BQVdiLEdBQUFlLHFCQVNoQnljLEdBQWM1YyxFQUFJNmMsU0FDbEIsTUFDRTljLFlBRUhVLEVBQUEwVCxFQUFBMVQsSUFBQSwwQkFLRG9jLEdBQUFqRCxFQUFBdkYsSUFBTXdJLEVBQU5wYyxHQUFBLHVCQU1HLHdCQUNhVCxFQUFLWixFQUFVMGQsRUFBS0MsRUFBVUMsV0FDdEM1UyxFQUFDNlMsRUFBU3ZXLEVBQVUzRixJQUN4QjNCLEVBQUs4ZCxvQ0FJUmxkLEVBQUFELFlBR0NVLEVBQUEwVCxFQUFPMVQsSUFBSyxHQUNiVCxFQUFBUyxHQUNGLEdBQUFELEdBQUFBLElBQUEsRUFBQSxJQzlDQ25CLEVBQUE4QyxLQUFZM0IsS0FBTyxTQUFBLEdBR2pCUCxNQUFLa2QsRUFBWTNjLEVBQUdzRixVQUFRdEYsR0FBV0EsUUFJdkMsSUFBSzRjLEdBQVN0VyxLQUFBdEcsR0FBQSxRQUNacEIsRUFBQWllLGVBQXdCN2MsY0FJdkI4YyxFQUFBdGUsWUFBQUksRUFBQVAsY0FBQSxjQUdBd0gsS0FBQTdGLEtBQUEsR0FBQSxLQUFBLEdBQUF3RCxtQkFDRG9HLElBQUFnUyxHQUFzQm1CLHFCQUNwQk4sRUFBUyxHQUFHNWQsRUFBQW1lLGNBQUFoZCxHQUFBeWMsRUFBQSxvQkFJYixHQUNEdFosRUFBQWtLLGtCQUtBc1AsRUFBQXhaLEVBQUFrQyxnQkFHQW9HLHlCQUdBLE9BTUFELFlBQVUsZUFJUm1SLEVBQU0xYyxLQUFBLE9BSUFwQixFQUFBb2UsUUFBV2pkLEVBQU91YyxJQUFVLEVBQUEsTUFDbEMsUUFFQXZjLGdCQU1Fa0csU0FBS2xHLEVBQU8wSSxjQUFZMUksVUFJcEJ4QixZQUFhd0IsR0FBQSwyQkFTbEIsV0FFRkEsRUFBQW1ELEVBQUE1QyxLQUFBLDJCQUdFOUMsS0FBQXVDLGFBT0w4YyxvQkFNQ2pnQixFQUFBNmYsMkJBRURJLEVBQU10ZSxZQUFjM0IsRUFBYXdCLGNBQUMsVUFDbEN4QixFQUFNd0IsY0FBa0Isd0JBUWhCLE9BQUUsd0JBQ0QsVUFBUywwQkFDZCxPQUFBLG1CQUdJNlAsZ0JBS0lnUCxFQUFJQyxVQUFDLE1BQUFBLFVBQUEsTUFBQTlQLFVBQUFzQixvQkFJYiw0Q0FDUXVPLEVBQUFDLFVBQVcsTUFBQTlQLFVBQUFxRix3QkFHZjdWLEVBQWU0TCx1QkFNdEIsVUFBTSxvREFDQSwrQkFHUDJVLFlBQ0QseUNBVUFDLFNBQ0YsT0FBQXhnQixFQUFBeVIseUJDdkljLFNBQUFnUCxHQUFBdGQsRUFBQXVkLEVBQUE1ZSxFQUFBa2EsRUFBQS9aLEVBQUEwZSxPQUNiQyxFQUFBOWIsWUFFTzRiLElBQVMsU0FBQSxlQUdILFNBQVksTUFHckI1ZSx1QkFHQTRlLEVBQUEsSUFDSHZkLEVBQUEyQixFQUFBaEQsRUFBQWthLEVBQUEwRSxFQUFBNWIsR0FBQTZiLFVBR0N4ZCxRQUlLLE1BQUFsQixHQUFhLEtBQVEsU0FLakIyQyxrQkFDUjNDLEdBQUEsS0FBQSxXQUVLSCxJQUFlLFNBQUEsNEJBV3RCQSxJQUVEOEMsa0JBR0ksTUFBSyxXQUVSLElBQUEzQyxFQUFBLFFBRURrQixTQUdHLEVBQUEsR0FDRmxCLElBQ0gsU0FBQTRlLEdDMURBN2UsSUFBQThlLElBQUFELDBDQUlFRCxFQUFBeGEsT0FPQ3dhLEVBQUF4YSxLQUFBcEUsRUFBQW9FLGVBTENqRCxFQUFLSCxLQUFNLG1CQUNUNFUsSUFBQXZYLEtBQUFxZ0IsRUFBcUJ6ZSxFQUFBK1osRUFBQWxhLE9BUzNCK2UscUJDaEJFLFNBQUExZCxFQUFBdWQsRUFBWTNWLEVBQU9pUixFQUFBbGEsU0FDWmlmLEVBQWtCemEsSUFFdkIwYSxFQUFLQyxJQUNEQyxFQUFRcGMsRUFBR3FjLEVBQWdCQyxJQUMxQjdFLEVBQVN2RixJQUFBN1QsU0FHWCxXQUtKNEgsRUFBQUEsUUFBQSxHQUVEQSxJQUNFc1csRUFBY3RXLFVBQ2ZzVyxFQUFBdmYsY0FLUSxHQUNMK0ssS0FBS08sZ0JBQWN4QixHQUFhOUosT0FNbENpSixFQUFLM0UsS0FBQSxHQUNOQSxLQUFBcEUsRUFBQW9FLFlBS0FrYixFQUFBQyxFQUFBRCxRQUFBLEdBQ0hDLEVBQUFELDRCQ2pDZVAsRUFBQVEsRUFBQUMsT0FBQSxTQUFBOVksaUJBSU4xRyxJQUFXLGFBQW1CQSxFQUFRNmUsTUFBQVksWUFBQS9ZLEVBQUE1RCxPQUN2QytiLE1BQUNhLFNBQVVyZSxNQUFRRixFQUFRRyxXQUFBc0IsY0FRM0I4YixHQUFRLElBQUc1WCxNQUFLc08sS0FBZSxRQUMvQjFVLGlCQUNGLEdBQ0RpZixHQUFBM1ksS0FBQTBYLEVBQUFNLFVBRURJLEVBQWE5YSxFQUFFLE1BQ2JBLEVBQVcsSUFBQSxJQUFTMEUsTUFBUSxLQUFPbkgsYUFJbEMsWUFPTDdCLEVBQUE2ZSxNQUFBdkgsUUFBQXhVLFVBR0doRCxFQUFBd1gsRUFBQXNJLGFBQUF0SSxFQUFBdUksV0FBQS9jLElBR0Y5QyxFQUFBNmUsTUFBQXZILFFBQUF4VSxTQUlNOUMsRUFBQStCLGFBQ0xlLFdBQ0tzYyxPQUNMcEYsVUFDRGpSLEVBRUQzRSxLQUFBMkUsRUFBQTNFLGNBQ0V0RSxlQUNEQSxHQUFBRSxFQUFBOEwsS0FBQWhGLE1BQUFtTixhQUFBeE0sS0FBQTNILEdBRURnZ0IsVUFBQVgsRUFBQWxYLEtBQUEsY0FJR2lYLEVBQUFJLEVBQUF4YyxJQUFBLEdBRU13YyxFQUFLeGMsUUFDYmlkLGNBQUEsTUFJQ3pJLEVBQU8wSSxTQUVQQSxNQUFTN2dCLEtBQUlnQyxFQUFPNlksRUFBU21GLEVBQUNKLEtBQTJCLE1BQVEsQ0FHbkUsR0FBQTVkLEVBQUE4ZSxpQkFBQSxHQUFBQSxpQkFtY0NuZCxFQUFBaWMsY0E5Yk8sWUFHQTVkLEVBQU84ZCxpQkFFTDdhLEtBQVEsV0FDVEEsS0FBQTJFLEVBQUEzRSx1QkFNSzJiLGdCQUFnQixFQUFBZCxpQ0FPcEJuYyxHQUFNLGNBT2IsU0FBRTNCLEVBQUF1ZCxFQUFBM1YsRUFBQWpKLEVBQUFvZ0IsV0FHUzViLE1BRVYyYSxNQUNFbmMsRUFBV3FjLEVBQVFDLE1BQ2pCOUUsUUFBV25aLElBQUFvWixFQUFvQnZGLElBQUk3VCxZQUVuQ21lLEVBQVNDLEVBQUtELFFBQWEscUNBUGpDNWUsb0JBV0NpZixHQUFBM1ksS0FBQTBYLEVBQUFNLFVBRURJLEVBQWE5YSxFQUFLLE1BQ2hCQSxFQUFPLElBQUssSUFBTzBFLE1BQUEsS0FBQW5ILGFBR2pCLFVBQ0F5ZCxFQUFPLFNBQ045RSxPQUFTclosRUFBQTJCLEVBQUE0YixFQUFBTSxHQUFBalcsRUFBQWpKLEVBQUEsbUJBTVYrZSxNQUFVdkgsUUFBUXhVLFlBQ1h3VSxFQUFPc0ksYUFBVXRJLEVBQVN1SSxXQUFLL2MsTUFDakNBLFdBQ0wsZUFDRCxVQUFBcWMsRUFBQWxYLEtBQUEsaUJBQUEsZUFJQ2lYLEVBQVd4ZSxpQkFDWCxHQUNBd2UsRUFBU3hkLFVBRUMwZCxJQUFBSCxFQUFBRyxnQkFDWHJXLEVBQUEzRSxPQUFBNmEsRUFBQTdhLFNBRUhFLEdBQUtBLEVBQUFtRCxLQUFZd1gsRUFBQ2Esa0JBQ1RoZ0IsSUFBWW1mLEVBQUFuZixjQUNqQixNQUFVbWYsRUFBUW5mLFVBQVUsVUFDNUI0QixFQUFTLFFBRVI1QixTQUFTLEdBQ1hpZ0IscUJBR0R2RixPQUFZLFVBQ1ZyYixLQUFXZ0MsRUFBQThkLFlBUU5DLEVBQVd4ZSxPQUFDLE9BQ2pCeWYscUJBQ0FoaEIsS0FBVWdDLEVBQU9nZSxFQUFXSSxFQUFRQyxVQUFNLE1BQVksZUFFL0NyZSxFQUFLMkIsRUFBUXljLEVBQUFDLGVBSXhCRixFQUFLeGMsdUJBS1d3YyxHQUFRLFVBQ25CbmUsRUFBUyxnREFTTjBkLE1BQUt1QixJQUFBQyxlQUVMcEIsRUFBWXFCLGNBQ2JoZixVQUFBWixhQUNGc1UsSUFBQTNXLEtBQUEsZUFBQXdnQixFQUFBL2IsWUFDRjlDLEVBQUU2ZSxNQUFBdkgsUUFBQXVILEVBQUEvYixxQ0FRVXBDLE9BQUtVLElBQUssZ0JBQ2JBLG9CQUdOL0MsdUJBR0FpWixFQUFnQmlKLFlBQWFwaEIsS0FBTWQsS0FBQXdnQixLQUFTLE1BQUEsWUFLNUNBLE1BQU9LLFNBQUsvZixLQUFRZCxLQUFBd2dCLEVBQUFLLGNBS3RCalEsRUFBU3FSLEVBQUtsZixRQUFtQnlkLEVBQUEyQix1QkFBQSxpQkFDdkJ2UixFQUFHOU4sa0JBR1g4TixFQUFVaVEsU0FBUXhkLDBDQUNNLG1CQUl4Qm1kLEVBQUE0QixXQUFBaFosS0FBQXdYLEVBQUFhLFdBQUEsYUFFQWIsV0FDQWpGLFdBRUE2RSxNQUFPdkgsUUFBSzJILEVBQVFHLGVBQUFJLG1CQUNwQm5lLE1BQUE0TixFQUFBOU4sS0FBQW9ELE1BRUp6RCxJQUFDOEIsVUFBQSxLQUVFaWMsRUFBQWxSLE9BQWE3TSxLQUFBLE1BQWdCLEdBQ2hDNGYsMkRBU1EsMEJBQ0U3Qix3Q0FNRkssZUFDYXlCLFdBRWZaLCtEQWVFbEIsRUFBUytCLFFBQU8sR0FBQSxpQkFFaEIxWCxFQUFBdEosWUFBVXZCLEtBQUEsc0JBSVZ3Z0IsRUFBQS9iLE9BQUEsU0FBQW9HLEVBQW9DSSxXQUFZLE1BQU8sdUJBR2xEbEksSUFBSyxLQUNWQSxnQkFHQSxTQUVGa0wsS0FBVTFKLFVBQUMsTUFDVHFjLEVBQWVoTCw2QkFDYi9LLElBQWEsZ0JBQ2IsTUFBUUEsSUFBT3hJLGVBRWIsd0JBSUQsU0FDSlMsS0FBQStILEVBQUFnVyxTQUFBMkIscUJBU0duZ0IsT0FBTSxnQkFFTndlLFNBQVdBLEVBQVd4Z0IsTUFBQ3FoQixnQ0FNOUI5ZCxFQUFBNmUseUJBQ1M5Z0IsRUFBQStnQixNQUFBeGdCLFVBQUEwQixjQUNYLGtCQUVFLHNCQUVTNmUsb0NBRUUsUUFDWkEsRUFBQ3ppQixLQUFTMmlCLGtEQUtJLGFBQ2RBLGNBQWMvZSxTQUtsQixTQUFNaUMseUJBQ1c3RixLQUFHNEQsY0FDbEIsa0JBQ08sY0FDTixXQUVHaUMscUJBT0o4YyxZQUNTaGhCLEVBQVUrRSxpQkFFbEJnYyxNQUFBQyw0QkFTRCxxQkFNQSxxQkFDQXhDLE1BQTZCbmdCLEtBQUE0aUIsTUFBYSxxQkFFekMscUJBSUUseUJBR0QsY0FFSjVpQixPQUFLbWdCLE1BQWFuZ0IsS0FBb0I2aUIsS0FBQSw4RkFXaEMsWUFBUTdpQixLQUFZOGlCLE9BQUF6WixFQUFBckosS0FBQSxTQUFBLCtDQU9sQndnQixZQUNGQSxFQUFBdmMsT0FBQSxrQ0FNRixTQUFLdWMsaUJBSUdqYyxXQUFBaWMsRUFBQW1DLGNBQUEsaUJBQ0pJLFlBQVF2QyxFQUFVbFIsMEJBT3BCLFNBQU94TSxFQUFLMkIsRUFBUTBjLFFBR3ZCNkIsb0JBQUEsdUJBRWV2ZSxFQUFBMGMsc0JBSVp0ZCxFQUFVb2Ysd0JBR1J0aEIsRUFBUStnQixPQUFVLG9CQUNuQjdlLEVBQUFvZixnQkFJRCwrREFNRXBmLEVBQUFxZix1Q0FDTzNlLDJCQUdILHdCQU9QVixFQUFBSSxRQUFBSixFQUFBSSxPQUFBbUUsV0FBQSxXQUNEN0csdUNBSUtzQyxFQUFLc2YsaUNBQ1Z0ZixFQUFVdWYsNkJBSVh2ZixpQkFNQzdELEtBQU9pakIsa0JBS1RwZixHQUFZQSxFQUFBd2YsV0FBTzFoQixFQUFBd0Usc0JBR1YsdUNBT1B1Yyx5QkFDS1ksd0JBQ0lBLGlDQUNWQSxlQUVFLHFCQUVELDREQUdXcEQsVUFFWmxnQixLQUFBdWpCLFlBQUEsc0NBS0MsOERBR1VyRCxVQUdUbGdCLEtBQUF1akIsWUFBYSxnREFJUCxzQkFDTlosaURBRzBCekMsZUFFM0JxRCxZQUFlLG1GQVlqQixnQkFDSCw4R0FTRCxrQ0FFRSx5RUFNRSxhQUNGLDBGQU1HLGVBQ0MsaUNBR0EvQyxXQUNLK0IsaURBS1QvQixFQUFLZ0QsVUFBYSxLQUFBaEQsRUFBQWdELFNBQW9CaEQsRUFBQWlELHFCQUkzQmxCLElBQUtoZSxXQUFRbWYsR0FBb0J0YSxLQUFBb1gsRUFBQS9iLE1BQWtCLE1BQ3pELEVBQU0sUUFDUixPQUlDLEVBQUEsZUFJRCxFQUFBLFFBRUgsa0JBTUMrYixFQUFFbUQsVUFHSG5ELE1BQUtvRCw0QkFXSCxpR0FJQ0MsRUFBRTlCLFdBQ0Y5SSxRQUFBNEssaUJBRUU5QixXQUNIQSxrQkFFRXZCLFdBRUR4Z0IsT0FDQXdnQixFQUFBNEMsZ0JBQ0o1QyxFQUFBSSw4RkFRREosRUFBQS9iLEtBQUFzZCxTQUNFdGYsK0JBT0c0ZCxFQUFBNWUsRUFBQWthLEVBQUEvWixVQUNId2UsR0FBS3BnQixLQUFBcWdCLEVBQWE1ZSxFQUFBa2EsRUFBQS9aLGlCQUVkeWUsRUFBQTVlLEVBQVdrYSxFQUFRL1osa0JBQ25CeWUsRUFBVTVlLEVBQVFrYSxFQUFLL1osRUFBSyxpQkFFNUJ5ZSxFQUFPNWUsRUFBS0csU0FDWDZDLFFBQ0Y0YixFQUFBZ0MsZ0JBQUFoQyxFQUFBTyxVQUFBLEtBR0NBLGNBQ0FrRCxnQkFBaUJyRCwyQkFFVixJQUFLRyxFQUFRYSxZQUNuQlYsV0FDRnRmLFdBQ0VpSixtQ0FJTSxTQUFXLEtBR3JCakcsS0FBRTRiLEVBQUEsTUFDSEksSUFBS2hjLEVBQU9oRCxFQUFNNGUsRUFBQTViLHVCQUlkLGNBQW1CaEQsSUFBWSxXQUFBLE9BSTlCOEMsdUJBRUQsdUJBR0EsbUJBQ0M0WCxPQUFTbmMsS0FBQXFnQixFQUFBemUsRUFBQUgsZUFZaEIsaUdBUU8sa0VBS0MscUVBSUxzaUIsR0FBQWpoQixFQUFBK1QsTUFDRnhOLEVBQUF2RyxFQUFBLG9GQU1DQSxjQUtXQSxXQUNSQSxFQUFBeUcsYUFBQSxVQUFBLE1BQUEsSUFBQXpHLEVBQUEyQiwwQkFHQTNCLFNBQ0RraEIsR0FBQXJiLEtBQXVCN0YsRUFBQTJCLFdBRXRCLFFBQ0RnRSxFQUFBLDBCQUVDLDZCQU1BNUUsRUFBQW9nQixXQUNBeGYsRUFBQXlmLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFwRCxrQkFHSyxFQUFZLGFBS2xCaEYsUUFBTXBZLEdBQVcsR0FFakJxWSxFQUFVSSxPQUFDelksT0FDSG1ZLElBQUtpSSxFQUFLQyxtQkFHaEIsVUFDQy9DLFNBQ0hGLGNBR0Z4YyxLQUFJd2MsRUFBVSxPQUNaLEVBQU14SyxFQUFBd0ssRUFBV3hjLEdBQUFwQyxPQUFVVSxFQUFBMFQsRUFBWTFULElBQUMsR0FDeEN5ZCxNQUFNakosSUFBSzBNLEVBQUF4ZixFQUFBd2MsRUFBQXhjLEdBQTRCMUIsWUFPeENrWixRQUFBcFksR0FBQSxHQUVHdVksRUFBVUUsT0FBQXpZLEtBQ1psQyxFQUFNK0IsVUFBYTBnQix3QkFPdEJFLEdBQUF6Z0IsRUFBQW9nQixPQUVENWEsRUFBQTRhLEVBQUE1YSxTQUFBL0MscUJBRVMsU0FBR2llLEdBQWdCbmIsS0FBV3ZGLEVBQUtZLE1BQVcsV0FDbERaLEVBQUE0TixhQUlILEdBQU1wSSxJQUFjLFNBQUNBLElBQUEsV0FBQSxnQkFDTGxDLEVBQUVxTyx1QkFJbEJnUCxHQUFNQyxFQUFpQnZlLEVBQVF4RCxFQUFLNGMsS0FJcENoZixFQUFJMEMsU0FBYWtELFNBRWZoRCxFQUFTa2MsRUFBR3NGLEVBQUFoWixFQUFBekssVUFFVG9CLFNBQ0ZvVSxFQUFDLElBQ0h2USxFQUFBLEtBQU12RSxFQUFBdUMsV0FBQTJCLHFCQUlIQSxJQUFBLGFBQ0g4ZSxZQUFBQyxHQUFBeGIsS0FBQXZELEdBQUEsUUFFRDRlLEVBQVk5aEIsS0FBQSxTQUFBK1QsU0FDVCtOLEVBQVl0aEIsR0FBQXVULFFBQ0wsR0FDUixHQUFBN1EsRUFBQS9FLEtBQUFkLEtBQUEwVyxFQUFBVixFQUFBNk8sV0FHRjdPLEVBQVM5UCxFQUFLeEQsRUFBYTRjLFVBTTNCLEdBQ0V3RixHQUFlNWUsRUFBTXVlLEVBQWEsR0FBSWpaLGNBQVcsTUFBQWlaLEVBQUFuRixLQUNsRE0sRUFBQXJSLGNBR0ZxUixFQUFBelgsV0FBQTlGLFNBQUEsRUFBQSxHQUNIYSxLQ3B5QkVBLEdBQUFvYyxFQUFZLEdBQ0wzZCxFQUFPa0IsSUFBR29jLEdBQVFXLEVBQUEsVUFBQW1GLE1BRWxCM0YsRUFBVWpZLFlBTWZwRSxFQUFLMFQsRUFBQTFULElBQVcsR0FDaEI2YyxLQUdEN2MsSUFBQWlpQixFQUFBLENBRUR0WixFQUFBL0osRUFBQXFDLE1BQUEwSCxFQUFBLEtBQWdCLE1BSWhCLEdBQUFnWixFQUFBLEdBSUluaUIsTUFBSzZjLEVBQVNILEdBQU92VCxFQUFBLGNBR3RCNUssS0FBQTJqQixFQUFBMWhCLEdBQUEySSxFQUFBM0ksUUFJQSxHQUVEcWMsRUFBS0EsRUFBQS9jLE9BQXVCLEdBQUFtSixnQkFJekIzSSxJQUFBdWMsRUFBQTZGLFVBSUQsRUFBS2xpQixFQUFBMmhCLEVBQVczaEIsSUFBQSxHQUNqQnFjLEVBQUFyYyxHQUNGLEdBQUEwYixHQUFBclYsS0FBQXNDLEVBQUFqSCxNQUFBLE1BRUR5WCxFQUFBSSxPQUFBNVEsRUFBTyxpQkFDQTFDLFNBQVMvSCxFQUFBeUssR0FBVyxNQUduQjdILElBQUMsQ0FJVCxHQUFBbEMsRUFBQXVqQixTQUFBLENBQ0V2akIsRUFBSXVqQixTQUFheFosRUFBQTdILFVBRWhCLEdBRUs2SCxFQUFBNEMsWUFBa0JuSixRQUFLZ2dCLEdBQWdCLElBQUFsa0IsZUFVN0N3akIsV0FHQ3RJLEdBQUFyWixFQUFBckIsRUFBQTJqQixXQUdEM2pCLEVBQU1FLEVBQWVzUixPQUFReFIsRUFBUXFCLEdBQVlBLFlBR2pENEksRUFBTStULEVBQUExYyxLQUFzQixLQUFHQSxJQUFBLEtBRS9CcWlCLEdBQUsxWixFQUFBdEQsV0FBZ0IsRUFBQSxhQUNkNlcsR0FBWXZULG9CQUdSLE9BQ04vSixFQUFBcUgsU0FBQTBDLEVBQUFGLGNBQUFFLEdBQUEsSUFDSnVULEdBQUF2VCxFQUFBLHdCQUNNbEssWUFBYWtLLGVBUXRCaEksc0JBQ00sU0FBY21oQixZQUNoQjFmLFFBQUtrZ0IsR0FBUyw2QkFFVnZpQixFQUFLd2lCLEVBQVFDLGFBQ1ZDLE1BQ052RixVQUFBLFFBQ0Z0ZSxFQUFBcUgsU0FBQWxHLEVBQUEwSSxjQUFBMUksT0FJRHVELEVBQVFvZixpQkFBb0IzaUIsRUFBQ3NGLFdBQWMsR0FBQXRGLEVBQUFzRixXQUFvQixRQUUzRHNkLFNBQUM1aUIsR0FBZ0IsR0FJYm1jLEdBQUFqYixLQUNKaWIsR0FBWW5jLE9BRWZDLEVBQUEsRUFBQTBULEVBQUFrUCxFQUFBdGpCLE9BQUFVLEVBQUEwVCxFQUFBMVQsSUFBQSxJQUFNNGlCLEVBQUE1aUIsR0FBQXlpQixFQUFBemlCLFVBTVEsSUFDZndpQixFQUFLLEdBQ0NJLEdBQVkxRyxHQUFBbmMsS0FDakIwaUIsR0FBQXZHLEdBQUFqYixPQUVGakIsRUFBQSxFQUFBMFQsRUFBQWtQLEVBQUF0akIsT0FBQVUsRUFBQTBULEVBQUExVCxJQUFBLENBRUQ2aUIsR0FBQUQsRUFBVTVpQixHQUFWeWlCLEVBQVd6aUIsU0FFVCxJQUNTRCxFQUFLa0IsSUFJakJ3aEIsRUFBQXZHLEdBQUFqYixFQUFBLHlCQ25JY2tiLEdBQUFzRyxHQUFBSyxHQUFBNUcsR0FBQW5jLEVBQUEsa0JBS1hrQixhQUdJLFNBQVExQixTQUVaUSxFQUFRMkIsSUFDVDlDLEVBQUE2ZSxNQUFBdkgsVUFFRCxRQUdRblcsRUFBT1IsRUFBQVMsTUFBQXdCLFVBQUF4QixJQUFBLE1BQ1hELEdBQUEsTUFDQUEsRUFBQW9aLEVBQUF4VixTQUFBLE1BQ0F1YSxPQUFBLEtBQ0F4YyxLQUFRa1gsRUFBQXNGLE9BQUEsSUFDUmhJLEVBQUF4VSxHQUFBLEdBQ0ErYixNQUFBckUsT0FBQXJaLEVBQUEyQixPQUdDLGVBQ0szQixFQUFVMkIsRUFBT2tYLEVBQUt3RixZQVE5QmpGLEVBQU14VixTQUFjbkMsYUFHcEJ6QixFQUFLc1osRUFBVTFWLFNBQVEsS0FJZkEsU0FBSW5DLGtCQVFiM0MsR0FBQThCLGVBRUQsU0FBQWpDLFVBQ0UwYSxHQUFTbmMsS0FBQ3lCLEVBQVksdUJBR2xCQSxhQUNEekIsS0FBQXlCLG9FQU9MRSxFQUFBUCxLQUFBcEIsV0FDRTBjLFFBQVEvWixLQUFBLFdBQ1QsR0FBQTNDLEtBQUFvSSxXQUFBLEdBQUFwSSxLQUFBb0ksV0FBQSxJQUFBcEksS0FBQW9JLFdBQUEsRUFBQSx5REFRRCxrQkFBQW9jLEdBQUF4a0IsS0FnRkNpRCxVQUFBLFNBQUFILE1BL0VDOUMsS0FBQW9JLFdBQVMsR0FBU3BJLEtBQUFvSSxXQUFTLElBQUFwSSxLQUFBb0ksV0FBQSxFQUFBLE9BQ25CMmIsR0FBaUIvakIsS0FBUThDLGlCQUNqQkEsb0NBUVo5QyxLQUFLaUQsVUFBYyxTQUFBSCxzQkFDakIsR0FBUzlDLEtBQU1vSSxXQUFjLElBQUFwSSxLQUFBb0ksV0FBQSxFQUFBLE9BQzlCMmIsR0FBQS9qQixLQUFBOEMsa0JBRVFBLEVBQUttQixFQUFRc0ssNENBT3BCdk8sS0FBQWlELFVBQUEsU0FBQUgsc0JBRVEsaUJBQ1JnakIsYUFBV2hqQixFQUFBOUMsMENBT05pRCxVQUFTLFNBQU1ILHNCQUNsQiw4QkFDREEsRUFBQTlDLEtBQUF3TyxvREFZSHhPLEtBQUsrQyxLQUFZLEtBQUNBLElBQVUsaUJBQ3ZCLEVBQUEsYUFLTGtjLEdBQUFuYyxFQUFpQixzQkFLZixnQ0FPQXdpQixFQUFDQyxLQUNGRCxHQUFBLEtBQUEsTUFBQUEsSUFFS0MsR0FBb0IsS0FBT0QsRUFBRUMsa0JBRW5DLG9CQUNBdmhCLE1BQVFoRSxLQUFLc2xCLEVBQUFDLG9CQUtaMWYsWUFDQTdGLEtBQUEsU0FBQTZGLFNBRUg3RixLQUFPLGFBRVZBLEtBQUFxQyxzRUFRTXdELElBQVEsV0FBT2tnQixHQUFvQjNjLEtBQUF2RCxTQUNuQzJZLEdBQUE3VixLQUFlOUMsS0FBZSxHQUFBLEtBQUMsR0FBQVMsZUFBUSxHQUUxQzNFLEVBQUttZSxjQUFlamEsWUFHbkI5QyxFQUFBMFQsRUFBQTFULElBQUEsQ0FDSkQsRUFBQTlDLEtBQUErQywwQkN4S1lwQixFQUFBcWtCLFVBQUEvRyxHQUFBbmMsRUFBQSxRQUNiQSxFQUFBK0osVUFBQWhILEtBSU0sZ0NBT0RvZ0IsT0FBQXBnQixLQUVKLEtBQUFBLEVBQUE1QyxVQUFBWixxQkFJQSxlQUVEaWQsZUFHSXRmLEtBQVVpRCxVQUFDLFNBQUtILFNBQ2Q5QyxLQUFNdUIsZ0JBRVB3ZSxRQUFBL2YsS0FBQXNmLEdBQUEsRUFBQSxHQUNBMEcsVUFBUy9HLEdBQVNqZixVQUNyQmtRLEVBQU0sR0FFRmdXLGFBQVNwakIsRUFBTzlDLFNBT3RCc2YsdUJBS0csbUJBRUssdUJBQ0MscUJBQ0wsbUJBQ0Esd0JBQ0ExYixFQUFLdWlCLFFBRUx2aUIsR0FBUyxTQUFPbkMsa0JBR1ZBLE9BQ0pZLE9BQVMsY0FFTm9OLEVBQUExTSxJQUFBLE9BQ0EwTSxFQUFPelAsS0FBQUEsS0FBQWdFLE1BQUEsUUFDYm9pQixFQUFBcmpCLElBQUFvakIsR0FBQTdqQixLQUtGVSxNQUFBUCxFQUFBSCxFQUFBcVUsMENDN0RNLGlCQUVBLElBQUt2UCxPQUFLLEtBQVMyVixHQUFNLGtCQUFBLFlBRXpCLFNBQVVqYSxTQU9YQSxFQUFBMEksY0FBb0JLLG9CQUVoQndhLEVBQUlDLE9BQVEsWUFJbkJELEVBQUFFLGlCQUFBempCLG1DQWFDLGdCQUtFMGpCLHlJQUtLLE1BQ1ZsbEIsWUFBQW1sQixTQUdTMW1CLEVBQUF3bUIsaUJBQXlCdkcsS0FDcEIwRyxFQUFTNWEsTUFBQSxPQUlaNGEsRUFBWUMsYUFBTSxRQUNoQkQsRUFBWUUsUUFBUyxjQUk5QkMsWUFBQSxRQUNKSCxFQUFBRyxjQUFBLFNBRURybEIsWUFlQ2lsQixnQkFQVUssRUFBZUMsRUFBNEJDLElBQ2pEcm5CLEVBQUF3QixjQUFBLFdBQU1BLGNBQUEsYUFHTjhiLE1BQUssa0pBV1ZBLE1BQUF1SixRQUFBLGlHQUNFbGxCLFlBQVMwZSxZQUVEM1osaUJBQ0EsMkNBTUosMENBS0UsNENBTUEsMkNBVUF2RCxFQUFJYyxFQUFBcWpCLFdBQ05DLEVBQWdCemtCLE1BT2Z3YSxRQUdGZ0ssR0FBQUUsR0FBQXJrQixHQzVIUCxHQUFBbWtCLEVBQUEsNkZBYUk1Z0IsRUFBSytnQixvQkFBU0MsR0FBQWplLEtBQUEzRyxJQUFBNmtCLEdBQUFsZSxLQUFBeEYsR0FBQSxLQUdYZ2pCLFFBQ0QzSixFQUFBc0ssV0FDSHRLLEVBQUFpSyxXQUlBSyxTQUFBdEssRUFBQWlLLFNBQUFqSyxFQUFBMkosTUFBQW5rQixJQUVEd2tCLEVBQUFMLFFBR0dBLE1BQVFBLElBQ1RXLFNBQWNBLElBQ2RMLFNBQVlBLFVBS2J6a0IsSUFBQThCLDZCQVVNaWpCLEVBQUFDLDRCQUlORCxJQUFBLFFBS0h4bkIsS0FBQTJXLElBQUMsY0NuREMzVyxLQUFBMlcsSUFBQThRLEdBZ0JDemtCLE1BQUFoRCxLQUFBaUQsb0JBSkcseUNBRUN5a0IsU0FBQSxXQUFBQyxXQUFBLFNBQUEzSyxRQUFBLDJCQUVKLGVBRUQsV0FJQSxTQUFBLE1BQUEsU0FDT3JkLEVBQVF3QixjQUFXLE9BQVE4YixlQUdoQzJLLEdBQWlCaGtCLFdBS2Jpa0IsR0FBVSxnQkFNVGprQixFQUFRLEdBQUMzQixjQUFTMkIsRUFBQXZELE1BQUEsS0FDeEJ5bkIsR0FBQXpsQixhQUdDVSxJQUFJLE1BQ0tBLEdBQU1nbEIsVUFDZEYsR0FBQSxRQUVEamtCLGdCQVFLQSxTQUNKakMsRUFBQXFtQixTQUFBcGtCLFNBQU0sS0FDTG9rQixTQUFZcGtCLEdBQUFna0IsR0FBQWhrQixJQUFBQSxTQUdkbkIsV0FJQXdsQixHQUFvQm5sQixFQUFDK0MsRUFBQXFpQixvQkNoRVYsT0FBQXRpQixXQUlQLEVBQUdBLEVBQUssSUFBVXNpQixHQUFJLEtBQUF0aUIsRUFBQSxJQUFBLGlCQUkxQnVpQixHQUFpQnJsQixFQUFRYyxFQUFTd2tCLEVBQUFDLEVBQUFDLE9BQ25DdmxCLElBRUQsVUFJSXNsQixFQUFBLFNBQUEsV0FBQSxnQkFLSSxRQUFXLEVBQUcsU0FJbEIsRUFBQXRsQixHQUFPLEVBQUssUUFHWixTQUFjLElBQ2RwQixFQUFPNGIsSUFBR3phLEVBQVFzbEIsRUFBQ0csR0FBWXhsQixHQUFBLEtBQUF1bEIsUUFJekIsSUFJVkYsSUFBQSxVQUFBLElBQ0V6bUIsRUFBVTRiLElBQUF6YSxFQUFVLFVBQUd5bEIsR0FBS3hsQixHQUFBLEtBQUF1bEIsVUFJekIsU0FBQSxJQUNBM21CLEVBQUE0YixJQUFBemEsRUFBQSxTQUFBeWxCLEdBQUF4bEIsR0FBQSxRQUFBLEtBQUF1bEIsUUFHTCxJQUdFM21CLEVBQU00YixJQUFVemEsRUFBSSxVQUFjeWxCLEdBQUV4bEIsR0FBQSxLQUFBdWxCLE1BS3BDRixJQUFNLFVBQVUsSUFDaEJ6bUIsRUFBWTRiLElBQUd6YSxFQUFJLFNBQWV5bEIsR0FBQXhsQixHQUFBLFFBQUEsS0FBQXVsQixZQVFsQ3hhLFdBSUEwYSxHQUFvQjFsQixFQUFNYyxFQUFBd2tCLFdBTTFCakIsR0FBY3JrQixLQUVkMmxCLEdBQU0zbEIsRUFBU2MsRUFBRzBrQixLQUNaM21CLEVBQVc0YixJQUFJemEsRUFBTSxZQUFXLE1BQUF3bEIsS0FBQSxtQkFLbENsZixLQUFPMEUsR0FBQSxRQUNYQSxJQUtLdWEsTUFDSksscUJBQUE1YSxJQUFBaEwsRUFBQW1hLE1BQUFyWixrQkFHUyxjQUNBQSxFQUFTLEdBQUEzQixjQUFvQjJCLEVBQUV2RCxNQUFNLGlCQUdwQ3lOLElBQVUsc0JBTWR1YSxFQUFZLFNBQWMsK0RBV3pCdmxCLEVBQUlta0IsUUFDUCxVQUdLbmtCLEVBQU8sa0JBQ2hCTCxJQUFBLEdBQUEsSUFBQUEseUNBT0EsaUJBQVUsaUJBQ1QsOENBR0QsZ0JBQU0scUNBR04sWUFFRCxZQUVBLFVBQ0QsaURBV1NLLEVBQVFjLEVBQUtpQyxFQUFBdWlCLFVBSWpCdGxCLEVBQUlzRixXQUFTLEdBQU90RixFQUFBc0YsV0FBbUIsSUFBT3RGLEVBQUVtYSxNQUFBLFlBS3JEeGEsRUFBQWdDLEVBQUFra0IsOENBUURDLEVBQUEsR0FDRUMsR0FBU0MsT0FLTEMsU0FBS25sQixJQUFRakMsRUFBYW9uQixTQUFBRCxVQUl6QnZrQixVQUFFLFVBRUhzQixTQUlBLFdBQWVwRCxFQUFDdW1CLEdBQUNyZ0IsS0FBSzlDLEtBQUFwRCxFQUFBLEdBQUEsTUFDcEJLLEVBQU1jLEVBQUFuQixvQkFVUixNQUFTb0QsSUFBS0EsRUFBUyxlQU9yQixTQUFJLElBQ1BwRCxHQUFBQSxFQUFBLEtBQUFkLEVBQUE4YixVQUFBcUwsR0FBQSxHQUFBLGtFQ3ZNUTdMLEVBQUFyWixHQUFBLGNBS1gra0IsS0FBYXhoQixRQUFFd2hCLE9BQ1ZBLEVBQU8zTSxJQUFHbFosRUFBUStDLEVBQUF1aUIsTUFBa0I3akIsVUFBQSxJQUV6Q3FrQixFQUFnQixDQUNqQjNMLEVBQUFnTSxZQUFBcmxCLEVBQUFpQyxPQUVELEdBQ1FqQyxHQUFBaUMsZUFRRyxRQUFFOGlCLE1BRVBBLEVBQUNoUyxJQUFVN1QsRUFBSyxNQUFHc2xCLE1BQU83akIsVUFBQSxtQkFNMUJYLGtCQUlEZCxFQUFBYyxFQUFBd2tCLEVBQUFFLFNBQ0FsbUIsRUFBQXVtQixJQUNKaG5CLEVBQUFpYSxVQUFBaFksS0FFRHNsQixHQUFBOWYsS0FBQXhGLE9BS0FnbEIsRUFBQSxHQUNFQyxHQUFtQkMsT0FJWkMsU0FBUW5sQixJQUFDakMsRUFBY29uQixTQUFTRCxTQUdqQyxRQUFPM2hCLEVBQUUsS0FDYndQLElBQU83VCxFQUFLLEtBQU9zbEIsd0NBU3ZCLFVBUUN4a0IsS0FBQXVsQixHQUFBLEdBUENBLEdBQWtCdmxCLFVBSWIsSUFBQXdrQixFQUFBLGNBQ0t0YSxVQUNSc2EsSUFBVSxNQUFDZ0IsU0FBQWhuQixHQUFBQSxHQUFBLEVBQUEwTCxTQUdmQSxhQUlLLFNBQUEsU0FBQSxTQUFBL0ssRUFBQWEsS0FDSm1sQixTQUFBbmxCLFFBQ0gsU0FBQWQsRUFBQ21rQixFQUFBbUIsR0FBQSxHQUFBbkIsRUFBQSxDQ3JFQyxPQUFBb0MsR0FBWWpnQixLQUFBekgsRUFBTzRiLElBQUF6YSxFQUFBLGlCQU9kd21CLGlCQUFBam5CLFNBQUFTLEVBQUF5bUIsd0JBQUEzQyxVQUNEOWpCLEVBQUEwbUIsR0FBQSxxQkFDYzFtQixFQUFBYyxFQUFBd2tCLFFBRWR0bEIsRUFBQWMsRUFBdUJ3a0Isb0JBSW5CdmlCLEVBQU91aUIsY0FHSGpCLEdBQUNya0IsUUFDTHFsQixTQUlQeG1CLEVBQUE0YixJQUFBemEsRUFBQSxZQUFBLE1BQUF3bEIsS0FBQSxhQUVEQSxNQUtFSixJQUFhdGlCLEVBQVdvakIsR0FBUXJnQixLQUFBOUMsUUFDOUIsSUFBUyxRQUFFLEtBQUEsR0FFYm9YLE1BQU1yWixHQUFXaUMsSUFFYmxFLEVBQUM0YixJQUFRemEsRUFBT2MsVUFJcEJxa0IsR0FBb0JubEIsRUFBRytDLEVBQUFxaUIsa0JBTWZ2QixXQUFhOEMsR0FBY3BqQixFQUFPcWpCLDhCQUNwQ3pDLFFBQ0YsbUJBQ0t3QixHQUFTM2xCLEVBQUksMENBQ1A2bUIsc0JBQ0UsR0FBSSw0Q0FDSUEsa0JBTzFCaG5CLGFBRUQsV0FDRSxVQUNELGtCQUNIaW5CLEVBQUNDLEdBQUFsb0IsRUFBQW9uQixTQUFBYSxFQUFBQyx1QkNqRUQsSUFBTTltQixFQUFBLEVBRVMrbUIsY0FFTmprQixJQUFVLFNBQVFBLEVBQUE4RSxNQUFBLE1BQUE5RSxRQUd2QjlDLEVBQUssRUFBQUEsSUFBUyxHQUNUNm1CLEVBQVVyQixHQUFReGxCLEdBQVE4bUIsS0FDM0I5bUIsSUFBS2duQixFQUFRaG5CLEVBQUEsSUFBWWduQixFQUFPLFVBSXBDRCxnQkFJS0YsR0FBQSxZQUNGQSxFQUFBQyxHQUFBN04sSUFBQWlNLGdDQUtDcmtCLEVBQUtpQyxZQUNON0YsS0FBQSxTQUFBOEMsRUFBQWMsRUFBQWlDLFNBQ0R6QyxPQUdKTCxFQUFBLEtBRUNxQixNQUFBQyxRQUFBVCxHQUFBLENBRUQwa0IsRUFBQW5CLEdBQUFya0IsS0FBQWMsRUFBQXZCLFlBRU1VLEVBQUNLLEVBQVFMLElBQUcsS0FDZEEsSUFBV3BCLEVBQUE0YixJQUFBemEsRUFBbUJjLEVBQUFiLEdBQUEsTUFBQXVsQixVQUc3QnpsQixTQUlIZ0QsSUFBS3RCLGtCQUNFekIsRUFBQWMsRUFBU2lDLFNBQ1ovQyxFQUFLYyxRQUNGWCxVQUFVWixPQUFBLGVBTWxCMm5CLEdBQUFsbkIsRUFBQWEsRUFBQXlaLEVBQUE5WixFQUFBMm1CLFVBRUQsSUFBQUQsR0FBQTluQixVQUFBTCxLQUFBaUIsRUFBQWEsRUFBV3laLEVBQUs5WixFQUFBMm1CLFdBRVJELE1BR1A5bkIsdUJBRUQ4bkIsaUJBQ1FsbkIsRUFBV2EsRUFBS3laLEVBQVM5WixFQUFLMm1CLEVBQUF2TSxhQUM5QjVhLFlBRUZzYSxjQUNFNk0sR0FBQ3RvQixFQUFnQnNvQixPQUFFcEssc0JBQ3hCbGMsYUFBTTNELEtBQUFtRyxJQUFBbkcsS0FBQTZLLGVBQ0x2SCxZQUVBb2EsSUFBSy9iLEVBQVc4YixVQUFRTCxHQUFBLEdBQUEsNEJBSXhCNE0sR0FBS0UsVUFBV2xxQixLQUFBb2QsYUFFbkJ1TCxHQUFBQSxFQUFBaFMsTUFFREEsSUFBQTNXLFNBQ0VrcUIsVUFBTXJLLFNBQWdCbEosSUFBQTNXLG9CQUdsQm1xQixXQUVISCxHQUFBRSxVQUFBbHFCLEtBQUFvZCxjQUNDelosUUFBSXltQixTQUFhLFVBRWpCQyxFQUFLMW9CLEVBQVdzb0IsT0FBUWpxQixLQUFBaXFCLGVBQ3RCdG1CLFFBQVV5bUIsU0FBUUQsRUFBUyxFQUFLLEVBQUFucUIsS0FBQTJELFFBQUF5bUIsd0JBSW5DQyxFQUFBRixPQUdIaGtCLEtBQUFuRyxLQUFBc0QsSUFBQXRELEtBQUE4UCxPQUFBdWEsRUFBQXJxQixLQUFBOFAsY0FHTW5NLFFBQU0ybUIsS0FBUSxjQUNWQSxLQUFJeHBCLEtBQU9kLEtBQUM4QyxLQUFBOUMsS0FBYW1HLElBQU9uRyxZQUd0QzJvQixFQUFNM00sSUFBQSxPQUVOaGMsd0JBRUs2ZixTQUFRN0QsSUFBQWhjLGFBRWRBLG9CQUtTNkIsS0FBR0ssVUFBVzhuQixHQUFROW5CLCtDQUkvQm9iLFlBTURBLEVBQUF4YSxLQUFPc0YsV0FBVSxVQUNUa1YsRUFBS0YsT0FBSyxNQUFBRSxFQUFBeGEsS0FBQW1hLE1BQUFLLEVBQWlDRixPQUFBLEtBQUEsVUFDNUN0YSxLQUFDd2EsRUFBV0YsUUFPcEJ6YixFQUFBNGIsSUFBQUQsRUFBQXhhLEtBQUF3YSxFQUFBRixLQUFBLGNBSVU5TixJQUFBLE9BQUEsRUFBQUEsZ0JBR0hnTyxRQUlGaU4sR0FBQUQsS0FBQWhOLEVBQWdCRixNQUFDLE1BQ25Ca04sS0FBS2hOLEVBQVNGLE1BQUFFLFFBQ2YsR0FBQUEsRUFBQXhhLEtBQUFzRixXQUFBLFdBQVU2VSxNQUFFdGIsRUFBWXFtQixTQUFTMUssRUFBTUYsUUFBQSxRQUN0QzJMLFNBQUV6TCxFQUFjRixPQUFHLFNBQ2RFLEVBQUF4YSxLQUFXd2EsRUFBQUYsS0FBQUUsRUFBQW5YLElBQUFtWCxFQUFBSSxVQUNqQixHQUNGNWEsS0FBQXdhLEVBQUFGLE1BQUFFLEVBQUFuWCxxQkFRR3FrQixVQUFXUixHQUFBRSxVQUFBTyx5QkFDWm5OLE1BQ0ZBLEVBQUF4YSxLQUFBc0YsVUFBQWtWLEVBQUF4YSxLQUFBdkIsV0FBQSxHQUVEdUIsS0FBQXdhLEVBQUFGLE1BQUFFLEVBQUFuWCxpQ0FLTXVrQiw0QkFHREEsU0FFSCxHQUFPN1YsS0FBQThWLElBQU9ELEVBQUE3VixLQUFBK1YsSUFBQSxZQUdoQixjQUVJWixHQUFNOW5CLFVBQVlMLG9LQWtCTGdwQix5QkFFRGxwQixFQUFNNG9CLEdBQUlPLHNGQVVmbnBCLEVBQUF3RSxlQUlWNGtCLEdBQUF0bUIsRUFBQXVtQixPQUVEckgsU0FFQ3NILE9BQUF4bUIsS0FLSHVtQixFQUFDLEVBQUEsRUFBQSxLQUFBam9CLEVBQUEsRUFBQUEsR0FBQSxFQUFBaW9CLEVBQUEsU0M1TmN2Z0IsRUFBQSxTQUFBa1osR0FBQWxaLEVBQUEsVUFBQWtaLEdBQUFsZixtQ0FPWGdHLFdBSUF5Z0IsR0FBS3JsQixFQUFnQnVYLEVBQUErTixZQUdoQkMsR0FBYUMsU0FBQWpPLFFBQUE5YyxPQUFBOHFCLEdBQUFDLFNBQUEsUUFDbkIseURBT0MvTiw2Q0FRRixVQUFBMkYsR0FBTyxXQUFQQSxJQUNFampCLFlBRUE4QyxFQUFPbWEsUUFDUm5hLEVBQUFzRixVQUFBK1YsR0FBQXJiLDJCQUtEd29CLEVBQUFuVSxNQUFBLEdBQ0V4VixFQUFNNmEsWUFBZ0IxWixFQUFBLFdBQ2pCeW9CLFVBQVMsS0FBVSxHQUN4QkEsU0FBSyxJQUNBNUMsRUFBQWpNLE1BQVd0QyxPQUVoQnNDLE1BQUl0QyxLQUFVLGlCQUNSbVIsU0FBVyw2QkFPVixhQUlQQyxPQUFNLDRCQUdON3BCLEVBQU93VixNQUFLclUsRUFBUyxNQUFRVCxPQUFBLFNBQ3ZCK1gscUJBUVI2SSxFQUFBLGNBRVM3WixLQUFLdkQsR0FBWSxVQUNsQnVYLEtBQ0hxTyxHQUFBNWxCLElBQUEsWUFFSEEsS0FBWTZsQixFQUFLLE9BQU8sUUFBUSxJQUloQzdsQixJQUFLLFFBQWE4bEIsR0FBZUEsRUFBRXZPLEtBQUE3WSxVQUFBLENBQ3BDbW5CLEVBQUEsU0FLQyxnQkFHT0MsR0FBQUEsRUFBQXZPLElBQUF6YixFQUFBc2IsTUFBQW5hLEVBQUFzYSxTQUlFdkIsY0FBV29ILFVBQ2pCdGhCLEVBQUFrYSxjQUFBZ0ksR0FBQSxXQU1MK0gsR0FBQTlvQixFQUFBc0YsV0FBVSxFQUFWLGFBTWM2VSxFQUFBNE8sU0FBQTVPLEVBQW9CNk8sVUFBTTdPLEVBQUE4TyxhQUl4Q0osR0FBT0EsRUFBUDNPLHNCQUVXZCxFQUFPdkYsSUFBQTdULEVBQUEsYUFFZm5CLEVBQUE0YixJQUFBemEsRUFBQSxrQkFDSSxPQUFXLElBQ2hCa3BCLEVBQVksR0FFUEEsTUFDTixLQUlXbHBCLEdBQVEsUUFFSkEsRUFBR21hLE1BQUtELFNBQVFnUCxJQUMxQnJxQixFQUFRNGIsSUFBRXphLEVBQUEsZUFDWkEsWUFNVSxVQUFRa2EsSUFBYSxnQkFBQWdQLEdBQUEsS0FBQSxJQUNqQ3JxQixFQUFPNGIsSUFBQXphLEVBQUEsV0FBeUIsT0FBQyxLQUdoQ21wQixFQUFBLHFCQUdHalAsUUFBT2dQLE9BRVZBLEdBQUEsS0FBQSxlQUdVaFAsSUFBUSxPQUFBLEdBQUFBLEtBR3BCQSxRQUFBLHNCQU9DNk8sU0FBYSxHQUViQSxTQUFLLGtCQUNILGFBQ0RBLFNBQUFQLEVBQUFPLFNBQUEsS0FDRkMsVUFBQVIsRUFBQU8sU0FBQSxLQUVERSxVQUFBVCxFQUFBTyxTQUFZLE9BS1AsZUFFRGhJLEVBQVUsT0FHWCxJQUVEOEgsRUFBVyxJQUNaLFdBQUFBLEVBQUEsQ0FFREQsRUFBQUMsRUFBQUQsZUFHR3hQLEVBQUFJLE9BQUF4WixFQUFBLFVBQUFrYSxRQUFBZ1AsT0FLRFAsRUFBUyxHQUNQQyxRQUFXQSw0QkFXWCxlQUtKQSxFQUFBLEtBQ1M1b0IsTUFFTHFaLE9BQU1yWixFQUFVcUUsbUJBQ1gwYyxFQUFPLEdBQ1o1RyxNQUFBbmEsRUFBQXNhLEVBQUF5RyxFQUFBekcsU0FRSThOLEdBQWVRLEVBQU9DLEVBQVd2TyxHQUFBLEVBQUFBLEVBQUE4TyxRQUN2QzlPLEtBQU11TyxHQUFhLEdBQ2J2TyxHQUFVNk8sRUFBR25jLFNBRW5CNGIsRUFBTSxHQUNEcG9CLElBQUEyb0IsRUFBY25jLFFBQ2pCQSxNQUFPLGNBS2JxYyxHQUFDbEosRUFBQW1KLEdBQUEsSUFBQTFWLEVBQUE5UyxFQUFBcW1CLEVBQUFwa0IsRUFBQThpQiwyRUMxTkMxRixFQUFZdk0sR0FBQTdRLEVBQUEsVUFHSmpDLEVBQUEsR0FFTkEsR0FBYWlDLGdCQUtibEUsRUFBUW9uQixTQUFVbmxCLFNBRWIsV0FBTStrQixFQUFLLEtBQ1IwRCxPQUFRbGxCLFlBQ1R2RCxZQUlKaUMsRUFBQSxNQUNBNlEsS0FBQXVNLEdBQUEsR0FFR3ZNLEdBQVE3USxFQUFLNlEsS0FDVEEsR0FBUXVULFdBSWZybUIsR0FBQXFtQixhQUtIbUIsR0FBWXRvQixFQUFBd3BCLEVBQUEzb0IsT0FDYjJMLEVBQ0RpZCxNQ25CRnBsQixFQUFFaWtCLEdBQWVvQixXQUFTbnFCLFNBQ2ZWLEVBQWFnWSxXQUFBNlIsT0FBQSxrQkFJdEJpQixFQUFXM3BCLFNBR1QsZ0JBQ0Usb0JBR0E0cEIsSUFBWUMsT0FDWjlYLEtBQUErWCxJQUFhLEVBQUF6QixFQUFTMEIsVUFBQTFCLEVBQUFmLFNBQUEwQyx1QkFLdEIsRUFBQS9ZLElBQ0EsSUFDQW9YLEVBQVU0QixPQUFFMXFCLGNBRVpBLEVBQVdxVSxJQUFPLEdBQ2xCcVcsT0FBU3JXLEdBQVNzVyxJQUFBN0MsS0FHbEI3USxXQUFBeFcsR0FBZXFvQixFQUFXaEIsRUFBQTVQLFNBRzFCLEdBQUFsWSxFQUFlLGNBT2pCQSxFQUFNLEdBRU5pWCxXQUFnQnhXLEdBQU1xb0IsRUFBQSxFQUFBLE1BS3BCNVIsWUFBV3pXLEdBQVNxb0Isb0JBR25CblMsRUFBVU4sd0JBRVZoVixVQUFVNG9CLFVBQ1Y1b0IsT0FBVyw4QkFFYi9CLEVBQUFzb0IsT0FBQXBLLGdDQUdXeU0sa0JBQ0gzb0IsWUFDUCtvQixJQUFPTyxnQkFDSjdDLCtCQUVELFNBQVNoTixFQUFHOVosU0FDYjNCLEVBQUFxb0IsTUFBQWxuQixFQUFBcW9CLEVBQUFHLEtBQUFsTyxFQUFBOVosSUFDR2dvQixLQUFFYyxjQUFBaFAsSUFBQStOLEVBQUFHLEtBQUFyQixpQkFDSDFwQixLQUFTK2MsMkJBR1Q0UCxTQUNELE1BSU8vQixFQUFXNEIsT0FBQTFxQixPQUFhLE9BQzlCLGVBR0YsVUFDRnFVLEVBQUFyVSxFQUFBcVUsSUFBQSx1QkFPRHdXLEVBQUEsR0FFSzVULFdBQU94VyxHQUFBcW9CLEVBQUEsRUFBQSxNQUNaNVIsWUFBVXpXLEdBQUFxb0IsRUFBQStCLFFBQ1YsR0FDQXhULFdBQWU1VyxHQUFBcW9CLEVBQUErQixXQUVmbHRCLFVBR0FtckIsRUFBQWxJLFNBSUFBLEVBQVdrSSxFQUFBRyxLQUFBYyxzQkFFVC9wQixFQUFBcVUsSUFBa0IsTUFDVjhWLFdBQUU5VixHQUFtQjVWLEtBQUFxcUIsRUFBU3JvQixFQUFBbWdCLEVBQUFrSSxFQUFBRyxXQUN2QyxJQUVEM3BCLEVBQUF1QyxXQUFpQm9MLEVBQVM2ZCxNQUFRLDJDQUdsQ25uQixNQUFRc0osRUFBQTZkLEtBQUE3ZCxtQkFNTDJULEVBQUFpSSxHQUFvQkMsUUFFcEJqbkIsV0FBV2luQixFQUFXRyxLQUFBeGIsT0FBVyxHQUNuQ3diLEtBQUF4YixNQUFBaFAsS0FBQWdDLEVBQUFxb0IsY0FRQ0EsRUFBT0csS0FBQThCLGVBQ1JqQyxFQUFBRyxLQUFBNVksS0FBQXlZLEVBQUFHLEtBQUErQixlQUVEbEMsRUFBQUcsS0FBZXZULGFBQ2ZvVCxFQUFhRyxLQUFLRSxVQUlsQmpCLEdBQUErQyxlQUNFYix5QkFHQW5CLEtBQUFuVSw4QkFRUXhWLEVBQUUrQixPQUFBMG5CLDRCQUdWaE8sRUFBYXZYLFNBQ2Q3RixLQUFBa3JCLFlBQUE5TixFQUFBdlgsTUFFS3lYLEVBQUV4YSxLQUFBc2EsRUFBQTRMLEdBQUFyZ0IsS0FBQTlDLEdBQUF5WCxnQ0FLSjJGLEVBQU92Z0IsbUJBQ1B1Z0IsR0FBb0Isc0JBSXBCeGEsTUFBQXNPLGlCQUtBMVUsY0FFQUEsRUFBQXFVLElBQW1CLEtBQ25CQSxlQUNBMEcsR0FBQWdPLEdBQXFCQyxTQUFRak8sbUJBQzdCQSxHQUFhbVEsUUFBQTdxQix3Q0FNYkEsRUFBYThxQixRQUNiLGVBQ1FELFFBQUU3cUIsV0FHWjhwQixXQUFLanNCLEtBQUFtQyx3QkFLSCtxQixFQUFheEQsRUFBT3JvQixtQkFDWDZyQixJQUFNLFNBQUE5ckIsRUFBQStCLFVBQUErcEIsaUJBQ2Y3ckIsR0FBU3FvQixnQkFDVHdELElBQVNBLHVCQUVUeEQsR0FBQUEsSUFBaUJ0b0IsRUFBQXVDLFdBQWMrbEIsSUFBQUEsV0FJL0J4SixJQUFBLFlBQ0EsbUJBR0EySixXQUFBLFNBQW9CLGtCQUNwQnpvQixFQUFZNG9CLEdBQUFtRCxPQUFZLFlBQ3hCL3JCLEVBQVU0b0IsR0FBRW1ELE9BQUFDLEVBQVV2RCwwQkFHdEJ6b0IsRUFBVTRvQixHQUFFbUQsT0FBQTdOLGdCQU1mMUksT0FBQSxNQUFBd1csRUFBQXhXLFFBQUEsS0FBQSxTQUNJLGFBSUhrVyxvQkFFQSxnQkFDQW5wQixXQUFheXBCLEVBQUF6USxLQUFBLFlBQ2JsZCxpQkFHQSxXQUNBQSxLQUFVMnRCLEVBQUF4VyxnREFRVnNXLEVBQVVHLEVBQUEzRCxFQUFBdm5CLGVBR1Z1USxPQUFVa0wsSUFBa0JaLElBQUEsVUFBQSxHQUFBZSxzQkFHbkJ1UCxRQUFBRCxHQUFBSCxFQUFpQnhELEVBQUF2bkIscUJBRW5CMGEsRUFBRXFRLEVBQUF4RCxFQUFpQnZuQixTQUMxQmYsRUFBQWthLGNBQWV1QixLQUNmemIsRUFBQThyQixNQUFVQSxFQUFBeEQsRUFBa0J2bkIsS0FDNUIsaUJBR0Ewb0IsR0FBVXByQixLQUFBMkIsRUFBQStCLFVBQWtCMFosR0FBQTBRLFNBRzVCNVIsRUFBZXZGLElBQUEzVyxLQUFBLFVBQXVCLFFBQ3RDLFVBR0ErdEIsT0FBV0MsWUFFWEYsRUFBQTNXLFFBQWlCLGdCQUNqQjZXLGNBQ0RGLEVBQUEzVyxNQUFBNlcsSUFFSmIsS0FBRSxTQUFBMW9CLEVBQUF3cEIsRUFBQWYiLCJmaWxlIjoiYXJrLXN0YXRpYy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5cbmNsYXNzIFJlbmRlcmVyIHtcbiAgY29uc3RydWN0b3IobWFya3VwLCBjaGlsZHJlbiwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICB0aGlzLm1hcmt1cCA9IG1hcmt1cDtcbiAgICB0aGlzLmNoaWxkcmVuID0gY2hpbGRyZW47XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gIH1cblxuICByZW5kZXIoJHBhcmVudCkge1xuICAgIGNvbnN0ICRub2RlID0gJCh0aGlzLm1hcmt1cCk7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5jb250ZW50cykge1xuICAgICAgJG5vZGUuaHRtbCh0aGlzLm9wdGlvbnMuY29udGVudHMpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLmNsYXNzTmFtZSkge1xuICAgICAgJG5vZGUuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmNsYXNzTmFtZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub3B0aW9ucyAmJiB0aGlzLm9wdGlvbnMuZGF0YSkge1xuICAgICAgJC5lYWNoKHRoaXMub3B0aW9ucy5kYXRhLCAoaywgdikgPT4ge1xuICAgICAgICAkbm9kZS5hdHRyKCdkYXRhLScgKyBrLCB2KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLmNsaWNrKSB7XG4gICAgICAkbm9kZS5vbignY2xpY2snLCB0aGlzLm9wdGlvbnMuY2xpY2spO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNoaWxkcmVuKSB7XG4gICAgICBjb25zdCAkY29udGFpbmVyID0gJG5vZGUuZmluZCgnLm5vdGUtY2hpbGRyZW4tY29udGFpbmVyJyk7XG4gICAgICB0aGlzLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICAgIGNoaWxkLnJlbmRlcigkY29udGFpbmVyLmxlbmd0aCA/ICRjb250YWluZXIgOiAkbm9kZSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jYWxsYmFjaykge1xuICAgICAgdGhpcy5jYWxsYmFjaygkbm9kZSwgdGhpcy5vcHRpb25zKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zICYmIHRoaXMub3B0aW9ucy5jYWxsYmFjaykge1xuICAgICAgdGhpcy5vcHRpb25zLmNhbGxiYWNrKCRub2RlKTtcbiAgICB9XG5cbiAgICBpZiAoJHBhcmVudCkge1xuICAgICAgJHBhcmVudC5hcHBlbmQoJG5vZGUpO1xuICAgIH1cblxuICAgIHJldHVybiAkbm9kZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGNyZWF0ZTogKG1hcmt1cCwgY2FsbGJhY2spID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IHR5cGVvZiBhcmd1bWVudHNbMV0gPT09ICdvYmplY3QnID8gYXJndW1lbnRzWzFdIDogYXJndW1lbnRzWzBdO1xuICAgICAgbGV0IGNoaWxkcmVuID0gJC5pc0FycmF5KGFyZ3VtZW50c1swXSkgPyBhcmd1bWVudHNbMF0gOiBbXTtcbiAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuY2hpbGRyZW4pIHtcbiAgICAgICAgY2hpbGRyZW4gPSBvcHRpb25zLmNoaWxkcmVuO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBSZW5kZXJlcihtYXJrdXAsIGNoaWxkcmVuLCBvcHRpb25zLCBjYWxsYmFjayk7XG4gICAgfTtcbiAgfVxufTtcbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgcmVuZGVyZXIgZnJvbSAnLi4vYmFzZS9yZW5kZXJlcic7XG5cbmNvbnN0IGVkaXRvciA9IHJlbmRlcmVyLmNyZWF0ZSgnPGRpdiBjbGFzcz1cIm5vdGUtZWRpdG9yIG5vdGUtZnJhbWUgcGFuZWxcIi8+Jyk7XG5jb25zdCB0b29sYmFyID0gcmVuZGVyZXIuY3JlYXRlKCc8ZGl2IGNsYXNzPVwibm90ZS10b29sYmFyLXdyYXBwZXIgcGFuZWwtZGVmYXVsdFwiPjxkaXYgY2xhc3M9XCJub3RlLXRvb2xiYXIgcGFuZWwtaGVhZGluZ1wiPjwvZGl2PjwvZGl2PicpO1xuY29uc3QgZWRpdGluZ0FyZWEgPSByZW5kZXJlci5jcmVhdGUoJzxkaXYgY2xhc3M9XCJub3RlLWVkaXRpbmctYXJlYVwiLz4nKTtcbmNvbnN0IGNvZGFibGUgPSByZW5kZXJlci5jcmVhdGUoJzx0ZXh0YXJlYSBjbGFzcz1cIm5vdGUtY29kYWJsZVwiLz4nKTtcbmNvbnN0IGVkaXRhYmxlID0gcmVuZGVyZXIuY3JlYXRlKCc8ZGl2IGNsYXNzPVwibm90ZS1lZGl0YWJsZVwiIGNvbnRlbnRFZGl0YWJsZT1cInRydWVcIi8+Jyk7XG5jb25zdCBzdGF0dXNiYXIgPSByZW5kZXJlci5jcmVhdGUoW1xuICAnPGRpdiBjbGFzcz1cIm5vdGUtc3RhdHVzYmFyXCI+JyxcbiAgJyAgPGRpdiBjbGFzcz1cIm5vdGUtcmVzaXplYmFyXCI+JyxcbiAgJyAgICA8ZGl2IGNsYXNzPVwibm90ZS1pY29uLWJhclwiLz4nLFxuICAnICAgIDxkaXYgY2xhc3M9XCJub3RlLWljb24tYmFyXCIvPicsXG4gICcgICAgPGRpdiBjbGFzcz1cIm5vdGUtaWNvbi1iYXJcIi8+JyxcbiAgJyAgPC9kaXY+JyxcbiAgJzwvZGl2Pidcbl0uam9pbignJykpO1xuXG5jb25zdCBhaXJFZGl0b3IgPSByZW5kZXJlci5jcmVhdGUoJzxkaXYgY2xhc3M9XCJub3RlLWVkaXRvclwiLz4nKTtcbmNvbnN0IGFpckVkaXRhYmxlID0gcmVuZGVyZXIuY3JlYXRlKCc8ZGl2IGNsYXNzPVwibm90ZS1lZGl0YWJsZVwiIGNvbnRlbnRFZGl0YWJsZT1cInRydWVcIi8+Jyk7XG5cbmNvbnN0IGJ1dHRvbkdyb3VwID0gcmVuZGVyZXIuY3JlYXRlKCc8ZGl2IGNsYXNzPVwibm90ZS1idG4tZ3JvdXAgYnRuLWdyb3VwXCI+Jyk7XG5cbmNvbnN0IGRyb3Bkb3duID0gcmVuZGVyZXIuY3JlYXRlKCc8ZGl2IGNsYXNzPVwiZHJvcGRvd24tbWVudVwiPicsIGZ1bmN0aW9uKCRub2RlLCBvcHRpb25zKSB7XG4gIGNvbnN0IG1hcmt1cCA9ICQuaXNBcnJheShvcHRpb25zLml0ZW1zKSA/IG9wdGlvbnMuaXRlbXMubWFwKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICBjb25zdCB2YWx1ZSA9ICh0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycpID8gaXRlbSA6IChpdGVtLnZhbHVlIHx8ICcnKTtcbiAgICBjb25zdCBjb250ZW50ID0gb3B0aW9ucy50ZW1wbGF0ZSA/IG9wdGlvbnMudGVtcGxhdGUoaXRlbSkgOiBpdGVtO1xuICAgIGNvbnN0IG9wdGlvbiA9ICh0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcpID8gaXRlbS5vcHRpb24gOiB1bmRlZmluZWQ7XG5cbiAgICBjb25zdCBkYXRhVmFsdWUgPSAnZGF0YS12YWx1ZT1cIicgKyB2YWx1ZSArICdcIic7XG4gICAgY29uc3QgZGF0YU9wdGlvbiA9IChvcHRpb24gIT09IHVuZGVmaW5lZCkgPyAnIGRhdGEtb3B0aW9uPVwiJyArIG9wdGlvbiArICdcIicgOiAnJztcbiAgICByZXR1cm4gJzxsaT48YSBocmVmPVwiI1wiICcgKyAoZGF0YVZhbHVlICsgZGF0YU9wdGlvbikgKyAnPicgKyBjb250ZW50ICsgJzwvYT48L2xpPic7XG4gIH0pLmpvaW4oJycpIDogb3B0aW9ucy5pdGVtcztcblxuICAkbm9kZS5odG1sKG1hcmt1cCk7XG59KTtcblxuY29uc3QgZHJvcGRvd25CdXR0b25Db250ZW50cyA9IGZ1bmN0aW9uKGNvbnRlbnRzLCBvcHRpb25zKSB7XG4gIHJldHVybiBjb250ZW50cyArICcgJyArIGljb24ob3B0aW9ucy5pY29ucy5jYXJldCwgJ3NwYW4nKTtcbn07XG5cbmNvbnN0IGRyb3Bkb3duQ2hlY2sgPSByZW5kZXJlci5jcmVhdGUoJzxkaXYgY2xhc3M9XCJkcm9wZG93bi1tZW51IG5vdGUtY2hlY2tcIj4nLCBmdW5jdGlvbigkbm9kZSwgb3B0aW9ucykge1xuICBjb25zdCBtYXJrdXAgPSAkLmlzQXJyYXkob3B0aW9ucy5pdGVtcykgPyBvcHRpb25zLml0ZW1zLm1hcChmdW5jdGlvbihpdGVtKSB7XG4gICAgY29uc3QgdmFsdWUgPSAodHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnKSA/IGl0ZW0gOiAoaXRlbS52YWx1ZSB8fCAnJyk7XG4gICAgY29uc3QgY29udGVudCA9IG9wdGlvbnMudGVtcGxhdGUgPyBvcHRpb25zLnRlbXBsYXRlKGl0ZW0pIDogaXRlbTtcbiAgICByZXR1cm4gJzxsaT48YSBocmVmPVwiI1wiIGRhdGEtdmFsdWU9XCInICsgdmFsdWUgKyAnXCI+JyArIGljb24ob3B0aW9ucy5jaGVja0NsYXNzTmFtZSkgKyAnICcgKyBjb250ZW50ICsgJzwvYT48L2xpPic7XG4gIH0pLmpvaW4oJycpIDogb3B0aW9ucy5pdGVtcztcbiAgJG5vZGUuaHRtbChtYXJrdXApO1xufSk7XG5cbmNvbnN0IHBhbGV0dGUgPSByZW5kZXJlci5jcmVhdGUoJzxkaXYgY2xhc3M9XCJub3RlLWNvbG9yLXBhbGV0dGVcIi8+JywgZnVuY3Rpb24oJG5vZGUsIG9wdGlvbnMpIHtcbiAgY29uc3QgY29udGVudHMgPSBbXTtcbiAgZm9yIChsZXQgcm93ID0gMCwgcm93U2l6ZSA9IG9wdGlvbnMuY29sb3JzLmxlbmd0aDsgcm93IDwgcm93U2l6ZTsgcm93KyspIHtcbiAgICBjb25zdCBldmVudE5hbWUgPSBvcHRpb25zLmV2ZW50TmFtZTtcbiAgICBjb25zdCBjb2xvcnMgPSBvcHRpb25zLmNvbG9yc1tyb3ddO1xuICAgIGNvbnN0IGJ1dHRvbnMgPSBbXTtcbiAgICBmb3IgKGxldCBjb2wgPSAwLCBjb2xTaXplID0gY29sb3JzLmxlbmd0aDsgY29sIDwgY29sU2l6ZTsgY29sKyspIHtcbiAgICAgIGNvbnN0IGNvbG9yID0gY29sb3JzW2NvbF07XG4gICAgICBidXR0b25zLnB1c2goW1xuICAgICAgICAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJub3RlLWNvbG9yLWJ0blwiJyxcbiAgICAgICAgJ3N0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjonLCBjb2xvciwgJ1wiICcsXG4gICAgICAgICdkYXRhLWV2ZW50PVwiJywgZXZlbnROYW1lLCAnXCIgJyxcbiAgICAgICAgJ2RhdGEtdmFsdWU9XCInLCBjb2xvciwgJ1wiICcsXG4gICAgICAgICd0aXRsZT1cIicsIGNvbG9yLCAnXCIgJyxcbiAgICAgICAgJ2RhdGEtdG9nZ2xlPVwiYnV0dG9uXCIgdGFiaW5kZXg9XCItMVwiPjwvYnV0dG9uPidcbiAgICAgIF0uam9pbignJykpO1xuICAgIH1cbiAgICBjb250ZW50cy5wdXNoKCc8ZGl2IGNsYXNzPVwibm90ZS1jb2xvci1yb3dcIj4nICsgYnV0dG9ucy5qb2luKCcnKSArICc8L2Rpdj4nKTtcbiAgfVxuICAkbm9kZS5odG1sKGNvbnRlbnRzLmpvaW4oJycpKTtcblxuICBpZiAob3B0aW9ucy50b29sdGlwKSB7XG4gICAgJG5vZGUuZmluZCgnLm5vdGUtY29sb3ItYnRuJykudG9vbHRpcCh7XG4gICAgICBjb250YWluZXI6IG9wdGlvbnMuY29udGFpbmVyLFxuICAgICAgdHJpZ2dlcjogJ2hvdmVyJyxcbiAgICAgIHBsYWNlbWVudDogJ2JvdHRvbSdcbiAgICB9KTtcbiAgfVxufSk7XG5cbmNvbnN0IGRpYWxvZyA9IHJlbmRlcmVyLmNyZWF0ZSgnPGRpdiBjbGFzcz1cIm1vZGFsXCIgYXJpYS1oaWRkZW49XCJmYWxzZVwiIHRhYmluZGV4PVwiLTFcIi8+JywgZnVuY3Rpb24oJG5vZGUsIG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMuZmFkZSkge1xuICAgICRub2RlLmFkZENsYXNzKCdmYWRlJyk7XG4gIH1cbiAgJG5vZGUuaHRtbChbXG4gICAgJzxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2dcIj4nLFxuICAgICcgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+JyxcbiAgICAob3B0aW9ucy50aXRsZVxuICAgICAgPyAnICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj4nICtcbiAgICAnICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIGRhdGEtZGlzbWlzcz1cIm1vZGFsXCIgYXJpYS1sYWJlbD1cIkNsb3NlXCI+PHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj48L2J1dHRvbj4nICtcbiAgICAnICAgICAgPGg0IGNsYXNzPVwibW9kYWwtdGl0bGVcIj4nICsgb3B0aW9ucy50aXRsZSArICc8L2g0PicgK1xuICAgICcgICAgPC9kaXY+JyA6ICcnXG4gICAgKSxcbiAgICAnICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+JyArIG9wdGlvbnMuYm9keSArICc8L2Rpdj4nLFxuICAgIChvcHRpb25zLmZvb3RlclxuICAgICAgPyAnICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1mb290ZXJcIj4nICsgb3B0aW9ucy5mb290ZXIgKyAnPC9kaXY+JyA6ICcnXG4gICAgKSxcbiAgICAnICA8L2Rpdj4nLFxuICAgICc8L2Rpdj4nXG4gIF0uam9pbignJykpO1xufSk7XG5cbmNvbnN0IHBvcG92ZXIgPSByZW5kZXJlci5jcmVhdGUoW1xuICAnPGRpdiBjbGFzcz1cIm5vdGUtcG9wb3ZlciBwb3BvdmVyIGluXCI+JyxcbiAgJyAgPGRpdiBjbGFzcz1cImFycm93XCIvPicsXG4gICcgIDxkaXYgY2xhc3M9XCJwb3BvdmVyLWNvbnRlbnQgbm90ZS1jaGlsZHJlbi1jb250YWluZXJcIi8+JyxcbiAgJzwvZGl2Pidcbl0uam9pbignJyksIGZ1bmN0aW9uKCRub2RlLCBvcHRpb25zKSB7XG4gIGNvbnN0IGRpcmVjdGlvbiA9IHR5cGVvZiBvcHRpb25zLmRpcmVjdGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmRpcmVjdGlvbiA6ICdib3R0b20nO1xuXG4gICRub2RlLmFkZENsYXNzKGRpcmVjdGlvbik7XG5cbiAgaWYgKG9wdGlvbnMuaGlkZUFycm93KSB7XG4gICAgJG5vZGUuZmluZCgnLmFycm93JykuaGlkZSgpO1xuICB9XG59KTtcblxuY29uc3QgY2hlY2tib3ggPSByZW5kZXJlci5jcmVhdGUoJzxkaXYgY2xhc3M9XCJjaGVja2JveFwiPjwvZGl2PicsIGZ1bmN0aW9uKCRub2RlLCBvcHRpb25zKSB7XG4gICRub2RlLmh0bWwoW1xuICAgICcgPGxhYmVsJyArIChvcHRpb25zLmlkID8gJyBmb3I9XCInICsgb3B0aW9ucy5pZCArICdcIicgOiAnJykgKyAnPicsXG4gICAgJyA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCInICsgKG9wdGlvbnMuaWQgPyAnIGlkPVwiJyArIG9wdGlvbnMuaWQgKyAnXCInIDogJycpLFxuICAgIChvcHRpb25zLmNoZWNrZWQgPyAnIGNoZWNrZWQnIDogJycpICsgJy8+JyxcbiAgICAob3B0aW9ucy50ZXh0ID8gb3B0aW9ucy50ZXh0IDogJycpLFxuICAgICc8L2xhYmVsPidcbiAgXS5qb2luKCcnKSk7XG59KTtcblxuY29uc3QgaWNvbiA9IGZ1bmN0aW9uKGljb25DbGFzc05hbWUsIHRhZ05hbWUpIHtcbiAgdGFnTmFtZSA9IHRhZ05hbWUgfHwgJ2knO1xuICByZXR1cm4gJzwnICsgdGFnTmFtZSArICcgY2xhc3M9XCInICsgaWNvbkNsYXNzTmFtZSArICdcIi8+Jztcbn07XG5jb25zdCB1aSA9IHtcbiAgZWRpdG9yOiBlZGl0b3IsXG4gIHRvb2xiYXI6IHRvb2xiYXIsXG4gIGVkaXRpbmdBcmVhOiBlZGl0aW5nQXJlYSxcbiAgY29kYWJsZTogY29kYWJsZSxcbiAgZWRpdGFibGU6IGVkaXRhYmxlLFxuICBzdGF0dXNiYXI6IHN0YXR1c2JhcixcbiAgYWlyRWRpdG9yOiBhaXJFZGl0b3IsXG4gIGFpckVkaXRhYmxlOiBhaXJFZGl0YWJsZSxcbiAgYnV0dG9uR3JvdXA6IGJ1dHRvbkdyb3VwLFxuICBkcm9wZG93bjogZHJvcGRvd24sXG4gIGRyb3Bkb3duQnV0dG9uQ29udGVudHM6IGRyb3Bkb3duQnV0dG9uQ29udGVudHMsXG4gIGRyb3Bkb3duQ2hlY2s6IGRyb3Bkb3duQ2hlY2ssXG4gIHBhbGV0dGU6IHBhbGV0dGUsXG4gIGRpYWxvZzogZGlhbG9nLFxuICBwb3BvdmVyOiBwb3BvdmVyLFxuICBjaGVja2JveDogY2hlY2tib3gsXG4gIGljb246IGljb24sXG4gIG9wdGlvbnM6IHt9LFxuXG4gIGJ1dHRvbjogZnVuY3Rpb24oJG5vZGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gcmVuZGVyZXIuY3JlYXRlKCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cIm5vdGUtYnRuIGJ0biBidG4tZGVmYXVsdCBidG4tc21cIiB0YWJpbmRleD1cIi0xXCI+JywgZnVuY3Rpb24oJG5vZGUsIG9wdGlvbnMpIHtcbiAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMudG9vbHRpcCkge1xuICAgICAgICAkbm9kZS5hdHRyKHtcbiAgICAgICAgICB0aXRsZTogb3B0aW9ucy50b29sdGlwXG4gICAgICAgIH0pLnRvb2x0aXAoe1xuICAgICAgICAgIGNvbnRhaW5lcjogb3B0aW9ucy5jb250YWluZXIsXG4gICAgICAgICAgdHJpZ2dlcjogJ2hvdmVyJyxcbiAgICAgICAgICBwbGFjZW1lbnQ6ICdib3R0b20nXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pKCRub2RlLCBvcHRpb25zKTtcbiAgfSxcblxuICB0b2dnbGVCdG46IGZ1bmN0aW9uKCRidG4sIGlzRW5hYmxlKSB7XG4gICAgJGJ0bi50b2dnbGVDbGFzcygnZGlzYWJsZWQnLCAhaXNFbmFibGUpO1xuICAgICRidG4uYXR0cignZGlzYWJsZWQnLCAhaXNFbmFibGUpO1xuICB9LFxuXG4gIHRvZ2dsZUJ0bkFjdGl2ZTogZnVuY3Rpb24oJGJ0biwgaXNBY3RpdmUpIHtcbiAgICAkYnRuLnRvZ2dsZUNsYXNzKCdhY3RpdmUnLCBpc0FjdGl2ZSk7XG4gIH0sXG5cbiAgb25EaWFsb2dTaG93bjogZnVuY3Rpb24oJGRpYWxvZywgaGFuZGxlcikge1xuICAgICRkaWFsb2cub25lKCdzaG93bi5icy5tb2RhbCcsIGhhbmRsZXIpO1xuICB9LFxuXG4gIG9uRGlhbG9nSGlkZGVuOiBmdW5jdGlvbigkZGlhbG9nLCBoYW5kbGVyKSB7XG4gICAgJGRpYWxvZy5vbmUoJ2hpZGRlbi5icy5tb2RhbCcsIGhhbmRsZXIpO1xuICB9LFxuXG4gIHNob3dEaWFsb2c6IGZ1bmN0aW9uKCRkaWFsb2cpIHtcbiAgICAkZGlhbG9nLm1vZGFsKCdzaG93Jyk7XG4gIH0sXG5cbiAgaGlkZURpYWxvZzogZnVuY3Rpb24oJGRpYWxvZykge1xuICAgICRkaWFsb2cubW9kYWwoJ2hpZGUnKTtcbiAgfSxcblxuICBjcmVhdGVMYXlvdXQ6IGZ1bmN0aW9uKCRub3RlLCBvcHRpb25zKSB7XG4gICAgY29uc3QgJGVkaXRvciA9IChvcHRpb25zLmFpck1vZGUgPyB1aS5haXJFZGl0b3IoW1xuICAgICAgdWkuZWRpdGluZ0FyZWEoW1xuICAgICAgICB1aS5haXJFZGl0YWJsZSgpXG4gICAgICBdKVxuICAgIF0pIDogdWkuZWRpdG9yKFtcbiAgICAgIHVpLnRvb2xiYXIoKSxcbiAgICAgIHVpLmVkaXRpbmdBcmVhKFtcbiAgICAgICAgdWkuY29kYWJsZSgpLFxuICAgICAgICB1aS5lZGl0YWJsZSgpXG4gICAgICBdKSxcbiAgICAgIHVpLnN0YXR1c2JhcigpXG4gICAgXSkpLnJlbmRlcigpO1xuXG4gICAgJGVkaXRvci5pbnNlcnRBZnRlcigkbm90ZSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbm90ZTogJG5vdGUsXG4gICAgICBlZGl0b3I6ICRlZGl0b3IsXG4gICAgICB0b29sYmFyOiAkZWRpdG9yLmZpbmQoJy5ub3RlLXRvb2xiYXInKSxcbiAgICAgIGVkaXRpbmdBcmVhOiAkZWRpdG9yLmZpbmQoJy5ub3RlLWVkaXRpbmctYXJlYScpLFxuICAgICAgZWRpdGFibGU6ICRlZGl0b3IuZmluZCgnLm5vdGUtZWRpdGFibGUnKSxcbiAgICAgIGNvZGFibGU6ICRlZGl0b3IuZmluZCgnLm5vdGUtY29kYWJsZScpLFxuICAgICAgc3RhdHVzYmFyOiAkZWRpdG9yLmZpbmQoJy5ub3RlLXN0YXR1c2JhcicpXG4gICAgfTtcbiAgfSxcblxuICByZW1vdmVMYXlvdXQ6IGZ1bmN0aW9uKCRub3RlLCBsYXlvdXRJbmZvKSB7XG4gICAgJG5vdGUuaHRtbChsYXlvdXRJbmZvLmVkaXRhYmxlLmh0bWwoKSk7XG4gICAgbGF5b3V0SW5mby5lZGl0b3IucmVtb3ZlKCk7XG4gICAgJG5vdGUuc2hvdygpO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCB1aTtcbiIsIi8qKlxuICogQGNsYXNzIGNvcmUuZnVuY1xuICpcbiAqIGZ1bmMgdXRpbHMgKGZvciBoaWdoLW9yZGVyIGZ1bmMncyBhcmcpXG4gKlxuICogQHNpbmdsZXRvblxuICogQGFsdGVybmF0ZUNsYXNzTmFtZSBmdW5jXG4gKi9cbmZ1bmN0aW9uIGVxKGl0ZW1BKSB7XG4gIHJldHVybiBmdW5jdGlvbihpdGVtQikge1xuICAgIHJldHVybiBpdGVtQSA9PT0gaXRlbUI7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGVxMihpdGVtQSwgaXRlbUIpIHtcbiAgcmV0dXJuIGl0ZW1BID09PSBpdGVtQjtcbn1cblxuZnVuY3Rpb24gcGVxMihwcm9wTmFtZSkge1xuICByZXR1cm4gZnVuY3Rpb24oaXRlbUEsIGl0ZW1CKSB7XG4gICAgcmV0dXJuIGl0ZW1BW3Byb3BOYW1lXSA9PT0gaXRlbUJbcHJvcE5hbWVdO1xuICB9O1xufVxuXG5mdW5jdGlvbiBvaygpIHtcbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGZhaWwoKSB7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gbm90KGYpIHtcbiAgcmV0dXJuICgpID0+IHtcbiAgICByZXR1cm4gIWYuYXBwbHkoZiwgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gYW5kKGZBLCBmQikge1xuICByZXR1cm4gZnVuY3Rpb24oaXRlbSkge1xuICAgIHJldHVybiBmQShpdGVtKSAmJiBmQihpdGVtKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc2VsZihhKSB7XG4gIHJldHVybiBhO1xufVxuXG5mdW5jdGlvbiBpbnZva2Uob2JqLCBtZXRob2QpIHtcbiAgcmV0dXJuICgpID0+IHtcbiAgICByZXR1cm4gb2JqW21ldGhvZF0uYXBwbHkob2JqLCBhcmd1bWVudHMpO1xuICB9O1xufVxuXG5sZXQgaWRDb3VudGVyID0gMDtcblxuLyoqXG4gKiBnZW5lcmF0ZSBhIGdsb2JhbGx5LXVuaXF1ZSBpZFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBbcHJlZml4XVxuICovXG5mdW5jdGlvbiB1bmlxdWVJZChwcmVmaXgpIHtcbiAgY29uc3QgaWQgPSArK2lkQ291bnRlciArICcnO1xuICByZXR1cm4gcHJlZml4ID8gcHJlZml4ICsgaWQgOiBpZDtcbn1cblxuLyoqXG4gKiByZXR1cm5zIGJuZCAoYm91bmRzKSBmcm9tIHJlY3RcbiAqXG4gKiAtIElFIENvbXBhdGliaWxpdHkgSXNzdWU6IGh0dHA6Ly9nb28uZ2wvc1JMT0FvXG4gKiAtIFNjcm9sbCBJc3N1ZTogaHR0cDovL2dvby5nbC9zTmpVY1xuICpcbiAqIEBwYXJhbSB7UmVjdH0gcmVjdFxuICogQHJldHVybiB7T2JqZWN0fSBib3VuZHNcbiAqIEByZXR1cm4ge051bWJlcn0gYm91bmRzLnRvcFxuICogQHJldHVybiB7TnVtYmVyfSBib3VuZHMubGVmdFxuICogQHJldHVybiB7TnVtYmVyfSBib3VuZHMud2lkdGhcbiAqIEByZXR1cm4ge051bWJlcn0gYm91bmRzLmhlaWdodFxuICovXG5mdW5jdGlvbiByZWN0MmJuZChyZWN0KSB7XG4gIGNvbnN0ICRkb2N1bWVudCA9ICQoZG9jdW1lbnQpO1xuICByZXR1cm4ge1xuICAgIHRvcDogcmVjdC50b3AgKyAkZG9jdW1lbnQuc2Nyb2xsVG9wKCksXG4gICAgbGVmdDogcmVjdC5sZWZ0ICsgJGRvY3VtZW50LnNjcm9sbExlZnQoKSxcbiAgICB3aWR0aDogcmVjdC5yaWdodCAtIHJlY3QubGVmdCxcbiAgICBoZWlnaHQ6IHJlY3QuYm90dG9tIC0gcmVjdC50b3BcbiAgfTtcbn1cblxuLyoqXG4gKiByZXR1cm5zIGEgY29weSBvZiB0aGUgb2JqZWN0IHdoZXJlIHRoZSBrZXlzIGhhdmUgYmVjb21lIHRoZSB2YWx1ZXMgYW5kIHRoZSB2YWx1ZXMgdGhlIGtleXMuXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGludmVydE9iamVjdChvYmopIHtcbiAgY29uc3QgaW52ZXJ0ZWQgPSB7fTtcbiAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBpbnZlcnRlZFtvYmpba2V5XV0gPSBrZXk7XG4gICAgfVxuICB9XG4gIHJldHVybiBpbnZlcnRlZDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZXNwYWNlXG4gKiBAcGFyYW0ge1N0cmluZ30gW3ByZWZpeF1cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gbmFtZXNwYWNlVG9DYW1lbChuYW1lc3BhY2UsIHByZWZpeCkge1xuICBwcmVmaXggPSBwcmVmaXggfHwgJyc7XG4gIHJldHVybiBwcmVmaXggKyBuYW1lc3BhY2Uuc3BsaXQoJy4nKS5tYXAoZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBuYW1lLnN1YnN0cmluZygwLCAxKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zdWJzdHJpbmcoMSk7XG4gIH0pLmpvaW4oJycpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgYXMgbG9uZyBhcyBpdCBjb250aW51ZXMgdG8gYmUgaW52b2tlZCwgd2lsbCBub3RcbiAqIGJlIHRyaWdnZXJlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGl0IHN0b3BzIGJlaW5nIGNhbGxlZCBmb3JcbiAqIE4gbWlsbGlzZWNvbmRzLiBJZiBgaW1tZWRpYXRlYCBpcyBwYXNzZWQsIHRyaWdnZXIgdGhlIGZ1bmN0aW9uIG9uIHRoZVxuICogbGVhZGluZyBlZGdlLCBpbnN0ZWFkIG9mIHRoZSB0cmFpbGluZy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmNcbiAqIEBwYXJhbSB7TnVtYmVyfSB3YWl0XG4gKiBAcGFyYW0ge0Jvb2xlYW59IGltbWVkaWF0ZVxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuICBsZXQgdGltZW91dDtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBjb25zdCBjb250ZXh0ID0gdGhpcztcbiAgICBjb25zdCBhcmdzID0gYXJndW1lbnRzO1xuICAgIGNvbnN0IGxhdGVyID0gKCkgPT4ge1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICBpZiAoIWltbWVkaWF0ZSkge1xuICAgICAgICBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3QgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcbiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgIGlmIChjYWxsTm93KSB7XG4gICAgICBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBlcSxcbiAgZXEyLFxuICBwZXEyLFxuICBvayxcbiAgZmFpbCxcbiAgc2VsZixcbiAgbm90LFxuICBhbmQsXG4gIGludm9rZSxcbiAgdW5pcXVlSWQsXG4gIHJlY3QyYm5kLFxuICBpbnZlcnRPYmplY3QsXG4gIG5hbWVzcGFjZVRvQ2FtZWwsXG4gIGRlYm91bmNlXG59O1xuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBmdW5jIGZyb20gJy4vZnVuYyc7XG5cbi8qKlxuICogcmV0dXJucyB0aGUgZmlyc3QgaXRlbSBvZiBhbiBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheVxuICovXG5mdW5jdGlvbiBoZWFkKGFycmF5KSB7XG4gIHJldHVybiBhcnJheVswXTtcbn1cblxuLyoqXG4gKiByZXR1cm5zIHRoZSBsYXN0IGl0ZW0gb2YgYW4gYXJyYXkuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYXJyYXlcbiAqL1xuZnVuY3Rpb24gbGFzdChhcnJheSkge1xuICByZXR1cm4gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV07XG59XG5cbi8qKlxuICogcmV0dXJucyBldmVyeXRoaW5nIGJ1dCB0aGUgbGFzdCBlbnRyeSBvZiB0aGUgYXJyYXkuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYXJyYXlcbiAqL1xuZnVuY3Rpb24gaW5pdGlhbChhcnJheSkge1xuICByZXR1cm4gYXJyYXkuc2xpY2UoMCwgYXJyYXkubGVuZ3RoIC0gMSk7XG59XG5cbi8qKlxuICogcmV0dXJucyB0aGUgcmVzdCBvZiB0aGUgaXRlbXMgaW4gYW4gYXJyYXkuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYXJyYXlcbiAqL1xuZnVuY3Rpb24gdGFpbChhcnJheSkge1xuICByZXR1cm4gYXJyYXkuc2xpY2UoMSk7XG59XG5cbi8qKlxuICogcmV0dXJucyBpdGVtIG9mIGFycmF5XG4gKi9cbmZ1bmN0aW9uIGZpbmQoYXJyYXksIHByZWQpIHtcbiAgZm9yIChsZXQgaWR4ID0gMCwgbGVuID0gYXJyYXkubGVuZ3RoOyBpZHggPCBsZW47IGlkeCsrKSB7XG4gICAgY29uc3QgaXRlbSA9IGFycmF5W2lkeF07XG4gICAgaWYgKHByZWQoaXRlbSkpIHtcbiAgICAgIHJldHVybiBpdGVtO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIHJldHVybnMgdHJ1ZSBpZiBhbGwgb2YgdGhlIHZhbHVlcyBpbiB0aGUgYXJyYXkgcGFzcyB0aGUgcHJlZGljYXRlIHRydXRoIHRlc3QuXG4gKi9cbmZ1bmN0aW9uIGFsbChhcnJheSwgcHJlZCkge1xuICBmb3IgKGxldCBpZHggPSAwLCBsZW4gPSBhcnJheS5sZW5ndGg7IGlkeCA8IGxlbjsgaWR4KyspIHtcbiAgICBpZiAoIXByZWQoYXJyYXlbaWR4XSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogcmV0dXJucyBpbmRleCBvZiBpdGVtXG4gKi9cbmZ1bmN0aW9uIGluZGV4T2YoYXJyYXksIGl0ZW0pIHtcbiAgcmV0dXJuICQuaW5BcnJheShpdGVtLCBhcnJheSk7XG59XG5cbi8qKlxuICogcmV0dXJucyB0cnVlIGlmIHRoZSB2YWx1ZSBpcyBwcmVzZW50IGluIHRoZSBsaXN0LlxuICovXG5mdW5jdGlvbiBjb250YWlucyhhcnJheSwgaXRlbSkge1xuICByZXR1cm4gaW5kZXhPZihhcnJheSwgaXRlbSkgIT09IC0xO1xufVxuXG4vKipcbiAqIGdldCBzdW0gZnJvbSBhIGxpc3RcbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSAtIGFycmF5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIGl0ZXJhdG9yXG4gKi9cbmZ1bmN0aW9uIHN1bShhcnJheSwgZm4pIHtcbiAgZm4gPSBmbiB8fCBmdW5jLnNlbGY7XG4gIHJldHVybiBhcnJheS5yZWR1Y2UoZnVuY3Rpb24obWVtbywgdikge1xuICAgIHJldHVybiBtZW1vICsgZm4odik7XG4gIH0sIDApO1xufVxuXG4vKipcbiAqIHJldHVybnMgYSBjb3B5IG9mIHRoZSBjb2xsZWN0aW9uIHdpdGggYXJyYXkgdHlwZS5cbiAqIEBwYXJhbSB7Q29sbGVjdGlvbn0gY29sbGVjdGlvbiAtIGNvbGxlY3Rpb24gZWcpIG5vZGUuY2hpbGROb2RlcywgLi4uXG4gKi9cbmZ1bmN0aW9uIGZyb20oY29sbGVjdGlvbikge1xuICBjb25zdCByZXN1bHQgPSBbXTtcbiAgY29uc3QgbGVuZ3RoID0gY29sbGVjdGlvbi5sZW5ndGg7XG4gIGxldCBpZHggPSAtMTtcbiAgd2hpbGUgKCsraWR4IDwgbGVuZ3RoKSB7XG4gICAgcmVzdWx0W2lkeF0gPSBjb2xsZWN0aW9uW2lkeF07XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiByZXR1cm5zIHdoZXRoZXIgbGlzdCBpcyBlbXB0eSBvciBub3RcbiAqL1xuZnVuY3Rpb24gaXNFbXB0eShhcnJheSkge1xuICByZXR1cm4gIWFycmF5IHx8ICFhcnJheS5sZW5ndGg7XG59XG5cbi8qKlxuICogY2x1c3RlciBlbGVtZW50cyBieSBwcmVkaWNhdGUgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgLSBhcnJheVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSBwcmVkaWNhdGUgZnVuY3Rpb24gZm9yIGNsdXN0ZXIgcnVsZVxuICogQHBhcmFtIHtBcnJheVtdfVxuICovXG5mdW5jdGlvbiBjbHVzdGVyQnkoYXJyYXksIGZuKSB7XG4gIGlmICghYXJyYXkubGVuZ3RoKSB7IHJldHVybiBbXTsgfVxuICBjb25zdCBhVGFpbCA9IHRhaWwoYXJyYXkpO1xuICByZXR1cm4gYVRhaWwucmVkdWNlKGZ1bmN0aW9uKG1lbW8sIHYpIHtcbiAgICBjb25zdCBhTGFzdCA9IGxhc3QobWVtbyk7XG4gICAgaWYgKGZuKGxhc3QoYUxhc3QpLCB2KSkge1xuICAgICAgYUxhc3RbYUxhc3QubGVuZ3RoXSA9IHY7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1lbW9bbWVtby5sZW5ndGhdID0gW3ZdO1xuICAgIH1cbiAgICByZXR1cm4gbWVtbztcbiAgfSwgW1toZWFkKGFycmF5KV1dKTtcbn1cblxuLyoqXG4gKiByZXR1cm5zIGEgY29weSBvZiB0aGUgYXJyYXkgd2l0aCBhbGwgZmFsc2UgdmFsdWVzIHJlbW92ZWRcbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSAtIGFycmF5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIHByZWRpY2F0ZSBmdW5jdGlvbiBmb3IgY2x1c3RlciBydWxlXG4gKi9cbmZ1bmN0aW9uIGNvbXBhY3QoYXJyYXkpIHtcbiAgY29uc3QgYVJlc3VsdCA9IFtdO1xuICBmb3IgKGxldCBpZHggPSAwLCBsZW4gPSBhcnJheS5sZW5ndGg7IGlkeCA8IGxlbjsgaWR4KyspIHtcbiAgICBpZiAoYXJyYXlbaWR4XSkgeyBhUmVzdWx0LnB1c2goYXJyYXlbaWR4XSk7IH1cbiAgfVxuICByZXR1cm4gYVJlc3VsdDtcbn1cblxuLyoqXG4gKiBwcm9kdWNlcyBhIGR1cGxpY2F0ZS1mcmVlIHZlcnNpb24gb2YgdGhlIGFycmF5XG4gKlxuICogQHBhcmFtIHtBcnJheX0gYXJyYXlcbiAqL1xuZnVuY3Rpb24gdW5pcXVlKGFycmF5KSB7XG4gIGNvbnN0IHJlc3VsdHMgPSBbXTtcblxuICBmb3IgKGxldCBpZHggPSAwLCBsZW4gPSBhcnJheS5sZW5ndGg7IGlkeCA8IGxlbjsgaWR4KyspIHtcbiAgICBpZiAoIWNvbnRhaW5zKHJlc3VsdHMsIGFycmF5W2lkeF0pKSB7XG4gICAgICByZXN1bHRzLnB1c2goYXJyYXlbaWR4XSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdHM7XG59XG5cbi8qKlxuICogcmV0dXJucyBuZXh0IGl0ZW0uXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheVxuICovXG5mdW5jdGlvbiBuZXh0KGFycmF5LCBpdGVtKSB7XG4gIGNvbnN0IGlkeCA9IGluZGV4T2YoYXJyYXksIGl0ZW0pO1xuICBpZiAoaWR4ID09PSAtMSkgeyByZXR1cm4gbnVsbDsgfVxuXG4gIHJldHVybiBhcnJheVtpZHggKyAxXTtcbn1cblxuLyoqXG4gKiByZXR1cm5zIHByZXYgaXRlbS5cbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5XG4gKi9cbmZ1bmN0aW9uIHByZXYoYXJyYXksIGl0ZW0pIHtcbiAgY29uc3QgaWR4ID0gaW5kZXhPZihhcnJheSwgaXRlbSk7XG4gIGlmIChpZHggPT09IC0xKSB7IHJldHVybiBudWxsOyB9XG5cbiAgcmV0dXJuIGFycmF5W2lkeCAtIDFdO1xufVxuXG4vKipcbiAqIEBjbGFzcyBjb3JlLmxpc3RcbiAqXG4gKiBsaXN0IHV0aWxzXG4gKlxuICogQHNpbmdsZXRvblxuICogQGFsdGVybmF0ZUNsYXNzTmFtZSBsaXN0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaGVhZCxcbiAgbGFzdCxcbiAgaW5pdGlhbCxcbiAgdGFpbCxcbiAgcHJldixcbiAgbmV4dCxcbiAgZmluZCxcbiAgY29udGFpbnMsXG4gIGFsbCxcbiAgc3VtLFxuICBmcm9tLFxuICBpc0VtcHR5LFxuICBjbHVzdGVyQnksXG4gIGNvbXBhY3QsXG4gIHVuaXF1ZVxufTtcbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5jb25zdCBpc1N1cHBvcnRBbWQgPSB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQ7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuLyoqXG4gKiByZXR1cm5zIHdoZXRoZXIgZm9udCBpcyBpbnN0YWxsZWQgb3Igbm90LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBmb250TmFtZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNGb250SW5zdGFsbGVkKGZvbnROYW1lKSB7XG4gIGNvbnN0IHRlc3RGb250TmFtZSA9IGZvbnROYW1lID09PSAnQ29taWMgU2FucyBNUycgPyAnQ291cmllciBOZXcnIDogJ0NvbWljIFNhbnMgTVMnO1xuICBjb25zdCAkdGVzdGVyID0gJCgnPGRpdj4nKS5jc3Moe1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIGxlZnQ6ICctOTk5OXB4JyxcbiAgICB0b3A6ICctOTk5OXB4JyxcbiAgICBmb250U2l6ZTogJzIwMHB4J1xuICB9KS50ZXh0KCdtbW1tbW1tbW13d3d3d3d3JykuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSk7XG5cbiAgY29uc3Qgb3JpZ2luYWxXaWR0aCA9ICR0ZXN0ZXIuY3NzKCdmb250RmFtaWx5JywgdGVzdEZvbnROYW1lKS53aWR0aCgpO1xuICBjb25zdCB3aWR0aCA9ICR0ZXN0ZXIuY3NzKCdmb250RmFtaWx5JywgZm9udE5hbWUgKyAnLCcgKyB0ZXN0Rm9udE5hbWUpLndpZHRoKCk7XG5cbiAgJHRlc3Rlci5yZW1vdmUoKTtcblxuICByZXR1cm4gb3JpZ2luYWxXaWR0aCAhPT0gd2lkdGg7XG59XG5cbmNvbnN0IHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XG5jb25zdCBpc01TSUUgPSAvTVNJRXxUcmlkZW50L2kudGVzdCh1c2VyQWdlbnQpO1xubGV0IGJyb3dzZXJWZXJzaW9uO1xuaWYgKGlzTVNJRSkge1xuICBsZXQgbWF0Y2hlcyA9IC9NU0lFIChcXGQrWy5dXFxkKykvLmV4ZWModXNlckFnZW50KTtcbiAgaWYgKG1hdGNoZXMpIHtcbiAgICBicm93c2VyVmVyc2lvbiA9IHBhcnNlRmxvYXQobWF0Y2hlc1sxXSk7XG4gIH1cbiAgbWF0Y2hlcyA9IC9UcmlkZW50XFwvLipydjooWzAtOV17MSx9Wy4wLTldezAsfSkvLmV4ZWModXNlckFnZW50KTtcbiAgaWYgKG1hdGNoZXMpIHtcbiAgICBicm93c2VyVmVyc2lvbiA9IHBhcnNlRmxvYXQobWF0Y2hlc1sxXSk7XG4gIH1cbn1cblxuY29uc3QgaXNFZGdlID0gL0VkZ2VcXC9cXGQrLy50ZXN0KHVzZXJBZ2VudCk7XG5cbmxldCBoYXNDb2RlTWlycm9yID0gISF3aW5kb3cuQ29kZU1pcnJvcjtcbmlmICghaGFzQ29kZU1pcnJvciAmJiBpc1N1cHBvcnRBbWQpIHtcbiAgLy8gV2VicGFja1xuICBpZiAodHlwZW9mIF9fd2VicGFja19yZXF1aXJlX18gPT09ICdmdW5jdGlvbicpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgIHRyeSB7XG4gICAgICAvLyBJZiBDb2RlTWlycm9yIGNhbid0IGJlIHJlc29sdmVkLCBgcmVxdWlyZS5yZXNvbHZlYCB3aWxsIHRocm93IGFuXG4gICAgICAvLyBleGNlcHRpb24gYW5kIGBoYXNDb2RlTWlycm9yYCB3b24ndCBiZSBzZXQgdG8gYHRydWVgLlxuICAgICAgcmVxdWlyZS5yZXNvbHZlKCdjb2RlbWlycm9yJyk7XG4gICAgICBoYXNDb2RlTWlycm9yID0gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBkbyBub3RoaW5nXG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiByZXF1aXJlICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIEJyb3dzZXJpZnlcbiAgICBpZiAodHlwZW9mIHJlcXVpcmUucmVzb2x2ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIElmIENvZGVNaXJyb3IgY2FuJ3QgYmUgcmVzb2x2ZWQsIGByZXF1aXJlLnJlc29sdmVgIHdpbGwgdGhyb3cgYW5cbiAgICAgICAgLy8gZXhjZXB0aW9uIGFuZCBgaGFzQ29kZU1pcnJvcmAgd29uJ3QgYmUgc2V0IHRvIGB0cnVlYC5cbiAgICAgICAgcmVxdWlyZS5yZXNvbHZlKCdjb2RlbWlycm9yJyk7XG4gICAgICAgIGhhc0NvZGVNaXJyb3IgPSB0cnVlO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBkbyBub3RoaW5nXG4gICAgICB9XG4gICAgLy8gQWxtb25kL1JlcXVpcmVcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiByZXF1aXJlLnNwZWNpZmllZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGhhc0NvZGVNaXJyb3IgPSByZXF1aXJlLnNwZWNpZmllZCgnY29kZW1pcnJvcicpO1xuICAgIH1cbiAgfVxufVxuXG5jb25zdCBpc1N1cHBvcnRUb3VjaCA9XG4gICgoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB8fFxuICAgKG5hdmlnYXRvci5NYXhUb3VjaFBvaW50cyA+IDApIHx8XG4gICAobmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHMgPiAwKSk7XG5cbi8vIFt3b3JrYXJvdW5kXSBJRSBkb2Vzbid0IGhhdmUgaW5wdXQgZXZlbnRzIGZvciBjb250ZW50RWRpdGFibGVcbi8vIC0gc2VlOiBodHRwczovL2dvby5nbC80YmZJdkFcbmNvbnN0IGlucHV0RXZlbnROYW1lID0gKGlzTVNJRSB8fCBpc0VkZ2UpID8gJ0RPTUNoYXJhY3RlckRhdGFNb2RpZmllZCBET01TdWJ0cmVlTW9kaWZpZWQgRE9NTm9kZUluc2VydGVkJyA6ICdpbnB1dCc7XG5cbi8qKlxuICogQGNsYXNzIGNvcmUuZW52XG4gKlxuICogT2JqZWN0IHdoaWNoIGNoZWNrIHBsYXRmb3JtIGFuZCBhZ2VudFxuICpcbiAqIEBzaW5nbGV0b25cbiAqIEBhbHRlcm5hdGVDbGFzc05hbWUgZW52XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgaXNNYWM6IG5hdmlnYXRvci5hcHBWZXJzaW9uLmluZGV4T2YoJ01hYycpID4gLTEsXG4gIGlzTVNJRSxcbiAgaXNFZGdlLFxuICBpc0ZGOiAhaXNFZGdlICYmIC9maXJlZm94L2kudGVzdCh1c2VyQWdlbnQpLFxuICBpc1BoYW50b206IC9QaGFudG9tSlMvaS50ZXN0KHVzZXJBZ2VudCksXG4gIGlzV2Via2l0OiAhaXNFZGdlICYmIC93ZWJraXQvaS50ZXN0KHVzZXJBZ2VudCksXG4gIGlzQ2hyb21lOiAhaXNFZGdlICYmIC9jaHJvbWUvaS50ZXN0KHVzZXJBZ2VudCksXG4gIGlzU2FmYXJpOiAhaXNFZGdlICYmIC9zYWZhcmkvaS50ZXN0KHVzZXJBZ2VudCksXG4gIGJyb3dzZXJWZXJzaW9uLFxuICBqcXVlcnlWZXJzaW9uOiBwYXJzZUZsb2F0KCQuZm4uanF1ZXJ5KSxcbiAgaXNTdXBwb3J0QW1kLFxuICBpc1N1cHBvcnRUb3VjaCxcbiAgaGFzQ29kZU1pcnJvcixcbiAgaXNGb250SW5zdGFsbGVkLFxuICBpc1czQ1JhbmdlU3VwcG9ydDogISFkb2N1bWVudC5jcmVhdGVSYW5nZSxcbiAgaW5wdXRFdmVudE5hbWVcbn07XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGZ1bmMgZnJvbSAnLi9mdW5jJztcbmltcG9ydCBsaXN0cyBmcm9tICcuL2xpc3RzJztcbmltcG9ydCBlbnYgZnJvbSAnLi9lbnYnO1xuXG5jb25zdCBOQlNQX0NIQVIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDE2MCk7XG5jb25zdCBaRVJPX1dJRFRIX05CU1BfQ0hBUiA9ICdcXHVmZWZmJztcblxuLyoqXG4gKiBAbWV0aG9kIGlzRWRpdGFibGVcbiAqXG4gKiByZXR1cm5zIHdoZXRoZXIgbm9kZSBpcyBgbm90ZS1lZGl0YWJsZWAgb3Igbm90LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNFZGl0YWJsZShub2RlKSB7XG4gIHJldHVybiBub2RlICYmICQobm9kZSkuaGFzQ2xhc3MoJ25vdGUtZWRpdGFibGUnKTtcbn1cblxuLyoqXG4gKiBAbWV0aG9kIGlzQ29udHJvbFNpemluZ1xuICpcbiAqIHJldHVybnMgd2hldGhlciBub2RlIGlzIGBub3RlLWNvbnRyb2wtc2l6aW5nYCBvciBub3QuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBpc0NvbnRyb2xTaXppbmcobm9kZSkge1xuICByZXR1cm4gbm9kZSAmJiAkKG5vZGUpLmhhc0NsYXNzKCdub3RlLWNvbnRyb2wtc2l6aW5nJyk7XG59XG5cbi8qKlxuICogQG1ldGhvZCBtYWtlUHJlZEJ5Tm9kZU5hbWVcbiAqXG4gKiByZXR1cm5zIHByZWRpY2F0ZSB3aGljaCBqdWRnZSB3aGV0aGVyIG5vZGVOYW1lIGlzIHNhbWVcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbm9kZU5hbWVcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5mdW5jdGlvbiBtYWtlUHJlZEJ5Tm9kZU5hbWUobm9kZU5hbWUpIHtcbiAgbm9kZU5hbWUgPSBub2RlTmFtZS50b1VwcGVyQ2FzZSgpO1xuICByZXR1cm4gZnVuY3Rpb24obm9kZSkge1xuICAgIHJldHVybiBub2RlICYmIG5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gbm9kZU5hbWU7XG4gIH07XG59XG5cbi8qKlxuICogQG1ldGhvZCBpc1RleHRcbiAqXG4gKlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiBub2RlJ3MgdHlwZSBpcyB0ZXh0KDMpXG4gKi9cbmZ1bmN0aW9uIGlzVGV4dChub2RlKSB7XG4gIHJldHVybiBub2RlICYmIG5vZGUubm9kZVR5cGUgPT09IDM7XG59XG5cbi8qKlxuICogQG1ldGhvZCBpc0VsZW1lbnRcbiAqXG4gKlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiBub2RlJ3MgdHlwZSBpcyBlbGVtZW50KDEpXG4gKi9cbmZ1bmN0aW9uIGlzRWxlbWVudChub2RlKSB7XG4gIHJldHVybiBub2RlICYmIG5vZGUubm9kZVR5cGUgPT09IDE7XG59XG5cbi8qKlxuICogZXgpIGJyLCBjb2wsIGVtYmVkLCBociwgaW1nLCBpbnB1dCwgLi4uXG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL2h0bWwvd2cvZHJhZnRzL2h0bWwvbWFzdGVyL3N5bnRheC5odG1sI3ZvaWQtZWxlbWVudHNcbiAqL1xuZnVuY3Rpb24gaXNWb2lkKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgL15CUnxeSU1HfF5IUnxeSUZSQU1FfF5CVVRUT058XklOUFVULy50ZXN0KG5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKSk7XG59XG5cbmZ1bmN0aW9uIGlzUGFyYShub2RlKSB7XG4gIGlmIChpc0VkaXRhYmxlKG5vZGUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gQ2hyb21lKHYzMS4wKSwgRkYodjI1LjAuMSkgdXNlIERJViBmb3IgcGFyYWdyYXBoXG4gIHJldHVybiBub2RlICYmIC9eRElWfF5QfF5MSXxeSFsxLTddLy50ZXN0KG5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKSk7XG59XG5cbmZ1bmN0aW9uIGlzSGVhZGluZyhub2RlKSB7XG4gIHJldHVybiBub2RlICYmIC9eSFsxLTddLy50ZXN0KG5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKSk7XG59XG5cbmNvbnN0IGlzUHJlID0gbWFrZVByZWRCeU5vZGVOYW1lKCdQUkUnKTtcblxuY29uc3QgaXNMaSA9IG1ha2VQcmVkQnlOb2RlTmFtZSgnTEknKTtcblxuZnVuY3Rpb24gaXNQdXJlUGFyYShub2RlKSB7XG4gIHJldHVybiBpc1BhcmEobm9kZSkgJiYgIWlzTGkobm9kZSk7XG59XG5cbmNvbnN0IGlzVGFibGUgPSBtYWtlUHJlZEJ5Tm9kZU5hbWUoJ1RBQkxFJyk7XG5cbmNvbnN0IGlzRGF0YSA9IG1ha2VQcmVkQnlOb2RlTmFtZSgnREFUQScpO1xuXG5mdW5jdGlvbiBpc0lubGluZShub2RlKSB7XG4gIHJldHVybiAhaXNCb2R5Q29udGFpbmVyKG5vZGUpICYmXG4gICAgICAgICAhaXNMaXN0KG5vZGUpICYmXG4gICAgICAgICAhaXNIcihub2RlKSAmJlxuICAgICAgICAgIWlzUGFyYShub2RlKSAmJlxuICAgICAgICAgIWlzVGFibGUobm9kZSkgJiZcbiAgICAgICAgICFpc0Jsb2NrcXVvdGUobm9kZSkgJiZcbiAgICAgICAgICFpc0RhdGEobm9kZSk7XG59XG5cbmZ1bmN0aW9uIGlzTGlzdChub2RlKSB7XG4gIHJldHVybiBub2RlICYmIC9eVUx8Xk9MLy50ZXN0KG5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKSk7XG59XG5cbmNvbnN0IGlzSHIgPSBtYWtlUHJlZEJ5Tm9kZU5hbWUoJ0hSJyk7XG5cbmZ1bmN0aW9uIGlzQ2VsbChub2RlKSB7XG4gIHJldHVybiBub2RlICYmIC9eVER8XlRILy50ZXN0KG5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKSk7XG59XG5cbmNvbnN0IGlzQmxvY2txdW90ZSA9IG1ha2VQcmVkQnlOb2RlTmFtZSgnQkxPQ0tRVU9URScpO1xuXG5mdW5jdGlvbiBpc0JvZHlDb250YWluZXIobm9kZSkge1xuICByZXR1cm4gaXNDZWxsKG5vZGUpIHx8IGlzQmxvY2txdW90ZShub2RlKSB8fCBpc0VkaXRhYmxlKG5vZGUpO1xufVxuXG5jb25zdCBpc0FuY2hvciA9IG1ha2VQcmVkQnlOb2RlTmFtZSgnQScpO1xuXG5mdW5jdGlvbiBpc1BhcmFJbmxpbmUobm9kZSkge1xuICByZXR1cm4gaXNJbmxpbmUobm9kZSkgJiYgISFhbmNlc3Rvcihub2RlLCBpc1BhcmEpO1xufVxuXG5mdW5jdGlvbiBpc0JvZHlJbmxpbmUobm9kZSkge1xuICByZXR1cm4gaXNJbmxpbmUobm9kZSkgJiYgIWFuY2VzdG9yKG5vZGUsIGlzUGFyYSk7XG59XG5cbmNvbnN0IGlzQm9keSA9IG1ha2VQcmVkQnlOb2RlTmFtZSgnQk9EWScpO1xuXG4vKipcbiAqIHJldHVybnMgd2hldGhlciBub2RlQiBpcyBjbG9zZXN0IHNpYmxpbmcgb2Ygbm9kZUFcbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVBXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVCXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBpc0Nsb3Nlc3RTaWJsaW5nKG5vZGVBLCBub2RlQikge1xuICByZXR1cm4gbm9kZUEubmV4dFNpYmxpbmcgPT09IG5vZGVCIHx8XG4gICAgICAgICBub2RlQS5wcmV2aW91c1NpYmxpbmcgPT09IG5vZGVCO1xufVxuXG4vKipcbiAqIHJldHVybnMgYXJyYXkgb2YgY2xvc2VzdCBzaWJsaW5ncyB3aXRoIG5vZGVcbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IFtwcmVkXSAtIHByZWRpY2F0ZSBmdW5jdGlvblxuICogQHJldHVybiB7Tm9kZVtdfVxuICovXG5mdW5jdGlvbiB3aXRoQ2xvc2VzdFNpYmxpbmdzKG5vZGUsIHByZWQpIHtcbiAgcHJlZCA9IHByZWQgfHwgZnVuYy5vaztcblxuICBjb25zdCBzaWJsaW5ncyA9IFtdO1xuICBpZiAobm9kZS5wcmV2aW91c1NpYmxpbmcgJiYgcHJlZChub2RlLnByZXZpb3VzU2libGluZykpIHtcbiAgICBzaWJsaW5ncy5wdXNoKG5vZGUucHJldmlvdXNTaWJsaW5nKTtcbiAgfVxuICBzaWJsaW5ncy5wdXNoKG5vZGUpO1xuICBpZiAobm9kZS5uZXh0U2libGluZyAmJiBwcmVkKG5vZGUubmV4dFNpYmxpbmcpKSB7XG4gICAgc2libGluZ3MucHVzaChub2RlLm5leHRTaWJsaW5nKTtcbiAgfVxuICByZXR1cm4gc2libGluZ3M7XG59XG5cbi8qKlxuICogYmxhbmsgSFRNTCBmb3IgY3Vyc29yIHBvc2l0aW9uXG4gKiAtIFt3b3JrYXJvdW5kXSBvbGQgSUUgb25seSB3b3JrcyB3aXRoICZuYnNwO1xuICogLSBbd29ya2Fyb3VuZF0gSUUxMSBhbmQgb3RoZXIgYnJvd3NlciB3b3JrcyB3aXRoIGJvZ3VzIGJyXG4gKi9cbmNvbnN0IGJsYW5rSFRNTCA9IGVudi5pc01TSUUgJiYgZW52LmJyb3dzZXJWZXJzaW9uIDwgMTEgPyAnJm5ic3A7JyA6ICc8YnI+JztcblxuLyoqXG4gKiBAbWV0aG9kIG5vZGVMZW5ndGhcbiAqXG4gKiByZXR1cm5zICN0ZXh0J3MgdGV4dCBzaXplIG9yIGVsZW1lbnQncyBjaGlsZE5vZGVzIHNpemVcbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqL1xuZnVuY3Rpb24gbm9kZUxlbmd0aChub2RlKSB7XG4gIGlmIChpc1RleHQobm9kZSkpIHtcbiAgICByZXR1cm4gbm9kZS5ub2RlVmFsdWUubGVuZ3RoO1xuICB9XG5cbiAgaWYgKG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZS5jaGlsZE5vZGVzLmxlbmd0aDtcbiAgfVxuXG4gIHJldHVybiAwO1xufVxuXG4vKipcbiAqIHJldHVybnMgd2hldGhlciBub2RlIGlzIGVtcHR5IG9yIG5vdC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzRW1wdHkobm9kZSkge1xuICBjb25zdCBsZW4gPSBub2RlTGVuZ3RoKG5vZGUpO1xuXG4gIGlmIChsZW4gPT09IDApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIGlmICghaXNUZXh0KG5vZGUpICYmIGxlbiA9PT0gMSAmJiBub2RlLmlubmVySFRNTCA9PT0gYmxhbmtIVE1MKSB7XG4gICAgLy8gZXgpIDxwPjxicj48L3A+LCA8c3Bhbj48YnI+PC9zcGFuPlxuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2UgaWYgKGxpc3RzLmFsbChub2RlLmNoaWxkTm9kZXMsIGlzVGV4dCkgJiYgbm9kZS5pbm5lckhUTUwgPT09ICcnKSB7XG4gICAgLy8gZXgpIDxwPjwvcD4sIDxzcGFuPjwvc3Bhbj5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBwYWRkaW5nIGJsYW5rSFRNTCBpZiBub2RlIGlzIGVtcHR5IChmb3IgY3Vyc29yIHBvc2l0aW9uKVxuICovXG5mdW5jdGlvbiBwYWRkaW5nQmxhbmtIVE1MKG5vZGUpIHtcbiAgaWYgKCFpc1ZvaWQobm9kZSkgJiYgIW5vZGVMZW5ndGgobm9kZSkpIHtcbiAgICBub2RlLmlubmVySFRNTCA9IGJsYW5rSFRNTDtcbiAgfVxufVxuXG4vKipcbiAqIGZpbmQgbmVhcmVzdCBhbmNlc3RvciBwcmVkaWNhdGUgaGl0XG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkIC0gcHJlZGljYXRlIGZ1bmN0aW9uXG4gKi9cbmZ1bmN0aW9uIGFuY2VzdG9yKG5vZGUsIHByZWQpIHtcbiAgd2hpbGUgKG5vZGUpIHtcbiAgICBpZiAocHJlZChub2RlKSkgeyByZXR1cm4gbm9kZTsgfVxuICAgIGlmIChpc0VkaXRhYmxlKG5vZGUpKSB7IGJyZWFrOyB9XG5cbiAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIGZpbmQgbmVhcmVzdCBhbmNlc3RvciBvbmx5IHNpbmdsZSBjaGlsZCBibG9vZCBsaW5lIGFuZCBwcmVkaWNhdGUgaGl0XG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkIC0gcHJlZGljYXRlIGZ1bmN0aW9uXG4gKi9cbmZ1bmN0aW9uIHNpbmdsZUNoaWxkQW5jZXN0b3Iobm9kZSwgcHJlZCkge1xuICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuXG4gIHdoaWxlIChub2RlKSB7XG4gICAgaWYgKG5vZGVMZW5ndGgobm9kZSkgIT09IDEpIHsgYnJlYWs7IH1cbiAgICBpZiAocHJlZChub2RlKSkgeyByZXR1cm4gbm9kZTsgfVxuICAgIGlmIChpc0VkaXRhYmxlKG5vZGUpKSB7IGJyZWFrOyB9XG5cbiAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIHJldHVybnMgbmV3IGFycmF5IG9mIGFuY2VzdG9yIG5vZGVzICh1bnRpbCBwcmVkaWNhdGUgaGl0KS5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRpb25hbF0gcHJlZCAtIHByZWRpY2F0ZSBmdW5jdGlvblxuICovXG5mdW5jdGlvbiBsaXN0QW5jZXN0b3Iobm9kZSwgcHJlZCkge1xuICBwcmVkID0gcHJlZCB8fCBmdW5jLmZhaWw7XG5cbiAgY29uc3QgYW5jZXN0b3JzID0gW107XG4gIGFuY2VzdG9yKG5vZGUsIGZ1bmN0aW9uKGVsKSB7XG4gICAgaWYgKCFpc0VkaXRhYmxlKGVsKSkge1xuICAgICAgYW5jZXN0b3JzLnB1c2goZWwpO1xuICAgIH1cblxuICAgIHJldHVybiBwcmVkKGVsKTtcbiAgfSk7XG4gIHJldHVybiBhbmNlc3RvcnM7XG59XG5cbi8qKlxuICogZmluZCBmYXJ0aGVzdCBhbmNlc3RvciBwcmVkaWNhdGUgaGl0XG4gKi9cbmZ1bmN0aW9uIGxhc3RBbmNlc3Rvcihub2RlLCBwcmVkKSB7XG4gIGNvbnN0IGFuY2VzdG9ycyA9IGxpc3RBbmNlc3Rvcihub2RlKTtcbiAgcmV0dXJuIGxpc3RzLmxhc3QoYW5jZXN0b3JzLmZpbHRlcihwcmVkKSk7XG59XG5cbi8qKlxuICogcmV0dXJucyBjb21tb24gYW5jZXN0b3Igbm9kZSBiZXR3ZWVuIHR3byBub2Rlcy5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVBXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVCXG4gKi9cbmZ1bmN0aW9uIGNvbW1vbkFuY2VzdG9yKG5vZGVBLCBub2RlQikge1xuICBjb25zdCBhbmNlc3RvcnMgPSBsaXN0QW5jZXN0b3Iobm9kZUEpO1xuICBmb3IgKGxldCBuID0gbm9kZUI7IG47IG4gPSBuLnBhcmVudE5vZGUpIHtcbiAgICBpZiAoJC5pbkFycmF5KG4sIGFuY2VzdG9ycykgPiAtMSkgeyByZXR1cm4gbjsgfVxuICB9XG4gIHJldHVybiBudWxsOyAvLyBkaWZmZXJlbmNlIGRvY3VtZW50IGFyZWFcbn1cblxuLyoqXG4gKiBsaXN0aW5nIGFsbCBwcmV2aW91cyBzaWJsaW5ncyAodW50aWwgcHJlZGljYXRlIGhpdCkuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9uYWxdIHByZWQgLSBwcmVkaWNhdGUgZnVuY3Rpb25cbiAqL1xuZnVuY3Rpb24gbGlzdFByZXYobm9kZSwgcHJlZCkge1xuICBwcmVkID0gcHJlZCB8fCBmdW5jLmZhaWw7XG5cbiAgY29uc3Qgbm9kZXMgPSBbXTtcbiAgd2hpbGUgKG5vZGUpIHtcbiAgICBpZiAocHJlZChub2RlKSkgeyBicmVhazsgfVxuICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgbm9kZSA9IG5vZGUucHJldmlvdXNTaWJsaW5nO1xuICB9XG4gIHJldHVybiBub2Rlcztcbn1cblxuLyoqXG4gKiBsaXN0aW5nIG5leHQgc2libGluZ3MgKHVudGlsIHByZWRpY2F0ZSBoaXQpLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW3ByZWRdIC0gcHJlZGljYXRlIGZ1bmN0aW9uXG4gKi9cbmZ1bmN0aW9uIGxpc3ROZXh0KG5vZGUsIHByZWQpIHtcbiAgcHJlZCA9IHByZWQgfHwgZnVuYy5mYWlsO1xuXG4gIGNvbnN0IG5vZGVzID0gW107XG4gIHdoaWxlIChub2RlKSB7XG4gICAgaWYgKHByZWQobm9kZSkpIHsgYnJlYWs7IH1cbiAgICBub2Rlcy5wdXNoKG5vZGUpO1xuICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nO1xuICB9XG4gIHJldHVybiBub2Rlcztcbn1cblxuLyoqXG4gKiBsaXN0aW5nIGRlc2NlbmRhbnQgbm9kZXNcbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcmVkXSAtIHByZWRpY2F0ZSBmdW5jdGlvblxuICovXG5mdW5jdGlvbiBsaXN0RGVzY2VuZGFudChub2RlLCBwcmVkKSB7XG4gIGNvbnN0IGRlc2NlbmRhbnRzID0gW107XG4gIHByZWQgPSBwcmVkIHx8IGZ1bmMub2s7XG5cbiAgLy8gc3RhcnQgREZTKGRlcHRoIGZpcnN0IHNlYXJjaCkgd2l0aCBub2RlXG4gIChmdW5jdGlvbiBmbldhbGsoY3VycmVudCkge1xuICAgIGlmIChub2RlICE9PSBjdXJyZW50ICYmIHByZWQoY3VycmVudCkpIHtcbiAgICAgIGRlc2NlbmRhbnRzLnB1c2goY3VycmVudCk7XG4gICAgfVxuICAgIGZvciAobGV0IGlkeCA9IDAsIGxlbiA9IGN1cnJlbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGlkeCA8IGxlbjsgaWR4KyspIHtcbiAgICAgIGZuV2FsayhjdXJyZW50LmNoaWxkTm9kZXNbaWR4XSk7XG4gICAgfVxuICB9KShub2RlKTtcblxuICByZXR1cm4gZGVzY2VuZGFudHM7XG59XG5cbi8qKlxuICogd3JhcCBub2RlIHdpdGggbmV3IHRhZy5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7Tm9kZX0gdGFnTmFtZSBvZiB3cmFwcGVyXG4gKiBAcmV0dXJuIHtOb2RlfSAtIHdyYXBwZXJcbiAqL1xuZnVuY3Rpb24gd3JhcChub2RlLCB3cmFwcGVyTmFtZSkge1xuICBjb25zdCBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gIGNvbnN0IHdyYXBwZXIgPSAkKCc8JyArIHdyYXBwZXJOYW1lICsgJz4nKVswXTtcblxuICBwYXJlbnQuaW5zZXJ0QmVmb3JlKHdyYXBwZXIsIG5vZGUpO1xuICB3cmFwcGVyLmFwcGVuZENoaWxkKG5vZGUpO1xuXG4gIHJldHVybiB3cmFwcGVyO1xufVxuXG4vKipcbiAqIGluc2VydCBub2RlIGFmdGVyIHByZWNlZGluZ1xuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtOb2RlfSBwcmVjZWRpbmcgLSBwcmVkaWNhdGUgZnVuY3Rpb25cbiAqL1xuZnVuY3Rpb24gaW5zZXJ0QWZ0ZXIobm9kZSwgcHJlY2VkaW5nKSB7XG4gIGNvbnN0IG5leHQgPSBwcmVjZWRpbmcubmV4dFNpYmxpbmc7XG4gIGxldCBwYXJlbnQgPSBwcmVjZWRpbmcucGFyZW50Tm9kZTtcbiAgaWYgKG5leHQpIHtcbiAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKG5vZGUsIG5leHQpO1xuICB9IGVsc2Uge1xuICAgIHBhcmVudC5hcHBlbmRDaGlsZChub2RlKTtcbiAgfVxuICByZXR1cm4gbm9kZTtcbn1cblxuLyoqXG4gKiBhcHBlbmQgZWxlbWVudHMuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge0NvbGxlY3Rpb259IGFDaGlsZFxuICovXG5mdW5jdGlvbiBhcHBlbmRDaGlsZE5vZGVzKG5vZGUsIGFDaGlsZCkge1xuICAkLmVhY2goYUNoaWxkLCBmdW5jdGlvbihpZHgsIGNoaWxkKSB7XG4gICAgbm9kZS5hcHBlbmRDaGlsZChjaGlsZCk7XG4gIH0pO1xuICByZXR1cm4gbm9kZTtcbn1cblxuLyoqXG4gKiByZXR1cm5zIHdoZXRoZXIgYm91bmRhcnlQb2ludCBpcyBsZWZ0IGVkZ2Ugb3Igbm90LlxuICpcbiAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzTGVmdEVkZ2VQb2ludChwb2ludCkge1xuICByZXR1cm4gcG9pbnQub2Zmc2V0ID09PSAwO1xufVxuXG4vKipcbiAqIHJldHVybnMgd2hldGhlciBib3VuZGFyeVBvaW50IGlzIHJpZ2h0IGVkZ2Ugb3Igbm90LlxuICpcbiAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzUmlnaHRFZGdlUG9pbnQocG9pbnQpIHtcbiAgcmV0dXJuIHBvaW50Lm9mZnNldCA9PT0gbm9kZUxlbmd0aChwb2ludC5ub2RlKTtcbn1cblxuLyoqXG4gKiByZXR1cm5zIHdoZXRoZXIgYm91bmRhcnlQb2ludCBpcyBlZGdlIG9yIG5vdC5cbiAqXG4gKiBAcGFyYW0ge0JvdW5kYXJ5UG9pbnR9IHBvaW50XG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBpc0VkZ2VQb2ludChwb2ludCkge1xuICByZXR1cm4gaXNMZWZ0RWRnZVBvaW50KHBvaW50KSB8fCBpc1JpZ2h0RWRnZVBvaW50KHBvaW50KTtcbn1cblxuLyoqXG4gKiByZXR1cm5zIHdoZXRoZXIgbm9kZSBpcyBsZWZ0IGVkZ2Ugb2YgYW5jZXN0b3Igb3Igbm90LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtOb2RlfSBhbmNlc3RvclxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNMZWZ0RWRnZU9mKG5vZGUsIGFuY2VzdG9yKSB7XG4gIHdoaWxlIChub2RlICYmIG5vZGUgIT09IGFuY2VzdG9yKSB7XG4gICAgaWYgKHBvc2l0aW9uKG5vZGUpICE9PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiByZXR1cm5zIHdoZXRoZXIgbm9kZSBpcyByaWdodCBlZGdlIG9mIGFuY2VzdG9yIG9yIG5vdC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7Tm9kZX0gYW5jZXN0b3JcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzUmlnaHRFZGdlT2Yobm9kZSwgYW5jZXN0b3IpIHtcbiAgaWYgKCFhbmNlc3Rvcikge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB3aGlsZSAobm9kZSAmJiBub2RlICE9PSBhbmNlc3Rvcikge1xuICAgIGlmIChwb3NpdGlvbihub2RlKSAhPT0gbm9kZUxlbmd0aChub2RlLnBhcmVudE5vZGUpIC0gMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogcmV0dXJucyB3aGV0aGVyIHBvaW50IGlzIGxlZnQgZWRnZSBvZiBhbmNlc3RvciBvciBub3QuXG4gKiBAcGFyYW0ge0JvdW5kYXJ5UG9pbnR9IHBvaW50XG4gKiBAcGFyYW0ge05vZGV9IGFuY2VzdG9yXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBpc0xlZnRFZGdlUG9pbnRPZihwb2ludCwgYW5jZXN0b3IpIHtcbiAgcmV0dXJuIGlzTGVmdEVkZ2VQb2ludChwb2ludCkgJiYgaXNMZWZ0RWRnZU9mKHBvaW50Lm5vZGUsIGFuY2VzdG9yKTtcbn1cblxuLyoqXG4gKiByZXR1cm5zIHdoZXRoZXIgcG9pbnQgaXMgcmlnaHQgZWRnZSBvZiBhbmNlc3RvciBvciBub3QuXG4gKiBAcGFyYW0ge0JvdW5kYXJ5UG9pbnR9IHBvaW50XG4gKiBAcGFyYW0ge05vZGV9IGFuY2VzdG9yXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5mdW5jdGlvbiBpc1JpZ2h0RWRnZVBvaW50T2YocG9pbnQsIGFuY2VzdG9yKSB7XG4gIHJldHVybiBpc1JpZ2h0RWRnZVBvaW50KHBvaW50KSAmJiBpc1JpZ2h0RWRnZU9mKHBvaW50Lm5vZGUsIGFuY2VzdG9yKTtcbn1cblxuLyoqXG4gKiByZXR1cm5zIG9mZnNldCBmcm9tIHBhcmVudC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqL1xuZnVuY3Rpb24gcG9zaXRpb24obm9kZSkge1xuICBsZXQgb2Zmc2V0ID0gMDtcbiAgd2hpbGUgKChub2RlID0gbm9kZS5wcmV2aW91c1NpYmxpbmcpKSB7XG4gICAgb2Zmc2V0ICs9IDE7XG4gIH1cbiAgcmV0dXJuIG9mZnNldDtcbn1cblxuZnVuY3Rpb24gaGFzQ2hpbGRyZW4obm9kZSkge1xuICByZXR1cm4gISEobm9kZSAmJiBub2RlLmNoaWxkTm9kZXMgJiYgbm9kZS5jaGlsZE5vZGVzLmxlbmd0aCk7XG59XG5cbi8qKlxuICogcmV0dXJucyBwcmV2aW91cyBib3VuZGFyeVBvaW50XG4gKlxuICogQHBhcmFtIHtCb3VuZGFyeVBvaW50fSBwb2ludFxuICogQHBhcmFtIHtCb29sZWFufSBpc1NraXBJbm5lck9mZnNldFxuICogQHJldHVybiB7Qm91bmRhcnlQb2ludH1cbiAqL1xuZnVuY3Rpb24gcHJldlBvaW50KHBvaW50LCBpc1NraXBJbm5lck9mZnNldCkge1xuICBsZXQgbm9kZTtcbiAgbGV0IG9mZnNldDtcblxuICBpZiAocG9pbnQub2Zmc2V0ID09PSAwKSB7XG4gICAgaWYgKGlzRWRpdGFibGUocG9pbnQubm9kZSkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIG5vZGUgPSBwb2ludC5ub2RlLnBhcmVudE5vZGU7XG4gICAgb2Zmc2V0ID0gcG9zaXRpb24ocG9pbnQubm9kZSk7XG4gIH0gZWxzZSBpZiAoaGFzQ2hpbGRyZW4ocG9pbnQubm9kZSkpIHtcbiAgICBub2RlID0gcG9pbnQubm9kZS5jaGlsZE5vZGVzW3BvaW50Lm9mZnNldCAtIDFdO1xuICAgIG9mZnNldCA9IG5vZGVMZW5ndGgobm9kZSk7XG4gIH0gZWxzZSB7XG4gICAgbm9kZSA9IHBvaW50Lm5vZGU7XG4gICAgb2Zmc2V0ID0gaXNTa2lwSW5uZXJPZmZzZXQgPyAwIDogcG9pbnQub2Zmc2V0IC0gMTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbm9kZTogbm9kZSxcbiAgICBvZmZzZXQ6IG9mZnNldFxuICB9O1xufVxuXG4vKipcbiAqIHJldHVybnMgbmV4dCBib3VuZGFyeVBvaW50XG4gKlxuICogQHBhcmFtIHtCb3VuZGFyeVBvaW50fSBwb2ludFxuICogQHBhcmFtIHtCb29sZWFufSBpc1NraXBJbm5lck9mZnNldFxuICogQHJldHVybiB7Qm91bmRhcnlQb2ludH1cbiAqL1xuZnVuY3Rpb24gbmV4dFBvaW50KHBvaW50LCBpc1NraXBJbm5lck9mZnNldCkge1xuICBsZXQgbm9kZSwgb2Zmc2V0O1xuXG4gIGlmIChub2RlTGVuZ3RoKHBvaW50Lm5vZGUpID09PSBwb2ludC5vZmZzZXQpIHtcbiAgICBpZiAoaXNFZGl0YWJsZShwb2ludC5ub2RlKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgbm9kZSA9IHBvaW50Lm5vZGUucGFyZW50Tm9kZTtcbiAgICBvZmZzZXQgPSBwb3NpdGlvbihwb2ludC5ub2RlKSArIDE7XG4gIH0gZWxzZSBpZiAoaGFzQ2hpbGRyZW4ocG9pbnQubm9kZSkpIHtcbiAgICBub2RlID0gcG9pbnQubm9kZS5jaGlsZE5vZGVzW3BvaW50Lm9mZnNldF07XG4gICAgb2Zmc2V0ID0gMDtcbiAgfSBlbHNlIHtcbiAgICBub2RlID0gcG9pbnQubm9kZTtcbiAgICBvZmZzZXQgPSBpc1NraXBJbm5lck9mZnNldCA/IG5vZGVMZW5ndGgocG9pbnQubm9kZSkgOiBwb2ludC5vZmZzZXQgKyAxO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBub2RlOiBub2RlLFxuICAgIG9mZnNldDogb2Zmc2V0XG4gIH07XG59XG5cbi8qKlxuICogcmV0dXJucyB3aGV0aGVyIHBvaW50QSBhbmQgcG9pbnRCIGlzIHNhbWUgb3Igbm90LlxuICpcbiAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRBXG4gKiBAcGFyYW0ge0JvdW5kYXJ5UG9pbnR9IHBvaW50QlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNTYW1lUG9pbnQocG9pbnRBLCBwb2ludEIpIHtcbiAgcmV0dXJuIHBvaW50QS5ub2RlID09PSBwb2ludEIubm9kZSAmJiBwb2ludEEub2Zmc2V0ID09PSBwb2ludEIub2Zmc2V0O1xufVxuXG4vKipcbiAqIHJldHVybnMgd2hldGhlciBwb2ludCBpcyB2aXNpYmxlIChjYW4gc2V0IGN1cnNvcikgb3Igbm90LlxuICpcbiAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzVmlzaWJsZVBvaW50KHBvaW50KSB7XG4gIGlmIChpc1RleHQocG9pbnQubm9kZSkgfHwgIWhhc0NoaWxkcmVuKHBvaW50Lm5vZGUpIHx8IGlzRW1wdHkocG9pbnQubm9kZSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGNvbnN0IGxlZnROb2RlID0gcG9pbnQubm9kZS5jaGlsZE5vZGVzW3BvaW50Lm9mZnNldCAtIDFdO1xuICBjb25zdCByaWdodE5vZGUgPSBwb2ludC5ub2RlLmNoaWxkTm9kZXNbcG9pbnQub2Zmc2V0XTtcbiAgaWYgKCghbGVmdE5vZGUgfHwgaXNWb2lkKGxlZnROb2RlKSkgJiYgKCFyaWdodE5vZGUgfHwgaXNWb2lkKHJpZ2h0Tm9kZSkpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogQG1ldGhvZCBwcmV2UG9pbnRVdGlsXG4gKlxuICogQHBhcmFtIHtCb3VuZGFyeVBvaW50fSBwb2ludFxuICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZFxuICogQHJldHVybiB7Qm91bmRhcnlQb2ludH1cbiAqL1xuZnVuY3Rpb24gcHJldlBvaW50VW50aWwocG9pbnQsIHByZWQpIHtcbiAgd2hpbGUgKHBvaW50KSB7XG4gICAgaWYgKHByZWQocG9pbnQpKSB7XG4gICAgICByZXR1cm4gcG9pbnQ7XG4gICAgfVxuXG4gICAgcG9pbnQgPSBwcmV2UG9pbnQocG9pbnQpO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQG1ldGhvZCBuZXh0UG9pbnRVbnRpbFxuICpcbiAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRcbiAqIEByZXR1cm4ge0JvdW5kYXJ5UG9pbnR9XG4gKi9cbmZ1bmN0aW9uIG5leHRQb2ludFVudGlsKHBvaW50LCBwcmVkKSB7XG4gIHdoaWxlIChwb2ludCkge1xuICAgIGlmIChwcmVkKHBvaW50KSkge1xuICAgICAgcmV0dXJuIHBvaW50O1xuICAgIH1cblxuICAgIHBvaW50ID0gbmV4dFBvaW50KHBvaW50KTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIHJldHVybnMgd2hldGhlciBwb2ludCBoYXMgY2hhcmFjdGVyIG9yIG5vdC5cbiAqXG4gKiBAcGFyYW0ge1BvaW50fSBwb2ludFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNDaGFyUG9pbnQocG9pbnQpIHtcbiAgaWYgKCFpc1RleHQocG9pbnQubm9kZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBjaCA9IHBvaW50Lm5vZGUubm9kZVZhbHVlLmNoYXJBdChwb2ludC5vZmZzZXQgLSAxKTtcbiAgcmV0dXJuIGNoICYmIChjaCAhPT0gJyAnICYmIGNoICE9PSBOQlNQX0NIQVIpO1xufVxuXG4vKipcbiAqIEBtZXRob2Qgd2Fsa1BvaW50XG4gKlxuICogQHBhcmFtIHtCb3VuZGFyeVBvaW50fSBzdGFydFBvaW50XG4gKiBAcGFyYW0ge0JvdW5kYXJ5UG9pbnR9IGVuZFBvaW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGlzU2tpcElubmVyT2Zmc2V0XG4gKi9cbmZ1bmN0aW9uIHdhbGtQb2ludChzdGFydFBvaW50LCBlbmRQb2ludCwgaGFuZGxlciwgaXNTa2lwSW5uZXJPZmZzZXQpIHtcbiAgbGV0IHBvaW50ID0gc3RhcnRQb2ludDtcblxuICB3aGlsZSAocG9pbnQpIHtcbiAgICBoYW5kbGVyKHBvaW50KTtcblxuICAgIGlmIChpc1NhbWVQb2ludChwb2ludCwgZW5kUG9pbnQpKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjb25zdCBpc1NraXBPZmZzZXQgPSBpc1NraXBJbm5lck9mZnNldCAmJlxuICAgICAgICAgICAgICAgICAgICAgICBzdGFydFBvaW50Lm5vZGUgIT09IHBvaW50Lm5vZGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgZW5kUG9pbnQubm9kZSAhPT0gcG9pbnQubm9kZTtcbiAgICBwb2ludCA9IG5leHRQb2ludChwb2ludCwgaXNTa2lwT2Zmc2V0KTtcbiAgfVxufVxuXG4vKipcbiAqIEBtZXRob2QgbWFrZU9mZnNldFBhdGhcbiAqXG4gKiByZXR1cm4gb2Zmc2V0UGF0aChhcnJheSBvZiBvZmZzZXQpIGZyb20gYW5jZXN0b3JcbiAqXG4gKiBAcGFyYW0ge05vZGV9IGFuY2VzdG9yIC0gYW5jZXN0b3Igbm9kZVxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKi9cbmZ1bmN0aW9uIG1ha2VPZmZzZXRQYXRoKGFuY2VzdG9yLCBub2RlKSB7XG4gIGNvbnN0IGFuY2VzdG9ycyA9IGxpc3RBbmNlc3Rvcihub2RlLCBmdW5jLmVxKGFuY2VzdG9yKSk7XG4gIHJldHVybiBhbmNlc3RvcnMubWFwKHBvc2l0aW9uKS5yZXZlcnNlKCk7XG59XG5cbi8qKlxuICogQG1ldGhvZCBmcm9tT2Zmc2V0UGF0aFxuICpcbiAqIHJldHVybiBlbGVtZW50IGZyb20gb2Zmc2V0UGF0aChhcnJheSBvZiBvZmZzZXQpXG4gKlxuICogQHBhcmFtIHtOb2RlfSBhbmNlc3RvciAtIGFuY2VzdG9yIG5vZGVcbiAqIEBwYXJhbSB7YXJyYXl9IG9mZnNldHMgLSBvZmZzZXRQYXRoXG4gKi9cbmZ1bmN0aW9uIGZyb21PZmZzZXRQYXRoKGFuY2VzdG9yLCBvZmZzZXRzKSB7XG4gIGxldCBjdXJyZW50ID0gYW5jZXN0b3I7XG4gIGZvciAobGV0IGkgPSAwLCBsZW4gPSBvZmZzZXRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgaWYgKGN1cnJlbnQuY2hpbGROb2Rlcy5sZW5ndGggPD0gb2Zmc2V0c1tpXSkge1xuICAgICAgY3VycmVudCA9IGN1cnJlbnQuY2hpbGROb2Rlc1tjdXJyZW50LmNoaWxkTm9kZXMubGVuZ3RoIC0gMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGN1cnJlbnQgPSBjdXJyZW50LmNoaWxkTm9kZXNbb2Zmc2V0c1tpXV07XG4gICAgfVxuICB9XG4gIHJldHVybiBjdXJyZW50O1xufVxuXG4vKipcbiAqIEBtZXRob2Qgc3BsaXROb2RlXG4gKlxuICogc3BsaXQgZWxlbWVudCBvciAjdGV4dFxuICpcbiAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuaXNTa2lwUGFkZGluZ0JsYW5rSFRNTF0gLSBkZWZhdWx0OiBmYWxzZVxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5pc05vdFNwbGl0RWRnZVBvaW50XSAtIGRlZmF1bHQ6IGZhbHNlXG4gKiBAcmV0dXJuIHtOb2RlfSByaWdodCBub2RlIG9mIGJvdW5kYXJ5UG9pbnRcbiAqL1xuZnVuY3Rpb24gc3BsaXROb2RlKHBvaW50LCBvcHRpb25zKSB7XG4gIGNvbnN0IGlzU2tpcFBhZGRpbmdCbGFua0hUTUwgPSBvcHRpb25zICYmIG9wdGlvbnMuaXNTa2lwUGFkZGluZ0JsYW5rSFRNTDtcbiAgY29uc3QgaXNOb3RTcGxpdEVkZ2VQb2ludCA9IG9wdGlvbnMgJiYgb3B0aW9ucy5pc05vdFNwbGl0RWRnZVBvaW50O1xuXG4gIC8vIGVkZ2UgY2FzZVxuICBpZiAoaXNFZGdlUG9pbnQocG9pbnQpICYmIChpc1RleHQocG9pbnQubm9kZSkgfHwgaXNOb3RTcGxpdEVkZ2VQb2ludCkpIHtcbiAgICBpZiAoaXNMZWZ0RWRnZVBvaW50KHBvaW50KSkge1xuICAgICAgcmV0dXJuIHBvaW50Lm5vZGU7XG4gICAgfSBlbHNlIGlmIChpc1JpZ2h0RWRnZVBvaW50KHBvaW50KSkge1xuICAgICAgcmV0dXJuIHBvaW50Lm5vZGUubmV4dFNpYmxpbmc7XG4gICAgfVxuICB9XG5cbiAgLy8gc3BsaXQgI3RleHRcbiAgaWYgKGlzVGV4dChwb2ludC5ub2RlKSkge1xuICAgIHJldHVybiBwb2ludC5ub2RlLnNwbGl0VGV4dChwb2ludC5vZmZzZXQpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGNoaWxkTm9kZSA9IHBvaW50Lm5vZGUuY2hpbGROb2Rlc1twb2ludC5vZmZzZXRdO1xuICAgIGNvbnN0IGNsb25lID0gaW5zZXJ0QWZ0ZXIocG9pbnQubm9kZS5jbG9uZU5vZGUoZmFsc2UpLCBwb2ludC5ub2RlKTtcbiAgICBhcHBlbmRDaGlsZE5vZGVzKGNsb25lLCBsaXN0TmV4dChjaGlsZE5vZGUpKTtcblxuICAgIGlmICghaXNTa2lwUGFkZGluZ0JsYW5rSFRNTCkge1xuICAgICAgcGFkZGluZ0JsYW5rSFRNTChwb2ludC5ub2RlKTtcbiAgICAgIHBhZGRpbmdCbGFua0hUTUwoY2xvbmUpO1xuICAgIH1cblxuICAgIHJldHVybiBjbG9uZTtcbiAgfVxufVxuXG4vKipcbiAqIEBtZXRob2Qgc3BsaXRUcmVlXG4gKlxuICogc3BsaXQgdHJlZSBieSBwb2ludFxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gcm9vdCAtIHNwbGl0IHJvb3RcbiAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuaXNTa2lwUGFkZGluZ0JsYW5rSFRNTF0gLSBkZWZhdWx0OiBmYWxzZVxuICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5pc05vdFNwbGl0RWRnZVBvaW50XSAtIGRlZmF1bHQ6IGZhbHNlXG4gKiBAcmV0dXJuIHtOb2RlfSByaWdodCBub2RlIG9mIGJvdW5kYXJ5UG9pbnRcbiAqL1xuZnVuY3Rpb24gc3BsaXRUcmVlKHJvb3QsIHBvaW50LCBvcHRpb25zKSB7XG4gIC8vIGV4KSBbI3RleHQsIDxzcGFuPiwgPHA+XVxuICBjb25zdCBhbmNlc3RvcnMgPSBsaXN0QW5jZXN0b3IocG9pbnQubm9kZSwgZnVuYy5lcShyb290KSk7XG5cbiAgaWYgKCFhbmNlc3RvcnMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH0gZWxzZSBpZiAoYW5jZXN0b3JzLmxlbmd0aCA9PT0gMSkge1xuICAgIHJldHVybiBzcGxpdE5vZGUocG9pbnQsIG9wdGlvbnMpO1xuICB9XG5cbiAgcmV0dXJuIGFuY2VzdG9ycy5yZWR1Y2UoZnVuY3Rpb24obm9kZSwgcGFyZW50KSB7XG4gICAgaWYgKG5vZGUgPT09IHBvaW50Lm5vZGUpIHtcbiAgICAgIG5vZGUgPSBzcGxpdE5vZGUocG9pbnQsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIHJldHVybiBzcGxpdE5vZGUoe1xuICAgICAgbm9kZTogcGFyZW50LFxuICAgICAgb2Zmc2V0OiBub2RlID8gcG9zaXRpb24obm9kZSkgOiBub2RlTGVuZ3RoKHBhcmVudClcbiAgICB9LCBvcHRpb25zKTtcbiAgfSk7XG59XG5cbi8qKlxuICogc3BsaXQgcG9pbnRcbiAqXG4gKiBAcGFyYW0ge1BvaW50fSBwb2ludFxuICogQHBhcmFtIHtCb29sZWFufSBpc0lubGluZVxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5mdW5jdGlvbiBzcGxpdFBvaW50KHBvaW50LCBpc0lubGluZSkge1xuICAvLyBmaW5kIHNwbGl0Um9vdCwgY29udGFpbmVyXG4gIC8vICAtIGlubGluZTogc3BsaXRSb290IGlzIGEgY2hpbGQgb2YgcGFyYWdyYXBoXG4gIC8vICAtIGJsb2NrOiBzcGxpdFJvb3QgaXMgYSBjaGlsZCBvZiBib2R5Q29udGFpbmVyXG4gIGNvbnN0IHByZWQgPSBpc0lubGluZSA/IGlzUGFyYSA6IGlzQm9keUNvbnRhaW5lcjtcbiAgY29uc3QgYW5jZXN0b3JzID0gbGlzdEFuY2VzdG9yKHBvaW50Lm5vZGUsIHByZWQpO1xuICBjb25zdCB0b3BBbmNlc3RvciA9IGxpc3RzLmxhc3QoYW5jZXN0b3JzKSB8fCBwb2ludC5ub2RlO1xuXG4gIGxldCBzcGxpdFJvb3QsIGNvbnRhaW5lcjtcbiAgaWYgKHByZWQodG9wQW5jZXN0b3IpKSB7XG4gICAgc3BsaXRSb290ID0gYW5jZXN0b3JzW2FuY2VzdG9ycy5sZW5ndGggLSAyXTtcbiAgICBjb250YWluZXIgPSB0b3BBbmNlc3RvcjtcbiAgfSBlbHNlIHtcbiAgICBzcGxpdFJvb3QgPSB0b3BBbmNlc3RvcjtcbiAgICBjb250YWluZXIgPSBzcGxpdFJvb3QucGFyZW50Tm9kZTtcbiAgfVxuXG4gIC8vIGlmIHNwbGl0Um9vdCBpcyBleGlzdHMsIHNwbGl0IHdpdGggc3BsaXRUcmVlXG4gIGxldCBwaXZvdCA9IHNwbGl0Um9vdCAmJiBzcGxpdFRyZWUoc3BsaXRSb290LCBwb2ludCwge1xuICAgIGlzU2tpcFBhZGRpbmdCbGFua0hUTUw6IGlzSW5saW5lLFxuICAgIGlzTm90U3BsaXRFZGdlUG9pbnQ6IGlzSW5saW5lXG4gIH0pO1xuXG4gIC8vIGlmIGNvbnRhaW5lciBpcyBwb2ludC5ub2RlLCBmaW5kIHBpdm90IHdpdGggcG9pbnQub2Zmc2V0XG4gIGlmICghcGl2b3QgJiYgY29udGFpbmVyID09PSBwb2ludC5ub2RlKSB7XG4gICAgcGl2b3QgPSBwb2ludC5ub2RlLmNoaWxkTm9kZXNbcG9pbnQub2Zmc2V0XTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcmlnaHROb2RlOiBwaXZvdCxcbiAgICBjb250YWluZXI6IGNvbnRhaW5lclxuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGUobm9kZU5hbWUpIHtcbiAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVUZXh0KHRleHQpIHtcbiAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHQpO1xufVxuXG4vKipcbiAqIEBtZXRob2QgcmVtb3ZlXG4gKlxuICogcmVtb3ZlIG5vZGUsIChpc1JlbW92ZUNoaWxkOiByZW1vdmUgY2hpbGQgb3Igbm90KVxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtCb29sZWFufSBpc1JlbW92ZUNoaWxkXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZShub2RlLCBpc1JlbW92ZUNoaWxkKSB7XG4gIGlmICghbm9kZSB8fCAhbm9kZS5wYXJlbnROb2RlKSB7IHJldHVybjsgfVxuICBpZiAobm9kZS5yZW1vdmVOb2RlKSB7IHJldHVybiBub2RlLnJlbW92ZU5vZGUoaXNSZW1vdmVDaGlsZCk7IH1cblxuICBjb25zdCBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gIGlmICghaXNSZW1vdmVDaGlsZCkge1xuICAgIGNvbnN0IG5vZGVzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgbm9kZXMucHVzaChub2RlLmNoaWxkTm9kZXNbaV0pO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBub2Rlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShub2Rlc1tpXSwgbm9kZSk7XG4gICAgfVxuICB9XG5cbiAgcGFyZW50LnJlbW92ZUNoaWxkKG5vZGUpO1xufVxuXG4vKipcbiAqIEBtZXRob2QgcmVtb3ZlV2hpbGVcbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRcbiAqL1xuZnVuY3Rpb24gcmVtb3ZlV2hpbGUobm9kZSwgcHJlZCkge1xuICB3aGlsZSAobm9kZSkge1xuICAgIGlmIChpc0VkaXRhYmxlKG5vZGUpIHx8ICFwcmVkKG5vZGUpKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBjb25zdCBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgcmVtb3ZlKG5vZGUpO1xuICAgIG5vZGUgPSBwYXJlbnQ7XG4gIH1cbn1cblxuLyoqXG4gKiBAbWV0aG9kIHJlcGxhY2VcbiAqXG4gKiByZXBsYWNlIG5vZGUgd2l0aCBwcm92aWRlZCBub2RlTmFtZVxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtTdHJpbmd9IG5vZGVOYW1lXG4gKiBAcmV0dXJuIHtOb2RlfSAtIG5ldyBub2RlXG4gKi9cbmZ1bmN0aW9uIHJlcGxhY2Uobm9kZSwgbm9kZU5hbWUpIHtcbiAgaWYgKG5vZGUubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gbm9kZU5hbWUudG9VcHBlckNhc2UoKSkge1xuICAgIHJldHVybiBub2RlO1xuICB9XG5cbiAgY29uc3QgbmV3Tm9kZSA9IGNyZWF0ZShub2RlTmFtZSk7XG5cbiAgaWYgKG5vZGUuc3R5bGUuY3NzVGV4dCkge1xuICAgIG5ld05vZGUuc3R5bGUuY3NzVGV4dCA9IG5vZGUuc3R5bGUuY3NzVGV4dDtcbiAgfVxuXG4gIGFwcGVuZENoaWxkTm9kZXMobmV3Tm9kZSwgbGlzdHMuZnJvbShub2RlLmNoaWxkTm9kZXMpKTtcbiAgaW5zZXJ0QWZ0ZXIobmV3Tm9kZSwgbm9kZSk7XG4gIHJlbW92ZShub2RlKTtcblxuICByZXR1cm4gbmV3Tm9kZTtcbn1cblxuY29uc3QgaXNUZXh0YXJlYSA9IG1ha2VQcmVkQnlOb2RlTmFtZSgnVEVYVEFSRUEnKTtcblxuLyoqXG4gKiBAcGFyYW0ge2pRdWVyeX0gJG5vZGVcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW3N0cmlwTGluZWJyZWFrc10gLSBkZWZhdWx0OiBmYWxzZVxuICovXG5mdW5jdGlvbiB2YWx1ZSgkbm9kZSwgc3RyaXBMaW5lYnJlYWtzKSB7XG4gIGNvbnN0IHZhbCA9IGlzVGV4dGFyZWEoJG5vZGVbMF0pID8gJG5vZGUudmFsKCkgOiAkbm9kZS5odG1sKCk7XG4gIGlmIChzdHJpcExpbmVicmVha3MpIHtcbiAgICByZXR1cm4gdmFsLnJlcGxhY2UoL1tcXG5cXHJdL2csICcnKTtcbiAgfVxuICByZXR1cm4gdmFsO1xufVxuXG4vKipcbiAqIEBtZXRob2QgaHRtbFxuICpcbiAqIGdldCB0aGUgSFRNTCBjb250ZW50cyBvZiBub2RlXG4gKlxuICogQHBhcmFtIHtqUXVlcnl9ICRub2RlXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtpc05ld2xpbmVPbkJsb2NrXVxuICovXG5mdW5jdGlvbiBodG1sKCRub2RlLCBpc05ld2xpbmVPbkJsb2NrKSB7XG4gIGxldCBtYXJrdXAgPSB2YWx1ZSgkbm9kZSk7XG5cbiAgaWYgKGlzTmV3bGluZU9uQmxvY2spIHtcbiAgICBjb25zdCByZWdleFRhZyA9IC88KFxcLz8pKFxcYig/ISEpW14+XFxzXSopKC4qPykoXFxzKlxcLz8+KS9nO1xuICAgIG1hcmt1cCA9IG1hcmt1cC5yZXBsYWNlKHJlZ2V4VGFnLCBmdW5jdGlvbihtYXRjaCwgZW5kU2xhc2gsIG5hbWUpIHtcbiAgICAgIG5hbWUgPSBuYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICBjb25zdCBpc0VuZE9mSW5saW5lQ29udGFpbmVyID0gL15ESVZ8XlREfF5USHxeUHxeTEl8XkhbMS03XS8udGVzdChuYW1lKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhIWVuZFNsYXNoO1xuICAgICAgY29uc3QgaXNCbG9ja05vZGUgPSAvXkJMT0NLUVVPVEV8XlRBQkxFfF5UQk9EWXxeVFJ8XkhSfF5VTHxeT0wvLnRlc3QobmFtZSk7XG5cbiAgICAgIHJldHVybiBtYXRjaCArICgoaXNFbmRPZklubGluZUNvbnRhaW5lciB8fCBpc0Jsb2NrTm9kZSkgPyAnXFxuJyA6ICcnKTtcbiAgICB9KTtcbiAgICBtYXJrdXAgPSAkLnRyaW0obWFya3VwKTtcbiAgfVxuXG4gIHJldHVybiBtYXJrdXA7XG59XG5cbmZ1bmN0aW9uIHBvc0Zyb21QbGFjZWhvbGRlcihwbGFjZWhvbGRlcikge1xuICBjb25zdCAkcGxhY2Vob2xkZXIgPSAkKHBsYWNlaG9sZGVyKTtcbiAgY29uc3QgcG9zID0gJHBsYWNlaG9sZGVyLm9mZnNldCgpO1xuICBjb25zdCBoZWlnaHQgPSAkcGxhY2Vob2xkZXIub3V0ZXJIZWlnaHQodHJ1ZSk7IC8vIGluY2x1ZGUgbWFyZ2luXG5cbiAgcmV0dXJuIHtcbiAgICBsZWZ0OiBwb3MubGVmdCxcbiAgICB0b3A6IHBvcy50b3AgKyBoZWlnaHRcbiAgfTtcbn1cblxuZnVuY3Rpb24gYXR0YWNoRXZlbnRzKCRub2RlLCBldmVudHMpIHtcbiAgT2JqZWN0LmtleXMoZXZlbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICRub2RlLm9uKGtleSwgZXZlbnRzW2tleV0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZGV0YWNoRXZlbnRzKCRub2RlLCBldmVudHMpIHtcbiAgT2JqZWN0LmtleXMoZXZlbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSkge1xuICAgICRub2RlLm9mZihrZXksIGV2ZW50c1trZXldKTtcbiAgfSk7XG59XG5cbi8qKlxuICogQG1ldGhvZCBpc0N1c3RvbVN0eWxlVGFnXG4gKlxuICogYXNzZXJ0IGlmIGEgbm9kZSBjb250YWlucyBhIFwibm90ZS1zdHlsZXRhZ1wiIGNsYXNzLFxuICogd2hpY2ggaW1wbGllcyB0aGF0J3MgYSBjdXN0b20tbWFkZSBzdHlsZSB0YWcgbm9kZVxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gYW4gSFRNTCBET00gbm9kZVxuICovXG5mdW5jdGlvbiBpc0N1c3RvbVN0eWxlVGFnKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgIWlzVGV4dChub2RlKSAmJiBsaXN0cy5jb250YWlucyhub2RlLmNsYXNzTGlzdCwgJ25vdGUtc3R5bGV0YWcnKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICAvKiogQHByb3BlcnR5IHtTdHJpbmd9IE5CU1BfQ0hBUiAqL1xuICBOQlNQX0NIQVIsXG4gIC8qKiBAcHJvcGVydHkge1N0cmluZ30gWkVST19XSURUSF9OQlNQX0NIQVIgKi9cbiAgWkVST19XSURUSF9OQlNQX0NIQVIsXG4gIC8qKiBAcHJvcGVydHkge1N0cmluZ30gYmxhbmsgKi9cbiAgYmxhbms6IGJsYW5rSFRNTCxcbiAgLyoqIEBwcm9wZXJ0eSB7U3RyaW5nfSBlbXB0eVBhcmEgKi9cbiAgZW1wdHlQYXJhOiBgPHA+JHtibGFua0hUTUx9PC9wPmAsXG4gIG1ha2VQcmVkQnlOb2RlTmFtZSxcbiAgaXNFZGl0YWJsZSxcbiAgaXNDb250cm9sU2l6aW5nLFxuICBpc1RleHQsXG4gIGlzRWxlbWVudCxcbiAgaXNWb2lkLFxuICBpc1BhcmEsXG4gIGlzUHVyZVBhcmEsXG4gIGlzSGVhZGluZyxcbiAgaXNJbmxpbmUsXG4gIGlzQmxvY2s6IGZ1bmMubm90KGlzSW5saW5lKSxcbiAgaXNCb2R5SW5saW5lLFxuICBpc0JvZHksXG4gIGlzUGFyYUlubGluZSxcbiAgaXNQcmUsXG4gIGlzTGlzdCxcbiAgaXNUYWJsZSxcbiAgaXNEYXRhLFxuICBpc0NlbGwsXG4gIGlzQmxvY2txdW90ZSxcbiAgaXNCb2R5Q29udGFpbmVyLFxuICBpc0FuY2hvcixcbiAgaXNEaXY6IG1ha2VQcmVkQnlOb2RlTmFtZSgnRElWJyksXG4gIGlzTGksXG4gIGlzQlI6IG1ha2VQcmVkQnlOb2RlTmFtZSgnQlInKSxcbiAgaXNTcGFuOiBtYWtlUHJlZEJ5Tm9kZU5hbWUoJ1NQQU4nKSxcbiAgaXNCOiBtYWtlUHJlZEJ5Tm9kZU5hbWUoJ0InKSxcbiAgaXNVOiBtYWtlUHJlZEJ5Tm9kZU5hbWUoJ1UnKSxcbiAgaXNTOiBtYWtlUHJlZEJ5Tm9kZU5hbWUoJ1MnKSxcbiAgaXNJOiBtYWtlUHJlZEJ5Tm9kZU5hbWUoJ0knKSxcbiAgaXNJbWc6IG1ha2VQcmVkQnlOb2RlTmFtZSgnSU1HJyksXG4gIGlzVGV4dGFyZWEsXG4gIGlzRW1wdHksXG4gIGlzRW1wdHlBbmNob3I6IGZ1bmMuYW5kKGlzQW5jaG9yLCBpc0VtcHR5KSxcbiAgaXNDbG9zZXN0U2libGluZyxcbiAgd2l0aENsb3Nlc3RTaWJsaW5ncyxcbiAgbm9kZUxlbmd0aCxcbiAgaXNMZWZ0RWRnZVBvaW50LFxuICBpc1JpZ2h0RWRnZVBvaW50LFxuICBpc0VkZ2VQb2ludCxcbiAgaXNMZWZ0RWRnZU9mLFxuICBpc1JpZ2h0RWRnZU9mLFxuICBpc0xlZnRFZGdlUG9pbnRPZixcbiAgaXNSaWdodEVkZ2VQb2ludE9mLFxuICBwcmV2UG9pbnQsXG4gIG5leHRQb2ludCxcbiAgaXNTYW1lUG9pbnQsXG4gIGlzVmlzaWJsZVBvaW50LFxuICBwcmV2UG9pbnRVbnRpbCxcbiAgbmV4dFBvaW50VW50aWwsXG4gIGlzQ2hhclBvaW50LFxuICB3YWxrUG9pbnQsXG4gIGFuY2VzdG9yLFxuICBzaW5nbGVDaGlsZEFuY2VzdG9yLFxuICBsaXN0QW5jZXN0b3IsXG4gIGxhc3RBbmNlc3RvcixcbiAgbGlzdE5leHQsXG4gIGxpc3RQcmV2LFxuICBsaXN0RGVzY2VuZGFudCxcbiAgY29tbW9uQW5jZXN0b3IsXG4gIHdyYXAsXG4gIGluc2VydEFmdGVyLFxuICBhcHBlbmRDaGlsZE5vZGVzLFxuICBwb3NpdGlvbixcbiAgaGFzQ2hpbGRyZW4sXG4gIG1ha2VPZmZzZXRQYXRoLFxuICBmcm9tT2Zmc2V0UGF0aCxcbiAgc3BsaXRUcmVlLFxuICBzcGxpdFBvaW50LFxuICBjcmVhdGUsXG4gIGNyZWF0ZVRleHQsXG4gIHJlbW92ZSxcbiAgcmVtb3ZlV2hpbGUsXG4gIHJlcGxhY2UsXG4gIGh0bWwsXG4gIHZhbHVlLFxuICBwb3NGcm9tUGxhY2Vob2xkZXIsXG4gIGF0dGFjaEV2ZW50cyxcbiAgZGV0YWNoRXZlbnRzLFxuICBpc0N1c3RvbVN0eWxlVGFnXG59O1xuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxuJC5zdW1tZXJub3RlID0gJC5zdW1tZXJub3RlIHx8IHtcbiAgbGFuZzoge31cbn07XG5cbiQuZXh0ZW5kKCQuc3VtbWVybm90ZS5sYW5nLCB7XG4gICdlbi1VUyc6IHtcbiAgICBmb250OiB7XG4gICAgICBib2xkOiAnQm9sZCcsXG4gICAgICBpdGFsaWM6ICdJdGFsaWMnLFxuICAgICAgdW5kZXJsaW5lOiAnVW5kZXJsaW5lJyxcbiAgICAgIGNsZWFyOiAnUmVtb3ZlIEZvbnQgU3R5bGUnLFxuICAgICAgaGVpZ2h0OiAnTGluZSBIZWlnaHQnLFxuICAgICAgbmFtZTogJ0ZvbnQgRmFtaWx5JyxcbiAgICAgIHN0cmlrZXRocm91Z2g6ICdTdHJpa2V0aHJvdWdoJyxcbiAgICAgIHN1YnNjcmlwdDogJ1N1YnNjcmlwdCcsXG4gICAgICBzdXBlcnNjcmlwdDogJ1N1cGVyc2NyaXB0JyxcbiAgICAgIHNpemU6ICdGb250IFNpemUnXG4gICAgfSxcbiAgICBpbWFnZToge1xuICAgICAgaW1hZ2U6ICdQaWN0dXJlJyxcbiAgICAgIGluc2VydDogJ0luc2VydCBJbWFnZScsXG4gICAgICByZXNpemVGdWxsOiAnUmVzaXplIEZ1bGwnLFxuICAgICAgcmVzaXplSGFsZjogJ1Jlc2l6ZSBIYWxmJyxcbiAgICAgIHJlc2l6ZVF1YXJ0ZXI6ICdSZXNpemUgUXVhcnRlcicsXG4gICAgICBmbG9hdExlZnQ6ICdGbG9hdCBMZWZ0JyxcbiAgICAgIGZsb2F0UmlnaHQ6ICdGbG9hdCBSaWdodCcsXG4gICAgICBmbG9hdE5vbmU6ICdGbG9hdCBOb25lJyxcbiAgICAgIHNoYXBlUm91bmRlZDogJ1NoYXBlOiBSb3VuZGVkJyxcbiAgICAgIHNoYXBlQ2lyY2xlOiAnU2hhcGU6IENpcmNsZScsXG4gICAgICBzaGFwZVRodW1ibmFpbDogJ1NoYXBlOiBUaHVtYm5haWwnLFxuICAgICAgc2hhcGVOb25lOiAnU2hhcGU6IE5vbmUnLFxuICAgICAgZHJhZ0ltYWdlSGVyZTogJ0RyYWcgaW1hZ2Ugb3IgdGV4dCBoZXJlJyxcbiAgICAgIGRyb3BJbWFnZTogJ0Ryb3AgaW1hZ2Ugb3IgVGV4dCcsXG4gICAgICBzZWxlY3RGcm9tRmlsZXM6ICdTZWxlY3QgZnJvbSBmaWxlcycsXG4gICAgICBtYXhpbXVtRmlsZVNpemU6ICdNYXhpbXVtIGZpbGUgc2l6ZScsXG4gICAgICBtYXhpbXVtRmlsZVNpemVFcnJvcjogJ01heGltdW0gZmlsZSBzaXplIGV4Y2VlZGVkLicsXG4gICAgICB1cmw6ICdJbWFnZSBVUkwnLFxuICAgICAgcmVtb3ZlOiAnUmVtb3ZlIEltYWdlJyxcbiAgICAgIG9yaWdpbmFsOiAnT3JpZ2luYWwnXG4gICAgfSxcbiAgICB2aWRlbzoge1xuICAgICAgdmlkZW86ICdWaWRlbycsXG4gICAgICB2aWRlb0xpbms6ICdWaWRlbyBMaW5rJyxcbiAgICAgIGluc2VydDogJ0luc2VydCBWaWRlbycsXG4gICAgICB1cmw6ICdWaWRlbyBVUkwnLFxuICAgICAgcHJvdmlkZXJzOiAnKFlvdVR1YmUsIFZpbWVvLCBWaW5lLCBJbnN0YWdyYW0sIERhaWx5TW90aW9uIG9yIFlvdWt1KSdcbiAgICB9LFxuICAgIGxpbms6IHtcbiAgICAgIGxpbms6ICdMaW5rJyxcbiAgICAgIGluc2VydDogJ0luc2VydCBMaW5rJyxcbiAgICAgIHVubGluazogJ1VubGluaycsXG4gICAgICBlZGl0OiAnRWRpdCcsXG4gICAgICB0ZXh0VG9EaXNwbGF5OiAnVGV4dCB0byBkaXNwbGF5JyxcbiAgICAgIHVybDogJ1RvIHdoYXQgVVJMIHNob3VsZCB0aGlzIGxpbmsgZ28/JyxcbiAgICAgIG9wZW5Jbk5ld1dpbmRvdzogJ09wZW4gaW4gbmV3IHdpbmRvdydcbiAgICB9LFxuICAgIHRhYmxlOiB7XG4gICAgICB0YWJsZTogJ1RhYmxlJyxcbiAgICAgIGFkZFJvd0Fib3ZlOiAnQWRkIHJvdyBhYm92ZScsXG4gICAgICBhZGRSb3dCZWxvdzogJ0FkZCByb3cgYmVsb3cnLFxuICAgICAgYWRkQ29sTGVmdDogJ0FkZCBjb2x1bW4gbGVmdCcsXG4gICAgICBhZGRDb2xSaWdodDogJ0FkZCBjb2x1bW4gcmlnaHQnLFxuICAgICAgZGVsUm93OiAnRGVsZXRlIHJvdycsXG4gICAgICBkZWxDb2w6ICdEZWxldGUgY29sdW1uJyxcbiAgICAgIGRlbFRhYmxlOiAnRGVsZXRlIHRhYmxlJ1xuICAgIH0sXG4gICAgaHI6IHtcbiAgICAgIGluc2VydDogJ0luc2VydCBIb3Jpem9udGFsIFJ1bGUnXG4gICAgfSxcbiAgICBzdHlsZToge1xuICAgICAgc3R5bGU6ICdTdHlsZScsXG4gICAgICBwOiAnTm9ybWFsJyxcbiAgICAgIGJsb2NrcXVvdGU6ICdRdW90ZScsXG4gICAgICBwcmU6ICdDb2RlJyxcbiAgICAgIGgxOiAnSGVhZGVyIDEnLFxuICAgICAgaDI6ICdIZWFkZXIgMicsXG4gICAgICBoMzogJ0hlYWRlciAzJyxcbiAgICAgIGg0OiAnSGVhZGVyIDQnLFxuICAgICAgaDU6ICdIZWFkZXIgNScsXG4gICAgICBoNjogJ0hlYWRlciA2J1xuICAgIH0sXG4gICAgbGlzdHM6IHtcbiAgICAgIHVub3JkZXJlZDogJ1Vub3JkZXJlZCBsaXN0JyxcbiAgICAgIG9yZGVyZWQ6ICdPcmRlcmVkIGxpc3QnXG4gICAgfSxcbiAgICBvcHRpb25zOiB7XG4gICAgICBoZWxwOiAnSGVscCcsXG4gICAgICBmdWxsc2NyZWVuOiAnRnVsbCBTY3JlZW4nLFxuICAgICAgY29kZXZpZXc6ICdDb2RlIFZpZXcnXG4gICAgfSxcbiAgICBwYXJhZ3JhcGg6IHtcbiAgICAgIHBhcmFncmFwaDogJ1BhcmFncmFwaCcsXG4gICAgICBvdXRkZW50OiAnT3V0ZGVudCcsXG4gICAgICBpbmRlbnQ6ICdJbmRlbnQnLFxuICAgICAgbGVmdDogJ0FsaWduIGxlZnQnLFxuICAgICAgY2VudGVyOiAnQWxpZ24gY2VudGVyJyxcbiAgICAgIHJpZ2h0OiAnQWxpZ24gcmlnaHQnLFxuICAgICAganVzdGlmeTogJ0p1c3RpZnkgZnVsbCdcbiAgICB9LFxuICAgIGNvbG9yOiB7XG4gICAgICByZWNlbnQ6ICdSZWNlbnQgQ29sb3InLFxuICAgICAgbW9yZTogJ01vcmUgQ29sb3InLFxuICAgICAgYmFja2dyb3VuZDogJ0JhY2tncm91bmQgQ29sb3InLFxuICAgICAgZm9yZWdyb3VuZDogJ0ZvcmVncm91bmQgQ29sb3InLFxuICAgICAgdHJhbnNwYXJlbnQ6ICdUcmFuc3BhcmVudCcsXG4gICAgICBzZXRUcmFuc3BhcmVudDogJ1NldCB0cmFuc3BhcmVudCcsXG4gICAgICByZXNldDogJ1Jlc2V0JyxcbiAgICAgIHJlc2V0VG9EZWZhdWx0OiAnUmVzZXQgdG8gZGVmYXVsdCdcbiAgICB9LFxuICAgIHNob3J0Y3V0OiB7XG4gICAgICBzaG9ydGN1dHM6ICdLZXlib2FyZCBzaG9ydGN1dHMnLFxuICAgICAgY2xvc2U6ICdDbG9zZScsXG4gICAgICB0ZXh0Rm9ybWF0dGluZzogJ1RleHQgZm9ybWF0dGluZycsXG4gICAgICBhY3Rpb246ICdBY3Rpb24nLFxuICAgICAgcGFyYWdyYXBoRm9ybWF0dGluZzogJ1BhcmFncmFwaCBmb3JtYXR0aW5nJyxcbiAgICAgIGRvY3VtZW50U3R5bGU6ICdEb2N1bWVudCBTdHlsZScsXG4gICAgICBleHRyYUtleXM6ICdFeHRyYSBrZXlzJ1xuICAgIH0sXG4gICAgaGVscDoge1xuICAgICAgJ2luc2VydFBhcmFncmFwaCc6ICdJbnNlcnQgUGFyYWdyYXBoJyxcbiAgICAgICd1bmRvJzogJ1VuZG9lcyB0aGUgbGFzdCBjb21tYW5kJyxcbiAgICAgICdyZWRvJzogJ1JlZG9lcyB0aGUgbGFzdCBjb21tYW5kJyxcbiAgICAgICd0YWInOiAnVGFiJyxcbiAgICAgICd1bnRhYic6ICdVbnRhYicsXG4gICAgICAnYm9sZCc6ICdTZXQgYSBib2xkIHN0eWxlJyxcbiAgICAgICdpdGFsaWMnOiAnU2V0IGEgaXRhbGljIHN0eWxlJyxcbiAgICAgICd1bmRlcmxpbmUnOiAnU2V0IGEgdW5kZXJsaW5lIHN0eWxlJyxcbiAgICAgICdzdHJpa2V0aHJvdWdoJzogJ1NldCBhIHN0cmlrZXRocm91Z2ggc3R5bGUnLFxuICAgICAgJ3JlbW92ZUZvcm1hdCc6ICdDbGVhbiBhIHN0eWxlJyxcbiAgICAgICdqdXN0aWZ5TGVmdCc6ICdTZXQgbGVmdCBhbGlnbicsXG4gICAgICAnanVzdGlmeUNlbnRlcic6ICdTZXQgY2VudGVyIGFsaWduJyxcbiAgICAgICdqdXN0aWZ5UmlnaHQnOiAnU2V0IHJpZ2h0IGFsaWduJyxcbiAgICAgICdqdXN0aWZ5RnVsbCc6ICdTZXQgZnVsbCBhbGlnbicsXG4gICAgICAnaW5zZXJ0VW5vcmRlcmVkTGlzdCc6ICdUb2dnbGUgdW5vcmRlcmVkIGxpc3QnLFxuICAgICAgJ2luc2VydE9yZGVyZWRMaXN0JzogJ1RvZ2dsZSBvcmRlcmVkIGxpc3QnLFxuICAgICAgJ291dGRlbnQnOiAnT3V0ZGVudCBvbiBjdXJyZW50IHBhcmFncmFwaCcsXG4gICAgICAnaW5kZW50JzogJ0luZGVudCBvbiBjdXJyZW50IHBhcmFncmFwaCcsXG4gICAgICAnZm9ybWF0UGFyYSc6ICdDaGFuZ2UgY3VycmVudCBibG9ja1xcJ3MgZm9ybWF0IGFzIGEgcGFyYWdyYXBoKFAgdGFnKScsXG4gICAgICAnZm9ybWF0SDEnOiAnQ2hhbmdlIGN1cnJlbnQgYmxvY2tcXCdzIGZvcm1hdCBhcyBIMScsXG4gICAgICAnZm9ybWF0SDInOiAnQ2hhbmdlIGN1cnJlbnQgYmxvY2tcXCdzIGZvcm1hdCBhcyBIMicsXG4gICAgICAnZm9ybWF0SDMnOiAnQ2hhbmdlIGN1cnJlbnQgYmxvY2tcXCdzIGZvcm1hdCBhcyBIMycsXG4gICAgICAnZm9ybWF0SDQnOiAnQ2hhbmdlIGN1cnJlbnQgYmxvY2tcXCdzIGZvcm1hdCBhcyBINCcsXG4gICAgICAnZm9ybWF0SDUnOiAnQ2hhbmdlIGN1cnJlbnQgYmxvY2tcXCdzIGZvcm1hdCBhcyBINScsXG4gICAgICAnZm9ybWF0SDYnOiAnQ2hhbmdlIGN1cnJlbnQgYmxvY2tcXCdzIGZvcm1hdCBhcyBINicsXG4gICAgICAnaW5zZXJ0SG9yaXpvbnRhbFJ1bGUnOiAnSW5zZXJ0IGhvcml6b250YWwgcnVsZScsXG4gICAgICAnbGlua0RpYWxvZy5zaG93JzogJ1Nob3cgTGluayBEaWFsb2cnXG4gICAgfSxcbiAgICBoaXN0b3J5OiB7XG4gICAgICB1bmRvOiAnVW5kbycsXG4gICAgICByZWRvOiAnUmVkbydcbiAgICB9LFxuICAgIHNwZWNpYWxDaGFyOiB7XG4gICAgICBzcGVjaWFsQ2hhcjogJ1NQRUNJQUwgQ0hBUkFDVEVSUycsXG4gICAgICBzZWxlY3Q6ICdTZWxlY3QgU3BlY2lhbCBjaGFyYWN0ZXJzJ1xuICAgIH1cbiAgfVxufSk7XG4iLCJpbXBvcnQgbGlzdHMgZnJvbSAnLi9saXN0cyc7XG5pbXBvcnQgZnVuYyBmcm9tICcuL2Z1bmMnO1xuXG5jb25zdCBLRVlfTUFQID0ge1xuICAnQkFDS1NQQUNFJzogOCxcbiAgJ1RBQic6IDksXG4gICdFTlRFUic6IDEzLFxuICAnU1BBQ0UnOiAzMixcbiAgJ0RFTEVURSc6IDQ2LFxuXG4gIC8vIEFycm93XG4gICdMRUZUJzogMzcsXG4gICdVUCc6IDM4LFxuICAnUklHSFQnOiAzOSxcbiAgJ0RPV04nOiA0MCxcblxuICAvLyBOdW1iZXI6IDAtOVxuICAnTlVNMCc6IDQ4LFxuICAnTlVNMSc6IDQ5LFxuICAnTlVNMic6IDUwLFxuICAnTlVNMyc6IDUxLFxuICAnTlVNNCc6IDUyLFxuICAnTlVNNSc6IDUzLFxuICAnTlVNNic6IDU0LFxuICAnTlVNNyc6IDU1LFxuICAnTlVNOCc6IDU2LFxuXG4gIC8vIEFscGhhYmV0OiBhLXpcbiAgJ0InOiA2NixcbiAgJ0UnOiA2OSxcbiAgJ0knOiA3MyxcbiAgJ0onOiA3NCxcbiAgJ0snOiA3NSxcbiAgJ0wnOiA3NixcbiAgJ1InOiA4MixcbiAgJ1MnOiA4MyxcbiAgJ1UnOiA4NSxcbiAgJ1YnOiA4NixcbiAgJ1knOiA4OSxcbiAgJ1onOiA5MCxcblxuICAnU0xBU0gnOiAxOTEsXG4gICdMRUZUQlJBQ0tFVCc6IDIxOSxcbiAgJ0JBQ0tTTEFTSCc6IDIyMCxcbiAgJ1JJR0hUQlJBQ0tFVCc6IDIyMVxufTtcblxuLyoqXG4gKiBAY2xhc3MgY29yZS5rZXlcbiAqXG4gKiBPYmplY3QgZm9yIGtleWNvZGVzLlxuICpcbiAqIEBzaW5nbGV0b25cbiAqIEBhbHRlcm5hdGVDbGFzc05hbWUga2V5XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLyoqXG4gICAqIEBtZXRob2QgaXNFZGl0XG4gICAqXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBrZXlDb2RlXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuICBpc0VkaXQ6IChrZXlDb2RlKSA9PiB7XG4gICAgcmV0dXJuIGxpc3RzLmNvbnRhaW5zKFtcbiAgICAgIEtFWV9NQVAuQkFDS1NQQUNFLFxuICAgICAgS0VZX01BUC5UQUIsXG4gICAgICBLRVlfTUFQLkVOVEVSLFxuICAgICAgS0VZX01BUC5TUEFDRSxcbiAgICAgIEtFWV9NQVAuREVMRVRFXG4gICAgXSwga2V5Q29kZSk7XG4gIH0sXG4gIC8qKlxuICAgKiBAbWV0aG9kIGlzTW92ZVxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0ga2V5Q29kZVxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgaXNNb3ZlOiAoa2V5Q29kZSkgPT4ge1xuICAgIHJldHVybiBsaXN0cy5jb250YWlucyhbXG4gICAgICBLRVlfTUFQLkxFRlQsXG4gICAgICBLRVlfTUFQLlVQLFxuICAgICAgS0VZX01BUC5SSUdIVCxcbiAgICAgIEtFWV9NQVAuRE9XTlxuICAgIF0sIGtleUNvZGUpO1xuICB9LFxuICAvKipcbiAgICogQHByb3BlcnR5IHtPYmplY3R9IG5hbWVGcm9tQ29kZVxuICAgKiBAcHJvcGVydHkge1N0cmluZ30gbmFtZUZyb21Db2RlLjggXCJCQUNLU1BBQ0VcIlxuICAgKi9cbiAgbmFtZUZyb21Db2RlOiBmdW5jLmludmVydE9iamVjdChLRVlfTUFQKSxcbiAgY29kZTogS0VZX01BUFxufTtcbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgZW52IGZyb20gJy4vZW52JztcbmltcG9ydCBmdW5jIGZyb20gJy4vZnVuYyc7XG5pbXBvcnQgbGlzdHMgZnJvbSAnLi9saXN0cyc7XG5pbXBvcnQgZG9tIGZyb20gJy4vZG9tJztcblxuLyoqXG4gKiByZXR1cm4gYm91bmRhcnlQb2ludCBmcm9tIFRleHRSYW5nZSwgaW5zcGlyZWQgYnkgQW5keSBOYSdzIEh1c2t5UmFuZ2UuanNcbiAqXG4gKiBAcGFyYW0ge1RleHRSYW5nZX0gdGV4dFJhbmdlXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGlzU3RhcnRcbiAqIEByZXR1cm4ge0JvdW5kYXJ5UG9pbnR9XG4gKlxuICogQHNlZSBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvbXM1MzU4NzIodj12cy44NSkuYXNweFxuICovXG5mdW5jdGlvbiB0ZXh0UmFuZ2VUb1BvaW50KHRleHRSYW5nZSwgaXNTdGFydCkge1xuICBsZXQgY29udGFpbmVyID0gdGV4dFJhbmdlLnBhcmVudEVsZW1lbnQoKTtcbiAgbGV0IG9mZnNldDtcblxuICBjb25zdCB0ZXN0ZXIgPSBkb2N1bWVudC5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpO1xuICBsZXQgcHJldkNvbnRhaW5lcjtcbiAgY29uc3QgY2hpbGROb2RlcyA9IGxpc3RzLmZyb20oY29udGFpbmVyLmNoaWxkTm9kZXMpO1xuICBmb3IgKG9mZnNldCA9IDA7IG9mZnNldCA8IGNoaWxkTm9kZXMubGVuZ3RoOyBvZmZzZXQrKykge1xuICAgIGlmIChkb20uaXNUZXh0KGNoaWxkTm9kZXNbb2Zmc2V0XSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB0ZXN0ZXIubW92ZVRvRWxlbWVudFRleHQoY2hpbGROb2Rlc1tvZmZzZXRdKTtcbiAgICBpZiAodGVzdGVyLmNvbXBhcmVFbmRQb2ludHMoJ1N0YXJ0VG9TdGFydCcsIHRleHRSYW5nZSkgPj0gMCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHByZXZDb250YWluZXIgPSBjaGlsZE5vZGVzW29mZnNldF07XG4gIH1cblxuICBpZiAob2Zmc2V0ICE9PSAwICYmIGRvbS5pc1RleHQoY2hpbGROb2Rlc1tvZmZzZXQgLSAxXSkpIHtcbiAgICBjb25zdCB0ZXh0UmFuZ2VTdGFydCA9IGRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7XG4gICAgbGV0IGN1clRleHROb2RlID0gbnVsbDtcbiAgICB0ZXh0UmFuZ2VTdGFydC5tb3ZlVG9FbGVtZW50VGV4dChwcmV2Q29udGFpbmVyIHx8IGNvbnRhaW5lcik7XG4gICAgdGV4dFJhbmdlU3RhcnQuY29sbGFwc2UoIXByZXZDb250YWluZXIpO1xuICAgIGN1clRleHROb2RlID0gcHJldkNvbnRhaW5lciA/IHByZXZDb250YWluZXIubmV4dFNpYmxpbmcgOiBjb250YWluZXIuZmlyc3RDaGlsZDtcblxuICAgIGNvbnN0IHBvaW50VGVzdGVyID0gdGV4dFJhbmdlLmR1cGxpY2F0ZSgpO1xuICAgIHBvaW50VGVzdGVyLnNldEVuZFBvaW50KCdTdGFydFRvU3RhcnQnLCB0ZXh0UmFuZ2VTdGFydCk7XG4gICAgbGV0IHRleHRDb3VudCA9IHBvaW50VGVzdGVyLnRleHQucmVwbGFjZSgvW1xcclxcbl0vZywgJycpLmxlbmd0aDtcblxuICAgIHdoaWxlICh0ZXh0Q291bnQgPiBjdXJUZXh0Tm9kZS5ub2RlVmFsdWUubGVuZ3RoICYmIGN1clRleHROb2RlLm5leHRTaWJsaW5nKSB7XG4gICAgICB0ZXh0Q291bnQgLT0gY3VyVGV4dE5vZGUubm9kZVZhbHVlLmxlbmd0aDtcbiAgICAgIGN1clRleHROb2RlID0gY3VyVGV4dE5vZGUubmV4dFNpYmxpbmc7XG4gICAgfVxuXG4gICAgLy8gW3dvcmthcm91bmRdIGVuZm9yY2UgSUUgdG8gcmUtcmVmZXJlbmNlIGN1clRleHROb2RlLCBoYWNrXG4gICAgY29uc3QgZHVtbXkgPSBjdXJUZXh0Tm9kZS5ub2RlVmFsdWU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICAgIGlmIChpc1N0YXJ0ICYmIGN1clRleHROb2RlLm5leHRTaWJsaW5nICYmIGRvbS5pc1RleHQoY3VyVGV4dE5vZGUubmV4dFNpYmxpbmcpICYmXG4gICAgICB0ZXh0Q291bnQgPT09IGN1clRleHROb2RlLm5vZGVWYWx1ZS5sZW5ndGgpIHtcbiAgICAgIHRleHRDb3VudCAtPSBjdXJUZXh0Tm9kZS5ub2RlVmFsdWUubGVuZ3RoO1xuICAgICAgY3VyVGV4dE5vZGUgPSBjdXJUZXh0Tm9kZS5uZXh0U2libGluZztcbiAgICB9XG5cbiAgICBjb250YWluZXIgPSBjdXJUZXh0Tm9kZTtcbiAgICBvZmZzZXQgPSB0ZXh0Q291bnQ7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGNvbnQ6IGNvbnRhaW5lcixcbiAgICBvZmZzZXQ6IG9mZnNldFxuICB9O1xufVxuXG4vKipcbiAqIHJldHVybiBUZXh0UmFuZ2UgZnJvbSBib3VuZGFyeSBwb2ludCAoaW5zcGlyZWQgYnkgZ29vZ2xlIGNsb3N1cmUtbGlicmFyeSlcbiAqIEBwYXJhbSB7Qm91bmRhcnlQb2ludH0gcG9pbnRcbiAqIEByZXR1cm4ge1RleHRSYW5nZX1cbiAqL1xuZnVuY3Rpb24gcG9pbnRUb1RleHRSYW5nZShwb2ludCkge1xuICBjb25zdCB0ZXh0UmFuZ2VJbmZvID0gZnVuY3Rpb24oY29udGFpbmVyLCBvZmZzZXQpIHtcbiAgICBsZXQgbm9kZSwgaXNDb2xsYXBzZVRvU3RhcnQ7XG5cbiAgICBpZiAoZG9tLmlzVGV4dChjb250YWluZXIpKSB7XG4gICAgICBjb25zdCBwcmV2VGV4dE5vZGVzID0gZG9tLmxpc3RQcmV2KGNvbnRhaW5lciwgZnVuYy5ub3QoZG9tLmlzVGV4dCkpO1xuICAgICAgY29uc3QgcHJldkNvbnRhaW5lciA9IGxpc3RzLmxhc3QocHJldlRleHROb2RlcykucHJldmlvdXNTaWJsaW5nO1xuICAgICAgbm9kZSA9IHByZXZDb250YWluZXIgfHwgY29udGFpbmVyLnBhcmVudE5vZGU7XG4gICAgICBvZmZzZXQgKz0gbGlzdHMuc3VtKGxpc3RzLnRhaWwocHJldlRleHROb2RlcyksIGRvbS5ub2RlTGVuZ3RoKTtcbiAgICAgIGlzQ29sbGFwc2VUb1N0YXJ0ID0gIXByZXZDb250YWluZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUgPSBjb250YWluZXIuY2hpbGROb2Rlc1tvZmZzZXRdIHx8IGNvbnRhaW5lcjtcbiAgICAgIGlmIChkb20uaXNUZXh0KG5vZGUpKSB7XG4gICAgICAgIHJldHVybiB0ZXh0UmFuZ2VJbmZvKG5vZGUsIDApO1xuICAgICAgfVxuXG4gICAgICBvZmZzZXQgPSAwO1xuICAgICAgaXNDb2xsYXBzZVRvU3RhcnQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgbm9kZTogbm9kZSxcbiAgICAgIGNvbGxhcHNlVG9TdGFydDogaXNDb2xsYXBzZVRvU3RhcnQsXG4gICAgICBvZmZzZXQ6IG9mZnNldFxuICAgIH07XG4gIH07XG5cbiAgY29uc3QgdGV4dFJhbmdlID0gZG9jdW1lbnQuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKTtcbiAgY29uc3QgaW5mbyA9IHRleHRSYW5nZUluZm8ocG9pbnQubm9kZSwgcG9pbnQub2Zmc2V0KTtcblxuICB0ZXh0UmFuZ2UubW92ZVRvRWxlbWVudFRleHQoaW5mby5ub2RlKTtcbiAgdGV4dFJhbmdlLmNvbGxhcHNlKGluZm8uY29sbGFwc2VUb1N0YXJ0KTtcbiAgdGV4dFJhbmdlLm1vdmVTdGFydCgnY2hhcmFjdGVyJywgaW5mby5vZmZzZXQpO1xuICByZXR1cm4gdGV4dFJhbmdlO1xufVxuXG4vKipcbiAgICogV3JhcHBlZCBSYW5nZVxuICAgKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtOb2RlfSBzYyAtIHN0YXJ0IGNvbnRhaW5lclxuICAgKiBAcGFyYW0ge051bWJlcn0gc28gLSBzdGFydCBvZmZzZXRcbiAgICogQHBhcmFtIHtOb2RlfSBlYyAtIGVuZCBjb250YWluZXJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGVvIC0gZW5kIG9mZnNldFxuICAgKi9cbmNsYXNzIFdyYXBwZWRSYW5nZSB7XG4gIGNvbnN0cnVjdG9yKHNjLCBzbywgZWMsIGVvKSB7XG4gICAgdGhpcy5zYyA9IHNjO1xuICAgIHRoaXMuc28gPSBzbztcbiAgICB0aGlzLmVjID0gZWM7XG4gICAgdGhpcy5lbyA9IGVvO1xuXG4gICAgLy8gaXNPbkVkaXRhYmxlOiBqdWRnZSB3aGV0aGVyIHJhbmdlIGlzIG9uIGVkaXRhYmxlIG9yIG5vdFxuICAgIHRoaXMuaXNPbkVkaXRhYmxlID0gdGhpcy5tYWtlSXNPbihkb20uaXNFZGl0YWJsZSk7XG4gICAgLy8gaXNPbkxpc3Q6IGp1ZGdlIHdoZXRoZXIgcmFuZ2UgaXMgb24gbGlzdCBub2RlIG9yIG5vdFxuICAgIHRoaXMuaXNPbkxpc3QgPSB0aGlzLm1ha2VJc09uKGRvbS5pc0xpc3QpO1xuICAgIC8vIGlzT25BbmNob3I6IGp1ZGdlIHdoZXRoZXIgcmFuZ2UgaXMgb24gYW5jaG9yIG5vZGUgb3Igbm90XG4gICAgdGhpcy5pc09uQW5jaG9yID0gdGhpcy5tYWtlSXNPbihkb20uaXNBbmNob3IpO1xuICAgIC8vIGlzT25DZWxsOiBqdWRnZSB3aGV0aGVyIHJhbmdlIGlzIG9uIGNlbGwgbm9kZSBvciBub3RcbiAgICB0aGlzLmlzT25DZWxsID0gdGhpcy5tYWtlSXNPbihkb20uaXNDZWxsKTtcbiAgICAvLyBpc09uRGF0YToganVkZ2Ugd2hldGhlciByYW5nZSBpcyBvbiBkYXRhIG5vZGUgb3Igbm90XG4gICAgdGhpcy5pc09uRGF0YSA9IHRoaXMubWFrZUlzT24oZG9tLmlzRGF0YSk7XG4gIH1cblxuICAvLyBuYXRpdmVSYW5nZTogZ2V0IG5hdGl2ZVJhbmdlIGZyb20gc2MsIHNvLCBlYywgZW9cbiAgbmF0aXZlUmFuZ2UoKSB7XG4gICAgaWYgKGVudi5pc1czQ1JhbmdlU3VwcG9ydCkge1xuICAgICAgY29uc3QgdzNjUmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuICAgICAgdzNjUmFuZ2Uuc2V0U3RhcnQodGhpcy5zYywgdGhpcy5zbyk7XG4gICAgICB3M2NSYW5nZS5zZXRFbmQodGhpcy5lYywgdGhpcy5lbyk7XG5cbiAgICAgIHJldHVybiB3M2NSYW5nZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgdGV4dFJhbmdlID0gcG9pbnRUb1RleHRSYW5nZSh7XG4gICAgICAgIG5vZGU6IHRoaXMuc2MsXG4gICAgICAgIG9mZnNldDogdGhpcy5zb1xuICAgICAgfSk7XG5cbiAgICAgIHRleHRSYW5nZS5zZXRFbmRQb2ludCgnRW5kVG9FbmQnLCBwb2ludFRvVGV4dFJhbmdlKHtcbiAgICAgICAgbm9kZTogdGhpcy5lYyxcbiAgICAgICAgb2Zmc2V0OiB0aGlzLmVvXG4gICAgICB9KSk7XG5cbiAgICAgIHJldHVybiB0ZXh0UmFuZ2U7XG4gICAgfVxuICB9XG5cbiAgZ2V0UG9pbnRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBzYzogdGhpcy5zYyxcbiAgICAgIHNvOiB0aGlzLnNvLFxuICAgICAgZWM6IHRoaXMuZWMsXG4gICAgICBlbzogdGhpcy5lb1xuICAgIH07XG4gIH1cblxuICBnZXRTdGFydFBvaW50KCkge1xuICAgIHJldHVybiB7XG4gICAgICBub2RlOiB0aGlzLnNjLFxuICAgICAgb2Zmc2V0OiB0aGlzLnNvXG4gICAgfTtcbiAgfVxuXG4gIGdldEVuZFBvaW50KCkge1xuICAgIHJldHVybiB7XG4gICAgICBub2RlOiB0aGlzLmVjLFxuICAgICAgb2Zmc2V0OiB0aGlzLmVvXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBzZWxlY3QgdXBkYXRlIHZpc2libGUgcmFuZ2VcbiAgICovXG4gIHNlbGVjdCgpIHtcbiAgICBjb25zdCBuYXRpdmVSbmcgPSB0aGlzLm5hdGl2ZVJhbmdlKCk7XG4gICAgaWYgKGVudi5pc1czQ1JhbmdlU3VwcG9ydCkge1xuICAgICAgY29uc3Qgc2VsZWN0aW9uID0gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICBpZiAoc2VsZWN0aW9uLnJhbmdlQ291bnQgPiAwKSB7XG4gICAgICAgIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgIH1cbiAgICAgIHNlbGVjdGlvbi5hZGRSYW5nZShuYXRpdmVSbmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuYXRpdmVSbmcuc2VsZWN0KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogTW92ZXMgdGhlIHNjcm9sbGJhciB0byBzdGFydCBjb250YWluZXIoc2MpIG9mIGN1cnJlbnQgcmFuZ2VcbiAgICpcbiAgICogQHJldHVybiB7V3JhcHBlZFJhbmdlfVxuICAgKi9cbiAgc2Nyb2xsSW50b1ZpZXcoY29udGFpbmVyKSB7XG4gICAgY29uc3QgaGVpZ2h0ID0gJChjb250YWluZXIpLmhlaWdodCgpO1xuICAgIGlmIChjb250YWluZXIuc2Nyb2xsVG9wICsgaGVpZ2h0IDwgdGhpcy5zYy5vZmZzZXRUb3ApIHtcbiAgICAgIGNvbnRhaW5lci5zY3JvbGxUb3AgKz0gTWF0aC5hYnMoY29udGFpbmVyLnNjcm9sbFRvcCArIGhlaWdodCAtIHRoaXMuc2Mub2Zmc2V0VG9wKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtXcmFwcGVkUmFuZ2V9XG4gICAqL1xuICBub3JtYWxpemUoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtCb3VuZGFyeVBvaW50fSBwb2ludFxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNMZWZ0VG9SaWdodFxuICAgICAqIEByZXR1cm4ge0JvdW5kYXJ5UG9pbnR9XG4gICAgICovXG4gICAgY29uc3QgZ2V0VmlzaWJsZVBvaW50ID0gZnVuY3Rpb24ocG9pbnQsIGlzTGVmdFRvUmlnaHQpIHtcbiAgICAgIGlmICgoZG9tLmlzVmlzaWJsZVBvaW50KHBvaW50KSAmJiAhZG9tLmlzRWRnZVBvaW50KHBvaW50KSkgfHxcbiAgICAgICAgICAoZG9tLmlzVmlzaWJsZVBvaW50KHBvaW50KSAmJiBkb20uaXNSaWdodEVkZ2VQb2ludChwb2ludCkgJiYgIWlzTGVmdFRvUmlnaHQpIHx8XG4gICAgICAgICAgKGRvbS5pc1Zpc2libGVQb2ludChwb2ludCkgJiYgZG9tLmlzTGVmdEVkZ2VQb2ludChwb2ludCkgJiYgaXNMZWZ0VG9SaWdodCkgfHxcbiAgICAgICAgICAoZG9tLmlzVmlzaWJsZVBvaW50KHBvaW50KSAmJiBkb20uaXNCbG9jayhwb2ludC5ub2RlKSAmJiBkb20uaXNFbXB0eShwb2ludC5ub2RlKSkpIHtcbiAgICAgICAgcmV0dXJuIHBvaW50O1xuICAgICAgfVxuXG4gICAgICAvLyBwb2ludCBvbiBibG9jaydzIGVkZ2VcbiAgICAgIGNvbnN0IGJsb2NrID0gZG9tLmFuY2VzdG9yKHBvaW50Lm5vZGUsIGRvbS5pc0Jsb2NrKTtcbiAgICAgIGlmICgoKGRvbS5pc0xlZnRFZGdlUG9pbnRPZihwb2ludCwgYmxvY2spIHx8IGRvbS5pc1ZvaWQoZG9tLnByZXZQb2ludChwb2ludCkubm9kZSkpICYmICFpc0xlZnRUb1JpZ2h0KSB8fFxuICAgICAgICAgICgoZG9tLmlzUmlnaHRFZGdlUG9pbnRPZihwb2ludCwgYmxvY2spIHx8IGRvbS5pc1ZvaWQoZG9tLm5leHRQb2ludChwb2ludCkubm9kZSkpICYmIGlzTGVmdFRvUmlnaHQpKSB7XG4gICAgICAgIC8vIHJldHVybnMgcG9pbnQgYWxyZWFkeSBvbiB2aXNpYmxlIHBvaW50XG4gICAgICAgIGlmIChkb20uaXNWaXNpYmxlUG9pbnQocG9pbnQpKSB7XG4gICAgICAgICAgcmV0dXJuIHBvaW50O1xuICAgICAgICB9XG4gICAgICAgIC8vIHJldmVyc2UgZGlyZWN0aW9uXG4gICAgICAgIGlzTGVmdFRvUmlnaHQgPSAhaXNMZWZ0VG9SaWdodDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbmV4dFBvaW50ID0gaXNMZWZ0VG9SaWdodCA/IGRvbS5uZXh0UG9pbnRVbnRpbChkb20ubmV4dFBvaW50KHBvaW50KSwgZG9tLmlzVmlzaWJsZVBvaW50KVxuICAgICAgICA6IGRvbS5wcmV2UG9pbnRVbnRpbChkb20ucHJldlBvaW50KHBvaW50KSwgZG9tLmlzVmlzaWJsZVBvaW50KTtcbiAgICAgIHJldHVybiBuZXh0UG9pbnQgfHwgcG9pbnQ7XG4gICAgfTtcblxuICAgIGNvbnN0IGVuZFBvaW50ID0gZ2V0VmlzaWJsZVBvaW50KHRoaXMuZ2V0RW5kUG9pbnQoKSwgZmFsc2UpO1xuICAgIGNvbnN0IHN0YXJ0UG9pbnQgPSB0aGlzLmlzQ29sbGFwc2VkKCkgPyBlbmRQb2ludCA6IGdldFZpc2libGVQb2ludCh0aGlzLmdldFN0YXJ0UG9pbnQoKSwgdHJ1ZSk7XG5cbiAgICByZXR1cm4gbmV3IFdyYXBwZWRSYW5nZShcbiAgICAgIHN0YXJ0UG9pbnQubm9kZSxcbiAgICAgIHN0YXJ0UG9pbnQub2Zmc2V0LFxuICAgICAgZW5kUG9pbnQubm9kZSxcbiAgICAgIGVuZFBvaW50Lm9mZnNldFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogcmV0dXJucyBtYXRjaGVkIG5vZGVzIG9uIHJhbmdlXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcmVkXSAtIHByZWRpY2F0ZSBmdW5jdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuaW5jbHVkZUFuY2VzdG9yXVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmZ1bGx5Q29udGFpbnNdXG4gICAqIEByZXR1cm4ge05vZGVbXX1cbiAgICovXG4gIG5vZGVzKHByZWQsIG9wdGlvbnMpIHtcbiAgICBwcmVkID0gcHJlZCB8fCBmdW5jLm9rO1xuXG4gICAgY29uc3QgaW5jbHVkZUFuY2VzdG9yID0gb3B0aW9ucyAmJiBvcHRpb25zLmluY2x1ZGVBbmNlc3RvcjtcbiAgICBjb25zdCBmdWxseUNvbnRhaW5zID0gb3B0aW9ucyAmJiBvcHRpb25zLmZ1bGx5Q29udGFpbnM7XG5cbiAgICAvLyBUT0RPIGNvbXBhcmUgcG9pbnRzIGFuZCBzb3J0XG4gICAgY29uc3Qgc3RhcnRQb2ludCA9IHRoaXMuZ2V0U3RhcnRQb2ludCgpO1xuICAgIGNvbnN0IGVuZFBvaW50ID0gdGhpcy5nZXRFbmRQb2ludCgpO1xuXG4gICAgY29uc3Qgbm9kZXMgPSBbXTtcbiAgICBjb25zdCBsZWZ0RWRnZU5vZGVzID0gW107XG5cbiAgICBkb20ud2Fsa1BvaW50KHN0YXJ0UG9pbnQsIGVuZFBvaW50LCBmdW5jdGlvbihwb2ludCkge1xuICAgICAgaWYgKGRvbS5pc0VkaXRhYmxlKHBvaW50Lm5vZGUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbGV0IG5vZGU7XG4gICAgICBpZiAoZnVsbHlDb250YWlucykge1xuICAgICAgICBpZiAoZG9tLmlzTGVmdEVkZ2VQb2ludChwb2ludCkpIHtcbiAgICAgICAgICBsZWZ0RWRnZU5vZGVzLnB1c2gocG9pbnQubm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRvbS5pc1JpZ2h0RWRnZVBvaW50KHBvaW50KSAmJiBsaXN0cy5jb250YWlucyhsZWZ0RWRnZU5vZGVzLCBwb2ludC5ub2RlKSkge1xuICAgICAgICAgIG5vZGUgPSBwb2ludC5ub2RlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGluY2x1ZGVBbmNlc3Rvcikge1xuICAgICAgICBub2RlID0gZG9tLmFuY2VzdG9yKHBvaW50Lm5vZGUsIHByZWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9kZSA9IHBvaW50Lm5vZGU7XG4gICAgICB9XG5cbiAgICAgIGlmIChub2RlICYmIHByZWQobm9kZSkpIHtcbiAgICAgICAgbm9kZXMucHVzaChub2RlKTtcbiAgICAgIH1cbiAgICB9LCB0cnVlKTtcblxuICAgIHJldHVybiBsaXN0cy51bmlxdWUobm9kZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIHJldHVybnMgY29tbW9uQW5jZXN0b3Igb2YgcmFuZ2VcbiAgICogQHJldHVybiB7RWxlbWVudH0gLSBjb21tb25BbmNlc3RvclxuICAgKi9cbiAgY29tbW9uQW5jZXN0b3IoKSB7XG4gICAgcmV0dXJuIGRvbS5jb21tb25BbmNlc3Rvcih0aGlzLnNjLCB0aGlzLmVjKTtcbiAgfVxuXG4gIC8qKlxuICAgKiByZXR1cm5zIGV4cGFuZGVkIHJhbmdlIGJ5IHByZWRcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZCAtIHByZWRpY2F0ZSBmdW5jdGlvblxuICAgKiBAcmV0dXJuIHtXcmFwcGVkUmFuZ2V9XG4gICAqL1xuICBleHBhbmQocHJlZCkge1xuICAgIGNvbnN0IHN0YXJ0QW5jZXN0b3IgPSBkb20uYW5jZXN0b3IodGhpcy5zYywgcHJlZCk7XG4gICAgY29uc3QgZW5kQW5jZXN0b3IgPSBkb20uYW5jZXN0b3IodGhpcy5lYywgcHJlZCk7XG5cbiAgICBpZiAoIXN0YXJ0QW5jZXN0b3IgJiYgIWVuZEFuY2VzdG9yKSB7XG4gICAgICByZXR1cm4gbmV3IFdyYXBwZWRSYW5nZSh0aGlzLnNjLCB0aGlzLnNvLCB0aGlzLmVjLCB0aGlzLmVvKTtcbiAgICB9XG5cbiAgICBjb25zdCBib3VuZGFyeVBvaW50cyA9IHRoaXMuZ2V0UG9pbnRzKCk7XG5cbiAgICBpZiAoc3RhcnRBbmNlc3Rvcikge1xuICAgICAgYm91bmRhcnlQb2ludHMuc2MgPSBzdGFydEFuY2VzdG9yO1xuICAgICAgYm91bmRhcnlQb2ludHMuc28gPSAwO1xuICAgIH1cblxuICAgIGlmIChlbmRBbmNlc3Rvcikge1xuICAgICAgYm91bmRhcnlQb2ludHMuZWMgPSBlbmRBbmNlc3RvcjtcbiAgICAgIGJvdW5kYXJ5UG9pbnRzLmVvID0gZG9tLm5vZGVMZW5ndGgoZW5kQW5jZXN0b3IpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgV3JhcHBlZFJhbmdlKFxuICAgICAgYm91bmRhcnlQb2ludHMuc2MsXG4gICAgICBib3VuZGFyeVBvaW50cy5zbyxcbiAgICAgIGJvdW5kYXJ5UG9pbnRzLmVjLFxuICAgICAgYm91bmRhcnlQb2ludHMuZW9cbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNDb2xsYXBzZVRvU3RhcnRcbiAgICogQHJldHVybiB7V3JhcHBlZFJhbmdlfVxuICAgKi9cbiAgY29sbGFwc2UoaXNDb2xsYXBzZVRvU3RhcnQpIHtcbiAgICBpZiAoaXNDb2xsYXBzZVRvU3RhcnQpIHtcbiAgICAgIHJldHVybiBuZXcgV3JhcHBlZFJhbmdlKHRoaXMuc2MsIHRoaXMuc28sIHRoaXMuc2MsIHRoaXMuc28pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IFdyYXBwZWRSYW5nZSh0aGlzLmVjLCB0aGlzLmVvLCB0aGlzLmVjLCB0aGlzLmVvKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogc3BsaXRUZXh0IG9uIHJhbmdlXG4gICAqL1xuICBzcGxpdFRleHQoKSB7XG4gICAgY29uc3QgaXNTYW1lQ29udGFpbmVyID0gdGhpcy5zYyA9PT0gdGhpcy5lYztcbiAgICBjb25zdCBib3VuZGFyeVBvaW50cyA9IHRoaXMuZ2V0UG9pbnRzKCk7XG5cbiAgICBpZiAoZG9tLmlzVGV4dCh0aGlzLmVjKSAmJiAhZG9tLmlzRWRnZVBvaW50KHRoaXMuZ2V0RW5kUG9pbnQoKSkpIHtcbiAgICAgIHRoaXMuZWMuc3BsaXRUZXh0KHRoaXMuZW8pO1xuICAgIH1cblxuICAgIGlmIChkb20uaXNUZXh0KHRoaXMuc2MpICYmICFkb20uaXNFZGdlUG9pbnQodGhpcy5nZXRTdGFydFBvaW50KCkpKSB7XG4gICAgICBib3VuZGFyeVBvaW50cy5zYyA9IHRoaXMuc2Muc3BsaXRUZXh0KHRoaXMuc28pO1xuICAgICAgYm91bmRhcnlQb2ludHMuc28gPSAwO1xuXG4gICAgICBpZiAoaXNTYW1lQ29udGFpbmVyKSB7XG4gICAgICAgIGJvdW5kYXJ5UG9pbnRzLmVjID0gYm91bmRhcnlQb2ludHMuc2M7XG4gICAgICAgIGJvdW5kYXJ5UG9pbnRzLmVvID0gdGhpcy5lbyAtIHRoaXMuc287XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBXcmFwcGVkUmFuZ2UoXG4gICAgICBib3VuZGFyeVBvaW50cy5zYyxcbiAgICAgIGJvdW5kYXJ5UG9pbnRzLnNvLFxuICAgICAgYm91bmRhcnlQb2ludHMuZWMsXG4gICAgICBib3VuZGFyeVBvaW50cy5lb1xuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogZGVsZXRlIGNvbnRlbnRzIG9uIHJhbmdlXG4gICAqIEByZXR1cm4ge1dyYXBwZWRSYW5nZX1cbiAgICovXG4gIGRlbGV0ZUNvbnRlbnRzKCkge1xuICAgIGlmICh0aGlzLmlzQ29sbGFwc2VkKCkpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGNvbnN0IHJuZyA9IHRoaXMuc3BsaXRUZXh0KCk7XG4gICAgY29uc3Qgbm9kZXMgPSBybmcubm9kZXMobnVsbCwge1xuICAgICAgZnVsbHlDb250YWluczogdHJ1ZVxuICAgIH0pO1xuXG4gICAgLy8gZmluZCBuZXcgY3Vyc29yIHBvaW50XG4gICAgY29uc3QgcG9pbnQgPSBkb20ucHJldlBvaW50VW50aWwocm5nLmdldFN0YXJ0UG9pbnQoKSwgZnVuY3Rpb24ocG9pbnQpIHtcbiAgICAgIHJldHVybiAhbGlzdHMuY29udGFpbnMobm9kZXMsIHBvaW50Lm5vZGUpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgZW1wdHlQYXJlbnRzID0gW107XG4gICAgJC5lYWNoKG5vZGVzLCBmdW5jdGlvbihpZHgsIG5vZGUpIHtcbiAgICAgIC8vIGZpbmQgZW1wdHkgcGFyZW50c1xuICAgICAgY29uc3QgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgaWYgKHBvaW50Lm5vZGUgIT09IHBhcmVudCAmJiBkb20ubm9kZUxlbmd0aChwYXJlbnQpID09PSAxKSB7XG4gICAgICAgIGVtcHR5UGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgICB9XG4gICAgICBkb20ucmVtb3ZlKG5vZGUsIGZhbHNlKTtcbiAgICB9KTtcblxuICAgIC8vIHJlbW92ZSBlbXB0eSBwYXJlbnRzXG4gICAgJC5lYWNoKGVtcHR5UGFyZW50cywgZnVuY3Rpb24oaWR4LCBub2RlKSB7XG4gICAgICBkb20ucmVtb3ZlKG5vZGUsIGZhbHNlKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBuZXcgV3JhcHBlZFJhbmdlKFxuICAgICAgcG9pbnQubm9kZSxcbiAgICAgIHBvaW50Lm9mZnNldCxcbiAgICAgIHBvaW50Lm5vZGUsXG4gICAgICBwb2ludC5vZmZzZXRcbiAgICApLm5vcm1hbGl6ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIG1ha2VJc09uOiByZXR1cm4gaXNPbihwcmVkKSBmdW5jdGlvblxuICAgKi9cbiAgbWFrZUlzT24ocHJlZCkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnN0IGFuY2VzdG9yID0gZG9tLmFuY2VzdG9yKHRoaXMuc2MsIHByZWQpO1xuICAgICAgcmV0dXJuICEhYW5jZXN0b3IgJiYgKGFuY2VzdG9yID09PSBkb20uYW5jZXN0b3IodGhpcy5lYywgcHJlZCkpO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZFxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgaXNMZWZ0RWRnZU9mKHByZWQpIHtcbiAgICBpZiAoIWRvbS5pc0xlZnRFZGdlUG9pbnQodGhpcy5nZXRTdGFydFBvaW50KCkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgbm9kZSA9IGRvbS5hbmNlc3Rvcih0aGlzLnNjLCBwcmVkKTtcbiAgICByZXR1cm4gbm9kZSAmJiBkb20uaXNMZWZ0RWRnZU9mKHRoaXMuc2MsIG5vZGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIHJldHVybnMgd2hldGhlciByYW5nZSB3YXMgY29sbGFwc2VkIG9yIG5vdFxuICAgKi9cbiAgaXNDb2xsYXBzZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2MgPT09IHRoaXMuZWMgJiYgdGhpcy5zbyA9PT0gdGhpcy5lbztcbiAgfVxuXG4gIC8qKlxuICAgKiB3cmFwIGlubGluZSBub2RlcyB3aGljaCBjaGlsZHJlbiBvZiBib2R5IHdpdGggcGFyYWdyYXBoXG4gICAqXG4gICAqIEByZXR1cm4ge1dyYXBwZWRSYW5nZX1cbiAgICovXG4gIHdyYXBCb2R5SW5saW5lV2l0aFBhcmEoKSB7XG4gICAgaWYgKGRvbS5pc0JvZHlDb250YWluZXIodGhpcy5zYykgJiYgZG9tLmlzRW1wdHkodGhpcy5zYykpIHtcbiAgICAgIHRoaXMuc2MuaW5uZXJIVE1MID0gZG9tLmVtcHR5UGFyYTtcbiAgICAgIHJldHVybiBuZXcgV3JhcHBlZFJhbmdlKHRoaXMuc2MuZmlyc3RDaGlsZCwgMCwgdGhpcy5zYy5maXJzdENoaWxkLCAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBbd29ya2Fyb3VuZF0gZmlyZWZveCBvZnRlbiBjcmVhdGUgcmFuZ2Ugb24gbm90IHZpc2libGUgcG9pbnQuIHNvIG5vcm1hbGl6ZSBoZXJlLlxuICAgICAqICAtIGZpcmVmb3g6IHw8cD50ZXh0PC9wPnxcbiAgICAgKiAgLSBjaHJvbWU6IDxwPnx0ZXh0fDwvcD5cbiAgICAgKi9cbiAgICBjb25zdCBybmcgPSB0aGlzLm5vcm1hbGl6ZSgpO1xuICAgIGlmIChkb20uaXNQYXJhSW5saW5lKHRoaXMuc2MpIHx8IGRvbS5pc1BhcmEodGhpcy5zYykpIHtcbiAgICAgIHJldHVybiBybmc7XG4gICAgfVxuXG4gICAgLy8gZmluZCBpbmxpbmUgdG9wIGFuY2VzdG9yXG4gICAgbGV0IHRvcEFuY2VzdG9yO1xuICAgIGlmIChkb20uaXNJbmxpbmUocm5nLnNjKSkge1xuICAgICAgY29uc3QgYW5jZXN0b3JzID0gZG9tLmxpc3RBbmNlc3Rvcihybmcuc2MsIGZ1bmMubm90KGRvbS5pc0lubGluZSkpO1xuICAgICAgdG9wQW5jZXN0b3IgPSBsaXN0cy5sYXN0KGFuY2VzdG9ycyk7XG4gICAgICBpZiAoIWRvbS5pc0lubGluZSh0b3BBbmNlc3RvcikpIHtcbiAgICAgICAgdG9wQW5jZXN0b3IgPSBhbmNlc3RvcnNbYW5jZXN0b3JzLmxlbmd0aCAtIDJdIHx8IHJuZy5zYy5jaGlsZE5vZGVzW3JuZy5zb107XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRvcEFuY2VzdG9yID0gcm5nLnNjLmNoaWxkTm9kZXNbcm5nLnNvID4gMCA/IHJuZy5zbyAtIDEgOiAwXTtcbiAgICB9XG5cbiAgICAvLyBzaWJsaW5ncyBub3QgaW4gcGFyYWdyYXBoXG4gICAgbGV0IGlubGluZVNpYmxpbmdzID0gZG9tLmxpc3RQcmV2KHRvcEFuY2VzdG9yLCBkb20uaXNQYXJhSW5saW5lKS5yZXZlcnNlKCk7XG4gICAgaW5saW5lU2libGluZ3MgPSBpbmxpbmVTaWJsaW5ncy5jb25jYXQoZG9tLmxpc3ROZXh0KHRvcEFuY2VzdG9yLm5leHRTaWJsaW5nLCBkb20uaXNQYXJhSW5saW5lKSk7XG5cbiAgICAvLyB3cmFwIHdpdGggcGFyYWdyYXBoXG4gICAgaWYgKGlubGluZVNpYmxpbmdzLmxlbmd0aCkge1xuICAgICAgY29uc3QgcGFyYSA9IGRvbS53cmFwKGxpc3RzLmhlYWQoaW5saW5lU2libGluZ3MpLCAncCcpO1xuICAgICAgZG9tLmFwcGVuZENoaWxkTm9kZXMocGFyYSwgbGlzdHMudGFpbChpbmxpbmVTaWJsaW5ncykpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIGluc2VydCBub2RlIGF0IGN1cnJlbnQgY3Vyc29yXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgKiBAcmV0dXJuIHtOb2RlfVxuICAgKi9cbiAgaW5zZXJ0Tm9kZShub2RlKSB7XG4gICAgY29uc3Qgcm5nID0gdGhpcy53cmFwQm9keUlubGluZVdpdGhQYXJhKCkuZGVsZXRlQ29udGVudHMoKTtcbiAgICBjb25zdCBpbmZvID0gZG9tLnNwbGl0UG9pbnQocm5nLmdldFN0YXJ0UG9pbnQoKSwgZG9tLmlzSW5saW5lKG5vZGUpKTtcblxuICAgIGlmIChpbmZvLnJpZ2h0Tm9kZSkge1xuICAgICAgaW5mby5yaWdodE5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUobm9kZSwgaW5mby5yaWdodE5vZGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbmZvLmNvbnRhaW5lci5hcHBlbmRDaGlsZChub2RlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBpbnNlcnQgaHRtbCBhdCBjdXJyZW50IGN1cnNvclxuICAgKi9cbiAgcGFzdGVIVE1MKG1hcmt1cCkge1xuICAgIGNvbnN0IGNvbnRlbnRzQ29udGFpbmVyID0gJCgnPGRpdj48L2Rpdj4nKS5odG1sKG1hcmt1cClbMF07XG4gICAgY29uc3QgY2hpbGROb2RlcyA9IGxpc3RzLmZyb20oY29udGVudHNDb250YWluZXIuY2hpbGROb2Rlcyk7XG5cbiAgICBjb25zdCBybmcgPSB0aGlzLndyYXBCb2R5SW5saW5lV2l0aFBhcmEoKS5kZWxldGVDb250ZW50cygpO1xuXG4gICAgcmV0dXJuIGNoaWxkTm9kZXMucmV2ZXJzZSgpLm1hcChmdW5jdGlvbihjaGlsZE5vZGUpIHtcbiAgICAgIHJldHVybiBybmcuaW5zZXJ0Tm9kZShjaGlsZE5vZGUpO1xuICAgIH0pLnJldmVyc2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiByZXR1cm5zIHRleHQgaW4gcmFuZ2VcbiAgICpcbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cbiAgdG9TdHJpbmcoKSB7XG4gICAgY29uc3QgbmF0aXZlUm5nID0gdGhpcy5uYXRpdmVSYW5nZSgpO1xuICAgIHJldHVybiBlbnYuaXNXM0NSYW5nZVN1cHBvcnQgPyBuYXRpdmVSbmcudG9TdHJpbmcoKSA6IG5hdGl2ZVJuZy50ZXh0O1xuICB9XG5cbiAgLyoqXG4gICAqIHJldHVybnMgcmFuZ2UgZm9yIHdvcmQgYmVmb3JlIGN1cnNvclxuICAgKlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtmaW5kQWZ0ZXJdIC0gZmluZCBhZnRlciBjdXJzb3IsIGRlZmF1bHQ6IGZhbHNlXG4gICAqIEByZXR1cm4ge1dyYXBwZWRSYW5nZX1cbiAgICovXG4gIGdldFdvcmRSYW5nZShmaW5kQWZ0ZXIpIHtcbiAgICBsZXQgZW5kUG9pbnQgPSB0aGlzLmdldEVuZFBvaW50KCk7XG5cbiAgICBpZiAoIWRvbS5pc0NoYXJQb2ludChlbmRQb2ludCkpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0UG9pbnQgPSBkb20ucHJldlBvaW50VW50aWwoZW5kUG9pbnQsIGZ1bmN0aW9uKHBvaW50KSB7XG4gICAgICByZXR1cm4gIWRvbS5pc0NoYXJQb2ludChwb2ludCk7XG4gICAgfSk7XG5cbiAgICBpZiAoZmluZEFmdGVyKSB7XG4gICAgICBlbmRQb2ludCA9IGRvbS5uZXh0UG9pbnRVbnRpbChlbmRQb2ludCwgZnVuY3Rpb24ocG9pbnQpIHtcbiAgICAgICAgcmV0dXJuICFkb20uaXNDaGFyUG9pbnQocG9pbnQpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBXcmFwcGVkUmFuZ2UoXG4gICAgICBzdGFydFBvaW50Lm5vZGUsXG4gICAgICBzdGFydFBvaW50Lm9mZnNldCxcbiAgICAgIGVuZFBvaW50Lm5vZGUsXG4gICAgICBlbmRQb2ludC5vZmZzZXRcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIGNyZWF0ZSBvZmZzZXRQYXRoIGJvb2ttYXJrXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gZWRpdGFibGVcbiAgICovXG4gIGJvb2ttYXJrKGVkaXRhYmxlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHM6IHtcbiAgICAgICAgcGF0aDogZG9tLm1ha2VPZmZzZXRQYXRoKGVkaXRhYmxlLCB0aGlzLnNjKSxcbiAgICAgICAgb2Zmc2V0OiB0aGlzLnNvXG4gICAgICB9LFxuICAgICAgZToge1xuICAgICAgICBwYXRoOiBkb20ubWFrZU9mZnNldFBhdGgoZWRpdGFibGUsIHRoaXMuZWMpLFxuICAgICAgICBvZmZzZXQ6IHRoaXMuZW9cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIGNyZWF0ZSBvZmZzZXRQYXRoIGJvb2ttYXJrIGJhc2Ugb24gcGFyYWdyYXBoXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZVtdfSBwYXJhc1xuICAgKi9cbiAgcGFyYUJvb2ttYXJrKHBhcmFzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHM6IHtcbiAgICAgICAgcGF0aDogbGlzdHMudGFpbChkb20ubWFrZU9mZnNldFBhdGgobGlzdHMuaGVhZChwYXJhcyksIHRoaXMuc2MpKSxcbiAgICAgICAgb2Zmc2V0OiB0aGlzLnNvXG4gICAgICB9LFxuICAgICAgZToge1xuICAgICAgICBwYXRoOiBsaXN0cy50YWlsKGRvbS5tYWtlT2Zmc2V0UGF0aChsaXN0cy5sYXN0KHBhcmFzKSwgdGhpcy5lYykpLFxuICAgICAgICBvZmZzZXQ6IHRoaXMuZW9cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIGdldENsaWVudFJlY3RzXG4gICAqIEByZXR1cm4ge1JlY3RbXX1cbiAgICovXG4gIGdldENsaWVudFJlY3RzKCkge1xuICAgIGNvbnN0IG5hdGl2ZVJuZyA9IHRoaXMubmF0aXZlUmFuZ2UoKTtcbiAgICByZXR1cm4gbmF0aXZlUm5nLmdldENsaWVudFJlY3RzKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBEYXRhIHN0cnVjdHVyZVxuICogICogQm91bmRhcnlQb2ludDogYSBwb2ludCBvZiBkb20gdHJlZVxuICogICogQm91bmRhcnlQb2ludHM6IHR3byBib3VuZGFyeVBvaW50cyBjb3JyZXNwb25kaW5nIHRvIHRoZSBzdGFydCBhbmQgdGhlIGVuZCBvZiB0aGUgUmFuZ2VcbiAqXG4gKiBTZWUgdG8gaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTItVHJhdmVyc2FsLVJhbmdlL3Jhbmdlcy5odG1sI0xldmVsLTItUmFuZ2UtUG9zaXRpb25cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAvKipcbiAgICogY3JlYXRlIFJhbmdlIE9iamVjdCBGcm9tIGFyZ3VtZW50cyBvciBCcm93c2VyIFNlbGVjdGlvblxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IHNjIC0gc3RhcnQgY29udGFpbmVyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBzbyAtIHN0YXJ0IG9mZnNldFxuICAgKiBAcGFyYW0ge05vZGV9IGVjIC0gZW5kIGNvbnRhaW5lclxuICAgKiBAcGFyYW0ge051bWJlcn0gZW8gLSBlbmQgb2Zmc2V0XG4gICAqIEByZXR1cm4ge1dyYXBwZWRSYW5nZX1cbiAgICovXG4gIGNyZWF0ZTogZnVuY3Rpb24oc2MsIHNvLCBlYywgZW8pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gNCkge1xuICAgICAgcmV0dXJuIG5ldyBXcmFwcGVkUmFuZ2Uoc2MsIHNvLCBlYywgZW8pO1xuICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgeyAvLyBjb2xsYXBzZWRcbiAgICAgIGVjID0gc2M7XG4gICAgICBlbyA9IHNvO1xuICAgICAgcmV0dXJuIG5ldyBXcmFwcGVkUmFuZ2Uoc2MsIHNvLCBlYywgZW8pO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgd3JhcHBlZFJhbmdlID0gdGhpcy5jcmVhdGVGcm9tU2VsZWN0aW9uKCk7XG4gICAgICBpZiAoIXdyYXBwZWRSYW5nZSAmJiBhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHdyYXBwZWRSYW5nZSA9IHRoaXMuY3JlYXRlRnJvbU5vZGUoYXJndW1lbnRzWzBdKTtcbiAgICAgICAgcmV0dXJuIHdyYXBwZWRSYW5nZS5jb2xsYXBzZShkb20uZW1wdHlQYXJhID09PSBhcmd1bWVudHNbMF0uaW5uZXJIVE1MKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3cmFwcGVkUmFuZ2U7XG4gICAgfVxuICB9LFxuXG4gIGNyZWF0ZUZyb21TZWxlY3Rpb246IGZ1bmN0aW9uKCkge1xuICAgIGxldCBzYywgc28sIGVjLCBlbztcbiAgICBpZiAoZW52LmlzVzNDUmFuZ2VTdXBwb3J0KSB7XG4gICAgICBjb25zdCBzZWxlY3Rpb24gPSBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKTtcbiAgICAgIGlmICghc2VsZWN0aW9uIHx8IHNlbGVjdGlvbi5yYW5nZUNvdW50ID09PSAwKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSBlbHNlIGlmIChkb20uaXNCb2R5KHNlbGVjdGlvbi5hbmNob3JOb2RlKSkge1xuICAgICAgICAvLyBGaXJlZm94OiByZXR1cm5zIGVudGlyZSBib2R5IGFzIHJhbmdlIG9uIGluaXRpYWxpemF0aW9uLlxuICAgICAgICAvLyBXZSB3b24ndCBuZXZlciBuZWVkIGl0LlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbmF0aXZlUm5nID0gc2VsZWN0aW9uLmdldFJhbmdlQXQoMCk7XG4gICAgICBzYyA9IG5hdGl2ZVJuZy5zdGFydENvbnRhaW5lcjtcbiAgICAgIHNvID0gbmF0aXZlUm5nLnN0YXJ0T2Zmc2V0O1xuICAgICAgZWMgPSBuYXRpdmVSbmcuZW5kQ29udGFpbmVyO1xuICAgICAgZW8gPSBuYXRpdmVSbmcuZW5kT2Zmc2V0O1xuICAgIH0gZWxzZSB7IC8vIElFODogVGV4dFJhbmdlXG4gICAgICBjb25zdCB0ZXh0UmFuZ2UgPSBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtcbiAgICAgIGNvbnN0IHRleHRSYW5nZUVuZCA9IHRleHRSYW5nZS5kdXBsaWNhdGUoKTtcbiAgICAgIHRleHRSYW5nZUVuZC5jb2xsYXBzZShmYWxzZSk7XG4gICAgICBjb25zdCB0ZXh0UmFuZ2VTdGFydCA9IHRleHRSYW5nZTtcbiAgICAgIHRleHRSYW5nZVN0YXJ0LmNvbGxhcHNlKHRydWUpO1xuXG4gICAgICBsZXQgc3RhcnRQb2ludCA9IHRleHRSYW5nZVRvUG9pbnQodGV4dFJhbmdlU3RhcnQsIHRydWUpO1xuICAgICAgbGV0IGVuZFBvaW50ID0gdGV4dFJhbmdlVG9Qb2ludCh0ZXh0UmFuZ2VFbmQsIGZhbHNlKTtcblxuICAgICAgLy8gc2FtZSB2aXNpYmxlIHBvaW50IGNhc2U6IHJhbmdlIHdhcyBjb2xsYXBzZWQuXG4gICAgICBpZiAoZG9tLmlzVGV4dChzdGFydFBvaW50Lm5vZGUpICYmIGRvbS5pc0xlZnRFZGdlUG9pbnQoc3RhcnRQb2ludCkgJiZcbiAgICAgICAgICBkb20uaXNUZXh0Tm9kZShlbmRQb2ludC5ub2RlKSAmJiBkb20uaXNSaWdodEVkZ2VQb2ludChlbmRQb2ludCkgJiZcbiAgICAgICAgICBlbmRQb2ludC5ub2RlLm5leHRTaWJsaW5nID09PSBzdGFydFBvaW50Lm5vZGUpIHtcbiAgICAgICAgc3RhcnRQb2ludCA9IGVuZFBvaW50O1xuICAgICAgfVxuXG4gICAgICBzYyA9IHN0YXJ0UG9pbnQuY29udDtcbiAgICAgIHNvID0gc3RhcnRQb2ludC5vZmZzZXQ7XG4gICAgICBlYyA9IGVuZFBvaW50LmNvbnQ7XG4gICAgICBlbyA9IGVuZFBvaW50Lm9mZnNldDtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFdyYXBwZWRSYW5nZShzYywgc28sIGVjLCBlbyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBtZXRob2RcbiAgICpcbiAgICogY3JlYXRlIFdyYXBwZWRSYW5nZSBmcm9tIG5vZGVcbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSBub2RlXG4gICAqIEByZXR1cm4ge1dyYXBwZWRSYW5nZX1cbiAgICovXG4gIGNyZWF0ZUZyb21Ob2RlOiBmdW5jdGlvbihub2RlKSB7XG4gICAgbGV0IHNjID0gbm9kZTtcbiAgICBsZXQgc28gPSAwO1xuICAgIGxldCBlYyA9IG5vZGU7XG4gICAgbGV0IGVvID0gZG9tLm5vZGVMZW5ndGgoZWMpO1xuXG4gICAgLy8gYnJvd3NlcnMgY2FuJ3QgdGFyZ2V0IGEgcGljdHVyZSBvciB2b2lkIG5vZGVcbiAgICBpZiAoZG9tLmlzVm9pZChzYykpIHtcbiAgICAgIHNvID0gZG9tLmxpc3RQcmV2KHNjKS5sZW5ndGggLSAxO1xuICAgICAgc2MgPSBzYy5wYXJlbnROb2RlO1xuICAgIH1cbiAgICBpZiAoZG9tLmlzQlIoZWMpKSB7XG4gICAgICBlbyA9IGRvbS5saXN0UHJldihlYykubGVuZ3RoIC0gMTtcbiAgICAgIGVjID0gZWMucGFyZW50Tm9kZTtcbiAgICB9IGVsc2UgaWYgKGRvbS5pc1ZvaWQoZWMpKSB7XG4gICAgICBlbyA9IGRvbS5saXN0UHJldihlYykubGVuZ3RoO1xuICAgICAgZWMgPSBlYy5wYXJlbnROb2RlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNyZWF0ZShzYywgc28sIGVjLCBlbyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIGNyZWF0ZSBXcmFwcGVkUmFuZ2UgZnJvbSBub2RlIGFmdGVyIHBvc2l0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgKiBAcmV0dXJuIHtXcmFwcGVkUmFuZ2V9XG4gICAqL1xuICBjcmVhdGVGcm9tTm9kZUJlZm9yZTogZnVuY3Rpb24obm9kZSkge1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZUZyb21Ob2RlKG5vZGUpLmNvbGxhcHNlKHRydWUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBjcmVhdGUgV3JhcHBlZFJhbmdlIGZyb20gbm9kZSBhZnRlciBwb3NpdGlvblxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAgICogQHJldHVybiB7V3JhcHBlZFJhbmdlfVxuICAgKi9cbiAgY3JlYXRlRnJvbU5vZGVBZnRlcjogZnVuY3Rpb24obm9kZSkge1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZUZyb21Ob2RlKG5vZGUpLmNvbGxhcHNlKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBtZXRob2RcbiAgICpcbiAgICogY3JlYXRlIFdyYXBwZWRSYW5nZSBmcm9tIGJvb2ttYXJrXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gZWRpdGFibGVcbiAgICogQHBhcmFtIHtPYmplY3R9IGJvb2ttYXJrXG4gICAqIEByZXR1cm4ge1dyYXBwZWRSYW5nZX1cbiAgICovXG4gIGNyZWF0ZUZyb21Cb29rbWFyazogZnVuY3Rpb24oZWRpdGFibGUsIGJvb2ttYXJrKSB7XG4gICAgY29uc3Qgc2MgPSBkb20uZnJvbU9mZnNldFBhdGgoZWRpdGFibGUsIGJvb2ttYXJrLnMucGF0aCk7XG4gICAgY29uc3Qgc28gPSBib29rbWFyay5zLm9mZnNldDtcbiAgICBjb25zdCBlYyA9IGRvbS5mcm9tT2Zmc2V0UGF0aChlZGl0YWJsZSwgYm9va21hcmsuZS5wYXRoKTtcbiAgICBjb25zdCBlbyA9IGJvb2ttYXJrLmUub2Zmc2V0O1xuICAgIHJldHVybiBuZXcgV3JhcHBlZFJhbmdlKHNjLCBzbywgZWMsIGVvKTtcbiAgfSxcblxuICAvKipcbiAgICogQG1ldGhvZFxuICAgKlxuICAgKiBjcmVhdGUgV3JhcHBlZFJhbmdlIGZyb20gcGFyYUJvb2ttYXJrXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBib29rbWFya1xuICAgKiBAcGFyYW0ge05vZGVbXX0gcGFyYXNcbiAgICogQHJldHVybiB7V3JhcHBlZFJhbmdlfVxuICAgKi9cbiAgY3JlYXRlRnJvbVBhcmFCb29rbWFyazogZnVuY3Rpb24oYm9va21hcmssIHBhcmFzKSB7XG4gICAgY29uc3Qgc28gPSBib29rbWFyay5zLm9mZnNldDtcbiAgICBjb25zdCBlbyA9IGJvb2ttYXJrLmUub2Zmc2V0O1xuICAgIGNvbnN0IHNjID0gZG9tLmZyb21PZmZzZXRQYXRoKGxpc3RzLmhlYWQocGFyYXMpLCBib29rbWFyay5zLnBhdGgpO1xuICAgIGNvbnN0IGVjID0gZG9tLmZyb21PZmZzZXRQYXRoKGxpc3RzLmxhc3QocGFyYXMpLCBib29rbWFyay5lLnBhdGgpO1xuXG4gICAgcmV0dXJuIG5ldyBXcmFwcGVkUmFuZ2Uoc2MsIHNvLCBlYywgZW8pO1xuICB9XG59O1xuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxuLyoqXG4gKiBAbWV0aG9kIHJlYWRGaWxlQXNEYXRhVVJMXG4gKlxuICogcmVhZCBjb250ZW50cyBvZiBmaWxlIGFzIHJlcHJlc2VudGluZyBVUkxcbiAqXG4gKiBAcGFyYW0ge0ZpbGV9IGZpbGVcbiAqIEByZXR1cm4ge1Byb21pc2V9IC0gdGhlbjogZGF0YVVybFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVhZEZpbGVBc0RhdGFVUkwoZmlsZSkge1xuICByZXR1cm4gJC5EZWZlcnJlZCgoZGVmZXJyZWQpID0+IHtcbiAgICAkLmV4dGVuZChuZXcgRmlsZVJlYWRlcigpLCB7XG4gICAgICBvbmxvYWQ6IChlKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGFVUkwgPSBlLnRhcmdldC5yZXN1bHQ7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YVVSTCk7XG4gICAgICB9LFxuICAgICAgb25lcnJvcjogKGVycikgPT4ge1xuICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyKTtcbiAgICAgIH1cbiAgICB9KS5yZWFkQXNEYXRhVVJMKGZpbGUpO1xuICB9KS5wcm9taXNlKCk7XG59XG5cbi8qKlxuICogQG1ldGhvZCBjcmVhdGVJbWFnZVxuICpcbiAqIGNyZWF0ZSBgPGltYWdlPmAgZnJvbSB1cmwgc3RyaW5nXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHVybFxuICogQHJldHVybiB7UHJvbWlzZX0gLSB0aGVuOiAkaW1hZ2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUltYWdlKHVybCkge1xuICByZXR1cm4gJC5EZWZlcnJlZCgoZGVmZXJyZWQpID0+IHtcbiAgICBjb25zdCAkaW1nID0gJCgnPGltZz4nKTtcblxuICAgICRpbWcub25lKCdsb2FkJywgKCkgPT4ge1xuICAgICAgJGltZy5vZmYoJ2Vycm9yIGFib3J0Jyk7XG4gICAgICBkZWZlcnJlZC5yZXNvbHZlKCRpbWcpO1xuICAgIH0pLm9uZSgnZXJyb3IgYWJvcnQnLCAoKSA9PiB7XG4gICAgICAkaW1nLm9mZignbG9hZCcpLmRldGFjaCgpO1xuICAgICAgZGVmZXJyZWQucmVqZWN0KCRpbWcpO1xuICAgIH0pLmNzcyh7XG4gICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICB9KS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KS5hdHRyKCdzcmMnLCB1cmwpO1xuICB9KS5wcm9taXNlKCk7XG59XG4iLCJpbXBvcnQgcmFuZ2UgZnJvbSAnLi4vY29yZS9yYW5nZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhpc3Rvcnkge1xuICBjb25zdHJ1Y3RvcigkZWRpdGFibGUpIHtcbiAgICB0aGlzLnN0YWNrID0gW107XG4gICAgdGhpcy5zdGFja09mZnNldCA9IC0xO1xuICAgIHRoaXMuJGVkaXRhYmxlID0gJGVkaXRhYmxlO1xuICAgIHRoaXMuZWRpdGFibGUgPSAkZWRpdGFibGVbMF07XG4gIH1cblxuICBtYWtlU25hcHNob3QoKSB7XG4gICAgY29uc3Qgcm5nID0gcmFuZ2UuY3JlYXRlKHRoaXMuZWRpdGFibGUpO1xuICAgIGNvbnN0IGVtcHR5Qm9va21hcmsgPSB7czoge3BhdGg6IFtdLCBvZmZzZXQ6IDB9LCBlOiB7cGF0aDogW10sIG9mZnNldDogMH19O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRlbnRzOiB0aGlzLiRlZGl0YWJsZS5odG1sKCksXG4gICAgICBib29rbWFyazogKHJuZyA/IHJuZy5ib29rbWFyayh0aGlzLmVkaXRhYmxlKSA6IGVtcHR5Qm9va21hcmspXG4gICAgfTtcbiAgfVxuXG4gIGFwcGx5U25hcHNob3Qoc25hcHNob3QpIHtcbiAgICBpZiAoc25hcHNob3QuY29udGVudHMgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuJGVkaXRhYmxlLmh0bWwoc25hcHNob3QuY29udGVudHMpO1xuICAgIH1cbiAgICBpZiAoc25hcHNob3QuYm9va21hcmsgIT09IG51bGwpIHtcbiAgICAgIHJhbmdlLmNyZWF0ZUZyb21Cb29rbWFyayh0aGlzLmVkaXRhYmxlLCBzbmFwc2hvdC5ib29rbWFyaykuc2VsZWN0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICogQG1ldGhvZCByZXdpbmRcbiAgKiBSZXdpbmRzIHRoZSBoaXN0b3J5IHN0YWNrIGJhY2sgdG8gdGhlIGZpcnN0IHNuYXBzaG90IHRha2VuLlxuICAqIExlYXZlcyB0aGUgc3RhY2sgaW50YWN0LCBzbyB0aGF0IFwiUmVkb1wiIGNhbiBzdGlsbCBiZSB1c2VkLlxuICAqL1xuICByZXdpbmQoKSB7XG4gICAgLy8gQ3JlYXRlIHNuYXAgc2hvdCBpZiBub3QgeWV0IHJlY29yZGVkXG4gICAgaWYgKHRoaXMuJGVkaXRhYmxlLmh0bWwoKSAhPT0gdGhpcy5zdGFja1t0aGlzLnN0YWNrT2Zmc2V0XS5jb250ZW50cykge1xuICAgICAgdGhpcy5yZWNvcmRVbmRvKCk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIHRvIHRoZSBmaXJzdCBhdmFpbGFibGUgc25hcHNob3QuXG4gICAgdGhpcy5zdGFja09mZnNldCA9IDA7XG5cbiAgICAvLyBBcHBseSB0aGF0IHNuYXBzaG90LlxuICAgIHRoaXMuYXBwbHlTbmFwc2hvdCh0aGlzLnN0YWNrW3RoaXMuc3RhY2tPZmZzZXRdKTtcbiAgfVxuXG4gIC8qKlxuICAqIEBtZXRob2QgcmVzZXRcbiAgKiBSZXNldHMgdGhlIGhpc3Rvcnkgc3RhY2sgY29tcGxldGVseTsgcmV2ZXJ0aW5nIHRvIGFuIGVtcHR5IGVkaXRvci5cbiAgKi9cbiAgcmVzZXQoKSB7XG4gICAgLy8gQ2xlYXIgdGhlIHN0YWNrLlxuICAgIHRoaXMuc3RhY2sgPSBbXTtcblxuICAgIC8vIFJlc3RvcmUgc3RhY2tPZmZzZXQgdG8gaXRzIG9yaWdpbmFsIHZhbHVlLlxuICAgIHRoaXMuc3RhY2tPZmZzZXQgPSAtMTtcblxuICAgIC8vIENsZWFyIHRoZSBlZGl0YWJsZSBhcmVhLlxuICAgIHRoaXMuJGVkaXRhYmxlLmh0bWwoJycpO1xuXG4gICAgLy8gUmVjb3JkIG91ciBmaXJzdCBzbmFwc2hvdCAob2Ygbm90aGluZykuXG4gICAgdGhpcy5yZWNvcmRVbmRvKCk7XG4gIH1cblxuICAvKipcbiAgICogdW5kb1xuICAgKi9cbiAgdW5kbygpIHtcbiAgICAvLyBDcmVhdGUgc25hcCBzaG90IGlmIG5vdCB5ZXQgcmVjb3JkZWRcbiAgICBpZiAodGhpcy4kZWRpdGFibGUuaHRtbCgpICE9PSB0aGlzLnN0YWNrW3RoaXMuc3RhY2tPZmZzZXRdLmNvbnRlbnRzKSB7XG4gICAgICB0aGlzLnJlY29yZFVuZG8oKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGFja09mZnNldCA+IDApIHtcbiAgICAgIHRoaXMuc3RhY2tPZmZzZXQtLTtcbiAgICAgIHRoaXMuYXBwbHlTbmFwc2hvdCh0aGlzLnN0YWNrW3RoaXMuc3RhY2tPZmZzZXRdKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogcmVkb1xuICAgKi9cbiAgcmVkbygpIHtcbiAgICBpZiAodGhpcy5zdGFjay5sZW5ndGggLSAxID4gdGhpcy5zdGFja09mZnNldCkge1xuICAgICAgdGhpcy5zdGFja09mZnNldCsrO1xuICAgICAgdGhpcy5hcHBseVNuYXBzaG90KHRoaXMuc3RhY2tbdGhpcy5zdGFja09mZnNldF0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiByZWNvcmRlZCB1bmRvXG4gICAqL1xuICByZWNvcmRVbmRvKCkge1xuICAgIHRoaXMuc3RhY2tPZmZzZXQrKztcblxuICAgIC8vIFdhc2ggb3V0IHN0YWNrIGFmdGVyIHN0YWNrT2Zmc2V0XG4gICAgaWYgKHRoaXMuc3RhY2subGVuZ3RoID4gdGhpcy5zdGFja09mZnNldCkge1xuICAgICAgdGhpcy5zdGFjayA9IHRoaXMuc3RhY2suc2xpY2UoMCwgdGhpcy5zdGFja09mZnNldCk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIG5ldyBzbmFwc2hvdCBhbmQgcHVzaCBpdCB0byB0aGUgZW5kXG4gICAgdGhpcy5zdGFjay5wdXNoKHRoaXMubWFrZVNuYXBzaG90KCkpO1xuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGVudiBmcm9tICcuLi9jb3JlL2Vudic7XG5pbXBvcnQgZnVuYyBmcm9tICcuLi9jb3JlL2Z1bmMnO1xuaW1wb3J0IGxpc3RzIGZyb20gJy4uL2NvcmUvbGlzdHMnO1xuaW1wb3J0IGRvbSBmcm9tICcuLi9jb3JlL2RvbSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0eWxlIHtcbiAgLyoqXG4gICAqIEBtZXRob2QgalF1ZXJ5Q1NTXG4gICAqXG4gICAqIFt3b3JrYXJvdW5kXSBmb3Igb2xkIGpRdWVyeVxuICAgKiBwYXNzaW5nIGFuIGFycmF5IG9mIHN0eWxlIHByb3BlcnRpZXMgdG8gLmNzcygpXG4gICAqIHdpbGwgcmVzdWx0IGluIGFuIG9iamVjdCBvZiBwcm9wZXJ0eS12YWx1ZSBwYWlycy5cbiAgICogKGNvbXBhYmlsaXR5IHdpdGggdmVyc2lvbiA8IDEuOSlcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtICB7alF1ZXJ5fSAkb2JqXG4gICAqIEBwYXJhbSAge0FycmF5fSBwcm9wZXJ0eU5hbWVzIC0gQW4gYXJyYXkgb2Ygb25lIG9yIG1vcmUgQ1NTIHByb3BlcnRpZXMuXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIGpRdWVyeUNTUygkb2JqLCBwcm9wZXJ0eU5hbWVzKSB7XG4gICAgaWYgKGVudi5qcXVlcnlWZXJzaW9uIDwgMS45KSB7XG4gICAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICAgICQuZWFjaChwcm9wZXJ0eU5hbWVzLCAoaWR4LCBwcm9wZXJ0eU5hbWUpID0+IHtcbiAgICAgICAgcmVzdWx0W3Byb3BlcnR5TmFtZV0gPSAkb2JqLmNzcyhwcm9wZXJ0eU5hbWUpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gJG9iai5jc3MocHJvcGVydHlOYW1lcyk7XG4gIH1cblxuICAvKipcbiAgICogcmV0dXJucyBzdHlsZSBvYmplY3QgZnJvbSBub2RlXG4gICAqXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSAkbm9kZVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBmcm9tTm9kZSgkbm9kZSkge1xuICAgIGNvbnN0IHByb3BlcnRpZXMgPSBbJ2ZvbnQtZmFtaWx5JywgJ2ZvbnQtc2l6ZScsICd0ZXh0LWFsaWduJywgJ2xpc3Qtc3R5bGUtdHlwZScsICdsaW5lLWhlaWdodCddO1xuICAgIGNvbnN0IHN0eWxlSW5mbyA9IHRoaXMualF1ZXJ5Q1NTKCRub2RlLCBwcm9wZXJ0aWVzKSB8fCB7fTtcbiAgICBzdHlsZUluZm9bJ2ZvbnQtc2l6ZSddID0gcGFyc2VJbnQoc3R5bGVJbmZvWydmb250LXNpemUnXSwgMTApO1xuICAgIHJldHVybiBzdHlsZUluZm87XG4gIH1cblxuICAvKipcbiAgICogcGFyYWdyYXBoIGxldmVsIHN0eWxlXG4gICAqXG4gICAqIEBwYXJhbSB7V3JhcHBlZFJhbmdlfSBybmdcbiAgICogQHBhcmFtIHtPYmplY3R9IHN0eWxlSW5mb1xuICAgKi9cbiAgc3R5bGVQYXJhKHJuZywgc3R5bGVJbmZvKSB7XG4gICAgJC5lYWNoKHJuZy5ub2Rlcyhkb20uaXNQYXJhLCB7XG4gICAgICBpbmNsdWRlQW5jZXN0b3I6IHRydWVcbiAgICB9KSwgKGlkeCwgcGFyYSkgPT4ge1xuICAgICAgJChwYXJhKS5jc3Moc3R5bGVJbmZvKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBpbnNlcnQgYW5kIHJldHVybnMgc3R5bGVOb2RlcyBvbiByYW5nZS5cbiAgICpcbiAgICogQHBhcmFtIHtXcmFwcGVkUmFuZ2V9IHJuZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gb3B0aW9ucyBmb3Igc3R5bGVOb2Rlc1xuICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnMubm9kZU5hbWVdIC0gZGVmYXVsdDogYFNQQU5gXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMuZXhwYW5kQ2xvc2VzdFNpYmxpbmddIC0gZGVmYXVsdDogYGZhbHNlYFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLm9ubHlQYXJ0aWFsQ29udGFpbnNdIC0gZGVmYXVsdDogYGZhbHNlYFxuICAgKiBAcmV0dXJuIHtOb2RlW119XG4gICAqL1xuICBzdHlsZU5vZGVzKHJuZywgb3B0aW9ucykge1xuICAgIHJuZyA9IHJuZy5zcGxpdFRleHQoKTtcblxuICAgIGNvbnN0IG5vZGVOYW1lID0gKG9wdGlvbnMgJiYgb3B0aW9ucy5ub2RlTmFtZSkgfHwgJ1NQQU4nO1xuICAgIGNvbnN0IGV4cGFuZENsb3Nlc3RTaWJsaW5nID0gISEob3B0aW9ucyAmJiBvcHRpb25zLmV4cGFuZENsb3Nlc3RTaWJsaW5nKTtcbiAgICBjb25zdCBvbmx5UGFydGlhbENvbnRhaW5zID0gISEob3B0aW9ucyAmJiBvcHRpb25zLm9ubHlQYXJ0aWFsQ29udGFpbnMpO1xuXG4gICAgaWYgKHJuZy5pc0NvbGxhcHNlZCgpKSB7XG4gICAgICByZXR1cm4gW3JuZy5pbnNlcnROb2RlKGRvbS5jcmVhdGUobm9kZU5hbWUpKV07XG4gICAgfVxuXG4gICAgbGV0IHByZWQgPSBkb20ubWFrZVByZWRCeU5vZGVOYW1lKG5vZGVOYW1lKTtcbiAgICBjb25zdCBub2RlcyA9IHJuZy5ub2Rlcyhkb20uaXNUZXh0LCB7XG4gICAgICBmdWxseUNvbnRhaW5zOiB0cnVlXG4gICAgfSkubWFwKCh0ZXh0KSA9PiB7XG4gICAgICByZXR1cm4gZG9tLnNpbmdsZUNoaWxkQW5jZXN0b3IodGV4dCwgcHJlZCkgfHwgZG9tLndyYXAodGV4dCwgbm9kZU5hbWUpO1xuICAgIH0pO1xuXG4gICAgaWYgKGV4cGFuZENsb3Nlc3RTaWJsaW5nKSB7XG4gICAgICBpZiAob25seVBhcnRpYWxDb250YWlucykge1xuICAgICAgICBjb25zdCBub2Rlc0luUmFuZ2UgPSBybmcubm9kZXMoKTtcbiAgICAgICAgLy8gY29tcG9zZSB3aXRoIHBhcnRpYWwgY29udGFpbnMgcHJlZGljYXRpb25cbiAgICAgICAgcHJlZCA9IGZ1bmMuYW5kKHByZWQsIChub2RlKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGxpc3RzLmNvbnRhaW5zKG5vZGVzSW5SYW5nZSwgbm9kZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbm9kZXMubWFwKChub2RlKSA9PiB7XG4gICAgICAgIGNvbnN0IHNpYmxpbmdzID0gZG9tLndpdGhDbG9zZXN0U2libGluZ3Mobm9kZSwgcHJlZCk7XG4gICAgICAgIGNvbnN0IGhlYWQgPSBsaXN0cy5oZWFkKHNpYmxpbmdzKTtcbiAgICAgICAgY29uc3QgdGFpbHMgPSBsaXN0cy50YWlsKHNpYmxpbmdzKTtcbiAgICAgICAgJC5lYWNoKHRhaWxzLCAoaWR4LCBlbGVtKSA9PiB7XG4gICAgICAgICAgZG9tLmFwcGVuZENoaWxkTm9kZXMoaGVhZCwgZWxlbS5jaGlsZE5vZGVzKTtcbiAgICAgICAgICBkb20ucmVtb3ZlKGVsZW0pO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGxpc3RzLmhlYWQoc2libGluZ3MpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBub2RlcztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogZ2V0IGN1cnJlbnQgc3R5bGUgb24gY3Vyc29yXG4gICAqXG4gICAqIEBwYXJhbSB7V3JhcHBlZFJhbmdlfSBybmdcbiAgICogQHJldHVybiB7T2JqZWN0fSAtIG9iamVjdCBjb250YWlucyBzdHlsZSBwcm9wZXJ0aWVzLlxuICAgKi9cbiAgY3VycmVudChybmcpIHtcbiAgICBjb25zdCAkY29udCA9ICQoIWRvbS5pc0VsZW1lbnQocm5nLnNjKSA/IHJuZy5zYy5wYXJlbnROb2RlIDogcm5nLnNjKTtcbiAgICBsZXQgc3R5bGVJbmZvID0gdGhpcy5mcm9tTm9kZSgkY29udCk7XG5cbiAgICAvLyBkb2N1bWVudC5xdWVyeUNvbW1hbmRTdGF0ZSBmb3IgdG9nZ2xlIHN0YXRlXG4gICAgLy8gW3dvcmthcm91bmRdIHByZXZlbnQgRmlyZWZveCBuc3Jlc3VsdDogXCIweDgwMDA0MDA1IChOU19FUlJPUl9GQUlMVVJFKVwiXG4gICAgdHJ5IHtcbiAgICAgIHN0eWxlSW5mbyA9ICQuZXh0ZW5kKHN0eWxlSW5mbywge1xuICAgICAgICAnZm9udC1ib2xkJzogZG9jdW1lbnQucXVlcnlDb21tYW5kU3RhdGUoJ2JvbGQnKSA/ICdib2xkJyA6ICdub3JtYWwnLFxuICAgICAgICAnZm9udC1pdGFsaWMnOiBkb2N1bWVudC5xdWVyeUNvbW1hbmRTdGF0ZSgnaXRhbGljJykgPyAnaXRhbGljJyA6ICdub3JtYWwnLFxuICAgICAgICAnZm9udC11bmRlcmxpbmUnOiBkb2N1bWVudC5xdWVyeUNvbW1hbmRTdGF0ZSgndW5kZXJsaW5lJykgPyAndW5kZXJsaW5lJyA6ICdub3JtYWwnLFxuICAgICAgICAnZm9udC1zdWJzY3JpcHQnOiBkb2N1bWVudC5xdWVyeUNvbW1hbmRTdGF0ZSgnc3Vic2NyaXB0JykgPyAnc3Vic2NyaXB0JyA6ICdub3JtYWwnLFxuICAgICAgICAnZm9udC1zdXBlcnNjcmlwdCc6IGRvY3VtZW50LnF1ZXJ5Q29tbWFuZFN0YXRlKCdzdXBlcnNjcmlwdCcpID8gJ3N1cGVyc2NyaXB0JyA6ICdub3JtYWwnLFxuICAgICAgICAnZm9udC1zdHJpa2V0aHJvdWdoJzogZG9jdW1lbnQucXVlcnlDb21tYW5kU3RhdGUoJ3N0cmlrZXRocm91Z2gnKSA/ICdzdHJpa2V0aHJvdWdoJyA6ICdub3JtYWwnLFxuICAgICAgICAnZm9udC1mYW1pbHknOiBkb2N1bWVudC5xdWVyeUNvbW1hbmRWYWx1ZSgnZm9udG5hbWUnKSB8fCBzdHlsZUluZm9bJ2ZvbnQtZmFtaWx5J11cbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG5cbiAgICAvLyBsaXN0LXN0eWxlLXR5cGUgdG8gbGlzdC1zdHlsZSh1bm9yZGVyZWQsIG9yZGVyZWQpXG4gICAgaWYgKCFybmcuaXNPbkxpc3QoKSkge1xuICAgICAgc3R5bGVJbmZvWydsaXN0LXN0eWxlJ10gPSAnbm9uZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG9yZGVyZWRUeXBlcyA9IFsnY2lyY2xlJywgJ2Rpc2MnLCAnZGlzYy1sZWFkaW5nLXplcm8nLCAnc3F1YXJlJ107XG4gICAgICBjb25zdCBpc1Vub3JkZXJlZCA9ICQuaW5BcnJheShzdHlsZUluZm9bJ2xpc3Qtc3R5bGUtdHlwZSddLCBvcmRlcmVkVHlwZXMpID4gLTE7XG4gICAgICBzdHlsZUluZm9bJ2xpc3Qtc3R5bGUnXSA9IGlzVW5vcmRlcmVkID8gJ3Vub3JkZXJlZCcgOiAnb3JkZXJlZCc7XG4gICAgfVxuXG4gICAgY29uc3QgcGFyYSA9IGRvbS5hbmNlc3Rvcihybmcuc2MsIGRvbS5pc1BhcmEpO1xuICAgIGlmIChwYXJhICYmIHBhcmEuc3R5bGVbJ2xpbmUtaGVpZ2h0J10pIHtcbiAgICAgIHN0eWxlSW5mb1snbGluZS1oZWlnaHQnXSA9IHBhcmEuc3R5bGUubGluZUhlaWdodDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbGluZUhlaWdodCA9IHBhcnNlSW50KHN0eWxlSW5mb1snbGluZS1oZWlnaHQnXSwgMTApIC8gcGFyc2VJbnQoc3R5bGVJbmZvWydmb250LXNpemUnXSwgMTApO1xuICAgICAgc3R5bGVJbmZvWydsaW5lLWhlaWdodCddID0gbGluZUhlaWdodC50b0ZpeGVkKDEpO1xuICAgIH1cblxuICAgIHN0eWxlSW5mby5hbmNob3IgPSBybmcuaXNPbkFuY2hvcigpICYmIGRvbS5hbmNlc3Rvcihybmcuc2MsIGRvbS5pc0FuY2hvcik7XG4gICAgc3R5bGVJbmZvLmFuY2VzdG9ycyA9IGRvbS5saXN0QW5jZXN0b3Iocm5nLnNjLCBkb20uaXNFZGl0YWJsZSk7XG4gICAgc3R5bGVJbmZvLnJhbmdlID0gcm5nO1xuXG4gICAgcmV0dXJuIHN0eWxlSW5mbztcbiAgfVxufVxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBsaXN0cyBmcm9tICcuLi9jb3JlL2xpc3RzJztcbmltcG9ydCBmdW5jIGZyb20gJy4uL2NvcmUvZnVuYyc7XG5pbXBvcnQgZG9tIGZyb20gJy4uL2NvcmUvZG9tJztcbmltcG9ydCByYW5nZSBmcm9tICcuLi9jb3JlL3JhbmdlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnVsbGV0IHtcbiAgLyoqXG4gICAqIHRvZ2dsZSBvcmRlcmVkIGxpc3RcbiAgICovXG4gIGluc2VydE9yZGVyZWRMaXN0KGVkaXRhYmxlKSB7XG4gICAgdGhpcy50b2dnbGVMaXN0KCdPTCcsIGVkaXRhYmxlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiB0b2dnbGUgdW5vcmRlcmVkIGxpc3RcbiAgICovXG4gIGluc2VydFVub3JkZXJlZExpc3QoZWRpdGFibGUpIHtcbiAgICB0aGlzLnRvZ2dsZUxpc3QoJ1VMJywgZWRpdGFibGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIGluZGVudFxuICAgKi9cbiAgaW5kZW50KGVkaXRhYmxlKSB7XG4gICAgY29uc3Qgcm5nID0gcmFuZ2UuY3JlYXRlKGVkaXRhYmxlKS53cmFwQm9keUlubGluZVdpdGhQYXJhKCk7XG5cbiAgICBjb25zdCBwYXJhcyA9IHJuZy5ub2Rlcyhkb20uaXNQYXJhLCB7IGluY2x1ZGVBbmNlc3RvcjogdHJ1ZSB9KTtcbiAgICBjb25zdCBjbHVzdGVyZWRzID0gbGlzdHMuY2x1c3RlckJ5KHBhcmFzLCBmdW5jLnBlcTIoJ3BhcmVudE5vZGUnKSk7XG5cbiAgICAkLmVhY2goY2x1c3RlcmVkcywgKGlkeCwgcGFyYXMpID0+IHtcbiAgICAgIGNvbnN0IGhlYWQgPSBsaXN0cy5oZWFkKHBhcmFzKTtcbiAgICAgIGlmIChkb20uaXNMaShoZWFkKSkge1xuICAgICAgICB0aGlzLndyYXBMaXN0KHBhcmFzLCBoZWFkLnBhcmVudE5vZGUubm9kZU5hbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJC5lYWNoKHBhcmFzLCAoaWR4LCBwYXJhKSA9PiB7XG4gICAgICAgICAgJChwYXJhKS5jc3MoJ21hcmdpbkxlZnQnLCAoaWR4LCB2YWwpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAocGFyc2VJbnQodmFsLCAxMCkgfHwgMCkgKyAyNTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBybmcuc2VsZWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogb3V0ZGVudFxuICAgKi9cbiAgb3V0ZGVudChlZGl0YWJsZSkge1xuICAgIGNvbnN0IHJuZyA9IHJhbmdlLmNyZWF0ZShlZGl0YWJsZSkud3JhcEJvZHlJbmxpbmVXaXRoUGFyYSgpO1xuXG4gICAgY29uc3QgcGFyYXMgPSBybmcubm9kZXMoZG9tLmlzUGFyYSwgeyBpbmNsdWRlQW5jZXN0b3I6IHRydWUgfSk7XG4gICAgY29uc3QgY2x1c3RlcmVkcyA9IGxpc3RzLmNsdXN0ZXJCeShwYXJhcywgZnVuYy5wZXEyKCdwYXJlbnROb2RlJykpO1xuXG4gICAgJC5lYWNoKGNsdXN0ZXJlZHMsIChpZHgsIHBhcmFzKSA9PiB7XG4gICAgICBjb25zdCBoZWFkID0gbGlzdHMuaGVhZChwYXJhcyk7XG4gICAgICBpZiAoZG9tLmlzTGkoaGVhZCkpIHtcbiAgICAgICAgdGhpcy5yZWxlYXNlTGlzdChbcGFyYXNdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQuZWFjaChwYXJhcywgKGlkeCwgcGFyYSkgPT4ge1xuICAgICAgICAgICQocGFyYSkuY3NzKCdtYXJnaW5MZWZ0JywgKGlkeCwgdmFsKSA9PiB7XG4gICAgICAgICAgICB2YWwgPSAocGFyc2VJbnQodmFsLCAxMCkgfHwgMCk7XG4gICAgICAgICAgICByZXR1cm4gdmFsID4gMjUgPyB2YWwgLSAyNSA6ICcnO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJuZy5zZWxlY3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiB0b2dnbGUgbGlzdFxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbGlzdE5hbWUgLSBPTCBvciBVTFxuICAgKi9cbiAgdG9nZ2xlTGlzdChsaXN0TmFtZSwgZWRpdGFibGUpIHtcbiAgICBjb25zdCBybmcgPSByYW5nZS5jcmVhdGUoZWRpdGFibGUpLndyYXBCb2R5SW5saW5lV2l0aFBhcmEoKTtcblxuICAgIGxldCBwYXJhcyA9IHJuZy5ub2Rlcyhkb20uaXNQYXJhLCB7IGluY2x1ZGVBbmNlc3RvcjogdHJ1ZSB9KTtcbiAgICBjb25zdCBib29rbWFyayA9IHJuZy5wYXJhQm9va21hcmsocGFyYXMpO1xuICAgIGNvbnN0IGNsdXN0ZXJlZHMgPSBsaXN0cy5jbHVzdGVyQnkocGFyYXMsIGZ1bmMucGVxMigncGFyZW50Tm9kZScpKTtcblxuICAgIC8vIHBhcmFncmFwaCB0byBsaXN0XG4gICAgaWYgKGxpc3RzLmZpbmQocGFyYXMsIGRvbS5pc1B1cmVQYXJhKSkge1xuICAgICAgbGV0IHdyYXBwZWRQYXJhcyA9IFtdO1xuICAgICAgJC5lYWNoKGNsdXN0ZXJlZHMsIChpZHgsIHBhcmFzKSA9PiB7XG4gICAgICAgIHdyYXBwZWRQYXJhcyA9IHdyYXBwZWRQYXJhcy5jb25jYXQodGhpcy53cmFwTGlzdChwYXJhcywgbGlzdE5hbWUpKTtcbiAgICAgIH0pO1xuICAgICAgcGFyYXMgPSB3cmFwcGVkUGFyYXM7XG4gICAgLy8gbGlzdCB0byBwYXJhZ3JhcGggb3IgY2hhbmdlIGxpc3Qgc3R5bGVcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGlmZkxpc3RzID0gcm5nLm5vZGVzKGRvbS5pc0xpc3QsIHtcbiAgICAgICAgaW5jbHVkZUFuY2VzdG9yOiB0cnVlXG4gICAgICB9KS5maWx0ZXIoKGxpc3ROb2RlKSA9PiB7XG4gICAgICAgIHJldHVybiAhJC5ub2RlTmFtZShsaXN0Tm9kZSwgbGlzdE5hbWUpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmIChkaWZmTGlzdHMubGVuZ3RoKSB7XG4gICAgICAgICQuZWFjaChkaWZmTGlzdHMsIChpZHgsIGxpc3ROb2RlKSA9PiB7XG4gICAgICAgICAgZG9tLnJlcGxhY2UobGlzdE5vZGUsIGxpc3ROYW1lKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJhcyA9IHRoaXMucmVsZWFzZUxpc3QoY2x1c3RlcmVkcywgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmFuZ2UuY3JlYXRlRnJvbVBhcmFCb29rbWFyayhib29rbWFyaywgcGFyYXMpLnNlbGVjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Tm9kZVtdfSBwYXJhc1xuICAgKiBAcGFyYW0ge1N0cmluZ30gbGlzdE5hbWVcbiAgICogQHJldHVybiB7Tm9kZVtdfVxuICAgKi9cbiAgd3JhcExpc3QocGFyYXMsIGxpc3ROYW1lKSB7XG4gICAgY29uc3QgaGVhZCA9IGxpc3RzLmhlYWQocGFyYXMpO1xuICAgIGNvbnN0IGxhc3QgPSBsaXN0cy5sYXN0KHBhcmFzKTtcblxuICAgIGNvbnN0IHByZXZMaXN0ID0gZG9tLmlzTGlzdChoZWFkLnByZXZpb3VzU2libGluZykgJiYgaGVhZC5wcmV2aW91c1NpYmxpbmc7XG4gICAgY29uc3QgbmV4dExpc3QgPSBkb20uaXNMaXN0KGxhc3QubmV4dFNpYmxpbmcpICYmIGxhc3QubmV4dFNpYmxpbmc7XG5cbiAgICBjb25zdCBsaXN0Tm9kZSA9IHByZXZMaXN0IHx8IGRvbS5pbnNlcnRBZnRlcihkb20uY3JlYXRlKGxpc3ROYW1lIHx8ICdVTCcpLCBsYXN0KTtcblxuICAgIC8vIFAgdG8gTElcbiAgICBwYXJhcyA9IHBhcmFzLm1hcCgocGFyYSkgPT4ge1xuICAgICAgcmV0dXJuIGRvbS5pc1B1cmVQYXJhKHBhcmEpID8gZG9tLnJlcGxhY2UocGFyYSwgJ0xJJykgOiBwYXJhO1xuICAgIH0pO1xuXG4gICAgLy8gYXBwZW5kIHRvIGxpc3QoPHVsPiwgPG9sPilcbiAgICBkb20uYXBwZW5kQ2hpbGROb2RlcyhsaXN0Tm9kZSwgcGFyYXMpO1xuXG4gICAgaWYgKG5leHRMaXN0KSB7XG4gICAgICBkb20uYXBwZW5kQ2hpbGROb2RlcyhsaXN0Tm9kZSwgbGlzdHMuZnJvbShuZXh0TGlzdC5jaGlsZE5vZGVzKSk7XG4gICAgICBkb20ucmVtb3ZlKG5leHRMaXN0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFyYXM7XG4gIH1cblxuICAvKipcbiAgICogQG1ldGhvZCByZWxlYXNlTGlzdFxuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5W119IGNsdXN0ZXJlZHNcbiAgICogQHBhcmFtIHtCb29sZWFufSBpc0VzY2Fwc2VUb0JvZHlcbiAgICogQHJldHVybiB7Tm9kZVtdfVxuICAgKi9cbiAgcmVsZWFzZUxpc3QoY2x1c3RlcmVkcywgaXNFc2NhcHNlVG9Cb2R5KSB7XG4gICAgbGV0IHJlbGVhc2VkUGFyYXMgPSBbXTtcblxuICAgICQuZWFjaChjbHVzdGVyZWRzLCAoaWR4LCBwYXJhcykgPT4ge1xuICAgICAgY29uc3QgaGVhZCA9IGxpc3RzLmhlYWQocGFyYXMpO1xuICAgICAgY29uc3QgbGFzdCA9IGxpc3RzLmxhc3QocGFyYXMpO1xuXG4gICAgICBjb25zdCBoZWFkTGlzdCA9IGlzRXNjYXBzZVRvQm9keSA/IGRvbS5sYXN0QW5jZXN0b3IoaGVhZCwgZG9tLmlzTGlzdCkgOiBoZWFkLnBhcmVudE5vZGU7XG4gICAgICBjb25zdCBsYXN0TGlzdCA9IGhlYWRMaXN0LmNoaWxkTm9kZXMubGVuZ3RoID4gMSA/IGRvbS5zcGxpdFRyZWUoaGVhZExpc3QsIHtcbiAgICAgICAgbm9kZTogbGFzdC5wYXJlbnROb2RlLFxuICAgICAgICBvZmZzZXQ6IGRvbS5wb3NpdGlvbihsYXN0KSArIDFcbiAgICAgIH0sIHtcbiAgICAgICAgaXNTa2lwUGFkZGluZ0JsYW5rSFRNTDogdHJ1ZVxuICAgICAgfSkgOiBudWxsO1xuXG4gICAgICBjb25zdCBtaWRkbGVMaXN0ID0gZG9tLnNwbGl0VHJlZShoZWFkTGlzdCwge1xuICAgICAgICBub2RlOiBoZWFkLnBhcmVudE5vZGUsXG4gICAgICAgIG9mZnNldDogZG9tLnBvc2l0aW9uKGhlYWQpXG4gICAgICB9LCB7XG4gICAgICAgIGlzU2tpcFBhZGRpbmdCbGFua0hUTUw6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICBwYXJhcyA9IGlzRXNjYXBzZVRvQm9keSA/IGRvbS5saXN0RGVzY2VuZGFudChtaWRkbGVMaXN0LCBkb20uaXNMaSlcbiAgICAgICAgOiBsaXN0cy5mcm9tKG1pZGRsZUxpc3QuY2hpbGROb2RlcykuZmlsdGVyKGRvbS5pc0xpKTtcblxuICAgICAgLy8gTEkgdG8gUFxuICAgICAgaWYgKGlzRXNjYXBzZVRvQm9keSB8fCAhZG9tLmlzTGlzdChoZWFkTGlzdC5wYXJlbnROb2RlKSkge1xuICAgICAgICBwYXJhcyA9IHBhcmFzLm1hcCgocGFyYSkgPT4ge1xuICAgICAgICAgIHJldHVybiBkb20ucmVwbGFjZShwYXJhLCAnUCcpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgJC5lYWNoKGxpc3RzLmZyb20ocGFyYXMpLnJldmVyc2UoKSwgKGlkeCwgcGFyYSkgPT4ge1xuICAgICAgICBkb20uaW5zZXJ0QWZ0ZXIocGFyYSwgaGVhZExpc3QpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIHJlbW92ZSBlbXB0eSBsaXN0c1xuICAgICAgY29uc3Qgcm9vdExpc3RzID0gbGlzdHMuY29tcGFjdChbaGVhZExpc3QsIG1pZGRsZUxpc3QsIGxhc3RMaXN0XSk7XG4gICAgICAkLmVhY2gocm9vdExpc3RzLCAoaWR4LCByb290TGlzdCkgPT4ge1xuICAgICAgICBjb25zdCBsaXN0Tm9kZXMgPSBbcm9vdExpc3RdLmNvbmNhdChkb20ubGlzdERlc2NlbmRhbnQocm9vdExpc3QsIGRvbS5pc0xpc3QpKTtcbiAgICAgICAgJC5lYWNoKGxpc3ROb2Rlcy5yZXZlcnNlKCksIChpZHgsIGxpc3ROb2RlKSA9PiB7XG4gICAgICAgICAgaWYgKCFkb20ubm9kZUxlbmd0aChsaXN0Tm9kZSkpIHtcbiAgICAgICAgICAgIGRvbS5yZW1vdmUobGlzdE5vZGUsIHRydWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgcmVsZWFzZWRQYXJhcyA9IHJlbGVhc2VkUGFyYXMuY29uY2F0KHBhcmFzKTtcbiAgICB9KTtcblxuICAgIHJldHVybiByZWxlYXNlZFBhcmFzO1xuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGRvbSBmcm9tICcuLi9jb3JlL2RvbSc7XG5pbXBvcnQgcmFuZ2UgZnJvbSAnLi4vY29yZS9yYW5nZSc7XG5pbXBvcnQgQnVsbGV0IGZyb20gJy4uL2VkaXRpbmcvQnVsbGV0JztcblxuLyoqXG4gKiBAY2xhc3MgZWRpdGluZy5UeXBpbmdcbiAqXG4gKiBUeXBpbmdcbiAqXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFR5cGluZyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIGEgQnVsbGV0IGluc3RhbmNlIHRvIHRvZ2dsZSBsaXN0cyBvZmZcbiAgICB0aGlzLmJ1bGxldCA9IG5ldyBCdWxsZXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBpbnNlcnQgdGFiXG4gICAqXG4gICAqIEBwYXJhbSB7V3JhcHBlZFJhbmdlfSBybmdcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHRhYnNpemVcbiAgICovXG4gIGluc2VydFRhYihybmcsIHRhYnNpemUpIHtcbiAgICBjb25zdCB0YWIgPSBkb20uY3JlYXRlVGV4dChuZXcgQXJyYXkodGFic2l6ZSArIDEpLmpvaW4oZG9tLk5CU1BfQ0hBUikpO1xuICAgIHJuZyA9IHJuZy5kZWxldGVDb250ZW50cygpO1xuICAgIHJuZy5pbnNlcnROb2RlKHRhYiwgdHJ1ZSk7XG5cbiAgICBybmcgPSByYW5nZS5jcmVhdGUodGFiLCB0YWJzaXplKTtcbiAgICBybmcuc2VsZWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogaW5zZXJ0IHBhcmFncmFwaFxuICAgKi9cbiAgaW5zZXJ0UGFyYWdyYXBoKGVkaXRhYmxlKSB7XG4gICAgbGV0IHJuZyA9IHJhbmdlLmNyZWF0ZShlZGl0YWJsZSk7XG5cbiAgICAvLyBkZWxldGVDb250ZW50cyBvbiByYW5nZS5cbiAgICBybmcgPSBybmcuZGVsZXRlQ29udGVudHMoKTtcblxuICAgIC8vIFdyYXAgcmFuZ2UgaWYgaXQgbmVlZHMgdG8gYmUgd3JhcHBlZCBieSBwYXJhZ3JhcGhcbiAgICBybmcgPSBybmcud3JhcEJvZHlJbmxpbmVXaXRoUGFyYSgpO1xuXG4gICAgLy8gZmluZGluZyBwYXJhZ3JhcGhcbiAgICBjb25zdCBzcGxpdFJvb3QgPSBkb20uYW5jZXN0b3Iocm5nLnNjLCBkb20uaXNQYXJhKTtcblxuICAgIGxldCBuZXh0UGFyYTtcbiAgICAvLyBvbiBwYXJhZ3JhcGg6IHNwbGl0IHBhcmFncmFwaFxuICAgIGlmIChzcGxpdFJvb3QpIHtcbiAgICAgIC8vIGlmIGl0IGlzIGFuIGVtcHR5IGxpbmUgd2l0aCBsaVxuICAgICAgaWYgKGRvbS5pc0VtcHR5KHNwbGl0Um9vdCkgJiYgZG9tLmlzTGkoc3BsaXRSb290KSkge1xuICAgICAgICAvLyB0b29nbGUgVUwvT0wgYW5kIGVzY2FwZVxuICAgICAgICB0aGlzLmJ1bGxldC50b2dnbGVMaXN0KHNwbGl0Um9vdC5wYXJlbnROb2RlLm5vZGVOYW1lKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgLy8gaWYgaXQgaXMgYW4gZW1wdHkgbGluZSB3aXRoIHBhcmEgb24gYmxvY2txdW90ZVxuICAgICAgfSBlbHNlIGlmIChkb20uaXNFbXB0eShzcGxpdFJvb3QpICYmIGRvbS5pc1BhcmEoc3BsaXRSb290KSAmJiBkb20uaXNCbG9ja3F1b3RlKHNwbGl0Um9vdC5wYXJlbnROb2RlKSkge1xuICAgICAgICAvLyBlc2NhcGUgYmxvY2txdW90ZVxuICAgICAgICBkb20uaW5zZXJ0QWZ0ZXIoc3BsaXRSb290LCBzcGxpdFJvb3QucGFyZW50Tm9kZSk7XG4gICAgICAgIG5leHRQYXJhID0gc3BsaXRSb290O1xuICAgICAgLy8gaWYgbmV3IGxpbmUgaGFzIGNvbnRlbnQgKG5vdCBhIGxpbmUgYnJlYWspXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXh0UGFyYSA9IGRvbS5zcGxpdFRyZWUoc3BsaXRSb290LCBybmcuZ2V0U3RhcnRQb2ludCgpKTtcblxuICAgICAgICBsZXQgZW1wdHlBbmNob3JzID0gZG9tLmxpc3REZXNjZW5kYW50KHNwbGl0Um9vdCwgZG9tLmlzRW1wdHlBbmNob3IpO1xuICAgICAgICBlbXB0eUFuY2hvcnMgPSBlbXB0eUFuY2hvcnMuY29uY2F0KGRvbS5saXN0RGVzY2VuZGFudChuZXh0UGFyYSwgZG9tLmlzRW1wdHlBbmNob3IpKTtcblxuICAgICAgICAkLmVhY2goZW1wdHlBbmNob3JzLCAoaWR4LCBhbmNob3IpID0+IHtcbiAgICAgICAgICBkb20ucmVtb3ZlKGFuY2hvcik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIHJlcGxhY2UgZW1wdHkgaGVhZGluZywgcHJlIG9yIGN1c3RvbS1tYWRlIHN0eWxlVGFnIHdpdGggUCB0YWdcbiAgICAgICAgaWYgKChkb20uaXNIZWFkaW5nKG5leHRQYXJhKSB8fCBkb20uaXNQcmUobmV4dFBhcmEpIHx8IGRvbS5pc0N1c3RvbVN0eWxlVGFnKG5leHRQYXJhKSkgJiYgZG9tLmlzRW1wdHkobmV4dFBhcmEpKSB7XG4gICAgICAgICAgbmV4dFBhcmEgPSBkb20ucmVwbGFjZShuZXh0UGFyYSwgJ3AnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIC8vIG5vIHBhcmFncmFwaDogaW5zZXJ0IGVtcHR5IHBhcmFncmFwaFxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBuZXh0ID0gcm5nLnNjLmNoaWxkTm9kZXNbcm5nLnNvXTtcbiAgICAgIG5leHRQYXJhID0gJChkb20uZW1wdHlQYXJhKVswXTtcbiAgICAgIGlmIChuZXh0KSB7XG4gICAgICAgIHJuZy5zYy5pbnNlcnRCZWZvcmUobmV4dFBhcmEsIG5leHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcm5nLnNjLmFwcGVuZENoaWxkKG5leHRQYXJhKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByYW5nZS5jcmVhdGUobmV4dFBhcmEsIDApLm5vcm1hbGl6ZSgpLnNlbGVjdCgpLnNjcm9sbEludG9WaWV3KGVkaXRhYmxlKTtcbiAgfVxufVxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBkb20gZnJvbSAnLi4vY29yZS9kb20nO1xuaW1wb3J0IHJhbmdlIGZyb20gJy4uL2NvcmUvcmFuZ2UnO1xuaW1wb3J0IGxpc3RzIGZyb20gJy4uL2NvcmUvbGlzdHMnO1xuXG4vKipcbiAqIEBjbGFzcyBDcmVhdGUgYSB2aXJ0dWFsIHRhYmxlIHRvIGNyZWF0ZSB3aGF0IGFjdGlvbnMgdG8gZG8gaW4gY2hhbmdlLlxuICogQHBhcmFtIHtvYmplY3R9IHN0YXJ0UG9pbnQgQ2VsbCBzZWxlY3RlZCB0byBhcHBseSBjaGFuZ2UuXG4gKiBAcGFyYW0ge2VudW19IHdoZXJlICBXaGVyZSBjaGFuZ2Ugd2lsbCBiZSBhcHBsaWVkIFJvdyBvciBDb2wuIFVzZSBlbnVtOiBUYWJsZVJlc3VsdEFjdGlvbi53aGVyZVxuICogQHBhcmFtIHtlbnVtfSBhY3Rpb24gQWN0aW9uIHRvIGJlIGFwcGxpZWQuIFVzZSBlbnVtOiBUYWJsZVJlc3VsdEFjdGlvbi5yZXF1ZXN0QWN0aW9uXG4gKiBAcGFyYW0ge29iamVjdH0gZG9tVGFibGUgRG9tIGVsZW1lbnQgb2YgdGFibGUgdG8gbWFrZSBjaGFuZ2VzLlxuICovXG5jb25zdCBUYWJsZVJlc3VsdEFjdGlvbiA9IGZ1bmN0aW9uKHN0YXJ0UG9pbnQsIHdoZXJlLCBhY3Rpb24sIGRvbVRhYmxlKSB7XG4gIGNvbnN0IF9zdGFydFBvaW50ID0geyAnY29sUG9zJzogMCwgJ3Jvd1Bvcyc6IDAgfTtcbiAgY29uc3QgX3ZpcnR1YWxUYWJsZSA9IFtdO1xuICBjb25zdCBfYWN0aW9uQ2VsbExpc3QgPSBbXTtcblxuICAvLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAvLyBQcml2YXRlIGZ1bmN0aW9uc1xuICAvLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHN0YXJ0UG9pbnQgb2YgYWN0aW9uLlxuICAgKi9cbiAgZnVuY3Rpb24gc2V0U3RhcnRQb2ludCgpIHtcbiAgICBpZiAoIXN0YXJ0UG9pbnQgfHwgIXN0YXJ0UG9pbnQudGFnTmFtZSB8fCAoc3RhcnRQb2ludC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICd0ZCcgJiYgc3RhcnRQb2ludC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT09ICd0aCcpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdJbXBvc3NpYmxlIHRvIGlkZW50aWZ5IHN0YXJ0IENlbGwgcG9pbnQuJywgc3RhcnRQb2ludCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIF9zdGFydFBvaW50LmNvbFBvcyA9IHN0YXJ0UG9pbnQuY2VsbEluZGV4O1xuICAgIGlmICghc3RhcnRQb2ludC5wYXJlbnRFbGVtZW50IHx8ICFzdGFydFBvaW50LnBhcmVudEVsZW1lbnQudGFnTmFtZSB8fCBzdGFydFBvaW50LnBhcmVudEVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAndHInKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdJbXBvc3NpYmxlIHRvIGlkZW50aWZ5IHN0YXJ0IFJvdyBwb2ludC4nLCBzdGFydFBvaW50KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgX3N0YXJ0UG9pbnQucm93UG9zID0gc3RhcnRQb2ludC5wYXJlbnRFbGVtZW50LnJvd0luZGV4O1xuICB9XG5cbiAgLyoqXG4gICAqIERlZmluZSB2aXJ0dWFsIHRhYmxlIHBvc2l0aW9uIGluZm8gb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0ge2ludH0gcm93SW5kZXggSW5kZXggcG9zaXRpb24gaW4gbGluZSBvZiB2aXJ0dWFsIHRhYmxlLlxuICAgKiBAcGFyYW0ge2ludH0gY2VsbEluZGV4IEluZGV4IHBvc2l0aW9uIGluIGNvbHVtbiBvZiB2aXJ0dWFsIHRhYmxlLlxuICAgKiBAcGFyYW0ge29iamVjdH0gYmFzZVJvdyBSb3cgYWZmZWN0ZWQgYnkgdGhpcyBwb3NpdGlvbi5cbiAgICogQHBhcmFtIHtvYmplY3R9IGJhc2VDZWxsIENlbGwgYWZmZWN0ZWQgYnkgdGhpcyBwb3NpdGlvbi5cbiAgICogQHBhcmFtIHtib29sfSBpc1NwYW4gSW5mb3JtIGlmIGl0IGlzIGFuIHNwYW4gY2VsbC9yb3cuXG4gICAqL1xuICBmdW5jdGlvbiBzZXRWaXJ0dWFsVGFibGVQb3NpdGlvbihyb3dJbmRleCwgY2VsbEluZGV4LCBiYXNlUm93LCBiYXNlQ2VsbCwgaXNSb3dTcGFuLCBpc0NvbFNwYW4sIGlzVmlydHVhbENlbGwpIHtcbiAgICBjb25zdCBvYmpQb3NpdGlvbiA9IHtcbiAgICAgICdiYXNlUm93JzogYmFzZVJvdyxcbiAgICAgICdiYXNlQ2VsbCc6IGJhc2VDZWxsLFxuICAgICAgJ2lzUm93U3Bhbic6IGlzUm93U3BhbixcbiAgICAgICdpc0NvbFNwYW4nOiBpc0NvbFNwYW4sXG4gICAgICAnaXNWaXJ0dWFsJzogaXNWaXJ0dWFsQ2VsbFxuICAgIH07XG4gICAgaWYgKCFfdmlydHVhbFRhYmxlW3Jvd0luZGV4XSkge1xuICAgICAgX3ZpcnR1YWxUYWJsZVtyb3dJbmRleF0gPSBbXTtcbiAgICB9XG4gICAgX3ZpcnR1YWxUYWJsZVtyb3dJbmRleF1bY2VsbEluZGV4XSA9IG9ialBvc2l0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhY3Rpb24gY2VsbCBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSB2aXJ0dWFsVGFibGVDZWxsT2JqIE9iamVjdCBvZiBzcGVjaWZpYyBwb3NpdGlvbiBvbiB2aXJ0dWFsIHRhYmxlLlxuICAgKiBAcGFyYW0ge2VudW19IHJlc3VsdEFjdGlvbiBBY3Rpb24gdG8gYmUgYXBwbGllZCBpbiB0aGF0IGl0ZW0uXG4gICAqL1xuICBmdW5jdGlvbiBnZXRBY3Rpb25DZWxsKHZpcnR1YWxUYWJsZUNlbGxPYmosIHJlc3VsdEFjdGlvbiwgdmlydHVhbFJvd1Bvc2l0aW9uLCB2aXJ0dWFsQ29sUG9zaXRpb24pIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ2Jhc2VDZWxsJzogdmlydHVhbFRhYmxlQ2VsbE9iai5iYXNlQ2VsbCxcbiAgICAgICdhY3Rpb24nOiByZXN1bHRBY3Rpb24sXG4gICAgICAndmlydHVhbFRhYmxlJzoge1xuICAgICAgICAncm93SW5kZXgnOiB2aXJ0dWFsUm93UG9zaXRpb24sXG4gICAgICAgICdjZWxsSW5kZXgnOiB2aXJ0dWFsQ29sUG9zaXRpb25cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlY292ZXIgZnJlZSBpbmRleCBvZiByb3cgdG8gYXBwZW5kIENlbGwuXG4gICAqXG4gICAqIEBwYXJhbSB7aW50fSByb3dJbmRleCBJbmRleCBvZiByb3cgdG8gZmluZCBmcmVlIHNwYWNlLlxuICAgKiBAcGFyYW0ge2ludH0gY2VsbEluZGV4IEluZGV4IG9mIGNlbGwgdG8gZmluZCBmcmVlIHNwYWNlIGluIHRhYmxlLlxuICAgKi9cbiAgZnVuY3Rpb24gcmVjb3ZlckNlbGxJbmRleChyb3dJbmRleCwgY2VsbEluZGV4KSB7XG4gICAgaWYgKCFfdmlydHVhbFRhYmxlW3Jvd0luZGV4XSkge1xuICAgICAgcmV0dXJuIGNlbGxJbmRleDtcbiAgICB9XG4gICAgaWYgKCFfdmlydHVhbFRhYmxlW3Jvd0luZGV4XVtjZWxsSW5kZXhdKSB7XG4gICAgICByZXR1cm4gY2VsbEluZGV4O1xuICAgIH1cblxuICAgIGxldCBuZXdDZWxsSW5kZXggPSBjZWxsSW5kZXg7XG4gICAgd2hpbGUgKF92aXJ0dWFsVGFibGVbcm93SW5kZXhdW25ld0NlbGxJbmRleF0pIHtcbiAgICAgIG5ld0NlbGxJbmRleCsrO1xuICAgICAgaWYgKCFfdmlydHVhbFRhYmxlW3Jvd0luZGV4XVtuZXdDZWxsSW5kZXhdKSB7XG4gICAgICAgIHJldHVybiBuZXdDZWxsSW5kZXg7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlY292ZXIgaW5mbyBhYm91dCByb3cgYW5kIGNlbGwgYW5kIGFkZCBpbmZvcm1hdGlvbiB0byB2aXJ0dWFsIHRhYmxlLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gcm93IFJvdyB0byByZWNvdmVyIGluZm9ybWF0aW9uLlxuICAgKiBAcGFyYW0ge29iamVjdH0gY2VsbCBDZWxsIHRvIHJlY292ZXIgaW5mb3JtYXRpb24uXG4gICAqL1xuICBmdW5jdGlvbiBhZGRDZWxsSW5mb1RvVmlydHVhbChyb3csIGNlbGwpIHtcbiAgICBjb25zdCBjZWxsSW5kZXggPSByZWNvdmVyQ2VsbEluZGV4KHJvdy5yb3dJbmRleCwgY2VsbC5jZWxsSW5kZXgpO1xuICAgIGNvbnN0IGNlbGxIYXNDb2xzcGFuID0gKGNlbGwuY29sU3BhbiA+IDEpO1xuICAgIGNvbnN0IGNlbGxIYXNSb3dzcGFuID0gKGNlbGwucm93U3BhbiA+IDEpO1xuICAgIGNvbnN0IGlzVGhpc1NlbGVjdGVkQ2VsbCA9IChyb3cucm93SW5kZXggPT09IF9zdGFydFBvaW50LnJvd1BvcyAmJiBjZWxsLmNlbGxJbmRleCA9PT0gX3N0YXJ0UG9pbnQuY29sUG9zKTtcbiAgICBzZXRWaXJ0dWFsVGFibGVQb3NpdGlvbihyb3cucm93SW5kZXgsIGNlbGxJbmRleCwgcm93LCBjZWxsLCBjZWxsSGFzUm93c3BhbiwgY2VsbEhhc0NvbHNwYW4sIGZhbHNlKTtcblxuICAgIC8vIEFkZCBzcGFuIHJvd3MgdG8gdmlydHVhbCBUYWJsZS5cbiAgICBjb25zdCByb3dzcGFuTnVtYmVyID0gY2VsbC5hdHRyaWJ1dGVzLnJvd1NwYW4gPyBwYXJzZUludChjZWxsLmF0dHJpYnV0ZXMucm93U3Bhbi52YWx1ZSwgMTApIDogMDtcbiAgICBpZiAocm93c3Bhbk51bWJlciA+IDEpIHtcbiAgICAgIGZvciAobGV0IHJwID0gMTsgcnAgPCByb3dzcGFuTnVtYmVyOyBycCsrKSB7XG4gICAgICAgIGNvbnN0IHJvd3NwYW5JbmRleCA9IHJvdy5yb3dJbmRleCArIHJwO1xuICAgICAgICBhZGp1c3RTdGFydFBvaW50KHJvd3NwYW5JbmRleCwgY2VsbEluZGV4LCBjZWxsLCBpc1RoaXNTZWxlY3RlZENlbGwpO1xuICAgICAgICBzZXRWaXJ0dWFsVGFibGVQb3NpdGlvbihyb3dzcGFuSW5kZXgsIGNlbGxJbmRleCwgcm93LCBjZWxsLCB0cnVlLCBjZWxsSGFzQ29sc3BhbiwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWRkIHNwYW4gY29scyB0byB2aXJ0dWFsIHRhYmxlLlxuICAgIGNvbnN0IGNvbHNwYW5OdW1iZXIgPSBjZWxsLmF0dHJpYnV0ZXMuY29sU3BhbiA/IHBhcnNlSW50KGNlbGwuYXR0cmlidXRlcy5jb2xTcGFuLnZhbHVlLCAxMCkgOiAwO1xuICAgIGlmIChjb2xzcGFuTnVtYmVyID4gMSkge1xuICAgICAgZm9yIChsZXQgY3AgPSAxOyBjcCA8IGNvbHNwYW5OdW1iZXI7IGNwKyspIHtcbiAgICAgICAgY29uc3QgY2VsbHNwYW5JbmRleCA9IHJlY292ZXJDZWxsSW5kZXgocm93LnJvd0luZGV4LCAoY2VsbEluZGV4ICsgY3ApKTtcbiAgICAgICAgYWRqdXN0U3RhcnRQb2ludChyb3cucm93SW5kZXgsIGNlbGxzcGFuSW5kZXgsIGNlbGwsIGlzVGhpc1NlbGVjdGVkQ2VsbCk7XG4gICAgICAgIHNldFZpcnR1YWxUYWJsZVBvc2l0aW9uKHJvdy5yb3dJbmRleCwgY2VsbHNwYW5JbmRleCwgcm93LCBjZWxsLCBjZWxsSGFzUm93c3BhbiwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFByb2Nlc3MgdmFsaWRhdGlvbiBhbmQgYWRqdXN0IG9mIHN0YXJ0IHBvaW50IGlmIG5lZWRlZFxuICAgKlxuICAgKiBAcGFyYW0ge2ludH0gcm93SW5kZXhcbiAgICogQHBhcmFtIHtpbnR9IGNlbGxJbmRleFxuICAgKiBAcGFyYW0ge29iamVjdH0gY2VsbFxuICAgKiBAcGFyYW0ge2Jvb2x9IGlzU2VsZWN0ZWRDZWxsXG4gICAqL1xuICBmdW5jdGlvbiBhZGp1c3RTdGFydFBvaW50KHJvd0luZGV4LCBjZWxsSW5kZXgsIGNlbGwsIGlzU2VsZWN0ZWRDZWxsKSB7XG4gICAgaWYgKHJvd0luZGV4ID09PSBfc3RhcnRQb2ludC5yb3dQb3MgJiYgX3N0YXJ0UG9pbnQuY29sUG9zID49IGNlbGwuY2VsbEluZGV4ICYmIGNlbGwuY2VsbEluZGV4IDw9IGNlbGxJbmRleCAmJiAhaXNTZWxlY3RlZENlbGwpIHtcbiAgICAgIF9zdGFydFBvaW50LmNvbFBvcysrO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgdmlydHVhbCB0YWJsZSBvZiBjZWxscyB3aXRoIGFsbCBjZWxscywgaW5jbHVkaW5nIHNwYW4gY2VsbHMuXG4gICAqL1xuICBmdW5jdGlvbiBjcmVhdGVWaXJ0dWFsVGFibGUoKSB7XG4gICAgY29uc3Qgcm93cyA9IGRvbVRhYmxlLnJvd3M7XG4gICAgZm9yIChsZXQgcm93SW5kZXggPSAwOyByb3dJbmRleCA8IHJvd3MubGVuZ3RoOyByb3dJbmRleCsrKSB7XG4gICAgICBjb25zdCBjZWxscyA9IHJvd3Nbcm93SW5kZXhdLmNlbGxzO1xuICAgICAgZm9yIChsZXQgY2VsbEluZGV4ID0gMDsgY2VsbEluZGV4IDwgY2VsbHMubGVuZ3RoOyBjZWxsSW5kZXgrKykge1xuICAgICAgICBhZGRDZWxsSW5mb1RvVmlydHVhbChyb3dzW3Jvd0luZGV4XSwgY2VsbHNbY2VsbEluZGV4XSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhY3Rpb24gdG8gYmUgYXBwbGllZCBvbiB0aGUgY2VsbC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGNlbGwgdmlydHVhbCB0YWJsZSBjZWxsIHRvIGFwcGx5IGFjdGlvblxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0RGVsZXRlUmVzdWx0QWN0aW9uVG9DZWxsKGNlbGwpIHtcbiAgICBzd2l0Y2ggKHdoZXJlKSB7XG4gICAgICBjYXNlIFRhYmxlUmVzdWx0QWN0aW9uLndoZXJlLkNvbHVtbjpcbiAgICAgICAgaWYgKGNlbGwuaXNDb2xTcGFuKSB7XG4gICAgICAgICAgcmV0dXJuIFRhYmxlUmVzdWx0QWN0aW9uLnJlc3VsdEFjdGlvbi5TdWJ0cmFjdFNwYW5Db3VudDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgVGFibGVSZXN1bHRBY3Rpb24ud2hlcmUuUm93OlxuICAgICAgICBpZiAoIWNlbGwuaXNWaXJ0dWFsICYmIGNlbGwuaXNSb3dTcGFuKSB7XG4gICAgICAgICAgcmV0dXJuIFRhYmxlUmVzdWx0QWN0aW9uLnJlc3VsdEFjdGlvbi5BZGRDZWxsO1xuICAgICAgICB9IGVsc2UgaWYgKGNlbGwuaXNSb3dTcGFuKSB7XG4gICAgICAgICAgcmV0dXJuIFRhYmxlUmVzdWx0QWN0aW9uLnJlc3VsdEFjdGlvbi5TdWJ0cmFjdFNwYW5Db3VudDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIFRhYmxlUmVzdWx0QWN0aW9uLnJlc3VsdEFjdGlvbi5SZW1vdmVDZWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhY3Rpb24gdG8gYmUgYXBwbGllZCBvbiB0aGUgY2VsbC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGNlbGwgdmlydHVhbCB0YWJsZSBjZWxsIHRvIGFwcGx5IGFjdGlvblxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0QWRkUmVzdWx0QWN0aW9uVG9DZWxsKGNlbGwpIHtcbiAgICBzd2l0Y2ggKHdoZXJlKSB7XG4gICAgICBjYXNlIFRhYmxlUmVzdWx0QWN0aW9uLndoZXJlLkNvbHVtbjpcbiAgICAgICAgaWYgKGNlbGwuaXNDb2xTcGFuKSB7XG4gICAgICAgICAgcmV0dXJuIFRhYmxlUmVzdWx0QWN0aW9uLnJlc3VsdEFjdGlvbi5TdW1TcGFuQ291bnQ7XG4gICAgICAgIH0gZWxzZSBpZiAoY2VsbC5pc1Jvd1NwYW4gJiYgY2VsbC5pc1ZpcnR1YWwpIHtcbiAgICAgICAgICByZXR1cm4gVGFibGVSZXN1bHRBY3Rpb24ucmVzdWx0QWN0aW9uLklnbm9yZTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgVGFibGVSZXN1bHRBY3Rpb24ud2hlcmUuUm93OlxuICAgICAgICBpZiAoY2VsbC5pc1Jvd1NwYW4pIHtcbiAgICAgICAgICByZXR1cm4gVGFibGVSZXN1bHRBY3Rpb24ucmVzdWx0QWN0aW9uLlN1bVNwYW5Db3VudDtcbiAgICAgICAgfSBlbHNlIGlmIChjZWxsLmlzQ29sU3BhbiAmJiBjZWxsLmlzVmlydHVhbCkge1xuICAgICAgICAgIHJldHVybiBUYWJsZVJlc3VsdEFjdGlvbi5yZXN1bHRBY3Rpb24uSWdub3JlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gVGFibGVSZXN1bHRBY3Rpb24ucmVzdWx0QWN0aW9uLkFkZENlbGw7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHNldFN0YXJ0UG9pbnQoKTtcbiAgICBjcmVhdGVWaXJ0dWFsVGFibGUoKTtcbiAgfVxuXG4gIC8vLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gIC8vIFB1YmxpYyBmdW5jdGlvbnNcbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAvKipcbiAgICogUmVjb3ZlciBhcnJheSBvcyB3aGF0IHRvIGRvIGluIHRhYmxlLlxuICAgKi9cbiAgdGhpcy5nZXRBY3Rpb25MaXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgZml4ZWRSb3cgPSAod2hlcmUgPT09IFRhYmxlUmVzdWx0QWN0aW9uLndoZXJlLlJvdykgPyBfc3RhcnRQb2ludC5yb3dQb3MgOiAtMTtcbiAgICBjb25zdCBmaXhlZENvbCA9ICh3aGVyZSA9PT0gVGFibGVSZXN1bHRBY3Rpb24ud2hlcmUuQ29sdW1uKSA/IF9zdGFydFBvaW50LmNvbFBvcyA6IC0xO1xuXG4gICAgbGV0IGFjdHVhbFBvc2l0aW9uID0gMDtcbiAgICBsZXQgY2FuQ29udGludWUgPSB0cnVlO1xuICAgIHdoaWxlIChjYW5Db250aW51ZSkge1xuICAgICAgY29uc3Qgcm93UG9zaXRpb24gPSAoZml4ZWRSb3cgPj0gMCkgPyBmaXhlZFJvdyA6IGFjdHVhbFBvc2l0aW9uO1xuICAgICAgY29uc3QgY29sUG9zaXRpb24gPSAoZml4ZWRDb2wgPj0gMCkgPyBmaXhlZENvbCA6IGFjdHVhbFBvc2l0aW9uO1xuICAgICAgY29uc3Qgcm93ID0gX3ZpcnR1YWxUYWJsZVtyb3dQb3NpdGlvbl07XG4gICAgICBpZiAoIXJvdykge1xuICAgICAgICBjYW5Db250aW51ZSA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gX2FjdGlvbkNlbGxMaXN0O1xuICAgICAgfVxuICAgICAgY29uc3QgY2VsbCA9IHJvd1tjb2xQb3NpdGlvbl07XG4gICAgICBpZiAoIWNlbGwpIHtcbiAgICAgICAgY2FuQ29udGludWUgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF9hY3Rpb25DZWxsTGlzdDtcbiAgICAgIH1cblxuICAgICAgLy8gRGVmaW5lIGFjdGlvbiB0byBiZSBhcHBsaWVkIGluIHRoaXMgY2VsbFxuICAgICAgbGV0IHJlc3VsdEFjdGlvbiA9IFRhYmxlUmVzdWx0QWN0aW9uLnJlc3VsdEFjdGlvbi5JZ25vcmU7XG4gICAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgICBjYXNlIFRhYmxlUmVzdWx0QWN0aW9uLnJlcXVlc3RBY3Rpb24uQWRkOlxuICAgICAgICAgIHJlc3VsdEFjdGlvbiA9IGdldEFkZFJlc3VsdEFjdGlvblRvQ2VsbChjZWxsKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBUYWJsZVJlc3VsdEFjdGlvbi5yZXF1ZXN0QWN0aW9uLkRlbGV0ZTpcbiAgICAgICAgICByZXN1bHRBY3Rpb24gPSBnZXREZWxldGVSZXN1bHRBY3Rpb25Ub0NlbGwoY2VsbCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBfYWN0aW9uQ2VsbExpc3QucHVzaChnZXRBY3Rpb25DZWxsKGNlbGwsIHJlc3VsdEFjdGlvbiwgcm93UG9zaXRpb24sIGNvbFBvc2l0aW9uKSk7XG4gICAgICBhY3R1YWxQb3NpdGlvbisrO1xuICAgIH1cblxuICAgIHJldHVybiBfYWN0aW9uQ2VsbExpc3Q7XG4gIH07XG5cbiAgaW5pdCgpO1xufTtcbi8qKlxuKlxuKiBXaGVyZSBhY3Rpb24gb2Njb3VycyBlbnVtLlxuKi9cblRhYmxlUmVzdWx0QWN0aW9uLndoZXJlID0geyAnUm93JzogMCwgJ0NvbHVtbic6IDEgfTtcbi8qKlxuKlxuKiBSZXF1ZXN0ZWQgYWN0aW9uIHRvIGFwcGx5IGVudW0uXG4qL1xuVGFibGVSZXN1bHRBY3Rpb24ucmVxdWVzdEFjdGlvbiA9IHsgJ0FkZCc6IDAsICdEZWxldGUnOiAxIH07XG4vKipcbipcbiogUmVzdWx0IGFjdGlvbiB0byBiZSBleGVjdXRlZCBlbnVtLlxuKi9cblRhYmxlUmVzdWx0QWN0aW9uLnJlc3VsdEFjdGlvbiA9IHsgJ0lnbm9yZSc6IDAsICdTdWJ0cmFjdFNwYW5Db3VudCc6IDEsICdSZW1vdmVDZWxsJzogMiwgJ0FkZENlbGwnOiAzLCAnU3VtU3BhbkNvdW50JzogNCB9O1xuXG4vKipcbiAqXG4gKiBAY2xhc3MgZWRpdGluZy5UYWJsZVxuICpcbiAqIFRhYmxlXG4gKlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUYWJsZSB7XG4gIC8qKlxuICAgKiBoYW5kbGUgdGFiIGtleVxuICAgKlxuICAgKiBAcGFyYW0ge1dyYXBwZWRSYW5nZX0gcm5nXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNTaGlmdFxuICAgKi9cbiAgdGFiKHJuZywgaXNTaGlmdCkge1xuICAgIGNvbnN0IGNlbGwgPSBkb20uYW5jZXN0b3Iocm5nLmNvbW1vbkFuY2VzdG9yKCksIGRvbS5pc0NlbGwpO1xuICAgIGNvbnN0IHRhYmxlID0gZG9tLmFuY2VzdG9yKGNlbGwsIGRvbS5pc1RhYmxlKTtcbiAgICBjb25zdCBjZWxscyA9IGRvbS5saXN0RGVzY2VuZGFudCh0YWJsZSwgZG9tLmlzQ2VsbCk7XG5cbiAgICBjb25zdCBuZXh0Q2VsbCA9IGxpc3RzW2lzU2hpZnQgPyAncHJldicgOiAnbmV4dCddKGNlbGxzLCBjZWxsKTtcbiAgICBpZiAobmV4dENlbGwpIHtcbiAgICAgIHJhbmdlLmNyZWF0ZShuZXh0Q2VsbCwgMCkuc2VsZWN0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIG5ldyByb3dcbiAgICpcbiAgICogQHBhcmFtIHtXcmFwcGVkUmFuZ2V9IHJuZ1xuICAgKiBAcGFyYW0ge1N0cmluZ30gcG9zaXRpb24gKHRvcC9ib3R0b20pXG4gICAqIEByZXR1cm4ge05vZGV9XG4gICAqL1xuICBhZGRSb3cocm5nLCBwb3NpdGlvbikge1xuICAgIGNvbnN0IGNlbGwgPSBkb20uYW5jZXN0b3Iocm5nLmNvbW1vbkFuY2VzdG9yKCksIGRvbS5pc0NlbGwpO1xuXG4gICAgY29uc3QgY3VycmVudFRyID0gJChjZWxsKS5jbG9zZXN0KCd0cicpO1xuICAgIGNvbnN0IHRyQXR0cmlidXRlcyA9IHRoaXMucmVjb3ZlckF0dHJpYnV0ZXMoY3VycmVudFRyKTtcbiAgICBjb25zdCBodG1sID0gJCgnPHRyJyArIHRyQXR0cmlidXRlcyArICc+PC90cj4nKTtcblxuICAgIGNvbnN0IHZUYWJsZSA9IG5ldyBUYWJsZVJlc3VsdEFjdGlvbihjZWxsLCBUYWJsZVJlc3VsdEFjdGlvbi53aGVyZS5Sb3csXG4gICAgICBUYWJsZVJlc3VsdEFjdGlvbi5yZXF1ZXN0QWN0aW9uLkFkZCwgJChjdXJyZW50VHIpLmNsb3Nlc3QoJ3RhYmxlJylbMF0pO1xuICAgIGNvbnN0IGFjdGlvbnMgPSB2VGFibGUuZ2V0QWN0aW9uTGlzdCgpO1xuXG4gICAgZm9yIChsZXQgaWRDZWxsID0gMDsgaWRDZWxsIDwgYWN0aW9ucy5sZW5ndGg7IGlkQ2VsbCsrKSB7XG4gICAgICBjb25zdCBjdXJyZW50Q2VsbCA9IGFjdGlvbnNbaWRDZWxsXTtcbiAgICAgIGNvbnN0IHRkQXR0cmlidXRlcyA9IHRoaXMucmVjb3ZlckF0dHJpYnV0ZXMoY3VycmVudENlbGwuYmFzZUNlbGwpO1xuICAgICAgc3dpdGNoIChjdXJyZW50Q2VsbC5hY3Rpb24pIHtcbiAgICAgICAgY2FzZSBUYWJsZVJlc3VsdEFjdGlvbi5yZXN1bHRBY3Rpb24uQWRkQ2VsbDpcbiAgICAgICAgICBodG1sLmFwcGVuZCgnPHRkJyArIHRkQXR0cmlidXRlcyArICc+JyArIGRvbS5ibGFuayArICc8L3RkPicpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFRhYmxlUmVzdWx0QWN0aW9uLnJlc3VsdEFjdGlvbi5TdW1TcGFuQ291bnQ6XG4gICAgICAgICAgaWYgKHBvc2l0aW9uID09PSAndG9wJykge1xuICAgICAgICAgICAgY29uc3QgYmFzZUNlbGxUciA9IGN1cnJlbnRDZWxsLmJhc2VDZWxsLnBhcmVudDtcbiAgICAgICAgICAgIGNvbnN0IGlzVG9wRnJvbVJvd1NwYW4gPSAoIWJhc2VDZWxsVHIgPyAwIDogY3VycmVudENlbGwuYmFzZUNlbGwuY2xvc2VzdCgndHInKS5yb3dJbmRleCkgPD0gY3VycmVudFRyWzBdLnJvd0luZGV4O1xuICAgICAgICAgICAgaWYgKGlzVG9wRnJvbVJvd1NwYW4pIHtcbiAgICAgICAgICAgICAgY29uc3QgbmV3VGQgPSAkKCc8ZGl2PjwvZGl2PicpLmFwcGVuZCgkKCc8dGQnICsgdGRBdHRyaWJ1dGVzICsgJz4nICsgZG9tLmJsYW5rICsgJzwvdGQ+JykucmVtb3ZlQXR0cigncm93c3BhbicpKS5odG1sKCk7XG4gICAgICAgICAgICAgIGh0bWwuYXBwZW5kKG5ld1RkKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCByb3dzcGFuTnVtYmVyID0gcGFyc2VJbnQoY3VycmVudENlbGwuYmFzZUNlbGwucm93U3BhbiwgMTApO1xuICAgICAgICAgIHJvd3NwYW5OdW1iZXIrKztcbiAgICAgICAgICBjdXJyZW50Q2VsbC5iYXNlQ2VsbC5zZXRBdHRyaWJ1dGUoJ3Jvd1NwYW4nLCByb3dzcGFuTnVtYmVyKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocG9zaXRpb24gPT09ICd0b3AnKSB7XG4gICAgICBjdXJyZW50VHIuYmVmb3JlKGh0bWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjZWxsSGFzUm93c3BhbiA9IChjZWxsLnJvd1NwYW4gPiAxKTtcbiAgICAgIGlmIChjZWxsSGFzUm93c3Bhbikge1xuICAgICAgICBjb25zdCBsYXN0VHJJbmRleCA9IGN1cnJlbnRUclswXS5yb3dJbmRleCArIChjZWxsLnJvd1NwYW4gLSAyKTtcbiAgICAgICAgJCgkKGN1cnJlbnRUcikucGFyZW50KCkuZmluZCgndHInKVtsYXN0VHJJbmRleF0pLmFmdGVyKCQoaHRtbCkpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjdXJyZW50VHIuYWZ0ZXIoaHRtbCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIG5ldyBjb2xcbiAgICpcbiAgICogQHBhcmFtIHtXcmFwcGVkUmFuZ2V9IHJuZ1xuICAgKiBAcGFyYW0ge1N0cmluZ30gcG9zaXRpb24gKGxlZnQvcmlnaHQpXG4gICAqIEByZXR1cm4ge05vZGV9XG4gICAqL1xuICBhZGRDb2wocm5nLCBwb3NpdGlvbikge1xuICAgIGNvbnN0IGNlbGwgPSBkb20uYW5jZXN0b3Iocm5nLmNvbW1vbkFuY2VzdG9yKCksIGRvbS5pc0NlbGwpO1xuICAgIGNvbnN0IHJvdyA9ICQoY2VsbCkuY2xvc2VzdCgndHInKTtcbiAgICBjb25zdCByb3dzR3JvdXAgPSAkKHJvdykuc2libGluZ3MoKTtcbiAgICByb3dzR3JvdXAucHVzaChyb3cpO1xuXG4gICAgY29uc3QgdlRhYmxlID0gbmV3IFRhYmxlUmVzdWx0QWN0aW9uKGNlbGwsIFRhYmxlUmVzdWx0QWN0aW9uLndoZXJlLkNvbHVtbixcbiAgICAgIFRhYmxlUmVzdWx0QWN0aW9uLnJlcXVlc3RBY3Rpb24uQWRkLCAkKHJvdykuY2xvc2VzdCgndGFibGUnKVswXSk7XG4gICAgY29uc3QgYWN0aW9ucyA9IHZUYWJsZS5nZXRBY3Rpb25MaXN0KCk7XG5cbiAgICBmb3IgKGxldCBhY3Rpb25JbmRleCA9IDA7IGFjdGlvbkluZGV4IDwgYWN0aW9ucy5sZW5ndGg7IGFjdGlvbkluZGV4KyspIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRDZWxsID0gYWN0aW9uc1thY3Rpb25JbmRleF07XG4gICAgICBjb25zdCB0ZEF0dHJpYnV0ZXMgPSB0aGlzLnJlY292ZXJBdHRyaWJ1dGVzKGN1cnJlbnRDZWxsLmJhc2VDZWxsKTtcbiAgICAgIHN3aXRjaCAoY3VycmVudENlbGwuYWN0aW9uKSB7XG4gICAgICAgIGNhc2UgVGFibGVSZXN1bHRBY3Rpb24ucmVzdWx0QWN0aW9uLkFkZENlbGw6XG4gICAgICAgICAgaWYgKHBvc2l0aW9uID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICAkKGN1cnJlbnRDZWxsLmJhc2VDZWxsKS5hZnRlcignPHRkJyArIHRkQXR0cmlidXRlcyArICc+JyArIGRvbS5ibGFuayArICc8L3RkPicpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKGN1cnJlbnRDZWxsLmJhc2VDZWxsKS5iZWZvcmUoJzx0ZCcgKyB0ZEF0dHJpYnV0ZXMgKyAnPicgKyBkb20uYmxhbmsgKyAnPC90ZD4nKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgVGFibGVSZXN1bHRBY3Rpb24ucmVzdWx0QWN0aW9uLlN1bVNwYW5Db3VudDpcbiAgICAgICAgICBpZiAocG9zaXRpb24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgIGxldCBjb2xzcGFuTnVtYmVyID0gcGFyc2VJbnQoY3VycmVudENlbGwuYmFzZUNlbGwuY29sU3BhbiwgMTApO1xuICAgICAgICAgICAgY29sc3Bhbk51bWJlcisrO1xuICAgICAgICAgICAgY3VycmVudENlbGwuYmFzZUNlbGwuc2V0QXR0cmlidXRlKCdjb2xTcGFuJywgY29sc3Bhbk51bWJlcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoY3VycmVudENlbGwuYmFzZUNlbGwpLmJlZm9yZSgnPHRkJyArIHRkQXR0cmlidXRlcyArICc+JyArIGRvbS5ibGFuayArICc8L3RkPicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKlxuICAqIENvcHkgYXR0cmlidXRlcyBmcm9tIGVsZW1lbnQuXG4gICpcbiAgKiBAcGFyYW0ge29iamVjdH0gRWxlbWVudCB0byByZWNvdmVyIGF0dHJpYnV0ZXMuXG4gICogQHJldHVybiB7c3RyaW5nfSBDb3BpZWQgc3RyaW5nIGVsZW1lbnRzLlxuICAqL1xuICByZWNvdmVyQXR0cmlidXRlcyhlbCkge1xuICAgIGxldCByZXN1bHRTdHIgPSAnJztcblxuICAgIGlmICghZWwpIHtcbiAgICAgIHJldHVybiByZXN1bHRTdHI7XG4gICAgfVxuXG4gICAgY29uc3QgYXR0ckxpc3QgPSBlbC5hdHRyaWJ1dGVzIHx8IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRyTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGF0dHJMaXN0W2ldLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lkJykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGF0dHJMaXN0W2ldLnNwZWNpZmllZCkge1xuICAgICAgICByZXN1bHRTdHIgKz0gJyAnICsgYXR0ckxpc3RbaV0ubmFtZSArICc9XFwnJyArIGF0dHJMaXN0W2ldLnZhbHVlICsgJ1xcJyc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdFN0cjtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgY3VycmVudCByb3dcbiAgICpcbiAgICogQHBhcmFtIHtXcmFwcGVkUmFuZ2V9IHJuZ1xuICAgKiBAcmV0dXJuIHtOb2RlfVxuICAgKi9cbiAgZGVsZXRlUm93KHJuZykge1xuICAgIGNvbnN0IGNlbGwgPSBkb20uYW5jZXN0b3Iocm5nLmNvbW1vbkFuY2VzdG9yKCksIGRvbS5pc0NlbGwpO1xuICAgIGNvbnN0IHJvdyA9ICQoY2VsbCkuY2xvc2VzdCgndHInKTtcbiAgICBjb25zdCBjZWxsUG9zID0gcm93LmNoaWxkcmVuKCd0ZCwgdGgnKS5pbmRleCgkKGNlbGwpKTtcbiAgICBjb25zdCByb3dQb3MgPSByb3dbMF0ucm93SW5kZXg7XG5cbiAgICBjb25zdCB2VGFibGUgPSBuZXcgVGFibGVSZXN1bHRBY3Rpb24oY2VsbCwgVGFibGVSZXN1bHRBY3Rpb24ud2hlcmUuUm93LFxuICAgICAgVGFibGVSZXN1bHRBY3Rpb24ucmVxdWVzdEFjdGlvbi5EZWxldGUsICQocm93KS5jbG9zZXN0KCd0YWJsZScpWzBdKTtcbiAgICBjb25zdCBhY3Rpb25zID0gdlRhYmxlLmdldEFjdGlvbkxpc3QoKTtcblxuICAgIGZvciAobGV0IGFjdGlvbkluZGV4ID0gMDsgYWN0aW9uSW5kZXggPCBhY3Rpb25zLmxlbmd0aDsgYWN0aW9uSW5kZXgrKykge1xuICAgICAgaWYgKCFhY3Rpb25zW2FjdGlvbkluZGV4XSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYmFzZUNlbGwgPSBhY3Rpb25zW2FjdGlvbkluZGV4XS5iYXNlQ2VsbDtcbiAgICAgIGNvbnN0IHZpcnR1YWxQb3NpdGlvbiA9IGFjdGlvbnNbYWN0aW9uSW5kZXhdLnZpcnR1YWxUYWJsZTtcbiAgICAgIGNvbnN0IGhhc1Jvd3NwYW4gPSAoYmFzZUNlbGwucm93U3BhbiAmJiBiYXNlQ2VsbC5yb3dTcGFuID4gMSk7XG4gICAgICBsZXQgcm93c3Bhbk51bWJlciA9IChoYXNSb3dzcGFuKSA/IHBhcnNlSW50KGJhc2VDZWxsLnJvd1NwYW4sIDEwKSA6IDA7XG4gICAgICBzd2l0Y2ggKGFjdGlvbnNbYWN0aW9uSW5kZXhdLmFjdGlvbikge1xuICAgICAgICBjYXNlIFRhYmxlUmVzdWx0QWN0aW9uLnJlc3VsdEFjdGlvbi5JZ25vcmU6XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIGNhc2UgVGFibGVSZXN1bHRBY3Rpb24ucmVzdWx0QWN0aW9uLkFkZENlbGw6XG4gICAgICAgICAgY29uc3QgbmV4dFJvdyA9IHJvdy5uZXh0KCd0cicpWzBdO1xuICAgICAgICAgIGlmICghbmV4dFJvdykgeyBjb250aW51ZTsgfVxuICAgICAgICAgIGNvbnN0IGNsb25lUm93ID0gcm93WzBdLmNlbGxzW2NlbGxQb3NdO1xuICAgICAgICAgIGlmIChoYXNSb3dzcGFuKSB7XG4gICAgICAgICAgICBpZiAocm93c3Bhbk51bWJlciA+IDIpIHtcbiAgICAgICAgICAgICAgcm93c3Bhbk51bWJlci0tO1xuICAgICAgICAgICAgICBuZXh0Um93Lmluc2VydEJlZm9yZShjbG9uZVJvdywgbmV4dFJvdy5jZWxsc1tjZWxsUG9zXSk7XG4gICAgICAgICAgICAgIG5leHRSb3cuY2VsbHNbY2VsbFBvc10uc2V0QXR0cmlidXRlKCdyb3dTcGFuJywgcm93c3Bhbk51bWJlcik7XG4gICAgICAgICAgICAgIG5leHRSb3cuY2VsbHNbY2VsbFBvc10uaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJvd3NwYW5OdW1iZXIgPT09IDIpIHtcbiAgICAgICAgICAgICAgbmV4dFJvdy5pbnNlcnRCZWZvcmUoY2xvbmVSb3csIG5leHRSb3cuY2VsbHNbY2VsbFBvc10pO1xuICAgICAgICAgICAgICBuZXh0Um93LmNlbGxzW2NlbGxQb3NdLnJlbW92ZUF0dHJpYnV0ZSgncm93U3BhbicpO1xuICAgICAgICAgICAgICBuZXh0Um93LmNlbGxzW2NlbGxQb3NdLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgY2FzZSBUYWJsZVJlc3VsdEFjdGlvbi5yZXN1bHRBY3Rpb24uU3VidHJhY3RTcGFuQ291bnQ6XG4gICAgICAgICAgaWYgKGhhc1Jvd3NwYW4pIHtcbiAgICAgICAgICAgIGlmIChyb3dzcGFuTnVtYmVyID4gMikge1xuICAgICAgICAgICAgICByb3dzcGFuTnVtYmVyLS07XG4gICAgICAgICAgICAgIGJhc2VDZWxsLnNldEF0dHJpYnV0ZSgncm93U3BhbicsIHJvd3NwYW5OdW1iZXIpO1xuICAgICAgICAgICAgICBpZiAodmlydHVhbFBvc2l0aW9uLnJvd0luZGV4ICE9PSByb3dQb3MgJiYgYmFzZUNlbGwuY2VsbEluZGV4ID09PSBjZWxsUG9zKSB7IGJhc2VDZWxsLmlubmVySFRNTCA9ICcnOyB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJvd3NwYW5OdW1iZXIgPT09IDIpIHtcbiAgICAgICAgICAgICAgYmFzZUNlbGwucmVtb3ZlQXR0cmlidXRlKCdyb3dTcGFuJyk7XG4gICAgICAgICAgICAgIGlmICh2aXJ0dWFsUG9zaXRpb24ucm93SW5kZXggIT09IHJvd1BvcyAmJiBiYXNlQ2VsbC5jZWxsSW5kZXggPT09IGNlbGxQb3MpIHsgYmFzZUNlbGwuaW5uZXJIVE1MID0gJyc7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIGNhc2UgVGFibGVSZXN1bHRBY3Rpb24ucmVzdWx0QWN0aW9uLlJlbW92ZUNlbGw6XG4gICAgICAgICAgLy8gRG8gbm90IG5lZWQgcmVtb3ZlIGNlbGwgYmVjYXVzZSByb3cgd2lsbCBiZSBkZWxldGVkLlxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByb3cucmVtb3ZlKCk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIGN1cnJlbnQgY29sXG4gICAqXG4gICAqIEBwYXJhbSB7V3JhcHBlZFJhbmdlfSBybmdcbiAgICogQHJldHVybiB7Tm9kZX1cbiAgICovXG4gIGRlbGV0ZUNvbChybmcpIHtcbiAgICBjb25zdCBjZWxsID0gZG9tLmFuY2VzdG9yKHJuZy5jb21tb25BbmNlc3RvcigpLCBkb20uaXNDZWxsKTtcbiAgICBjb25zdCByb3cgPSAkKGNlbGwpLmNsb3Nlc3QoJ3RyJyk7XG4gICAgY29uc3QgY2VsbFBvcyA9IHJvdy5jaGlsZHJlbigndGQsIHRoJykuaW5kZXgoJChjZWxsKSk7XG5cbiAgICBjb25zdCB2VGFibGUgPSBuZXcgVGFibGVSZXN1bHRBY3Rpb24oY2VsbCwgVGFibGVSZXN1bHRBY3Rpb24ud2hlcmUuQ29sdW1uLFxuICAgICAgVGFibGVSZXN1bHRBY3Rpb24ucmVxdWVzdEFjdGlvbi5EZWxldGUsICQocm93KS5jbG9zZXN0KCd0YWJsZScpWzBdKTtcbiAgICBjb25zdCBhY3Rpb25zID0gdlRhYmxlLmdldEFjdGlvbkxpc3QoKTtcblxuICAgIGZvciAobGV0IGFjdGlvbkluZGV4ID0gMDsgYWN0aW9uSW5kZXggPCBhY3Rpb25zLmxlbmd0aDsgYWN0aW9uSW5kZXgrKykge1xuICAgICAgaWYgKCFhY3Rpb25zW2FjdGlvbkluZGV4XSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHN3aXRjaCAoYWN0aW9uc1thY3Rpb25JbmRleF0uYWN0aW9uKSB7XG4gICAgICAgIGNhc2UgVGFibGVSZXN1bHRBY3Rpb24ucmVzdWx0QWN0aW9uLklnbm9yZTpcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgY2FzZSBUYWJsZVJlc3VsdEFjdGlvbi5yZXN1bHRBY3Rpb24uU3VidHJhY3RTcGFuQ291bnQ6XG4gICAgICAgICAgY29uc3QgYmFzZUNlbGwgPSBhY3Rpb25zW2FjdGlvbkluZGV4XS5iYXNlQ2VsbDtcbiAgICAgICAgICBjb25zdCBoYXNDb2xzcGFuID0gKGJhc2VDZWxsLmNvbFNwYW4gJiYgYmFzZUNlbGwuY29sU3BhbiA+IDEpO1xuICAgICAgICAgIGlmIChoYXNDb2xzcGFuKSB7XG4gICAgICAgICAgICBsZXQgY29sc3Bhbk51bWJlciA9IChiYXNlQ2VsbC5jb2xTcGFuKSA/IHBhcnNlSW50KGJhc2VDZWxsLmNvbFNwYW4sIDEwKSA6IDA7XG4gICAgICAgICAgICBpZiAoY29sc3Bhbk51bWJlciA+IDIpIHtcbiAgICAgICAgICAgICAgY29sc3Bhbk51bWJlci0tO1xuICAgICAgICAgICAgICBiYXNlQ2VsbC5zZXRBdHRyaWJ1dGUoJ2NvbFNwYW4nLCBjb2xzcGFuTnVtYmVyKTtcbiAgICAgICAgICAgICAgaWYgKGJhc2VDZWxsLmNlbGxJbmRleCA9PT0gY2VsbFBvcykgeyBiYXNlQ2VsbC5pbm5lckhUTUwgPSAnJzsgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChjb2xzcGFuTnVtYmVyID09PSAyKSB7XG4gICAgICAgICAgICAgIGJhc2VDZWxsLnJlbW92ZUF0dHJpYnV0ZSgnY29sU3BhbicpO1xuICAgICAgICAgICAgICBpZiAoYmFzZUNlbGwuY2VsbEluZGV4ID09PSBjZWxsUG9zKSB7IGJhc2VDZWxsLmlubmVySFRNTCA9ICcnOyB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBjYXNlIFRhYmxlUmVzdWx0QWN0aW9uLnJlc3VsdEFjdGlvbi5SZW1vdmVDZWxsOlxuICAgICAgICAgIGRvbS5yZW1vdmUoYWN0aW9uc1thY3Rpb25JbmRleF0uYmFzZUNlbGwsIHRydWUpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBjcmVhdGUgZW1wdHkgdGFibGUgZWxlbWVudFxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gcm93Q291bnRcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGNvbENvdW50XG4gICAqIEByZXR1cm4ge05vZGV9XG4gICAqL1xuICBjcmVhdGVUYWJsZShjb2xDb3VudCwgcm93Q291bnQsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB0ZHMgPSBbXTtcbiAgICBsZXQgdGRIVE1MO1xuICAgIGZvciAobGV0IGlkeENvbCA9IDA7IGlkeENvbCA8IGNvbENvdW50OyBpZHhDb2wrKykge1xuICAgICAgdGRzLnB1c2goJzx0ZD4nICsgZG9tLmJsYW5rICsgJzwvdGQ+Jyk7XG4gICAgfVxuICAgIHRkSFRNTCA9IHRkcy5qb2luKCcnKTtcblxuICAgIGNvbnN0IHRycyA9IFtdO1xuICAgIGxldCB0ckhUTUw7XG4gICAgZm9yIChsZXQgaWR4Um93ID0gMDsgaWR4Um93IDwgcm93Q291bnQ7IGlkeFJvdysrKSB7XG4gICAgICB0cnMucHVzaCgnPHRyPicgKyB0ZEhUTUwgKyAnPC90cj4nKTtcbiAgICB9XG4gICAgdHJIVE1MID0gdHJzLmpvaW4oJycpO1xuICAgIGNvbnN0ICR0YWJsZSA9ICQoJzx0YWJsZT4nICsgdHJIVE1MICsgJzwvdGFibGU+Jyk7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy50YWJsZUNsYXNzTmFtZSkge1xuICAgICAgJHRhYmxlLmFkZENsYXNzKG9wdGlvbnMudGFibGVDbGFzc05hbWUpO1xuICAgIH1cblxuICAgIHJldHVybiAkdGFibGVbMF07XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIGN1cnJlbnQgdGFibGVcbiAgICpcbiAgICogQHBhcmFtIHtXcmFwcGVkUmFuZ2V9IHJuZ1xuICAgKiBAcmV0dXJuIHtOb2RlfVxuICAgKi9cbiAgZGVsZXRlVGFibGUocm5nKSB7XG4gICAgY29uc3QgY2VsbCA9IGRvbS5hbmNlc3RvcihybmcuY29tbW9uQW5jZXN0b3IoKSwgZG9tLmlzQ2VsbCk7XG4gICAgJChjZWxsKS5jbG9zZXN0KCd0YWJsZScpLnJlbW92ZSgpO1xuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGVudiBmcm9tICcuLi9jb3JlL2Vudic7XG5pbXBvcnQga2V5IGZyb20gJy4uL2NvcmUva2V5JztcbmltcG9ydCBmdW5jIGZyb20gJy4uL2NvcmUvZnVuYyc7XG5pbXBvcnQgbGlzdHMgZnJvbSAnLi4vY29yZS9saXN0cyc7XG5pbXBvcnQgZG9tIGZyb20gJy4uL2NvcmUvZG9tJztcbmltcG9ydCByYW5nZSBmcm9tICcuLi9jb3JlL3JhbmdlJztcbmltcG9ydCB7IHJlYWRGaWxlQXNEYXRhVVJMLCBjcmVhdGVJbWFnZSB9IGZyb20gJy4uL2NvcmUvYXN5bmMnO1xuaW1wb3J0IEhpc3RvcnkgZnJvbSAnLi4vZWRpdGluZy9IaXN0b3J5JztcbmltcG9ydCBTdHlsZSBmcm9tICcuLi9lZGl0aW5nL1N0eWxlJztcbmltcG9ydCBUeXBpbmcgZnJvbSAnLi4vZWRpdGluZy9UeXBpbmcnO1xuaW1wb3J0IFRhYmxlIGZyb20gJy4uL2VkaXRpbmcvVGFibGUnO1xuaW1wb3J0IEJ1bGxldCBmcm9tICcuLi9lZGl0aW5nL0J1bGxldCc7XG5cbmNvbnN0IEtFWV9CT0dVUyA9ICdib2d1cyc7XG5cbi8qKlxuICogQGNsYXNzIEVkaXRvclxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFZGl0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7XG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcblxuICAgIHRoaXMuJG5vdGUgPSBjb250ZXh0LmxheW91dEluZm8ubm90ZTtcbiAgICB0aGlzLiRlZGl0b3IgPSBjb250ZXh0LmxheW91dEluZm8uZWRpdG9yO1xuICAgIHRoaXMuJGVkaXRhYmxlID0gY29udGV4dC5sYXlvdXRJbmZvLmVkaXRhYmxlO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcbiAgICB0aGlzLmxhbmcgPSB0aGlzLm9wdGlvbnMubGFuZ0luZm87XG5cbiAgICB0aGlzLmVkaXRhYmxlID0gdGhpcy4kZWRpdGFibGVbMF07XG4gICAgdGhpcy5sYXN0UmFuZ2UgPSBudWxsO1xuXG4gICAgdGhpcy5zdHlsZSA9IG5ldyBTdHlsZSgpO1xuICAgIHRoaXMudGFibGUgPSBuZXcgVGFibGUoKTtcbiAgICB0aGlzLnR5cGluZyA9IG5ldyBUeXBpbmcoKTtcbiAgICB0aGlzLmJ1bGxldCA9IG5ldyBCdWxsZXQoKTtcbiAgICB0aGlzLmhpc3RvcnkgPSBuZXcgSGlzdG9yeSh0aGlzLiRlZGl0YWJsZSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnaGVscC51bmRvJywgdGhpcy5sYW5nLmhlbHAudW5kbyk7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2hlbHAucmVkbycsIHRoaXMubGFuZy5oZWxwLnJlZG8pO1xuICAgIHRoaXMuY29udGV4dC5tZW1vKCdoZWxwLnRhYicsIHRoaXMubGFuZy5oZWxwLnRhYik7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2hlbHAudW50YWInLCB0aGlzLmxhbmcuaGVscC51bnRhYik7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2hlbHAuaW5zZXJ0UGFyYWdyYXBoJywgdGhpcy5sYW5nLmhlbHAuaW5zZXJ0UGFyYWdyYXBoKTtcbiAgICB0aGlzLmNvbnRleHQubWVtbygnaGVscC5pbnNlcnRPcmRlcmVkTGlzdCcsIHRoaXMubGFuZy5oZWxwLmluc2VydE9yZGVyZWRMaXN0KTtcbiAgICB0aGlzLmNvbnRleHQubWVtbygnaGVscC5pbnNlcnRVbm9yZGVyZWRMaXN0JywgdGhpcy5sYW5nLmhlbHAuaW5zZXJ0VW5vcmRlcmVkTGlzdCk7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2hlbHAuaW5kZW50JywgdGhpcy5sYW5nLmhlbHAuaW5kZW50KTtcbiAgICB0aGlzLmNvbnRleHQubWVtbygnaGVscC5vdXRkZW50JywgdGhpcy5sYW5nLmhlbHAub3V0ZGVudCk7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2hlbHAuZm9ybWF0UGFyYScsIHRoaXMubGFuZy5oZWxwLmZvcm1hdFBhcmEpO1xuICAgIHRoaXMuY29udGV4dC5tZW1vKCdoZWxwLmluc2VydEhvcml6b250YWxSdWxlJywgdGhpcy5sYW5nLmhlbHAuaW5zZXJ0SG9yaXpvbnRhbFJ1bGUpO1xuICAgIHRoaXMuY29udGV4dC5tZW1vKCdoZWxwLmZvbnROYW1lJywgdGhpcy5sYW5nLmhlbHAuZm9udE5hbWUpO1xuXG4gICAgLy8gbmF0aXZlIGNvbW1hbmRzKHdpdGggZXhlY0NvbW1hbmQpLCBnZW5lcmF0ZSBmdW5jdGlvbiBmb3IgZXhlY0NvbW1hbmRcbiAgICBjb25zdCBjb21tYW5kcyA9IFtcbiAgICAgICdib2xkJywgJ2l0YWxpYycsICd1bmRlcmxpbmUnLCAnc3RyaWtldGhyb3VnaCcsICdzdXBlcnNjcmlwdCcsICdzdWJzY3JpcHQnLFxuICAgICAgJ2p1c3RpZnlMZWZ0JywgJ2p1c3RpZnlDZW50ZXInLCAnanVzdGlmeVJpZ2h0JywgJ2p1c3RpZnlGdWxsJyxcbiAgICAgICdmb3JtYXRCbG9jaycsICdyZW1vdmVGb3JtYXQnLCAnYmFja0NvbG9yJ1xuICAgIF07XG5cbiAgICBmb3IgKGxldCBpZHggPSAwLCBsZW4gPSBjb21tYW5kcy5sZW5ndGg7IGlkeCA8IGxlbjsgaWR4KyspIHtcbiAgICAgIHRoaXNbY29tbWFuZHNbaWR4XV0gPSAoKHNDbWQpID0+IHtcbiAgICAgICAgcmV0dXJuICh2YWx1ZSkgPT4ge1xuICAgICAgICAgIHRoaXMuYmVmb3JlQ29tbWFuZCgpO1xuICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKHNDbWQsIGZhbHNlLCB2YWx1ZSk7XG4gICAgICAgICAgdGhpcy5hZnRlckNvbW1hbmQodHJ1ZSk7XG4gICAgICAgIH07XG4gICAgICB9KShjb21tYW5kc1tpZHhdKTtcbiAgICAgIHRoaXMuY29udGV4dC5tZW1vKCdoZWxwLicgKyBjb21tYW5kc1tpZHhdLCB0aGlzLmxhbmcuaGVscFtjb21tYW5kc1tpZHhdXSk7XG4gICAgfVxuXG4gICAgdGhpcy5mb250TmFtZSA9IHRoaXMud3JhcENvbW1hbmQoKHZhbHVlKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5mb250U3R5bGluZygnZm9udC1mYW1pbHknLCBcIlxcJ1wiICsgdmFsdWUgKyBcIlxcJ1wiKTtcbiAgICB9KTtcblxuICAgIHRoaXMuZm9udFNpemUgPSB0aGlzLndyYXBDb21tYW5kKCh2YWx1ZSkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuZm9udFN0eWxpbmcoJ2ZvbnQtc2l6ZScsIHZhbHVlICsgJ3B4Jyk7XG4gICAgfSk7XG5cbiAgICBmb3IgKGxldCBpZHggPSAxOyBpZHggPD0gNjsgaWR4KyspIHtcbiAgICAgIHRoaXNbJ2Zvcm1hdEgnICsgaWR4XSA9ICgoaWR4KSA9PiB7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5mb3JtYXRCbG9jaygnSCcgKyBpZHgpO1xuICAgICAgICB9O1xuICAgICAgfSkoaWR4KTtcbiAgICAgIHRoaXMuY29udGV4dC5tZW1vKCdoZWxwLmZvcm1hdEgnICsgaWR4LCB0aGlzLmxhbmcuaGVscFsnZm9ybWF0SCcgKyBpZHhdKTtcbiAgICB9O1xuXG4gICAgdGhpcy5pbnNlcnRQYXJhZ3JhcGggPSB0aGlzLndyYXBDb21tYW5kKCgpID0+IHtcbiAgICAgIHRoaXMudHlwaW5nLmluc2VydFBhcmFncmFwaCh0aGlzLmVkaXRhYmxlKTtcbiAgICB9KTtcblxuICAgIHRoaXMuaW5zZXJ0T3JkZXJlZExpc3QgPSB0aGlzLndyYXBDb21tYW5kKCgpID0+IHtcbiAgICAgIHRoaXMuYnVsbGV0Lmluc2VydE9yZGVyZWRMaXN0KHRoaXMuZWRpdGFibGUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5pbnNlcnRVbm9yZGVyZWRMaXN0ID0gdGhpcy53cmFwQ29tbWFuZCgoKSA9PiB7XG4gICAgICB0aGlzLmJ1bGxldC5pbnNlcnRVbm9yZGVyZWRMaXN0KHRoaXMuZWRpdGFibGUpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5pbmRlbnQgPSB0aGlzLndyYXBDb21tYW5kKCgpID0+IHtcbiAgICAgIHRoaXMuYnVsbGV0LmluZGVudCh0aGlzLmVkaXRhYmxlKTtcbiAgICB9KTtcblxuICAgIHRoaXMub3V0ZGVudCA9IHRoaXMud3JhcENvbW1hbmQoKCkgPT4ge1xuICAgICAgdGhpcy5idWxsZXQub3V0ZGVudCh0aGlzLmVkaXRhYmxlKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIGluc2VydE5vZGVcbiAgICAgKiBpbnNlcnQgbm9kZVxuICAgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICAgICAqL1xuICAgIHRoaXMuaW5zZXJ0Tm9kZSA9IHRoaXMud3JhcENvbW1hbmQoKG5vZGUpID0+IHtcbiAgICAgIGlmICh0aGlzLmlzTGltaXRlZCgkKG5vZGUpLnRleHQoKS5sZW5ndGgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJuZyA9IHRoaXMuY3JlYXRlUmFuZ2UoKTtcbiAgICAgIHJuZy5pbnNlcnROb2RlKG5vZGUpO1xuICAgICAgcmFuZ2UuY3JlYXRlRnJvbU5vZGVBZnRlcihub2RlKS5zZWxlY3QoKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIGluc2VydCB0ZXh0XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAgICAgKi9cbiAgICB0aGlzLmluc2VydFRleHQgPSB0aGlzLndyYXBDb21tYW5kKCh0ZXh0KSA9PiB7XG4gICAgICBpZiAodGhpcy5pc0xpbWl0ZWQodGV4dC5sZW5ndGgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJuZyA9IHRoaXMuY3JlYXRlUmFuZ2UoKTtcbiAgICAgIGNvbnN0IHRleHROb2RlID0gcm5nLmluc2VydE5vZGUoZG9tLmNyZWF0ZVRleHQodGV4dCkpO1xuICAgICAgcmFuZ2UuY3JlYXRlKHRleHROb2RlLCBkb20ubm9kZUxlbmd0aCh0ZXh0Tm9kZSkpLnNlbGVjdCgpO1xuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIHBhc3RlIEhUTUxcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWFya3VwXG4gICAgICovXG4gICAgdGhpcy5wYXN0ZUhUTUwgPSB0aGlzLndyYXBDb21tYW5kKChtYXJrdXApID0+IHtcbiAgICAgIGlmICh0aGlzLmlzTGltaXRlZChtYXJrdXAubGVuZ3RoKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBjb250ZW50cyA9IHRoaXMuY3JlYXRlUmFuZ2UoKS5wYXN0ZUhUTUwobWFya3VwKTtcbiAgICAgIHJhbmdlLmNyZWF0ZUZyb21Ob2RlQWZ0ZXIobGlzdHMubGFzdChjb250ZW50cykpLnNlbGVjdCgpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogZm9ybWF0QmxvY2tcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0YWdOYW1lXG4gICAgICovXG4gICAgdGhpcy5mb3JtYXRCbG9jayA9IHRoaXMud3JhcENvbW1hbmQoKHRhZ05hbWUsICR0YXJnZXQpID0+IHtcbiAgICAgIGNvbnN0IG9uQXBwbHlDdXN0b21TdHlsZSA9IHRoaXMub3B0aW9ucy5jYWxsYmFja3Mub25BcHBseUN1c3RvbVN0eWxlO1xuICAgICAgaWYgKG9uQXBwbHlDdXN0b21TdHlsZSkge1xuICAgICAgICBvbkFwcGx5Q3VzdG9tU3R5bGUuY2FsbCh0aGlzLCAkdGFyZ2V0LCB0aGlzLmNvbnRleHQsIHRoaXMub25Gb3JtYXRCbG9jayk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9uRm9ybWF0QmxvY2sodGFnTmFtZSwgJHRhcmdldCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBpbnNlcnQgaG9yaXpvbnRhbCBydWxlXG4gICAgICovXG4gICAgdGhpcy5pbnNlcnRIb3Jpem9udGFsUnVsZSA9IHRoaXMud3JhcENvbW1hbmQoKCkgPT4ge1xuICAgICAgY29uc3QgaHJOb2RlID0gdGhpcy5jcmVhdGVSYW5nZSgpLmluc2VydE5vZGUoZG9tLmNyZWF0ZSgnSFInKSk7XG4gICAgICBpZiAoaHJOb2RlLm5leHRTaWJsaW5nKSB7XG4gICAgICAgIHJhbmdlLmNyZWF0ZShock5vZGUubmV4dFNpYmxpbmcsIDApLm5vcm1hbGl6ZSgpLnNlbGVjdCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogbGluZUhlaWdodFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIHRoaXMubGluZUhlaWdodCA9IHRoaXMud3JhcENvbW1hbmQoKHZhbHVlKSA9PiB7XG4gICAgICB0aGlzLnN0eWxlLnN0eWxlUGFyYSh0aGlzLmNyZWF0ZVJhbmdlKCksIHtcbiAgICAgICAgbGluZUhlaWdodDogdmFsdWVcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogY3JlYXRlIGxpbmsgKGNvbW1hbmQpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbGlua0luZm9cbiAgICAgKi9cbiAgICB0aGlzLmNyZWF0ZUxpbmsgPSB0aGlzLndyYXBDb21tYW5kKChsaW5rSW5mbykgPT4ge1xuICAgICAgbGV0IGxpbmtVcmwgPSBsaW5rSW5mby51cmw7XG4gICAgICBjb25zdCBsaW5rVGV4dCA9IGxpbmtJbmZvLnRleHQ7XG4gICAgICBjb25zdCBpc05ld1dpbmRvdyA9IGxpbmtJbmZvLmlzTmV3V2luZG93O1xuICAgICAgbGV0IHJuZyA9IGxpbmtJbmZvLnJhbmdlIHx8IHRoaXMuY3JlYXRlUmFuZ2UoKTtcbiAgICAgIGNvbnN0IGlzVGV4dENoYW5nZWQgPSBybmcudG9TdHJpbmcoKSAhPT0gbGlua1RleHQ7XG5cbiAgICAgIC8vIGhhbmRsZSBzcGFjZWQgdXJscyBmcm9tIGlucHV0XG4gICAgICBpZiAodHlwZW9mIGxpbmtVcmwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGxpbmtVcmwgPSBsaW5rVXJsLnRyaW0oKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5vbkNyZWF0ZUxpbmspIHtcbiAgICAgICAgbGlua1VybCA9IHRoaXMub3B0aW9ucy5vbkNyZWF0ZUxpbmsobGlua1VybCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpZiB1cmwgZG9lc24ndCBtYXRjaCBhbiBVUkwgc2NoZW1hLCBzZXQgaHR0cDovLyBhcyBkZWZhdWx0XG4gICAgICAgIGxpbmtVcmwgPSAvXltBLVphLXpdW0EtWmEtejAtOSstLl0qXFw6W1xcL1xcL10/Ly50ZXN0KGxpbmtVcmwpXG4gICAgICAgICAgPyBsaW5rVXJsIDogJ2h0dHA6Ly8nICsgbGlua1VybDtcbiAgICAgIH1cblxuICAgICAgbGV0IGFuY2hvcnMgPSBbXTtcbiAgICAgIGlmIChpc1RleHRDaGFuZ2VkKSB7XG4gICAgICAgIHJuZyA9IHJuZy5kZWxldGVDb250ZW50cygpO1xuICAgICAgICBjb25zdCBhbmNob3IgPSBybmcuaW5zZXJ0Tm9kZSgkKCc8QT4nICsgbGlua1RleHQgKyAnPC9BPicpWzBdKTtcbiAgICAgICAgYW5jaG9ycy5wdXNoKGFuY2hvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbmNob3JzID0gdGhpcy5zdHlsZS5zdHlsZU5vZGVzKHJuZywge1xuICAgICAgICAgIG5vZGVOYW1lOiAnQScsXG4gICAgICAgICAgZXhwYW5kQ2xvc2VzdFNpYmxpbmc6IHRydWUsXG4gICAgICAgICAgb25seVBhcnRpYWxDb250YWluczogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgJC5lYWNoKGFuY2hvcnMsIChpZHgsIGFuY2hvcikgPT4ge1xuICAgICAgICAkKGFuY2hvcikuYXR0cignaHJlZicsIGxpbmtVcmwpO1xuICAgICAgICBpZiAoaXNOZXdXaW5kb3cpIHtcbiAgICAgICAgICAkKGFuY2hvcikuYXR0cigndGFyZ2V0JywgJ19ibGFuaycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQoYW5jaG9yKS5yZW1vdmVBdHRyKCd0YXJnZXQnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHN0YXJ0UmFuZ2UgPSByYW5nZS5jcmVhdGVGcm9tTm9kZUJlZm9yZShsaXN0cy5oZWFkKGFuY2hvcnMpKTtcbiAgICAgIGNvbnN0IHN0YXJ0UG9pbnQgPSBzdGFydFJhbmdlLmdldFN0YXJ0UG9pbnQoKTtcbiAgICAgIGNvbnN0IGVuZFJhbmdlID0gcmFuZ2UuY3JlYXRlRnJvbU5vZGVBZnRlcihsaXN0cy5sYXN0KGFuY2hvcnMpKTtcbiAgICAgIGNvbnN0IGVuZFBvaW50ID0gZW5kUmFuZ2UuZ2V0RW5kUG9pbnQoKTtcblxuICAgICAgcmFuZ2UuY3JlYXRlKFxuICAgICAgICBzdGFydFBvaW50Lm5vZGUsXG4gICAgICAgIHN0YXJ0UG9pbnQub2Zmc2V0LFxuICAgICAgICBlbmRQb2ludC5ub2RlLFxuICAgICAgICBlbmRQb2ludC5vZmZzZXRcbiAgICAgICkuc2VsZWN0KCk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBzZXR0aW5nIGNvbG9yXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gc09iakNvbG9yICBjb2xvciBjb2RlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHNPYmpDb2xvci5mb3JlQ29sb3IgZm9yZWdyb3VuZCBjb2xvclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzT2JqQ29sb3IuYmFja0NvbG9yIGJhY2tncm91bmQgY29sb3JcbiAgICAgKi9cbiAgICB0aGlzLmNvbG9yID0gdGhpcy53cmFwQ29tbWFuZCgoY29sb3JJbmZvKSA9PiB7XG4gICAgICBjb25zdCBmb3JlQ29sb3IgPSBjb2xvckluZm8uZm9yZUNvbG9yO1xuICAgICAgY29uc3QgYmFja0NvbG9yID0gY29sb3JJbmZvLmJhY2tDb2xvcjtcblxuICAgICAgaWYgKGZvcmVDb2xvcikgeyBkb2N1bWVudC5leGVjQ29tbWFuZCgnZm9yZUNvbG9yJywgZmFsc2UsIGZvcmVDb2xvcik7IH1cbiAgICAgIGlmIChiYWNrQ29sb3IpIHsgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2JhY2tDb2xvcicsIGZhbHNlLCBiYWNrQ29sb3IpOyB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBTZXQgZm9yZWdyb3VuZCBjb2xvclxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbG9yQ29kZSBmb3JlZ3JvdW5kIGNvbG9yIGNvZGVcbiAgICAgKi9cbiAgICB0aGlzLmZvcmVDb2xvciA9IHRoaXMud3JhcENvbW1hbmQoKGNvbG9ySW5mbykgPT4ge1xuICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ3N0eWxlV2l0aENTUycsIGZhbHNlLCB0cnVlKTtcbiAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdmb3JlQ29sb3InLCBmYWxzZSwgY29sb3JJbmZvKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIGluc2VydCBUYWJsZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGRpbWVuc2lvbiBvZiB0YWJsZSAoZXggOiBcIjV4NVwiKVxuICAgICAqL1xuICAgIHRoaXMuaW5zZXJ0VGFibGUgPSB0aGlzLndyYXBDb21tYW5kKChkaW0pID0+IHtcbiAgICAgIGNvbnN0IGRpbWVuc2lvbiA9IGRpbS5zcGxpdCgneCcpO1xuXG4gICAgICBjb25zdCBybmcgPSB0aGlzLmNyZWF0ZVJhbmdlKCkuZGVsZXRlQ29udGVudHMoKTtcbiAgICAgIHJuZy5pbnNlcnROb2RlKHRoaXMudGFibGUuY3JlYXRlVGFibGUoZGltZW5zaW9uWzBdLCBkaW1lbnNpb25bMV0sIHRoaXMub3B0aW9ucykpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogcmVtb3ZlIG1lZGlhIG9iamVjdCBhbmQgRmlndXJlIEVsZW1lbnRzIGlmIG1lZGlhIG9iamVjdCBpcyBpbWcgd2l0aCBGaWd1cmUuXG4gICAgICovXG4gICAgdGhpcy5yZW1vdmVNZWRpYSA9IHRoaXMud3JhcENvbW1hbmQoKCkgPT4ge1xuICAgICAgbGV0ICR0YXJnZXQgPSAkKHRoaXMucmVzdG9yZVRhcmdldCgpKS5wYXJlbnQoKTtcbiAgICAgIGlmICgkdGFyZ2V0LnBhcmVudCgnZmlndXJlJykubGVuZ3RoKSB7XG4gICAgICAgICR0YXJnZXQucGFyZW50KCdmaWd1cmUnKS5yZW1vdmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICR0YXJnZXQgPSAkKHRoaXMucmVzdG9yZVRhcmdldCgpKS5kZXRhY2goKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ21lZGlhLmRlbGV0ZScsICR0YXJnZXQsIHRoaXMuJGVkaXRhYmxlKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIGZsb2F0IG1lXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAgICAgKi9cbiAgICB0aGlzLmZsb2F0TWUgPSB0aGlzLndyYXBDb21tYW5kKCh2YWx1ZSkgPT4ge1xuICAgICAgY29uc3QgJHRhcmdldCA9ICQodGhpcy5yZXN0b3JlVGFyZ2V0KCkpO1xuICAgICAgJHRhcmdldC50b2dnbGVDbGFzcygnbm90ZS1mbG9hdC1sZWZ0JywgdmFsdWUgPT09ICdsZWZ0Jyk7XG4gICAgICAkdGFyZ2V0LnRvZ2dsZUNsYXNzKCdub3RlLWZsb2F0LXJpZ2h0JywgdmFsdWUgPT09ICdyaWdodCcpO1xuICAgICAgJHRhcmdldC5jc3MoJ2Zsb2F0JywgdmFsdWUpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogcmVzaXplIG92ZXJsYXkgZWxlbWVudFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgICAqL1xuICAgIHRoaXMucmVzaXplID0gdGhpcy53cmFwQ29tbWFuZCgodmFsdWUpID0+IHtcbiAgICAgIGNvbnN0ICR0YXJnZXQgPSAkKHRoaXMucmVzdG9yZVRhcmdldCgpKTtcbiAgICAgICR0YXJnZXQuY3NzKHtcbiAgICAgICAgd2lkdGg6IHZhbHVlICogMTAwICsgJyUnLFxuICAgICAgICBoZWlnaHQ6ICcnXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgLy8gYmluZCBjdXN0b20gZXZlbnRzXG4gICAgdGhpcy4kZWRpdGFibGUub24oJ2tleWRvd24nLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBrZXkuY29kZS5FTlRFUikge1xuICAgICAgICB0aGlzLmNvbnRleHQudHJpZ2dlckV2ZW50KCdlbnRlcicsIGV2ZW50KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ2tleWRvd24nLCBldmVudCk7XG5cbiAgICAgIGlmICghZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaG9ydGN1dHMpIHtcbiAgICAgICAgICB0aGlzLmhhbmRsZUtleU1hcChldmVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5wcmV2ZW50RGVmYXVsdEVkaXRhYmxlU2hvcnRDdXRzKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaXNMaW1pdGVkKDEsIGV2ZW50KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSkub24oJ2tleXVwJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmNvbnRleHQudHJpZ2dlckV2ZW50KCdrZXl1cCcsIGV2ZW50KTtcbiAgICB9KS5vbignZm9jdXMnLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ2ZvY3VzJywgZXZlbnQpO1xuICAgIH0pLm9uKCdibHVyJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmNvbnRleHQudHJpZ2dlckV2ZW50KCdibHVyJywgZXZlbnQpO1xuICAgIH0pLm9uKCdtb3VzZWRvd24nLCAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ21vdXNlZG93bicsIGV2ZW50KTtcbiAgICB9KS5vbignbW91c2V1cCcsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnbW91c2V1cCcsIGV2ZW50KTtcbiAgICB9KS5vbignc2Nyb2xsJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmNvbnRleHQudHJpZ2dlckV2ZW50KCdzY3JvbGwnLCBldmVudCk7XG4gICAgfSkub24oJ3Bhc3RlJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmNvbnRleHQudHJpZ2dlckV2ZW50KCdwYXN0ZScsIGV2ZW50KTtcbiAgICB9KTtcblxuICAgIC8vIGluaXQgY29udGVudCBiZWZvcmUgc2V0IGV2ZW50XG4gICAgdGhpcy4kZWRpdGFibGUuaHRtbChkb20uaHRtbCh0aGlzLiRub3RlKSB8fCBkb20uZW1wdHlQYXJhKTtcblxuICAgIHRoaXMuJGVkaXRhYmxlLm9uKGVudi5pbnB1dEV2ZW50TmFtZSwgZnVuYy5kZWJvdW5jZSgoKSA9PiB7XG4gICAgICB0aGlzLmNvbnRleHQudHJpZ2dlckV2ZW50KCdjaGFuZ2UnLCB0aGlzLiRlZGl0YWJsZS5odG1sKCkpO1xuICAgIH0sIDEwMCkpO1xuXG4gICAgdGhpcy4kZWRpdG9yLm9uKCdmb2N1c2luJywgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLmNvbnRleHQudHJpZ2dlckV2ZW50KCdmb2N1c2luJywgZXZlbnQpO1xuICAgIH0pLm9uKCdmb2N1c291dCcsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnZm9jdXNvdXQnLCBldmVudCk7XG4gICAgfSk7XG5cbiAgICBpZiAoIXRoaXMub3B0aW9ucy5haXJNb2RlKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLndpZHRoKSB7XG4gICAgICAgIHRoaXMuJGVkaXRvci5vdXRlcldpZHRoKHRoaXMub3B0aW9ucy53aWR0aCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmhlaWdodCkge1xuICAgICAgICB0aGlzLiRlZGl0YWJsZS5vdXRlckhlaWdodCh0aGlzLm9wdGlvbnMuaGVpZ2h0KTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubWF4SGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuJGVkaXRhYmxlLmNzcygnbWF4LWhlaWdodCcsIHRoaXMub3B0aW9ucy5tYXhIZWlnaHQpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5taW5IZWlnaHQpIHtcbiAgICAgICAgdGhpcy4kZWRpdGFibGUuY3NzKCdtaW4taGVpZ2h0JywgdGhpcy5vcHRpb25zLm1pbkhlaWdodCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5oaXN0b3J5LnJlY29yZFVuZG8oKTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy4kZWRpdGFibGUub2ZmKCk7XG4gIH1cblxuICBoYW5kbGVLZXlNYXAoZXZlbnQpIHtcbiAgICBjb25zdCBrZXlNYXAgPSB0aGlzLm9wdGlvbnMua2V5TWFwW2Vudi5pc01hYyA/ICdtYWMnIDogJ3BjJ107XG4gICAgY29uc3Qga2V5cyA9IFtdO1xuXG4gICAgaWYgKGV2ZW50Lm1ldGFLZXkpIHsga2V5cy5wdXNoKCdDTUQnKTsgfVxuICAgIGlmIChldmVudC5jdHJsS2V5ICYmICFldmVudC5hbHRLZXkpIHsga2V5cy5wdXNoKCdDVFJMJyk7IH1cbiAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIHsga2V5cy5wdXNoKCdTSElGVCcpOyB9XG5cbiAgICBjb25zdCBrZXlOYW1lID0ga2V5Lm5hbWVGcm9tQ29kZVtldmVudC5rZXlDb2RlXTtcbiAgICBpZiAoa2V5TmFtZSkge1xuICAgICAga2V5cy5wdXNoKGtleU5hbWUpO1xuICAgIH1cblxuICAgIGNvbnN0IGV2ZW50TmFtZSA9IGtleU1hcFtrZXlzLmpvaW4oJysnKV07XG4gICAgaWYgKGV2ZW50TmFtZSkge1xuICAgICAgaWYgKHRoaXMuY29udGV4dC5pbnZva2UoZXZlbnROYW1lKSAhPT0gZmFsc2UpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGtleS5pc0VkaXQoZXZlbnQua2V5Q29kZSkpIHtcbiAgICAgIHRoaXMuYWZ0ZXJDb21tYW5kKCk7XG4gICAgfVxuICB9XG5cbiAgcHJldmVudERlZmF1bHRFZGl0YWJsZVNob3J0Q3V0cyhldmVudCkge1xuICAgIC8vIEIoQm9sZCwgNjYpIC8gSShJdGFsaWMsIDczKSAvIFUoVW5kZXJsaW5lLCA4NSlcbiAgICBpZiAoKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSkgJiZcbiAgICAgIGxpc3RzLmNvbnRhaW5zKFs2NiwgNzMsIDg1XSwgZXZlbnQua2V5Q29kZSkpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG5cbiAgaXNMaW1pdGVkKHBhZCwgZXZlbnQpIHtcbiAgICBwYWQgPSBwYWQgfHwgMDtcblxuICAgIGlmICh0eXBlb2YgZXZlbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoa2V5LmlzTW92ZShldmVudC5rZXlDb2RlKSB8fFxuICAgICAgICAgIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpIHx8XG4gICAgICAgICAgbGlzdHMuY29udGFpbnMoW2tleS5jb2RlLkJBQ0tTUEFDRSwga2V5LmNvZGUuREVMRVRFXSwgZXZlbnQua2V5Q29kZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdGlvbnMubWF4VGV4dExlbmd0aCA+IDApIHtcbiAgICAgIGlmICgodGhpcy4kZWRpdGFibGUudGV4dCgpLmxlbmd0aCArIHBhZCkgPj0gdGhpcy5vcHRpb25zLm1heFRleHRMZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogY3JlYXRlIHJhbmdlXG4gICAqIEByZXR1cm4ge1dyYXBwZWRSYW5nZX1cbiAgICovXG4gIGNyZWF0ZVJhbmdlKCkge1xuICAgIHRoaXMuZm9jdXMoKTtcbiAgICByZXR1cm4gcmFuZ2UuY3JlYXRlKHRoaXMuZWRpdGFibGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIHNhdmVSYW5nZVxuICAgKlxuICAgKiBzYXZlIGN1cnJlbnQgcmFuZ2VcbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufSBbdGhlbkNvbGxhcHNlPWZhbHNlXVxuICAgKi9cbiAgc2F2ZVJhbmdlKHRoZW5Db2xsYXBzZSkge1xuICAgIHRoaXMubGFzdFJhbmdlID0gdGhpcy5jcmVhdGVSYW5nZSgpO1xuICAgIGlmICh0aGVuQ29sbGFwc2UpIHtcbiAgICAgIHRoaXMubGFzdFJhbmdlLmNvbGxhcHNlKCkuc2VsZWN0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHJlc3RvcmVSYW5nZVxuICAgKlxuICAgKiByZXN0b3JlIGxhdGVseSByYW5nZVxuICAgKi9cbiAgcmVzdG9yZVJhbmdlKCkge1xuICAgIGlmICh0aGlzLmxhc3RSYW5nZSkge1xuICAgICAgdGhpcy5sYXN0UmFuZ2Uuc2VsZWN0KCk7XG4gICAgICB0aGlzLmZvY3VzKCk7XG4gICAgfVxuICB9XG5cbiAgc2F2ZVRhcmdldChub2RlKSB7XG4gICAgdGhpcy4kZWRpdGFibGUuZGF0YSgndGFyZ2V0Jywgbm9kZSk7XG4gIH1cblxuICBjbGVhclRhcmdldCgpIHtcbiAgICB0aGlzLiRlZGl0YWJsZS5yZW1vdmVEYXRhKCd0YXJnZXQnKTtcbiAgfVxuXG4gIHJlc3RvcmVUYXJnZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuJGVkaXRhYmxlLmRhdGEoJ3RhcmdldCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIGN1cnJlbnRTdHlsZVxuICAgKlxuICAgKiBjdXJyZW50IHN0eWxlXG4gICAqIEByZXR1cm4ge09iamVjdHxCb29sZWFufSB1bmZvY3VzXG4gICAqL1xuICBjdXJyZW50U3R5bGUoKSB7XG4gICAgbGV0IHJuZyA9IHJhbmdlLmNyZWF0ZSgpO1xuICAgIGlmIChybmcpIHtcbiAgICAgIHJuZyA9IHJuZy5ub3JtYWxpemUoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJuZyA/IHRoaXMuc3R5bGUuY3VycmVudChybmcpIDogdGhpcy5zdHlsZS5mcm9tTm9kZSh0aGlzLiRlZGl0YWJsZSk7XG4gIH1cblxuICAvKipcbiAgICogc3R5bGUgZnJvbSBub2RlXG4gICAqXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSAkbm9kZVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBzdHlsZUZyb21Ob2RlKCRub2RlKSB7XG4gICAgcmV0dXJuIHRoaXMuc3R5bGUuZnJvbU5vZGUoJG5vZGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIHVuZG9cbiAgICovXG4gIHVuZG8oKSB7XG4gICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnYmVmb3JlLmNvbW1hbmQnLCB0aGlzLiRlZGl0YWJsZS5odG1sKCkpO1xuICAgIHRoaXMuaGlzdG9yeS51bmRvKCk7XG4gICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnY2hhbmdlJywgdGhpcy4kZWRpdGFibGUuaHRtbCgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiByZWRvXG4gICAqL1xuICByZWRvKCkge1xuICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ2JlZm9yZS5jb21tYW5kJywgdGhpcy4kZWRpdGFibGUuaHRtbCgpKTtcbiAgICB0aGlzLmhpc3RvcnkucmVkbygpO1xuICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ2NoYW5nZScsIHRoaXMuJGVkaXRhYmxlLmh0bWwoKSk7XG4gIH1cblxuICAvKipcbiAgICogYmVmb3JlIGNvbW1hbmRcbiAgICovXG4gIGJlZm9yZUNvbW1hbmQoKSB7XG4gICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnYmVmb3JlLmNvbW1hbmQnLCB0aGlzLiRlZGl0YWJsZS5odG1sKCkpO1xuICAgIC8vIGtlZXAgZm9jdXMgb24gZWRpdGFibGUgYmVmb3JlIGNvbW1hbmQgZXhlY3V0aW9uXG4gICAgdGhpcy5mb2N1cygpO1xuICB9XG5cbiAgLyoqXG4gICAqIGFmdGVyIGNvbW1hbmRcbiAgICogQHBhcmFtIHtCb29sZWFufSBpc1ByZXZlbnRUcmlnZ2VyXG4gICAqL1xuICBhZnRlckNvbW1hbmQoaXNQcmV2ZW50VHJpZ2dlcikge1xuICAgIHRoaXMuaGlzdG9yeS5yZWNvcmRVbmRvKCk7XG4gICAgaWYgKCFpc1ByZXZlbnRUcmlnZ2VyKSB7XG4gICAgICB0aGlzLmNvbnRleHQudHJpZ2dlckV2ZW50KCdjaGFuZ2UnLCB0aGlzLiRlZGl0YWJsZS5odG1sKCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBoYW5kbGUgdGFiIGtleVxuICAgKi9cbiAgdGFiKCkge1xuICAgIGNvbnN0IHJuZyA9IHRoaXMuY3JlYXRlUmFuZ2UoKTtcbiAgICBpZiAocm5nLmlzQ29sbGFwc2VkKCkgJiYgcm5nLmlzT25DZWxsKCkpIHtcbiAgICAgIHRoaXMudGFibGUudGFiKHJuZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMudGFiU2l6ZSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5pc0xpbWl0ZWQodGhpcy5vcHRpb25zLnRhYlNpemUpKSB7XG4gICAgICAgIHRoaXMuYmVmb3JlQ29tbWFuZCgpO1xuICAgICAgICB0aGlzLnR5cGluZy5pbnNlcnRUYWIocm5nLCB0aGlzLm9wdGlvbnMudGFiU2l6ZSk7XG4gICAgICAgIHRoaXMuYWZ0ZXJDb21tYW5kKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGhhbmRsZSBzaGlmdCt0YWIga2V5XG4gICAqL1xuICB1bnRhYigpIHtcbiAgICBjb25zdCBybmcgPSB0aGlzLmNyZWF0ZVJhbmdlKCk7XG4gICAgaWYgKHJuZy5pc0NvbGxhcHNlZCgpICYmIHJuZy5pc09uQ2VsbCgpKSB7XG4gICAgICB0aGlzLnRhYmxlLnRhYihybmcsIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLnRhYlNpemUgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBydW4gZ2l2ZW4gZnVuY3Rpb24gYmV0d2VlbiBiZWZvcmVDb21tYW5kIGFuZCBhZnRlckNvbW1hbmRcbiAgICovXG4gIHdyYXBDb21tYW5kKGZuKSB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHRoaXMuYmVmb3JlQ29tbWFuZCgpO1xuICAgICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHRoaXMuYWZ0ZXJDb21tYW5kKCk7XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBpbnNlcnQgaW1hZ2VcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHNyY1xuICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gcGFyYW1cbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIGluc2VydEltYWdlKHNyYywgcGFyYW0pIHtcbiAgICByZXR1cm4gY3JlYXRlSW1hZ2Uoc3JjLCBwYXJhbSkudGhlbigoJGltYWdlKSA9PiB7XG4gICAgICB0aGlzLmJlZm9yZUNvbW1hbmQoKTtcblxuICAgICAgaWYgKHR5cGVvZiBwYXJhbSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBwYXJhbSgkaW1hZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwYXJhbSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAkaW1hZ2UuYXR0cignZGF0YS1maWxlbmFtZScsIHBhcmFtKTtcbiAgICAgICAgfVxuICAgICAgICAkaW1hZ2UuY3NzKCd3aWR0aCcsIE1hdGgubWluKHRoaXMuJGVkaXRhYmxlLndpZHRoKCksICRpbWFnZS53aWR0aCgpKSk7XG4gICAgICB9XG5cbiAgICAgICRpbWFnZS5zaG93KCk7XG4gICAgICByYW5nZS5jcmVhdGUodGhpcy5lZGl0YWJsZSkuaW5zZXJ0Tm9kZSgkaW1hZ2VbMF0pO1xuICAgICAgcmFuZ2UuY3JlYXRlRnJvbU5vZGVBZnRlcigkaW1hZ2VbMF0pLnNlbGVjdCgpO1xuICAgICAgdGhpcy5hZnRlckNvbW1hbmQoKTtcbiAgICB9KS5mYWlsKChlKSA9PiB7XG4gICAgICB0aGlzLmNvbnRleHQudHJpZ2dlckV2ZW50KCdpbWFnZS51cGxvYWQuZXJyb3InLCBlKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBpbnNlcnRJbWFnZXNcbiAgICogQHBhcmFtIHtGaWxlW119IGZpbGVzXG4gICAqL1xuICBpbnNlcnRJbWFnZXMoZmlsZXMpIHtcbiAgICAkLmVhY2goZmlsZXMsIChpZHgsIGZpbGUpID0+IHtcbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gZmlsZS5uYW1lO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5tYXhpbXVtSW1hZ2VGaWxlU2l6ZSAmJiB0aGlzLm9wdGlvbnMubWF4aW11bUltYWdlRmlsZVNpemUgPCBmaWxlLnNpemUpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnaW1hZ2UudXBsb2FkLmVycm9yJywgdGhpcy5sYW5nLmltYWdlLm1heGltdW1GaWxlU2l6ZUVycm9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlYWRGaWxlQXNEYXRhVVJMKGZpbGUpLnRoZW4oKGRhdGFVUkwpID0+IHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5pbnNlcnRJbWFnZShkYXRhVVJMLCBmaWxlbmFtZSk7XG4gICAgICAgIH0pLmZhaWwoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ2ltYWdlLnVwbG9hZC5lcnJvcicpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBpbnNlcnRJbWFnZXNPckNhbGxiYWNrXG4gICAqIEBwYXJhbSB7RmlsZVtdfSBmaWxlc1xuICAgKi9cbiAgaW5zZXJ0SW1hZ2VzT3JDYWxsYmFjayhmaWxlcykge1xuICAgIGNvbnN0IGNhbGxiYWNrcyA9IHRoaXMub3B0aW9ucy5jYWxsYmFja3M7XG5cbiAgICAvLyBJZiBvbkltYWdlVXBsb2FkIHRoaXMub3B0aW9ucyBzZXR0ZWRcbiAgICBpZiAoY2FsbGJhY2tzLm9uSW1hZ2VVcGxvYWQpIHtcbiAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ2ltYWdlLnVwbG9hZCcsIGZpbGVzKTtcbiAgICAgIC8vIGVsc2UgaW5zZXJ0IEltYWdlIGFzIGRhdGFVUkxcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pbnNlcnRJbWFnZXMoZmlsZXMpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiByZXR1cm4gc2VsZWN0ZWQgcGxhaW4gdGV4dFxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IHRleHRcbiAgICovXG4gIGdldFNlbGVjdGVkVGV4dCgpIHtcbiAgICBsZXQgcm5nID0gdGhpcy5jcmVhdGVSYW5nZSgpO1xuXG4gICAgLy8gaWYgcmFuZ2Ugb24gYW5jaG9yLCBleHBhbmQgcmFuZ2Ugd2l0aCBhbmNob3JcbiAgICBpZiAocm5nLmlzT25BbmNob3IoKSkge1xuICAgICAgcm5nID0gcmFuZ2UuY3JlYXRlRnJvbU5vZGUoZG9tLmFuY2VzdG9yKHJuZy5zYywgZG9tLmlzQW5jaG9yKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJuZy50b1N0cmluZygpO1xuICB9XG5cbiAgb25Gb3JtYXRCbG9jayh0YWdOYW1lLCAkdGFyZ2V0KSB7XG4gICAgLy8gW3dvcmthcm91bmRdIGZvciBNU0lFLCBJRSBuZWVkIGA8YFxuICAgIHRhZ05hbWUgPSBlbnYuaXNNU0lFID8gJzwnICsgdGFnTmFtZSArICc+JyA6IHRhZ05hbWU7XG4gICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ0Zvcm1hdEJsb2NrJywgZmFsc2UsIHRhZ05hbWUpO1xuXG4gICAgLy8gc3VwcG9ydCBjdXN0b20gY2xhc3NcbiAgICBpZiAoJHRhcmdldCAmJiAkdGFyZ2V0Lmxlbmd0aCkge1xuICAgICAgY29uc3QgY2xhc3NOYW1lID0gJHRhcmdldFswXS5jbGFzc05hbWUgfHwgJyc7XG4gICAgICBpZiAoY2xhc3NOYW1lKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRSYW5nZSA9IHRoaXMuY3JlYXRlUmFuZ2UoKTtcblxuICAgICAgICBjb25zdCAkcGFyZW50ID0gJChbY3VycmVudFJhbmdlLnNjLCBjdXJyZW50UmFuZ2UuZWNdKS5jbG9zZXN0KHRhZ05hbWUpO1xuICAgICAgICAkcGFyZW50LmFkZENsYXNzKGNsYXNzTmFtZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZm9ybWF0UGFyYSgpIHtcbiAgICB0aGlzLmZvcm1hdEJsb2NrKCdQJyk7XG4gIH1cblxuICBmb250U3R5bGluZyh0YXJnZXQsIHZhbHVlKSB7XG4gICAgY29uc3Qgcm5nID0gdGhpcy5jcmVhdGVSYW5nZSgpO1xuXG4gICAgaWYgKHJuZykge1xuICAgICAgY29uc3Qgc3BhbnMgPSB0aGlzLnN0eWxlLnN0eWxlTm9kZXMocm5nKTtcbiAgICAgICQoc3BhbnMpLmNzcyh0YXJnZXQsIHZhbHVlKTtcblxuICAgICAgLy8gW3dvcmthcm91bmRdIGFkZGVkIHN0eWxlZCBib2d1cyBzcGFuIGZvciBzdHlsZVxuICAgICAgLy8gIC0gYWxzbyBib2d1cyBjaGFyYWN0ZXIgbmVlZGVkIGZvciBjdXJzb3IgcG9zaXRpb25cbiAgICAgIGlmIChybmcuaXNDb2xsYXBzZWQoKSkge1xuICAgICAgICBjb25zdCBmaXJzdFNwYW4gPSBsaXN0cy5oZWFkKHNwYW5zKTtcbiAgICAgICAgaWYgKGZpcnN0U3BhbiAmJiAhZG9tLm5vZGVMZW5ndGgoZmlyc3RTcGFuKSkge1xuICAgICAgICAgIGZpcnN0U3Bhbi5pbm5lckhUTUwgPSBkb20uWkVST19XSURUSF9OQlNQX0NIQVI7XG4gICAgICAgICAgcmFuZ2UuY3JlYXRlRnJvbU5vZGVBZnRlcihmaXJzdFNwYW4uZmlyc3RDaGlsZCkuc2VsZWN0KCk7XG4gICAgICAgICAgdGhpcy4kZWRpdGFibGUuZGF0YShLRVlfQk9HVVMsIGZpcnN0U3Bhbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogdW5saW5rXG4gICAqXG4gICAqIEB0eXBlIGNvbW1hbmRcbiAgICovXG4gIHVubGluaygpIHtcbiAgICBsZXQgcm5nID0gdGhpcy5jcmVhdGVSYW5nZSgpO1xuICAgIGlmIChybmcuaXNPbkFuY2hvcigpKSB7XG4gICAgICBjb25zdCBhbmNob3IgPSBkb20uYW5jZXN0b3Iocm5nLnNjLCBkb20uaXNBbmNob3IpO1xuICAgICAgcm5nID0gcmFuZ2UuY3JlYXRlRnJvbU5vZGUoYW5jaG9yKTtcbiAgICAgIHJuZy5zZWxlY3QoKTtcblxuICAgICAgdGhpcy5iZWZvcmVDb21tYW5kKCk7XG4gICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgndW5saW5rJyk7XG4gICAgICB0aGlzLmFmdGVyQ29tbWFuZCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiByZXR1cm5zIGxpbmsgaW5mb1xuICAgKlxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqIEByZXR1cm4ge1dyYXBwZWRSYW5nZX0gcmV0dXJuLnJhbmdlXG4gICAqIEByZXR1cm4ge1N0cmluZ30gcmV0dXJuLnRleHRcbiAgICogQHJldHVybiB7Qm9vbGVhbn0gW3JldHVybi5pc05ld1dpbmRvdz10cnVlXVxuICAgKiBAcmV0dXJuIHtTdHJpbmd9IFtyZXR1cm4udXJsPVwiXCJdXG4gICAqL1xuICBnZXRMaW5rSW5mbygpIHtcbiAgICBjb25zdCBybmcgPSB0aGlzLmNyZWF0ZVJhbmdlKCkuZXhwYW5kKGRvbS5pc0FuY2hvcik7XG5cbiAgICAvLyBHZXQgdGhlIGZpcnN0IGFuY2hvciBvbiByYW5nZShmb3IgZWRpdCkuXG4gICAgY29uc3QgJGFuY2hvciA9ICQobGlzdHMuaGVhZChybmcubm9kZXMoZG9tLmlzQW5jaG9yKSkpO1xuICAgIGNvbnN0IGxpbmtJbmZvID0ge1xuICAgICAgcmFuZ2U6IHJuZyxcbiAgICAgIHRleHQ6IHJuZy50b1N0cmluZygpLFxuICAgICAgdXJsOiAkYW5jaG9yLmxlbmd0aCA/ICRhbmNob3IuYXR0cignaHJlZicpIDogJydcbiAgICB9O1xuXG4gICAgLy8gRGVmaW5lIGlzTmV3V2luZG93IHdoZW4gYW5jaG9yIGV4aXN0cy5cbiAgICBpZiAoJGFuY2hvci5sZW5ndGgpIHtcbiAgICAgIGxpbmtJbmZvLmlzTmV3V2luZG93ID0gJGFuY2hvci5hdHRyKCd0YXJnZXQnKSA9PT0gJ19ibGFuayc7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmtJbmZvO1xuICB9XG5cbiAgYWRkUm93KHBvc2l0aW9uKSB7XG4gICAgY29uc3Qgcm5nID0gdGhpcy5jcmVhdGVSYW5nZSh0aGlzLiRlZGl0YWJsZSk7XG4gICAgaWYgKHJuZy5pc0NvbGxhcHNlZCgpICYmIHJuZy5pc09uQ2VsbCgpKSB7XG4gICAgICB0aGlzLmJlZm9yZUNvbW1hbmQoKTtcbiAgICAgIHRoaXMudGFibGUuYWRkUm93KHJuZywgcG9zaXRpb24pO1xuICAgICAgdGhpcy5hZnRlckNvbW1hbmQoKTtcbiAgICB9XG4gIH1cblxuICBhZGRDb2wocG9zaXRpb24pIHtcbiAgICBjb25zdCBybmcgPSB0aGlzLmNyZWF0ZVJhbmdlKHRoaXMuJGVkaXRhYmxlKTtcbiAgICBpZiAocm5nLmlzQ29sbGFwc2VkKCkgJiYgcm5nLmlzT25DZWxsKCkpIHtcbiAgICAgIHRoaXMuYmVmb3JlQ29tbWFuZCgpO1xuICAgICAgdGhpcy50YWJsZS5hZGRDb2wocm5nLCBwb3NpdGlvbik7XG4gICAgICB0aGlzLmFmdGVyQ29tbWFuZCgpO1xuICAgIH1cbiAgfVxuXG4gIGRlbGV0ZVJvdygpIHtcbiAgICBjb25zdCBybmcgPSB0aGlzLmNyZWF0ZVJhbmdlKHRoaXMuJGVkaXRhYmxlKTtcbiAgICBpZiAocm5nLmlzQ29sbGFwc2VkKCkgJiYgcm5nLmlzT25DZWxsKCkpIHtcbiAgICAgIHRoaXMuYmVmb3JlQ29tbWFuZCgpO1xuICAgICAgdGhpcy50YWJsZS5kZWxldGVSb3cocm5nKTtcbiAgICAgIHRoaXMuYWZ0ZXJDb21tYW5kKCk7XG4gICAgfVxuICB9XG5cbiAgZGVsZXRlQ29sKCkge1xuICAgIGNvbnN0IHJuZyA9IHRoaXMuY3JlYXRlUmFuZ2UodGhpcy4kZWRpdGFibGUpO1xuICAgIGlmIChybmcuaXNDb2xsYXBzZWQoKSAmJiBybmcuaXNPbkNlbGwoKSkge1xuICAgICAgdGhpcy5iZWZvcmVDb21tYW5kKCk7XG4gICAgICB0aGlzLnRhYmxlLmRlbGV0ZUNvbChybmcpO1xuICAgICAgdGhpcy5hZnRlckNvbW1hbmQoKTtcbiAgICB9XG4gIH1cblxuICBkZWxldGVUYWJsZSgpIHtcbiAgICBjb25zdCBybmcgPSB0aGlzLmNyZWF0ZVJhbmdlKHRoaXMuJGVkaXRhYmxlKTtcbiAgICBpZiAocm5nLmlzQ29sbGFwc2VkKCkgJiYgcm5nLmlzT25DZWxsKCkpIHtcbiAgICAgIHRoaXMuYmVmb3JlQ29tbWFuZCgpO1xuICAgICAgdGhpcy50YWJsZS5kZWxldGVUYWJsZShybmcpO1xuICAgICAgdGhpcy5hZnRlckNvbW1hbmQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtQb3NpdGlvbn0gcG9zXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSAkdGFyZ2V0IC0gdGFyZ2V0IGVsZW1lbnRcbiAgICogQHBhcmFtIHtCb29sZWFufSBbYktlZXBSYXRpb10gLSBrZWVwIHJhdGlvXG4gICAqL1xuICByZXNpemVUbyhwb3MsICR0YXJnZXQsIGJLZWVwUmF0aW8pIHtcbiAgICBsZXQgaW1hZ2VTaXplO1xuICAgIGlmIChiS2VlcFJhdGlvKSB7XG4gICAgICBjb25zdCBuZXdSYXRpbyA9IHBvcy55IC8gcG9zLng7XG4gICAgICBjb25zdCByYXRpbyA9ICR0YXJnZXQuZGF0YSgncmF0aW8nKTtcbiAgICAgIGltYWdlU2l6ZSA9IHtcbiAgICAgICAgd2lkdGg6IHJhdGlvID4gbmV3UmF0aW8gPyBwb3MueCA6IHBvcy55IC8gcmF0aW8sXG4gICAgICAgIGhlaWdodDogcmF0aW8gPiBuZXdSYXRpbyA/IHBvcy54ICogcmF0aW8gOiBwb3MueVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW1hZ2VTaXplID0ge1xuICAgICAgICB3aWR0aDogcG9zLngsXG4gICAgICAgIGhlaWdodDogcG9zLnlcbiAgICAgIH07XG4gICAgfVxuXG4gICAgJHRhcmdldC5jc3MoaW1hZ2VTaXplKTtcbiAgfVxuXG4gIC8qKlxuICAgKiByZXR1cm5zIHdoZXRoZXIgZWRpdGFibGUgYXJlYSBoYXMgZm9jdXMgb3Igbm90LlxuICAgKi9cbiAgaGFzRm9jdXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuJGVkaXRhYmxlLmlzKCc6Zm9jdXMnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBzZXQgZm9jdXNcbiAgICovXG4gIGZvY3VzKCkge1xuICAgIC8vIFt3b3JrYXJvdW5kXSBTY3JlZW4gd2lsbCBtb3ZlIHdoZW4gcGFnZSBpcyBzY29sbGVkIGluIElFLlxuICAgIC8vICAtIGRvIGZvY3VzIHdoZW4gbm90IGZvY3VzZWRcbiAgICBpZiAoIXRoaXMuaGFzRm9jdXMoKSkge1xuICAgICAgdGhpcy4kZWRpdGFibGUuZm9jdXMoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogcmV0dXJucyB3aGV0aGVyIGNvbnRlbnRzIGlzIGVtcHR5IG9yIG5vdC5cbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG4gIGlzRW1wdHkoKSB7XG4gICAgcmV0dXJuIGRvbS5pc0VtcHR5KHRoaXMuJGVkaXRhYmxlWzBdKSB8fCBkb20uZW1wdHlQYXJhID09PSB0aGlzLiRlZGl0YWJsZS5odG1sKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgY29udGVudHMgYW5kIHJlc3RvcmVzIHRoZSBlZGl0YWJsZSBpbnN0YW5jZSB0byBhbiBfZW1wdHlQYXJhXy5cbiAgICovXG4gIGVtcHR5KCkge1xuICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2NvZGUnLCBkb20uZW1wdHlQYXJhKTtcbiAgfVxufVxuIiwiaW1wb3J0IGxpc3RzIGZyb20gJy4uL2NvcmUvbGlzdHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDbGlwYm9hcmQge1xuICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7XG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICB0aGlzLiRlZGl0YWJsZSA9IGNvbnRleHQubGF5b3V0SW5mby5lZGl0YWJsZTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy4kZWRpdGFibGUub24oJ3Bhc3RlJywgdGhpcy5wYXN0ZUJ5RXZlbnQuYmluZCh0aGlzKSk7XG4gIH1cblxuICAvKipcbiAgICogcGFzdGUgYnkgY2xpcGJvYXJkIGV2ZW50XG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gICAqL1xuICBwYXN0ZUJ5RXZlbnQoZXZlbnQpIHtcbiAgICBjb25zdCBjbGlwYm9hcmREYXRhID0gZXZlbnQub3JpZ2luYWxFdmVudC5jbGlwYm9hcmREYXRhO1xuICAgIGlmIChjbGlwYm9hcmREYXRhICYmIGNsaXBib2FyZERhdGEuaXRlbXMgJiYgY2xpcGJvYXJkRGF0YS5pdGVtcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBsaXN0cy5oZWFkKGNsaXBib2FyZERhdGEuaXRlbXMpO1xuICAgICAgaWYgKGl0ZW0ua2luZCA9PT0gJ2ZpbGUnICYmIGl0ZW0udHlwZS5pbmRleE9mKCdpbWFnZS8nKSAhPT0gLTEpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLmluc2VydEltYWdlc09yQ2FsbGJhY2snLCBbaXRlbS5nZXRBc0ZpbGUoKV0pO1xuICAgICAgfVxuICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLmFmdGVyQ29tbWFuZCcpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJvcHpvbmUge1xuICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7XG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICB0aGlzLiRldmVudExpc3RlbmVyID0gJChkb2N1bWVudCk7XG4gICAgdGhpcy4kZWRpdG9yID0gY29udGV4dC5sYXlvdXRJbmZvLmVkaXRvcjtcbiAgICB0aGlzLiRlZGl0YWJsZSA9IGNvbnRleHQubGF5b3V0SW5mby5lZGl0YWJsZTtcbiAgICB0aGlzLm9wdGlvbnMgPSBjb250ZXh0Lm9wdGlvbnM7XG4gICAgdGhpcy5sYW5nID0gdGhpcy5vcHRpb25zLmxhbmdJbmZvO1xuICAgIHRoaXMuZG9jdW1lbnRFdmVudEhhbmRsZXJzID0ge307XG5cbiAgICB0aGlzLiRkcm9wem9uZSA9ICQoW1xuICAgICAgJzxkaXYgY2xhc3M9XCJub3RlLWRyb3B6b25lXCI+JyxcbiAgICAgICcgIDxkaXYgY2xhc3M9XCJub3RlLWRyb3B6b25lLW1lc3NhZ2VcIi8+JyxcbiAgICAgICc8L2Rpdj4nXG4gICAgXS5qb2luKCcnKSkucHJlcGVuZFRvKHRoaXMuJGVkaXRvcik7XG4gIH1cblxuICAvKipcbiAgICogYXR0YWNoIERyYWcgYW5kIERyb3AgRXZlbnRzXG4gICAqL1xuICBpbml0aWFsaXplKCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMuZGlzYWJsZURyYWdBbmREcm9wKSB7XG4gICAgICAvLyBwcmV2ZW50IGRlZmF1bHQgZHJvcCBldmVudFxuICAgICAgdGhpcy5kb2N1bWVudEV2ZW50SGFuZGxlcnMub25Ecm9wID0gKGUpID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfTtcbiAgICAgIC8vIGRvIG5vdCBjb25zaWRlciBvdXRzaWRlIG9mIGRyb3B6b25lXG4gICAgICB0aGlzLiRldmVudExpc3RlbmVyID0gdGhpcy4kZHJvcHpvbmU7XG4gICAgICB0aGlzLiRldmVudExpc3RlbmVyLm9uKCdkcm9wJywgdGhpcy5kb2N1bWVudEV2ZW50SGFuZGxlcnMub25Ecm9wKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hdHRhY2hEcmFnQW5kRHJvcEV2ZW50KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGF0dGFjaCBEcmFnIGFuZCBEcm9wIEV2ZW50c1xuICAgKi9cbiAgYXR0YWNoRHJhZ0FuZERyb3BFdmVudCgpIHtcbiAgICBsZXQgY29sbGVjdGlvbiA9ICQoKTtcbiAgICBjb25zdCAkZHJvcHpvbmVNZXNzYWdlID0gdGhpcy4kZHJvcHpvbmUuZmluZCgnLm5vdGUtZHJvcHpvbmUtbWVzc2FnZScpO1xuXG4gICAgdGhpcy5kb2N1bWVudEV2ZW50SGFuZGxlcnMub25EcmFnZW50ZXIgPSAoZSkgPT4ge1xuICAgICAgY29uc3QgaXNDb2RldmlldyA9IHRoaXMuY29udGV4dC5pbnZva2UoJ2NvZGV2aWV3LmlzQWN0aXZhdGVkJyk7XG4gICAgICBjb25zdCBoYXNFZGl0b3JTaXplID0gdGhpcy4kZWRpdG9yLndpZHRoKCkgPiAwICYmIHRoaXMuJGVkaXRvci5oZWlnaHQoKSA+IDA7XG4gICAgICBpZiAoIWlzQ29kZXZpZXcgJiYgIWNvbGxlY3Rpb24ubGVuZ3RoICYmIGhhc0VkaXRvclNpemUpIHtcbiAgICAgICAgdGhpcy4kZWRpdG9yLmFkZENsYXNzKCdkcmFnb3ZlcicpO1xuICAgICAgICB0aGlzLiRkcm9wem9uZS53aWR0aCh0aGlzLiRlZGl0b3Iud2lkdGgoKSk7XG4gICAgICAgIHRoaXMuJGRyb3B6b25lLmhlaWdodCh0aGlzLiRlZGl0b3IuaGVpZ2h0KCkpO1xuICAgICAgICAkZHJvcHpvbmVNZXNzYWdlLnRleHQodGhpcy5sYW5nLmltYWdlLmRyYWdJbWFnZUhlcmUpO1xuICAgICAgfVxuICAgICAgY29sbGVjdGlvbiA9IGNvbGxlY3Rpb24uYWRkKGUudGFyZ2V0KTtcbiAgICB9O1xuXG4gICAgdGhpcy5kb2N1bWVudEV2ZW50SGFuZGxlcnMub25EcmFnbGVhdmUgPSAoZSkgPT4ge1xuICAgICAgY29sbGVjdGlvbiA9IGNvbGxlY3Rpb24ubm90KGUudGFyZ2V0KTtcbiAgICAgIGlmICghY29sbGVjdGlvbi5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy4kZWRpdG9yLnJlbW92ZUNsYXNzKCdkcmFnb3ZlcicpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmRvY3VtZW50RXZlbnRIYW5kbGVycy5vbkRyb3AgPSAoKSA9PiB7XG4gICAgICBjb2xsZWN0aW9uID0gJCgpO1xuICAgICAgdGhpcy4kZWRpdG9yLnJlbW92ZUNsYXNzKCdkcmFnb3ZlcicpO1xuICAgIH07XG5cbiAgICAvLyBzaG93IGRyb3B6b25lIG9uIGRyYWdlbnRlciB3aGVuIGRyYWdnaW5nIGEgb2JqZWN0IHRvIGRvY3VtZW50XG4gICAgLy8gLWJ1dCBvbmx5IGlmIHRoZSBlZGl0b3IgaXMgdmlzaWJsZSwgaS5lLiBoYXMgYSBwb3NpdGl2ZSB3aWR0aCBhbmQgaGVpZ2h0XG4gICAgdGhpcy4kZXZlbnRMaXN0ZW5lci5vbignZHJhZ2VudGVyJywgdGhpcy5kb2N1bWVudEV2ZW50SGFuZGxlcnMub25EcmFnZW50ZXIpXG4gICAgICAub24oJ2RyYWdsZWF2ZScsIHRoaXMuZG9jdW1lbnRFdmVudEhhbmRsZXJzLm9uRHJhZ2xlYXZlKVxuICAgICAgLm9uKCdkcm9wJywgdGhpcy5kb2N1bWVudEV2ZW50SGFuZGxlcnMub25Ecm9wKTtcblxuICAgIC8vIGNoYW5nZSBkcm9wem9uZSdzIG1lc3NhZ2Ugb24gaG92ZXIuXG4gICAgdGhpcy4kZHJvcHpvbmUub24oJ2RyYWdlbnRlcicsICgpID0+IHtcbiAgICAgIHRoaXMuJGRyb3B6b25lLmFkZENsYXNzKCdob3ZlcicpO1xuICAgICAgJGRyb3B6b25lTWVzc2FnZS50ZXh0KHRoaXMubGFuZy5pbWFnZS5kcm9wSW1hZ2UpO1xuICAgIH0pLm9uKCdkcmFnbGVhdmUnLCAoKSA9PiB7XG4gICAgICB0aGlzLiRkcm9wem9uZS5yZW1vdmVDbGFzcygnaG92ZXInKTtcbiAgICAgICRkcm9wem9uZU1lc3NhZ2UudGV4dCh0aGlzLmxhbmcuaW1hZ2UuZHJhZ0ltYWdlSGVyZSk7XG4gICAgfSk7XG5cbiAgICAvLyBhdHRhY2ggZHJvcEltYWdlXG4gICAgdGhpcy4kZHJvcHpvbmUub24oJ2Ryb3AnLCAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IGRhdGFUcmFuc2ZlciA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyO1xuXG4gICAgICAvLyBzdG9wIHRoZSBicm93c2VyIGZyb20gb3BlbmluZyB0aGUgZHJvcHBlZCBjb250ZW50XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICBpZiAoZGF0YVRyYW5zZmVyICYmIGRhdGFUcmFuc2Zlci5maWxlcyAmJiBkYXRhVHJhbnNmZXIuZmlsZXMubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuJGVkaXRhYmxlLmZvY3VzKCk7XG4gICAgICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5pbnNlcnRJbWFnZXNPckNhbGxiYWNrJywgZGF0YVRyYW5zZmVyLmZpbGVzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQuZWFjaChkYXRhVHJhbnNmZXIudHlwZXMsIChpZHgsIHR5cGUpID0+IHtcbiAgICAgICAgICBjb25zdCBjb250ZW50ID0gZGF0YVRyYW5zZmVyLmdldERhdGEodHlwZSk7XG5cbiAgICAgICAgICBpZiAodHlwZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ3RleHQnKSA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3IucGFzdGVIVE1MJywgY29udGVudCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoY29udGVudCkuZWFjaCgoaWR4LCBpdGVtKSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5pbnNlcnROb2RlJywgaXRlbSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pLm9uKCdkcmFnb3ZlcicsIGZhbHNlKTsgLy8gcHJldmVudCBkZWZhdWx0IGRyYWdvdmVyIGV2ZW50XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIE9iamVjdC5rZXlzKHRoaXMuZG9jdW1lbnRFdmVudEhhbmRsZXJzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIHRoaXMuJGV2ZW50TGlzdGVuZXIub2ZmKGtleS5zdWJzdHIoMikudG9Mb3dlckNhc2UoKSwgdGhpcy5kb2N1bWVudEV2ZW50SGFuZGxlcnNba2V5XSk7XG4gICAgfSk7XG4gICAgdGhpcy5kb2N1bWVudEV2ZW50SGFuZGxlcnMgPSB7fTtcbiAgfVxufVxuIiwiaW1wb3J0IGVudiBmcm9tICcuLi9jb3JlL2Vudic7XG5pbXBvcnQgZG9tIGZyb20gJy4uL2NvcmUvZG9tJztcblxubGV0IENvZGVNaXJyb3I7XG5pZiAoZW52Lmhhc0NvZGVNaXJyb3IpIHtcbiAgaWYgKGVudi5pc1N1cHBvcnRBbWQpIHtcbiAgICByZXF1aXJlKFsnY29kZW1pcnJvciddLCBmdW5jdGlvbihjbSkge1xuICAgICAgQ29kZU1pcnJvciA9IGNtO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIENvZGVNaXJyb3IgPSB3aW5kb3cuQ29kZU1pcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIEBjbGFzcyBDb2Rldmlld1xuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb2RlVmlldyB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIHRoaXMuJGVkaXRvciA9IGNvbnRleHQubGF5b3V0SW5mby5lZGl0b3I7XG4gICAgdGhpcy4kZWRpdGFibGUgPSBjb250ZXh0LmxheW91dEluZm8uZWRpdGFibGU7XG4gICAgdGhpcy4kY29kYWJsZSA9IGNvbnRleHQubGF5b3V0SW5mby5jb2RhYmxlO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcbiAgfVxuXG4gIHN5bmMoKSB7XG4gICAgY29uc3QgaXNDb2RldmlldyA9IHRoaXMuaXNBY3RpdmF0ZWQoKTtcbiAgICBpZiAoaXNDb2RldmlldyAmJiBlbnYuaGFzQ29kZU1pcnJvcikge1xuICAgICAgdGhpcy4kY29kYWJsZS5kYXRhKCdjbUVkaXRvcicpLnNhdmUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG4gIGlzQWN0aXZhdGVkKCkge1xuICAgIHJldHVybiB0aGlzLiRlZGl0b3IuaGFzQ2xhc3MoJ2NvZGV2aWV3Jyk7XG4gIH1cblxuICAvKipcbiAgICogdG9nZ2xlIGNvZGV2aWV3XG4gICAqL1xuICB0b2dnbGUoKSB7XG4gICAgaWYgKHRoaXMuaXNBY3RpdmF0ZWQoKSkge1xuICAgICAgdGhpcy5kZWFjdGl2YXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYWN0aXZhdGUoKTtcbiAgICB9XG4gICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnY29kZXZpZXcudG9nZ2xlZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIGFjdGl2YXRlIGNvZGUgdmlld1xuICAgKi9cbiAgYWN0aXZhdGUoKSB7XG4gICAgdGhpcy4kY29kYWJsZS52YWwoZG9tLmh0bWwodGhpcy4kZWRpdGFibGUsIHRoaXMub3B0aW9ucy5wcmV0dGlmeUh0bWwpKTtcbiAgICB0aGlzLiRjb2RhYmxlLmhlaWdodCh0aGlzLiRlZGl0YWJsZS5oZWlnaHQoKSk7XG5cbiAgICB0aGlzLmNvbnRleHQuaW52b2tlKCd0b29sYmFyLnVwZGF0ZUNvZGV2aWV3JywgdHJ1ZSk7XG4gICAgdGhpcy4kZWRpdG9yLmFkZENsYXNzKCdjb2RldmlldycpO1xuICAgIHRoaXMuJGNvZGFibGUuZm9jdXMoKTtcblxuICAgIC8vIGFjdGl2YXRlIENvZGVNaXJyb3IgYXMgY29kYWJsZVxuICAgIGlmIChlbnYuaGFzQ29kZU1pcnJvcikge1xuICAgICAgY29uc3QgY21FZGl0b3IgPSBDb2RlTWlycm9yLmZyb21UZXh0QXJlYSh0aGlzLiRjb2RhYmxlWzBdLCB0aGlzLm9wdGlvbnMuY29kZW1pcnJvcik7XG5cbiAgICAgIC8vIENvZGVNaXJyb3IgVGVyblNlcnZlclxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5jb2RlbWlycm9yLnRlcm4pIHtcbiAgICAgICAgY29uc3Qgc2VydmVyID0gbmV3IENvZGVNaXJyb3IuVGVyblNlcnZlcih0aGlzLm9wdGlvbnMuY29kZW1pcnJvci50ZXJuKTtcbiAgICAgICAgY21FZGl0b3IudGVyblNlcnZlciA9IHNlcnZlcjtcbiAgICAgICAgY21FZGl0b3Iub24oJ2N1cnNvckFjdGl2aXR5JywgKGNtKSA9PiB7XG4gICAgICAgICAgc2VydmVyLnVwZGF0ZUFyZ0hpbnRzKGNtKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNtRWRpdG9yLm9uKCdibHVyJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ2JsdXIuY29kZXZpZXcnLCBjbUVkaXRvci5nZXRWYWx1ZSgpLCBldmVudCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQ29kZU1pcnJvciBoYXNuJ3QgUGFkZGluZy5cbiAgICAgIGNtRWRpdG9yLnNldFNpemUobnVsbCwgdGhpcy4kZWRpdGFibGUub3V0ZXJIZWlnaHQoKSk7XG4gICAgICB0aGlzLiRjb2RhYmxlLmRhdGEoJ2NtRWRpdG9yJywgY21FZGl0b3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRjb2RhYmxlLm9uKCdibHVyJywgKGV2ZW50KSA9PiB7XG4gICAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ2JsdXIuY29kZXZpZXcnLCB0aGlzLiRjb2RhYmxlLnZhbCgpLCBldmVudCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogZGVhY3RpdmF0ZSBjb2RlIHZpZXdcbiAgICovXG4gIGRlYWN0aXZhdGUoKSB7XG4gICAgLy8gZGVhY3RpdmF0ZSBDb2RlTWlycm9yIGFzIGNvZGFibGVcbiAgICBpZiAoZW52Lmhhc0NvZGVNaXJyb3IpIHtcbiAgICAgIGNvbnN0IGNtRWRpdG9yID0gdGhpcy4kY29kYWJsZS5kYXRhKCdjbUVkaXRvcicpO1xuICAgICAgdGhpcy4kY29kYWJsZS52YWwoY21FZGl0b3IuZ2V0VmFsdWUoKSk7XG4gICAgICBjbUVkaXRvci50b1RleHRBcmVhKCk7XG4gICAgfVxuXG4gICAgY29uc3QgdmFsdWUgPSBkb20udmFsdWUodGhpcy4kY29kYWJsZSwgdGhpcy5vcHRpb25zLnByZXR0aWZ5SHRtbCkgfHwgZG9tLmVtcHR5UGFyYTtcbiAgICBjb25zdCBpc0NoYW5nZSA9IHRoaXMuJGVkaXRhYmxlLmh0bWwoKSAhPT0gdmFsdWU7XG5cbiAgICB0aGlzLiRlZGl0YWJsZS5odG1sKHZhbHVlKTtcbiAgICB0aGlzLiRlZGl0YWJsZS5oZWlnaHQodGhpcy5vcHRpb25zLmhlaWdodCA/IHRoaXMuJGNvZGFibGUuaGVpZ2h0KCkgOiAnYXV0bycpO1xuICAgIHRoaXMuJGVkaXRvci5yZW1vdmVDbGFzcygnY29kZXZpZXcnKTtcblxuICAgIGlmIChpc0NoYW5nZSkge1xuICAgICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnY2hhbmdlJywgdGhpcy4kZWRpdGFibGUuaHRtbCgpLCB0aGlzLiRlZGl0YWJsZSk7XG4gICAgfVxuXG4gICAgdGhpcy4kZWRpdGFibGUuZm9jdXMoKTtcblxuICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ3Rvb2xiYXIudXBkYXRlQ29kZXZpZXcnLCBmYWxzZSk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIGlmICh0aGlzLmlzQWN0aXZhdGVkKCkpIHtcbiAgICAgIHRoaXMuZGVhY3RpdmF0ZSgpO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmNvbnN0IEVESVRBQkxFX1BBRERJTkcgPSAyNDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RhdHVzYmFyIHtcbiAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgIHRoaXMuJGRvY3VtZW50ID0gJChkb2N1bWVudCk7XG4gICAgdGhpcy4kc3RhdHVzYmFyID0gY29udGV4dC5sYXlvdXRJbmZvLnN0YXR1c2JhcjtcbiAgICB0aGlzLiRlZGl0YWJsZSA9IGNvbnRleHQubGF5b3V0SW5mby5lZGl0YWJsZTtcbiAgICB0aGlzLm9wdGlvbnMgPSBjb250ZXh0Lm9wdGlvbnM7XG4gIH1cblxuICBpbml0aWFsaXplKCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMuYWlyTW9kZSB8fCB0aGlzLm9wdGlvbnMuZGlzYWJsZVJlc2l6ZUVkaXRvcikge1xuICAgICAgdGhpcy5kZXN0cm95KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy4kc3RhdHVzYmFyLm9uKCdtb3VzZWRvd24nLCAoZXZlbnQpID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgY29uc3QgZWRpdGFibGVUb3AgPSB0aGlzLiRlZGl0YWJsZS5vZmZzZXQoKS50b3AgLSB0aGlzLiRkb2N1bWVudC5zY3JvbGxUb3AoKTtcbiAgICAgIGNvbnN0IG9uTW91c2VNb3ZlID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGxldCBoZWlnaHQgPSBldmVudC5jbGllbnRZIC0gKGVkaXRhYmxlVG9wICsgRURJVEFCTEVfUEFERElORyk7XG5cbiAgICAgICAgaGVpZ2h0ID0gKHRoaXMub3B0aW9ucy5taW5oZWlnaHQgPiAwKSA/IE1hdGgubWF4KGhlaWdodCwgdGhpcy5vcHRpb25zLm1pbmhlaWdodCkgOiBoZWlnaHQ7XG4gICAgICAgIGhlaWdodCA9ICh0aGlzLm9wdGlvbnMubWF4SGVpZ2h0ID4gMCkgPyBNYXRoLm1pbihoZWlnaHQsIHRoaXMub3B0aW9ucy5tYXhIZWlnaHQpIDogaGVpZ2h0O1xuXG4gICAgICAgIHRoaXMuJGVkaXRhYmxlLmhlaWdodChoZWlnaHQpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy4kZG9jdW1lbnQub24oJ21vdXNlbW92ZScsIG9uTW91c2VNb3ZlKS5vbmUoJ21vdXNldXAnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuJGRvY3VtZW50Lm9mZignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuJHN0YXR1c2Jhci5vZmYoKTtcbiAgfVxufVxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRnVsbHNjcmVlbiB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuXG4gICAgdGhpcy4kZWRpdG9yID0gY29udGV4dC5sYXlvdXRJbmZvLmVkaXRvcjtcbiAgICB0aGlzLiR0b29sYmFyID0gY29udGV4dC5sYXlvdXRJbmZvLnRvb2xiYXI7XG4gICAgdGhpcy4kZWRpdGFibGUgPSBjb250ZXh0LmxheW91dEluZm8uZWRpdGFibGU7XG4gICAgdGhpcy4kY29kYWJsZSA9IGNvbnRleHQubGF5b3V0SW5mby5jb2RhYmxlO1xuXG4gICAgdGhpcy4kd2luZG93ID0gJCh3aW5kb3cpO1xuICAgIHRoaXMuJHNjcm9sbGJhciA9ICQoJ2h0bWwsIGJvZHknKTtcblxuICAgIHRoaXMub25SZXNpemUgPSAoKSA9PiB7XG4gICAgICB0aGlzLnJlc2l6ZVRvKHtcbiAgICAgICAgaDogdGhpcy4kd2luZG93LmhlaWdodCgpIC0gdGhpcy4kdG9vbGJhci5vdXRlckhlaWdodCgpXG4gICAgICB9KTtcbiAgICB9O1xuICB9XG5cbiAgcmVzaXplVG8oc2l6ZSkge1xuICAgIHRoaXMuJGVkaXRhYmxlLmNzcygnaGVpZ2h0Jywgc2l6ZS5oKTtcbiAgICB0aGlzLiRjb2RhYmxlLmNzcygnaGVpZ2h0Jywgc2l6ZS5oKTtcbiAgICBpZiAodGhpcy4kY29kYWJsZS5kYXRhKCdjbWVkaXRvcicpKSB7XG4gICAgICB0aGlzLiRjb2RhYmxlLmRhdGEoJ2NtZWRpdG9yJykuc2V0c2l6ZShudWxsLCBzaXplLmgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiB0b2dnbGUgZnVsbHNjcmVlblxuICAgKi9cbiAgdG9nZ2xlKCkge1xuICAgIHRoaXMuJGVkaXRvci50b2dnbGVDbGFzcygnZnVsbHNjcmVlbicpO1xuICAgIGlmICh0aGlzLmlzRnVsbHNjcmVlbigpKSB7XG4gICAgICB0aGlzLiRlZGl0YWJsZS5kYXRhKCdvcmdIZWlnaHQnLCB0aGlzLiRlZGl0YWJsZS5jc3MoJ2hlaWdodCcpKTtcbiAgICAgIHRoaXMuJHdpbmRvdy5vbigncmVzaXplJywgdGhpcy5vblJlc2l6ZSkudHJpZ2dlcigncmVzaXplJyk7XG4gICAgICB0aGlzLiRzY3JvbGxiYXIuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4kd2luZG93Lm9mZigncmVzaXplJywgdGhpcy5vblJlc2l6ZSk7XG4gICAgICB0aGlzLnJlc2l6ZVRvKHsgaDogdGhpcy4kZWRpdGFibGUuZGF0YSgnb3JnSGVpZ2h0JykgfSk7XG4gICAgICB0aGlzLiRzY3JvbGxiYXIuY3NzKCdvdmVyZmxvdycsICd2aXNpYmxlJyk7XG4gICAgfVxuXG4gICAgdGhpcy5jb250ZXh0Lmludm9rZSgndG9vbGJhci51cGRhdGVGdWxsc2NyZWVuJywgdGhpcy5pc0Z1bGxzY3JlZW4oKSk7XG4gIH1cblxuICBpc0Z1bGxzY3JlZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMuJGVkaXRvci5oYXNDbGFzcygnZnVsbHNjcmVlbicpO1xuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGRvbSBmcm9tICcuLi9jb3JlL2RvbSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhhbmRsZSB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIHRoaXMuJGRvY3VtZW50ID0gJChkb2N1bWVudCk7XG4gICAgdGhpcy4kZWRpdGluZ0FyZWEgPSBjb250ZXh0LmxheW91dEluZm8uZWRpdGluZ0FyZWE7XG4gICAgdGhpcy5vcHRpb25zID0gY29udGV4dC5vcHRpb25zO1xuICAgIHRoaXMubGFuZyA9IHRoaXMub3B0aW9ucy5sYW5nSW5mbztcblxuICAgIHRoaXMuZXZlbnRzID0ge1xuICAgICAgJ3N1bW1lcm5vdGUubW91c2Vkb3duJzogKHdlLCBlKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZShlLnRhcmdldCkpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICAnc3VtbWVybm90ZS5rZXl1cCBzdW1tZXJub3RlLnNjcm9sbCBzdW1tZXJub3RlLmNoYW5nZSBzdW1tZXJub3RlLmRpYWxvZy5zaG93bic6ICgpID0+IHtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgIH0sXG4gICAgICAnc3VtbWVybm90ZS5kaXNhYmxlJzogKCkgPT4ge1xuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgIH0sXG4gICAgICAnc3VtbWVybm90ZS5jb2Rldmlldy50b2dnbGVkJzogKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBpbml0aWFsaXplKCkge1xuICAgIHRoaXMuJGhhbmRsZSA9ICQoW1xuICAgICAgJzxkaXYgY2xhc3M9XCJub3RlLWhhbmRsZVwiPicsXG4gICAgICAnPGRpdiBjbGFzcz1cIm5vdGUtY29udHJvbC1zZWxlY3Rpb25cIj4nLFxuICAgICAgJzxkaXYgY2xhc3M9XCJub3RlLWNvbnRyb2wtc2VsZWN0aW9uLWJnXCI+PC9kaXY+JyxcbiAgICAgICc8ZGl2IGNsYXNzPVwibm90ZS1jb250cm9sLWhvbGRlciBub3RlLWNvbnRyb2wtbndcIj48L2Rpdj4nLFxuICAgICAgJzxkaXYgY2xhc3M9XCJub3RlLWNvbnRyb2wtaG9sZGVyIG5vdGUtY29udHJvbC1uZVwiPjwvZGl2PicsXG4gICAgICAnPGRpdiBjbGFzcz1cIm5vdGUtY29udHJvbC1ob2xkZXIgbm90ZS1jb250cm9sLXN3XCI+PC9kaXY+JyxcbiAgICAgICc8ZGl2IGNsYXNzPVwiJyxcbiAgICAgICh0aGlzLm9wdGlvbnMuZGlzYWJsZVJlc2l6ZUltYWdlID8gJ25vdGUtY29udHJvbC1ob2xkZXInIDogJ25vdGUtY29udHJvbC1zaXppbmcnKSxcbiAgICAgICcgbm90ZS1jb250cm9sLXNlXCI+PC9kaXY+JyxcbiAgICAgICh0aGlzLm9wdGlvbnMuZGlzYWJsZVJlc2l6ZUltYWdlID8gJycgOiAnPGRpdiBjbGFzcz1cIm5vdGUtY29udHJvbC1zZWxlY3Rpb24taW5mb1wiPjwvZGl2PicpLFxuICAgICAgJzwvZGl2PicsXG4gICAgICAnPC9kaXY+J1xuICAgIF0uam9pbignJykpLnByZXBlbmRUbyh0aGlzLiRlZGl0aW5nQXJlYSk7XG5cbiAgICB0aGlzLiRoYW5kbGUub24oJ21vdXNlZG93bicsIChldmVudCkgPT4ge1xuICAgICAgaWYgKGRvbS5pc0NvbnRyb2xTaXppbmcoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICBjb25zdCAkdGFyZ2V0ID0gdGhpcy4kaGFuZGxlLmZpbmQoJy5ub3RlLWNvbnRyb2wtc2VsZWN0aW9uJykuZGF0YSgndGFyZ2V0Jyk7XG4gICAgICAgIGNvbnN0IHBvc1N0YXJ0ID0gJHRhcmdldC5vZmZzZXQoKTtcbiAgICAgICAgY29uc3Qgc2Nyb2xsVG9wID0gdGhpcy4kZG9jdW1lbnQuc2Nyb2xsVG9wKCk7XG5cbiAgICAgICAgY29uc3Qgb25Nb3VzZU1vdmUgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3IucmVzaXplVG8nLCB7XG4gICAgICAgICAgICB4OiBldmVudC5jbGllbnRYIC0gcG9zU3RhcnQubGVmdCxcbiAgICAgICAgICAgIHk6IGV2ZW50LmNsaWVudFkgLSAocG9zU3RhcnQudG9wIC0gc2Nyb2xsVG9wKVxuICAgICAgICAgIH0sICR0YXJnZXQsICFldmVudC5zaGlmdEtleSk7XG5cbiAgICAgICAgICB0aGlzLnVwZGF0ZSgkdGFyZ2V0WzBdKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLiRkb2N1bWVudFxuICAgICAgICAgIC5vbignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpXG4gICAgICAgICAgLm9uZSgnbW91c2V1cCcsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLiRkb2N1bWVudC5vZmYoJ21vdXNlbW92ZScsIG9uTW91c2VNb3ZlKTtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5hZnRlckNvbW1hbmQnKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICBpZiAoISR0YXJnZXQuZGF0YSgncmF0aW8nKSkgeyAvLyBvcmlnaW5hbCByYXRpby5cbiAgICAgICAgICAkdGFyZ2V0LmRhdGEoJ3JhdGlvJywgJHRhcmdldC5oZWlnaHQoKSAvICR0YXJnZXQud2lkdGgoKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIExpc3RlbiBmb3Igc2Nyb2xsaW5nIG9uIHRoZSBoYW5kbGUgb3ZlcmxheS5cbiAgICB0aGlzLiRoYW5kbGUub24oJ3doZWVsJywgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfSk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuJGhhbmRsZS5yZW1vdmUoKTtcbiAgfVxuXG4gIHVwZGF0ZSh0YXJnZXQpIHtcbiAgICBpZiAodGhpcy5jb250ZXh0LmlzRGlzYWJsZWQoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGlzSW1hZ2UgPSBkb20uaXNJbWcodGFyZ2V0KTtcbiAgICBjb25zdCAkc2VsZWN0aW9uID0gdGhpcy4kaGFuZGxlLmZpbmQoJy5ub3RlLWNvbnRyb2wtc2VsZWN0aW9uJyk7XG5cbiAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdpbWFnZVBvcG92ZXIudXBkYXRlJywgdGFyZ2V0KTtcblxuICAgIGlmIChpc0ltYWdlKSB7XG4gICAgICBjb25zdCAkaW1hZ2UgPSAkKHRhcmdldCk7XG4gICAgICBjb25zdCBwb3NpdGlvbiA9ICRpbWFnZS5wb3NpdGlvbigpO1xuICAgICAgY29uc3QgcG9zID0ge1xuICAgICAgICBsZWZ0OiBwb3NpdGlvbi5sZWZ0ICsgcGFyc2VJbnQoJGltYWdlLmNzcygnbWFyZ2luTGVmdCcpLCAxMCksXG4gICAgICAgIHRvcDogcG9zaXRpb24udG9wICsgcGFyc2VJbnQoJGltYWdlLmNzcygnbWFyZ2luVG9wJyksIDEwKVxuICAgICAgfTtcblxuICAgICAgLy8gZXhjbHVkZSBtYXJnaW5cbiAgICAgIGNvbnN0IGltYWdlU2l6ZSA9IHtcbiAgICAgICAgdzogJGltYWdlLm91dGVyV2lkdGgoZmFsc2UpLFxuICAgICAgICBoOiAkaW1hZ2Uub3V0ZXJIZWlnaHQoZmFsc2UpXG4gICAgICB9O1xuXG4gICAgICAkc2VsZWN0aW9uLmNzcyh7XG4gICAgICAgIGRpc3BsYXk6ICdibG9jaycsXG4gICAgICAgIGxlZnQ6IHBvcy5sZWZ0LFxuICAgICAgICB0b3A6IHBvcy50b3AsXG4gICAgICAgIHdpZHRoOiBpbWFnZVNpemUudyxcbiAgICAgICAgaGVpZ2h0OiBpbWFnZVNpemUuaFxuICAgICAgfSkuZGF0YSgndGFyZ2V0JywgJGltYWdlKTsgLy8gc2F2ZSBjdXJyZW50IGltYWdlIGVsZW1lbnQuXG5cbiAgICAgIGNvbnN0IG9yaWdJbWFnZU9iaiA9IG5ldyBJbWFnZSgpO1xuICAgICAgb3JpZ0ltYWdlT2JqLnNyYyA9ICRpbWFnZS5hdHRyKCdzcmMnKTtcblxuICAgICAgY29uc3Qgc2l6aW5nVGV4dCA9IGltYWdlU2l6ZS53ICsgJ3gnICsgaW1hZ2VTaXplLmggKyAnICgnICsgdGhpcy5sYW5nLmltYWdlLm9yaWdpbmFsICsgJzogJyArIG9yaWdJbWFnZU9iai53aWR0aCArICd4JyArIG9yaWdJbWFnZU9iai5oZWlnaHQgKyAnKSc7XG4gICAgICAkc2VsZWN0aW9uLmZpbmQoJy5ub3RlLWNvbnRyb2wtc2VsZWN0aW9uLWluZm8nKS50ZXh0KHNpemluZ1RleHQpO1xuICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLnNhdmVUYXJnZXQnLCB0YXJnZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhpZGUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaXNJbWFnZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBoaWRlXG4gICAqXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSAkaGFuZGxlXG4gICAqL1xuICBoaWRlKCkge1xuICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5jbGVhclRhcmdldCcpO1xuICAgIHRoaXMuJGhhbmRsZS5jaGlsZHJlbigpLmhpZGUoKTtcbiAgfVxufVxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBsaXN0cyBmcm9tICcuLi9jb3JlL2xpc3RzJztcbmltcG9ydCBrZXkgZnJvbSAnLi4vY29yZS9rZXknO1xuXG5jb25zdCBkZWZhdWx0U2NoZW1lID0gJ2h0dHA6Ly8nO1xuY29uc3QgbGlua1BhdHRlcm4gPSAvXihbQS1aYS16XVtBLVphLXowLTkrLS5dKlxcOltcXC9cXC9dP3xtYWlsdG86W0EtWjAtOS5fJSstXStAKT8od3d3XFwuKT8oLispJC9pO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBdXRvTGluayB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIHRoaXMuZXZlbnRzID0ge1xuICAgICAgJ3N1bW1lcm5vdGUua2V5dXAnOiAod2UsIGUpID0+IHtcbiAgICAgICAgaWYgKCFlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgICAgdGhpcy5oYW5kbGVLZXl1cChlKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICdzdW1tZXJub3RlLmtleWRvd24nOiAod2UsIGUpID0+IHtcbiAgICAgICAgdGhpcy5oYW5kbGVLZXlkb3duKGUpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBpbml0aWFsaXplKCkge1xuICAgIHRoaXMubGFzdFdvcmRSYW5nZSA9IG51bGw7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMubGFzdFdvcmRSYW5nZSA9IG51bGw7XG4gIH1cblxuICByZXBsYWNlKCkge1xuICAgIGlmICghdGhpcy5sYXN0V29yZFJhbmdlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qga2V5d29yZCA9IHRoaXMubGFzdFdvcmRSYW5nZS50b1N0cmluZygpO1xuICAgIGNvbnN0IG1hdGNoID0ga2V5d29yZC5tYXRjaChsaW5rUGF0dGVybik7XG5cbiAgICBpZiAobWF0Y2ggJiYgKG1hdGNoWzFdIHx8IG1hdGNoWzJdKSkge1xuICAgICAgY29uc3QgbGluayA9IG1hdGNoWzFdID8ga2V5d29yZCA6IGRlZmF1bHRTY2hlbWUgKyBrZXl3b3JkO1xuICAgICAgY29uc3Qgbm9kZSA9ICQoJzxhIC8+JykuaHRtbChrZXl3b3JkKS5hdHRyKCdocmVmJywgbGluaylbMF07XG5cbiAgICAgIHRoaXMubGFzdFdvcmRSYW5nZS5pbnNlcnROb2RlKG5vZGUpO1xuICAgICAgdGhpcy5sYXN0V29yZFJhbmdlID0gbnVsbDtcbiAgICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5mb2N1cycpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUtleWRvd24oZSkge1xuICAgIGlmIChsaXN0cy5jb250YWlucyhba2V5LmNvZGUuRU5URVIsIGtleS5jb2RlLlNQQUNFXSwgZS5rZXlDb2RlKSkge1xuICAgICAgY29uc3Qgd29yZFJhbmdlID0gdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLmNyZWF0ZVJhbmdlJykuZ2V0V29yZFJhbmdlKCk7XG4gICAgICB0aGlzLmxhc3RXb3JkUmFuZ2UgPSB3b3JkUmFuZ2U7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlS2V5dXAoZSkge1xuICAgIGlmIChsaXN0cy5jb250YWlucyhba2V5LmNvZGUuRU5URVIsIGtleS5jb2RlLlNQQUNFXSwgZS5rZXlDb2RlKSkge1xuICAgICAgdGhpcy5yZXBsYWNlKCk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgZG9tIGZyb20gJy4uL2NvcmUvZG9tJztcblxuLyoqXG4gKiB0ZXh0YXJlYSBhdXRvIHN5bmMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF1dG9TeW5jIHtcbiAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgIHRoaXMuJG5vdGUgPSBjb250ZXh0LmxheW91dEluZm8ubm90ZTtcbiAgICB0aGlzLmV2ZW50cyA9IHtcbiAgICAgICdzdW1tZXJub3RlLmNoYW5nZSc6ICgpID0+IHtcbiAgICAgICAgdGhpcy4kbm90ZS52YWwoY29udGV4dC5pbnZva2UoJ2NvZGUnKSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHNob3VsZEluaXRpYWxpemUoKSB7XG4gICAgcmV0dXJuIGRvbS5pc1RleHRhcmVhKHRoaXMuJG5vdGVbMF0pO1xuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGxhY2Vob2xkZXIge1xuICBjb25zdHJ1Y3Rvcihjb250ZXh0KSB7XG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcblxuICAgIHRoaXMuJGVkaXRpbmdBcmVhID0gY29udGV4dC5sYXlvdXRJbmZvLmVkaXRpbmdBcmVhO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcbiAgICB0aGlzLmV2ZW50cyA9IHtcbiAgICAgICdzdW1tZXJub3RlLmluaXQgc3VtbWVybm90ZS5jaGFuZ2UnOiAoKSA9PiB7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICB9LFxuICAgICAgJ3N1bW1lcm5vdGUuY29kZXZpZXcudG9nZ2xlZCc6ICgpID0+IHtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgc2hvdWxkSW5pdGlhbGl6ZSgpIHtcbiAgICByZXR1cm4gISF0aGlzLm9wdGlvbnMucGxhY2Vob2xkZXI7XG4gIH1cblxuICBpbml0aWFsaXplKCkge1xuICAgIHRoaXMuJHBsYWNlaG9sZGVyID0gJCgnPGRpdiBjbGFzcz1cIm5vdGUtcGxhY2Vob2xkZXJcIj4nKTtcbiAgICB0aGlzLiRwbGFjZWhvbGRlci5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdmb2N1cycpO1xuICAgIH0pLnRleHQodGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyKS5wcmVwZW5kVG8odGhpcy4kZWRpdGluZ0FyZWEpO1xuXG4gICAgdGhpcy51cGRhdGUoKTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy4kcGxhY2Vob2xkZXIucmVtb3ZlKCk7XG4gIH1cblxuICB1cGRhdGUoKSB7XG4gICAgY29uc3QgaXNTaG93ID0gIXRoaXMuY29udGV4dC5pbnZva2UoJ2NvZGV2aWV3LmlzQWN0aXZhdGVkJykgJiYgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLmlzRW1wdHknKTtcbiAgICB0aGlzLiRwbGFjZWhvbGRlci50b2dnbGUoaXNTaG93KTtcbiAgfVxufVxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBmdW5jIGZyb20gJy4uL2NvcmUvZnVuYyc7XG5pbXBvcnQgbGlzdHMgZnJvbSAnLi4vY29yZS9saXN0cyc7XG5pbXBvcnQgZW52IGZyb20gJy4uL2NvcmUvZW52JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnV0dG9ucyB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICB0aGlzLnVpID0gJC5zdW1tZXJub3RlLnVpO1xuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgdGhpcy4kdG9vbGJhciA9IGNvbnRleHQubGF5b3V0SW5mby50b29sYmFyO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcbiAgICB0aGlzLmxhbmcgPSB0aGlzLm9wdGlvbnMubGFuZ0luZm87XG4gICAgdGhpcy5pbnZlcnRlZEtleU1hcCA9IGZ1bmMuaW52ZXJ0T2JqZWN0KFxuICAgICAgdGhpcy5vcHRpb25zLmtleU1hcFtlbnYuaXNNYWMgPyAnbWFjJyA6ICdwYyddXG4gICAgKTtcbiAgfVxuXG4gIHJlcHJlc2VudFNob3J0Y3V0KGVkaXRvck1ldGhvZCkge1xuICAgIGxldCBzaG9ydGN1dCA9IHRoaXMuaW52ZXJ0ZWRLZXlNYXBbZWRpdG9yTWV0aG9kXTtcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5zaG9ydGN1dHMgfHwgIXNob3J0Y3V0KSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgaWYgKGVudi5pc01hYykge1xuICAgICAgc2hvcnRjdXQgPSBzaG9ydGN1dC5yZXBsYWNlKCdDTUQnLCAn4oyYJykucmVwbGFjZSgnU0hJRlQnLCAn4oenJyk7XG4gICAgfVxuXG4gICAgc2hvcnRjdXQgPSBzaG9ydGN1dC5yZXBsYWNlKCdCQUNLU0xBU0gnLCAnXFxcXCcpXG4gICAgICAucmVwbGFjZSgnU0xBU0gnLCAnLycpXG4gICAgICAucmVwbGFjZSgnTEVGVEJSQUNLRVQnLCAnWycpXG4gICAgICAucmVwbGFjZSgnUklHSFRCUkFDS0VUJywgJ10nKTtcblxuICAgIHJldHVybiAnICgnICsgc2hvcnRjdXQgKyAnKSc7XG4gIH1cblxuICBidXR0b24obykge1xuICAgIGlmICghdGhpcy5vcHRpb25zLnRvb2x0aXAgJiYgby50b29sdGlwKSB7XG4gICAgICBkZWxldGUgby50b29sdGlwO1xuICAgIH1cbiAgICBvLmNvbnRhaW5lciA9IHRoaXMub3B0aW9ucy5jb250YWluZXI7XG4gICAgcmV0dXJuIHRoaXMudWkuYnV0dG9uKG8pO1xuICB9XG5cbiAgaW5pdGlhbGl6ZSgpIHtcbiAgICB0aGlzLmFkZFRvb2xiYXJCdXR0b25zKCk7XG4gICAgdGhpcy5hZGRJbWFnZVBvcG92ZXJCdXR0b25zKCk7XG4gICAgdGhpcy5hZGRMaW5rUG9wb3ZlckJ1dHRvbnMoKTtcbiAgICB0aGlzLmFkZFRhYmxlUG9wb3ZlckJ1dHRvbnMoKTtcbiAgICB0aGlzLmZvbnRJbnN0YWxsZWRNYXAgPSB7fTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgZGVsZXRlIHRoaXMuZm9udEluc3RhbGxlZE1hcDtcbiAgfVxuXG4gIGlzRm9udEluc3RhbGxlZChuYW1lKSB7XG4gICAgaWYgKCF0aGlzLmZvbnRJbnN0YWxsZWRNYXAuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgIHRoaXMuZm9udEluc3RhbGxlZE1hcFtuYW1lXSA9IGVudi5pc0ZvbnRJbnN0YWxsZWQobmFtZSkgfHxcbiAgICAgICAgbGlzdHMuY29udGFpbnModGhpcy5vcHRpb25zLmZvbnROYW1lc0lnbm9yZUNoZWNrLCBuYW1lKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5mb250SW5zdGFsbGVkTWFwW25hbWVdO1xuICB9XG5cbiAgaXNGb250RGVzZXJ2ZWRUb0FkZChuYW1lKSB7XG4gICAgY29uc3QgZ2VuZXJpY0ZhbWlsaWVzID0gWydzYW5zLXNlcmlmJywgJ3NlcmlmJywgJ21vbm9zcGFjZScsICdjdXJzaXZlJywgJ2ZhbnRhc3knXTtcbiAgICBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgcmV0dXJuICgobmFtZSAhPT0gJycpICYmIHRoaXMuaXNGb250SW5zdGFsbGVkKG5hbWUpICYmICgkLmluQXJyYXkobmFtZSwgZ2VuZXJpY0ZhbWlsaWVzKSA9PT0gLTEpKTtcbiAgfVxuXG4gIGFkZFRvb2xiYXJCdXR0b25zKCkge1xuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24uc3R5bGUnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy51aS5idXR0b25Hcm91cChbXG4gICAgICAgIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgICBjbGFzc05hbWU6ICdkcm9wZG93bi10b2dnbGUnLFxuICAgICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmRyb3Bkb3duQnV0dG9uQ29udGVudHMoXG4gICAgICAgICAgICB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLm1hZ2ljKSwgdGhpcy5vcHRpb25zXG4gICAgICAgICAgKSxcbiAgICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcuc3R5bGUuc3R5bGUsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdG9nZ2xlOiAnZHJvcGRvd24nXG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgdGhpcy51aS5kcm9wZG93bih7XG4gICAgICAgICAgY2xhc3NOYW1lOiAnZHJvcGRvd24tc3R5bGUnLFxuICAgICAgICAgIGl0ZW1zOiB0aGlzLm9wdGlvbnMuc3R5bGVUYWdzLFxuICAgICAgICAgIHRlbXBsYXRlOiAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBpdGVtID0geyB0YWc6IGl0ZW0sIHRpdGxlOiAodGhpcy5sYW5nLnN0eWxlLmhhc093blByb3BlcnR5KGl0ZW0pID8gdGhpcy5sYW5nLnN0eWxlW2l0ZW1dIDogaXRlbSkgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgdGFnID0gaXRlbS50YWc7XG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IGl0ZW0udGl0bGU7XG4gICAgICAgICAgICBjb25zdCBzdHlsZSA9IGl0ZW0uc3R5bGUgPyAnIHN0eWxlPVwiJyArIGl0ZW0uc3R5bGUgKyAnXCIgJyA6ICcnO1xuICAgICAgICAgICAgY29uc3QgY2xhc3NOYW1lID0gaXRlbS5jbGFzc05hbWUgPyAnIGNsYXNzPVwiJyArIGl0ZW0uY2xhc3NOYW1lICsgJ1wiJyA6ICcnO1xuXG4gICAgICAgICAgICByZXR1cm4gJzwnICsgdGFnICsgc3R5bGUgKyBjbGFzc05hbWUgKyAnPicgKyB0aXRsZSArICc8LycgKyB0YWcgKyAnPic7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ2VkaXRvci5mb3JtYXRCbG9jaycpXG4gICAgICAgIH0pXG4gICAgICBdKS5yZW5kZXIoKTtcbiAgICB9KTtcblxuICAgIGZvciAobGV0IHN0eWxlSWR4ID0gMCwgc3R5bGVMZW4gPSB0aGlzLm9wdGlvbnMuc3R5bGVUYWdzLmxlbmd0aDsgc3R5bGVJZHggPCBzdHlsZUxlbjsgc3R5bGVJZHgrKykge1xuICAgICAgY29uc3QgaXRlbSA9IHRoaXMub3B0aW9ucy5zdHlsZVRhZ3Nbc3R5bGVJZHhdO1xuXG4gICAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLnN0eWxlLicgKyBpdGVtLCAoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1dHRvbih7XG4gICAgICAgICAgY2xhc3NOYW1lOiAnbm90ZS1idG4tc3R5bGUtJyArIGl0ZW0sXG4gICAgICAgICAgY29udGVudHM6ICc8ZGl2IGRhdGEtdmFsdWU9XCInICsgaXRlbSArICdcIj4nICsgaXRlbS50b1VwcGVyQ2FzZSgpICsgJzwvZGl2PicsXG4gICAgICAgICAgdG9vbHRpcDogaXRlbS50b1VwcGVyQ2FzZSgpLFxuICAgICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignZWRpdG9yLmZvcm1hdEJsb2NrJylcbiAgICAgICAgfSkucmVuZGVyKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmJvbGQnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjbGFzc05hbWU6ICdub3RlLWJ0bi1ib2xkJyxcbiAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMuYm9sZCksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5mb250LmJvbGQgKyB0aGlzLnJlcHJlc2VudFNob3J0Y3V0KCdib2xkJyksXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlckFuZFVwZGF0ZVN0YXRlKCdlZGl0b3IuYm9sZCcpXG4gICAgICB9KS5yZW5kZXIoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24uaXRhbGljJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY2xhc3NOYW1lOiAnbm90ZS1idG4taXRhbGljJyxcbiAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMuaXRhbGljKSxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLmZvbnQuaXRhbGljICsgdGhpcy5yZXByZXNlbnRTaG9ydGN1dCgnaXRhbGljJyksXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlckFuZFVwZGF0ZVN0YXRlKCdlZGl0b3IuaXRhbGljJylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi51bmRlcmxpbmUnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjbGFzc05hbWU6ICdub3RlLWJ0bi11bmRlcmxpbmUnLFxuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy51bmRlcmxpbmUpLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcuZm9udC51bmRlcmxpbmUgKyB0aGlzLnJlcHJlc2VudFNob3J0Y3V0KCd1bmRlcmxpbmUnKSxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyQW5kVXBkYXRlU3RhdGUoJ2VkaXRvci51bmRlcmxpbmUnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmNsZWFyJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMuZXJhc2VyKSxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLmZvbnQuY2xlYXIgKyB0aGlzLnJlcHJlc2VudFNob3J0Y3V0KCdyZW1vdmVGb3JtYXQnKSxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IucmVtb3ZlRm9ybWF0JylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5zdHJpa2V0aHJvdWdoJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY2xhc3NOYW1lOiAnbm90ZS1idG4tc3RyaWtldGhyb3VnaCcsXG4gICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLnN0cmlrZXRocm91Z2gpLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcuZm9udC5zdHJpa2V0aHJvdWdoICsgdGhpcy5yZXByZXNlbnRTaG9ydGN1dCgnc3RyaWtldGhyb3VnaCcpLFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXJBbmRVcGRhdGVTdGF0ZSgnZWRpdG9yLnN0cmlrZXRocm91Z2gnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLnN1cGVyc2NyaXB0JywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY2xhc3NOYW1lOiAnbm90ZS1idG4tc3VwZXJzY3JpcHQnLFxuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5zdXBlcnNjcmlwdCksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5mb250LnN1cGVyc2NyaXB0LFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXJBbmRVcGRhdGVTdGF0ZSgnZWRpdG9yLnN1cGVyc2NyaXB0JylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5zdWJzY3JpcHQnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjbGFzc05hbWU6ICdub3RlLWJ0bi1zdWJzY3JpcHQnLFxuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5zdWJzY3JpcHQpLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcuZm9udC5zdWJzY3JpcHQsXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlckFuZFVwZGF0ZVN0YXRlKCdlZGl0b3Iuc3Vic2NyaXB0JylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5mb250bmFtZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHN0eWxlSW5mbyA9IHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5jdXJyZW50U3R5bGUnKTtcblxuICAgICAgLy8gQWRkICdkZWZhdWx0JyBmb250cyBpbnRvIHRoZSBmb250bmFtZXMgYXJyYXkgaWYgbm90IGV4aXN0XG4gICAgICAkLmVhY2goc3R5bGVJbmZvWydmb250LWZhbWlseSddLnNwbGl0KCcsJyksIChpZHgsIGZvbnRuYW1lKSA9PiB7XG4gICAgICAgIGZvbnRuYW1lID0gZm9udG5hbWUudHJpbSgpLnJlcGxhY2UoL1snXCJdKy9nLCAnJyk7XG4gICAgICAgIGlmICh0aGlzLmlzRm9udERlc2VydmVkVG9BZGQoZm9udG5hbWUpKSB7XG4gICAgICAgICAgaWYgKCQuaW5BcnJheShmb250bmFtZSwgdGhpcy5vcHRpb25zLmZvbnROYW1lcykgPT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZm9udE5hbWVzLnB1c2goZm9udG5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB0aGlzLnVpLmJ1dHRvbkdyb3VwKFtcbiAgICAgICAgdGhpcy5idXR0b24oe1xuICAgICAgICAgIGNsYXNzTmFtZTogJ2Ryb3Bkb3duLXRvZ2dsZScsXG4gICAgICAgICAgY29udGVudHM6IHRoaXMudWkuZHJvcGRvd25CdXR0b25Db250ZW50cyhcbiAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cIm5vdGUtY3VycmVudC1mb250bmFtZVwiLz4nLCB0aGlzLm9wdGlvbnNcbiAgICAgICAgICApLFxuICAgICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5mb250Lm5hbWUsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdG9nZ2xlOiAnZHJvcGRvd24nXG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgdGhpcy51aS5kcm9wZG93bkNoZWNrKHtcbiAgICAgICAgICBjbGFzc05hbWU6ICdkcm9wZG93bi1mb250bmFtZScsXG4gICAgICAgICAgY2hlY2tDbGFzc05hbWU6IHRoaXMub3B0aW9ucy5pY29ucy5tZW51Q2hlY2ssXG4gICAgICAgICAgaXRlbXM6IHRoaXMub3B0aW9ucy5mb250TmFtZXMuZmlsdGVyKHRoaXMuaXNGb250SW5zdGFsbGVkLmJpbmQodGhpcykpLFxuICAgICAgICAgIHRlbXBsYXRlOiAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICc8c3BhbiBzdHlsZT1cImZvbnQtZmFtaWx5OiBcXCcnICsgaXRlbSArICdcXCdcIj4nICsgaXRlbSArICc8L3NwYW4+JztcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlckFuZFVwZGF0ZVN0YXRlKCdlZGl0b3IuZm9udE5hbWUnKVxuICAgICAgICB9KVxuICAgICAgXSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmZvbnRzaXplJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMudWkuYnV0dG9uR3JvdXAoW1xuICAgICAgICB0aGlzLmJ1dHRvbih7XG4gICAgICAgICAgY2xhc3NOYW1lOiAnZHJvcGRvd24tdG9nZ2xlJyxcbiAgICAgICAgICBjb250ZW50czogdGhpcy51aS5kcm9wZG93bkJ1dHRvbkNvbnRlbnRzKCc8c3BhbiBjbGFzcz1cIm5vdGUtY3VycmVudC1mb250c2l6ZVwiLz4nLCB0aGlzLm9wdGlvbnMpLFxuICAgICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5mb250LnNpemUsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdG9nZ2xlOiAnZHJvcGRvd24nXG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgdGhpcy51aS5kcm9wZG93bkNoZWNrKHtcbiAgICAgICAgICBjbGFzc05hbWU6ICdkcm9wZG93bi1mb250c2l6ZScsXG4gICAgICAgICAgY2hlY2tDbGFzc05hbWU6IHRoaXMub3B0aW9ucy5pY29ucy5tZW51Q2hlY2ssXG4gICAgICAgICAgaXRlbXM6IHRoaXMub3B0aW9ucy5mb250U2l6ZXMsXG4gICAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyQW5kVXBkYXRlU3RhdGUoJ2VkaXRvci5mb250U2l6ZScpXG4gICAgICAgIH0pXG4gICAgICBdKS5yZW5kZXIoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24uY29sb3InLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy51aS5idXR0b25Hcm91cCh7XG4gICAgICAgIGNsYXNzTmFtZTogJ25vdGUtY29sb3InLFxuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJ25vdGUtY3VycmVudC1jb2xvci1idXR0b24nLFxuICAgICAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMuZm9udCArICcgbm90ZS1yZWNlbnQtY29sb3InKSxcbiAgICAgICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5jb2xvci5yZWNlbnQsXG4gICAgICAgICAgICBjbGljazogKGUpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgJGJ1dHRvbiA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLmNvbG9yJywge1xuICAgICAgICAgICAgICAgIGJhY2tDb2xvcjogJGJ1dHRvbi5hdHRyKCdkYXRhLWJhY2tDb2xvcicpLFxuICAgICAgICAgICAgICAgIGZvcmVDb2xvcjogJGJ1dHRvbi5hdHRyKCdkYXRhLWZvcmVDb2xvcicpXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoJGJ1dHRvbikgPT4ge1xuICAgICAgICAgICAgICBjb25zdCAkcmVjZW50Q29sb3IgPSAkYnV0dG9uLmZpbmQoJy5ub3RlLXJlY2VudC1jb2xvcicpO1xuICAgICAgICAgICAgICAkcmVjZW50Q29sb3IuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgJyNGRkZGMDAnKTtcbiAgICAgICAgICAgICAgJGJ1dHRvbi5hdHRyKCdkYXRhLWJhY2tDb2xvcicsICcjRkZGRjAwJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSksXG4gICAgICAgICAgdGhpcy5idXR0b24oe1xuICAgICAgICAgICAgY2xhc3NOYW1lOiAnZHJvcGRvd24tdG9nZ2xlJyxcbiAgICAgICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmRyb3Bkb3duQnV0dG9uQ29udGVudHMoJycsIHRoaXMub3B0aW9ucyksXG4gICAgICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcuY29sb3IubW9yZSxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgdG9nZ2xlOiAnZHJvcGRvd24nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSksXG4gICAgICAgICAgdGhpcy51aS5kcm9wZG93bih7XG4gICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm5vdGUtcGFsZXR0ZVwiPicsXG4gICAgICAgICAgICAgICcgIDxkaXYgY2xhc3M9XCJub3RlLXBhbGV0dGUtdGl0bGVcIj4nICsgdGhpcy5sYW5nLmNvbG9yLmJhY2tncm91bmQgKyAnPC9kaXY+JyxcbiAgICAgICAgICAgICAgJyAgPGRpdj4nLFxuICAgICAgICAgICAgICAnICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwibm90ZS1jb2xvci1yZXNldCBidG4gYnRuLWxpZ2h0XCIgZGF0YS1ldmVudD1cImJhY2tDb2xvclwiIGRhdGEtdmFsdWU9XCJpbmhlcml0XCI+JyxcbiAgICAgICAgICAgICAgdGhpcy5sYW5nLmNvbG9yLnRyYW5zcGFyZW50LFxuICAgICAgICAgICAgICAnICAgIDwvYnV0dG9uPicsXG4gICAgICAgICAgICAgICcgIDwvZGl2PicsXG4gICAgICAgICAgICAgICcgIDxkaXYgY2xhc3M9XCJub3RlLWhvbGRlclwiIGRhdGEtZXZlbnQ9XCJiYWNrQ29sb3JcIi8+JyxcbiAgICAgICAgICAgICAgJzwvZGl2PicsXG4gICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibm90ZS1wYWxldHRlXCI+JyxcbiAgICAgICAgICAgICAgJyAgPGRpdiBjbGFzcz1cIm5vdGUtcGFsZXR0ZS10aXRsZVwiPicgKyB0aGlzLmxhbmcuY29sb3IuZm9yZWdyb3VuZCArICc8L2Rpdj4nLFxuICAgICAgICAgICAgICAnICA8ZGl2PicsXG4gICAgICAgICAgICAgICcgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJub3RlLWNvbG9yLXJlc2V0IGJ0biBidG4tbGlnaHRcIiBkYXRhLWV2ZW50PVwicmVtb3ZlRm9ybWF0XCIgZGF0YS12YWx1ZT1cImZvcmVDb2xvclwiPicsXG4gICAgICAgICAgICAgIHRoaXMubGFuZy5jb2xvci5yZXNldFRvRGVmYXVsdCxcbiAgICAgICAgICAgICAgJyAgICA8L2J1dHRvbj4nLFxuICAgICAgICAgICAgICAnICA8L2Rpdj4nLFxuICAgICAgICAgICAgICAnICA8ZGl2IGNsYXNzPVwibm90ZS1ob2xkZXJcIiBkYXRhLWV2ZW50PVwiZm9yZUNvbG9yXCIvPicsXG4gICAgICAgICAgICAgICc8L2Rpdj4nXG4gICAgICAgICAgICBdLmpvaW4oJycpLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgkZHJvcGRvd24pID0+IHtcbiAgICAgICAgICAgICAgJGRyb3Bkb3duLmZpbmQoJy5ub3RlLWhvbGRlcicpLmVhY2goKGlkeCwgaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0ICRob2xkZXIgPSAkKGl0ZW0pO1xuICAgICAgICAgICAgICAgICRob2xkZXIuYXBwZW5kKHRoaXMudWkucGFsZXR0ZSh7XG4gICAgICAgICAgICAgICAgICBjb2xvcnM6IHRoaXMub3B0aW9ucy5jb2xvcnMsXG4gICAgICAgICAgICAgICAgICBldmVudE5hbWU6ICRob2xkZXIuZGF0YSgnZXZlbnQnKSxcbiAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy5vcHRpb25zLmNvbnRhaW5lcixcbiAgICAgICAgICAgICAgICAgIHRvb2x0aXA6IHRoaXMub3B0aW9ucy50b29sdGlwXG4gICAgICAgICAgICAgICAgfSkucmVuZGVyKCkpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbGljazogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0ICRidXR0b24gPSAkKGV2ZW50LnRhcmdldCk7XG4gICAgICAgICAgICAgIGNvbnN0IGV2ZW50TmFtZSA9ICRidXR0b24uZGF0YSgnZXZlbnQnKTtcbiAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSAkYnV0dG9uLmRhdGEoJ3ZhbHVlJyk7XG5cbiAgICAgICAgICAgICAgaWYgKGV2ZW50TmFtZSAmJiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGV2ZW50TmFtZSA9PT0gJ2JhY2tDb2xvcicgPyAnYmFja2dyb3VuZC1jb2xvcicgOiAnY29sb3InO1xuICAgICAgICAgICAgICAgIGNvbnN0ICRjb2xvciA9ICRidXR0b24uY2xvc2VzdCgnLm5vdGUtY29sb3InKS5maW5kKCcubm90ZS1yZWNlbnQtY29sb3InKTtcbiAgICAgICAgICAgICAgICBjb25zdCAkY3VycmVudEJ1dHRvbiA9ICRidXR0b24uY2xvc2VzdCgnLm5vdGUtY29sb3InKS5maW5kKCcubm90ZS1jdXJyZW50LWNvbG9yLWJ1dHRvbicpO1xuXG4gICAgICAgICAgICAgICAgJGNvbG9yLmNzcyhrZXksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAkY3VycmVudEJ1dHRvbi5hdHRyKCdkYXRhLScgKyBldmVudE5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3IuJyArIGV2ZW50TmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgXVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLnVsJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMudW5vcmRlcmVkbGlzdCksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5saXN0cy51bm9yZGVyZWQgKyB0aGlzLnJlcHJlc2VudFNob3J0Y3V0KCdpbnNlcnRVbm9yZGVyZWRMaXN0JyksXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignZWRpdG9yLmluc2VydFVub3JkZXJlZExpc3QnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLm9sJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMub3JkZXJlZGxpc3QpLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcubGlzdHMub3JkZXJlZCArIHRoaXMucmVwcmVzZW50U2hvcnRjdXQoJ2luc2VydE9yZGVyZWRMaXN0JyksXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignZWRpdG9yLmluc2VydE9yZGVyZWRMaXN0JylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgY29uc3QganVzdGlmeUxlZnQgPSB0aGlzLmJ1dHRvbih7XG4gICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5hbGlnbkxlZnQpLFxuICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLnBhcmFncmFwaC5sZWZ0ICsgdGhpcy5yZXByZXNlbnRTaG9ydGN1dCgnanVzdGlmeUxlZnQnKSxcbiAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignZWRpdG9yLmp1c3RpZnlMZWZ0JylcbiAgICB9KTtcblxuICAgIGNvbnN0IGp1c3RpZnlDZW50ZXIgPSB0aGlzLmJ1dHRvbih7XG4gICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5hbGlnbkNlbnRlciksXG4gICAgICB0b29sdGlwOiB0aGlzLmxhbmcucGFyYWdyYXBoLmNlbnRlciArIHRoaXMucmVwcmVzZW50U2hvcnRjdXQoJ2p1c3RpZnlDZW50ZXInKSxcbiAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignZWRpdG9yLmp1c3RpZnlDZW50ZXInKVxuICAgIH0pO1xuXG4gICAgY29uc3QganVzdGlmeVJpZ2h0ID0gdGhpcy5idXR0b24oe1xuICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMuYWxpZ25SaWdodCksXG4gICAgICB0b29sdGlwOiB0aGlzLmxhbmcucGFyYWdyYXBoLnJpZ2h0ICsgdGhpcy5yZXByZXNlbnRTaG9ydGN1dCgnanVzdGlmeVJpZ2h0JyksXG4gICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ2VkaXRvci5qdXN0aWZ5UmlnaHQnKVxuICAgIH0pO1xuXG4gICAgY29uc3QganVzdGlmeUZ1bGwgPSB0aGlzLmJ1dHRvbih7XG4gICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5hbGlnbkp1c3RpZnkpLFxuICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLnBhcmFncmFwaC5qdXN0aWZ5ICsgdGhpcy5yZXByZXNlbnRTaG9ydGN1dCgnanVzdGlmeUZ1bGwnKSxcbiAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignZWRpdG9yLmp1c3RpZnlGdWxsJylcbiAgICB9KTtcblxuICAgIGNvbnN0IG91dGRlbnQgPSB0aGlzLmJ1dHRvbih7XG4gICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5vdXRkZW50KSxcbiAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5wYXJhZ3JhcGgub3V0ZGVudCArIHRoaXMucmVwcmVzZW50U2hvcnRjdXQoJ291dGRlbnQnKSxcbiAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignZWRpdG9yLm91dGRlbnQnKVxuICAgIH0pO1xuXG4gICAgY29uc3QgaW5kZW50ID0gdGhpcy5idXR0b24oe1xuICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMuaW5kZW50KSxcbiAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5wYXJhZ3JhcGguaW5kZW50ICsgdGhpcy5yZXByZXNlbnRTaG9ydGN1dCgnaW5kZW50JyksXG4gICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ2VkaXRvci5pbmRlbnQnKVxuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5qdXN0aWZ5TGVmdCcsIGZ1bmMuaW52b2tlKGp1c3RpZnlMZWZ0LCAncmVuZGVyJykpO1xuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24uanVzdGlmeUNlbnRlcicsIGZ1bmMuaW52b2tlKGp1c3RpZnlDZW50ZXIsICdyZW5kZXInKSk7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5qdXN0aWZ5UmlnaHQnLCBmdW5jLmludm9rZShqdXN0aWZ5UmlnaHQsICdyZW5kZXInKSk7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5qdXN0aWZ5RnVsbCcsIGZ1bmMuaW52b2tlKGp1c3RpZnlGdWxsLCAncmVuZGVyJykpO1xuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24ub3V0ZGVudCcsIGZ1bmMuaW52b2tlKG91dGRlbnQsICdyZW5kZXInKSk7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5pbmRlbnQnLCBmdW5jLmludm9rZShpbmRlbnQsICdyZW5kZXInKSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLnBhcmFncmFwaCcsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLnVpLmJ1dHRvbkdyb3VwKFtcbiAgICAgICAgdGhpcy5idXR0b24oe1xuICAgICAgICAgIGNsYXNzTmFtZTogJ2Ryb3Bkb3duLXRvZ2dsZScsXG4gICAgICAgICAgY29udGVudHM6IHRoaXMudWkuZHJvcGRvd25CdXR0b25Db250ZW50cyh0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLmFsaWduTGVmdCksIHRoaXMub3B0aW9ucyksXG4gICAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLnBhcmFncmFwaC5wYXJhZ3JhcGgsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdG9nZ2xlOiAnZHJvcGRvd24nXG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgdGhpcy51aS5kcm9wZG93bihbXG4gICAgICAgICAgdGhpcy51aS5idXR0b25Hcm91cCh7XG4gICAgICAgICAgICBjbGFzc05hbWU6ICdub3RlLWFsaWduJyxcbiAgICAgICAgICAgIGNoaWxkcmVuOiBbanVzdGlmeUxlZnQsIGp1c3RpZnlDZW50ZXIsIGp1c3RpZnlSaWdodCwganVzdGlmeUZ1bGxdXG4gICAgICAgICAgfSksXG4gICAgICAgICAgdGhpcy51aS5idXR0b25Hcm91cCh7XG4gICAgICAgICAgICBjbGFzc05hbWU6ICdub3RlLWxpc3QnLFxuICAgICAgICAgICAgY2hpbGRyZW46IFtvdXRkZW50LCBpbmRlbnRdXG4gICAgICAgICAgfSlcbiAgICAgICAgXSlcbiAgICAgIF0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5oZWlnaHQnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy51aS5idXR0b25Hcm91cChbXG4gICAgICAgIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgICBjbGFzc05hbWU6ICdkcm9wZG93bi10b2dnbGUnLFxuICAgICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmRyb3Bkb3duQnV0dG9uQ29udGVudHModGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy50ZXh0SGVpZ2h0KSwgdGhpcy5vcHRpb25zKSxcbiAgICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcuZm9udC5oZWlnaHQsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdG9nZ2xlOiAnZHJvcGRvd24nXG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgdGhpcy51aS5kcm9wZG93bkNoZWNrKHtcbiAgICAgICAgICBpdGVtczogdGhpcy5vcHRpb25zLmxpbmVIZWlnaHRzLFxuICAgICAgICAgIGNoZWNrQ2xhc3NOYW1lOiB0aGlzLm9wdGlvbnMuaWNvbnMubWVudUNoZWNrLFxuICAgICAgICAgIGNsYXNzTmFtZTogJ2Ryb3Bkb3duLWxpbmUtaGVpZ2h0JyxcbiAgICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ2VkaXRvci5saW5lSGVpZ2h0JylcbiAgICAgICAgfSlcbiAgICAgIF0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi50YWJsZScsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLnVpLmJ1dHRvbkdyb3VwKFtcbiAgICAgICAgdGhpcy5idXR0b24oe1xuICAgICAgICAgIGNsYXNzTmFtZTogJ2Ryb3Bkb3duLXRvZ2dsZScsXG4gICAgICAgICAgY29udGVudHM6IHRoaXMudWkuZHJvcGRvd25CdXR0b25Db250ZW50cyh0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLnRhYmxlKSwgdGhpcy5vcHRpb25zKSxcbiAgICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcudGFibGUudGFibGUsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdG9nZ2xlOiAnZHJvcGRvd24nXG4gICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgdGhpcy51aS5kcm9wZG93bih7XG4gICAgICAgICAgY2xhc3NOYW1lOiAnbm90ZS10YWJsZScsXG4gICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibm90ZS1kaW1lbnNpb24tcGlja2VyXCI+JyxcbiAgICAgICAgICAgICcgIDxkaXYgY2xhc3M9XCJub3RlLWRpbWVuc2lvbi1waWNrZXItbW91c2VjYXRjaGVyXCIgZGF0YS1ldmVudD1cImluc2VydFRhYmxlXCIgZGF0YS12YWx1ZT1cIjF4MVwiLz4nLFxuICAgICAgICAgICAgJyAgPGRpdiBjbGFzcz1cIm5vdGUtZGltZW5zaW9uLXBpY2tlci1oaWdobGlnaHRlZFwiLz4nLFxuICAgICAgICAgICAgJyAgPGRpdiBjbGFzcz1cIm5vdGUtZGltZW5zaW9uLXBpY2tlci11bmhpZ2hsaWdodGVkXCIvPicsXG4gICAgICAgICAgICAnPC9kaXY+JyxcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibm90ZS1kaW1lbnNpb24tZGlzcGxheVwiPjEgeCAxPC9kaXY+J1xuICAgICAgICAgIF0uam9pbignJylcbiAgICAgICAgfSlcbiAgICAgIF0sIHtcbiAgICAgICAgY2FsbGJhY2s6ICgkbm9kZSkgPT4ge1xuICAgICAgICAgIGNvbnN0ICRjYXRjaGVyID0gJG5vZGUuZmluZCgnLm5vdGUtZGltZW5zaW9uLXBpY2tlci1tb3VzZWNhdGNoZXInKTtcbiAgICAgICAgICAkY2F0Y2hlci5jc3Moe1xuICAgICAgICAgICAgd2lkdGg6IHRoaXMub3B0aW9ucy5pbnNlcnRUYWJsZU1heFNpemUuY29sICsgJ2VtJyxcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5vcHRpb25zLmluc2VydFRhYmxlTWF4U2l6ZS5yb3cgKyAnZW0nXG4gICAgICAgICAgfSkubW91c2Vkb3duKHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IuaW5zZXJ0VGFibGUnKSlcbiAgICAgICAgICAgIC5vbignbW91c2Vtb3ZlJywgdGhpcy50YWJsZU1vdmVIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgICB9KS5yZW5kZXIoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24ubGluaycsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmJ1dHRvbih7XG4gICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLmxpbmspLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcubGluay5saW5rICsgdGhpcy5yZXByZXNlbnRTaG9ydGN1dCgnbGlua0RpYWxvZy5zaG93JyksXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignbGlua0RpYWxvZy5zaG93JylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5waWN0dXJlJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMucGljdHVyZSksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5pbWFnZS5pbWFnZSxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdpbWFnZURpYWxvZy5zaG93JylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi52aWRlbycsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmJ1dHRvbih7XG4gICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLnZpZGVvKSxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLnZpZGVvLnZpZGVvLFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ3ZpZGVvRGlhbG9nLnNob3cnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmhyJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMubWludXMpLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcuaHIuaW5zZXJ0ICsgdGhpcy5yZXByZXNlbnRTaG9ydGN1dCgnaW5zZXJ0SG9yaXpvbnRhbFJ1bGUnKSxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IuaW5zZXJ0SG9yaXpvbnRhbFJ1bGUnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmZ1bGxzY3JlZW4nLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjbGFzc05hbWU6ICdidG4tZnVsbHNjcmVlbicsXG4gICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLmFycm93c0FsdCksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMub3B0aW9ucy5mdWxsc2NyZWVuLFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ2Z1bGxzY3JlZW4udG9nZ2xlJylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5jb2RldmlldycsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmJ1dHRvbih7XG4gICAgICAgIGNsYXNzTmFtZTogJ2J0bi1jb2RldmlldycsXG4gICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLmNvZGUpLFxuICAgICAgICB0b29sdGlwOiB0aGlzLm9wdGlvbnMuY29kZXZpZXcsXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignY29kZXZpZXcudG9nZ2xlJylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5yZWRvJywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMucmVkbyksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5oaXN0b3J5LnJlZG8gKyB0aGlzLnJlcHJlc2VudFNob3J0Y3V0KCdyZWRvJyksXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignZWRpdG9yLnJlZG8nKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLnVuZG8nLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy51bmRvKSxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLmhpc3RvcnkudW5kbyArIHRoaXMucmVwcmVzZW50U2hvcnRjdXQoJ3VuZG8nKSxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IudW5kbycpXG4gICAgICB9KS5yZW5kZXIoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24uaGVscCcsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmJ1dHRvbih7XG4gICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLnF1ZXN0aW9uKSxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5vcHRpb25zLmhlbHAsXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignaGVscERpYWxvZy5zaG93JylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIGltYWdlIDogW1xuICAgKiAgIFsnaW1hZ2VzaXplJywgWydpbWFnZVNpemUxMDAnLCAnaW1hZ2VTaXplNTAnLCAnaW1hZ2VTaXplMjUnXV0sXG4gICAqICAgWydmbG9hdCcsIFsnZmxvYXRMZWZ0JywgJ2Zsb2F0UmlnaHQnLCAnZmxvYXROb25lJyBdXSxcbiAgICogICBbJ3JlbW92ZScsIFsncmVtb3ZlTWVkaWEnXV1cbiAgICogXSxcbiAgICovXG4gIGFkZEltYWdlUG9wb3ZlckJ1dHRvbnMoKSB7XG4gICAgLy8gSW1hZ2UgU2l6ZSBCdXR0b25zXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5pbWFnZVNpemUxMDAnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjb250ZW50czogJzxzcGFuIGNsYXNzPVwibm90ZS1mb250c2l6ZS0xMFwiPjEwMCU8L3NwYW4+JyxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLmltYWdlLnJlc2l6ZUZ1bGwsXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignZWRpdG9yLnJlc2l6ZScsICcxJylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24uaW1hZ2VTaXplNTAnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjb250ZW50czogJzxzcGFuIGNsYXNzPVwibm90ZS1mb250c2l6ZS0xMFwiPjUwJTwvc3Bhbj4nLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcuaW1hZ2UucmVzaXplSGFsZixcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IucmVzaXplJywgJzAuNScpXG4gICAgICB9KS5yZW5kZXIoKTtcbiAgICB9KTtcbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmltYWdlU2l6ZTI1JywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY29udGVudHM6ICc8c3BhbiBjbGFzcz1cIm5vdGUtZm9udHNpemUtMTBcIj4yNSU8L3NwYW4+JyxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLmltYWdlLnJlc2l6ZVF1YXJ0ZXIsXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignZWRpdG9yLnJlc2l6ZScsICcwLjI1JylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgLy8gRmxvYXQgQnV0dG9uc1xuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24uZmxvYXRMZWZ0JywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMuYWxpZ25MZWZ0KSxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLmltYWdlLmZsb2F0TGVmdCxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IuZmxvYXRNZScsICdsZWZ0JylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5mbG9hdFJpZ2h0JywgKCkgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYnV0dG9uKHtcbiAgICAgICAgY29udGVudHM6IHRoaXMudWkuaWNvbih0aGlzLm9wdGlvbnMuaWNvbnMuYWxpZ25SaWdodCksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5pbWFnZS5mbG9hdFJpZ2h0LFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ2VkaXRvci5mbG9hdE1lJywgJ3JpZ2h0JylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5mbG9hdE5vbmUnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5hbGlnbkp1c3RpZnkpLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcuaW1hZ2UuZmxvYXROb25lLFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ2VkaXRvci5mbG9hdE1lJywgJ25vbmUnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICAvLyBSZW1vdmUgQnV0dG9uc1xuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24ucmVtb3ZlTWVkaWEnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy50cmFzaCksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5pbWFnZS5yZW1vdmUsXG4gICAgICAgIGNsaWNrOiB0aGlzLmNvbnRleHQuY3JlYXRlSW52b2tlSGFuZGxlcignZWRpdG9yLnJlbW92ZU1lZGlhJylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkTGlua1BvcG92ZXJCdXR0b25zKCkge1xuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24ubGlua0RpYWxvZ1Nob3cnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5saW5rKSxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLmxpbmsuZWRpdCxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdsaW5rRGlhbG9nLnNob3cnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLnVubGluaycsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmJ1dHRvbih7XG4gICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLnVubGluayksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy5saW5rLnVubGluayxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IudW5saW5rJylcbiAgICAgIH0pLnJlbmRlcigpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIHRhYmxlIDogW1xuICAgKiAgWydhZGQnLCBbJ2FkZFJvd0Rvd24nLCAnYWRkUm93VXAnLCAnYWRkQ29sTGVmdCcsICdhZGRDb2xSaWdodCddXSxcbiAgICogIFsnZGVsZXRlJywgWydkZWxldGVSb3cnLCAnZGVsZXRlQ29sJywgJ2RlbGV0ZVRhYmxlJ11dXG4gICAqIF0sXG4gICAqL1xuICBhZGRUYWJsZVBvcG92ZXJCdXR0b25zKCkge1xuICAgIHRoaXMuY29udGV4dC5tZW1vKCdidXR0b24uYWRkUm93VXAnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjbGFzc05hbWU6ICdidG4tbWQnLFxuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5yb3dBYm92ZSksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy50YWJsZS5hZGRSb3dBYm92ZSxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IuYWRkUm93JywgJ3RvcCcpXG4gICAgICB9KS5yZW5kZXIoKTtcbiAgICB9KTtcbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmFkZFJvd0Rvd24nLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjbGFzc05hbWU6ICdidG4tbWQnLFxuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5yb3dCZWxvdyksXG4gICAgICAgIHRvb2x0aXA6IHRoaXMubGFuZy50YWJsZS5hZGRSb3dCZWxvdyxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IuYWRkUm93JywgJ2JvdHRvbScpXG4gICAgICB9KS5yZW5kZXIoKTtcbiAgICB9KTtcbiAgICB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLmFkZENvbExlZnQnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjbGFzc05hbWU6ICdidG4tbWQnLFxuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5jb2xCZWZvcmUpLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcudGFibGUuYWRkQ29sTGVmdCxcbiAgICAgICAgY2xpY2s6IHRoaXMuY29udGV4dC5jcmVhdGVJbnZva2VIYW5kbGVyKCdlZGl0b3IuYWRkQ29sJywgJ2xlZnQnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5hZGRDb2xSaWdodCcsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmJ1dHRvbih7XG4gICAgICAgIGNsYXNzTmFtZTogJ2J0bi1tZCcsXG4gICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLmNvbEFmdGVyKSxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLnRhYmxlLmFkZENvbFJpZ2h0LFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ2VkaXRvci5hZGRDb2wnLCAncmlnaHQnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5kZWxldGVSb3cnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjbGFzc05hbWU6ICdidG4tbWQnLFxuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5yb3dSZW1vdmUpLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcudGFibGUuZGVsUm93LFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ2VkaXRvci5kZWxldGVSb3cnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5kZWxldGVDb2wnLCAoKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5idXR0b24oe1xuICAgICAgICBjbGFzc05hbWU6ICdidG4tbWQnLFxuICAgICAgICBjb250ZW50czogdGhpcy51aS5pY29uKHRoaXMub3B0aW9ucy5pY29ucy5jb2xSZW1vdmUpLFxuICAgICAgICB0b29sdGlwOiB0aGlzLmxhbmcudGFibGUuZGVsQ29sLFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ2VkaXRvci5kZWxldGVDb2wnKVxuICAgICAgfSkucmVuZGVyKCk7XG4gICAgfSk7XG4gICAgdGhpcy5jb250ZXh0Lm1lbW8oJ2J1dHRvbi5kZWxldGVUYWJsZScsICgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmJ1dHRvbih7XG4gICAgICAgIGNsYXNzTmFtZTogJ2J0bi1tZCcsXG4gICAgICAgIGNvbnRlbnRzOiB0aGlzLnVpLmljb24odGhpcy5vcHRpb25zLmljb25zLnRyYXNoKSxcbiAgICAgICAgdG9vbHRpcDogdGhpcy5sYW5nLnRhYmxlLmRlbFRhYmxlLFxuICAgICAgICBjbGljazogdGhpcy5jb250ZXh0LmNyZWF0ZUludm9rZUhhbmRsZXIoJ2VkaXRvci5kZWxldGVUYWJsZScpXG4gICAgICB9KS5yZW5kZXIoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGJ1aWxkKCRjb250YWluZXIsIGdyb3Vwcykge1xuICAgIGZvciAobGV0IGdyb3VwSWR4ID0gMCwgZ3JvdXBMZW4gPSBncm91cHMubGVuZ3RoOyBncm91cElkeCA8IGdyb3VwTGVuOyBncm91cElkeCsrKSB7XG4gICAgICBjb25zdCBncm91cCA9IGdyb3Vwc1tncm91cElkeF07XG4gICAgICBjb25zdCBncm91cE5hbWUgPSAkLmlzQXJyYXkoZ3JvdXApID8gZ3JvdXBbMF0gOiBncm91cDtcbiAgICAgIGNvbnN0IGJ1dHRvbnMgPSAkLmlzQXJyYXkoZ3JvdXApID8gKChncm91cC5sZW5ndGggPT09IDEpID8gW2dyb3VwWzBdXSA6IGdyb3VwWzFdKSA6IFtncm91cF07XG5cbiAgICAgIGNvbnN0ICRncm91cCA9IHRoaXMudWkuYnV0dG9uR3JvdXAoe1xuICAgICAgICBjbGFzc05hbWU6ICdub3RlLScgKyBncm91cE5hbWVcbiAgICAgIH0pLnJlbmRlcigpO1xuXG4gICAgICBmb3IgKGxldCBpZHggPSAwLCBsZW4gPSBidXR0b25zLmxlbmd0aDsgaWR4IDwgbGVuOyBpZHgrKykge1xuICAgICAgICBjb25zdCBidG4gPSB0aGlzLmNvbnRleHQubWVtbygnYnV0dG9uLicgKyBidXR0b25zW2lkeF0pO1xuICAgICAgICBpZiAoYnRuKSB7XG4gICAgICAgICAgJGdyb3VwLmFwcGVuZCh0eXBlb2YgYnRuID09PSAnZnVuY3Rpb24nID8gYnRuKHRoaXMuY29udGV4dCkgOiBidG4pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAkZ3JvdXAuYXBwZW5kVG8oJGNvbnRhaW5lcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBbJGNvbnRhaW5lcl1cbiAgICovXG4gIHVwZGF0ZUN1cnJlbnRTdHlsZSgkY29udGFpbmVyKSB7XG4gICAgY29uc3QgJGNvbnQgPSAkY29udGFpbmVyIHx8IHRoaXMuJHRvb2xiYXI7XG5cbiAgICBjb25zdCBzdHlsZUluZm8gPSB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3IuY3VycmVudFN0eWxlJyk7XG4gICAgdGhpcy51cGRhdGVCdG5TdGF0ZXMoJGNvbnQsIHtcbiAgICAgICcubm90ZS1idG4tYm9sZCc6ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHN0eWxlSW5mb1snZm9udC1ib2xkJ10gPT09ICdib2xkJztcbiAgICAgIH0sXG4gICAgICAnLm5vdGUtYnRuLWl0YWxpYyc6ICgpID0+IHtcbiAgICAgICAgcmV0dXJuIHN0eWxlSW5mb1snZm9udC1pdGFsaWMnXSA9PT0gJ2l0YWxpYyc7XG4gICAgICB9LFxuICAgICAgJy5ub3RlLWJ0bi11bmRlcmxpbmUnOiAoKSA9PiB7XG4gICAgICAgIHJldHVybiBzdHlsZUluZm9bJ2ZvbnQtdW5kZXJsaW5lJ10gPT09ICd1bmRlcmxpbmUnO1xuICAgICAgfSxcbiAgICAgICcubm90ZS1idG4tc3Vic2NyaXB0JzogKCkgPT4ge1xuICAgICAgICByZXR1cm4gc3R5bGVJbmZvWydmb250LXN1YnNjcmlwdCddID09PSAnc3Vic2NyaXB0JztcbiAgICAgIH0sXG4gICAgICAnLm5vdGUtYnRuLXN1cGVyc2NyaXB0JzogKCkgPT4ge1xuICAgICAgICByZXR1cm4gc3R5bGVJbmZvWydmb250LXN1cGVyc2NyaXB0J10gPT09ICdzdXBlcnNjcmlwdCc7XG4gICAgICB9LFxuICAgICAgJy5ub3RlLWJ0bi1zdHJpa2V0aHJvdWdoJzogKCkgPT4ge1xuICAgICAgICByZXR1cm4gc3R5bGVJbmZvWydmb250LXN0cmlrZXRocm91Z2gnXSA9PT0gJ3N0cmlrZXRocm91Z2gnO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHN0eWxlSW5mb1snZm9udC1mYW1pbHknXSkge1xuICAgICAgY29uc3QgZm9udE5hbWVzID0gc3R5bGVJbmZvWydmb250LWZhbWlseSddLnNwbGl0KCcsJykubWFwKChuYW1lKSA9PiB7XG4gICAgICAgIHJldHVybiBuYW1lLnJlcGxhY2UoL1tcXCdcXFwiXS9nLCAnJylcbiAgICAgICAgICAucmVwbGFjZSgvXFxzKyQvLCAnJylcbiAgICAgICAgICAucmVwbGFjZSgvXlxccysvLCAnJyk7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGZvbnROYW1lID0gbGlzdHMuZmluZChmb250TmFtZXMsIHRoaXMuaXNGb250SW5zdGFsbGVkLmJpbmQodGhpcykpO1xuXG4gICAgICAkY29udC5maW5kKCcuZHJvcGRvd24tZm9udG5hbWUgYScpLmVhY2goKGlkeCwgaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCAkaXRlbSA9ICQoaXRlbSk7XG4gICAgICAgIC8vIGFsd2F5cyBjb21wYXJlIHN0cmluZyB0byBhdm9pZCBjcmVhdGluZyBhbm90aGVyIGZ1bmMuXG4gICAgICAgIGNvbnN0IGlzQ2hlY2tlZCA9ICgkaXRlbS5kYXRhKCd2YWx1ZScpICsgJycpID09PSAoZm9udE5hbWUgKyAnJyk7XG4gICAgICAgICRpdGVtLnRvZ2dsZUNsYXNzKCdjaGVja2VkJywgaXNDaGVja2VkKTtcbiAgICAgIH0pO1xuICAgICAgJGNvbnQuZmluZCgnLm5vdGUtY3VycmVudC1mb250bmFtZScpLnRleHQoZm9udE5hbWUpLmNzcygnZm9udC1mYW1pbHknLCBmb250TmFtZSk7XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlSW5mb1snZm9udC1zaXplJ10pIHtcbiAgICAgIGNvbnN0IGZvbnRTaXplID0gc3R5bGVJbmZvWydmb250LXNpemUnXTtcbiAgICAgICRjb250LmZpbmQoJy5kcm9wZG93bi1mb250c2l6ZSBhJykuZWFjaCgoaWR4LCBpdGVtKSA9PiB7XG4gICAgICAgIGNvbnN0ICRpdGVtID0gJChpdGVtKTtcbiAgICAgICAgLy8gYWx3YXlzIGNvbXBhcmUgd2l0aCBzdHJpbmcgdG8gYXZvaWQgY3JlYXRpbmcgYW5vdGhlciBmdW5jLlxuICAgICAgICBjb25zdCBpc0NoZWNrZWQgPSAoJGl0ZW0uZGF0YSgndmFsdWUnKSArICcnKSA9PT0gKGZvbnRTaXplICsgJycpO1xuICAgICAgICAkaXRlbS50b2dnbGVDbGFzcygnY2hlY2tlZCcsIGlzQ2hlY2tlZCk7XG4gICAgICB9KTtcbiAgICAgICRjb250LmZpbmQoJy5ub3RlLWN1cnJlbnQtZm9udHNpemUnKS50ZXh0KGZvbnRTaXplKTtcbiAgICB9XG5cbiAgICBpZiAoc3R5bGVJbmZvWydsaW5lLWhlaWdodCddKSB7XG4gICAgICBjb25zdCBsaW5lSGVpZ2h0ID0gc3R5bGVJbmZvWydsaW5lLWhlaWdodCddO1xuICAgICAgJGNvbnQuZmluZCgnLmRyb3Bkb3duLWxpbmUtaGVpZ2h0IGxpIGEnKS5lYWNoKChpZHgsIGl0ZW0pID0+IHtcbiAgICAgICAgLy8gYWx3YXlzIGNvbXBhcmUgd2l0aCBzdHJpbmcgdG8gYXZvaWQgY3JlYXRpbmcgYW5vdGhlciBmdW5jLlxuICAgICAgICBjb25zdCBpc0NoZWNrZWQgPSAoJChpdGVtKS5kYXRhKCd2YWx1ZScpICsgJycpID09PSAobGluZUhlaWdodCArICcnKTtcbiAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBpc0NoZWNrZWQgPyAnY2hlY2tlZCcgOiAnJztcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZUJ0blN0YXRlcygkY29udGFpbmVyLCBpbmZvcykge1xuICAgICQuZWFjaChpbmZvcywgKHNlbGVjdG9yLCBwcmVkKSA9PiB7XG4gICAgICB0aGlzLnVpLnRvZ2dsZUJ0bkFjdGl2ZSgkY29udGFpbmVyLmZpbmQoc2VsZWN0b3IpLCBwcmVkKCkpO1xuICAgIH0pO1xuICB9XG5cbiAgdGFibGVNb3ZlSGFuZGxlcihldmVudCkge1xuICAgIGNvbnN0IFBYX1BFUl9FTSA9IDE4O1xuICAgIGNvbnN0ICRwaWNrZXIgPSAkKGV2ZW50LnRhcmdldC5wYXJlbnROb2RlKTsgLy8gdGFyZ2V0IGlzIG1vdXNlY2F0Y2hlclxuICAgIGNvbnN0ICRkaW1lbnNpb25EaXNwbGF5ID0gJHBpY2tlci5uZXh0KCk7XG4gICAgY29uc3QgJGNhdGNoZXIgPSAkcGlja2VyLmZpbmQoJy5ub3RlLWRpbWVuc2lvbi1waWNrZXItbW91c2VjYXRjaGVyJyk7XG4gICAgY29uc3QgJGhpZ2hsaWdodGVkID0gJHBpY2tlci5maW5kKCcubm90ZS1kaW1lbnNpb24tcGlja2VyLWhpZ2hsaWdodGVkJyk7XG4gICAgY29uc3QgJHVuaGlnaGxpZ2h0ZWQgPSAkcGlja2VyLmZpbmQoJy5ub3RlLWRpbWVuc2lvbi1waWNrZXItdW5oaWdobGlnaHRlZCcpO1xuXG4gICAgbGV0IHBvc09mZnNldDtcbiAgICAvLyBIVE1MNSB3aXRoIGpRdWVyeSAtIGUub2Zmc2V0WCBpcyB1bmRlZmluZWQgaW4gRmlyZWZveFxuICAgIGlmIChldmVudC5vZmZzZXRYID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IHBvc0NhdGNoZXIgPSAkKGV2ZW50LnRhcmdldCkub2Zmc2V0KCk7XG4gICAgICBwb3NPZmZzZXQgPSB7XG4gICAgICAgIHg6IGV2ZW50LnBhZ2VYIC0gcG9zQ2F0Y2hlci5sZWZ0LFxuICAgICAgICB5OiBldmVudC5wYWdlWSAtIHBvc0NhdGNoZXIudG9wXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBwb3NPZmZzZXQgPSB7XG4gICAgICAgIHg6IGV2ZW50Lm9mZnNldFgsXG4gICAgICAgIHk6IGV2ZW50Lm9mZnNldFlcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgZGltID0ge1xuICAgICAgYzogTWF0aC5jZWlsKHBvc09mZnNldC54IC8gUFhfUEVSX0VNKSB8fCAxLFxuICAgICAgcjogTWF0aC5jZWlsKHBvc09mZnNldC55IC8gUFhfUEVSX0VNKSB8fCAxXG4gICAgfTtcblxuICAgICRoaWdobGlnaHRlZC5jc3MoeyB3aWR0aDogZGltLmMgKyAnZW0nLCBoZWlnaHQ6IGRpbS5yICsgJ2VtJyB9KTtcbiAgICAkY2F0Y2hlci5kYXRhKCd2YWx1ZScsIGRpbS5jICsgJ3gnICsgZGltLnIpO1xuXG4gICAgaWYgKGRpbS5jID4gMyAmJiBkaW0uYyA8IHRoaXMub3B0aW9ucy5pbnNlcnRUYWJsZU1heFNpemUuY29sKSB7XG4gICAgICAkdW5oaWdobGlnaHRlZC5jc3MoeyB3aWR0aDogZGltLmMgKyAxICsgJ2VtJyB9KTtcbiAgICB9XG5cbiAgICBpZiAoZGltLnIgPiAzICYmIGRpbS5yIDwgdGhpcy5vcHRpb25zLmluc2VydFRhYmxlTWF4U2l6ZS5yb3cpIHtcbiAgICAgICR1bmhpZ2hsaWdodGVkLmNzcyh7IGhlaWdodDogZGltLnIgKyAxICsgJ2VtJyB9KTtcbiAgICB9XG5cbiAgICAkZGltZW5zaW9uRGlzcGxheS5odG1sKGRpbS5jICsgJyB4ICcgKyBkaW0ucik7XG4gIH1cbn1cbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUb29sYmFyIHtcbiAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG5cbiAgICB0aGlzLiR3aW5kb3cgPSAkKHdpbmRvdyk7XG4gICAgdGhpcy4kZG9jdW1lbnQgPSAkKGRvY3VtZW50KTtcblxuICAgIHRoaXMudWkgPSAkLnN1bW1lcm5vdGUudWk7XG4gICAgdGhpcy4kbm90ZSA9IGNvbnRleHQubGF5b3V0SW5mby5ub3RlO1xuICAgIHRoaXMuJGVkaXRvciA9IGNvbnRleHQubGF5b3V0SW5mby5lZGl0b3I7XG4gICAgdGhpcy4kdG9vbGJhciA9IGNvbnRleHQubGF5b3V0SW5mby50b29sYmFyO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcblxuICAgIHRoaXMuZm9sbG93U2Nyb2xsID0gdGhpcy5mb2xsb3dTY3JvbGwuYmluZCh0aGlzKTtcbiAgfVxuXG4gIHNob3VsZEluaXRpYWxpemUoKSB7XG4gICAgcmV0dXJuICF0aGlzLm9wdGlvbnMuYWlyTW9kZTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy5vcHRpb25zLnRvb2xiYXIgPSB0aGlzLm9wdGlvbnMudG9vbGJhciB8fCBbXTtcblxuICAgIGlmICghdGhpcy5vcHRpb25zLnRvb2xiYXIubGVuZ3RoKSB7XG4gICAgICB0aGlzLiR0b29sYmFyLmhpZGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnYnV0dG9ucy5idWlsZCcsIHRoaXMuJHRvb2xiYXIsIHRoaXMub3B0aW9ucy50b29sYmFyKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnRvb2xiYXJDb250YWluZXIpIHtcbiAgICAgIHRoaXMuJHRvb2xiYXIuYXBwZW5kVG8odGhpcy5vcHRpb25zLnRvb2xiYXJDb250YWluZXIpO1xuICAgIH1cblxuICAgIHRoaXMuY2hhbmdlQ29udGFpbmVyKGZhbHNlKTtcblxuICAgIHRoaXMuJG5vdGUub24oJ3N1bW1lcm5vdGUua2V5dXAgc3VtbWVybm90ZS5tb3VzZXVwIHN1bW1lcm5vdGUuY2hhbmdlJywgKCkgPT4ge1xuICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnYnV0dG9ucy51cGRhdGVDdXJyZW50U3R5bGUnKTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2J1dHRvbnMudXBkYXRlQ3VycmVudFN0eWxlJyk7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5mb2xsb3dpbmdUb29sYmFyKSB7XG4gICAgICB0aGlzLiR3aW5kb3cub24oJ3Njcm9sbCByZXNpemUnLCB0aGlzLmZvbGxvd1Njcm9sbCk7XG4gICAgfVxuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLiR0b29sYmFyLmNoaWxkcmVuKCkucmVtb3ZlKCk7XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmZvbGxvd2luZ1Rvb2xiYXIpIHtcbiAgICAgIHRoaXMuJHdpbmRvdy5vZmYoJ3Njcm9sbCByZXNpemUnLCB0aGlzLmZvbGxvd1Njcm9sbCk7XG4gICAgfVxuICB9XG5cbiAgZm9sbG93U2Nyb2xsKCkge1xuICAgIGlmICh0aGlzLiRlZGl0b3IuaGFzQ2xhc3MoJ2Z1bGxzY3JlZW4nKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0ICR0b29sYmFyV3JhcHBlciA9IHRoaXMuJHRvb2xiYXIucGFyZW50KCcubm90ZS10b29sYmFyLXdyYXBwZXInKTtcbiAgICBjb25zdCBlZGl0b3JIZWlnaHQgPSB0aGlzLiRlZGl0b3Iub3V0ZXJIZWlnaHQoKTtcbiAgICBjb25zdCBlZGl0b3JXaWR0aCA9IHRoaXMuJGVkaXRvci53aWR0aCgpO1xuXG4gICAgY29uc3QgdG9vbGJhckhlaWdodCA9IHRoaXMuJHRvb2xiYXIuaGVpZ2h0KCk7XG4gICAgJHRvb2xiYXJXcmFwcGVyLmNzcyh7XG4gICAgICBoZWlnaHQ6IHRvb2xiYXJIZWlnaHRcbiAgICB9KTtcblxuICAgIC8vIGNoZWNrIGlmIHRoZSB3ZWIgYXBwIGlzIGN1cnJlbnRseSB1c2luZyBhbm90aGVyIHN0YXRpYyBiYXJcbiAgICBsZXQgb3RoZXJCYXJIZWlnaHQgPSAwO1xuICAgIGlmICh0aGlzLm9wdGlvbnMub3RoZXJTdGF0aWNCYXIpIHtcbiAgICAgIG90aGVyQmFySGVpZ2h0ID0gJCh0aGlzLm9wdGlvbnMub3RoZXJTdGF0aWNCYXIpLm91dGVySGVpZ2h0KCk7XG4gICAgfVxuXG4gICAgY29uc3QgY3VycmVudE9mZnNldCA9IHRoaXMuJGRvY3VtZW50LnNjcm9sbFRvcCgpO1xuICAgIGNvbnN0IGVkaXRvck9mZnNldFRvcCA9IHRoaXMuJGVkaXRvci5vZmZzZXQoKS50b3A7XG4gICAgY29uc3QgZWRpdG9yT2Zmc2V0Qm90dG9tID0gZWRpdG9yT2Zmc2V0VG9wICsgZWRpdG9ySGVpZ2h0O1xuICAgIGNvbnN0IGFjdGl2YXRlT2Zmc2V0ID0gZWRpdG9yT2Zmc2V0VG9wIC0gb3RoZXJCYXJIZWlnaHQ7XG4gICAgY29uc3QgZGVhY3RpdmF0ZU9mZnNldEJvdHRvbSA9IGVkaXRvck9mZnNldEJvdHRvbSAtIG90aGVyQmFySGVpZ2h0IC0gdG9vbGJhckhlaWdodDtcblxuICAgIGlmICgoY3VycmVudE9mZnNldCA+IGFjdGl2YXRlT2Zmc2V0KSAmJiAoY3VycmVudE9mZnNldCA8IGRlYWN0aXZhdGVPZmZzZXRCb3R0b20pKSB7XG4gICAgICB0aGlzLiR0b29sYmFyLmNzcyh7XG4gICAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICAgICB0b3A6IG90aGVyQmFySGVpZ2h0LFxuICAgICAgICB3aWR0aDogZWRpdG9yV2lkdGhcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiR0b29sYmFyLmNzcyh7XG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICB0b3A6IDAsXG4gICAgICAgIHdpZHRoOiAnMTAwJSdcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGNoYW5nZUNvbnRhaW5lcihpc0Z1bGxzY3JlZW4pIHtcbiAgICBpZiAoaXNGdWxsc2NyZWVuKSB7XG4gICAgICB0aGlzLiR0b29sYmFyLnByZXBlbmRUbyh0aGlzLiRlZGl0b3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLnRvb2xiYXJDb250YWluZXIpIHtcbiAgICAgICAgdGhpcy4kdG9vbGJhci5hcHBlbmRUbyh0aGlzLm9wdGlvbnMudG9vbGJhckNvbnRhaW5lcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlRnVsbHNjcmVlbihpc0Z1bGxzY3JlZW4pIHtcbiAgICB0aGlzLnVpLnRvZ2dsZUJ0bkFjdGl2ZSh0aGlzLiR0b29sYmFyLmZpbmQoJy5idG4tZnVsbHNjcmVlbicpLCBpc0Z1bGxzY3JlZW4pO1xuXG4gICAgdGhpcy5jaGFuZ2VDb250YWluZXIoaXNGdWxsc2NyZWVuKTtcbiAgfVxuXG4gIHVwZGF0ZUNvZGV2aWV3KGlzQ29kZXZpZXcpIHtcbiAgICB0aGlzLnVpLnRvZ2dsZUJ0bkFjdGl2ZSh0aGlzLiR0b29sYmFyLmZpbmQoJy5idG4tY29kZXZpZXcnKSwgaXNDb2Rldmlldyk7XG4gICAgaWYgKGlzQ29kZXZpZXcpIHtcbiAgICAgIHRoaXMuZGVhY3RpdmF0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFjdGl2YXRlKCk7XG4gICAgfVxuICB9XG5cbiAgYWN0aXZhdGUoaXNJbmNsdWRlQ29kZXZpZXcpIHtcbiAgICBsZXQgJGJ0biA9IHRoaXMuJHRvb2xiYXIuZmluZCgnYnV0dG9uJyk7XG4gICAgaWYgKCFpc0luY2x1ZGVDb2Rldmlldykge1xuICAgICAgJGJ0biA9ICRidG4ubm90KCcuYnRuLWNvZGV2aWV3Jyk7XG4gICAgfVxuICAgIHRoaXMudWkudG9nZ2xlQnRuKCRidG4sIHRydWUpO1xuICB9XG5cbiAgZGVhY3RpdmF0ZShpc0luY2x1ZGVDb2Rldmlldykge1xuICAgIGxldCAkYnRuID0gdGhpcy4kdG9vbGJhci5maW5kKCdidXR0b24nKTtcbiAgICBpZiAoIWlzSW5jbHVkZUNvZGV2aWV3KSB7XG4gICAgICAkYnRuID0gJGJ0bi5ub3QoJy5idG4tY29kZXZpZXcnKTtcbiAgICB9XG4gICAgdGhpcy51aS50b2dnbGVCdG4oJGJ0biwgZmFsc2UpO1xuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGVudiBmcm9tICcuLi9jb3JlL2Vudic7XG5pbXBvcnQga2V5IGZyb20gJy4uL2NvcmUva2V5JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGlua0RpYWxvZyB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuXG4gICAgdGhpcy51aSA9ICQuc3VtbWVybm90ZS51aTtcbiAgICB0aGlzLiRib2R5ID0gJChkb2N1bWVudC5ib2R5KTtcbiAgICB0aGlzLiRlZGl0b3IgPSBjb250ZXh0LmxheW91dEluZm8uZWRpdG9yO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcbiAgICB0aGlzLmxhbmcgPSB0aGlzLm9wdGlvbnMubGFuZ0luZm87XG5cbiAgICBjb250ZXh0Lm1lbW8oJ2hlbHAubGlua0RpYWxvZy5zaG93JywgdGhpcy5vcHRpb25zLmxhbmdJbmZvLmhlbHBbJ2xpbmtEaWFsb2cuc2hvdyddKTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgY29uc3QgJGNvbnRhaW5lciA9IHRoaXMub3B0aW9ucy5kaWFsb2dzSW5Cb2R5ID8gdGhpcy4kYm9keSA6IHRoaXMuJGVkaXRvcjtcblxuICAgIGNvbnN0IGJvZHkgPSBbXG4gICAgICAnPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgbm90ZS1mb3JtLWdyb3VwXCI+JyxcbiAgICAgIGA8bGFiZWwgY2xhc3M9XCJub3RlLWZvcm0tbGFiZWxcIj4ke3RoaXMubGFuZy5saW5rLnRleHRUb0Rpc3BsYXl9PC9sYWJlbD5gLFxuICAgICAgJzxpbnB1dCBjbGFzcz1cIm5vdGUtbGluay10ZXh0IGZvcm0tY29udHJvbCBub3RlLWZvcm0tY29udHJvbCAgbm90ZS1pbnB1dFwiIHR5cGU9XCJ0ZXh0XCIgLz4nLFxuICAgICAgJzwvZGl2PicsXG4gICAgICAnPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgbm90ZS1mb3JtLWdyb3VwXCI+JyxcbiAgICAgIGA8bGFiZWwgY2xhc3M9XCJub3RlLWZvcm0tbGFiZWxcIj4ke3RoaXMubGFuZy5saW5rLnVybH08L2xhYmVsPmAsXG4gICAgICAnPGlucHV0IGNsYXNzPVwibm90ZS1saW5rLXVybCBmb3JtLWNvbnRyb2wgbm90ZS1mb3JtLWNvbnRyb2wgbm90ZS1pbnB1dFwiIHR5cGU9XCJ0ZXh0XCIgdmFsdWU9XCJodHRwOi8vXCIgLz4nLFxuICAgICAgJzwvZGl2PicsXG4gICAgICAhdGhpcy5vcHRpb25zLmRpc2FibGVMaW5rVGFyZ2V0XG4gICAgICAgID8gJCgnPGRpdi8+JykuYXBwZW5kKHRoaXMudWkuY2hlY2tib3goe1xuICAgICAgICAgIGlkOiAnc24tY2hlY2tib3gtb3Blbi1pbi1uZXctd2luZG93JyxcbiAgICAgICAgICB0ZXh0OiB0aGlzLmxhbmcubGluay5vcGVuSW5OZXdXaW5kb3csXG4gICAgICAgICAgY2hlY2tlZDogdHJ1ZVxuICAgICAgICB9KS5yZW5kZXIoKSkuaHRtbCgpXG4gICAgICAgIDogJydcbiAgICBdLmpvaW4oJycpO1xuXG4gICAgY29uc3QgYnV0dG9uQ2xhc3MgPSAnYnRuIGJ0bi1wcmltYXJ5IG5vdGUtYnRuIG5vdGUtYnRuLXByaW1hcnkgbm90ZS1saW5rLWJ0bic7XG4gICAgY29uc3QgZm9vdGVyID0gYDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGhyZWY9XCIjXCIgY2xhc3M9XCIke2J1dHRvbkNsYXNzfVwiIGRpc2FibGVkPiR7dGhpcy5sYW5nLmxpbmsuaW5zZXJ0fTwvYnV0dG9uPmA7XG5cbiAgICB0aGlzLiRkaWFsb2cgPSB0aGlzLnVpLmRpYWxvZyh7XG4gICAgICBjbGFzc05hbWU6ICdsaW5rLWRpYWxvZycsXG4gICAgICB0aXRsZTogdGhpcy5sYW5nLmxpbmsuaW5zZXJ0LFxuICAgICAgZmFkZTogdGhpcy5vcHRpb25zLmRpYWxvZ3NGYWRlLFxuICAgICAgYm9keTogYm9keSxcbiAgICAgIGZvb3RlcjogZm9vdGVyXG4gICAgfSkucmVuZGVyKCkuYXBwZW5kVG8oJGNvbnRhaW5lcik7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMudWkuaGlkZURpYWxvZyh0aGlzLiRkaWFsb2cpO1xuICAgIHRoaXMuJGRpYWxvZy5yZW1vdmUoKTtcbiAgfVxuXG4gIGJpbmRFbnRlcktleSgkaW5wdXQsICRidG4pIHtcbiAgICAkaW5wdXQub24oJ2tleXByZXNzJywgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0ga2V5LmNvZGUuRU5URVIpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJGJ0bi50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIHRvZ2dsZSB1cGRhdGUgYnV0dG9uXG4gICAqL1xuICB0b2dnbGVMaW5rQnRuKCRsaW5rQnRuLCAkbGlua1RleHQsICRsaW5rVXJsKSB7XG4gICAgdGhpcy51aS50b2dnbGVCdG4oJGxpbmtCdG4sICRsaW5rVGV4dC52YWwoKSAmJiAkbGlua1VybC52YWwoKSk7XG4gIH1cblxuICAvKipcbiAgICogU2hvdyBsaW5rIGRpYWxvZyBhbmQgc2V0IGV2ZW50IGhhbmRsZXJzIG9uIGRpYWxvZyBjb250cm9scy5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGxpbmtJbmZvXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqL1xuICBzaG93TGlua0RpYWxvZyhsaW5rSW5mbykge1xuICAgIHJldHVybiAkLkRlZmVycmVkKChkZWZlcnJlZCkgPT4ge1xuICAgICAgY29uc3QgJGxpbmtUZXh0ID0gdGhpcy4kZGlhbG9nLmZpbmQoJy5ub3RlLWxpbmstdGV4dCcpO1xuICAgICAgY29uc3QgJGxpbmtVcmwgPSB0aGlzLiRkaWFsb2cuZmluZCgnLm5vdGUtbGluay11cmwnKTtcbiAgICAgIGNvbnN0ICRsaW5rQnRuID0gdGhpcy4kZGlhbG9nLmZpbmQoJy5ub3RlLWxpbmstYnRuJyk7XG4gICAgICBjb25zdCAkb3BlbkluTmV3V2luZG93ID0gdGhpcy4kZGlhbG9nLmZpbmQoJ2lucHV0W3R5cGU9Y2hlY2tib3hdJyk7XG5cbiAgICAgIHRoaXMudWkub25EaWFsb2dTaG93bih0aGlzLiRkaWFsb2csICgpID0+IHtcbiAgICAgICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnZGlhbG9nLnNob3duJyk7XG5cbiAgICAgICAgLy8gaWYgbm8gdXJsIHdhcyBnaXZlbiwgY29weSB0ZXh0IHRvIHVybFxuICAgICAgICBpZiAoIWxpbmtJbmZvLnVybCkge1xuICAgICAgICAgIGxpbmtJbmZvLnVybCA9IGxpbmtJbmZvLnRleHQ7XG4gICAgICAgIH1cblxuICAgICAgICAkbGlua1RleHQudmFsKGxpbmtJbmZvLnRleHQpO1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZUxpbmtUZXh0VXBkYXRlID0gKCkgPT4ge1xuICAgICAgICAgIHRoaXMudG9nZ2xlTGlua0J0bigkbGlua0J0biwgJGxpbmtUZXh0LCAkbGlua1VybCk7XG4gICAgICAgICAgLy8gaWYgbGlua3RleHQgd2FzIG1vZGlmaWVkIGJ5IGtleXVwLFxuICAgICAgICAgIC8vIHN0b3AgY2xvbmluZyB0ZXh0IGZyb20gbGlua1VybFxuICAgICAgICAgIGxpbmtJbmZvLnRleHQgPSAkbGlua1RleHQudmFsKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJGxpbmtUZXh0Lm9uKCdpbnB1dCcsIGhhbmRsZUxpbmtUZXh0VXBkYXRlKS5vbigncGFzdGUnLCAoKSA9PiB7XG4gICAgICAgICAgc2V0VGltZW91dChoYW5kbGVMaW5rVGV4dFVwZGF0ZSwgMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGhhbmRsZUxpbmtVcmxVcGRhdGUgPSAoKSA9PiB7XG4gICAgICAgICAgdGhpcy50b2dnbGVMaW5rQnRuKCRsaW5rQnRuLCAkbGlua1RleHQsICRsaW5rVXJsKTtcbiAgICAgICAgICAvLyBkaXNwbGF5IHNhbWUgbGluayBvbiBgVGV4dCB0byBkaXNwbGF5YCBpbnB1dFxuICAgICAgICAgIC8vIHdoZW4gY3JlYXRlIGEgbmV3IGxpbmtcbiAgICAgICAgICBpZiAoIWxpbmtJbmZvLnRleHQpIHtcbiAgICAgICAgICAgICRsaW5rVGV4dC52YWwoJGxpbmtVcmwudmFsKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkbGlua1VybC5vbignaW5wdXQnLCBoYW5kbGVMaW5rVXJsVXBkYXRlKS5vbigncGFzdGUnLCAoKSA9PiB7XG4gICAgICAgICAgc2V0VGltZW91dChoYW5kbGVMaW5rVXJsVXBkYXRlLCAwKTtcbiAgICAgICAgfSkudmFsKGxpbmtJbmZvLnVybCk7XG5cbiAgICAgICAgaWYgKCFlbnYuaXNTdXBwb3J0VG91Y2gpIHtcbiAgICAgICAgICAkbGlua1VybC50cmlnZ2VyKCdmb2N1cycpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50b2dnbGVMaW5rQnRuKCRsaW5rQnRuLCAkbGlua1RleHQsICRsaW5rVXJsKTtcbiAgICAgICAgdGhpcy5iaW5kRW50ZXJLZXkoJGxpbmtVcmwsICRsaW5rQnRuKTtcbiAgICAgICAgdGhpcy5iaW5kRW50ZXJLZXkoJGxpbmtUZXh0LCAkbGlua0J0bik7XG5cbiAgICAgICAgY29uc3QgaXNDaGVja2VkID0gbGlua0luZm8uaXNOZXdXaW5kb3cgIT09IHVuZGVmaW5lZFxuICAgICAgICAgID8gbGlua0luZm8uaXNOZXdXaW5kb3cgOiB0aGlzLmNvbnRleHQub3B0aW9ucy5saW5rVGFyZ2V0Qmxhbms7XG5cbiAgICAgICAgJG9wZW5Jbk5ld1dpbmRvdy5wcm9wKCdjaGVja2VkJywgaXNDaGVja2VkKTtcblxuICAgICAgICAkbGlua0J0bi5vbmUoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoe1xuICAgICAgICAgICAgcmFuZ2U6IGxpbmtJbmZvLnJhbmdlLFxuICAgICAgICAgICAgdXJsOiAkbGlua1VybC52YWwoKSxcbiAgICAgICAgICAgIHRleHQ6ICRsaW5rVGV4dC52YWwoKSxcbiAgICAgICAgICAgIGlzTmV3V2luZG93OiAkb3BlbkluTmV3V2luZG93LmlzKCc6Y2hlY2tlZCcpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy51aS5oaWRlRGlhbG9nKHRoaXMuJGRpYWxvZyk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMudWkub25EaWFsb2dIaWRkZW4odGhpcy4kZGlhbG9nLCAoKSA9PiB7XG4gICAgICAgIC8vIGRldGFjaCBldmVudHNcbiAgICAgICAgJGxpbmtUZXh0Lm9mZignaW5wdXQgcGFzdGUga2V5cHJlc3MnKTtcbiAgICAgICAgJGxpbmtVcmwub2ZmKCdpbnB1dCBwYXN0ZSBrZXlwcmVzcycpO1xuICAgICAgICAkbGlua0J0bi5vZmYoJ2NsaWNrJyk7XG5cbiAgICAgICAgaWYgKGRlZmVycmVkLnN0YXRlKCkgPT09ICdwZW5kaW5nJykge1xuICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy51aS5zaG93RGlhbG9nKHRoaXMuJGRpYWxvZyk7XG4gICAgfSkucHJvbWlzZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBsYXlvdXRJbmZvXG4gICAqL1xuICBzaG93KCkge1xuICAgIGNvbnN0IGxpbmtJbmZvID0gdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLmdldExpbmtJbmZvJyk7XG5cbiAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3Iuc2F2ZVJhbmdlJyk7XG4gICAgdGhpcy5zaG93TGlua0RpYWxvZyhsaW5rSW5mbykudGhlbigobGlua0luZm8pID0+IHtcbiAgICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5yZXN0b3JlUmFuZ2UnKTtcbiAgICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5jcmVhdGVMaW5rJywgbGlua0luZm8pO1xuICAgIH0pLmZhaWwoKCkgPT4ge1xuICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLnJlc3RvcmVSYW5nZScpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGxpc3RzIGZyb20gJy4uL2NvcmUvbGlzdHMnO1xuaW1wb3J0IGRvbSBmcm9tICcuLi9jb3JlL2RvbSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpbmtQb3BvdmVyIHtcbiAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG5cbiAgICB0aGlzLnVpID0gJC5zdW1tZXJub3RlLnVpO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcbiAgICB0aGlzLmV2ZW50cyA9IHtcbiAgICAgICdzdW1tZXJub3RlLmtleXVwIHN1bW1lcm5vdGUubW91c2V1cCBzdW1tZXJub3RlLmNoYW5nZSBzdW1tZXJub3RlLnNjcm9sbCc6ICgpID0+IHtcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgIH0sXG4gICAgICAnc3VtbWVybm90ZS5kaXNhYmxlIHN1bW1lcm5vdGUuZGlhbG9nLnNob3duJzogKCkgPT4ge1xuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgc2hvdWxkSW5pdGlhbGl6ZSgpIHtcbiAgICByZXR1cm4gIWxpc3RzLmlzRW1wdHkodGhpcy5vcHRpb25zLnBvcG92ZXIubGluayk7XG4gIH1cblxuICBpbml0aWFsaXplKCkge1xuICAgIHRoaXMuJHBvcG92ZXIgPSB0aGlzLnVpLnBvcG92ZXIoe1xuICAgICAgY2xhc3NOYW1lOiAnbm90ZS1saW5rLXBvcG92ZXInLFxuICAgICAgY2FsbGJhY2s6ICgkbm9kZSkgPT4ge1xuICAgICAgICBjb25zdCAkY29udGVudCA9ICRub2RlLmZpbmQoJy5wb3BvdmVyLWNvbnRlbnQsLm5vdGUtcG9wb3Zlci1jb250ZW50Jyk7XG4gICAgICAgICRjb250ZW50LnByZXBlbmQoJzxzcGFuPjxhIHRhcmdldD1cIl9ibGFua1wiPjwvYT4mbmJzcDs8L3NwYW4+Jyk7XG4gICAgICB9XG4gICAgfSkucmVuZGVyKCkuYXBwZW5kVG8odGhpcy5vcHRpb25zLmNvbnRhaW5lcik7XG4gICAgY29uc3QgJGNvbnRlbnQgPSB0aGlzLiRwb3BvdmVyLmZpbmQoJy5wb3BvdmVyLWNvbnRlbnQsLm5vdGUtcG9wb3Zlci1jb250ZW50Jyk7XG5cbiAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdidXR0b25zLmJ1aWxkJywgJGNvbnRlbnQsIHRoaXMub3B0aW9ucy5wb3BvdmVyLmxpbmspO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLiRwb3BvdmVyLnJlbW92ZSgpO1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIC8vIFByZXZlbnQgZm9jdXNpbmcgb24gZWRpdGFibGUgd2hlbiBpbnZva2UoJ2NvZGUnKSBpcyBleGVjdXRlZFxuICAgIGlmICghdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLmhhc0ZvY3VzJykpIHtcbiAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHJuZyA9IHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5jcmVhdGVSYW5nZScpO1xuICAgIGlmIChybmcuaXNDb2xsYXBzZWQoKSAmJiBybmcuaXNPbkFuY2hvcigpKSB7XG4gICAgICBjb25zdCBhbmNob3IgPSBkb20uYW5jZXN0b3Iocm5nLnNjLCBkb20uaXNBbmNob3IpO1xuICAgICAgY29uc3QgaHJlZiA9ICQoYW5jaG9yKS5hdHRyKCdocmVmJyk7XG4gICAgICB0aGlzLiRwb3BvdmVyLmZpbmQoJ2EnKS5hdHRyKCdocmVmJywgaHJlZikuaHRtbChocmVmKTtcblxuICAgICAgY29uc3QgcG9zID0gZG9tLnBvc0Zyb21QbGFjZWhvbGRlcihhbmNob3IpO1xuICAgICAgdGhpcy4kcG9wb3Zlci5jc3Moe1xuICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICBsZWZ0OiBwb3MubGVmdCxcbiAgICAgICAgdG9wOiBwb3MudG9wXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfVxuICB9XG5cbiAgaGlkZSgpIHtcbiAgICB0aGlzLiRwb3BvdmVyLmhpZGUoKTtcbiAgfVxufVxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBlbnYgZnJvbSAnLi4vY29yZS9lbnYnO1xuaW1wb3J0IGtleSBmcm9tICcuLi9jb3JlL2tleSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEltYWdlRGlhbG9nIHtcbiAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgdGhpcy51aSA9ICQuc3VtbWVybm90ZS51aTtcbiAgICB0aGlzLiRib2R5ID0gJChkb2N1bWVudC5ib2R5KTtcbiAgICB0aGlzLiRlZGl0b3IgPSBjb250ZXh0LmxheW91dEluZm8uZWRpdG9yO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcbiAgICB0aGlzLmxhbmcgPSB0aGlzLm9wdGlvbnMubGFuZ0luZm87XG4gIH1cblxuICBpbml0aWFsaXplKCkge1xuICAgIGNvbnN0ICRjb250YWluZXIgPSB0aGlzLm9wdGlvbnMuZGlhbG9nc0luQm9keSA/IHRoaXMuJGJvZHkgOiB0aGlzLiRlZGl0b3I7XG5cbiAgICBsZXQgaW1hZ2VMaW1pdGF0aW9uID0gJyc7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5tYXhpbXVtSW1hZ2VGaWxlU2l6ZSkge1xuICAgICAgY29uc3QgdW5pdCA9IE1hdGguZmxvb3IoTWF0aC5sb2codGhpcy5vcHRpb25zLm1heGltdW1JbWFnZUZpbGVTaXplKSAvIE1hdGgubG9nKDEwMjQpKTtcbiAgICAgIGNvbnN0IHJlYWRhYmxlU2l6ZSA9ICh0aGlzLm9wdGlvbnMubWF4aW11bUltYWdlRmlsZVNpemUgLyBNYXRoLnBvdygxMDI0LCB1bml0KSkudG9GaXhlZCgyKSAqIDEgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICcgJyArICcgS01HVFAnW3VuaXRdICsgJ0InO1xuICAgICAgaW1hZ2VMaW1pdGF0aW9uID0gYDxzbWFsbD4ke3RoaXMubGFuZy5pbWFnZS5tYXhpbXVtRmlsZVNpemUgKyAnIDogJyArIHJlYWRhYmxlU2l6ZX08L3NtYWxsPmA7XG4gICAgfVxuXG4gICAgY29uc3QgYm9keSA9IFtcbiAgICAgICc8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCBub3RlLWZvcm0tZ3JvdXAgbm90ZS1ncm91cC1zZWxlY3QtZnJvbS1maWxlc1wiPicsXG4gICAgICAnPGxhYmVsIGNsYXNzPVwibm90ZS1mb3JtLWxhYmVsXCI+JyArIHRoaXMubGFuZy5pbWFnZS5zZWxlY3RGcm9tRmlsZXMgKyAnPC9sYWJlbD4nLFxuICAgICAgJzxpbnB1dCBjbGFzcz1cIm5vdGUtaW1hZ2UtaW5wdXQgbm90ZS1mb3JtLWNvbnRyb2wgbm90ZS1pbnB1dFwiICcsXG4gICAgICAnIHR5cGU9XCJmaWxlXCIgbmFtZT1cImZpbGVzXCIgYWNjZXB0PVwiaW1hZ2UvKlwiIG11bHRpcGxlPVwibXVsdGlwbGVcIiAvPicsXG4gICAgICBpbWFnZUxpbWl0YXRpb24sXG4gICAgICAnPC9kaXY+JyxcbiAgICAgICc8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCBub3RlLWdyb3VwLWltYWdlLXVybFwiIHN0eWxlPVwib3ZlcmZsb3c6YXV0bztcIj4nLFxuICAgICAgJzxsYWJlbCBjbGFzcz1cIm5vdGUtZm9ybS1sYWJlbFwiPicgKyB0aGlzLmxhbmcuaW1hZ2UudXJsICsgJzwvbGFiZWw+JyxcbiAgICAgICc8aW5wdXQgY2xhc3M9XCJub3RlLWltYWdlLXVybCBmb3JtLWNvbnRyb2wgbm90ZS1mb3JtLWNvbnRyb2wgbm90ZS1pbnB1dCAnLFxuICAgICAgJyBjb2wtbWQtMTJcIiB0eXBlPVwidGV4dFwiIC8+JyxcbiAgICAgICc8L2Rpdj4nXG4gICAgXS5qb2luKCcnKTtcbiAgICBjb25zdCBidXR0b25DbGFzcyA9ICdidG4gYnRuLXByaW1hcnkgbm90ZS1idG4gbm90ZS1idG4tcHJpbWFyeSBub3RlLWltYWdlLWJ0bic7XG4gICAgY29uc3QgZm9vdGVyID0gYDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGhyZWY9XCIjXCIgY2xhc3M9XCIke2J1dHRvbkNsYXNzfVwiIGRpc2FibGVkPiR7dGhpcy5sYW5nLmltYWdlLmluc2VydH08L2J1dHRvbj5gO1xuXG4gICAgdGhpcy4kZGlhbG9nID0gdGhpcy51aS5kaWFsb2coe1xuICAgICAgdGl0bGU6IHRoaXMubGFuZy5pbWFnZS5pbnNlcnQsXG4gICAgICBmYWRlOiB0aGlzLm9wdGlvbnMuZGlhbG9nc0ZhZGUsXG4gICAgICBib2R5OiBib2R5LFxuICAgICAgZm9vdGVyOiBmb290ZXJcbiAgICB9KS5yZW5kZXIoKS5hcHBlbmRUbygkY29udGFpbmVyKTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy51aS5oaWRlRGlhbG9nKHRoaXMuJGRpYWxvZyk7XG4gICAgdGhpcy4kZGlhbG9nLnJlbW92ZSgpO1xuICB9XG5cbiAgYmluZEVudGVyS2V5KCRpbnB1dCwgJGJ0bikge1xuICAgICRpbnB1dC5vbigna2V5cHJlc3MnLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBrZXkuY29kZS5FTlRFUikge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkYnRuLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBzaG93KCkge1xuICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5zYXZlUmFuZ2UnKTtcbiAgICB0aGlzLnNob3dJbWFnZURpYWxvZygpLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIC8vIFt3b3JrYXJvdW5kXSBoaWRlIGRpYWxvZyBiZWZvcmUgcmVzdG9yZSByYW5nZSBmb3IgSUUgcmFuZ2UgZm9jdXNcbiAgICAgIHRoaXMudWkuaGlkZURpYWxvZyh0aGlzLiRkaWFsb2cpO1xuICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLnJlc3RvcmVSYW5nZScpO1xuXG4gICAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7IC8vIGltYWdlIHVybFxuICAgICAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3IuaW5zZXJ0SW1hZ2UnLCBkYXRhKTtcbiAgICAgIH0gZWxzZSB7IC8vIGFycmF5IG9mIGZpbGVzXG4gICAgICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5pbnNlcnRJbWFnZXNPckNhbGxiYWNrJywgZGF0YSk7XG4gICAgICB9XG4gICAgfSkuZmFpbCgoKSA9PiB7XG4gICAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3IucmVzdG9yZVJhbmdlJyk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogc2hvdyBpbWFnZSBkaWFsb2dcbiAgICpcbiAgICogQHBhcmFtIHtqUXVlcnl9ICRkaWFsb2dcbiAgICogQHJldHVybiB7UHJvbWlzZX1cbiAgICovXG4gIHNob3dJbWFnZURpYWxvZygpIHtcbiAgICByZXR1cm4gJC5EZWZlcnJlZCgoZGVmZXJyZWQpID0+IHtcbiAgICAgIGNvbnN0ICRpbWFnZUlucHV0ID0gdGhpcy4kZGlhbG9nLmZpbmQoJy5ub3RlLWltYWdlLWlucHV0Jyk7XG4gICAgICBjb25zdCAkaW1hZ2VVcmwgPSB0aGlzLiRkaWFsb2cuZmluZCgnLm5vdGUtaW1hZ2UtdXJsJyk7XG4gICAgICBjb25zdCAkaW1hZ2VCdG4gPSB0aGlzLiRkaWFsb2cuZmluZCgnLm5vdGUtaW1hZ2UtYnRuJyk7XG5cbiAgICAgIHRoaXMudWkub25EaWFsb2dTaG93bih0aGlzLiRkaWFsb2csICgpID0+IHtcbiAgICAgICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnZGlhbG9nLnNob3duJyk7XG5cbiAgICAgICAgLy8gQ2xvbmluZyBpbWFnZUlucHV0IHRvIGNsZWFyIGVsZW1lbnQuXG4gICAgICAgICRpbWFnZUlucHV0LnJlcGxhY2VXaXRoKCRpbWFnZUlucHV0LmNsb25lKCkub24oJ2NoYW5nZScsIChldmVudCkgPT4ge1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZXZlbnQudGFyZ2V0LmZpbGVzIHx8IGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgICAgIH0pLnZhbCgnJykpO1xuXG4gICAgICAgICRpbWFnZUJ0bi5jbGljaygoZXZlbnQpID0+IHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgkaW1hZ2VVcmwudmFsKCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkaW1hZ2VVcmwub24oJ2tleXVwIHBhc3RlJywgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHVybCA9ICRpbWFnZVVybC52YWwoKTtcbiAgICAgICAgICB0aGlzLnVpLnRvZ2dsZUJ0bigkaW1hZ2VCdG4sIHVybCk7XG4gICAgICAgIH0pLnZhbCgnJyk7XG5cbiAgICAgICAgaWYgKCFlbnYuaXNTdXBwb3J0VG91Y2gpIHtcbiAgICAgICAgICAkaW1hZ2VVcmwudHJpZ2dlcignZm9jdXMnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJpbmRFbnRlcktleSgkaW1hZ2VVcmwsICRpbWFnZUJ0bik7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy51aS5vbkRpYWxvZ0hpZGRlbih0aGlzLiRkaWFsb2csICgpID0+IHtcbiAgICAgICAgJGltYWdlSW5wdXQub2ZmKCdjaGFuZ2UnKTtcbiAgICAgICAgJGltYWdlVXJsLm9mZigna2V5dXAgcGFzdGUga2V5cHJlc3MnKTtcbiAgICAgICAgJGltYWdlQnRuLm9mZignY2xpY2snKTtcblxuICAgICAgICBpZiAoZGVmZXJyZWQuc3RhdGUoKSA9PT0gJ3BlbmRpbmcnKSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnVpLnNob3dEaWFsb2codGhpcy4kZGlhbG9nKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBsaXN0cyBmcm9tICcuLi9jb3JlL2xpc3RzJztcbmltcG9ydCBkb20gZnJvbSAnLi4vY29yZS9kb20nO1xuXG4vKipcbiAqIEltYWdlIHBvcG92ZXIgbW9kdWxlXG4gKiAgbW91c2UgZXZlbnRzIHRoYXQgc2hvdy9oaWRlIHBvcG92ZXIgd2lsbCBiZSBoYW5kbGVkIGJ5IEhhbmRsZS5qcy5cbiAqICBIYW5kbGUuanMgd2lsbCByZWNlaXZlIHRoZSBldmVudHMgYW5kIGludm9rZSAnaW1hZ2VQb3BvdmVyLnVwZGF0ZScuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEltYWdlUG9wb3ZlciB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIHRoaXMudWkgPSAkLnN1bW1lcm5vdGUudWk7XG5cbiAgICB0aGlzLmVkaXRhYmxlID0gY29udGV4dC5sYXlvdXRJbmZvLmVkaXRhYmxlWzBdO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcblxuICAgIHRoaXMuZXZlbnRzID0ge1xuICAgICAgJ3N1bW1lcm5vdGUuZGlzYWJsZSc6ICgpID0+IHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHNob3VsZEluaXRpYWxpemUoKSB7XG4gICAgcmV0dXJuICFsaXN0cy5pc0VtcHR5KHRoaXMub3B0aW9ucy5wb3BvdmVyLmltYWdlKTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy4kcG9wb3ZlciA9IHRoaXMudWkucG9wb3Zlcih7XG4gICAgICBjbGFzc05hbWU6ICdub3RlLWltYWdlLXBvcG92ZXInXG4gICAgfSkucmVuZGVyKCkuYXBwZW5kVG8odGhpcy5vcHRpb25zLmNvbnRhaW5lcik7XG4gICAgY29uc3QgJGNvbnRlbnQgPSB0aGlzLiRwb3BvdmVyLmZpbmQoJy5wb3BvdmVyLWNvbnRlbnQsLm5vdGUtcG9wb3Zlci1jb250ZW50Jyk7XG4gICAgdGhpcy5jb250ZXh0Lmludm9rZSgnYnV0dG9ucy5idWlsZCcsICRjb250ZW50LCB0aGlzLm9wdGlvbnMucG9wb3Zlci5pbWFnZSk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuJHBvcG92ZXIucmVtb3ZlKCk7XG4gIH1cblxuICB1cGRhdGUodGFyZ2V0KSB7XG4gICAgaWYgKGRvbS5pc0ltZyh0YXJnZXQpKSB7XG4gICAgICBjb25zdCBwb3MgPSBkb20ucG9zRnJvbVBsYWNlaG9sZGVyKHRhcmdldCk7XG4gICAgICBjb25zdCBwb3NFZGl0b3IgPSBkb20ucG9zRnJvbVBsYWNlaG9sZGVyKHRoaXMuZWRpdGFibGUpO1xuICAgICAgdGhpcy4kcG9wb3Zlci5jc3Moe1xuICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICBsZWZ0OiB0aGlzLm9wdGlvbnMucG9wYXRtb3VzZSA/IGV2ZW50LnBhZ2VYIC0gMjAgOiBwb3MubGVmdCxcbiAgICAgICAgdG9wOiB0aGlzLm9wdGlvbnMucG9wYXRtb3VzZSA/IGV2ZW50LnBhZ2VZIDogTWF0aC5taW4ocG9zLnRvcCwgcG9zRWRpdG9yLnRvcClcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhpZGUoKTtcbiAgICB9XG4gIH1cblxuICBoaWRlKCkge1xuICAgIHRoaXMuJHBvcG92ZXIuaGlkZSgpO1xuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGVudiBmcm9tICcuLi9jb3JlL2Vudic7XG5pbXBvcnQgbGlzdHMgZnJvbSAnLi4vY29yZS9saXN0cyc7XG5pbXBvcnQgZG9tIGZyb20gJy4uL2NvcmUvZG9tJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFibGVQb3BvdmVyIHtcbiAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG5cbiAgICB0aGlzLnVpID0gJC5zdW1tZXJub3RlLnVpO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcbiAgICB0aGlzLmV2ZW50cyA9IHtcbiAgICAgICdzdW1tZXJub3RlLm1vdXNlZG93bic6ICh3ZSwgZSkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZShlLnRhcmdldCk7XG4gICAgICB9LFxuICAgICAgJ3N1bW1lcm5vdGUua2V5dXAgc3VtbWVybm90ZS5zY3JvbGwgc3VtbWVybm90ZS5jaGFuZ2UnOiAoKSA9PiB7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICB9LFxuICAgICAgJ3N1bW1lcm5vdGUuZGlzYWJsZSc6ICgpID0+IHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHNob3VsZEluaXRpYWxpemUoKSB7XG4gICAgcmV0dXJuICFsaXN0cy5pc0VtcHR5KHRoaXMub3B0aW9ucy5wb3BvdmVyLnRhYmxlKTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy4kcG9wb3ZlciA9IHRoaXMudWkucG9wb3Zlcih7XG4gICAgICBjbGFzc05hbWU6ICdub3RlLXRhYmxlLXBvcG92ZXInXG4gICAgfSkucmVuZGVyKCkuYXBwZW5kVG8odGhpcy5vcHRpb25zLmNvbnRhaW5lcik7XG4gICAgY29uc3QgJGNvbnRlbnQgPSB0aGlzLiRwb3BvdmVyLmZpbmQoJy5wb3BvdmVyLWNvbnRlbnQsLm5vdGUtcG9wb3Zlci1jb250ZW50Jyk7XG5cbiAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdidXR0b25zLmJ1aWxkJywgJGNvbnRlbnQsIHRoaXMub3B0aW9ucy5wb3BvdmVyLnRhYmxlKTtcblxuICAgIC8vIFt3b3JrYXJvdW5kXSBEaXNhYmxlIEZpcmVmb3gncyBkZWZhdWx0IHRhYmxlIGVkaXRvclxuICAgIGlmIChlbnYuaXNGRikge1xuICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2VuYWJsZUlubGluZVRhYmxlRWRpdGluZycsIGZhbHNlLCBmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLiRwb3BvdmVyLnJlbW92ZSgpO1xuICB9XG5cbiAgdXBkYXRlKHRhcmdldCkge1xuICAgIGlmICh0aGlzLmNvbnRleHQuaXNEaXNhYmxlZCgpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgaXNDZWxsID0gZG9tLmlzQ2VsbCh0YXJnZXQpO1xuXG4gICAgaWYgKGlzQ2VsbCkge1xuICAgICAgY29uc3QgcG9zID0gZG9tLnBvc0Zyb21QbGFjZWhvbGRlcih0YXJnZXQpO1xuICAgICAgdGhpcy4kcG9wb3Zlci5jc3Moe1xuICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICBsZWZ0OiBwb3MubGVmdCxcbiAgICAgICAgdG9wOiBwb3MudG9wXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGlzQ2VsbDtcbiAgfVxuXG4gIGhpZGUoKSB7XG4gICAgdGhpcy4kcG9wb3Zlci5oaWRlKCk7XG4gIH1cbn1cbiIsImltcG9ydCAkIGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgZW52IGZyb20gJy4uL2NvcmUvZW52JztcbmltcG9ydCBrZXkgZnJvbSAnLi4vY29yZS9rZXknO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWRlb0RpYWxvZyB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuXG4gICAgdGhpcy51aSA9ICQuc3VtbWVybm90ZS51aTtcbiAgICB0aGlzLiRib2R5ID0gJChkb2N1bWVudC5ib2R5KTtcbiAgICB0aGlzLiRlZGl0b3IgPSBjb250ZXh0LmxheW91dEluZm8uZWRpdG9yO1xuICAgIHRoaXMub3B0aW9ucyA9IGNvbnRleHQub3B0aW9ucztcbiAgICB0aGlzLmxhbmcgPSB0aGlzLm9wdGlvbnMubGFuZ0luZm87XG4gIH1cblxuICBpbml0aWFsaXplKCkge1xuICAgIGNvbnN0ICRjb250YWluZXIgPSB0aGlzLm9wdGlvbnMuZGlhbG9nc0luQm9keSA/IHRoaXMuJGJvZHkgOiB0aGlzLiRlZGl0b3I7XG5cbiAgICBjb25zdCBib2R5ID0gW1xuICAgICAgJzxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIG5vdGUtZm9ybS1ncm91cCByb3ctZmx1aWRcIj4nLFxuICAgICAgYDxsYWJlbCBjbGFzcz1cIm5vdGUtZm9ybS1sYWJlbFwiPiR7dGhpcy5sYW5nLnZpZGVvLnVybH0gPHNtYWxsIGNsYXNzPVwidGV4dC1tdXRlZFwiPiR7dGhpcy5sYW5nLnZpZGVvLnByb3ZpZGVyc308L3NtYWxsPjwvbGFiZWw+YCxcbiAgICAgICc8aW5wdXQgY2xhc3M9XCJub3RlLXZpZGVvLXVybCBmb3JtLWNvbnRyb2wgbm90ZS1mb3JtLWNvbnRyb2wgbm90ZS1pbnB1dFwiIHR5cGU9XCJ0ZXh0XCIgLz4nLFxuICAgICAgJzwvZGl2PidcbiAgICBdLmpvaW4oJycpO1xuICAgIGNvbnN0IGJ1dHRvbkNsYXNzID0gJ2J0biBidG4tcHJpbWFyeSBub3RlLWJ0biBub3RlLWJ0bi1wcmltYXJ5IG5vdGUtdmlkZW8tYnRuJztcbiAgICBjb25zdCBmb290ZXIgPSBgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgaHJlZj1cIiNcIiBjbGFzcz1cIiR7YnV0dG9uQ2xhc3N9XCIgZGlzYWJsZWQ+JHt0aGlzLmxhbmcudmlkZW8uaW5zZXJ0fTwvYnV0dG9uPmA7XG5cbiAgICB0aGlzLiRkaWFsb2cgPSB0aGlzLnVpLmRpYWxvZyh7XG4gICAgICB0aXRsZTogdGhpcy5sYW5nLnZpZGVvLmluc2VydCxcbiAgICAgIGZhZGU6IHRoaXMub3B0aW9ucy5kaWFsb2dzRmFkZSxcbiAgICAgIGJvZHk6IGJvZHksXG4gICAgICBmb290ZXI6IGZvb3RlclxuICAgIH0pLnJlbmRlcigpLmFwcGVuZFRvKCRjb250YWluZXIpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnVpLmhpZGVEaWFsb2codGhpcy4kZGlhbG9nKTtcbiAgICB0aGlzLiRkaWFsb2cucmVtb3ZlKCk7XG4gIH1cblxuICBiaW5kRW50ZXJLZXkoJGlucHV0LCAkYnRuKSB7XG4gICAgJGlucHV0Lm9uKCdrZXlwcmVzcycsIChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IGtleS5jb2RlLkVOVEVSKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICRidG4udHJpZ2dlcignY2xpY2snKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGNyZWF0ZVZpZGVvTm9kZSh1cmwpIHtcbiAgICAvLyB2aWRlbyB1cmwgcGF0dGVybnMoeW91dHViZSwgaW5zdGFncmFtLCB2aW1lbywgZGFpbHltb3Rpb24sIHlvdWt1LCBtcDQsIG9nZywgd2VibSlcbiAgICBjb25zdCB5dFJlZ0V4cCA9IC9eKD86aHR0cHM/OlxcL1xcLyk/KD86d3d3XFwuKT8oPzp5b3V0dVxcLmJlXFwvfHlvdXR1YmVcXC5jb21cXC8oPzplbWJlZFxcL3x2XFwvfHdhdGNoXFw/dj18d2F0Y2hcXD8uKyZ2PSkpKChcXHd8LSl7MTF9KSg/OlxcUyspPyQvO1xuICAgIGNvbnN0IHl0TWF0Y2ggPSB1cmwubWF0Y2goeXRSZWdFeHApO1xuXG4gICAgY29uc3QgaWdSZWdFeHAgPSAvKD86d3d3XFwufFxcL1xcLylpbnN0YWdyYW1cXC5jb21cXC9wXFwvKC5bYS16QS1aMC05Xy1dKikvO1xuICAgIGNvbnN0IGlnTWF0Y2ggPSB1cmwubWF0Y2goaWdSZWdFeHApO1xuXG4gICAgY29uc3QgdlJlZ0V4cCA9IC9cXC9cXC92aW5lXFwuY29cXC92XFwvKFthLXpBLVowLTldKykvO1xuICAgIGNvbnN0IHZNYXRjaCA9IHVybC5tYXRjaCh2UmVnRXhwKTtcblxuICAgIGNvbnN0IHZpbVJlZ0V4cCA9IC9cXC9cXC8ocGxheWVyXFwuKT92aW1lb1xcLmNvbVxcLyhbYS16XSpcXC8pKihcXGQrKVs/XT8uKi87XG4gICAgY29uc3QgdmltTWF0Y2ggPSB1cmwubWF0Y2godmltUmVnRXhwKTtcblxuICAgIGNvbnN0IGRtUmVnRXhwID0gLy4rZGFpbHltb3Rpb24uY29tXFwvKHZpZGVvfGh1YilcXC8oW15fXSspW14jXSooI3ZpZGVvPShbXl8mXSspKT8vO1xuICAgIGNvbnN0IGRtTWF0Y2ggPSB1cmwubWF0Y2goZG1SZWdFeHApO1xuXG4gICAgY29uc3QgeW91a3VSZWdFeHAgPSAvXFwvXFwvdlxcLnlvdWt1XFwuY29tXFwvdl9zaG93XFwvaWRfKFxcdyspPSpcXC5odG1sLztcbiAgICBjb25zdCB5b3VrdU1hdGNoID0gdXJsLm1hdGNoKHlvdWt1UmVnRXhwKTtcblxuICAgIGNvbnN0IHFxUmVnRXhwID0gL1xcL1xcL3ZcXC5xcVxcLmNvbS4qP3ZpZD0oLispLztcbiAgICBjb25zdCBxcU1hdGNoID0gdXJsLm1hdGNoKHFxUmVnRXhwKTtcblxuICAgIGNvbnN0IHFxUmVnRXhwMiA9IC9cXC9cXC92XFwucXFcXC5jb21cXC94P1xcLz8ocGFnZXxjb3ZlcikuKj9cXC8oW15cXC9dKylcXC5odG1sXFw/Py4qLztcbiAgICBjb25zdCBxcU1hdGNoMiA9IHVybC5tYXRjaChxcVJlZ0V4cDIpO1xuXG4gICAgY29uc3QgbXA0UmVnRXhwID0gL14uKy4obXA0fG00dikkLztcbiAgICBjb25zdCBtcDRNYXRjaCA9IHVybC5tYXRjaChtcDRSZWdFeHApO1xuXG4gICAgY29uc3Qgb2dnUmVnRXhwID0gL14uKy4ob2dnfG9ndikkLztcbiAgICBjb25zdCBvZ2dNYXRjaCA9IHVybC5tYXRjaChvZ2dSZWdFeHApO1xuXG4gICAgY29uc3Qgd2VibVJlZ0V4cCA9IC9eLisuKHdlYm0pJC87XG4gICAgY29uc3Qgd2VibU1hdGNoID0gdXJsLm1hdGNoKHdlYm1SZWdFeHApO1xuXG4gICAgbGV0ICR2aWRlbztcbiAgICBpZiAoeXRNYXRjaCAmJiB5dE1hdGNoWzFdLmxlbmd0aCA9PT0gMTEpIHtcbiAgICAgIGNvbnN0IHlvdXR1YmVJZCA9IHl0TWF0Y2hbMV07XG4gICAgICAkdmlkZW8gPSAkKCc8aWZyYW1lPicpXG4gICAgICAgIC5hdHRyKCdmcmFtZWJvcmRlcicsIDApXG4gICAgICAgIC5hdHRyKCdzcmMnLCAnLy93d3cueW91dHViZS5jb20vZW1iZWQvJyArIHlvdXR1YmVJZClcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgJzY0MCcpLmF0dHIoJ2hlaWdodCcsICczNjAnKTtcbiAgICB9IGVsc2UgaWYgKGlnTWF0Y2ggJiYgaWdNYXRjaFswXS5sZW5ndGgpIHtcbiAgICAgICR2aWRlbyA9ICQoJzxpZnJhbWU+JylcbiAgICAgICAgLmF0dHIoJ2ZyYW1lYm9yZGVyJywgMClcbiAgICAgICAgLmF0dHIoJ3NyYycsICdodHRwczovL2luc3RhZ3JhbS5jb20vcC8nICsgaWdNYXRjaFsxXSArICcvZW1iZWQvJylcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgJzYxMicpLmF0dHIoJ2hlaWdodCcsICc3MTAnKVxuICAgICAgICAuYXR0cignc2Nyb2xsaW5nJywgJ25vJylcbiAgICAgICAgLmF0dHIoJ2FsbG93dHJhbnNwYXJlbmN5JywgJ3RydWUnKTtcbiAgICB9IGVsc2UgaWYgKHZNYXRjaCAmJiB2TWF0Y2hbMF0ubGVuZ3RoKSB7XG4gICAgICAkdmlkZW8gPSAkKCc8aWZyYW1lPicpXG4gICAgICAgIC5hdHRyKCdmcmFtZWJvcmRlcicsIDApXG4gICAgICAgIC5hdHRyKCdzcmMnLCB2TWF0Y2hbMF0gKyAnL2VtYmVkL3NpbXBsZScpXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsICc2MDAnKS5hdHRyKCdoZWlnaHQnLCAnNjAwJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3ZpbmUtZW1iZWQnKTtcbiAgICB9IGVsc2UgaWYgKHZpbU1hdGNoICYmIHZpbU1hdGNoWzNdLmxlbmd0aCkge1xuICAgICAgJHZpZGVvID0gJCgnPGlmcmFtZSB3ZWJraXRhbGxvd2Z1bGxzY3JlZW4gbW96YWxsb3dmdWxsc2NyZWVuIGFsbG93ZnVsbHNjcmVlbj4nKVxuICAgICAgICAuYXR0cignZnJhbWVib3JkZXInLCAwKVxuICAgICAgICAuYXR0cignc3JjJywgJy8vcGxheWVyLnZpbWVvLmNvbS92aWRlby8nICsgdmltTWF0Y2hbM10pXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsICc2NDAnKS5hdHRyKCdoZWlnaHQnLCAnMzYwJyk7XG4gICAgfSBlbHNlIGlmIChkbU1hdGNoICYmIGRtTWF0Y2hbMl0ubGVuZ3RoKSB7XG4gICAgICAkdmlkZW8gPSAkKCc8aWZyYW1lPicpXG4gICAgICAgIC5hdHRyKCdmcmFtZWJvcmRlcicsIDApXG4gICAgICAgIC5hdHRyKCdzcmMnLCAnLy93d3cuZGFpbHltb3Rpb24uY29tL2VtYmVkL3ZpZGVvLycgKyBkbU1hdGNoWzJdKVxuICAgICAgICAuYXR0cignd2lkdGgnLCAnNjQwJykuYXR0cignaGVpZ2h0JywgJzM2MCcpO1xuICAgIH0gZWxzZSBpZiAoeW91a3VNYXRjaCAmJiB5b3VrdU1hdGNoWzFdLmxlbmd0aCkge1xuICAgICAgJHZpZGVvID0gJCgnPGlmcmFtZSB3ZWJraXRhbGxvd2Z1bGxzY3JlZW4gbW96YWxsb3dmdWxsc2NyZWVuIGFsbG93ZnVsbHNjcmVlbj4nKVxuICAgICAgICAuYXR0cignZnJhbWVib3JkZXInLCAwKVxuICAgICAgICAuYXR0cignaGVpZ2h0JywgJzQ5OCcpXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsICc1MTAnKVxuICAgICAgICAuYXR0cignc3JjJywgJy8vcGxheWVyLnlvdWt1LmNvbS9lbWJlZC8nICsgeW91a3VNYXRjaFsxXSk7XG4gICAgfSBlbHNlIGlmICgocXFNYXRjaCAmJiBxcU1hdGNoWzFdLmxlbmd0aCkgfHwgKHFxTWF0Y2gyICYmIHFxTWF0Y2gyWzJdLmxlbmd0aCkpIHtcbiAgICAgIGNvbnN0IHZpZCA9ICgocXFNYXRjaCAmJiBxcU1hdGNoWzFdLmxlbmd0aCkgPyBxcU1hdGNoWzFdIDogcXFNYXRjaDJbMl0pO1xuICAgICAgJHZpZGVvID0gJCgnPGlmcmFtZSB3ZWJraXRhbGxvd2Z1bGxzY3JlZW4gbW96YWxsb3dmdWxsc2NyZWVuIGFsbG93ZnVsbHNjcmVlbj4nKVxuICAgICAgICAuYXR0cignZnJhbWVib3JkZXInLCAwKVxuICAgICAgICAuYXR0cignaGVpZ2h0JywgJzMxMCcpXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsICc1MDAnKVxuICAgICAgICAuYXR0cignc3JjJywgJ2h0dHA6Ly92LnFxLmNvbS9pZnJhbWUvcGxheWVyLmh0bWw/dmlkPScgKyB2aWQgKyAnJmFtcDthdXRvPTAnKTtcbiAgICB9IGVsc2UgaWYgKG1wNE1hdGNoIHx8IG9nZ01hdGNoIHx8IHdlYm1NYXRjaCkge1xuICAgICAgJHZpZGVvID0gJCgnPHZpZGVvIGNvbnRyb2xzPicpXG4gICAgICAgIC5hdHRyKCdzcmMnLCB1cmwpXG4gICAgICAgIC5hdHRyKCd3aWR0aCcsICc2NDAnKS5hdHRyKCdoZWlnaHQnLCAnMzYwJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHRoaXMgaXMgbm90IGEga25vd24gdmlkZW8gbGluay4gTm93IHdoYXQsIENhdD8gTm93IHdoYXQ/XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgJHZpZGVvLmFkZENsYXNzKCdub3RlLXZpZGVvLWNsaXAnKTtcblxuICAgIHJldHVybiAkdmlkZW9bMF07XG4gIH1cblxuICBzaG93KCkge1xuICAgIGNvbnN0IHRleHQgPSB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3IuZ2V0U2VsZWN0ZWRUZXh0Jyk7XG4gICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLnNhdmVSYW5nZScpO1xuICAgIHRoaXMuc2hvd1ZpZGVvRGlhbG9nKHRleHQpLnRoZW4oKHVybCkgPT4ge1xuICAgICAgLy8gW3dvcmthcm91bmRdIGhpZGUgZGlhbG9nIGJlZm9yZSByZXN0b3JlIHJhbmdlIGZvciBJRSByYW5nZSBmb2N1c1xuICAgICAgdGhpcy51aS5oaWRlRGlhbG9nKHRoaXMuJGRpYWxvZyk7XG4gICAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3IucmVzdG9yZVJhbmdlJyk7XG5cbiAgICAgIC8vIGJ1aWxkIG5vZGVcbiAgICAgIGNvbnN0ICRub2RlID0gdGhpcy5jcmVhdGVWaWRlb05vZGUodXJsKTtcblxuICAgICAgaWYgKCRub2RlKSB7XG4gICAgICAgIC8vIGluc2VydCB2aWRlbyBub2RlXG4gICAgICAgIHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5pbnNlcnROb2RlJywgJG5vZGUpO1xuICAgICAgfVxuICAgIH0pLmZhaWwoKCkgPT4ge1xuICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLnJlc3RvcmVSYW5nZScpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIHNob3cgaW1hZ2UgZGlhbG9nXG4gICAqXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSAkZGlhbG9nXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqL1xuICBzaG93VmlkZW9EaWFsb2codGV4dCkge1xuICAgIHJldHVybiAkLkRlZmVycmVkKChkZWZlcnJlZCkgPT4ge1xuICAgICAgY29uc3QgJHZpZGVvVXJsID0gdGhpcy4kZGlhbG9nLmZpbmQoJy5ub3RlLXZpZGVvLXVybCcpO1xuICAgICAgY29uc3QgJHZpZGVvQnRuID0gdGhpcy4kZGlhbG9nLmZpbmQoJy5ub3RlLXZpZGVvLWJ0bicpO1xuXG4gICAgICB0aGlzLnVpLm9uRGlhbG9nU2hvd24odGhpcy4kZGlhbG9nLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ2RpYWxvZy5zaG93bicpO1xuXG4gICAgICAgICR2aWRlb1VybC52YWwodGV4dCkub24oJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICAgIHRoaXMudWkudG9nZ2xlQnRuKCR2aWRlb0J0biwgJHZpZGVvVXJsLnZhbCgpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFlbnYuaXNTdXBwb3J0VG91Y2gpIHtcbiAgICAgICAgICAkdmlkZW9VcmwudHJpZ2dlcignZm9jdXMnKTtcbiAgICAgICAgfVxuXG4gICAgICAgICR2aWRlb0J0bi5jbGljaygoZXZlbnQpID0+IHtcbiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgkdmlkZW9VcmwudmFsKCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmJpbmRFbnRlcktleSgkdmlkZW9VcmwsICR2aWRlb0J0bik7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy51aS5vbkRpYWxvZ0hpZGRlbih0aGlzLiRkaWFsb2csICgpID0+IHtcbiAgICAgICAgJHZpZGVvVXJsLm9mZignaW5wdXQnKTtcbiAgICAgICAgJHZpZGVvQnRuLm9mZignY2xpY2snKTtcblxuICAgICAgICBpZiAoZGVmZXJyZWQuc3RhdGUoKSA9PT0gJ3BlbmRpbmcnKSB7XG4gICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLnVpLnNob3dEaWFsb2codGhpcy4kZGlhbG9nKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBlbnYgZnJvbSAnLi4vY29yZS9lbnYnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIZWxwRGlhbG9nIHtcbiAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG5cbiAgICB0aGlzLnVpID0gJC5zdW1tZXJub3RlLnVpO1xuICAgIHRoaXMuJGJvZHkgPSAkKGRvY3VtZW50LmJvZHkpO1xuICAgIHRoaXMuJGVkaXRvciA9IGNvbnRleHQubGF5b3V0SW5mby5lZGl0b3I7XG4gICAgdGhpcy5vcHRpb25zID0gY29udGV4dC5vcHRpb25zO1xuICAgIHRoaXMubGFuZyA9IHRoaXMub3B0aW9ucy5sYW5nSW5mbztcbiAgfVxuXG4gIGluaXRpYWxpemUoKSB7XG4gICAgY29uc3QgJGNvbnRhaW5lciA9IHRoaXMub3B0aW9ucy5kaWFsb2dzSW5Cb2R5ID8gdGhpcy4kYm9keSA6IHRoaXMuJGVkaXRvcjtcblxuICAgIGNvbnN0IGJvZHkgPSBbXG4gICAgICAnPHAgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPicsXG4gICAgICAnPGEgaHJlZj1cImh0dHA6Ly9zdW1tZXJub3RlLm9yZy9cIiB0YXJnZXQ9XCJfYmxhbmtcIj5TdW1tZXJub3RlIEBAVkVSU0lPTkBAPC9hPiDCtyAnLFxuICAgICAgJzxhIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vc3VtbWVybm90ZS9zdW1tZXJub3RlXCIgdGFyZ2V0PVwiX2JsYW5rXCI+UHJvamVjdDwvYT4gwrcgJyxcbiAgICAgICc8YSBocmVmPVwiaHR0cHM6Ly9naXRodWIuY29tL3N1bW1lcm5vdGUvc3VtbWVybm90ZS9pc3N1ZXNcIiB0YXJnZXQ9XCJfYmxhbmtcIj5Jc3N1ZXM8L2E+JyxcbiAgICAgICc8L3A+J1xuICAgIF0uam9pbignJyk7XG5cbiAgICB0aGlzLiRkaWFsb2cgPSB0aGlzLnVpLmRpYWxvZyh7XG4gICAgICB0aXRsZTogdGhpcy5sYW5nLm9wdGlvbnMuaGVscCxcbiAgICAgIGZhZGU6IHRoaXMub3B0aW9ucy5kaWFsb2dzRmFkZSxcbiAgICAgIGJvZHk6IHRoaXMuY3JlYXRlU2hvcnRjdXRMaXN0KCksXG4gICAgICBmb290ZXI6IGJvZHksXG4gICAgICBjYWxsYmFjazogKCRub2RlKSA9PiB7XG4gICAgICAgICRub2RlLmZpbmQoJy5tb2RhbC1ib2R5LC5ub3RlLW1vZGFsLWJvZHknKS5jc3Moe1xuICAgICAgICAgICdtYXgtaGVpZ2h0JzogMzAwLFxuICAgICAgICAgICdvdmVyZmxvdyc6ICdzY3JvbGwnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pLnJlbmRlcigpLmFwcGVuZFRvKCRjb250YWluZXIpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnVpLmhpZGVEaWFsb2codGhpcy4kZGlhbG9nKTtcbiAgICB0aGlzLiRkaWFsb2cucmVtb3ZlKCk7XG4gIH1cblxuICBjcmVhdGVTaG9ydGN1dExpc3QoKSB7XG4gICAgY29uc3Qga2V5TWFwID0gdGhpcy5vcHRpb25zLmtleU1hcFtlbnYuaXNNYWMgPyAnbWFjJyA6ICdwYyddO1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhrZXlNYXApLm1hcCgoa2V5KSA9PiB7XG4gICAgICBjb25zdCBjb21tYW5kID0ga2V5TWFwW2tleV07XG4gICAgICBjb25zdCAkcm93ID0gJCgnPGRpdj48ZGl2IGNsYXNzPVwiaGVscC1saXN0LWl0ZW1cIi8+PC9kaXY+Jyk7XG4gICAgICAkcm93LmFwcGVuZCgkKCc8bGFiZWw+PGtiZD4nICsga2V5ICsgJzwva2RiPjwvbGFiZWw+JykuY3NzKHtcbiAgICAgICAgJ3dpZHRoJzogMTgwLFxuICAgICAgICAnbWFyZ2luLXJpZ2h0JzogMTBcbiAgICAgIH0pKS5hcHBlbmQoJCgnPHNwYW4vPicpLmh0bWwodGhpcy5jb250ZXh0Lm1lbW8oJ2hlbHAuJyArIGNvbW1hbmQpIHx8IGNvbW1hbmQpKTtcbiAgICAgIHJldHVybiAkcm93Lmh0bWwoKTtcbiAgICB9KS5qb2luKCcnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBzaG93IGhlbHAgZGlhbG9nXG4gICAqXG4gICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAqL1xuICBzaG93SGVscERpYWxvZygpIHtcbiAgICByZXR1cm4gJC5EZWZlcnJlZCgoZGVmZXJyZWQpID0+IHtcbiAgICAgIHRoaXMudWkub25EaWFsb2dTaG93bih0aGlzLiRkaWFsb2csICgpID0+IHtcbiAgICAgICAgdGhpcy5jb250ZXh0LnRyaWdnZXJFdmVudCgnZGlhbG9nLnNob3duJyk7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy51aS5zaG93RGlhbG9nKHRoaXMuJGRpYWxvZyk7XG4gICAgfSkucHJvbWlzZSgpO1xuICB9XG5cbiAgc2hvdygpIHtcbiAgICB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3Iuc2F2ZVJhbmdlJyk7XG4gICAgdGhpcy5zaG93SGVscERpYWxvZygpLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLnJlc3RvcmVSYW5nZScpO1xuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGVudiBmcm9tICcuLi9jb3JlL2Vudic7XG5pbXBvcnQgZnVuYyBmcm9tICcuLi9jb3JlL2Z1bmMnO1xuaW1wb3J0IGxpc3RzIGZyb20gJy4uL2NvcmUvbGlzdHMnO1xuaW1wb3J0IGRvbSBmcm9tICcuLi9jb3JlL2RvbSc7XG5cbmNvbnN0IEFJUl9NT0RFX1BPUE9WRVJfWF9PRkZTRVQgPSAyMDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWlyUG9wb3ZlciB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgIHRoaXMudWkgPSAkLnN1bW1lcm5vdGUudWk7XG4gICAgdGhpcy5vcHRpb25zID0gY29udGV4dC5vcHRpb25zO1xuICAgIHRoaXMuZXZlbnRzID0ge1xuICAgICAgJ3N1bW1lcm5vdGUua2V5dXAgc3VtbWVybm90ZS5tb3VzZXVwIHN1bW1lcm5vdGUuc2Nyb2xsJzogKCkgPT4ge1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgfSxcbiAgICAgICdzdW1tZXJub3RlLmRpc2FibGUgc3VtbWVybm90ZS5jaGFuZ2Ugc3VtbWVybm90ZS5kaWFsb2cuc2hvd24nOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgfSxcbiAgICAgICdzdW1tZXJub3RlLmZvY3Vzb3V0JzogKHdlLCBlKSA9PiB7XG4gICAgICAgIC8vIFt3b3JrYXJvdW5kXSBGaXJlZm94IGRvZXNuJ3Qgc3VwcG9ydCByZWxhdGVkVGFyZ2V0IG9uIGZvY3Vzb3V0XG4gICAgICAgIC8vICAtIElnbm9yZSBoaWRlIGFjdGlvbiBvbiBmb2N1cyBvdXQgaW4gRkYuXG4gICAgICAgIGlmIChlbnYuaXNGRikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZS5yZWxhdGVkVGFyZ2V0IHx8ICFkb20uYW5jZXN0b3IoZS5yZWxhdGVkVGFyZ2V0LCBmdW5jLmVxKHRoaXMuJHBvcG92ZXJbMF0pKSkge1xuICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHNob3VsZEluaXRpYWxpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5haXJNb2RlICYmICFsaXN0cy5pc0VtcHR5KHRoaXMub3B0aW9ucy5wb3BvdmVyLmFpcik7XG4gIH1cblxuICBpbml0aWFsaXplKCkge1xuICAgIHRoaXMuJHBvcG92ZXIgPSB0aGlzLnVpLnBvcG92ZXIoe1xuICAgICAgY2xhc3NOYW1lOiAnbm90ZS1haXItcG9wb3ZlcidcbiAgICB9KS5yZW5kZXIoKS5hcHBlbmRUbyh0aGlzLm9wdGlvbnMuY29udGFpbmVyKTtcbiAgICBjb25zdCAkY29udGVudCA9IHRoaXMuJHBvcG92ZXIuZmluZCgnLnBvcG92ZXItY29udGVudCcpO1xuXG4gICAgdGhpcy5jb250ZXh0Lmludm9rZSgnYnV0dG9ucy5idWlsZCcsICRjb250ZW50LCB0aGlzLm9wdGlvbnMucG9wb3Zlci5haXIpO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLiRwb3BvdmVyLnJlbW92ZSgpO1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGNvbnN0IHN0eWxlSW5mbyA9IHRoaXMuY29udGV4dC5pbnZva2UoJ2VkaXRvci5jdXJyZW50U3R5bGUnKTtcbiAgICBpZiAoc3R5bGVJbmZvLnJhbmdlICYmICFzdHlsZUluZm8ucmFuZ2UuaXNDb2xsYXBzZWQoKSkge1xuICAgICAgY29uc3QgcmVjdCA9IGxpc3RzLmxhc3Qoc3R5bGVJbmZvLnJhbmdlLmdldENsaWVudFJlY3RzKCkpO1xuICAgICAgaWYgKHJlY3QpIHtcbiAgICAgICAgY29uc3QgYm5kID0gZnVuYy5yZWN0MmJuZChyZWN0KTtcbiAgICAgICAgdGhpcy4kcG9wb3Zlci5jc3Moe1xuICAgICAgICAgIGRpc3BsYXk6ICdibG9jaycsXG4gICAgICAgICAgbGVmdDogTWF0aC5tYXgoYm5kLmxlZnQgKyBibmQud2lkdGggLyAyLCAwKSAtIEFJUl9NT0RFX1BPUE9WRVJfWF9PRkZTRVQsXG4gICAgICAgICAgdG9wOiBibmQudG9wICsgYm5kLmhlaWdodFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnYnV0dG9ucy51cGRhdGVDdXJyZW50U3R5bGUnLCB0aGlzLiRwb3BvdmVyKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfVxuICB9XG5cbiAgaGlkZSgpIHtcbiAgICB0aGlzLiRwb3BvdmVyLmhpZGUoKTtcbiAgfVxufVxuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCBmdW5jIGZyb20gJy4uL2NvcmUvZnVuYyc7XG5pbXBvcnQgbGlzdHMgZnJvbSAnLi4vY29yZS9saXN0cyc7XG5pbXBvcnQgZG9tIGZyb20gJy4uL2NvcmUvZG9tJztcbmltcG9ydCByYW5nZSBmcm9tICcuLi9jb3JlL3JhbmdlJztcbmltcG9ydCBrZXkgZnJvbSAnLi4vY29yZS9rZXknO1xuXG5jb25zdCBQT1BPVkVSX0RJU1QgPSA1O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIaW50UG9wb3ZlciB7XG4gIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuXG4gICAgdGhpcy51aSA9ICQuc3VtbWVybm90ZS51aTtcbiAgICB0aGlzLiRlZGl0YWJsZSA9IGNvbnRleHQubGF5b3V0SW5mby5lZGl0YWJsZTtcbiAgICB0aGlzLm9wdGlvbnMgPSBjb250ZXh0Lm9wdGlvbnM7XG4gICAgdGhpcy5oaW50ID0gdGhpcy5vcHRpb25zLmhpbnQgfHwgW107XG4gICAgdGhpcy5kaXJlY3Rpb24gPSB0aGlzLm9wdGlvbnMuaGludERpcmVjdGlvbiB8fCAnYm90dG9tJztcbiAgICB0aGlzLmhpbnRzID0gJC5pc0FycmF5KHRoaXMuaGludCkgPyB0aGlzLmhpbnQgOiBbdGhpcy5oaW50XTtcblxuICAgIHRoaXMuZXZlbnRzID0ge1xuICAgICAgJ3N1bW1lcm5vdGUua2V5dXAnOiAod2UsIGUpID0+IHtcbiAgICAgICAgaWYgKCFlLmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgICAgdGhpcy5oYW5kbGVLZXl1cChlKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICdzdW1tZXJub3RlLmtleWRvd24nOiAod2UsIGUpID0+IHtcbiAgICAgICAgdGhpcy5oYW5kbGVLZXlkb3duKGUpO1xuICAgICAgfSxcbiAgICAgICdzdW1tZXJub3RlLmRpc2FibGUgc3VtbWVybm90ZS5kaWFsb2cuc2hvd24nOiAoKSA9PiB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBzaG91bGRJbml0aWFsaXplKCkge1xuICAgIHJldHVybiB0aGlzLmhpbnRzLmxlbmd0aCA+IDA7XG4gIH1cblxuICBpbml0aWFsaXplKCkge1xuICAgIHRoaXMubGFzdFdvcmRSYW5nZSA9IG51bGw7XG4gICAgdGhpcy4kcG9wb3ZlciA9IHRoaXMudWkucG9wb3Zlcih7XG4gICAgICBjbGFzc05hbWU6ICdub3RlLWhpbnQtcG9wb3ZlcicsXG4gICAgICBoaWRlQXJyb3c6IHRydWUsXG4gICAgICBkaXJlY3Rpb246ICcnXG4gICAgfSkucmVuZGVyKCkuYXBwZW5kVG8odGhpcy5vcHRpb25zLmNvbnRhaW5lcik7XG5cbiAgICB0aGlzLiRwb3BvdmVyLmhpZGUoKTtcbiAgICB0aGlzLiRjb250ZW50ID0gdGhpcy4kcG9wb3Zlci5maW5kKCcucG9wb3Zlci1jb250ZW50LC5ub3RlLXBvcG92ZXItY29udGVudCcpO1xuICAgIHRoaXMuJGNvbnRlbnQub24oJ2NsaWNrJywgJy5ub3RlLWhpbnQtaXRlbScsICgpID0+IHtcbiAgICAgIHRoaXMuJGNvbnRlbnQuZmluZCgnLmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgdGhpcy5yZXBsYWNlKCk7XG4gICAgfSk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMuJHBvcG92ZXIucmVtb3ZlKCk7XG4gIH1cblxuICBzZWxlY3RJdGVtKCRpdGVtKSB7XG4gICAgdGhpcy4kY29udGVudC5maW5kKCcuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICRpdGVtLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgIHRoaXMuJGNvbnRlbnRbMF0uc2Nyb2xsVG9wID0gJGl0ZW1bMF0ub2Zmc2V0VG9wIC0gKHRoaXMuJGNvbnRlbnQuaW5uZXJIZWlnaHQoKSAvIDIpO1xuICB9XG5cbiAgbW92ZURvd24oKSB7XG4gICAgY29uc3QgJGN1cnJlbnQgPSB0aGlzLiRjb250ZW50LmZpbmQoJy5ub3RlLWhpbnQtaXRlbS5hY3RpdmUnKTtcbiAgICBjb25zdCAkbmV4dCA9ICRjdXJyZW50Lm5leHQoKTtcblxuICAgIGlmICgkbmV4dC5sZW5ndGgpIHtcbiAgICAgIHRoaXMuc2VsZWN0SXRlbSgkbmV4dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCAkbmV4dEdyb3VwID0gJGN1cnJlbnQucGFyZW50KCkubmV4dCgpO1xuXG4gICAgICBpZiAoISRuZXh0R3JvdXAubGVuZ3RoKSB7XG4gICAgICAgICRuZXh0R3JvdXAgPSB0aGlzLiRjb250ZW50LmZpbmQoJy5ub3RlLWhpbnQtZ3JvdXAnKS5maXJzdCgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNlbGVjdEl0ZW0oJG5leHRHcm91cC5maW5kKCcubm90ZS1oaW50LWl0ZW0nKS5maXJzdCgpKTtcbiAgICB9XG4gIH1cblxuICBtb3ZlVXAoKSB7XG4gICAgY29uc3QgJGN1cnJlbnQgPSB0aGlzLiRjb250ZW50LmZpbmQoJy5ub3RlLWhpbnQtaXRlbS5hY3RpdmUnKTtcbiAgICBjb25zdCAkcHJldiA9ICRjdXJyZW50LnByZXYoKTtcblxuICAgIGlmICgkcHJldi5sZW5ndGgpIHtcbiAgICAgIHRoaXMuc2VsZWN0SXRlbSgkcHJldik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCAkcHJldkdyb3VwID0gJGN1cnJlbnQucGFyZW50KCkucHJldigpO1xuXG4gICAgICBpZiAoISRwcmV2R3JvdXAubGVuZ3RoKSB7XG4gICAgICAgICRwcmV2R3JvdXAgPSB0aGlzLiRjb250ZW50LmZpbmQoJy5ub3RlLWhpbnQtZ3JvdXAnKS5sYXN0KCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc2VsZWN0SXRlbSgkcHJldkdyb3VwLmZpbmQoJy5ub3RlLWhpbnQtaXRlbScpLmxhc3QoKSk7XG4gICAgfVxuICB9XG5cbiAgcmVwbGFjZSgpIHtcbiAgICBjb25zdCAkaXRlbSA9IHRoaXMuJGNvbnRlbnQuZmluZCgnLm5vdGUtaGludC1pdGVtLmFjdGl2ZScpO1xuXG4gICAgaWYgKCRpdGVtLmxlbmd0aCkge1xuICAgICAgY29uc3Qgbm9kZSA9IHRoaXMubm9kZUZyb21JdGVtKCRpdGVtKTtcbiAgICAgIC8vIFhYWDogY29uc2lkZXIgdG8gbW92ZSBjb2RlcyB0byBlZGl0b3IgZm9yIHJlY29yZGluZyByZWRvL3VuZG8uXG4gICAgICB0aGlzLmxhc3RXb3JkUmFuZ2UuaW5zZXJ0Tm9kZShub2RlKTtcbiAgICAgIHJhbmdlLmNyZWF0ZUZyb21Ob2RlKG5vZGUpLmNvbGxhcHNlKCkuc2VsZWN0KCk7XG5cbiAgICAgIHRoaXMubGFzdFdvcmRSYW5nZSA9IG51bGw7XG4gICAgICB0aGlzLmhpZGUoKTtcbiAgICAgIHRoaXMuY29udGV4dC50cmlnZ2VyRXZlbnQoJ2NoYW5nZScsIHRoaXMuJGVkaXRhYmxlLmh0bWwoKSwgdGhpcy4kZWRpdGFibGVbMF0pO1xuICAgICAgdGhpcy5jb250ZXh0Lmludm9rZSgnZWRpdG9yLmZvY3VzJyk7XG4gICAgfVxuICB9XG5cbiAgbm9kZUZyb21JdGVtKCRpdGVtKSB7XG4gICAgY29uc3QgaGludCA9IHRoaXMuaGludHNbJGl0ZW0uZGF0YSgnaW5kZXgnKV07XG4gICAgY29uc3QgaXRlbSA9ICRpdGVtLmRhdGEoJ2l0ZW0nKTtcbiAgICBsZXQgbm9kZSA9IGhpbnQuY29udGVudCA/IGhpbnQuY29udGVudChpdGVtKSA6IGl0ZW07XG4gICAgaWYgKHR5cGVvZiBub2RlID09PSAnc3RyaW5nJykge1xuICAgICAgbm9kZSA9IGRvbS5jcmVhdGVUZXh0KG5vZGUpO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbiAgfVxuXG4gIGNyZWF0ZUl0ZW1UZW1wbGF0ZXMoaGludElkeCwgaXRlbXMpIHtcbiAgICBjb25zdCBoaW50ID0gdGhpcy5oaW50c1toaW50SWR4XTtcbiAgICByZXR1cm4gaXRlbXMubWFwKChpdGVtLCBpZHgpID0+IHtcbiAgICAgIGNvbnN0ICRpdGVtID0gJCgnPGRpdiBjbGFzcz1cIm5vdGUtaGludC1pdGVtXCIvPicpO1xuICAgICAgJGl0ZW0uYXBwZW5kKGhpbnQudGVtcGxhdGUgPyBoaW50LnRlbXBsYXRlKGl0ZW0pIDogaXRlbSArICcnKTtcbiAgICAgICRpdGVtLmRhdGEoe1xuICAgICAgICAnaW5kZXgnOiBoaW50SWR4LFxuICAgICAgICAnaXRlbSc6IGl0ZW1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuICRpdGVtO1xuICAgIH0pO1xuICB9XG5cbiAgaGFuZGxlS2V5ZG93bihlKSB7XG4gICAgaWYgKCF0aGlzLiRwb3BvdmVyLmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGUua2V5Q29kZSA9PT0ga2V5LmNvZGUuRU5URVIpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMucmVwbGFjZSgpO1xuICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSBrZXkuY29kZS5VUCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5tb3ZlVXAoKTtcbiAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0ga2V5LmNvZGUuRE9XTikge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5tb3ZlRG93bigpO1xuICAgIH1cbiAgfVxuXG4gIHNlYXJjaEtleXdvcmQoaW5kZXgsIGtleXdvcmQsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgaGludCA9IHRoaXMuaGludHNbaW5kZXhdO1xuICAgIGlmIChoaW50ICYmIGhpbnQubWF0Y2gudGVzdChrZXl3b3JkKSAmJiBoaW50LnNlYXJjaCkge1xuICAgICAgY29uc3QgbWF0Y2hlcyA9IGhpbnQubWF0Y2guZXhlYyhrZXl3b3JkKTtcbiAgICAgIGhpbnQuc2VhcmNoKG1hdGNoZXNbMV0sIGNhbGxiYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG4gIH1cblxuICBjcmVhdGVHcm91cChpZHgsIGtleXdvcmQpIHtcbiAgICBjb25zdCAkZ3JvdXAgPSAkKCc8ZGl2IGNsYXNzPVwibm90ZS1oaW50LWdyb3VwIG5vdGUtaGludC1ncm91cC0nICsgaWR4ICsgJ1wiLz4nKTtcbiAgICB0aGlzLnNlYXJjaEtleXdvcmQoaWR4LCBrZXl3b3JkLCAoaXRlbXMpID0+IHtcbiAgICAgIGl0ZW1zID0gaXRlbXMgfHwgW107XG4gICAgICBpZiAoaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICRncm91cC5odG1sKHRoaXMuY3JlYXRlSXRlbVRlbXBsYXRlcyhpZHgsIGl0ZW1zKSk7XG4gICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuICRncm91cDtcbiAgfVxuXG4gIGhhbmRsZUtleXVwKGUpIHtcbiAgICBpZiAoIWxpc3RzLmNvbnRhaW5zKFtrZXkuY29kZS5FTlRFUiwga2V5LmNvZGUuVVAsIGtleS5jb2RlLkRPV05dLCBlLmtleUNvZGUpKSB7XG4gICAgICBjb25zdCB3b3JkUmFuZ2UgPSB0aGlzLmNvbnRleHQuaW52b2tlKCdlZGl0b3IuY3JlYXRlUmFuZ2UnKS5nZXRXb3JkUmFuZ2UoKTtcbiAgICAgIGNvbnN0IGtleXdvcmQgPSB3b3JkUmFuZ2UudG9TdHJpbmcoKTtcbiAgICAgIGlmICh0aGlzLmhpbnRzLmxlbmd0aCAmJiBrZXl3b3JkKSB7XG4gICAgICAgIHRoaXMuJGNvbnRlbnQuZW1wdHkoKTtcblxuICAgICAgICBjb25zdCBibmQgPSBmdW5jLnJlY3QyYm5kKGxpc3RzLmxhc3Qod29yZFJhbmdlLmdldENsaWVudFJlY3RzKCkpKTtcbiAgICAgICAgaWYgKGJuZCkge1xuICAgICAgICAgIHRoaXMuJHBvcG92ZXIuaGlkZSgpO1xuICAgICAgICAgIHRoaXMubGFzdFdvcmRSYW5nZSA9IHdvcmRSYW5nZTtcbiAgICAgICAgICB0aGlzLmhpbnRzLmZvckVhY2goKGhpbnQsIGlkeCkgPT4ge1xuICAgICAgICAgICAgaWYgKGhpbnQubWF0Y2gudGVzdChrZXl3b3JkKSkge1xuICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUdyb3VwKGlkeCwga2V5d29yZCkuYXBwZW5kVG8odGhpcy4kY29udGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy8gc2VsZWN0IGZpcnN0IC5ub3RlLWhpbnQtaXRlbVxuICAgICAgICAgIHRoaXMuJGNvbnRlbnQuZmluZCgnLm5vdGUtaGludC1pdGVtOmZpcnN0JykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgLy8gc2V0IHBvc2l0aW9uIGZvciBwb3BvdmVyIGFmdGVyIGdyb3VwIGlzIGNyZWF0ZWRcbiAgICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24gPT09ICd0b3AnKSB7XG4gICAgICAgICAgICB0aGlzLiRwb3BvdmVyLmNzcyh7XG4gICAgICAgICAgICAgIGxlZnQ6IGJuZC5sZWZ0LFxuICAgICAgICAgICAgICB0b3A6IGJuZC50b3AgLSB0aGlzLiRwb3BvdmVyLm91dGVySGVpZ2h0KCkgLSBQT1BPVkVSX0RJU1RcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiRwb3BvdmVyLmNzcyh7XG4gICAgICAgICAgICAgIGxlZnQ6IGJuZC5sZWZ0LFxuICAgICAgICAgICAgICB0b3A6IGJuZC50b3AgKyBibmQuaGVpZ2h0ICsgUE9QT1ZFUl9ESVNUXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNob3coKSB7XG4gICAgdGhpcy4kcG9wb3Zlci5zaG93KCk7XG4gIH1cblxuICBoaWRlKCkge1xuICAgIHRoaXMuJHBvcG92ZXIuaGlkZSgpO1xuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGZ1bmMgZnJvbSAnLi9jb3JlL2Z1bmMnO1xuaW1wb3J0IGxpc3RzIGZyb20gJy4vY29yZS9saXN0cyc7XG5pbXBvcnQgZG9tIGZyb20gJy4vY29yZS9kb20nO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250ZXh0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSAkbm90ZVxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKi9cbiAgY29uc3RydWN0b3IoJG5vdGUsIG9wdGlvbnMpIHtcbiAgICB0aGlzLnVpID0gJC5zdW1tZXJub3RlLnVpO1xuICAgIHRoaXMuJG5vdGUgPSAkbm90ZTtcblxuICAgIHRoaXMubWVtb3MgPSB7fTtcbiAgICB0aGlzLm1vZHVsZXMgPSB7fTtcbiAgICB0aGlzLmxheW91dEluZm8gPSB7fTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgdGhpcy5pbml0aWFsaXplKCk7XG4gIH1cblxuICAvKipcbiAgICogY3JlYXRlIGxheW91dCBhbmQgaW5pdGlhbGl6ZSBtb2R1bGVzIGFuZCBvdGhlciByZXNvdXJjZXNcbiAgICovXG4gIGluaXRpYWxpemUoKSB7XG4gICAgdGhpcy5sYXlvdXRJbmZvID0gdGhpcy51aS5jcmVhdGVMYXlvdXQodGhpcy4kbm90ZSwgdGhpcy5vcHRpb25zKTtcbiAgICB0aGlzLl9pbml0aWFsaXplKCk7XG4gICAgdGhpcy4kbm90ZS5oaWRlKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogZGVzdHJveSBtb2R1bGVzIGFuZCBvdGhlciByZXNvdXJjZXMgYW5kIHJlbW92ZSBsYXlvdXRcbiAgICovXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5fZGVzdHJveSgpO1xuICAgIHRoaXMuJG5vdGUucmVtb3ZlRGF0YSgnc3VtbWVybm90ZScpO1xuICAgIHRoaXMudWkucmVtb3ZlTGF5b3V0KHRoaXMuJG5vdGUsIHRoaXMubGF5b3V0SW5mbyk7XG4gIH1cblxuICAvKipcbiAgICogZGVzdG9yeSBtb2R1bGVzIGFuZCBvdGhlciByZXNvdXJjZXMgYW5kIGluaXRpYWxpemUgaXQgYWdhaW5cbiAgICovXG4gIHJlc2V0KCkge1xuICAgIGNvbnN0IGRpc2FibGVkID0gdGhpcy5pc0Rpc2FibGVkKCk7XG4gICAgdGhpcy5jb2RlKGRvbS5lbXB0eVBhcmEpO1xuICAgIHRoaXMuX2Rlc3Ryb3koKTtcbiAgICB0aGlzLl9pbml0aWFsaXplKCk7XG5cbiAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgIHRoaXMuZGlzYWJsZSgpO1xuICAgIH1cbiAgfVxuXG4gIF9pbml0aWFsaXplKCkge1xuICAgIC8vIGFkZCBvcHRpb25hbCBidXR0b25zXG4gICAgY29uc3QgYnV0dG9ucyA9ICQuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMuYnV0dG9ucyk7XG4gICAgT2JqZWN0LmtleXMoYnV0dG9ucykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICB0aGlzLm1lbW8oJ2J1dHRvbi4nICsga2V5LCBidXR0b25zW2tleV0pO1xuICAgIH0pO1xuXG4gICAgY29uc3QgbW9kdWxlcyA9ICQuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMubW9kdWxlcywgJC5zdW1tZXJub3RlLnBsdWdpbnMgfHwge30pO1xuXG4gICAgLy8gYWRkIGFuZCBpbml0aWFsaXplIG1vZHVsZXNcbiAgICBPYmplY3Qua2V5cyhtb2R1bGVzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgIHRoaXMubW9kdWxlKGtleSwgbW9kdWxlc1trZXldLCB0cnVlKTtcbiAgICB9KTtcblxuICAgIE9iamVjdC5rZXlzKHRoaXMubW9kdWxlcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICB0aGlzLmluaXRpYWxpemVNb2R1bGUoa2V5KTtcbiAgICB9KTtcbiAgfVxuXG4gIF9kZXN0cm95KCkge1xuICAgIC8vIGRlc3Ryb3kgbW9kdWxlcyB3aXRoIHJldmVyc2VkIG9yZGVyXG4gICAgT2JqZWN0LmtleXModGhpcy5tb2R1bGVzKS5yZXZlcnNlKCkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICB0aGlzLnJlbW92ZU1vZHVsZShrZXkpO1xuICAgIH0pO1xuXG4gICAgT2JqZWN0LmtleXModGhpcy5tZW1vcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICB0aGlzLnJlbW92ZU1lbW8oa2V5KTtcbiAgICB9KTtcbiAgICAvLyB0cmlnZ2VyIGN1c3RvbSBvbkRlc3Ryb3kgY2FsbGJhY2tcbiAgICB0aGlzLnRyaWdnZXJFdmVudCgnZGVzdHJveScsIHRoaXMpO1xuICB9XG5cbiAgY29kZShodG1sKSB7XG4gICAgY29uc3QgaXNBY3RpdmF0ZWQgPSB0aGlzLmludm9rZSgnY29kZXZpZXcuaXNBY3RpdmF0ZWQnKTtcblxuICAgIGlmIChodG1sID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuaW52b2tlKCdjb2Rldmlldy5zeW5jJyk7XG4gICAgICByZXR1cm4gaXNBY3RpdmF0ZWQgPyB0aGlzLmxheW91dEluZm8uY29kYWJsZS52YWwoKSA6IHRoaXMubGF5b3V0SW5mby5lZGl0YWJsZS5odG1sKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpc0FjdGl2YXRlZCkge1xuICAgICAgICB0aGlzLmxheW91dEluZm8uY29kYWJsZS52YWwoaHRtbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxheW91dEluZm8uZWRpdGFibGUuaHRtbChodG1sKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuJG5vdGUudmFsKGh0bWwpO1xuICAgICAgdGhpcy50cmlnZ2VyRXZlbnQoJ2NoYW5nZScsIGh0bWwpO1xuICAgIH1cbiAgfVxuXG4gIGlzRGlzYWJsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMubGF5b3V0SW5mby5lZGl0YWJsZS5hdHRyKCdjb250ZW50ZWRpdGFibGUnKSA9PT0gJ2ZhbHNlJztcbiAgfVxuXG4gIGVuYWJsZSgpIHtcbiAgICB0aGlzLmxheW91dEluZm8uZWRpdGFibGUuYXR0cignY29udGVudGVkaXRhYmxlJywgdHJ1ZSk7XG4gICAgdGhpcy5pbnZva2UoJ3Rvb2xiYXIuYWN0aXZhdGUnLCB0cnVlKTtcbiAgICB0aGlzLnRyaWdnZXJFdmVudCgnZGlzYWJsZScsIGZhbHNlKTtcbiAgfVxuXG4gIGRpc2FibGUoKSB7XG4gICAgLy8gY2xvc2UgY29kZXZpZXcgaWYgY29kZXZpZXcgaXMgb3BlbmRcbiAgICBpZiAodGhpcy5pbnZva2UoJ2NvZGV2aWV3LmlzQWN0aXZhdGVkJykpIHtcbiAgICAgIHRoaXMuaW52b2tlKCdjb2Rldmlldy5kZWFjdGl2YXRlJyk7XG4gICAgfVxuICAgIHRoaXMubGF5b3V0SW5mby5lZGl0YWJsZS5hdHRyKCdjb250ZW50ZWRpdGFibGUnLCBmYWxzZSk7XG4gICAgdGhpcy5pbnZva2UoJ3Rvb2xiYXIuZGVhY3RpdmF0ZScsIHRydWUpO1xuXG4gICAgdGhpcy50cmlnZ2VyRXZlbnQoJ2Rpc2FibGUnLCB0cnVlKTtcbiAgfVxuXG4gIHRyaWdnZXJFdmVudCgpIHtcbiAgICBjb25zdCBuYW1lc3BhY2UgPSBsaXN0cy5oZWFkKGFyZ3VtZW50cyk7XG4gICAgY29uc3QgYXJncyA9IGxpc3RzLnRhaWwobGlzdHMuZnJvbShhcmd1bWVudHMpKTtcblxuICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5vcHRpb25zLmNhbGxiYWNrc1tmdW5jLm5hbWVzcGFjZVRvQ2FtZWwobmFtZXNwYWNlLCAnb24nKV07XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICBjYWxsYmFjay5hcHBseSh0aGlzLiRub3RlWzBdLCBhcmdzKTtcbiAgICB9XG4gICAgdGhpcy4kbm90ZS50cmlnZ2VyKCdzdW1tZXJub3RlLicgKyBuYW1lc3BhY2UsIGFyZ3MpO1xuICB9XG5cbiAgaW5pdGlhbGl6ZU1vZHVsZShrZXkpIHtcbiAgICBjb25zdCBtb2R1bGUgPSB0aGlzLm1vZHVsZXNba2V5XTtcbiAgICBtb2R1bGUuc2hvdWxkSW5pdGlhbGl6ZSA9IG1vZHVsZS5zaG91bGRJbml0aWFsaXplIHx8IGZ1bmMub2s7XG4gICAgaWYgKCFtb2R1bGUuc2hvdWxkSW5pdGlhbGl6ZSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gaW5pdGlhbGl6ZSBtb2R1bGVcbiAgICBpZiAobW9kdWxlLmluaXRpYWxpemUpIHtcbiAgICAgIG1vZHVsZS5pbml0aWFsaXplKCk7XG4gICAgfVxuXG4gICAgLy8gYXR0YWNoIGV2ZW50c1xuICAgIGlmIChtb2R1bGUuZXZlbnRzKSB7XG4gICAgICBkb20uYXR0YWNoRXZlbnRzKHRoaXMuJG5vdGUsIG1vZHVsZS5ldmVudHMpO1xuICAgIH1cbiAgfVxuXG4gIG1vZHVsZShrZXksIE1vZHVsZUNsYXNzLCB3aXRob3V0SW50aWFsaXplKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHJldHVybiB0aGlzLm1vZHVsZXNba2V5XTtcbiAgICB9XG5cbiAgICB0aGlzLm1vZHVsZXNba2V5XSA9IG5ldyBNb2R1bGVDbGFzcyh0aGlzKTtcblxuICAgIGlmICghd2l0aG91dEludGlhbGl6ZSkge1xuICAgICAgdGhpcy5pbml0aWFsaXplTW9kdWxlKGtleSk7XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlTW9kdWxlKGtleSkge1xuICAgIGNvbnN0IG1vZHVsZSA9IHRoaXMubW9kdWxlc1trZXldO1xuICAgIGlmIChtb2R1bGUuc2hvdWxkSW5pdGlhbGl6ZSgpKSB7XG4gICAgICBpZiAobW9kdWxlLmV2ZW50cykge1xuICAgICAgICBkb20uZGV0YWNoRXZlbnRzKHRoaXMuJG5vdGUsIG1vZHVsZS5ldmVudHMpO1xuICAgICAgfVxuXG4gICAgICBpZiAobW9kdWxlLmRlc3Ryb3kpIHtcbiAgICAgICAgbW9kdWxlLmRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkZWxldGUgdGhpcy5tb2R1bGVzW2tleV07XG4gIH1cblxuICBtZW1vKGtleSwgb2JqKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHJldHVybiB0aGlzLm1lbW9zW2tleV07XG4gICAgfVxuICAgIHRoaXMubWVtb3Nba2V5XSA9IG9iajtcbiAgfVxuXG4gIHJlbW92ZU1lbW8oa2V5KSB7XG4gICAgaWYgKHRoaXMubWVtb3Nba2V5XSAmJiB0aGlzLm1lbW9zW2tleV0uZGVzdHJveSkge1xuICAgICAgdGhpcy5tZW1vc1trZXldLmRlc3Ryb3koKTtcbiAgICB9XG5cbiAgICBkZWxldGUgdGhpcy5tZW1vc1trZXldO1xuICB9XG5cbiAgLyoqXG4gICAqIFNvbWUgYnV0dG9ucyBuZWVkIHRvIGNoYW5nZSB0aGVpciB2aXN1YWwgc3R5bGUgaW1tZWRpYXRlbHkgb25jZSB0aGV5IGdldCBwcmVzc2VkXG4gICAqL1xuICBjcmVhdGVJbnZva2VIYW5kbGVyQW5kVXBkYXRlU3RhdGUobmFtZXNwYWNlLCB2YWx1ZSkge1xuICAgIHJldHVybiAoZXZlbnQpID0+IHtcbiAgICAgIHRoaXMuY3JlYXRlSW52b2tlSGFuZGxlcihuYW1lc3BhY2UsIHZhbHVlKShldmVudCk7XG4gICAgICB0aGlzLmludm9rZSgnYnV0dG9ucy51cGRhdGVDdXJyZW50U3R5bGUnKTtcbiAgICB9O1xuICB9XG5cbiAgY3JlYXRlSW52b2tlSGFuZGxlcihuYW1lc3BhY2UsIHZhbHVlKSB7XG4gICAgcmV0dXJuIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0ICR0YXJnZXQgPSAkKGV2ZW50LnRhcmdldCk7XG4gICAgICB0aGlzLmludm9rZShuYW1lc3BhY2UsIHZhbHVlIHx8ICR0YXJnZXQuY2xvc2VzdCgnW2RhdGEtdmFsdWVdJykuZGF0YSgndmFsdWUnKSwgJHRhcmdldCk7XG4gICAgfTtcbiAgfVxuXG4gIGludm9rZSgpIHtcbiAgICBjb25zdCBuYW1lc3BhY2UgPSBsaXN0cy5oZWFkKGFyZ3VtZW50cyk7XG4gICAgY29uc3QgYXJncyA9IGxpc3RzLnRhaWwobGlzdHMuZnJvbShhcmd1bWVudHMpKTtcblxuICAgIGNvbnN0IHNwbGl0cyA9IG5hbWVzcGFjZS5zcGxpdCgnLicpO1xuICAgIGNvbnN0IGhhc1NlcGFyYXRvciA9IHNwbGl0cy5sZW5ndGggPiAxO1xuICAgIGNvbnN0IG1vZHVsZU5hbWUgPSBoYXNTZXBhcmF0b3IgJiYgbGlzdHMuaGVhZChzcGxpdHMpO1xuICAgIGNvbnN0IG1ldGhvZE5hbWUgPSBoYXNTZXBhcmF0b3IgPyBsaXN0cy5sYXN0KHNwbGl0cykgOiBsaXN0cy5oZWFkKHNwbGl0cyk7XG5cbiAgICBjb25zdCBtb2R1bGUgPSB0aGlzLm1vZHVsZXNbbW9kdWxlTmFtZSB8fCAnZWRpdG9yJ107XG4gICAgaWYgKCFtb2R1bGVOYW1lICYmIHRoaXNbbWV0aG9kTmFtZV0pIHtcbiAgICAgIHJldHVybiB0aGlzW21ldGhvZE5hbWVdLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH0gZWxzZSBpZiAobW9kdWxlICYmIG1vZHVsZVttZXRob2ROYW1lXSAmJiBtb2R1bGUuc2hvdWxkSW5pdGlhbGl6ZSgpKSB7XG4gICAgICByZXR1cm4gbW9kdWxlW21ldGhvZE5hbWVdLmFwcGx5KG1vZHVsZSwgYXJncyk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IGVudiBmcm9tICcuL2Jhc2UvY29yZS9lbnYnO1xuaW1wb3J0IGxpc3RzIGZyb20gJy4vYmFzZS9jb3JlL2xpc3RzJztcbmltcG9ydCBDb250ZXh0IGZyb20gJy4vYmFzZS9Db250ZXh0JztcblxuJC5mbi5leHRlbmQoe1xuICAvKipcbiAgICogU3VtbWVybm90ZSBBUElcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfVxuICAgKiBAcmV0dXJuIHt0aGlzfVxuICAgKi9cbiAgc3VtbWVybm90ZTogZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgdHlwZSA9ICQudHlwZShsaXN0cy5oZWFkKGFyZ3VtZW50cykpO1xuICAgIGNvbnN0IGlzRXh0ZXJuYWxBUElDYWxsZWQgPSB0eXBlID09PSAnc3RyaW5nJztcbiAgICBjb25zdCBoYXNJbml0T3B0aW9ucyA9IHR5cGUgPT09ICdvYmplY3QnO1xuXG4gICAgY29uc3Qgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCAkLnN1bW1lcm5vdGUub3B0aW9ucywgaGFzSW5pdE9wdGlvbnMgPyBsaXN0cy5oZWFkKGFyZ3VtZW50cykgOiB7fSk7XG5cbiAgICAvLyBVcGRhdGUgb3B0aW9uc1xuICAgIG9wdGlvbnMubGFuZ0luZm8gPSAkLmV4dGVuZCh0cnVlLCB7fSwgJC5zdW1tZXJub3RlLmxhbmdbJ2VuLVVTJ10sICQuc3VtbWVybm90ZS5sYW5nW29wdGlvbnMubGFuZ10pO1xuICAgIG9wdGlvbnMuaWNvbnMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgJC5zdW1tZXJub3RlLm9wdGlvbnMuaWNvbnMsIG9wdGlvbnMuaWNvbnMpO1xuICAgIG9wdGlvbnMudG9vbHRpcCA9IG9wdGlvbnMudG9vbHRpcCA9PT0gJ2F1dG8nID8gIWVudi5pc1N1cHBvcnRUb3VjaCA6IG9wdGlvbnMudG9vbHRpcDtcblxuICAgIHRoaXMuZWFjaCgoaWR4LCBub3RlKSA9PiB7XG4gICAgICBjb25zdCAkbm90ZSA9ICQobm90ZSk7XG4gICAgICBpZiAoISRub3RlLmRhdGEoJ3N1bW1lcm5vdGUnKSkge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gbmV3IENvbnRleHQoJG5vdGUsIG9wdGlvbnMpO1xuICAgICAgICAkbm90ZS5kYXRhKCdzdW1tZXJub3RlJywgY29udGV4dCk7XG4gICAgICAgICRub3RlLmRhdGEoJ3N1bW1lcm5vdGUnKS50cmlnZ2VyRXZlbnQoJ2luaXQnLCBjb250ZXh0LmxheW91dEluZm8pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgJG5vdGUgPSB0aGlzLmZpcnN0KCk7XG4gICAgaWYgKCRub3RlLmxlbmd0aCkge1xuICAgICAgY29uc3QgY29udGV4dCA9ICRub3RlLmRhdGEoJ3N1bW1lcm5vdGUnKTtcbiAgICAgIGlmIChpc0V4dGVybmFsQVBJQ2FsbGVkKSB7XG4gICAgICAgIHJldHVybiBjb250ZXh0Lmludm9rZS5hcHBseShjb250ZXh0LCBsaXN0cy5mcm9tKGFyZ3VtZW50cykpO1xuICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmZvY3VzKSB7XG4gICAgICAgIGNvbnRleHQuaW52b2tlKCdlZGl0b3IuZm9jdXMnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxufSk7XG4iLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xuaW1wb3J0IHVpIGZyb20gJy4uL2JzMy91aSc7XG5pbXBvcnQgZG9tIGZyb20gJy4uL2Jhc2UvY29yZS9kb20nO1xuaW1wb3J0ICcuLi9iYXNlL3N1bW1lcm5vdGUtZW4tVVMnO1xuaW1wb3J0IEVkaXRvciBmcm9tICcuLi9iYXNlL21vZHVsZS9FZGl0b3InO1xuaW1wb3J0IENsaXBib2FyZCBmcm9tICcuLi9iYXNlL21vZHVsZS9DbGlwYm9hcmQnO1xuaW1wb3J0IERyb3B6b25lIGZyb20gJy4uL2Jhc2UvbW9kdWxlL0Ryb3B6b25lJztcbmltcG9ydCBDb2RldmlldyBmcm9tICcuLi9iYXNlL21vZHVsZS9Db2Rldmlldyc7XG5pbXBvcnQgU3RhdHVzYmFyIGZyb20gJy4uL2Jhc2UvbW9kdWxlL1N0YXR1c2Jhcic7XG5pbXBvcnQgRnVsbHNjcmVlbiBmcm9tICcuLi9iYXNlL21vZHVsZS9GdWxsc2NyZWVuJztcbmltcG9ydCBIYW5kbGUgZnJvbSAnLi4vYmFzZS9tb2R1bGUvSGFuZGxlJztcbmltcG9ydCBBdXRvTGluayBmcm9tICcuLi9iYXNlL21vZHVsZS9BdXRvTGluayc7XG5pbXBvcnQgQXV0b1N5bmMgZnJvbSAnLi4vYmFzZS9tb2R1bGUvQXV0b1N5bmMnO1xuaW1wb3J0IFBsYWNlaG9sZGVyIGZyb20gJy4uL2Jhc2UvbW9kdWxlL1BsYWNlaG9sZGVyJztcbmltcG9ydCBCdXR0b25zIGZyb20gJy4uL2Jhc2UvbW9kdWxlL0J1dHRvbnMnO1xuaW1wb3J0IFRvb2xiYXIgZnJvbSAnLi4vYmFzZS9tb2R1bGUvVG9vbGJhcic7XG5pbXBvcnQgTGlua0RpYWxvZyBmcm9tICcuLi9iYXNlL21vZHVsZS9MaW5rRGlhbG9nJztcbmltcG9ydCBMaW5rUG9wb3ZlciBmcm9tICcuLi9iYXNlL21vZHVsZS9MaW5rUG9wb3Zlcic7XG5pbXBvcnQgSW1hZ2VEaWFsb2cgZnJvbSAnLi4vYmFzZS9tb2R1bGUvSW1hZ2VEaWFsb2cnO1xuaW1wb3J0IEltYWdlUG9wb3ZlciBmcm9tICcuLi9iYXNlL21vZHVsZS9JbWFnZVBvcG92ZXInO1xuaW1wb3J0IFRhYmxlUG9wb3ZlciBmcm9tICcuLi9iYXNlL21vZHVsZS9UYWJsZVBvcG92ZXInO1xuaW1wb3J0IFZpZGVvRGlhbG9nIGZyb20gJy4uL2Jhc2UvbW9kdWxlL1ZpZGVvRGlhbG9nJztcbmltcG9ydCBIZWxwRGlhbG9nIGZyb20gJy4uL2Jhc2UvbW9kdWxlL0hlbHBEaWFsb2cnO1xuaW1wb3J0IEFpclBvcG92ZXIgZnJvbSAnLi4vYmFzZS9tb2R1bGUvQWlyUG9wb3Zlcic7XG5pbXBvcnQgSGludFBvcG92ZXIgZnJvbSAnLi4vYmFzZS9tb2R1bGUvSGludFBvcG92ZXInO1xuXG4kLnN1bW1lcm5vdGUgPSAkLmV4dGVuZCgkLnN1bW1lcm5vdGUsIHtcbiAgdmVyc2lvbjogJ0BAVkVSU0lPTkBAJyxcbiAgdWk6IHVpLFxuICBkb206IGRvbSxcblxuICBwbHVnaW5zOiB7fSxcblxuICBvcHRpb25zOiB7XG4gICAgbW9kdWxlczoge1xuICAgICAgJ2VkaXRvcic6IEVkaXRvcixcbiAgICAgICdjbGlwYm9hcmQnOiBDbGlwYm9hcmQsXG4gICAgICAnZHJvcHpvbmUnOiBEcm9wem9uZSxcbiAgICAgICdjb2Rldmlldyc6IENvZGV2aWV3LFxuICAgICAgJ3N0YXR1c2Jhcic6IFN0YXR1c2JhcixcbiAgICAgICdmdWxsc2NyZWVuJzogRnVsbHNjcmVlbixcbiAgICAgICdoYW5kbGUnOiBIYW5kbGUsXG4gICAgICAvLyBGSVhNRTogSGludFBvcG92ZXIgbXVzdCBiZSBmcm9udCBvZiBhdXRvbGlua1xuICAgICAgLy8gIC0gU2NyaXB0IGVycm9yIGFib3V0IHJhbmdlIHdoZW4gRW50ZXIga2V5IGlzIHByZXNzZWQgb24gaGludCBwb3BvdmVyXG4gICAgICAnaGludFBvcG92ZXInOiBIaW50UG9wb3ZlcixcbiAgICAgICdhdXRvTGluayc6IEF1dG9MaW5rLFxuICAgICAgJ2F1dG9TeW5jJzogQXV0b1N5bmMsXG4gICAgICAncGxhY2Vob2xkZXInOiBQbGFjZWhvbGRlcixcbiAgICAgICdidXR0b25zJzogQnV0dG9ucyxcbiAgICAgICd0b29sYmFyJzogVG9vbGJhcixcbiAgICAgICdsaW5rRGlhbG9nJzogTGlua0RpYWxvZyxcbiAgICAgICdsaW5rUG9wb3Zlcic6IExpbmtQb3BvdmVyLFxuICAgICAgJ2ltYWdlRGlhbG9nJzogSW1hZ2VEaWFsb2csXG4gICAgICAnaW1hZ2VQb3BvdmVyJzogSW1hZ2VQb3BvdmVyLFxuICAgICAgJ3RhYmxlUG9wb3Zlcic6IFRhYmxlUG9wb3ZlcixcbiAgICAgICd2aWRlb0RpYWxvZyc6IFZpZGVvRGlhbG9nLFxuICAgICAgJ2hlbHBEaWFsb2cnOiBIZWxwRGlhbG9nLFxuICAgICAgJ2FpclBvcG92ZXInOiBBaXJQb3BvdmVyXG4gICAgfSxcblxuICAgIGJ1dHRvbnM6IHt9LFxuXG4gICAgbGFuZzogJ2VuLVVTJyxcblxuICAgIGZvbGxvd2luZ1Rvb2xiYXI6IHRydWUsXG4gICAgb3RoZXJTdGF0aWNCYXI6ICcnLFxuXG4gICAgLy8gdG9vbGJhclxuICAgIHRvb2xiYXI6IFtcbiAgICAgIFsnc3R5bGUnLCBbJ3N0eWxlJ11dLFxuICAgICAgWydmb250JywgWydib2xkJywgJ3VuZGVybGluZScsICdjbGVhciddXSxcbiAgICAgIFsnZm9udG5hbWUnLCBbJ2ZvbnRuYW1lJ11dLFxuICAgICAgWydjb2xvcicsIFsnY29sb3InXV0sXG4gICAgICBbJ3BhcmEnLCBbJ3VsJywgJ29sJywgJ3BhcmFncmFwaCddXSxcbiAgICAgIFsndGFibGUnLCBbJ3RhYmxlJ11dLFxuICAgICAgWydpbnNlcnQnLCBbJ2xpbmsnLCAncGljdHVyZScsICd2aWRlbyddXSxcbiAgICAgIFsndmlldycsIFsnZnVsbHNjcmVlbicsICdjb2RldmlldycsICdoZWxwJ11dXG4gICAgXSxcblxuICAgIC8vIHBvcG92ZXJcbiAgICBwb3BhdG1vdXNlOiB0cnVlLFxuICAgIHBvcG92ZXI6IHtcbiAgICAgIGltYWdlOiBbXG4gICAgICAgIFsnaW1hZ2VzaXplJywgWydpbWFnZVNpemUxMDAnLCAnaW1hZ2VTaXplNTAnLCAnaW1hZ2VTaXplMjUnXV0sXG4gICAgICAgIFsnZmxvYXQnLCBbJ2Zsb2F0TGVmdCcsICdmbG9hdFJpZ2h0JywgJ2Zsb2F0Tm9uZSddXSxcbiAgICAgICAgWydyZW1vdmUnLCBbJ3JlbW92ZU1lZGlhJ11dXG4gICAgICBdLFxuICAgICAgbGluazogW1xuICAgICAgICBbJ2xpbmsnLCBbJ2xpbmtEaWFsb2dTaG93JywgJ3VubGluayddXVxuICAgICAgXSxcbiAgICAgIHRhYmxlOiBbXG4gICAgICAgIFsnYWRkJywgWydhZGRSb3dEb3duJywgJ2FkZFJvd1VwJywgJ2FkZENvbExlZnQnLCAnYWRkQ29sUmlnaHQnXV0sXG4gICAgICAgIFsnZGVsZXRlJywgWydkZWxldGVSb3cnLCAnZGVsZXRlQ29sJywgJ2RlbGV0ZVRhYmxlJ11dXG4gICAgICBdLFxuICAgICAgYWlyOiBbXG4gICAgICAgIFsnY29sb3InLCBbJ2NvbG9yJ11dLFxuICAgICAgICBbJ2ZvbnQnLCBbJ2JvbGQnLCAndW5kZXJsaW5lJywgJ2NsZWFyJ11dLFxuICAgICAgICBbJ3BhcmEnLCBbJ3VsJywgJ3BhcmFncmFwaCddXSxcbiAgICAgICAgWyd0YWJsZScsIFsndGFibGUnXV0sXG4gICAgICAgIFsnaW5zZXJ0JywgWydsaW5rJywgJ3BpY3R1cmUnXV1cbiAgICAgIF1cbiAgICB9LFxuXG4gICAgLy8gYWlyIG1vZGU6IGlubGluZSBlZGl0b3JcbiAgICBhaXJNb2RlOiBmYWxzZSxcblxuICAgIHdpZHRoOiBudWxsLFxuICAgIGhlaWdodDogbnVsbCxcbiAgICBsaW5rVGFyZ2V0Qmxhbms6IHRydWUsXG5cbiAgICBmb2N1czogZmFsc2UsXG4gICAgdGFiU2l6ZTogNCxcbiAgICBzdHlsZVdpdGhTcGFuOiB0cnVlLFxuICAgIHNob3J0Y3V0czogdHJ1ZSxcbiAgICB0ZXh0YXJlYUF1dG9TeW5jOiB0cnVlLFxuICAgIGhpbnREaXJlY3Rpb246ICdib3R0b20nLFxuICAgIHRvb2x0aXA6ICdhdXRvJyxcbiAgICBjb250YWluZXI6ICdib2R5JyxcbiAgICBtYXhUZXh0TGVuZ3RoOiAwLFxuXG4gICAgc3R5bGVUYWdzOiBbJ3AnLCAnYmxvY2txdW90ZScsICdwcmUnLCAnaDEnLCAnaDInLCAnaDMnLCAnaDQnLCAnaDUnLCAnaDYnXSxcblxuICAgIGZvbnROYW1lczogW1xuICAgICAgJ0FyaWFsJywgJ0FyaWFsIEJsYWNrJywgJ0NvbWljIFNhbnMgTVMnLCAnQ291cmllciBOZXcnLFxuICAgICAgJ0hlbHZldGljYSBOZXVlJywgJ0hlbHZldGljYScsICdJbXBhY3QnLCAnTHVjaWRhIEdyYW5kZScsXG4gICAgICAnVGFob21hJywgJ1RpbWVzIE5ldyBSb21hbicsICdWZXJkYW5hJ1xuICAgIF0sXG5cbiAgICBmb250U2l6ZXM6IFsnOCcsICc5JywgJzEwJywgJzExJywgJzEyJywgJzE0JywgJzE4JywgJzI0JywgJzM2J10sXG5cbiAgICAvLyBwYWxsZXRlIGNvbG9ycyhuIHggbilcbiAgICBjb2xvcnM6IFtcbiAgICAgIFsnIzAwMDAwMCcsICcjNDI0MjQyJywgJyM2MzYzNjMnLCAnIzlDOUM5NCcsICcjQ0VDNkNFJywgJyNFRkVGRUYnLCAnI0Y3RjdGNycsICcjRkZGRkZGJ10sXG4gICAgICBbJyNGRjAwMDAnLCAnI0ZGOUMwMCcsICcjRkZGRjAwJywgJyMwMEZGMDAnLCAnIzAwRkZGRicsICcjMDAwMEZGJywgJyM5QzAwRkYnLCAnI0ZGMDBGRiddLFxuICAgICAgWycjRjdDNkNFJywgJyNGRkU3Q0UnLCAnI0ZGRUZDNicsICcjRDZFRkQ2JywgJyNDRURFRTcnLCAnI0NFRTdGNycsICcjRDZENkU3JywgJyNFN0Q2REUnXSxcbiAgICAgIFsnI0U3OUM5QycsICcjRkZDNjlDJywgJyNGRkU3OUMnLCAnI0I1RDZBNScsICcjQTVDNkNFJywgJyM5Q0M2RUYnLCAnI0I1QTVENicsICcjRDZBNUJEJ10sXG4gICAgICBbJyNFNzYzNjMnLCAnI0Y3QUQ2QicsICcjRkZENjYzJywgJyM5NEJEN0InLCAnIzczQTVBRCcsICcjNkJBRERFJywgJyM4QzdCQzYnLCAnI0M2N0JBNSddLFxuICAgICAgWycjQ0UwMDAwJywgJyNFNzk0MzknLCAnI0VGQzYzMScsICcjNkJBNTRBJywgJyM0QTdCOEMnLCAnIzM5ODRDNicsICcjNjM0QUE1JywgJyNBNTRBN0InXSxcbiAgICAgIFsnIzlDMDAwMCcsICcjQjU2MzA4JywgJyNCRDk0MDAnLCAnIzM5N0IyMScsICcjMTA0QTVBJywgJyMwODUyOTQnLCAnIzMxMTg3MycsICcjNzMxODQyJ10sXG4gICAgICBbJyM2MzAwMDAnLCAnIzdCMzkwMCcsICcjODQ2MzAwJywgJyMyOTUyMTgnLCAnIzA4MzEzOScsICcjMDAzMTYzJywgJyMyMTEwNEEnLCAnIzRBMTAzMSddXG4gICAgXSxcblxuICAgIGxpbmVIZWlnaHRzOiBbJzEuMCcsICcxLjInLCAnMS40JywgJzEuNScsICcxLjYnLCAnMS44JywgJzIuMCcsICczLjAnXSxcblxuICAgIHRhYmxlQ2xhc3NOYW1lOiAndGFibGUgdGFibGUtYm9yZGVyZWQnLFxuXG4gICAgaW5zZXJ0VGFibGVNYXhTaXplOiB7XG4gICAgICBjb2w6IDEwLFxuICAgICAgcm93OiAxMFxuICAgIH0sXG5cbiAgICBkaWFsb2dzSW5Cb2R5OiBmYWxzZSxcbiAgICBkaWFsb2dzRmFkZTogZmFsc2UsXG5cbiAgICBtYXhpbXVtSW1hZ2VGaWxlU2l6ZTogbnVsbCxcblxuICAgIGNhbGxiYWNrczoge1xuICAgICAgb25Jbml0OiBudWxsLFxuICAgICAgb25Gb2N1czogbnVsbCxcbiAgICAgIG9uQmx1cjogbnVsbCxcbiAgICAgIG9uQmx1ckNvZGV2aWV3OiBudWxsLFxuICAgICAgb25FbnRlcjogbnVsbCxcbiAgICAgIG9uS2V5dXA6IG51bGwsXG4gICAgICBvbktleWRvd246IG51bGwsXG4gICAgICBvbkltYWdlVXBsb2FkOiBudWxsLFxuICAgICAgb25JbWFnZVVwbG9hZEVycm9yOiBudWxsXG4gICAgfSxcblxuICAgIGNvZGVtaXJyb3I6IHtcbiAgICAgIG1vZGU6ICd0ZXh0L2h0bWwnLFxuICAgICAgaHRtbE1vZGU6IHRydWUsXG4gICAgICBsaW5lTnVtYmVyczogdHJ1ZVxuICAgIH0sXG5cbiAgICBrZXlNYXA6IHtcbiAgICAgIHBjOiB7XG4gICAgICAgICdFTlRFUic6ICdpbnNlcnRQYXJhZ3JhcGgnLFxuICAgICAgICAnQ1RSTCtaJzogJ3VuZG8nLFxuICAgICAgICAnQ1RSTCtZJzogJ3JlZG8nLFxuICAgICAgICAnVEFCJzogJ3RhYicsXG4gICAgICAgICdTSElGVCtUQUInOiAndW50YWInLFxuICAgICAgICAnQ1RSTCtCJzogJ2JvbGQnLFxuICAgICAgICAnQ1RSTCtJJzogJ2l0YWxpYycsXG4gICAgICAgICdDVFJMK1UnOiAndW5kZXJsaW5lJyxcbiAgICAgICAgJ0NUUkwrU0hJRlQrUyc6ICdzdHJpa2V0aHJvdWdoJyxcbiAgICAgICAgJ0NUUkwrQkFDS1NMQVNIJzogJ3JlbW92ZUZvcm1hdCcsXG4gICAgICAgICdDVFJMK1NISUZUK0wnOiAnanVzdGlmeUxlZnQnLFxuICAgICAgICAnQ1RSTCtTSElGVCtFJzogJ2p1c3RpZnlDZW50ZXInLFxuICAgICAgICAnQ1RSTCtTSElGVCtSJzogJ2p1c3RpZnlSaWdodCcsXG4gICAgICAgICdDVFJMK1NISUZUK0onOiAnanVzdGlmeUZ1bGwnLFxuICAgICAgICAnQ1RSTCtTSElGVCtOVU03JzogJ2luc2VydFVub3JkZXJlZExpc3QnLFxuICAgICAgICAnQ1RSTCtTSElGVCtOVU04JzogJ2luc2VydE9yZGVyZWRMaXN0JyxcbiAgICAgICAgJ0NUUkwrTEVGVEJSQUNLRVQnOiAnb3V0ZGVudCcsXG4gICAgICAgICdDVFJMK1JJR0hUQlJBQ0tFVCc6ICdpbmRlbnQnLFxuICAgICAgICAnQ1RSTCtOVU0wJzogJ2Zvcm1hdFBhcmEnLFxuICAgICAgICAnQ1RSTCtOVU0xJzogJ2Zvcm1hdEgxJyxcbiAgICAgICAgJ0NUUkwrTlVNMic6ICdmb3JtYXRIMicsXG4gICAgICAgICdDVFJMK05VTTMnOiAnZm9ybWF0SDMnLFxuICAgICAgICAnQ1RSTCtOVU00JzogJ2Zvcm1hdEg0JyxcbiAgICAgICAgJ0NUUkwrTlVNNSc6ICdmb3JtYXRINScsXG4gICAgICAgICdDVFJMK05VTTYnOiAnZm9ybWF0SDYnLFxuICAgICAgICAnQ1RSTCtFTlRFUic6ICdpbnNlcnRIb3Jpem9udGFsUnVsZScsXG4gICAgICAgICdDVFJMK0snOiAnbGlua0RpYWxvZy5zaG93J1xuICAgICAgfSxcblxuICAgICAgbWFjOiB7XG4gICAgICAgICdFTlRFUic6ICdpbnNlcnRQYXJhZ3JhcGgnLFxuICAgICAgICAnQ01EK1onOiAndW5kbycsXG4gICAgICAgICdDTUQrU0hJRlQrWic6ICdyZWRvJyxcbiAgICAgICAgJ1RBQic6ICd0YWInLFxuICAgICAgICAnU0hJRlQrVEFCJzogJ3VudGFiJyxcbiAgICAgICAgJ0NNRCtCJzogJ2JvbGQnLFxuICAgICAgICAnQ01EK0knOiAnaXRhbGljJyxcbiAgICAgICAgJ0NNRCtVJzogJ3VuZGVybGluZScsXG4gICAgICAgICdDTUQrU0hJRlQrUyc6ICdzdHJpa2V0aHJvdWdoJyxcbiAgICAgICAgJ0NNRCtCQUNLU0xBU0gnOiAncmVtb3ZlRm9ybWF0JyxcbiAgICAgICAgJ0NNRCtTSElGVCtMJzogJ2p1c3RpZnlMZWZ0JyxcbiAgICAgICAgJ0NNRCtTSElGVCtFJzogJ2p1c3RpZnlDZW50ZXInLFxuICAgICAgICAnQ01EK1NISUZUK1InOiAnanVzdGlmeVJpZ2h0JyxcbiAgICAgICAgJ0NNRCtTSElGVCtKJzogJ2p1c3RpZnlGdWxsJyxcbiAgICAgICAgJ0NNRCtTSElGVCtOVU03JzogJ2luc2VydFVub3JkZXJlZExpc3QnLFxuICAgICAgICAnQ01EK1NISUZUK05VTTgnOiAnaW5zZXJ0T3JkZXJlZExpc3QnLFxuICAgICAgICAnQ01EK0xFRlRCUkFDS0VUJzogJ291dGRlbnQnLFxuICAgICAgICAnQ01EK1JJR0hUQlJBQ0tFVCc6ICdpbmRlbnQnLFxuICAgICAgICAnQ01EK05VTTAnOiAnZm9ybWF0UGFyYScsXG4gICAgICAgICdDTUQrTlVNMSc6ICdmb3JtYXRIMScsXG4gICAgICAgICdDTUQrTlVNMic6ICdmb3JtYXRIMicsXG4gICAgICAgICdDTUQrTlVNMyc6ICdmb3JtYXRIMycsXG4gICAgICAgICdDTUQrTlVNNCc6ICdmb3JtYXRINCcsXG4gICAgICAgICdDTUQrTlVNNSc6ICdmb3JtYXRINScsXG4gICAgICAgICdDTUQrTlVNNic6ICdmb3JtYXRINicsXG4gICAgICAgICdDTUQrRU5URVInOiAnaW5zZXJ0SG9yaXpvbnRhbFJ1bGUnLFxuICAgICAgICAnQ01EK0snOiAnbGlua0RpYWxvZy5zaG93J1xuICAgICAgfVxuICAgIH0sXG4gICAgaWNvbnM6IHtcbiAgICAgICdhbGlnbic6ICdub3RlLWljb24tYWxpZ24nLFxuICAgICAgJ2FsaWduQ2VudGVyJzogJ25vdGUtaWNvbi1hbGlnbi1jZW50ZXInLFxuICAgICAgJ2FsaWduSnVzdGlmeSc6ICdub3RlLWljb24tYWxpZ24tanVzdGlmeScsXG4gICAgICAnYWxpZ25MZWZ0JzogJ25vdGUtaWNvbi1hbGlnbi1sZWZ0JyxcbiAgICAgICdhbGlnblJpZ2h0JzogJ25vdGUtaWNvbi1hbGlnbi1yaWdodCcsXG4gICAgICAncm93QmVsb3cnOiAnbm90ZS1pY29uLXJvdy1iZWxvdycsXG4gICAgICAnY29sQmVmb3JlJzogJ25vdGUtaWNvbi1jb2wtYmVmb3JlJyxcbiAgICAgICdjb2xBZnRlcic6ICdub3RlLWljb24tY29sLWFmdGVyJyxcbiAgICAgICdyb3dBYm92ZSc6ICdub3RlLWljb24tcm93LWFib3ZlJyxcbiAgICAgICdyb3dSZW1vdmUnOiAnbm90ZS1pY29uLXJvdy1yZW1vdmUnLFxuICAgICAgJ2NvbFJlbW92ZSc6ICdub3RlLWljb24tY29sLXJlbW92ZScsXG4gICAgICAnaW5kZW50JzogJ25vdGUtaWNvbi1hbGlnbi1pbmRlbnQnLFxuICAgICAgJ291dGRlbnQnOiAnbm90ZS1pY29uLWFsaWduLW91dGRlbnQnLFxuICAgICAgJ2Fycm93c0FsdCc6ICdub3RlLWljb24tYXJyb3dzLWFsdCcsXG4gICAgICAnYm9sZCc6ICdub3RlLWljb24tYm9sZCcsXG4gICAgICAnY2FyZXQnOiAnbm90ZS1pY29uLWNhcmV0JyxcbiAgICAgICdjaXJjbGUnOiAnbm90ZS1pY29uLWNpcmNsZScsXG4gICAgICAnY2xvc2UnOiAnbm90ZS1pY29uLWNsb3NlJyxcbiAgICAgICdjb2RlJzogJ25vdGUtaWNvbi1jb2RlJyxcbiAgICAgICdlcmFzZXInOiAnbm90ZS1pY29uLWVyYXNlcicsXG4gICAgICAnZm9udCc6ICdub3RlLWljb24tZm9udCcsXG4gICAgICAnZnJhbWUnOiAnbm90ZS1pY29uLWZyYW1lJyxcbiAgICAgICdpdGFsaWMnOiAnbm90ZS1pY29uLWl0YWxpYycsXG4gICAgICAnbGluayc6ICdub3RlLWljb24tbGluaycsXG4gICAgICAndW5saW5rJzogJ25vdGUtaWNvbi1jaGFpbi1icm9rZW4nLFxuICAgICAgJ21hZ2ljJzogJ25vdGUtaWNvbi1tYWdpYycsXG4gICAgICAnbWVudUNoZWNrJzogJ25vdGUtaWNvbi1tZW51LWNoZWNrJyxcbiAgICAgICdtaW51cyc6ICdub3RlLWljb24tbWludXMnLFxuICAgICAgJ29yZGVyZWRsaXN0JzogJ25vdGUtaWNvbi1vcmRlcmVkbGlzdCcsXG4gICAgICAncGVuY2lsJzogJ25vdGUtaWNvbi1wZW5jaWwnLFxuICAgICAgJ3BpY3R1cmUnOiAnbm90ZS1pY29uLXBpY3R1cmUnLFxuICAgICAgJ3F1ZXN0aW9uJzogJ25vdGUtaWNvbi1xdWVzdGlvbicsXG4gICAgICAncmVkbyc6ICdub3RlLWljb24tcmVkbycsXG4gICAgICAnc3F1YXJlJzogJ25vdGUtaWNvbi1zcXVhcmUnLFxuICAgICAgJ3N0cmlrZXRocm91Z2gnOiAnbm90ZS1pY29uLXN0cmlrZXRocm91Z2gnLFxuICAgICAgJ3N1YnNjcmlwdCc6ICdub3RlLWljb24tc3Vic2NyaXB0JyxcbiAgICAgICdzdXBlcnNjcmlwdCc6ICdub3RlLWljb24tc3VwZXJzY3JpcHQnLFxuICAgICAgJ3RhYmxlJzogJ25vdGUtaWNvbi10YWJsZScsXG4gICAgICAndGV4dEhlaWdodCc6ICdub3RlLWljb24tdGV4dC1oZWlnaHQnLFxuICAgICAgJ3RyYXNoJzogJ25vdGUtaWNvbi10cmFzaCcsXG4gICAgICAndW5kZXJsaW5lJzogJ25vdGUtaWNvbi11bmRlcmxpbmUnLFxuICAgICAgJ3VuZG8nOiAnbm90ZS1pY29uLXVuZG8nLFxuICAgICAgJ3Vub3JkZXJlZGxpc3QnOiAnbm90ZS1pY29uLXVub3JkZXJlZGxpc3QnLFxuICAgICAgJ3ZpZGVvJzogJ25vdGUtaWNvbi12aWRlbydcbiAgICB9XG4gIH1cbn0pO1xuXG5pbXBvcnQgJy4uL3N1bW1lcm5vdGUnOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4iXX0=
