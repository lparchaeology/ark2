(function(e,t){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=e.document?t(e,true):function(e){if(!e.document){throw new Error("jQuery requires a window with a document")}return t(e)}}else{t(e)}})(typeof window!=="undefined"?window:this,function(e,t){var i=[];var n=e.document;var s=i.slice;var r=i.concat;var o=i.push;var a=i.indexOf;var l={};var h=l.toString;var d=l.hasOwnProperty;var u={};var f="2.2.4",c=function(e,t){return new c.fn.init(e,t)},p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,m=/^-ms-/,v=/-([\da-z])/gi,g=function(e,t){return t.toUpperCase()};c.fn=c.prototype={jquery:f,constructor:c,selector:"",length:0,toArray:function(){return s.call(this)},get:function(e){return e!=null?e<0?this[e+this.length]:this[e]:s.call(this)},pushStack:function(e){var t=c.merge(this.constructor(),e);t.prevObject=this;t.context=this.context;return t},each:function(e){return c.each(this,e)},map:function(e){return this.pushStack(c.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:i.sort,splice:i.splice};c.extend=c.fn.extend=function(){var e,t,i,n,s,r,o=arguments[0]||{},a=1,l=arguments.length,h=false;if(typeof o==="boolean"){h=o;o=arguments[a]||{};a++}if(typeof o!=="object"&&!c.isFunction(o)){o={}}if(a===l){o=this;a--}for(;a<l;a++){if((e=arguments[a])!=null){for(t in e){i=o[t];n=e[t];if(o===n){continue}if(h&&n&&(c.isPlainObject(n)||(s=c.isArray(n)))){if(s){s=false;r=i&&c.isArray(i)?i:[]}else{r=i&&c.isPlainObject(i)?i:{}}o[t]=c.extend(h,r,n)}else if(n!==undefined){o[t]=n}}}}return o};c.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:true,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return c.type(e)==="function"},isArray:Array.isArray,isWindow:function(e){return e!=null&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!c.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if(c.type(e)!=="object"||e.nodeType||c.isWindow(e)){return false}if(e.constructor&&!d.call(e,"constructor")&&!d.call(e.constructor.prototype||{},"isPrototypeOf")){return false}for(t in e){}return t===undefined||d.call(e,t)},isEmptyObject:function(e){var t;for(t in e){return false}return true},type:function(e){if(e==null){return e+""}return typeof e==="object"||typeof e==="function"?l[h.call(e)]||"object":typeof e},globalEval:function(e){var t,i=eval;e=c.trim(e);if(e){if(e.indexOf("use strict")===1){t=n.createElement("script");t.text=e;n.head.appendChild(t).parentNode.removeChild(t)}else{i(e)}}},camelCase:function(e){return e.replace(m,"ms-").replace(v,g)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,n=0;if(y(e)){i=e.length;for(;n<i;n++){if(t.call(e[n],n,e[n])===false){break}}}else{for(n in e){if(t.call(e[n],n,e[n])===false){break}}}return e},trim:function(e){return e==null?"":(e+"").replace(p,"")},makeArray:function(e,t){var i=t||[];if(e!=null){if(y(Object(e))){c.merge(i,typeof e==="string"?[e]:e)}else{o.call(i,e)}}return i},inArray:function(e,t,i){return t==null?-1:a.call(t,e,i)},merge:function(e,t){var i=+t.length,n=0,s=e.length;for(;n<i;n++){e[s++]=t[n]}e.length=s;return e},grep:function(e,t,i){var n,s=[],r=0,o=e.length,a=!i;for(;r<o;r++){n=!t(e[r],r);if(n!==a){s.push(e[r])}}return s},map:function(e,t,i){var n,s,o=0,a=[];if(y(e)){n=e.length;for(;o<n;o++){s=t(e[o],o,i);if(s!=null){a.push(s)}}}else{for(o in e){s=t(e[o],o,i);if(s!=null){a.push(s)}}}return r.apply([],a)},guid:1,proxy:function(e,t){var i,n,r;if(typeof t==="string"){i=e[t];t=e;e=i}if(!c.isFunction(e)){return undefined}n=s.call(arguments,2);r=function(){return e.apply(t||this,n.concat(s.call(arguments)))};r.guid=e.guid=e.guid||c.guid++;return r},now:Date.now,support:u});if(typeof Symbol==="function"){c.fn[Symbol.iterator]=i[Symbol.iterator]}c.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function y(e){var t=!!e&&"length"in e&&e.length,i=c.type(e);if(i==="function"||c.isWindow(e)){return false}return i==="array"||t===0||typeof t==="number"&&t>0&&t-1 in e}var b=function(e){var t,i,n,s,r,o,a,l,h,d,u,f,c,p,m,v,g,y,b,w="sizzle"+1*new Date,_=e.document,x=0,k=0,C=re(),S=re(),T=re(),M=function(e,t){if(e===t){u=true}return 0},D=1<<31,E={}.hasOwnProperty,O=[],P=O.pop,I=O.push,A=O.push,N=O.slice,F=function(e,t){var i=0,n=e.length;for(;i<n;i++){if(e[i]===t){return i}}return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",$="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",z="\\["+$+"*("+L+")(?:"+$+"*([*^$|!~]?=)"+$+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+$+"*\\]",j=":("+L+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|"+".*"+")\\)|)",H=new RegExp($+"+","g"),B=new RegExp("^"+$+"+|((?:^|[^\\\\])(?:\\\\.)*)"+$+"+$","g"),U=new RegExp("^"+$+"*,"+$+"*"),W=new RegExp("^"+$+"*([>+~]|"+$+")"+$+"*"),Y=new RegExp("="+$+"*([^\\]'\"]*?)"+$+"*\\]","g"),V=new RegExp(j),q=new RegExp("^"+L+"$"),G={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+$+"*(even|odd|(([+-]|)(\\d*)n|)"+$+"*(?:([+-]|)"+$+"*(\\d+)|))"+$+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+$+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+$+"*((?:-\\d)?\\d*)"+$+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,ee=/'|\\/g,te=new RegExp("\\\\([\\da-f]{1,6}"+$+"?|("+$+")|.)","ig"),ie=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)},ne=function(){f()};try{A.apply(O=N.call(_.childNodes),_.childNodes);O[_.childNodes.length].nodeType}catch(e){A={apply:O.length?function(e,t){I.apply(e,N.call(t))}:function(e,t){var i=e.length,n=0;while(e[i++]=t[n++]){}e.length=i-1}}}function se(e,t,n,s){var r,a,h,d,u,p,g,y,x=t&&t.ownerDocument,k=t?t.nodeType:9;n=n||[];if(typeof e!=="string"||!e||k!==1&&k!==9&&k!==11){return n}if(!s){if((t?t.ownerDocument||t:_)!==c){f(t)}t=t||c;if(m){if(k!==11&&(p=Q.exec(e))){if(r=p[1]){if(k===9){if(h=t.getElementById(r)){if(h.id===r){n.push(h);return n}}else{return n}}else{if(x&&(h=x.getElementById(r))&&b(t,h)&&h.id===r){n.push(h);return n}}}else if(p[2]){A.apply(n,t.getElementsByTagName(e));return n}else if((r=p[3])&&i.getElementsByClassName&&t.getElementsByClassName){A.apply(n,t.getElementsByClassName(r));return n}}if(i.qsa&&!T[e+" "]&&(!v||!v.test(e))){if(k!==1){x=t;y=e}else if(t.nodeName.toLowerCase()!=="object"){if(d=t.getAttribute("id")){d=d.replace(ee,"\\$&")}else{t.setAttribute("id",d=w)}g=o(e);a=g.length;u=q.test(d)?"#"+d:"[id='"+d+"']";while(a--){g[a]=u+" "+me(g[a])}y=g.join(",");x=J.test(e)&&ce(t.parentNode)||t}if(y){try{A.apply(n,x.querySelectorAll(y));return n}catch(e){}finally{if(d===w){t.removeAttribute("id")}}}}}}return l(e.replace(B,"$1"),t,n,s)}function re(){var e=[];function t(i,s){if(e.push(i+" ")>n.cacheLength){delete t[e.shift()]}return t[i+" "]=s}return t}function oe(e){e[w]=true;return e}function ae(e){var t=c.createElement("div");try{return!!e(t)}catch(e){return false}finally{if(t.parentNode){t.parentNode.removeChild(t)}t=null}}function le(e,t){var i=e.split("|"),s=i.length;while(s--){n.attrHandle[i[s]]=t}}function he(e,t){var i=t&&e,n=i&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||D)-(~e.sourceIndex||D);if(n){return n}if(i){while(i=i.nextSibling){if(i===t){return-1}}}return e?1:-1}function de(e){return function(t){var i=t.nodeName.toLowerCase();return i==="input"&&t.type===e}}function ue(e){return function(t){var i=t.nodeName.toLowerCase();return(i==="input"||i==="button")&&t.type===e}}function fe(e){return oe(function(t){t=+t;return oe(function(i,n){var s,r=e([],i.length,t),o=r.length;while(o--){if(i[s=r[o]]){i[s]=!(n[s]=i[s])}}})})}function ce(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}i=se.support={};r=se.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":false};f=se.setDocument=function(e){var t,s,o=e?e.ownerDocument||e:_;if(o===c||o.nodeType!==9||!o.documentElement){return c}c=o;p=c.documentElement;m=!r(c);if((s=c.defaultView)&&s.top!==s){if(s.addEventListener){s.addEventListener("unload",ne,false)}else if(s.attachEvent){s.attachEvent("onunload",ne)}}i.attributes=ae(function(e){e.className="i";return!e.getAttribute("className")});i.getElementsByTagName=ae(function(e){e.appendChild(c.createComment(""));return!e.getElementsByTagName("*").length});i.getElementsByClassName=K.test(c.getElementsByClassName);i.getById=ae(function(e){p.appendChild(e).id=w;return!c.getElementsByName||!c.getElementsByName(w).length});if(i.getById){n.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&m){var i=t.getElementById(e);return i?[i]:[]}};n.filter["ID"]=function(e){var t=e.replace(te,ie);return function(e){return e.getAttribute("id")===t}}}else{delete n.find["ID"];n.filter["ID"]=function(e){var t=e.replace(te,ie);return function(e){var i=typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id");return i&&i.value===t}}}n.find["TAG"]=i.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!=="undefined"){return t.getElementsByTagName(e)}else if(i.qsa){return t.querySelectorAll(e)}}:function(e,t){var i,n=[],s=0,r=t.getElementsByTagName(e);if(e==="*"){while(i=r[s++]){if(i.nodeType===1){n.push(i)}}return n}return r};n.find["CLASS"]=i.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!=="undefined"&&m){return t.getElementsByClassName(e)}};g=[];v=[];if(i.qsa=K.test(c.querySelectorAll)){ae(function(e){p.appendChild(e).innerHTML="<a id='"+w+"'></a>"+"<select id='"+w+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(e.querySelectorAll("[msallowcapture^='']").length){v.push("[*^$]="+$+"*(?:''|\"\")")}if(!e.querySelectorAll("[selected]").length){v.push("\\["+$+"*(?:value|"+R+")")}if(!e.querySelectorAll("[id~="+w+"-]").length){v.push("~=")}if(!e.querySelectorAll(":checked").length){v.push(":checked")}if(!e.querySelectorAll("a#"+w+"+*").length){v.push(".#.+[+~]")}});ae(function(e){var t=c.createElement("input");t.setAttribute("type","hidden");e.appendChild(t).setAttribute("name","D");if(e.querySelectorAll("[name=d]").length){v.push("name"+$+"*[*^$|!~]?=")}if(!e.querySelectorAll(":enabled").length){v.push(":enabled",":disabled")}e.querySelectorAll("*,:x");v.push(",.*:")})}if(i.matchesSelector=K.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector)){ae(function(e){i.disconnectedMatch=y.call(e,"div");y.call(e,"[s!='']:x");g.push("!=",j)})}v=v.length&&new RegExp(v.join("|"));g=g.length&&new RegExp(g.join("|"));t=K.test(p.compareDocumentPosition);b=t||K.test(p.contains)?function(e,t){var i=e.nodeType===9?e.documentElement:e,n=t&&t.parentNode;return e===n||!!(n&&n.nodeType===1&&(i.contains?i.contains(n):e.compareDocumentPosition&&e.compareDocumentPosition(n)&16))}:function(e,t){if(t){while(t=t.parentNode){if(t===e){return true}}}return false};M=t?function(e,t){if(e===t){u=true;return 0}var n=!e.compareDocumentPosition-!t.compareDocumentPosition;if(n){return n}n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1;if(n&1||!i.sortDetached&&t.compareDocumentPosition(e)===n){if(e===c||e.ownerDocument===_&&b(_,e)){return-1}if(t===c||t.ownerDocument===_&&b(_,t)){return 1}return d?F(d,e)-F(d,t):0}return n&4?-1:1}:function(e,t){if(e===t){u=true;return 0}var i,n=0,s=e.parentNode,r=t.parentNode,o=[e],a=[t];if(!s||!r){return e===c?-1:t===c?1:s?-1:r?1:d?F(d,e)-F(d,t):0}else if(s===r){return he(e,t)}i=e;while(i=i.parentNode){o.unshift(i)}i=t;while(i=i.parentNode){a.unshift(i)}while(o[n]===a[n]){n++}return n?he(o[n],a[n]):o[n]===_?-1:a[n]===_?1:0};return c};se.matches=function(e,t){return se(e,null,null,t)};se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==c){f(e)}t=t.replace(Y,"='$1']");if(i.matchesSelector&&m&&!T[t+" "]&&(!g||!g.test(t))&&(!v||!v.test(t))){try{var n=y.call(e,t);if(n||i.disconnectedMatch||e.document&&e.document.nodeType!==11){return n}}catch(e){}}return se(t,c,null,[e]).length>0};se.contains=function(e,t){if((e.ownerDocument||e)!==c){f(e)}return b(e,t)};se.attr=function(e,t){if((e.ownerDocument||e)!==c){f(e)}var s=n.attrHandle[t.toLowerCase()],r=s&&E.call(n.attrHandle,t.toLowerCase())?s(e,t,!m):undefined;return r!==undefined?r:i.attributes||!m?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null};se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};se.uniqueSort=function(e){var t,n=[],s=0,r=0;u=!i.detectDuplicates;d=!i.sortStable&&e.slice(0);e.sort(M);if(u){while(t=e[r++]){if(t===e[r]){s=n.push(r)}}while(s--){e.splice(n[s],1)}}d=null;return e};s=se.getText=function(e){var t,i="",n=0,r=e.nodeType;if(!r){while(t=e[n++]){i+=s(t)}}else if(r===1||r===9||r===11){if(typeof e.textContent==="string"){return e.textContent}else{for(e=e.firstChild;e;e=e.nextSibling){i+=s(e)}}}else if(r===3||r===4){return e.nodeValue}return i};n=se.selectors={cacheLength:50,createPseudo:oe,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(te,ie);e[3]=(e[3]||e[4]||e[5]||"").replace(te,ie);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){se.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+(e[7]+e[8]||e[3]==="odd")}else if(e[3]){se.error(e[0])}return e},PSEUDO:function(e){var t,i=!e[6]&&e[2];if(G["CHILD"].test(e[0])){return null}if(e[3]){e[2]=e[4]||e[5]||""}else if(i&&V.test(i)&&(t=o(i,true))&&(t=i.indexOf(")",i.length-t)-i.length)){e[0]=e[0].slice(0,t);e[2]=i.slice(0,t)}return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(te,ie).toLowerCase();return e==="*"?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|"+$+")"+e+"("+$+"|$)"))&&C(e,function(e){return t.test(typeof e.className==="string"&&e.className||typeof e.getAttribute!=="undefined"&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(n){var s=se.attr(n,e);if(s==null){return t==="!="}if(!t){return true}s+="";return t==="="?s===i:t==="!="?s!==i:t==="^="?i&&s.indexOf(i)===0:t==="*="?i&&s.indexOf(i)>-1:t==="$="?i&&s.slice(-i.length)===i:t==="~="?(" "+s.replace(H," ")+" ").indexOf(i)>-1:t==="|="?s===i||s.slice(0,i.length+1)===i+"-":false}},CHILD:function(e,t,i,n,s){var r=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",a=t==="of-type";return n===1&&s===0?function(e){return!!e.parentNode}:function(t,i,l){var h,d,u,f,c,p,m=r!==o?"nextSibling":"previousSibling",v=t.parentNode,g=a&&t.nodeName.toLowerCase(),y=!l&&!a,b=false;if(v){if(r){while(m){f=t;while(f=f[m]){if(a?f.nodeName.toLowerCase()===g:f.nodeType===1){return false}}p=m=e==="only"&&!p&&"nextSibling"}return true}p=[o?v.firstChild:v.lastChild];if(o&&y){f=v;u=f[w]||(f[w]={});d=u[f.uniqueID]||(u[f.uniqueID]={});h=d[e]||[];c=h[0]===x&&h[1];b=c&&h[2];f=c&&v.childNodes[c];while(f=++c&&f&&f[m]||(b=c=0)||p.pop()){if(f.nodeType===1&&++b&&f===t){d[e]=[x,c,b];break}}}else{if(y){f=t;u=f[w]||(f[w]={});d=u[f.uniqueID]||(u[f.uniqueID]={});h=d[e]||[];c=h[0]===x&&h[1];b=c}if(b===false){while(f=++c&&f&&f[m]||(b=c=0)||p.pop()){if((a?f.nodeName.toLowerCase()===g:f.nodeType===1)&&++b){if(y){u=f[w]||(f[w]={});d=u[f.uniqueID]||(u[f.uniqueID]={});d[e]=[x,b]}if(f===t){break}}}}}b-=s;return b===n||b%n===0&&b/n>=0}}},PSEUDO:function(e,t){var i,s=n.pseudos[e]||n.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);if(s[w]){return s(t)}if(s.length>1){i=[e,e,"",t];return n.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,i){var n,r=s(e,t),o=r.length;while(o--){n=F(e,r[o]);e[n]=!(i[n]=r[o])}}):function(e){return s(e,0,i)}}return s}},pseudos:{not:oe(function(e){var t=[],i=[],n=a(e.replace(B,"$1"));return n[w]?oe(function(e,t,i,s){var r,o=n(e,null,s,[]),a=e.length;while(a--){if(r=o[a]){e[a]=!(t[a]=r)}}}):function(e,s,r){t[0]=e;n(t,null,r,i);t[0]=null;return!i.pop()}}),has:oe(function(e){return function(t){return se(e,t).length>0}}),contains:oe(function(e){e=e.replace(te,ie);return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:oe(function(e){if(!q.test(e||"")){se.error("unsupported lang: "+e)}e=e.replace(te,ie).toLowerCase();return function(t){var i;do{if(i=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang")){i=i.toLowerCase();return i===e||i.indexOf(e+"-")===0}}while((t=t.parentNode)&&t.nodeType===1);return false}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},parent:function(e){return!n.pseudos["empty"](e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:fe(function(){return[0]}),last:fe(function(e,t){return[t-1]}),eq:fe(function(e,t,i){return[i<0?i+t:i]}),even:fe(function(e,t){var i=0;for(;i<t;i+=2){e.push(i)}return e}),odd:fe(function(e,t){var i=1;for(;i<t;i+=2){e.push(i)}return e}),lt:fe(function(e,t,i){var n=i<0?i+t:i;for(;--n>=0;){e.push(n)}return e}),gt:fe(function(e,t,i){var n=i<0?i+t:i;for(;++n<t;){e.push(n)}return e})}};n.pseudos["nth"]=n.pseudos["eq"];for(t in{radio:true,checkbox:true,file:true,password:true,image:true}){n.pseudos[t]=de(t)}for(t in{submit:true,reset:true}){n.pseudos[t]=ue(t)}function pe(){}pe.prototype=n.filters=n.pseudos;n.setFilters=new pe;o=se.tokenize=function(e,t){var i,s,r,o,a,l,h,d=S[e+" "];if(d){return t?0:d.slice(0)}a=e;l=[];h=n.preFilter;while(a){if(!i||(s=U.exec(a))){if(s){a=a.slice(s[0].length)||a}l.push(r=[])}i=false;if(s=W.exec(a)){i=s.shift();r.push({value:i,type:s[0].replace(B," ")});a=a.slice(i.length)}for(o in n.filter){if((s=G[o].exec(a))&&(!h[o]||(s=h[o](s)))){i=s.shift();r.push({value:i,type:o,matches:s});a=a.slice(i.length)}}if(!i){break}}return t?a.length:a?se.error(e):S(e,l).slice(0)};function me(e){var t=0,i=e.length,n="";for(;t<i;t++){n+=e[t].value}return n}function ve(e,t,i){var n=t.dir,s=i&&n==="parentNode",r=k++;return t.first?function(t,i,r){while(t=t[n]){if(t.nodeType===1||s){return e(t,i,r)}}}:function(t,i,o){var a,l,h,d=[x,r];if(o){while(t=t[n]){if(t.nodeType===1||s){if(e(t,i,o)){return true}}}}else{while(t=t[n]){if(t.nodeType===1||s){h=t[w]||(t[w]={});l=h[t.uniqueID]||(h[t.uniqueID]={});if((a=l[n])&&a[0]===x&&a[1]===r){return d[2]=a[2]}else{l[n]=d;if(d[2]=e(t,i,o)){return true}}}}}}}function ge(e){return e.length>1?function(t,i,n){var s=e.length;while(s--){if(!e[s](t,i,n)){return false}}return true}:e[0]}function ye(e,t,i){var n=0,s=t.length;for(;n<s;n++){se(e,t[n],i)}return i}function be(e,t,i,n,s){var r,o=[],a=0,l=e.length,h=t!=null;for(;a<l;a++){if(r=e[a]){if(!i||i(r,n,s)){o.push(r);if(h){t.push(a)}}}}return o}function we(e,t,i,n,s,r){if(n&&!n[w]){n=we(n)}if(s&&!s[w]){s=we(s,r)}return oe(function(r,o,a,l){var h,d,u,f=[],c=[],p=o.length,m=r||ye(t||"*",a.nodeType?[a]:a,[]),v=e&&(r||!t)?be(m,f,e,a,l):m,g=i?s||(r?e:p||n)?[]:o:v;if(i){i(v,g,a,l)}if(n){h=be(g,c);n(h,[],a,l);d=h.length;while(d--){if(u=h[d]){g[c[d]]=!(v[c[d]]=u)}}}if(r){if(s||e){if(s){h=[];d=g.length;while(d--){if(u=g[d]){h.push(v[d]=u)}}s(null,g=[],h,l)}d=g.length;while(d--){if((u=g[d])&&(h=s?F(r,u):f[d])>-1){r[h]=!(o[h]=u)}}}}else{g=be(g===o?g.splice(p,g.length):g);if(s){s(null,o,g,l)}else{A.apply(o,g)}}})}function _e(e){var t,i,s,r=e.length,o=n.relative[e[0].type],a=o||n.relative[" "],l=o?1:0,d=ve(function(e){return e===t},a,true),u=ve(function(e){return F(t,e)>-1},a,true),f=[function(e,i,n){var s=!o&&(n||i!==h)||((t=i).nodeType?d(e,i,n):u(e,i,n));t=null;return s}];for(;l<r;l++){if(i=n.relative[e[l].type]){f=[ve(ge(f),i)]}else{i=n.filter[e[l].type].apply(null,e[l].matches);if(i[w]){s=++l;for(;s<r;s++){if(n.relative[e[s].type]){break}}return we(l>1&&ge(f),l>1&&me(e.slice(0,l-1).concat({value:e[l-2].type===" "?"*":""})).replace(B,"$1"),i,l<s&&_e(e.slice(l,s)),s<r&&_e(e=e.slice(s)),s<r&&me(e))}f.push(i)}}return ge(f)}function xe(e,t){var i=t.length>0,s=e.length>0,r=function(r,o,a,l,d){var u,p,v,g=0,y="0",b=r&&[],w=[],_=h,k=r||s&&n.find["TAG"]("*",d),C=x+=_==null?1:Math.random()||.1,S=k.length;if(d){h=o===c||o||d}for(;y!==S&&(u=k[y])!=null;y++){if(s&&u){p=0;if(!o&&u.ownerDocument!==c){f(u);a=!m}while(v=e[p++]){if(v(u,o||c,a)){l.push(u);break}}if(d){x=C}}if(i){if(u=!v&&u){g--}if(r){b.push(u)}}}g+=y;if(i&&y!==g){p=0;while(v=t[p++]){v(b,w,o,a)}if(r){if(g>0){while(y--){if(!(b[y]||w[y])){w[y]=P.call(l)}}}w=be(w)}A.apply(l,w);if(d&&!r&&w.length>0&&g+t.length>1){se.uniqueSort(l)}}if(d){x=C;h=_}return b};return i?oe(r):r}a=se.compile=function(e,t){var i,n=[],s=[],r=T[e+" "];if(!r){if(!t){t=o(e)}i=t.length;while(i--){r=_e(t[i]);if(r[w]){n.push(r)}else{s.push(r)}}r=T(e,xe(s,n));r.selector=e}return r};l=se.select=function(e,t,s,r){var l,h,d,u,f,c=typeof e==="function"&&e,p=!r&&o(e=c.selector||e);s=s||[];if(p.length===1){h=p[0]=p[0].slice(0);if(h.length>2&&(d=h[0]).type==="ID"&&i.getById&&t.nodeType===9&&m&&n.relative[h[1].type]){t=(n.find["ID"](d.matches[0].replace(te,ie),t)||[])[0];if(!t){return s}else if(c){t=t.parentNode}e=e.slice(h.shift().value.length)}l=G["needsContext"].test(e)?0:h.length;while(l--){d=h[l];if(n.relative[u=d.type]){break}if(f=n.find[u]){if(r=f(d.matches[0].replace(te,ie),J.test(h[0].type)&&ce(t.parentNode)||t)){h.splice(l,1);e=r.length&&me(h);if(!e){A.apply(s,r);return s}break}}}}(c||a(e,p))(r,t,!m,s,!t||J.test(e)&&ce(t.parentNode)||t);return s};i.sortStable=w.split("").sort(M).join("")===w;i.detectDuplicates=!!u;f();i.sortDetached=ae(function(e){return e.compareDocumentPosition(c.createElement("div"))&1});if(!ae(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){le("type|href|height|width",function(e,t,i){if(!i){return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}})}if(!i.attributes||!ae(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){le("value",function(e,t,i){if(!i&&e.nodeName.toLowerCase()==="input"){return e.defaultValue}})}if(!ae(function(e){return e.getAttribute("disabled")==null})){le(R,function(e,t,i){var n;if(!i){return e[t]===true?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}})}return se}(e);c.find=b;c.expr=b.selectors;c.expr[":"]=c.expr.pseudos;c.uniqueSort=c.unique=b.uniqueSort;c.text=b.getText;c.isXMLDoc=b.isXML;c.contains=b.contains;var w=function(e,t,i){var n=[],s=i!==undefined;while((e=e[t])&&e.nodeType!==9){if(e.nodeType===1){if(s&&c(e).is(i)){break}n.push(e)}}return n};var _=function(e,t){var i=[];for(;e;e=e.nextSibling){if(e.nodeType===1&&e!==t){i.push(e)}}return i};var x=c.expr.match.needsContext;var k=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/;var C=/^.[^:#\[\.,]*$/;function S(e,t,i){if(c.isFunction(t)){return c.grep(e,function(e,n){return!!t.call(e,n,e)!==i})}if(t.nodeType){return c.grep(e,function(e){return e===t!==i})}if(typeof t==="string"){if(C.test(t)){return c.filter(t,e,i)}t=c.filter(t,e)}return c.grep(e,function(e){return a.call(t,e)>-1!==i})}c.filter=function(e,t,i){var n=t[0];if(i){e=":not("+e+")"}return t.length===1&&n.nodeType===1?c.find.matchesSelector(n,e)?[n]:[]:c.find.matches(e,c.grep(t,function(e){return e.nodeType===1}))};c.fn.extend({find:function(e){var t,i=this.length,n=[],s=this;if(typeof e!=="string"){return this.pushStack(c(e).filter(function(){for(t=0;t<i;t++){if(c.contains(s[t],this)){return true}}}))}for(t=0;t<i;t++){c.find(e,s[t],n)}n=this.pushStack(i>1?c.unique(n):n);n.selector=this.selector?this.selector+" "+e:e;return n},filter:function(e){return this.pushStack(S(this,e||[],false))},not:function(e){return this.pushStack(S(this,e||[],true))},is:function(e){return!!S(this,typeof e==="string"&&x.test(e)?c(e):e||[],false).length}});var T,M=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,D=c.fn.init=function(e,t,i){var s,r;if(!e){return this}i=i||T;if(typeof e==="string"){if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3){s=[null,e,null]}else{s=M.exec(e)}if(s&&(s[1]||!t)){if(s[1]){t=t instanceof c?t[0]:t;c.merge(this,c.parseHTML(s[1],t&&t.nodeType?t.ownerDocument||t:n,true));if(k.test(s[1])&&c.isPlainObject(t)){for(s in t){if(c.isFunction(this[s])){this[s](t[s])}else{this.attr(s,t[s])}}}return this}else{r=n.getElementById(s[2]);if(r&&r.parentNode){this.length=1;this[0]=r}this.context=n;this.selector=e;return this}}else if(!t||t.jquery){return(t||i).find(e)}else{return this.constructor(t).find(e)}}else if(e.nodeType){this.context=this[0]=e;this.length=1;return this}else if(c.isFunction(e)){return i.ready!==undefined?i.ready(e):e(c)}if(e.selector!==undefined){this.selector=e.selector;this.context=e.context}return c.makeArray(e,this)};D.prototype=c.fn;T=c(n);var E=/^(?:parents|prev(?:Until|All))/,O={children:true,contents:true,next:true,prev:true};c.fn.extend({has:function(e){var t=c(e,this),i=t.length;return this.filter(function(){var e=0;for(;e<i;e++){if(c.contains(this,t[e])){return true}}})},closest:function(e,t){var i,n=0,s=this.length,r=[],o=x.test(e)||typeof e!=="string"?c(e,t||this.context):0;for(;n<s;n++){for(i=this[n];i&&i!==t;i=i.parentNode){if(i.nodeType<11&&(o?o.index(i)>-1:i.nodeType===1&&c.find.matchesSelector(i,e))){r.push(i);break}}}return this.pushStack(r.length>1?c.uniqueSort(r):r)},index:function(e){if(!e){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof e==="string"){return a.call(c(e),this[0])}return a.call(this,e.jquery?e[0]:e)},add:function(e,t){return this.pushStack(c.uniqueSort(c.merge(this.get(),c(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function P(e,t){while((e=e[t])&&e.nodeType!==1){}return e}c.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return w(e,"parentNode")},parentsUntil:function(e,t,i){return w(e,"parentNode",i)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return w(e,"nextSibling")},prevAll:function(e){return w(e,"previousSibling")},nextUntil:function(e,t,i){return w(e,"nextSibling",i)},prevUntil:function(e,t,i){return w(e,"previousSibling",i)},siblings:function(e){return _((e.parentNode||{}).firstChild,e)},children:function(e){return _(e.firstChild)},contents:function(e){return e.contentDocument||c.merge([],e.childNodes)}},function(e,t){c.fn[e]=function(i,n){var s=c.map(this,t,i);if(e.slice(-5)!=="Until"){n=i}if(n&&typeof n==="string"){s=c.filter(n,s)}if(this.length>1){if(!O[e]){c.uniqueSort(s)}if(E.test(e)){s.reverse()}}return this.pushStack(s)}});var I=/\S+/g;function A(e){var t={};c.each(e.match(I)||[],function(e,i){t[i]=true});return t}c.Callbacks=function(e){e=typeof e==="string"?A(e):c.extend({},e);var t,i,n,s,r=[],o=[],a=-1,l=function(){s=e.once;n=t=true;for(;o.length;a=-1){i=o.shift();while(++a<r.length){if(r[a].apply(i[0],i[1])===false&&e.stopOnFalse){a=r.length;i=false}}}if(!e.memory){i=false}t=false;if(s){if(i){r=[]}else{r=""}}},h={add:function(){if(r){if(i&&!t){a=r.length-1;o.push(i)}(function t(i){c.each(i,function(i,n){if(c.isFunction(n)){if(!e.unique||!h.has(n)){r.push(n)}}else if(n&&n.length&&c.type(n)!=="string"){t(n)}})})(arguments);if(i&&!t){l()}}return this},remove:function(){c.each(arguments,function(e,t){var i;while((i=c.inArray(t,r,i))>-1){r.splice(i,1);if(i<=a){a--}}});return this},has:function(e){return e?c.inArray(e,r)>-1:r.length>0},empty:function(){if(r){r=[]}return this},disable:function(){s=o=[];r=i="";return this},disabled:function(){return!r},lock:function(){s=o=[];if(!i){r=i=""}return this},locked:function(){return!!s},fireWith:function(e,i){if(!s){i=i||[];i=[e,i.slice?i.slice():i];o.push(i);if(!t){l()}}return this},fire:function(){h.fireWith(this,arguments);return this},fired:function(){return!!n}};return h};c.extend({Deferred:function(e){var t=[["resolve","done",c.Callbacks("once memory"),"resolved"],["reject","fail",c.Callbacks("once memory"),"rejected"],["notify","progress",c.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){s.done(arguments).fail(arguments);return this},then:function(){var e=arguments;return c.Deferred(function(i){c.each(t,function(t,r){var o=c.isFunction(e[t])&&e[t];s[r[1]](function(){var e=o&&o.apply(this,arguments);if(e&&c.isFunction(e.promise)){e.promise().progress(i.notify).done(i.resolve).fail(i.reject)}else{i[r[0]+"With"](this===n?i.promise():this,o?[e]:arguments)}})});e=null}).promise()},promise:function(e){return e!=null?c.extend(e,n):n}},s={};n.pipe=n.then;c.each(t,function(e,r){var o=r[2],a=r[3];n[r[1]]=o.add;if(a){o.add(function(){i=a},t[e^1][2].disable,t[2][2].lock)}s[r[0]]=function(){s[r[0]+"With"](this===s?n:this,arguments);return this};s[r[0]+"With"]=o.fireWith});n.promise(s);if(e){e.call(s,s)}return s},when:function(e){var t=0,i=s.call(arguments),n=i.length,r=n!==1||e&&c.isFunction(e.promise)?n:0,o=r===1?e:c.Deferred(),a=function(e,t,i){return function(n){t[e]=this;i[e]=arguments.length>1?s.call(arguments):n;if(i===l){o.notifyWith(t,i)}else if(!--r){o.resolveWith(t,i)}}},l,h,d;if(n>1){l=new Array(n);h=new Array(n);d=new Array(n);for(;t<n;t++){if(i[t]&&c.isFunction(i[t].promise)){i[t].promise().progress(a(t,h,l)).done(a(t,d,i)).fail(o.reject)}else{--r}}}if(!r){o.resolveWith(d,i)}return o.promise()}});var N;c.fn.ready=function(e){c.ready.promise().done(e);return this};c.extend({isReady:false,readyWait:1,holdReady:function(e){if(e){c.readyWait++}else{c.ready(true)}},ready:function(e){if(e===true?--c.readyWait:c.isReady){return}c.isReady=true;if(e!==true&&--c.readyWait>0){return}N.resolveWith(n,[c]);if(c.fn.triggerHandler){c(n).triggerHandler("ready");c(n).off("ready")}}});function F(){n.removeEventListener("DOMContentLoaded",F);e.removeEventListener("load",F);c.ready()}c.ready.promise=function(t){if(!N){N=c.Deferred();if(n.readyState==="complete"||n.readyState!=="loading"&&!n.documentElement.doScroll){e.setTimeout(c.ready)}else{n.addEventListener("DOMContentLoaded",F);e.addEventListener("load",F)}}return N.promise(t)};c.ready.promise();var R=function(e,t,i,n,s,r,o){var a=0,l=e.length,h=i==null;if(c.type(i)==="object"){s=true;for(a in i){R(e,t,a,i[a],true,r,o)}}else if(n!==undefined){s=true;if(!c.isFunction(n)){o=true}if(h){if(o){t.call(e,n);t=null}else{h=t;t=function(e,t,i){return h.call(c(e),i)}}}if(t){for(;a<l;a++){t(e[a],i,o?n:n.call(e[a],a,t(e[a],i)))}}}return s?e:h?t.call(e):l?t(e[0],i):r};var $=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function L(){this.expando=c.expando+L.uid++}L.uid=1;L.prototype={register:function(e,t){var i=t||{};if(e.nodeType){e[this.expando]=i;
}else{Object.defineProperty(e,this.expando,{value:i,writable:true,configurable:true})}return e[this.expando]},cache:function(e){if(!$(e)){return{}}var t=e[this.expando];if(!t){t={};if($(e)){if(e.nodeType){e[this.expando]=t}else{Object.defineProperty(e,this.expando,{value:t,configurable:true})}}}return t},set:function(e,t,i){var n,s=this.cache(e);if(typeof t==="string"){s[t]=i}else{for(n in t){s[n]=t[n]}}return s},get:function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,i){var n;if(t===undefined||t&&typeof t==="string"&&i===undefined){n=this.get(e,t);return n!==undefined?n:this.get(e,c.camelCase(t))}this.set(e,t,i);return i!==undefined?i:t},remove:function(e,t){var i,n,s,r=e[this.expando];if(r===undefined){return}if(t===undefined){this.register(e)}else{if(c.isArray(t)){n=t.concat(t.map(c.camelCase))}else{s=c.camelCase(t);if(t in r){n=[t,s]}else{n=s;n=n in r?[n]:n.match(I)||[]}}i=n.length;while(i--){delete r[n[i]]}}if(t===undefined||c.isEmptyObject(r)){if(e.nodeType){e[this.expando]=undefined}else{delete e[this.expando]}}},hasData:function(e){var t=e[this.expando];return t!==undefined&&!c.isEmptyObject(t)}};var z=new L;var j=new L;var H=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,B=/[A-Z]/g;function U(e,t,i){var n;if(i===undefined&&e.nodeType===1){n="data-"+t.replace(B,"-$&").toLowerCase();i=e.getAttribute(n);if(typeof i==="string"){try{i=i==="true"?true:i==="false"?false:i==="null"?null:+i+""===i?+i:H.test(i)?c.parseJSON(i):i}catch(e){}j.set(e,t,i)}else{i=undefined}}return i}c.extend({hasData:function(e){return j.hasData(e)||z.hasData(e)},data:function(e,t,i){return j.access(e,t,i)},removeData:function(e,t){j.remove(e,t)},_data:function(e,t,i){return z.access(e,t,i)},_removeData:function(e,t){z.remove(e,t)}});c.fn.extend({data:function(e,t){var i,n,s,r=this[0],o=r&&r.attributes;if(e===undefined){if(this.length){s=j.get(r);if(r.nodeType===1&&!z.get(r,"hasDataAttrs")){i=o.length;while(i--){if(o[i]){n=o[i].name;if(n.indexOf("data-")===0){n=c.camelCase(n.slice(5));U(r,n,s[n])}}}z.set(r,"hasDataAttrs",true)}}return s}if(typeof e==="object"){return this.each(function(){j.set(this,e)})}return R(this,function(t){var i,n;if(r&&t===undefined){i=j.get(r,e)||j.get(r,e.replace(B,"-$&").toLowerCase());if(i!==undefined){return i}n=c.camelCase(e);i=j.get(r,n);if(i!==undefined){return i}i=U(r,n,undefined);if(i!==undefined){return i}return}n=c.camelCase(e);this.each(function(){var i=j.get(this,n);j.set(this,n,t);if(e.indexOf("-")>-1&&i!==undefined){j.set(this,e,t)}})},null,t,arguments.length>1,null,true)},removeData:function(e){return this.each(function(){j.remove(this,e)})}});c.extend({queue:function(e,t,i){var n;if(e){t=(t||"fx")+"queue";n=z.get(e,t);if(i){if(!n||c.isArray(i)){n=z.access(e,t,c.makeArray(i))}else{n.push(i)}}return n||[]}},dequeue:function(e,t){t=t||"fx";var i=c.queue(e,t),n=i.length,s=i.shift(),r=c._queueHooks(e,t),o=function(){c.dequeue(e,t)};if(s==="inprogress"){s=i.shift();n--}if(s){if(t==="fx"){i.unshift("inprogress")}delete r.stop;s.call(e,o,r)}if(!n&&r){r.empty.fire()}},_queueHooks:function(e,t){var i=t+"queueHooks";return z.get(e,i)||z.access(e,i,{empty:c.Callbacks("once memory").add(function(){z.remove(e,[t+"queue",i])})})}});c.fn.extend({queue:function(e,t){var i=2;if(typeof e!=="string"){t=e;e="fx";i--}if(arguments.length<i){return c.queue(this[0],e)}return t===undefined?this:this.each(function(){var i=c.queue(this,e,t);c._queueHooks(this,e);if(e==="fx"&&i[0]!=="inprogress"){c.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){c.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,s=c.Deferred(),r=this,o=this.length,a=function(){if(!--n){s.resolveWith(r,[r])}};if(typeof e!=="string"){t=e;e=undefined}e=e||"fx";while(o--){i=z.get(r[o],e+"queueHooks");if(i&&i.empty){n++;i.empty.add(a)}}a();return s.promise(t)}});var W=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var Y=new RegExp("^(?:([+-])=|)("+W+")([a-z%]*)$","i");var V=["Top","Right","Bottom","Left"];var q=function(e,t){e=t||e;return c.css(e,"display")==="none"||!c.contains(e.ownerDocument,e)};function G(e,t,i,n){var s,r=1,o=20,a=n?function(){return n.cur()}:function(){return c.css(e,t,"")},l=a(),h=i&&i[3]||(c.cssNumber[t]?"":"px"),d=(c.cssNumber[t]||h!=="px"&&+l)&&Y.exec(c.css(e,t));if(d&&d[3]!==h){h=h||d[3];i=i||[];d=+l||1;do{r=r||".5";d=d/r;c.style(e,t,d+h)}while(r!==(r=a()/l)&&r!==1&&--o)}if(i){d=+d||+l||0;s=i[1]?d+(i[1]+1)*i[2]:+i[2];if(n){n.unit=h;n.start=d;n.end=s}}return s}var X=/^(?:checkbox|radio)$/i;var Z=/<([\w:-]+)/;var K=/^$|\/(?:java|ecma)script/i;var Q={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Q.optgroup=Q.option;Q.tbody=Q.tfoot=Q.colgroup=Q.caption=Q.thead;Q.th=Q.td;function J(e,t){var i=typeof e.getElementsByTagName!=="undefined"?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!=="undefined"?e.querySelectorAll(t||"*"):[];return t===undefined||t&&c.nodeName(e,t)?c.merge([e],i):i}function ee(e,t){var i=0,n=e.length;for(;i<n;i++){z.set(e[i],"globalEval",!t||z.get(t[i],"globalEval"))}}var te=/<|&#?\w+;/;function ie(e,t,i,n,s){var r,o,a,l,h,d,u=t.createDocumentFragment(),f=[],p=0,m=e.length;for(;p<m;p++){r=e[p];if(r||r===0){if(c.type(r)==="object"){c.merge(f,r.nodeType?[r]:r)}else if(!te.test(r)){f.push(t.createTextNode(r))}else{o=o||u.appendChild(t.createElement("div"));a=(Z.exec(r)||["",""])[1].toLowerCase();l=Q[a]||Q._default;o.innerHTML=l[1]+c.htmlPrefilter(r)+l[2];d=l[0];while(d--){o=o.lastChild}c.merge(f,o.childNodes);o=u.firstChild;o.textContent=""}}}u.textContent="";p=0;while(r=f[p++]){if(n&&c.inArray(r,n)>-1){if(s){s.push(r)}continue}h=c.contains(r.ownerDocument,r);o=J(u.appendChild(r),"script");if(h){ee(o)}if(i){d=0;while(r=o[d++]){if(K.test(r.type||"")){i.push(r)}}}}return u}(function(){var e=n.createDocumentFragment(),t=e.appendChild(n.createElement("div")),i=n.createElement("input");i.setAttribute("type","radio");i.setAttribute("checked","checked");i.setAttribute("name","t");t.appendChild(i);u.checkClone=t.cloneNode(true).cloneNode(true).lastChild.checked;t.innerHTML="<textarea>x</textarea>";u.noCloneChecked=!!t.cloneNode(true).lastChild.defaultValue})();var ne=/^key/,se=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,re=/^([^.]*)(?:\.(.+)|)/;function oe(){return true}function ae(){return false}function le(){try{return n.activeElement}catch(e){}}function he(e,t,i,n,s,r){var o,a;if(typeof t==="object"){if(typeof i!=="string"){n=n||i;i=undefined}for(a in t){he(e,a,i,n,t[a],r)}return e}if(n==null&&s==null){s=i;n=i=undefined}else if(s==null){if(typeof i==="string"){s=n;n=undefined}else{s=n;n=i;i=undefined}}if(s===false){s=ae}else if(!s){return e}if(r===1){o=s;s=function(e){c().off(e);return o.apply(this,arguments)};s.guid=o.guid||(o.guid=c.guid++)}return e.each(function(){c.event.add(this,t,s,n,i)})}c.event={global:{},add:function(e,t,i,n,s){var r,o,a,l,h,d,u,f,p,m,v,g=z.get(e);if(!g){return}if(i.handler){r=i;i=r.handler;s=r.selector}if(!i.guid){i.guid=c.guid++}if(!(l=g.events)){l=g.events={}}if(!(o=g.handle)){o=g.handle=function(t){return typeof c!=="undefined"&&c.event.triggered!==t.type?c.event.dispatch.apply(e,arguments):undefined}}t=(t||"").match(I)||[""];h=t.length;while(h--){a=re.exec(t[h])||[];p=v=a[1];m=(a[2]||"").split(".").sort();if(!p){continue}u=c.event.special[p]||{};p=(s?u.delegateType:u.bindType)||p;u=c.event.special[p]||{};d=c.extend({type:p,origType:v,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&c.expr.match.needsContext.test(s),namespace:m.join(".")},r);if(!(f=l[p])){f=l[p]=[];f.delegateCount=0;if(!u.setup||u.setup.call(e,n,m,o)===false){if(e.addEventListener){e.addEventListener(p,o)}}}if(u.add){u.add.call(e,d);if(!d.handler.guid){d.handler.guid=i.guid}}if(s){f.splice(f.delegateCount++,0,d)}else{f.push(d)}c.event.global[p]=true}},remove:function(e,t,i,n,s){var r,o,a,l,h,d,u,f,p,m,v,g=z.hasData(e)&&z.get(e);if(!g||!(l=g.events)){return}t=(t||"").match(I)||[""];h=t.length;while(h--){a=re.exec(t[h])||[];p=v=a[1];m=(a[2]||"").split(".").sort();if(!p){for(p in l){c.event.remove(e,p+t[h],i,n,true)}continue}u=c.event.special[p]||{};p=(n?u.delegateType:u.bindType)||p;f=l[p]||[];a=a[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)");o=r=f.length;while(r--){d=f[r];if((s||v===d.origType)&&(!i||i.guid===d.guid)&&(!a||a.test(d.namespace))&&(!n||n===d.selector||n==="**"&&d.selector)){f.splice(r,1);if(d.selector){f.delegateCount--}if(u.remove){u.remove.call(e,d)}}}if(o&&!f.length){if(!u.teardown||u.teardown.call(e,m,g.handle)===false){c.removeEvent(e,p,g.handle)}delete l[p]}}if(c.isEmptyObject(l)){z.remove(e,"handle events")}},dispatch:function(e){e=c.event.fix(e);var t,i,n,r,o,a=[],l=s.call(arguments),h=(z.get(this,"events")||{})[e.type]||[],d=c.event.special[e.type]||{};l[0]=e;e.delegateTarget=this;if(d.preDispatch&&d.preDispatch.call(this,e)===false){return}a=c.event.handlers.call(this,e,h);t=0;while((r=a[t++])&&!e.isPropagationStopped()){e.currentTarget=r.elem;i=0;while((o=r.handlers[i++])&&!e.isImmediatePropagationStopped()){if(!e.rnamespace||e.rnamespace.test(o.namespace)){e.handleObj=o;e.data=o.data;n=((c.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l);if(n!==undefined){if((e.result=n)===false){e.preventDefault();e.stopPropagation()}}}}}if(d.postDispatch){d.postDispatch.call(this,e)}return e.result},handlers:function(e,t){var i,n,s,r,o=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(e.type!=="click"||isNaN(e.button)||e.button<1)){for(;l!==this;l=l.parentNode||this){if(l.nodeType===1&&(l.disabled!==true||e.type!=="click")){n=[];for(i=0;i<a;i++){r=t[i];s=r.selector+" ";if(n[s]===undefined){n[s]=r.needsContext?c(s,this).index(l)>-1:c.find(s,this,null,[l]).length}if(n[s]){n.push(r)}}if(n.length){o.push({elem:l,handlers:n})}}}}if(a<t.length){o.push({elem:this,handlers:t.slice(a)})}return o},props:("altKey bubbles cancelable ctrlKey currentTarget detail eventPhase "+"metaKey relatedTarget shiftKey target timeStamp view which").split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){if(e.which==null){e.which=t.charCode!=null?t.charCode:t.keyCode}return e}},mouseHooks:{props:("button buttons clientX clientY offsetX offsetY pageX pageY "+"screenX screenY toElement").split(" "),filter:function(e,t){var i,s,r,o=t.button;if(e.pageX==null&&t.clientX!=null){i=e.target.ownerDocument||n;s=i.documentElement;r=i.body;e.pageX=t.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0);e.pageY=t.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)}if(!e.which&&o!==undefined){e.which=o&1?1:o&2?3:o&4?2:0}return e}},fix:function(e){if(e[c.expando]){return e}var t,i,s,r=e.type,o=e,a=this.fixHooks[r];if(!a){this.fixHooks[r]=a=se.test(r)?this.mouseHooks:ne.test(r)?this.keyHooks:{}}s=a.props?this.props.concat(a.props):this.props;e=new c.Event(o);t=s.length;while(t--){i=s[t];e[i]=o[i]}if(!e.target){e.target=n}if(e.target.nodeType===3){e.target=e.target.parentNode}return a.filter?a.filter(e,o):e},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==le()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===le()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&c.nodeName(this,"input")){this.click();return false}},_default:function(e){return c.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){if(e.result!==undefined&&e.originalEvent){e.originalEvent.returnValue=e.result}}}}};c.removeEvent=function(e,t,i){if(e.removeEventListener){e.removeEventListener(t,i)}};c.Event=function(e,t){if(!(this instanceof c.Event)){return new c.Event(e,t)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===false?oe:ae}else{this.type=e}if(t){c.extend(this,t)}this.timeStamp=e&&e.timeStamp||c.now();this[c.expando]=true};c.Event.prototype={constructor:c.Event,isDefaultPrevented:ae,isPropagationStopped:ae,isImmediatePropagationStopped:ae,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=oe;if(e&&!this.isSimulated){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=oe;if(e&&!this.isSimulated){e.stopPropagation()}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=oe;if(e&&!this.isSimulated){e.stopImmediatePropagation()}this.stopPropagation()}};c.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){c.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,s=e.relatedTarget,r=e.handleObj;if(!s||s!==n&&!c.contains(n,s)){e.type=r.origType;i=r.handler.apply(this,arguments);e.type=t}return i}}});c.fn.extend({on:function(e,t,i,n){return he(this,e,t,i,n)},one:function(e,t,i,n){return he(this,e,t,i,n,1)},off:function(e,t,i){var n,s;if(e&&e.preventDefault&&e.handleObj){n=e.handleObj;c(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler);return this}if(typeof e==="object"){for(s in e){this.off(s,t,e[s])}return this}if(t===false||typeof t==="function"){i=t;t=undefined}if(i===false){i=ae}return this.each(function(){c.event.remove(this,e,i,t)})}});var de=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ue=/<script|<style|<link/i,fe=/checked\s*(?:[^=]|=\s*.checked.)/i,ce=/^true\/(.*)/,pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function me(e,t){return c.nodeName(e,"table")&&c.nodeName(t.nodeType!==11?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ve(e){e.type=(e.getAttribute("type")!==null)+"/"+e.type;return e}function ge(e){var t=ce.exec(e.type);if(t){e.type=t[1]}else{e.removeAttribute("type")}return e}function ye(e,t){var i,n,s,r,o,a,l,h;if(t.nodeType!==1){return}if(z.hasData(e)){r=z.access(e);o=z.set(t,r);h=r.events;if(h){delete o.handle;o.events={};for(s in h){for(i=0,n=h[s].length;i<n;i++){c.event.add(t,s,h[s][i])}}}}if(j.hasData(e)){a=j.access(e);l=c.extend({},a);j.set(t,l)}}function be(e,t){var i=t.nodeName.toLowerCase();if(i==="input"&&X.test(e.type)){t.checked=e.checked}else if(i==="input"||i==="textarea"){t.defaultValue=e.defaultValue}}function we(e,t,i,n){t=r.apply([],t);var s,o,a,l,h,d,f=0,p=e.length,m=p-1,v=t[0],g=c.isFunction(v);if(g||p>1&&typeof v==="string"&&!u.checkClone&&fe.test(v)){return e.each(function(s){var r=e.eq(s);if(g){t[0]=v.call(this,s,r.html())}we(r,t,i,n)})}if(p){s=ie(t,e[0].ownerDocument,false,e,n);o=s.firstChild;if(s.childNodes.length===1){s=o}if(o||n){a=c.map(J(s,"script"),ve);l=a.length;for(;f<p;f++){h=s;if(f!==m){h=c.clone(h,true,true);if(l){c.merge(a,J(h,"script"))}}i.call(e[f],h,f)}if(l){d=a[a.length-1].ownerDocument;c.map(a,ge);for(f=0;f<l;f++){h=a[f];if(K.test(h.type||"")&&!z.access(h,"globalEval")&&c.contains(d,h)){if(h.src){if(c._evalUrl){c._evalUrl(h.src)}}else{c.globalEval(h.textContent.replace(pe,""))}}}}}}return e}function _e(e,t,i){var n,s=t?c.filter(t,e):e,r=0;for(;(n=s[r])!=null;r++){if(!i&&n.nodeType===1){c.cleanData(J(n))}if(n.parentNode){if(i&&c.contains(n.ownerDocument,n)){ee(J(n,"script"))}n.parentNode.removeChild(n)}}return e}c.extend({htmlPrefilter:function(e){return e.replace(de,"<$1></$2>")},clone:function(e,t,i){var n,s,r,o,a=e.cloneNode(true),l=c.contains(e.ownerDocument,e);if(!u.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!c.isXMLDoc(e)){o=J(a);r=J(e);for(n=0,s=r.length;n<s;n++){be(r[n],o[n])}}if(t){if(i){r=r||J(e);o=o||J(a);for(n=0,s=r.length;n<s;n++){ye(r[n],o[n])}}else{ye(e,a)}}o=J(a,"script");if(o.length>0){ee(o,!l&&J(e,"script"))}return a},cleanData:function(e){var t,i,n,s=c.event.special,r=0;for(;(i=e[r])!==undefined;r++){if($(i)){if(t=i[z.expando]){if(t.events){for(n in t.events){if(s[n]){c.event.remove(i,n)}else{c.removeEvent(i,n,t.handle)}}}i[z.expando]=undefined}if(i[j.expando]){i[j.expando]=undefined}}}}});c.fn.extend({domManip:we,detach:function(e){return _e(this,e,true)},remove:function(e){return _e(this,e)},text:function(e){return R(this,function(e){return e===undefined?c.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=e}})},null,e,arguments.length)},append:function(){return we(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=me(this,e);t.appendChild(e)}})},prepend:function(){return we(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=me(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return we(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}})},after:function(){return we(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}})},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){if(e.nodeType===1){c.cleanData(J(e,false));e.textContent=""}}return this},clone:function(e,t){e=e==null?false:e;t=t==null?e:t;return this.map(function(){return c.clone(this,e,t)})},html:function(e){return R(this,function(e){var t=this[0]||{},i=0,n=this.length;if(e===undefined&&t.nodeType===1){return t.innerHTML}if(typeof e==="string"&&!ue.test(e)&&!Q[(Z.exec(e)||["",""])[1].toLowerCase()]){e=c.htmlPrefilter(e);try{for(;i<n;i++){t=this[i]||{};if(t.nodeType===1){c.cleanData(J(t,false));t.innerHTML=e}}t=0}catch(e){}}if(t){this.empty().append(e)}},null,e,arguments.length)},replaceWith:function(){var e=[];return we(this,arguments,function(t){var i=this.parentNode;if(c.inArray(this,e)<0){c.cleanData(J(this));if(i){i.replaceChild(t,this)}}},e)}});c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){c.fn[e]=function(e){var i,n=[],s=c(e),r=s.length-1,a=0;for(;a<=r;a++){i=a===r?this:this.clone(true);c(s[a])[t](i);o.apply(n,i.get())}return this.pushStack(n)}});var xe,ke={HTML:"block",BODY:"block"};function Ce(e,t){var i=c(t.createElement(e)).appendTo(t.body),n=c.css(i[0],"display");i.detach();return n}function Se(e){var t=n,i=ke[e];if(!i){i=Ce(e,t);if(i==="none"||!i){xe=(xe||c("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement);t=xe[0].contentDocument;t.write();t.close();i=Ce(e,t);xe.detach()}ke[e]=i}return i}var Te=/^margin/;var Me=new RegExp("^("+W+")(?!px)[a-z%]+$","i");var De=function(t){var i=t.ownerDocument.defaultView;if(!i||!i.opener){i=e}return i.getComputedStyle(t)};var Ee=function(e,t,i,n){var s,r,o={};for(r in t){o[r]=e.style[r];e.style[r]=t[r]}s=i.apply(e,n||[]);for(r in t){e.style[r]=o[r]}return s};var Oe=n.documentElement;(function(){var t,i,s,r,o=n.createElement("div"),a=n.createElement("div");if(!a.style){return}a.style.backgroundClip="content-box";a.cloneNode(true).style.backgroundClip="";u.clearCloneStyle=a.style.backgroundClip==="content-box";o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;"+"padding:0;margin-top:1px;position:absolute";o.appendChild(a);function l(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;"+"position:relative;display:block;"+"margin:auto;border:1px;padding:1px;"+"top:1%;width:50%";a.innerHTML="";Oe.appendChild(o);var n=e.getComputedStyle(a);t=n.top!=="1%";r=n.marginLeft==="2px";i=n.width==="4px";a.style.marginRight="50%";s=n.marginRight==="4px";Oe.removeChild(o)}c.extend(u,{pixelPosition:function(){l();return t},boxSizingReliable:function(){if(i==null){l()}return i},pixelMarginRight:function(){if(i==null){l()}return s},reliableMarginLeft:function(){if(i==null){l()}return r},reliableMarginRight:function(){var t,i=a.appendChild(n.createElement("div"));i.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;"+"display:block;margin:0;border:0;padding:0";i.style.marginRight=i.style.width="0";a.style.width="1px";Oe.appendChild(o);t=!parseFloat(e.getComputedStyle(i).marginRight);Oe.removeChild(o);a.removeChild(i);return t}})})();function Pe(e,t,i){var n,s,r,o,a=e.style;i=i||De(e);o=i?i.getPropertyValue(t)||i[t]:undefined;if((o===""||o===undefined)&&!c.contains(e.ownerDocument,e)){o=c.style(e,t)}if(i){if(!u.pixelMarginRight()&&Me.test(o)&&Te.test(t)){n=a.width;s=a.minWidth;r=a.maxWidth;a.minWidth=a.maxWidth=a.width=o;o=i.width;a.width=n;a.minWidth=s;a.maxWidth=r}}return o!==undefined?o+"":o}function Ie(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}var Ae=/^(none|table(?!-c[ea]).+)/,Ne={position:"absolute",visibility:"hidden",display:"block"},Fe={letterSpacing:"0",fontWeight:"400"},Re=["Webkit","O","Moz","ms"],$e=n.createElement("div").style;function Le(e){if(e in $e){return e}var t=e[0].toUpperCase()+e.slice(1),i=Re.length;while(i--){e=Re[i]+t;if(e in $e){return e}}}function ze(e,t,i){var n=Y.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function je(e,t,i,n,s){var r=i===(n?"border":"content")?4:t==="width"?1:0,o=0;for(;r<4;r+=2){if(i==="margin"){o+=c.css(e,i+V[r],true,s)}if(n){if(i==="content"){o-=c.css(e,"padding"+V[r],true,s)}if(i!=="margin"){o-=c.css(e,"border"+V[r]+"Width",true,s)}}else{o+=c.css(e,"padding"+V[r],true,s);if(i!=="padding"){o+=c.css(e,"border"+V[r]+"Width",true,s)}}}return o}function He(e,t,i){var n=true,s=t==="width"?e.offsetWidth:e.offsetHeight,r=De(e),o=c.css(e,"boxSizing",false,r)==="border-box";if(s<=0||s==null){s=Pe(e,t,r);if(s<0||s==null){s=e.style[t]}if(Me.test(s)){return s}n=o&&(u.boxSizingReliable()||s===e.style[t]);s=parseFloat(s)||0}return s+je(e,t,i||(o?"border":"content"),n,r)+"px"}function Be(e,t){var i,n,s,r=[],o=0,a=e.length;for(;o<a;o++){n=e[o];if(!n.style){continue}r[o]=z.get(n,"olddisplay");i=n.style.display;if(t){if(!r[o]&&i==="none"){n.style.display=""}if(n.style.display===""&&q(n)){r[o]=z.access(n,"olddisplay",Se(n.nodeName))}}else{s=q(n);if(i!=="none"||!s){z.set(n,"olddisplay",s?i:c.css(n,"display"))}}}for(o=0;o<a;o++){n=e[o];if(!n.style){continue}if(!t||n.style.display==="none"||n.style.display===""){n.style.display=t?r[o]||"":"none"}}return e}c.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Pe(e,"opacity");return i===""?"1":i}}}},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{float:"cssFloat"},style:function(e,t,i,n){if(!e||e.nodeType===3||e.nodeType===8||!e.style){return}var s,r,o,a=c.camelCase(t),l=e.style;t=c.cssProps[a]||(c.cssProps[a]=Le(a)||a);o=c.cssHooks[t]||c.cssHooks[a];if(i!==undefined){r=typeof i;if(r==="string"&&(s=Y.exec(i))&&s[1]){i=G(e,t,s);r="number"}if(i==null||i!==i){return}if(r==="number"){i+=s&&s[3]||(c.cssNumber[a]?"":"px")}if(!u.clearCloneStyle&&i===""&&t.indexOf("background")===0){l[t]="inherit"}if(!o||!("set"in o)||(i=o.set(e,i,n))!==undefined){l[t]=i}}else{if(o&&"get"in o&&(s=o.get(e,false,n))!==undefined){return s}return l[t]}},css:function(e,t,i,n){var s,r,o,a=c.camelCase(t);t=c.cssProps[a]||(c.cssProps[a]=Le(a)||a);o=c.cssHooks[t]||c.cssHooks[a];if(o&&"get"in o){s=o.get(e,true,i)}if(s===undefined){s=Pe(e,t,n)}if(s==="normal"&&t in Fe){s=Fe[t]}if(i===""||i){r=parseFloat(s);return i===true||isFinite(r)?r||0:s}return s}});c.each(["height","width"],function(e,t){c.cssHooks[t]={get:function(e,i,n){if(i){return Ae.test(c.css(e,"display"))&&e.offsetWidth===0?Ee(e,Ne,function(){return He(e,t,n)}):He(e,t,n)}},set:function(e,i,n){var s,r=n&&De(e),o=n&&je(e,t,n,c.css(e,"boxSizing",false,r)==="border-box",r);if(o&&(s=Y.exec(i))&&(s[3]||"px")!=="px"){e.style[t]=i;i=c.css(e,t)}return ze(e,i,o)}}});c.cssHooks.marginLeft=Ie(u.reliableMarginLeft,function(e,t){if(t){return(parseFloat(Pe(e,"marginLeft"))||e.getBoundingClientRect().left-Ee(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}});c.cssHooks.marginRight=Ie(u.reliableMarginRight,function(e,t){if(t){return Ee(e,{display:"inline-block"},Pe,[e,"marginRight"])}});c.each({margin:"",padding:"",border:"Width"},function(e,t){c.cssHooks[e+t]={expand:function(i){var n=0,s={},r=typeof i==="string"?i.split(" "):[i];for(;n<4;n++){s[e+V[n]+t]=r[n]||r[n-2]||r[0]}return s}};if(!Te.test(e)){c.cssHooks[e+t].set=ze}});c.fn.extend({css:function(e,t){return R(this,function(e,t,i){var n,s,r={},o=0;if(c.isArray(t)){n=De(e);s=t.length;for(;o<s;o++){r[t[o]]=c.css(e,t[o],false,n)}return r}return i!==undefined?c.style(e,t,i):c.css(e,t)},e,t,arguments.length>1)},show:function(){return Be(this,true)},hide:function(){return Be(this)},toggle:function(e){if(typeof e==="boolean"){return e?this.show():this.hide()}return this.each(function(){if(q(this)){c(this).show()}else{c(this).hide()}})}});function Ue(e,t,i,n,s){return new Ue.prototype.init(e,t,i,n,s)}c.Tween=Ue;Ue.prototype={constructor:Ue,init:function(e,t,i,n,s,r){this.elem=e;this.prop=i;this.easing=s||c.easing._default;this.options=t;this.start=this.now=this.cur();this.end=n;this.unit=r||(c.cssNumber[i]?"":"px")},cur:function(){var e=Ue.propHooks[this.prop];return e&&e.get?e.get(this):Ue.propHooks._default.get(this)},run:function(e){var t,i=Ue.propHooks[this.prop];if(this.options.duration){this.pos=t=c.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration)}else{this.pos=t=e}this.now=(this.end-this.start)*t+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(i&&i.set){i.set(this)}else{Ue.propHooks._default.set(this)}return this}};Ue.prototype.init.prototype=Ue.prototype;Ue.propHooks={_default:{get:function(e){var t;if(e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null){return e.elem[e.prop]}t=c.css(e.elem,e.prop,"");return!t||t==="auto"?0:t},set:function(e){if(c.fx.step[e.prop]){c.fx.step[e.prop](e)}else if(e.elem.nodeType===1&&(e.elem.style[c.cssProps[e.prop]]!=null||c.cssHooks[e.prop])){c.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}};Ue.propHooks.scrollTop=Ue.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};c.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"};c.fx=Ue.prototype.init;c.fx.step={};var We,Ye,Ve=/^(?:toggle|show|hide)$/,qe=/queueHooks$/;function Ge(){e.setTimeout(function(){We=undefined});return We=c.now()}function Xe(e,t){var i,n=0,s={height:e};t=t?1:0;for(;n<4;n+=2-t){i=V[n];s["margin"+i]=s["padding"+i]=e}if(t){s.opacity=s.width=e}return s}function Ze(e,t,i){var n,s=(Je.tweeners[t]||[]).concat(Je.tweeners["*"]),r=0,o=s.length;for(;r<o;r++){if(n=s[r].call(i,t,e)){return n}}}function Ke(e,t,i){var n,s,r,o,a,l,h,d,u=this,f={},p=e.style,m=e.nodeType&&q(e),v=z.get(e,"fxshow");if(!i.queue){a=c._queueHooks(e,"fx");if(a.unqueued==null){a.unqueued=0;l=a.empty.fire;a.empty.fire=function(){if(!a.unqueued){l()}}}a.unqueued++;u.always(function(){u.always(function(){a.unqueued--;if(!c.queue(e,"fx").length){a.empty.fire()}})})}if(e.nodeType===1&&("height"in t||"width"in t)){i.overflow=[p.overflow,p.overflowX,p.overflowY];h=c.css(e,"display");d=h==="none"?z.get(e,"olddisplay")||Se(e.nodeName):h;if(d==="inline"&&c.css(e,"float")==="none"){p.display="inline-block"}}if(i.overflow){p.overflow="hidden";u.always(function(){p.overflow=i.overflow[0];p.overflowX=i.overflow[1];p.overflowY=i.overflow[2]})}for(n in t){s=t[n];if(Ve.exec(s)){delete t[n];r=r||s==="toggle";if(s===(m?"hide":"show")){if(s==="show"&&v&&v[n]!==undefined){m=true}else{continue}}f[n]=v&&v[n]||c.style(e,n)}else{h=undefined}}if(!c.isEmptyObject(f)){if(v){if("hidden"in v){m=v.hidden}}else{v=z.access(e,"fxshow",{})}if(r){v.hidden=!m}if(m){c(e).show()}else{u.done(function(){c(e).hide()})}u.done(function(){var t;z.remove(e,"fxshow");for(t in f){c.style(e,t,f[t])}});for(n in f){o=Ze(m?v[n]:0,n,u);if(!(n in v)){v[n]=o.start;if(m){o.end=o.start;o.start=n==="width"||n==="height"?1:0}}}}else if((h==="none"?Se(e.nodeName):h)==="inline"){p.display=h}}function Qe(e,t){var i,n,s,r,o;for(i in e){n=c.camelCase(i);s=t[n];r=e[i];if(c.isArray(r)){s=r[1];r=e[i]=r[0]}if(i!==n){e[n]=r;delete e[i]}o=c.cssHooks[n];if(o&&"expand"in o){r=o.expand(r);delete e[n];for(i in r){if(!(i in e)){e[i]=r[i];t[i]=s}}}else{t[n]=s}}}function Je(e,t,i){var n,s,r=0,o=Je.prefilters.length,a=c.Deferred().always(function(){delete l.elem}),l=function(){if(s){return false}var t=We||Ge(),i=Math.max(0,h.startTime+h.duration-t),n=i/h.duration||0,r=1-n,o=0,l=h.tweens.length;for(;o<l;o++){h.tweens[o].run(r)}a.notifyWith(e,[h,r,i]);if(r<1&&l){return i}else{a.resolveWith(e,[h]);return false}},h=a.promise({elem:e,props:c.extend({},t),opts:c.extend(true,{specialEasing:{},easing:c.easing._default},i),originalProperties:t,originalOptions:i,startTime:We||Ge(),duration:i.duration,tweens:[],createTween:function(t,i){var n=c.Tween(e,h.opts,t,i,h.opts.specialEasing[t]||h.opts.easing);h.tweens.push(n);return n},stop:function(t){var i=0,n=t?h.tweens.length:0;if(s){return this}s=true;for(;i<n;i++){h.tweens[i].run(1)}if(t){a.notifyWith(e,[h,1,0]);a.resolveWith(e,[h,t])}else{a.rejectWith(e,[h,t])}return this}}),d=h.props;Qe(d,h.opts.specialEasing);for(;r<o;r++){n=Je.prefilters[r].call(h,e,d,h.opts);if(n){if(c.isFunction(n.stop)){c._queueHooks(h.elem,h.opts.queue).stop=c.proxy(n.stop,n)}return n}}c.map(d,Ze,h);if(c.isFunction(h.opts.start)){h.opts.start.call(e,h)}c.fx.timer(c.extend(l,{elem:e,anim:h,queue:h.opts.queue}));return h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}c.Animation=c.extend(Je,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);G(i.elem,e,Y.exec(t),i);return i}]},tweener:function(e,t){if(c.isFunction(e)){t=e;e=["*"]}else{e=e.match(I)}var i,n=0,s=e.length;for(;n<s;n++){i=e[n];Je.tweeners[i]=Je.tweeners[i]||[];Je.tweeners[i].unshift(t)}},prefilters:[Ke],prefilter:function(e,t){if(t){Je.prefilters.unshift(e)}else{Je.prefilters.push(e)}}});c.speed=function(e,t,i){var n=e&&typeof e==="object"?c.extend({},e):{complete:i||!i&&t||c.isFunction(e)&&e,duration:e,easing:i&&t||t&&!c.isFunction(t)&&t};n.duration=c.fx.off?0:typeof n.duration==="number"?n.duration:n.duration in c.fx.speeds?c.fx.speeds[n.duration]:c.fx.speeds._default;if(n.queue==null||n.queue===true){n.queue="fx"}n.old=n.complete;n.complete=function(){if(c.isFunction(n.old)){n.old.call(this)}if(n.queue){c.dequeue(this,n.queue)}};return n};c.fn.extend({fadeTo:function(e,t,i,n){return this.filter(q).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var s=c.isEmptyObject(e),r=c.speed(t,i,n),o=function(){var t=Je(this,c.extend({},e),r);if(s||z.get(this,"finish")){t.stop(true)}};o.finish=o;return s||r.queue===false?this.each(o):this.queue(r.queue,o)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop;t(i)};if(typeof e!=="string"){i=t;t=e;e=undefined}if(t&&e!==false){this.queue(e||"fx",[])}return this.each(function(){var t=true,s=e!=null&&e+"queueHooks",r=c.timers,o=z.get(this);if(s){if(o[s]&&o[s].stop){n(o[s])}}else{for(s in o){if(o[s]&&o[s].stop&&qe.test(s)){n(o[s])}}}for(s=r.length;s--;){if(r[s].elem===this&&(e==null||r[s].queue===e)){r[s].anim.stop(i);t=false;r.splice(s,1)}}if(t||!i){c.dequeue(this,e)}})},finish:function(e){if(e!==false){e=e||"fx"}return this.each(function(){var t,i=z.get(this),n=i[e+"queue"],s=i[e+"queueHooks"],r=c.timers,o=n?n.length:0;i.finish=true;c.queue(this,e,[]);if(s&&s.stop){s.stop.call(this,true)}for(t=r.length;t--;){if(r[t].elem===this&&r[t].queue===e){r[t].anim.stop(true);r.splice(t,1)}}for(t=0;t<o;t++){if(n[t]&&n[t].finish){n[t].finish.call(this)}}delete i.finish})}});c.each(["toggle","show","hide"],function(e,t){var i=c.fn[t];c.fn[t]=function(e,n,s){return e==null||typeof e==="boolean"?i.apply(this,arguments):this.animate(Xe(t,true),e,n,s);
}});c.each({slideDown:Xe("show"),slideUp:Xe("hide"),slideToggle:Xe("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){c.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}});c.timers=[];c.fx.tick=function(){var e,t=0,i=c.timers;We=c.now();for(;t<i.length;t++){e=i[t];if(!e()&&i[t]===e){i.splice(t--,1)}}if(!i.length){c.fx.stop()}We=undefined};c.fx.timer=function(e){c.timers.push(e);if(e()){c.fx.start()}else{c.timers.pop()}};c.fx.interval=13;c.fx.start=function(){if(!Ye){Ye=e.setInterval(c.fx.tick,c.fx.interval)}};c.fx.stop=function(){e.clearInterval(Ye);Ye=null};c.fx.speeds={slow:600,fast:200,_default:400};c.fn.delay=function(t,i){t=c.fx?c.fx.speeds[t]||t:t;i=i||"fx";return this.queue(i,function(i,n){var s=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(s)}})};(function(){var e=n.createElement("input"),t=n.createElement("select"),i=t.appendChild(n.createElement("option"));e.type="checkbox";u.checkOn=e.value!=="";u.optSelected=i.selected;t.disabled=true;u.optDisabled=!i.disabled;e=n.createElement("input");e.value="t";e.type="radio";u.radioValue=e.value==="t"})();var et,tt=c.expr.attrHandle;c.fn.extend({attr:function(e,t){return R(this,c.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){c.removeAttr(this,e)})}});c.extend({attr:function(e,t,i){var n,s,r=e.nodeType;if(r===3||r===8||r===2){return}if(typeof e.getAttribute==="undefined"){return c.prop(e,t,i)}if(r!==1||!c.isXMLDoc(e)){t=t.toLowerCase();s=c.attrHooks[t]||(c.expr.match.bool.test(t)?et:undefined)}if(i!==undefined){if(i===null){c.removeAttr(e,t);return}if(s&&"set"in s&&(n=s.set(e,i,t))!==undefined){return n}e.setAttribute(t,i+"");return i}if(s&&"get"in s&&(n=s.get(e,t))!==null){return n}n=c.find.attr(e,t);return n==null?undefined:n},attrHooks:{type:{set:function(e,t){if(!u.radioValue&&t==="radio"&&c.nodeName(e,"input")){var i=e.value;e.setAttribute("type",t);if(i){e.value=i}return t}}}},removeAttr:function(e,t){var i,n,s=0,r=t&&t.match(I);if(r&&e.nodeType===1){while(i=r[s++]){n=c.propFix[i]||i;if(c.expr.match.bool.test(i)){e[n]=false}e.removeAttribute(i)}}}});et={set:function(e,t,i){if(t===false){c.removeAttr(e,i)}else{e.setAttribute(i,i)}return i}};c.each(c.expr.match.bool.source.match(/\w+/g),function(e,t){var i=tt[t]||c.find.attr;tt[t]=function(e,t,n){var s,r;if(!n){r=tt[t];tt[t]=s;s=i(e,t,n)!=null?t.toLowerCase():null;tt[t]=r}return s}});var it=/^(?:input|select|textarea|button)$/i,nt=/^(?:a|area)$/i;c.fn.extend({prop:function(e,t){return R(this,c.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[c.propFix[e]||e]})}});c.extend({prop:function(e,t,i){var n,s,r=e.nodeType;if(r===3||r===8||r===2){return}if(r!==1||!c.isXMLDoc(e)){t=c.propFix[t]||t;s=c.propHooks[t]}if(i!==undefined){if(s&&"set"in s&&(n=s.set(e,i,t))!==undefined){return n}return e[t]=i}if(s&&"get"in s&&(n=s.get(e,t))!==null){return n}return e[t]},propHooks:{tabIndex:{get:function(e){var t=c.find.attr(e,"tabindex");return t?parseInt(t,10):it.test(e.nodeName)||nt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}});if(!u.optSelected){c.propHooks.selected={get:function(e){var t=e.parentNode;if(t&&t.parentNode){t.parentNode.selectedIndex}return null},set:function(e){var t=e.parentNode;if(t){t.selectedIndex;if(t.parentNode){t.parentNode.selectedIndex}}}}}c.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){c.propFix[this.toLowerCase()]=this});var st=/[\t\r\n\f]/g;function rt(e){return e.getAttribute&&e.getAttribute("class")||""}c.fn.extend({addClass:function(e){var t,i,n,s,r,o,a,l=0;if(c.isFunction(e)){return this.each(function(t){c(this).addClass(e.call(this,t,rt(this)))})}if(typeof e==="string"&&e){t=e.match(I)||[];while(i=this[l++]){s=rt(i);n=i.nodeType===1&&(" "+s+" ").replace(st," ");if(n){o=0;while(r=t[o++]){if(n.indexOf(" "+r+" ")<0){n+=r+" "}}a=c.trim(n);if(s!==a){i.setAttribute("class",a)}}}}return this},removeClass:function(e){var t,i,n,s,r,o,a,l=0;if(c.isFunction(e)){return this.each(function(t){c(this).removeClass(e.call(this,t,rt(this)))})}if(!arguments.length){return this.attr("class","")}if(typeof e==="string"&&e){t=e.match(I)||[];while(i=this[l++]){s=rt(i);n=i.nodeType===1&&(" "+s+" ").replace(st," ");if(n){o=0;while(r=t[o++]){while(n.indexOf(" "+r+" ")>-1){n=n.replace(" "+r+" "," ")}}a=c.trim(n);if(s!==a){i.setAttribute("class",a)}}}}return this},toggleClass:function(e,t){var i=typeof e;if(typeof t==="boolean"&&i==="string"){return t?this.addClass(e):this.removeClass(e)}if(c.isFunction(e)){return this.each(function(i){c(this).toggleClass(e.call(this,i,rt(this),t),t)})}return this.each(function(){var t,n,s,r;if(i==="string"){n=0;s=c(this);r=e.match(I)||[];while(t=r[n++]){if(s.hasClass(t)){s.removeClass(t)}else{s.addClass(t)}}}else if(e===undefined||i==="boolean"){t=rt(this);if(t){z.set(this,"__className__",t)}if(this.setAttribute){this.setAttribute("class",t||e===false?"":z.get(this,"__className__")||"")}}})},hasClass:function(e){var t,i,n=0;t=" "+e+" ";while(i=this[n++]){if(i.nodeType===1&&(" "+rt(i)+" ").replace(st," ").indexOf(t)>-1){return true}}return false}});var ot=/\r/g,at=/[\x20\t\r\n\f]+/g;c.fn.extend({val:function(e){var t,i,n,s=this[0];if(!arguments.length){if(s){t=c.valHooks[s.type]||c.valHooks[s.nodeName.toLowerCase()];if(t&&"get"in t&&(i=t.get(s,"value"))!==undefined){return i}i=s.value;return typeof i==="string"?i.replace(ot,""):i==null?"":i}return}n=c.isFunction(e);return this.each(function(i){var s;if(this.nodeType!==1){return}if(n){s=e.call(this,i,c(this).val())}else{s=e}if(s==null){s=""}else if(typeof s==="number"){s+=""}else if(c.isArray(s)){s=c.map(s,function(e){return e==null?"":e+""})}t=c.valHooks[this.type]||c.valHooks[this.nodeName.toLowerCase()];if(!t||!("set"in t)||t.set(this,s,"value")===undefined){this.value=s}})}});c.extend({valHooks:{option:{get:function(e){var t=c.find.attr(e,"value");return t!=null?t:c.trim(c.text(e)).replace(at," ")}},select:{get:function(e){var t,i,n=e.options,s=e.selectedIndex,r=e.type==="select-one"||s<0,o=r?null:[],a=r?s+1:n.length,l=s<0?a:r?s:0;for(;l<a;l++){i=n[l];if((i.selected||l===s)&&(u.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!c.nodeName(i.parentNode,"optgroup"))){t=c(i).val();if(r){return t}o.push(t)}}return o},set:function(e,t){var i,n,s=e.options,r=c.makeArray(t),o=s.length;while(o--){n=s[o];if(n.selected=c.inArray(c.valHooks.option.get(n),r)>-1){i=true}}if(!i){e.selectedIndex=-1}return r}}}});c.each(["radio","checkbox"],function(){c.valHooks[this]={set:function(e,t){if(c.isArray(t)){return e.checked=c.inArray(c(e).val(),t)>-1}}};if(!u.checkOn){c.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value}}});var lt=/^(?:focusinfocus|focusoutblur)$/;c.extend(c.event,{trigger:function(t,i,s,r){var o,a,l,h,u,f,p,m=[s||n],v=d.call(t,"type")?t.type:t,g=d.call(t,"namespace")?t.namespace.split("."):[];a=l=s=s||n;if(s.nodeType===3||s.nodeType===8){return}if(lt.test(v+c.event.triggered)){return}if(v.indexOf(".")>-1){g=v.split(".");v=g.shift();g.sort()}u=v.indexOf(":")<0&&"on"+v;t=t[c.expando]?t:new c.Event(v,typeof t==="object"&&t);t.isTrigger=r?2:3;t.namespace=g.join(".");t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;t.result=undefined;if(!t.target){t.target=s}i=i==null?[t]:c.makeArray(i,[t]);p=c.event.special[v]||{};if(!r&&p.trigger&&p.trigger.apply(s,i)===false){return}if(!r&&!p.noBubble&&!c.isWindow(s)){h=p.delegateType||v;if(!lt.test(h+v)){a=a.parentNode}for(;a;a=a.parentNode){m.push(a);l=a}if(l===(s.ownerDocument||n)){m.push(l.defaultView||l.parentWindow||e)}}o=0;while((a=m[o++])&&!t.isPropagationStopped()){t.type=o>1?h:p.bindType||v;f=(z.get(a,"events")||{})[t.type]&&z.get(a,"handle");if(f){f.apply(a,i)}f=u&&a[u];if(f&&f.apply&&$(a)){t.result=f.apply(a,i);if(t.result===false){t.preventDefault()}}}t.type=v;if(!r&&!t.isDefaultPrevented()){if((!p._default||p._default.apply(m.pop(),i)===false)&&$(s)){if(u&&c.isFunction(s[v])&&!c.isWindow(s)){l=s[u];if(l){s[u]=null}c.event.triggered=v;s[v]();c.event.triggered=undefined;if(l){s[u]=l}}}}return t.result},simulate:function(e,t,i){var n=c.extend(new c.Event,i,{type:e,isSimulated:true});c.event.trigger(n,null,t)}});c.fn.extend({trigger:function(e,t){return this.each(function(){c.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i){return c.event.trigger(e,t,i,true)}}});c.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(e,t){c.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}});c.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});u.focusin="onfocusin"in e;if(!u.focusin){c.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){c.event.simulate(t,e.target,c.event.fix(e))};c.event.special[t]={setup:function(){var n=this.ownerDocument||this,s=z.access(n,t);if(!s){n.addEventListener(e,i,true)}z.access(n,t,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=z.access(n,t)-1;if(!s){n.removeEventListener(e,i,true);z.remove(n,t)}else{z.access(n,t,s)}}}})}var ht=e.location;var dt=c.now();var ut=/\?/;c.parseJSON=function(e){return JSON.parse(e+"")};c.parseXML=function(t){var i;if(!t||typeof t!=="string"){return null}try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){i=undefined}if(!i||i.getElementsByTagName("parsererror").length){c.error("Invalid XML: "+t)}return i};var ft=/#.*$/,ct=/([?&])_=[^&]*/,pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,mt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,vt=/^(?:GET|HEAD)$/,gt=/^\/\//,yt={},bt={},wt="*/".concat("*"),_t=n.createElement("a");_t.href=ht.href;function xt(e){return function(t,i){if(typeof t!=="string"){i=t;t="*"}var n,s=0,r=t.toLowerCase().match(I)||[];if(c.isFunction(i)){while(n=r[s++]){if(n[0]==="+"){n=n.slice(1)||"*";(e[n]=e[n]||[]).unshift(i)}else{(e[n]=e[n]||[]).push(i)}}}}}function kt(e,t,i,n){var s={},r=e===bt;function o(a){var l;s[a]=true;c.each(e[a]||[],function(e,a){var h=a(t,i,n);if(typeof h==="string"&&!r&&!s[h]){t.dataTypes.unshift(h);o(h);return false}else if(r){return!(l=h)}});return l}return o(t.dataTypes[0])||!s["*"]&&o("*")}function Ct(e,t){var i,n,s=c.ajaxSettings.flatOptions||{};for(i in t){if(t[i]!==undefined){(s[i]?e:n||(n={}))[i]=t[i]}}if(n){c.extend(true,e,n)}return e}function St(e,t,i){var n,s,r,o,a=e.contents,l=e.dataTypes;while(l[0]==="*"){l.shift();if(n===undefined){n=e.mimeType||t.getResponseHeader("Content-Type")}}if(n){for(s in a){if(a[s]&&a[s].test(n)){l.unshift(s);break}}}if(l[0]in i){r=l[0]}else{for(s in i){if(!l[0]||e.converters[s+" "+l[0]]){r=s;break}if(!o){o=s}}r=r||o}if(r){if(r!==l[0]){l.unshift(r)}return i[r]}}function Tt(e,t,i,n){var s,r,o,a,l,h={},d=e.dataTypes.slice();if(d[1]){for(o in e.converters){h[o.toLowerCase()]=e.converters[o]}}r=d.shift();while(r){if(e.responseFields[r]){i[e.responseFields[r]]=t}if(!l&&n&&e.dataFilter){t=e.dataFilter(t,e.dataType)}l=r;r=d.shift();if(r){if(r==="*"){r=l}else if(l!=="*"&&l!==r){o=h[l+" "+r]||h["* "+r];if(!o){for(s in h){a=s.split(" ");if(a[1]===r){o=h[l+" "+a[0]]||h["* "+a[0]];if(o){if(o===true){o=h[s]}else if(h[s]!==true){r=a[0];d.unshift(a[1])}break}}}}if(o!==true){if(o&&e.throws){t=o(t)}else{try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+r}}}}}}}return{state:"success",data:t}}c.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ht.href,type:"GET",isLocal:mt.test(ht.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":wt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":c.parseJSON,"text xml":c.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(e,t){return t?Ct(Ct(e,c.ajaxSettings),t):Ct(c.ajaxSettings,e)},ajaxPrefilter:xt(yt),ajaxTransport:xt(bt),ajax:function(t,i){if(typeof t==="object"){i=t;t=undefined}i=i||{};var s,r,o,a,l,h,d,u,f=c.ajaxSetup({},i),p=f.context||f,m=f.context&&(p.nodeType||p.jquery)?c(p):c.event,v=c.Deferred(),g=c.Callbacks("once memory"),y=f.statusCode||{},b={},w={},_=0,x="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(_===2){if(!a){a={};while(t=pt.exec(o)){a[t[1].toLowerCase()]=t[2]}}t=a[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return _===2?o:null},setRequestHeader:function(e,t){var i=e.toLowerCase();if(!_){e=w[i]=w[i]||e;b[e]=t}return this},overrideMimeType:function(e){if(!_){f.mimeType=e}return this},statusCode:function(e){var t;if(e){if(_<2){for(t in e){y[t]=[y[t],e[t]]}}else{k.always(e[k.status])}}return this},abort:function(e){var t=e||x;if(s){s.abort(t)}C(0,t);return this}};v.promise(k).complete=g.add;k.success=k.done;k.error=k.fail;f.url=((t||f.url||ht.href)+"").replace(ft,"").replace(gt,ht.protocol+"//");f.type=i.method||i.type||f.method||f.type;f.dataTypes=c.trim(f.dataType||"*").toLowerCase().match(I)||[""];if(f.crossDomain==null){h=n.createElement("a");try{h.href=f.url;h.href=h.href;f.crossDomain=_t.protocol+"//"+_t.host!==h.protocol+"//"+h.host}catch(e){f.crossDomain=true}}if(f.data&&f.processData&&typeof f.data!=="string"){f.data=c.param(f.data,f.traditional)}kt(yt,f,i,k);if(_===2){return k}d=c.event&&f.global;if(d&&c.active++===0){c.event.trigger("ajaxStart")}f.type=f.type.toUpperCase();f.hasContent=!vt.test(f.type);r=f.url;if(!f.hasContent){if(f.data){r=f.url+=(ut.test(r)?"&":"?")+f.data;delete f.data}if(f.cache===false){f.url=ct.test(r)?r.replace(ct,"$1_="+dt++):r+(ut.test(r)?"&":"?")+"_="+dt++}}if(f.ifModified){if(c.lastModified[r]){k.setRequestHeader("If-Modified-Since",c.lastModified[r])}if(c.etag[r]){k.setRequestHeader("If-None-Match",c.etag[r])}}if(f.data&&f.hasContent&&f.contentType!==false||i.contentType){k.setRequestHeader("Content-Type",f.contentType)}k.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+(f.dataTypes[0]!=="*"?", "+wt+"; q=0.01":""):f.accepts["*"]);for(u in f.headers){k.setRequestHeader(u,f.headers[u])}if(f.beforeSend&&(f.beforeSend.call(p,k,f)===false||_===2)){return k.abort()}x="abort";for(u in{success:1,error:1,complete:1}){k[u](f[u])}s=kt(bt,f,i,k);if(!s){C(-1,"No Transport")}else{k.readyState=1;if(d){m.trigger("ajaxSend",[k,f])}if(_===2){return k}if(f.async&&f.timeout>0){l=e.setTimeout(function(){k.abort("timeout")},f.timeout)}try{_=1;s.send(b,C)}catch(e){if(_<2){C(-1,e)}else{throw e}}}function C(t,i,n,a){var h,u,b,w,x,C=i;if(_===2){return}_=2;if(l){e.clearTimeout(l)}s=undefined;o=a||"";k.readyState=t>0?4:0;h=t>=200&&t<300||t===304;if(n){w=St(f,k,n)}w=Tt(f,w,k,h);if(h){if(f.ifModified){x=k.getResponseHeader("Last-Modified");if(x){c.lastModified[r]=x}x=k.getResponseHeader("etag");if(x){c.etag[r]=x}}if(t===204||f.type==="HEAD"){C="nocontent"}else if(t===304){C="notmodified"}else{C=w.state;u=w.data;b=w.error;h=!b}}else{b=C;if(t||!C){C="error";if(t<0){t=0}}}k.status=t;k.statusText=(i||C)+"";if(h){v.resolveWith(p,[u,C,k])}else{v.rejectWith(p,[k,C,b])}k.statusCode(y);y=undefined;if(d){m.trigger(h?"ajaxSuccess":"ajaxError",[k,f,h?u:b])}g.fireWith(p,[k,C]);if(d){m.trigger("ajaxComplete",[k,f]);if(!--c.active){c.event.trigger("ajaxStop")}}}return k},getJSON:function(e,t,i){return c.get(e,t,i,"json")},getScript:function(e,t){return c.get(e,undefined,t,"script")}});c.each(["get","post"],function(e,t){c[t]=function(e,i,n,s){if(c.isFunction(i)){s=s||n;n=i;i=undefined}return c.ajax(c.extend({url:e,type:t,dataType:s,data:i,success:n},c.isPlainObject(e)&&e))}});c._evalUrl=function(e){return c.ajax({url:e,type:"GET",dataType:"script",async:false,global:false,throws:true})};c.fn.extend({wrapAll:function(e){var t;if(c.isFunction(e)){return this.each(function(t){c(this).wrapAll(e.call(this,t))})}if(this[0]){t=c(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){t.insertBefore(this[0])}t.map(function(){var e=this;while(e.firstElementChild){e=e.firstElementChild}return e}).append(this)}return this},wrapInner:function(e){if(c.isFunction(e)){return this.each(function(t){c(this).wrapInner(e.call(this,t))})}return this.each(function(){var t=c(this),i=t.contents();if(i.length){i.wrapAll(e)}else{t.append(e)}})},wrap:function(e){var t=c.isFunction(e);return this.each(function(i){c(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){if(!c.nodeName(this,"body")){c(this).replaceWith(this.childNodes)}}).end()}});c.expr.filters.hidden=function(e){return!c.expr.filters.visible(e)};c.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var Mt=/%20/g,Dt=/\[\]$/,Et=/\r?\n/g,Ot=/^(?:submit|button|image|reset|file)$/i,Pt=/^(?:input|select|textarea|keygen)/i;function It(e,t,i,n){var s;if(c.isArray(t)){c.each(t,function(t,s){if(i||Dt.test(e)){n(e,s)}else{It(e+"["+(typeof s==="object"&&s!=null?t:"")+"]",s,i,n)}})}else if(!i&&c.type(t)==="object"){for(s in t){It(e+"["+s+"]",t[s],i,n)}}else{n(e,t)}}c.param=function(e,t){var i,n=[],s=function(e,t){t=c.isFunction(t)?t():t==null?"":t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===undefined){t=c.ajaxSettings&&c.ajaxSettings.traditional}if(c.isArray(e)||e.jquery&&!c.isPlainObject(e)){c.each(e,function(){s(this.name,this.value)})}else{for(i in e){It(i,e[i],t,s)}}return n.join("&").replace(Mt,"+")};c.fn.extend({serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=c.prop(this,"elements");return e?c.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!c(this).is(":disabled")&&Pt.test(this.nodeName)&&!Ot.test(e)&&(this.checked||!X.test(e))}).map(function(e,t){var i=c(this).val();return i==null?null:c.isArray(i)?c.map(i,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:i.replace(Et,"\r\n")}}).get()}});c.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var At={0:200,1223:204},Nt=c.ajaxSettings.xhr();u.cors=!!Nt&&"withCredentials"in Nt;u.ajax=Nt=!!Nt;c.ajaxTransport(function(t){var i,n;if(u.cors||Nt&&!t.crossDomain){return{send:function(s,r){var o,a=t.xhr();a.open(t.type,t.url,t.async,t.username,t.password);if(t.xhrFields){for(o in t.xhrFields){a[o]=t.xhrFields[o]}}if(t.mimeType&&a.overrideMimeType){a.overrideMimeType(t.mimeType)}if(!t.crossDomain&&!s["X-Requested-With"]){s["X-Requested-With"]="XMLHttpRequest"}for(o in s){a.setRequestHeader(o,s[o])}i=function(e){return function(){if(i){i=n=a.onload=a.onerror=a.onabort=a.onreadystatechange=null;if(e==="abort"){a.abort()}else if(e==="error"){if(typeof a.status!=="number"){r(0,"error")}else{r(a.status,a.statusText)}}else{r(At[a.status]||a.status,a.statusText,(a.responseType||"text")!=="text"||typeof a.responseText!=="string"?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders())}}}};a.onload=i();n=a.onerror=i("error");if(a.onabort!==undefined){a.onabort=n}else{a.onreadystatechange=function(){if(a.readyState===4){e.setTimeout(function(){if(i){n()}})}}}i=i("abort");try{a.send(t.hasContent&&t.data||null)}catch(e){if(i){throw e}}},abort:function(){if(i){i()}}}}});c.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){c.globalEval(e);return e}}});c.ajaxPrefilter("script",function(e){if(e.cache===undefined){e.cache=false}if(e.crossDomain){e.type="GET"}});c.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(s,r){t=c("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove();i=null;if(e){r(e.type==="error"?404:200,e.type)}});n.head.appendChild(t[0])},abort:function(){if(i){i()}}}}});var Ft=[],Rt=/(=)\?(?=&|$)|\?\?/;c.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ft.pop()||c.expando+"_"+dt++;this[e]=true;return e}});c.ajaxPrefilter("json jsonp",function(t,i,n){var s,r,o,a=t.jsonp!==false&&(Rt.test(t.url)?"url":typeof t.data==="string"&&(t.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Rt.test(t.data)&&"data");if(a||t.dataTypes[0]==="jsonp"){s=t.jsonpCallback=c.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback;if(a){t[a]=t[a].replace(Rt,"$1"+s)}else if(t.jsonp!==false){t.url+=(ut.test(t.url)?"&":"?")+t.jsonp+"="+s}t.converters["script json"]=function(){if(!o){c.error(s+" was not called")}return o[0]};t.dataTypes[0]="json";r=e[s];e[s]=function(){o=arguments};n.always(function(){if(r===undefined){c(e).removeProp(s)}else{e[s]=r}if(t[s]){t.jsonpCallback=i.jsonpCallback;Ft.push(s)}if(o&&c.isFunction(r)){r(o[0])}o=r=undefined});return"script"}});c.parseHTML=function(e,t,i){if(!e||typeof e!=="string"){return null}if(typeof t==="boolean"){i=t;t=false}t=t||n;var s=k.exec(e),r=!i&&[];if(s){return[t.createElement(s[1])]}s=ie([e],t,r);if(r&&r.length){c(r).remove()}return c.merge([],s.childNodes)};var $t=c.fn.load;c.fn.load=function(e,t,i){if(typeof e!=="string"&&$t){return $t.apply(this,arguments)}var n,s,r,o=this,a=e.indexOf(" ");if(a>-1){n=c.trim(e.slice(a));e=e.slice(0,a)}if(c.isFunction(t)){i=t;t=undefined}else if(t&&typeof t==="object"){s="POST"}if(o.length>0){c.ajax({url:e,type:s||"GET",dataType:"html",data:t}).done(function(e){r=arguments;o.html(n?c("<div>").append(c.parseHTML(e)).find(n):e)}).always(i&&function(e,t){o.each(function(){i.apply(this,r||[e.responseText,t,e])})})}return this};c.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){c.fn[t]=function(e){return this.on(t,e)}});c.expr.filters.animated=function(e){return c.grep(c.timers,function(t){return e===t.elem}).length};function Lt(e){return c.isWindow(e)?e:e.nodeType===9&&e.defaultView}c.offset={setOffset:function(e,t,i){var n,s,r,o,a,l,h,d=c.css(e,"position"),u=c(e),f={};if(d==="static"){e.style.position="relative"}a=u.offset();r=c.css(e,"top");l=c.css(e,"left");h=(d==="absolute"||d==="fixed")&&(r+l).indexOf("auto")>-1;if(h){n=u.position();o=n.top;s=n.left}else{o=parseFloat(r)||0;s=parseFloat(l)||0}if(c.isFunction(t)){t=t.call(e,i,c.extend({},a))}if(t.top!=null){f.top=t.top-a.top+o}if(t.left!=null){f.left=t.left-a.left+s}if("using"in t){t.using.call(e,f)}else{u.css(f)}}};c.fn.extend({offset:function(e){if(arguments.length){return e===undefined?this:this.each(function(t){c.offset.setOffset(this,e,t)})}var t,i,n=this[0],s={top:0,left:0},r=n&&n.ownerDocument;if(!r){return}t=r.documentElement;if(!c.contains(t,n)){return s}s=n.getBoundingClientRect();i=Lt(r);return{top:s.top+i.pageYOffset-t.clientTop,left:s.left+i.pageXOffset-t.clientLeft}},position:function(){if(!this[0]){return}var e,t,i=this[0],n={top:0,left:0};if(c.css(i,"position")==="fixed"){t=i.getBoundingClientRect()}else{e=this.offsetParent();t=this.offset();if(!c.nodeName(e[0],"html")){n=e.offset()}n.top+=c.css(e[0],"borderTopWidth",true);n.left+=c.css(e[0],"borderLeftWidth",true)}return{top:t.top-n.top-c.css(i,"marginTop",true),left:t.left-n.left-c.css(i,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&c.css(e,"position")==="static"){e=e.offsetParent}return e||Oe})}});c.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;c.fn[e]=function(n){return R(this,function(e,n,s){var r=Lt(e);if(s===undefined){return r?r[t]:e[n]}if(r){r.scrollTo(!i?s:r.pageXOffset,i?s:r.pageYOffset)}else{e[n]=s}},e,n,arguments.length)}});c.each(["top","left"],function(e,t){c.cssHooks[t]=Ie(u.pixelPosition,function(e,i){if(i){i=Pe(e,t);return Me.test(i)?c(e).position()[t]+"px":i}})});c.each({Height:"height",Width:"width"},function(e,t){c.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){c.fn[n]=function(n,s){var r=arguments.length&&(i||typeof n!=="boolean"),o=i||(n===true||s===true?"margin":"border");return R(this,function(t,i,n){var s;if(c.isWindow(t)){return t.document.documentElement["client"+e]}if(t.nodeType===9){s=t.documentElement;return Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])}return n===undefined?c.css(t,i,o):c.style(t,i,n,o)},t,r?n:undefined,r,null)}})});c.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",i)},size:function(){return this.length}});c.fn.andSelf=c.fn.addBack;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return c})}var zt=e.jQuery,jt=e.$;c.noConflict=function(t){if(e.$===c){e.$=jt}if(t&&e.jQuery===c){e.jQuery=zt}return c};if(!t){e.jQuery=e.$=c}return c});(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof module==="object"&&module.exports){module.exports=function(t,i){if(typeof i==="undefined"){if(typeof window!=="undefined"){i=require("jquery")}else{i=require("jquery")(t)}}e(i);return i}}else{e(jQuery)}})(function(e){"use strict";var t=/\r?\n/g;var i={};i.fileapi=e('<input type="file">').get(0).files!==undefined;i.formdata=typeof window.FormData!=="undefined";var n=!!e.fn.prop;e.fn.attr2=function(){if(!n){return this.attr.apply(this,arguments)}var e=this.prop.apply(this,arguments);if(e&&e.jquery||typeof e==="string"){return e}return this.attr.apply(this,arguments)};e.fn.ajaxSubmit=function(t,s,r,a){if(!this.length){o("ajaxSubmit: skipping submit process - no element selected");return this}var l,h,d,u=this;if(typeof t==="function"){t={success:t}}else if(typeof t==="string"||t===false&&arguments.length>0){t={url:t,data:s,dataType:r};if(typeof a==="function"){t.success=a}}else if(typeof t==="undefined"){t={}}l=t.method||t.type||this.attr2("method");h=t.url||this.attr2("action");d=typeof h==="string"?e.trim(h):"";d=d||window.location.href||"";if(d){d=(d.match(/^([^#]+)/)||[])[1]}t=e.extend(true,{url:d,success:e.ajaxSettings.success,type:l||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var f={};this.trigger("form-pre-serialize",[this,t,f]);if(f.veto){o("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(t.beforeSerialize&&t.beforeSerialize(this,t)===false){o("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var c=t.traditional;if(typeof c==="undefined"){c=e.ajaxSettings.traditional}var p=[];var m,v=this.formToArray(t.semantic,p,t.filtering);if(t.data){var g=e.isFunction(t.data)?t.data(v):t.data;t.extraData=g;m=e.param(g,c)}if(t.beforeSubmit&&t.beforeSubmit(v,this,t)===false){o("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[v,this,t,f]);if(f.veto){o("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var y=e.param(v,c);if(m){y=y?y+"&"+m:m}if(t.type.toUpperCase()==="GET"){t.url+=(t.url.indexOf("?")>=0?"&":"?")+y;t.data=null}else{t.data=y}var b=[];if(t.resetForm){b.push(function(){u.resetForm()})}if(t.clearForm){b.push(function(){u.clearForm(t.includeHidden)})}if(!t.dataType&&t.target){var w=t.success||function(){};b.push(function(i,n,s){var r=arguments,o=t.replaceTarget?"replaceWith":"html";e(t.target)[o](i).each(function(){w.apply(this,r)})})}else if(t.success){if(e.isArray(t.success)){e.merge(b,t.success)}else{b.push(t.success)}}t.success=function(e,i,n){var s=t.context||this;for(var r=0,o=b.length;r<o;r++){b[r].apply(s,[e,i,n||u,u])}};if(t.error){var _=t.error;t.error=function(e,i,n){var s=t.context||this;_.apply(s,[e,i,n,u])}}if(t.complete){var x=t.complete;t.complete=function(e,i){var n=t.context||this;x.apply(n,[e,i,u])}}var k=e("input[type=file]:enabled",this).filter(function(){return e(this).val()!==""});var C=k.length>0;var S="multipart/form-data";var T=u.attr("enctype")===S||u.attr("encoding")===S;var M=i.fileapi&&i.formdata;o("fileAPI :"+M);var D=(C||T)&&!M;var E;if(t.iframe!==false&&(t.iframe||D)){if(t.closeKeepAlive){e.get(t.closeKeepAlive,function(){E=A(v)})}else{E=A(v)}}else if((C||T)&&M){E=I(v)}else{E=e.ajax(t)}u.removeData("jqxhr").data("jqxhr",E);for(var O=0;O<p.length;O++){p[O]=null}this.trigger("form-submit-notify",[this,t]);return this;function P(i){var n=e.param(i,t.traditional).split("&");var s=n.length;var r=[];var o,a;for(o=0;o<s;o++){n[o]=n[o].replace(/\+/g," ");a=n[o].split("=");r.push([decodeURIComponent(a[0]),decodeURIComponent(a[1])])}return r}function I(i){var n=new FormData;for(var s=0;s<i.length;s++){n.append(i[s].name,i[s].value)}if(t.extraData){var r=P(t.extraData);for(s=0;s<r.length;s++){if(r[s]){n.append(r[s][0],r[s][1])}}}t.data=null;var o=e.extend(true,{},e.ajaxSettings,t,{contentType:false,processData:false,cache:false,type:l||"POST"});if(t.uploadProgress){o.xhr=function(){var i=e.ajaxSettings.xhr();if(i.upload){i.upload.addEventListener("progress",function(e){var i=0;var n=e.loaded||e.position;var s=e.total;if(e.lengthComputable){i=Math.ceil(n/s*100)}t.uploadProgress(e,n,s,i)},false)}return i}}o.data=null;var a=o.beforeSend;o.beforeSend=function(e,i){if(t.formData){i.data=t.formData}else{i.data=n}if(a){a.call(this,e,i)}};return e.ajax(o)}function A(i){var s=u[0],r,a,h,d,f,c,m,v,g,y,b,w;var _=e.Deferred();_.abort=function(e){v.abort(e)};if(i){for(a=0;a<p.length;a++){r=e(p[a]);if(n){r.prop("disabled",false)}else{r.removeAttr("disabled")}}}h=e.extend(true,{},e.ajaxSettings,t);h.context=h.context||h;f="jqFormIO"+(new Date).getTime();var x=s.ownerDocument;var k=u.closest("body");if(h.iframeTarget){c=e(h.iframeTarget,x);y=c.attr2("name");if(!y){c.attr2("name",f)}else{f=y}}else{c=e('<iframe name="'+f+'" src="'+h.iframeSrc+'" />',x);c.css({position:"absolute",top:"-1000px",left:"-1000px"})}m=c[0];v={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var i=t==="timeout"?"timeout":"aborted";o("aborting upload... "+i);this.aborted=1;try{if(m.contentWindow.document.execCommand){m.contentWindow.document.execCommand("Stop")}}catch(e){}c.attr("src",h.iframeSrc);v.error=i;if(h.error){h.error.call(h.context,v,i,t)}if(d){e.event.trigger("ajaxError",[v,h,i])}if(h.complete){h.complete.call(h.context,v,i)}}};d=h.global;if(d&&e.active++===0){e.event.trigger("ajaxStart")}if(d){e.event.trigger("ajaxSend",[v,h])}if(h.beforeSend&&h.beforeSend.call(h.context,v,h)===false){if(h.global){e.active--}_.reject();return _}if(v.aborted){_.reject();return _}g=s.clk;if(g){y=g.name;if(y&&!g.disabled){h.extraData=h.extraData||{};h.extraData[y]=g.value;if(g.type==="image"){h.extraData[y+".x"]=s.clk_x;h.extraData[y+".y"]=s.clk_y}}}var C=1;var S=2;function T(e){var t=null;try{if(e.contentWindow){t=e.contentWindow.document}}catch(e){o("cannot get iframe.contentWindow document: "+e)}if(t){return t}try{t=e.contentDocument?e.contentDocument:e.document}catch(i){o("cannot get iframe.contentDocument: "+i);t=e.document}return t}var M=e("meta[name=csrf-token]").attr("content");var D=e("meta[name=csrf-param]").attr("content");if(D&&M){h.extraData=h.extraData||{};h.extraData[D]=M}function E(){var t=u.attr2("target"),i=u.attr2("action"),n="multipart/form-data",r=u.attr("enctype")||u.attr("encoding")||n;s.setAttribute("target",f);if(!l||/post/i.test(l)){s.setAttribute("method","POST")}if(i!==h.url){s.setAttribute("action",h.url)}if(!h.skipEncodingOverride&&(!l||/post/i.test(l))){u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(h.timeout){w=setTimeout(function(){b=true;N(C)},h.timeout)}function a(){try{
var e=T(m).readyState;o("state = "+e);if(e&&e.toLowerCase()==="uninitialized"){setTimeout(a,50)}}catch(e){o("Server abort: ",e," (",e.name,")");N(S);if(w){clearTimeout(w)}w=undefined}}var d=[];try{if(h.extraData){for(var p in h.extraData){if(h.extraData.hasOwnProperty(p)){if(e.isPlainObject(h.extraData[p])&&h.extraData[p].hasOwnProperty("name")&&h.extraData[p].hasOwnProperty("value")){d.push(e('<input type="hidden" name="'+h.extraData[p].name+'">',x).val(h.extraData[p].value).appendTo(s)[0])}else{d.push(e('<input type="hidden" name="'+p+'">',x).val(h.extraData[p]).appendTo(s)[0])}}}}if(!h.iframeTarget){c.appendTo(k)}if(m.attachEvent){m.attachEvent("onload",N)}else{m.addEventListener("load",N,false)}setTimeout(a,15);try{s.submit()}catch(e){var v=document.createElement("form").submit;v.apply(s)}}finally{s.setAttribute("action",i);s.setAttribute("enctype",r);if(t){s.setAttribute("target",t)}else{u.removeAttr("target")}e(d).remove()}}if(h.forceSync){E()}else{setTimeout(E,10)}var O,P,I=50,A;function N(t){if(v.aborted||A){return}P=T(m);if(!P){o("cannot access response document");t=S}if(t===C&&v){v.abort("timeout");_.reject(v,"timeout");return}else if(t===S&&v){v.abort("server abort");_.reject(v,"error","server abort");return}if(!P||P.location.href===h.iframeSrc){if(!b){return}}if(m.detachEvent){m.detachEvent("onload",N)}else{m.removeEventListener("load",N,false)}var i="success",n;try{if(b){throw"timeout"}var s=h.dataType==="xml"||P.XMLDocument||e.isXMLDoc(P);o("isXml="+s);if(!s&&window.opera&&(P.body===null||!P.body.innerHTML)){if(--I){o("requeing onLoad callback, DOM not available");setTimeout(N,250);return}}var r=P.body?P.body:P.documentElement;v.responseText=r?r.innerHTML:null;v.responseXML=P.XMLDocument?P.XMLDocument:P;if(s){h.dataType="xml"}v.getResponseHeader=function(e){var t={"content-type":h.dataType};return t[e.toLowerCase()]};if(r){v.status=Number(r.getAttribute("status"))||v.status;v.statusText=r.getAttribute("statusText")||v.statusText}var a=(h.dataType||"").toLowerCase();var l=/(json|script|text)/.test(a);if(l||h.textarea){var u=P.getElementsByTagName("textarea")[0];if(u){v.responseText=u.value;v.status=Number(u.getAttribute("status"))||v.status;v.statusText=u.getAttribute("statusText")||v.statusText}else if(l){var f=P.getElementsByTagName("pre")[0];var p=P.getElementsByTagName("body")[0];if(f){v.responseText=f.textContent?f.textContent:f.innerText}else if(p){v.responseText=p.textContent?p.textContent:p.innerText}}}else if(a==="xml"&&!v.responseXML&&v.responseText){v.responseXML=F(v.responseText)}try{O=$(v,a,h)}catch(e){i="parsererror";v.error=n=e||i}}catch(e){o("error caught: ",e);i="error";v.error=n=e||i}if(v.aborted){o("upload aborted");i=null}if(v.status){i=v.status>=200&&v.status<300||v.status===304?"success":"error"}if(i==="success"){if(h.success){h.success.call(h.context,O,"success",v)}_.resolve(v.responseText,"success",v);if(d){e.event.trigger("ajaxSuccess",[v,h])}}else if(i){if(typeof n==="undefined"){n=v.statusText}if(h.error){h.error.call(h.context,v,i,n)}_.reject(v,"error",n);if(d){e.event.trigger("ajaxError",[v,h,n])}}if(d){e.event.trigger("ajaxComplete",[v,h])}if(d&&!--e.active){e.event.trigger("ajaxStop")}if(h.complete){h.complete.call(h.context,v,i)}A=true;if(h.timeout){clearTimeout(w)}setTimeout(function(){if(!h.iframeTarget){c.remove()}else{c.attr("src",h.iframeSrc)}v.responseXML=null},100)}var F=e.parseXML||function(e,t){if(window.ActiveXObject){t=new ActiveXObject("Microsoft.XMLDOM");t.async="false";t.loadXML(e)}else{t=(new DOMParser).parseFromString(e,"text/xml")}return t&&t.documentElement&&t.documentElement.nodeName!=="parsererror"?t:null};var R=e.parseJSON||function(e){return window["eval"]("("+e+")")};var $=function(t,i,n){var s=t.getResponseHeader("content-type")||"",r=(i==="xml"||!i)&&s.indexOf("xml")>=0,o=r?t.responseXML:t.responseText;if(r&&o.documentElement.nodeName==="parsererror"){if(e.error){e.error("parsererror")}}if(n&&n.dataFilter){o=n.dataFilter(o,i)}if(typeof o==="string"){if((i==="json"||!i)&&s.indexOf("json")>=0){o=R(o)}else if((i==="script"||!i)&&s.indexOf("javascript")>=0){e.globalEval(o)}}return o};return _}};e.fn.ajaxForm=function(t,i,n,a){if(typeof t==="string"||t===false&&arguments.length>0){t={url:t,data:i,dataType:n};if(typeof a==="function"){t.success=a}}t=t||{};t.delegation=t.delegation&&e.isFunction(e.fn.on);if(!t.delegation&&this.length===0){var l={s:this.selector,c:this.context};if(!e.isReady&&l.s){o("DOM not ready, queuing ajaxForm");e(function(){e(l.s,l.c).ajaxForm(t)});return this}o("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)"));return this}if(t.delegation){e(document).off("submit.form-plugin",this.selector,s).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,t,s).on("click.form-plugin",this.selector,t,r);return this}return this.ajaxFormUnbind().on("submit.form-plugin",t,s).on("click.form-plugin",t,r)};function s(t){var i=t.data;if(!t.isDefaultPrevented()){t.preventDefault();e(t.target).closest("form").ajaxSubmit(i)}}function r(t){var i=t.target;var n=e(i);if(!n.is("[type=submit],[type=image]")){var s=n.closest("[type=submit]");if(s.length===0){return}i=s[0]}var r=i.form;r.clk=i;if(i.type==="image"){if(typeof t.offsetX!=="undefined"){r.clk_x=t.offsetX;r.clk_y=t.offsetY}else if(typeof e.fn.offset==="function"){var o=n.offset();r.clk_x=t.pageX-o.left;r.clk_y=t.pageY-o.top}else{r.clk_x=t.pageX-i.offsetLeft;r.clk_y=t.pageY-i.offsetTop}}setTimeout(function(){r.clk=r.clk_x=r.clk_y=null},100)}e.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")};e.fn.formToArray=function(t,n,s){var r=[];if(this.length===0){return r}var o=this[0];var a=this.attr("id");var l=t||typeof o.elements==="undefined"?o.getElementsByTagName("*"):o.elements;var h;if(l){l=e.makeArray(l)}if(a&&(t||/(Edge|Trident)\//.test(navigator.userAgent))){h=e(':input[form="'+a+'"]').get();if(h.length){l=(l||[]).concat(h)}}if(!l||!l.length){return r}if(e.isFunction(s)){l=e.map(l,s)}var d,u,f,c,p,m,v;for(d=0,m=l.length;d<m;d++){p=l[d];f=p.name;if(!f||p.disabled){continue}if(t&&o.clk&&p.type==="image"){if(o.clk===p){r.push({name:f,value:e(p).val(),type:p.type});r.push({name:f+".x",value:o.clk_x},{name:f+".y",value:o.clk_y})}continue}c=e.fieldValue(p,true);if(c&&c.constructor===Array){if(n){n.push(p)}for(u=0,v=c.length;u<v;u++){r.push({name:f,value:c[u]})}}else if(i.fileapi&&p.type==="file"){if(n){n.push(p)}var g=p.files;if(g.length){for(u=0;u<g.length;u++){r.push({name:f,value:g[u],type:p.type})}}else{r.push({name:f,value:"",type:p.type})}}else if(c!==null&&typeof c!=="undefined"){if(n){n.push(p)}r.push({name:f,value:c,type:p.type,required:p.required})}}if(!t&&o.clk){var y=e(o.clk),b=y[0];f=b.name;if(f&&!b.disabled&&b.type==="image"){r.push({name:f,value:y.val()});r.push({name:f+".x",value:o.clk_x},{name:f+".y",value:o.clk_y})}}return r};e.fn.formSerialize=function(t){return e.param(this.formToArray(t))};e.fn.fieldSerialize=function(t){var i=[];this.each(function(){var n=this.name;if(!n){return}var s=e.fieldValue(this,t);if(s&&s.constructor===Array){for(var r=0,o=s.length;r<o;r++){i.push({name:n,value:s[r]})}}else if(s!==null&&typeof s!=="undefined"){i.push({name:this.name,value:s})}});return e.param(i)};e.fn.fieldValue=function(t){for(var i=[],n=0,s=this.length;n<s;n++){var r=this[n];var o=e.fieldValue(r,t);if(o===null||typeof o==="undefined"||o.constructor===Array&&!o.length){continue}if(o.constructor===Array){e.merge(i,o)}else{i.push(o)}}return i};e.fieldValue=function(i,n){var s=i.name,r=i.type,o=i.tagName.toLowerCase();if(typeof n==="undefined"){n=true}if(n&&(!s||i.disabled||r==="reset"||r==="button"||(r==="checkbox"||r==="radio")&&!i.checked||(r==="submit"||r==="image")&&i.form&&i.form.clk!==i||o==="select"&&i.selectedIndex===-1)){return null}if(o==="select"){var a=i.selectedIndex;if(a<0){return null}var l=[],h=i.options;var d=r==="select-one";var u=d?a+1:h.length;for(var f=d?a:0;f<u;f++){var c=h[f];if(c.selected&&!c.disabled){var p=c.value;if(!p){p=c.attributes&&c.attributes.value&&!c.attributes.value.specified?c.text:c.value}if(d){return p}l.push(p)}}return l}return e(i).val().replace(t,"\r\n")};e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})};e.fn.clearFields=e.fn.clearInputs=function(t){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,s=this.tagName.toLowerCase();if(i.test(n)||s==="textarea"){this.value=""}else if(n==="checkbox"||n==="radio"){this.checked=false}else if(s==="select"){this.selectedIndex=-1}else if(n==="file"){if(/MSIE/.test(navigator.userAgent)){e(this).replaceWith(e(this).clone(true))}else{e(this).val("")}}else if(t){if(t===true&&/hidden/.test(n)||typeof t==="string"&&e(this).is(t)){this.value=""}}})};e.fn.resetForm=function(){return this.each(function(){var t=e(this);var i=this.tagName.toLowerCase();switch(i){case"input":this.checked=this.defaultChecked;case"textarea":this.value=this.defaultValue;return true;case"option":case"optgroup":var n=t.parents("select");if(n.length&&n[0].multiple){if(i==="option"){this.selected=this.defaultSelected}else{t.find("option").resetForm()}}else{n.resetForm()}return true;case"select":t.find("option").each(function(e){this.selected=this.defaultSelected;if(this.defaultSelected&&!t[0].multiple){t[0].selectedIndex=e;return false}});return true;case"label":var s=e(t.attr("for"));var r=t.find("input,select,textarea");if(s[0]){r.unshift(s[0])}r.resetForm();return true;case"form":if(typeof this.reset==="function"||typeof this.reset==="object"&&!this.reset.nodeType){this.reset()}return true;default:t.find("form,input,label,select,textarea").resetForm();return true}})};e.fn.enable=function(e){if(typeof e==="undefined"){e=true}return this.each(function(){this.disabled=!e})};e.fn.selected=function(t){if(typeof t==="undefined"){t=true}return this.each(function(){var i=this.type;if(i==="checkbox"||i==="radio"){this.checked=t}else if(this.tagName.toLowerCase()==="option"){var n=e(this).parent("select");if(t&&n[0]&&n[0].type==="select-one"){n.find("option").selected(false)}this.selected=t}})};e.fn.ajaxSubmit.debug=false;function o(){if(!e.fn.ajaxSubmit.debug){return}var t="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(t)}else if(window.opera&&window.opera.postError){window.opera.postError(t)}}});if(typeof jQuery==="undefined"){throw new Error("Bootstrap's JavaScript requires jQuery")}+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||t[0]==1&&t[1]==9&&t[2]<1||t[0]>3){throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}}(jQuery);+function(e){"use strict";function t(){var e=document.createElement("bootstrap");var t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t){if(e.style[i]!==undefined){return{end:t[i]}}}return false}e.fn.emulateTransitionEnd=function(t){var i=false;var n=this;e(this).one("bsTransitionEnd",function(){i=true});var s=function(){if(!i)e(n).trigger(e.support.transition.end)};setTimeout(s,t);return this};e(function(){e.support.transition=t();if(!e.support.transition)return;e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}}})}(jQuery);+function(e){"use strict";var t='[data-dismiss="alert"]';var i=function(i){e(i).on("click",t,this.close)};i.VERSION="3.3.7";i.TRANSITION_DURATION=150;i.prototype.close=function(t){var n=e(this);var s=n.attr("data-target");if(!s){s=n.attr("href");s=s&&s.replace(/.*(?=#[^\s]*$)/,"")}var r=e(s==="#"?[]:s);if(t)t.preventDefault();if(!r.length){r=n.closest(".alert")}r.trigger(t=e.Event("close.bs.alert"));if(t.isDefaultPrevented())return;r.removeClass("in");function o(){r.detach().trigger("closed.bs.alert").remove()}e.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o()};function n(t){return this.each(function(){var n=e(this);var s=n.data("bs.alert");if(!s)n.data("bs.alert",s=new i(this));if(typeof t=="string")s[t].call(n)})}var s=e.fn.alert;e.fn.alert=n;e.fn.alert.Constructor=i;e.fn.alert.noConflict=function(){e.fn.alert=s;return this};e(document).on("click.bs.alert.data-api",t,i.prototype.close)}(jQuery);+function(e){"use strict";var t=function(i,n){this.$element=e(i);this.options=e.extend({},t.DEFAULTS,n);this.isLoading=false};t.VERSION="3.3.7";t.DEFAULTS={loadingText:"loading..."};t.prototype.setState=function(t){var i="disabled";var n=this.$element;var s=n.is("input")?"val":"html";var r=n.data();t+="Text";if(r.resetText==null)n.data("resetText",n[s]());setTimeout(e.proxy(function(){n[s](r[t]==null?this.options[t]:r[t]);if(t=="loadingText"){this.isLoading=true;n.addClass(i).attr(i,i).prop(i,true)}else if(this.isLoading){this.isLoading=false;n.removeClass(i).removeAttr(i).prop(i,false)}},this),0)};t.prototype.toggle=function(){var e=true;var t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");if(i.prop("type")=="radio"){if(i.prop("checked"))e=false;t.find(".active").removeClass("active");this.$element.addClass("active")}else if(i.prop("type")=="checkbox"){if(i.prop("checked")!==this.$element.hasClass("active"))e=false;this.$element.toggleClass("active")}i.prop("checked",this.$element.hasClass("active"));if(e)i.trigger("change")}else{this.$element.attr("aria-pressed",!this.$element.hasClass("active"));this.$element.toggleClass("active")}};function i(i){return this.each(function(){var n=e(this);var s=n.data("bs.button");var r=typeof i=="object"&&i;if(!s)n.data("bs.button",s=new t(this,r));if(i=="toggle")s.toggle();else if(i)s.setState(i)})}var n=e.fn.button;e.fn.button=i;e.fn.button.Constructor=t;e.fn.button.noConflict=function(){e.fn.button=n;return this};e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var n=e(t.target).closest(".btn");i.call(n,"toggle");if(!e(t.target).is('input[type="radio"], input[type="checkbox"]')){t.preventDefault();if(n.is("input,button"))n.trigger("focus");else n.find("input:visible,button:visible").first().trigger("focus")}}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery);+function(e){"use strict";var t=function(t,i){this.$element=e(t);this.$indicators=this.$element.find(".carousel-indicators");this.options=i;this.paused=null;this.sliding=null;this.interval=null;this.$active=null;this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this));this.options.pause=="hover"&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};t.VERSION="3.3.7";t.TRANSITION_DURATION=600;t.DEFAULTS={interval:5e3,pause:"hover",wrap:true,keyboard:true};t.prototype.keydown=function(e){if(/input|textarea/i.test(e.target.tagName))return;switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()};t.prototype.cycle=function(t){t||(this.paused=false);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval));return this};t.prototype.getItemIndex=function(e){this.$items=e.parent().children(".item");return this.$items.index(e||this.$active)};t.prototype.getItemForDirection=function(e,t){var i=this.getItemIndex(t);var n=e=="prev"&&i===0||e=="next"&&i==this.$items.length-1;if(n&&!this.options.wrap)return t;var s=e=="prev"?-1:1;var r=(i+s)%this.$items.length;return this.$items.eq(r)};t.prototype.to=function(e){var t=this;var i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(e>this.$items.length-1||e<0)return;if(this.sliding)return this.$element.one("slid.bs.carousel",function(){t.to(e)});if(i==e)return this.pause().cycle();return this.slide(e>i?"next":"prev",this.$items.eq(e))};t.prototype.pause=function(t){t||(this.paused=true);if(this.$element.find(".next, .prev").length&&e.support.transition){this.$element.trigger(e.support.transition.end);this.cycle(true)}this.interval=clearInterval(this.interval);return this};t.prototype.next=function(){if(this.sliding)return;return this.slide("next")};t.prototype.prev=function(){if(this.sliding)return;return this.slide("prev")};t.prototype.slide=function(i,n){var s=this.$element.find(".item.active");var r=n||this.getItemForDirection(i,s);var o=this.interval;var a=i=="next"?"left":"right";var l=this;if(r.hasClass("active"))return this.sliding=false;var h=r[0];var d=e.Event("slide.bs.carousel",{relatedTarget:h,direction:a});this.$element.trigger(d);if(d.isDefaultPrevented())return;this.sliding=true;o&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=e(this.$indicators.children()[this.getItemIndex(r)]);u&&u.addClass("active")}var f=e.Event("slid.bs.carousel",{relatedTarget:h,direction:a});if(e.support.transition&&this.$element.hasClass("slide")){r.addClass(i);r[0].offsetWidth;s.addClass(a);r.addClass(a);s.one("bsTransitionEnd",function(){r.removeClass([i,a].join(" ")).addClass("active");s.removeClass(["active",a].join(" "));l.sliding=false;setTimeout(function(){l.$element.trigger(f)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)}else{s.removeClass("active");r.addClass("active");this.sliding=false;this.$element.trigger(f)}o&&this.cycle();return this};function i(i){return this.each(function(){var n=e(this);var s=n.data("bs.carousel");var r=e.extend({},t.DEFAULTS,n.data(),typeof i=="object"&&i);var o=typeof i=="string"?i:r.slide;if(!s)n.data("bs.carousel",s=new t(this,r));if(typeof i=="number")s.to(i);else if(o)s[o]();else if(r.interval)s.pause().cycle()})}var n=e.fn.carousel;e.fn.carousel=i;e.fn.carousel.Constructor=t;e.fn.carousel.noConflict=function(){e.fn.carousel=n;return this};var s=function(t){var n;var s=e(this);var r=e(s.attr("data-target")||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(!r.hasClass("carousel"))return;var o=e.extend({},r.data(),s.data());var a=s.attr("data-slide-to");if(a)o.interval=false;i.call(r,o);if(a){r.data("bs.carousel").to(a)}t.preventDefault()};e(document).on("click.bs.carousel.data-api","[data-slide]",s).on("click.bs.carousel.data-api","[data-slide-to]",s);e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery);+function(e){"use strict";var t=function(i,n){this.$element=e(i);this.options=e.extend({},t.DEFAULTS,n);this.$trigger=e('[data-toggle="collapse"][href="#'+i.id+'"],'+'[data-toggle="collapse"][data-target="#'+i.id+'"]');this.transitioning=null;if(this.options.parent){this.$parent=this.getParent()}else{this.addAriaAndCollapsedClass(this.$element,this.$trigger)}if(this.options.toggle)this.toggle()};t.VERSION="3.3.7";t.TRANSITION_DURATION=350;t.DEFAULTS={toggle:true};t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"};t.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var i;var s=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(s&&s.length){i=s.data("bs.collapse");if(i&&i.transitioning)return}var r=e.Event("show.bs.collapse");this.$element.trigger(r);if(r.isDefaultPrevented())return;if(s&&s.length){n.call(s,"hide");i||s.data("bs.collapse",null)}var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",true);this.$trigger.removeClass("collapsed").attr("aria-expanded",true);this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return a.call(this);var l=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(a,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[o](this.$element[0][l])};t.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var i=e.Event("hide.bs.collapse");this.$element.trigger(i);if(i.isDefaultPrevented())return;var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",false);this.$trigger.addClass("collapsed").attr("aria-expanded",false);this.transitioning=1;var s=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!e.support.transition)return s.call(this);this.$element[n](0).one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(t.TRANSITION_DURATION)};t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};t.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(t,n){var s=e(n);this.addAriaAndCollapsedClass(i(s),s)},this)).end()};t.prototype.addAriaAndCollapsedClass=function(e,t){var i=e.hasClass("in");e.attr("aria-expanded",i);t.toggleClass("collapsed",!i).attr("aria-expanded",i)};function i(t){var i;var n=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return e(n)}function n(i){return this.each(function(){var n=e(this);var s=n.data("bs.collapse");var r=e.extend({},t.DEFAULTS,n.data(),typeof i=="object"&&i);if(!s&&r.toggle&&/show|hide/.test(i))r.toggle=false;if(!s)n.data("bs.collapse",s=new t(this,r));if(typeof i=="string")s[i]()})}var s=e.fn.collapse;e.fn.collapse=n;e.fn.collapse.Constructor=t;e.fn.collapse.noConflict=function(){e.fn.collapse=s;return this};e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var s=e(this);if(!s.attr("data-target"))t.preventDefault();var r=i(s);var o=r.data("bs.collapse");var a=o?"toggle":s.data();n.call(r,a)})}(jQuery);+function(e){"use strict";var t=".dropdown-backdrop";var i='[data-toggle="dropdown"]';var n=function(t){e(t).on("click.bs.dropdown",this.toggle)};n.VERSION="3.3.7";function s(t){var i=t.attr("data-target");if(!i){i=t.attr("href");i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")}var n=i&&e(i);return n&&n.length?n:t.parent()}function r(n){if(n&&n.which===3)return;e(t).remove();e(i).each(function(){var t=e(this);var i=s(t);var r={relatedTarget:this};if(!i.hasClass("open"))return;if(n&&n.type=="click"&&/input|textarea/i.test(n.target.tagName)&&e.contains(i[0],n.target))return;i.trigger(n=e.Event("hide.bs.dropdown",r));if(n.isDefaultPrevented())return;t.attr("aria-expanded","false");i.removeClass("open").trigger(e.Event("hidden.bs.dropdown",r))})}n.prototype.toggle=function(t){var i=e(this);if(i.is(".disabled, :disabled"))return;var n=s(i);var o=n.hasClass("open");r();if(!o){if("ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length){e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",r)}var a={relatedTarget:this};n.trigger(t=e.Event("show.bs.dropdown",a));if(t.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true");n.toggleClass("open").trigger(e.Event("shown.bs.dropdown",a))}return false};n.prototype.keydown=function(t){if(!/(38|40|27|32)/.test(t.which)||/input|textarea/i.test(t.target.tagName))return;var n=e(this);t.preventDefault();t.stopPropagation();if(n.is(".disabled, :disabled"))return;var r=s(n);var o=r.hasClass("open");if(!o&&t.which!=27||o&&t.which==27){if(t.which==27)r.find(i).trigger("focus");return n.trigger("click")}var a=" li:not(.disabled):visible a";var l=r.find(".dropdown-menu"+a);if(!l.length)return;var h=l.index(t.target);if(t.which==38&&h>0)h--;if(t.which==40&&h<l.length-1)h++;if(!~h)h=0;l.eq(h).trigger("focus")};function o(t){return this.each(function(){var i=e(this);var s=i.data("bs.dropdown");if(!s)i.data("bs.dropdown",s=new n(this));if(typeof t=="string")s[t].call(i)})}var a=e.fn.dropdown;e.fn.dropdown=o;e.fn.dropdown.Constructor=n;e.fn.dropdown.noConflict=function(){e.fn.dropdown=a;return this};e(document).on("click.bs.dropdown.data-api",r).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",i,n.prototype.toggle).on("keydown.bs.dropdown.data-api",i,n.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",n.prototype.keydown)}(jQuery);+function(e){"use strict";var t=function(t,i){this.options=i;this.$body=e(document.body);this.$element=e(t);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=false;if(this.options.remote){this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}};t.VERSION="3.3.7";t.TRANSITION_DURATION=300;t.BACKDROP_TRANSITION_DURATION=150;t.DEFAULTS={backdrop:true,keyboard:true,show:true};t.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)};t.prototype.show=function(i){var n=this;var s=e.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(s);if(this.isShown||s.isDefaultPrevented())return;this.isShown=true;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this));this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(t){if(e(t.target).is(n.$element))n.ignoreBackdropClick=true})});this.backdrop(function(){var s=e.support.transition&&n.$element.hasClass("fade");if(!n.$element.parent().length){n.$element.appendTo(n.$body)}n.$element.show().scrollTop(0);n.adjustDialog();if(s){n.$element[0].offsetWidth}n.$element.addClass("in");n.enforceFocus();var r=e.Event("shown.bs.modal",{relatedTarget:i});s?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(t.TRANSITION_DURATION):n.$element.trigger("focus").trigger(r)})};t.prototype.hide=function(i){if(i)i.preventDefault();i=e.Event("hide.bs.modal");this.$element.trigger(i);if(!this.isShown||i.isDefaultPrevented())return;this.isShown=false;this.escape();this.resize();e(document).off("focusin.bs.modal");this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal");this.$dialog.off("mousedown.dismiss.bs.modal");e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal()};t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){if(document!==e.target&&this.$element[0]!==e.target&&!this.$element.has(e.target).length){this.$element.trigger("focus")}},this))};t.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){e.which==27&&this.hide()},this))}else if(!this.isShown){this.$element.off("keydown.dismiss.bs.modal")}};t.prototype.resize=function(){if(this.isShown){e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this))}else{e(window).off("resize.bs.modal")}};t.prototype.hideModal=function(){var e=this;this.$element.hide();this.backdrop(function(){e.$body.removeClass("modal-open");e.resetAdjustments();e.resetScrollbar();e.$element.trigger("hidden.bs.modal")})};t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};t.prototype.backdrop=function(i){var n=this;var s=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=e.support.transition&&s;this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+s).appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){if(this.ignoreBackdropClick){this.ignoreBackdropClick=false;return}if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus():this.hide()},this));if(r)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");if(!i)return;r?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):i()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){n.removeBackdrop();i&&i()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):o()}else if(i){i()}};t.prototype.handleUpdate=function(){this.adjustDialog()};t.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})};t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};t.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e;this.scrollbarWidth=this.measureScrollbar()};t.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";if(this.bodyIsOverflowing)this.$body.css("padding-right",e+this.scrollbarWidth)};t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};t.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure";this.$body.append(e);var t=e.offsetWidth-e.clientWidth;this.$body[0].removeChild(e);return t};function i(i,n){return this.each(function(){var s=e(this);var r=s.data("bs.modal");var o=e.extend({},t.DEFAULTS,s.data(),typeof i=="object"&&i);if(!r)s.data("bs.modal",r=new t(this,o));if(typeof i=="string")r[i](n);else if(o.show)r.show(n)})}var n=e.fn.modal;e.fn.modal=i;e.fn.modal.Constructor=t;e.fn.modal.noConflict=function(){e.fn.modal=n;return this};e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this);var s=n.attr("href");var r=e(n.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,""));var o=r.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(s)&&s},r.data(),n.data());if(n.is("a"))t.preventDefault();r.one("show.bs.modal",function(e){if(e.isDefaultPrevented())return;r.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})});i.call(r,o,this)})}(jQuery);+function(e){"use strict";var t=function(e,t){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.inState=null;this.init("tooltip",e,t)};t.VERSION="3.3.7";t.TRANSITION_DURATION=150;t.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0}};t.prototype.init=function(t,i,n){this.enabled=true;this.type=t;this.$element=e(i);this.options=this.getOptions(n);this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport);this.inState={click:false,hover:false,focus:false};if(this.$element[0]instanceof document.constructor&&!this.options.selector){throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!")}var s=this.options.trigger.split(" ");for(var r=s.length;r--;){var o=s[r];if(o=="click"){this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));
}else if(o!="manual"){var a=o=="hover"?"mouseenter":"focusin";var l=o=="hover"?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.enter,this));this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.getOptions=function(t){t=e.extend({},this.getDefaults(),this.$element.data(),t);if(t.delay&&typeof t.delay=="number"){t.delay={show:t.delay,hide:t.delay}}return t};t.prototype.getDelegateOptions=function(){var t={};var i=this.getDefaults();this._options&&e.each(this._options,function(e,n){if(i[e]!=n)t[e]=n});return t};t.prototype.enter=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(!i){i=new this.constructor(t.currentTarget,this.getDelegateOptions());e(t.currentTarget).data("bs."+this.type,i)}if(t instanceof e.Event){i.inState[t.type=="focusin"?"focus":"hover"]=true}if(i.tip().hasClass("in")||i.hoverState=="in"){i.hoverState="in";return}clearTimeout(i.timeout);i.hoverState="in";if(!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout(function(){if(i.hoverState=="in")i.show()},i.options.delay.show)};t.prototype.isInStateTrue=function(){for(var e in this.inState){if(this.inState[e])return true}return false};t.prototype.leave=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(!i){i=new this.constructor(t.currentTarget,this.getDelegateOptions());e(t.currentTarget).data("bs."+this.type,i)}if(t instanceof e.Event){i.inState[t.type=="focusout"?"focus":"hover"]=false}if(i.isInStateTrue())return;clearTimeout(i.timeout);i.hoverState="out";if(!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){if(i.hoverState=="out")i.hide()},i.options.delay.hide)};t.prototype.show=function(){var i=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(i);var n=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(i.isDefaultPrevented()||!n)return;var s=this;var r=this.tip();var o=this.getUID(this.type);this.setContent();r.attr("id",o);this.$element.attr("aria-describedby",o);if(this.options.animation)r.addClass("fade");var a=typeof this.options.placement=="function"?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement;var l=/\s?auto?\s?/i;var h=l.test(a);if(h)a=a.replace(l,"")||"top";r.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this);this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);var d=this.getPosition();var u=r[0].offsetWidth;var f=r[0].offsetHeight;if(h){var c=a;var p=this.getPosition(this.$viewport);a=a=="bottom"&&d.bottom+f>p.bottom?"top":a=="top"&&d.top-f<p.top?"bottom":a=="right"&&d.right+u>p.width?"left":a=="left"&&d.left-u<p.left?"right":a;r.removeClass(c).addClass(a)}var m=this.getCalculatedOffset(a,d,u,f);this.applyPlacement(m,a);var v=function(){var e=s.hoverState;s.$element.trigger("shown.bs."+s.type);s.hoverState=null;if(e=="out")s.leave(s)};e.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",v).emulateTransitionEnd(t.TRANSITION_DURATION):v()}};t.prototype.applyPlacement=function(t,i){var n=this.tip();var s=n[0].offsetWidth;var r=n[0].offsetHeight;var o=parseInt(n.css("margin-top"),10);var a=parseInt(n.css("margin-left"),10);if(isNaN(o))o=0;if(isNaN(a))a=0;t.top+=o;t.left+=a;e.offset.setOffset(n[0],e.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0);n.addClass("in");var l=n[0].offsetWidth;var h=n[0].offsetHeight;if(i=="top"&&h!=r){t.top=t.top+r-h}var d=this.getViewportAdjustedDelta(i,t,l,h);if(d.left)t.left+=d.left;else t.top+=d.top;var u=/top|bottom/.test(i);var f=u?d.left*2-s+l:d.top*2-r+h;var c=u?"offsetWidth":"offsetHeight";n.offset(t);this.replaceArrow(f,n[0][c],u)};t.prototype.replaceArrow=function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")};t.prototype.setContent=function(){var e=this.tip();var t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t);e.removeClass("fade in top bottom left right")};t.prototype.hide=function(i){var n=this;var s=e(this.$tip);var r=e.Event("hide.bs."+this.type);function o(){if(n.hoverState!="in")s.detach();if(n.$element){n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type)}i&&i()}this.$element.trigger(r);if(r.isDefaultPrevented())return;s.removeClass("in");e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",o).emulateTransitionEnd(t.TRANSITION_DURATION):o();this.hoverState=null;return this};t.prototype.fixTitle=function(){var e=this.$element;if(e.attr("title")||typeof e.attr("data-original-title")!="string"){e.attr("data-original-title",e.attr("title")||"").attr("title","")}};t.prototype.hasContent=function(){return this.getTitle()};t.prototype.getPosition=function(t){t=t||this.$element;var i=t[0];var n=i.tagName=="BODY";var s=i.getBoundingClientRect();if(s.width==null){s=e.extend({},s,{width:s.right-s.left,height:s.bottom-s.top})}var r=window.SVGElement&&i instanceof window.SVGElement;var o=n?{top:0,left:0}:r?null:t.offset();var a={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()};var l=n?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},s,a,l,o)};t.prototype.getCalculatedOffset=function(e,t,i,n){return e=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-i/2}:e=="top"?{top:t.top-n,left:t.left+t.width/2-i/2}:e=="left"?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}};t.prototype.getViewportAdjustedDelta=function(e,t,i,n){var s={top:0,left:0};if(!this.$viewport)return s;var r=this.options.viewport&&this.options.viewport.padding||0;var o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var a=t.top-r-o.scroll;var l=t.top+r-o.scroll+n;if(a<o.top){s.top=o.top-a}else if(l>o.top+o.height){s.top=o.top+o.height-l}}else{var h=t.left-r;var d=t.left+r+i;if(h<o.left){s.left=o.left-h}else if(d>o.right){s.left=o.left+o.width-d}}return s};t.prototype.getTitle=function(){var e;var t=this.$element;var i=this.options;e=t.attr("data-original-title")||(typeof i.title=="function"?i.title.call(t[0]):i.title);return e};t.prototype.getUID=function(e){do e+=~~(Math.random()*1e6);while(document.getElementById(e));return e};t.prototype.tip=function(){if(!this.$tip){this.$tip=e(this.options.template);if(this.$tip.length!=1){throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")}}return this.$tip};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};t.prototype.enable=function(){this.enabled=true};t.prototype.disable=function(){this.enabled=false};t.prototype.toggleEnabled=function(){this.enabled=!this.enabled};t.prototype.toggle=function(t){var i=this;if(t){i=e(t.currentTarget).data("bs."+this.type);if(!i){i=new this.constructor(t.currentTarget,this.getDelegateOptions());e(t.currentTarget).data("bs."+this.type,i)}}if(t){i.inState.click=!i.inState.click;if(i.isInStateTrue())i.enter(i);else i.leave(i)}else{i.tip().hasClass("in")?i.leave(i):i.enter(i)}};t.prototype.destroy=function(){var e=this;clearTimeout(this.timeout);this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type);if(e.$tip){e.$tip.detach()}e.$tip=null;e.$arrow=null;e.$viewport=null;e.$element=null})};function i(i){return this.each(function(){var n=e(this);var s=n.data("bs.tooltip");var r=typeof i=="object"&&i;if(!s&&/destroy|hide/.test(i))return;if(!s)n.data("bs.tooltip",s=new t(this,r));if(typeof i=="string")s[i]()})}var n=e.fn.tooltip;e.fn.tooltip=i;e.fn.tooltip.Constructor=t;e.fn.tooltip.noConflict=function(){e.fn.tooltip=n;return this}}(jQuery);+function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.7";t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype);t.prototype.constructor=t;t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.setContent=function(){var e=this.tip();var t=this.getTitle();var i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t);e.find(".popover-content").children().detach().end()[this.options.html?typeof i=="string"?"html":"append":"text"](i);e.removeClass("fade top bottom left right in");if(!e.find(".popover-title").html())e.find(".popover-title").hide()};t.prototype.hasContent=function(){return this.getTitle()||this.getContent()};t.prototype.getContent=function(){var e=this.$element;var t=this.options;return e.attr("data-content")||(typeof t.content=="function"?t.content.call(e[0]):t.content)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};function i(i){return this.each(function(){var n=e(this);var s=n.data("bs.popover");var r=typeof i=="object"&&i;if(!s&&/destroy|hide/.test(i))return;if(!s)n.data("bs.popover",s=new t(this,r));if(typeof i=="string")s[i]()})}var n=e.fn.popover;e.fn.popover=i;e.fn.popover.Constructor=t;e.fn.popover.noConflict=function(){e.fn.popover=n;return this}}(jQuery);+function(e){"use strict";function t(i,n){this.$body=e(document.body);this.$scrollElement=e(i).is(document.body)?e(window):e(i);this.options=e.extend({},t.DEFAULTS,n);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this));this.refresh();this.process()}t.VERSION="3.3.7";t.DEFAULTS={offset:10};t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};t.prototype.refresh=function(){var t=this;var i="offset";var n=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();if(!e.isWindow(this.$scrollElement[0])){i="position";n=this.$scrollElement.scrollTop()}this.$body.find(this.selector).map(function(){var t=e(this);var s=t.data("target")||t.attr("href");var r=/^#./.test(s)&&e(s);return r&&r.length&&r.is(":visible")&&[[r[i]().top+n,s]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]);t.targets.push(this[1])})};t.prototype.process=function(){var e=this.$scrollElement.scrollTop()+this.options.offset;var t=this.getScrollHeight();var i=this.options.offset+t-this.$scrollElement.height();var n=this.offsets;var s=this.targets;var r=this.activeTarget;var o;if(this.scrollHeight!=t){this.refresh()}if(e>=i){return r!=(o=s[s.length-1])&&this.activate(o)}if(r&&e<n[0]){this.activeTarget=null;return this.clear()}for(o=n.length;o--;){r!=s[o]&&e>=n[o]&&(n[o+1]===undefined||e<n[o+1])&&this.activate(s[o])}};t.prototype.activate=function(t){this.activeTarget=t;this.clear();var i=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]';var n=e(i).parents("li").addClass("active");if(n.parent(".dropdown-menu").length){n=n.closest("li.dropdown").addClass("active")}n.trigger("activate.bs.scrollspy")};t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};function i(i){return this.each(function(){var n=e(this);var s=n.data("bs.scrollspy");var r=typeof i=="object"&&i;if(!s)n.data("bs.scrollspy",s=new t(this,r));if(typeof i=="string")s[i]()})}var n=e.fn.scrollspy;e.fn.scrollspy=i;e.fn.scrollspy.Constructor=t;e.fn.scrollspy.noConflict=function(){e.fn.scrollspy=n;return this};e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery);+function(e){"use strict";var t=function(t){this.element=e(t)};t.VERSION="3.3.7";t.TRANSITION_DURATION=150;t.prototype.show=function(){var t=this.element;var i=t.closest("ul:not(.dropdown-menu)");var n=t.data("target");if(!n){n=t.attr("href");n=n&&n.replace(/.*(?=#[^\s]*$)/,"")}if(t.parent("li").hasClass("active"))return;var s=i.find(".active:last a");var r=e.Event("hide.bs.tab",{relatedTarget:t[0]});var o=e.Event("show.bs.tab",{relatedTarget:s[0]});s.trigger(r);t.trigger(o);if(o.isDefaultPrevented()||r.isDefaultPrevented())return;var a=e(n);this.activate(t.closest("li"),i);this.activate(a,a.parent(),function(){s.trigger({type:"hidden.bs.tab",relatedTarget:t[0]});t.trigger({type:"shown.bs.tab",relatedTarget:s[0]})})};t.prototype.activate=function(i,n,s){var r=n.find("> .active");var o=s&&e.support.transition&&(r.length&&r.hasClass("fade")||!!n.find("> .fade").length);function a(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",false);i.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",true);if(o){i[0].offsetWidth;i.addClass("in")}else{i.removeClass("fade")}if(i.parent(".dropdown-menu").length){i.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",true)}s&&s()}r.length&&o?r.one("bsTransitionEnd",a).emulateTransitionEnd(t.TRANSITION_DURATION):a();r.removeClass("in")};function i(i){return this.each(function(){var n=e(this);var s=n.data("bs.tab");if(!s)n.data("bs.tab",s=new t(this));if(typeof i=="string")s[i]()})}var n=e.fn.tab;e.fn.tab=i;e.fn.tab.Constructor=t;e.fn.tab.noConflict=function(){e.fn.tab=n;return this};var s=function(t){t.preventDefault();i.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',s).on("click.bs.tab.data-api",'[data-toggle="pill"]',s)}(jQuery);+function(e){"use strict";var t=function(i,n){this.options=e.extend({},t.DEFAULTS,n);this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this));this.$element=e(i);this.affixed=null;this.unpin=null;this.pinnedOffset=null;this.checkPosition()};t.VERSION="3.3.7";t.RESET="affix affix-top affix-bottom";t.DEFAULTS={offset:0,target:window};t.prototype.getState=function(e,t,i,n){var s=this.$target.scrollTop();var r=this.$element.offset();var o=this.$target.height();if(i!=null&&this.affixed=="top")return s<i?"top":false;if(this.affixed=="bottom"){if(i!=null)return s+this.unpin<=r.top?false:"bottom";return s+o<=e-n?false:"bottom"}var a=this.affixed==null;var l=a?s:r.top;var h=a?o:t;if(i!=null&&s<=i)return"top";if(n!=null&&l+h>=e-n)return"bottom";return false};t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$target.scrollTop();var i=this.$element.offset();return this.pinnedOffset=i.top-e};t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)};t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var i=this.$element.height();var n=this.options.offset;var s=n.top;var r=n.bottom;var o=Math.max(e(document).height(),e(document.body).height());if(typeof n!="object")r=s=n;if(typeof s=="function")s=n.top(this.$element);if(typeof r=="function")r=n.bottom(this.$element);var a=this.getState(o,i,s,r);if(this.affixed!=a){if(this.unpin!=null)this.$element.css("top","");var l="affix"+(a?"-"+a:"");var h=e.Event(l+".bs.affix");this.$element.trigger(h);if(h.isDefaultPrevented())return;this.affixed=a;this.unpin=a=="bottom"?this.getPinnedOffset():null;this.$element.removeClass(t.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}if(a=="bottom"){this.$element.offset({top:o-i-r})}};function i(i){return this.each(function(){var n=e(this);var s=n.data("bs.affix");var r=typeof i=="object"&&i;if(!s)n.data("bs.affix",s=new t(this,r));if(typeof i=="string")s[i]()})}var n=e.fn.affix;e.fn.affix=i;e.fn.affix.Constructor=t;e.fn.affix.noConflict=function(){e.fn.affix=n;return this};e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this);var n=t.data();n.offset=n.offset||{};if(n.offsetBottom!=null)n.offset.bottom=n.offsetBottom;if(n.offsetTop!=null)n.offset.top=n.offsetTop;i.call(t,n)})})}(jQuery);(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof module==="object"&&module.exports){module.exports=e(require("jquery"))}else{e(window.jQuery)}})(function($){"use strict";var isSupportAmd=typeof define==="function"&&define.amd;var isFontInstalled=function(e){var t=e==="Comic Sans MS"?"Courier New":"Comic Sans MS";var i=$("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body);var n=i.css("fontFamily",t).width();var s=i.css("fontFamily",e+","+t).width();i.remove();return n!==s};var userAgent=navigator.userAgent;var isMSIE=/MSIE|Trident/i.test(userAgent);var browserVersion;if(isMSIE){var matches=/MSIE (\d+[.]\d+)/.exec(userAgent);if(matches){browserVersion=parseFloat(matches[1])}matches=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(userAgent);if(matches){browserVersion=parseFloat(matches[1])}}var isEdge=/Edge\/\d+/.test(userAgent);var hasCodeMirror=!!window.CodeMirror;if(!hasCodeMirror&&isSupportAmd&&typeof require!=="undefined"){if(typeof require.resolve!=="undefined"){try{require.resolve("codemirror");hasCodeMirror=true}catch(e){}}else if(typeof eval("require").specified!=="undefined"){hasCodeMirror=eval("require").specified("codemirror")}}var isSupportTouch="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0;var agent={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:isMSIE,isEdge:isEdge,isFF:!isEdge&&/firefox/i.test(userAgent),isPhantom:/PhantomJS/i.test(userAgent),isWebkit:!isEdge&&/webkit/i.test(userAgent),isChrome:!isEdge&&/chrome/i.test(userAgent),isSafari:!isEdge&&/safari/i.test(userAgent),browserVersion:browserVersion,jqueryVersion:parseFloat($.fn.jquery),isSupportAmd:isSupportAmd,isSupportTouch:isSupportTouch,hasCodeMirror:hasCodeMirror,isFontInstalled:isFontInstalled,isW3CRangeSupport:!!document.createRange};var func=function(){var e=function(e){return function(t){return e===t}};var t=function(e,t){return e===t};var i=function(e){return function(t,i){return t[e]===i[e]}};var n=function(){return true};var s=function(){return false};var r=function(e){return function(){return!e.apply(e,arguments)}};var o=function(e,t){return function(i){return e(i)&&t(i)}};var a=function(e){return e};var l=function(e,t){return function(){return e[t].apply(e,arguments)}};var h=0;var d=function(e){var t=++h+"";return e?e+t:t};var u=function(e){var t=$(document);return{top:e.top+t.scrollTop(),left:e.left+t.scrollLeft(),width:e.right-e.left,height:e.bottom-e.top}};var f=function(e){var t={};for(var i in e){if(e.hasOwnProperty(i)){t[e[i]]=i}}return t};var c=function(e,t){t=t||"";return t+e.split(".").map(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}).join("")};var p=function(e,t,i){var n;return function(){var s=this,r=arguments;var o=function(){n=null;if(!i){e.apply(s,r)}};var a=i&&!n;clearTimeout(n);n=setTimeout(o,t);if(a){e.apply(s,r)}}};return{eq:e,eq2:t,peq2:i,ok:n,fail:s,self:a,not:r,and:o,invoke:l,uniqueId:d,rect2bnd:u,invertObject:f,namespaceToCamel:c,debounce:p}}();var list=function(){var e=function(e){return e[0]};var t=function(e){return e[e.length-1]};var i=function(e){return e.slice(0,e.length-1)};var n=function(e){return e.slice(1)};var s=function(e,t){for(var i=0,n=e.length;i<n;i++){var s=e[i];if(t(s)){return s}}};var r=function(e,t){for(var i=0,n=e.length;i<n;i++){if(!t(e[i])){return false}}return true};var o=function(e,t){return $.inArray(t,e)};var a=function(e,t){return o(e,t)!==-1};var l=function(e,t){t=t||func.self;return e.reduce(function(e,i){return e+t(i)},0)};var h=function(e){var t=[],i=-1,n=e.length;while(++i<n){t[i]=e[i]}return t};var d=function(e){return!e||!e.length};var u=function(i,s){if(!i.length){return[]}var r=n(i);return r.reduce(function(e,i){var n=t(e);if(s(t(n),i)){n[n.length]=i}else{e[e.length]=[i]}return e},[[e(i)]])};var f=function(e){var t=[];for(var i=0,n=e.length;i<n;i++){if(e[i]){t.push(e[i])}}return t};var c=function(e){var t=[];for(var i=0,n=e.length;i<n;i++){if(!a(t,e[i])){t.push(e[i])}}return t};var p=function(e,t){var i=o(e,t);if(i===-1){return null}return e[i+1]};var m=function(e,t){var i=o(e,t);if(i===-1){return null}return e[i-1]};return{head:e,last:t,initial:i,tail:n,prev:m,next:p,find:s,contains:a,all:r,sum:l,from:h,isEmpty:d,clusterBy:u,compact:f,unique:c}}();var NBSP_CHAR=String.fromCharCode(160);var ZERO_WIDTH_NBSP_CHAR="\ufeff";var dom=function(){var e=function(e){return e&&$(e).hasClass("note-editable")};var t=function(e){return e&&$(e).hasClass("note-control-sizing")};var i=function(e){e=e.toUpperCase();return function(t){return t&&t.nodeName.toUpperCase()===e}};var n=function(e){return e&&e.nodeType===3};var s=function(e){return e&&e.nodeType===1};var r=function(e){return e&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(e.nodeName.toUpperCase())};var o=function(t){if(e(t)){return false}return t&&/^DIV|^P|^LI|^H[1-7]/.test(t.nodeName.toUpperCase())};var a=function(e){return e&&/^H[1-7]/.test(e.nodeName.toUpperCase())};var l=i("PRE");var h=i("LI");var d=function(e){return o(e)&&!h(e)};var u=i("TABLE");var f=i("DATA");var c=function(e){return!y(e)&&!p(e)&&!m(e)&&!o(e)&&!u(e)&&!g(e)&&!f(e)};var p=function(e){return e&&/^UL|^OL/.test(e.nodeName.toUpperCase())};var m=i("HR");var v=function(e){return e&&/^TD|^TH/.test(e.nodeName.toUpperCase())};var g=i("BLOCKQUOTE");var y=function(t){return v(t)||g(t)||e(t)};var b=i("A");var w=function(e){return c(e)&&!!E(e,o)};var _=function(e){return c(e)&&!E(e,o)};var x=i("BODY");var k=function(e,t){return e.nextSibling===t||e.previousSibling===t};var C=function(e,t){t=t||func.ok;var i=[];if(e.previousSibling&&t(e.previousSibling)){i.push(e.previousSibling)}i.push(e);if(e.nextSibling&&t(e.nextSibling)){i.push(e.nextSibling)}return i};var S=agent.isMSIE&&agent.browserVersion<11?"&nbsp;":"<br>";var T=function(e){if(n(e)){return e.nodeValue.length}if(e){return e.childNodes.length}return 0};var M=function(e){var t=T(e);if(t===0){return true}else if(!n(e)&&t===1&&e.innerHTML===S){return true}else if(list.all(e.childNodes,n)&&e.innerHTML===""){return true}return false};var D=function(e){if(!r(e)&&!T(e)){e.innerHTML=S}};var E=function(t,i){while(t){if(i(t)){return t}if(e(t)){break}t=t.parentNode}return null};var O=function(t,i){t=t.parentNode;while(t){if(T(t)!==1){break}if(i(t)){return t}if(e(t)){break}t=t.parentNode}return null};var P=function(t,i){i=i||func.fail;var n=[];E(t,function(t){if(!e(t)){n.push(t)}return i(t)});return n};var I=function(e,t){var i=P(e);return list.last(i.filter(t))};var A=function(e,t){var i=P(e);for(var n=t;n;n=n.parentNode){if($.inArray(n,i)>-1){return n}}return null};var N=function(e,t){t=t||func.fail;var i=[];while(e){if(t(e)){break}i.push(e);e=e.previousSibling}return i};var F=function(e,t){t=t||func.fail;var i=[];while(e){if(t(e)){break}i.push(e);e=e.nextSibling}return i};var R=function(e,t){var i=[];t=t||func.ok;(function n(s){if(e!==s&&t(s)){i.push(s)}for(var r=0,o=s.childNodes.length;r<o;r++){n(s.childNodes[r])}})(e);return i};var L=function(e,t){var i=e.parentNode;var n=$("<"+t+">")[0];i.insertBefore(n,e);n.appendChild(e);return n};var z=function(e,t){var i=t.nextSibling,n=t.parentNode;if(i){n.insertBefore(e,i)}else{n.appendChild(e)}return e};var j=function(e,t){$.each(t,function(t,i){e.appendChild(i)});return e};var H=function(e){return e.offset===0};var B=function(e){return e.offset===T(e.node)};var U=function(e){return H(e)||B(e)};var W=function(e,t){while(e&&e!==t){if(G(e)!==0){return false}e=e.parentNode}return true};var Y=function(e,t){if(!t){return false}while(e&&e!==t){if(G(e)!==T(e.parentNode)-1){return false}e=e.parentNode}return true};var V=function(e,t){return H(e)&&W(e.node,t)};var q=function(e,t){return B(e)&&Y(e.node,t)};var G=function(e){var t=0;while(e=e.previousSibling){t+=1}return t};var X=function(e){return!!(e&&e.childNodes&&e.childNodes.length)};var Z=function(t,i){var n,s;if(t.offset===0){if(e(t.node)){return null}n=t.node.parentNode;s=G(t.node)}else if(X(t.node)){n=t.node.childNodes[t.offset-1];s=T(n)}else{n=t.node;s=i?0:t.offset-1}return{node:n,offset:s}};var K=function(t,i){var n,s;if(T(t.node)===t.offset){if(e(t.node)){return null}n=t.node.parentNode;s=G(t.node)+1}else if(X(t.node)){n=t.node.childNodes[t.offset];s=0}else{n=t.node;s=i?T(t.node):t.offset+1}return{node:n,offset:s}};var Q=function(e,t){return e.node===t.node&&e.offset===t.offset};var J=function(e){if(n(e.node)||!X(e.node)||M(e.node)){return true}var t=e.node.childNodes[e.offset-1];var i=e.node.childNodes[e.offset];if((!t||r(t))&&(!i||r(i))){return true}return false};var ee=function(e,t){while(e){if(t(e)){return e}e=Z(e)}return null};var te=function(e,t){while(e){if(t(e)){return e}e=K(e)}return null};var ie=function(e){if(!n(e.node)){return false}var t=e.node.nodeValue.charAt(e.offset-1);return t&&(t!==" "&&t!==NBSP_CHAR)};var ne=function(e,t,i,n){var s=e;while(s){i(s);if(Q(s,t)){break}var r=n&&e.node!==s.node&&t.node!==s.node;s=K(s,r)}};var se=function(e,t){var i=P(t,func.eq(e));return i.map(G).reverse()};var re=function(e,t){var i=e;for(var n=0,s=t.length;n<s;n++){if(i.childNodes.length<=t[n]){i=i.childNodes[i.childNodes.length-1]}else{i=i.childNodes[t[n]]}}return i};var oe=function(e,t){var i=t&&t.isSkipPaddingBlankHTML;var s=t&&t.isNotSplitEdgePoint;if(U(e)&&(n(e.node)||s)){if(H(e)){return e.node}else if(B(e)){return e.node.nextSibling}}if(n(e.node)){return e.node.splitText(e.offset)}else{var r=e.node.childNodes[e.offset];var o=z(e.node.cloneNode(false),e.node);j(o,F(r));if(!i){D(e.node);D(o)}return o}};var ae=function(e,t,i){var n=P(t.node,func.eq(e));if(!n.length){return null}else if(n.length===1){return oe(t,i)}return n.reduce(function(e,n){if(e===t.node){e=oe(t,i)}return oe({node:n,offset:e?dom.position(e):T(n)},i)})};var le=function(e,t){var i=t?o:y;var n=P(e.node,i);var s=list.last(n)||e.node;var r,a;if(i(s)){r=n[n.length-2];a=s}else{r=s;a=r.parentNode}var l=r&&ae(r,e,{isSkipPaddingBlankHTML:t,isNotSplitEdgePoint:t});if(!l&&a===e.node){l=e.node.childNodes[e.offset]}return{rightNode:l,container:a}};var he=function(e){return document.createElement(e)};var de=function(e){return document.createTextNode(e)};var ue=function(e,t){if(!e||!e.parentNode){return}if(e.removeNode){return e.removeNode(t)}var i=e.parentNode;if(!t){var n=[];var s,r;for(s=0,r=e.childNodes.length;s<r;s++){n.push(e.childNodes[s])}for(s=0,r=n.length;s<r;s++){i.insertBefore(n[s],e)}}i.removeChild(e)};var fe=function(t,i){while(t){if(e(t)||!i(t)){break}var n=t.parentNode;ue(t);t=n}};var ce=function(e,t){if(e.nodeName.toUpperCase()===t.toUpperCase()){return e}var i=he(t);if(e.style.cssText){i.style.cssText=e.style.cssText}j(i,list.from(e.childNodes));z(i,e);ue(e);return i};var pe=i("TEXTAREA");var me=function(e,t){var i=pe(e[0])?e.val():e.html();if(t){return i.replace(/[\n\r]/g,"")}return i};var ve=function(e,t){var i=me(e);if(t){var n=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;i=i.replace(n,function(e,t,i){i=i.toUpperCase();var n=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(i)&&!!t;var s=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(i);return e+(n||s?"\n":"")});i=$.trim(i)}return i};var ge=function(e){var t=$(e);var i=t.offset();var n=t.outerHeight(true);return{left:i.left,top:i.top+n}};var ye=function(e,t){Object.keys(t).forEach(function(i){e.on(i,t[i])})};var be=function(e,t){Object.keys(t).forEach(function(i){e.off(i,t[i])})};var we=function(e){return e&&!dom.isText(e)&&list.contains(e.classList,"note-styletag")};return{NBSP_CHAR:NBSP_CHAR,ZERO_WIDTH_NBSP_CHAR:ZERO_WIDTH_NBSP_CHAR,blank:S,emptyPara:"<p>"+S+"</p>",makePredByNodeName:i,isEditable:e,isControlSizing:t,isText:n,isElement:s,isVoid:r,isPara:o,isPurePara:d,isHeading:a,isInline:c,isBlock:func.not(c),isBodyInline:_,isBody:x,isParaInline:w,isPre:l,isList:p,isTable:u,isData:f,isCell:v,isBlockquote:g,isBodyContainer:y,isAnchor:b,isDiv:i("DIV"),isLi:h,isBR:i("BR"),isSpan:i("SPAN"),isB:i("B"),isU:i("U"),isS:i("S"),isI:i("I"),isImg:i("IMG"),isTextarea:pe,isEmpty:M,isEmptyAnchor:func.and(b,M),isClosestSibling:k,withClosestSiblings:C,nodeLength:T,isLeftEdgePoint:H,isRightEdgePoint:B,isEdgePoint:U,isLeftEdgeOf:W,isRightEdgeOf:Y,isLeftEdgePointOf:V,isRightEdgePointOf:q,prevPoint:Z,nextPoint:K,isSamePoint:Q,isVisiblePoint:J,prevPointUntil:ee,nextPointUntil:te,isCharPoint:ie,walkPoint:ne,ancestor:E,singleChildAncestor:O,listAncestor:P,lastAncestor:I,listNext:F,listPrev:N,listDescendant:R,commonAncestor:A,wrap:L,insertAfter:z,appendChildNodes:j,position:G,hasChildren:X,makeOffsetPath:se,fromOffsetPath:re,splitTree:ae,splitPoint:le,create:he,createText:de,remove:ue,removeWhile:fe,replace:ce,html:ve,value:me,posFromPlaceholder:ge,attachEvents:ye,detachEvents:be,isCustomStyleTag:we}}();var Context=function(e,t){var i=this;var n=$.summernote.ui;this.memos={};this.modules={};this.layoutInfo={};this.options=t;this.initialize=function(){this.layoutInfo=n.createLayout(e,t);this._initialize();e.hide();return this};this.destroy=function(){this._destroy();e.removeData("summernote");n.removeLayout(e,this.layoutInfo)};this.reset=function(){var e=i.isDisabled();this.code(dom.emptyPara);this._destroy();this._initialize();if(e){i.disable()}};this._initialize=function(){var e=$.extend({},this.options.buttons);Object.keys(e).forEach(function(t){i.memo("button."+t,e[t])});var t=$.extend({},this.options.modules,$.summernote.plugins||{});Object.keys(t).forEach(function(e){i.module(e,t[e],true)});Object.keys(this.modules).forEach(function(e){i.initializeModule(e)})};this._destroy=function(){Object.keys(this.modules).reverse().forEach(function(e){i.removeModule(e)});Object.keys(this.memos).forEach(function(e){i.removeMemo(e)});this.triggerEvent("destroy",this)};this.code=function(t){var i=this.invoke("codeview.isActivated");if(t===undefined){this.invoke("codeview.sync");return i?this.layoutInfo.codable.val():this.layoutInfo.editable.html()}else{if(i){this.layoutInfo.codable.val(t)}else{this.layoutInfo.editable.html(t)}e.val(t);this.triggerEvent("change",t)}};this.isDisabled=function(){return this.layoutInfo.editable.attr("contenteditable")==="false"};this.enable=function(){this.layoutInfo.editable.attr("contenteditable",true);this.invoke("toolbar.activate",true)};this.disable=function(){if(this.invoke("codeview.isActivated")){this.invoke("codeview.deactivate")}this.layoutInfo.editable.attr("contenteditable",false);this.invoke("toolbar.deactivate",true)};this.triggerEvent=function(){var t=list.head(arguments);var i=list.tail(list.from(arguments));var n=this.options.callbacks[func.namespaceToCamel(t,"on")];if(n){n.apply(e[0],i)}e.trigger("summernote."+t,i)};this.initializeModule=function(t){var i=this.modules[t];i.shouldInitialize=i.shouldInitialize||func.ok;if(!i.shouldInitialize()){return}if(i.initialize){i.initialize()}if(i.events){dom.attachEvents(e,i.events)}};this.module=function(e,t,i){if(arguments.length===1){return this.modules[e]}this.modules[e]=new t(this);if(!i){this.initializeModule(e)}};this.removeModule=function(t){var i=this.modules[t];if(i.shouldInitialize()){if(i.events){dom.detachEvents(e,i.events)}if(i.destroy){i.destroy()}}delete this.modules[t]};this.memo=function(e,t){if(arguments.length===1){return this.memos[e]}this.memos[e]=t};this.removeMemo=function(e){if(this.memos[e]&&this.memos[e].destroy){this.memos[e].destroy()}delete this.memos[e]};this.createInvokeHandlerAndUpdateState=function(e,t){return function(n){i.createInvokeHandler(e,t)(n);i.invoke("buttons.updateCurrentStyle")}};this.createInvokeHandler=function(e,t){return function(n){n.preventDefault();
var s=$(n.target);i.invoke(e,t||s.closest("[data-value]").data("value"),s)}};this.invoke=function(){var e=list.head(arguments);var t=list.tail(list.from(arguments));var i=e.split(".");var n=i.length>1;var s=n&&list.head(i);var r=n?list.last(i):list.head(i);var o=this.modules[s||"editor"];if(!s&&this[r]){return this[r].apply(this,t)}else if(o&&o[r]&&o.shouldInitialize()){return o[r].apply(o,t)}};return this.initialize()};$.fn.extend({summernote:function(){var e=$.type(list.head(arguments));var t=e==="string";var i=e==="object";var n=i?list.head(arguments):{};n=$.extend({},$.summernote.options,n);n.langInfo=$.extend(true,{},$.summernote.lang["en-US"],$.summernote.lang[n.lang]);n.icons=$.extend(true,{},$.summernote.options.icons,n.icons);n.tooltip=n.tooltip==="auto"?!agent.isSupportTouch:n.tooltip;this.each(function(e,t){var i=$(t);if(!i.data("summernote")){var s=new Context(i,n);i.data("summernote",s);i.data("summernote").triggerEvent("init",s.layoutInfo)}});var s=this.first();if(s.length){var r=s.data("summernote");if(t){return r.invoke.apply(r,list.from(arguments))}else if(n.focus){r.invoke("editor.focus")}}return this}});var Renderer=function(e,t,i,n){this.render=function(s){var r=$(e);if(i&&i.contents){r.html(i.contents)}if(i&&i.className){r.addClass(i.className)}if(i&&i.data){$.each(i.data,function(e,t){r.attr("data-"+e,t)})}if(i&&i.click){r.on("click",i.click)}if(t){var o=r.find(".note-children-container");t.forEach(function(e){e.render(o.length?o:r)})}if(n){n(r,i)}if(i&&i.callback){i.callback(r)}if(s){s.append(r)}return r}};var renderer={create:function(e,t){return function(){var i=$.isArray(arguments[0])?arguments[0]:[];var n=typeof arguments[1]==="object"?arguments[1]:arguments[0];if(n&&n.children){i=n.children}return new Renderer(e,i,n,t)}}};var editor=renderer.create('<div class="note-editor note-frame panel panel-default"/>');var toolbar=renderer.create('<div class="note-toolbar panel-heading"/>');var editingArea=renderer.create('<div class="note-editing-area"/>');var codable=renderer.create('<textarea class="note-codable"/>');var editable=renderer.create('<div class="note-editable panel-body" contentEditable="true"/>');var statusbar=renderer.create(['<div class="note-statusbar">','  <div class="note-resizebar">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join(""));var airEditor=renderer.create('<div class="note-editor"/>');var airEditable=renderer.create('<div class="note-editable" contentEditable="true"/>');var buttonGroup=renderer.create('<div class="note-btn-group btn-group">');var dropdown=renderer.create('<div class="dropdown-menu">',function(e,t){var i=$.isArray(t.items)?t.items.map(function(e){var i=typeof e==="string"?e:e.value||"";var n=t.template?t.template(e):e;var s=typeof e==="object"?e.option:undefined;var r='data-value="'+i+'"';var o=s!==undefined?' data-option="'+s+'"':"";return'<li><a href="#" '+(r+o)+">"+n+"</a></li>"}).join(""):t.items;e.html(i)});var dropdownCheck=renderer.create('<div class="dropdown-menu note-check">',function(e,t){var i=$.isArray(t.items)?t.items.map(function(e){var i=typeof e==="string"?e:e.value||"";var n=t.template?t.template(e):e;return'<li><a href="#" data-value="'+i+'">'+icon(t.checkClassName)+" "+n+"</a></li>"}).join(""):t.items;e.html(i)});var palette=renderer.create('<div class="note-color-palette"/>',function(e,t){var i=[];for(var n=0,s=t.colors.length;n<s;n++){var r=t.eventName;var o=t.colors[n];var a=[];for(var l=0,h=o.length;l<h;l++){var d=o[l];a.push(['<button type="button" class="note-color-btn"','style="background-color:',d,'" ','data-event="',r,'" ','data-value="',d,'" ','title="',d,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}i.push('<div class="note-color-row">'+a.join("")+"</div>")}e.html(i.join(""));e.find(".note-color-btn").tooltip({container:"body",trigger:"hover",placement:"bottom"})});var dialog=renderer.create('<div class="modal" aria-hidden="false" tabindex="-1"/>',function(e,t){if(t.fade){e.addClass("fade")}e.html(['<div class="modal-dialog">','  <div class="modal-content">',t.title?'    <div class="modal-header">'+'      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+'      <h4 class="modal-title">'+t.title+"</h4>"+"    </div>":"",'    <div class="modal-body">'+t.body+"</div>",t.footer?'    <div class="modal-footer">'+t.footer+"</div>":"","  </div>","</div>"].join(""))});var popover=renderer.create(['<div class="note-popover popover in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(e,t){var i=typeof t.direction!=="undefined"?t.direction:"bottom";e.addClass(i);if(t.hideArrow){e.find(".arrow").hide()}});var icon=function(e,t){t=t||"i";return"<"+t+' class="'+e+'"/>'};var ui={editor:editor,toolbar:toolbar,editingArea:editingArea,codable:codable,editable:editable,statusbar:statusbar,airEditor:airEditor,airEditable:airEditable,buttonGroup:buttonGroup,dropdown:dropdown,dropdownCheck:dropdownCheck,palette:palette,dialog:dialog,popover:popover,icon:icon,options:{},button:function(e,t){return renderer.create('<button type="button" class="note-btn btn btn-default btn-sm" tabindex="-1">',function(e,t){if(t&&t.tooltip&&self.options.tooltip){e.attr({title:t.tooltip}).tooltip({container:"body",trigger:"hover",placement:"bottom"})}})(e,t)},toggleBtn:function(e,t){e.toggleClass("disabled",!t);e.attr("disabled",!t)},toggleBtnActive:function(e,t){e.toggleClass("active",t)},onDialogShown:function(e,t){e.one("shown.bs.modal",t)},onDialogHidden:function(e,t){e.one("hidden.bs.modal",t)},showDialog:function(e){e.modal("show")},hideDialog:function(e){e.modal("hide")},createLayout:function(e,t){self.options=t;var i=(t.airMode?ui.airEditor([ui.editingArea([ui.airEditable()])]):ui.editor([ui.toolbar(),ui.editingArea([ui.codable(),ui.editable()]),ui.statusbar()])).render();i.insertAfter(e);return{note:e,editor:i,toolbar:i.find(".note-toolbar"),editingArea:i.find(".note-editing-area"),editable:i.find(".note-editable"),codable:i.find(".note-codable"),statusbar:i.find(".note-statusbar")}},removeLayout:function(e,t){e.html(t.editable.html());t.editor.remove();e.show()}};$.summernote=$.summernote||{lang:{}};$.extend($.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",p:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var key=function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(t){return list.contains([e.BACKSPACE,e.TAB,e.ENTER,e.SPACE],t)},isMove:function(t){return list.contains([e.LEFT,e.UP,e.RIGHT,e.DOWN],t)},nameFromCode:func.invertObject(e),code:e}}();var range=function(){var e=function(e,t){var i=e.parentElement(),n;var s=document.body.createTextRange(),r;var o=list.from(i.childNodes);for(n=0;n<o.length;n++){if(dom.isText(o[n])){continue}s.moveToElementText(o[n]);if(s.compareEndPoints("StartToStart",e)>=0){break}r=o[n]}if(n!==0&&dom.isText(o[n-1])){var a=document.body.createTextRange(),l=null;a.moveToElementText(r||i);a.collapse(!r);l=r?r.nextSibling:i.firstChild;var h=e.duplicate();h.setEndPoint("StartToStart",a);var d=h.text.replace(/[\r\n]/g,"").length;while(d>l.nodeValue.length&&l.nextSibling){d-=l.nodeValue.length;l=l.nextSibling}var u=l.nodeValue;if(t&&l.nextSibling&&dom.isText(l.nextSibling)&&d===l.nodeValue.length){d-=l.nodeValue.length;l=l.nextSibling}i=l;n=d}return{cont:i,offset:n}};var t=function(e){var t=function(e,i){var n,s;if(dom.isText(e)){var r=dom.listPrev(e,func.not(dom.isText));var o=list.last(r).previousSibling;n=o||e.parentNode;i+=list.sum(list.tail(r),dom.nodeLength);s=!o}else{n=e.childNodes[i]||e;if(dom.isText(n)){return t(n,0)}i=0;s=false}return{node:n,collapseToStart:s,offset:i}};var i=document.body.createTextRange();var n=t(e.node,e.offset);i.moveToElementText(n.node);i.collapse(n.collapseToStart);i.moveStart("character",n.offset);return i};var i=function(e,n,s,r){this.sc=e;this.so=n;this.ec=s;this.eo=r;var o=function(){if(agent.isW3CRangeSupport){var i=document.createRange();i.setStart(e,n);i.setEnd(s,r);return i}else{var o=t({node:e,offset:n});o.setEndPoint("EndToEnd",t({node:s,offset:r}));return o}};this.getPoints=function(){return{sc:e,so:n,ec:s,eo:r}};this.getStartPoint=function(){return{node:e,offset:n}};this.getEndPoint=function(){return{node:s,offset:r}};this.select=function(){var e=o();if(agent.isW3CRangeSupport){var t=document.getSelection();if(t.rangeCount>0){t.removeAllRanges()}t.addRange(e)}else{e.select()}return this};this.scrollIntoView=function(e){var t=$(e).height();if(e.scrollTop+t<this.sc.offsetTop){e.scrollTop+=Math.abs(e.scrollTop+t-this.sc.offsetTop)}return this};this.normalize=function(){var e=function(e,t){if(dom.isVisiblePoint(e)&&!dom.isEdgePoint(e)||dom.isVisiblePoint(e)&&dom.isRightEdgePoint(e)&&!t||dom.isVisiblePoint(e)&&dom.isLeftEdgePoint(e)&&t||dom.isVisiblePoint(e)&&dom.isBlock(e.node)&&dom.isEmpty(e.node)){return e}var i=dom.ancestor(e.node,dom.isBlock);if((dom.isLeftEdgePointOf(e,i)||dom.isVoid(dom.prevPoint(e).node))&&!t||(dom.isRightEdgePointOf(e,i)||dom.isVoid(dom.nextPoint(e).node))&&t){if(dom.isVisiblePoint(e)){return e}t=!t}var n=t?dom.nextPointUntil(dom.nextPoint(e),dom.isVisiblePoint):dom.prevPointUntil(dom.prevPoint(e),dom.isVisiblePoint);return n||e};var t=e(this.getEndPoint(),false);var n=this.isCollapsed()?t:e(this.getStartPoint(),true);return new i(n.node,n.offset,t.node,t.offset)};this.nodes=function(e,t){e=e||func.ok;var i=t&&t.includeAncestor;var n=t&&t.fullyContains;var s=this.getStartPoint();var r=this.getEndPoint();var o=[];var a=[];dom.walkPoint(s,r,function(t){if(dom.isEditable(t.node)){return}var s;if(n){if(dom.isLeftEdgePoint(t)){a.push(t.node)}if(dom.isRightEdgePoint(t)&&list.contains(a,t.node)){s=t.node}}else if(i){s=dom.ancestor(t.node,e)}else{s=t.node}if(s&&e(s)){o.push(s)}},true);return list.unique(o)};this.commonAncestor=function(){return dom.commonAncestor(e,s)};this.expand=function(t){var o=dom.ancestor(e,t);var a=dom.ancestor(s,t);if(!o&&!a){return new i(e,n,s,r)}var l=this.getPoints();if(o){l.sc=o;l.so=0}if(a){l.ec=a;l.eo=dom.nodeLength(a)}return new i(l.sc,l.so,l.ec,l.eo)};this.collapse=function(t){if(t){return new i(e,n,e,n)}else{return new i(s,r,s,r)}};this.splitText=function(){var t=e===s;var o=this.getPoints();if(dom.isText(s)&&!dom.isEdgePoint(this.getEndPoint())){s.splitText(r)}if(dom.isText(e)&&!dom.isEdgePoint(this.getStartPoint())){o.sc=e.splitText(n);o.so=0;if(t){o.ec=o.sc;o.eo=r-n}}return new i(o.sc,o.so,o.ec,o.eo)};this.deleteContents=function(){if(this.isCollapsed()){return this}var e=this.splitText();var t=e.nodes(null,{fullyContains:true});var n=dom.prevPointUntil(e.getStartPoint(),function(e){return!list.contains(t,e.node)});var s=[];$.each(t,function(e,t){var i=t.parentNode;if(n.node!==i&&dom.nodeLength(i)===1){s.push(i)}dom.remove(t,false)});$.each(s,function(e,t){dom.remove(t,false)});return new i(n.node,n.offset,n.node,n.offset).normalize()};var a=function(t){return function(){var i=dom.ancestor(e,t);return!!i&&i===dom.ancestor(s,t)}};this.isOnEditable=a(dom.isEditable);this.isOnList=a(dom.isList);this.isOnAnchor=a(dom.isAnchor);this.isOnCell=a(dom.isCell);this.isOnData=a(dom.isData);this.isLeftEdgeOf=function(e){if(!dom.isLeftEdgePoint(this.getStartPoint())){return false}var t=dom.ancestor(this.sc,e);return t&&dom.isLeftEdgeOf(this.sc,t)};this.isCollapsed=function(){return e===s&&n===r};this.wrapBodyInlineWithPara=function(){if(dom.isBodyContainer(e)&&dom.isEmpty(e)){e.innerHTML=dom.emptyPara;return new i(e.firstChild,0,e.firstChild,0)}var t=this.normalize();if(dom.isParaInline(e)||dom.isPara(e)){return t}var n;if(dom.isInline(t.sc)){var s=dom.listAncestor(t.sc,func.not(dom.isInline));n=list.last(s);if(!dom.isInline(n)){n=s[s.length-2]||t.sc.childNodes[t.so]}}else{n=t.sc.childNodes[t.so>0?t.so-1:0]}var r=dom.listPrev(n,dom.isParaInline).reverse();r=r.concat(dom.listNext(n.nextSibling,dom.isParaInline));if(r.length){var o=dom.wrap(list.head(r),"p");dom.appendChildNodes(o,list.tail(r))}return this.normalize()};this.insertNode=function(e){var t=this.wrapBodyInlineWithPara().deleteContents();var i=dom.splitPoint(t.getStartPoint(),dom.isInline(e));if(i.rightNode){i.rightNode.parentNode.insertBefore(e,i.rightNode)}else{i.container.appendChild(e)}return e};this.pasteHTML=function(e){var t=$("<div></div>").html(e)[0];var i=list.from(t.childNodes);var n=this.wrapBodyInlineWithPara().deleteContents();return i.reverse().map(function(e){return n.insertNode(e)}).reverse()};this.toString=function(){var e=o();return agent.isW3CRangeSupport?e.toString():e.text};this.getWordRange=function(e){var t=this.getEndPoint();if(!dom.isCharPoint(t)){return this}var n=dom.prevPointUntil(t,function(e){return!dom.isCharPoint(e)});if(e){t=dom.nextPointUntil(t,function(e){return!dom.isCharPoint(e)})}return new i(n.node,n.offset,t.node,t.offset)};this.bookmark=function(t){return{s:{path:dom.makeOffsetPath(t,e),offset:n},e:{path:dom.makeOffsetPath(t,s),offset:r}}};this.paraBookmark=function(t){return{s:{path:list.tail(dom.makeOffsetPath(list.head(t),e)),offset:n},e:{path:list.tail(dom.makeOffsetPath(list.last(t),s)),offset:r}}};this.getClientRects=function(){var e=o();return e.getClientRects()}};return{create:function(e,t,n,s){if(arguments.length===4){return new i(e,t,n,s)}else if(arguments.length===2){n=e;s=t;return new i(e,t,n,s)}else{var r=this.createFromSelection();if(!r&&arguments.length===1){r=this.createFromNode(arguments[0]);return r.collapse(dom.emptyPara===arguments[0].innerHTML)}return r}},createFromSelection:function(){var t,n,s,r;if(agent.isW3CRangeSupport){var o=document.getSelection();if(!o||o.rangeCount===0){return null}else if(dom.isBody(o.anchorNode)){return null}var a=o.getRangeAt(0);t=a.startContainer;n=a.startOffset;s=a.endContainer;r=a.endOffset}else{var l=document.selection.createRange();var h=l.duplicate();h.collapse(false);var d=l;d.collapse(true);var u=e(d,true),f=e(h,false);if(dom.isText(u.node)&&dom.isLeftEdgePoint(u)&&dom.isTextNode(f.node)&&dom.isRightEdgePoint(f)&&f.node.nextSibling===u.node){u=f}t=u.cont;n=u.offset;s=f.cont;r=f.offset}return new i(t,n,s,r)},createFromNode:function(e){var t=e;var i=0;var n=e;var s=dom.nodeLength(n);if(dom.isVoid(t)){i=dom.listPrev(t).length-1;t=t.parentNode}if(dom.isBR(n)){s=dom.listPrev(n).length-1;n=n.parentNode}else if(dom.isVoid(n)){s=dom.listPrev(n).length;n=n.parentNode}return this.create(t,i,n,s)},createFromNodeBefore:function(e){return this.createFromNode(e).collapse(true)},createFromNodeAfter:function(e){return this.createFromNode(e).collapse()},createFromBookmark:function(e,t){var n=dom.fromOffsetPath(e,t.s.path);var s=t.s.offset;var r=dom.fromOffsetPath(e,t.e.path);var o=t.e.offset;return new i(n,s,r,o)},createFromParaBookmark:function(e,t){var n=e.s.offset;var s=e.e.offset;var r=dom.fromOffsetPath(list.head(t),e.s.path);var o=dom.fromOffsetPath(list.last(t),e.e.path);return new i(r,n,o,s)}}}();var async=function(){var e=function(e){return $.Deferred(function(t){$.extend(new FileReader,{onload:function(e){var i=e.target.result;t.resolve(i)},onerror:function(){t.reject(this)}}).readAsDataURL(e)}).promise()};var t=function(e){return $.Deferred(function(t){var i=$("<img>");i.one("load",function(){i.off("error abort");t.resolve(i)}).one("error abort",function(){i.off("load").detach();t.reject(i)}).css({display:"none"}).appendTo(document.body).attr("src",e)}).promise()};return{readFileAsDataURL:e,createImage:t}}();var History=function(e){var t=[],i=-1;var n=e[0];var s=function(){var t=range.create(n);var i={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:e.html(),bookmark:t?t.bookmark(n):i}};var r=function(t){if(t.contents!==null){e.html(t.contents)}if(t.bookmark!==null){range.createFromBookmark(n,t.bookmark).select()}};this.rewind=function(){if(e.html()!==t[i].contents){this.recordUndo()}i=0;r(t[i])};this.reset=function(){t=[];i=-1;e.html("");this.recordUndo()};this.undo=function(){if(e.html()!==t[i].contents){this.recordUndo()}if(0<i){i--;r(t[i])}};this.redo=function(){if(t.length-1>i){i++;r(t[i])}};this.recordUndo=function(){i++;if(t.length>i){t=t.slice(0,i)}t.push(s())}};var Style=function(){var e=function(e,t){if(agent.jqueryVersion<1.9){var i={};$.each(t,function(t,n){i[n]=e.css(n)});return i}return e.css.call(e,t)};this.fromNode=function(t){var i=["font-family","font-size","text-align","list-style-type","line-height"];var n=e(t,i)||{};n["font-size"]=parseInt(n["font-size"],10);return n};this.stylePara=function(e,t){$.each(e.nodes(dom.isPara,{includeAncestor:true}),function(e,i){$(i).css(t)})};this.styleNodes=function(e,t){e=e.splitText();var i=t&&t.nodeName||"SPAN";var n=!!(t&&t.expandClosestSibling);var s=!!(t&&t.onlyPartialContains);if(e.isCollapsed()){return[e.insertNode(dom.create(i))]}var r=dom.makePredByNodeName(i);var o=e.nodes(dom.isText,{fullyContains:true}).map(function(e){return dom.singleChildAncestor(e,r)||dom.wrap(e,i)});if(n){if(s){var a=e.nodes();r=func.and(r,function(e){return list.contains(a,e)})}return o.map(function(e){var t=dom.withClosestSiblings(e,r);var i=list.head(t);var n=list.tail(t);$.each(n,function(e,t){dom.appendChildNodes(i,t.childNodes);dom.remove(t)});return list.head(t)})}else{return o}};this.current=function(e){var t=$(!dom.isElement(e.sc)?e.sc.parentNode:e.sc);var i=this.fromNode(t);try{i=$.extend(i,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal","font-family":document.queryCommandValue("fontname")||i["font-family"]})}catch(e){}if(!e.isOnList()){i["list-style"]="none"}else{var n=["circle","disc","disc-leading-zero","square"];var s=$.inArray(i["list-style-type"],n)>-1;i["list-style"]=s?"unordered":"ordered"}var r=dom.ancestor(e.sc,dom.isPara);if(r&&r.style["line-height"]){i["line-height"]=r.style.lineHeight}else{var o=parseInt(i["line-height"],10)/parseInt(i["font-size"],10);i["line-height"]=o.toFixed(1)}i.anchor=e.isOnAnchor()&&dom.ancestor(e.sc,dom.isAnchor);i.ancestors=dom.listAncestor(e.sc,dom.isEditable);i.range=e;return i}};var Bullet=function(){var e=this;this.insertOrderedList=function(e){this.toggleList("OL",e)};this.insertUnorderedList=function(e){this.toggleList("UL",e)};this.indent=function(e){var t=this;var i=range.create(e).wrapBodyInlineWithPara();var n=i.nodes(dom.isPara,{includeAncestor:true});var s=list.clusterBy(n,func.peq2("parentNode"));$.each(s,function(e,i){var n=list.head(i);if(dom.isLi(n)){t.wrapList(i,n.parentNode.nodeName)}else{$.each(i,function(e,t){$(t).css("marginLeft",function(e,t){return(parseInt(t,10)||0)+25})})}});i.select()};this.outdent=function(e){var t=this;var i=range.create(e).wrapBodyInlineWithPara();var n=i.nodes(dom.isPara,{includeAncestor:true});var s=list.clusterBy(n,func.peq2("parentNode"));$.each(s,function(e,i){var n=list.head(i);if(dom.isLi(n)){t.releaseList([i])}else{$.each(i,function(e,t){$(t).css("marginLeft",function(e,t){t=parseInt(t,10)||0;return t>25?t-25:""})})}});i.select()};this.toggleList=function(t,i){var n=range.create(i).wrapBodyInlineWithPara();var s=n.nodes(dom.isPara,{includeAncestor:true});var r=n.paraBookmark(s);var o=list.clusterBy(s,func.peq2("parentNode"));if(list.find(s,dom.isPurePara)){var a=[];$.each(o,function(i,n){a=a.concat(e.wrapList(n,t))});s=a}else{var l=n.nodes(dom.isList,{includeAncestor:true}).filter(function(e){return!$.nodeName(e,t)});if(l.length){$.each(l,function(e,i){dom.replace(i,t)})}else{s=this.releaseList(o,true)}}range.createFromParaBookmark(r,s).select()};this.wrapList=function(e,t){var i=list.head(e);var n=list.last(e);var s=dom.isList(i.previousSibling)&&i.previousSibling;var r=dom.isList(n.nextSibling)&&n.nextSibling;var o=s||dom.insertAfter(dom.create(t||"UL"),n);e=e.map(function(e){return dom.isPurePara(e)?dom.replace(e,"LI"):e});dom.appendChildNodes(o,e);if(r){dom.appendChildNodes(o,list.from(r.childNodes));dom.remove(r)}return e};this.releaseList=function(e,t){var i=[];$.each(e,function(e,n){var s=list.head(n);var r=list.last(n);var o=t?dom.lastAncestor(s,dom.isList):s.parentNode;var a=o.childNodes.length>1?dom.splitTree(o,{node:r.parentNode,offset:dom.position(r)+1},{isSkipPaddingBlankHTML:true}):null;var l=dom.splitTree(o,{node:s.parentNode,offset:dom.position(s)},{isSkipPaddingBlankHTML:true});n=t?dom.listDescendant(l,dom.isLi):list.from(l.childNodes).filter(dom.isLi);if(t||!dom.isList(o.parentNode)){n=n.map(function(e){return dom.replace(e,"P")})}$.each(list.from(n).reverse(),function(e,t){dom.insertAfter(t,o)});var h=list.compact([o,l,a]);$.each(h,function(e,t){var i=[t].concat(dom.listDescendant(t,dom.isList));$.each(i.reverse(),function(e,t){if(!dom.nodeLength(t)){dom.remove(t,true)}})});i=i.concat(n)});return i}};var Typing=function(){var e=new Bullet;this.insertTab=function(e,t){var i=dom.createText(new Array(t+1).join(dom.NBSP_CHAR));e=e.deleteContents();e.insertNode(i,true);e=range.create(i,t);e.select()};this.insertParagraph=function(t){var i=range.create(t);i=i.deleteContents();i=i.wrapBodyInlineWithPara();var n=dom.ancestor(i.sc,dom.isPara);var s;if(n){if(dom.isEmpty(n)&&dom.isLi(n)){e.toggleList(n.parentNode.nodeName);return}else if(dom.isEmpty(n)&&dom.isPara(n)&&dom.isBlockquote(n.parentNode)){dom.insertAfter(n,n.parentNode);s=n}else{s=dom.splitTree(n,i.getStartPoint());var r=dom.listDescendant(n,dom.isEmptyAnchor);r=r.concat(dom.listDescendant(s,dom.isEmptyAnchor));$.each(r,function(e,t){dom.remove(t)});if((dom.isHeading(s)||dom.isPre(s)||dom.isCustomStyleTag(s))&&dom.isEmpty(s)){s=dom.replace(s,"p")}}}else{var o=i.sc.childNodes[i.so];s=$(dom.emptyPara)[0];if(o){i.sc.insertBefore(s,o)}else{i.sc.appendChild(s)}}range.create(s,0).normalize().select().scrollIntoView(t)}};var Table=function(){this.tab=function(e,t){var i=dom.ancestor(e.commonAncestor(),dom.isCell);var n=dom.ancestor(i,dom.isTable);var s=dom.listDescendant(n,dom.isCell);var r=list[t?"prev":"next"](s,i);if(r){range.create(r,0).select()}};this.createTable=function(e,t,i){var n=[],s;for(var r=0;r<e;r++){n.push("<td>"+dom.blank+"</td>")}s=n.join("");var o=[],a;for(var l=0;l<t;l++){o.push("<tr>"+s+"</tr>")}a=o.join("");var h=$("<table>"+a+"</table>");if(i&&i.tableClassName){h.addClass(i.tableClassName)}return h[0]}};var KEY_BOGUS="bogus";var Editor=function(e){var t=this;var i=e.layoutInfo.note;var n=e.layoutInfo.editor;var s=e.layoutInfo.editable;var r=e.options;var o=r.langInfo;var a=s[0];var l=null;var h=new Style;var d=new Table;var u=new Typing;var f=new Bullet;var c=new History(s);this.initialize=function(){s.on("keydown",function(i){if(i.keyCode===key.code.ENTER){e.triggerEvent("enter",i)}e.triggerEvent("keydown",i);if(!i.isDefaultPrevented()){if(r.shortcuts){t.handleKeyMap(i)}else{t.preventDefaultEditableShortCuts(i)}}}).on("keyup",function(t){e.triggerEvent("keyup",t)}).on("focus",function(t){e.triggerEvent("focus",t)}).on("blur",function(t){e.triggerEvent("blur",t)}).on("mousedown",function(t){e.triggerEvent("mousedown",t)}).on("mouseup",function(t){e.triggerEvent("mouseup",t)}).on("scroll",function(t){e.triggerEvent("scroll",t)}).on("paste",function(t){e.triggerEvent("paste",t)});s.html(dom.html(i)||dom.emptyPara);var o=agent.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";s.on(o,func.debounce(function(){e.triggerEvent("change",s.html())},250));n.on("focusin",function(t){e.triggerEvent("focusin",t)}).on("focusout",function(t){e.triggerEvent("focusout",t)});if(!r.airMode){if(r.width){n.outerWidth(r.width)}if(r.height){s.outerHeight(r.height)}if(r.maxHeight){s.css("max-height",r.maxHeight)}if(r.minHeight){s.css("min-height",r.minHeight)}}c.recordUndo()};this.destroy=function(){s.off()};this.handleKeyMap=function(t){var i=r.keyMap[agent.isMac?"mac":"pc"];var n=[];if(t.metaKey){n.push("CMD")}if(t.ctrlKey&&!t.altKey){n.push("CTRL")}if(t.shiftKey){n.push("SHIFT")}var s=key.nameFromCode[t.keyCode];if(s){n.push(s)}var o=i[n.join("+")];if(o){t.preventDefault();e.invoke(o)}else if(key.isEdit(t.keyCode)){this.afterCommand()}};this.preventDefaultEditableShortCuts=function(e){if((e.ctrlKey||e.metaKey)&&list.contains([66,73,85],e.keyCode)){e.preventDefault()}};this.createRange=function(){this.focus();return range.create(a)};this.saveRange=function(e){l=this.createRange();if(e){l.collapse().select()}};this.restoreRange=function(){if(l){l.select();this.focus()}};this.saveTarget=function(e){s.data("target",e)};this.clearTarget=function(){s.removeData("target")};this.restoreTarget=function(){return s.data("target")};this.currentStyle=function(){var e=range.create();if(e){e=e.normalize()}return e?h.current(e):h.fromNode(s)};this.styleFromNode=function(e){return h.fromNode(e)};this.undo=function(){e.triggerEvent("before.command",s.html());c.undo();e.triggerEvent("change",s.html())};e.memo("help.undo",o.help.undo);this.redo=function(){e.triggerEvent("before.command",s.html());c.redo();e.triggerEvent("change",s.html())};e.memo("help.redo",o.help.redo);var p=this.beforeCommand=function(){e.triggerEvent("before.command",s.html());t.focus()};var m=this.afterCommand=function(t){c.recordUndo();if(!t){e.triggerEvent("change",s.html())}};var v=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"];for(var g=0,y=v.length;g<y;g++){this[v[g]]=function(e){return function(t){p();document.execCommand(e,false,t);m(true)}}(v[g]);e.memo("help."+v[g],o.help[v[g]])}this.tab=function(){var e=this.createRange();if(e.isCollapsed()&&e.isOnCell()){d.tab(e)}else{p();u.insertTab(e,r.tabSize);m()}};e.memo("help.tab",o.help.tab);this.untab=function(){var e=this.createRange();if(e.isCollapsed()&&e.isOnCell()){d.tab(e,true)}};e.memo("help.untab",o.help.untab);this.wrapCommand=function(e){return function(){p();e.apply(t,arguments);m()}};this.insertParagraph=this.wrapCommand(function(){u.insertParagraph(a)});e.memo("help.insertParagraph",o.help.insertParagraph);this.insertOrderedList=this.wrapCommand(function(){f.insertOrderedList(a)});e.memo("help.insertOrderedList",o.help.insertOrderedList);this.insertUnorderedList=this.wrapCommand(function(){f.insertUnorderedList(a)});e.memo("help.insertUnorderedList",o.help.insertUnorderedList);this.indent=this.wrapCommand(function(){f.indent(a)});e.memo("help.indent",o.help.indent);this.outdent=this.wrapCommand(function(){f.outdent(a)});e.memo("help.outdent",o.help.outdent);this.insertImage=function(t,i){return async.createImage(t,i).then(function(e){p();if(typeof i==="function"){i(e)}else{if(typeof i==="string"){e.attr("data-filename",i)}e.css("width",Math.min(s.width(),e.width()))}e.show();range.create(a).insertNode(e[0]);range.createFromNodeAfter(e[0]).select();m()}).fail(function(t){e.triggerEvent("image.upload.error",t)})};this.insertImages=function(i){$.each(i,function(i,n){var s=n.name;if(r.maximumImageFileSize&&r.maximumImageFileSize<n.size){e.triggerEvent("image.upload.error",o.image.maximumFileSizeError)}else{async.readFileAsDataURL(n).then(function(e){return t.insertImage(e,s)}).fail(function(){e.triggerEvent("image.upload.error")})}})};this.insertImagesOrCallback=function(t){var i=r.callbacks;if(i.onImageUpload){e.triggerEvent("image.upload",t)}else{this.insertImages(t)}};this.insertNode=this.wrapCommand(function(e){var t=this.createRange();t.insertNode(e);range.createFromNodeAfter(e).select()});this.insertText=this.wrapCommand(function(e){var t=this.createRange();var i=t.insertNode(dom.createText(e));range.create(i,dom.nodeLength(i)).select()});this.getSelectedText=function(){var e=this.createRange();if(e.isOnAnchor()){e=range.createFromNode(dom.ancestor(e.sc,dom.isAnchor))}return e.toString()};this.pasteHTML=this.wrapCommand(function(e){var t=this.createRange().pasteHTML(e);range.createFromNodeAfter(list.last(t)).select()});this.formatBlock=this.wrapCommand(function(t,i){var n=e.options.callbacks.onApplyCustomStyle;if(n){n.call(this,i,e,this.onFormatBlock)}else{this.onFormatBlock(t)}});this.onFormatBlock=function(e){e=agent.isMSIE?"<"+e+">":e;document.execCommand("FormatBlock",false,e)};this.formatPara=function(){this.formatBlock("P")};e.memo("help.formatPara",o.help.formatPara);for(var g=1;g<=6;g++){this["formatH"+g]=function(e){return function(){this.formatBlock("H"+e)}}(g);e.memo("help.formatH"+g,o.help["formatH"+g])}this.fontSize=function(e){var t=this.createRange();if(t&&t.isCollapsed()){var i=h.styleNodes(t);
var n=list.head(i);$(i).css({"font-size":e+"px"});if(n&&!dom.nodeLength(n)){n.innerHTML=dom.ZERO_WIDTH_NBSP_CHAR;range.createFromNodeAfter(n.firstChild).select();s.data(KEY_BOGUS,n)}}else{p();$(h.styleNodes(t)).css({"font-size":e+"px"});m()}};this.insertHorizontalRule=this.wrapCommand(function(){var e=this.createRange().insertNode(dom.create("HR"));if(e.nextSibling){range.create(e.nextSibling,0).normalize().select()}});e.memo("help.insertHorizontalRule",o.help.insertHorizontalRule);this.removeBogus=function(){var e=s.data(KEY_BOGUS);if(!e){return}var t=list.find(list.from(e.childNodes),dom.isText);var i=t.nodeValue.indexOf(dom.ZERO_WIDTH_NBSP_CHAR);if(i!==-1){t.deleteData(i,1)}if(dom.isEmpty(e)){dom.remove(e)}s.removeData(KEY_BOGUS)};this.lineHeight=this.wrapCommand(function(e){h.stylePara(this.createRange(),{lineHeight:e})});this.unlink=function(){var e=this.createRange();if(e.isOnAnchor()){var t=dom.ancestor(e.sc,dom.isAnchor);e=range.createFromNode(t);e.select();p();document.execCommand("unlink");m()}};this.createLink=this.wrapCommand(function(e){var t=e.url;var i=e.text;var n=e.isNewWindow;var s=e.range||this.createRange();var o=s.toString()!==i;if(typeof t==="string"){t=t.trim()}if(r.onCreateLink){t=r.onCreateLink(t)}else{t=/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/.test(t)?t:"http://"+t}var a=[];if(o){s=s.deleteContents();var l=s.insertNode($("<A>"+i+"</A>")[0]);a.push(l)}else{a=h.styleNodes(s,{nodeName:"A",expandClosestSibling:true,onlyPartialContains:true})}$.each(a,function(e,i){$(i).attr("href",t);if(n){$(i).attr("target","_blank")}else{$(i).removeAttr("target")}});var d=range.createFromNodeBefore(list.head(a));var u=d.getStartPoint();var f=range.createFromNodeAfter(list.last(a));var c=f.getEndPoint();range.create(u.node,u.offset,c.node,c.offset).select()});this.getLinkInfo=function(){var e=this.createRange().expand(dom.isAnchor);var t=$(list.head(e.nodes(dom.isAnchor)));var i={range:e,text:e.toString(),url:t.length?t.attr("href"):""};if(t.length){i.isNewWindow=t.attr("target")==="_blank"}return i};this.color=this.wrapCommand(function(e){var t=e.foreColor;var i=e.backColor;if(t){document.execCommand("foreColor",false,t)}if(i){document.execCommand("backColor",false,i)}});this.insertTable=this.wrapCommand(function(e){var t=e.split("x");var i=this.createRange().deleteContents();i.insertNode(d.createTable(t[0],t[1],r))});this.floatMe=this.wrapCommand(function(e){var t=$(this.restoreTarget());t.css("float",e)});this.resize=this.wrapCommand(function(e){var t=$(this.restoreTarget());t.css({width:e*100+"%",height:""})});this.resizeTo=function(e,t,i){var n;if(i){var s=e.y/e.x;var r=t.data("ratio");n={width:r>s?e.x:e.y/r,height:r>s?e.x*r:e.y}}else{n={width:e.x,height:e.y}}t.css(n)};this.removeMedia=this.wrapCommand(function(){var t=$(this.restoreTarget()).detach();e.triggerEvent("media.delete",t,s)});this.hasFocus=function(){return s.is(":focus")};this.focus=function(){if(!this.hasFocus()){s.focus()}};this.isEmpty=function(){return dom.isEmpty(s[0])||dom.emptyPara===s.html()};this.empty=function(){e.invoke("code",dom.emptyPara)}};var Clipboard=function(e){var t=this;var i=e.layoutInfo.editable;this.events={"summernote.keydown":function(i,n){if(t.needKeydownHook()){if((n.ctrlKey||n.metaKey)&&n.keyCode===key.code.V){e.invoke("editor.saveRange");t.$paste.focus();setTimeout(function(){t.pasteByHook()},0)}}}};this.needKeydownHook=function(){return agent.isMSIE&&agent.browserVersion>10||agent.isFF};this.initialize=function(){if(this.needKeydownHook()){this.$paste=$('<div tabindex="-1" />').attr("contenteditable",true).css({position:"absolute",left:-1e5,opacity:0});i.before(this.$paste);this.$paste.on("paste",function(t){e.triggerEvent("paste",t)})}else{i.on("paste",this.pasteByEvent)}};this.destroy=function(){if(this.needKeydownHook()){this.$paste.remove();this.$paste=null}};this.pasteByHook=function(){var t=this.$paste[0].firstChild;var i=t&&t.src;if(dom.isImg(t)&&i.indexOf("data:")===0){var n=atob(t.src.split(",")[1]);var s=new Uint8Array(n.length);for(var r=0;r<n.length;r++){s[r]=n.charCodeAt(r)}var o=new Blob([s],{type:"image/png"});o.name="clipboard.png";e.invoke("editor.restoreRange");e.invoke("editor.focus");e.invoke("editor.insertImagesOrCallback",[o])}else{var a=$("<div />").html(this.$paste.html()).html();e.invoke("editor.restoreRange");e.invoke("editor.focus");if(a){e.invoke("editor.pasteHTML",a)}}this.$paste.empty()};this.pasteByEvent=function(t){var i=t.originalEvent.clipboardData;if(i&&i.items&&i.items.length){var n=list.head(i.items);if(n.kind==="file"&&n.type.indexOf("image/")!==-1){e.invoke("editor.insertImagesOrCallback",[n.getAsFile()])}e.invoke("editor.afterCommand")}}};var Dropzone=function(e){var t=$(document);var i=e.layoutInfo.editor;var n=e.layoutInfo.editable;var s=e.options;var r=s.langInfo;var o={};var a=$(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(i);var l=function(){Object.keys(o).forEach(function(e){t.off(e.substr(2).toLowerCase(),o[e])});o={}};this.initialize=function(){if(s.disableDragAndDrop){o.onDrop=function(e){e.preventDefault()};t.on("drop",o.onDrop)}else{this.attachDragAndDropEvent()}};this.attachDragAndDropEvent=function(){var s=$(),l=a.find(".note-dropzone-message");o.onDragenter=function(t){var n=e.invoke("codeview.isActivated");var o=i.width()>0&&i.height()>0;if(!n&&!s.length&&o){i.addClass("dragover");a.width(i.width());a.height(i.height());l.text(r.image.dragImageHere)}s=s.add(t.target)};o.onDragleave=function(e){s=s.not(e.target);if(!s.length){i.removeClass("dragover")}};o.onDrop=function(){s=$();i.removeClass("dragover")};t.on("dragenter",o.onDragenter).on("dragleave",o.onDragleave).on("drop",o.onDrop);a.on("dragenter",function(){a.addClass("hover");l.text(r.image.dropImage)}).on("dragleave",function(){a.removeClass("hover");l.text(r.image.dragImageHere)});a.on("drop",function(t){var i=t.originalEvent.dataTransfer;if(i&&i.files&&i.files.length){t.preventDefault();n.focus();e.invoke("editor.insertImagesOrCallback",i.files)}else{$.each(i.types,function(t,n){var s=i.getData(n);if(n.toLowerCase().indexOf("text")>-1){e.invoke("editor.pasteHTML",s)}else{$(s).each(function(){e.invoke("editor.insertNode",this)})}})}}).on("dragover",false)};this.destroy=function(){l()}};var CodeMirror;if(agent.hasCodeMirror){if(agent.isSupportAmd){require(["codemirror"],function(e){CodeMirror=e})}else{CodeMirror=window.CodeMirror}}var Codeview=function(e){var t=e.layoutInfo.editor;var i=e.layoutInfo.editable;var n=e.layoutInfo.codable;var s=e.options;this.sync=function(){var e=this.isActivated();if(e&&agent.hasCodeMirror){n.data("cmEditor").save()}};this.isActivated=function(){return t.hasClass("codeview")};this.toggle=function(){if(this.isActivated()){this.deactivate()}else{this.activate()}e.triggerEvent("codeview.toggled")};this.activate=function(){n.val(dom.html(i,s.prettifyHtml));n.height(i.height());e.invoke("toolbar.updateCodeview",true);t.addClass("codeview");n.focus();if(agent.hasCodeMirror){var r=CodeMirror.fromTextArea(n[0],s.codemirror);if(s.codemirror.tern){var o=new CodeMirror.TernServer(s.codemirror.tern);r.ternServer=o;r.on("cursorActivity",function(e){o.updateArgHints(e)})}r.setSize(null,i.outerHeight());n.data("cmEditor",r)}};this.deactivate=function(){if(agent.hasCodeMirror){var r=n.data("cmEditor");n.val(r.getValue());r.toTextArea()}var o=dom.value(n,s.prettifyHtml)||dom.emptyPara;var a=i.html()!==o;i.html(o);i.height(s.height?n.height():"auto");t.removeClass("codeview");if(a){e.triggerEvent("change",i.html(),i)}i.focus();e.invoke("toolbar.updateCodeview",false)};this.destroy=function(){if(this.isActivated()){this.deactivate()}}};var EDITABLE_PADDING=24;var Statusbar=function(e){var t=$(document);var i=e.layoutInfo.statusbar;var n=e.layoutInfo.editable;var s=e.options;this.initialize=function(){if(s.airMode||s.disableResizeEditor){this.destroy();return}i.on("mousedown",function(e){e.preventDefault();e.stopPropagation();var i=n.offset().top-t.scrollTop();var r=function(e){var t=e.clientY-(i+EDITABLE_PADDING);t=s.minheight>0?Math.max(t,s.minheight):t;t=s.maxHeight>0?Math.min(t,s.maxHeight):t;n.height(t)};t.on("mousemove",r).one("mouseup",function(){t.off("mousemove",r)})})};this.destroy=function(){i.off();i.remove()}};var Fullscreen=function(e){var t=this;var i=e.layoutInfo.editor;var n=e.layoutInfo.toolbar;var s=e.layoutInfo.editable;var r=e.layoutInfo.codable;var o=$(window);var a=$("html, body");this.resizeTo=function(e){s.css("height",e.h);r.css("height",e.h);if(r.data("cmeditor")){r.data("cmeditor").setsize(null,e.h)}};this.onResize=function(){t.resizeTo({h:o.height()-n.outerHeight()})};this.toggle=function(){i.toggleClass("fullscreen");if(this.isFullscreen()){s.data("orgHeight",s.css("height"));o.on("resize",this.onResize).trigger("resize");a.css("overflow","hidden")}else{o.off("resize",this.onResize);this.resizeTo({h:s.data("orgHeight")});a.css("overflow","visible")}e.invoke("toolbar.updateFullscreen",this.isFullscreen())};this.isFullscreen=function(){return i.hasClass("fullscreen")}};var Handle=function(e){var t=this;var i=$(document);var n=e.layoutInfo.editingArea;var s=e.options;this.events={"summernote.mousedown":function(e,i){if(t.update(i.target)){i.preventDefault()}},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){t.update()}};this.initialize=function(){this.$handle=$(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',s.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',s.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(n);this.$handle.on("mousedown",function(n){if(dom.isControlSizing(n.target)){n.preventDefault();n.stopPropagation();var s=t.$handle.find(".note-control-selection").data("target"),r=s.offset(),o=i.scrollTop();var a=function(i){e.invoke("editor.resizeTo",{x:i.clientX-r.left,y:i.clientY-(r.top-o)},s,!i.shiftKey);t.update(s[0])};i.on("mousemove",a).one("mouseup",function(t){t.preventDefault();i.off("mousemove",a);e.invoke("editor.afterCommand")});if(!s.data("ratio")){s.data("ratio",s.height()/s.width())}}})};this.destroy=function(){this.$handle.remove()};this.update=function(t){var i=dom.isImg(t);var n=this.$handle.find(".note-control-selection");e.invoke("imagePopover.update",t);if(i){var s=$(t);var r=s.position();var o={w:s.outerWidth(true),h:s.outerHeight(true)};n.css({display:"block",left:r.left,top:r.top,width:o.w,height:o.h}).data("target",s);var a=o.w+"x"+o.h;n.find(".note-control-selection-info").text(a);e.invoke("editor.saveTarget",t)}else{this.hide()}return i};this.hide=function(){e.invoke("editor.clearTarget");this.$handle.children().hide()}};var AutoLink=function(e){var t=this;var i="http://";var n=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;this.events={"summernote.keyup":function(e,i){if(!i.isDefaultPrevented()){t.handleKeyup(i)}},"summernote.keydown":function(e,i){t.handleKeydown(i)}};this.initialize=function(){this.lastWordRange=null};this.destroy=function(){this.lastWordRange=null};this.replace=function(){if(!this.lastWordRange){return}var t=this.lastWordRange.toString();var s=t.match(n);if(s&&(s[1]||s[2])){var r=s[1]?t:i+t;var o=$("<a />").html(t).attr("href",r)[0];this.lastWordRange.insertNode(o);this.lastWordRange=null;e.invoke("editor.focus")}};this.handleKeydown=function(t){if(list.contains([key.code.ENTER,key.code.SPACE],t.keyCode)){var i=e.invoke("editor.createRange").getWordRange();this.lastWordRange=i}};this.handleKeyup=function(e){if(list.contains([key.code.ENTER,key.code.SPACE],e.keyCode)){this.replace()}}};var AutoSync=function(e){var t=e.layoutInfo.note;this.events={"summernote.change":function(){t.val(e.invoke("code"))}};this.shouldInitialize=function(){return dom.isTextarea(t[0])}};var Placeholder=function(e){var t=this;var i=e.layoutInfo.editingArea;var n=e.options;this.events={"summernote.init summernote.change":function(){t.update()},"summernote.codeview.toggled":function(){t.update()}};this.shouldInitialize=function(){return!!n.placeholder};this.initialize=function(){this.$placeholder=$('<div class="note-placeholder">');this.$placeholder.on("click",function(){e.invoke("focus")}).text(n.placeholder).prependTo(i)};this.destroy=function(){this.$placeholder.remove()};this.update=function(){var t=!e.invoke("codeview.isActivated")&&e.invoke("editor.isEmpty");this.$placeholder.toggle(t)}};var Buttons=function(e){var t=this;var i=$.summernote.ui;var n=e.layoutInfo.toolbar;var s=e.options;var r=s.langInfo;var o=func.invertObject(s.keyMap[agent.isMac?"mac":"pc"]);var a=this.representShortcut=function(e){var t=o[e];if(!s.shortcuts||!t){return""}if(agent.isMac){t=t.replace("CMD","⌘").replace("SHIFT","⇧")}t=t.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]");return" ("+t+")"};this.initialize=function(){this.addToolbarButtons();this.addImagePopoverButtons();this.addLinkPopoverButtons();this.fontInstalledMap={}};this.destroy=function(){delete this.fontInstalledMap};this.isFontInstalled=function(e){if(!t.fontInstalledMap.hasOwnProperty(e)){t.fontInstalledMap[e]=agent.isFontInstalled(e)||list.contains(s.fontNamesIgnoreCheck,e)}return t.fontInstalledMap[e]};this.addToolbarButtons=function(){e.memo("button.style",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:i.icon(s.icons.magic)+" "+i.icon(s.icons.caret,"span"),tooltip:r.style.style,data:{toggle:"dropdown"}}),i.dropdown({className:"dropdown-style",items:e.options.styleTags,template:function(e){if(typeof e==="string"){e={tag:e,title:r.style.hasOwnProperty(e)?r.style[e]:e}}var t=e.tag;var i=e.title;var n=e.style?' style="'+e.style+'" ':"";var s=e.className?' class="'+e.className+'"':"";return"<"+t+n+s+">"+i+"</"+t+">"},click:e.createInvokeHandler("editor.formatBlock")})]).render()});e.memo("button.bold",function(){return i.button({className:"note-btn-bold",contents:i.icon(s.icons.bold),tooltip:r.font.bold+a("bold"),click:e.createInvokeHandlerAndUpdateState("editor.bold")}).render()});e.memo("button.italic",function(){return i.button({className:"note-btn-italic",contents:i.icon(s.icons.italic),tooltip:r.font.italic+a("italic"),click:e.createInvokeHandlerAndUpdateState("editor.italic")}).render()});e.memo("button.underline",function(){return i.button({className:"note-btn-underline",contents:i.icon(s.icons.underline),tooltip:r.font.underline+a("underline"),click:e.createInvokeHandlerAndUpdateState("editor.underline")}).render()});e.memo("button.clear",function(){return i.button({contents:i.icon(s.icons.eraser),tooltip:r.font.clear+a("removeFormat"),click:e.createInvokeHandler("editor.removeFormat")}).render()});e.memo("button.strikethrough",function(){return i.button({className:"note-btn-strikethrough",contents:i.icon(s.icons.strikethrough),tooltip:r.font.strikethrough+a("strikethrough"),click:e.createInvokeHandlerAndUpdateState("editor.strikethrough")}).render()});e.memo("button.superscript",function(){return i.button({className:"note-btn-superscript",contents:i.icon(s.icons.superscript),tooltip:r.font.superscript,click:e.createInvokeHandlerAndUpdateState("editor.superscript")}).render()});e.memo("button.subscript",function(){return i.button({className:"note-btn-subscript",contents:i.icon(s.icons.subscript),tooltip:r.font.subscript,click:e.createInvokeHandlerAndUpdateState("editor.subscript")}).render()});e.memo("button.fontname",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:'<span class="note-current-fontname"/> '+i.icon(s.icons.caret,"span"),tooltip:r.font.name,data:{toggle:"dropdown"}}),i.dropdownCheck({className:"dropdown-fontname",checkClassName:s.icons.menuCheck,items:s.fontNames.filter(t.isFontInstalled),template:function(e){return'<span style="font-family:'+e+'">'+e+"</span>"},click:e.createInvokeHandlerAndUpdateState("editor.fontName")})]).render()});e.memo("button.fontsize",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:'<span class="note-current-fontsize"/>'+i.icon(s.icons.caret,"span"),tooltip:r.font.size,data:{toggle:"dropdown"}}),i.dropdownCheck({className:"dropdown-fontsize",checkClassName:s.icons.menuCheck,items:s.fontSizes,click:e.createInvokeHandler("editor.fontSize")})]).render()});e.memo("button.color",function(){return i.buttonGroup({className:"note-color",children:[i.button({className:"note-current-color-button",contents:i.icon(s.icons.font+" note-recent-color"),tooltip:r.color.recent,click:function(t){var i=$(t.currentTarget);e.invoke("editor.color",{backColor:i.attr("data-backColor"),foreColor:i.attr("data-foreColor")})},callback:function(e){var t=e.find(".note-recent-color");t.css("background-color","#FFFF00");e.attr("data-backColor","#FFFF00")}}),i.button({className:"dropdown-toggle",contents:i.icon(s.icons.caret,"span"),tooltip:r.color.more,data:{toggle:"dropdown"}}),i.dropdown({items:["<li>",'<div class="btn-group">','  <div class="note-palette-title">'+r.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="backColor" data-value="inherit">',r.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"</div>",'<div class="btn-group">','  <div class="note-palette-title">'+r.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="removeFormat" data-value="foreColor">',r.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"</div>","</li>"].join(""),callback:function(e){e.find(".note-holder").each(function(){var e=$(this);e.append(i.palette({colors:s.colors,eventName:e.data("event")}).render())})},click:function(t){var i=$(t.target);var n=i.data("event");var s=i.data("value");if(n&&s){var r=n==="backColor"?"background-color":"color";var o=i.closest(".note-color").find(".note-recent-color");var a=i.closest(".note-color").find(".note-current-color-button");o.css(r,s);a.attr("data-"+n,s);e.invoke("editor."+n,s)}}})]}).render()});e.memo("button.ul",function(){return i.button({contents:i.icon(s.icons.unorderedlist),tooltip:r.lists.unordered+a("insertUnorderedList"),click:e.createInvokeHandler("editor.insertUnorderedList")}).render()});e.memo("button.ol",function(){return i.button({contents:i.icon(s.icons.orderedlist),tooltip:r.lists.ordered+a("insertOrderedList"),click:e.createInvokeHandler("editor.insertOrderedList")}).render()});var n=i.button({contents:i.icon(s.icons.alignLeft),tooltip:r.paragraph.left+a("justifyLeft"),click:e.createInvokeHandler("editor.justifyLeft")});var o=i.button({contents:i.icon(s.icons.alignCenter),tooltip:r.paragraph.center+a("justifyCenter"),click:e.createInvokeHandler("editor.justifyCenter")});var l=i.button({contents:i.icon(s.icons.alignRight),tooltip:r.paragraph.right+a("justifyRight"),click:e.createInvokeHandler("editor.justifyRight")});var h=i.button({contents:i.icon(s.icons.alignJustify),tooltip:r.paragraph.justify+a("justifyFull"),click:e.createInvokeHandler("editor.justifyFull")});var d=i.button({contents:i.icon(s.icons.outdent),tooltip:r.paragraph.outdent+a("outdent"),click:e.createInvokeHandler("editor.outdent")});var u=i.button({contents:i.icon(s.icons.indent),tooltip:r.paragraph.indent+a("indent"),click:e.createInvokeHandler("editor.indent")});e.memo("button.justifyLeft",func.invoke(n,"render"));e.memo("button.justifyCenter",func.invoke(o,"render"));e.memo("button.justifyRight",func.invoke(l,"render"));e.memo("button.justifyFull",func.invoke(h,"render"));e.memo("button.outdent",func.invoke(d,"render"));e.memo("button.indent",func.invoke(u,"render"));e.memo("button.paragraph",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:i.icon(s.icons.alignLeft)+" "+i.icon(s.icons.caret,"span"),tooltip:r.paragraph.paragraph,data:{toggle:"dropdown"}}),i.dropdown([i.buttonGroup({className:"note-align",children:[n,o,l,h]}),i.buttonGroup({className:"note-list",children:[d,u]})])]).render()});e.memo("button.height",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:i.icon(s.icons.textHeight)+" "+i.icon(s.icons.caret,"span"),tooltip:r.font.height,data:{toggle:"dropdown"}}),i.dropdownCheck({items:s.lineHeights,checkClassName:s.icons.menuCheck,className:"dropdown-line-height",click:e.createInvokeHandler("editor.lineHeight")})]).render()});e.memo("button.table",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:i.icon(s.icons.table)+" "+i.icon(s.icons.caret,"span"),tooltip:r.table.table,data:{toggle:"dropdown"}}),i.dropdown({className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(i){var n=i.find(".note-dimension-picker-mousecatcher");n.css({width:s.insertTableMaxSize.col+"em",height:s.insertTableMaxSize.row+"em"}).mousedown(e.createInvokeHandler("editor.insertTable")).on("mousemove",t.tableMoveHandler)}}).render()});e.memo("button.link",function(){return i.button({contents:i.icon(s.icons.link),tooltip:r.link.link+a("linkDialog.show"),click:e.createInvokeHandler("linkDialog.show")}).render()});e.memo("button.picture",function(){return i.button({contents:i.icon(s.icons.picture),tooltip:r.image.image,click:e.createInvokeHandler("imageDialog.show")}).render()});e.memo("button.video",function(){return i.button({contents:i.icon(s.icons.video),tooltip:r.video.video,click:e.createInvokeHandler("videoDialog.show")}).render()});e.memo("button.hr",function(){return i.button({contents:i.icon(s.icons.minus),tooltip:r.hr.insert+a("insertHorizontalRule"),click:e.createInvokeHandler("editor.insertHorizontalRule")}).render()});e.memo("button.fullscreen",function(){return i.button({className:"btn-fullscreen",contents:i.icon(s.icons.arrowsAlt),tooltip:r.options.fullscreen,click:e.createInvokeHandler("fullscreen.toggle")}).render()});e.memo("button.codeview",function(){return i.button({className:"btn-codeview",contents:i.icon(s.icons.code),tooltip:r.options.codeview,click:e.createInvokeHandler("codeview.toggle")}).render()});e.memo("button.redo",function(){return i.button({contents:i.icon(s.icons.redo),tooltip:r.history.redo+a("redo"),click:e.createInvokeHandler("editor.redo")}).render()});e.memo("button.undo",function(){return i.button({contents:i.icon(s.icons.undo),tooltip:r.history.undo+a("undo"),click:e.createInvokeHandler("editor.undo")}).render()});e.memo("button.help",function(){return i.button({contents:i.icon(s.icons.question),tooltip:r.options.help,click:e.createInvokeHandler("helpDialog.show")}).render()})};this.addImagePopoverButtons=function(){e.memo("button.imageSize100",function(){return i.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:r.image.resizeFull,click:e.createInvokeHandler("editor.resize","1")}).render()});e.memo("button.imageSize50",function(){return i.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:r.image.resizeHalf,click:e.createInvokeHandler("editor.resize","0.5")}).render()});e.memo("button.imageSize25",function(){return i.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:r.image.resizeQuarter,click:e.createInvokeHandler("editor.resize","0.25")}).render()});e.memo("button.floatLeft",function(){return i.button({contents:i.icon(s.icons.alignLeft),tooltip:r.image.floatLeft,click:e.createInvokeHandler("editor.floatMe","left")}).render()});e.memo("button.floatRight",function(){return i.button({contents:i.icon(s.icons.alignRight),tooltip:r.image.floatRight,click:e.createInvokeHandler("editor.floatMe","right")}).render()});e.memo("button.floatNone",function(){return i.button({contents:i.icon(s.icons.alignJustify),tooltip:r.image.floatNone,click:e.createInvokeHandler("editor.floatMe","none")}).render()});e.memo("button.removeMedia",function(){return i.button({contents:i.icon(s.icons.trash),tooltip:r.image.remove,click:e.createInvokeHandler("editor.removeMedia")}).render()})};this.addLinkPopoverButtons=function(){e.memo("button.linkDialogShow",function(){return i.button({contents:i.icon(s.icons.link),tooltip:r.link.edit,click:e.createInvokeHandler("linkDialog.show")}).render()});e.memo("button.unlink",function(){return i.button({contents:i.icon(s.icons.unlink),tooltip:r.link.unlink,click:e.createInvokeHandler("editor.unlink")}).render()})};this.build=function(t,n){for(var s=0,r=n.length;s<r;s++){var o=n[s];var a=o[0];var l=o[1];var h=i.buttonGroup({className:"note-"+a}).render();for(var d=0,u=l.length;d<u;d++){var f=e.memo("button."+l[d]);if(f){h.append(typeof f==="function"?f(e):f)}}h.appendTo(t)}};this.updateCurrentStyle=function(){var i=e.invoke("editor.currentStyle");this.updateBtnStates({".note-btn-bold":function(){return i["font-bold"]==="bold"},".note-btn-italic":function(){return i["font-italic"]==="italic"},".note-btn-underline":function(){return i["font-underline"]==="underline"},".note-btn-subscript":function(){return i["font-subscript"]==="subscript"},".note-btn-superscript":function(){return i["font-superscript"]==="superscript"},".note-btn-strikethrough":function(){return i["font-strikethrough"]==="strikethrough"}});if(i["font-family"]){var s=i["font-family"].split(",").map(function(e){return e.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")});var r=list.find(s,t.isFontInstalled);n.find(".dropdown-fontname li a").each(function(){var e=$(this).data("value")+""===r+"";this.className=e?"checked":""});n.find(".note-current-fontname").text(r)}if(i["font-size"]){var o=i["font-size"];n.find(".dropdown-fontsize li a").each(function(){var e=$(this).data("value")+""===o+"";this.className=e?"checked":""});n.find(".note-current-fontsize").text(o)}if(i["line-height"]){var a=i["line-height"];n.find(".dropdown-line-height li a").each(function(){var e=$(this).data("value")+""===a+"";this.className=e?"checked":""})}};this.updateBtnStates=function(e){$.each(e,function(e,t){i.toggleBtnActive(n.find(e),t())})};this.tableMoveHandler=function(e){var t=18;var i=$(e.target.parentNode);var n=i.next();var r=i.find(".note-dimension-picker-mousecatcher");var o=i.find(".note-dimension-picker-highlighted");var a=i.find(".note-dimension-picker-unhighlighted");var l;if(e.offsetX===undefined){var h=$(e.target).offset();l={x:e.pageX-h.left,y:e.pageY-h.top}}else{l={x:e.offsetX,y:e.offsetY}}var d={c:Math.ceil(l.x/t)||1,r:Math.ceil(l.y/t)||1};o.css({width:d.c+"em",height:d.r+"em"});r.data("value",d.c+"x"+d.r);if(3<d.c&&d.c<s.insertTableMaxSize.col){a.css({width:d.c+1+"em"})}if(3<d.r&&d.r<s.insertTableMaxSize.row){a.css({height:d.r+1+"em"})}n.html(d.c+" x "+d.r)}};var Toolbar=function(e){var t=$.summernote.ui;var i=e.layoutInfo.note;var n=e.layoutInfo.toolbar;var s=e.options;this.shouldInitialize=function(){return!s.airMode};this.initialize=function(){s.toolbar=s.toolbar||[];if(!s.toolbar.length){n.hide()}else{e.invoke("buttons.build",n,s.toolbar)}if(s.toolbarContainer){n.appendTo(s.toolbarContainer)}i.on("summernote.keyup summernote.mouseup summernote.change",function(){e.invoke("buttons.updateCurrentStyle")});e.invoke("buttons.updateCurrentStyle")};this.destroy=function(){n.children().remove()};this.updateFullscreen=function(e){t.toggleBtnActive(n.find(".btn-fullscreen"),e)};this.updateCodeview=function(e){t.toggleBtnActive(n.find(".btn-codeview"),e);if(e){this.deactivate()}else{this.activate()}};this.activate=function(e){var i=n.find("button");if(!e){i=i.not(".btn-codeview")}t.toggleBtn(i,true)};this.deactivate=function(e){var i=n.find("button");if(!e){i=i.not(".btn-codeview")}t.toggleBtn(i,false)}};var LinkDialog=function(e){var t=this;var i=$.summernote.ui;var n=e.layoutInfo.editor;var s=e.options;var r=s.langInfo;this.initialize=function(){var e=s.dialogsInBody?$(document.body):n;var t='<div class="form-group">'+"<label>"+r.link.textToDisplay+"</label>"+'<input class="note-link-text form-control" type="text" />'+"</div>"+'<div class="form-group">'+"<label>"+r.link.url+"</label>"+'<input class="note-link-url form-control" type="text" value="http://" />'+"</div>"+(!s.disableLinkTarget?'<div class="checkbox">'+'<label for="sn-checkbox-open-in-new-window">'+'<input type="checkbox" id="sn-checkbox-open-in-new-window" checked />'+r.link.openInNewWindow+"</label>"+"</div>":"");var o='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+r.link.insert+"</button>";this.$dialog=i.dialog({className:"link-dialog",title:r.link.insert,fade:s.dialogsFade,body:t,footer:o}).render().appendTo(e)};this.destroy=function(){i.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(e,t){e.on("keypress",function(e){if(e.keyCode===key.code.ENTER){t.trigger("click")}})};this.toggleLinkBtn=function(e,t,n){i.toggleBtn(e,t.val()&&n.val())};this.showLinkDialog=function(n){return $.Deferred(function(s){var r=t.$dialog.find(".note-link-text"),o=t.$dialog.find(".note-link-url"),a=t.$dialog.find(".note-link-btn"),l=t.$dialog.find("input[type=checkbox]");i.onDialogShown(t.$dialog,function(){e.triggerEvent("dialog.shown");if(!n.url){n.url=n.text}r.val(n.text);var i=function(){t.toggleLinkBtn(a,r,o);n.text=r.val()};r.on("input",i).on("paste",function(){setTimeout(i,0)});var h=function(){t.toggleLinkBtn(a,r,o);if(!n.text){r.val(o.val())}};o.on("input",h).on("paste",function(){setTimeout(h,0)}).val(n.url).trigger("focus");t.toggleLinkBtn(a,r,o);t.bindEnterKey(o,a);t.bindEnterKey(r,a);var d=n.isNewWindow!==undefined?n.isNewWindow:e.options.linkTargetBlank;l.prop("checked",d);a.one("click",function(e){e.preventDefault();s.resolve({range:n.range,url:o.val(),text:r.val(),isNewWindow:l.is(":checked")});t.$dialog.modal("hide")})});i.onDialogHidden(t.$dialog,function(){r.off("input paste keypress");o.off("input paste keypress");a.off("click");if(s.state()==="pending"){s.reject()}});i.showDialog(t.$dialog)}).promise()};this.show=function(){var t=e.invoke("editor.getLinkInfo");e.invoke("editor.saveRange");this.showLinkDialog(t).then(function(t){e.invoke("editor.restoreRange");e.invoke("editor.createLink",t)}).fail(function(){e.invoke("editor.restoreRange")})};e.memo("help.linkDialog.show",s.langInfo.help["linkDialog.show"])};var LinkPopover=function(e){var t=this;var i=$.summernote.ui;var n=e.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){t.update()},"summernote.dialog.shown":function(){t.hide()}};this.shouldInitialize=function(){return!list.isEmpty(n.popover.link)};this.initialize=function(){this.$popover=i.popover({className:"note-link-popover",callback:function(e){var t=e.find(".popover-content");t.prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo("body");var t=this.$popover.find(".popover-content");e.invoke("buttons.build",t,n.popover.link)};this.destroy=function(){this.$popover.remove()};this.update=function(){if(!e.invoke("editor.hasFocus")){this.hide();return}var t=e.invoke("editor.createRange");if(t.isCollapsed()&&t.isOnAnchor()){var i=dom.ancestor(t.sc,dom.isAnchor);var n=$(i).attr("href");this.$popover.find("a").attr("href",n).html(n);var s=dom.posFromPlaceholder(i);this.$popover.css({display:"block",left:s.left,top:s.top})}else{this.hide()}};this.hide=function(){this.$popover.hide()}};var ImageDialog=function(e){var t=this;var i=$.summernote.ui;var n=e.layoutInfo.editor;var s=e.options;var r=s.langInfo;this.initialize=function(){var e=s.dialogsInBody?$(document.body):n;var t="";if(s.maximumImageFileSize){var o=Math.floor(Math.log(s.maximumImageFileSize)/Math.log(1024));
var a=(s.maximumImageFileSize/Math.pow(1024,o)).toFixed(2)*1+" "+" KMGTP"[o]+"B";t="<small>"+r.image.maximumFileSize+" : "+a+"</small>"}var l='<div class="form-group note-group-select-from-files">'+"<label>"+r.image.selectFromFiles+"</label>"+'<input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+t+"</div>"+'<div class="form-group note-group-image-url" style="overflow:auto;">'+"<label>"+r.image.url+"</label>"+'<input class="note-image-url form-control col-md-12" type="text" />'+"</div>";var h='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+r.image.insert+"</button>";this.$dialog=i.dialog({title:r.image.insert,fade:s.dialogsFade,body:l,footer:h}).render().appendTo(e)};this.destroy=function(){i.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(e,t){e.on("keypress",function(e){if(e.keyCode===key.code.ENTER){t.trigger("click")}})};this.show=function(){e.invoke("editor.saveRange");this.showImageDialog().then(function(n){i.hideDialog(t.$dialog);e.invoke("editor.restoreRange");if(typeof n==="string"){e.invoke("editor.insertImage",n)}else{e.invoke("editor.insertImagesOrCallback",n)}}).fail(function(){e.invoke("editor.restoreRange")})};this.showImageDialog=function(){return $.Deferred(function(n){var s=t.$dialog.find(".note-image-input"),r=t.$dialog.find(".note-image-url"),o=t.$dialog.find(".note-image-btn");i.onDialogShown(t.$dialog,function(){e.triggerEvent("dialog.shown");s.replaceWith(s.clone().on("change",function(){n.resolve(this.files||this.value)}).val(""));o.click(function(e){e.preventDefault();n.resolve(r.val())});r.on("keyup paste",function(){var e=r.val();i.toggleBtn(o,e)}).val("").trigger("focus");t.bindEnterKey(r,o)});i.onDialogHidden(t.$dialog,function(){s.off("change");r.off("keyup paste keypress");o.off("click");if(n.state()==="pending"){n.reject()}});i.showDialog(t.$dialog)})}};var ImagePopover=function(e){var t=$.summernote.ui;var i=e.options;this.shouldInitialize=function(){return!list.isEmpty(i.popover.image)};this.initialize=function(){this.$popover=t.popover({className:"note-image-popover"}).render().appendTo("body");var n=this.$popover.find(".popover-content");e.invoke("buttons.build",n,i.popover.image)};this.destroy=function(){this.$popover.remove()};this.update=function(e){if(dom.isImg(e)){var t=dom.posFromPlaceholder(e);this.$popover.css({display:"block",left:t.left,top:t.top})}else{this.hide()}};this.hide=function(){this.$popover.hide()}};var VideoDialog=function(e){var t=this;var i=$.summernote.ui;var n=e.layoutInfo.editor;var s=e.options;var r=s.langInfo;this.initialize=function(){var e=s.dialogsInBody?$(document.body):n;var t='<div class="form-group row-fluid">'+"<label>"+r.video.url+' <small class="text-muted">'+r.video.providers+"</small></label>"+'<input class="note-video-url form-control span12" type="text" />'+"</div>";var o='<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+r.video.insert+"</button>";this.$dialog=i.dialog({title:r.video.insert,fade:s.dialogsFade,body:t,footer:o}).render().appendTo(e)};this.destroy=function(){i.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(e,t){e.on("keypress",function(e){if(e.keyCode===key.code.ENTER){t.trigger("click")}})};this.createVideoNode=function(e){var t=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;var i=e.match(t);var n=/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/;var s=e.match(n);var r=/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/;var o=e.match(r);var a=/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/;var l=e.match(a);var h=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/;var d=e.match(h);var u=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/;var f=e.match(u);var c=/^.+.(mp4|m4v)$/;var p=e.match(c);var m=/^.+.(ogg|ogv)$/;var v=e.match(m);var g=/^.+.(webm)$/;var y=e.match(g);var b;if(i&&i[1].length===11){var w=i[1];b=$("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+w).attr("width","640").attr("height","360")}else if(s&&s[0].length){b=$("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+s[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true")}else if(o&&o[0].length){b=$("<iframe>").attr("frameborder",0).attr("src",o[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed")}else if(l&&l[3].length){b=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+l[3]).attr("width","640").attr("height","360")}else if(d&&d[2].length){b=$("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+d[2]).attr("width","640").attr("height","360")}else if(f&&f[1].length){b=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+f[1])}else if(p||v||y){b=$("<video controls>").attr("src",e).attr("width","640").attr("height","360")}else{return false}b.addClass("note-video-clip");return b[0]};this.show=function(){var n=e.invoke("editor.getSelectedText");e.invoke("editor.saveRange");this.showVideoDialog(n).then(function(n){i.hideDialog(t.$dialog);e.invoke("editor.restoreRange");var s=t.createVideoNode(n);if(s){e.invoke("editor.insertNode",s)}}).fail(function(){e.invoke("editor.restoreRange")})};this.showVideoDialog=function(n){return $.Deferred(function(s){var r=t.$dialog.find(".note-video-url"),o=t.$dialog.find(".note-video-btn");i.onDialogShown(t.$dialog,function(){e.triggerEvent("dialog.shown");r.val(n).on("input",function(){i.toggleBtn(o,r.val())}).trigger("focus");o.click(function(e){e.preventDefault();s.resolve(r.val())});t.bindEnterKey(r,o)});i.onDialogHidden(t.$dialog,function(){r.off("input");o.off("click");if(s.state()==="pending"){s.reject()}});i.showDialog(t.$dialog)})}};var HelpDialog=function(e){var t=this;var i=$.summernote.ui;var n=e.layoutInfo.editor;var s=e.options;var r=s.langInfo;this.createShortCutList=function(){var t=s.keyMap[agent.isMac?"mac":"pc"];return Object.keys(t).map(function(i){var n=t[i];var s=$('<div><div class="help-list-item"/></div>');s.append($("<label><kbd>"+i+"</kdb></label>").css({width:180,"margin-right":10})).append($("<span/>").html(e.memo("help."+n)||n));return s.html()}).join("")};this.initialize=function(){var e=s.dialogsInBody?$(document.body):n;var t=['<p class="text-center">','<a href="http://summernote.org/" target="_blank">Summernote 0.8.4</a> · ','<a href="https://github.com/summernote/summernote" target="_blank">Project</a> · ','<a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=i.dialog({title:r.options.help,fade:s.dialogsFade,body:this.createShortCutList(),footer:t,callback:function(e){e.find(".modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(e)};this.destroy=function(){i.hideDialog(this.$dialog);this.$dialog.remove()};this.showHelpDialog=function(){return $.Deferred(function(n){i.onDialogShown(t.$dialog,function(){e.triggerEvent("dialog.shown");n.resolve()});i.showDialog(t.$dialog)}).promise()};this.show=function(){e.invoke("editor.saveRange");this.showHelpDialog().then(function(){e.invoke("editor.restoreRange")})}};var AirPopover=function(e){var t=this;var i=$.summernote.ui;var n=e.options;var s=20;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){t.update()},"summernote.change summernote.dialog.shown":function(){t.hide()},"summernote.focusout":function(e,i){if(agent.isFF){return}if(!i.relatedTarget||!dom.ancestor(i.relatedTarget,func.eq(t.$popover[0]))){t.hide()}}};this.shouldInitialize=function(){return n.airMode&&!list.isEmpty(n.popover.air)};this.initialize=function(){this.$popover=i.popover({className:"note-air-popover"}).render().appendTo("body");var t=this.$popover.find(".popover-content");e.invoke("buttons.build",t,n.popover.air)};this.destroy=function(){this.$popover.remove()};this.update=function(){var t=e.invoke("editor.currentStyle");if(t.range&&!t.range.isCollapsed()){var i=list.last(t.range.getClientRects());if(i){var n=func.rect2bnd(i);this.$popover.css({display:"block",left:Math.max(n.left+n.width/2,0)-s,top:n.top+n.height})}}else{this.hide()}};this.hide=function(){this.$popover.hide()}};var HintPopover=function(e){var t=this;var i=$.summernote.ui;var n=5;var s=e.options.hint||[];var r=e.options.hintDirection||"bottom";var o=$.isArray(s)?s:[s];this.events={"summernote.keyup":function(e,i){if(!i.isDefaultPrevented()){t.handleKeyup(i)}},"summernote.keydown":function(e,i){t.handleKeydown(i)},"summernote.dialog.shown":function(){t.hide()}};this.shouldInitialize=function(){return o.length>0};this.initialize=function(){this.lastWordRange=null;this.$popover=i.popover({className:"note-hint-popover",hideArrow:true,direction:""}).render().appendTo("body");this.$popover.hide();this.$content=this.$popover.find(".popover-content");this.$content.on("click",".note-hint-item",function(){t.$content.find(".active").removeClass("active");$(this).addClass("active");t.replace()})};this.destroy=function(){this.$popover.remove()};this.selectItem=function(e){this.$content.find(".active").removeClass("active");e.addClass("active");this.$content[0].scrollTop=e[0].offsetTop-this.$content.innerHeight()/2};this.moveDown=function(){var e=this.$content.find(".note-hint-item.active");var t=e.next();if(t.length){this.selectItem(t)}else{var i=e.parent().next();if(!i.length){i=this.$content.find(".note-hint-group").first()}this.selectItem(i.find(".note-hint-item").first())}};this.moveUp=function(){var e=this.$content.find(".note-hint-item.active");var t=e.prev();if(t.length){this.selectItem(t)}else{var i=e.parent().prev();if(!i.length){i=this.$content.find(".note-hint-group").last()}this.selectItem(i.find(".note-hint-item").last())}};this.replace=function(){var t=this.$content.find(".note-hint-item.active");if(t.length){var i=this.nodeFromItem(t);this.lastWordRange.insertNode(i);range.createFromNode(i).collapse().select();this.lastWordRange=null;this.hide();e.triggerEvent("change",e.layoutInfo.editable.html(),e.layoutInfo.editable);e.invoke("editor.focus")}};this.nodeFromItem=function(e){var t=o[e.data("index")];var i=e.data("item");var n=t.content?t.content(i):i;if(typeof n==="string"){n=dom.createText(n)}return n};this.createItemTemplates=function(e,t){var i=o[e];return t.map(function(t,n){var s=$('<div class="note-hint-item"/>');s.append(i.template?i.template(t):t+"");s.data({index:e,item:t});if(e===0&&n===0){s.addClass("active")}return s})};this.handleKeydown=function(e){if(!this.$popover.is(":visible")){return}if(e.keyCode===key.code.ENTER){e.preventDefault();this.replace()}else if(e.keyCode===key.code.UP){e.preventDefault();this.moveUp()}else if(e.keyCode===key.code.DOWN){e.preventDefault();this.moveDown()}};this.searchKeyword=function(e,t,i){var n=o[e];if(n&&n.match.test(t)&&n.search){var s=n.match.exec(t);n.search(s[1],i)}else{i()}};this.createGroup=function(e,i){var n=$('<div class="note-hint-group note-hint-group-'+e+'"/>');this.searchKeyword(e,i,function(i){i=i||[];if(i.length){n.html(t.createItemTemplates(e,i));t.show()}});return n};this.handleKeyup=function(i){if(list.contains([key.code.ENTER,key.code.UP,key.code.DOWN],i.keyCode)){if(i.keyCode===key.code.ENTER){if(this.$popover.is(":visible")){return}}}else{var s=e.invoke("editor.createRange").getWordRange();var a=s.toString();if(o.length&&a){this.$content.empty();var l=func.rect2bnd(list.last(s.getClientRects()));if(l){this.$popover.hide();this.lastWordRange=s;o.forEach(function(e,i){if(e.match.test(a)){t.createGroup(i,a).appendTo(t.$content)}});if(r==="top"){this.$popover.css({left:l.left,top:l.top-this.$popover.outerHeight()-n})}else{this.$popover.css({left:l.left,top:l.top+l.height+n})}}}else{this.hide()}}};this.show=function(){this.$popover.show()};this.hide=function(){this.$popover.hide()}};$.summernote=$.extend($.summernote,{version:"0.8.4",ui:ui,dom:dom,plugins:{},options:{modules:{editor:Editor,clipboard:Clipboard,dropzone:Dropzone,codeview:Codeview,statusbar:Statusbar,fullscreen:Fullscreen,handle:Handle,hintPopover:HintPopover,autoLink:AutoLink,autoSync:AutoSync,placeholder:Placeholder,buttons:Buttons,toolbar:Toolbar,linkDialog:LinkDialog,linkPopover:LinkPopover,imageDialog:ImageDialog,imagePopover:ImagePopover,videoDialog:VideoDialog,helpDialog:HelpDialog,airPopover:AirPopover},buttons:{},lang:"en-US",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:false,width:null,height:null,linkTargetBlank:true,focus:false,tabSize:4,styleWithSpan:true,shortcuts:true,textareaAutoSync:true,direction:null,tooltip:"auto",styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:false,dialogsFade:false,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:true,lineNumbers:true},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})});(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){e(require("jquery"))}else{e(jQuery)}})(function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd){var t=e.fn.select2.amd}var t;(function(){if(!t||!t.requirejs){if(!t){t={}}else{i=t}var e,i,n;(function(t){var s,r,o,a,l={},h={},d={},u={},f=Object.prototype.hasOwnProperty,c=[].slice,p=/\.js$/;function m(e,t){return f.call(e,t)}function v(e,t){var i,n,s,r,o,a,l,h,u,f,c,m=t&&t.split("/"),v=d.map,g=v&&v["*"]||{};if(e&&e.charAt(0)==="."){if(t){e=e.split("/");o=e.length-1;if(d.nodeIdCompat&&p.test(e[o])){e[o]=e[o].replace(p,"")}e=m.slice(0,m.length-1).concat(e);for(u=0;u<e.length;u+=1){c=e[u];if(c==="."){e.splice(u,1);u-=1}else if(c===".."){if(u===1&&(e[2]===".."||e[0]==="..")){break}else if(u>0){e.splice(u-1,2);u-=2}}}e=e.join("/")}else if(e.indexOf("./")===0){e=e.substring(2)}}if((m||g)&&v){i=e.split("/");for(u=i.length;u>0;u-=1){n=i.slice(0,u).join("/");if(m){for(f=m.length;f>0;f-=1){s=v[m.slice(0,f).join("/")];if(s){s=s[n];if(s){r=s;a=u;break}}}}if(r){break}if(!l&&g&&g[n]){l=g[n];h=u}}if(!r&&l){r=l;a=h}if(r){i.splice(0,a,r);e=i.join("/")}}return e}function g(e,i){return function(){var n=c.call(arguments,0);if(typeof n[0]!=="string"&&n.length===1){n.push(null)}return r.apply(t,n.concat([e,i]))}}function y(e){return function(t){return v(t,e)}}function b(e){return function(t){l[e]=t}}function w(e){if(m(h,e)){var i=h[e];delete h[e];u[e]=true;s.apply(t,i)}if(!m(l,e)&&!m(u,e)){throw new Error("No "+e)}return l[e]}function _(e){var t,i=e?e.indexOf("!"):-1;if(i>-1){t=e.substring(0,i);e=e.substring(i+1,e.length)}return[t,e]}o=function(e,t){var i,n=_(e),s=n[0];e=n[1];if(s){s=v(s,t);i=w(s)}if(s){if(i&&i.normalize){e=i.normalize(e,y(t))}else{e=v(e,t)}}else{e=v(e,t);n=_(e);s=n[0];e=n[1];if(s){i=w(s)}}return{f:s?s+"!"+e:e,n:e,pr:s,p:i}};function x(e){return function(){return d&&d.config&&d.config[e]||{}}}a={require:function(e){return g(e)},exports:function(e){var t=l[e];if(typeof t!=="undefined"){return t}else{return l[e]={}}},module:function(e){return{id:e,uri:"",exports:l[e],config:x(e)}}};s=function(e,i,n,s){var r,d,f,c,p,v=[],y=typeof n,_;s=s||e;if(y==="undefined"||y==="function"){i=!i.length&&n.length?["require","exports","module"]:i;for(p=0;p<i.length;p+=1){c=o(i[p],s);d=c.f;if(d==="require"){v[p]=a.require(e)}else if(d==="exports"){v[p]=a.exports(e);_=true}else if(d==="module"){r=v[p]=a.module(e)}else if(m(l,d)||m(h,d)||m(u,d)){v[p]=w(d)}else if(c.p){c.p.load(c.n,g(s,true),b(d),{});v[p]=l[d]}else{throw new Error(e+" missing "+d)}}f=n?n.apply(l[e],v):undefined;if(e){if(r&&r.exports!==t&&r.exports!==l[e]){l[e]=r.exports}else if(f!==t||!_){l[e]=f}}}else if(e){l[e]=n}};e=i=r=function(e,i,n,l,h){if(typeof e==="string"){if(a[e]){return a[e](i)}return w(o(e,i).f)}else if(!e.splice){d=e;if(d.deps){r(d.deps,d.callback)}if(!i){return}if(i.splice){e=i;i=n;n=null}else{e=t}}i=i||function(){};if(typeof n==="function"){n=l;l=h}if(l){s(t,e,i,n)}else{setTimeout(function(){s(t,e,i,n)},4)}return r};r.config=function(e){return r(e)};e._defined=l;n=function(e,t,i){if(typeof e!=="string"){throw new Error("See almond README: incorrect module build, no module name")}if(!t.splice){i=t;t=[]}if(!m(l,e)&&!m(h,e)){h[e]=[e,t,i]}};n.amd={jQuery:true}})();t.requirejs=e;t.require=i;t.define=n}})();t.define("almond",function(){});t.define("jquery",[],function(){var t=e||$;if(t==null&&console&&console.error){console.error("Select2: An instance of jQuery or a jQuery-compatible library was not "+"found. Make sure that you are including jQuery before Select2 on your "+"web page.")}return t});t.define("select2/utils",["jquery"],function(e){var t={};t.Extend=function(e,t){var i={}.hasOwnProperty;function n(){this.constructor=e}for(var s in t){if(i.call(t,s)){e[s]=t[s]}}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e};function i(e){var t=e.prototype;var i=[];for(var n in t){var s=t[n];if(typeof s!=="function"){continue}if(n==="constructor"){continue}i.push(n)}return i}t.Decorate=function(e,t){var n=i(t);var s=i(e);function r(){var i=Array.prototype.unshift;var n=t.prototype.constructor.length;var s=e.prototype.constructor;if(n>0){i.call(arguments,e.prototype.constructor);s=t.prototype.constructor}s.apply(this,arguments)}t.displayName=e.displayName;function o(){this.constructor=r}r.prototype=new o;for(var a=0;a<s.length;a++){var l=s[a];r.prototype[l]=e.prototype[l]}var h=function(e){var i=function(){};if(e in r.prototype){i=r.prototype[e]}var n=t.prototype[e];return function(){var e=Array.prototype.unshift;e.call(arguments,i);return n.apply(this,arguments)}};for(var d=0;d<n.length;d++){var u=n[d];r.prototype[u]=h(u)}return r};var n=function(){this.listeners={}};n.prototype.on=function(e,t){this.listeners=this.listeners||{};if(e in this.listeners){this.listeners[e].push(t)}else{this.listeners[e]=[t]}};n.prototype.trigger=function(e){var t=Array.prototype.slice;var i=t.call(arguments,1);this.listeners=this.listeners||{};if(i==null){i=[]}if(i.length===0){i.push({})}i[0]._type=e;if(e in this.listeners){this.invoke(this.listeners[e],t.call(arguments,1))}if("*"in this.listeners){this.invoke(this.listeners["*"],arguments)}};n.prototype.invoke=function(e,t){for(var i=0,n=e.length;i<n;i++){e[i].apply(this,t)}};t.Observable=n;t.generateChars=function(e){var t="";for(var i=0;i<e;i++){var n=Math.floor(Math.random()*36);t+=n.toString(36)}return t};t.bind=function(e,t){return function(){e.apply(t,arguments)}};t._convertData=function(e){for(var t in e){var i=t.split("-");var n=e;if(i.length===1){continue}for(var s=0;s<i.length;s++){var r=i[s];r=r.substring(0,1).toLowerCase()+r.substring(1);if(!(r in n)){n[r]={}}if(s==i.length-1){n[r]=e[t]}n=n[r]}delete e[t]}return e};t.hasScroll=function(t,i){var n=e(i);var s=i.style.overflowX;var r=i.style.overflowY;if(s===r&&(r==="hidden"||r==="visible")){return false}if(s==="scroll"||r==="scroll"){return true}return n.innerHeight()<i.scrollHeight||n.innerWidth()<i.scrollWidth};t.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};if(typeof e!=="string"){return e}return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})};t.appendMany=function(t,i){if(e.fn.jquery.substr(0,3)==="1.7"){var n=e();e.map(i,function(e){n=n.add(e)});i=n}t.append(i)};return t});t.define("select2/results",["jquery","./utils"],function(e,t){function i(e,t,n){this.$element=e;this.data=n;this.options=t;i.__super__.constructor.call(this)}t.Extend(i,t.Observable);i.prototype.render=function(){var t=e('<ul class="select2-results__options" role="tree"></ul>');if(this.options.get("multiple")){t.attr("aria-multiselectable","true")}this.$results=t;return t};i.prototype.clear=function(){this.$results.empty()};i.prototype.displayMessage=function(t){var i=this.options.get("escapeMarkup");this.clear();this.hideLoading();var n=e('<li role="treeitem" aria-live="assertive"'+' class="select2-results__option"></li>');var s=this.options.get("translations").get(t.message);n.append(i(s(t.args)));n[0].className+=" select2-results__message";this.$results.append(n)};i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()};i.prototype.append=function(e){this.hideLoading();var t=[];if(e.results==null||e.results.length===0){if(this.$results.children().length===0){this.trigger("results:message",{message:"noResults"})}return}e.results=this.sort(e.results);for(var i=0;i<e.results.length;i++){var n=e.results[i];var s=this.option(n);t.push(s)}this.$results.append(t)};i.prototype.position=function(e,t){var i=t.find(".select2-results");i.append(e)};i.prototype.sort=function(e){var t=this.options.get("sorter");return t(e)};i.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]");var t=e.filter("[aria-selected=true]");if(t.length>0){t.first().trigger("mouseenter")}else{e.first().trigger("mouseenter")}this.ensureHighlightVisible()};i.prototype.setClasses=function(){var t=this;this.data.current(function(i){var n=e.map(i,function(e){return e.id.toString()});var s=t.$results.find(".select2-results__option[aria-selected]");s.each(function(){var t=e(this);var i=e.data(this,"data");var s=""+i.id;if(i.element!=null&&i.element.selected||i.element==null&&e.inArray(s,n)>-1){t.attr("aria-selected","true")}else{t.attr("aria-selected","false")}})})};i.prototype.showLoading=function(e){this.hideLoading();var t=this.options.get("translations").get("searching");var i={disabled:true,loading:true,text:t(e)};var n=this.option(i);n.className+=" loading-results";this.$results.prepend(n)};i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()};i.prototype.option=function(t){var i=document.createElement("li");i.className="select2-results__option";var n={role:"treeitem","aria-selected":"false"};if(t.disabled){delete n["aria-selected"];n["aria-disabled"]="true"}if(t.id==null){delete n["aria-selected"]}if(t._resultId!=null){i.id=t._resultId}if(t.title){i.title=t.title}if(t.children){n.role="group";n["aria-label"]=t.text;delete n["aria-selected"]}for(var s in n){var r=n[s];i.setAttribute(s,r)}if(t.children){var o=e(i);var a=document.createElement("strong");a.className="select2-results__group";var l=e(a);this.template(t,a);var h=[];for(var d=0;d<t.children.length;d++){var u=t.children[d];var f=this.option(u);h.push(f)}var c=e("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});c.append(h);o.append(a);o.append(c)}else{this.template(t,i)}e.data(i,"data",t);return i};i.prototype.bind=function(t,i){var n=this;var s=t.id+"-results";this.$results.attr("id",s);t.on("results:all",function(e){n.clear();n.append(e.data);if(t.isOpen()){n.setClasses();n.highlightFirstItem()}});t.on("results:append",function(e){n.append(e.data);if(t.isOpen()){n.setClasses()}});t.on("query",function(e){n.hideMessages();n.showLoading(e)});t.on("select",function(){if(!t.isOpen()){return}n.setClasses();n.highlightFirstItem()});t.on("unselect",function(){if(!t.isOpen()){return}n.setClasses();n.highlightFirstItem()});t.on("open",function(){n.$results.attr("aria-expanded","true");n.$results.attr("aria-hidden","false");n.setClasses();n.ensureHighlightVisible()});t.on("close",function(){n.$results.attr("aria-expanded","false");n.$results.attr("aria-hidden","true");n.$results.removeAttr("aria-activedescendant")});t.on("results:toggle",function(){var e=n.getHighlightedResults();if(e.length===0){return}e.trigger("mouseup")});t.on("results:select",function(){var e=n.getHighlightedResults();if(e.length===0){return}var t=e.data("data");if(e.attr("aria-selected")=="true"){n.trigger("close",{})}else{n.trigger("select",{data:t})}});t.on("results:previous",function(){var e=n.getHighlightedResults();var t=n.$results.find("[aria-selected]");var i=t.index(e);if(i===0){return}var s=i-1;if(e.length===0){s=0}var r=t.eq(s);r.trigger("mouseenter");var o=n.$results.offset().top;var a=r.offset().top;var l=n.$results.scrollTop()+(a-o);if(s===0){n.$results.scrollTop(0)}else if(a-o<0){n.$results.scrollTop(l)}});t.on("results:next",function(){var e=n.getHighlightedResults();var t=n.$results.find("[aria-selected]");var i=t.index(e);var s=i+1;if(s>=t.length){return}var r=t.eq(s);r.trigger("mouseenter");var o=n.$results.offset().top+n.$results.outerHeight(false);var a=r.offset().top+r.outerHeight(false);var l=n.$results.scrollTop()+a-o;if(s===0){n.$results.scrollTop(0)}else if(a>o){n.$results.scrollTop(l)}});t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")});t.on("results:message",function(e){n.displayMessage(e)});if(e.fn.mousewheel){this.$results.on("mousewheel",function(e){var t=n.$results.scrollTop();var i=n.$results.get(0).scrollHeight-t+e.deltaY;var s=e.deltaY>0&&t-e.deltaY<=0;var r=e.deltaY<0&&i<=n.$results.height();if(s){n.$results.scrollTop(0);e.preventDefault();e.stopPropagation()}else if(r){n.$results.scrollTop(n.$results.get(0).scrollHeight-n.$results.height());e.preventDefault();e.stopPropagation()}})}this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var i=e(this);var s=i.data("data");if(i.attr("aria-selected")==="true"){if(n.options.get("multiple")){n.trigger("unselect",{originalEvent:t,data:s})}else{n.trigger("close",{})}return}n.trigger("select",{originalEvent:t,data:s})});this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(t){var i=e(this).data("data");n.getHighlightedResults().removeClass("select2-results__option--highlighted");n.trigger("results:focus",{data:i,element:e(this)})})};i.prototype.getHighlightedResults=function(){var e=this.$results.find(".select2-results__option--highlighted");return e};i.prototype.destroy=function(){this.$results.remove()};i.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(e.length===0){return}var t=this.$results.find("[aria-selected]");var i=t.index(e);var n=this.$results.offset().top;var s=e.offset().top;var r=this.$results.scrollTop()+(s-n);var o=s-n;r-=e.outerHeight(false)*2;if(i<=2){this.$results.scrollTop(0)}else if(o>this.$results.outerHeight()||o<0){this.$results.scrollTop(r)}};i.prototype.template=function(t,i){var n=this.options.get("templateResult");var s=this.options.get("escapeMarkup");var r=n(t,i);if(r==null){i.style.display="none"}else if(typeof r==="string"){i.innerHTML=s(r)}else{e(i).append(r)}};return i});t.define("select2/keys",[],function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return e});t.define("select2/selection/base",["jquery","../utils","../keys"],function(e,t,i){function n(e,t){this.$element=e;this.options=t;n.__super__.constructor.call(this)}t.Extend(n,t.Observable);n.prototype.render=function(){var t=e('<span class="select2-selection" role="combobox" '+' aria-haspopup="true" aria-expanded="false">'+"</span>");this._tabindex=0;if(this.$element.data("old-tabindex")!=null){this._tabindex=this.$element.data("old-tabindex")}else if(this.$element.attr("tabindex")!=null){this._tabindex=this.$element.attr("tabindex")}t.attr("title",this.$element.attr("title"));t.attr("tabindex",this._tabindex);this.$selection=t;return t};n.prototype.bind=function(e,t){var n=this;var s=e.id+"-container";var r=e.id+"-results";this.container=e;this.$selection.on("focus",function(e){n.trigger("focus",e)});this.$selection.on("blur",function(e){n._handleBlur(e)});this.$selection.on("keydown",function(e){n.trigger("keypress",e);if(e.which===i.SPACE){e.preventDefault()}});e.on("results:focus",function(e){n.$selection.attr("aria-activedescendant",e.data._resultId)});e.on("selection:update",function(e){n.update(e.data)});e.on("open",function(){n.$selection.attr("aria-expanded","true");
n.$selection.attr("aria-owns",r);n._attachCloseHandler(e)});e.on("close",function(){n.$selection.attr("aria-expanded","false");n.$selection.removeAttr("aria-activedescendant");n.$selection.removeAttr("aria-owns");n.$selection.focus();n._detachCloseHandler(e)});e.on("enable",function(){n.$selection.attr("tabindex",n._tabindex)});e.on("disable",function(){n.$selection.attr("tabindex","-1")})};n.prototype._handleBlur=function(t){var i=this;window.setTimeout(function(){if(document.activeElement==i.$selection[0]||e.contains(i.$selection[0],document.activeElement)){return}i.trigger("blur",t)},1)};n.prototype._attachCloseHandler=function(t){var i=this;e(document.body).on("mousedown.select2."+t.id,function(t){var i=e(t.target);var n=i.closest(".select2");var s=e(".select2.select2-container--open");s.each(function(){var t=e(this);if(this==n[0]){return}var i=t.data("element");i.select2("close")})})};n.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)};n.prototype.position=function(e,t){var i=t.find(".selection");i.append(e)};n.prototype.destroy=function(){this._detachCloseHandler(this.container)};n.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")};return n});t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,i,n){function s(){s.__super__.constructor.apply(this,arguments)}i.Extend(s,t);s.prototype.render=function(){var e=s.__super__.render.call(this);e.addClass("select2-selection--single");e.html('<span class="select2-selection__rendered"></span>'+'<span class="select2-selection__arrow" role="presentation">'+'<b role="presentation"></b>'+"</span>");return e};s.prototype.bind=function(e,t){var i=this;s.__super__.bind.apply(this,arguments);var n=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n);this.$selection.attr("aria-labelledby",n);this.$selection.on("mousedown",function(e){if(e.which!==1){return}i.trigger("toggle",{originalEvent:e})});this.$selection.on("focus",function(e){});this.$selection.on("blur",function(e){});e.on("focus",function(t){if(!e.isOpen()){i.$selection.focus()}});e.on("selection:update",function(e){i.update(e.data)})};s.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()};s.prototype.display=function(e,t){var i=this.options.get("templateSelection");var n=this.options.get("escapeMarkup");return n(i(e,t))};s.prototype.selectionContainer=function(){return e("<span></span>")};s.prototype.update=function(e){if(e.length===0){this.clear();return}var t=e[0];var i=this.$selection.find(".select2-selection__rendered");var n=this.display(t,i);i.empty().append(n);i.prop("title",t.title||t.text)};return s});t.define("select2/selection/multiple",["jquery","./base","../utils"],function(e,t,i){function n(e,t){n.__super__.constructor.apply(this,arguments)}i.Extend(n,t);n.prototype.render=function(){var e=n.__super__.render.call(this);e.addClass("select2-selection--multiple");e.html('<ul class="select2-selection__rendered"></ul>');return e};n.prototype.bind=function(t,i){var s=this;n.__super__.bind.apply(this,arguments);this.$selection.on("click",function(e){s.trigger("toggle",{originalEvent:e})});this.$selection.on("click",".select2-selection__choice__remove",function(t){if(s.options.get("disabled")){return}var i=e(this);var n=i.parent();var r=n.data("data");s.trigger("unselect",{originalEvent:t,data:r})})};n.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()};n.prototype.display=function(e,t){var i=this.options.get("templateSelection");var n=this.options.get("escapeMarkup");return n(i(e,t))};n.prototype.selectionContainer=function(){var t=e('<li class="select2-selection__choice">'+'<span class="select2-selection__choice__remove" role="presentation">'+"&times;"+"</span>"+"</li>");return t};n.prototype.update=function(e){this.clear();if(e.length===0){return}var t=[];for(var n=0;n<e.length;n++){var s=e[n];var r=this.selectionContainer();var o=this.display(s,r);r.append(o);r.prop("title",s.title||s.text);r.data("data",s);t.push(r)}var a=this.$selection.find(".select2-selection__rendered");i.appendMany(a,t)};return n});t.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));e.call(this,t,i)}t.prototype.normalizePlaceholder=function(e,t){if(typeof t==="string"){t={id:"",text:t}}return t};t.prototype.createPlaceholder=function(e,t){var i=this.selectionContainer();i.html(this.display(t));i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice");return i};t.prototype.update=function(e,t){var i=t.length==1&&t[0].id!=this.placeholder.id;var n=t.length>1;if(n||i){return e.call(this,t)}this.clear();var s=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(s)};return t});t.define("select2/selection/allowClear",["jquery","../keys"],function(e,t){function i(){}i.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i);if(this.placeholder==null){if(this.options.get("debug")&&window.console&&console.error){console.error("Select2: The `allowClear` option should be used in combination "+"with the `placeholder` option.")}}this.$selection.on("mousedown",".select2-selection__clear",function(e){n._handleClear(e)});t.on("keypress",function(e){n._handleKeyboardClear(e,t)})};i.prototype._handleClear=function(e,t){if(this.options.get("disabled")){return}var i=this.$selection.find(".select2-selection__clear");if(i.length===0){return}t.stopPropagation();var n=i.data("data");for(var s=0;s<n.length;s++){var r={data:n[s]};this.trigger("unselect",r);if(r.prevented){return}}this.$element.val(this.placeholder.id).trigger("change");this.trigger("toggle",{})};i.prototype._handleKeyboardClear=function(e,i,n){if(n.isOpen()){return}if(i.which==t.DELETE||i.which==t.BACKSPACE){this._handleClear(i)}};i.prototype.update=function(t,i){t.call(this,i);if(this.$selection.find(".select2-selection__placeholder").length>0||i.length===0){return}var n=e('<span class="select2-selection__clear">'+"&times;"+"</span>");n.data("data",i);this.$selection.find(".select2-selection__rendered").prepend(n)};return i});t.define("select2/selection/search",["jquery","../utils","../keys"],function(e,t,i){function n(e,t,i){e.call(this,t,i)}n.prototype.render=function(t){var i=e('<li class="select2-search select2-search--inline">'+'<input class="select2-search__field" type="search" tabindex="-1"'+' autocomplete="off" autocorrect="off" autocapitalize="off"'+' spellcheck="false" role="textbox" aria-autocomplete="list" />'+"</li>");this.$searchContainer=i;this.$search=i.find("input");var n=t.call(this);this._transferTabIndex();return n};n.prototype.bind=function(e,t,n){var s=this;e.call(this,t,n);t.on("open",function(){s.$search.trigger("focus")});t.on("close",function(){s.$search.val("");s.$search.removeAttr("aria-activedescendant");s.$search.trigger("focus")});t.on("enable",function(){s.$search.prop("disabled",false);s._transferTabIndex()});t.on("disable",function(){s.$search.prop("disabled",true)});t.on("focus",function(e){s.$search.trigger("focus")});t.on("results:focus",function(e){s.$search.attr("aria-activedescendant",e.id)});this.$selection.on("focusin",".select2-search--inline",function(e){s.trigger("focus",e)});this.$selection.on("focusout",".select2-search--inline",function(e){s._handleBlur(e)});this.$selection.on("keydown",".select2-search--inline",function(e){e.stopPropagation();s.trigger("keypress",e);s._keyUpPrevented=e.isDefaultPrevented();var t=e.which;if(t===i.BACKSPACE&&s.$search.val()===""){var n=s.$searchContainer.prev(".select2-selection__choice");if(n.length>0){var r=n.data("data");s.searchRemoveChoice(r);e.preventDefault()}}});var r=document.documentMode;var o=r&&r<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){if(o){s.$selection.off("input.search input.searchcheck");return}s.$selection.off("keyup.search")});this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(o&&e.type==="input"){s.$selection.off("input.search input.searchcheck");return}var t=e.which;if(t==i.SHIFT||t==i.CTRL||t==i.ALT){return}if(t==i.TAB){return}s.handleSearch(e)})};n.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex"));this.$selection.attr("tabindex","-1")};n.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)};n.prototype.update=function(e,t){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder","");e.call(this,t);this.$selection.find(".select2-selection__rendered").append(this.$searchContainer);this.resizeSearch();if(i){this.$search.focus()}};n.prototype.handleSearch=function(){this.resizeSearch();if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=false};n.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t});this.$search.val(t.text);this.handleSearch()};n.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";if(this.$search.attr("placeholder")!==""){e=this.$selection.find(".select2-selection__rendered").innerWidth()}else{var t=this.$search.val().length+1;e=t*.75+"em"}this.$search.css("width",e)};return n});t.define("select2/selection/eventRelay",["jquery"],function(e){function t(){}t.prototype.bind=function(t,i,n){var s=this;var r=["open","opening","close","closing","select","selecting","unselect","unselecting"];var o=["opening","closing","selecting","unselecting"];t.call(this,i,n);i.on("*",function(t,i){if(e.inArray(t,r)===-1){return}i=i||{};var n=e.Event("select2:"+t,{params:i});s.$element.trigger(n);if(e.inArray(t,o)===-1){return}i.prevented=n.isDefaultPrevented()})};return t});t.define("select2/translation",["jquery","require"],function(e,t){function i(e){this.dict=e||{}}i.prototype.all=function(){return this.dict};i.prototype.get=function(e){return this.dict[e]};i.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)};i._cache={};i.loadPath=function(e){if(!(e in i._cache)){var n=t(e);i._cache[e]=n}return new i(i._cache[e])};return i});t.define("select2/diacritics",[],function(){var e={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};return e});t.define("select2/data/base",["../utils"],function(e){function t(e,i){t.__super__.constructor.call(this)}e.Extend(t,e.Observable);t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")};t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")};t.prototype.bind=function(e,t){};t.prototype.destroy=function(){};t.prototype.generateResultId=function(t,i){var n=t.id+"-result-";n+=e.generateChars(4);if(i.id!=null){n+="-"+i.id.toString()}else{n+="-"+e.generateChars(4)}return n};return t});t.define("select2/data/select",["./base","../utils","jquery"],function(e,t,i){function n(e,t){this.$element=e;this.options=t;n.__super__.constructor.call(this)}t.Extend(n,e);n.prototype.current=function(e){var t=[];var n=this;this.$element.find(":selected").each(function(){var e=i(this);var s=n.item(e);t.push(s)});e(t)};n.prototype.select=function(e){var t=this;e.selected=true;if(i(e.element).is("option")){e.element.selected=true;this.$element.trigger("change");return}if(this.$element.prop("multiple")){this.current(function(n){var s=[];e=[e];e.push.apply(e,n);for(var r=0;r<e.length;r++){var o=e[r].id;if(i.inArray(o,s)===-1){s.push(o)}}t.$element.val(s);t.$element.trigger("change")})}else{var n=e.id;this.$element.val(n);this.$element.trigger("change")}};n.prototype.unselect=function(e){var t=this;if(!this.$element.prop("multiple")){return}e.selected=false;if(i(e.element).is("option")){e.element.selected=false;this.$element.trigger("change");return}this.current(function(n){var s=[];for(var r=0;r<n.length;r++){var o=n[r].id;if(o!==e.id&&i.inArray(o,s)===-1){s.push(o)}}t.$element.val(s);t.$element.trigger("change")})};n.prototype.bind=function(e,t){var i=this;this.container=e;e.on("select",function(e){i.select(e.data)});e.on("unselect",function(e){i.unselect(e.data)})};n.prototype.destroy=function(){this.$element.find("*").each(function(){i.removeData(this,"data")})};n.prototype.query=function(e,t){var n=[];var s=this;var r=this.$element.children();r.each(function(){var t=i(this);if(!t.is("option")&&!t.is("optgroup")){return}var r=s.item(t);var o=s.matches(e,r);if(o!==null){n.push(o)}});t({results:n})};n.prototype.addOptions=function(e){t.appendMany(this.$element,e)};n.prototype.option=function(e){var t;if(e.children){t=document.createElement("optgroup");t.label=e.text}else{t=document.createElement("option");if(t.textContent!==undefined){t.textContent=e.text}else{t.innerText=e.text}}if(e.id){t.value=e.id}if(e.disabled){t.disabled=true}if(e.selected){t.selected=true}if(e.title){t.title=e.title}var n=i(t);var s=this._normalizeItem(e);s.element=t;i.data(t,"data",s);return n};n.prototype.item=function(e){var t={};t=i.data(e[0],"data");if(t!=null){return t}if(e.is("option")){t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")}}else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};var n=e.children("option");var s=[];for(var r=0;r<n.length;r++){var o=i(n[r]);var a=this.item(o);s.push(a)}t.children=s}t=this._normalizeItem(t);t.element=e[0];i.data(e[0],"data",t);return t};n.prototype._normalizeItem=function(e){if(!i.isPlainObject(e)){e={id:e,text:e}}e=i.extend({},{text:""},e);var t={selected:false,disabled:false};if(e.id!=null){e.id=e.id.toString()}if(e.text!=null){e.text=e.text.toString()}if(e._resultId==null&&e.id&&this.container!=null){e._resultId=this.generateResultId(this.container,e)}return i.extend({},t,e)};n.prototype.matches=function(e,t){var i=this.options.get("matcher");return i(e,t)};return n});t.define("select2/data/array",["./select","../utils","jquery"],function(e,t,i){function n(e,t){var i=t.get("data")||[];n.__super__.constructor.call(this,e,t);this.addOptions(this.convertToOptions(i))}t.Extend(n,e);n.prototype.select=function(e){var t=this.$element.find("option").filter(function(t,i){return i.value==e.id.toString()});if(t.length===0){t=this.option(e);this.addOptions(t)}n.__super__.select.call(this,e)};n.prototype.convertToOptions=function(e){var n=this;var s=this.$element.find("option");var r=s.map(function(){return n.item(i(this)).id}).get();var o=[];function a(e){return function(){return i(this).val()==e.id}}for(var l=0;l<e.length;l++){var h=this._normalizeItem(e[l]);if(i.inArray(h.id,r)>=0){var d=s.filter(a(h));var u=this.item(d);var f=i.extend(true,{},h,u);var c=this.option(f);d.replaceWith(c);continue}var p=this.option(h);if(h.children){var m=this.convertToOptions(h.children);t.appendMany(p,m)}o.push(p)}return o};return n});t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,i){function n(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax"));if(this.ajaxOptions.processResults!=null){this.processResults=this.ajaxOptions.processResults}n.__super__.constructor.call(this,e,t)}t.Extend(n,e);n.prototype._applyDefaults=function(e){var t={data:function(e){return i.extend({},e,{q:e.term})},transport:function(e,t,n){var s=i.ajax(e);s.then(t);s.fail(n);return s}};return i.extend({},t,e,true)};n.prototype.processResults=function(e){return e};n.prototype.query=function(e,t){var n=[];var s=this;if(this._request!=null){if(i.isFunction(this._request.abort)){this._request.abort()}this._request=null}var r=i.extend({type:"GET"},this.ajaxOptions);if(typeof r.url==="function"){r.url=r.url.call(this.$element,e)}if(typeof r.data==="function"){r.data=r.data.call(this.$element,e)}function o(){var n=r.transport(r,function(n){var r=s.processResults(n,e);if(s.options.get("debug")&&window.console&&console.error){if(!r||!r.results||!i.isArray(r.results)){console.error("Select2: The AJAX results did not return an array in the "+"`results` key of the response.")}}t(r)},function(){if(n.status&&n.status==="0"){return}s.trigger("results:message",{message:"errorLoading"})});s._request=n}if(this.ajaxOptions.delay&&e.term!=null){if(this._queryTimeout){window.clearTimeout(this._queryTimeout)}this._queryTimeout=window.setTimeout(o,this.ajaxOptions.delay)}else{o()}};return n});t.define("select2/data/tags",["jquery"],function(e){function t(t,i,n){var s=n.get("tags");var r=n.get("createTag");if(r!==undefined){this.createTag=r}var o=n.get("insertTag");if(o!==undefined){this.insertTag=o}t.call(this,i,n);if(e.isArray(s)){for(var a=0;a<s.length;a++){var l=s[a];var h=this._normalizeItem(l);var d=this.option(h);this.$element.append(d)}}}t.prototype.query=function(e,t,i){var n=this;this._removeOldTags();if(t.term==null||t.page!=null){e.call(this,t,i);return}function s(e,r){var o=e.results;for(var a=0;a<o.length;a++){var l=o[a];var h=l.children!=null&&!s({results:l.children},true);var d=l.text===t.term;if(d||h){if(r){return false}e.data=o;i(e);return}}if(r){return true}var u=n.createTag(t);if(u!=null){var f=n.option(u);f.attr("data-select2-tag",true);n.addOptions([f]);n.insertTag(o,u)}e.results=o;i(e)}e.call(this,t,s)};t.prototype.createTag=function(t,i){var n=e.trim(i.term);if(n===""){return null}return{id:n,text:n}};t.prototype.insertTag=function(e,t,i){t.unshift(i)};t.prototype._removeOldTags=function(t){var i=this._lastTag;var n=this.$element.find("option[data-select2-tag]");n.each(function(){if(this.selected){return}e(this).remove()})};return t});t.define("select2/data/tokenizer",["jquery"],function(e){function t(e,t,i){var n=i.get("tokenizer");if(n!==undefined){this.tokenizer=n}e.call(this,t,i)}t.prototype.bind=function(e,t,i){e.call(this,t,i);this.$search=t.dropdown.$search||t.selection.$search||i.find(".select2-search__field")};t.prototype.query=function(t,i,n){var s=this;function r(t){var i=s._normalizeItem(t);var n=s.$element.find("option").filter(function(){return e(this).val()===i.id});if(!n.length){var r=s.option(i);r.attr("data-select2-tag",true);s._removeOldTags();s.addOptions([r])}o(i)}function o(e){s.trigger("select",{data:e})}i.term=i.term||"";var a=this.tokenizer(i,this.options,r);if(a.term!==i.term){if(this.$search.length){this.$search.val(a.term);this.$search.focus()}i.term=a.term}t.call(this,i,n)};t.prototype.tokenizer=function(t,i,n,s){var r=n.get("tokenSeparators")||[];var o=i.term;var a=0;var l=this.createTag||function(e){return{id:e.term,text:e.term}};while(a<o.length){var h=o[a];if(e.inArray(h,r)===-1){a++;continue}var d=o.substr(0,a);var u=e.extend({},i,{term:d});var f=l(u);if(f==null){a++;continue}s(f);o=o.substr(a+1)||"";a=0}return{term:o}};return t});t.define("select2/data/minimumInputLength",[],function(){function e(e,t,i){this.minimumInputLength=i.get("minimumInputLength");e.call(this,t,i)}e.prototype.query=function(e,t,i){t.term=t.term||"";if(t.term.length<this.minimumInputLength){this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}});return}e.call(this,t,i)};return e});t.define("select2/data/maximumInputLength",[],function(){function e(e,t,i){this.maximumInputLength=i.get("maximumInputLength");e.call(this,t,i)}e.prototype.query=function(e,t,i){t.term=t.term||"";if(this.maximumInputLength>0&&t.term.length>this.maximumInputLength){this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}});return}e.call(this,t,i)};return e});t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,i){this.maximumSelectionLength=i.get("maximumSelectionLength");e.call(this,t,i)}e.prototype.query=function(e,t,i){var n=this;this.current(function(s){var r=s!=null?s.length:0;if(n.maximumSelectionLength>0&&r>=n.maximumSelectionLength){n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}});return}e.call(n,t,i)})};return e});t.define("select2/dropdown",["jquery","./utils"],function(e,t){function i(e,t){this.$element=e;this.options=t;i.__super__.constructor.call(this)}t.Extend(i,t.Observable);i.prototype.render=function(){var t=e('<span class="select2-dropdown">'+'<span class="select2-results"></span>'+"</span>");t.attr("dir",this.options.get("dir"));this.$dropdown=t;return t};i.prototype.bind=function(){};i.prototype.position=function(e,t){};i.prototype.destroy=function(){this.$dropdown.remove()};return i});t.define("select2/dropdown/search",["jquery","../utils"],function(e,t){function i(){}i.prototype.render=function(t){var i=t.call(this);var n=e('<span class="select2-search select2-search--dropdown">'+'<input class="select2-search__field" type="search" tabindex="-1"'+' autocomplete="off" autocorrect="off" autocapitalize="off"'+' spellcheck="false" role="textbox" />'+"</span>");this.$searchContainer=n;this.$search=n.find("input");i.prepend(n);return i};i.prototype.bind=function(t,i,n){var s=this;t.call(this,i,n);this.$search.on("keydown",function(e){s.trigger("keypress",e);s._keyUpPrevented=e.isDefaultPrevented()});this.$search.on("input",function(t){e(this).off("keyup")});this.$search.on("keyup input",function(e){s.handleSearch(e)});i.on("open",function(){s.$search.attr("tabindex",0);s.$search.focus();window.setTimeout(function(){s.$search.focus()},0)});i.on("close",function(){s.$search.attr("tabindex",-1);s.$search.val("")});i.on("focus",function(){if(i.isOpen()){s.$search.focus()}});i.on("results:all",function(e){if(e.query.term==null||e.query.term===""){var t=s.showSearch(e);if(t){s.$searchContainer.removeClass("select2-search--hide")}else{s.$searchContainer.addClass("select2-search--hide")}}})};i.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=false};i.prototype.showSearch=function(e,t){return true};return i});t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));e.call(this,t,i,n)}e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results);e.call(this,t)};e.prototype.normalizePlaceholder=function(e,t){if(typeof t==="string"){t={id:"",text:t}}return t};e.prototype.removePlaceholder=function(e,t){var i=t.slice(0);for(var n=t.length-1;n>=0;n--){var s=t[n];if(this.placeholder.id===s.id){i.splice(n,1)}}return i};return e});t.define("select2/dropdown/infiniteScroll",["jquery"],function(e){function t(e,t,i,n){this.lastParams={};e.call(this,t,i,n);this.$loadingMore=this.createLoadingMore();this.loading=false}t.prototype.append=function(e,t){this.$loadingMore.remove();this.loading=false;e.call(this,t);if(this.showLoadingMore(t)){this.$results.append(this.$loadingMore)}};t.prototype.bind=function(t,i,n){var s=this;t.call(this,i,n);i.on("query",function(e){s.lastParams=e;s.loading=true});i.on("query:append",function(e){s.lastParams=e;s.loading=true});this.$results.on("scroll",function(){var t=e.contains(document.documentElement,s.$loadingMore[0]);if(s.loading||!t){return}var i=s.$results.offset().top+s.$results.outerHeight(false);var n=s.$loadingMore.offset().top+s.$loadingMore.outerHeight(false);if(i+50>=n){s.loadMore()}})};t.prototype.loadMore=function(){this.loading=true;var t=e.extend({},{page:1},this.lastParams);t.page++;this.trigger("query:append",t)};t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more};t.prototype.createLoadingMore=function(){var t=e("<li "+'class="select2-results__option select2-results__option--load-more"'+'role="treeitem" aria-disabled="true"></li>');var i=this.options.get("translations").get("loadingMore");t.html(i(this.lastParams));return t};return t});t.define("select2/dropdown/attachBody",["jquery","../utils"],function(e,t){function i(t,i,n){this.$dropdownParent=n.get("dropdownParent")||e(document.body);t.call(this,i,n)}i.prototype.bind=function(e,t,i){var n=this;var s=false;e.call(this,t,i);t.on("open",function(){n._showDropdown();n._attachPositioningHandler(t);if(!s){s=true;t.on("results:all",function(){n._positionDropdown();n._resizeDropdown()});t.on("results:append",function(){n._positionDropdown();n._resizeDropdown()})}});t.on("close",function(){n._hideDropdown();n._detachPositioningHandler(t)});this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})};i.prototype.destroy=function(e){e.call(this);this.$dropdownContainer.remove()};i.prototype.position=function(e,t,i){t.attr("class",i.attr("class"));t.removeClass("select2");t.addClass("select2-container--open");t.css({position:"absolute",top:-999999});this.$container=i};i.prototype.render=function(t){var i=e("<span></span>");var n=t.call(this);i.append(n);this.$dropdownContainer=i;return i};i.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()};i.prototype._attachPositioningHandler=function(i,n){var s=this;var r="scroll.select2."+n.id;var o="resize.select2."+n.id;var a="orientationchange.select2."+n.id;var l=this.$container.parents().filter(t.hasScroll);l.each(function(){e(this).data("select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})});l.on(r,function(t){var i=e(this).data("select2-scroll-position");e(this).scrollTop(i.y)});e(window).on(r+" "+o+" "+a,function(e){s._positionDropdown();
s._resizeDropdown()})};i.prototype._detachPositioningHandler=function(i,n){var s="scroll.select2."+n.id;var r="resize.select2."+n.id;var o="orientationchange.select2."+n.id;var a=this.$container.parents().filter(t.hasScroll);a.off(s);e(window).off(s+" "+r+" "+o)};i.prototype._positionDropdown=function(){var t=e(window);var i=this.$dropdown.hasClass("select2-dropdown--above");var n=this.$dropdown.hasClass("select2-dropdown--below");var s=null;var r=this.$container.offset();r.bottom=r.top+this.$container.outerHeight(false);var o={height:this.$container.outerHeight(false)};o.top=r.top;o.bottom=r.top+o.height;var a={height:this.$dropdown.outerHeight(false)};var l={top:t.scrollTop(),bottom:t.scrollTop()+t.height()};var h=l.top<r.top-a.height;var d=l.bottom>r.bottom+a.height;var u={left:r.left,top:o.bottom};var f=this.$dropdownParent;if(f.css("position")==="static"){f=f.offsetParent()}var c=f.offset();u.top-=c.top;u.left-=c.left;if(!i&&!n){s="below"}if(!d&&h&&!i){s="above"}else if(!h&&d&&i){s="below"}if(s=="above"||i&&s!=="below"){u.top=o.top-c.top-a.height}if(s!=null){this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+s);this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+s)}this.$dropdownContainer.css(u)};i.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(false)+"px"};if(this.options.get("dropdownAutoWidth")){e.minWidth=e.width;e.position="relative";e.width="auto"}this.$dropdown.css(e)};i.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown()};return i});t.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(t){var i=0;for(var n=0;n<t.length;n++){var s=t[n];if(s.children){i+=e(s.children)}else{i++}}return i}function t(e,t,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch");if(this.minimumResultsForSearch<0){this.minimumResultsForSearch=Infinity}e.call(this,t,i,n)}t.prototype.showSearch=function(t,i){if(e(i.data.results)<this.minimumResultsForSearch){return false}return t.call(this,i)};return t});t.define("select2/dropdown/selectOnClose",[],function(){function e(){}e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i);t.on("close",function(e){n._handleSelectOnClose(e)})};e.prototype._handleSelectOnClose=function(e,t){if(t&&t.originalSelect2Event!=null){var i=t.originalSelect2Event;if(i._type==="select"||i._type==="unselect"){return}}var n=this.getHighlightedResults();if(n.length<1){return}var s=n.data("data");if(s.element!=null&&s.element.selected||s.element==null&&s.selected){return}this.trigger("select",{data:s})};return e});t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i);t.on("select",function(e){n._selectTriggered(e)});t.on("unselect",function(e){n._selectTriggered(e)})};e.prototype._selectTriggered=function(e,t){var i=t.originalEvent;if(i&&i.ctrlKey){return}this.trigger("close",{originalEvent:i,originalSelect2Event:t})};return e});t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum;var i="Please delete "+t+" character";if(t!=1){i+="s"}return i},inputTooShort:function(e){var t=e.minimum-e.input.length;var i="Please enter "+t+" or more characters";return i},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";if(e.maximum!=1){t+="s"}return t},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}});t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(e,t,i,n,s,r,o,a,l,h,d,u,f,c,p,m,v,g,y,b,w,_,x,k,C,S,T,M,D){function E(){this.reset()}E.prototype.apply=function(u){u=e.extend(true,{},this.defaults,u);if(u.dataAdapter==null){if(u.ajax!=null){u.dataAdapter=p}else if(u.data!=null){u.dataAdapter=c}else{u.dataAdapter=f}if(u.minimumInputLength>0){u.dataAdapter=h.Decorate(u.dataAdapter,g)}if(u.maximumInputLength>0){u.dataAdapter=h.Decorate(u.dataAdapter,y)}if(u.maximumSelectionLength>0){u.dataAdapter=h.Decorate(u.dataAdapter,b)}if(u.tags){u.dataAdapter=h.Decorate(u.dataAdapter,m)}if(u.tokenSeparators!=null||u.tokenizer!=null){u.dataAdapter=h.Decorate(u.dataAdapter,v)}if(u.query!=null){var D=t(u.amdBase+"compat/query");u.dataAdapter=h.Decorate(u.dataAdapter,D)}if(u.initSelection!=null){var E=t(u.amdBase+"compat/initSelection");u.dataAdapter=h.Decorate(u.dataAdapter,E)}}if(u.resultsAdapter==null){u.resultsAdapter=i;if(u.ajax!=null){u.resultsAdapter=h.Decorate(u.resultsAdapter,k)}if(u.placeholder!=null){u.resultsAdapter=h.Decorate(u.resultsAdapter,x)}if(u.selectOnClose){u.resultsAdapter=h.Decorate(u.resultsAdapter,T)}}if(u.dropdownAdapter==null){if(u.multiple){u.dropdownAdapter=w}else{var O=h.Decorate(w,_);u.dropdownAdapter=O}if(u.minimumResultsForSearch!==0){u.dropdownAdapter=h.Decorate(u.dropdownAdapter,S)}if(u.closeOnSelect){u.dropdownAdapter=h.Decorate(u.dropdownAdapter,M)}if(u.dropdownCssClass!=null||u.dropdownCss!=null||u.adaptDropdownCssClass!=null){var P=t(u.amdBase+"compat/dropdownCss");u.dropdownAdapter=h.Decorate(u.dropdownAdapter,P)}u.dropdownAdapter=h.Decorate(u.dropdownAdapter,C)}if(u.selectionAdapter==null){if(u.multiple){u.selectionAdapter=s}else{u.selectionAdapter=n}if(u.placeholder!=null){u.selectionAdapter=h.Decorate(u.selectionAdapter,r)}if(u.allowClear){u.selectionAdapter=h.Decorate(u.selectionAdapter,o)}if(u.multiple){u.selectionAdapter=h.Decorate(u.selectionAdapter,a)}if(u.containerCssClass!=null||u.containerCss!=null||u.adaptContainerCssClass!=null){var I=t(u.amdBase+"compat/containerCss");u.selectionAdapter=h.Decorate(u.selectionAdapter,I)}u.selectionAdapter=h.Decorate(u.selectionAdapter,l)}if(typeof u.language==="string"){if(u.language.indexOf("-")>0){var A=u.language.split("-");var N=A[0];u.language=[u.language,N]}else{u.language=[u.language]}}if(e.isArray(u.language)){var F=new d;u.language.push("en");var R=u.language;for(var $=0;$<R.length;$++){var L=R[$];var z={};try{z=d.loadPath(L)}catch(e){try{L=this.defaults.amdLanguageBase+L;z=d.loadPath(L)}catch(e){if(u.debug&&window.console&&console.warn){console.warn('Select2: The language file for "'+L+'" could not be '+"automatically loaded. A fallback will be used instead.")}continue}}F.extend(z)}u.translations=F}else{var j=d.loadPath(this.defaults.amdLanguageBase+"en");var H=new d(u.language);H.extend(j);u.translations=H}return u};E.prototype.reset=function(){function t(e){function t(e){return u[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function i(n,s){if(e.trim(n.term)===""){return s}if(s.children&&s.children.length>0){var r=e.extend(true,{},s);for(var o=s.children.length-1;o>=0;o--){var a=s.children[o];var l=i(n,a);if(l==null){r.children.splice(o,1)}}if(r.children.length>0){return r}return i(n,r)}var h=t(s.text).toUpperCase();var d=t(n.term).toUpperCase();if(h.indexOf(d)>-1){return s}return null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:true,debug:false,dropdownAutoWidth:false,escapeMarkup:h.escapeMarkup,language:D,matcher:i,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:false,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}};E.prototype.set=function(t,i){var n=e.camelCase(t);var s={};s[n]=i;var r=h._convertData(s);e.extend(this.defaults,r)};var O=new E;return O});t.define("select2/options",["require","jquery","./defaults","./utils"],function(e,t,i,n){function s(t,s){this.options=t;if(s!=null){this.fromElement(s)}this.options=i.apply(this.options);if(s&&s.is("input")){var r=e(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=n.Decorate(this.options.dataAdapter,r)}}s.prototype.fromElement=function(e){var i=["select2"];if(this.options.multiple==null){this.options.multiple=e.prop("multiple")}if(this.options.disabled==null){this.options.disabled=e.prop("disabled")}if(this.options.language==null){if(e.prop("lang")){this.options.language=e.prop("lang").toLowerCase()}else if(e.closest("[lang]").prop("lang")){this.options.language=e.closest("[lang]").prop("lang")}}if(this.options.dir==null){if(e.prop("dir")){this.options.dir=e.prop("dir")}else if(e.closest("[dir]").prop("dir")){this.options.dir=e.closest("[dir]").prop("dir")}else{this.options.dir="ltr"}}e.prop("disabled",this.options.disabled);e.prop("multiple",this.options.multiple);if(e.data("select2Tags")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-select2-tags` attribute has been changed to "+'use the `data-data` and `data-tags="true"` attributes and will be '+"removed in future versions of Select2.")}e.data("data",e.data("select2Tags"));e.data("tags",true)}if(e.data("ajaxUrl")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-ajax-url` attribute has been changed to "+"`data-ajax--url` and support for the old attribute will be removed"+" in future versions of Select2.")}e.attr("ajax--url",e.data("ajaxUrl"));e.data("ajax--url",e.data("ajaxUrl"))}var s={};if(t.fn.jquery&&t.fn.jquery.substr(0,2)=="1."&&e[0].dataset){s=t.extend(true,{},e[0].dataset,e.data())}else{s=e.data()}var r=t.extend(true,{},s);r=n._convertData(r);for(var o in r){if(t.inArray(o,i)>-1){continue}if(t.isPlainObject(this.options[o])){t.extend(this.options[o],r[o])}else{this.options[o]=r[o]}}return this};s.prototype.get=function(e){return this.options[e]};s.prototype.set=function(e,t){this.options[e]=t};return s});t.define("select2/core",["jquery","./options","./utils","./keys"],function(e,t,i,n){var s=function(e,i){if(e.data("select2")!=null){e.data("select2").destroy()}this.$element=e;this.id=this._generateId(e);i=i||{};this.options=new t(i,e);s.__super__.constructor.call(this);var n=e.attr("tabindex")||0;e.data("old-tabindex",n);e.attr("tabindex","-1");var r=this.options.get("dataAdapter");this.dataAdapter=new r(e,this.options);var o=this.render();this._placeContainer(o);var a=this.options.get("selectionAdapter");this.selection=new a(e,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,o);var l=this.options.get("dropdownAdapter");this.dropdown=new l(e,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,o);var h=this.options.get("resultsAdapter");this.results=new h(e,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);var d=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(e){d.trigger("selection:update",{data:e})});e.addClass("select2-hidden-accessible");e.attr("aria-hidden","true");this._syncAttributes();e.data("select2",this)};i.Extend(s,i.Observable);s.prototype._generateId=function(e){var t="";if(e.attr("id")!=null){t=e.attr("id")}else if(e.attr("name")!=null){t=e.attr("name")+"-"+i.generateChars(2)}else{t=i.generateChars(4)}t=t.replace(/(:|\.|\[|\]|,)/g,"");t="select2-"+t;return t};s.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));if(t!=null){e.css("width",t)}};s.prototype._resolveWidth=function(e,t){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if(t=="resolve"){var n=this._resolveWidth(e,"style");if(n!=null){return n}return this._resolveWidth(e,"element")}if(t=="element"){var s=e.outerWidth(false);if(s<=0){return"auto"}return s+"px"}if(t=="style"){var r=e.attr("style");if(typeof r!=="string"){return null}var o=r.split(";");for(var a=0,l=o.length;a<l;a=a+1){var h=o[a].replace(/\s/g,"");var d=h.match(i);if(d!==null&&d.length>=1){return d[1]}}return null}return t};s.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container)};s.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})});this.$element.on("focus.select2",function(e){t.trigger("focus",e)});this._syncA=i.bind(this._syncAttributes,this);this._syncS=i.bind(this._syncSubtree,this);if(this.$element[0].attachEvent){this.$element[0].attachEvent("onpropertychange",this._syncA)}var n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(n!=null){this._observer=new n(function(i){e.each(i,t._syncA);e.each(i,t._syncS)});this._observer.observe(this.$element[0],{attributes:true,childList:true,subtree:false})}else if(this.$element[0].addEventListener){this.$element[0].addEventListener("DOMAttrModified",t._syncA,false);this.$element[0].addEventListener("DOMNodeInserted",t._syncS,false);this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,false)}};s.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",function(t,i){e.trigger(t,i)})};s.prototype._registerSelectionEvents=function(){var t=this;var i=["toggle","focus"];this.selection.on("toggle",function(){t.toggleDropdown()});this.selection.on("focus",function(e){t.focus(e)});this.selection.on("*",function(n,s){if(e.inArray(n,i)!==-1){return}t.trigger(n,s)})};s.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",function(t,i){e.trigger(t,i)})};s.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",function(t,i){e.trigger(t,i)})};s.prototype._registerEvents=function(){var e=this;this.on("open",function(){e.$container.addClass("select2-container--open")});this.on("close",function(){e.$container.removeClass("select2-container--open")});this.on("enable",function(){e.$container.removeClass("select2-container--disabled")});this.on("disable",function(){e.$container.addClass("select2-container--disabled")});this.on("blur",function(){e.$container.removeClass("select2-container--focus")});this.on("query",function(t){if(!e.isOpen()){e.trigger("open",{})}this.dataAdapter.query(t,function(i){e.trigger("results:all",{data:i,query:t})})});this.on("query:append",function(t){this.dataAdapter.query(t,function(i){e.trigger("results:append",{data:i,query:t})})});this.on("keypress",function(t){var i=t.which;if(e.isOpen()){if(i===n.ESC||i===n.TAB||i===n.UP&&t.altKey){e.close();t.preventDefault()}else if(i===n.ENTER){e.trigger("results:select",{});t.preventDefault()}else if(i===n.SPACE&&t.ctrlKey){e.trigger("results:toggle",{});t.preventDefault()}else if(i===n.UP){e.trigger("results:previous",{});t.preventDefault()}else if(i===n.DOWN){e.trigger("results:next",{});t.preventDefault()}}else{if(i===n.ENTER||i===n.SPACE||i===n.DOWN&&t.altKey){e.open();t.preventDefault()}}})};s.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));if(this.options.get("disabled")){if(this.isOpen()){this.close()}this.trigger("disable",{})}else{this.trigger("enable",{})}};s.prototype._syncSubtree=function(e,t){var i=false;var n=this;if(e&&e.target&&(e.target.nodeName!=="OPTION"&&e.target.nodeName!=="OPTGROUP")){return}if(!t){i=true}else if(t.addedNodes&&t.addedNodes.length>0){for(var s=0;s<t.addedNodes.length;s++){var r=t.addedNodes[s];if(r.selected){i=true}}}else if(t.removedNodes&&t.removedNodes.length>0){i=true}if(i){this.dataAdapter.current(function(e){n.trigger("selection:update",{data:e})})}};s.prototype.trigger=function(e,t){var i=s.__super__.trigger;var n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(t===undefined){t={}}if(e in n){var r=n[e];var o={prevented:false,name:e,args:t};i.call(this,r,o);if(o.prevented){t.prevented=true;return}}i.call(this,e,t)};s.prototype.toggleDropdown=function(){if(this.options.get("disabled")){return}if(this.isOpen()){this.close()}else{this.open()}};s.prototype.open=function(){if(this.isOpen()){return}this.trigger("query",{})};s.prototype.close=function(){if(!this.isOpen()){return}this.trigger("close",{})};s.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")};s.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")};s.prototype.focus=function(e){if(this.hasFocus()){return}this.$container.addClass("select2-container--focus");this.trigger("focus",{})};s.prototype.enable=function(e){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("enable")` method has been deprecated and will'+' be removed in later Select2 versions. Use $element.prop("disabled")'+" instead.")}if(e==null||e.length===0){e=[true]}var t=!e[0];this.$element.prop("disabled",t)};s.prototype.data=function(){if(this.options.get("debug")&&arguments.length>0&&window.console&&console.warn){console.warn('Select2: Data can no longer be set using `select2("data")`. You '+"should consider setting the value instead using `$element.val()`.")}var e=[];this.dataAdapter.current(function(t){e=t});return e};s.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("val")` method has been deprecated and will be'+" removed in later Select2 versions. Use $element.val() instead.")}if(t==null||t.length===0){return this.$element.val()}var i=t[0];if(e.isArray(i)){i=e.map(i,function(e){return e.toString()})}this.$element.val(i).trigger("change")};s.prototype.destroy=function(){this.$container.remove();if(this.$element[0].detachEvent){this.$element[0].detachEvent("onpropertychange",this._syncA)}if(this._observer!=null){this._observer.disconnect();this._observer=null}else if(this.$element[0].removeEventListener){this.$element[0].removeEventListener("DOMAttrModified",this._syncA,false);this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,false);this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,false)}this._syncA=null;this._syncS=null;this.$element.off(".select2");this.$element.attr("tabindex",this.$element.data("old-tabindex"));this.$element.removeClass("select2-hidden-accessible");this.$element.attr("aria-hidden","false");this.$element.removeData("select2");this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null};s.prototype.render=function(){var t=e('<span class="select2 select2-container">'+'<span class="selection"></span>'+'<span class="dropdown-wrapper" aria-hidden="true"></span>'+"</span>");t.attr("dir",this.options.get("dir"));this.$container=t;this.$container.addClass("select2-container--"+this.options.get("theme"));t.data("element",this.$element);return t};return s});t.define("jquery-mousewheel",["jquery"],function(e){return e});t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(e,t,i,n){if(e.fn.select2==null){var s=["open","close","destroy"];e.fn.select2=function(t){t=t||{};if(typeof t==="object"){this.each(function(){var n=e.extend(true,{},t);var s=new i(e(this),n)});return this}else if(typeof t==="string"){var n;var r=Array.prototype.slice.call(arguments,1);this.each(function(){var i=e(this).data("select2");if(i==null&&window.console&&console.error){console.error("The select2('"+t+"') method was called on an "+"element that is not using Select2.")}n=i[t].apply(i,r)});if(e.inArray(t,s)>-1){return this}return n}else{throw new Error("Invalid arguments for Select2: "+t)}}}if(e.fn.select2.defaults==null){e.fn.select2.defaults=n}return i});return{define:t.define,require:t.require}}();var i=t.require("jquery.select2");e.fn.select2.amd=t;return i});(function(e){e.fn.extend({tableExport:function(t){function i(t){var i=[];e(t).find("thead").first().find("th").each(function(t,n){void 0!==e(n).attr("data-field")?i[t]=e(n).attr("data-field"):i[t]=t.toString()});return i}function n(t,i,n,s,r){if(-1==e.inArray(n,C.ignoreRow)&&-1==e.inArray(n-s,C.ignoreRow)){var o=e(t).filter(function(){return"none"!=e(this).data("tableexport-display")&&(e(this).is(":visible")||"always"==e(this).data("tableexport-display")||"always"==e(this).closest("table").data("tableexport-display"))}).find(i),a=0;o.each(function(t){if(("always"==e(this).data("tableexport-display")||"none"!=e(this).css("display")&&"hidden"!=e(this).css("visibility")&&"none"!=e(this).data("tableexport-display"))&&"function"===typeof r){var i,s=1,l=1;var h=o.length;if("undefined"!=typeof O[n]&&0<O[n].length){var d=t;for(i=0;i<=d;i++)"undefined"!=typeof O[n][i]&&(r(null,n,i),delete O[n][i],d++);t+=O[n].length;h+=O[n].length}e(this).is("[colspan]")&&(s=parseInt(e(this).attr("colspan"))||1,a+=0<s?s-1:0);e(this).is("[rowspan]")&&(l=parseInt(e(this).attr("rowspan"))||1);i=h;h=t+a;d=!1;0<C.ignoreColumn.length&&("string"==typeof C.ignoreColumn[0]?I.length>h&&"undefined"!=typeof I[h]&&-1!=e.inArray(I[h],C.ignoreColumn)&&(d=!0):"number"!=typeof C.ignoreColumn[0]||-1==e.inArray(h,C.ignoreColumn)&&-1==e.inArray(h-i,C.ignoreColumn)||(d=!0));if(!1===d)for(r(this,n,t),i=1;i<s;i++)r(null,n,t+i);if(1<l)for(h=1;h<l;h++)for("undefined"==typeof O[n+h]&&(O[n+h]=[]),O[n+h][t+a]="",i=1;i<s;i++)O[n+h][t+a-i]=""}});if("undefined"!=typeof O[n]&&0<O[n].length)for(t=0;t<=O[n].length;t++)"undefined"!=typeof O[n][t]&&(r(null,n,t),delete O[n][t])}}function s(e,t){!0===C.consoleLog&&console.log(e.output());if("string"===C.outputMode)return e.output();if("base64"===C.outputMode)return k(e.output());if("window"===C.outputMode)window.open(URL.createObjectURL(e.output("blob")));else try{var i=e.output("blob");saveAs(i,C.fileName+".pdf")}catch(n){x(C.fileName+".pdf","data:application/pdf"+(t?"":";base64")+",",t?i:e.output())}}function r(e,t,i){var n=0;"undefined"!=typeof i&&(n=i.colspan);if(0<=n){for(var s=e.width,r=e.textPos.x,o=t.table.columns.indexOf(t.column),a=1;a<n;a++)s+=t.table.columns[o+a].width;1<n&&("right"===e.styles.halign?r=e.textPos.x+s-e.width:"center"===e.styles.halign&&(r=e.textPos.x+(s-e.width)/2));e.width=s;e.textPos.x=r;"undefined"!=typeof i&&1<i.rowspan&&(e.height*=i.rowspan);if("middle"===e.styles.valign||"bottom"===e.styles.valign)i=("string"===typeof e.text?e.text.split(/\r\n|\r|\n/g):e.text).length||1,2<i&&(e.textPos.y-=(2-1.15)/2*t.row.styles.fontSize*(i-2)/3);return!0}return!1}function o(t,i,n){"undefined"!=typeof n.images&&i.each(function(){var i=e(this).children();if(e(this).is("img")){var s=_(this.src);n.images[s]={url:this.src,src:this.src}}"undefined"!=typeof i&&0<i.length&&o(t,i,n)})}function a(e,t){function i(e){if(e.url){var i=new Image;s=++r;i.crossOrigin="Anonymous";i.onerror=i.onload=function(){if(i.complete&&(0===i.src.indexOf("data:image/")&&(i.width=e.width||i.width||0,i.height=e.height||i.height||0),i.width+i.height)){var n=document.createElement("canvas"),o=n.getContext("2d");n.width=i.width;n.height=i.height;o.drawImage(i,0,0);e.src=n.toDataURL("image/jpeg")}--r||t(s)};i.src=e.url}}var n,s=0,r=0;if("undefined"!=typeof e.images)for(n in e.images)e.images.hasOwnProperty(n)&&i(e.images[n]);(n=r)||(t(s),n=void 0);return n}function l(t,i,n){i.each(function(){var i=e(this).children();if(e(this).is("div")){var s=p(v(this,"background-color"),[255,255,255]),r=p(v(this,"border-top-color"),[0,0,0]),o=g(this,"border-top-width",C.jspdf.unit),a=this.getBoundingClientRect(),h=this.offsetLeft*n.dw;var d=this.offsetTop*n.dh;var u=a.width*n.dw,a=a.height*n.dh;n.doc.setDrawColor.apply(void 0,r);n.doc.setFillColor.apply(void 0,s);n.doc.setLineWidth(o);n.doc.rect(t.x+h,t.y+d,u,a,o?"FD":"F")}else if(e(this).is("img")&&"undefined"!=typeof n.images&&(d=_(this.src),s=n.images[d],"undefined"!=typeof s)){r=t.width/t.height;o=this.width/this.height;h=t.width;u=t.height;a=19.049976/25.4;d=0;o<=r?(u=Math.min(t.height,this.height),h=this.width*u/this.height):o>r&&(h=Math.min(t.width,this.width),u=this.height*h/this.width);h*=a;u*=a;u<t.height&&(d=(t.height-u)/2);try{n.doc.addImage(s.src,t.textPos.x,t.y+d,h,u)}catch(e){}t.textPos.x+=h}"undefined"!=typeof i&&0<i.length&&l(t,i,n)})}function h(t,i,n){if("function"===typeof n.onAutotableText)n.onAutotableText(n.doc,t,i);else{var s=t.textPos.x,r=t.textPos.y,o={halign:t.styles.halign,valign:t.styles.valign};if(i.length){for(i=i[0];i.previousSibling;)i=i.previousSibling;for(var a=!1,l=!1;i;){var h=i.innerText||i.textContent||"",h=(h.length&&" "==h[0]?" ":"")+e.trim(h)+(1<h.length&&" "==h[h.length-1]?" ":"");e(i).is("br")&&(s=t.textPos.x,r+=n.doc.internal.getFontSize());e(i).is("b")?a=!0:e(i).is("i")&&(l=!0);(a||l)&&n.doc.setFontType(a&&l?"bolditalic":a?"bold":"italic");var d=n.doc.getStringUnitWidth(h)*n.doc.internal.getFontSize();if(d){if("linebreak"===t.styles.overflow&&s>t.textPos.x&&s+d>t.textPos.x+t.width){if(0<=".,!%*;:=-".indexOf(h.charAt(0))){var u=h.charAt(0),d=n.doc.getStringUnitWidth(u)*n.doc.internal.getFontSize();s+d<=t.textPos.x+t.width&&(n.doc.autoTableText(u,s,r,o),h=h.substring(1,h.length));d=n.doc.getStringUnitWidth(h)*n.doc.internal.getFontSize()}s=t.textPos.x;r+=n.doc.internal.getFontSize()}for(;h.length&&s+d>t.textPos.x+t.width;)h=h.substring(0,h.length-1),d=n.doc.getStringUnitWidth(h)*n.doc.internal.getFontSize();n.doc.autoTableText(h,s,r,o);s+=d}if(a||l)e(i).is("b")?a=!1:e(i).is("i")&&(l=!1),n.doc.setFontType(a||l?a?"bold":"italic":"normal");i=i.nextSibling}t.textPos.x=s;t.textPos.y=r}else n.doc.autoTableText(t.text,t.textPos.x,t.textPos.y,o)}}function d(e,t,i){return e.replace(new RegExp(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),"g"),i)}function u(e){e=d(e||"0",C.numbers.html.thousandsSeparator,"");e=d(e,C.numbers.html.decimalMark,".");return"number"===typeof e||!1!==jQuery.isNumeric(e)?e:!1}function f(t,i,n){var s="";if(null!==t){var r=e(t);if(r[0].hasAttribute("data-tableexport-value"))var o=r.data("tableexport-value");else if(o=r.html(),"function"===typeof C.onCellHtmlData)o=C.onCellHtmlData(r,i,n,o);else if(""!=o){t=e.parseHTML(o);var a=0,l=0;o="";e.each(t,function(){if(e(this).is("input"))o+=r.find("input").eq(a++).val();else if(e(this).is("select"))o+=r.find("select option:selected").eq(l++).text();else if("undefined"===typeof e(this).html())o+=e(this).text();else if(void 0===jQuery().bootstrapTable||!0!==e(this).hasClass("filterControl"))o+=e(this).html()})}if(!0===C.htmlContent)s=e.trim(o);else if(""!=o){var h=o.replace(/\n/g,"\u2028").replace(/<br\s*[\/]?>/gi,"⁠");t=e("<div/>").html(h).contents();h="";e.each(t.text().split("\u2028"),function(t,i){0<t&&(h+=" ");h+=e.trim(i)});e.each(h.split("⁠"),function(t,i){0<t&&(s+="\n");s+=e.trim(i).replace(/\u00AD/g,"")});if("json"==C.type||"excel"===C.type&&"xmlss"===C.excelFileFormat||!1===C.numbers.output)t=u(s),!1!==t&&(s=Number(t));else if(C.numbers.html.decimalMark!=C.numbers.output.decimalMark||C.numbers.html.thousandsSeparator!=C.numbers.output.thousandsSeparator)if(t=u(s),!1!==t){var d=(""+t).split(".");1==d.length&&(d[1]="");var f=3<d[0].length?d[0].length%3:0,s=(0>t?"-":"")+(C.numbers.output.thousandsSeparator?(f?d[0].substr(0,f)+C.numbers.output.thousandsSeparator:"")+d[0].substr(f).replace(/(\d{3})(?=\d)/g,"$1"+C.numbers.output.thousandsSeparator):d[0])+(d[1].length?C.numbers.output.decimalMark+d[1]:"")}}!0===C.escape&&(s=escape(s));"function"===typeof C.onCellData&&(s=C.onCellData(r,i,n,s))}return s}function c(e,t,i){return t+"-"+i.toLowerCase()}function p(e,t){var i=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/.exec(e),n=t;i&&(n=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])]);return n}function m(t){var i=v(t,"text-align"),n=v(t,"font-weight"),s=v(t,"font-style"),r="";"start"==i&&(i="rtl"==v(t,"direction")?"right":"left");700<=n&&(r="bold");"italic"==s&&(r+=s);""===r&&(r="normal");i={style:{align:i,bcolor:p(v(t,"background-color"),[255,255,255]),color:p(v(t,"color"),[0,0,0]),fstyle:r},colspan:parseInt(e(t).attr("colspan"))||0,rowspan:parseInt(e(t).attr("rowspan"))||0};null!==t&&(t=t.getBoundingClientRect(),i.rect={width:t.width,height:t.height});return i}function v(e,t){try{return window.getComputedStyle?(t=t.replace(/([a-z])([A-Z])/,c),window.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle?e.currentStyle[t]:e.style[t]}catch(e){}return""}function g(e,t,i){t=v(e,t).match(/\d+/);if(null!==t){t=t[0];e=e.parentElement;var n=document.createElement("div");n.style.overflow="hidden";n.style.visibility="hidden";e.appendChild(n);n.style.width=100+i;i=100/n.offsetWidth;e.removeChild(n);return t*i}return 0}function y(){if(!(this instanceof y))return new y;this.SheetNames=[];this.Sheets={}}function b(e){for(var t=new ArrayBuffer(e.length),i=new Uint8Array(t),n=0;n!=e.length;++n)i[n]=e.charCodeAt(n)&255;return t}function w(e){for(var t={},i={s:{c:1e7,r:1e7},e:{c:0,r:0}},n=0;n!=e.length;++n)for(var s=0;s!=e[n].length;++s){i.s.r>n&&(i.s.r=n);i.s.c>s&&(i.s.c=s);i.e.r<n&&(i.e.r=n);i.e.c<s&&(i.e.c=s);var r={v:e[n][s]};if(null!==r.v){var o=XLSX.utils.encode_cell({c:s,r:n});if("number"===typeof r.v)r.t="n";else if("boolean"===typeof r.v)r.t="b";else if(r.v instanceof Date){r.t="n";r.z=XLSX.SSF._table[14];var a=r;var l=(Date.parse(r.v)-new Date(Date.UTC(1899,11,30)))/864e5;a.v=l}else r.t="s";t[o]=r}}1e7>i.s.c&&(t["!ref"]=XLSX.utils.encode_range(i));return t}function _(e){var t=0,i;if(0===e.length)return t;var n=0;for(i=e.length;n<i;n++){var s=e.charCodeAt(n);t=(t<<5)-t+s;t|=0}return t}function x(e,t,i){var n=window.navigator.userAgent;if(!1!==e&&(0<n.indexOf("MSIE ")||n.match(/Trident.*rv\:11\./)))if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(new Blob([i]),e);else{if(t=document.createElement("iframe"))document.body.appendChild(t),t.setAttribute("style","display:none"),t.contentDocument.open("txt/html","replace"),t.contentDocument.write(i),t.contentDocument.close(),t.focus(),t.contentDocument.execCommand("SaveAs",!0,e),document.body.removeChild(t)}else if(n=document.createElement("a")){var s=null;n.style.display="none";!1!==e?n.download=e:n.target="_blank";"object"==typeof i?(s=window.URL.createObjectURL(i),n.href=s):0<=t.toLowerCase().indexOf("base64,")?n.href=t+k(i):n.href=t+encodeURIComponent(i);document.body.appendChild(n);if(document.createEvent)null===T&&(T=document.createEvent("MouseEvents")),T.initEvent("click",!0,!1),n.dispatchEvent(T);else if(document.createEventObject)n.fireEvent("onclick");else if("function"==typeof n.onclick)n.onclick();s&&window.URL.revokeObjectURL(s);document.body.removeChild(n)}}function k(e){var t="",i,n=0;e=e.replace(/\x0d\x0a/g,"\n");var s="";for(i=0;i<e.length;i++){var r=e.charCodeAt(i);128>r?s+=String.fromCharCode(r):(127<r&&2048>r?s+=String.fromCharCode(r>>6|192):(s+=String.fromCharCode(r>>12|224),s+=String.fromCharCode(r>>6&63|128)),s+=String.fromCharCode(r&63|128))}for(e=s;n<e.length;){var o=e.charCodeAt(n++);s=e.charCodeAt(n++);i=e.charCodeAt(n++);r=o>>2;o=(o&3)<<4|s>>4;var a=(s&15)<<2|i>>6;var l=i&63;isNaN(s)?a=l=64:isNaN(i)&&(l=64);t=t+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(o)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(l)}return t}var C={consoleLog:!1,csvEnclosure:'"',csvSeparator:",",csvUseBOM:!0,
displayTableName:!1,escape:!1,excelFileFormat:"xlshtml",excelstyles:[],fileName:"tableExport",htmlContent:!1,ignoreColumn:[],ignoreRow:[],jsonScope:"all",jspdf:{orientation:"p",unit:"pt",format:"a4",margins:{left:20,right:10,top:10,bottom:10},autotable:{styles:{cellPadding:2,rowHeight:12,fontSize:8,fillColor:255,textColor:50,fontStyle:"normal",overflow:"ellipsize",halign:"left",valign:"middle"},headerStyles:{fillColor:[52,73,94],textColor:255,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:245},tableExport:{onAfterAutotable:null,onBeforeAutotable:null,onAutotableText:null,onTable:null,outputImages:!0}}},numbers:{html:{decimalMark:".",thousandsSeparator:","},output:{decimalMark:".",thousandsSeparator:","}},onCellData:null,onCellHtmlData:null,onMsoNumberFormat:null,outputMode:"file",pdfmake:{enabled:!1,docDefinition:{pageOrientation:"portrait",defaultStyle:{font:"Roboto"}},fonts:{}},tbodySelector:"tr",tfootSelector:"tr",theadSelector:"tr",tableName:"myTableName",type:"csv",worksheetName:"Worksheet"},S=this,T=null,M=[],D=[],E=0,O=[],P="",I=[];e.extend(!0,C,t);I=i(S);if("csv"==C.type||"tsv"==C.type||"txt"==C.type){var A="",N=0,E=0,F=function(t,i,s){t.each(function(){P="";n(this,i,E,s+t.length,function(e,t,i){var n=P,s="";if(null!==e)if(e=f(e,t,i),t=null===e||""===e?"":e.toString(),"tsv"==C.type)e instanceof Date&&e.toLocaleString(),s=d(t,"\t"," ");else if(e instanceof Date)s=C.csvEnclosure+e.toLocaleString()+C.csvEnclosure;else if(s=d(t,C.csvEnclosure,C.csvEnclosure+C.csvEnclosure),0<=s.indexOf(C.csvSeparator)||/[\r\n ]/g.test(s))s=C.csvEnclosure+s+C.csvEnclosure;P=n+(s+("tsv"==C.type?"\t":C.csvSeparator))});P=e.trim(P).substring(0,P.length-1);0<P.length&&(0<A.length&&(A+="\n"),A+=P);E++});return t.length},N=N+F(e(S).find("thead").first().find(C.theadSelector),"th,td",N);e(S).find("tbody").each(function(){N+=F(e(this).find(C.tbodySelector),"td,th",N)});C.tfootSelector.length&&F(e(S).find("tfoot").first().find(C.tfootSelector),"td,th",N);A+="\n";!0===C.consoleLog&&console.log(A);if("string"===C.outputMode)return A;if("base64"===C.outputMode)return k(A);if("window"===C.outputMode){x(!1,"data:text/"+("csv"==C.type?"csv":"plain")+";charset=utf-8,",A);return}try{var R=new Blob([A],{type:"text/"+("csv"==C.type?"csv":"plain")+";charset=utf-8"});saveAs(R,C.fileName+"."+C.type,"csv"!=C.type||!1===C.csvUseBOM)}catch(e){x(C.fileName+"."+C.type,"data:text/"+("csv"==C.type?"csv":"plain")+";charset=utf-8,"+("csv"==C.type&&C.csvUseBOM?"\ufeff":""),A)}}else if("sql"==C.type){var E=0,$="INSERT INTO `"+C.tableName+"` (",M=e(S).find("thead").first().find(C.theadSelector);M.each(function(){n(this,"th,td",E,M.length,function(e,t,i){$+="'"+f(e,t,i)+"',"});E++;$=e.trim($);$=e.trim($).substring(0,$.length-1)});$+=") VALUES ";e(S).find("tbody").each(function(){D.push.apply(D,e(this).find(C.tbodySelector))});C.tfootSelector.length&&D.push.apply(D,e(S).find("tfoot").find(C.tfootSelector));e(D).each(function(){P="";n(this,"td,th",E,M.length+D.length,function(e,t,i){P+="'"+f(e,t,i)+"',"});3<P.length&&($+="("+P,$=e.trim($).substring(0,$.length-1),$+="),");E++});$=e.trim($).substring(0,$.length-1);$+=";";!0===C.consoleLog&&console.log($);if("string"===C.outputMode)return $;if("base64"===C.outputMode)return k($);try{R=new Blob([$],{type:"text/plain;charset=utf-8"}),saveAs(R,C.fileName+".sql")}catch(e){x(C.fileName+".sql","data:application/sql;charset=utf-8,",$)}}else if("json"==C.type){var L=[],M=e(S).find("thead").first().find(C.theadSelector);M.each(function(){var e=[];n(this,"th,td",E,M.length,function(t,i,n){e.push(f(t,i,n))});L.push(e)});var z=[];e(S).find("tbody").each(function(){D.push.apply(D,e(this).find(C.tbodySelector))});C.tfootSelector.length&&D.push.apply(D,e(S).find("tfoot").find(C.tfootSelector));e(D).each(function(){var t={},i=0;n(this,"td,th",E,M.length+D.length,function(e,n,s){L.length?t[L[L.length-1][i]]=f(e,n,s):t[i]=f(e,n,s);i++});!1===e.isEmptyObject(t)&&z.push(t);E++});t="";t="head"==C.jsonScope?JSON.stringify(L):"data"==C.jsonScope?JSON.stringify(z):JSON.stringify({header:L,data:z});!0===C.consoleLog&&console.log(t);if("string"===C.outputMode)return t;if("base64"===C.outputMode)return k(t);try{R=new Blob([t],{type:"application/json;charset=utf-8"}),saveAs(R,C.fileName+".json")}catch(e){x(C.fileName+".json","data:application/json;charset=utf-8;base64,",t)}}else if("xml"===C.type){E=0;var j='<?xml version="1.0" encoding="utf-8"?>';j+="<tabledata><fields>";M=e(S).find("thead").first().find(C.theadSelector);M.each(function(){n(this,"th,td",E,M.length,function(e,t,i){j+="<field>"+f(e,t,i)+"</field>"});E++});j+="</fields><data>";var H=1;e(S).find("tbody").each(function(){D.push.apply(D,e(this).find(C.tbodySelector))});C.tfootSelector.length&&D.push.apply(D,e(S).find("tfoot").find(C.tfootSelector));e(D).each(function(){var e=1;P="";n(this,"td,th",E,M.length+D.length,function(t,i,n){P+="<column-"+e+">"+f(t,i,n)+"</column-"+e+">";e++});0<P.length&&"<column-1></column-1>"!=P&&(j+='<row id="'+H+'">'+P+"</row>",H++);E++});j+="</data></tabledata>";!0===C.consoleLog&&console.log(j);if("string"===C.outputMode)return j;if("base64"===C.outputMode)return k(j);try{R=new Blob([j],{type:"application/xml;charset=utf-8"}),saveAs(R,C.fileName+".xml")}catch(e){x(C.fileName+".xml","data:application/xml;charset=utf-8;base64,",j)}}else if("excel"===C.type&&"xmlss"===C.excelFileFormat){var B=e(S).filter(function(){return"none"!=e(this).data("tableexport-display")&&(e(this).is(":visible")||"always"==e(this).data("tableexport-display"))});var U=[];B.each(function(){var t=e(this),s="";E=0;I=i(this);M=t.find("thead").first().find(C.theadSelector);var s=s+"<Table>",r=0;M.each(function(){P="";n(this,"th,td",E,M.length,function(e,t,i){null!==e&&(P+='<Cell><Data ss:Type="String">'+f(e,t,i)+"</Data></Cell>",r++)});0<P.length&&(s+="<Row>"+P+"</Row>");E++});D=[];t.find("tbody").each(function(){D.push.apply(D,e(this).find(C.tbodySelector))});e(D).each(function(){e(this);P="";n(this,"td,th",E,M.length+D.length,function(e,t,i){if(null!==e){var n="String",s="";e=f(e,t,i);!1!==jQuery.isNumeric(e)?n="Number":(t=e,-1<t.indexOf("%")?(t=u(t.replace(/%/g,"")),!1!==t&&(t/=100)):t=!1,number=t,!1!==number&&(e=number,n="Number",s=' ss:StyleID="pct1"'));"Number"!==n&&(e=e.replace(/\n/g,"<br>"));P+="<Cell"+s+'><Data ss:Type="'+n+'">'+e+"</Data></Cell>"}});0<P.length&&(s+="<Row>"+P+"</Row>");E++});s+="</Table>";U.push(s);!0===C.consoleLog&&console.log(s)});B='<?xml version="1.0" encoding="UTF-8"?><?mso-application progid="Excel.Sheet"?> <Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40"> <DocumentProperties xmlns="urn:schemas-microsoft-com:office:office"> <Created>'+(new Date).toISOString()+'</Created> </DocumentProperties> <OfficeDocumentSettings xmlns="urn:schemas-microsoft-com:office:office"> <AllowPNG/> </OfficeDocumentSettings> <ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel"> <WindowHeight>9000</WindowHeight> <WindowWidth>13860</WindowWidth> <WindowTopX>0</WindowTopX> <WindowTopY>0</WindowTopY> <ProtectStructure>False</ProtectStructure> <ProtectWindows>False</ProtectWindows> </ExcelWorkbook> <Styles> <Style ss:ID="Default" ss:Name="Default"> <Alignment ss:Vertical="Center"/> <Borders/> <Font/> <Interior/> <NumberFormat/> <Protection/> </Style> <Style ss:ID="Normal" ss:Name="Normal"/> <Style ss:ID="pct1">   <NumberFormat ss:Format="Percent"/> </Style> </Styles>';for(t=0;t<U.length;t++)B+='<Worksheet ss:Name="'+("string"===typeof C.worksheetName?C.worksheetName+" "+(t+1):"undefined"!==typeof C.worksheetName[t]?C.worksheetName[t]:"Table "+(t+1))+'">'+U[t]+"<WorksheetOptions/> </Worksheet>";B+="</Workbook>";!0===C.consoleLog&&console.log(B);if("string"===C.outputMode)return B;if("base64"===C.outputMode)return k(B);try{R=new Blob([B],{type:"application/xml;charset=utf-8"}),saveAs(R,C.fileName+".xml")}catch(e){x(C.fileName+".xml","data:application/xml;charset=utf-8;base64,",j)}}else if("excel"==C.type||"xls"==C.type||"word"==C.type||"doc"==C.type){t="excel"==C.type||"xls"==C.type?"excel":"word";var W="excel"==t?"xls":"doc",Y='xmlns:x="urn:schemas-microsoft-com:office:'+t+'"';B=e(S).filter(function(){return"none"!=e(this).data("tableexport-display")&&(e(this).is(":visible")||"always"==e(this).data("tableexport-display"))});var V="";B.each(function(){var t=e(this);E=0;I=i(this);V+="<table><thead>";M=t.find("thead").first().find(C.theadSelector);M.each(function(){P="";n(this,"th,td",E,M.length,function(t,i,n){if(null!==t){var s="";P+="<th";for(var r in C.excelstyles)if(C.excelstyles.hasOwnProperty(r)){var o=e(t).css(C.excelstyles[r]);""!==o&&"0px none rgb(0, 0, 0)"!=o&&"rgba(0, 0, 0, 0)"!=o&&(s+=""===s?'style="':";",s+=C.excelstyles[r]+":"+o)}""!==s&&(P+=" "+s+'"');e(t).is("[colspan]")&&(P+=' colspan="'+e(t).attr("colspan")+'"');e(t).is("[rowspan]")&&(P+=' rowspan="'+e(t).attr("rowspan")+'"');P+=">"+f(t,i,n)+"</th>"}});0<P.length&&(V+="<tr>"+P+"</tr>");E++});V+="</thead><tbody>";t.find("tbody").each(function(){D.push.apply(D,e(this).find(C.tbodySelector))});C.tfootSelector.length&&D.push.apply(D,t.find("tfoot").find(C.tfootSelector));e(D).each(function(){var t=e(this);P="";n(this,"td,th",E,M.length+D.length,function(i,n,s){if(null!==i){var r="",o=e(i).data("tableexport-msonumberformat");"undefined"==typeof o&&"function"===typeof C.onMsoNumberFormat&&(o=C.onMsoNumberFormat(i,n,s));"undefined"!=typeof o&&""!==o&&(r="style=\"mso-number-format:'"+o+"'");for(var a in C.excelstyles)C.excelstyles.hasOwnProperty(a)&&(o=e(i).css(C.excelstyles[a]),""===o&&(o=t.css(C.excelstyles[a])),""!==o&&"0px none rgb(0, 0, 0)"!=o&&"rgba(0, 0, 0, 0)"!=o&&(r+=""===r?'style="':";",r+=C.excelstyles[a]+":"+o));P+="<td";""!==r&&(P+=" "+r+'"');e(i).is("[colspan]")&&(P+=' colspan="'+e(i).attr("colspan")+'"');e(i).is("[rowspan]")&&(P+=' rowspan="'+e(i).attr("rowspan")+'"');P+=">"+f(i,n,s).replace(/\n/g,"<br>")+"</td>"}});0<P.length&&(V+="<tr>"+P+"</tr>");E++});C.displayTableName&&(V+="<tr><td></td></tr><tr><td></td></tr><tr><td>"+f(e("<p>"+C.tableName+"</p>"))+"</td></tr>");V+="</tbody></table>";!0===C.consoleLog&&console.log(V)});B='<html xmlns:o="urn:schemas-microsoft-com:office:office" '+Y+' xmlns="http://www.w3.org/TR/REC-html40">'+('<meta http-equiv="content-type" content="application/vnd.ms-'+t+'; charset=UTF-8">')+"<head>";"excel"===t&&(B+="<!--[if gte mso 9]>",B+="<xml>",B+="<x:ExcelWorkbook>",B+="<x:ExcelWorksheets>",B+="<x:ExcelWorksheet>",B+="<x:Name>",B+=C.worksheetName,B+="</x:Name>",B+="<x:WorksheetOptions>",B+="<x:DisplayGridlines/>",B+="</x:WorksheetOptions>",B+="</x:ExcelWorksheet>",B+="</x:ExcelWorksheets>",B+="</x:ExcelWorkbook>",B+="</xml>",B+="<![endif]-->");B+="<style>br {mso-data-placement:same-cell;}</style>";B+="</head>";B+="<body>";B+=V;B+="</body>";B+="</html>";!0===C.consoleLog&&console.log(B);if("string"===C.outputMode)return B;if("base64"===C.outputMode)return k(B);try{R=new Blob([B],{type:"application/vnd.ms-"+C.type}),saveAs(R,C.fileName+"."+W)}catch(e){x(C.fileName+"."+W,"data:application/vnd.ms-"+t+";base64,",B)}}else if("xlsx"==C.type){var q=[],G=[],E=0,D=e(S).find("thead").first().find(C.theadSelector);e(S).find("tbody").each(function(){D.push.apply(D,e(this).find(C.tbodySelector))});C.tfootSelector.length&&D.push.apply(D,e(S).find("tfoot").find(C.tfootSelector));e(D).each(function(){var e=[];n(this,"th,td",E,D.length,function(t,i,n){if("undefined"!==typeof t&&null!==t){var s=parseInt(t.getAttribute("colspan")),r=parseInt(t.getAttribute("rowspan"));t=f(t,i,n);""!==t&&t==+t&&(t=+t);G.forEach(function(t){if(E>=t.s.r&&E<=t.e.r&&e.length>=t.s.c&&e.length<=t.e.c)for(var i=0;i<=t.e.c-t.s.c;++i)e.push(null)});if(r||s)s=s||1,G.push({s:{r:E,c:e.length},e:{r:E+(r||1)-1,c:e.length+s-1}});e.push(""!==t?t:null);if(s)for(r=0;r<s-1;++r)e.push(null)}});q.push(e);E++});t=new y;W=w(q);W["!merges"]=G;t.SheetNames.push(C.worksheetName);t.Sheets[C.worksheetName]=W;t=XLSX.write(t,{bookType:C.type,bookSST:!1,type:"binary"});try{R=new Blob([b(t)],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),saveAs(R,C.fileName+"."+C.type)}catch(e){x(C.fileName+"."+C.type,"data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8,",R)}}else if("png"==C.type)html2canvas(e(S)[0]).then(function(e){e=e.toDataURL();for(var t=atob(e.substring(22)),i=new ArrayBuffer(t.length),n=new Uint8Array(i),s=0;s<t.length;s++)n[s]=t.charCodeAt(s);!0===C.consoleLog&&console.log(t);if("string"===C.outputMode)return t;if("base64"===C.outputMode)return k(e);if("window"===C.outputMode)window.open(e);else try{R=new Blob([i],{type:"image/png"}),saveAs(R,C.fileName+".png")}catch(e){x(C.fileName+".png","data:image/png,",R)}});else if("pdf"==C.type)if(!0===C.pdfmake.enabled){t=[];var X=[],E=0,W=function(t,i,s){var r=0;e(t).each(function(){var e=[];n(this,i,E,s,function(t,i,n){if("undefined"!==typeof t&&null!==t){var s=parseInt(t.getAttribute("colspan")),r=parseInt(t.getAttribute("rowspan"));t=f(t,i,n)||" ";1<s||1<r?e.push({colSpan:s||1,rowSpan:r||1,text:t}):e.push(t)}else e.push(" ")});e.length&&X.push(e);r<e.length&&(r=e.length);E++});return r},M=e(this).find("thead").first().find(C.theadSelector);B=W(M,"th,td",M.length);for(Y=t.length;Y<B;Y++)t.push("*");e(this).find("tbody").each(function(){D.push.apply(D,e(this).find(C.tbodySelector))});C.tfootSelector.length&&D.push.apply(D,e(this).find("tfoot").find(C.tfootSelector));W(D,"th,td",M.length+D.length);t={content:[{table:{headerRows:M.length,widths:t,body:X}}]};e.extend(!0,t,C.pdfmake.docDefinition);pdfMake.fonts={Roboto:{normal:"Roboto-Regular.ttf",bold:"Roboto-Medium.ttf",italics:"Roboto-Italic.ttf",bolditalics:"Roboto-MediumItalic.ttf"}};e.extend(!0,pdfMake.fonts,C.pdfmake.fonts);pdfMake.createPdf(t).getBuffer(function(e){try{var t=new Blob([e],{type:"application/pdf"});saveAs(t,C.fileName+".pdf")}catch(t){x(C.fileName+".pdf","data:application/pdf;base64,",e)}})}else if(!1===C.jspdf.autotable){t={dim:{w:g(e(S).first().get(0),"width","mm"),h:g(e(S).first().get(0),"height","mm")},pagesplit:!1};var Z=new jsPDF(C.jspdf.orientation,C.jspdf.unit,C.jspdf.format);Z.addHTML(e(S).first(),C.jspdf.margins.left,C.jspdf.margins.top,t,function(){s(Z,!1)})}else{var K=C.jspdf.autotable.tableExport;if("string"===typeof C.jspdf.format&&"bestfit"===C.jspdf.format.toLowerCase()){var Q={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89]},J="",ee="",te=0;e(S).filter(":visible").each(function(){if("none"!=e(this).css("display")){var t=g(e(this).get(0),"width","pt");if(t>te){t>Q.a0[0]&&(J="a0",ee="l");for(var i in Q)Q.hasOwnProperty(i)&&Q[i][1]>t&&(J=i,ee="l",Q[i][0]>t&&(ee="p"));te=t}}});C.jspdf.format=""===J?"a4":J;C.jspdf.orientation=""===ee?"w":ee}K.doc=new jsPDF(C.jspdf.orientation,C.jspdf.unit,C.jspdf.format);!0===K.outputImages&&(K.images={});"undefined"!=typeof K.images&&(e(S).filter(function(){return"none"!=e(this).data("tableexport-display")&&(e(this).is(":visible")||"always"==e(this).data("tableexport-display"))}).each(function(){var t=0;M=e(this).find("thead").find(C.theadSelector);e(this).find("tbody").each(function(){D.push.apply(D,e(this).find(C.tbodySelector))});C.tfootSelector.length&&D.push.apply(D,e(this).find("tfoot").find(C.tfootSelector));e(D).each(function(){n(this,"td,th",M.length+t,M.length+D.length,function(t,i,n){"undefined"!==typeof t&&null!==t&&(i=e(t).children(),"undefined"!=typeof i&&0<i.length&&o(t,i,K))});t++})}),M=[],D=[]);a(K,function(t){e(S).filter(function(){return"none"!=e(this).data("tableexport-display")&&(e(this).is(":visible")||"always"==e(this).data("tableexport-display"))}).each(function(){var t,s=0;I=i(this);K.columns=[];K.rows=[];K.rowoptions={};if("function"===typeof K.onTable&&!1===K.onTable(e(this),C))return!0;C.jspdf.autotable.tableExport=null;var o=e.extend(!0,{},C.jspdf.autotable);C.jspdf.autotable.tableExport=K;o.margin={};e.extend(!0,o.margin,C.jspdf.margins);o.tableExport=K;"function"!==typeof o.beforePageContent&&(o.beforePageContent=function(e){1==e.pageCount&&e.table.rows.concat(e.table.headerRow).forEach(function(t){0<t.height&&(t.height+=(2-1.15)/2*t.styles.fontSize,e.table.height+=(2-1.15)/2*t.styles.fontSize)})});"function"!==typeof o.createdHeaderCell&&(o.createdHeaderCell=function(t,i){t.styles=e.extend({},i.row.styles);if("undefined"!=typeof K.columns[i.column.dataKey]){var n=K.columns[i.column.dataKey];if("undefined"!=typeof n.rect){t.contentWidth=n.rect.width;if("undefined"==typeof K.heightRatio||0===K.heightRatio){var s=i.row.raw[i.column.dataKey].rowspan?i.row.raw[i.column.dataKey].rect.height/i.row.raw[i.column.dataKey].rowspan:i.row.raw[i.column.dataKey].rect.height;K.heightRatio=t.styles.rowHeight/s}s=i.row.raw[i.column.dataKey].rect.height*K.heightRatio;s>t.styles.rowHeight&&(t.styles.rowHeight=s)}"undefined"!=typeof n.style&&!0!==n.style.hidden&&(t.styles.halign=n.style.align,"inherit"===o.styles.fillColor&&(t.styles.fillColor=n.style.bcolor),"inherit"===o.styles.textColor&&(t.styles.textColor=n.style.color),"inherit"===o.styles.fontStyle&&(t.styles.fontStyle=n.style.fstyle))}});"function"!==typeof o.createdCell&&(o.createdCell=function(e,t){var i=K.rowoptions[t.row.index+":"+t.column.dataKey];"undefined"!=typeof i&&"undefined"!=typeof i.style&&!0!==i.style.hidden&&(e.styles.halign=i.style.align,"inherit"===o.styles.fillColor&&(e.styles.fillColor=i.style.bcolor),"inherit"===o.styles.textColor&&(e.styles.textColor=i.style.color),"inherit"===o.styles.fontStyle&&(e.styles.fontStyle=i.style.fstyle))});"function"!==typeof o.drawHeaderCell&&(o.drawHeaderCell=function(e,t){var i=K.columns[t.column.dataKey];return(!0!==i.style.hasOwnProperty("hidden")||!0!==i.style.hidden)&&0<=i.rowIndex?r(e,t,i):!1});"function"!==typeof o.drawCell&&(o.drawCell=function(e,t){var i=K.rowoptions[t.row.index+":"+t.column.dataKey];if(r(e,t,i))if(K.doc.rect(e.x,e.y,e.width,e.height,e.styles.fillStyle),"undefined"!=typeof i&&"undefined"!=typeof i.kids&&0<i.kids.length){var n=e.height/i.rect.height;if(n>K.dh||"undefined"==typeof K.dh)K.dh=n;K.dw=e.width/i.rect.width;n=e.textPos.y;l(e,i.kids,K);e.textPos.y=n;h(e,i.kids,K)}else h(e,{},K);return!1});K.headerrows=[];M=e(this).find("thead").find(C.theadSelector);M.each(function(){t=0;K.headerrows[s]=[];n(this,"th,td",s,M.length,function(e,i,n){var r=m(e);r.title=f(e,i,n);r.key=t++;r.rowIndex=s;K.headerrows[s].push(r)});s++});if(0<s)for(var a=s-1;0<=a;)e.each(K.headerrows[a],function(){var e=this;0<a&&null===this.rect&&(e=K.headerrows[a-1][this.key]);null!==e&&0<=e.rowIndex&&(!0!==e.style.hasOwnProperty("hidden")||!0!==e.style.hidden)&&K.columns.push(e)}),a=0<K.columns.length?-1:a-1;var d=0;D=[];e(this).find("tbody").each(function(){D.push.apply(D,e(this).find(C.tbodySelector))});C.tfootSelector.length&&D.push.apply(D,e(this).find("tfoot").find(C.tfootSelector));e(D).each(function(){var i=[];t=0;n(this,"td,th",s,M.length+D.length,function(n,s,r){if("undefined"===typeof K.columns[t]){var o={title:"",key:t,style:{hidden:!0}};K.columns.push(o)}"undefined"!==typeof n&&null!==n?(o=m(n),o.kids=e(n).children()):(o=e.extend(!0,{},K.rowoptions[d+":"+(t-1)]),o.colspan=-1);K.rowoptions[d+":"+t++]=o;i.push(f(n,s,r))});i.length&&(K.rows.push(i),d++);s++});if("function"===typeof K.onBeforeAutotable)K.onBeforeAutotable(e(this),K.columns,K.rows,o);K.doc.autoTable(K.columns,K.rows,o);if("function"===typeof K.onAfterAutotable)K.onAfterAutotable(e(this),o);C.jspdf.autotable.startY=K.doc.autoTableEndPosY()+o.margin.top});s(K.doc,"undefined"!=typeof K.images&&!1===jQuery.isEmptyObject(K.images));"undefined"!=typeof K.headerrows&&(K.headerrows.length=0);"undefined"!=typeof K.columns&&(K.columns.length=0);"undefined"!=typeof K.rows&&(K.rows.length=0);delete K.doc;K.doc=null})}return this}})})(jQuery);(function(e){var t=e(document);var i=e("head");var n=null;var s={};var r=0;var o="id";var a="px";var l="JColResizer";var h="JCLRFlex";var d=parseInt;var u=Math;var f=navigator.userAgent.indexOf("Trident/4.0")>0;var c;var p="";try{c=sessionStorage}catch(e){}i.append("<style type='text/css'>  .JColResizer{table-layout:fixed;} .JColResizer > tbody > tr > td, .JColResizer > tbody > tr > th{overflow:hidden}  .JPadding > tbody > tr > td, .JPadding > tbody > tr > th{padding-left:0!important; padding-right:0!important;} .JCLRgrips{ height:0px; position:relative;} .JCLRgrip{margin-left:-5px; position:absolute; z-index:5; } .JCLRgrip .JColResizer{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;cursor: col-resize;top:0px} .JCLRLastGrip{position:absolute; width:1px; } .JCLRgripDrag{ border-left:1px dotted black;\t} .JCLRFlex{width:auto!important;} .JCLRgrip.JCLRdisabledGrip .JColResizer{cursor:default; display:none;}</style>");var m=function(t,n){var a=e(t);a.opt=n;a.mode=n.resizeMode;a.dc=a.opt.disabledColumns;if(a.opt.removePadding)a.addClass("JPadding");if(a.opt.disable)return v(a);var h=a.id=a.attr(o)||l+r++;a.p=a.opt.postbackSafe;if(!a.is("table")||s[h]&&!a.opt.partialRefresh)return;if(a.opt.hoverCursor!=="col-resize")i.append("<style type='text/css'>.JCLRgrip .JColResizer:hover{cursor:"+a.opt.hoverCursor+"!important}</style>");a.addClass(l).attr(o,h).before('<div class="JCLRgrips"/>');a.g=[];a.c=[];a.w=a.width();a.gc=a.prev();a.f=a.opt.fixed;if(n.marginLeft)a.gc.css("marginLeft",n.marginLeft);if(n.marginRight)a.gc.css("marginRight",n.marginRight);a.cs=d(f?t.cellSpacing||t.currentStyle.borderSpacing:a.css("border-spacing"))||2;a.b=d(f?t.border||t.currentStyle.borderLeftWidth:a.css("border-left-width"))||1;s[h]=a;g(a)};var v=function(e){var t=e.attr(o),e=s[t];if(!e||!e.is("table"))return;e.removeClass(l+" "+h).gc.remove();delete s[t]};var g=function(t){var i=t.find(">thead>tr:first>th,>thead>tr:first>td");if(!i.length)i=t.find(">tbody>tr:first>th,>tr:first>th,>tbody>tr:first>td, >tr:first>td");i=i.filter(":visible");t.cg=t.find("col");t.ln=i.length;if(t.p&&c&&c[t.id])y(t,i);i.each(function(i){var n=e(this);var s=t.dc.indexOf(i)!=-1;var r=e(t.gc.append('<div class="JCLRgrip"></div>')[0].lastChild);r.append(s?"":t.opt.gripInnerHtml).append('<div class="'+l+'"></div>');if(i==t.ln-1){r.addClass("JCLRLastGrip");if(t.f)r.html("")}r.bind("touchstart mousedown",C);if(!s){r.removeClass("JCLRdisabledGrip").bind("touchstart mousedown",C)}else{r.addClass("JCLRdisabledGrip")}r.t=t;r.i=i;r.c=n;n.w=n.width();t.g.push(r);t.c.push(n);n.width(n.w).removeAttr("width");r.data(l,{i:i,t:t.attr(o),last:i==t.ln-1})});t.cg.removeAttr("width");t.find("td, th").not(i).not("table th, table td").each(function(){e(this).removeAttr("width")});if(!t.f){t.removeAttr("width").addClass(h)}b(t)};var y=function(e,t){var i,n=0,s=0,r=[],o;if(t){e.cg.removeAttr("width");if(e.opt.flush){c[e.id]="";return}i=c[e.id].split(";");o=i[e.ln+1];if(!e.f&&o){e.width(o*=1);if(e.opt.overflow){e.css("min-width",o+a);e.w=o}}for(;s<e.ln;s++){r.push(100*i[s]/i[e.ln]+"%");t.eq(s).css("width",r[s])}for(s=0;s<e.ln;s++)e.cg.eq(s).css("width",r[s])}else{c[e.id]="";for(;s<e.c.length;s++){i=e.c[s].width();c[e.id]+=i+";";n+=i}c[e.id]+=n;if(!e.f)c[e.id]+=";"+e.width()}};var b=function(e){e.gc.width(e.w);for(var t=0;t<e.ln;t++){var i=e.c[t];e.g[t].css({left:i.offset().left-e.offset().left+i.outerWidth(false)+e.cs/2+a,height:e.opt.headerOnly?e.c[0].outerHeight(false):e.outerHeight(false)})}};var w=function(e,t,i){var s=n.x-n.l,r=e.c[t],o=e.c[t+1];var l=r.w+s;var h=o.w-s;r.width(l+a);e.cg.eq(t).width(l+a);if(e.f){o.width(h+a);e.cg.eq(t+1).width(h+a)}else if(e.opt.overflow){e.css("min-width",e.w+s)}if(i){r.w=l;o.w=e.f?h:o.w}};var _=function(t){var i=e.map(t.c,function(e){return e.width()});t.width(t.w=t.width()).removeClass(h);e.each(t.c,function(e,t){t.width(i[e]).w=i[e]});t.addClass(h)};var x=function(e){if(!n)return;var t=n.t;var i=e.originalEvent.touches;var s=i?i[0].pageX:e.pageX;var r=s-n.ox+n.l;var o=t.opt.minWidth,l=n.i;var h=t.cs*1.5+o+t.b;var d=l==t.ln-1;var f=l?t.g[l-1].position().left+t.cs+o:h;var c=t.f?l==t.ln-1?t.w-h:t.g[l+1].position().left-t.cs-o:Infinity;r=u.max(f,u.min(c,r));n.x=r;n.css("left",r+a);if(d){var p=t.c[n.i];n.w=p.w+r-n.l}if(t.opt.liveDrag){if(d){p.width(n.w);if(!t.f&&t.opt.overflow){t.css("min-width",t.w+r-n.l)}else{t.w=t.width()}}else{w(t,l)}b(t);var m=t.opt.onDrag;if(m){e.currentTarget=t[0];m(e)}}return false};var k=function(i){t.unbind("touchend."+l+" mouseup."+l).unbind("touchmove."+l+" mousemove."+l);e("head :last-child").remove();if(!n)return;n.removeClass(n.t.opt.draggingClass);if(!(n.x-n.l==0)){var s=n.t;var r=s.opt.onResize;var o=n.i;var a=o==s.ln-1;var h=s.g[o].c;if(a){h.width(n.w);h.w=n.w}else{w(s,o,true)}if(!s.f)_(s);b(s);if(r){i.currentTarget=s[0];r(i)}if(s.p&&c)y(s)}n=null};var C=function(r){var o=e(this).data(l);var a=s[o.t],h=a.g[o.i];var d=r.originalEvent.touches;h.ox=d?d[0].pageX:r.pageX;h.l=h.position().left;h.x=h.l;t.bind("touchmove."+l+" mousemove."+l,x).bind("touchend."+l+" mouseup."+l,k);i.append("<style type='text/css'>*{cursor:"+a.opt.dragCursor+"!important}</style>");h.addClass(a.opt.draggingClass);n=h;if(a.c[o.i].l)for(var u=0,f;u<a.ln;u++){f=a.c[u];f.l=false;f.w=f.width()}return false};var S=function(){for(var e in s){if(s.hasOwnProperty(e)){e=s[e];var t,i=0;e.removeClass(l);if(e.f){e.w=e.width();for(t=0;t<e.ln;t++)i+=e.c[t].w;for(t=0;t<e.ln;t++)e.c[t].css("width",u.round(1e3*e.c[t].w/i)/10+"%").l=true}else{_(e);if(e.mode=="flex"&&e.p&&c){y(e)}}b(e.addClass(l))}}};e(window).bind("resize."+l,S);e.fn.extend({colResizable:function(t){var i={resizeMode:"fit",draggingClass:"JCLRgripDrag",gripInnerHtml:"",liveDrag:false,minWidth:15,headerOnly:false,hoverCursor:"col-resize",dragCursor:"col-resize",postbackSafe:false,flush:false,marginLeft:null,marginRight:null,disable:false,partialRefresh:false,disabledColumns:[],removePadding:true,onDrag:null,onResize:null};var t=e.extend(i,t);t.fixed=true;t.overflow=false;switch(t.resizeMode){case"flex":t.fixed=false;break;case"overflow":t.fixed=false;t.overflow=true;break}return this.each(function(){m(this,t)})}})})(jQuery);(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define(t):e.moment=t()})(this,function(){"use strict";var e;function t(){return e.apply(null,arguments)}function i(t){e=t}function n(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function s(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function r(e){var t;for(t in e){return false}return true}function o(e){return e===void 0}function a(e){return typeof e==="number"||Object.prototype.toString.call(e)==="[object Number]"}function l(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function h(e,t){var i=[],n;for(n=0;n<e.length;++n){i.push(t(e[n],n))}return i}function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var i in t){if(d(t,i)){e[i]=t[i]}}if(d(t,"toString")){e.toString=t.toString}if(d(t,"valueOf")){e.valueOf=t.valueOf}return e}function f(e,t,i,n){return ji(e,t,i,n,true).utc()}function c(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null,rfc2822:false,weekdayMismatch:false}}function p(e){if(e._pf==null){e._pf=c()}return e._pf}var m;if(Array.prototype.some){m=Array.prototype.some}else{m=function(e){var t=Object(this);var i=t.length>>>0;for(var n=0;n<i;n++){if(n in t&&e.call(this,t[n],n,t)){return true}}return false}}var v=m;function g(e){if(e._isValid==null){var t=p(e);var i=v.call(t.parsedDateParts,function(e){return e!=null});var n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i);if(e._strict){n=n&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined}if(Object.isFrozen==null||!Object.isFrozen(e)){e._isValid=n}else{return n}}return e._isValid}function y(e){var t=f(NaN);if(e!=null){u(p(t),e)}else{p(t).userInvalidated=true}return t}var b=t.momentProperties=[];function w(e,t){var i,n,s;if(!o(t._isAMomentObject)){e._isAMomentObject=t._isAMomentObject}if(!o(t._i)){e._i=t._i}if(!o(t._f)){e._f=t._f}if(!o(t._l)){e._l=t._l}if(!o(t._strict)){e._strict=t._strict}if(!o(t._tzm)){e._tzm=t._tzm}if(!o(t._isUTC)){e._isUTC=t._isUTC}if(!o(t._offset)){e._offset=t._offset}if(!o(t._pf)){e._pf=p(t)}if(!o(t._locale)){e._locale=t._locale}if(b.length>0){for(i=0;i<b.length;i++){n=b[i];s=t[n];if(!o(s)){e[n]=s}}}return e}var _=false;function x(e){w(this,e);this._d=new Date(e._d!=null?e._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN)}if(_===false){_=true;t.updateOffset(this);_=false}}function k(e){return e instanceof x||e!=null&&e._isAMomentObject!=null}function C(e){if(e<0){return Math.ceil(e)||0}else{return Math.floor(e)}}function S(e){var t=+e,i=0;if(t!==0&&isFinite(t)){i=C(t)}return i}function T(e,t,i){var n=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),r=0,o;for(o=0;o<n;o++){if(i&&e[o]!==t[o]||!i&&S(e[o])!==S(t[o])){r++}}return r+s}function M(e){if(t.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+e)}}function D(e,i){var n=true;return u(function(){if(t.deprecationHandler!=null){t.deprecationHandler(null,e)}if(n){var s=[];var r;for(var o=0;o<arguments.length;o++){r="";if(typeof arguments[o]==="object"){r+="\n["+o+"] ";for(var a in arguments[0]){r+=a+": "+arguments[0][a]+", "}r=r.slice(0,-2)}else{r=arguments[o]}s.push(r)}M(e+"\nArguments: "+Array.prototype.slice.call(s).join("")+"\n"+(new Error).stack);n=false}return i.apply(this,arguments)},i)}var E={};function O(e,i){if(t.deprecationHandler!=null){t.deprecationHandler(e,i)}if(!E[e]){M(i);E[e]=true}}t.suppressDeprecationWarnings=false;t.deprecationHandler=null;function P(e){return e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function I(e){var t,i;for(i in e){t=e[i];if(P(t)){this[i]=t}else{this["_"+i]=t}}this._config=e;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function A(e,t){var i=u({},e),n;for(n in t){if(d(t,n)){if(s(e[n])&&s(t[n])){i[n]={};u(i[n],e[n]);u(i[n],t[n])}else if(t[n]!=null){i[n]=t[n]}else{delete i[n]}}}for(n in e){if(d(e,n)&&!d(t,n)&&s(e[n])){i[n]=u({},i[n])}}return i}function N(e){if(e!=null){this.set(e)}}var F;if(Object.keys){F=Object.keys}else{F=function(e){var t,i=[];for(t in e){if(d(e,t)){i.push(t)}}return i}}var R=F;var $={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function L(e,t,i){var n=this._calendar[e]||this._calendar["sameElse"];return P(n)?n.call(t,i):n}var z={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function j(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];if(t||!i){return t}this._longDateFormat[e]=i.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)});return this._longDateFormat[e]}var H="Invalid date";function B(){return this._invalidDate}var U="%d";var W=/\d{1,2}/;function Y(e){return this._ordinal.replace("%d",e)}var V={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function q(e,t,i,n){var s=this._relativeTime[i];return P(s)?s(e,t,i,n):s.replace(/%d/i,e)}function G(e,t){var i=this._relativeTime[e>0?"future":"past"];return P(i)?i(t):i.replace(/%s/i,t)}var X={};function Z(e,t){var i=e.toLowerCase();X[i]=X[i+"s"]=X[t]=e}function K(e){return typeof e==="string"?X[e]||X[e.toLowerCase()]:undefined}function Q(e){var t={},i,n;for(n in e){if(d(e,n)){
i=K(n);if(i){t[i]=e[n]}}}return t}var J={};function ee(e,t){J[e]=t}function te(e){var t=[];for(var i in e){t.push({unit:i,priority:J[i]})}t.sort(function(e,t){return e.priority-t.priority});return t}function ie(e,i){return function(n){if(n!=null){se(this,e,n);t.updateOffset(this,i);return this}else{return ne(this,e)}}}function ne(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function se(e,t,i){if(e.isValid()){e._d["set"+(e._isUTC?"UTC":"")+t](i)}}function re(e){e=K(e);if(P(this[e])){return this[e]()}return this}function oe(e,t){if(typeof e==="object"){e=Q(e);var i=te(e);for(var n=0;n<i.length;n++){this[i[n].unit](e[i[n].unit])}}else{e=K(e);if(P(this[e])){return this[e](t)}}return this}function ae(e,t,i){var n=""+Math.abs(e),s=t-n.length,r=e>=0;return(r?i?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+n}var le=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var he=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var de={};var ue={};function fe(e,t,i,n){var s=n;if(typeof n==="string"){s=function(){return this[n]()}}if(e){ue[e]=s}if(t){ue[t[0]]=function(){return ae(s.apply(this,arguments),t[1],t[2])}}if(i){ue[i]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)}}}function ce(e){if(e.match(/\[[\s\S]/)){return e.replace(/^\[|\]$/g,"")}return e.replace(/\\/g,"")}function pe(e){var t=e.match(le),i,n;for(i=0,n=t.length;i<n;i++){if(ue[t[i]]){t[i]=ue[t[i]]}else{t[i]=ce(t[i])}}return function(i){var s="",r;for(r=0;r<n;r++){s+=P(t[r])?t[r].call(i,e):t[r]}return s}}function me(e,t){if(!e.isValid()){return e.localeData().invalidDate()}t=ve(t,e.localeData());de[t]=de[t]||pe(t);return de[t](e)}function ve(e,t){var i=5;function n(e){return t.longDateFormat(e)||e}he.lastIndex=0;while(i>=0&&he.test(e)){e=e.replace(he,n);he.lastIndex=0;i-=1}return e}var ge=/\d/;var ye=/\d\d/;var be=/\d{3}/;var we=/\d{4}/;var _e=/[+-]?\d{6}/;var xe=/\d\d?/;var ke=/\d\d\d\d?/;var Ce=/\d\d\d\d\d\d?/;var Se=/\d{1,3}/;var Te=/\d{1,4}/;var Me=/[+-]?\d{1,6}/;var De=/\d+/;var Ee=/[+-]?\d+/;var Oe=/Z|[+-]\d\d:?\d\d/gi;var Pe=/Z|[+-]\d\d(?::?\d\d)?/gi;var Ie=/[+-]?\d+(\.\d{1,3})?/;var Ae=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var Ne={};function Fe(e,t,i){Ne[e]=P(t)?t:function(e,n){return e&&i?i:t}}function Re(e,t){if(!d(Ne,e)){return new RegExp($e(e))}return Ne[e](t._strict,t._locale)}function $e(e){return Le(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,s){return t||i||n||s}))}function Le(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ze={};function je(e,t){var i,n=t;if(typeof e==="string"){e=[e]}if(a(t)){n=function(e,i){i[t]=S(e)}}for(i=0;i<e.length;i++){ze[e[i]]=n}}function He(e,t){je(e,function(e,i,n,s){n._w=n._w||{};t(e,n._w,n,s)})}function Be(e,t,i){if(t!=null&&d(ze,e)){ze[e](t,i._a,i,e)}}var Ue=0;var We=1;var Ye=2;var Ve=3;var qe=4;var Ge=5;var Xe=6;var Ze=7;var Ke=8;var Qe;if(Array.prototype.indexOf){Qe=Array.prototype.indexOf}else{Qe=function(e){var t;for(t=0;t<this.length;++t){if(this[t]===e){return t}}return-1}}var Je=Qe;function et(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}fe("M",["MM",2],"Mo",function(){return this.month()+1});fe("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});fe("MMMM",0,0,function(e){return this.localeData().months(this,e)});Z("month","M");ee("month",8);Fe("M",xe);Fe("MM",xe,ye);Fe("MMM",function(e,t){return t.monthsShortRegex(e)});Fe("MMMM",function(e,t){return t.monthsRegex(e)});je(["M","MM"],function(e,t){t[We]=S(e)-1});je(["MMM","MMMM"],function(e,t,i,n){var s=i._locale.monthsParse(e,n,i._strict);if(s!=null){t[We]=s}else{p(i).invalidMonth=e}});var tt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;var it="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function nt(e,t){if(!e){return n(this._months)?this._months:this._months["standalone"]}return n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||tt).test(t)?"format":"standalone"][e.month()]}var st="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function rt(e,t){if(!e){return n(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"]}return n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[tt.test(t)?"format":"standalone"][e.month()]}function ot(e,t,i){var n,s,r,o=e.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(n=0;n<12;++n){r=f([2e3,n]);this._shortMonthsParse[n]=this.monthsShort(r,"").toLocaleLowerCase();this._longMonthsParse[n]=this.months(r,"").toLocaleLowerCase()}}if(i){if(t==="MMM"){s=Je.call(this._shortMonthsParse,o);return s!==-1?s:null}else{s=Je.call(this._longMonthsParse,o);return s!==-1?s:null}}else{if(t==="MMM"){s=Je.call(this._shortMonthsParse,o);if(s!==-1){return s}s=Je.call(this._longMonthsParse,o);return s!==-1?s:null}else{s=Je.call(this._longMonthsParse,o);if(s!==-1){return s}s=Je.call(this._shortMonthsParse,o);return s!==-1?s:null}}}function at(e,t,i){var n,s,r;if(this._monthsParseExact){return ot.call(this,e,t,i)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(n=0;n<12;n++){s=f([2e3,n]);if(i&&!this._longMonthsParse[n]){this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i");this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")}if(!i&&!this._monthsParse[n]){r="^"+this.months(s,"")+"|^"+this.monthsShort(s,"");this._monthsParse[n]=new RegExp(r.replace(".",""),"i")}if(i&&t==="MMMM"&&this._longMonthsParse[n].test(e)){return n}else if(i&&t==="MMM"&&this._shortMonthsParse[n].test(e)){return n}else if(!i&&this._monthsParse[n].test(e)){return n}}}function lt(e,t){var i;if(!e.isValid()){return e}if(typeof t==="string"){if(/^\d+$/.test(t)){t=S(t)}else{t=e.localeData().monthsParse(t);if(!a(t)){return e}}}i=Math.min(e.date(),et(e.year(),t));e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i);return e}function ht(e){if(e!=null){lt(this,e);t.updateOffset(this,true);return this}else{return ne(this,"Month")}}function dt(){return et(this.year(),this.month())}var ut=Ae;function ft(e){if(this._monthsParseExact){if(!d(this,"_monthsRegex")){mt.call(this)}if(e){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!d(this,"_monthsShortRegex")){this._monthsShortRegex=ut}return this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}}var ct=Ae;function pt(e){if(this._monthsParseExact){if(!d(this,"_monthsRegex")){mt.call(this)}if(e){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!d(this,"_monthsRegex")){this._monthsRegex=ct}return this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}}function mt(){function e(e,t){return t.length-e.length}var t=[],i=[],n=[],s,r;for(s=0;s<12;s++){r=f([2e3,s]);t.push(this.monthsShort(r,""));i.push(this.months(r,""));n.push(this.months(r,""));n.push(this.monthsShort(r,""))}t.sort(e);i.sort(e);n.sort(e);for(s=0;s<12;s++){t[s]=Le(t[s]);i[s]=Le(i[s])}for(s=0;s<24;s++){n[s]=Le(n[s])}this._monthsRegex=new RegExp("^("+n.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}fe("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e});fe(0,["YY",2],0,function(){return this.year()%100});fe(0,["YYYY",4],0,"year");fe(0,["YYYYY",5],0,"year");fe(0,["YYYYYY",6,true],0,"year");Z("year","y");ee("year",1);Fe("Y",Ee);Fe("YY",xe,ye);Fe("YYYY",Te,we);Fe("YYYYY",Me,_e);Fe("YYYYYY",Me,_e);je(["YYYYY","YYYYYY"],Ue);je("YYYY",function(e,i){i[Ue]=e.length===2?t.parseTwoDigitYear(e):S(e)});je("YY",function(e,i){i[Ue]=t.parseTwoDigitYear(e)});je("Y",function(e,t){t[Ue]=parseInt(e,10)});function vt(e){return gt(e)?366:365}function gt(e){return e%4===0&&e%100!==0||e%400===0}t.parseTwoDigitYear=function(e){return S(e)+(S(e)>68?1900:2e3)};var yt=ie("FullYear",true);function bt(){return gt(this.year())}function wt(e,t,i,n,s,r,o){var a=new Date(e,t,i,n,s,r,o);if(e<100&&e>=0&&isFinite(a.getFullYear())){a.setFullYear(e)}return a}function _t(e){var t=new Date(Date.UTC.apply(null,arguments));if(e<100&&e>=0&&isFinite(t.getUTCFullYear())){t.setUTCFullYear(e)}return t}function xt(e,t,i){var n=7+t-i,s=(7+_t(e,0,n).getUTCDay()-t)%7;return-s+n-1}function kt(e,t,i,n,s){var r=(7+i-n)%7,o=xt(e,n,s),a=1+7*(t-1)+r+o,l,h;if(a<=0){l=e-1;h=vt(l)+a}else if(a>vt(e)){l=e+1;h=a-vt(e)}else{l=e;h=a}return{year:l,dayOfYear:h}}function Ct(e,t,i){var n=xt(e.year(),t,i),s=Math.floor((e.dayOfYear()-n-1)/7)+1,r,o;if(s<1){o=e.year()-1;r=s+St(o,t,i)}else if(s>St(e.year(),t,i)){r=s-St(e.year(),t,i);o=e.year()+1}else{o=e.year();r=s}return{week:r,year:o}}function St(e,t,i){var n=xt(e,t,i),s=xt(e+1,t,i);return(vt(e)-n+s)/7}fe("w",["ww",2],"wo","week");fe("W",["WW",2],"Wo","isoWeek");Z("week","w");Z("isoWeek","W");ee("week",5);ee("isoWeek",5);Fe("w",xe);Fe("ww",xe,ye);Fe("W",xe);Fe("WW",xe,ye);He(["w","ww","W","WW"],function(e,t,i,n){t[n.substr(0,1)]=S(e)});function Tt(e){return Ct(e,this._week.dow,this._week.doy).week}var Mt={dow:0,doy:6};function Dt(){return this._week.dow}function Et(){return this._week.doy}function Ot(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Pt(e){var t=Ct(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}fe("d",0,"do","day");fe("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});fe("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});fe("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});fe("e",0,0,"weekday");fe("E",0,0,"isoWeekday");Z("day","d");Z("weekday","e");Z("isoWeekday","E");ee("day",11);ee("weekday",11);ee("isoWeekday",11);Fe("d",xe);Fe("e",xe);Fe("E",xe);Fe("dd",function(e,t){return t.weekdaysMinRegex(e)});Fe("ddd",function(e,t){return t.weekdaysShortRegex(e)});Fe("dddd",function(e,t){return t.weekdaysRegex(e)});He(["dd","ddd","dddd"],function(e,t,i,n){var s=i._locale.weekdaysParse(e,n,i._strict);if(s!=null){t.d=s}else{p(i).invalidWeekday=e}});He(["d","e","E"],function(e,t,i,n){t[n]=S(e)});function It(e,t){if(typeof e!=="string"){return e}if(!isNaN(e)){return parseInt(e,10)}e=t.weekdaysParse(e);if(typeof e==="number"){return e}return null}function At(e,t){if(typeof e==="string"){return t.weekdaysParse(e)%7||7}return isNaN(e)?null:e}var Nt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function Ft(e,t){if(!e){return n(this._weekdays)?this._weekdays:this._weekdays["standalone"]}return n(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}var Rt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function $t(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}var Lt="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function zt(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function jt(e,t,i){var n,s,r,o=e.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(n=0;n<7;++n){r=f([2e3,1]).day(n);this._minWeekdaysParse[n]=this.weekdaysMin(r,"").toLocaleLowerCase();this._shortWeekdaysParse[n]=this.weekdaysShort(r,"").toLocaleLowerCase();this._weekdaysParse[n]=this.weekdays(r,"").toLocaleLowerCase()}}if(i){if(t==="dddd"){s=Je.call(this._weekdaysParse,o);return s!==-1?s:null}else if(t==="ddd"){s=Je.call(this._shortWeekdaysParse,o);return s!==-1?s:null}else{s=Je.call(this._minWeekdaysParse,o);return s!==-1?s:null}}else{if(t==="dddd"){s=Je.call(this._weekdaysParse,o);if(s!==-1){return s}s=Je.call(this._shortWeekdaysParse,o);if(s!==-1){return s}s=Je.call(this._minWeekdaysParse,o);return s!==-1?s:null}else if(t==="ddd"){s=Je.call(this._shortWeekdaysParse,o);if(s!==-1){return s}s=Je.call(this._weekdaysParse,o);if(s!==-1){return s}s=Je.call(this._minWeekdaysParse,o);return s!==-1?s:null}else{s=Je.call(this._minWeekdaysParse,o);if(s!==-1){return s}s=Je.call(this._weekdaysParse,o);if(s!==-1){return s}s=Je.call(this._shortWeekdaysParse,o);return s!==-1?s:null}}}function Ht(e,t,i){var n,s,r;if(this._weekdaysParseExact){return jt.call(this,e,t,i)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(n=0;n<7;n++){s=f([2e3,1]).day(n);if(i&&!this._fullWeekdaysParse[n]){this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(s,"").replace(".",".?")+"$","i");this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(s,"").replace(".",".?")+"$","i");this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(s,"").replace(".",".?")+"$","i")}if(!this._weekdaysParse[n]){r="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,"");this._weekdaysParse[n]=new RegExp(r.replace(".",""),"i")}if(i&&t==="dddd"&&this._fullWeekdaysParse[n].test(e)){return n}else if(i&&t==="ddd"&&this._shortWeekdaysParse[n].test(e)){return n}else if(i&&t==="dd"&&this._minWeekdaysParse[n].test(e)){return n}else if(!i&&this._weekdaysParse[n].test(e)){return n}}}function Bt(e){if(!this.isValid()){return e!=null?this:NaN}var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(e!=null){e=It(e,this.localeData());return this.add(e-t,"d")}else{return t}}function Ut(e){if(!this.isValid()){return e!=null?this:NaN}var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Wt(e){if(!this.isValid()){return e!=null?this:NaN}if(e!=null){var t=At(e,this.localeData());return this.day(this.day()%7?t:t-7)}else{return this.day()||7}}var Yt=Ae;function Vt(e){if(this._weekdaysParseExact){if(!d(this,"_weekdaysRegex")){Kt.call(this)}if(e){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!d(this,"_weekdaysRegex")){this._weekdaysRegex=Yt}return this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}}var qt=Ae;function Gt(e){if(this._weekdaysParseExact){if(!d(this,"_weekdaysRegex")){Kt.call(this)}if(e){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!d(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=qt}return this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}var Xt=Ae;function Zt(e){if(this._weekdaysParseExact){if(!d(this,"_weekdaysRegex")){Kt.call(this)}if(e){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!d(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=Xt}return this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function Kt(){function e(e,t){return t.length-e.length}var t=[],i=[],n=[],s=[],r,o,a,l,h;for(r=0;r<7;r++){o=f([2e3,1]).day(r);a=this.weekdaysMin(o,"");l=this.weekdaysShort(o,"");h=this.weekdays(o,"");t.push(a);i.push(l);n.push(h);s.push(a);s.push(l);s.push(h)}t.sort(e);i.sort(e);n.sort(e);s.sort(e);for(r=0;r<7;r++){i[r]=Le(i[r]);n[r]=Le(n[r]);s[r]=Le(s[r])}this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Qt(){return this.hours()%12||12}function Jt(){return this.hours()||24}fe("H",["HH",2],0,"hour");fe("h",["hh",2],0,Qt);fe("k",["kk",2],0,Jt);fe("hmm",0,0,function(){return""+Qt.apply(this)+ae(this.minutes(),2)});fe("hmmss",0,0,function(){return""+Qt.apply(this)+ae(this.minutes(),2)+ae(this.seconds(),2)});fe("Hmm",0,0,function(){return""+this.hours()+ae(this.minutes(),2)});fe("Hmmss",0,0,function(){return""+this.hours()+ae(this.minutes(),2)+ae(this.seconds(),2)});function ei(e,t){fe(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}ei("a",true);ei("A",false);Z("hour","h");ee("hour",13);function ti(e,t){return t._meridiemParse}Fe("a",ti);Fe("A",ti);Fe("H",xe);Fe("h",xe);Fe("k",xe);Fe("HH",xe,ye);Fe("hh",xe,ye);Fe("kk",xe,ye);Fe("hmm",ke);Fe("hmmss",Ce);Fe("Hmm",ke);Fe("Hmmss",Ce);je(["H","HH"],Ve);je(["k","kk"],function(e,t,i){var n=S(e);t[Ve]=n===24?0:n});je(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e);i._meridiem=e});je(["h","hh"],function(e,t,i){t[Ve]=S(e);p(i).bigHour=true});je("hmm",function(e,t,i){var n=e.length-2;t[Ve]=S(e.substr(0,n));t[qe]=S(e.substr(n));p(i).bigHour=true});je("hmmss",function(e,t,i){var n=e.length-4;var s=e.length-2;t[Ve]=S(e.substr(0,n));t[qe]=S(e.substr(n,2));t[Ge]=S(e.substr(s));p(i).bigHour=true});je("Hmm",function(e,t,i){var n=e.length-2;t[Ve]=S(e.substr(0,n));t[qe]=S(e.substr(n))});je("Hmmss",function(e,t,i){var n=e.length-4;var s=e.length-2;t[Ve]=S(e.substr(0,n));t[qe]=S(e.substr(n,2));t[Ge]=S(e.substr(s))});function ii(e){return(e+"").toLowerCase().charAt(0)==="p"}var ni=/[ap]\.?m?\.?/i;function si(e,t,i){if(e>11){return i?"pm":"PM"}else{return i?"am":"AM"}}var ri=ie("Hours",true);var oi={calendar:$,longDateFormat:z,invalidDate:H,ordinal:U,dayOfMonthOrdinalParse:W,relativeTime:V,months:it,monthsShort:st,week:Mt,weekdays:Nt,weekdaysMin:Lt,weekdaysShort:Rt,meridiemParse:ni};var ai={};var li={};var hi;function di(e){return e?e.toLowerCase().replace("_","-"):e}function ui(e){var t=0,i,n,s,r;while(t<e.length){r=di(e[t]).split("-");i=r.length;n=di(e[t+1]);n=n?n.split("-"):null;while(i>0){s=fi(r.slice(0,i).join("-"));if(s){return s}if(n&&n.length>=i&&T(r,n,true)>=i-1){break}i--}t++}return null}function fi(e){var t=null;if(!ai[e]&&typeof module!=="undefined"&&module&&module.exports){try{t=hi._abbr;require("./locale/"+e);ci(t)}catch(e){}}return ai[e]}function ci(e,t){var i;if(e){if(o(t)){i=vi(e)}else{i=pi(e,t)}if(i){hi=i}}return hi._abbr}function pi(e,t){if(t!==null){var i=oi;t.abbr=e;if(ai[e]!=null){O("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");i=ai[e]._config}else if(t.parentLocale!=null){if(ai[t.parentLocale]!=null){i=ai[t.parentLocale]._config}else{if(!li[t.parentLocale]){li[t.parentLocale]=[]}li[t.parentLocale].push({name:e,config:t});return null}}ai[e]=new N(A(i,t));if(li[e]){li[e].forEach(function(e){pi(e.name,e.config)})}ci(e);return ai[e]}else{delete ai[e];return null}}function mi(e,t){if(t!=null){var i,n=oi;if(ai[e]!=null){n=ai[e]._config}t=A(n,t);i=new N(t);i.parentLocale=ai[e];ai[e]=i;ci(e)}else{if(ai[e]!=null){if(ai[e].parentLocale!=null){ai[e]=ai[e].parentLocale}else if(ai[e]!=null){delete ai[e]}}}return ai[e]}function vi(e){var t;if(e&&e._locale&&e._locale._abbr){e=e._locale._abbr}if(!e){return hi}if(!n(e)){t=fi(e);if(t){return t}e=[e]}return ui(e)}function gi(){return R(ai)}function yi(e){var t;var i=e._a;if(i&&p(e).overflow===-2){t=i[We]<0||i[We]>11?We:i[Ye]<1||i[Ye]>et(i[Ue],i[We])?Ye:i[Ve]<0||i[Ve]>24||i[Ve]===24&&(i[qe]!==0||i[Ge]!==0||i[Xe]!==0)?Ve:i[qe]<0||i[qe]>59?qe:i[Ge]<0||i[Ge]>59?Ge:i[Xe]<0||i[Xe]>999?Xe:-1;if(p(e)._overflowDayOfYear&&(t<Ue||t>Ye)){t=Ye}if(p(e)._overflowWeeks&&t===-1){t=Ze}if(p(e)._overflowWeekday&&t===-1){t=Ke}p(e).overflow=t}return e}var bi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var wi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var _i=/Z|[+-]\d\d(?::?\d\d)?/;var xi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/]];var ki=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]];var Ci=/^\/?Date\((\-?\d+)/i;function Si(e){var t,i,n=e._i,s=bi.exec(n)||wi.exec(n),r,o,a,l;if(s){p(e).iso=true;for(t=0,i=xi.length;t<i;t++){if(xi[t][1].exec(s[1])){o=xi[t][0];r=xi[t][2]!==false;break}}if(o==null){e._isValid=false;return}if(s[3]){for(t=0,i=ki.length;t<i;t++){if(ki[t][1].exec(s[3])){a=(s[2]||" ")+ki[t][0];break}}if(a==null){e._isValid=false;return}}if(!r&&a!=null){e._isValid=false;return}if(s[4]){if(_i.exec(s[4])){l="Z"}else{e._isValid=false;return}}e._f=o+(a||"")+(l||"");Ai(e)}else{e._isValid=false}}var Ti=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;function Mi(e){var t,i,n,s,r,o;var a={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"};var l="YXWVUTSRQPONZABCDEFGHIKLM";var h,d;t=e._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,"");i=Ti.exec(t);if(i){n=i[1]?"ddd"+(i[1].length===5?", ":" "):"";s="D MMM "+(i[2].length>10?"YYYY ":"YY ");r="HH:mm"+(i[4]?":ss":"");if(i[1]){var u=new Date(i[2]);var f=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][u.getDay()];if(i[1].substr(0,3)!==f){p(e).weekdayMismatch=true;e._isValid=false;return}}switch(i[5].length){case 2:if(d===0){h=" +0000"}else{d=l.indexOf(i[5][1].toUpperCase())-12;h=(d<0?" -":" +")+(""+d).replace(/^-?/,"0").match(/..$/)[0]+"00"}break;case 4:h=a[i[5]];break;default:h=a[" GMT"]}i[5]=h;e._i=i.splice(1).join("");o=" ZZ";e._f=n+s+r+o;Ai(e);p(e).rfc2822=true}else{e._isValid=false}}function Di(e){var i=Ci.exec(e._i);if(i!==null){e._d=new Date(+i[1]);return}Si(e);if(e._isValid===false){delete e._isValid}else{return}Mi(e);if(e._isValid===false){delete e._isValid}else{return}t.createFromInputFallback(e)}t.createFromInputFallback=D("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are "+"discouraged and will be removed in an upcoming major release. Please refer to "+"http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Ei(e,t,i){if(e!=null){return e}if(t!=null){return t}return i}function Oi(e){var i=new Date(t.now());if(e._useUTC){return[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]}return[i.getFullYear(),i.getMonth(),i.getDate()]}function Pi(e){var t,i,n=[],s,r;if(e._d){return}s=Oi(e);if(e._w&&e._a[Ye]==null&&e._a[We]==null){Ii(e)}if(e._dayOfYear!=null){r=Ei(e._a[Ue],s[Ue]);if(e._dayOfYear>vt(r)||e._dayOfYear===0){p(e)._overflowDayOfYear=true}i=_t(r,0,e._dayOfYear);e._a[We]=i.getUTCMonth();e._a[Ye]=i.getUTCDate()}for(t=0;t<3&&e._a[t]==null;++t){e._a[t]=n[t]=s[t]}for(;t<7;t++){e._a[t]=n[t]=e._a[t]==null?t===2?1:0:e._a[t]}if(e._a[Ve]===24&&e._a[qe]===0&&e._a[Ge]===0&&e._a[Xe]===0){e._nextDay=true;e._a[Ve]=0}e._d=(e._useUTC?_t:wt).apply(null,n);if(e._tzm!=null){e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm)}if(e._nextDay){e._a[Ve]=24}}function Ii(e){var t,i,n,s,r,o,a,l;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){r=1;o=4;i=Ei(t.GG,e._a[Ue],Ct(Hi(),1,4).year);n=Ei(t.W,1);s=Ei(t.E,1);if(s<1||s>7){l=true}}else{r=e._locale._week.dow;o=e._locale._week.doy;var h=Ct(Hi(),r,o);i=Ei(t.gg,e._a[Ue],h.year);n=Ei(t.w,h.week);if(t.d!=null){s=t.d;if(s<0||s>6){l=true}}else if(t.e!=null){s=t.e+r;if(t.e<0||t.e>6){l=true}}else{s=r}}if(n<1||n>St(i,r,o)){p(e)._overflowWeeks=true}else if(l!=null){p(e)._overflowWeekday=true}else{a=kt(i,n,s,r,o);e._a[Ue]=a.year;e._dayOfYear=a.dayOfYear}}t.ISO_8601=function(){};t.RFC_2822=function(){};function Ai(e){if(e._f===t.ISO_8601){Si(e);return}if(e._f===t.RFC_2822){Mi(e);return}e._a=[];p(e).empty=true;var i=""+e._i,n,s,r,o,a,l=i.length,h=0;r=ve(e._f,e._locale).match(le)||[];for(n=0;n<r.length;n++){o=r[n];s=(i.match(Re(o,e))||[])[0];if(s){a=i.substr(0,i.indexOf(s));if(a.length>0){p(e).unusedInput.push(a)}i=i.slice(i.indexOf(s)+s.length);h+=s.length}if(ue[o]){if(s){p(e).empty=false}else{p(e).unusedTokens.push(o)}Be(o,s,e)}else if(e._strict&&!s){p(e).unusedTokens.push(o)}}p(e).charsLeftOver=l-h;if(i.length>0){p(e).unusedInput.push(i)}if(e._a[Ve]<=12&&p(e).bigHour===true&&e._a[Ve]>0){p(e).bigHour=undefined}p(e).parsedDateParts=e._a.slice(0);p(e).meridiem=e._meridiem;e._a[Ve]=Ni(e._locale,e._a[Ve],e._meridiem);Pi(e);yi(e)}function Ni(e,t,i){var n;if(i==null){return t}if(e.meridiemHour!=null){return e.meridiemHour(t,i)}else if(e.isPM!=null){n=e.isPM(i);if(n&&t<12){t+=12}if(!n&&t===12){t=0}return t}else{return t}}function Fi(e){var t,i,n,s,r;if(e._f.length===0){p(e).invalidFormat=true;e._d=new Date(NaN);return}for(s=0;s<e._f.length;s++){r=0;t=w({},e);if(e._useUTC!=null){t._useUTC=e._useUTC}t._f=e._f[s];Ai(t);if(!g(t)){continue}r+=p(t).charsLeftOver;r+=p(t).unusedTokens.length*10;p(t).score=r;if(n==null||r<n){n=r;i=t}}u(e,i||t)}function Ri(e){if(e._d){return}var t=Q(e._i);e._a=h([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)});Pi(e)}function $i(e){var t=new x(yi(Li(e)));if(t._nextDay){t.add(1,"d");t._nextDay=undefined}return t}function Li(e){var t=e._i,i=e._f;e._locale=e._locale||vi(e._l);if(t===null||i===undefined&&t===""){return y({nullInput:true})}if(typeof t==="string"){e._i=t=e._locale.preparse(t)}if(k(t)){return new x(yi(t))}else if(l(t)){e._d=t}else if(n(i)){Fi(e)}else if(i){Ai(e)}else{zi(e)}if(!g(e)){e._d=null}return e}function zi(e){var i=e._i;if(o(i)){e._d=new Date(t.now())}else if(l(i)){e._d=new Date(i.valueOf())}else if(typeof i==="string"){Di(e)}else if(n(i)){e._a=h(i.slice(0),function(e){return parseInt(e,10)});Pi(e)}else if(s(i)){Ri(e)}else if(a(i)){e._d=new Date(i)}else{t.createFromInputFallback(e)}}function ji(e,t,i,o,a){var l={};if(i===true||i===false){o=i;i=undefined}if(s(e)&&r(e)||n(e)&&e.length===0){e=undefined}l._isAMomentObject=true;l._useUTC=l._isUTC=a;l._l=i;l._i=e;l._f=t;l._strict=o;return $i(l)}function Hi(e,t,i,n){return ji(e,t,i,n,false)}var Bi=D("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Hi.apply(null,arguments);if(this.isValid()&&e.isValid()){return e<this?this:e}else{return y()}});var Ui=D("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Hi.apply(null,arguments);if(this.isValid()&&e.isValid()){return e>this?this:e}else{return y()}});function Wi(e,t){var i,s;if(t.length===1&&n(t[0])){t=t[0]}if(!t.length){return Hi()}i=t[0];for(s=1;s<t.length;++s){if(!t[s].isValid()||t[s][e](i)){i=t[s]}}return i}function Yi(){var e=[].slice.call(arguments,0);return Wi("isBefore",e)}function Vi(){var e=[].slice.call(arguments,0);return Wi("isAfter",e)}var qi=function(){return Date.now?Date.now():+new Date};var Gi=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Xi(e){for(var t in e){if(!(Gi.indexOf(t)!==-1&&(e[t]==null||!isNaN(e[t])))){return false}}var i=false;for(var n=0;n<Gi.length;++n){if(e[Gi[n]]){if(i){return false}if(parseFloat(e[Gi[n]])!==S(e[Gi[n]])){i=true}}}return true}function Zi(){return this._isValid}function Ki(){return wn(NaN)}function Qi(e){var t=Q(e),i=t.year||0,n=t.quarter||0,s=t.month||0,r=t.week||0,o=t.day||0,a=t.hour||0,l=t.minute||0,h=t.second||0,d=t.millisecond||0;this._isValid=Xi(t);this._milliseconds=+d+h*1e3+l*6e4+a*1e3*60*60;this._days=+o+r*7;this._months=+s+n*3+i*12;this._data={};this._locale=vi();this._bubble()}function Ji(e){return e instanceof Qi}function en(e){if(e<0){return Math.round(-1*e)*-1}else{return Math.round(e)}}function tn(e,t){fe(e,0,0,function(){var e=this.utcOffset();var i="+";if(e<0){e=-e;i="-"}return i+ae(~~(e/60),2)+t+ae(~~e%60,2)})}tn("Z",":");tn("ZZ","");Fe("Z",Pe);Fe("ZZ",Pe);je(["Z","ZZ"],function(e,t,i){i._useUTC=true;i._tzm=sn(Pe,e)});var nn=/([\+\-]|\d\d)/gi;function sn(e,t){var i=(t||"").match(e);if(i===null){return null}var n=i[i.length-1]||[];var s=(n+"").match(nn)||["-",0,0];var r=+(s[1]*60)+S(s[2]);return r===0?0:s[0]==="+"?r:-r}function rn(e,i){var n,s;if(i._isUTC){n=i.clone();s=(k(e)||l(e)?e.valueOf():Hi(e).valueOf())-n.valueOf();n._d.setTime(n._d.valueOf()+s);t.updateOffset(n,false);return n}else{return Hi(e).local()}}function on(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}t.updateOffset=function(){};function an(e,i,n){var s=this._offset||0,r;if(!this.isValid()){return e!=null?this:NaN}if(e!=null){if(typeof e==="string"){e=sn(Pe,e);if(e===null){return this}}else if(Math.abs(e)<16&&!n){e=e*60}if(!this._isUTC&&i){r=on(this)}this._offset=e;this._isUTC=true;if(r!=null){this.add(r,"m")}if(s!==e){if(!i||this._changeInProgress){Sn(this,wn(e-s,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;t.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?s:on(this)}}function ln(e,t){if(e!=null){if(typeof e!=="string"){e=-e}this.utcOffset(e,t);return this}else{return-this.utcOffset()}}function hn(e){return this.utcOffset(0,e)}function dn(e){if(this._isUTC){this.utcOffset(0,e);this._isUTC=false;if(e){this.subtract(on(this),"m")}}return this}function un(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true)}else if(typeof this._i==="string"){var e=sn(Oe,this._i);if(e!=null){this.utcOffset(e)}else{this.utcOffset(0,true)}}return this}function fn(e){if(!this.isValid()){return false}e=e?Hi(e).utcOffset():0;return(this.utcOffset()-e)%60===0}function cn(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function pn(){if(!o(this._isDSTShifted)){return this._isDSTShifted}var e={};w(e,this);e=Li(e);if(e._a){var t=e._isUTC?f(e._a):Hi(e._a);this._isDSTShifted=this.isValid()&&T(e._a,t.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function mn(){return this.isValid()?!this._isUTC:false}function vn(){return this.isValid()?this._isUTC:false}function gn(){return this.isValid()?this._isUTC&&this._offset===0:false}var yn=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/;var bn=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;function wn(e,t){var i=e,n=null,s,r,o;if(Ji(e)){i={ms:e._milliseconds,d:e._days,M:e._months}}else if(a(e)){i={};if(t){i[t]=e}else{i.milliseconds=e}}else if(!!(n=yn.exec(e))){s=n[1]==="-"?-1:1;i={y:0,d:S(n[Ye])*s,h:S(n[Ve])*s,m:S(n[qe])*s,s:S(n[Ge])*s,ms:S(en(n[Xe]*1e3))*s}}else if(!!(n=bn.exec(e))){s=n[1]==="-"?-1:1;i={y:_n(n[2],s),M:_n(n[3],s),w:_n(n[4],s),d:_n(n[5],s),h:_n(n[6],s),m:_n(n[7],s),s:_n(n[8],s)}}else if(i==null){i={}}else if(typeof i==="object"&&("from"in i||"to"in i)){o=kn(Hi(i.from),Hi(i.to));i={};i.ms=o.milliseconds;i.M=o.months}r=new Qi(i);if(Ji(e)&&d(e,"_locale")){r._locale=e._locale}return r}wn.fn=Qi.prototype;wn.invalid=Ki;function _n(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function xn(e,t){var i={milliseconds:0,months:0};i.months=t.month()-e.month()+(t.year()-e.year())*12;if(e.clone().add(i.months,"M").isAfter(t)){--i.months}i.milliseconds=+t-+e.clone().add(i.months,"M");return i}function kn(e,t){var i;if(!(e.isValid()&&t.isValid())){return{milliseconds:0,months:0}}t=rn(t,e);if(e.isBefore(t)){i=xn(e,t)}else{i=xn(t,e);i.milliseconds=-i.milliseconds;i.months=-i.months}return i}function Cn(e,t){return function(i,n){var s,r;if(n!==null&&!isNaN(+n)){O(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");
r=i;i=n;n=r}i=typeof i==="string"?+i:i;s=wn(i,n);Sn(this,s,e);return this}}function Sn(e,i,n,s){var r=i._milliseconds,o=en(i._days),a=en(i._months);if(!e.isValid()){return}s=s==null?true:s;if(r){e._d.setTime(e._d.valueOf()+r*n)}if(o){se(e,"Date",ne(e,"Date")+o*n)}if(a){lt(e,ne(e,"Month")+a*n)}if(s){t.updateOffset(e,o||a)}}var Tn=Cn(1,"add");var Mn=Cn(-1,"subtract");function Dn(e,t){var i=e.diff(t,"days",true);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function En(e,i){var n=e||Hi(),s=rn(n,this).startOf("day"),r=t.calendarFormat(this,s)||"sameElse";var o=i&&(P(i[r])?i[r].call(this,n):i[r]);return this.format(o||this.localeData().calendar(r,this,Hi(n)))}function On(){return new x(this)}function Pn(e,t){var i=k(e)?e:Hi(e);if(!(this.isValid()&&i.isValid())){return false}t=K(!o(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()>i.valueOf()}else{return i.valueOf()<this.clone().startOf(t).valueOf()}}function In(e,t){var i=k(e)?e:Hi(e);if(!(this.isValid()&&i.isValid())){return false}t=K(!o(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()<i.valueOf()}else{return this.clone().endOf(t).valueOf()<i.valueOf()}}function An(e,t,i,n){n=n||"()";return(n[0]==="("?this.isAfter(e,i):!this.isBefore(e,i))&&(n[1]===")"?this.isBefore(t,i):!this.isAfter(t,i))}function Nn(e,t){var i=k(e)?e:Hi(e),n;if(!(this.isValid()&&i.isValid())){return false}t=K(t||"millisecond");if(t==="millisecond"){return this.valueOf()===i.valueOf()}else{n=i.valueOf();return this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()}}function Fn(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Rn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function $n(e,t,i){var n,s,r,o;if(!this.isValid()){return NaN}n=rn(e,this);if(!n.isValid()){return NaN}s=(n.utcOffset()-this.utcOffset())*6e4;t=K(t);if(t==="year"||t==="month"||t==="quarter"){o=Ln(this,n);if(t==="quarter"){o=o/3}else if(t==="year"){o=o/12}}else{r=this-n;o=t==="second"?r/1e3:t==="minute"?r/6e4:t==="hour"?r/36e5:t==="day"?(r-s)/864e5:t==="week"?(r-s)/6048e5:r}return i?o:C(o)}function Ln(e,t){var i=(t.year()-e.year())*12+(t.month()-e.month()),n=e.clone().add(i,"months"),s,r;if(t-n<0){s=e.clone().add(i-1,"months");r=(t-n)/(n-s)}else{s=e.clone().add(i+1,"months");r=(t-n)/(s-n)}return-(i+r)||0}t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function zn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function jn(){if(!this.isValid()){return null}var e=this.clone().utc();if(e.year()<0||e.year()>9999){return me(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}if(P(Date.prototype.toISOString)){return this.toDate().toISOString()}return me(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function Hn(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)"}var e="moment";var t="";if(!this.isLocal()){e=this.utcOffset()===0?"moment.utc":"moment.parseZone";t="Z"}var i="["+e+'("]';var n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";var s="-MM-DD[T]HH:mm:ss.SSS";var r=t+'[")]';return this.format(i+n+s+r)}function Bn(e){if(!e){e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat}var i=me(this,e);return this.localeData().postformat(i)}function Un(e,t){if(this.isValid()&&(k(e)&&e.isValid()||Hi(e).isValid())){return wn({to:this,from:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function Wn(e){return this.from(Hi(),e)}function Yn(e,t){if(this.isValid()&&(k(e)&&e.isValid()||Hi(e).isValid())){return wn({from:this,to:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function Vn(e){return this.to(Hi(),e)}function qn(e){var t;if(e===undefined){return this._locale._abbr}else{t=vi(e);if(t!=null){this._locale=t}return this}}var Gn=D("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){if(e===undefined){return this.localeData()}else{return this.locale(e)}});function Xn(){return this._locale}function Zn(e){e=K(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(e==="week"){this.weekday(0)}if(e==="isoWeek"){this.isoWeekday(1)}if(e==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function Kn(e){e=K(e);if(e===undefined||e==="millisecond"){return this}if(e==="date"){e="day"}return this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function Qn(){return this._d.valueOf()-(this._offset||0)*6e4}function Jn(){return Math.floor(this.valueOf()/1e3)}function es(){return new Date(this.valueOf())}function ts(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function is(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function ns(){return this.isValid()?this.toISOString():null}function ss(){return g(this)}function rs(){return u({},p(this))}function os(){return p(this).overflow}function as(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}fe(0,["gg",2],0,function(){return this.weekYear()%100});fe(0,["GG",2],0,function(){return this.isoWeekYear()%100});function ls(e,t){fe(0,[e,e.length],0,t)}ls("gggg","weekYear");ls("ggggg","weekYear");ls("GGGG","isoWeekYear");ls("GGGGG","isoWeekYear");Z("weekYear","gg");Z("isoWeekYear","GG");ee("weekYear",1);ee("isoWeekYear",1);Fe("G",Ee);Fe("g",Ee);Fe("GG",xe,ye);Fe("gg",xe,ye);Fe("GGGG",Te,we);Fe("gggg",Te,we);Fe("GGGGG",Me,_e);Fe("ggggg",Me,_e);He(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,n){t[n.substr(0,2)]=S(e)});He(["gg","GG"],function(e,i,n,s){i[s]=t.parseTwoDigitYear(e)});function hs(e){return cs.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function ds(e){return cs.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function us(){return St(this.year(),1,4)}function fs(){var e=this.localeData()._week;return St(this.year(),e.dow,e.doy)}function cs(e,t,i,n,s){var r;if(e==null){return Ct(this,n,s).year}else{r=St(e,n,s);if(t>r){t=r}return ps.call(this,e,t,i,n,s)}}function ps(e,t,i,n,s){var r=kt(e,t,i,n,s),o=_t(r.year,0,r.dayOfYear);this.year(o.getUTCFullYear());this.month(o.getUTCMonth());this.date(o.getUTCDate());return this}fe("Q",0,"Qo","quarter");Z("quarter","Q");ee("quarter",7);Fe("Q",ge);je("Q",function(e,t){t[We]=(S(e)-1)*3});function ms(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}fe("D",["DD",2],"Do","date");Z("date","D");ee("date",9);Fe("D",xe);Fe("DD",xe,ye);Fe("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});je(["D","DD"],Ye);je("Do",function(e,t){t[Ye]=S(e.match(xe)[0],10)});var vs=ie("Date",true);fe("DDD",["DDDD",3],"DDDo","dayOfYear");Z("dayOfYear","DDD");ee("dayOfYear",4);Fe("DDD",Se);Fe("DDDD",be);je(["DDD","DDDD"],function(e,t,i){i._dayOfYear=S(e)});function gs(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}fe("m",["mm",2],0,"minute");Z("minute","m");ee("minute",14);Fe("m",xe);Fe("mm",xe,ye);je(["m","mm"],qe);var ys=ie("Minutes",false);fe("s",["ss",2],0,"second");Z("second","s");ee("second",15);Fe("s",xe);Fe("ss",xe,ye);je(["s","ss"],Ge);var bs=ie("Seconds",false);fe("S",0,0,function(){return~~(this.millisecond()/100)});fe(0,["SS",2],0,function(){return~~(this.millisecond()/10)});fe(0,["SSS",3],0,"millisecond");fe(0,["SSSS",4],0,function(){return this.millisecond()*10});fe(0,["SSSSS",5],0,function(){return this.millisecond()*100});fe(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});fe(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});fe(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});fe(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Z("millisecond","ms");ee("millisecond",16);Fe("S",Se,ge);Fe("SS",Se,ye);Fe("SSS",Se,be);var ws;for(ws="SSSS";ws.length<=9;ws+="S"){Fe(ws,De)}function _s(e,t){t[Xe]=S(("0."+e)*1e3)}for(ws="S";ws.length<=9;ws+="S"){je(ws,_s)}var xs=ie("Milliseconds",false);fe("z",0,0,"zoneAbbr");fe("zz",0,0,"zoneName");function ks(){return this._isUTC?"UTC":""}function Cs(){return this._isUTC?"Coordinated Universal Time":""}var Ss=x.prototype;Ss.add=Tn;Ss.calendar=En;Ss.clone=On;Ss.diff=$n;Ss.endOf=Kn;Ss.format=Bn;Ss.from=Un;Ss.fromNow=Wn;Ss.to=Yn;Ss.toNow=Vn;Ss.get=re;Ss.invalidAt=os;Ss.isAfter=Pn;Ss.isBefore=In;Ss.isBetween=An;Ss.isSame=Nn;Ss.isSameOrAfter=Fn;Ss.isSameOrBefore=Rn;Ss.isValid=ss;Ss.lang=Gn;Ss.locale=qn;Ss.localeData=Xn;Ss.max=Ui;Ss.min=Bi;Ss.parsingFlags=rs;Ss.set=oe;Ss.startOf=Zn;Ss.subtract=Mn;Ss.toArray=ts;Ss.toObject=is;Ss.toDate=es;Ss.toISOString=jn;Ss.inspect=Hn;Ss.toJSON=ns;Ss.toString=zn;Ss.unix=Jn;Ss.valueOf=Qn;Ss.creationData=as;Ss.year=yt;Ss.isLeapYear=bt;Ss.weekYear=hs;Ss.isoWeekYear=ds;Ss.quarter=Ss.quarters=ms;Ss.month=ht;Ss.daysInMonth=dt;Ss.week=Ss.weeks=Ot;Ss.isoWeek=Ss.isoWeeks=Pt;Ss.weeksInYear=fs;Ss.isoWeeksInYear=us;Ss.date=vs;Ss.day=Ss.days=Bt;Ss.weekday=Ut;Ss.isoWeekday=Wt;Ss.dayOfYear=gs;Ss.hour=Ss.hours=ri;Ss.minute=Ss.minutes=ys;Ss.second=Ss.seconds=bs;Ss.millisecond=Ss.milliseconds=xs;Ss.utcOffset=an;Ss.utc=hn;Ss.local=dn;Ss.parseZone=un;Ss.hasAlignedHourOffset=fn;Ss.isDST=cn;Ss.isLocal=mn;Ss.isUtcOffset=vn;Ss.isUtc=gn;Ss.isUTC=gn;Ss.zoneAbbr=ks;Ss.zoneName=Cs;Ss.dates=D("dates accessor is deprecated. Use date instead.",vs);Ss.months=D("months accessor is deprecated. Use month instead",ht);Ss.years=D("years accessor is deprecated. Use year instead",yt);Ss.zone=D("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",ln);Ss.isDSTShifted=D("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",pn);function Ts(e){return Hi(e*1e3)}function Ms(){return Hi.apply(null,arguments).parseZone()}function Ds(e){return e}var Es=N.prototype;Es.calendar=L;Es.longDateFormat=j;Es.invalidDate=B;Es.ordinal=Y;Es.preparse=Ds;Es.postformat=Ds;Es.relativeTime=q;Es.pastFuture=G;Es.set=I;Es.months=nt;Es.monthsShort=rt;Es.monthsParse=at;Es.monthsRegex=pt;Es.monthsShortRegex=ft;Es.week=Tt;Es.firstDayOfYear=Et;Es.firstDayOfWeek=Dt;Es.weekdays=Ft;Es.weekdaysMin=zt;Es.weekdaysShort=$t;Es.weekdaysParse=Ht;Es.weekdaysRegex=Vt;Es.weekdaysShortRegex=Gt;Es.weekdaysMinRegex=Zt;Es.isPM=ii;Es.meridiem=si;function Os(e,t,i,n){var s=vi();var r=f().set(n,t);return s[i](r,e)}function Ps(e,t,i){if(a(e)){t=e;e=undefined}e=e||"";if(t!=null){return Os(e,t,i,"month")}var n;var s=[];for(n=0;n<12;n++){s[n]=Os(e,n,i,"month")}return s}function Is(e,t,i,n){if(typeof e==="boolean"){if(a(t)){i=t;t=undefined}t=t||""}else{t=e;i=t;e=false;if(a(t)){i=t;t=undefined}t=t||""}var s=vi(),r=e?s._week.dow:0;if(i!=null){return Os(t,(i+r)%7,n,"day")}var o;var l=[];for(o=0;o<7;o++){l[o]=Os(t,(o+r)%7,n,"day")}return l}function As(e,t){return Ps(e,t,"months")}function Ns(e,t){return Ps(e,t,"monthsShort")}function Fs(e,t,i){return Is(e,t,i,"weekdays")}function Rs(e,t,i){return Is(e,t,i,"weekdaysShort")}function $s(e,t,i){return Is(e,t,i,"weekdaysMin")}ci("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=S(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+i}});t.lang=D("moment.lang is deprecated. Use moment.locale instead.",ci);t.langData=D("moment.langData is deprecated. Use moment.localeData instead.",vi);var Ls=Math.abs;function zs(){var e=this._data;this._milliseconds=Ls(this._milliseconds);this._days=Ls(this._days);this._months=Ls(this._months);e.milliseconds=Ls(e.milliseconds);e.seconds=Ls(e.seconds);e.minutes=Ls(e.minutes);e.hours=Ls(e.hours);e.months=Ls(e.months);e.years=Ls(e.years);return this}function js(e,t,i,n){var s=wn(t,i);e._milliseconds+=n*s._milliseconds;e._days+=n*s._days;e._months+=n*s._months;return e._bubble()}function Hs(e,t){return js(this,e,t,1)}function Bs(e,t){return js(this,e,t,-1)}function Us(e){if(e<0){return Math.floor(e)}else{return Math.ceil(e)}}function Ws(){var e=this._milliseconds;var t=this._days;var i=this._months;var n=this._data;var s,r,o,a,l;if(!(e>=0&&t>=0&&i>=0||e<=0&&t<=0&&i<=0)){e+=Us(Vs(i)+t)*864e5;t=0;i=0}n.milliseconds=e%1e3;s=C(e/1e3);n.seconds=s%60;r=C(s/60);n.minutes=r%60;o=C(r/60);n.hours=o%24;t+=C(o/24);l=C(Ys(t));i+=l;t-=Us(Vs(l));a=C(i/12);i%=12;n.days=t;n.months=i;n.years=a;return this}function Ys(e){return e*4800/146097}function Vs(e){return e*146097/4800}function qs(e){if(!this.isValid()){return NaN}var t;var i;var n=this._milliseconds;e=K(e);if(e==="month"||e==="year"){t=this._days+n/864e5;i=this._months+Ys(t);return e==="month"?i:i/12}else{t=this._days+Math.round(Vs(this._months));switch(e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return t*24+n/36e5;case"minute":return t*1440+n/6e4;case"second":return t*86400+n/1e3;case"millisecond":return Math.floor(t*864e5)+n;default:throw new Error("Unknown unit "+e)}}}function Gs(){if(!this.isValid()){return NaN}return this._milliseconds+this._days*864e5+this._months%12*2592e6+S(this._months/12)*31536e6}function Xs(e){return function(){return this.as(e)}}var Zs=Xs("ms");var Ks=Xs("s");var Qs=Xs("m");var Js=Xs("h");var er=Xs("d");var tr=Xs("w");var ir=Xs("M");var nr=Xs("y");function sr(e){e=K(e);return this.isValid()?this[e+"s"]():NaN}function rr(e){return function(){return this.isValid()?this._data[e]:NaN}}var or=rr("milliseconds");var ar=rr("seconds");var lr=rr("minutes");var hr=rr("hours");var dr=rr("days");var ur=rr("months");var fr=rr("years");function cr(){return C(this.days()/7)}var pr=Math.round;var mr={ss:44,s:45,m:45,h:22,d:26,M:11};function vr(e,t,i,n,s){return s.relativeTime(t||1,!!i,e,n)}function gr(e,t,i){var n=wn(e).abs();var s=pr(n.as("s"));var r=pr(n.as("m"));var o=pr(n.as("h"));var a=pr(n.as("d"));var l=pr(n.as("M"));var h=pr(n.as("y"));var d=s<=mr.ss&&["s",s]||s<mr.s&&["ss",s]||r<=1&&["m"]||r<mr.m&&["mm",r]||o<=1&&["h"]||o<mr.h&&["hh",o]||a<=1&&["d"]||a<mr.d&&["dd",a]||l<=1&&["M"]||l<mr.M&&["MM",l]||h<=1&&["y"]||["yy",h];d[2]=t;d[3]=+e>0;d[4]=i;return vr.apply(null,d)}function yr(e){if(e===undefined){return pr}if(typeof e==="function"){pr=e;return true}return false}function br(e,t){if(mr[e]===undefined){return false}if(t===undefined){return mr[e]}mr[e]=t;if(e==="s"){mr.ss=t-1}return true}function wr(e){if(!this.isValid()){return this.localeData().invalidDate()}var t=this.localeData();var i=gr(this,!e,t);if(e){i=t.pastFuture(+this,i)}return t.postformat(i)}var _r=Math.abs;function xr(){if(!this.isValid()){return this.localeData().invalidDate()}var e=_r(this._milliseconds)/1e3;var t=_r(this._days);var i=_r(this._months);var n,s,r;n=C(e/60);s=C(n/60);e%=60;n%=60;r=C(i/12);i%=12;var o=r;var a=i;var l=t;var h=s;var d=n;var u=e;var f=this.asSeconds();if(!f){return"P0D"}return(f<0?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(l?l+"D":"")+(h||d||u?"T":"")+(h?h+"H":"")+(d?d+"M":"")+(u?u+"S":"")}var kr=Qi.prototype;kr.isValid=Zi;kr.abs=zs;kr.add=Hs;kr.subtract=Bs;kr.as=qs;kr.asMilliseconds=Zs;kr.asSeconds=Ks;kr.asMinutes=Qs;kr.asHours=Js;kr.asDays=er;kr.asWeeks=tr;kr.asMonths=ir;kr.asYears=nr;kr.valueOf=Gs;kr._bubble=Ws;kr.get=sr;kr.milliseconds=or;kr.seconds=ar;kr.minutes=lr;kr.hours=hr;kr.days=dr;kr.weeks=cr;kr.months=ur;kr.years=fr;kr.humanize=wr;kr.toISOString=xr;kr.toString=xr;kr.toJSON=xr;kr.locale=qn;kr.localeData=Xn;kr.toIsoString=D("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",xr);kr.lang=Gn;fe("X",0,0,"unix");fe("x",0,0,"valueOf");Fe("x",Ee);Fe("X",Ie);je("X",function(e,t,i){i._d=new Date(parseFloat(e,10)*1e3)});je("x",function(e,t,i){i._d=new Date(S(e))});t.version="2.18.1";i(Hi);t.fn=Ss;t.min=Yi;t.max=Vi;t.now=qi;t.utc=f;t.unix=Ts;t.months=As;t.isDate=l;t.locale=ci;t.invalid=y;t.duration=wn;t.isMoment=k;t.weekdays=Fs;t.parseZone=Ms;t.localeData=vi;t.isDuration=Ji;t.monthsShort=Ns;t.weekdaysMin=$s;t.defineLocale=pi;t.updateLocale=mi;t.locales=gi;t.weekdaysShort=Rs;t.normalizeUnits=K;t.relativeTimeRounding=yr;t.relativeTimeThreshold=br;t.calendarFormat=Dn;t.prototype=Ss;return t});(function(e){"use strict";var t=typeof window==="undefined"?null:window;if(typeof define==="function"&&define.amd){define(function(){return e(t)})}else if(typeof module!=="undefined"){module.exports=e(t)}else{t.DOMPurify=e(t)}})(function e(t){"use strict";var i=function(t){return e(t)};i.version="0.7.4";if(!t||!t.document||t.document.nodeType!==9){i.isSupported=false;return i}var n=t.document;var s=n;var r=t.DocumentFragment;var o=t.HTMLTemplateElement;var a=t.NodeFilter;var l=t.NamedNodeMap||t.MozNamedAttrMap;var h=t.Text;var d=t.Comment;var u=t.DOMParser;if(typeof o==="function"){var f=n.createElement("template");if(f.content&&f.content.ownerDocument){n=f.content.ownerDocument}}var c=n.implementation;var p=n.createNodeIterator;var m=n.getElementsByTagName;var v=n.createDocumentFragment;var g=s.importNode;var y={};i.isSupported=typeof c.createHTMLDocument!=="undefined"&&n.documentMode!==9;var b=function(e,t){var i=t.length;while(i--){if(typeof t[i]==="string"){t[i]=t[i].toLowerCase()}e[t[i]]=true}return e};var w=function(e){var t={};var i;for(i in e){if(e.hasOwnProperty(i)){t[i]=e[i]}}return t};var _=null;var x=b({},["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr","svg","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","switch","symbol","text","textpath","title","tref","tspan","view","vkern","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmuliscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mpspace","msqrt","mystyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","#text"]);var k=null;var C=b({},["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","coords","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","rows","rowspan","spellcheck","scope","selected","shape","size","span","srclang","start","src","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns","accent-height","accumulate","additivive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mode","min","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","surfacescale","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","u1","u2","unicode","values","viewbox","visibility","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","y","y1","y2","z","zoomandpan","accent","accentunder","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","display","displaystyle","fence","frame","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]);var S=null;var T=null;var M=true;var D=false;var E=false;var O=false;var P=/\{\{[\s\S]*|[\s\S]*\}\}/gm;var I=/<%[\s\S]*|[\s\S]*%>/gm;var A=false;var N=false;var F=false;var R=false;var $=true;var L=true;var z=b({},["audio","head","math","script","style","svg","video"]);var j=b({},["audio","video","img","source"]);var H=b({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]);var B=null;var U=n.createElement("form");var W=function(e){if(typeof e!=="object"){e={}}_="ALLOWED_TAGS"in e?b({},e.ALLOWED_TAGS):x;k="ALLOWED_ATTR"in e?b({},e.ALLOWED_ATTR):C;S="FORBID_TAGS"in e?b({},e.FORBID_TAGS):{};T="FORBID_ATTR"in e?b({},e.FORBID_ATTR):{};M=e.ALLOW_DATA_ATTR!==false;D=e.ALLOW_UNKNOWN_PROTOCOLS||false;E=e.SAFE_FOR_JQUERY||false;O=e.SAFE_FOR_TEMPLATES||false;A=e.WHOLE_DOCUMENT||false;N=e.RETURN_DOM||false;F=e.RETURN_DOM_FRAGMENT||false;R=e.RETURN_DOM_IMPORT||false;$=e.SANITIZE_DOM!==false;L=e.KEEP_CONTENT!==false;if(O){M=false}if(F){N=true}if(e.ADD_TAGS){if(_===x){_=w(_)}b(_,e.ADD_TAGS)}if(e.ADD_ATTR){if(k===C){k=w(k)}b(k,e.ADD_ATTR)}if(L){_["#text"]=true}if(Object&&"freeze"in Object){Object.freeze(e)}B=e};var Y=function(e){try{e.parentNode.removeChild(e)}catch(t){e.outerHTML=""}};var V=function(e){var t,i;try{t=(new u).parseFromString(e,"text/html")}catch(e){}if(!t){t=c.createHTMLDocument("");i=t.body;i.parentNode.removeChild(i.parentNode.firstElementChild);i.outerHTML=e}if(typeof t.getElementsByTagName==="function"){return t.getElementsByTagName(A?"html":"body")[0]}return m.call(t,A?"html":"body")[0]};var q=function(e){return p.call(e.ownerDocument||e,e,a.SHOW_ELEMENT|a.SHOW_COMMENT|a.SHOW_TEXT,function(){return a.FILTER_ACCEPT},false)};var G=function(e){if(e instanceof h||e instanceof d){return false}if(typeof e.nodeName!=="string"||typeof e.textContent!=="string"||typeof e.removeChild!=="function"||!(e.attributes instanceof l)||typeof e.removeAttribute!=="function"||typeof e.setAttribute!=="function"){return true}return false};var X=function(e){var t,i;ie("beforeSanitizeElements",e,null);if(G(e)){Y(e);return true}t=e.nodeName.toLowerCase();ie("uponSanitizeElement",e,{tagName:t});if(!_[t]||S[t]){if(L&&!z[t]&&typeof e.insertAdjacentHTML==="function"){try{e.insertAdjacentHTML("AfterEnd",e.innerHTML)}catch(e){}}Y(e);return true}if(E&&!e.firstElementChild&&(!e.content||!e.content.firstElementChild)){e.innerHTML=e.textContent.replace(/</g,"&lt;")}if(O&&e.nodeType===3){i=e.textContent;i=i.replace(P," ");i=i.replace(I," ");e.textContent=i}ie("afterSanitizeElements",e,null);return false};var Z=/^data-[\w.\u00B7-\uFFFF-]/;var K=/^(?:(?:(?:f|ht)tps?|mailto|tel):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i;var Q=/^(?:\w+script|data):/i;var J=/[\x00-\x20\xA0\u1680\u180E\u2000-\u2029\u205f\u3000]/g;var ee=function(e){var i,s,r,o,a,l,h,d;ie("beforeSanitizeAttributes",e,null);l=e.attributes;if(!l){return}h={attrName:"",attrValue:"",keepAttr:true};d=l.length;while(d--){i=l[d];s=i.name;r=i.value;o=s.toLowerCase();h.attrName=o;h.attrValue=r;h.keepAttr=true;ie("uponSanitizeAttribute",e,h);r=h.attrValue;if(o==="name"&&e.nodeName==="IMG"&&l.id){a=l.id;l=Array.prototype.slice.apply(l);e.removeAttribute("id");e.removeAttribute(s);if(l.indexOf(a)>d){e.setAttribute("id",a.value)}}else{if(s==="id"){e.setAttribute(s,"")}e.removeAttribute(s)}if(!h.keepAttr){continue}if($&&(o==="id"||o==="name")&&(r in t||r in n||r in U)){continue}if(O){r=r.replace(P," ");r=r.replace(I," ")}if(k[o]&&!T[o]&&(H[o]||K.test(r.replace(J,""))||o==="src"&&r.indexOf("data:")===0&&j[e.nodeName.toLowerCase()])||M&&Z.test(o)||D&&!Q.test(r.replace(J,""))){try{e.setAttribute(s,r)}catch(e){}}}ie("afterSanitizeAttributes",e,null)};var te=function(e){var t;var i=q(e);ie("beforeSanitizeShadowDOM",e,null);while(t=i.nextNode()){ie("uponSanitizeShadowNode",t,null);if(X(t)){continue}if(t.content instanceof r){te(t.content)}ee(t)}ie("afterSanitizeShadowDOM",e,null)};var ie=function(e,t,n){if(!y[e]){return}y[e].forEach(function(e){e.call(i,t,n,B)})};i.sanitize=function(e,n){var o,a,l,h,d;if(!e){e=""}if(typeof e!=="string"){if(typeof e.toString!=="function"){throw new TypeError("toString is not a function")}else{e=e.toString()}}if(!i.isSupported){if(typeof t.toStaticHTML==="object"||typeof t.toStaticHTML==="function"){return t.toStaticHTML(e)}return e}W(n);if(!N&&!A&&e.indexOf("<")===-1){return e}o=V(e);if(!o){return N?null:""}h=q(o);while(a=h.nextNode()){if(a.nodeType===3&&a===l){continue}if(X(a)){continue}if(a.content instanceof r){te(a.content)}ee(a);l=a}if(N){if(F){d=v.call(o.ownerDocument);while(o.firstChild){d.appendChild(o.firstChild)}}else{d=o}if(R){d=g.call(s,d,true)}return d}return A?o.outerHTML:o.innerHTML};i.addHook=function(e,t){if(typeof t!=="function"){return}y[e]=y[e]||[];y[e].push(t)};i.removeHook=function(e){if(y[e]){y[e].pop()}};i.removeHooks=function(e){if(y[e]){y[e]=[]}};i.removeAllHooks=function(){y=[]};return i});(function e(t){"use strict";if(typeof define==="function"&&define.amd){define(t)}else if(typeof module!="undefined"&&typeof module.exports!="undefined"){module.exports=t()}else{window["KvSortable"]=t()}})(function e(){"use strict";if(typeof window=="undefined"||!window.document){return function e(){throw new Error("KvSortable.js requires a window with a document")}}var t,i,n,s,r,o,a,l,h,d,u,f,c,p,m,v,g,y={},b,w,_,x=/\s+/g,k=/left|right|inline/,C="KvSortable"+(new Date).getTime(),S=window,T=S.document,M=S.parseInt,D=S.jQuery||S.Zepto,E=S.Polymer,O=false,P=!!("draggable"in T.createElement("div")),I=function(e){if(!!navigator.userAgent.match(/Trident.*rv[ :]?11\./)){return false}e=T.createElement("x");e.style.cssText="pointer-events:auto";return e.style.pointerEvents==="auto"}(),A=false,N=Math.abs,F=Math.min,R=[],$=[],L=se(function(e,t,i){if(i&&t.scroll){var n=i[C],s,r,o=t.scrollSensitivity,a=t.scrollSpeed,u=e.clientX,f=e.clientY,c=window.innerWidth,p=window.innerHeight,m,v,g,b;if(h!==i){l=t.scroll;h=i;d=t.scrollFn;if(l===true){l=i;do{if(l.offsetWidth<l.scrollWidth||l.offsetHeight<l.scrollHeight){break}}while(l=l.parentNode)}}if(l){s=l;r=l.getBoundingClientRect();m=(N(r.right-u)<=o)-(N(r.left-u)<=o);v=(N(r.bottom-f)<=o)-(N(r.top-f)<=o)}if(!(m||v)){m=(c-u<=o)-(u<=o);v=(p-f<=o)-(f<=o);(m||v)&&(s=S)}if(y.vx!==m||y.vy!==v||y.el!==s){y.el=s;y.vx=m;y.vy=v;clearInterval(y.pid);if(s){y.pid=setInterval(function(){b=v?v*a:0;g=m?m*a:0;if("function"===typeof d){return d.call(n,g,b,e)}if(s===S){S.scrollTo(S.pageXOffset+g,S.pageYOffset+b)}else{s.scrollTop+=b;s.scrollLeft+=g}},24)}}}},30),z=function(e){function t(e,t){if(e===void 0||e===true){e=i.name}if(typeof e==="function"){return e}else{return function(i,n){var s=n.options.group.name;return t?e:e&&(e.join?e.indexOf(s)>-1:s==e)}}}var i={};var n=e.group;if(!n||typeof n!="object"){n={name:n}}i.name=n.name;i.checkPull=t(n.pull,true);i.checkPut=t(n.put);i.revertClone=n.revertClone;e.group=i};function j(e,t){if(!(e&&e.nodeType&&e.nodeType===1)){throw"KvSortable: `el` must be HTMLElement, and not "+{}.toString.call(e)}this.el=e;this.options=t=re({},t);e[C]=this;var i={group:Math.random(),sort:true,disabled:false,store:null,handle:null,scroll:true,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"kvsortable-ghost",chosenClass:"kvsortable-chosen",dragClass:"kvsortable-drag",ignore:"a, img",filter:null,preventOnFilter:true,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:false,dragoverBubble:false,dataIdAttr:"data-id",delay:0,forceFallback:false,fallbackClass:"kvsortable-fallback",fallbackOnBody:false,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var n in i){!(n in t)&&(t[n]=i[n])}z(t);for(var s in this){if(s.charAt(0)==="_"&&typeof this[s]==="function"){this[s]=this[s].bind(this)}}this.nativeDraggable=t.forceFallback?false:P;Y(e,"mousedown",this._onTapStart);Y(e,"touchstart",this._onTapStart);Y(e,"pointerdown",this._onTapStart);if(this.nativeDraggable){Y(e,"dragover",this);Y(e,"dragenter",this)}$.push(this._onDragOver);t.store&&this.sort(t.store.get(this))}j.prototype={constructor:j,_onTapStart:function(e){var i=this,n=this.el,s=this.options,r=s.preventOnFilter,o=e.type,l=e.touches&&e.touches[0],h=(l||e).target,d=e.target.shadowRoot&&e.path[0]||h,u=s.filter,f;ae(n);if(t){return}if(o==="mousedown"&&e.button!==0||s.disabled){return}h=B(h,s.draggable,n);if(!h){return}if(a===h){return}f=ie(h,s.draggable);if(typeof u==="function"){if(u.call(this,e,h,this)){Z(i,d,"filter",h,n,f);r&&e.preventDefault();return}}else if(u){u=u.split(",").some(function(e){e=B(d,e.trim(),n);if(e){Z(i,e,"filter",h,n,f);return true}});if(u){r&&e.preventDefault();return}}if(s.handle&&!B(d,s.handle,n)){return}this._prepareDragStart(e,l,h,f)},_prepareDragStart:function(e,n,s,l){var h=this,d=h.el,u=h.options,f=d.ownerDocument,c;if(s&&!t&&s.parentNode===d){b=e;r=d;t=s;i=t.parentNode;o=t.nextSibling;a=s;v=u.group;p=l;this._lastX=(n||e).clientX;this._lastY=(n||e).clientY;t.style["will-change"]="transform";c=function(){h._disableDelayedDrag();t.draggable=h.nativeDraggable;q(t,u.chosenClass,true);h._triggerDragStart(e,n);Z(h,r,"choose",t,r,p)};u.ignore.split(",").forEach(function(e){X(t,e.trim(),Q)});Y(f,"mouseup",h._onDrop);Y(f,"touchend",h._onDrop);Y(f,"touchcancel",h._onDrop);Y(f,"pointercancel",h._onDrop);Y(f,"selectstart",h);if(u.delay){Y(f,"mouseup",h._disableDelayedDrag);Y(f,"touchend",h._disableDelayedDrag);Y(f,"touchcancel",h._disableDelayedDrag);Y(f,"mousemove",h._disableDelayedDrag);Y(f,"touchmove",h._disableDelayedDrag);Y(f,"pointermove",h._disableDelayedDrag);
h._dragStartTimer=setTimeout(c,u.delay)}else{c()}}},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer);V(e,"mouseup",this._disableDelayedDrag);V(e,"touchend",this._disableDelayedDrag);V(e,"touchcancel",this._disableDelayedDrag);V(e,"mousemove",this._disableDelayedDrag);V(e,"touchmove",this._disableDelayedDrag);V(e,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(e,i){i=i||(e.pointerType=="touch"?e:null);if(i){b={target:t,clientX:i.clientX,clientY:i.clientY};this._onDragStart(b,"touch")}else if(!this.nativeDraggable){this._onDragStart(b,true)}else{Y(t,"dragend",this);Y(r,"dragstart",this._onDragStart)}try{if(T.selection){setTimeout(function(){T.selection.empty()})}else{window.getSelection().removeAllRanges()}}catch(e){}},_dragStarted:function(){if(r&&t){var e=this.options;q(t,e.ghostClass,true);q(t,e.dragClass,false);j.active=this;Z(this,r,"start",t,r,p)}else{this._nulling()}},_emulateDragOver:function(){if(w){if(this._lastX===w.clientX&&this._lastY===w.clientY){return}this._lastX=w.clientX;this._lastY=w.clientY;if(!I){G(n,"display","none")}var e=T.elementFromPoint(w.clientX,w.clientY),t=e,i=$.length;if(t){do{if(t[C]){while(i--){$[i]({clientX:w.clientX,clientY:w.clientY,target:e,rootEl:t})}break}e=t}while(t=t.parentNode)}if(!I){G(n,"display","")}}},_onTouchMove:function(e){if(b){var t=this.options,i=t.fallbackTolerance,s=t.fallbackOffset,r=e.touches?e.touches[0]:e,o=r.clientX-b.clientX+s.x,a=r.clientY-b.clientY+s.y,l=e.touches?"translate3d("+o+"px,"+a+"px,0)":"translate("+o+"px,"+a+"px)";if(!j.active){if(i&&F(N(r.clientX-this._lastX),N(r.clientY-this._lastY))<i){return}this._dragStarted()}this._appendGhost();_=true;w=r;G(n,"webkitTransform",l);G(n,"mozTransform",l);G(n,"msTransform",l);G(n,"transform",l);e.preventDefault()}},_appendGhost:function(){if(!n){var e=t.getBoundingClientRect(),i=G(t),s=this.options,o;n=t.cloneNode(true);q(n,s.ghostClass,false);q(n,s.fallbackClass,true);q(n,s.dragClass,true);G(n,"top",e.top-M(i.marginTop,10));G(n,"left",e.left-M(i.marginLeft,10));G(n,"width",e.width);G(n,"height",e.height);G(n,"opacity","0.8");G(n,"position","fixed");G(n,"zIndex","100000");G(n,"pointerEvents","none");s.fallbackOnBody&&T.body.appendChild(n)||r.appendChild(n);o=n.getBoundingClientRect();G(n,"width",e.width*2-o.width);G(n,"height",e.height*2-o.height)}},_onDragStart:function(e,i){var n=e.dataTransfer,o=this.options;this._offUpEvents();if(v.checkPull(this,this,t,e)){s=oe(t);s.draggable=false;s.style["will-change"]="";G(s,"display","none");q(s,this.options.chosenClass,false);r.insertBefore(s,t);Z(this,r,"clone",t)}q(t,o.dragClass,true);if(i){if(i==="touch"){Y(T,"touchmove",this._onTouchMove);Y(T,"touchend",this._onDrop);Y(T,"touchcancel",this._onDrop);Y(T,"pointermove",this._onTouchMove);Y(T,"pointerup",this._onDrop)}else{Y(T,"mousemove",this._onTouchMove);Y(T,"mouseup",this._onDrop)}this._loopId=setInterval(this._emulateDragOver,50)}else{if(n){n.effectAllowed="move";o.setData&&o.setData.call(this,n,t)}Y(T,"drop",this);setTimeout(this._dragStarted,0)}},_onDragOver:function(e){var a=this.el,l,h,d,p,m=this.options,y=m.group,b=j.active,w=v===y,x=false,S=m.sort;if(e.preventDefault!==void 0){e.preventDefault();!m.dragoverBubble&&e.stopPropagation()}if(t.animated){return}_=true;if(b&&!m.disabled&&(w?S||(p=!r.contains(t)):g===this||(b.lastPullMode=v.checkPull(this,b,t,e))&&y.checkPut(this,b,t,e))&&(e.rootEl===void 0||e.rootEl===this.el)){L(e,m,this.el);if(A){return}l=B(e.target,m.draggable,a);h=t.getBoundingClientRect();if(g!==this){g=this;x=true}if(p){H(b,true);i=r;if(s||o){r.insertBefore(t,s||o)}else if(!S){r.appendChild(t)}return}if(a.children.length===0||a.children[0]===n||a===e.target&&(l=ee(a,e))){if(l){if(l.animated){return}d=l.getBoundingClientRect()}H(b,w);if(K(r,a,t,h,l,d,e)!==false){if(!t.contains(a)){a.appendChild(t);i=a}this._animate(h,t);l&&this._animate(d,l)}}else if(l&&!l.animated&&l!==t&&l.parentNode[C]!==void 0){if(u!==l){u=l;f=G(l);c=G(l.parentNode)}d=l.getBoundingClientRect();var T=d.right-d.left,M=d.bottom-d.top,D=k.test(f.cssFloat+f.display)||c.display=="flex"&&c["flex-direction"].indexOf("row")===0,E=l.offsetWidth>t.offsetWidth,O=l.offsetHeight>t.offsetHeight,P=(D?(e.clientX-d.left)/T:(e.clientY-d.top)/M)>.5,I=l.nextElementSibling,N=K(r,a,t,h,l,d,e),F=false;if(N!==false){A=true;setTimeout(J,30);H(b,w);if(N===1||N===-1){F=N===1}else if(D){var R=t.offsetTop,$=l.offsetTop;if(R===$){F=l.previousElementSibling===t&&!E||P&&E}else if(l.previousElementSibling===t||t.previousElementSibling===l){F=(e.clientY-d.top)/M>.5}else{F=$>R}}else if(!x){F=I!==t&&!O||P&&O}if(!t.contains(a)){if(F&&!I){a.appendChild(t)}else{l.parentNode.insertBefore(t,F?I:l)}}i=t.parentNode;this._animate(h,t);this._animate(d,l)}}}},_animate:function(e,t){var i=this.options.animation;if(i){var n=t.getBoundingClientRect();if(e.nodeType===1){e=e.getBoundingClientRect()}G(t,"transition","none");G(t,"transform","translate3d("+(e.left-n.left)+"px,"+(e.top-n.top)+"px,0)");t.offsetWidth;G(t,"transition","all "+i+"ms");G(t,"transform","translate3d(0,0,0)");clearTimeout(t.animated);t.animated=setTimeout(function(){G(t,"transition","");G(t,"transform","");t.animated=false},i)}},_offUpEvents:function(){var e=this.el.ownerDocument;V(T,"touchmove",this._onTouchMove);V(T,"pointermove",this._onTouchMove);V(e,"mouseup",this._onDrop);V(e,"touchend",this._onDrop);V(e,"pointerup",this._onDrop);V(e,"touchcancel",this._onDrop);V(e,"selectstart",this)},_onDrop:function(e){var a=this.el,l=this.options;clearInterval(this._loopId);clearInterval(y.pid);clearTimeout(this._dragStartTimer);V(T,"mousemove",this._onTouchMove);if(this.nativeDraggable){V(T,"drop",this);V(a,"dragstart",this._onDragStart)}this._offUpEvents();if(e){if(_){e.preventDefault();!l.dropBubble&&e.stopPropagation()}n&&n.parentNode.removeChild(n);if(r===i||j.active.lastPullMode!=="clone"){s&&s.parentNode.removeChild(s)}if(t){if(this.nativeDraggable){V(t,"dragend",this)}Q(t);t.style["will-change"]="";q(t,this.options.ghostClass,false);q(t,this.options.chosenClass,false);if(r!==i){m=ie(t,l.draggable);if(m>=0){Z(null,i,"add",t,r,p,m);Z(this,r,"remove",t,r,p,m);Z(null,i,"sort",t,r,p,m);Z(this,r,"sort",t,r,p,m)}}else{if(t.nextSibling!==o){m=ie(t,l.draggable);if(m>=0){Z(this,r,"update",t,r,p,m);Z(this,r,"sort",t,r,p,m)}}}if(j.active){if(m==null||m===-1){m=p}Z(this,r,"end",t,r,p,m);this.save()}}}this._nulling()},_nulling:function(){r=t=i=n=o=s=a=l=h=b=w=_=m=u=f=g=v=j.active=null;R.forEach(function(e){e.checked=true});R.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragover":case"dragenter":if(t){this._onDragOver(e);W(e)}break;case"selectstart":e.preventDefault();break}},toArray:function(){var e=[],t,i=this.el.children,n=0,s=i.length,r=this.options;for(;n<s;n++){t=i[n];if(B(t,r.draggable,this.el)){e.push(t.getAttribute(r.dataIdAttr)||te(t))}}return e},sort:function(e){var t={},i=this.el;this.toArray().forEach(function(e,n){var s=i.children[n];if(B(s,this.options.draggable,i)){t[e]=s}},this);e.forEach(function(e){if(t[e]){i.removeChild(t[e]);i.appendChild(t[e])}})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return B(e,t||this.options.draggable,this.el)},option:function(e,t){var i=this.options;if(t===void 0){return i[e]}else{i[e]=t;if(e==="group"){z(i)}}},destroy:function(){var e=this.el;e[C]=null;V(e,"mousedown",this._onTapStart);V(e,"touchstart",this._onTapStart);V(e,"pointerdown",this._onTapStart);if(this.nativeDraggable){V(e,"dragover",this);V(e,"dragenter",this)}Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")});$.splice($.indexOf(this._onDragOver),1);this._onDrop();this.el=e=null}};function H(e,i){if(e.lastPullMode!=="clone"){i=true}if(s&&s.state!==i){G(s,"display",i?"none":"");if(!i){if(s.state){if(e.options.group.revertClone){r.insertBefore(s,o);e._animate(t,s)}else{r.insertBefore(s,t)}}}s.state=i}}function B(e,t,i){if(e){i=i||T;do{if(t===">*"&&e.parentNode===i||ne(e,t)){return e}}while(e=U(e))}return null}function U(e){var t=e.host;return t&&t.nodeType?t:e.parentNode}function W(e){if(e.dataTransfer){e.dataTransfer.dropEffect="move"}e.preventDefault()}function Y(e,t,i){e.addEventListener(t,i,O)}function V(e,t,i){e.removeEventListener(t,i,O)}function q(e,t,i){if(e){if(e.classList){e.classList[i?"add":"remove"](t)}else{var n=(" "+e.className+" ").replace(x," ").replace(" "+t+" "," ");e.className=(n+(i?" "+t:"")).replace(x," ")}}}function G(e,t,i){var n=e&&e.style;if(n){if(i===void 0){if(T.defaultView&&T.defaultView.getComputedStyle){i=T.defaultView.getComputedStyle(e,"")}else if(e.currentStyle){i=e.currentStyle}return t===void 0?i:i[t]}else{if(!(t in n)){t="-webkit-"+t}n[t]=i+(typeof i==="string"?"":"px")}}}function X(e,t,i){if(e){var n=e.getElementsByTagName(t),s=0,r=n.length;if(i){for(;s<r;s++){i(n[s],s)}}return n}return[]}function Z(e,t,i,n,r,o,a){e=e||t[C];var l=T.createEvent("Event"),h=e.options,d="on"+i.charAt(0).toUpperCase()+i.substr(1);l.initEvent(i,true,true);l.to=t;l.from=r||t;l.item=n||t;l.clone=s;l.oldIndex=o;l.newIndex=a;t.dispatchEvent(l);if(h[d]){h[d].call(e,l)}}function K(e,t,i,n,s,r,o){var a,l=e[C],h=l.options.onMove,d;a=T.createEvent("Event");a.initEvent("move",true,true);a.to=t;a.from=e;a.dragged=i;a.draggedRect=n;a.related=s||t;a.relatedRect=r||t.getBoundingClientRect();e.dispatchEvent(a);if(h){d=h.call(l,a,o)}return d}function Q(e){e.draggable=false}function J(){A=false}function ee(e,t){var i=e.lastElementChild,n=i.getBoundingClientRect();return(t.clientY-(n.top+n.height)>5||t.clientX-(n.right+n.width)>5)&&i}function te(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,n=0;while(i--){n+=t.charCodeAt(i)}return n.toString(36)}function ie(e,t){var i=0;if(!e||!e.parentNode){return-1}while(e&&(e=e.previousElementSibling)){if(e.nodeName.toUpperCase()!=="TEMPLATE"&&(t===">*"||ne(e,t))){i++}}return i}function ne(e,t){if(e){t=t.split(".");var i=t.shift().toUpperCase(),n=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return(i===""||e.nodeName.toUpperCase()==i)&&(!t.length||((" "+e.className+" ").match(n)||[]).length==t.length)}return false}function se(e,t){var i,n;return function(){if(i===void 0){i=arguments;n=this;setTimeout(function(){if(i.length===1){e.call(n,i[0])}else{e.apply(n,i)}i=void 0},t)}}}function re(e,t){if(e&&t){for(var i in t){if(t.hasOwnProperty(i)){e[i]=t[i]}}}return e}function oe(e){return D?D(e).clone(true)[0]:E&&E.dom?E.dom(e).cloneNode(true):e.cloneNode(true)}function ae(e){var t=e.getElementsByTagName("input");var i=t.length;while(i--){var n=t[i];n.checked&&R.push(n)}}Y(T,"touchmove",function(e){if(j.active){e.preventDefault()}});try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){O={capture:false,passive:false}}}))}catch(e){}j.utils={on:Y,off:V,css:G,find:X,is:function(e,t){return!!B(e,t,e)},extend:re,throttle:se,closest:B,toggleClass:q,clone:oe,index:ie};j.create=function(e,t){return new j(e,t)};j.version="1.5.1";return j});(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}})(function(e){"use strict";e.fn.kvsortable=function(t){var i,n=arguments;this.each(function(){var s=e(this),r=s.data("kvsortable");if(!r&&(t instanceof Object||!t)){r=new KvSortable(this,t);s.data("kvsortable",r)}if(r){if(t==="widget"){i=r}else if(t==="destroy"){r.destroy();s.removeData("kvsortable")}else if(typeof r[t]==="function"){i=r[t].apply(r,[].slice.call(n,1))}else if(t in r.options){i=r.option.apply(r,n)}}});return i===void 0?this:i}});(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{if(typeof module==="object"&&module.exports){module.exports=e(require("jquery"))}else{e(window.jQuery)}}})(function(e){"use strict";e.fn.fileinputLocales={};e.fn.fileinputThemes={};String.prototype.setTokens=function(e){var t=this.toString(),i,n;for(i in e){if(e.hasOwnProperty(i)){n=new RegExp("{"+i+"}","g");t=t.replace(n,e[i])}}return t};var t,i;t={FRAMES:".kv-preview-thumb",SORT_CSS:"file-sortable",STYLE_SETTING:'style="width:{width};height:{height};"',OBJECT_PARAMS:'<param name="controller" value="true" />\n'+'<param name="allowFullScreen" value="true" />\n'+'<param name="allowScriptAccess" value="always" />\n'+'<param name="autoPlay" value="false" />\n'+'<param name="autoStart" value="false" />\n'+'<param name="quality" value="high" />\n',DEFAULT_PREVIEW:'<div class="file-preview-other">\n'+'<span class="{previewFileIconClass}">{previewFileIcon}</span>\n'+"</div>",MODAL_ID:"kvFileinputModal",MODAL_EVENTS:["show","shown","hide","hidden","loaded"],objUrl:window.URL||window.webkitURL,compare:function(e,t,i){return e!==undefined&&(i?e===t:e.match(t))},isIE:function(e){if(navigator.appName!=="Microsoft Internet Explorer"){return false}if(e===10){return new RegExp("msie\\s"+e,"i").test(navigator.userAgent)}var t=document.createElement("div"),i;t.innerHTML="<!--[if IE "+e+"]> <i></i> <![endif]-->";i=t.getElementsByTagName("i").length;document.body.appendChild(t);t.parentNode.removeChild(t);return i},initModal:function(t){var i=e("body");if(i.length){t.appendTo(i)}},isEmpty:function(t,i){return t===undefined||t===null||t.length===0||i&&e.trim(t)===""},isArray:function(e){return Array.isArray(e)||Object.prototype.toString.call(e)==="[object Array]"},ifSet:function(e,t,i){i=i||"";return t&&typeof t==="object"&&e in t?t[e]:i},cleanArray:function(e){if(!(e instanceof Array)){e=[]}return e.filter(function(e){return e!==undefined&&e!==null})},spliceArray:function(e,t){var i,n=0,s=[];if(!(e instanceof Array)){return[]}for(i=0;i<e.length;i++){if(i!==t){s[n]=e[i];n++}}return s},getNum:function(e,t){t=t||0;if(typeof e==="number"){return e}if(typeof e==="string"){e=parseFloat(e)}return isNaN(e)?t:e},hasFileAPISupport:function(){return!!(window.File&&window.FileReader)},hasDragDropSupport:function(){var e=document.createElement("div");return!t.isIE(9)&&(e.draggable!==undefined||e.ondragstart!==undefined&&e.ondrop!==undefined)},hasFileUploadSupport:function(){return t.hasFileAPISupport()&&window.FormData},hasBlobSupport:function(){try{return!!window.Blob&&Boolean(new Blob)}catch(e){return false}},hasArrayBufferViewSupport:function(){try{return new Blob([new Uint8Array(100)]).size===100}catch(e){return false}},dataURI2Blob:function(e){var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,n=t.hasBlobSupport(),s,r,o,a,l,h,d=(n||i)&&window.atob&&window.ArrayBuffer&&window.Uint8Array;if(!d){return null}if(e.split(",")[0].indexOf("base64")>=0){s=atob(e.split(",")[1])}else{s=decodeURIComponent(e.split(",")[1])}r=new ArrayBuffer(s.length);o=new Uint8Array(r);for(a=0;a<s.length;a+=1){o[a]=s.charCodeAt(a)}l=e.split(",")[0].split(":")[1].split(";")[0];if(n){return new Blob([t.hasArrayBufferViewSupport()?o:r],{type:l})}h=new i;h.append(r);return h.getBlob(l)},addCss:function(e,t){e.removeClass(t).addClass(t)},getElement:function(i,n,s){return t.isEmpty(i)||t.isEmpty(i[n])?s:e(i[n])},uniqId:function(){return Math.round((new Date).getTime()+Math.random()*100)},htmlEncode:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},replaceTags:function(t,i){var n=t;if(!i){return n}e.each(i,function(e,t){if(typeof t==="function"){t=t()}n=n.split(e).join(t)});return n},cleanMemory:function(e){var i=e.is("img")?e.attr("src"):e.find("source").attr("src");t.objUrl.revokeObjectURL(i)},findFileName:function(e){var t=e.lastIndexOf("/");if(t===-1){t=e.lastIndexOf("\\")}return e.split(e.substring(t,t+1)).pop()},checkFullScreen:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},toggleFullScreen:function(e){var i=document,n=i.documentElement;if(n&&e&&!t.checkFullScreen()){if(n.requestFullscreen){n.requestFullscreen()}else if(n.msRequestFullscreen){n.msRequestFullscreen()}else if(n.mozRequestFullScreen){n.mozRequestFullScreen()}else if(n.webkitRequestFullscreen){n.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}}else{if(i.exitFullscreen){i.exitFullscreen()}else if(i.msExitFullscreen){i.msExitFullscreen()}else if(i.mozCancelFullScreen){i.mozCancelFullScreen()}else if(i.webkitExitFullscreen){i.webkitExitFullscreen()}}},moveArray:function(e,t,i){if(i>=e.length){var n=i-e.length;while(n--+1){e.push(undefined)}}e.splice(i,0,e.splice(t,1)[0]);return e},cleanZoomCache:function(e){var t=e.closest(".kv-zoom-cache-theme");if(!t.length){t=e.closest(".kv-zoom-cache")}t.remove()},setOrientation:function(e,t){var i=new DataView(e),n=0,s=1,r,o,a;if(i.getUint16(n)!==65496||e.length<2){return}n+=2;r=i.byteLength;while(n<r-2){o=i.getUint16(n);n+=2;switch(o){case 65505:a=i.getUint16(n);r=a-n;n+=2;break;case 274:s=i.getUint16(n+6,false);r=0;break}}if(t){t(s)}},validateOrientation:function(e,i){if(!window.FileReader||!window.DataView){return}var n=new FileReader,s;n.onloadend=function(){s=n.result;t.setOrientation(s,i)};n.readAsArrayBuffer(e)},adjustOrientedImage:function(e,t){var i,n,s;if(!e.hasClass("is-portrait-gt4")){return}if(t){e.css({width:e.parent().height()});return}else{e.css({height:"auto",width:e.height()})}i=e.parent().offset().top;n=e.offset().top;s=i-n;e.css("margin-top",s)}};i=function(i,n){var s=this;s.$element=e(i);if(!s._validate()){return}s.isPreviewable=t.hasFileAPISupport();s.isIE9=t.isIE(9);s.isIE10=t.isIE(10);if(s.isPreviewable||s.isIE9){s._init(n);s._listen()}else{s.$element.removeClass("file-loading")}};i.prototype={constructor:i,_cleanup:function(){var e=this;e.reader=null;e.formdata={};e.uploadCount=0;e.uploadStatus={};e.uploadLog=[];e.uploadAsyncCount=0;e.loadedImages=[];e.totalImagesCount=0;e.ajaxRequests=[];e.clearStack();e.fileInputCleared=false;e.fileBatchCompleted=true;if(!e.isPreviewable){e.showPreview=false}e.isError=false;e.ajaxAborted=false;e.cancelling=false},_init:function(i){var n=this,s=n.$element,r,o;n.options=i;e.each(i,function(e,i){switch(e){case"minFileCount":case"maxFileCount":case"minFileSize":case"maxFileSize":case"maxFilePreviewSize":case"resizeImageQuality":case"resizeIfSizeMoreThan":case"progressUploadThreshold":case"initialPreviewCount":case"zoomModalHeight":case"minImageHeight":case"maxImageHeight":case"minImageWidth":case"maxImageWidth":n[e]=t.getNum(i);break;default:n[e]=i;break}});n._cleanup();n.$form=s.closest("form");n._initTemplateDefaults();n.uploadFileAttr=!t.isEmpty(s.attr("name"))?s.attr("name"):"file_data";o=n._getLayoutTemplate("progress");n.progressTemplate=o.replace("{class}",n.progressClass);n.progressCompleteTemplate=o.replace("{class}",n.progressCompleteClass);n.progressErrorTemplate=o.replace("{class}",n.progressErrorClass);n.dropZoneEnabled=t.hasDragDropSupport()&&n.dropZoneEnabled;n.isDisabled=s.attr("disabled")||s.attr("readonly");if(n.isDisabled){s.attr("disabled",true)}n.isUploadable=t.hasFileUploadSupport()&&!t.isEmpty(n.uploadUrl);n.isClickable=n.browseOnZoneClick&&n.showPreview&&(n.isUploadable&&n.dropZoneEnabled||!t.isEmpty(n.defaultPreviewContent));n.slug=typeof i.slugCallback==="function"?i.slugCallback:n._slugDefault;n.mainTemplate=n.showCaption?n._getLayoutTemplate("main1"):n._getLayoutTemplate("main2");n.captionTemplate=n._getLayoutTemplate("caption");n.previewGenericTemplate=n._getPreviewTemplate("generic");if(n.resizeImage&&(n.maxImageWidth||n.maxImageHeight)){n.imageCanvas=document.createElement("canvas");n.imageCanvasContext=n.imageCanvas.getContext("2d")}if(t.isEmpty(s.attr("id"))){s.attr("id",t.uniqId())}n.namespace=".fileinput_"+s.attr("id").replace(/-/g,"_");if(n.$container===undefined){n.$container=n._createContainer()}else{n._refreshContainer()}r=n.$container;n.$dropZone=r.find(".file-drop-zone");n.$progress=r.find(".kv-upload-progress");n.$btnUpload=r.find(".fileinput-upload");n.$captionContainer=t.getElement(i,"elCaptionContainer",r.find(".file-caption"));n.$caption=t.getElement(i,"elCaptionText",r.find(".file-caption-name"));n.$previewContainer=t.getElement(i,"elPreviewContainer",r.find(".file-preview"));n.$preview=t.getElement(i,"elPreviewImage",r.find(".file-preview-thumbnails"));n.$previewStatus=t.getElement(i,"elPreviewStatus",r.find(".file-preview-status"));n.$errorContainer=t.getElement(i,"elErrorContainer",n.$previewContainer.find(".kv-fileinput-error"));if(!t.isEmpty(n.msgErrorClass)){t.addCss(n.$errorContainer,n.msgErrorClass)}n.$errorContainer.hide();n.previewInitId="preview-"+t.uniqId();n._initPreviewCache();n._initPreview(true);n._initPreviewActions();n._setFileDropZoneTitle();s.removeClass("file-loading");if(s.attr("disabled")){n.disable()}n._initZoom()},_initTemplateDefaults:function(){var i=this,n,s,r,o,a,l,h,d,u,f,c,p,m,v,g,y,b,w,_,x,k,C,S,T,M,D,E,O,P,I,A,N,F,R,$,L;n="{preview}\n"+'<div class="kv-upload-progress hide"></div>\n'+'<div class="input-group {class}">\n'+"   {caption}\n"+'   <div class="input-group-btn">\n'+"       {remove}\n"+"       {cancel}\n"+"       {upload}\n"+"       {browse}\n"+"   </div>\n"+"</div>";s='{preview}\n<div class="kv-upload-progress hide"></div>\n{remove}\n{cancel}\n{upload}\n{browse}\n';r='<div class="file-preview {class}">\n'+"    {close}"+'    <div class="{dropClass}">\n'+'    <div class="file-preview-thumbnails">\n'+"    </div>\n"+'    <div class="clearfix"></div>'+'    <div class="file-preview-status text-center text-success"></div>\n'+'    <div class="kv-fileinput-error"></div>\n'+"    </div>\n"+"</div>";a='<div class="close fileinput-remove">&times;</div>\n';o='<i class="glyphicon glyphicon-file kv-caption-icon"></i>';l='<div tabindex="500" class="form-control file-caption {class}">\n'+'   <div class="file-caption-name"></div>\n'+"</div>\n";h='<button type="{type}" tabindex="500" title="{title}" class="{css}" '+"{status}>{icon} {label}</button>";d='<a href="{href}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</a>';u='<div tabindex="500" class="{css}" {status}>{icon} {label}</div>';f='<div id="'+t.MODAL_ID+'" class="file-zoom-dialog modal fade" '+'tabindex="-1" aria-labelledby="'+t.MODAL_ID+'Label"></div>';c='<div class="modal-dialog modal-lg" role="document">\n'+'  <div class="modal-content">\n'+'    <div class="modal-header">\n'+'      <div class="kv-zoom-actions pull-right">{toggleheader}{fullscreen}{borderless}{close}</div>\n'+'      <h3 class="modal-title">{heading} <small><span class="kv-zoom-title"></span></small></h3>\n'+"    </div>\n"+'    <div class="modal-body">\n'+'      <div class="floating-buttons"></div>\n'+'      <div class="kv-zoom-body file-zoom-content {zoomFrameClass}"></div>\n'+"{prev} {next}\n"+"    </div>\n"+"  </div>\n"+"</div>\n";p='<div class="progress">\n'+'    <div class="{class}" role="progressbar"'+' aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n'+"        {status}\n"+"     </div>\n"+"</div>";m=" <samp>({sizeText})</samp>";v='<div class="file-thumbnail-footer">\n'+'    <div class="file-footer-caption" title="{caption}">{caption}<br>{size}</div>\n'+"    {progress} {indicator} {actions}\n"+"</div>";g="{drag}\n"+'<div class="file-actions">\n'+'    <div class="file-footer-buttons">\n'+"        {upload} {delete} {zoom} {other}"+"    </div>\n"+'    <div class="clearfix"></div>\n'+"</div>";y='<button type="button" class="kv-file-remove {removeClass}" '+'title="{removeTitle}" {dataUrl}{dataKey}>{removeIcon}</button>\n';b='<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">'+"{uploadIcon}</button>";w='<button type="button" class="kv-file-zoom {zoomClass}" '+'title="{zoomTitle}">{zoomIcon}</button>';_='<span class="file-drag-handle {dragClass}" title="{dragTitle}">{dragIcon}</span>';x='<div class="file-upload-indicator" title="{indicatorTitle}">{indicator}</div>';k='<div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}"'+' data-template="{template}"';C=k+'><div class="kv-file-content">\n';S=k+' title="{caption}"><div class="kv-file-content">\n';T="</div>{footer}\n</div>\n";M="{content}\n";D='<div class="kv-preview-data file-preview-html" title="{caption}" '+t.STYLE_SETTING+">{data}</div>\n";E='<img src="{data}" class="file-preview-image kv-preview-data" title="{caption}" alt="{caption}" '+t.STYLE_SETTING+">\n";O='<textarea class="kv-preview-data file-preview-text" title="{caption}" readonly '+t.STYLE_SETTING+">{data}</textarea>\n";P='<video class="kv-preview-data file-preview-video" width="{width}" '+'height="{height}" controls>\n'+'<source src="{data}" type="{type}">\n'+t.DEFAULT_PREVIEW+"\n</video>\n";I='<div class="file-preview-audio"><audio class="kv-preview-data" controls>\n<source src="{data}" '+'type="{type}">\n'+t.DEFAULT_PREVIEW+"\n</audio></div>\n";A='<object class="kv-preview-data file-object" type="application/x-shockwave-flash" '+'width="{width}" height="{height}" data="{data}">\n'+t.OBJECT_PARAMS+" "+t.DEFAULT_PREVIEW+"\n</object>\n";N='<object class="kv-preview-data file-object {typeCss}" data="{data}" type="{type}" '+'width="{width}" height="{height}">\n'+'<param name="movie" value="{caption}" />\n'+t.OBJECT_PARAMS+" "+t.DEFAULT_PREVIEW+"\n</object>\n";F='<embed class="kv-preview-data" src="{data}" '+'width="{width}" height="{height}" type="application/pdf">\n';R='<div class="kv-preview-data file-preview-other-frame">\n'+t.DEFAULT_PREVIEW+"\n</div>\n";$='<div class="kv-zoom-cache" style="display:none">{zoomContent}</div>';L={width:"100%",height:"100%","min-height":"480px"};i.defaults={layoutTemplates:{main1:n,main2:s,preview:r,close:a,fileIcon:o,caption:l,modalMain:f,modal:c,progress:p,size:m,footer:v,indicator:x,actions:g,actionDelete:y,actionUpload:b,actionZoom:w,actionDrag:_,btnDefault:h,btnLink:d,btnBrowse:u,zoomCache:$},previewMarkupTags:{tagBefore1:C,tagBefore2:S,tagAfter:T},previewContentTemplates:{generic:M,html:D,image:E,text:O,video:P,audio:I,flash:A,object:N,pdf:F,other:R},allowedPreviewTypes:["image","html","text","video","audio","flash","pdf","object"],previewTemplates:{},previewSettings:{image:{width:"auto",height:"160px"},html:{width:"213px",height:"160px"},text:{width:"213px",height:"160px"},video:{width:"auto",height:"100%","max-width":"100%"},audio:{width:"100%",height:"30px"},flash:{width:"auto",height:"100%","max-width":"100%"},object:{height:"100%"},pdf:{width:"160px",height:"160px"},other:{width:"160px",height:"160px"}},previewZoomSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:L,text:L,video:{width:"auto",height:"100%","max-width":"100%"},audio:{width:"100%",height:"30px"},flash:{width:"auto",height:"480px"},object:{width:"auto",height:"100%","max-width":"100%","min-height":"480px"},pdf:L,other:{width:"auto",height:"100%","min-height":"480px"}},fileTypeSettings:{image:function(e,i){return t.compare(e,"image.*")||t.compare(i,/\.(gif|png|jpe?g)$/i)},html:function(e,i){return t.compare(e,"text/html")||t.compare(i,/\.(htm|html)$/i)},text:function(e,i){return t.compare(e,"text.*")||t.compare(i,/\.(xml|javascript)$/i)||t.compare(i,/\.(txt|md|csv|nfo|ini|json|php|js|css)$/i)},video:function(e,i){return t.compare(e,"video.*")&&(t.compare(e,/(ogg|mp4|mp?g|mov|webm|3gp)$/i)||t.compare(i,/\.(og?|mp4|webm|mp?g|mov|3gp)$/i))},audio:function(e,i){return t.compare(e,"audio.*")&&(t.compare(i,/(ogg|mp3|mp?g|wav)$/i)||t.compare(i,/\.(og?|mp3|mp?g|wav)$/i))},flash:function(e,i){return t.compare(e,"application/x-shockwave-flash",true)||t.compare(i,/\.(swf)$/i)},pdf:function(e,i){return t.compare(e,"application/pdf",true)||t.compare(i,/\.(pdf)$/i)},object:function(){return true},other:function(){return true}},fileActionSettings:{showRemove:true,showUpload:true,showZoom:true,showDrag:true,removeIcon:'<i class="glyphicon glyphicon-trash text-danger"></i>',removeClass:"btn btn-xs btn-default",removeTitle:"Remove file",uploadIcon:'<i class="glyphicon glyphicon-upload text-info"></i>',uploadClass:"btn btn-xs btn-default",uploadTitle:"Upload file",zoomIcon:'<i class="glyphicon glyphicon-zoom-in"></i>',zoomClass:"btn btn-xs btn-default",zoomTitle:"View Details",dragIcon:'<i class="glyphicon glyphicon-menu-hamburger"></i>',dragClass:"text-info",dragTitle:"Move / Rearrange",dragSettings:{},indicatorNew:'<i class="glyphicon glyphicon-hand-down text-warning"></i>',indicatorSuccess:'<i class="glyphicon glyphicon-ok-sign text-success"></i>',indicatorError:'<i class="glyphicon glyphicon-exclamation-sign text-danger"></i>',indicatorLoading:'<i class="glyphicon glyphicon-hand-up text-muted"></i>',indicatorNewTitle:"Not uploaded yet",indicatorSuccessTitle:"Uploaded",indicatorErrorTitle:"Upload Error",indicatorLoadingTitle:"Uploading ..."}};e.each(i.defaults,function(t,n){if(t==="allowedPreviewTypes"){if(i.allowedPreviewTypes===undefined){i.allowedPreviewTypes=n}return}i[t]=e.extend(true,{},n,i[t])});i._initPreviewTemplates()},_initPreviewTemplates:function(){var i=this,n=i.defaults,s=i.previewMarkupTags,r,o=s.tagAfter;e.each(n.previewContentTemplates,function(e,n){if(t.isEmpty(i.previewTemplates[e])){r=s.tagBefore2;if(e==="generic"||e==="image"||e==="html"||e==="text"){r=s.tagBefore1}i.previewTemplates[e]=r+n+o}})},_initPreviewCache:function(){var i=this;i.previewCache={data:{},init:function(){var e=i.initialPreview;if(e.length>0&&!t.isArray(e)){e=e.split(i.initialPreviewDelimiter)}i.previewCache.data={content:e,config:i.initialPreviewConfig,tags:i.initialPreviewThumbTags}},fetch:function(){return i.previewCache.data.content.filter(function(e){return e!==null})},count:function(e){return!!i.previewCache.data&&!!i.previewCache.data.content?e?i.previewCache.data.content.length:i.previewCache.fetch().length:0},get:function(n,s){var r="init_"+n,o=i.previewCache.data,a=o.config[n],l=o.content[n],h=i.previewInitId+"-"+r,d,u,f,c,p,m,v,g=t.ifSet("previewAsData",a,i.initialPreviewAsData),y=function(e,n,s,r,o,a,l,h,d){h=" file-preview-initial "+t.SORT_CSS+(h?" "+h:"");return i._generatePreviewTemplate(e,n,s,r,o,false,null,h,a,l,d)};if(!l){return""}s=s===undefined?true:s;f=t.ifSet("type",a,i.initialPreviewFileType||"generic");p=t.ifSet("filename",a,t.ifSet("caption",a));m=t.ifSet("filetype",a,f);c=i.previewCache.footer(n,s,a&&a.size||null);v=t.ifSet("frameClass",a);if(g){d=y(f,l,p,m,h,c,r,v)}else{d=y("generic",l,p,m,h,c,r,v,f).setTokens({content:o.content[n]})}if(o.tags.length&&o.tags[n]){d=t.replaceTags(d,o.tags[n])}if(!t.isEmpty(a)&&!t.isEmpty(a.frameAttr)){u=e(document.createElement("div")).html(d);u.find(".file-preview-initial").attr(a.frameAttr);d=u.html();u.remove()}return d},add:function(e,n,s,r){var o=i.previewCache.data,a;if(!t.isArray(e)){e=e.split(i.initialPreviewDelimiter)}if(r){a=o.content.push(e)-1;o.config[a]=n;o.tags[a]=s}else{a=e.length-1;o.content=e;o.config=n;o.tags=s}i.previewCache.data=o;return a},set:function(e,n,s,r){var o=i.previewCache.data,a,l;if(!e||!e.length){return}if(!t.isArray(e)){e=e.split(i.initialPreviewDelimiter)}l=e.filter(function(e){return e!==null});if(!l.length){return}if(o.content===undefined){o.content=[]}if(o.config===undefined){o.config=[]}if(o.tags===undefined){o.tags=[]}if(r){for(a=0;a<e.length;a++){if(e[a]){o.content.push(e[a])}}for(a=0;a<n.length;a++){if(n[a]){o.config.push(n[a])}}for(a=0;a<s.length;a++){if(s[a]){o.tags.push(s[a])}}}else{o.content=e;o.config=n;o.tags=s}i.previewCache.data=o},unset:function(e){var t=i.previewCache.count();if(!t){return}if(t===1){i.previewCache.data.content=[];i.previewCache.data.config=[];i.previewCache.data.tags=[];i.initialPreview=[];i.initialPreviewConfig=[];i.initialPreviewThumbTags=[];return}i.previewCache.data.content[e]=null;i.previewCache.data.config[e]=null;i.previewCache.data.tags[e]=null},out:function(){var e="",t,n=i.previewCache.count(true),s;if(n===0){return{content:"",caption:""}}for(s=0;s<n;s++){e+=i.previewCache.get(s)}t=i._getMsgSelected(i.previewCache.count());return{content:e,caption:t}},footer:function(e,n,s){var r=i.previewCache.data;if(!r||!r.config||r.config.length===0||t.isEmpty(r.config[e])){return""}n=n===undefined?true:n;var o=r.config[e],a=t.ifSet("caption",o),l,h=t.ifSet("width",o,"auto"),d=t.ifSet("url",o,false),u=t.ifSet("key",o,null),f=i.fileActionSettings,c=i.initialPreviewShowDelete||false,p=t.ifSet("showDelete",o,t.ifSet("showDelete",f,c)),m=t.ifSet("showZoom",o,t.ifSet("showZoom",f,true)),v=t.ifSet("showDrag",o,t.ifSet("showDrag",f,true)),g=d===false&&n;
l=i._renderFileActions(false,p,m,v,g,d,u,true);return i._getLayoutTemplate("footer").setTokens({progress:i._renderThumbProgress(),actions:l,caption:a,size:i._getSize(s),width:h,indicator:""})}};i.previewCache.init()},_handler:function(e,t,i){var n=this,s=n.namespace,r=t.split(" ").join(s+" ")+s;if(!e||!e.length){return}e.off(r).on(r,i)},_log:function(e){var t=this,i=t.$element.attr("id");if(i){e='"'+i+'": '+e}if(typeof window.console.log!=="undefined"){window.console.log(e)}else{window.alert(e)}},_validate:function(){var e=this,t=e.$element.attr("type")==="file";if(!t){e._log('The input "type" must be set to "file" for initializing the "bootstrap-fileinput" plugin.')}return t},_errorsExist:function(){var t=this,i;if(t.$errorContainer.find("li").length){return true}i=e(document.createElement("div")).html(t.$errorContainer.html());i.find("span.kv-error-close").remove();i.find("ul").remove();return e.trim(i.text()).length?true:false},_errorHandler:function(e,t){var i=this,n=e.target.error,s=function(e){i._showError(e.replace("{name}",t))};if(n.code===n.NOT_FOUND_ERR){s(i.msgFileNotFound)}else if(n.code===n.SECURITY_ERR){s(i.msgFileSecured)}else if(n.code===n.NOT_READABLE_ERR){s(i.msgFileNotReadable)}else if(n.code===n.ABORT_ERR){s(i.msgFilePreviewAborted)}else{s(i.msgFilePreviewError)}},_addError:function(e){var t=this,i=t.$errorContainer;if(e&&i.length){i.html(t.errorCloseButton+e);t._handler(i.find(".kv-error-close"),"click",function(){i.fadeOut("slow")})}},_resetErrors:function(e){var t=this,i=t.$errorContainer;t.isError=false;t.$container.removeClass("has-error");i.html("");if(e){i.fadeOut("slow")}else{i.hide()}},_showFolderError:function(e){var i=this,n=i.$errorContainer,s;if(!e){return}s=i.msgFoldersNotAllowed.replace("{n}",e);i._addError(s);t.addCss(i.$container,"has-error");n.fadeIn(800);i._raise("filefoldererror",[e,s])},_showUploadError:function(e,i,n){var s=this,r=s.$errorContainer,o=n||"fileuploaderror",a=i&&i.id?'<li data-file-id="'+i.id+'">'+e+"</li>":"<li>"+e+"</li>";if(r.find("ul").length===0){s._addError("<ul>"+a+"</ul>")}else{r.find("ul").append(a)}r.fadeIn(800);s._raise(o,[i,e]);s.$container.removeClass("file-input-new");t.addCss(s.$container,"has-error");return true},_showError:function(e,i,n){var s=this,r=s.$errorContainer,o=n||"fileerror";i=i||{};i.reader=s.reader;s._addError(e);r.fadeIn(800);s._raise(o,[i,e]);if(!s.isUploadable){s._clearFileInput()}s.$container.removeClass("file-input-new");t.addCss(s.$container,"has-error");s.$btnUpload.attr("disabled",true);return true},_noFilesError:function(e){var i=this,n=i.minFileCount>1?i.filePlural:i.fileSingle,s=i.msgFilesTooLess.replace("{n}",i.minFileCount).replace("{files}",n),r=i.$errorContainer;i._addError(s);i.isError=true;i._updateFileDetails(0);r.fadeIn(800);i._raise("fileerror",[e,s]);i._clearFileInput();t.addCss(i.$container,"has-error")},_parseError:function(t,i,n,s){var r=this,o=e.trim(n+""),a=o.slice(-1)==="."?"":".",l=i.responseJSON!==undefined&&i.responseJSON.error!==undefined?i.responseJSON.error:i.responseText;if(r.cancelling&&r.msgUploadAborted){o=r.msgUploadAborted}if(r.showAjaxErrorDetails&&l){l=e.trim(l.replace(/\n\s*\n/g,"\n"));l=l.length>0?"<pre>"+l+"</pre>":"";o+=a+l}else{o+=a}if(o===a){o=r.msgAjaxError.replace("{operation}",t)}r.cancelling=false;return s?"<b>"+s+": </b>"+o:o},_parseFileType:function(e){var i=this,n,s,r,o,a=i.allowedPreviewTypes||[];for(o=0;o<a.length;o++){r=a[o];n=i.fileTypeSettings[r];s=n(e.type,e.name)?r:"";if(!t.isEmpty(s)){return s}}return"other"},_getPreviewIcon:function(t){var i=this,n,s=null;if(t&&t.indexOf(".")>-1){n=t.split(".").pop();if(i.previewFileIconSettings){s=i.previewFileIconSettings[n]||i.previewFileIconSettings[n.toLowerCase()]||null}if(i.previewFileExtSettings){e.each(i.previewFileExtSettings,function(e,t){if(i.previewFileIconSettings[e]&&t(n)){s=i.previewFileIconSettings[e];return}})}}return s},_parseFilePreviewIcon:function(e,t){var i=this,n=i._getPreviewIcon(t)||i.previewFileIcon,s=e;if(s.indexOf("{previewFileIcon}")>-1){s=s.setTokens({previewFileIconClass:i.previewFileIconClass,previewFileIcon:n})}return s},_raise:function(t,i){var n=this,s=e.Event(t);if(i!==undefined){n.$element.trigger(s,i)}else{n.$element.trigger(s)}if(s.isDefaultPrevented()||s.result===false){return false}switch(t){case"filebatchuploadcomplete":case"filebatchuploadsuccess":case"fileuploaded":case"fileclear":case"filecleared":case"filereset":case"fileerror":case"filefoldererror":case"fileuploaderror":case"filebatchuploaderror":case"filedeleteerror":case"filecustomerror":case"filesuccessremove":break;default:if(!n.ajaxAborted){n.ajaxAborted=s.result}break}return true},_listenFullScreen:function(e){var t=this,i=t.$modal,n,s;if(!i||!i.length){return}n=i&&i.find(".btn-fullscreen");s=i&&i.find(".btn-borderless");if(!n.length||!s.length){return}n.removeClass("active").attr("aria-pressed","false");s.removeClass("active").attr("aria-pressed","false");if(e){n.addClass("active").attr("aria-pressed","true")}else{s.addClass("active").attr("aria-pressed","true")}if(i.hasClass("file-zoom-fullscreen")){t._maximizeZoomDialog()}else{if(e){t._maximizeZoomDialog()}else{s.removeClass("active").attr("aria-pressed","false")}}},_listen:function(){var i=this,n=i.$element,s=i.$form,r=i.$container,o;i._handler(n,"change",e.proxy(i._change,i));if(i.showBrowse){i._handler(i.$btnFile,"click",e.proxy(i._browse,i))}i._handler(r.find(".fileinput-remove:not([disabled])"),"click",e.proxy(i.clear,i));i._handler(r.find(".fileinput-cancel"),"click",e.proxy(i.cancel,i));i._initDragDrop();i._handler(s,"reset",e.proxy(i.reset,i));if(!i.isUploadable){i._handler(s,"submit",e.proxy(i._submitForm,i))}i._handler(i.$container.find(".fileinput-upload"),"click",e.proxy(i._uploadClick,i));i._handler(e(window),"resize",function(){i._listenFullScreen(screen.width===window.innerWidth&&screen.height===window.innerHeight)});o="webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange";i._handler(e(document),o,function(){i._listenFullScreen(t.checkFullScreen())});i._initClickable()},_initClickable:function(){var i=this,n;if(!i.isClickable){return}n=i.isUploadable?i.$dropZone:i.$preview.find(".file-default-preview");t.addCss(n,"clickable");n.attr("tabindex",-1);i._handler(n,"click",function(t){var s=e(t.target);if(!s.parents(".file-preview-thumbnails").length||s.parents(".file-default-preview").length){i.$element.trigger("click");n.blur()}})},_initDragDrop:function(){var t=this,i=t.$dropZone;if(t.isUploadable&&t.dropZoneEnabled&&t.showPreview){t._handler(i,"dragenter dragover",e.proxy(t._zoneDragEnter,t));t._handler(i,"dragleave",e.proxy(t._zoneDragLeave,t));t._handler(i,"drop",e.proxy(t._zoneDrop,t));t._handler(e(document),"dragenter dragover drop",t._zoneDragDropInit)}},_zoneDragDropInit:function(e){e.stopPropagation();e.preventDefault()},_zoneDragEnter:function(i){var n=this,s=e.inArray("Files",i.originalEvent.dataTransfer.types)>-1;n._zoneDragDropInit(i);if(n.isDisabled||!s){i.originalEvent.dataTransfer.effectAllowed="none";i.originalEvent.dataTransfer.dropEffect="none";return}t.addCss(n.$dropZone,"file-highlighted")},_zoneDragLeave:function(e){var t=this;t._zoneDragDropInit(e);if(t.isDisabled){return}t.$dropZone.removeClass("file-highlighted")},_zoneDrop:function(e){var i=this;e.preventDefault();if(i.isDisabled||t.isEmpty(e.originalEvent.dataTransfer.files)){return}i._change(e,"dragdrop");i.$dropZone.removeClass("file-highlighted")},_uploadClick:function(e){var i=this,n=i.$container.find(".fileinput-upload"),s,r=!n.hasClass("disabled")&&t.isEmpty(n.attr("disabled"));if(e&&e.isDefaultPrevented()){return}if(!i.isUploadable){if(r&&n.attr("type")!=="submit"){s=n.closest("form");if(s.length){s.trigger("submit")}e.preventDefault()}return}e.preventDefault();if(r){i.upload()}},_submitForm:function(){var e=this;return e._isFileSelectionValid()&&!e._abort({})},_clearPreview:function(){var i=this,n=i.$preview,s=i.showUploadedThumbs?i.getFrames(":not(.file-preview-success)"):i.getFrames();s.each(function(){var i=e(this);i.remove();t.cleanZoomCache(n.find("#zoom-"+i.attr("id")))});if(!i.getFrames().length||!i.showPreview){i._resetUpload()}i._validateDefaultPreview()},_initSortable:function(){var i=this,n=i.$preview,s,r="."+t.SORT_CSS;if(!window.KvSortable||n.find(r).length===0){return}s={handle:".drag-handle-init",dataIdAttr:"data-preview-id",scroll:false,draggable:r,onSort:function(n){var s=n.oldIndex,r=n.newIndex,o,a;i.initialPreview=t.moveArray(i.initialPreview,s,r);i.initialPreviewConfig=t.moveArray(i.initialPreviewConfig,s,r);i.previewCache.init();for(var l=0;l<i.initialPreviewConfig.length;l++){if(i.initialPreviewConfig[l]!==null){o=i.initialPreviewConfig[l].key;a=e(".kv-file-remove[data-key='"+o+"']").closest(t.FRAMES);a.attr("data-fileindex","init_"+l).attr("data-fileindex","init_"+l)}}i._raise("filesorted",{previewId:e(n.item).attr("id"),oldIndex:s,newIndex:r,stack:i.initialPreviewConfig})}};if(n.data("kvsortable")){n.kvsortable("destroy")}e.extend(true,s,i.fileActionSettings.dragSettings);n.kvsortable(s)},_initPreview:function(e){var i=this,n=i.initialCaption||"",s;if(!i.previewCache.count()){i._clearPreview();if(e){i._setCaption(n)}else{i._initCaption()}return}s=i.previewCache.out();n=e&&i.initialCaption?i.initialCaption:s.caption;i.$preview.html(s.content);i._setInitThumbAttr();i._setCaption(n);i._initSortable();if(!t.isEmpty(s.content)){i.$container.removeClass("file-input-new")}},_getZoomButton:function(e){var t=this,i=t.previewZoomButtonIcons[e],n=t.previewZoomButtonClasses[e],s=' title="'+(t.previewZoomButtonTitles[e]||"")+'" ',r=s+(e==="close"?' data-dismiss="modal" aria-hidden="true"':"");if(e==="fullscreen"||e==="borderless"||e==="toggleheader"){r+=' data-toggle="button" aria-pressed="false" autocomplete="off"'}return'<button type="button" class="'+n+" btn-"+e+'"'+r+">"+i+"</button>"},_getModalContent:function(){var e=this;return e._getLayoutTemplate("modal").setTokens({zoomFrameClass:e.frameClass,heading:e.msgZoomModalHeading,prev:e._getZoomButton("prev"),next:e._getZoomButton("next"),toggleheader:e._getZoomButton("toggleheader"),fullscreen:e._getZoomButton("fullscreen"),borderless:e._getZoomButton("borderless"),close:e._getZoomButton("close")})},_listenModalEvent:function(e){var i=this,n=i.$modal,s=function(e){return{sourceEvent:e,previewId:n.data("previewId"),modal:n}};n.on(e+".bs.modal",function(r){var o=n.find(".btn-fullscreen"),a=n.find(".btn-borderless");i._raise("filezoom"+e,s(r));if(e==="shown"){a.removeClass("active").attr("aria-pressed","false");o.removeClass("active").attr("aria-pressed","false");if(n.hasClass("file-zoom-fullscreen")){i._maximizeZoomDialog();if(t.checkFullScreen()){o.addClass("active").attr("aria-pressed","true")}else{a.addClass("active").attr("aria-pressed","true")}}}})},_initZoom:function(){var i=this,n,s=i._getLayoutTemplate("modalMain"),r="#"+t.MODAL_ID;if(!i.showPreview){return}i.$modal=e(r);if(!i.$modal||!i.$modal.length){n=e(document.createElement("div")).html(s).insertAfter(i.$container);i.$modal=e(r).insertBefore(n);n.remove()}t.initModal(i.$modal);i.$modal.html(i._getModalContent());e.each(t.MODAL_EVENTS,function(e,t){i._listenModalEvent(t)})},_initZoomButtons:function(){var t=this,i=t.$modal.data("previewId")||"",n,s,r=t.getFrames().toArray(),o=r.length,a=t.$modal.find(".btn-prev"),l=t.$modal.find(".btn-next");if(r.length<2){a.hide();l.hide();return}else{a.show();l.show()}if(!o){return}n=e(r[0]);s=e(r[o-1]);a.removeAttr("disabled");l.removeAttr("disabled");if(n.length&&n.attr("id")===i){a.attr("disabled",true)}if(s.length&&s.attr("id")===i){l.attr("disabled",true)}},_maximizeZoomDialog:function(){var t=this,i=t.$modal,n=i.find(".modal-header:visible"),s=i.find(".modal-footer:visible"),r=i.find(".modal-body"),o=e(window).height(),a=0;i.addClass("file-zoom-fullscreen");if(n&&n.length){o-=n.outerHeight(true)}if(s&&s.length){o-=s.outerHeight(true)}if(r&&r.length){a=r.outerHeight(true)-r.height();o-=a}i.find(".kv-zoom-body").height(o)},_resizeZoomDialog:function(e){var i=this,n=i.$modal,s=n.find(".btn-fullscreen"),r=n.find(".btn-borderless");if(n.hasClass("file-zoom-fullscreen")){t.toggleFullScreen(false);if(!e){if(!s.hasClass("active")){n.removeClass("file-zoom-fullscreen");i.$modal.find(".kv-zoom-body").css("height",i.zoomModalHeight)}else{s.removeClass("active").attr("aria-pressed","false")}}else{if(!s.hasClass("active")){n.removeClass("file-zoom-fullscreen");i._resizeZoomDialog(true);if(r.hasClass("active")){r.removeClass("active").attr("aria-pressed","false")}}}}else{if(!e){i._maximizeZoomDialog();return}t.toggleFullScreen(true)}n.focus()},_setZoomContent:function(i,n){var s=this,r,o,a,l,h,d,u,f=i.attr("id"),c=s.$modal,p=c.find(".btn-prev"),m=c.find(".btn-next"),v,g=c.find(".btn-fullscreen"),y=c.find(".btn-borderless"),b,w,_=c.find(".btn-toggleheader"),x=s.$preview.find("#zoom-"+f);o=x.attr("data-template")||"generic";r=x.find(".kv-file-content");a=r.length?r.html():"";b=i.data("caption")||"";w=i.data("size")||"";l=b+" "+w;c.find(".kv-zoom-title").html(l);h=c.find(".kv-zoom-body");c.removeClass("kv-single-content");if(n){v=h.addClass("file-thumb-loading").clone().insertAfter(h);h.html(a).hide();v.fadeOut("fast",function(){h.fadeIn("fast",function(){h.removeClass("file-thumb-loading")});v.remove()})}else{h.html(a)}u=s.previewZoomSettings[o];if(u){d=h.find(".kv-preview-data");t.addCss(d,"file-zoom-detail");e.each(u,function(e,t){d.css(e,t);if(d.attr("width")&&e==="width"||d.attr("height")&&e==="height"){d.removeAttr(e)}})}c.data("previewId",f);var k=h.find("img");if(k.length){t.adjustOrientedImage(k,true)}s._handler(p,"click",function(){s._zoomSlideShow("prev",f)});s._handler(m,"click",function(){s._zoomSlideShow("next",f)});s._handler(g,"click",function(){s._resizeZoomDialog(true)});s._handler(y,"click",function(){s._resizeZoomDialog(false)});s._handler(_,"click",function(){var e=c.find(".modal-header"),t=c.find(".modal-body .floating-buttons"),i,n=e.find(".kv-zoom-actions"),r=function(t){var i=s.$modal.find(".kv-zoom-body"),n=s.zoomModalHeight;if(c.hasClass("file-zoom-fullscreen")){n=i.outerHeight(true);if(!t){n=n-e.outerHeight(true)}}i.css("height",t?n+t:n)};if(e.is(":visible")){i=e.outerHeight(true);e.slideUp("slow",function(){n.find(".btn").appendTo(t);r(i)})}else{t.find(".btn").appendTo(n);e.slideDown("slow",function(){r()})}c.focus()});s._handler(c,"keydown",function(e){var t=e.which||e.keyCode;if(t===37&&!p.attr("disabled")){s._zoomSlideShow("prev",f)}if(t===39&&!m.attr("disabled")){s._zoomSlideShow("next",f)}})},_zoomPreview:function(e){var i=this,n,s=i.$modal;if(!e.length){throw"Cannot zoom to detailed preview!"}t.initModal(s);s.html(i._getModalContent());n=e.closest(t.FRAMES);i._setZoomContent(n);s.modal("show");i._initZoomButtons()},_zoomSlideShow:function(t,i){var n=this,s=n.$modal.find(".kv-zoom-actions .btn-"+t),r,o,a=n.getFrames().toArray(),l=a.length,h;if(s.attr("disabled")){return}for(o=0;o<l;o++){if(e(a[o]).attr("id")===i){h=t==="prev"?o-1:o+1;break}}if(h<0||h>=l||!a[h]){return}r=e(a[h]);if(r.length){n._setZoomContent(r,true)}n._initZoomButtons();n._raise("filezoom"+t,{previewId:i,modal:n.$modal})},_initZoomButton:function(){var t=this;t.$preview.find(".kv-file-zoom").each(function(){var i=e(this);t._handler(i,"click",function(){t._zoomPreview(i)})})},_clearObjects:function(t){t.find("video audio").each(function(){this.pause();e(this).remove()});t.find("img object div").each(function(){e(this).remove()})},_clearFileInput:function(){var i=this,n=i.$element,s,r,o;i.fileInputCleared=true;if(t.isEmpty(n.val())){return}if(i.isIE9||i.isIE10){s=n.closest("form");r=e(document.createElement("form"));o=e(document.createElement("div"));n.before(o);if(s.length){s.after(r)}else{o.after(r)}r.append(n).trigger("reset");o.before(n).remove();r.remove()}else{n.val("")}},_resetUpload:function(){var e=this;e.uploadCache={content:[],config:[],tags:[],append:true};e.uploadCount=0;e.uploadStatus={};e.uploadLog=[];e.uploadAsyncCount=0;e.loadedImages=[];e.totalImagesCount=0;e.$btnUpload.removeAttr("disabled");e._setProgress(0);t.addCss(e.$progress,"hide");e._resetErrors(false);e.ajaxAborted=false;e.ajaxRequests=[];e._resetCanvas();e.cacheInitialPreview={};if(e.overwriteInitial){e.initialPreview=[];e.initialPreviewConfig=[];e.initialPreviewThumbTags=[];e.previewCache.data={content:[],config:[],tags:[]}}},_resetCanvas:function(){var e=this;if(e.canvas&&e.imageCanvasContext){e.imageCanvasContext.clearRect(0,0,e.canvas.width,e.canvas.height)}},_hasInitialPreview:function(){var e=this;return!e.overwriteInitial&&e.previewCache.count()},_resetPreview:function(){var e=this,t,i;if(e.previewCache.count()){t=e.previewCache.out();e.$preview.html(t.content);e._setInitThumbAttr();i=e.initialCaption?e.initialCaption:t.caption;e._setCaption(i)}else{e._clearPreview();e._initCaption()}if(e.showPreview){e._initZoom();e._initSortable()}},_clearDefaultPreview:function(){var e=this;e.$preview.find(".file-default-preview").remove()},_validateDefaultPreview:function(){var e=this;if(!e.showPreview||t.isEmpty(e.defaultPreviewContent)){return}e.$preview.html('<div class="file-default-preview">'+e.defaultPreviewContent+"</div>");e.$container.removeClass("file-input-new");e._initClickable()},_resetPreviewThumbs:function(e){var t=this,i;if(e){t._clearPreview();t.clearStack();return}if(t._hasInitialPreview()){i=t.previewCache.out();t.$preview.html(i.content);t._setInitThumbAttr();t._setCaption(i.caption);t._initPreviewActions()}else{t._clearPreview()}},_getLayoutTemplate:function(e){var i=this,n=i.layoutTemplates[e];if(t.isEmpty(i.customLayoutTags)){return n}return t.replaceTags(n,i.customLayoutTags)},_getPreviewTemplate:function(e){var i=this,n=i.previewTemplates[e];if(t.isEmpty(i.customPreviewTags)){return n}return t.replaceTags(n,i.customPreviewTags)},_getOutData:function(e,t,i){var n=this;e=e||{};t=t||{};i=i||n.filestack.slice(0)||{};return{form:n.formdata,files:i,filenames:n.filenames,filescount:n.getFilesCount(),extra:n._getExtraData(),response:t,reader:n.reader,jqXHR:e}},_getMsgSelected:function(e){var t=this,i=e===1?t.fileSingle:t.filePlural;return e>0?t.msgSelected.replace("{n}",e).replace("{files}",i):t.msgNoFilesSelected},_getFrame:function(t){var i=this,n=e("#"+t);if(!n.length){i._log('Invalid thumb frame with id: "'+t+'".');return null}return n},_getThumbs:function(e){e=e||"";return this.getFrames(":not(.file-preview-initial)"+e)},_getExtraData:function(e,t){var i=this,n=i.uploadExtraData;if(typeof i.uploadExtraData==="function"){n=i.uploadExtraData(e,t)}return n},_initXhr:function(e,t,i){var n=this;if(e.upload){e.upload.addEventListener("progress",function(e){var s=0,r=e.total,o=e.loaded||e.position;if(e.lengthComputable){s=Math.floor(o/r*100)}if(t){n._setAsyncUploadStatus(t,s,i)}else{n._setProgress(s)}},false)}return e},_ajaxSubmit:function(t,i,n,s,r,o){var a=this,l;if(!a._raise("filepreajax",[r,o])){return}a._uploadExtra(r,o);l=e.extend(true,{},{xhr:function(){var t=e.ajaxSettings.xhr();return a._initXhr(t,r,a.getFileStack().length)},url:a.uploadUrl,type:"POST",dataType:"json",data:a.formdata,cache:false,processData:false,contentType:false,beforeSend:t,success:i,complete:n,error:s},a.ajaxSettings);a.ajaxRequests.push(e.ajax(l))},_mergeArray:function(e,i){var n=this,s=t.cleanArray(n[e]),r=t.cleanArray(i);n[e]=s.concat(r)},_initUploadSuccess:function(i,n,s){var r=this,o,a,l,h,d,u,f,c,p;if(!r.showPreview||typeof i!=="object"||e.isEmptyObject(i)){return}if(i.initialPreview!==undefined&&i.initialPreview.length>0){r.hasInitData=true;u=i.initialPreview||[];f=i.initialPreviewConfig||[];c=i.initialPreviewThumbTags||[];o=i.append===undefined||i.append?true:false;if(u.length>0&&!t.isArray(u)){u=u.split(r.initialPreviewDelimiter)}r._mergeArray("initialPreview",u);r._mergeArray("initialPreviewConfig",f);r._mergeArray("initialPreviewThumbTags",c);if(n!==undefined){if(!s){l=r.previewCache.add(u,f[0],c[0],o);a=r.previewCache.get(l,false);h=e(document.createElement("div")).html(a).hide().insertAfter(n);d=h.find(".kv-zoom-cache");if(d&&d.length){d.insertAfter(n)}n.fadeOut("slow",function(){var e=h.find(".file-preview-frame");if(e&&e.length){e.insertBefore(n).fadeIn("slow").css("display:inline-block")}r._initPreviewActions();r._clearFileInput();t.cleanZoomCache(r.$preview.find("#zoom-"+n.attr("id")));n.remove();h.remove();r._initSortable()})}else{p=n.attr("data-fileindex");r.uploadCache.content[p]=u[0];r.uploadCache.config[p]=f[0]||[];r.uploadCache.tags[p]=c[0]||[];r.uploadCache.append=o}}else{r.previewCache.set(u,f,c,o);r._initPreview();r._initPreviewActions()}}},_initSuccessThumbs:function(){var i=this;if(!i.showPreview){return}i._getThumbs(t.FRAMES+".file-preview-success").each(function(){var n=e(this),s=i.$preview,r=n.find(".kv-file-remove");r.removeAttr("disabled");i._handler(r,"click",function(){var e=n.attr("id"),r=i._raise("filesuccessremove",[e,n.attr("data-fileindex")]);t.cleanMemory(n);if(r===false){return}n.fadeOut("slow",function(){t.cleanZoomCache(s.find("#zoom-"+e));n.remove();if(!i.getFrames().length){i.reset()}})})})},_checkAsyncComplete:function(){var t=this,i,n;for(n=0;n<t.filestack.length;n++){if(t.filestack[n]){i=t.previewInitId+"-"+n;if(e.inArray(i,t.uploadLog)===-1){return false}}}return t.uploadAsyncCount===t.uploadLog.length},_uploadExtra:function(t,i){var n=this,s=n._getExtraData(t,i);if(s.length===0){return}e.each(s,function(e,t){n.formdata.append(e,t)})},_uploadSingle:function(i,n,s){var r=this,o=r.getFileStack().length,a=new FormData,l,h=r.previewInitId+"-"+i,d,u,f,c,p=r.filestack.length>0||!e.isEmptyObject(r.uploadExtraData),m=e("#"+h).find(".file-thumb-progress"),v,g,y,b,w,_={id:h,index:i};r.formdata=a;if(r.showPreview){d=e("#"+h+":not(.file-preview-initial)");f=d.find(".kv-file-upload");c=d.find(".kv-file-remove");m.removeClass("hide")}if(o===0||!p||f&&f.hasClass("disabled")||r._abort(_)){return}w=function(e,t){r.updateStack(e,undefined);r.uploadLog.push(t);if(r._checkAsyncComplete()){r.fileBatchCompleted=true}};u=function(){var e=r.uploadCache,i,n,s,o=0,a=r.cacheInitialPreview;if(!r.fileBatchCompleted){return}if(a&&a.content){o=a.content.length}setTimeout(function(){if(r.showPreview){r.previewCache.set(e.content,e.config,e.tags,e.append);if(o){for(n=0;n<e.content.length;n++){s=n+o;a.content[s]=e.content[n];if(a.config.length){a.config[s]=e.config[n]}if(a.tags.length){a.tags[s]=e.tags[n]}}r.initialPreview=t.cleanArray(a.content);r.initialPreviewConfig=t.cleanArray(a.config);r.initialPreviewThumbTags=t.cleanArray(a.tags)}else{r.initialPreview=e.content;r.initialPreviewConfig=e.config;r.initialPreviewThumbTags=e.tags}r.cacheInitialPreview={};if(r.hasInitData){r._initPreview();r._initPreviewActions()}}r.unlock();r._clearFileInput();i=r.$preview.find(".file-preview-initial");if(r.uploadAsync&&i.length){t.addCss(i,t.SORT_CSS);r._initSortable()}r._raise("filebatchuploadcomplete",[r.filestack,r._getExtraData()]);r.uploadCount=0;r.uploadStatus={};r.uploadLog=[];r._setProgress(101)},100)};v=function(n){l=r._getOutData(n);r.fileBatchCompleted=false;if(r.showPreview){if(!d.hasClass("file-preview-success")){r._setThumbStatus(d,"Loading");t.addCss(d,"file-uploading")}f.attr("disabled",true);c.attr("disabled",true)}if(!s){r.lock()}r._raise("filepreupload",[l,h,i]);e.extend(true,_,l);if(r._abort(_)){n.abort();r._setProgressCancelled()}};g=function(n,o,a){var u=r.showPreview&&d.attr("id")?d.attr("id"):h;l=r._getOutData(a,n);e.extend(true,_,l);setTimeout(function(){if(t.isEmpty(n)||t.isEmpty(n.error)){if(r.showPreview){r._setThumbStatus(d,"Success");f.hide();r._initUploadSuccess(n,d,s);r._setProgress(101,m)}r._raise("fileuploaded",[l,u,i]);if(!s){r.updateStack(i,undefined)}else{w(i,u)}}else{r._showUploadError(n.error,_);r._setPreviewError(d,i);if(s){w(i,u)}}},100)};y=function(){setTimeout(function(){if(r.showPreview){f.removeAttr("disabled");c.removeAttr("disabled");d.removeClass("file-uploading")}if(!s){r.unlock(false);r._clearFileInput()}else{u()}r._initSuccessThumbs()},100)};b=function(t,o,a){var l=r.ajaxOperations.uploadThumb,u=r._parseError(l,t,a,s?n[i].name:null);setTimeout(function(){if(s){w(i,h)}r.uploadStatus[h]=100;r._setPreviewError(d,i);e.extend(true,_,r._getOutData(t));r._setProgress(101,m,r.msgAjaxProgressError.replace("{operation}",l));r._showUploadError(u,_)},100)};a.append(r.uploadFileAttr,n[i],r.filenames[i]);a.append("file_id",i);r._ajaxSubmit(v,g,y,b,h,i)},_uploadBatch:function(){var i=this,n=i.filestack,s=n.length,r={},o,a,l,h,d=i.filestack.length>0||!e.isEmptyObject(i.uploadExtraData),u;i.formdata=new FormData;if(s===0||!d||i._abort(r)){return}u=function(){e.each(n,function(e){i.updateStack(e,undefined)});i._clearFileInput()};o=function(n){i.lock();var s=i._getOutData(n);if(i.showPreview){i._getThumbs().each(function(){var n=e(this),s=n.find(".kv-file-upload"),r=n.find(".kv-file-remove");if(!n.hasClass("file-preview-success")){i._setThumbStatus(n,"Loading");t.addCss(n,"file-uploading")}s.attr("disabled",true);r.attr("disabled",true)})}i._raise("filebatchpreupload",[s]);if(i._abort(s)){n.abort();i._setProgressCancelled()}};a=function(n,s,r){var o=i._getOutData(r,n),a=i._getThumbs(":not(.file-preview-error)"),l=0,h=t.isEmpty(n)||t.isEmpty(n.errorkeys)?[]:n.errorkeys;if(t.isEmpty(n)||t.isEmpty(n.error)){i._raise("filebatchuploadsuccess",[o]);u();if(i.showPreview){a.each(function(){var t=e(this),n=t.find(".kv-file-upload");t.find(".kv-file-upload").hide();i._setThumbStatus(t,"Success");t.removeClass("file-uploading");n.removeAttr("disabled")});i._initUploadSuccess(n)}else{i.reset()}i._setProgress(101)}else{if(i.showPreview){a.each(function(){var t=e(this),n=t.find(".kv-file-remove"),s=t.find(".kv-file-upload");t.removeClass("file-uploading");s.removeAttr("disabled");n.removeAttr("disabled");if(h.length===0){i._setPreviewError(t);return}if(e.inArray(l,h)!==-1){i._setPreviewError(t)}else{t.find(".kv-file-upload").hide();i._setThumbStatus(t,"Success");i.updateStack(l,undefined)}l++});i._initUploadSuccess(n)}i._showUploadError(n.error,o,"filebatchuploaderror")}};h=function(){i.unlock();i._initSuccessThumbs();i._clearFileInput();i._raise("filebatchuploadcomplete",[i.filestack,i._getExtraData()])};l=function(t,n,r){var o=i._getOutData(t),a=i.ajaxOperations.uploadBatch,l=i._parseError(a,t,r);i._showUploadError(l,o,"filebatchuploaderror");i.uploadFileCount=s-1;if(!i.showPreview){return}i._getThumbs().each(function(){var t=e(this),n=t.attr("data-fileindex");t.removeClass("file-uploading");if(i.filestack[n]!==undefined){i._setPreviewError(t)}});i._getThumbs().removeClass("file-uploading");i._getThumbs(" .kv-file-upload").removeAttr("disabled");i._getThumbs(" .kv-file-delete").removeAttr("disabled");i._setProgress(101,i.$progress,i.msgAjaxProgressError.replace("{operation}",a))};e.each(n,function(e,s){if(!t.isEmpty(n[e])){i.formdata.append(i.uploadFileAttr,s,i.filenames[e])}});i._ajaxSubmit(o,a,h,l)},_uploadExtraOnly:function(){var e=this,i={},n,s,r,o;e.formdata=new FormData;if(e._abort(i)){return}n=function(t){e.lock();var n=e._getOutData(t);e._raise("filebatchpreupload",[n]);e._setProgress(50);i.data=n;i.xhr=t;if(e._abort(i)){t.abort();e._setProgressCancelled()}};s=function(i,n,s){var r=e._getOutData(s,i);if(t.isEmpty(i)||t.isEmpty(i.error)){e._raise("filebatchuploadsuccess",[r]);e._clearFileInput();e._initUploadSuccess(i);e._setProgress(101)}else{e._showUploadError(i.error,r,"filebatchuploaderror")}};r=function(){e.unlock();e._clearFileInput();e._raise("filebatchuploadcomplete",[e.filestack,e._getExtraData()])};o=function(t,n,s){var r=e._getOutData(t),o=e.ajaxOperations.uploadExtra,a=e._parseError(o,t,s);i.data=r;e._showUploadError(a,r,"filebatchuploaderror");e._setProgress(101,e.$progress,e.msgAjaxProgressError.replace("{operation}",o))};e._ajaxSubmit(n,s,r,o)},_deleteFileIndex:function(i){var n=this,s=i.attr("data-fileindex");if(s.substring(0,5)==="init_"){s=parseInt(s.replace("init_",""));n.initialPreview=t.spliceArray(n.initialPreview,s);n.initialPreviewConfig=t.spliceArray(n.initialPreviewConfig,s);n.initialPreviewThumbTags=t.spliceArray(n.initialPreviewThumbTags,s);n.getFrames().each(function(){var t=e(this),i=t.attr("data-fileindex");if(i.substring(0,5)==="init_"){i=parseInt(i.replace("init_",""));if(i>s){i--;t.attr("data-fileindex","init_"+i)}}});if(n.uploadAsync){n.cacheInitialPreview=n.getPreview()}}},_initFileActions:function(){var i=this,n=i.$preview;if(!i.showPreview){return}i._initZoomButton();i.getFrames(" .kv-file-remove").each(function(){var s=e(this),r=s.closest(t.FRAMES),o,a=r.attr("id"),l=r.attr("data-fileindex"),h,d,u;i._handler(s,"click",function(){u=i._raise("filepreremove",[a,l]);if(u===false||!i._validateMinCount()){return false}o=r.hasClass("file-preview-error");t.cleanMemory(r);r.fadeOut("slow",function(){t.cleanZoomCache(n.find("#zoom-"+a));i.updateStack(l,undefined);i._clearObjects(r);r.remove();if(a&&o){i.$errorContainer.find('li[data-file-id="'+a+'"]').fadeOut("fast",function(){e(this).remove();if(!i._errorsExist()){i._resetErrors()}})}i._clearFileInput();var s=i.getFileStack(true),u=i.previewCache.count(),f=s.length,c=i.showPreview&&i.getFrames().length;if(f===0&&u===0&&!c){i.reset()}else{h=u+f;d=h>1?i._getMsgSelected(h):s[0]?i._getFileNames()[0]:"";i._setCaption(d)}i._raise("fileremoved",[a,l])})})});i.getFrames(" .kv-file-upload").each(function(){var n=e(this);i._handler(n,"click",function(){var e=n.closest(t.FRAMES),s=e.attr("data-fileindex");if(!e.hasClass("file-preview-error")){i._uploadSingle(s,i.filestack,false)}})})},_initPreviewActions:function(){var i=this,n=i.$preview,s=i.deleteExtraData||{},r=t.FRAMES+" .kv-file-remove",o=function(){var e=i.isUploadable?i.previewCache.count():i.$element.get(0).files.length;if(n.find(r).length===0&&!e){i.reset();i.initialCaption=""}};i._initZoomButton();n.find(r).each(function(){var r=e(this),a=r.data("url")||i.deleteUrl,l=r.data("key");if(t.isEmpty(a)||l===undefined){return}var h=r.closest(t.FRAMES),d=i.previewCache.data,u,f,c=h.attr("data-fileindex"),p,m;c=parseInt(c.replace("init_",""));p=t.isEmpty(d.config)&&t.isEmpty(d.config[c])?null:d.config[c];m=t.isEmpty(p)||t.isEmpty(p.extra)?s:p.extra;if(typeof m==="function"){m=m()}f={id:r.attr("id"),key:l,extra:m};u=e.extend(true,{},{url:a,type:"POST",dataType:"json",data:e.extend(true,{},{key:l},m),beforeSend:function(e){i.ajaxAborted=false;i._raise("filepredelete",[l,e,m]);if(i.ajaxAborted){e.abort()}else{t.addCss(h,"file-uploading");t.addCss(r,"disabled")}},success:function(e,s,a){var d,u;if(t.isEmpty(e)||t.isEmpty(e.error)){c=parseInt(h.attr("data-fileindex").replace("init_",""));i.previewCache.unset(c);d=i.previewCache.count();u=d>0?i._getMsgSelected(d):"";i._deleteFileIndex(h);i._setCaption(u);i._raise("filedeleted",[l,a,m])}else{f.jqXHR=a;f.response=e;i._showError(e.error,f,"filedeleteerror");h.removeClass("file-uploading");r.removeClass("disabled");o();return}h.removeClass("file-uploading").addClass("file-deleted");h.fadeOut("slow",function(){t.cleanZoomCache(n.find("#zoom-"+h.attr("id")));i._clearObjects(h);h.remove();o();if(!d&&i.getFileStack().length===0){i._setCaption("");i.reset()}})},error:function(e,t,n){var s=i.ajaxOperations.deleteThumb,r=i._parseError(s,e,n);f.jqXHR=e;f.response={};i._showError(r,f,"filedeleteerror");h.removeClass("file-uploading");o()}},i.ajaxDeleteSettings);i._handler(r,"click",function(){if(!i._validateMinCount()){return false}e.ajax(u)})})},_hideFileIcon:function(){if(this.overwriteInitial){this.$captionContainer.find(".kv-caption-icon").hide()}},_showFileIcon:function(){this.$captionContainer.find(".kv-caption-icon").show()},_getSize:function(t){var i=this,n=parseFloat(t),s,r=i.fileSizeGetter,o,a;if(!e.isNumeric(t)||!e.isNumeric(n)){return""}if(typeof r==="function"){a=r(n)}else{if(n===0){a="0.00 B"}else{s=Math.floor(Math.log(n)/Math.log(1024));o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];a=(n/Math.pow(1024,s)).toFixed(2)*1+" "+o[s]}}return i._getLayoutTemplate("size").replace("{sizeText}",a)},_generatePreviewTemplate:function(i,n,s,r,o,a,l,h,d,u,f){var c=this,p=c.slug(s),m,v="",g=c.previewSettings[i]||c.defaults.previewSettings[i],y=g&&g.width?g.width:"",b=g&&g.height?g.height:"",w=d||c._renderFileFooter(p,l,t.isEmpty(y)?"auto":y,a),_=c._getPreviewIcon(s),x="type-default",k=_&&c.preferIconicPreview,C=_&&c.preferIconicZoomPreview,S=function(n,a,l,d){
var m=l?"zoom-"+o:o,v=c._getPreviewTemplate(n),g=(h||"")+" "+d;if(c.frameClass){g=c.frameClass+" "+g}if(l){g=g.replace(" "+t.SORT_CSS,"")}v=c._parseFilePreviewIcon(v,s);if(n==="text"){a=t.htmlEncode(a)}if(i==="object"&&!r){e.each(c.defaults.fileTypeSettings,function(e,t){if(e==="object"||e==="other"){return}if(t(s,r)){x="type-"+e}})}return v.setTokens({previewId:m,caption:p,frameClass:g,type:r,fileindex:u,width:y,height:b,typeCss:x,footer:w,data:a,template:f||i})};u=u||o.slice(o.lastIndexOf("-")+1);if(c.fileActionSettings.showZoom){v=S(C?"other":i,n,true,"kv-zoom-thumb")}v="\n"+c._getLayoutTemplate("zoomCache").replace("{zoomContent}",v);m=S(k?"other":i,n,false,"kv-preview-thumb");return m+v},_previewDefault:function(i,n,s){var r=this,o=r.$preview;if(!r.showPreview){return}var a=i?i.name:"",l=i?i.type:"",h,d=i.size||0,u=r.slug(a),f=s===true&&!r.isUploadable,c=t.objUrl.createObjectURL(i);r._clearDefaultPreview();h=r._generatePreviewTemplate("other",c,a,l,n,f,d);o.append("\n"+h);r._setThumbAttr(n,u,d);if(s===true&&r.isUploadable){r._setThumbStatus(e("#"+n),"Error")}},_previewFile:function(e,i,n,s,r){if(!this.showPreview){return}var o=this,a=o._parseFileType(i),l=i?i.name:"",h=o.slug(l),d=o.allowedPreviewTypes,u=o.allowedPreviewMimeTypes,f=o.$preview,c=d&&d.indexOf(a)>=0,p=i.size||0,m=i.type,v=a==="text"||a==="html"||a==="image"?n.target.result:r,g,y=u&&u.indexOf(m)!==-1;if(a==="html"&&o.purifyHtml&&window.DOMPurify){v=window.DOMPurify.sanitize(v)}if(c||y){g=o._generatePreviewTemplate(a,v,l,m,s,false,p);o._clearDefaultPreview();f.append("\n"+g);var b=f.find("#"+s+" img");if(b.length&&o.autoOrientImage){t.validateOrientation(i,function(e){if(e){var n=f.find("#zoom-"+s+" img"),r="rotate-"+e;if(e>4){r+=b.width()>b.height()?" is-portrait-gt4":" is-landscape-gt4"}t.addCss(b,r);t.addCss(n,r);o._raise("fileimageoriented",{$img:b,file:i})}o._validateImage(s,h,m,p,v);t.adjustOrientedImage(b)})}else{o._validateImage(s,h,m,p,v)}}else{o._previewDefault(i,s)}o._setThumbAttr(s,h,p);o._initSortable()},_setThumbAttr:function(t,i,n){var s=this,r=e("#"+t);if(r.length){n=n&&n>0?s._getSize(n):"";r.data({caption:i,size:n})}},_setInitThumbAttr:function(){var e=this,i=e.previewCache.data,n=e.previewCache.count(true),s,r,o,a;if(n===0){return}for(var l=0;l<n;l++){s=i.config[l];a=e.previewInitId+"-"+"init_"+l;r=t.ifSet("caption",s,t.ifSet("filename",s));o=t.ifSet("size",s);e._setThumbAttr(a,r,o)}},_slugDefault:function(e){return t.isEmpty(e)?"":String(e).replace(/[\-\[\]\/\{}:;#%=\(\)\*\+\?\\\^\$\|<>&"']/g,"_")},_readFiles:function(i){this.reader=new FileReader;var n=this,s=n.$element,r=n.$preview,o=n.reader,a=n.$previewContainer,l=n.$previewStatus,h=n.msgLoading,d=n.msgProgress,u=n.previewInitId,f=i.length,c=n.fileTypeSettings,p=n.filestack.length,m,v=n.allowedFileTypes,g=v?v.length:0,y=n.allowedFileExtensions,b=t.isEmpty(y)?"":y.join(", "),w=n.maxFilePreviewSize&&parseFloat(n.maxFilePreviewSize),_=r.length&&(!w||isNaN(w)),x=function(t,s,r,o){var a=e.extend(true,{},n._getOutData({},{},i),{id:r,index:o}),l={id:r,index:o,file:s,files:i};n._previewDefault(s,r,true);if(n.isUploadable){n.addToStack(undefined);setTimeout(function(){m(o+1)},100)}n._initFileActions();if(n.removeFromPreviewOnError){e("#"+r).remove()}return n.isUploadable?n._showUploadError(t,a):n._showError(t,l)};n.loadedImages=[];n.totalImagesCount=0;e.each(i,function(e,t){var i=n.fileTypeSettings.image;if(i&&i(t.type)){n.totalImagesCount++}});m=function(e){if(t.isEmpty(s.attr("multiple"))){f=1}if(e>=f){if(n.isUploadable&&n.filestack.length>0){n._raise("filebatchselected",[n.getFileStack()])}else{n._raise("filebatchselected",[i])}a.removeClass("file-thumb-loading");l.html("");return}var k=p+e,C=u+"-"+k,S,T,M=i[e],D,E=M.name?n.slug(M.name):"",O=(M.size||0)/1e3,P,I,A="",N=t.objUrl.createObjectURL(M),F,R,$,L,z=0,j="",H;if(g>0){for(P=0;P<g;P++){$=v[P];L=n.msgFileTypes[$]||$;j+=P===0?L:", "+L}}if(E===false){m(e+1);return}if(E.length===0){I=n.msgInvalidFileName.replace("{name}",t.htmlEncode(M.name));n.isError=x(I,M,C,e);return}if(!t.isEmpty(y)){A=new RegExp("\\.("+y.join("|")+")$","i")}D=O.toFixed(2);if(n.maxFileSize>0&&O>n.maxFileSize){I=n.msgSizeTooLarge.setTokens({name:E,size:D,maxSize:n.maxFileSize});n.isError=x(I,M,C,e);return}if(n.minFileSize!==null&&O<=t.getNum(n.minFileSize)){I=n.msgSizeTooSmall.setTokens({name:E,size:D,minSize:n.minFileSize});n.isError=x(I,M,C,e);return}if(!t.isEmpty(v)&&t.isArray(v)){for(P=0;P<v.length;P+=1){F=v[P];H=c[F];z+=!H||typeof H!=="function"?0:H(M.type,M.name)?1:0}if(z===0){I=n.msgInvalidFileType.setTokens({name:E,types:j});n.isError=x(I,M,C,e);return}}if(z===0&&!t.isEmpty(y)&&t.isArray(y)&&!t.isEmpty(A)){R=t.compare(E,A);z+=t.isEmpty(R)?0:R.length;if(z===0){I=n.msgInvalidFileExtension.setTokens({name:E,extensions:b});n.isError=x(I,M,C,e);return}}if(!n.showPreview){if(n.isUploadable){n.addToStack(M)}setTimeout(function(){m(e+1);n._updateFileDetails(f)},100);n._raise("fileloaded",[M,C,e,o]);return}if(!_&&O>w){n.addToStack(M);a.addClass("file-thumb-loading");n._previewDefault(M,C);n._initFileActions();n._updateFileDetails(f);m(e+1);return}if(r.length&&FileReader!==undefined){l.html(h.replace("{index}",e+1).replace("{files}",f));a.addClass("file-thumb-loading");o.onerror=function(e){n._errorHandler(e,E)};o.onload=function(t){n._previewFile(e,M,t,C,N);n._initFileActions()};o.onloadend=function(){I=d.setTokens({index:e+1,files:f,percent:50,name:E});setTimeout(function(){l.html(I);n._updateFileDetails(f);m(e+1)},100);n._raise("fileloaded",[M,C,e,o])};o.onprogress=function(t){if(t.lengthComputable){var i=t.loaded/t.total*100,n=Math.ceil(i);I=d.setTokens({index:e+1,files:f,percent:n,name:E});setTimeout(function(){l.html(I)},100)}};S=c.text;T=c.image;if(S(M.type,E)){o.readAsText(M,n.textEncoding)}else{if(T(M.type,E)){o.readAsDataURL(M)}else{o.readAsArrayBuffer(M)}}}else{n._previewDefault(M,C);setTimeout(function(){m(e+1);n._updateFileDetails(f)},100);n._raise("fileloaded",[M,C,e,o])}n.addToStack(M)};m(0);n._updateFileDetails(f,false)},_updateFileDetails:function(e){var i=this,n=i.$element,s=i.getFileStack(),r=t.isIE(9)&&t.findFileName(n.val())||n[0].files[0]&&n[0].files[0].name||s.length&&s[0].name||"",o=i.slug(r),a=i.isUploadable?s.length:e,l=i.previewCache.count()+a,h=a>1?i._getMsgSelected(l):o;if(i.isError){i.$previewContainer.removeClass("file-thumb-loading");i.$previewStatus.html("");i.$captionContainer.find(".kv-caption-icon").hide()}else{i._showFileIcon()}i._setCaption(h,i.isError);i.$container.removeClass("file-input-new file-input-ajax-new");if(arguments.length===1){i._raise("fileselect",[e,o])}if(i.previewCache.count()){i._initPreviewActions()}},_setThumbStatus:function(e,t){var i=this;if(!i.showPreview){return}var n="indicator"+t,s=n+"Title",r="file-preview-"+t.toLowerCase(),o=e.find(".file-upload-indicator"),a=i.fileActionSettings;e.removeClass("file-preview-success file-preview-error file-preview-loading");if(t==="Error"){e.find(".kv-file-upload").attr("disabled",true)}if(t==="Success"){e.find(".file-drag-handle").remove();o.css("margin-left",0)}o.html(a[n]);o.attr("title",a[s]);e.addClass(r)},_setProgressCancelled:function(){var e=this;e._setProgress(101,e.$progress,e.msgCancelled)},_setProgress:function(e,i,n){var s=this,r=Math.min(e,100),o,a=s.progressUploadThreshold,l=e<=100?s.progressTemplate:s.progressCompleteTemplate,h=r<100?s.progressTemplate:n?s.progressErrorTemplate:l;i=i||s.$progress;if(!t.isEmpty(h)){if(a&&r>a&&e<=100){o=h.setTokens({percent:a,status:s.msgUploadThreshold})}else{o=h.setTokens({percent:r,status:e>100?s.msgUploadEnd:r+"%"})}i.html(o);if(n){i.find('[role="progressbar"]').html(n)}}},_setFileDropZoneTitle:function(){var e=this,i=e.$container.find(".file-drop-zone"),n=e.dropZoneTitle,s;if(e.isClickable){s=t.isEmpty(e.$element.attr("multiple"))?e.fileSingle:e.filePlural;n+=e.dropZoneClickTitle.replace("{files}",s)}i.find("."+e.dropZoneTitleClass).remove();if(!e.isUploadable||!e.showPreview||i.length===0||e.getFileStack().length>0||!e.dropZoneEnabled){return}if(i.find(t.FRAMES).length===0&&t.isEmpty(e.defaultPreviewContent)){i.prepend('<div class="'+e.dropZoneTitleClass+'">'+n+"</div>")}e.$container.removeClass("file-input-new");t.addCss(e.$container,"file-input-ajax-new")},_setAsyncUploadStatus:function(t,i,n){var s=this,r=0;s._setProgress(i,e("#"+t).find(".file-thumb-progress"));s.uploadStatus[t]=i;e.each(s.uploadStatus,function(e,t){r+=t});s._setProgress(Math.floor(r/n))},_validateMinCount:function(){var e=this,t=e.isUploadable?e.getFileStack().length:e.$element.get(0).files.length;if(e.validateInitialCount&&e.minFileCount>0&&e._getFileCount(t-1)<e.minFileCount){e._noFilesError({});return false}return true},_getFileCount:function(e){var t=this,i=0;if(t.validateInitialCount&&!t.overwriteInitial){i=t.previewCache.count();e+=i}return e},_getFileId:function(e){var t=this,i=t.generateFileId,n;if(typeof i==="function"){return i(e,event)}if(!e){return null}n=e.webkitRelativePath||e.fileName||e.name||null;if(!n){return null}return e.size+"-"+n.replace(/[^0-9a-zA-Z_-]/gim,"")},_getFileName:function(e){return e&&e.name?this.slug(e.name):undefined},_getFileIds:function(e){var t=this;return t.fileids.filter(function(t){return e?t!==undefined:t!==undefined&&t!==null})},_getFileNames:function(e){var t=this;return t.filenames.filter(function(t){return e?t!==undefined:t!==undefined&&t!==null})},_setPreviewError:function(e,t,i){var n=this;if(t!==undefined){n.updateStack(t,i)}if(n.removeFromPreviewOnError){e.remove()}else{n._setThumbStatus(e,"Error")}},_checkDimensions:function(e,i,n,s,r,o,a){var l=this,h,d,u=i==="Small"?"min":"max",f=l[u+"Image"+o],c,p;if(t.isEmpty(f)||!n.length){return}c=n[0];d=o==="Width"?c.naturalWidth||c.width:c.naturalHeight||c.height;p=i==="Small"?d>=f:d<=f;if(p){return}h=l["msgImage"+o+i].setTokens({name:r,size:f});l._showUploadError(h,a);l._setPreviewError(s,e,null)},_validateImage:function(t,i,n,s,r){var o=this,a=o.$preview,l,h,d,u=a.find("#"+t),f=u.attr("data-fileindex"),c=u.find("img"),p;i=i||"Untitled";c.one("load",function(){h=u.width();d=a.width();if(h>d){c.css("width","100%");u.css("width","97%")}l={ind:f,id:t};o._checkDimensions(f,"Small",c,u,i,"Width",l);o._checkDimensions(f,"Small",c,u,i,"Height",l);if(!o.resizeImage){o._checkDimensions(f,"Large",c,u,i,"Width",l);o._checkDimensions(f,"Large",c,u,i,"Height",l)}o._raise("fileimageloaded",[t]);p=window.piexif?window.piexif.load(r):null;o.loadedImages.push({ind:f,img:c,thumb:u,pid:t,typ:n,siz:s,validated:false,imgData:r,exifObj:p});u.data("exif",p);o._validateAllImages()}).one("error",function(){o._raise("fileimageloaderror",[t])}).each(function(){if(this.complete){e(this).load()}else{if(this.error){e(this).error()}}})},_validateAllImages:function(){var e=this,t,i={val:0},n=e.loadedImages.length,s,r,o=e.resizeIfSizeMoreThan;if(n!==e.totalImagesCount){return}e._raise("fileimagesloaded");if(!e.resizeImage){return}for(t=0;t<e.loadedImages.length;t++){s=e.loadedImages[t];if(s.validated){continue}r=s.siz;if(r&&r>o*1e3){e._getResizedImage(s,i,n)}e.loadedImages[t].validated=true}},_getResizedImage:function(i,n,s){var r=this,o=e(i.img)[0],a=o.naturalWidth,l=o.naturalHeight,h,d=1,u=r.maxImageWidth||a,f=r.maxImageHeight||l,c=!!(a&&l),p,m,v=r.imageCanvas,g,y=r.imageCanvasContext,b=i.typ,w=i.pid,_=i.ind,x=i.thumb,k,C,S=i.exifObj,T;k=function(e,t,i){if(r.isUploadable){r._showUploadError(e,t,i)}else{r._showError(e,t,i)}r._setPreviewError(x,_)};if(!r.filestack[_]||!c||a<=u&&l<=f){if(c&&r.filestack[_]){r._raise("fileimageresized",[w,_])}n.val++;if(n.val===s){r._raise("fileimagesresized")}if(!c){k(r.msgImageResizeError,{id:w,index:_},"fileimageresizeerror");return}}b=b||r.resizeDefaultImageType;p=a>u;m=l>f;if(r.resizePreference==="width"){d=p?u/a:m?f/l:1}else{d=m?f/l:p?u/a:1}r._resetCanvas();a*=d;l*=d;v.width=a;v.height=l;try{y.drawImage(o,0,0,a,l);g=v.toDataURL(b,r.resizeQuality);if(S){T=window.piexif.dump(S);g=window.piexif.insert(T,g)}h=t.dataURI2Blob(g);r.filestack[_]=h;r._raise("fileimageresized",[w,_]);n.val++;if(n.val===s){r._raise("fileimagesresized",[undefined,undefined])}if(!(h instanceof Blob)){k(r.msgImageResizeError,{id:w,index:_},"fileimageresizeerror")}}catch(e){n.val++;if(n.val===s){r._raise("fileimagesresized",[undefined,undefined])}C=r.msgImageResizeException.replace("{errors}",e.message);k(C,{id:w,index:_},"fileimageresizeexception")}},_initBrowse:function(e){var t=this;if(t.showBrowse){t.$btnFile=e.find(".btn-file");t.$btnFile.append(t.$element)}else{t.$element.hide()}},_initCaption:function(){var e=this,i=e.initialCaption||"";if(e.overwriteInitial||t.isEmpty(i)){e.$caption.html("");return false}e._setCaption(i);return true},_setCaption:function(i,n){var s=this,r,o,a,l,h=s.getFileStack();if(!s.$caption.length){return}if(n){r=e("<div>"+s.msgValidationError+"</div>").text();a=h.length;if(a){l=a===1&&h[0]?s._getFileNames()[0]:s._getMsgSelected(a)}else{l=s._getMsgSelected(s.msgNo)}o='<span class="'+s.msgValidationErrorClass+'">'+s.msgValidationErrorIcon+(t.isEmpty(i)?l:i)+"</span>"}else{if(t.isEmpty(i)){return}r=e("<div>"+i+"</div>").text();o=s._getLayoutTemplate("fileIcon")+r}s.$caption.html(o);s.$caption.attr("title",r);s.$captionContainer.find(".file-caption-ellipsis").attr("title",r)},_createContainer:function(){var t=this,i=e(document.createElement("div")).attr({class:"file-input file-input-new"}).html(t._renderMain());t.$element.before(i);t._initBrowse(i);if(t.theme){i.addClass("theme-"+t.theme)}return i},_refreshContainer:function(){var e=this,t=e.$container;t.before(e.$element);t.html(e._renderMain());e._initBrowse(t)},_renderMain:function(){var e=this,t=e.isUploadable&&e.dropZoneEnabled?" file-drop-zone":"file-drop-disabled",i=!e.showClose?"":e._getLayoutTemplate("close"),n=!e.showPreview?"":e._getLayoutTemplate("preview").setTokens({class:e.previewClass,dropClass:t}),s=e.isDisabled?e.captionClass+" file-caption-disabled":e.captionClass,r=e.captionTemplate.setTokens({class:s+" kv-fileinput-caption"});return e.mainTemplate.setTokens({class:e.mainClass+(!e.showBrowse&&e.showCaption?" no-browse":""),preview:n,close:i,caption:r,upload:e._renderButton("upload"),remove:e._renderButton("remove"),cancel:e._renderButton("cancel"),browse:e._renderButton("browse")})},_renderButton:function(e){var i=this,n=i._getLayoutTemplate("btnDefault"),s=i[e+"Class"],r=i[e+"Title"],o=i[e+"Icon"],a=i[e+"Label"],l=i.isDisabled?" disabled":"",h="button";switch(e){case"remove":if(!i.showRemove){return""}break;case"cancel":if(!i.showCancel){return""}s+=" hide";break;case"upload":if(!i.showUpload){return""}if(i.isUploadable&&!i.isDisabled){n=i._getLayoutTemplate("btnLink").replace("{href}",i.uploadUrl)}else{h="submit"}break;case"browse":if(!i.showBrowse){return""}n=i._getLayoutTemplate("btnBrowse");break;default:return""}s+=e==="browse"?" btn-file":" fileinput-"+e+" fileinput-"+e+"-button";if(!t.isEmpty(a)){a=' <span class="'+i.buttonLabelClass+'">'+a+"</span>"}return n.setTokens({type:h,css:s,title:r,status:l,icon:o,label:a})},_renderThumbProgress:function(){var e=this;return'<div class="file-thumb-progress hide">'+e.progressTemplate.setTokens({percent:"0",status:e.msgUploadBegin})+"</div>"},_renderFileFooter:function(e,i,n,s){var r=this,o=r.fileActionSettings,a=o.showRemove,l=o.showDrag,h=o.showUpload,d=o.showZoom,u,f=r._getLayoutTemplate("footer"),c=s?o.indicatorError:o.indicatorNew,p=r._getLayoutTemplate("indicator"),m=s?o.indicatorErrorTitle:o.indicatorNewTitle,v=p.setTokens({indicator:c,indicatorTitle:m});i=r._getSize(i);if(r.isUploadable){u=f.setTokens({actions:r._renderFileActions(h,a,d,l,false,false,false),caption:e,size:i,width:n,progress:r._renderThumbProgress(),indicator:v})}else{u=f.setTokens({actions:r._renderFileActions(false,false,d,l,false,false,false),caption:e,size:i,width:n,progress:"",indicator:v})}u=t.replaceTags(u,r.previewThumbTags);return u},_renderFileActions:function(e,t,i,n,s,r,o,a){if(!e&&!t&&!i&&!n){return""}var l=this,h=r===false?"":' data-url="'+r+'"',d=o===false?"":' data-key="'+o+'"',u="",f="",c="",p="",m,v=l._getLayoutTemplate("actions"),g=l.fileActionSettings,y=l.otherActionButtons.setTokens({dataKey:d}),b=s?g.removeClass+" disabled":g.removeClass;if(t){u=l._getLayoutTemplate("actionDelete").setTokens({removeClass:b,removeIcon:g.removeIcon,removeTitle:g.removeTitle,dataUrl:h,dataKey:d})}if(e){f=l._getLayoutTemplate("actionUpload").setTokens({uploadClass:g.uploadClass,uploadIcon:g.uploadIcon,uploadTitle:g.uploadTitle})}if(i){c=l._getLayoutTemplate("actionZoom").setTokens({zoomClass:g.zoomClass,zoomIcon:g.zoomIcon,zoomTitle:g.zoomTitle})}if(n&&a){m="drag-handle-init "+g.dragClass;p=l._getLayoutTemplate("actionDrag").setTokens({dragClass:m,dragTitle:g.dragTitle,dragIcon:g.dragIcon})}return v.setTokens({delete:u,upload:f,zoom:c,drag:p,other:y})},_browse:function(e){var t=this;t._raise("filebrowse");if(e&&e.isDefaultPrevented()){return}if(t.isError&&!t.isUploadable){t.clear()}t.$captionContainer.focus()},_filterDuplicate:function(e,t,i){var n=this,s=n._getFileId(e);if(s&&i&&i.indexOf(s)>-1){return}if(!i){i=[]}t.push(e);i.push(s)},_change:function(i){var n=this,s=n.$element;if(!n.isUploadable&&t.isEmpty(s.val())&&n.fileInputCleared){n.fileInputCleared=false;return}n.fileInputCleared=false;var r=[],o,a,l=arguments.length>1,h=n.isUploadable,d,u,f=l?i.originalEvent.dataTransfer.files:s.get(0).files,c=n.filestack.length,p=t.isEmpty(s.attr("multiple")),m=p&&c>0,v=0,g=n._getFileIds(),y=function(t,i,s,r){var o=e.extend(true,{},n._getOutData({},{},f),{id:s,index:r}),a={id:s,index:r,file:i,files:f};return n.isUploadable?n._showUploadError(t,o):n._showError(t,a)};n.reader=null;n._resetUpload();n._hideFileIcon();if(n.isUploadable){n.$container.find(".file-drop-zone ."+n.dropZoneTitleClass).remove()}if(l){e.each(f,function(e,t){if(t&&!t.type&&t.size!==undefined&&t.size%4096===0){v++}else{n._filterDuplicate(t,r,g)}})}else{if(i.target&&i.target.files===undefined){f=i.target.value?[{name:i.target.value.replace(/^.+\\/,"")}]:[]}else{f=i.target.files||{}}if(h){e.each(f,function(e,t){n._filterDuplicate(t,r,g)})}else{r=f}}if(t.isEmpty(r)||r.length===0){if(!h){n.clear()}n._showFolderError(v);n._raise("fileselectnone");return}n._resetErrors();u=r.length;a=n._getFileCount(n.isUploadable?n.getFileStack().length+u:u);if(n.maxFileCount>0&&a>n.maxFileCount){if(!n.autoReplace||u>n.maxFileCount){d=n.autoReplace&&u>n.maxFileCount?u:a;o=n.msgFilesTooMany.replace("{m}",n.maxFileCount).replace("{n}",d);n.isError=y(o,null,null,null);n.$captionContainer.find(".kv-caption-icon").hide();n._setCaption("",true);n.$container.removeClass("file-input-new file-input-ajax-new");return}if(a>n.maxFileCount){n._resetPreviewThumbs(h)}}else{if(!h||m){n._resetPreviewThumbs(false);if(m){n.clearStack()}}else{if(h&&c===0&&(!n.previewCache.count()||n.overwriteInitial)){n._resetPreviewThumbs(true)}}}if(n.isPreviewable){n._readFiles(r)}else{n._updateFileDetails(1)}n._showFolderError(v)},_abort:function(t){var i=this,n;if(i.ajaxAborted&&typeof i.ajaxAborted==="object"&&i.ajaxAborted.message!==undefined){n=e.extend(true,{},i._getOutData(),t);n.abortData=i.ajaxAborted.data||{};n.abortMessage=i.ajaxAborted.message;i._setProgress(101,i.$progress,i.msgCancelled);i._showUploadError(i.ajaxAborted.message,n,"filecustomerror");i.cancel();return true}return false},_resetFileStack:function(){var i=this,n=0,s=[],r=[],o=[];i._getThumbs().each(function(){var a=e(this),l=a.attr("data-fileindex"),h=i.filestack[l],d=a.attr("id"),u;if(l==="-1"||l===-1){return}if(h!==undefined){s[n]=h;r[n]=i._getFileName(h);o[n]=i._getFileId(h);a.attr({id:i.previewInitId+"-"+n,"data-fileindex":n});n++}else{u="uploaded-"+t.uniqId();a.attr({id:u,"data-fileindex":"-1"});i.$preview.find("#zoom-"+d).attr("id","zoom-"+u)}});i.filestack=s;i.filenames=r;i.fileids=o},_isFileSelectionValid:function(e){var t=this;e=e||0;if(t.required&&!t.getFilesCount()){t.$errorContainer.html("");t._showUploadError(t.msgFileRequired);return false}if(t.minFileCount>0&&t._getFileCount(e)<t.minFileCount){t._noFilesError({});return false}return true},clearStack:function(){var e=this;e.filestack=[];e.filenames=[];e.fileids=[];return e.$element},updateStack:function(e,t){var i=this;i.filestack[e]=t;i.filenames[e]=i._getFileName(t);i.fileids[e]=t&&i._getFileId(t)||null;return i.$element},addToStack:function(e){var t=this;t.filestack.push(e);t.filenames.push(t._getFileName(e));t.fileids.push(t._getFileId(e));return t.$element},getFileStack:function(e){var t=this;return t.filestack.filter(function(t){return e?t!==undefined:t!==undefined&&t!==null})},getFilesCount:function(){var e=this,t=e.isUploadable?e.getFileStack().length:e.$element.get(0).files.length;return e._getFileCount(t)},lock:function(){var e=this;e._resetErrors();e.disable();if(e.showRemove){t.addCss(e.$container.find(".fileinput-remove"),"hide")}if(e.showCancel){e.$container.find(".fileinput-cancel").removeClass("hide")}e._raise("filelock",[e.filestack,e._getExtraData()]);return e.$element},unlock:function(e){var i=this;if(e===undefined){e=true}i.enable();if(i.showCancel){t.addCss(i.$container.find(".fileinput-cancel"),"hide")}if(i.showRemove){i.$container.find(".fileinput-remove").removeClass("hide")}if(e){i._resetFileStack()}i._raise("fileunlock",[i.filestack,i._getExtraData()]);return i.$element},cancel:function(){var t=this,i=t.ajaxRequests,n=i.length,s;if(n>0){for(s=0;s<n;s+=1){t.cancelling=true;i[s].abort()}}t._setProgressCancelled();t._getThumbs().each(function(){var i=e(this),n=i.attr("data-fileindex");i.removeClass("file-uploading");if(t.filestack[n]!==undefined){i.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled");i.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")}t.unlock()});return t.$element},clear:function(){var i=this,n;if(!i._raise("fileclear")){return}i.$btnUpload.removeAttr("disabled");i._getThumbs().find("video,audio,img").each(function(){t.cleanMemory(e(this))});i._resetUpload();i.clearStack();i._clearFileInput();i._resetErrors(true);if(i._hasInitialPreview()){i._showFileIcon();i._resetPreview();i._initPreviewActions();i.$container.removeClass("file-input-new")}else{i._getThumbs().each(function(){i._clearObjects(e(this))});if(i.isUploadable){i.previewCache.data={}}i.$preview.html("");n=!i.overwriteInitial&&i.initialCaption.length>0?i.initialCaption:"";i.$caption.html(n);i.$caption.attr("title","");t.addCss(i.$container,"file-input-new");i._validateDefaultPreview()}if(i.$container.find(t.FRAMES).length===0){if(!i._initCaption()){i.$captionContainer.find(".kv-caption-icon").hide()}}i._hideFileIcon();i._raise("filecleared");i.$captionContainer.focus();i._setFileDropZoneTitle();return i.$element},reset:function(){var e=this;if(!e._raise("filereset")){return}e._resetPreview();e.$container.find(".fileinput-filename").text("");t.addCss(e.$container,"file-input-new");if(e.getFrames().length||e.isUploadable&&e.dropZoneEnabled){e.$container.removeClass("file-input-new")}e._setFileDropZoneTitle();e.clearStack();e.formdata={};return e.$element},disable:function(){var e=this;e.isDisabled=true;e._raise("filedisabled");e.$element.attr("disabled","disabled");e.$container.find(".kv-fileinput-caption").addClass("file-caption-disabled");e.$container.find(".btn-file, .fileinput-remove, .fileinput-upload, .file-preview-frame button").attr("disabled",true);e._initDragDrop();return e.$element},enable:function(){var e=this;e.isDisabled=false;e._raise("fileenabled");e.$element.removeAttr("disabled");e.$container.find(".kv-fileinput-caption").removeClass("file-caption-disabled");e.$container.find(".btn-file, .fileinput-remove, .fileinput-upload, .file-preview-frame button").removeAttr("disabled");e._initDragDrop();return e.$element},upload:function(){var i=this,n=i.getFileStack().length,s,r,o,a=!e.isEmptyObject(i._getExtraData());if(!i.isUploadable||i.isDisabled||!i._isFileSelectionValid(n)){return}i._resetUpload();if(n===0&&!a){i._showUploadError(i.msgUploadEmpty);return}i.$progress.removeClass("hide");i.uploadCount=0;i.uploadStatus={};i.uploadLog=[];i.lock();i._setProgress(2);if(n===0&&a){i._uploadExtraOnly();return}o=i.filestack.length;i.hasInitData=false;if(i.uploadAsync){r=i._getOutData();i._raise("filebatchpreupload",[r]);i.fileBatchCompleted=false;i.uploadCache={content:[],config:[],tags:[],append:true};i.uploadAsyncCount=i.getFileStack().length;for(s=0;s<o;s++){i.uploadCache.content[s]=null;i.uploadCache.config[s]=null;i.uploadCache.tags[s]=null}i.$preview.find(".file-preview-initial").removeClass(t.SORT_CSS);i._initSortable();i.cacheInitialPreview=i.getPreview();for(s=0;s<o;s++){if(i.filestack[s]!==undefined){i._uploadSingle(s,i.filestack,true)}}return}i._uploadBatch();return i.$element},destroy:function(){var t=this,i=t.$form,n=t.$container,s=t.$element,r=t.namespace;e(document).off(r);e(window).off(r);if(i&&i.length){i.off(r)}if(t.isUploadable){t._clearFileInput()}t._cleanup();t._initPreviewCache();s.insertBefore(n).off(r).removeData();n.off().remove();return s},refresh:function(t){var i=this,n=i.$element;t=t?e.extend(true,{},i.options,t):i.options;i.destroy();n.fileinput(t);i=n.data("fileinput");if(i.isUploadable){i._clearFileInput()}if(n.val()){n.trigger("change.fileinput")}return n},zoom:function(e){var i=this,n=i._getFrame(e),s=i.$modal;if(!n){return}t.initModal(s);s.html(i._getModalContent());i._setZoomContent(n);s.modal("show");i._initZoomButtons()},getExif:function(e){var t=this,i=t._getFrame(e);return i&&i.data("exif")||null},getFrames:function(e){var i=this;e=e||"";return i.$preview.find(t.FRAMES+e)},getPreview:function(){var e=this;return{content:e.initialPreview,config:e.initialPreviewConfig,tags:e.initialPreviewThumbTags}}};e.fn.fileinput=function(n){if(!t.hasFileAPISupport()&&!t.isIE(9)){return}var s=Array.apply(null,arguments),r=[];s.shift();this.each(function(){var o=e(this),a=o.data("fileinput"),l=typeof n==="object"&&n,h=l.theme||o.data("theme"),d={},u={},f=l.language||o.data("language")||e.fn.fileinput.defaults.language||"en",c;if(!a){if(h){u=e.fn.fileinputThemes[h]||{}}if(f!=="en"&&!t.isEmpty(e.fn.fileinputLocales[f])){d=e.fn.fileinputLocales[f]||{}}c=e.extend(true,{},e.fn.fileinput.defaults,u,e.fn.fileinputLocales.en,d,l,o.data());a=new i(this,c);o.data("fileinput",a)}if(typeof n==="string"){r.push(a[n].apply(a,s))}});switch(r.length){case 0:return this;case 1:return r[0];default:return r}};e.fn.fileinput.defaults={language:"en",showCaption:true,showBrowse:true,showPreview:true,showRemove:true,showUpload:true,showCancel:true,showClose:true,showUploadedThumbs:true,browseOnZoneClick:false,autoReplace:false,autoOrientImage:true,required:false,generateFileId:null,previewClass:"",captionClass:"",frameClass:"krajee-default",mainClass:"file-caption-main",mainTemplate:null,purifyHtml:true,fileSizeGetter:null,initialCaption:"",initialPreview:[],initialPreviewDelimiter:"*$$*",initialPreviewAsData:false,initialPreviewFileType:"image",initialPreviewConfig:[],initialPreviewThumbTags:[],previewThumbTags:{},initialPreviewShowDelete:true,removeFromPreviewOnError:false,deleteUrl:"",deleteExtraData:{},overwriteInitial:true,previewZoomButtonIcons:{prev:'<i class="glyphicon glyphicon-triangle-left"></i>',next:'<i class="glyphicon glyphicon-triangle-right"></i>',toggleheader:'<i class="glyphicon glyphicon-resize-vertical"></i>',fullscreen:'<i class="glyphicon glyphicon-fullscreen"></i>',borderless:'<i class="glyphicon glyphicon-resize-full"></i>',close:'<i class="glyphicon glyphicon-remove"></i>'},previewZoomButtonClasses:{prev:"btn btn-navigate",next:"btn btn-navigate",toggleheader:"btn btn-default btn-header-toggle",fullscreen:"btn btn-default",borderless:"btn btn-default",close:"btn btn-default"},preferIconicPreview:false,preferIconicZoomPreview:false,allowedPreviewTypes:undefined,allowedPreviewMimeTypes:null,allowedFileTypes:null,allowedFileExtensions:null,defaultPreviewContent:null,customLayoutTags:{},customPreviewTags:{},previewFileIcon:'<i class="glyphicon glyphicon-file"></i>',previewFileIconClass:"file-other-icon",previewFileIconSettings:{},previewFileExtSettings:{},buttonLabelClass:"hidden-xs",browseIcon:'<i class="glyphicon glyphicon-folder-open"></i>&nbsp;',browseClass:"btn btn-primary",removeIcon:'<i class="glyphicon glyphicon-trash"></i>',removeClass:"btn btn-default",cancelIcon:'<i class="glyphicon glyphicon-ban-circle"></i>',cancelClass:"btn btn-default",uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',uploadClass:"btn btn-default",uploadUrl:null,uploadAsync:true,uploadExtraData:{},zoomModalHeight:480,minImageWidth:null,minImageHeight:null,maxImageWidth:null,maxImageHeight:null,resizeImage:false,resizePreference:"width",resizeQuality:.92,resizeDefaultImageType:"image/jpeg",resizeIfSizeMoreThan:0,minFileSize:0,maxFileSize:0,maxFilePreviewSize:25600,minFileCount:0,maxFileCount:0,validateInitialCount:false,msgValidationErrorClass:"text-danger",msgValidationErrorIcon:'<i class="glyphicon glyphicon-exclamation-sign"></i> ',msgErrorClass:"file-error-message",progressThumbClass:"progress-bar progress-bar-success progress-bar-striped active",progressClass:"progress-bar progress-bar-success progress-bar-striped active",progressCompleteClass:"progress-bar progress-bar-success",progressErrorClass:"progress-bar progress-bar-danger",progressUploadThreshold:99,previewFileType:"image",elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null,elErrorContainer:null,errorCloseButton:'<span class="close kv-error-close">&times;</span>',slugCallback:null,dropZoneEnabled:true,dropZoneTitleClass:"file-drop-zone-title",fileActionSettings:{},otherActionButtons:"",textEncoding:"UTF-8",ajaxSettings:{},ajaxDeleteSettings:{},showAjaxErrorDetails:true};e.fn.fileinputLocales.en={fileSingle:"file",filePlural:"files",browseLabel:"Browse &hellip;",removeLabel:"Remove",removeTitle:"Clear selected files",cancelLabel:"Cancel",cancelTitle:"Abort ongoing upload",uploadLabel:"Upload",uploadTitle:"Upload selected files",msgNo:"No",msgNoFilesSelected:"No files selected",msgCancelled:"Cancelled",msgZoomModalHeading:"Detailed Preview",msgFileRequired:"You must select a file to upload.",msgSizeTooSmall:'File "{name}" (<b>{size} KB</b>) is too small and must be larger than <b>{minSize} KB</b>.',msgSizeTooLarge:'File "{name}" (<b>{size} KB</b>) exceeds maximum allowed upload size of <b>{maxSize} KB</b>.',msgFilesTooLess:"You must select at least <b>{n}</b> {files} to upload.",msgFilesTooMany:"Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>.",msgFileNotFound:'File "{name}" not found!',msgFileSecured:'Security restrictions prevent reading the file "{name}".',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgInvalidFileName:'Invalid or unsupported characters in file name "{name}".',msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.',msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.',msgFileTypes:{image:"image",html:"HTML",text:"text",video:"video",audio:"audio",flash:"flash",pdf:"PDF",object:"object"},msgUploadAborted:"The file upload was aborted",msgUploadThreshold:"Processing...",msgUploadBegin:"Initializing...",msgUploadEnd:"Done",msgUploadEmpty:"No valid data available for upload.",msgValidationError:"Validation Error",msgLoading:"Loading file {index} of {files} &hellip;",msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} {files} selected",msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.",msgImageWidthSmall:'Width of image file "{name}" must be at least {size} px.',msgImageHeightSmall:'Height of image file "{name}" must be at least {size} px.',msgImageWidthLarge:'Width of image file "{name}" cannot exceed {size} px.',msgImageHeightLarge:'Height of image file "{name}" cannot exceed {size} px.',msgImageResizeError:"Could not get the image dimensions to resize.",msgImageResizeException:"Error while resizing the image.<pre>{errors}</pre>",
msgAjaxError:"Something went wrong with the {operation} operation. Please try again later!",msgAjaxProgressError:"{operation} failed",ajaxOperations:{deleteThumb:"file delete",uploadThumb:"file upload",uploadBatch:"batch file upload",uploadExtra:"form data upload"},dropZoneTitle:"Drag & drop files here &hellip;",dropZoneClickTitle:"<br>(or click to select {files})",previewZoomButtonTitles:{prev:"View previous file",next:"View next file",toggleheader:"Toggle header",fullscreen:"Toggle full screen",borderless:"Toggle borderless mode",close:"Close detailed preview"}};e.fn.fileinput.Constructor=i;e(document).ready(function(){var t=e("input.file[type=file]");if(t.length){t.fileinput()}})});(function(e){"use strict";e.fn.fileinputThemes.gly={fileActionSettings:{removeIcon:'<i class="glyphicon glyphicon-trash text-danger"></i>',uploadIcon:'<i class="glyphicon glyphicon-upload text-info"></i>',zoomIcon:'<i class="glyphicon glyphicon-zoom-in"></i>',dragIcon:'<i class="glyphicon glyphicon-menu-hamburger"></i>',indicatorNew:'<i class="glyphicon glyphicon-hand-down text-warning"></i>',indicatorSuccess:'<i class="glyphicon glyphicon-ok-sign text-success"></i>',indicatorError:'<i class="glyphicon glyphicon-exclamation-sign text-danger"></i>',indicatorLoading:'<i class="glyphicon glyphicon-hand-up text-muted"></i>'},layoutTemplates:{fileIcon:'<i class="glyphicon glyphicon-file kv-caption-icon"></i>'},previewZoomButtonIcons:{prev:'<i class="glyphicon glyphicon-triangle-left"></i>',next:'<i class="glyphicon glyphicon-triangle-right"></i>',toggleheader:'<i class="glyphicon glyphicon-resize-vertical"></i>',fullscreen:'<i class="glyphicon glyphicon-fullscreen"></i>',borderless:'<i class="glyphicon glyphicon-resize-full"></i>',close:'<i class="glyphicon glyphicon-remove"></i>'},previewFileIcon:'<i class="glyphicon glyphicon-file"></i>',browseIcon:'<i class="glyphicon glyphicon-folder-open"></i>&nbsp;',removeIcon:'<i class="glyphicon glyphicon-trash"></i>',cancelIcon:'<i class="glyphicon glyphicon-ban-circle"></i>',uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',msgValidationErrorIcon:'<i class="glyphicon glyphicon-exclamation-sign"></i> '}})(window.jQuery);(function(e){if(typeof define==="function"&&define.amd)define(["jquery"],e);else if(typeof exports==="object")e(require("jquery"));else e(jQuery)})(function(e,t){if(!("indexOf"in Array.prototype)){Array.prototype.indexOf=function(e,i){if(i===t)i=0;if(i<0)i+=this.length;if(i<0)i=0;for(var n=this.length;i<n;i++){if(i in this&&this[i]===e){return i}}return-1}}function i(){var e,t,i,n,s,r,o,a;t=(new Date).toString();i=((o=t.split("(")[1])!=null?o.slice(0,-1):0)||t.split(" ");if(i instanceof Array){r=[];for(var n=0,s=i.length;n<s;n++){a=i[n];if((e=(o=a.match(/\b[A-Z]+\b/))!==null)?o[0]:0){r.push(e)}}i=r.pop()}return i}function n(){return new Date(Date.UTC.apply(Date,arguments))}var s=function(n,s){var r=this;this.element=e(n);this.container=s.container||"body";this.language=s.language||this.element.data("date-language")||"en";this.language=this.language in o?this.language:this.language.split("-")[0];this.language=this.language in o?this.language:"en";this.isRTL=o[this.language].rtl||false;this.formatType=s.formatType||this.element.data("format-type")||"standard";this.format=a.parseFormat(s.format||this.element.data("date-format")||o[this.language].format||a.getDefaultFormat(this.formatType,"input"),this.formatType);this.isInline=false;this.isVisible=false;this.isInput=this.element.is("input");this.fontAwesome=s.fontAwesome||this.element.data("font-awesome")||false;this.bootcssVer=s.bootcssVer||(this.isInput?this.element.is(".form-control")?3:2:this.bootcssVer=this.element.is(".input-group")?3:2);this.component=this.element.is(".date")?this.bootcssVer===3?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-remove, .input-group-addon .glyphicon-calendar, .input-group-addon .fa-calendar, .input-group-addon .fa-clock-o").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar, .add-on .fa-calendar, .add-on .fa-clock-o").parent():false;this.componentReset=this.element.is(".date")?this.bootcssVer===3?this.element.find(".input-group-addon .glyphicon-remove, .input-group-addon .fa-times").parent():this.element.find(".add-on .icon-remove, .add-on .fa-times").parent():false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0){this.component=false}this.linkField=s.linkField||this.element.data("link-field")||false;this.linkFormat=a.parseFormat(s.linkFormat||this.element.data("link-format")||a.getDefaultFormat(this.formatType,"link"),this.formatType);this.minuteStep=s.minuteStep||this.element.data("minute-step")||5;this.pickerPosition=s.pickerPosition||this.element.data("picker-position")||"bottom-right";this.showMeridian=s.showMeridian||this.element.data("show-meridian")||false;this.initialDate=s.initialDate||new Date;this.zIndex=s.zIndex||this.element.data("z-index")||t;this.title=typeof s.title==="undefined"?false:s.title;this.timezone=s.timezone||i();this.icons={leftArrow:this.fontAwesome?"fa-arrow-left":this.bootcssVer===3?"glyphicon-arrow-left":"icon-arrow-left",rightArrow:this.fontAwesome?"fa-arrow-right":this.bootcssVer===3?"glyphicon-arrow-right":"icon-arrow-right"};this.icontype=this.fontAwesome?"fa":"glyphicon";this._attachEvents();this.clickedOutside=function(t){if(e(t.target).closest(".datetimepicker").length===0){r.hide()}};this.formatViewType="datetime";if("formatViewType"in s){this.formatViewType=s.formatViewType}else if("formatViewType"in this.element.data()){this.formatViewType=this.element.data("formatViewType")}this.minView=0;if("minView"in s){this.minView=s.minView}else if("minView"in this.element.data()){this.minView=this.element.data("min-view")}this.minView=a.convertViewMode(this.minView);this.maxView=a.modes.length-1;if("maxView"in s){this.maxView=s.maxView}else if("maxView"in this.element.data()){this.maxView=this.element.data("max-view")}this.maxView=a.convertViewMode(this.maxView);this.wheelViewModeNavigation=false;if("wheelViewModeNavigation"in s){this.wheelViewModeNavigation=s.wheelViewModeNavigation}else if("wheelViewModeNavigation"in this.element.data()){this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")}this.wheelViewModeNavigationInverseDirection=false;if("wheelViewModeNavigationInverseDirection"in s){this.wheelViewModeNavigationInverseDirection=s.wheelViewModeNavigationInverseDirection}else if("wheelViewModeNavigationInverseDirection"in this.element.data()){this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")}this.wheelViewModeNavigationDelay=100;if("wheelViewModeNavigationDelay"in s){this.wheelViewModeNavigationDelay=s.wheelViewModeNavigationDelay}else if("wheelViewModeNavigationDelay"in this.element.data()){this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")}this.startViewMode=2;if("startView"in s){this.startViewMode=s.startView}else if("startView"in this.element.data()){this.startViewMode=this.element.data("start-view")}this.startViewMode=a.convertViewMode(this.startViewMode);this.viewMode=this.startViewMode;this.viewSelect=this.minView;if("viewSelect"in s){this.viewSelect=s.viewSelect}else if("viewSelect"in this.element.data()){this.viewSelect=this.element.data("view-select")}this.viewSelect=a.convertViewMode(this.viewSelect);this.forceParse=true;if("forceParse"in s){this.forceParse=s.forceParse}else if("dateForceParse"in this.element.data()){this.forceParse=this.element.data("date-force-parse")}var l=this.bootcssVer===3?a.templateV3:a.template;while(l.indexOf("{iconType}")!==-1){l=l.replace("{iconType}",this.icontype)}while(l.indexOf("{leftArrow}")!==-1){l=l.replace("{leftArrow}",this.icons.leftArrow)}while(l.indexOf("{rightArrow}")!==-1){l=l.replace("{rightArrow}",this.icons.rightArrow)}this.picker=e(l).appendTo(this.isInline?this.element:this.container).on({click:e.proxy(this.click,this),mousedown:e.proxy(this.mousedown,this)});if(this.wheelViewModeNavigation){if(e.fn.mousewheel){this.picker.on({mousewheel:e.proxy(this.mousewheel,this)})}else{console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")}}if(this.isInline){this.picker.addClass("datetimepicker-inline")}else{this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu")}if(this.isRTL){this.picker.addClass("datetimepicker-rtl");var h=this.bootcssVer===3?".prev span, .next span":".prev i, .next i";this.picker.find(h).toggleClass(this.icons.leftArrow+" "+this.icons.rightArrow)}e(document).on("mousedown touchend",this.clickedOutside);this.autoclose=false;if("autoclose"in s){this.autoclose=s.autoclose}else if("dateAutoclose"in this.element.data()){this.autoclose=this.element.data("date-autoclose")}this.keyboardNavigation=true;if("keyboardNavigation"in s){this.keyboardNavigation=s.keyboardNavigation}else if("dateKeyboardNavigation"in this.element.data()){this.keyboardNavigation=this.element.data("date-keyboard-navigation")}this.todayBtn=s.todayBtn||this.element.data("date-today-btn")||false;this.clearBtn=s.clearBtn||this.element.data("date-clear-btn")||false;this.todayHighlight=s.todayHighlight||this.element.data("date-today-highlight")||false;this.weekStart=0;if(typeof s.weekStart!=="undefined"){this.weekStart=s.weekStart}else if(typeof this.element.data("date-weekstart")!=="undefined"){this.weekStart=this.element.data("date-weekstart")}else if(typeof o[this.language].weekStart!=="undefined"){this.weekStart=o[this.language].weekStart}this.weekStart=this.weekStart%7;this.weekEnd=(this.weekStart+6)%7;this.onRenderDay=function(e){var t=(s.onRenderDay||function(){return[]})(e);if(typeof t==="string"){t=[t]}var i=["day"];return i.concat(t?t:[])};this.onRenderHour=function(e){var t=(s.onRenderHour||function(){return[]})(e);var i=["hour"];if(typeof t==="string"){t=[t]}return i.concat(t?t:[])};this.onRenderMinute=function(e){var t=(s.onRenderMinute||function(){return[]})(e);var i=["minute"];if(typeof t==="string"){t=[t]}if(e<this.startDate||e>this.endDate){i.push("disabled")}else if(Math.floor(this.date.getUTCMinutes()/this.minuteStep)===Math.floor(e.getUTCMinutes()/this.minuteStep)){i.push("active")}return i.concat(t?t:[])};this.onRenderYear=function(e){var t=(s.onRenderYear||function(){return[]})(e);var i=["year"];if(typeof t==="string"){t=[t]}if(this.date.getUTCFullYear()===e.getUTCFullYear()){i.push("active")}var n=e.getUTCFullYear();var r=this.endDate.getUTCFullYear();if(e<this.startDate||n>r){i.push("disabled")}return i.concat(t?t:[])};this.onRenderMonth=function(e){var t=(s.onRenderMonth||function(){return[]})(e);var i=["month"];if(typeof t==="string"){t=[t]}return i.concat(t?t:[])};this.startDate=new Date(-8639968443048e3);this.endDate=new Date(8639968443048e3);this.datesDisabled=[];this.daysOfWeekDisabled=[];this.setStartDate(s.startDate||this.element.data("date-startdate"));this.setEndDate(s.endDate||this.element.data("date-enddate"));this.setDatesDisabled(s.datesDisabled||this.element.data("date-dates-disabled"));this.setDaysOfWeekDisabled(s.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled"));this.setMinutesDisabled(s.minutesDisabled||this.element.data("date-minute-disabled"));this.setHoursDisabled(s.hoursDisabled||this.element.data("date-hour-disabled"));this.fillDow();this.fillMonths();this.update();this.showMode();if(this.isInline){this.show()}};s.prototype={constructor:s,_events:[],_attachEvents:function(){this._detachEvents();if(this.isInput){this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]}else if(this.component&&this.hasInput){this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]];if(this.componentReset){this._events.push([this.componentReset,{click:e.proxy(this.reset,this)}])}}else if(this.element.is("div")){this.isInline=true}else{this._events=[[this.element,{click:e.proxy(this.show,this)}]]}for(var t=0,i,n;t<this._events.length;t++){i=this._events[t][0];n=this._events[t][1];i.on(n)}},_detachEvents:function(){for(var e=0,t,i;e<this._events.length;e++){t=this._events[e][0];i=this._events[e][1];t.off(i)}this._events=[]},show:function(t){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();if(this.forceParse){this.update()}this.place();e(window).on("resize",e.proxy(this.place,this));if(t){t.stopPropagation();t.preventDefault()}this.isVisible=true;this.element.trigger({type:"show",date:this.date})},hide:function(){if(!this.isVisible)return;if(this.isInline)return;this.picker.hide();e(window).off("resize",this.place);this.viewMode=this.startViewMode;this.showMode();if(!this.isInput){e(document).off("mousedown",this.hide)}if(this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val()))this.setValue();this.isVisible=false;this.element.trigger({type:"hide",date:this.date})},remove:function(){this._detachEvents();e(document).off("mousedown",this.clickedOutside);this.picker.remove();delete this.picker;delete this.element.data().datetimepicker},getDate:function(){var e=this.getUTCDate();if(e===null){return null}return new Date(e.getTime()+e.getTimezoneOffset()*6e4)},getUTCDate:function(){return this.date},getInitialDate:function(){return this.initialDate},setInitialDate:function(e){this.initialDate=e},setDate:function(e){this.setUTCDate(new Date(e.getTime()-e.getTimezoneOffset()*6e4))},setUTCDate:function(e){if(e>=this.startDate&&e<=this.endDate){this.date=e;this.setValue();this.viewDate=this.date;this.fill()}else{this.element.trigger({type:"outOfRange",date:e,startDate:this.startDate,endDate:this.endDate})}},setFormat:function(e){this.format=a.parseFormat(e,this.formatType);var t;if(this.isInput){t=this.element}else if(this.component){t=this.element.find("input")}if(t&&t.val()){this.setValue()}},setValue:function(){var t=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find("input").val(t)}this.element.data("date",t)}else{this.element.val(t)}if(this.linkField){e("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))}},getFormattedDate:function(e){e=e||this.format;return a.formatDate(this.date,e,this.language,this.formatType,this.timezone)},setStartDate:function(e){this.startDate=e||this.startDate;if(this.startDate.valueOf()!==8639968443048e3){this.startDate=a.parseDate(this.startDate,this.format,this.language,this.formatType,this.timezone)}this.update();this.updateNavArrows()},setEndDate:function(e){this.endDate=e||this.endDate;if(this.endDate.valueOf()!==8639968443048e3){this.endDate=a.parseDate(this.endDate,this.format,this.language,this.formatType,this.timezone)}this.update();this.updateNavArrows()},setDatesDisabled:function(t){this.datesDisabled=t||[];if(!e.isArray(this.datesDisabled)){this.datesDisabled=this.datesDisabled.split(/,\s*/)}var i=this;this.datesDisabled=e.map(this.datesDisabled,function(e){return a.parseDate(e,i.format,i.language,i.formatType,i.timezone).toDateString()});this.update();this.updateNavArrows()},setTitle:function(e,t){return this.picker.find(e).find("th:eq(1)").text(this.title===false?t:this.title)},setDaysOfWeekDisabled:function(t){this.daysOfWeekDisabled=t||[];if(!e.isArray(this.daysOfWeekDisabled)){this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)}this.daysOfWeekDisabled=e.map(this.daysOfWeekDisabled,function(e){return parseInt(e,10)});this.update();this.updateNavArrows()},setMinutesDisabled:function(t){this.minutesDisabled=t||[];if(!e.isArray(this.minutesDisabled)){this.minutesDisabled=this.minutesDisabled.split(/,\s*/)}this.minutesDisabled=e.map(this.minutesDisabled,function(e){return parseInt(e,10)});this.update();this.updateNavArrows()},setHoursDisabled:function(t){this.hoursDisabled=t||[];if(!e.isArray(this.hoursDisabled)){this.hoursDisabled=this.hoursDisabled.split(/,\s*/)}this.hoursDisabled=e.map(this.hoursDisabled,function(e){return parseInt(e,10)});this.update();this.updateNavArrows()},place:function(){if(this.isInline)return;if(!this.zIndex){var t=0;e("div").each(function(){var i=parseInt(e(this).css("zIndex"),10);if(i>t){t=i}});this.zIndex=t+10}var i,n,s,r;if(this.container instanceof e){r=this.container.offset()}else{r=e(this.container).offset()}if(this.component){i=this.component.offset();s=i.left;if(this.pickerPosition==="bottom-left"||this.pickerPosition==="top-left"){s+=this.component.outerWidth()-this.picker.outerWidth()}}else{i=this.element.offset();s=i.left;if(this.pickerPosition==="bottom-left"||this.pickerPosition==="top-left"){s+=this.element.outerWidth()-this.picker.outerWidth()}}var o=document.body.clientWidth||window.innerWidth;if(s+220>o){s=o-220}if(this.pickerPosition==="top-left"||this.pickerPosition==="top-right"){n=i.top-this.picker.outerHeight()}else{n=i.top+this.height}n=n-r.top;s=s-r.left;this.picker.css({top:n,left:s,zIndex:this.zIndex})},hour_minute:"^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]",update:function(){var e,t=false;if(arguments&&arguments.length&&(typeof arguments[0]==="string"||arguments[0]instanceof Date)){e=arguments[0];t=true}else{e=(this.isInput?this.element.val():this.element.find("input").val())||this.element.data("date")||this.initialDate;if(typeof e==="string"){e=e.replace(/^\s+|\s+$/g,"")}}if(!e){e=new Date;t=false}if(typeof e==="string"){if(new RegExp(this.hour_minute).test(e)||new RegExp(this.hour_minute+":[0-5][0-9]").test(e)){e=this.getDate()}}this.date=a.parseDate(e,this.format,this.language,this.formatType,this.timezone);if(t)this.setValue();if(this.date<this.startDate){this.viewDate=new Date(this.startDate)}else if(this.date>this.endDate){this.viewDate=new Date(this.endDate)}else{this.viewDate=new Date(this.date)}this.fill()},fillDow:function(){var e=this.weekStart,t="<tr>";while(e<this.weekStart+7){t+='<th class="dow">'+o[this.language].daysMin[e++%7]+"</th>"}t+="</tr>";this.picker.find(".datetimepicker-days thead").append(t)},fillMonths:function(){var e="";var t=new Date(this.viewDate);for(var i=0;i<12;i++){t.setUTCMonth(i);var n=this.onRenderMonth(t);e+='<span class="'+n.join(" ")+'">'+o[this.language].monthsShort[i]+"</span>"}this.picker.find(".datetimepicker-months td").html(e)},fill:function(){if(!this.date||!this.viewDate){return}var t=new Date(this.viewDate),i=t.getUTCFullYear(),s=t.getUTCMonth(),l=t.getUTCDate(),h=t.getUTCHours(),d=this.startDate.getUTCFullYear(),u=this.startDate.getUTCMonth(),f=this.endDate.getUTCFullYear(),c=this.endDate.getUTCMonth()+1,p=new n(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),m=new Date;this.setTitle(".datetimepicker-days",o[this.language].months[s]+" "+i);if(this.formatViewType==="time"){var v=this.getFormattedDate();this.setTitle(".datetimepicker-hours",v);this.setTitle(".datetimepicker-minutes",v)}else{this.setTitle(".datetimepicker-hours",l+" "+o[this.language].months[s]+" "+i);this.setTitle(".datetimepicker-minutes",l+" "+o[this.language].months[s]+" "+i)}this.picker.find("tfoot th.today").text(o[this.language].today||o["en"].today).toggle(this.todayBtn!==false);this.picker.find("tfoot th.clear").text(o[this.language].clear||o["en"].clear).toggle(this.clearBtn!==false);this.updateNavArrows();this.fillMonths();var g=n(i,s-1,28,0,0,0,0),y=a.getDaysInMonth(g.getUTCFullYear(),g.getUTCMonth());g.setUTCDate(y);g.setUTCDate(y-(g.getUTCDay()-this.weekStart+7)%7);var b=new Date(g);b.setUTCDate(b.getUTCDate()+42);b=b.valueOf();var w=[];var _;while(g.valueOf()<b){if(g.getUTCDay()===this.weekStart){w.push("<tr>")}_=this.onRenderDay(g);if(g.getUTCFullYear()<i||g.getUTCFullYear()===i&&g.getUTCMonth()<s){_.push("old")}else if(g.getUTCFullYear()>i||g.getUTCFullYear()===i&&g.getUTCMonth()>s){_.push("new")}if(this.todayHighlight&&g.getUTCFullYear()===m.getFullYear()&&g.getUTCMonth()===m.getMonth()&&g.getUTCDate()===m.getDate()){_.push("today")}if(g.valueOf()===p){_.push("active")}if(g.valueOf()+864e5<=this.startDate||g.valueOf()>this.endDate||e.inArray(g.getUTCDay(),this.daysOfWeekDisabled)!==-1||e.inArray(g.toDateString(),this.datesDisabled)!==-1){_.push("disabled")}w.push('<td class="'+_.join(" ")+'">'+g.getUTCDate()+"</td>");if(g.getUTCDay()===this.weekEnd){w.push("</tr>")}g.setUTCDate(g.getUTCDate()+1)}this.picker.find(".datetimepicker-days tbody").empty().append(w.join(""));w=[];var x="",k="",C="";var S=this.hoursDisabled||[];t=new Date(this.viewDate);for(var T=0;T<24;T++){t.setUTCHours(T);_=this.onRenderHour(t);if(S.indexOf(T)!==-1){_.push("disabled")}var M=n(i,s,l,T);if(M.valueOf()+36e5<=this.startDate||M.valueOf()>this.endDate){_.push("disabled")}else if(h===T){_.push("active")}if(this.showMeridian&&o[this.language].meridiem.length===2){k=T<12?o[this.language].meridiem[0]:o[this.language].meridiem[1];if(k!==C){if(C!==""){w.push("</fieldset>")}w.push('<fieldset class="hour"><legend>'+k.toUpperCase()+"</legend>")}C=k;x=T%12?T%12:12;if(T<12){_.push("hour_am")}else{_.push("hour_pm")}w.push('<span class="'+_.join(" ")+'">'+x+"</span>");if(T===23){w.push("</fieldset>")}}else{x=T+":00";w.push('<span class="'+_.join(" ")+'">'+x+"</span>")}}this.picker.find(".datetimepicker-hours td").html(w.join(""));w=[];x="";k="";C="";var D=this.minutesDisabled||[];t=new Date(this.viewDate);for(var T=0;T<60;T+=this.minuteStep){if(D.indexOf(T)!==-1)continue;t.setUTCMinutes(T);t.setUTCSeconds(0);_=this.onRenderMinute(t);if(this.showMeridian&&o[this.language].meridiem.length===2){k=h<12?o[this.language].meridiem[0]:o[this.language].meridiem[1];if(k!==C){if(C!==""){w.push("</fieldset>")}w.push('<fieldset class="minute"><legend>'+k.toUpperCase()+"</legend>")}C=k;x=h%12?h%12:12;w.push('<span class="'+_.join(" ")+'">'+x+":"+(T<10?"0"+T:T)+"</span>");if(T===59){w.push("</fieldset>")}}else{x=T+":00";w.push('<span class="'+_.join(" ")+'">'+h+":"+(T<10?"0"+T:T)+"</span>")}}this.picker.find(".datetimepicker-minutes td").html(w.join(""));var E=this.date.getUTCFullYear();var O=this.setTitle(".datetimepicker-months",i).end().find(".month").removeClass("active");if(E===i){O.eq(this.date.getUTCMonth()).addClass("active")}if(i<d||i>f){O.addClass("disabled")}if(i===d){O.slice(0,u).addClass("disabled")}if(i===f){O.slice(c).addClass("disabled")}w="";i=parseInt(i/10,10)*10;var P=this.setTitle(".datetimepicker-years",i+"-"+(i+9)).end().find("td");i-=1;t=new Date(this.viewDate);for(var T=-1;T<11;T++){t.setUTCFullYear(i);_=this.onRenderYear(t);if(T===-1||T===10){_.push(r)}w+='<span class="'+_.join(" ")+'">'+i+"</span>";i+=1}P.html(w);this.place()},updateNavArrows:function(){var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth(),n=e.getUTCDate(),s=e.getUTCHours();switch(this.viewMode){case 0:if(t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()&&s<=this.startDate.getUTCHours()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()&&s>=this.endDate.getUTCHours()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 1:if(t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 2:if(t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 3:case 4:if(t<=this.startDate.getUTCFullYear()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(t>=this.endDate.getUTCFullYear()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break}},mousewheel:function(t){t.preventDefault();t.stopPropagation();if(this.wheelPause){return}this.wheelPause=true;var i=t.originalEvent;var n=i.wheelDelta;var s=n>0?1:n===0?0:-1;if(this.wheelViewModeNavigationInverseDirection){s=-s}this.showMode(s);setTimeout(e.proxy(function(){this.wheelPause=false},this),this.wheelViewModeNavigationDelay)},click:function(t){t.stopPropagation();t.preventDefault();var i=e(t.target).closest("span, td, th, legend");if(i.is("."+this.icontype)){i=e(i).parent().closest("span, td, th, legend")}if(i.length===1){if(i.is(".disabled")){this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});return}switch(i[0].nodeName.toLowerCase()){case"th":switch(i[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var s=a.modes[this.viewMode].navStep*(i[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,s);break;case 1:this.viewDate=this.moveDate(this.viewDate,s);break;case 2:this.viewDate=this.moveMonth(this.viewDate,s);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,s);break}this.fill();this.element.trigger({type:i[0].className+":"+this.convertViewModeText(this.viewMode),date:this.viewDate,startDate:this.startDate,endDate:this.endDate});break;case"clear":this.reset();if(this.autoclose){this.hide()}break;case"today":var r=new Date;r=n(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),0);if(r<this.startDate)r=this.startDate;else if(r>this.endDate)r=this.endDate;this.viewMode=this.startViewMode;this.showMode(0);this._setDate(r);this.fill();if(this.autoclose){this.hide()}break}break;case"span":if(!i.is(".disabled")){var o=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),h=this.viewDate.getUTCDate(),d=this.viewDate.getUTCHours(),u=this.viewDate.getUTCMinutes(),f=this.viewDate.getUTCSeconds();if(i.is(".month")){this.viewDate.setUTCDate(1);l=i.parent().find("span").index(i);h=this.viewDate.getUTCDate();this.viewDate.setUTCMonth(l);this.element.trigger({type:"changeMonth",date:this.viewDate});if(this.viewSelect>=3){this._setDate(n(o,l,h,d,u,f,0))}}else if(i.is(".year")){this.viewDate.setUTCDate(1);o=parseInt(i.text(),10)||0;this.viewDate.setUTCFullYear(o);this.element.trigger({type:"changeYear",date:this.viewDate});if(this.viewSelect>=4){this._setDate(n(o,l,h,d,u,f,0))}}else if(i.is(".hour")){d=parseInt(i.text(),10)||0;if(i.hasClass("hour_am")||i.hasClass("hour_pm")){if(d===12&&i.hasClass("hour_am")){d=0}else if(d!==12&&i.hasClass("hour_pm")){d+=12}}this.viewDate.setUTCHours(d);this.element.trigger({type:"changeHour",date:this.viewDate});if(this.viewSelect>=1){this._setDate(n(o,l,h,d,u,f,0))}}else if(i.is(".minute")){u=parseInt(i.text().substr(i.text().indexOf(":")+1),10)||0;this.viewDate.setUTCMinutes(u);this.element.trigger({type:"changeMinute",date:this.viewDate});if(this.viewSelect>=0){this._setDate(n(o,l,h,d,u,f,0))}}if(this.viewMode!==0){var c=this.viewMode;this.showMode(-1);this.fill();if(c===this.viewMode&&this.autoclose){this.hide()}}else{this.fill();if(this.autoclose){this.hide()}}}break;case"td":if(i.is(".day")&&!i.is(".disabled")){var h=parseInt(i.text(),10)||1;var o=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),d=this.viewDate.getUTCHours(),u=this.viewDate.getUTCMinutes(),f=this.viewDate.getUTCSeconds();if(i.is(".old")){if(l===0){l=11;o-=1}else{l-=1}}else if(i.is(".new")){if(l===11){l=0;o+=1}else{l+=1}}this.viewDate.setUTCFullYear(o);this.viewDate.setUTCMonth(l,h);this.element.trigger({type:"changeDay",date:this.viewDate});if(this.viewSelect>=2){this._setDate(n(o,l,h,d,u,f,0))}}var c=this.viewMode;this.showMode(-1);this.fill();if(c===this.viewMode&&this.autoclose){this.hide()}break}}},_setDate:function(e,t){if(!t||t==="date")this.date=e;if(!t||t==="view")this.viewDate=e;this.fill();this.setValue();var i;if(this.isInput){i=this.element}else if(this.component){i=this.element.find("input")}if(i){i.change()}this.element.trigger({type:"changeDate",date:this.getDate()});if(e===null)this.date=this.viewDate},moveMinute:function(e,t){if(!t)return e;var i=new Date(e.valueOf());i.setUTCMinutes(i.getUTCMinutes()+t*this.minuteStep);return i},moveHour:function(e,t){if(!t)return e;var i=new Date(e.valueOf());i.setUTCHours(i.getUTCHours()+t);return i},moveDate:function(e,t){if(!t)return e;var i=new Date(e.valueOf());i.setUTCDate(i.getUTCDate()+t);return i},moveMonth:function(e,t){if(!t)return e;var i=new Date(e.valueOf()),n=i.getUTCDate(),s=i.getUTCMonth(),r=Math.abs(t),o,a;t=t>0?1:-1;if(r===1){a=t===-1?function(){return i.getUTCMonth()===s}:function(){return i.getUTCMonth()!==o};o=s+t;i.setUTCMonth(o);if(o<0||o>11)o=(o+12)%12}else{for(var l=0;l<r;l++)i=this.moveMonth(i,t);o=i.getUTCMonth();i.setUTCDate(n);a=function(){return o!==i.getUTCMonth()}}while(a()){i.setUTCDate(--n);i.setUTCMonth(o)}return i},moveYear:function(e,t){return this.moveMonth(e,t*12)},dateWithinRange:function(e){return e>=this.startDate&&e<=this.endDate},keydown:function(e){if(this.picker.is(":not(:visible)")){if(e.keyCode===27)this.show();return}var t=false,i,n,s;switch(e.keyCode){case 27:this.hide();e.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;i=e.keyCode===37?-1:1;var r=this.viewMode;if(e.ctrlKey){r+=2}else if(e.shiftKey){r+=1}if(r===4){n=this.moveYear(this.date,i);s=this.moveYear(this.viewDate,i)}else if(r===3){n=this.moveMonth(this.date,i);s=this.moveMonth(this.viewDate,i)}else if(r===2){n=this.moveDate(this.date,i);s=this.moveDate(this.viewDate,i)}else if(r===1){n=this.moveHour(this.date,i);s=this.moveHour(this.viewDate,i)}else if(r===0){n=this.moveMinute(this.date,i);s=this.moveMinute(this.viewDate,i)}if(this.dateWithinRange(n)){this.date=n;this.viewDate=s;this.setValue();this.update();e.preventDefault();t=true}break;case 38:case 40:if(!this.keyboardNavigation)break;i=e.keyCode===38?-1:1;r=this.viewMode;if(e.ctrlKey){r+=2}else if(e.shiftKey){r+=1}if(r===4){n=this.moveYear(this.date,i);s=this.moveYear(this.viewDate,i)}else if(r===3){n=this.moveMonth(this.date,i);s=this.moveMonth(this.viewDate,i)}else if(r===2){n=this.moveDate(this.date,i*7);s=this.moveDate(this.viewDate,i*7)}else if(r===1){if(this.showMeridian){n=this.moveHour(this.date,i*6);s=this.moveHour(this.viewDate,i*6)}else{n=this.moveHour(this.date,i*4);s=this.moveHour(this.viewDate,i*4)}}else if(r===0){n=this.moveMinute(this.date,i*4);s=this.moveMinute(this.viewDate,i*4)}if(this.dateWithinRange(n)){this.date=n;this.viewDate=s;this.setValue();this.update();e.preventDefault();t=true}break;case 13:if(this.viewMode!==0){var o=this.viewMode;this.showMode(-1);this.fill();if(o===this.viewMode&&this.autoclose){this.hide()}}else{this.fill();if(this.autoclose){this.hide()}}e.preventDefault();break;case 9:this.hide();break}if(t){var a;if(this.isInput){a=this.element}else if(this.component){a=this.element.find("input")}if(a){a.change()}this.element.trigger({type:"changeDate",date:this.getDate()})}},showMode:function(e){if(e){var t=Math.max(0,Math.min(a.modes.length-1,this.viewMode+e));if(t>=this.minView&&t<=this.maxView){this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:t});this.viewMode=t}}this.picker.find(">div").hide().filter(".datetimepicker-"+a.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()},reset:function(){this._setDate(null,"date")},convertViewModeText:function(e){switch(e){case 4:return"decade";case 3:
return"year";case 2:return"month";case 1:return"day";case 0:return"hour"}}};var r=e.fn.datetimepicker;e.fn.datetimepicker=function(i){var n=Array.apply(null,arguments);n.shift();var r;this.each(function(){var o=e(this),a=o.data("datetimepicker"),l=typeof i==="object"&&i;if(!a){o.data("datetimepicker",a=new s(this,e.extend({},e.fn.datetimepicker.defaults,l)))}if(typeof i==="string"&&typeof a[i]==="function"){r=a[i].apply(a,n);if(r!==t){return false}}});if(r!==t)return r;else return this};e.fn.datetimepicker.defaults={};e.fn.datetimepicker.Constructor=s;var o=e.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today",clear:"Clear"}};var a={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,a.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},getDefaultFormat:function(e,t){if(e==="standard"){if(t==="input")return"yyyy-mm-dd hh:ii";else return"yyyy-mm-dd hh:ii:ss"}else if(e==="php"){if(t==="input")return"Y-m-d H:i";else return"Y-m-d H:i:s"}else{throw new Error("Invalid format type.")}},validParts:function(e){if(e==="standard"){return/t|hh?|HH?|p|P|z|Z|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g}else if(e==="php"){return/[dDjlNwzFmMnStyYaABgGhHis]/g}else{throw new Error("Invalid format type.")}},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(e,t){var i=e.replace(this.validParts(t),"\0").split("\0"),n=e.match(this.validParts(t));if(!i||!i.length||!n||n.length===0){throw new Error("Invalid date format.")}return{separators:i,parts:n}},parseDate:function(t,i,r,a,l){if(t instanceof Date){var h=new Date(t.valueOf()-t.getTimezoneOffset()*6e4);h.setMilliseconds(0);return h}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(t)){i=this.parseFormat("yyyy-mm-dd",a)}if(/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(t)){i=this.parseFormat("yyyy-mm-dd hh:ii",a)}if(/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(t)){i=this.parseFormat("yyyy-mm-dd hh:ii:ss",a)}if(/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(t)){var d=/([-+]\d+)([dmwy])/,u=t.match(/([-+]\d+)([dmwy])/g),f,c;t=new Date;for(var p=0;p<u.length;p++){f=d.exec(u[p]);c=parseInt(f[1]);switch(f[2]){case"d":t.setUTCDate(t.getUTCDate()+c);break;case"m":t=s.prototype.moveMonth.call(s.prototype,t,c);break;case"w":t.setUTCDate(t.getUTCDate()+c*7);break;case"y":t=s.prototype.moveYear.call(s.prototype,t,c);break}}return n(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),0)}var u=t&&t.toString().match(this.nonpunctuation)||[],t=new Date(0,0,0,0,0,0,0),m={},v=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P","z","Z"],g={hh:function(e,t){return e.setUTCHours(t)},h:function(e,t){return e.setUTCHours(t)},HH:function(e,t){return e.setUTCHours(t===12?0:t)},H:function(e,t){return e.setUTCHours(t===12?0:t)},ii:function(e,t){return e.setUTCMinutes(t)},i:function(e,t){return e.setUTCMinutes(t)},ss:function(e,t){return e.setUTCSeconds(t)},s:function(e,t){return e.setUTCSeconds(t)},yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){t-=1;while(t<0)t+=12;t%=12;e.setUTCMonth(t);while(e.getUTCMonth()!==t)if(isNaN(e.getUTCMonth()))return e;else e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)},p:function(e,t){return e.setUTCHours(t===1?e.getUTCHours()+12:e.getUTCHours())},z:function(){return l}},y,b,f;g["M"]=g["MM"]=g["mm"]=g["m"];g["dd"]=g["d"];g["P"]=g["p"];g["Z"]=g["z"];t=n(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());if(u.length===i.parts.length){for(var p=0,w=i.parts.length;p<w;p++){y=parseInt(u[p],10);f=i.parts[p];if(isNaN(y)){switch(f){case"MM":b=e(o[r].months).filter(function(){var e=this.slice(0,u[p].length),t=u[p].slice(0,e.length);return e===t});y=e.inArray(b[0],o[r].months)+1;break;case"M":b=e(o[r].monthsShort).filter(function(){var e=this.slice(0,u[p].length),t=u[p].slice(0,e.length);return e.toLowerCase()===t.toLowerCase()});y=e.inArray(b[0],o[r].monthsShort)+1;break;case"p":case"P":y=e.inArray(u[p].toLowerCase(),o[r].meridiem);break;case"z":case"Z":l;break}}m[f]=y}for(var p=0,_;p<v.length;p++){_=v[p];if(_ in m&&!isNaN(m[_]))g[_](t,m[_])}}return t},formatDate:function(t,i,n,s,r){if(t===null){return""}var l;if(s==="standard"){l={t:t.getTime(),yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear(),m:t.getUTCMonth()+1,M:o[n].monthsShort[t.getUTCMonth()],MM:o[n].months[t.getUTCMonth()],d:t.getUTCDate(),D:o[n].daysShort[t.getUTCDay()],DD:o[n].days[t.getUTCDay()],p:o[n].meridiem.length===2?o[n].meridiem[t.getUTCHours()<12?0:1]:"",h:t.getUTCHours(),i:t.getUTCMinutes(),s:t.getUTCSeconds(),z:r};if(o[n].meridiem.length===2){l.H=l.h%12===0?12:l.h%12}else{l.H=l.h}l.HH=(l.H<10?"0":"")+l.H;l.P=l.p.toUpperCase();l.Z=l.z;l.hh=(l.h<10?"0":"")+l.h;l.ii=(l.i<10?"0":"")+l.i;l.ss=(l.s<10?"0":"")+l.s;l.dd=(l.d<10?"0":"")+l.d;l.mm=(l.m<10?"0":"")+l.m}else if(s==="php"){l={y:t.getUTCFullYear().toString().substring(2),Y:t.getUTCFullYear(),F:o[n].months[t.getUTCMonth()],M:o[n].monthsShort[t.getUTCMonth()],n:t.getUTCMonth()+1,t:a.getDaysInMonth(t.getUTCFullYear(),t.getUTCMonth()),j:t.getUTCDate(),l:o[n].days[t.getUTCDay()],D:o[n].daysShort[t.getUTCDay()],w:t.getUTCDay(),N:t.getUTCDay()===0?7:t.getUTCDay(),S:t.getUTCDate()%10<=o[n].suffix.length?o[n].suffix[t.getUTCDate()%10-1]:"",a:o[n].meridiem.length===2?o[n].meridiem[t.getUTCHours()<12?0:1]:"",g:t.getUTCHours()%12===0?12:t.getUTCHours()%12,G:t.getUTCHours(),i:t.getUTCMinutes(),s:t.getUTCSeconds()};l.m=(l.n<10?"0":"")+l.n;l.d=(l.j<10?"0":"")+l.j;l.A=l.a.toString().toUpperCase();l.h=(l.g<10?"0":"")+l.g;l.H=(l.G<10?"0":"")+l.G;l.i=(l.i<10?"0":"")+l.i;l.s=(l.s<10?"0":"")+l.s}else{throw new Error("Invalid format type.")}var t=[],h=e.extend([],i.separators);for(var d=0,u=i.parts.length;d<u;d++){if(h.length){t.push(h.shift())}t.push(l[i.parts[d]])}if(h.length){t.push(h.shift())}return t.join("")},convertViewMode:function(e){switch(e){case 4:case"decade":e=4;break;case 3:case"year":e=3;break;case 2:case"month":e=2;break;case 1:case"day":e=1;break;case 0:case"hour":e=0;break}return e},headTemplate:"<thead>"+"<tr>"+'<th class="prev"><i class="{iconType} {leftArrow}"/></th>'+'<th colspan="5" class="switch"></th>'+'<th class="next"><i class="{iconType} {rightArrow}"/></th>'+"</tr>"+"</thead>",headTemplateV3:"<thead>"+"<tr>"+'<th class="prev"><span class="{iconType} {leftArrow}"></span> </th>'+'<th colspan="5" class="switch"></th>'+'<th class="next"><span class="{iconType} {rightArrow}"></span> </th>'+"</tr>"+"</thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:"<tfoot>"+'<tr><th colspan="7" class="today"></th></tr>'+'<tr><th colspan="7" class="clear"></th></tr>'+"</tfoot>"};a.template='<div class="datetimepicker">'+'<div class="datetimepicker-minutes">'+'<table class=" table-condensed">'+a.headTemplate+a.contTemplate+a.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-hours">'+'<table class=" table-condensed">'+a.headTemplate+a.contTemplate+a.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-days">'+'<table class=" table-condensed">'+a.headTemplate+"<tbody></tbody>"+a.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-months">'+'<table class="table-condensed">'+a.headTemplate+a.contTemplate+a.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-years">'+'<table class="table-condensed">'+a.headTemplate+a.contTemplate+a.footTemplate+"</table>"+"</div>"+"</div>";a.templateV3='<div class="datetimepicker">'+'<div class="datetimepicker-minutes">'+'<table class=" table-condensed">'+a.headTemplateV3+a.contTemplate+a.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-hours">'+'<table class=" table-condensed">'+a.headTemplateV3+a.contTemplate+a.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-days">'+'<table class=" table-condensed">'+a.headTemplateV3+"<tbody></tbody>"+a.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-months">'+'<table class="table-condensed">'+a.headTemplateV3+a.contTemplate+a.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-years">'+'<table class="table-condensed">'+a.headTemplateV3+a.contTemplate+a.footTemplate+"</table>"+"</div>"+"</div>";e.fn.datetimepicker.DPGlobal=a;e.fn.datetimepicker.noConflict=function(){e.fn.datetimepicker=r;return this};e(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(t){var i=e(this);if(i.data("datetimepicker"))return;t.preventDefault();i.datetimepicker("show")});e(function(){e('[data-provide="datetimepicker-inline"]').datetimepicker()})});(function(e){"use strict";var t=function(t,i){this.options=e.extend({},e.fn.editableform.defaults,i);this.$div=e(t);if(!this.options.scope){this.options.scope=this}};t.prototype={constructor:t,initInput:function(){this.input=this.options.input;this.value=this.input.str2value(this.options.value);this.input.prerender()},initTemplate:function(){this.$form=e(e.fn.editableform.template)},initButtons:function(){var t=this.$form.find(".editable-buttons");t.append(e.fn.editableform.buttons);if(this.options.showbuttons==="bottom"){t.addClass("editable-buttons-bottom")}},render:function(){this.$loading=e(e.fn.editableform.loading);this.$div.empty().append(this.$loading);this.initTemplate();if(this.options.showbuttons){this.initButtons()}else{this.$form.find(".editable-buttons").remove()}this.showLoading();this.isSaving=false;this.$div.triggerHandler("rendering");this.initInput();this.$form.find("div.editable-input").append(this.input.$tpl);this.$div.append(this.$form);e.when(this.input.render()).then(e.proxy(function(){if(!this.options.showbuttons){this.input.autosubmit()}this.$form.find(".editable-cancel").click(e.proxy(this.cancel,this));if(this.input.error){this.error(this.input.error);this.$form.find(".editable-submit").attr("disabled",true);this.input.$input.attr("disabled",true);this.$form.submit(function(e){e.preventDefault()})}else{this.error(false);this.input.$input.removeAttr("disabled");this.$form.find(".editable-submit").removeAttr("disabled");var t=this.value===null||this.value===undefined||this.value===""?this.options.defaultValue:this.value;this.input.value2input(t);this.$form.submit(e.proxy(this.submit,this))}this.$div.triggerHandler("rendered");this.showForm();if(this.input.postrender){this.input.postrender()}},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var e,t;if(this.$form){e=this.$form.outerWidth();t=this.$form.outerHeight();if(e){this.$loading.width(e)}if(t){this.$loading.height(t)}this.$form.hide()}else{e=this.$loading.parent().width();if(e){this.$loading.width(e)}}this.$loading.show()},showForm:function(e){this.$loading.hide();this.$form.show();if(e!==false){this.input.activate()}this.$div.triggerHandler("show")},error:function(t){var i=this.$form.find(".control-group"),n=this.$form.find(".editable-error-block"),s;if(t===false){i.removeClass(e.fn.editableform.errorGroupClass);n.removeClass(e.fn.editableform.errorBlockClass).empty().hide()}else{if(t){s=(""+t).split("\n");for(var r=0;r<s.length;r++){s[r]=e("<div>").text(s[r]).html()}t=s.join("<br>")}i.addClass(e.fn.editableform.errorGroupClass);n.addClass(e.fn.editableform.errorBlockClass).html(t).show()}},submit:function(t){t.stopPropagation();t.preventDefault();var i=this.input.input2value();var n=this.validate(i);if(e.type(n)==="object"&&n.newValue!==undefined){i=n.newValue;this.input.value2input(i);if(typeof n.msg==="string"){this.error(n.msg);this.showForm();return}}else if(n){this.error(n);this.showForm();return}if(!this.options.savenochange&&this.input.value2str(i)==this.input.value2str(this.value)){this.$div.triggerHandler("nochange");return}var s=this.input.value2submit(i);this.isSaving=true;e.when(this.save(s)).done(e.proxy(function(e){this.isSaving=false;var t=typeof this.options.success==="function"?this.options.success.call(this.options.scope,e,i):null;if(t===false){this.error(false);this.showForm(false);return}if(typeof t==="string"){this.error(t);this.showForm();return}if(t&&typeof t==="object"&&t.hasOwnProperty("newValue")){i=t.newValue}this.error(false);this.value=i;this.$div.triggerHandler("save",{newValue:i,submitValue:s,response:e})},this)).fail(e.proxy(function(e){this.isSaving=false;var t;if(typeof this.options.error==="function"){t=this.options.error.call(this.options.scope,e,i)}else{t=typeof e==="string"?e:e.responseText||e.statusText||"Unknown error!"}this.error(t);this.showForm()},this))},save:function(t){this.options.pk=e.fn.editableutils.tryParseJson(this.options.pk,true);var i=typeof this.options.pk==="function"?this.options.pk.call(this.options.scope):this.options.pk,n=!!(typeof this.options.url==="function"||this.options.url&&(this.options.send==="always"||this.options.send==="auto"&&i!==null&&i!==undefined)),s;if(n){this.showLoading();s={name:this.options.name||"",value:t,pk:i};if(typeof this.options.params==="function"){s=this.options.params.call(this.options.scope,s)}else{this.options.params=e.fn.editableutils.tryParseJson(this.options.params,true);e.extend(s,this.options.params)}if(typeof this.options.url==="function"){return this.options.url.call(this.options.scope,s)}else{return e.ajax(e.extend({url:this.options.url,data:s,type:"POST"},this.options.ajaxOptions))}}},validate:function(e){if(e===undefined){e=this.value}if(typeof this.options.validate==="function"){return this.options.validate.call(this.options.scope,e)}},option:function(e,t){if(e in this.options){this.options[e]=t}if(e==="value"){this.setValue(t)}},setValue:function(e,t){if(t){this.value=this.input.str2value(e)}else{this.value=e}if(this.$form&&this.$form.is(":visible")){this.input.value2input(this.value)}}};e.fn.editableform=function(i){var n=arguments;return this.each(function(){var s=e(this),r=s.data("editableform"),o=typeof i==="object"&&i;if(!r){s.data("editableform",r=new t(this,o))}if(typeof i==="string"){r[i].apply(r,Array.prototype.slice.call(n,1))}})};e.fn.editableform.Constructor=t;e.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:true,scope:null,savenochange:false};e.fn.editableform.template='<form class="form-inline editableform">'+'<div class="control-group">'+'<div><div class="editable-input"></div><div class="editable-buttons"></div></div>'+'<div class="editable-error-block"></div>'+"</div>"+"</form>";e.fn.editableform.loading='<div class="editableform-loading"></div>';e.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button>'+'<button type="button" class="editable-cancel">cancel</button>';e.fn.editableform.errorGroupClass=null;e.fn.editableform.errorBlockClass="editable-error";e.fn.editableform.engine="jquery"})(window.jQuery);(function(e){"use strict";e.fn.editableutils={inherit:function(e,t){var i=function(){};i.prototype=t.prototype;e.prototype=new i;e.prototype.constructor=e;e.superclass=t.prototype},setCursorPosition:function(e,t){if(e.setSelectionRange){e.setSelectionRange(t,t)}else if(e.createTextRange){var i=e.createTextRange();i.collapse(true);i.moveEnd("character",t);i.moveStart("character",t);i.select()}},tryParseJson:function(e,t){if(typeof e==="string"&&e.length&&e.match(/^[\{\[].*[\}\]]$/)){if(t){try{e=new Function("return "+e)()}catch(e){}finally{return e}}else{e=new Function("return "+e)()}}return e},sliceObj:function(t,i,n){var s,r,o={};if(!e.isArray(i)||!i.length){return o}for(var a=0;a<i.length;a++){s=i[a];if(t.hasOwnProperty(s)){o[s]=t[s]}if(n===true){continue}r=s.toLowerCase();if(t.hasOwnProperty(r)){o[s]=t[r]}}return o},getConfigData:function(t){var i={};e.each(t.data(),function(e,t){if(typeof t!=="object"||t&&typeof t==="object"&&(t.constructor===Object||t.constructor===Array)){i[e]=t}});return i},objectKeys:function(e){if(Object.keys){return Object.keys(e)}else{if(e!==Object(e)){throw new TypeError("Object.keys called on a non-object")}var t=[],i;for(i in e){if(Object.prototype.hasOwnProperty.call(e,i)){t.push(i)}}return t}},escape:function(t){return e("<div>").text(t).html()},itemsByValue:function(t,i,n){if(!i||t===null){return[]}if(typeof n!=="function"){var s=n||"value";n=function(e){return e[s]}}var r=e.isArray(t),o=[],a=this;e.each(i,function(i,s){if(s.children){o=o.concat(a.itemsByValue(t,s.children,n))}else{if(r){if(e.grep(t,function(e){return e==(s&&typeof s==="object"?n(s):s)}).length){o.push(s)}}else{var l=s&&typeof s==="object"?n(s):s;if(t==l){o.push(s)}}}});return o},createInput:function(t){var i,n,s,r=t.type;if(r==="date"){if(t.mode==="inline"){if(e.fn.editabletypes.datefield){r="datefield"}else if(e.fn.editabletypes.dateuifield){r="dateuifield"}}else{if(e.fn.editabletypes.date){r="date"}else if(e.fn.editabletypes.dateui){r="dateui"}}if(r==="date"&&!e.fn.editabletypes.date){r="combodate"}}if(r==="datetime"&&t.mode==="inline"){r="datetimefield"}if(r==="wysihtml5"&&!e.fn.editabletypes[r]){r="textarea"}if(typeof e.fn.editabletypes[r]==="function"){i=e.fn.editabletypes[r];n=this.sliceObj(t,this.objectKeys(i.defaults));s=new i(n);return s}else{e.error("Unknown type: "+r);return false}},supportsTransitions:function(){var e=document.body||document.documentElement,t=e.style,i="transition",n=["Moz","Webkit","Khtml","O","ms"];if(typeof t[i]==="string"){return true}i=i.charAt(0).toUpperCase()+i.substr(1);for(var s=0;s<n.length;s++){if(typeof t[n[s]+i]==="string"){return true}}return false}}})(window.jQuery);(function(e){"use strict";var t=function(e,t){this.init(e,t)};var i=function(e,t){this.init(e,t)};t.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(i,n){this.$element=e(i);this.options=e.extend({},e.fn.editableContainer.defaults,n);this.splitOptions();this.formOptions.scope=this.$element[0];this.initContainer();this.delayedHide=false;this.$element.on("destroyed",e.proxy(function(){this.destroy()},this));if(!e(document).data("editable-handlers-attached")){e(document).on("keyup.editable",function(t){if(t.which===27){e(".editable-open").editableContainer("hide")}});e(document).on("click.editable",function(i){var n=e(i.target),s,r=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(!e.contains(document.documentElement,i.target)){return}if(n.is(document)){return}for(s=0;s<r.length;s++){if(n.is(r[s])||n.parents(r[s]).length){return}}t.prototype.closeOthers(i.target)});e(document).data("editable-handlers-attached",true)}},splitOptions:function(){this.containerOptions={};this.formOptions={};if(!e.fn[this.containerName]){throw new Error(this.containerName+" not found. Have you included corresponding js file?")}for(var t in this.options){if(t in this.defaults){this.containerOptions[t]=this.options[t]}else{this.formOptions[t]=this.options[t]}}},tip:function(){return this.container()?this.container().$tip:null},container:function(){var e;if(this.containerDataName){if(e=this.$element.data(this.containerDataName)){return e}}e=this.$element.data(this.containerName);return e},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:e.proxy(this.save,this),nochange:e.proxy(function(){this.hide("nochange")},this),cancel:e.proxy(function(){this.hide("cancel")},this),show:e.proxy(function(){if(this.delayedHide){this.hide(this.delayedHide.reason);this.delayedHide=false}else{this.setPosition()}},this),rendering:e.proxy(this.setPosition,this),resize:e.proxy(this.setPosition,this),rendered:e.proxy(function(){this.$element.triggerHandler("shown",e(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(t){this.$element.addClass("editable-open");if(t!==false){this.closeOthers(this.$element[0])}this.innerShow();this.tip().addClass(this.containerClass);if(this.$form){}this.$form=e("<div>");if(this.tip().is(this.innerCss)){this.tip().append(this.$form)}else{this.tip().find(this.innerCss).append(this.$form)}this.renderForm()},hide:function(e){if(!this.tip()||!this.tip().is(":visible")||!this.$element.hasClass("editable-open")){return}if(this.$form.data("editableform").isSaving){this.delayedHide={reason:e};return}else{this.delayedHide=false}this.$element.removeClass("editable-open");this.innerHide();this.$element.triggerHandler("hidden",e||"manual")},innerShow:function(){},innerHide:function(){},toggle:function(e){if(this.container()&&this.tip()&&this.tip().is(":visible")){this.hide()}else{this.show(e)}},setPosition:function(){},save:function(e,t){this.$element.triggerHandler("save",t);this.hide("save")},option:function(e,t){this.options[e]=t;if(e in this.containerOptions){this.containerOptions[e]=t;this.setContainerOption(e,t)}else{this.formOptions[e]=t;if(this.$form){this.$form.editableform("option",e,t)}}},setContainerOption:function(e,t){this.call("option",e,t)},destroy:function(){this.hide();this.innerDestroy();this.$element.off("destroyed");this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(t){e(".editable-open").each(function(i,n){if(n===t||e(n).find(t).length){return}var s=e(n),r=s.data("editableContainer");if(!r){return}if(r.options.onblur==="cancel"){s.data("editableContainer").hide("onblur")}else if(r.options.onblur==="submit"){s.data("editableContainer").tip().find("form").submit()}})},activate:function(){if(this.tip&&this.tip().is(":visible")&&this.$form){this.$form.data("editableform").input.activate()}}};e.fn.editableContainer=function(n){var s=arguments;return this.each(function(){var r=e(this),o="editableContainer",a=r.data(o),l=typeof n==="object"&&n,h=l.mode==="inline"?i:t;if(!a){r.data(o,a=new h(this,l))}if(typeof n==="string"){a[n].apply(a,Array.prototype.slice.call(s,1))}})};e.fn.editableContainer.Popup=t;e.fn.editableContainer.Inline=i;e.fn.editableContainer.defaults={value:null,placement:"top",autohide:true,onblur:"cancel",anim:false,mode:"popup"};jQuery.event.special.destroyed={remove:function(e){if(e.handler){e.handler()}}}})(window.jQuery);(function(e){"use strict";e.extend(e.fn.editableContainer.Inline.prototype,e.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=e("<span></span>");if(!this.options.anim){this.options.anim=0}},splitOptions:function(){this.containerOptions={};this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide();this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,e.proxy(function(){this.$element.show();this.innerDestroy()},this))},innerDestroy:function(){if(this.tip()){this.tip().empty().remove()}}})})(window.jQuery);(function(e){"use strict";var t=function(t,i){this.$element=e(t);this.options=e.extend({},e.fn.editable.defaults,i,e.fn.editableutils.getConfigData(this.$element));if(this.options.selector){this.initLive()}else{this.init()}if(this.options.highlight&&!e.fn.editableutils.supportsTransitions()){this.options.highlight=false}};t.prototype={constructor:t,init:function(){var t=false,i,n;this.options.name=this.options.name||this.$element.attr("id");this.options.scope=this.$element[0];this.input=e.fn.editableutils.createInput(this.options);if(!this.input){return}if(this.options.value===undefined||this.options.value===null){this.value=this.input.html2value(e.trim(this.$element.html()));t=true}else{this.options.value=e.fn.editableutils.tryParseJson(this.options.value,true);if(typeof this.options.value==="string"){this.value=this.input.str2value(this.options.value)}else{this.value=this.options.value}}this.$element.addClass("editable");if(this.input.type==="textarea"){this.$element.addClass("editable-pre-wrapped")}if(this.options.toggle!=="manual"){this.$element.addClass("editable-click");this.$element.on(this.options.toggle+".editable",e.proxy(function(e){if(!this.options.disabled){e.preventDefault()}if(this.options.toggle==="mouseenter"){this.show()}else{var t=this.options.toggle!=="click";this.toggle(t)}},this))}else{this.$element.attr("tabindex",-1)}if(typeof this.options.display==="function"){this.options.autotext="always"}switch(this.options.autotext){case"always":i=true;break;case"auto":i=!e.trim(this.$element.text()).length&&this.value!==null&&this.value!==undefined&&!t;break;default:i=false}e.when(i?this.render():true).then(e.proxy(function(){if(this.options.disabled){this.disable()}else{this.enable()}this.$element.triggerHandler("init",this)},this))},initLive:function(){var t=this.options.selector;this.options.selector=false;this.options.autotext="never";this.$element.on(this.options.toggle+".editable",t,e.proxy(function(t){var i=e(t.target);if(!i.data("editable")){if(i.hasClass(this.options.emptyclass)){i.empty()}i.editable(this.options).trigger(t)}},this))},render:function(e){if(this.options.display===false){return}if(this.input.value2htmlFinal){return this.input.value2html(this.value,this.$element[0],this.options.display,e)}else if(typeof this.options.display==="function"){return this.options.display.call(this.$element[0],this.value,e)}else{return this.input.value2html(this.value,this.$element[0])}},enable:function(){this.options.disabled=false;this.$element.removeClass("editable-disabled");this.handleEmpty(this.isEmpty);if(this.options.toggle!=="manual"){if(this.$element.attr("tabindex")==="-1"){this.$element.removeAttr("tabindex")}}},disable:function(){this.options.disabled=true;this.hide();this.$element.addClass("editable-disabled");this.handleEmpty(this.isEmpty);this.$element.attr("tabindex",-1)},toggleDisabled:function(){if(this.options.disabled){this.enable()}else{this.disable()}},option:function(t,i){if(t&&typeof t==="object"){e.each(t,e.proxy(function(t,i){this.option(e.trim(t),i)},this));return}this.options[t]=i;if(t==="disabled"){return i?this.disable():this.enable()}if(t==="value"){this.setValue(i)}if(this.container){this.container.option(t,i)}if(this.input.option){this.input.option(t,i)}},handleEmpty:function(t){if(this.options.display===false){return}if(t!==undefined){this.isEmpty=t}else{if(typeof this.input.isEmpty==="function"){this.isEmpty=this.input.isEmpty(this.$element)}else{this.isEmpty=e.trim(this.$element.html())===""}}if(!this.options.disabled){if(this.isEmpty){this.$element.html(this.options.emptytext);if(this.options.emptyclass){this.$element.addClass(this.options.emptyclass)}}else if(this.options.emptyclass){this.$element.removeClass(this.options.emptyclass)}}else{if(this.isEmpty){this.$element.empty();if(this.options.emptyclass){this.$element.removeClass(this.options.emptyclass)}}}},show:function(t){if(this.options.disabled){return}if(!this.container){var i=e.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(i);this.$element.on("save.internal",e.proxy(this.save,this));this.container=this.$element.data("editableContainer")}else if(this.container.tip().is(":visible")){return}this.container.show(t)},hide:function(){if(this.container){this.container.hide()}},toggle:function(e){if(this.container&&this.container.tip().is(":visible")){this.hide()}else{this.show(e)}},save:function(e,t){if(this.options.unsavedclass){var i=false;i=i||typeof this.options.url==="function";i=i||this.options.display===false;i=i||t.response!==undefined;i=i||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(t.newValue);if(i){this.$element.removeClass(this.options.unsavedclass)}else{this.$element.addClass(this.options.unsavedclass)}}if(this.options.highlight){var n=this.$element,s=n.css("background-color");n.css("background-color",this.options.highlight);setTimeout(function(){if(s==="transparent"){s=""}n.css("background-color",s);n.addClass("editable-bg-transition");setTimeout(function(){n.removeClass("editable-bg-transition")},1700)},10)}this.setValue(t.newValue,false,t.response)},validate:function(){if(typeof this.options.validate==="function"){return this.options.validate.call(this,this.value)}},setValue:function(t,i,n){if(i){this.value=this.input.str2value(t)}else{this.value=t}if(this.container){this.container.option("value",this.value)}e.when(this.render(n)).then(e.proxy(function(){this.handleEmpty()},this))},activate:function(){if(this.container){this.container.activate()}},destroy:function(){this.disable();if(this.container){this.container.destroy()}this.input.destroy();if(this.options.toggle!=="manual"){this.$element.removeClass("editable-click");this.$element.off(this.options.toggle+".editable")}this.$element.off("save.internal");this.$element.removeClass("editable editable-open editable-disabled");this.$element.removeData("editable")}};e.fn.editable=function(i){var n={},s=arguments,r="editable";switch(i){case"validate":this.each(function(){var t=e(this),i=t.data(r),s;if(i&&(s=i.validate())){n[i.options.name]=s}});return n;case"getValue":if(arguments.length===2&&arguments[1]===true){n=this.eq(0).data(r).value}else{this.each(function(){var t=e(this),i=t.data(r);if(i&&i.value!==undefined&&i.value!==null){n[i.options.name]=i.input.value2submit(i.value)}})}return n;case"submit":var o=arguments[1]||{},a=this,l=this.editable("validate");if(e.isEmptyObject(l)){var h={};if(a.length===1){var d=a.data("editable");var u={name:d.options.name||"",value:d.input.value2submit(d.value),pk:typeof d.options.pk==="function"?d.options.pk.call(d.options.scope):d.options.pk};if(typeof d.options.params==="function"){u=d.options.params.call(d.options.scope,u)}else{d.options.params=e.fn.editableutils.tryParseJson(d.options.params,true);e.extend(u,d.options.params)}h={url:d.options.url,data:u,type:"POST"};o.success=o.success||d.options.success;o.error=o.error||d.options.error}else{var f=this.editable("getValue");h={url:o.url,data:f,type:"POST"}}h.success=typeof o.success==="function"?function(e){o.success.call(a,e,o)}:e.noop;h.error=typeof o.error==="function"?function(){o.error.apply(a,arguments)}:e.noop;if(o.ajaxOptions){e.extend(h,o.ajaxOptions)}if(o.data){e.extend(h.data,o.data)}e.ajax(h)}else{if(typeof o.error==="function"){o.error.call(a,l)}}return this}return this.each(function(){var n=e(this),o=n.data(r),a=typeof i==="object"&&i;if(a&&a.selector){o=new t(this,a);return}if(!o){n.data(r,o=new t(this,a))}if(typeof i==="string"){o[i].apply(o,Array.prototype.slice.call(s,1))}})};e.fn.editable.defaults={type:"text",disabled:false,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}})(window.jQuery);(function(e){"use strict";e.fn.editabletypes={};var t=function(){};t.prototype={init:function(t,i,n){this.type=t;this.options=e.extend({},n,i)},prerender:function(){this.$tpl=e(this.options.tpl);this.$input=this.$tpl;this.$clear=null;this.error=null},render:function(){},value2html:function(t,i){e(i)[this.options.escape?"text":"html"](e.trim(t))},html2value:function(t){return e("<div>").html(t).text()},value2str:function(e){return e},str2value:function(e){return e},value2submit:function(e){
return e},value2input:function(e){this.$input.val(e)},input2value:function(){return this.$input.val()},activate:function(){if(this.$input.is(":visible")){this.$input.focus()}},clear:function(){this.$input.val(null)},escape:function(t){return e("<div>").text(t).html()},autosubmit:function(){},destroy:function(){},setClass:function(){if(this.options.inputclass){this.$input.addClass(this.options.inputclass)}},setAttr:function(e){if(this.options[e]!==undefined&&this.options[e]!==null){this.$input.attr(e,this.options[e])}},option:function(e,t){this.options[e]=t}};t.defaults={tpl:"",inputclass:null,escape:true,scope:null,showbuttons:true};e.extend(e.fn.editabletypes,{abstractinput:t})})(window.jQuery);(function(e){"use strict";var t=function(e){};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput);e.extend(t.prototype,{render:function(){var t=e.Deferred();this.error=null;this.onSourceReady(function(){this.renderList();t.resolve()},function(){this.error=this.options.sourceError;t.resolve()});return t.promise()},html2value:function(e){return null},value2html:function(t,i,n,s){var r=e.Deferred(),o=function(){if(typeof n==="function"){n.call(i,t,this.sourceData,s)}else{this.value2htmlFinal(t,i)}r.resolve()};if(t===null){o.call(this)}else{this.onSourceReady(o,function(){r.resolve()})}return r.promise()},onSourceReady:function(t,i){var n;if(e.isFunction(this.options.source)){n=this.options.source.call(this.options.scope);this.sourceData=null}else{n=this.options.source}if(this.options.sourceCache&&e.isArray(this.sourceData)){t.call(this);return}try{n=e.fn.editableutils.tryParseJson(n,false)}catch(e){i.call(this);return}if(typeof n==="string"){if(this.options.sourceCache){var s=n,r;if(!e(document).data(s)){e(document).data(s,{})}r=e(document).data(s);if(r.loading===false&&r.sourceData){this.sourceData=r.sourceData;this.doPrepend();t.call(this);return}else if(r.loading===true){r.callbacks.push(e.proxy(function(){this.sourceData=r.sourceData;this.doPrepend();t.call(this)},this));r.err_callbacks.push(e.proxy(i,this));return}else{r.loading=true;r.callbacks=[];r.err_callbacks=[]}}var o=e.extend({url:n,type:"get",cache:false,dataType:"json",success:e.proxy(function(n){if(r){r.loading=false}this.sourceData=this.makeArray(n);if(e.isArray(this.sourceData)){if(r){r.sourceData=this.sourceData;e.each(r.callbacks,function(){this.call()})}this.doPrepend();t.call(this)}else{i.call(this);if(r){e.each(r.err_callbacks,function(){this.call()})}}},this),error:e.proxy(function(){i.call(this);if(r){r.loading=false;e.each(r.err_callbacks,function(){this.call()})}},this)},this.options.sourceOptions);e.ajax(o)}else{this.sourceData=this.makeArray(n);if(e.isArray(this.sourceData)){this.doPrepend();t.call(this)}else{i.call(this)}}},doPrepend:function(){if(this.options.prepend===null||this.options.prepend===undefined){return}if(!e.isArray(this.prependData)){if(e.isFunction(this.options.prepend)){this.options.prepend=this.options.prepend.call(this.options.scope)}this.options.prepend=e.fn.editableutils.tryParseJson(this.options.prepend,true);if(typeof this.options.prepend==="string"){this.options.prepend={"":this.options.prepend}}this.prependData=this.makeArray(this.options.prepend)}if(e.isArray(this.prependData)&&e.isArray(this.sourceData)){this.sourceData=this.prependData.concat(this.sourceData)}},renderList:function(){},value2htmlFinal:function(e,t){},makeArray:function(t){var i,n,s=[],r,o;if(!t||typeof t==="string"){return null}if(e.isArray(t)){o=function(e,t){n={value:e,text:t};if(i++>=2){return false}};for(var a=0;a<t.length;a++){r=t[a];if(typeof r==="object"){i=0;e.each(r,o);if(i===1){s.push(n)}else if(i>1){if(r.children){r.children=this.makeArray(r.children)}s.push(r)}}else{s.push({value:r,text:r})}}}else{e.each(t,function(e,t){s.push({value:e,text:t})})}return s},option:function(e,t){this.options[e]=t;if(e==="source"){this.sourceData=null}if(e==="prepend"){this.prependData=null}}});t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{source:null,prepend:false,sourceError:"Error when loading list",sourceCache:true,sourceOptions:null});e.fn.editabletypes.list=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("text",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput);e.extend(t.prototype,{render:function(){this.renderClear();this.setClass();this.setAttr("placeholder")},activate:function(){if(this.$input.is(":visible")){this.$input.focus();e.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length);if(this.toggleClear){this.toggleClear()}}},renderClear:function(){if(this.options.clear){this.$clear=e('<span class="editable-clear-x"></span>');this.$input.after(this.$clear).css("padding-right",24).keyup(e.proxy(function(t){if(~e.inArray(t.keyCode,[40,38,9,13,27])){return}clearTimeout(this.t);var i=this;this.t=setTimeout(function(){i.toggleClear(t)},100)},this)).parent().css("position","relative");this.$clear.click(e.proxy(this.clear,this))}},postrender:function(){},toggleClear:function(e){if(!this.$clear){return}var t=this.$input.val().length,i=this.$clear.is(":visible");if(t&&!i){this.$clear.show()}if(!t&&i){this.$clear.hide()}},clear:function(){this.$clear.hide();this.$input.val("").focus()}});t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:true});e.fn.editabletypes.text=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("textarea",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput);e.extend(t.prototype,{render:function(){this.setClass();this.setAttr("placeholder");this.setAttr("rows");this.$input.keydown(function(t){if(t.ctrlKey&&t.which===13){e(this).closest("form").submit()}})},activate:function(){e.fn.editabletypes.text.prototype.activate.call(this)}});t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7});e.fn.editabletypes.textarea=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("select",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.list);e.extend(t.prototype,{renderList:function(){this.$input.empty();var t=function(i,n){var s;if(e.isArray(n)){for(var r=0;r<n.length;r++){s={};if(n[r].children){s.label=n[r].text;i.append(t(e("<optgroup>",s),n[r].children))}else{s.value=n[r].value;if(n[r].disabled){s.disabled=true}i.append(e("<option>",s).text(n[r].text))}}}return i};t(this.$input,this.sourceData);this.setClass();this.$input.on("keydown.editable",function(t){if(t.which===13){e(this).closest("form").submit()}})},value2htmlFinal:function(t,i){var n="",s=e.fn.editableutils.itemsByValue(t,this.sourceData);if(s.length){n=s[0].text}e.fn.editabletypes.abstractinput.prototype.value2html.call(this,n,i)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){e(this).closest("form").submit()})}});t.defaults=e.extend({},e.fn.editabletypes.list.defaults,{tpl:"<select></select>"});e.fn.editabletypes.select=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("checklist",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.list);e.extend(t.prototype,{renderList:function(){var t,i;this.$tpl.empty();if(!e.isArray(this.sourceData)){return}for(var n=0;n<this.sourceData.length;n++){t=e("<label>").append(e("<input>",{type:"checkbox",value:this.sourceData[n].value})).append(e("<span>").text(" "+this.sourceData[n].text));e("<div>").append(t).appendTo(this.$tpl)}this.$input=this.$tpl.find('input[type="checkbox"]');this.setClass()},value2str:function(t){return e.isArray(t)?t.sort().join(e.trim(this.options.separator)):""},str2value:function(t){var i,n=null;if(typeof t==="string"&&t.length){i=new RegExp("\\s*"+e.trim(this.options.separator)+"\\s*");n=t.split(i)}else if(e.isArray(t)){n=t}else{n=[t]}return n},value2input:function(t){this.$input.prop("checked",false);if(e.isArray(t)&&t.length){this.$input.each(function(i,n){var s=e(n);e.each(t,function(e,t){if(s.val()==t){s.prop("checked",true)}})})}},input2value:function(){var t=[];this.$input.filter(":checked").each(function(i,n){t.push(e(n).val())});return t},value2htmlFinal:function(t,i){var n=[],s=e.fn.editableutils.itemsByValue(t,this.sourceData),r=this.options.escape;if(s.length){e.each(s,function(t,i){var s=r?e.fn.editableutils.escape(i.text):i.text;n.push(s)});e(i).html(n.join("<br>"))}else{e(i).empty()}},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(t){if(t.which===13){e(this).closest("form").submit()}})}});t.defaults=e.extend({},e.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","});e.fn.editabletypes.checklist=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("password",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.text);e.extend(t.prototype,{value2html:function(t,i){if(t){e(i).text("[hidden]")}else{e(i).empty()}},html2value:function(e){return null}});t.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="password">'});e.fn.editabletypes.password=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("email",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.text);t.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="email">'});e.fn.editabletypes.email=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("url",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.text);t.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="url">'});e.fn.editabletypes.url=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("tel",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.text);t.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'});e.fn.editabletypes.tel=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("number",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.text);e.extend(t.prototype,{render:function(){t.superclass.render.call(this);this.setAttr("min");this.setAttr("max");this.setAttr("step")},postrender:function(){if(this.$clear){this.$clear.css({right:24})}}});t.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null});e.fn.editabletypes.number=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("range",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.number);e.extend(t.prototype,{render:function(){this.$input=this.$tpl.filter("input");this.setClass();this.setAttr("min");this.setAttr("max");this.setAttr("step");this.$input.on("input",function(){e(this).siblings("output").text(e(this).val())})},activate:function(){this.$input.focus()}});t.defaults=e.extend({},e.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"});e.fn.editabletypes.range=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("time",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput);e.extend(t.prototype,{render:function(){this.setClass()}});t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'});e.fn.editabletypes.time=t})(window.jQuery);(function(e){"use strict";var t=function(i){this.init("select2",i,t.defaults);i.select2=i.select2||{};this.sourceData=null;if(i.placeholder){i.select2.placeholder=i.placeholder}if(!i.select2.tags&&i.source){var n=i.source;if(e.isFunction(i.source)){n=i.source.call(i.scope)}if(typeof n==="string"){i.select2.ajax=i.select2.ajax||{};if(!i.select2.ajax.data){i.select2.ajax.data=function(e){return{query:e}}}if(!i.select2.ajax.results){i.select2.ajax.results=function(e){return{results:e}}}i.select2.ajax.url=n}else{this.sourceData=this.convertSource(n);i.select2.data=this.sourceData}}this.options.select2=e.extend({},t.defaults.select2,i.select2);this.isMultiple=this.options.select2.tags||this.options.select2.multiple;this.isRemote="ajax"in this.options.select2;this.idFunc=this.options.select2.id;if(typeof this.idFunc!=="function"){var s=this.idFunc||"id";this.idFunc=function(e){return e[s]}}this.formatSelection=this.options.select2.formatSelection;if(typeof this.formatSelection!=="function"){this.formatSelection=function(e){return e.text}}};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput);e.extend(t.prototype,{render:function(){this.setClass();if(this.isRemote){this.$input.on("select2-loaded",e.proxy(function(e){this.sourceData=e.items.results},this))}if(this.isMultiple){this.$input.on("change",function(){e(this).closest("form").parent().triggerHandler("resize")})}},value2html:function(i,n){var s="",r,o=this;if(this.options.select2.tags){r=i}else if(this.sourceData){r=e.fn.editableutils.itemsByValue(i,this.sourceData,this.idFunc)}else{}if(e.isArray(r)){s=[];e.each(r,function(e,t){s.push(t&&typeof t==="object"?o.formatSelection(t):t)})}else if(r){s=o.formatSelection(r)}s=e.isArray(s)?s.join(this.options.viewseparator):s;t.superclass.value2html.call(this,s,n)},html2value:function(e){return this.options.select2.tags?this.str2value(e,this.options.viewseparator):null},value2input:function(t){if(e.isArray(t)){t=t.join(this.getSeparator())}if(!this.$input.data("select2")){this.$input.val(t);this.$input.select2(this.options.select2)}else{this.$input.val(t).trigger("change",true)}if(this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var i=this.options.select2.id,n=this.options.select2.formatSelection;if(!i&&!n){var s=e(this.options.scope);if(!s.data("editable").isEmpty){var r={id:t,text:s.text()};this.$input.select2("data",r)}}}},input2value:function(){return this.$input.select2("val")},str2value:function(t,i){if(typeof t!=="string"||!this.isMultiple){return t}i=i||this.getSeparator();var n,s,r;if(t===null||t.length<1){return null}n=t.split(i);for(s=0,r=n.length;s<r;s=s+1){n[s]=e.trim(n[s])}return n},autosubmit:function(){this.$input.on("change",function(t,i){if(!i){e(this).closest("form").submit()}})},getSeparator:function(){return this.options.select2.separator||e.fn.select2.defaults.separator},convertSource:function(t){if(e.isArray(t)&&t.length&&t[0].value!==undefined){for(var i=0;i<t.length;i++){if(t[i].value!==undefined){t[i].id=t[i].value;delete t[i].value}}}return t},destroy:function(){if(this.$input.data("select2")){this.$input.select2("destroy")}}});t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "});e.fn.editabletypes.select2=t})(window.jQuery);(function(e){var t=function(t,i){this.$element=e(t);if(!this.$element.is("input")){e.error("Combodate should be applied to INPUT element");return}this.options=e.extend({},e.fn.combodate.defaults,i,this.$element.data());this.init()};t.prototype={constructor:t,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]};this.$widget=e('<span class="combodate"></span>').html(this.getTemplate());this.initCombos();this.$widget.on("change","select",e.proxy(function(t){this.$element.val(this.getValue()).change();if(this.options.smartDays){if(e(t.target).is(".month")||e(t.target).is(".year")){this.fillCombo("day")}}},this));this.$widget.find("select").css("width","auto");this.$element.hide().after(this.$widget);this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var t=this.options.template;e.each(this.map,function(e,i){i=i[0];var n=new RegExp(i+"+"),s=i.length>1?i.substring(1,2):i;t=t.replace(n,"{"+s+"}")});t=t.replace(/ /g,"&nbsp;");e.each(this.map,function(e,i){i=i[0];var n=i.length>1?i.substring(1,2):i;t=t.replace("{"+n+"}",'<select class="'+e+'"></select>')});return t},initCombos:function(){for(var e in this.map){var t=this.$widget.find("."+e);this["$"+e]=t.length?t:null;this.fillCombo(e)}},fillCombo:function(e){var t=this["$"+e];if(!t){return}var i="fill"+e.charAt(0).toUpperCase()+e.slice(1);var n=this[i]();var s=t.val();t.empty();for(var r=0;r<n.length;r++){t.append('<option value="'+n[r][0]+'">'+n[r][1]+"</option>")}t.val(s)},fillCommon:function(e){var t=[],i;if(this.options.firstItem==="name"){i=moment.relativeTime||moment.langData()._relativeTime;var n=typeof i[e]==="function"?i[e](1,true,e,false):i[e];n=n.split(" ").reverse()[0];t.push(["",n])}else if(this.options.firstItem==="empty"){t.push(["",""])}return t},fillDay:function(){var e=this.fillCommon("d"),t,i,n=this.options.template.indexOf("DD")!==-1,s=31;if(this.options.smartDays&&this.$month&&this.$year){var r=parseInt(this.$month.val(),10);var o=parseInt(this.$year.val(),10);if(!isNaN(r)&&!isNaN(o)){s=moment([o,r]).daysInMonth()}}for(i=1;i<=s;i++){t=n?this.leadZero(i):i;e.push([i,t])}return e},fillMonth:function(){var e=this.fillCommon("M"),t,i,n=this.options.template.indexOf("MMMM")!==-1,s=this.options.template.indexOf("MMM")!==-1,r=this.options.template.indexOf("MM")!==-1;for(i=0;i<=11;i++){if(n){t=moment().date(1).month(i).format("MMMM")}else if(s){t=moment().date(1).month(i).format("MMM")}else if(r){t=this.leadZero(i+1)}else{t=i+1}e.push([i,t])}return e},fillYear:function(){var e=[],t,i,n=this.options.template.indexOf("YYYY")!==-1;for(i=this.options.maxYear;i>=this.options.minYear;i--){t=n?i:(i+"").substring(2);e[this.options.yearDescending?"push":"unshift"]([i,t])}e=this.fillCommon("y").concat(e);return e},fillHour:function(){var e=this.fillCommon("h"),t,i,n=this.options.template.indexOf("h")!==-1,s=this.options.template.indexOf("H")!==-1,r=this.options.template.toLowerCase().indexOf("hh")!==-1,o=n?1:0,a=n?12:23;for(i=o;i<=a;i++){t=r?this.leadZero(i):i;e.push([i,t])}return e},fillMinute:function(){var e=this.fillCommon("m"),t,i,n=this.options.template.indexOf("mm")!==-1;for(i=0;i<=59;i+=this.options.minuteStep){t=n?this.leadZero(i):i;e.push([i,t])}return e},fillSecond:function(){var e=this.fillCommon("s"),t,i,n=this.options.template.indexOf("ss")!==-1;for(i=0;i<=59;i+=this.options.secondStep){t=n?this.leadZero(i):i;e.push([i,t])}return e},fillAmpm:function(){var e=this.options.template.indexOf("a")!==-1,t=this.options.template.indexOf("A")!==-1,i=[["am",e?"am":"AM"],["pm",e?"pm":"PM"]];return i},getValue:function(t){var i,n={},s=this,r=false;e.each(this.map,function(e,t){if(e==="ampm"){return}var i=e==="day"?1:0;n[e]=s["$"+e]?parseInt(s["$"+e].val(),10):i;if(isNaN(n[e])){r=true;return false}});if(r){return""}if(this.$ampm){if(n.hour===12){n.hour=this.$ampm.val()==="am"?0:12}else{n.hour=this.$ampm.val()==="am"?n.hour:n.hour+12}}i=moment([n.year,n.month,n.day,n.hour,n.minute,n.second]);this.highlight(i);t=t===undefined?this.options.format:t;if(t===null){return i.isValid()?i:null}else{return i.isValid()?i.format(t):""}},setValue:function(t){if(!t){return}var i=typeof t==="string"?moment(t,this.options.format):moment(t),n=this,s={};function r(t,i){var n={};t.children("option").each(function(t,s){var r=e(s).attr("value"),o;if(r==="")return;o=Math.abs(r-i);if(typeof n.distance==="undefined"||o<n.distance){n={value:r,distance:o}}});return n.value}if(i.isValid()){e.each(this.map,function(e,t){if(e==="ampm"){return}s[e]=i[t[1]]()});if(this.$ampm){if(s.hour>=12){s.ampm="pm";if(s.hour>12){s.hour-=12}}else{s.ampm="am";if(s.hour===0){s.hour=12}}}e.each(s,function(e,t){if(n["$"+e]){if(e==="minute"&&n.options.minuteStep>1&&n.options.roundTime){t=r(n["$"+e],t)}if(e==="second"&&n.options.secondStep>1&&n.options.roundTime){t=r(n["$"+e],t)}n["$"+e].val(t)}});if(this.options.smartDays){this.fillCombo("day")}this.$element.val(i.format(this.options.format)).change()}},highlight:function(e){if(!e.isValid()){if(this.options.errorClass){this.$widget.addClass(this.options.errorClass)}else{if(!this.borderColor){this.borderColor=this.$widget.find("select").css("border-color")}this.$widget.find("select").css("border-color","red")}}else{if(this.options.errorClass){this.$widget.removeClass(this.options.errorClass)}else{this.$widget.find("select").css("border-color",this.borderColor)}}},leadZero:function(e){return e<=9?"0"+e:e},destroy:function(){this.$widget.remove();this.$element.removeData("combodate").show()}};e.fn.combodate=function(i){var n,s=Array.apply(null,arguments);s.shift();if(i==="getValue"&&this.length&&(n=this.eq(0).data("combodate"))){return n.getValue.apply(n,s)}return this.each(function(){var n=e(this),r=n.data("combodate"),o=typeof i=="object"&&i;if(!r){n.data("combodate",r=new t(this,o))}if(typeof i=="string"&&typeof r[i]=="function"){r[i].apply(r,s)}})};e.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:true,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:true,smartDays:false}})(window.jQuery);(function(e){"use strict";var t=function(i){this.init("combodate",i,t.defaults);if(!this.options.viewformat){this.options.viewformat=this.options.format}i.combodate=e.fn.editableutils.tryParseJson(i.combodate,true);this.options.combodate=e.extend({},t.defaults.combodate,i.combodate,{format:this.options.format,template:this.options.template})};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput);e.extend(t.prototype,{render:function(){this.$input.combodate(this.options.combodate);if(e.fn.editableform.engine==="bs3"){this.$input.siblings().find("select").addClass("form-control")}if(this.options.inputclass){this.$input.siblings().find("select").addClass(this.options.inputclass)}},value2html:function(e,i){var n=e?e.format(this.options.viewformat):"";t.superclass.value2html.call(this,n,i)},html2value:function(e){return e?moment(e,this.options.viewformat):null},value2str:function(e){return e?e.format(this.options.format):""},str2value:function(e){return e?moment(e,this.options.format):null},value2submit:function(e){return this.value2str(e)},value2input:function(e){this.$input.combodate("setValue",e)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}});t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null});e.fn.editabletypes.combodate=t})(window.jQuery);(function(e){"use strict";var t=e.fn.editableform.Constructor.prototype.initInput;e.extend(e.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=e(e.fn.editableform.template);this.$form.find(".control-group").addClass("form-group");this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){t.apply(this);var i=this.input.options.inputclass===null||this.input.options.inputclass===false;var n="input-sm";var s="text,select,textarea,password,email,url,tel,number,range,time,typeaheadjs".split(",");if(~e.inArray(this.input.type,s)){this.input.$input.addClass("form-control");if(i){this.input.options.inputclass=n;this.input.$input.addClass(n)}}var r=this.$form.find(".editable-buttons");var o=i?[n]:this.input.options.inputclass.split(" ");for(var a=0;a<o.length;a++){if(o[a].toLowerCase()==="input-lg"){r.find("button").removeClass("btn-sm").addClass("btn-lg")}}}});e.fn.editableform.buttons='<button type="submit" class="btn btn-primary btn-sm editable-submit">'+'<i class="glyphicon glyphicon-ok"></i>'+"</button>"+'<button type="button" class="btn btn-default btn-sm editable-cancel">'+'<i class="glyphicon glyphicon-remove"></i>'+"</button>";e.fn.editableform.errorGroupClass="has-error";e.fn.editableform.errorBlockClass=null;e.fn.editableform.engine="bs3"})(window.jQuery);(function(e){"use strict";e.extend(e.fn.editableContainer.Popup.prototype,{containerName:"popover",containerDataName:"bs.popover",innerCss:".popover-content",defaults:e.fn.popover.Constructor.DEFAULTS,initContainer:function(){e.extend(this.containerOptions,{trigger:"manual",selector:false,content:" ",template:this.defaults.template});var t;if(this.$element.data("template")){t=this.$element.data("template");this.$element.removeData("template")}this.call(this.containerOptions);if(t){this.$element.data("template",t)}},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(e,t){this.container().options[e]=t},setPosition:function(){(function(){var e=this.tip();var t=typeof this.options.placement=="function"?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement;var i=/\s?auto?\s?/i;var n=i.test(t);if(n){t=t.replace(i,"")||"top"}var s=this.getPosition();var r=e[0].offsetWidth;var o=e[0].offsetHeight;if(n){var a=this.$element.parent();var l=t;var h=document.documentElement.scrollTop||document.body.scrollTop;var d=this.options.container=="body"?window.innerWidth:a.outerWidth();var u=this.options.container=="body"?window.innerHeight:a.outerHeight();var f=this.options.container=="body"?0:a.offset().left;t=t=="bottom"&&s.top+s.height+o-h>u?"top":t=="top"&&s.top-h-o<0?"bottom":t=="right"&&s.right+r>d?"left":t=="left"&&s.left-r<f?"right":t;e.removeClass(l).addClass(t)}var c=this.getCalculatedOffset(t,s,r,o);this.applyPlacement(c,t)}).call(this.container())}})})(window.jQuery);(function(e){function t(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var e=new Date;return t(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())}var n=function(t,i){var n=this;this._process_options(i);this.element=e(t);this.isInline=false;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0)this.component=false;this.picker=e(f.template);this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass("datepicker-inline").appendTo(this.element)}else{this.picker.addClass("datepicker-dropdown dropdown-menu")}if(this.o.rtl){this.picker.addClass("datepicker-rtl");this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")}this.viewMode=this.o.startView;if(this.o.calendarWeeks)this.picker.find("tfoot th.today").attr("colspan",function(e,t){return parseInt(t)+1});this._allow_update=false;this.setStartDate(this.o.startDate);this.setEndDate(this.o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();if(this.isInline){this.show()}};n.prototype={constructor:n,_process_options:function(t){this._o=e.extend({},this._o,t);var i=this.o=e.extend({},this._o);var n=i.language;if(!u[n]){n=n.split("-")[0];if(!u[n])n=h.language}i.language=n;switch(i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode);i.weekStart%=7;i.weekEnd=(i.weekStart+6)%7;var s=f.parseFormat(i.format);if(i.startDate!==-Infinity){i.startDate=f.parseDate(i.startDate,s,i.language)}if(i.endDate!==Infinity){i.endDate=f.parseDate(i.endDate,s,i.language)}i.daysOfWeekDisabled=i.daysOfWeekDisabled||[];if(!e.isArray(i.daysOfWeekDisabled))i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/);i.daysOfWeekDisabled=e.map(i.daysOfWeekDisabled,function(e){return parseInt(e,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var t=0,i,n;t<e.length;t++){i=e[t][0];n=e[t][1];i.on(n)}},_unapplyEvents:function(e){for(var t=0,i,n;t<e.length;t++){i=e[t][0];n=e[t][1];i.off(n)}},_buildEvents:function(){if(this.isInput){this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]}else if(this.component&&this.hasInput){this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]}else if(this.element.is("div")){this.isInline=true}else{this._events=[[this.element,{click:e.proxy(this.show,this)}]]}this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{mousedown:e.proxy(function(e){if(!(this.element.is(e.target)||this.element.find(e.target).size()||this.picker.is(e.target)||this.picker.find(e.target).size())){this.hide()}},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,i){var n=i||this.date,s=new Date(n.getTime()+n.getTimezoneOffset()*6e4);this.element.trigger({type:t,date:s,format:e.proxy(function(e){var t=e||this.o.format;return f.formatDate(n,t,this.o.language)},this)})},show:function(e){if(!this.isInline)this.picker.appendTo("body");this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();this._attachSecondaryEvents();if(e){e.preventDefault()}this._trigger("show")},hide:function(e){if(this.isInline)return;if(!this.picker.is(":visible"))return;this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();if(this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val()))this.setValue();this._trigger("hide")},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date}},getDate:function(){var e=this.getUTCDate();return new Date(e.getTime()+e.getTimezoneOffset()*6e4)},getUTCDate:function(){return this.date},setDate:function(e){this.setUTCDate(new Date(e.getTime()-e.getTimezoneOffset()*6e4))},setUTCDate:function(e){this.date=e;this.setValue()},setValue:function(){var e=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find("input").val(e)}}else{this.element.val(e)}},getFormattedDate:function(e){if(e===undefined)e=this.o.format;return f.formatDate(this.date,e,this.o.language)},setStartDate:function(e){this._process_options({startDate:e});this.update();this.updateNavArrows()},setEndDate:function(e){this._process_options({endDate:e});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this._process_options({daysOfWeekDisabled:e});this.update();this.updateNavArrows()},place:function(){if(this.isInline)return;var t=parseInt(this.element.parents().filter(function(){return e(this).css("z-index")!="auto"}).first().css("z-index"))+10;var i=this.component?this.component.parent().offset():this.element.offset();var n=this.component?this.component.outerHeight(true):this.element.outerHeight(true);this.picker.css({top:i.top+n,left:i.left,zIndex:t})},_allow_update:true,update:function(){if(!this._allow_update)return;var e,t=false;if(arguments&&arguments.length&&(typeof arguments[0]==="string"||arguments[0]instanceof Date)){e=arguments[0];t=true}else{e=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();delete this.element.data().date}this.date=f.parseDate(e,this.o.format,this.o.language);if(t)this.setValue();if(this.date<this.o.startDate){this.viewDate=new Date(this.o.startDate)}else if(this.date>this.o.endDate){this.viewDate=new Date(this.o.endDate)}else{this.viewDate=new Date(this.date)}this.fill()},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';t+=i;
this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}while(e<this.o.weekStart+7){t+='<th class="dow">'+u[this.o.language].daysMin[e++%7]+"</th>"}t+="</tr>";this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){var e="",t=0;while(t<12){e+='<span class="month">'+u[this.o.language].monthsShort[t++]+"</span>"}this.picker.find(".datepicker-months td").html(e)},setRange:function(t){if(!t||!t.length)delete this.range;else this.range=e.map(t,function(e){return e.valueOf()});this.fill()},getClassNames:function(t){var i=[],n=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),r=this.date.valueOf(),o=new Date;if(t.getUTCFullYear()<n||t.getUTCFullYear()==n&&t.getUTCMonth()<s){i.push("old")}else if(t.getUTCFullYear()>n||t.getUTCFullYear()==n&&t.getUTCMonth()>s){i.push("new")}if(this.o.todayHighlight&&t.getUTCFullYear()==o.getFullYear()&&t.getUTCMonth()==o.getMonth()&&t.getUTCDate()==o.getDate()){i.push("today")}if(r&&t.valueOf()==r){i.push("active")}if(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1){i.push("disabled")}if(this.range){if(t>this.range[0]&&t<this.range[this.range.length-1]){i.push("range")}if(e.inArray(t.valueOf(),this.range)!=-1){i.push("selected")}}return i},fill:function(){var i=new Date(this.viewDate),n=i.getUTCFullYear(),s=i.getUTCMonth(),r=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,o=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,a=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,l=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,h=this.date&&this.date.valueOf(),d;this.picker.find(".datepicker-days thead th.datepicker-switch").text(u[this.o.language].months[s]+" "+n);this.picker.find("tfoot th.today").text(u[this.o.language].today).toggle(this.o.todayBtn!==false);this.picker.find("tfoot th.clear").text(u[this.o.language].clear).toggle(this.o.clearBtn!==false);this.updateNavArrows();this.fillMonths();var c=t(n,s-1,28,0,0,0,0),p=f.getDaysInMonth(c.getUTCFullYear(),c.getUTCMonth());c.setUTCDate(p);c.setUTCDate(p-(c.getUTCDay()-this.o.weekStart+7)%7);var m=new Date(c);m.setUTCDate(m.getUTCDate()+42);m=m.valueOf();var v=[];var g;while(c.valueOf()<m){if(c.getUTCDay()==this.o.weekStart){v.push("<tr>");if(this.o.calendarWeeks){var y=new Date(+c+(this.o.weekStart-c.getUTCDay()-7)%7*864e5),b=new Date(+y+(7+4-y.getUTCDay())%7*864e5),w=new Date(+(w=t(b.getUTCFullYear(),0,1))+(7+4-w.getUTCDay())%7*864e5),_=(b-w)/864e5/7+1;v.push('<td class="cw">'+_+"</td>")}}g=this.getClassNames(c);g.push("day");var x=this.o.beforeShowDay(c);if(x===undefined)x={};else if(typeof x==="boolean")x={enabled:x};else if(typeof x==="string")x={classes:x};if(x.enabled===false)g.push("disabled");if(x.classes)g=g.concat(x.classes.split(/\s+/));if(x.tooltip)d=x.tooltip;g=e.unique(g);v.push('<td class="'+g.join(" ")+'"'+(d?' title="'+d+'"':"")+">"+c.getUTCDate()+"</td>");if(c.getUTCDay()==this.o.weekEnd){v.push("</tr>")}c.setUTCDate(c.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(v.join(""));var k=this.date&&this.date.getUTCFullYear();var C=this.picker.find(".datepicker-months").find("th:eq(1)").text(n).end().find("span").removeClass("active");if(k&&k==n){C.eq(this.date.getUTCMonth()).addClass("active")}if(n<r||n>a){C.addClass("disabled")}if(n==r){C.slice(0,o).addClass("disabled")}if(n==a){C.slice(l+1).addClass("disabled")}v="";n=parseInt(n/10,10)*10;var S=this.picker.find(".datepicker-years").find("th:eq(1)").text(n+"-"+(n+9)).end().find("td");n-=1;for(var T=-1;T<11;T++){v+='<span class="year'+(T==-1?" old":T==10?" new":"")+(k==n?" active":"")+(n<r||n>a?" disabled":"")+'">'+n+"</span>";n+=1}S.html(v)},updateNavArrows:function(){if(!this._allow_update)return;var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth();switch(this.viewMode){case 0:if(this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 1:case 2:if(this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break}},click:function(i){i.preventDefault();var n=e(i.target).closest("span, td, th");if(n.length==1){switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var s=f.modes[this.viewMode].navStep*(n[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,s);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,s);break}this.fill();break;case"today":var r=new Date;r=t(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0);this.showMode(-2);var o=this.o.todayBtn=="linked"?null:"view";this._setDate(r,o);break;case"clear":var a;if(this.isInput)a=this.element;else if(this.component)a=this.element.find("input");if(a)a.val("").change();this._trigger("changeDate");this.update();if(this.o.autoclose)this.hide();break}break;case"span":if(!n.is(".disabled")){this.viewDate.setUTCDate(1);if(n.is(".month")){var l=1;var h=n.parent().find("span").index(n);var d=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(h);this._trigger("changeMonth",this.viewDate);if(this.o.minViewMode===1){this._setDate(t(d,h,l,0,0,0,0))}}else{var d=parseInt(n.text(),10)||0;var l=1;var h=0;this.viewDate.setUTCFullYear(d);this._trigger("changeYear",this.viewDate);if(this.o.minViewMode===2){this._setDate(t(d,h,l,0,0,0,0))}}this.showMode(-1);this.fill()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){var l=parseInt(n.text(),10)||1;var d=this.viewDate.getUTCFullYear(),h=this.viewDate.getUTCMonth();if(n.is(".old")){if(h===0){h=11;d-=1}else{h-=1}}else if(n.is(".new")){if(h==11){h=0;d+=1}else{h+=1}}this._setDate(t(d,h,l,0,0,0,0))}break}}},_setDate:function(e,t){if(!t||t=="date")this.date=new Date(e);if(!t||t=="view")this.viewDate=new Date(e);this.fill();this.setValue();this._trigger("changeDate");var i;if(this.isInput){i=this.element}else if(this.component){i=this.element.find("input")}if(i){i.change();if(this.o.autoclose&&(!t||t=="date")){this.hide()}}},moveMonth:function(e,t){if(!t)return e;var i=new Date(e.valueOf()),n=i.getUTCDate(),s=i.getUTCMonth(),r=Math.abs(t),o,a;t=t>0?1:-1;if(r==1){a=t==-1?function(){return i.getUTCMonth()==s}:function(){return i.getUTCMonth()!=o};o=s+t;i.setUTCMonth(o);if(o<0||o>11)o=(o+12)%12}else{for(var l=0;l<r;l++)i=this.moveMonth(i,t);o=i.getUTCMonth();i.setUTCDate(n);a=function(){return o!=i.getUTCMonth()}}while(a()){i.setUTCDate(--n);i.setUTCMonth(o)}return i},moveYear:function(e,t){return this.moveMonth(e,t*12)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":not(:visible)")){if(e.keyCode==27)this.show();return}var t=false,i,n,s,r,o;switch(e.keyCode){case 27:this.hide();e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;i=e.keyCode==37?-1:1;if(e.ctrlKey){r=this.moveYear(this.date,i);o=this.moveYear(this.viewDate,i)}else if(e.shiftKey){r=this.moveMonth(this.date,i);o=this.moveMonth(this.viewDate,i)}else{r=new Date(this.date);r.setUTCDate(this.date.getUTCDate()+i);o=new Date(this.viewDate);o.setUTCDate(this.viewDate.getUTCDate()+i)}if(this.dateWithinRange(r)){this.date=r;this.viewDate=o;this.setValue();this.update();e.preventDefault();t=true}break;case 38:case 40:if(!this.o.keyboardNavigation)break;i=e.keyCode==38?-1:1;if(e.ctrlKey){r=this.moveYear(this.date,i);o=this.moveYear(this.viewDate,i)}else if(e.shiftKey){r=this.moveMonth(this.date,i);o=this.moveMonth(this.viewDate,i)}else{r=new Date(this.date);r.setUTCDate(this.date.getUTCDate()+i*7);o=new Date(this.viewDate);o.setUTCDate(this.viewDate.getUTCDate()+i*7)}if(this.dateWithinRange(r)){this.date=r;this.viewDate=o;this.setValue();this.update();e.preventDefault();t=true}break;case 13:this.hide();e.preventDefault();break;case 9:this.hide();break}if(t){this._trigger("changeDate");var a;if(this.isInput){a=this.element}else if(this.component){a=this.element.find("input")}if(a){a.change()}}},showMode:function(e){if(e){this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))}this.picker.find(">div").hide().filter(".datepicker-"+f.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};var s=function(t,i){this.element=e(t);this.inputs=e.map(i.inputs,function(e){return e.jquery?e[0]:e});delete i.inputs;e(this.inputs).datepicker(i).bind("changeDate",e.proxy(this.dateUpdated,this));this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")});this.updateDates()};s.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.date});this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,i){i.setRange(t)})},dateUpdated:function(t){var i=e(t.target).data("datepicker"),n=i.getUTCDate(),s=e.inArray(t.target,this.inputs),r=this.inputs.length;if(s==-1)return;if(n<this.dates[s]){while(s>=0&&n<this.dates[s]){this.pickers[s--].setUTCDate(n)}}else if(n>this.dates[s]){while(s<r&&n>this.dates[s]){this.pickers[s++].setUTCDate(n)}}this.updateDates()},remove:function(){e.map(this.pickers,function(e){e.remove()});delete this.element.data().datepicker}};function r(t,i){var n=e(t).data(),s={},r,o=new RegExp("^"+i.toLowerCase()+"([A-Z])"),i=new RegExp("^"+i.toLowerCase());for(var a in n)if(i.test(a)){r=a.replace(o,function(e,t){return t.toLowerCase()});s[r]=n[a]}return s}function o(t){var i={};if(!u[t]){t=t.split("-")[0];if(!u[t])return}var n=u[t];e.each(d,function(e,t){if(t in n)i[t]=n[t]});return i}var a=e.fn.datepicker;var l=e.fn.datepicker=function(t){var i=Array.apply(null,arguments);i.shift();var a,l;this.each(function(){var l=e(this),d=l.data("datepicker"),u=typeof t=="object"&&t;if(!d){var f=r(this,"date"),c=e.extend({},h,f,u),p=o(c.language),m=e.extend({},h,p,f,u);if(l.is(".input-daterange")||m.inputs){var v={inputs:m.inputs||l.find("input").toArray()};l.data("datepicker",d=new s(this,e.extend(m,v)))}else{l.data("datepicker",d=new n(this,m))}}if(typeof t=="string"&&typeof d[t]=="function"){a=d[t].apply(d,i);if(a!==undefined)return false}});if(a!==undefined)return a;else return this};var h=e.fn.datepicker.defaults={autoclose:false,beforeShowDay:e.noop,calendarWeeks:false,clearBtn:false,daysOfWeekDisabled:[],endDate:Infinity,forceParse:true,format:"mm/dd/yyyy",keyboardNavigation:true,language:"en",minViewMode:0,rtl:false,startDate:-Infinity,startView:0,todayBtn:false,todayHighlight:false,weekStart:0};var d=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=n;var u=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};var f={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,f.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\0").split("\0"),i=e.match(this.validParts);if(!t||!t.length||!i||i.length===0){throw new Error("Invalid date format.")}return{separators:t,parts:i}},parseDate:function(i,s,r){if(i instanceof Date)return i;if(typeof s==="string")s=f.parseFormat(s);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){var o=/([\-+]\d+)([dmwy])/,a=i.match(/([\-+]\d+)([dmwy])/g),l,h;i=new Date;for(var d=0;d<a.length;d++){l=o.exec(a[d]);h=parseInt(l[1]);switch(l[2]){case"d":i.setUTCDate(i.getUTCDate()+h);break;case"m":i=n.prototype.moveMonth.call(n.prototype,i,h);break;case"w":i.setUTCDate(i.getUTCDate()+h*7);break;case"y":i=n.prototype.moveYear.call(n.prototype,i,h);break}}return t(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}var a=i&&i.match(this.nonpunctuation)||[],i=new Date,c={},p=["yyyy","yy","M","MM","m","mm","d","dd"],m={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){t-=1;while(t<0)t+=12;t%=12;e.setUTCMonth(t);while(e.getUTCMonth()!=t)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}},v,g,l;m["M"]=m["MM"]=m["mm"]=m["m"];m["dd"]=m["d"];i=t(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var y=s.parts.slice();if(a.length!=y.length){y=e(y).filter(function(t,i){return e.inArray(i,p)!==-1}).toArray()}if(a.length==y.length){for(var d=0,b=y.length;d<b;d++){v=parseInt(a[d],10);l=y[d];if(isNaN(v)){switch(l){case"MM":g=e(u[r].months).filter(function(){var e=this.slice(0,a[d].length),t=a[d].slice(0,e.length);return e==t});v=e.inArray(g[0],u[r].months)+1;break;case"M":g=e(u[r].monthsShort).filter(function(){var e=this.slice(0,a[d].length),t=a[d].slice(0,e.length);return e==t});v=e.inArray(g[0],u[r].monthsShort)+1;break}}c[l]=v}for(var d=0,w;d<p.length;d++){w=p[d];if(w in c&&!isNaN(c[w]))m[w](i,c[w])}}return i},formatDate:function(t,i,n){if(typeof i==="string")i=f.parseFormat(i);var s={d:t.getUTCDate(),D:u[n].daysShort[t.getUTCDay()],DD:u[n].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:u[n].monthsShort[t.getUTCMonth()],MM:u[n].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};s.dd=(s.d<10?"0":"")+s.d;s.mm=(s.m<10?"0":"")+s.m;var t=[],r=e.extend([],i.separators);for(var o=0,a=i.parts.length;o<=a;o++){if(r.length)t.push(r.shift());t.push(s[i.parts[o]])}return t.join("")},headTemplate:"<thead>"+"<tr>"+'<th class="prev"><i class="icon-arrow-left"/></th>'+'<th colspan="5" class="datepicker-switch"></th>'+'<th class="next"><i class="icon-arrow-right"/></th>'+"</tr>"+"</thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};f.template='<div class="datepicker">'+'<div class="datepicker-days">'+'<table class=" table-condensed">'+f.headTemplate+"<tbody></tbody>"+f.footTemplate+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+f.headTemplate+f.contTemplate+f.footTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+f.headTemplate+f.contTemplate+f.footTemplate+"</table>"+"</div>"+"</div>";e.fn.datepicker.DPGlobal=f;e.fn.datepicker.noConflict=function(){e.fn.datepicker=a;return this};e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=e(this);if(i.data("datepicker"))return;t.preventDefault();l.call(i,"show")});e(function(){l.call(e('[data-provide="datepicker-inline"]'))})})(window.jQuery);(function(e){"use strict";e.fn.bdatepicker=e.fn.datepicker.noConflict();if(!e.fn.datepicker){e.fn.datepicker=e.fn.bdatepicker}var t=function(e){this.init("date",e,t.defaults);this.initPicker(e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput);e.extend(t.prototype,{initPicker:function(t,i){if(!this.options.viewformat){this.options.viewformat=this.options.format}t.datepicker=e.fn.editableutils.tryParseJson(t.datepicker,true);this.options.datepicker=e.extend({},i.datepicker,t.datepicker,{format:this.options.viewformat});this.options.datepicker.language=this.options.datepicker.language||"en";this.dpg=e.fn.bdatepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker);if(this.options.clear){this.$clear=e('<a href="#"></a>').html(this.options.clear).click(e.proxy(function(e){e.preventDefault();e.stopPropagation();this.clear()},this));this.$tpl.parent().append(e('<div class="editable-clear">').append(this.$clear))}},value2html:function(e,i){var n=e?this.dpg.formatDate(e,this.parsedViewFormat,this.options.datepicker.language):"";t.superclass.value2html.call(this,n,i)},html2value:function(e){return this.parseDate(e,this.parsedViewFormat)},value2str:function(e){return e?this.dpg.formatDate(e,this.parsedFormat,this.options.datepicker.language):""},str2value:function(e){return this.parseDate(e,this.parsedFormat)},value2submit:function(e){return this.value2str(e)},value2input:function(e){this.$input.bdatepicker("update",e)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null;this.$input.find(".active").removeClass("active");if(!this.options.showbuttons){this.$input.closest("form").submit()}},autosubmit:function(){this.$input.on("mouseup",".day",function(t){if(e(t.currentTarget).is(".old")||e(t.currentTarget).is(".new")){return}var i=e(this).closest("form");setTimeout(function(){i.submit()},200)})},parseDate:function(e,t){var i=null,n;if(e){i=this.dpg.parseDate(e,t,this.options.datepicker.language);if(typeof e==="string"){n=this.dpg.formatDate(i,t,this.options.datepicker.language);if(e!==n){i=null}}}return i}});t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:false},clear:"&times; clear"});e.fn.editabletypes.date=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("datefield",e,t.defaults);this.initPicker(e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.date);e.extend(t.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.bdatepicker(this.options.datepicker);this.$input.off("focus keydown");this.$input.keyup(e.proxy(function(){this.$tpl.removeData("date");this.$tpl.bdatepicker("update")},this))},value2input:function(e){this.$input.val(e?this.dpg.formatDate(e,this.parsedViewFormat,this.options.datepicker.language):"");this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){e.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});t.defaults=e.extend({},e.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:true}});e.fn.editabletypes.datefield=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("datetime",e,t.defaults);this.initPicker(e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput);e.extend(t.prototype,{initPicker:function(t,i){if(!this.options.viewformat){this.options.viewformat=this.options.format}t.datetimepicker=e.fn.editableutils.tryParseJson(t.datetimepicker,true);this.options.datetimepicker=e.extend({},i.datetimepicker,t.datetimepicker,{format:this.options.viewformat});this.options.datetimepicker.language=this.options.datetimepicker.language||"en";this.dpg=e.fn.datetimepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker);this.$input.on("changeMode",function(t){var i=e(this).closest("form").parent();setTimeout(function(){i.triggerHandler("resize")},0)});if(this.options.clear){this.$clear=e('<a href="#"></a>').html(this.options.clear).click(e.proxy(function(e){e.preventDefault();e.stopPropagation();this.clear()},this));this.$tpl.parent().append(e('<div class="editable-clear">').append(this.$clear))}},value2html:function(e,i){var n=e?this.dpg.formatDate(this.toUTC(e),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";if(i){t.superclass.value2html.call(this,n,i)}else{return n}},html2value:function(e){var t=this.parseDate(e,this.parsedViewFormat);return t?this.fromUTC(t):null},value2str:function(e){return e?this.dpg.formatDate(this.toUTC(e),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(e){var t=this.parseDate(e,this.parsedFormat);return t?this.fromUTC(t):null},value2submit:function(e){return this.value2str(e)},value2input:function(e){if(e){this.$input.data("datetimepicker").setDate(e)}},input2value:function(){var e=this.$input.data("datetimepicker");return e.date?e.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null;this.$input.find(".active").removeClass("active");if(!this.options.showbuttons){this.$input.closest("form").submit()}},autosubmit:function(){this.$input.on("mouseup",".minute",function(t){var i=e(this).closest("form");setTimeout(function(){i.submit()},200)})},toUTC:function(e){return e?new Date(e.valueOf()-e.getTimezoneOffset()*6e4):e},fromUTC:function(e){return e?new Date(e.valueOf()+e.getTimezoneOffset()*6e4):e},parseDate:function(e,t){var i=null,n;if(e){i=this.dpg.parseDate(e,t,this.options.datetimepicker.language,this.options.formatType);if(typeof e==="string"){n=this.dpg.formatDate(i,t,this.options.datetimepicker.language,this.options.formatType);if(e!==n){i=null}}}return i}});t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:false,autoclose:false},clear:"&times; clear"});e.fn.editabletypes.datetime=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("datetimefield",e,t.defaults);this.initPicker(e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.datetime);e.extend(t.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.datetimepicker(this.options.datetimepicker);this.$input.off("focus keydown");this.$input.keyup(e.proxy(function(){this.$tpl.removeData("date");this.$tpl.datetimepicker("update")},this))},value2input:function(e){this.$input.val(this.value2html(e));this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){e.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});t.defaults=e.extend({},e.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:false,autoclose:true}});e.fn.editabletypes.datetimefield=t})(window.jQuery);(function(e){"use strict";var t=null;var i=function(e){var t=arguments,i=true,n=1;e=e.replace(/%s/g,function(){var e=t[n++];if(typeof e==="undefined"){i=false;return""}return e});return i?e:""};var n=function(t,i,n,s){var r="";e.each(t,function(e,t){if(t[i]===s){r=t[n];return false}return true});return r};var s=function(t,i){var n=-1;e.each(t,function(e,t){if(t.field===i){n=e;return false}return true});return n};var r=function(t){var i,n,s,r=0,o=[];for(i=0;i<t[0].length;i++){r+=t[0][i].colspan||1}for(i=0;i<t.length;i++){o[i]=[];for(n=0;n<r;n++){o[i][n]=false}}for(i=0;i<t.length;i++){for(n=0;n<t[i].length;n++){var a=t[i][n],l=a.rowspan||1,h=a.colspan||1,d=e.inArray(false,o[i]);if(h===1){a.fieldIndex=d;if(typeof a.field==="undefined"){a.field=d}}for(s=0;s<l;s++){o[i+s][d]=true}for(s=0;s<h;s++){o[i][d+s]=true}}}};var o=function(){if(t===null){var i=e("<p/>").addClass("fixed-table-scroll-inner"),n=e("<div/>").addClass("fixed-table-scroll-outer"),s,r;n.append(i);e("body").append(n);s=i[0].offsetWidth;n.css("overflow","scroll");r=i[0].offsetWidth;if(s===r){r=n[0].clientWidth}n.remove();t=s-r}return t};var a=function(t,n,s,r){var o=n;if(typeof n==="string"){var a=n.split(".");if(a.length>1){o=window;e.each(a,function(e,t){o=o[t]})}else{o=window[n]}}if(typeof o==="object"){return o}if(typeof o==="function"){return o.apply(t,s||[])}if(!o&&typeof n==="string"&&i.apply(this,[n].concat(s))){return i.apply(this,[n].concat(s))}return r};var l=function(t,i,n){var s=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(i),o="";if(n){if(s.length!==r.length){return false}}for(var a=0;a<s.length;a++){o=s[a];if(e.inArray(o,r)>-1){if(t[o]!==i[o]){return false}}}return true};var h=function(e){if(typeof e==="string"){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#x60;")}return e};var d=function(e){for(var t in e){var i=t.split(/(?=[A-Z])/).join("-").toLowerCase();if(i!==t){e[i]=e[t];delete e[t]}}return e};var u=function(e,t,i){var n=e;if(typeof t!=="string"||e.hasOwnProperty(t)){return i?h(e[t]):e[t]}var s=t.split(".");for(var r in s){if(s.hasOwnProperty(r)){n=n&&n[s[r]]}}return i?h(n):n};var f=function(){return!!(navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv\:11\./))};var c=function(){if(!Object.keys){Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=i.length;return function(s){if(typeof s!=="object"&&(typeof s!=="function"||s===null)){throw new TypeError("Object.keys called on non-object")}var r=[],o,a;for(o in s){if(e.call(s,o)){r.push(o)}}if(t){for(a=0;a<n;a++){if(e.call(s,i[a])){r.push(i[a])}}}return r}}()}};var p=function(t,i){this.options=i;this.$el=e(t);this.$el_=this.$el.clone();this.timeoutId_=0;this.timeoutFooter_=0;this.init()};p.DEFAULTS={classes:"table table-hover",sortClass:undefined,locale:undefined,height:undefined,undefinedText:"-",sortName:undefined,sortOrder:"asc",sortStable:false,striped:false,columns:[[]],data:[],totalField:"total",dataField:"rows",method:"get",url:undefined,ajax:undefined,cache:true,contentType:"application/json",dataType:"json",ajaxOptions:{},queryParams:function(e){return e},queryParamsType:"limit",responseHandler:function(e){return e},pagination:false,onlyInfoPagination:false,paginationLoop:true,sidePagination:"client",totalRows:0,pageNumber:1,pageSize:10,pageList:[10,25,50,100],paginationHAlign:"right",paginationVAlign:"bottom",paginationDetailHAlign:"left",paginationPreText:"&lsaquo;",paginationNextText:"&rsaquo;",search:false,searchOnEnterKey:false,strictSearch:false,searchAlign:"right",selectItemName:"btSelectItem",showHeader:true,showFooter:false,showColumns:false,showPaginationSwitch:false,showRefresh:false,showToggle:false,buttonsAlign:"right",smartDisplay:true,escape:false,minimumCountColumns:1,idField:undefined,uniqueId:undefined,cardView:false,detailView:false,detailFormatter:function(e,t){return""},trimOnSearch:true,clickToSelect:false,singleSelect:false,toolbar:undefined,toolbarAlign:"left",checkboxHeader:true,sortable:true,silentSort:true,maintainSelected:false,searchTimeOut:500,searchText:"",iconSize:undefined,buttonsClass:"default",iconsPrefix:"glyphicon",icons:{paginationSwitchDown:"glyphicon-collapse-down icon-chevron-down",paginationSwitchUp:"glyphicon-collapse-up icon-chevron-up",refresh:"glyphicon-refresh icon-refresh",toggle:"glyphicon-list-alt icon-list-alt",columns:"glyphicon-th icon-th",detailOpen:"glyphicon-plus icon-plus",detailClose:"glyphicon-minus icon-minus"},customSearch:e.noop,customSort:e.noop,rowStyle:function(e,t){return{}},rowAttributes:function(e,t){return{}},footerStyle:function(e,t){return{}},onAll:function(e,t){return false},onClickCell:function(e,t,i,n){return false},onDblClickCell:function(e,t,i,n){return false},onClickRow:function(e,t){return false},onDblClickRow:function(e,t){return false},onSort:function(e,t){return false},onCheck:function(e){return false},onUncheck:function(e){return false},onCheckAll:function(e){return false},onUncheckAll:function(e){return false},onCheckSome:function(e){return false},onUncheckSome:function(e){return false},onLoadSuccess:function(e){return false},onLoadError:function(e){return false},onColumnSwitch:function(e,t){return false},onPageChange:function(e,t){return false},onSearch:function(e){return false},onToggle:function(e){return false},onPreBody:function(e){return false},onPostBody:function(){return false},onPostHeader:function(){return false},onExpandRow:function(e,t,i){return false},onCollapseRow:function(e,t){return false},onRefreshOptions:function(e){return false},onRefresh:function(e){return false},onResetView:function(){return false}};p.LOCALES={};p.LOCALES["en-US"]=p.LOCALES.en={formatLoadingMessage:function(){return"Loading, please wait..."},formatRecordsPerPage:function(e){return i("%s rows per page",e)},formatShowingRows:function(e,t,n){return i("Showing %s to %s of %s rows",e,t,n)},formatDetailPagination:function(e){return i("Showing %s rows",e)},formatSearch:function(){return"Search"},formatNoMatches:function(){return"No matching records found"},formatPaginationSwitch:function(){return"Hide/Show pagination"},formatRefresh:function(){return"Refresh"},formatToggle:function(){return"Toggle"},formatColumns:function(){return"Columns"},formatAllRows:function(){return"All"}};e.extend(p.DEFAULTS,p.LOCALES["en-US"]);p.COLUMN_DEFAULTS={radio:false,checkbox:false,checkboxEnabled:true,field:undefined,title:undefined,titleTooltip:undefined,class:undefined,align:undefined,halign:undefined,falign:undefined,valign:undefined,width:undefined,sortable:false,order:"asc",visible:true,switchable:true,clickToSelect:true,formatter:undefined,footerFormatter:undefined,events:undefined,sorter:undefined,sortName:undefined,cellStyle:undefined,searchable:true,searchFormatter:true,cardVisible:true,escape:false};p.EVENTS={"all.bs.table":"onAll","click-cell.bs.table":"onClickCell","dbl-click-cell.bs.table":"onDblClickCell","click-row.bs.table":"onClickRow","dbl-click-row.bs.table":"onDblClickRow","sort.bs.table":"onSort","check.bs.table":"onCheck","uncheck.bs.table":"onUncheck","check-all.bs.table":"onCheckAll","uncheck-all.bs.table":"onUncheckAll","check-some.bs.table":"onCheckSome","uncheck-some.bs.table":"onUncheckSome","load-success.bs.table":"onLoadSuccess","load-error.bs.table":"onLoadError","column-switch.bs.table":"onColumnSwitch","page-change.bs.table":"onPageChange","search.bs.table":"onSearch","toggle.bs.table":"onToggle","pre-body.bs.table":"onPreBody","post-body.bs.table":"onPostBody","post-header.bs.table":"onPostHeader","expand-row.bs.table":"onExpandRow","collapse-row.bs.table":"onCollapseRow","refresh-options.bs.table":"onRefreshOptions","reset-view.bs.table":"onResetView","refresh.bs.table":"onRefresh"};p.prototype.init=function(){this.initLocale();this.initContainer();this.initTable();this.initHeader();this.initData();this.initHiddenRows();this.initFooter();this.initToolbar();this.initPagination();this.initBody();this.initSearchText();this.initServer()};p.prototype.initLocale=function(){if(this.options.locale){var t=this.options.locale.split(/-|_/);t[0].toLowerCase();if(t[1])t[1].toUpperCase();if(e.fn.bootstrapTable.locales[this.options.locale]){e.extend(this.options,e.fn.bootstrapTable.locales[this.options.locale]);
}else if(e.fn.bootstrapTable.locales[t.join("-")]){e.extend(this.options,e.fn.bootstrapTable.locales[t.join("-")])}else if(e.fn.bootstrapTable.locales[t[0]]){e.extend(this.options,e.fn.bootstrapTable.locales[t[0]])}}};p.prototype.initContainer=function(){this.$container=e(['<div class="bootstrap-table">','<div class="fixed-table-toolbar"></div>',this.options.paginationVAlign==="top"||this.options.paginationVAlign==="both"?'<div class="fixed-table-pagination" style="clear: both;"></div>':"",'<div class="fixed-table-container">','<div class="fixed-table-header"><table></table></div>','<div class="fixed-table-body">','<div class="fixed-table-loading">',this.options.formatLoadingMessage(),"</div>","</div>",'<div class="fixed-table-footer"><table><tr></tr></table></div>',this.options.paginationVAlign==="bottom"||this.options.paginationVAlign==="both"?'<div class="fixed-table-pagination"></div>':"","</div>","</div>"].join(""));this.$container.insertAfter(this.$el);this.$tableContainer=this.$container.find(".fixed-table-container");this.$tableHeader=this.$container.find(".fixed-table-header");this.$tableBody=this.$container.find(".fixed-table-body");this.$tableLoading=this.$container.find(".fixed-table-loading");this.$tableFooter=this.$container.find(".fixed-table-footer");this.$toolbar=this.$container.find(".fixed-table-toolbar");this.$pagination=this.$container.find(".fixed-table-pagination");this.$tableBody.append(this.$el);this.$container.after('<div class="clearfix"></div>');this.$el.addClass(this.options.classes);if(this.options.striped){this.$el.addClass("table-striped")}if(e.inArray("table-no-bordered",this.options.classes.split(" "))!==-1){this.$tableContainer.addClass("table-no-bordered")}};p.prototype.initTable=function(){var t=this,i=[],n=[];this.$header=this.$el.find(">thead");if(!this.$header.length){this.$header=e("<thead></thead>").appendTo(this.$el)}this.$header.find("tr").each(function(){var t=[];e(this).find("th").each(function(){if(typeof e(this).data("field")!=="undefined"){e(this).data("field",e(this).data("field")+"")}t.push(e.extend({},{title:e(this).html(),class:e(this).attr("class"),titleTooltip:e(this).attr("title"),rowspan:e(this).attr("rowspan")?+e(this).attr("rowspan"):undefined,colspan:e(this).attr("colspan")?+e(this).attr("colspan"):undefined},e(this).data()))});i.push(t)});if(!e.isArray(this.options.columns[0])){this.options.columns=[this.options.columns]}this.options.columns=e.extend(true,[],i,this.options.columns);this.columns=[];r(this.options.columns);e.each(this.options.columns,function(i,n){e.each(n,function(n,s){s=e.extend({},p.COLUMN_DEFAULTS,s);if(typeof s.fieldIndex!=="undefined"){t.columns[s.fieldIndex]=s}t.options.columns[i][n]=s})});if(this.options.data.length){return}var s=[];this.$el.find(">tbody>tr").each(function(i){var r={};r._id=e(this).attr("id");r._class=e(this).attr("class");r._data=d(e(this).data());e(this).find(">td").each(function(n){var o=e(this),a=+o.attr("colspan")||1,l=+o.attr("rowspan")||1,h,u;for(;s[i]&&s[i][n];n++);for(h=n;h<n+a;h++){for(u=i;u<i+l;u++){if(!s[u]){s[u]=[]}s[u][h]=true}}var f=t.columns[n].field;r[f]=e(this).html();r["_"+f+"_id"]=e(this).attr("id");r["_"+f+"_class"]=e(this).attr("class");r["_"+f+"_rowspan"]=e(this).attr("rowspan");r["_"+f+"_colspan"]=e(this).attr("colspan");r["_"+f+"_title"]=e(this).attr("title");r["_"+f+"_data"]=d(e(this).data())});n.push(r)});this.options.data=n;if(n.length)this.fromHtml=true};p.prototype.initHeader=function(){var t=this,n={},s=[];this.header={fields:[],styles:[],classes:[],formatters:[],events:[],sorters:[],sortNames:[],cellStyles:[],searchables:[]};e.each(this.options.columns,function(r,o){s.push("<tr>");if(r===0&&!t.options.cardView&&t.options.detailView){s.push(i('<th class="detail" rowspan="%s"><div class="fht-cell"></div></th>',t.options.columns.length))}e.each(o,function(e,r){var o="",a="",l="",d="",u=i(' class="%s"',r["class"]),f=t.options.sortOrder||r.order,c="px",p=r.width;if(r.width!==undefined&&!t.options.cardView){if(typeof r.width==="string"){if(r.width.indexOf("%")!==-1){c="%"}}}if(r.width&&typeof r.width==="string"){p=r.width.replace("%","").replace("px","")}a=i("text-align: %s; ",r.halign?r.halign:r.align);l=i("text-align: %s; ",r.align);d=i("vertical-align: %s; ",r.valign);d+=i("width: %s; ",(r.checkbox||r.radio)&&!p?"36px":p?p+c:undefined);if(typeof r.fieldIndex!=="undefined"){t.header.fields[r.fieldIndex]=r.field;t.header.styles[r.fieldIndex]=l+d;t.header.classes[r.fieldIndex]=u;t.header.formatters[r.fieldIndex]=r.formatter;t.header.events[r.fieldIndex]=r.events;t.header.sorters[r.fieldIndex]=r.sorter;t.header.sortNames[r.fieldIndex]=r.sortName;t.header.cellStyles[r.fieldIndex]=r.cellStyle;t.header.searchables[r.fieldIndex]=r.searchable;if(!r.visible){return}if(t.options.cardView&&!r.cardVisible){return}n[r.field]=r}s.push("<th"+i(' title="%s"',r.titleTooltip),r.checkbox||r.radio?i(' class="bs-checkbox %s"',r["class"]||""):u,i(' style="%s"',a+d),i(' rowspan="%s"',r.rowspan),i(' colspan="%s"',r.colspan),i(' data-field="%s"',r.field),">");s.push(i('<div class="th-inner %s">',t.options.sortable&&r.sortable?"sortable both":""));o=t.options.escape?h(r.title):r.title;if(r.checkbox){if(!t.options.singleSelect&&t.options.checkboxHeader){o='<input name="btSelectAll" type="checkbox" />'}t.header.stateField=r.field}if(r.radio){o="";t.header.stateField=r.field;t.options.singleSelect=true}s.push(o);s.push("</div>");s.push('<div class="fht-cell"></div>');s.push("</div>");s.push("</th>")});s.push("</tr>")});this.$header.html(s.join(""));this.$header.find("th[data-field]").each(function(t){e(this).data(n[e(this).data("field")])});this.$container.off("click",".th-inner").on("click",".th-inner",function(i){var n=e(this);if(t.options.detailView){if(n.closest(".bootstrap-table")[0]!==t.$container[0])return false}if(t.options.sortable&&n.parent().data().sortable){t.onSort(i)}});this.$header.children().children().off("keypress").on("keypress",function(i){if(t.options.sortable&&e(this).data().sortable){var n=i.keyCode||i.which;if(n==13){t.onSort(i)}}});e(window).off("resize.bootstrap-table");if(!this.options.showHeader||this.options.cardView){this.$header.hide();this.$tableHeader.hide();this.$tableLoading.css("top",0)}else{this.$header.show();this.$tableHeader.show();this.$tableLoading.css("top",this.$header.outerHeight()+1);this.getCaret();e(window).on("resize.bootstrap-table",e.proxy(this.resetWidth,this))}this.$selectAll=this.$header.find('[name="btSelectAll"]');this.$selectAll.off("click").on("click",function(){var i=e(this).prop("checked");t[i?"checkAll":"uncheckAll"]();t.updateSelected()})};p.prototype.initFooter=function(){if(!this.options.showFooter||this.options.cardView){this.$tableFooter.hide()}else{this.$tableFooter.show()}};p.prototype.initData=function(e,t){if(t==="append"){this.data=this.data.concat(e)}else if(t==="prepend"){this.data=[].concat(e).concat(this.data)}else{this.data=e||this.options.data}if(t==="append"){this.options.data=this.options.data.concat(e)}else if(t==="prepend"){this.options.data=[].concat(e).concat(this.options.data)}else{this.options.data=this.data}if(this.options.sidePagination==="server"){return}this.initSort()};p.prototype.initSort=function(){var t=this,n=this.options.sortName,s=this.options.sortOrder==="desc"?-1:1,r=e.inArray(this.options.sortName,this.header.fields),o=0;if(this.options.customSort!==e.noop){this.options.customSort.apply(this,[this.options.sortName,this.options.sortOrder]);return}if(r!==-1){if(this.options.sortStable){e.each(this.data,function(e,t){if(!t.hasOwnProperty("_position"))t._position=e})}this.data.sort(function(i,o){if(t.header.sortNames[r]){n=t.header.sortNames[r]}var l=u(i,n,t.options.escape),h=u(o,n,t.options.escape),d=a(t.header,t.header.sorters[r],[l,h]);if(d!==undefined){return s*d}if(l===undefined||l===null){l=""}if(h===undefined||h===null){h=""}if(t.options.sortStable&&l===h){l=i._position;h=o._position}if(e.isNumeric(l)&&e.isNumeric(h)){l=parseFloat(l);h=parseFloat(h);if(l<h){return s*-1}return s}if(l===h){return 0}if(typeof l!=="string"){l=l.toString()}if(l.localeCompare(h)===-1){return s*-1}return s});if(this.options.sortClass!==undefined){clearTimeout(o);o=setTimeout(function(){t.$el.removeClass(t.options.sortClass);var e=t.$header.find(i('[data-field="%s"]',t.options.sortName).index()+1);t.$el.find(i("tr td:nth-child(%s)",e)).addClass(t.options.sortClass)},250)}}};p.prototype.onSort=function(t){var i=t.type==="keypress"?e(t.currentTarget):e(t.currentTarget).parent(),n=this.$header.find("th").eq(i.index());this.$header.add(this.$header_).find("span.order").remove();if(this.options.sortName===i.data("field")){this.options.sortOrder=this.options.sortOrder==="asc"?"desc":"asc"}else{this.options.sortName=i.data("field");this.options.sortOrder=i.data("order")==="asc"?"desc":"asc"}this.trigger("sort",this.options.sortName,this.options.sortOrder);i.add(n).data("order",this.options.sortOrder);this.getCaret();if(this.options.sidePagination==="server"){this.initServer(this.options.silentSort);return}this.initSort();this.initBody()};p.prototype.initToolbar=function(){var t=this,n=[],s=0,r,o,l=0;if(this.$toolbar.find(".bs-bars").children().length){e("body").append(e(this.options.toolbar))}this.$toolbar.html("");if(typeof this.options.toolbar==="string"||typeof this.options.toolbar==="object"){e(i('<div class="bs-bars pull-%s"></div>',this.options.toolbarAlign)).appendTo(this.$toolbar).append(e(this.options.toolbar))}n=[i('<div class="columns columns-%s btn-group pull-%s">',this.options.buttonsAlign,this.options.buttonsAlign)];if(typeof this.options.icons==="string"){this.options.icons=a(null,this.options.icons)}if(this.options.showPaginationSwitch){n.push(i('<button class="btn'+i(" btn-%s",this.options.buttonsClass)+i(" btn-%s",this.options.iconSize)+'" type="button" name="paginationSwitch" aria-label="pagination Switch" title="%s">',this.options.formatPaginationSwitch()),i('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.paginationSwitchDown),"</button>")}if(this.options.showRefresh){n.push(i('<button class="btn'+i(" btn-%s",this.options.buttonsClass)+i(" btn-%s",this.options.iconSize)+'" type="button" name="refresh" aria-label="refresh" title="%s">',this.options.formatRefresh()),i('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.refresh),"</button>")}if(this.options.showToggle){n.push(i('<button class="btn'+i(" btn-%s",this.options.buttonsClass)+i(" btn-%s",this.options.iconSize)+'" type="button" name="toggle" aria-label="toggle" title="%s">',this.options.formatToggle()),i('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.toggle),"</button>")}if(this.options.showColumns){n.push(i('<div class="keep-open btn-group" title="%s">',this.options.formatColumns()),'<button type="button" aria-label="columns" class="btn'+i(" btn-%s",this.options.buttonsClass)+i(" btn-%s",this.options.iconSize)+' dropdown-toggle" data-toggle="dropdown">',i('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.columns),' <span class="caret"></span>',"</button>",'<ul class="dropdown-menu" role="menu">');e.each(this.columns,function(e,s){if(s.radio||s.checkbox){return}if(t.options.cardView&&!s.cardVisible){return}var r=s.visible?' checked="checked"':"";if(s.switchable){n.push(i('<li role="menuitem">'+'<label><input type="checkbox" data-field="%s" value="%s"%s> %s</label>'+"</li>",s.field,e,r,s.title));l++}});n.push("</ul>","</div>")}n.push("</div>");if(this.showToolbar||n.length>2){this.$toolbar.append(n.join(""))}if(this.options.showPaginationSwitch){this.$toolbar.find('button[name="paginationSwitch"]').off("click").on("click",e.proxy(this.togglePagination,this))}if(this.options.showRefresh){this.$toolbar.find('button[name="refresh"]').off("click").on("click",e.proxy(this.refresh,this))}if(this.options.showToggle){this.$toolbar.find('button[name="toggle"]').off("click").on("click",function(){t.toggleView()})}if(this.options.showColumns){r=this.$toolbar.find(".keep-open");if(l<=this.options.minimumCountColumns){r.find("input").prop("disabled",true)}r.find("li").off("click").on("click",function(e){e.stopImmediatePropagation()});r.find("input").off("click").on("click",function(){var i=e(this);t.toggleColumn(e(this).val(),i.prop("checked"),false);t.trigger("column-switch",e(this).data("field"),i.prop("checked"))})}if(this.options.search){n=[];n.push('<div class="pull-'+this.options.searchAlign+' search">',i('<input class="form-control'+i(" input-%s",this.options.iconSize)+'" type="text" placeholder="%s">',this.options.formatSearch()),"</div>");this.$toolbar.append(n.join(""));o=this.$toolbar.find(".search input");o.off("keyup drop blur").on("keyup drop blur",function(i){if(t.options.searchOnEnterKey&&i.keyCode!==13){return}if(e.inArray(i.keyCode,[37,38,39,40])>-1){return}clearTimeout(s);s=setTimeout(function(){t.onSearch(i)},t.options.searchTimeOut)});if(f()){o.off("mouseup").on("mouseup",function(e){clearTimeout(s);s=setTimeout(function(){t.onSearch(e)},t.options.searchTimeOut)})}}};p.prototype.onSearch=function(t){var i=e.trim(e(t.currentTarget).val());if(this.options.trimOnSearch&&e(t.currentTarget).val()!==i){e(t.currentTarget).val(i)}if(i===this.searchText){return}this.searchText=i;this.options.searchText=i;this.options.pageNumber=1;this.initSearch();this.updatePagination();this.trigger("search",i)};p.prototype.initSearch=function(){var t=this;if(this.options.sidePagination!=="server"){if(this.options.customSearch!==e.noop){this.options.customSearch.apply(this,[this.searchText]);return}var i=this.searchText&&(this.options.escape?h(this.searchText):this.searchText).toLowerCase();var n=e.isEmptyObject(this.filterColumns)?null:this.filterColumns;this.data=n?e.grep(this.options.data,function(t,i){for(var s in n){if(e.isArray(n[s])&&e.inArray(t[s],n[s])===-1||!e.isArray(n[s])&&t[s]!==n[s]){return false}}return true}):this.options.data;this.data=i?e.grep(this.data,function(n,r){for(var o=0;o<t.header.fields.length;o++){if(!t.header.searchables[o]){continue}var l=e.isNumeric(t.header.fields[o])?parseInt(t.header.fields[o],10):t.header.fields[o];var h=t.columns[s(t.columns,l)];var d;if(typeof l==="string"){d=n;var u=l.split(".");for(var f=0;f<u.length;f++){d=d[u[f]]}if(h&&h.searchFormatter){d=a(h,t.header.formatters[o],[d,n,r],d)}}else{d=n[l]}if(typeof d==="string"||typeof d==="number"){if(t.options.strictSearch){if((d+"").toLowerCase()===i){return true}}else{if((d+"").toLowerCase().indexOf(i)!==-1){return true}}}}return false}):this.data}};p.prototype.initPagination=function(){if(!this.options.pagination){this.$pagination.hide();return}else{this.$pagination.show()}var t=this,n=[],s=false,r,o,a,l,h,d,u,f,c,p=this.getData(),m=this.options.pageList;if(this.options.sidePagination!=="server"){this.options.totalRows=p.length}this.totalPages=0;if(this.options.totalRows){if(this.options.pageSize===this.options.formatAllRows()){this.options.pageSize=this.options.totalRows;s=true}else if(this.options.pageSize===this.options.totalRows){var v=typeof this.options.pageList==="string"?this.options.pageList.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.pageList;if(e.inArray(this.options.formatAllRows().toLowerCase(),v)>-1){s=true}}this.totalPages=~~((this.options.totalRows-1)/this.options.pageSize)+1;this.options.totalPages=this.totalPages}if(this.totalPages>0&&this.options.pageNumber>this.totalPages){this.options.pageNumber=this.totalPages}this.pageFrom=(this.options.pageNumber-1)*this.options.pageSize+1;this.pageTo=this.options.pageNumber*this.options.pageSize;if(this.pageTo>this.options.totalRows){this.pageTo=this.options.totalRows}n.push('<div class="pull-'+this.options.paginationDetailHAlign+' pagination-detail">','<span class="pagination-info">',this.options.onlyInfoPagination?this.options.formatDetailPagination(this.options.totalRows):this.options.formatShowingRows(this.pageFrom,this.pageTo,this.options.totalRows),"</span>");if(!this.options.onlyInfoPagination){n.push('<span class="page-list">');var g=[i('<span class="btn-group %s">',this.options.paginationVAlign==="top"||this.options.paginationVAlign==="both"?"dropdown":"dropup"),'<button type="button" class="btn'+i(" btn-%s",this.options.buttonsClass)+i(" btn-%s",this.options.iconSize)+' dropdown-toggle" data-toggle="dropdown">','<span class="page-size">',s?this.options.formatAllRows():this.options.pageSize,"</span>",' <span class="caret"></span>',"</button>",'<ul class="dropdown-menu" role="menu">'];if(typeof this.options.pageList==="string"){var y=this.options.pageList.replace("[","").replace("]","").replace(/ /g,"").split(",");m=[];e.each(y,function(e,i){m.push(i.toUpperCase()===t.options.formatAllRows().toUpperCase()?t.options.formatAllRows():+i)})}e.each(m,function(e,n){if(!t.options.smartDisplay||e===0||m[e-1]<t.options.totalRows){var r;if(s){r=n===t.options.formatAllRows()?' class="active"':""}else{r=n===t.options.pageSize?' class="active"':""}g.push(i('<li role="menuitem"%s><a href="#">%s</a></li>',r,n))}});g.push("</ul></span>");n.push(this.options.formatRecordsPerPage(g.join("")));n.push("</span>");n.push("</div>",'<div class="pull-'+this.options.paginationHAlign+' pagination">','<ul class="pagination'+i(" pagination-%s",this.options.iconSize)+'">','<li class="page-pre"><a href="#">'+this.options.paginationPreText+"</a></li>");if(this.totalPages<5){o=1;a=this.totalPages}else{o=this.options.pageNumber-2;a=o+4;if(o<1){o=1;a=5}if(a>this.totalPages){a=this.totalPages;o=a-4}}if(this.totalPages>=6){if(this.options.pageNumber>=3){n.push('<li class="page-first'+(1===this.options.pageNumber?" active":"")+'">','<a href="#">',1,"</a>","</li>");o++}if(this.options.pageNumber>=4){if(this.options.pageNumber==4||this.totalPages==6||this.totalPages==7){o--}else{n.push('<li class="page-first-separator disabled">','<a href="#">...</a>',"</li>")}a--}}if(this.totalPages>=7){if(this.options.pageNumber>=this.totalPages-2){o--}}if(this.totalPages==6){if(this.options.pageNumber>=this.totalPages-2){a++}}else if(this.totalPages>=7){if(this.totalPages==7||this.options.pageNumber>=this.totalPages-3){a++}}for(r=o;r<=a;r++){n.push('<li class="page-number'+(r===this.options.pageNumber?" active":"")+'">','<a href="#">',r,"</a>","</li>")}if(this.totalPages>=8){if(this.options.pageNumber<=this.totalPages-4){n.push('<li class="page-last-separator disabled">','<a href="#">...</a>',"</li>")}}if(this.totalPages>=6){if(this.options.pageNumber<=this.totalPages-3){n.push('<li class="page-last'+(this.totalPages===this.options.pageNumber?" active":"")+'">','<a href="#">',this.totalPages,"</a>","</li>")}}n.push('<li class="page-next"><a href="#">'+this.options.paginationNextText+"</a></li>","</ul>","</div>")}this.$pagination.html(n.join(""));if(!this.options.onlyInfoPagination){l=this.$pagination.find(".page-list a");h=this.$pagination.find(".page-first");d=this.$pagination.find(".page-pre");u=this.$pagination.find(".page-next");f=this.$pagination.find(".page-last");c=this.$pagination.find(".page-number");if(this.options.smartDisplay){if(this.totalPages<=1){this.$pagination.find("div.pagination").hide()}if(m.length<2||this.options.totalRows<=m[0]){this.$pagination.find("span.page-list").hide()}this.$pagination[this.getData().length?"show":"hide"]()}if(!this.options.paginationLoop){if(this.options.pageNumber===1){d.addClass("disabled")}if(this.options.pageNumber===this.totalPages){u.addClass("disabled")}}if(s){this.options.pageSize=this.options.formatAllRows()}l.off("click").on("click",e.proxy(this.onPageListChange,this));h.off("click").on("click",e.proxy(this.onPageFirst,this));d.off("click").on("click",e.proxy(this.onPagePre,this));u.off("click").on("click",e.proxy(this.onPageNext,this));f.off("click").on("click",e.proxy(this.onPageLast,this));c.off("click").on("click",e.proxy(this.onPageNumber,this))}};p.prototype.updatePagination=function(t){if(t&&e(t.currentTarget).hasClass("disabled")){return}if(!this.options.maintainSelected){this.resetRows()}this.initPagination();if(this.options.sidePagination==="server"){this.initServer()}else{this.initBody()}this.trigger("page-change",this.options.pageNumber,this.options.pageSize)};p.prototype.onPageListChange=function(t){var i=e(t.currentTarget);i.parent().addClass("active").siblings().removeClass("active");this.options.pageSize=i.text().toUpperCase()===this.options.formatAllRows().toUpperCase()?this.options.formatAllRows():+i.text();this.$toolbar.find(".page-size").text(this.options.pageSize);this.updatePagination(t);return false};p.prototype.onPageFirst=function(e){this.options.pageNumber=1;this.updatePagination(e);return false};p.prototype.onPagePre=function(e){if(this.options.pageNumber-1===0){this.options.pageNumber=this.options.totalPages}else{this.options.pageNumber--}this.updatePagination(e);return false};p.prototype.onPageNext=function(e){if(this.options.pageNumber+1>this.options.totalPages){this.options.pageNumber=1}else{this.options.pageNumber++}this.updatePagination(e);return false};p.prototype.onPageLast=function(e){this.options.pageNumber=this.totalPages;this.updatePagination(e);return false};p.prototype.onPageNumber=function(t){if(this.options.pageNumber===+e(t.currentTarget).text()){return}this.options.pageNumber=+e(t.currentTarget).text();this.updatePagination(t);return false};p.prototype.initRow=function(t,s,r,o){var l=this,d,f=[],c={},p=[],m="",v={},g=[];if(e.inArray(t,this.hiddenRows)>-1){return}c=a(this.options,this.options.rowStyle,[t,s],c);if(c&&c.css){for(d in c.css){p.push(d+": "+c.css[d])}}v=a(this.options,this.options.rowAttributes,[t,s],v);if(v){for(d in v){g.push(i('%s="%s"',d,h(v[d])))}}if(t._data&&!e.isEmptyObject(t._data)){e.each(t._data,function(e,t){if(e==="index"){return}m+=i(' data-%s="%s"',e,t)})}f.push("<tr",i(" %s",g.join(" ")),i(' id="%s"',e.isArray(t)?undefined:t._id),i(' class="%s"',c.classes||(e.isArray(t)?undefined:t._class)),i(' data-index="%s"',s),i(' data-uniqueid="%s"',t[this.options.uniqueId]),i("%s",m),">");if(this.options.cardView){f.push(i('<td colspan="%s"><div class="card-views">',this.header.fields.length))}if(!this.options.cardView&&this.options.detailView){f.push("<td>",'<a class="detail-icon" href="#">',i('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.detailOpen),"</a>","</td>")}e.each(this.header.fields,function(r,o){var d="",m=u(t,o,l.options.escape),v="",g="",y={},b="",w=l.header.classes[r],_="",x="",k="",C="",S=l.columns[r];if(l.fromHtml&&typeof m==="undefined"){return}if(!S.visible){return}if(l.options.cardView&&!S.cardVisible){return}if(S.escape){m=h(m)}c=i('style="%s"',p.concat(l.header.styles[r]).join("; "));if(t["_"+o+"_id"]){b=i(' id="%s"',t["_"+o+"_id"])}if(t["_"+o+"_class"]){w=i(' class="%s"',t["_"+o+"_class"])}if(t["_"+o+"_rowspan"]){x=i(' rowspan="%s"',t["_"+o+"_rowspan"])}if(t["_"+o+"_colspan"]){k=i(' colspan="%s"',t["_"+o+"_colspan"])}if(t["_"+o+"_title"]){C=i(' title="%s"',t["_"+o+"_title"])}y=a(l.header,l.header.cellStyles[r],[m,t,s,o],y);if(y.classes){w=i(' class="%s"',y.classes)}if(y.css){var T=[];for(var M in y.css){T.push(M+": "+y.css[M])}c=i('style="%s"',T.concat(l.header.styles[r]).join("; "))}v=a(S,l.header.formatters[r],[m,t,s],m);if(t["_"+o+"_data"]&&!e.isEmptyObject(t["_"+o+"_data"])){e.each(t["_"+o+"_data"],function(e,t){if(e==="index"){return}_+=i(' data-%s="%s"',e,t)})}if(S.checkbox||S.radio){g=S.checkbox?"checkbox":g;g=S.radio?"radio":g;d=[i(l.options.cardView?'<div class="card-view %s">':'<td class="bs-checkbox %s">',S["class"]||""),"<input"+i(' data-index="%s"',s)+i(' name="%s"',l.options.selectItemName)+i(' type="%s"',g)+i(' value="%s"',t[l.options.idField])+i(' checked="%s"',v===true||(m||v&&v.checked)?"checked":undefined)+i(' disabled="%s"',!S.checkboxEnabled||v&&v.disabled?"disabled":undefined)+" />",l.header.formatters[r]&&typeof v==="string"?v:"",l.options.cardView?"</div>":"</td>"].join("");t[l.header.stateField]=v===true||v&&v.checked}else{v=typeof v==="undefined"||v===null?l.options.undefinedText:v;d=l.options.cardView?['<div class="card-view">',l.options.showHeader?i('<span class="title" %s>%s</span>',c,n(l.columns,"field","title",o)):"",i('<span class="value">%s</span>',v),"</div>"].join(""):[i("<td%s %s %s %s %s %s %s>",b,w,c,_,x,k,C),v,"</td>"].join("");if(l.options.cardView&&l.options.smartDisplay&&v===""){d='<div class="card-view"></div>'}}f.push(d)});if(this.options.cardView){f.push("</div></td>")}f.push("</tr>");return f.join(" ")};p.prototype.initBody=function(t){var n=this,r=[],o=this.getData();this.trigger("pre-body",o);this.$body=this.$el.find(">tbody");if(!this.$body.length){this.$body=e("<tbody></tbody>").appendTo(this.$el)}if(!this.options.pagination||this.options.sidePagination==="server"){this.pageFrom=1;this.pageTo=o.length}var l=e(document.createDocumentFragment());var h;for(var d=this.pageFrom-1;d<this.pageTo;d++){var f=o[d];var c=this.initRow(f,d,o,l);h=h||!!c;if(c&&c!==true){l.append(c)}}if(!h){l.append('<tr class="no-records-found">'+i('<td colspan="%s">%s</td>',this.$header.find("th").length,this.options.formatNoMatches())+"</tr>")}this.$body.html(l);if(!t){this.scrollTo(0)}this.$body.find("> tr[data-index] > td").off("click dblclick").on("click dblclick",function(t){var r=e(this),o=r.parent(),a=n.data[o.data("index")],l=r[0].cellIndex,h=n.getVisibleFields(),d=h[n.options.detailView&&!n.options.cardView?l-1:l],f=n.columns[s(n.columns,d)],c=u(a,d,n.options.escape);if(r.find(".detail-icon").length){return}n.trigger(t.type==="click"?"click-cell":"dbl-click-cell",d,c,a,r);n.trigger(t.type==="click"?"click-row":"dbl-click-row",a,o,d);if(t.type==="click"&&n.options.clickToSelect&&f.clickToSelect){var p=o.find(i('[name="%s"]',n.options.selectItemName));if(p.length){p[0].click()}}});this.$body.find("> tr[data-index] > td > .detail-icon").off("click").on("click",function(){var t=e(this),s=t.parent().parent(),r=s.data("index"),l=o[r];if(s.next().is("tr.detail-view")){t.find("i").attr("class",i("%s %s",n.options.iconsPrefix,n.options.icons.detailOpen));n.trigger("collapse-row",r,l);s.next().remove()}else{t.find("i").attr("class",i("%s %s",n.options.iconsPrefix,n.options.icons.detailClose));s.after(i('<tr class="detail-view"><td colspan="%s"></td></tr>',s.find("td").length));var h=s.next().find("td");var d=a(n.options,n.options.detailFormatter,[r,l,h],"");if(h.length===1){h.append(d)}n.trigger("expand-row",r,l,h)}n.resetView();return false});this.$selectItem=this.$body.find(i('[name="%s"]',this.options.selectItemName));this.$selectItem.off("click").on("click",function(t){t.stopImmediatePropagation();var i=e(this),s=i.prop("checked"),r=n.data[i.data("index")];if(n.options.maintainSelected&&e(this).is(":radio")){e.each(n.options.data,function(e,t){t[n.header.stateField]=false})}r[n.header.stateField]=s;if(n.options.singleSelect){n.$selectItem.not(this).each(function(){n.data[e(this).data("index")][n.header.stateField]=false});n.$selectItem.filter(":checked").not(this).prop("checked",false)}n.updateSelected();n.trigger(s?"check":"uncheck",r,i)});e.each(this.header.events,function(t,i){if(!i){return}if(typeof i==="string"){i=a(null,i)}var s=n.header.fields[t],r=e.inArray(s,n.getVisibleFields());if(n.options.detailView&&!n.options.cardView){r+=1}for(var o in i){n.$body.find(">tr:not(.no-records-found)").each(function(){var t=e(this),a=t.find(n.options.cardView?".card-view":"td").eq(r),l=o.indexOf(" "),h=o.substring(0,l),d=o.substring(l+1),u=i[o];a.find(d).off(h).on(h,function(e){var i=t.data("index"),r=n.data[i],o=r[s];u.apply(this,[e,o,r,i])})})}});this.updateSelected();this.resetView();this.trigger("post-body",o)};p.prototype.initServer=function(t,i,n){var s=this,r={},o={searchText:this.searchText,sortName:this.options.sortName,sortOrder:this.options.sortOrder},l;if(this.options.pagination){o.pageSize=this.options.pageSize===this.options.formatAllRows()?this.options.totalRows:this.options.pageSize;o.pageNumber=this.options.pageNumber}if(!(n||this.options.url)&&!this.options.ajax){return}if(this.options.queryParamsType==="limit"){o={search:o.searchText,sort:o.sortName,order:o.sortOrder};if(this.options.pagination){o.offset=this.options.pageSize===this.options.formatAllRows()?0:this.options.pageSize*(this.options.pageNumber-1);o.limit=this.options.pageSize===this.options.formatAllRows()?this.options.totalRows:this.options.pageSize}}if(!e.isEmptyObject(this.filterColumnsPartial)){o.filter=JSON.stringify(this.filterColumnsPartial,null)}r=a(this.options,this.options.queryParams,[o],r);e.extend(r,i||{});if(r===false){return}if(!t){this.$tableLoading.show()}l=e.extend({},a(null,this.options.ajaxOptions),{type:this.options.method,url:n||this.options.url,data:this.options.contentType==="application/json"&&this.options.method==="post"?JSON.stringify(r):r,cache:this.options.cache,contentType:this.options.contentType,dataType:this.options.dataType,success:function(e){e=a(s.options,s.options.responseHandler,[e],e);s.load(e);s.trigger("load-success",e);if(!t)s.$tableLoading.hide()},error:function(e){s.trigger("load-error",e.status,e);if(!t)s.$tableLoading.hide()}});if(this.options.ajax){a(this,this.options.ajax,[l],null)}else{if(this._xhr&&this._xhr.readyState!==4){this._xhr.abort()}this._xhr=e.ajax(l)}};p.prototype.initSearchText=function(){if(this.options.search){if(this.options.searchText!==""){var e=this.$toolbar.find(".search input");e.val(this.options.searchText);this.onSearch({currentTarget:e})}}};p.prototype.getCaret=function(){var t=this;e.each(this.$header.find("th"),function(i,n){e(n).find(".sortable").removeClass("desc asc").addClass(e(n).data("field")===t.options.sortName?t.options.sortOrder:"both")})};p.prototype.updateSelected=function(){var t=this.$selectItem.filter(":enabled").length&&this.$selectItem.filter(":enabled").length===this.$selectItem.filter(":enabled").filter(":checked").length;this.$selectAll.add(this.$selectAll_).prop("checked",t);this.$selectItem.each(function(){e(this).closest("tr")[e(this).prop("checked")?"addClass":"removeClass"]("selected")})};p.prototype.updateRows=function(){var t=this;this.$selectItem.each(function(){t.data[e(this).data("index")][t.header.stateField]=e(this).prop("checked")})};p.prototype.resetRows=function(){var t=this;e.each(this.data,function(e,i){t.$selectAll.prop("checked",false);t.$selectItem.prop("checked",false);if(t.header.stateField){i[t.header.stateField]=false}});this.initHiddenRows()};p.prototype.trigger=function(t){var i=Array.prototype.slice.call(arguments,1);t+=".bs.table";this.options[p.EVENTS[t]].apply(this.options,i);this.$el.trigger(e.Event(t),i);this.options.onAll(t,i);this.$el.trigger(e.Event("all.bs.table"),[t,i])};p.prototype.resetHeader=function(){clearTimeout(this.timeoutId_);this.timeoutId_=setTimeout(e.proxy(this.fitHeader,this),this.$el.is(":hidden")?100:0)};p.prototype.fitHeader=function(){var t=this,n,s,r,a;if(t.$el.is(":hidden")){t.timeoutId_=setTimeout(e.proxy(t.fitHeader,t),100);return}n=this.$tableBody.get(0);s=n.scrollWidth>n.clientWidth&&n.scrollHeight>n.clientHeight+this.$header.outerHeight()?o():0;this.$el.css("margin-top",-this.$header.outerHeight());r=e(":focus");if(r.length>0){var l=r.parents("th");if(l.length>0){var h=l.attr("data-field");if(h!==undefined){var d=this.$header.find("[data-field='"+h+"']");if(d.length>0){d.find(":input").addClass("focus-temp")}}}}this.$header_=this.$header.clone(true,true);this.$selectAll_=this.$header_.find('[name="btSelectAll"]');this.$tableHeader.css({"margin-right":s}).find("table").css("width",this.$el.outerWidth()).html("").attr("class",this.$el.attr("class")).append(this.$header_);a=e(".focus-temp:visible:eq(0)");if(a.length>0){a.focus();this.$header.find(".focus-temp").removeClass("focus-temp")}this.$header.find("th[data-field]").each(function(n){t.$header_.find(i('th[data-field="%s"]',e(this).data("field"))).data(e(this).data())});var u=this.getVisibleFields(),f=this.$header_.find("th");this.$body.find(">tr:first-child:not(.no-records-found) > *").each(function(n){var s=e(this),r=n;if(t.options.detailView&&!t.options.cardView){if(n===0){
t.$header_.find("th.detail").find(".fht-cell").width(s.innerWidth())}r=n-1}var o=t.$header_.find(i('th[data-field="%s"]',u[r]));if(o.length>1){o=e(f[s[0].cellIndex])}o.find(".fht-cell").width(s.innerWidth())});this.$tableBody.off("scroll").on("scroll",function(){t.$tableHeader.scrollLeft(e(this).scrollLeft());if(t.options.showFooter&&!t.options.cardView){t.$tableFooter.scrollLeft(e(this).scrollLeft())}});t.trigger("post-header")};p.prototype.resetFooter=function(){var t=this,n=t.getData(),s=[];if(!this.options.showFooter||this.options.cardView){return}if(!this.options.cardView&&this.options.detailView){s.push('<td><div class="th-inner">&nbsp;</div><div class="fht-cell"></div></td>')}e.each(this.columns,function(e,r){var o,l="",h="",d=[],u={},f=i(' class="%s"',r["class"]);if(!r.visible){return}if(t.options.cardView&&!r.cardVisible){return}l=i("text-align: %s; ",r.falign?r.falign:r.align);h=i("vertical-align: %s; ",r.valign);u=a(null,t.options.footerStyle);if(u&&u.css){for(o in u.css){d.push(o+": "+u.css[o])}}s.push("<td",f,i(' style="%s"',l+h+d.concat().join("; ")),">");s.push('<div class="th-inner">');s.push(a(r,r.footerFormatter,[n],"&nbsp;")||"&nbsp;");s.push("</div>");s.push('<div class="fht-cell"></div>');s.push("</div>");s.push("</td>")});this.$tableFooter.find("tr").html(s.join(""));this.$tableFooter.show();clearTimeout(this.timeoutFooter_);this.timeoutFooter_=setTimeout(e.proxy(this.fitFooter,this),this.$el.is(":hidden")?100:0)};p.prototype.fitFooter=function(){var t=this,i,n,s;clearTimeout(this.timeoutFooter_);if(this.$el.is(":hidden")){this.timeoutFooter_=setTimeout(e.proxy(this.fitFooter,this),100);return}n=this.$el.css("width");s=n>this.$tableBody.width()?o():0;this.$tableFooter.css({"margin-right":s}).find("table").css("width",n).attr("class",this.$el.attr("class"));i=this.$tableFooter.find("td");this.$body.find(">tr:first-child:not(.no-records-found) > *").each(function(t){var n=e(this);i.eq(t).find(".fht-cell").width(n.innerWidth())})};p.prototype.toggleColumn=function(e,t,n){if(e===-1){return}this.columns[e].visible=t;this.initHeader();this.initSearch();this.initPagination();this.initBody();if(this.options.showColumns){var s=this.$toolbar.find(".keep-open input").prop("disabled",false);if(n){s.filter(i('[value="%s"]',e)).prop("checked",t)}if(s.filter(":checked").length<=this.options.minimumCountColumns){s.filter(":checked").prop("disabled",true)}}};p.prototype.getVisibleFields=function(){var t=this,i=[];e.each(this.header.fields,function(e,n){var r=t.columns[s(t.columns,n)];if(!r.visible){return}i.push(n)});return i};p.prototype.resetView=function(e){var t=0;if(e&&e.height){this.options.height=e.height}this.$selectAll.prop("checked",this.$selectItem.length>0&&this.$selectItem.length===this.$selectItem.filter(":checked").length);if(this.options.height){var i=this.$toolbar.outerHeight(true),n=this.$pagination.outerHeight(true),s=this.options.height-i-n;this.$tableContainer.css("height",s+"px")}if(this.options.cardView){this.$el.css("margin-top","0");this.$tableContainer.css("padding-bottom","0");this.$tableFooter.hide();return}if(this.options.showHeader&&this.options.height){this.$tableHeader.show();this.resetHeader();t+=this.$header.outerHeight()}else{this.$tableHeader.hide();this.trigger("post-header")}if(this.options.showFooter){this.resetFooter();if(this.options.height){t+=this.$tableFooter.outerHeight()+1}}this.getCaret();this.$tableContainer.css("padding-bottom",t+"px");this.trigger("reset-view")};p.prototype.getData=function(t){return this.searchText||!e.isEmptyObject(this.filterColumns)||!e.isEmptyObject(this.filterColumnsPartial)?t?this.data.slice(this.pageFrom-1,this.pageTo):this.data:t?this.options.data.slice(this.pageFrom-1,this.pageTo):this.options.data};p.prototype.load=function(t){var i=false;if(this.options.sidePagination==="server"){this.options.totalRows=t[this.options.totalField];i=t.fixedScroll;t=t[this.options.dataField]}else if(!e.isArray(t)){i=t.fixedScroll;t=t.data}this.initData(t);this.initSearch();this.initPagination();this.initBody(i)};p.prototype.append=function(e){this.initData(e,"append");this.initSearch();this.initPagination();this.initSort();this.initBody(true)};p.prototype.prepend=function(e){this.initData(e,"prepend");this.initSearch();this.initPagination();this.initSort();this.initBody(true)};p.prototype.remove=function(t){var i=this.options.data.length,n,s;if(!t.hasOwnProperty("field")||!t.hasOwnProperty("values")){return}for(n=i-1;n>=0;n--){s=this.options.data[n];if(!s.hasOwnProperty(t.field)){continue}if(e.inArray(s[t.field],t.values)!==-1){this.options.data.splice(n,1);if(this.options.sidePagination==="server"){this.options.totalRows-=1}}}if(i===this.options.data.length){return}this.initSearch();this.initPagination();this.initSort();this.initBody(true)};p.prototype.removeAll=function(){if(this.options.data.length>0){this.options.data.splice(0,this.options.data.length);this.initSearch();this.initPagination();this.initBody(true)}};p.prototype.getRowByUniqueId=function(e){var t=this.options.uniqueId,i=this.options.data.length,n=null,s,r,o;for(s=i-1;s>=0;s--){r=this.options.data[s];if(r.hasOwnProperty(t)){o=r[t]}else if(r._data.hasOwnProperty(t)){o=r._data[t]}else{continue}if(typeof o==="string"){e=e.toString()}else if(typeof o==="number"){if(Number(o)===o&&o%1===0){e=parseInt(e)}else if(o===Number(o)&&o!==0){e=parseFloat(e)}}if(o===e){n=r;break}}return n};p.prototype.removeByUniqueId=function(e){var t=this.options.data.length,i=this.getRowByUniqueId(e);if(i){this.options.data.splice(this.options.data.indexOf(i),1)}if(t===this.options.data.length){return}this.initSearch();this.initPagination();this.initBody(true)};p.prototype.updateByUniqueId=function(t){var i=this;var n=e.isArray(t)?t:[t];e.each(n,function(t,n){var s;if(!n.hasOwnProperty("id")||!n.hasOwnProperty("row")){return}s=e.inArray(i.getRowByUniqueId(n.id),i.options.data);if(s===-1){return}e.extend(i.options.data[s],n.row)});this.initSearch();this.initPagination();this.initSort();this.initBody(true)};p.prototype.insertRow=function(e){if(!e.hasOwnProperty("index")||!e.hasOwnProperty("row")){return}this.data.splice(e.index,0,e.row);this.initSearch();this.initPagination();this.initSort();this.initBody(true)};p.prototype.updateRow=function(t){var i=this;var n=e.isArray(t)?t:[t];e.each(n,function(t,n){if(!n.hasOwnProperty("index")||!n.hasOwnProperty("row")){return}e.extend(i.options.data[n.index],n.row)});this.initSearch();this.initPagination();this.initSort();this.initBody(true)};p.prototype.initHiddenRows=function(){this.hiddenRows=[]};p.prototype.showRow=function(e){this.toggleRow(e,true)};p.prototype.hideRow=function(e){this.toggleRow(e,false)};p.prototype.toggleRow=function(t,i){var n,s;if(t.hasOwnProperty("index")){n=this.getData()[t.index]}else if(t.hasOwnProperty("uniqueId")){n=this.getRowByUniqueId(t.uniqueId)}if(!n){return}s=e.inArray(n,this.hiddenRows);if(!i&&s===-1){this.hiddenRows.push(n)}else if(i&&s>-1){this.hiddenRows.splice(s,1)}this.initBody(true)};p.prototype.getHiddenRows=function(t){var i=this,n=this.getData(),s=[];e.each(n,function(t,n){if(e.inArray(n,i.hiddenRows)>-1){s.push(n)}});this.hiddenRows=s;return s};p.prototype.mergeCells=function(t){var i=t.index,n=e.inArray(t.field,this.getVisibleFields()),s=t.rowspan||1,r=t.colspan||1,o,a,l=this.$body.find(">tr"),h;if(this.options.detailView&&!this.options.cardView){n+=1}h=l.eq(i).find(">td").eq(n);if(i<0||n<0||i>=this.data.length){return}for(o=i;o<i+s;o++){for(a=n;a<n+r;a++){l.eq(o).find(">td").eq(a).hide()}}h.attr("rowspan",s).attr("colspan",r).show()};p.prototype.updateCell=function(e){if(!e.hasOwnProperty("index")||!e.hasOwnProperty("field")||!e.hasOwnProperty("value")){return}this.data[e.index][e.field]=e.value;if(e.reinit===false){return}this.initSort();this.initBody(true)};p.prototype.getOptions=function(){return this.options};p.prototype.getSelections=function(){var t=this;return e.grep(this.options.data,function(e){return e[t.header.stateField]===true})};p.prototype.getAllSelections=function(){var t=this;return e.grep(this.options.data,function(e){return e[t.header.stateField]})};p.prototype.checkAll=function(){this.checkAll_(true)};p.prototype.uncheckAll=function(){this.checkAll_(false)};p.prototype.checkInvert=function(){var t=this;var i=t.$selectItem.filter(":enabled");var n=i.filter(":checked");i.each(function(){e(this).prop("checked",!e(this).prop("checked"))});t.updateRows();t.updateSelected();t.trigger("uncheck-some",n);n=t.getSelections();t.trigger("check-some",n)};p.prototype.checkAll_=function(e){var t;if(!e){t=this.getSelections()}this.$selectAll.add(this.$selectAll_).prop("checked",e);this.$selectItem.filter(":enabled").prop("checked",e);this.updateRows();if(e){t=this.getSelections()}this.trigger(e?"check-all":"uncheck-all",t)};p.prototype.check=function(e){this.check_(true,e)};p.prototype.uncheck=function(e){this.check_(false,e)};p.prototype.check_=function(e,t){var n=this.$selectItem.filter(i('[data-index="%s"]',t)).prop("checked",e);this.data[t][this.header.stateField]=e;this.updateSelected();this.trigger(e?"check":"uncheck",this.data[t],n)};p.prototype.checkBy=function(e){this.checkBy_(true,e)};p.prototype.uncheckBy=function(e){this.checkBy_(false,e)};p.prototype.checkBy_=function(t,n){if(!n.hasOwnProperty("field")||!n.hasOwnProperty("values")){return}var s=this,r=[];e.each(this.options.data,function(o,a){if(!a.hasOwnProperty(n.field)){return false}if(e.inArray(a[n.field],n.values)!==-1){var l=s.$selectItem.filter(":enabled").filter(i('[data-index="%s"]',o)).prop("checked",t);a[s.header.stateField]=t;r.push(a);s.trigger(t?"check":"uncheck",a,l)}});this.updateSelected();this.trigger(t?"check-some":"uncheck-some",r)};p.prototype.destroy=function(){this.$el.insertBefore(this.$container);e(this.options.toolbar).insertBefore(this.$el);this.$container.next().remove();this.$container.remove();this.$el.html(this.$el_.html()).css("margin-top","0").attr("class",this.$el_.attr("class")||"")};p.prototype.showLoading=function(){this.$tableLoading.show()};p.prototype.hideLoading=function(){this.$tableLoading.hide()};p.prototype.togglePagination=function(){this.options.pagination=!this.options.pagination;var e=this.$toolbar.find('button[name="paginationSwitch"] i');if(this.options.pagination){e.attr("class",this.options.iconsPrefix+" "+this.options.icons.paginationSwitchDown)}else{e.attr("class",this.options.iconsPrefix+" "+this.options.icons.paginationSwitchUp)}this.updatePagination()};p.prototype.refresh=function(e){if(e&&e.url){this.options.url=e.url}if(e&&e.pageNumber){this.options.pageNumber=e.pageNumber}if(e&&e.pageSize){this.options.pageSize=e.pageSize}this.initServer(e&&e.silent,e&&e.query,e&&e.url);this.trigger("refresh",e)};p.prototype.resetWidth=function(){if(this.options.showHeader&&this.options.height){this.fitHeader()}if(this.options.showFooter){this.fitFooter()}};p.prototype.showColumn=function(e){this.toggleColumn(s(this.columns,e),true,true)};p.prototype.hideColumn=function(e){this.toggleColumn(s(this.columns,e),false,true)};p.prototype.getHiddenColumns=function(){return e.grep(this.columns,function(e){return!e.visible})};p.prototype.getVisibleColumns=function(){return e.grep(this.columns,function(e){return e.visible})};p.prototype.toggleAllColumns=function(t){e.each(this.columns,function(e,i){this.columns[e].visible=t});this.initHeader();this.initSearch();this.initPagination();this.initBody();if(this.options.showColumns){var i=this.$toolbar.find(".keep-open input").prop("disabled",false);if(i.filter(":checked").length<=this.options.minimumCountColumns){i.filter(":checked").prop("disabled",true)}}};p.prototype.showAllColumns=function(){this.toggleAllColumns(true)};p.prototype.hideAllColumns=function(){this.toggleAllColumns(false)};p.prototype.filterBy=function(t){this.filterColumns=e.isEmptyObject(t)?{}:t;this.options.pageNumber=1;this.initSearch();this.updatePagination()};p.prototype.scrollTo=function(e){if(typeof e==="string"){e=e==="bottom"?this.$tableBody[0].scrollHeight:0}if(typeof e==="number"){this.$tableBody.scrollTop(e)}if(typeof e==="undefined"){return this.$tableBody.scrollTop()}};p.prototype.getScrollPosition=function(){return this.scrollTo()};p.prototype.selectPage=function(e){if(e>0&&e<=this.options.totalPages){this.options.pageNumber=e;this.updatePagination()}};p.prototype.prevPage=function(){if(this.options.pageNumber>1){this.options.pageNumber--;this.updatePagination()}};p.prototype.nextPage=function(){if(this.options.pageNumber<this.options.totalPages){this.options.pageNumber++;this.updatePagination()}};p.prototype.toggleView=function(){this.options.cardView=!this.options.cardView;this.initHeader();this.initBody();this.trigger("toggle",this.options.cardView)};p.prototype.refreshOptions=function(t){if(l(this.options,t,true)){return}this.options=e.extend(this.options,t);this.trigger("refresh-options",this.options);this.destroy();this.init()};p.prototype.resetSearch=function(e){var t=this.$toolbar.find(".search input");t.val(e||"");this.onSearch({currentTarget:t})};p.prototype.expandRow_=function(e,t){var n=this.$body.find(i('> tr[data-index="%s"]',t));if(n.next().is("tr.detail-view")===(e?false:true)){n.find("> td > .detail-icon").click()}};p.prototype.expandRow=function(e){this.expandRow_(true,e)};p.prototype.collapseRow=function(e){this.expandRow_(false,e)};p.prototype.expandAllRows=function(t){if(t){var n=this.$body.find(i('> tr[data-index="%s"]',0)),s=this,r=null,o=false,a=-1;if(!n.next().is("tr.detail-view")){n.find("> td > .detail-icon").click();o=true}else if(!n.next().next().is("tr.detail-view")){n.next().find(".detail-icon").click();o=true}if(o){try{a=setInterval(function(){r=s.$body.find("tr.detail-view").last().find(".detail-icon");if(r.length>0){r.click()}else{clearInterval(a)}},1)}catch(e){clearInterval(a)}}}else{var l=this.$body.children();for(var h=0;h<l.length;h++){this.expandRow_(true,e(l[h]).data("index"))}}};p.prototype.collapseAllRows=function(t){if(t){this.expandRow_(false,0)}else{var i=this.$body.children();for(var n=0;n<i.length;n++){this.expandRow_(false,e(i[n]).data("index"))}}};p.prototype.updateFormatText=function(e,t){if(this.options[i("format%s",e)]){if(typeof t==="string"){this.options[i("format%s",e)]=function(){return t}}else if(typeof t==="function"){this.options[i("format%s",e)]=t}}this.initToolbar();this.initPagination();this.initBody()};var m=["getOptions","getSelections","getAllSelections","getData","load","append","prepend","remove","removeAll","insertRow","updateRow","updateCell","updateByUniqueId","removeByUniqueId","getRowByUniqueId","showRow","hideRow","getHiddenRows","mergeCells","checkAll","uncheckAll","checkInvert","check","uncheck","checkBy","uncheckBy","refresh","resetView","resetWidth","destroy","showLoading","hideLoading","showColumn","hideColumn","getHiddenColumns","getVisibleColumns","showAllColumns","hideAllColumns","filterBy","scrollTo","getScrollPosition","selectPage","prevPage","nextPage","togglePagination","toggleView","refreshOptions","resetSearch","expandRow","collapseRow","expandAllRows","collapseAllRows","updateFormatText"];e.fn.bootstrapTable=function(t){var i,n=Array.prototype.slice.call(arguments,1);this.each(function(){var s=e(this),r=s.data("bootstrap.table"),o=e.extend({},p.DEFAULTS,s.data(),typeof t==="object"&&t);if(typeof t==="string"){if(e.inArray(t,m)<0){throw new Error("Unknown method: "+t)}if(!r){return}i=r[t].apply(r,n);if(t==="destroy"){s.removeData("bootstrap.table")}}if(!r){s.data("bootstrap.table",r=new p(this,o))}});return typeof i==="undefined"?this:i};e.fn.bootstrapTable.Constructor=p;e.fn.bootstrapTable.defaults=p.DEFAULTS;e.fn.bootstrapTable.columnDefaults=p.COLUMN_DEFAULTS;e.fn.bootstrapTable.locales=p.LOCALES;e.fn.bootstrapTable.methods=m;e.fn.bootstrapTable.utils={sprintf:i,getFieldIndex:s,compareObjects:l,calculateObjectValue:a,getItemField:u,objectKeys:c,isIEBrowser:f};e(function(){e('[data-toggle="table"]').bootstrapTable()})})(jQuery);!function(e){"use strict";var t={};var i=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"OE",letters:"Œ"},{base:"oe",letters:"œ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}];var n=function(){for(var e=0;e<i.length;e++){var n=i[e].letters;for(var s=0;s<n.length;s++){t[n[s]]=i[e].base}}};var s=function(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return t[e]||e})};e.extend(e.fn.bootstrapTable.defaults,{searchAccentNeutralise:false});var r=e.fn.bootstrapTable.Constructor,o=r.prototype.init,a=r.prototype.initSearch;r.prototype.init=function(){if(this.options.searchAccentNeutralise){n()}o.apply(this,Array.prototype.slice.apply(arguments))};r.prototype.initSearch=function(){var t=this;if(this.options.sidePagination!=="server"){var i=this.searchText&&this.searchText.toLowerCase();var n=e.isEmptyObject(this.filterColumns)?null:this.filterColumns;this.data=n?e.grep(this.options.data,function(e,t){for(var i in n){if(e[i]!==n[i]){return false}}return true}):this.options.data;this.data=i?e.grep(this.data,function(n,r){for(var o in n){o=e.isNumeric(o)?parseInt(o,10):o;var a=n[o],l=t.columns[e.fn.bootstrapTable.utils.getFieldIndex(t.columns,o)],h=e.inArray(o,t.header.fields);if(l&&l.searchFormatter){a=e.fn.bootstrapTable.utils.calculateObjectValue(l,t.header.formatters[h],[a,n,r],a)}var d=e.inArray(o,t.header.fields);if(d!==-1&&t.header.searchables[d]&&(typeof a==="string"||typeof a==="number")){if(t.options.searchAccentNeutralise){a=s(a);i=s(i)}if(t.options.strictSearch){if((a+"").toLowerCase()===i){return true}}else{if((a+"").toLowerCase().indexOf(i)!==-1){return true}}}}return false}):this.data}}}(jQuery);(function(e){"use strict";var t={sortOrder:"bs.table.sortOrder",sortName:"bs.table.sortName",pageNumber:"bs.table.pageNumber",pageList:"bs.table.pageList",columns:"bs.table.columns",searchText:"bs.table.searchText",filterControl:"bs.table.filterControl"};var i=function(e){var t=e.$header;if(e.options.height){t=e.$tableHeader}return t};var n=function(e){var t="select, input";if(e.options.height){t="table select, table input"}return t};var s=function(){return!!navigator.cookieEnabled};var r=function(e,t){var i=-1;for(var n=0;n<t.length;n++){if(e.toLowerCase()===t[n].toLowerCase()){i=n;break}}return i};var o=function(e,t,i){if(!e.options.cookie||!s()||e.options.cookieIdTable===""){return}if(r(t,e.options.cookiesEnabled)===-1){return}t=e.options.cookieIdTable+"."+t;switch(e.options.cookieStorage){case"cookieStorage":document.cookie=[t,"=",i,"; expires="+e.options.cookieExpire,e.options.cookiePath?"; path="+e.options.cookiePath:"",e.options.cookieDomain?"; domain="+e.options.cookieDomain:"",e.options.cookieSecure?"; secure":""].join("");break;case"localStorage":localStorage.setItem(t,i);break;case"sessionStorage":sessionStorage.setItem(t,i);break;default:return false}return true};var a=function(e,t,i){if(!i){return null}if(r(i,e.options.cookiesEnabled)===-1){return null}i=t+"."+i;switch(e.options.cookieStorage){case"cookieStorage":return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(i).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;case"localStorage":return localStorage.getItem(i);case"sessionStorage":return sessionStorage.getItem(i);default:return null}};var l=function(e,t,i){i=t+"."+i;switch(e.options.cookieStorage){case"cookieStorage":document.cookie=[encodeURIComponent(i),"=","; expires=Thu, 01 Jan 1970 00:00:00 GMT",e.options.cookiePath?"; path="+e.options.cookiePath:"",e.options.cookieDomain?"; domain="+e.options.cookieDomain:""].join("");break;case"localStorage":localStorage.removeItem(i);break;case"sessionStorage":sessionStorage.removeItem(i);break}return true};var h=function(e){var t=e.replace(/[0-9]*/,"");e=e.replace(/[A-Za-z]{1,2}}/,"");switch(t.toLowerCase()){case"s":e=+e;break;case"mi":e=e*60;break;case"h":e=e*60*60;break;case"d":e=e*24*60*60;break;case"m":e=e*30*24*60*60;break;case"y":e=e*365*24*60*60;break;default:e=undefined;break}return e===undefined?"":"; max-age="+e};var d=function(s){setTimeout(function(){var r=JSON.parse(a(s,s.options.cookieIdTable,t.filterControl));if(!s.options.filterControlValuesLoaded&&r){s.options.filterControlValuesLoaded=true;var o={},l=i(s),h=n(s),d=function(t,i){e(i).each(function(i,n){e(t).val(n.text);o[n.field]=n.text})};l.find(h).each(function(){var t=e(this).closest("[data-field]").data("field"),i=e.grep(r,function(e){return e.field===t});d(this,i)});s.initColumnSearch(o)}},250)};e.extend(e.fn.bootstrapTable.defaults,{cookie:false,cookieExpire:"2h",cookiePath:null,cookieDomain:null,cookieSecure:null,cookieIdTable:"",cookiesEnabled:["bs.table.sortOrder","bs.table.sortName","bs.table.pageNumber","bs.table.pageList","bs.table.columns","bs.table.searchText","bs.table.filterControl"],cookieStorage:"cookieStorage",filterControls:[],filterControlValuesLoaded:false});e.fn.bootstrapTable.methods.push("getCookies");e.fn.bootstrapTable.methods.push("deleteCookie");e.extend(e.fn.bootstrapTable.utils,{setCookie:o,getCookie:a});var u=e.fn.bootstrapTable.Constructor,f=u.prototype.init,c=u.prototype.initTable,p=u.prototype.initServer,m=u.prototype.onSort,v=u.prototype.onPageNumber,g=u.prototype.onPageListChange,y=u.prototype.onPageFirst,b=u.prototype.onPagePre,w=u.prototype.onPageNext,_=u.prototype.onPageLast,x=u.prototype.toggleColumn,k=u.prototype.selectPage,C=u.prototype.onSearch;u.prototype.init=function(){var e=0;this.options.filterControls=[];this.options.filterControlValuesLoaded=false;this.options.cookiesEnabled=typeof this.options.cookiesEnabled==="string"?this.options.cookiesEnabled.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.cookiesEnabled;if(this.options.filterControl){var i=this;this.$el.on("column-search.bs.table",function(e,n,s){var r=true;for(var a=0;a<i.options.filterControls.length;a++){if(i.options.filterControls[a].field===n){i.options.filterControls[a].text=s;r=false;break}}if(r){i.options.filterControls.push({field:n,text:s})}o(i,t.filterControl,JSON.stringify(i.options.filterControls))}).on("post-body.bs.table",d(i))}f.apply(this,Array.prototype.slice.apply(arguments))};u.prototype.initServer=function(){var i=this,n=[],s=function(e){return e.filterControl&&e.filterControl==="select"},r=function(e){return e.filterData&&e.filterData!=="column"},o=function(){var e=JSON.parse(a(i,i.options.cookieIdTable,t.filterControl));return i.options.cookie&&e};n=e.grep(i.columns,function(e){return s(e)&&!r(e)});u.prototype.initServer=p;if(this.options.filterControl&&o()&&n.length===0){return}p.apply(this,Array.prototype.slice.apply(arguments))};u.prototype.initTable=function(){c.apply(this,Array.prototype.slice.apply(arguments));this.initCookie()};u.prototype.initCookie=function(){if(!this.options.cookie){return}if(this.options.cookieIdTable===""||this.options.cookieExpire===""||!s()){throw new Error("Configuration error. Please review the cookieIdTable, cookieExpire properties, if those properties are ok, then this browser does not support the cookies")}var i=a(this,this.options.cookieIdTable,t.sortOrder),n=a(this,this.options.cookieIdTable,t.sortName),r=a(this,this.options.cookieIdTable,t.pageNumber),o=a(this,this.options.cookieIdTable,t.pageList),l=JSON.parse(a(this,this.options.cookieIdTable,t.columns)),h=a(this,this.options.cookieIdTable,t.searchText);this.options.sortOrder=i?i:this.options.sortOrder;this.options.sortName=n?n:this.options.sortName;this.options.pageNumber=r?+r:this.options.pageNumber;this.options.pageSize=o?o===this.options.formatAllRows()?o:+o:this.options.pageSize;this.options.searchText=h?h:"";if(l){e.each(this.columns,function(t,i){i.visible=e.inArray(i.field,l)!==-1})}};u.prototype.onSort=function(){m.apply(this,Array.prototype.slice.apply(arguments));o(this,t.sortOrder,this.options.sortOrder);o(this,t.sortName,this.options.sortName)};u.prototype.onPageNumber=function(){v.apply(this,Array.prototype.slice.apply(arguments));o(this,t.pageNumber,this.options.pageNumber)};u.prototype.onPageListChange=function(){g.apply(this,Array.prototype.slice.apply(arguments));o(this,t.pageList,this.options.pageSize)};u.prototype.onPageFirst=function(){y.apply(this,Array.prototype.slice.apply(arguments));o(this,t.pageNumber,this.options.pageNumber)};u.prototype.onPagePre=function(){b.apply(this,Array.prototype.slice.apply(arguments));o(this,t.pageNumber,this.options.pageNumber)};u.prototype.onPageNext=function(){w.apply(this,Array.prototype.slice.apply(arguments));o(this,t.pageNumber,this.options.pageNumber)};u.prototype.onPageLast=function(){_.apply(this,Array.prototype.slice.apply(arguments));o(this,t.pageNumber,this.options.pageNumber)};u.prototype.toggleColumn=function(){x.apply(this,Array.prototype.slice.apply(arguments));var i=[];e.each(this.columns,function(e,t){if(t.visible){i.push(t.field)}});o(this,t.columns,JSON.stringify(i))};u.prototype.selectPage=function(e){k.apply(this,Array.prototype.slice.apply(arguments));o(this,t.pageNumber,e)};u.prototype.onSearch=function(){var i=Array.prototype.slice.apply(arguments);C.apply(this,i);if(e(i[0].currentTarget).parent().hasClass("search")){o(this,t.searchText,this.searchText)}};u.prototype.getCookies=function(){var i=this;var n={};e.each(t,function(e,t){n[e]=a(i,i.options.cookieIdTable,t);if(e==="columns"){n[e]=JSON.parse(n[e])}});return n};u.prototype.deleteCookie=function(e){if(e===""||!s()){return}l(this,this.options.cookieIdTable,t[e])}})(jQuery);!function(e){"use strict";var t=e.fn.bootstrapTable.utils.calculateObjectValue,i=e.fn.bootstrapTable.utils.sprintf;var n=function(t){var i=document.createElement("textarea");e(i).html(t);document.body.appendChild(i);i.select();try{document.execCommand("copy")}catch(e){console.log("Oops, unable to copy")}e(i).remove()};e.extend(e.fn.bootstrapTable.defaults,{copyBtn:false,copyWHiddenBtn:false,copyDelemeter:", "});e.fn.bootstrapTable.methods.push("copyColumnsToClipboard","copyColumnsToClipboardWithHidden");var s=e.fn.bootstrapTable.Constructor,r=s.prototype.initToolbar;s.prototype.initToolbar=function(){r.apply(this,Array.prototype.slice.apply(arguments));var e=this,t=this.$toolbar.find(">.btn-group");if(this.options.clickToSelect||this.options.singleSelect){if(this.options.copyBtn){var i="<button class='btn btn-default' id='copyBtn'><span class='glyphicon glyphicon-copy icon-pencil'></span></button>";t.append(i);t.find("#copyBtn").click(function(){e.copyColumnsToClipboard()})}if(this.options.copyWHiddenBtn){var n="<button class='btn btn-default' id='copyWHiddenBtn'><span class='badge'><span class='glyphicon glyphicon-copy icon-pencil'></span></span></button>";t.append(n);t.find("#copyWHiddenBtn").click(function(){e.copyColumnsToClipboardWithHidden()})}}};s.prototype.copyColumnsToClipboard=function(){var i=this,s="",r=this.options.copyDelemeter;e.each(i.getSelections(),function(n,o){e.each(i.options.columns[0],function(e,a){if(a.field!=="state"&&a.field!=="RowNumber"&&a.visible){if(o[a.field]!==null){s+=t(a,i.header.formatters[e],[o[a.field],o,n],o[a.field])}s+=r}});s+="\r\n"});n(s)};s.prototype.copyColumnsToClipboardWithHidden=function(){var i=this,s="",r=this.options.copyDelemeter;e.each(i.getSelections(),function(n,o){e.each(i.options.columns[0],function(e,a){if(a.field!="state"&&a.field!=="RowNumber"){if(o[a.field]!==null){s+=t(a,i.header.formatters[e],[o[a.field],o,n],o[a.field])}s+=r}});s+="\r\n"});n(s)}}(jQuery);(function(e){"use strict";e.extend(e.fn.bootstrapTable.defaults,{editable:true,onEditableInit:function(){return false},onEditableSave:function(e,t,i,n){return false},onEditableShown:function(e,t,i,n){return false},onEditableHidden:function(e,t,i,n){return false}});e.extend(e.fn.bootstrapTable.Constructor.EVENTS,{"editable-init.bs.table":"onEditableInit","editable-save.bs.table":"onEditableSave","editable-shown.bs.table":"onEditableShown","editable-hidden.bs.table":"onEditableHidden"});var t=e.fn.bootstrapTable.Constructor,i=t.prototype.initTable,n=t.prototype.initBody;t.prototype.initTable=function(){var t=this;i.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.editable){return}e.each(this.columns,function(i,n){if(!n.editable){return}var s={},r=[],o="editable-";var a=function(e,t){var i=e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()});if(i.slice(0,o.length)==o){var n=i.replace(o,"data-");s[n]=t}};e.each(t.options,a);n.formatter=n.formatter||function(e,t,i){return e};n._formatter=n._formatter?n._formatter:n.formatter;n.formatter=function(i,o,l){var h=n._formatter?n._formatter(i,o,l):i;e.each(n,a);e.each(s,function(e,t){r.push(" "+e+'="'+t+'"')});var d=false;if(n.editable.hasOwnProperty("noeditFormatter")){d=n.editable.noeditFormatter(i,o,l)}if(d===false){return['<a href="javascript:void(0)"',' data-name="'+n.field+'"',' data-pk="'+o[t.options.idField]+'"',' data-value="'+h+'"',r.join(""),">"+"</a>"].join("")}else{return d}}})};t.prototype.initBody=function(){var t=this;n.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.editable){return}e.each(this.columns,function(i,n){if(!n.editable){return}t.$body.find('a[data-name="'+n.field+'"]').editable(n.editable).off("save").on("save",function(i,s){var r=t.getData(),o=e(this).parents("tr[data-index]").data("index"),a=r[o],l=a[n.field];e(this).data("value",s.submitValue);a[n.field]=s.submitValue;t.trigger("editable-save",n.field,a,l,e(this));t.resetFooter()});t.$body.find('a[data-name="'+n.field+'"]').editable(n.editable).off("shown").on("shown",function(i,s){
var r=t.getData(),o=e(this).parents("tr[data-index]").data("index"),a=r[o];t.trigger("editable-shown",n.field,a,e(this),s)});t.$body.find('a[data-name="'+n.field+'"]').editable(n.editable).off("hidden").on("hidden",function(i,s){var r=t.getData(),o=e(this).parents("tr[data-index]").data("index"),a=r[o];t.trigger("editable-hidden",n.field,a,e(this),s)})});this.trigger("editable-init")}})(jQuery);(function(e){"use strict";var t=e.fn.bootstrapTable.utils.sprintf;var i={json:"JSON",xml:"XML",png:"PNG",csv:"CSV",txt:"TXT",sql:"SQL",doc:"MS-Word",excel:"MS-Excel",xlsx:"MS-Excel (OpenXML)",powerpoint:"MS-Powerpoint",pdf:"PDF"};e.extend(e.fn.bootstrapTable.defaults,{showExport:false,exportDataType:"basic",exportTypes:["json","xml","csv","txt","sql","excel"],exportOptions:{}});e.extend(e.fn.bootstrapTable.defaults.icons,{export:"glyphicon-export icon-share"});e.extend(e.fn.bootstrapTable.locales,{formatExport:function(){return"Export data"}});e.extend(e.fn.bootstrapTable.defaults,e.fn.bootstrapTable.locales);var n=e.fn.bootstrapTable.Constructor,s=n.prototype.initToolbar;n.prototype.initToolbar=function(){this.showToolbar=this.options.showExport;s.apply(this,Array.prototype.slice.apply(arguments));if(this.options.showExport){var n=this,r=this.$toolbar.find(">.btn-group"),o=r.find("div.export");if(!o.length){o=e(['<div class="export btn-group">','<button class="btn'+t(" btn-%s",this.options.buttonsClass)+t(" btn-%s",this.options.iconSize)+' dropdown-toggle" aria-label="export type" '+'title="'+this.options.formatExport()+'" '+'data-toggle="dropdown" type="button">',t('<i class="%s %s"></i> ',this.options.iconsPrefix,this.options.icons.export),'<span class="caret"></span>',"</button>",'<ul class="dropdown-menu" role="menu">',"</ul>","</div>"].join("")).appendTo(r);var a=o.find(".dropdown-menu"),l=this.options.exportTypes;if(typeof this.options.exportTypes==="string"){var h=this.options.exportTypes.slice(1,-1).replace(/ /g,"").split(",");l=[];e.each(h,function(e,t){l.push(t.slice(1,-1))})}e.each(l,function(e,t){if(i.hasOwnProperty(t)){a.append(['<li role="menuitem" data-type="'+t+'">','<a href="javascript:void(0)">',i[t],"</a>","</li>"].join(""))}});a.find("li").click(function(){var t=e(this).data("type"),i=function(){n.$el.tableExport(e.extend({},n.options.exportOptions,{type:t,escape:false}))};if(n.options.exportDataType==="all"&&n.options.pagination){n.$el.one(n.options.sidePagination==="server"?"post-body.bs.table":"page-change.bs.table",function(){i();n.togglePagination()});n.togglePagination()}else if(n.options.exportDataType==="selected"){var s=n.getData(),r=n.getAllSelections();if(n.options.sidePagination==="server"){s={total:n.options.totalRows};s[n.options.dataField]=n.getData();r={total:n.options.totalRows};r[n.options.dataField]=n.getAllSelections()}n.load(r);i();n.load(s)}else{i()}})}}}})(jQuery);(function(e){"use strict";var t=function(t,i){var n={};function s(t,r){if(Object(t)!==t){n[r]=t}else if(e.isArray(t)){for(var o=0,a=t.length;o<a;o++){s(t[o],r?r+i.options.flatSeparator+o:""+o);if(a==0){n[r]=[]}}}else{var l=true;for(var h in t){l=false;s(t[h],r?r+i.options.flatSeparator+h:h)}if(l){n[r]={}}}}s(t,"");return n};var i=function(i,n){var s=[];e.each(!e.isArray(i)?[i]:i,function(e,i){s.push(t(i,n))});return s};e.extend(e.fn.bootstrapTable.defaults,{flat:false,flatSeparator:"."});var n=e.fn.bootstrapTable.Constructor,s=n.prototype.initData;n.prototype.initData=function(e,t){if(this.options.flat){e=i(e?e:this.options.data,this)}s.apply(this,[e,t])}})(jQuery);!function(e){"use strict";e.extend(e.fn.bootstrapTable.defaults,{multipleSearch:false,delimeter:" "});var t=e.fn.bootstrapTable.Constructor,i=t.prototype.initSearch;t.prototype.initSearch=function(){if(this.options.multipleSearch){if(this.searchText===undefined){return}var t=this.searchText.split(this.options.delimeter),n=this,s=e.isEmptyObject(this.filterColumns)?null:this.filterColumns,r=[];if(t.length===1){i.apply(this,Array.prototype.slice.apply(arguments))}else{for(var o=0;o<t.length;o++){var a=t[o].trim();r=a?e.grep(r.length===0?this.options.data:r,function(t,i){for(var s in t){s=e.isNumeric(s)?parseInt(s,10):s;var r=t[s],o=n.columns[e.fn.bootstrapTable.utils.getFieldIndex(n.columns,s)],l=e.inArray(s,n.header.fields);if(o&&o.searchFormatter){r=e.fn.bootstrapTable.utils.calculateObjectValue(o,n.header.formatters[l],[r,t,i],r)}var h=e.inArray(s,n.header.fields);if(h!==-1&&n.header.searchables[h]&&(typeof r==="string"||typeof r==="number")){if(n.options.strictSearch){if((r+"").toLowerCase()===a){return true}}else{if((r+"").toLowerCase().indexOf(a)!==-1){return true}}}}return false}):this.data}this.data=r}}else{i.apply(this,Array.prototype.slice.apply(arguments))}}}(jQuery);(function(e){"use strict";var t=false;var i=function(t){var i=t.$sortModal.selector,n=i.substr(1);if(!e(n).hasClass("modal")){var s='  <div class="modal fade" id="'+n+'" tabindex="-1" role="dialog" aria-labelledby="'+n+'Label" aria-hidden="true">';s+='         <div class="modal-dialog">';s+='             <div class="modal-content">';s+='                 <div class="modal-header">';s+='                     <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>';s+='                     <h4 class="modal-title" id="'+n+'Label">'+t.options.formatMultipleSort()+"</h4>";s+="                 </div>";s+='                 <div class="modal-body">';s+='                     <div class="bootstrap-table">';s+='                         <div class="fixed-table-toolbar">';s+='                             <div class="bars">';s+='                                 <div id="toolbar">';s+='                                     <button id="add" type="button" class="btn btn-default"><i class="'+t.options.iconsPrefix+" "+t.options.icons.plus+'"></i> '+t.options.formatAddLevel()+"</button>";s+='                                     <button id="delete" type="button" class="btn btn-default" disabled><i class="'+t.options.iconsPrefix+" "+t.options.icons.minus+'"></i> '+t.options.formatDeleteLevel()+"</button>";s+="                                 </div>";s+="                             </div>";s+="                         </div>";s+='                         <div class="fixed-table-container">';s+='                             <table id="multi-sort" class="table">';s+="                                 <thead>";s+="                                     <tr>";s+="                                         <th></th>";s+='                                         <th><div class="th-inner">'+t.options.formatColumn()+"</div></th>";s+='                                         <th><div class="th-inner">'+t.options.formatOrder()+"</div></th>";s+="                                     </tr>";s+="                                 </thead>";s+="                                 <tbody></tbody>";s+="                             </table>";s+="                         </div>";s+="                     </div>";s+="                 </div>";s+='                 <div class="modal-footer">';s+='                     <button type="button" class="btn btn-default" data-dismiss="modal">'+t.options.formatCancel()+"</button>";s+='                     <button type="button" class="btn btn-primary">'+t.options.formatSort()+"</button>";s+="                 </div>";s+="             </div>";s+="         </div>";s+="     </div>";e("body").append(e(s));t.$sortModal=e(i);var r=t.$sortModal.find("tbody > tr");t.$sortModal.off("click","#add").on("click","#add",function(){var e=t.$sortModal.find(".multi-sort-name:first option").length,i=t.$sortModal.find("tbody tr").length;if(i<e){i++;t.addLevel();t.setButtonStates()}});t.$sortModal.off("click","#delete").on("click","#delete",function(){var e=t.$sortModal.find(".multi-sort-name:first option").length,i=t.$sortModal.find("tbody tr").length;if(i>1&&i<=e){i--;t.$sortModal.find("tbody tr:last").remove();t.setButtonStates()}});t.$sortModal.off("click",".btn-primary").on("click",".btn-primary",function(){var i=t.$sortModal.find("tbody > tr"),n=t.$sortModal.find("div.alert"),s=[],r=[];t.options.sortPriority=e.map(i,function(t){var i=e(t),n=i.find(".multi-sort-name").val(),r=i.find(".multi-sort-order").val();s.push(n);return{sortName:n,sortOrder:r}});var o=s.sort();for(var a=0;a<s.length-1;a++){if(o[a+1]==o[a]){r.push(o[a])}}if(r.length>0){if(n.length===0){n='<div class="alert alert-danger" role="alert"><strong>'+t.options.formatDuplicateAlertTitle()+"</strong> "+t.options.formatDuplicateAlertDescription()+"</div>";e(n).insertBefore(t.$sortModal.find(".bars"))}}else{if(n.length===1){e(n).remove()}t.$sortModal.modal("hide");t.options.sortName="";if(t.options.sidePagination==="server"){t.options.queryParams=function(e){e.multiSort=t.options.sortPriority;return e};t.initServer(t.options.silentSort);return}t.onMultipleSort()}});if(t.options.sortPriority===null||t.options.sortPriority.length===0){if(t.options.sortName){t.options.sortPriority=[{sortName:t.options.sortName,sortOrder:t.options.sortOrder}]}}if(t.options.sortPriority!==null&&t.options.sortPriority.length>0){if(r.length<t.options.sortPriority.length&&typeof t.options.sortPriority==="object"){for(var o=0;o<t.options.sortPriority.length;o++){t.addLevel(o,t.options.sortPriority[o])}}}else{t.addLevel(0)}t.setButtonStates()}};e.extend(e.fn.bootstrapTable.defaults,{showMultiSort:false,sortPriority:null,onMultipleSort:function(){return false}});e.extend(e.fn.bootstrapTable.defaults.icons,{sort:"glyphicon-sort",plus:"glyphicon-plus",minus:"glyphicon-minus"});e.extend(e.fn.bootstrapTable.Constructor.EVENTS,{"multiple-sort.bs.table":"onMultipleSort"});e.extend(e.fn.bootstrapTable.locales,{formatMultipleSort:function(){return"Multiple Sort"},formatAddLevel:function(){return"Add Level"},formatDeleteLevel:function(){return"Delete Level"},formatColumn:function(){return"Column"},formatOrder:function(){return"Order"},formatSortBy:function(){return"Sort by"},formatThenBy:function(){return"Then by"},formatSort:function(){return"Sort"},formatCancel:function(){return"Cancel"},formatDuplicateAlertTitle:function(){return"Duplicate(s) detected!"},formatDuplicateAlertDescription:function(){return"Please remove or change any duplicate column."},formatSortOrders:function(){return{asc:"Ascending",desc:"Descending"}}});e.extend(e.fn.bootstrapTable.defaults,e.fn.bootstrapTable.locales);var n=e.fn.bootstrapTable.Constructor,s=n.prototype.initToolbar;n.prototype.initToolbar=function(){this.showToolbar=true;var n=this,r="#sortModal_"+this.$el.attr("id");this.$sortModal=e(r);s.apply(this,Array.prototype.slice.apply(arguments));if(this.options.showMultiSort){var o=this.$toolbar.find(">.btn-group").first(),a=this.$toolbar.find("div.multi-sort");if(!a.length){a='  <button class="multi-sort btn btn-default'+(this.options.iconSize===undefined?"":" btn-"+this.options.iconSize)+'" type="button" data-toggle="modal" data-target="'+r+'" title="'+this.options.formatMultipleSort()+'">';a+='     <i class="'+this.options.iconsPrefix+" "+this.options.icons.sort+'"></i>';a+="</button>";o.append(a);i(n)}this.$el.on("sort.bs.table",function(){t=true});this.$el.on("multiple-sort.bs.table",function(){t=false});this.$el.on("load-success.bs.table",function(){if(!t&&n.options.sortPriority!==null&&typeof n.options.sortPriority==="object"&&n.options.sidePagination!=="server"){n.onMultipleSort()}});this.$el.on("column-switch.bs.table",function(e,t){for(var s=0;s<n.options.sortPriority.length;s++){if(n.options.sortPriority[s].sortName===t){n.options.sortPriority.splice(s,1)}}n.assignSortableArrows();n.$sortModal.remove();i(n)});this.$el.on("reset-view.bs.table",function(){if(!t&&n.options.sortPriority!==null&&typeof n.options.sortPriority==="object"){n.assignSortableArrows()}})}};n.prototype.onMultipleSort=function(){var t=this;var i=function(e,t){return e>t?1:e<t?-1:0};var n=function(n,s){var r=[],o=[];for(var a=0;a<t.options.sortPriority.length;a++){var l=t.options.sortPriority[a].sortOrder==="desc"?-1:1,h=n[t.options.sortPriority[a].sortName],d=s[t.options.sortPriority[a].sortName];if(h===undefined||h===null){h=""}if(d===undefined||d===null){d=""}if(e.isNumeric(h)&&e.isNumeric(d)){h=parseFloat(h);d=parseFloat(d)}if(typeof h!=="string"){h=h.toString()}r.push(l*i(h,d));o.push(l*i(d,h))}return i(r,o)};this.data.sort(function(e,t){return n(e,t)});this.initBody();this.assignSortableArrows();this.trigger("multiple-sort")};n.prototype.addLevel=function(t,i){var n=t===0?this.options.formatSortBy():this.options.formatThenBy();this.$sortModal.find("tbody").append(e("<tr>").append(e("<td>").text(n)).append(e("<td>").append(e('<select class="form-control multi-sort-name">'))).append(e("<td>").append(e('<select class="form-control multi-sort-order">'))));var s=this.$sortModal.find(".multi-sort-name").last(),r=this.$sortModal.find(".multi-sort-order").last();e.each(this.columns,function(e,t){if(t.sortable===false||t.visible===false){return true}s.append('<option value="'+t.field+'">'+t.title+"</option>")});e.each(this.options.formatSortOrders(),function(e,t){r.append('<option value="'+e+'">'+t+"</option>")});if(i!==undefined){s.find('option[value="'+i.sortName+'"]').attr("selected",true);r.find('option[value="'+i.sortOrder+'"]').attr("selected",true)}};n.prototype.assignSortableArrows=function(){var t=this,i=t.$header.find("th");for(var n=0;n<i.length;n++){for(var s=0;s<t.options.sortPriority.length;s++){if(e(i[n]).data("field")===t.options.sortPriority[s].sortName){e(i[n]).find(".sortable").removeClass("desc asc").addClass(t.options.sortPriority[s].sortOrder)}}}};n.prototype.setButtonStates=function(){var e=this.$sortModal.find(".multi-sort-name:first option").length,t=this.$sortModal.find("tbody tr").length;if(t==e){this.$sortModal.find("#add").attr("disabled","disabled")}if(t>1){this.$sortModal.find("#delete").removeAttr("disabled")}if(t<e){this.$sortModal.find("#add").removeAttr("disabled")}if(t==1){this.$sortModal.find("#delete").attr("disabled","disabled")}}})(jQuery);function alphanum(e,t){function i(e){var t=[],i=0,n=-1,s=0,r,o;while(r=(o=e.charAt(i++)).charCodeAt(0)){var a=r===46||r>=48&&r<=57;if(a!==s){t[++n]="";s=a}t[n]+=o}return t}function n(e){if(typeof e==="number"){e=""+e}if(!e){e=""}return e}var s=i(n(e));var r=i(n(t));for(x=0;s[x]&&r[x];x++){if(s[x]!==r[x]){var o=Number(s[x]),a=Number(r[x]);if(o==s[x]&&a==r[x]){return o-a}else{return s[x]>r[x]?1:-1}}}return s.length-r.length}function numericOnly(e,t){function i(e){e=e.replace(new RegExp(/[^0-9]/g),"");return parseInt(e,10)}return i(e)-i(t)}!function(e){"use strict";function t(e){var t=e.$header;if(e.options.height){t=e.$tableHeader}return t}function i(e){return t(e).find("[data-filter-field]")}function n(t){var n=i(t);if(!e.isEmptyObject(t.filterColumnsPartial)){n.each(function(i,n){var s=e(n),r=s.attr("data-filter-field"),o=t.filterColumnsPartial[r];if(s.is("select")){s.val(o).trigger("change")}else{s.val(o)}})}}function s(t,i){var n=false,s,r,o=0;e.each(t.columns,function(t,o){s="hidden";r=[];if(!o.visible){return}if(!o.filter){r.push('<div class="no-filter"></div>')}else{var a=o.filter.class?" "+o.filter.class:"";r.push('<div style="margin: 0px 2px 2px 2px;" class="filter'+a+'">');if(o.searchable){n=true;s="visible"}switch(o.filter.type.toLowerCase()){case"input":r.push('<input type="text" data-filter-field="'+o.field+'" style="width: 100%; visibility:'+s+'">');break;case"select":r.push('<select data-filter-field="'+o.field+'" style="width: 100%; visibility:'+s+'"></select>');break}}e.each(i.children().children(),function(t,i){i=e(i);if(i.data("field")===o.field){i.find(".fht-cell").append(r.join(""));return false}})});if(n){var a=i.find("input"),l=i.find("select");if(a.length>0){a.off("keyup").on("keyup",function(e){clearTimeout(o);o=setTimeout(function(){t.onColumnSearch(e)},t.options.searchTimeOut)});a.off("mouseup").on("mouseup",function(i){var n=e(this),s=n.val();if(s===""){return}setTimeout(function(){var e=n.val();if(e===""){clearTimeout(o);o=setTimeout(function(){t.onColumnSearch(i)},t.options.searchTimeOut)}},1)})}if(l.length>0){l.on("select2:select",function(e){t.onColumnSearch(e)})}}else{i.find(".filter").hide()}}function r(i){var n=t(i);e.each(i.columns,function(e,t){if(t.filter&&t.filter.type==="select"){var s=n.find("select[data-filter-field="+t.field+"]");if(s.length>0&&!s.data().select2){t.filter.data.unshift("");var r={placeholder:"",allowClear:true,data:t.filter.data,dropdownParent:i.$el.closest(".bootstrap-table")};s.select2(r);s.on("select2:unselecting",function(e){e.preventDefault();s.val(null).trigger("change");i.searchText=undefined;i.onColumnSearch(e)})}}})}e.extend(e.fn.bootstrapTable.defaults,{filter:false,filterValues:{}});e.extend(e.fn.bootstrapTable.COLUMN_DEFAULTS,{filter:undefined});var o=e.fn.bootstrapTable.Constructor,a=o.prototype.init,l=o.prototype.initHeader,h=o.prototype.initSearch;o.prototype.init=function(){if(this.options.filter){var t=this;if(!e.isEmptyObject(t.options.filterValues)){t.filterColumnsPartial=t.options.filterValues;t.options.filterValues={}}this.$el.on("reset-view.bs.table",function(){if(!t.options.height){return}if(t.$tableHeader.find("select").length>0||t.$tableHeader.find("input").length>0){return}s(t,t.$tableHeader)}).on("post-header.bs.table",function(){var e=0;r(t);clearTimeout(e);e=setTimeout(function(){n(t)},t.options.searchTimeOut-1e3)}).on("column-switch.bs.table",function(e,i){n(t)})}a.apply(this,Array.prototype.slice.apply(arguments))};o.prototype.initHeader=function(){l.apply(this,Array.prototype.slice.apply(arguments));if(this.options.filter){s(this,this.$header)}};o.prototype.initSearch=function(){h.apply(this,Array.prototype.slice.apply(arguments));var t=this,i=t.filterColumnsPartial;if(t.options.sidePagination==="client"){this.data=e.grep(this.data,function(n,s){for(var r in i){var o=t.columns[e.fn.bootstrapTable.utils.getFieldIndex(t.columns,r)],a=i[r].toLowerCase(),l=n[r];l=e.fn.bootstrapTable.utils.calculateObjectValue(t.header,t.header.formatters[e.inArray(r,t.header.fields)],[l,n,s],l);if(o.filterStrictSearch){if(!(e.inArray(r,t.header.fields)!==-1&&(typeof l==="string"||typeof l==="number")&&l.toString().toLowerCase()===a.toString().toLowerCase())){return false}}else{if(!(e.inArray(r,t.header.fields)!==-1&&(typeof l==="string"||typeof l==="number")&&(l+"").toLowerCase().indexOf(a)!==-1)){return false}}}return true})}};o.prototype.onColumnSearch=function(t){var i=e(t.currentTarget).attr("data-filter-field"),n=e.trim(e(t.currentTarget).val());if(e.isEmptyObject(this.filterColumnsPartial)){this.filterColumnsPartial={}}if(n){this.filterColumnsPartial[i]=n}else{delete this.filterColumnsPartial[i]}this.options.pageNumber=1;this.onSearch(t)};o.prototype.setFilterData=function(i,n){var s=this,r=t(s),o=r.find('select[data-filter-field="'+i+'"]');n.unshift("");o.empty();o.select2({data:n,placeholder:"",allowClear:true,dropdownParent:s.$el.closest(".bootstrap-table")});e.each(this.columns,function(e,t){if(t.field===i){t.filter.data=n;return false}})};o.prototype.setFilterValues=function(e){this.filterColumnsPartial=e};e.fn.bootstrapTable.methods.push("setFilterData");e.fn.bootstrapTable.methods.push("setFilterValues")}(jQuery);(function(e){"use strict";var t=e.fn.bootstrapTable.utils.sprintf;e.extend(e.fn.bootstrapTable.defaults,{stickyHeader:false});var i=e.fn.bootstrapTable.Constructor,n=i.prototype.initHeader;i.prototype.initHeader=function(){var i=this;n.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.stickyHeader){return}var s=this.$tableBody.find("table"),r=s.attr("id"),o=s.attr("id")+"-sticky-header",a=o+"-sticky-header-container",l=o+"_sticky_anchor_begin",h=o+"_sticky_anchor_end";s.before(t('<div id="%s" class="hidden"></div>',a));s.before(t('<div id="%s"></div>',l));s.after(t('<div id="%s"></div>',h));s.find("thead").attr("id",o);this.$stickyHeader=e(e("#"+o).clone(true,true));this.$stickyHeader.removeAttr("id");e(window).on("resize."+r,s,d);e(window).on("scroll."+r,s,d);s.closest(".fixed-table-container").find(".fixed-table-body").on("scroll."+r,s,u);this.$el.on("all.bs.table",function(t){i.$stickyHeader=e(e("#"+o).clone(true,true));i.$stickyHeader.removeAttr("id")});function d(t){var n=t.data;var s=n.find("thead").attr("id");if(n.length<1||e("#"+r).length<1){e(window).off("resize."+r);e(window).off("scroll."+r);n.closest(".fixed-table-container").find(".fixed-table-body").off("scroll."+r);return}var o="0";if(i.options.stickyHeaderOffsetY)o=i.options.stickyHeaderOffsetY.replace("px","");var d=e(window).scrollTop();var f=e("#"+l).offset().top-o;var c=e("#"+h).offset().top-o-e("#"+s).css("height").replace("px","");if(d>f&&d<=c){e.each(i.$stickyHeader.find("tr").eq(0).find("th"),function(t,i){e(i).css("min-width",e("#"+s+" tr").eq(0).find("th").eq(t).css("width"))});e("#"+a).removeClass("hidden").addClass("fix-sticky fixed-table-container");e("#"+a).css("top",o+"px");var p=e('<div style="position:absolute;width:100%;overflow-x:hidden;" />');e("#"+a).html(p.append(i.$stickyHeader));u(t)}else{e("#"+a).removeClass("fix-sticky").addClass("hidden")}}function u(t){var i=t.data;var n=i.find("thead").attr("id");e("#"+a).css("width",+i.closest(".fixed-table-body").css("width").replace("px","")+1);e("#"+a+" thead").parent().scrollLeft(Math.abs(e("#"+n).position().left))}}})(jQuery);"use strict";(function e(t,i){if(typeof exports==="object"&&typeof module==="object")module.exports=i();else if(typeof define==="function"&&define.amd)define([],i);else if(typeof exports==="object")exports["vis"]=i();else t["vis"]=i()})(this,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={exports:{},id:n,loaded:false};e[n].call(s.exports,s,s.exports,i);s.loaded=true;return s.exports}i.m=e;i.c=t;i.p="";return i(0)}([function(e,t,i){"use strict";var n=i(1);n.extend(t,i(87));n.extend(t,i(116));n.extend(t,i(158))},function(e,t,i){"use strict";var n=i(2);var s=u(n);var r=i(55);var o=u(r);var a=i(58);var l=u(a);var h=i(62);var d=u(h);function u(e){return e&&e.__esModule?e:{default:e}}var f=i(82);var c=i(86);t.isNumber=function(e){return e instanceof Number||typeof e=="number"};t.recursiveDOMDelete=function(e){if(e){while(e.hasChildNodes()===true){t.recursiveDOMDelete(e.firstChild);e.removeChild(e.firstChild)}}};t.giveRange=function(e,t,i,n){if(t==e){return.5}else{var s=1/(t-e);return Math.max(0,(n-e)*s)}};t.isString=function(e){return e instanceof String||typeof e=="string"};t.isDate=function(e){if(e instanceof Date){return true}else if(t.isString(e)){var i=p.exec(e);if(i){return true}else if(!isNaN(Date.parse(e))){return true}}return false};t.randomUUID=function(){return c.v4()};t.assignAllKeys=function(e,t){for(var i in e){if(e.hasOwnProperty(i)){if((0,d["default"])(e[i])!=="object"){e[i]=t}}}};t.fillIfDefined=function(e,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;for(var s in e){if(i[s]!==undefined){if((0,d["default"])(i[s])!=="object"){if((i[s]===undefined||i[s]===null)&&e[s]!==undefined&&n===true){delete e[s]}else{e[s]=i[s]}}else{if((0,d["default"])(e[s])==="object"){t.fillIfDefined(e[s],i[s],n)}}}}};t.protoExtend=function(e,t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var s in n){e[s]=n[s]}}return e};t.extend=function(e,t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var s in n){if(n.hasOwnProperty(s)){e[s]=n[s]}}}return e};t.selectiveExtend=function(e,t,i){if(!Array.isArray(e)){throw new Error("Array with property names expected as first argument")}for(var n=2;n<arguments.length;n++){var s=arguments[n];for(var r=0;r<e.length;r++){var o=e[r];if(s&&s.hasOwnProperty(o)){t[o]=s[o]}}}return t};t.selectiveDeepExtend=function(e,i,n){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(Array.isArray(n)){throw new TypeError("Arrays are not supported by deepExtend")}for(var r=2;r<arguments.length;r++){var o=arguments[r];for(var a=0;a<e.length;a++){var l=e[a];if(o.hasOwnProperty(l)){if(n[l]&&n[l].constructor===Object){if(i[l]===undefined){i[l]={}}if(i[l].constructor===Object){t.deepExtend(i[l],n[l],false,s)}else{if(n[l]===null&&i[l]!==undefined&&s===true){delete i[l]}else{i[l]=n[l]}}}else if(Array.isArray(n[l])){throw new TypeError("Arrays are not supported by deepExtend")}else{if(n[l]===null&&i[l]!==undefined&&s===true){delete i[l]}else{i[l]=n[l]}}}}}return i};t.selectiveNotDeepExtend=function(e,i,n){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(Array.isArray(n)){throw new TypeError("Arrays are not supported by deepExtend")}for(var r in n){if(n.hasOwnProperty(r)){if(e.indexOf(r)==-1){if(n[r]&&n[r].constructor===Object){if(i[r]===undefined){i[r]={}}if(i[r].constructor===Object){t.deepExtend(i[r],n[r])}else{if(n[r]===null&&i[r]!==undefined&&s===true){delete i[r]}else{i[r]=n[r]}}}else if(Array.isArray(n[r])){i[r]=[];for(var o=0;o<n[r].length;o++){i[r].push(n[r][o])}}else{if(n[r]===null&&i[r]!==undefined&&s===true){delete i[r]}else{i[r]=n[r]}}}}}return i};t.deepExtend=function(e,i,n,s){for(var r in i){if(i.hasOwnProperty(r)||n===true){if(i[r]&&i[r].constructor===Object){if(e[r]===undefined){e[r]={}}if(e[r].constructor===Object){t.deepExtend(e[r],i[r],n)}else{if(i[r]===null&&e[r]!==undefined&&s===true){delete e[r]}else{e[r]=i[r]}}}else if(Array.isArray(i[r])){e[r]=[];for(var o=0;o<i[r].length;o++){e[r].push(i[r][o])}}else{if(i[r]===null&&e[r]!==undefined&&s===true){delete e[r]}else{e[r]=i[r]}}}}return e};t.equalArray=function(e,t){if(e.length!=t.length)return false;for(var i=0,n=e.length;i<n;i++){if(e[i]!=t[i])return false}return true};t.convert=function(e,i){var n;if(e===undefined){return undefined}if(e===null){return null}if(!i){return e}if(!(typeof i==="string")&&!(i instanceof String)){throw new Error("Type must be a string")}switch(i){case"boolean":case"Boolean":return Boolean(e);case"number":case"Number":if(t.isString(e)&&!isNaN(Date.parse(e))){return f(e).valueOf()}else{return Number(e.valueOf())}case"string":case"String":return String(e);case"Date":if(t.isNumber(e)){return new Date(e)}if(e instanceof Date){return new Date(e.valueOf())}else if(f.isMoment(e)){return new Date(e.valueOf())}if(t.isString(e)){n=p.exec(e);if(n){return new Date(Number(n[1]))}else{return f(new Date(e)).toDate()}}else{throw new Error("Cannot convert object of type "+t.getType(e)+" to type Date")}case"Moment":if(t.isNumber(e)){return f(e)}if(e instanceof Date){return f(e.valueOf())}else if(f.isMoment(e)){return f(e)}if(t.isString(e)){n=p.exec(e);if(n){return f(Number(n[1]))}else{return f(e)}}else{throw new Error("Cannot convert object of type "+t.getType(e)+" to type Date")}case"ISODate":if(t.isNumber(e)){return new Date(e)}else if(e instanceof Date){return e.toISOString()}else if(f.isMoment(e)){return e.toDate().toISOString()}else if(t.isString(e)){n=p.exec(e);if(n){return new Date(Number(n[1])).toISOString()}else{return f(e).format()}}else{throw new Error("Cannot convert object of type "+t.getType(e)+" to type ISODate")}case"ASPDate":if(t.isNumber(e)){return"/Date("+e+")/"}else if(e instanceof Date){return"/Date("+e.valueOf()+")/"}else if(t.isString(e)){n=p.exec(e);var s;if(n){s=new Date(Number(n[1])).valueOf()}else{s=new Date(e).valueOf()}return"/Date("+s+")/"}else{throw new Error("Cannot convert object of type "+t.getType(e)+" to type ASPDate")}default:throw new Error('Unknown type "'+i+'"')}};var p=/^\/?Date\((\-?\d+)/i;t.getType=function(e){var t=typeof e==="undefined"?"undefined":(0,d["default"])(e);if(t=="object"){if(e===null){return"null"}if(e instanceof Boolean){return"Boolean"}if(e instanceof Number){return"Number"}if(e instanceof String){return"String"}if(Array.isArray(e)){return"Array"}if(e instanceof Date){return"Date"}return"Object"}else if(t=="number"){return"Number"}else if(t=="boolean"){return"Boolean"}else if(t=="string"){return"String"}else if(t===undefined){return"undefined"}return t};t.copyAndExtendArray=function(e,t){var i=[];for(var n=0;n<e.length;n++){i.push(e[n])}i.push(t);return i};t.copyArray=function(e){var t=[];for(var i=0;i<e.length;i++){t.push(e[i])}return t};t.getAbsoluteLeft=function(e){return e.getBoundingClientRect().left};t.getAbsoluteRight=function(e){return e.getBoundingClientRect().right};t.getAbsoluteTop=function(e){return e.getBoundingClientRect().top};t.addClassName=function(e,t){var i=e.className.split(" ");var n=t.split(" ");i=i.concat(n.filter(function(e){return i.indexOf(e)<0}));e.className=i.join(" ")};t.removeClassName=function(e,t){var i=e.className.split(" ");var n=t.split(" ");i=i.filter(function(e){return n.indexOf(e)<0});e.className=i.join(" ")};t.forEach=function(e,t){var i,n;if(Array.isArray(e)){for(i=0,n=e.length;i<n;i++){t(e[i],i,e)}}else{for(i in e){if(e.hasOwnProperty(i)){t(e[i],i,e)}}}};t.toArray=function(e){var t=[];for(var i in e){if(e.hasOwnProperty(i))t.push(e[i])}return t};t.updateProperty=function(e,t,i){if(e[t]!==i){e[t]=i;return true}else{return false}};t.throttle=function(e){var t=false;return function i(){if(!t){t=true;requestAnimationFrame(function(){t=false;e()})}}};t.addEventListener=function(e,t,i,n){if(e.addEventListener){if(n===undefined)n=false;if(t==="mousewheel"&&navigator.userAgent.indexOf("Firefox")>=0){t="DOMMouseScroll"}e.addEventListener(t,i,n)}else{e.attachEvent("on"+t,i)}};t.removeEventListener=function(e,t,i,n){if(e.removeEventListener){if(n===undefined)n=false;if(t==="mousewheel"&&navigator.userAgent.indexOf("Firefox")>=0){t="DOMMouseScroll"}e.removeEventListener(t,i,n)}else{e.detachEvent("on"+t,i)}};t.preventDefault=function(e){if(!e)e=window.event;if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}};t.getTarget=function(e){if(!e){e=window.event}var t;if(e.target){t=e.target}else if(e.srcElement){t=e.srcElement}if(t.nodeType!=undefined&&t.nodeType==3){t=t.parentNode}return t};t.hasParent=function(e,t){var i=e;while(i){if(i===t){return true}i=i.parentNode}return false};t.option={};t.option.asBoolean=function(e,t){if(typeof e=="function"){e=e()}if(e!=null){return e!=false}return t||null};t.option.asNumber=function(e,t){if(typeof e=="function"){e=e()}if(e!=null){return Number(e)||t||null}return t||null};t.option.asString=function(e,t){if(typeof e=="function"){e=e()}if(e!=null){return String(e)}return t||null};t.option.asSize=function(e,i){if(typeof e=="function"){e=e()}if(t.isString(e)){return e}else if(t.isNumber(e)){return e+"px"}else{return i||null}};t.option.asElement=function(e,t){if(typeof e=="function"){e=e()}return e||t||null};t.hexToRGB=function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,i,n){return t+t+i+i+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null};t.overrideOpacity=function(e,i){if(e.indexOf("rgba")!=-1){return e}else if(e.indexOf("rgb")!=-1){var n=e.substr(e.indexOf("(")+1).replace(")","").split(",");return"rgba("+n[0]+","+n[1]+","+n[2]+","+i+")"}else{var n=t.hexToRGB(e);if(n==null){return e}else{return"rgba("+n.r+","+n.g+","+n.b+","+i+")"}}};t.RGBToHex=function(e,t,i){return"#"+((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1)};t.parseColor=function(e){var i;if(t.isString(e)===true){if(t.isValidRGB(e)===true){var n=e.substr(4).substr(0,e.length-5).split(",").map(function(e){return parseInt(e)});e=t.RGBToHex(n[0],n[1],n[2])}if(t.isValidHex(e)===true){var s=t.hexToHSV(e);var r={h:s.h,s:s.s*.8,v:Math.min(1,s.v*1.02)};var o={h:s.h,s:Math.min(1,s.s*1.25),v:s.v*.8};var a=t.HSVToHex(o.h,o.s,o.v);var l=t.HSVToHex(r.h,r.s,r.v);i={background:e,border:a,highlight:{background:l,border:a},hover:{background:l,border:a}}}else{i={background:e,border:e,highlight:{background:e,border:e},hover:{background:e,border:e}}}}else{i={};i.background=e.background||undefined;i.border=e.border||undefined;if(t.isString(e.highlight)){i.highlight={border:e.highlight,background:e.highlight}}else{i.highlight={};i.highlight.background=e.highlight&&e.highlight.background||undefined;i.highlight.border=e.highlight&&e.highlight.border||undefined}if(t.isString(e.hover)){i.hover={border:e.hover,
background:e.hover}}else{i.hover={};i.hover.background=e.hover&&e.hover.background||undefined;i.hover.border=e.hover&&e.hover.border||undefined}}return i};t.RGBToHSV=function(e,t,i){e=e/255;t=t/255;i=i/255;var n=Math.min(e,Math.min(t,i));var s=Math.max(e,Math.max(t,i));if(n==s){return{h:0,s:0,v:n}}var r=e==n?t-i:i==n?e-t:i-e;var o=e==n?3:i==n?1:5;var a=60*(o-r/(s-n))/360;var l=(s-n)/s;var h=s;return{h:a,s:l,v:h}};var m={split:function e(t){var i={};t.split(";").forEach(function(e){if(e.trim()!=""){var t=e.split(":");var n=t[0].trim();var s=t[1].trim();i[n]=s}});return i},join:function e(t){return(0,l["default"])(t).map(function(e){return e+": "+t[e]}).join("; ")}};t.addCssText=function(e,i){var n=m.split(e.style.cssText);var s=m.split(i);var r=t.extend(n,s);e.style.cssText=m.join(r)};t.removeCssText=function(e,t){var i=m.split(e.style.cssText);var n=m.split(t);for(var s in n){if(n.hasOwnProperty(s)){delete i[s]}}e.style.cssText=m.join(i)};t.HSVToRGB=function(e,t,i){var n,s,r;var o=Math.floor(e*6);var a=e*6-o;var l=i*(1-t);var h=i*(1-a*t);var d=i*(1-(1-a)*t);switch(o%6){case 0:n=i,s=d,r=l;break;case 1:n=h,s=i,r=l;break;case 2:n=l,s=i,r=d;break;case 3:n=l,s=h,r=i;break;case 4:n=d,s=l,r=i;break;case 5:n=i,s=l,r=h;break}return{r:Math.floor(n*255),g:Math.floor(s*255),b:Math.floor(r*255)}};t.HSVToHex=function(e,i,n){var s=t.HSVToRGB(e,i,n);return t.RGBToHex(s.r,s.g,s.b)};t.hexToHSV=function(e){var i=t.hexToRGB(e);return t.RGBToHSV(i.r,i.g,i.b)};t.isValidHex=function(e){var t=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e);return t};t.isValidRGB=function(e){e=e.replace(" ","");var t=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/i.test(e);return t};t.isValidRGBA=function(e){e=e.replace(" ","");var t=/rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(.{1,3})\)/i.test(e);return t};t.selectiveBridgeObject=function(e,i){if((typeof i==="undefined"?"undefined":(0,d["default"])(i))=="object"){var n=(0,o["default"])(i);for(var s=0;s<e.length;s++){if(i.hasOwnProperty(e[s])){if((0,d["default"])(i[e[s]])=="object"){n[e[s]]=t.bridgeObject(i[e[s]])}}}return n}else{return null}};t.bridgeObject=function(e){if((typeof e==="undefined"?"undefined":(0,d["default"])(e))=="object"){var i=(0,o["default"])(e);for(var n in e){if(e.hasOwnProperty(n)){if((0,d["default"])(e[n])=="object"){i[n]=t.bridgeObject(e[n])}}}return i}else{return null}};t.insertSort=function(e,t){for(var i=0;i<e.length;i++){var n=e[i];for(var s=i;s>0&&t(n,e[s-1])<0;s--){e[s]=e[s-1]}e[s]=n}return e};t.mergeOptions=function(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var s=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{};if(t[i]===null){e[i]=(0,o["default"])(s[i])}else{if(t[i]!==undefined){if(typeof t[i]==="boolean"){e[i].enabled=t[i]}else{if(t[i].enabled===undefined){e[i].enabled=true}for(var r in t[i]){if(t[i].hasOwnProperty(r)){e[i][r]=t[i][r]}}}}}};t.binarySearchCustom=function(e,t,i,n){var s=1e4;var r=0;var o=0;var a=e.length-1;while(o<=a&&r<s){var l=Math.floor((o+a)/2);var h=e[l];var d=n===undefined?h[i]:h[i][n];var u=t(d);if(u==0){return l}else if(u==-1){o=l+1}else{a=l-1}r++}return-1};t.binarySearchValue=function(e,t,i,n,s){var r=1e4;var o=0;var a=0;var l=e.length-1;var h,d,u,f;var s=s!=undefined?s:function(e,t){return e==t?0:e<t?-1:1};while(a<=l&&o<r){f=Math.floor(.5*(l+a));h=e[Math.max(0,f-1)][i];d=e[f][i];u=e[Math.min(e.length-1,f+1)][i];if(s(d,t)==0){return f}else if(s(h,t)<0&&s(d,t)>0){return n=="before"?Math.max(0,f-1):f}else if(s(d,t)<0&&s(u,t)>0){return n=="before"?f:Math.min(e.length-1,f+1)}else{if(s(d,t)<0){a=f+1}else{l=f-1}}o++}return-1};t.easingFunctions={linear:function e(t){return t},easeInQuad:function e(t){return t*t},easeOutQuad:function e(t){return t*(2-t)},easeInOutQuad:function e(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic:function e(t){return t*t*t},easeOutCubic:function e(t){return--t*t*t+1},easeInOutCubic:function e(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function e(t){return t*t*t*t},easeOutQuart:function e(t){return 1- --t*t*t*t},easeInOutQuart:function e(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function e(t){return t*t*t*t*t},easeOutQuint:function e(t){return 1+--t*t*t*t*t},easeInOutQuint:function e(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};t.getScrollBarWidth=function(){var e=document.createElement("p");e.style.width="100%";e.style.height="200px";var t=document.createElement("div");t.style.position="absolute";t.style.top="0px";t.style.left="0px";t.style.visibility="hidden";t.style.width="200px";t.style.height="150px";t.style.overflow="hidden";t.appendChild(e);document.body.appendChild(t);var i=e.offsetWidth;t.style.overflow="scroll";var n=e.offsetWidth;if(i==n)n=t.clientWidth;document.body.removeChild(t);return i-n};t.topMost=function(e,t){var i=void 0;if(!Array.isArray(t)){t=[t]}var n=true;var r=false;var o=undefined;try{for(var a=(0,s["default"])(e),l;!(n=(l=a.next()).done);n=true){var h=l.value;if(h){i=h[t[0]];for(var d=1;d<t.length;d++){if(i){i=i[t[d]]}else{continue}}if(typeof i!="undefined"){break}}}}catch(e){r=true;o=e}finally{try{if(!n&&a["return"]){a["return"]()}}finally{if(r){throw o}}}return i}},function(e,t,i){e.exports={default:i(3),__esModule:true}},function(e,t,i){i(4);i(50);e.exports=i(52)},function(e,t,i){i(5);var n=i(16),s=i(20),r=i(8),o=i(47)("toStringTag");for(var a=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],l=0;l<5;l++){var h=a[l],d=n[h],u=d&&d.prototype;if(u&&!u[o])s(u,o,h);r[h]=r.Array}},function(e,t,i){"use strict";var n=i(6),s=i(7),r=i(8),o=i(9);e.exports=i(13)(Array,"Array",function(e,t){this._t=o(e);this._i=0;this._k=t},function(){var e=this._t,t=this._k,i=this._i++;if(!e||i>=e.length){this._t=undefined;return s(1)}if(t=="keys")return s(0,i);if(t=="values")return s(0,e[i]);return s(0,[i,e[i]])},"values");r.Arguments=r.Array;n("keys");n("values");n("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t){e.exports={}},function(e,t,i){var n=i(10),s=i(12);e.exports=function(e){return n(s(e))}},function(e,t,i){var n=i(11);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return n(e)=="String"?e.split(""):Object(e)}},function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(e==undefined)throw TypeError("Can't call method on  "+e);return e}},function(e,t,i){"use strict";var n=i(14),s=i(15),r=i(30),o=i(20),a=i(31),l=i(8),h=i(32),d=i(46),u=i(48),f=i(47)("iterator"),c=!([].keys&&"next"in[].keys()),p="@@iterator",m="keys",v="values";var g=function(){return this};e.exports=function(e,t,i,y,b,w,_){h(i,t,y);var x=function(e){if(!c&&e in T)return T[e];switch(e){case m:return function t(){return new i(this,e)};case v:return function t(){return new i(this,e)}}return function t(){return new i(this,e)}};var k=t+" Iterator",C=b==v,S=false,T=e.prototype,M=T[f]||T[p]||b&&T[b],D=M||x(b),E=b?!C?D:x("entries"):undefined,O=t=="Array"?T.entries||M:M,P,I,A;if(O){A=u(O.call(new e));if(A!==Object.prototype){d(A,k,true);if(!n&&!a(A,f))o(A,f,g)}}if(C&&M&&M.name!==v){S=true;D=function e(){return M.call(this)}}if((!n||_)&&(c||S||!T[f])){o(T,f,D)}l[t]=D;l[k]=g;if(b){P={values:C?D:x(v),keys:w?D:x(m),entries:E};if(_)for(I in P){if(!(I in T))r(T,I,P[I])}else s(s.P+s.F*(c||S),t,P)}return P}},function(e,t){e.exports=true},function(e,t,i){var n=i(16),s=i(17),r=i(18),o=i(20),a="prototype";var l=function(e,t,i){var h=e&l.F,d=e&l.G,u=e&l.S,f=e&l.P,c=e&l.B,p=e&l.W,m=d?s:s[t]||(s[t]={}),v=m[a],g=d?n:u?n[t]:(n[t]||{})[a],y,b,w;if(d)i=t;for(y in i){b=!h&&g&&g[y]!==undefined;if(b&&y in m)continue;w=b?g[y]:i[y];m[y]=d&&typeof g[y]!="function"?i[y]:c&&b?r(w,n):p&&g[y]==w?function(e){var t=function(t,i,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,i)}return new e(t,i,n)}return e.apply(this,arguments)};t[a]=e[a];return t}(w):f&&typeof w=="function"?r(Function.call,w):w;if(f){(m.virtual||(m.virtual={}))[y]=w;if(e&l.R&&v&&!v[y])o(v,y,w)}}};l.F=1;l.G=2;l.S=4;l.P=8;l.B=16;l.W=32;l.U=64;l.R=128;e.exports=l},function(e,t){var i=e.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();if(typeof __g=="number")__g=i},function(e,t){var i=e.exports={version:"2.4.0"};if(typeof __e=="number")__e=i},function(e,t,i){var n=i(19);e.exports=function(e,t,i){n(e);if(t===undefined)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,s){return e.call(t,i,n,s)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}},function(e,t,i){var n=i(21),s=i(29);e.exports=i(25)?function(e,t,i){return n.f(e,t,s(1,i))}:function(e,t,i){e[t]=i;return e}},function(e,t,i){var n=i(22),s=i(24),r=i(28),o=Object.defineProperty;t.f=i(25)?Object.defineProperty:function e(t,i,a){n(t);i=r(i,true);n(a);if(s)try{return o(t,i,a)}catch(e){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");if("value"in a)t[i]=a.value;return t}},function(e,t,i){var n=i(23);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return typeof e==="object"?e!==null:typeof e==="function"}},function(e,t,i){e.exports=!i(25)&&!i(26)(function(){return Object.defineProperty(i(27)("div"),"a",{get:function(){return 7}}).a!=7})},function(e,t,i){e.exports=!i(26)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return true}}},function(e,t,i){var n=i(23),s=i(16).document,r=n(s)&&n(s.createElement);e.exports=function(e){return r?s.createElement(e):{}}},function(e,t,i){var n=i(23);e.exports=function(e,t){if(!n(e))return e;var i,s;if(t&&typeof(i=e.toString)=="function"&&!n(s=i.call(e)))return s;if(typeof(i=e.valueOf)=="function"&&!n(s=i.call(e)))return s;if(!t&&typeof(i=e.toString)=="function"&&!n(s=i.call(e)))return s;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}},function(e,t,i){e.exports=i(20)},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t,i){"use strict";var n=i(33),s=i(29),r=i(46),o={};i(20)(o,i(47)("iterator"),function(){return this});e.exports=function(e,t,i){e.prototype=n(o,{next:s(1,i)});r(e,t+" Iterator")}},function(e,t,i){var n=i(22),s=i(34),r=i(44),o=i(41)("IE_PROTO"),a=function(){},l="prototype";var h=function(){var e=i(27)("iframe"),t=r.length,n="<",s=">",o;e.style.display="none";i(45).appendChild(e);e.src="javascript:";o=e.contentWindow.document;o.open();o.write(n+"script"+s+"document.F=Object"+n+"/script"+s);o.close();h=o.F;while(t--)delete h[l][r[t]];return h()};e.exports=Object.create||function e(t,i){var r;if(t!==null){a[l]=n(t);r=new a;a[l]=null;r[o]=t}else r=h();return i===undefined?r:s(r,i)}},function(e,t,i){var n=i(21),s=i(22),r=i(35);e.exports=i(25)?Object.defineProperties:function e(t,i){s(t);var o=r(i),a=o.length,l=0,h;while(a>l)n.f(t,h=o[l++],i[h]);return t}},function(e,t,i){var n=i(36),s=i(44);e.exports=Object.keys||function e(t){return n(t,s)}},function(e,t,i){var n=i(31),s=i(9),r=i(37)(false),o=i(41)("IE_PROTO");e.exports=function(e,t){var i=s(e),a=0,l=[],h;for(h in i)if(h!=o)n(i,h)&&l.push(h);while(t.length>a)if(n(i,h=t[a++])){~r(l,h)||l.push(h)}return l}},function(e,t,i){var n=i(9),s=i(38),r=i(40);e.exports=function(e){return function(t,i,o){var a=n(t),l=s(a.length),h=r(o,l),d;if(e&&i!=i)while(l>h){d=a[h++];if(d!=d)return true}else for(;l>h;h++)if(e||h in a){if(a[h]===i)return e||h||0}return!e&&-1}}},function(e,t,i){var n=i(39),s=Math.min;e.exports=function(e){return e>0?s(n(e),9007199254740991):0}},function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},function(e,t,i){var n=i(39),s=Math.max,r=Math.min;e.exports=function(e,t){e=n(e);return e<0?s(e+t,0):r(e,t)}},function(e,t,i){var n=i(42)("keys"),s=i(43);e.exports=function(e){return n[e]||(n[e]=s(e))}},function(e,t,i){var n=i(16),s="__core-js_shared__",r=n[s]||(n[s]={});e.exports=function(e){return r[e]||(r[e]={})}},function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(e===undefined?"":e,")_",(++i+n).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,i){e.exports=i(16).document&&document.documentElement},function(e,t,i){var n=i(21).f,s=i(31),r=i(47)("toStringTag");e.exports=function(e,t,i){if(e&&!s(e=i?e:e.prototype,r))n(e,r,{configurable:true,value:t})}},function(e,t,i){var n=i(42)("wks"),s=i(43),r=i(16).Symbol,o=typeof r=="function";var a=e.exports=function(e){return n[e]||(n[e]=o&&r[e]||(o?r:s)("Symbol."+e))};a.store=n},function(e,t,i){var n=i(31),s=i(49),r=i(41)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){e=s(e);if(n(e,r))return e[r];if(typeof e.constructor=="function"&&e instanceof e.constructor){return e.constructor.prototype}return e instanceof Object?o:null}},function(e,t,i){var n=i(12);e.exports=function(e){return Object(n(e))}},function(e,t,i){"use strict";var n=i(51)(true);i(13)(String,"String",function(e){this._t=String(e);this._i=0},function(){var e=this._t,t=this._i,i;if(t>=e.length)return{value:undefined,done:true};i=n(e,t);this._i+=i.length;return{value:i,done:false}})},function(e,t,i){var n=i(39),s=i(12);e.exports=function(e){return function(t,i){var r=String(s(t)),o=n(i),a=r.length,l,h;if(o<0||o>=a)return e?"":undefined;l=r.charCodeAt(o);return l<55296||l>56319||o+1===a||(h=r.charCodeAt(o+1))<56320||h>57343?e?r.charAt(o):l:e?r.slice(o,o+2):(l-55296<<10)+(h-56320)+65536}}},function(e,t,i){var n=i(22),s=i(53);e.exports=i(17).getIterator=function(e){var t=s(e);if(typeof t!="function")throw TypeError(e+" is not iterable!");return n(t.call(e))}},function(e,t,i){var n=i(54),s=i(47)("iterator"),r=i(8);e.exports=i(17).getIteratorMethod=function(e){if(e!=undefined)return e[s]||e["@@iterator"]||r[n(e)]}},function(e,t,i){var n=i(11),s=i(47)("toStringTag"),r=n(function(){return arguments}())=="Arguments";var o=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,i,a;return e===undefined?"Undefined":e===null?"Null":typeof(i=o(t=Object(e),s))=="string"?i:r?n(t):(a=n(t))=="Object"&&typeof t.callee=="function"?"Arguments":a}},function(e,t,i){e.exports={default:i(56),__esModule:true}},function(e,t,i){i(57);var n=i(17).Object;e.exports=function e(t,i){return n.create(t,i)}},function(e,t,i){var n=i(15);n(n.S,"Object",{create:i(33)})},function(e,t,i){e.exports={default:i(59),__esModule:true}},function(e,t,i){i(60);e.exports=i(17).Object.keys},function(e,t,i){var n=i(49),s=i(35);i(61)("keys",function(){return function e(t){return s(n(t))}})},function(e,t,i){var n=i(15),s=i(17),r=i(26);e.exports=function(e,t){var i=(s.Object||{})[e]||Object[e],o={};o[e]=t(i);n(n.S+n.F*r(function(){i(1)}),"Object",o)}},function(e,t,i){"use strict";t.__esModule=true;var n=i(63);var s=l(n);var r=i(66);var o=l(r);var a=typeof o.default==="function"&&typeof s.default==="symbol"?function(e){return typeof e}:function(e){return e&&typeof o.default==="function"&&e.constructor===o.default&&e!==o.default.prototype?"symbol":typeof e};function l(e){return e&&e.__esModule?e:{default:e}}t.default=typeof o.default==="function"&&a(s.default)==="symbol"?function(e){return typeof e==="undefined"?"undefined":a(e)}:function(e){return e&&typeof o.default==="function"&&e.constructor===o.default&&e!==o.default.prototype?"symbol":typeof e==="undefined"?"undefined":a(e)}},function(e,t,i){e.exports={default:i(64),__esModule:true}},function(e,t,i){i(50);i(4);e.exports=i(65).f("iterator")},function(e,t,i){t.f=i(47)},function(e,t,i){e.exports={default:i(67),__esModule:true}},function(e,t,i){i(68);i(79);i(80);i(81);e.exports=i(17).Symbol},function(e,t,i){"use strict";var n=i(16),s=i(31),r=i(25),o=i(15),a=i(30),l=i(69).KEY,h=i(26),d=i(42),u=i(46),f=i(43),c=i(47),p=i(65),m=i(70),v=i(71),g=i(72),y=i(75),b=i(22),w=i(9),_=i(28),x=i(29),k=i(33),C=i(76),S=i(78),T=i(21),M=i(35),D=S.f,E=T.f,O=C.f,P=n.Symbol,I=n.JSON,A=I&&I.stringify,N="prototype",F=c("_hidden"),R=c("toPrimitive"),$={}.propertyIsEnumerable,L=d("symbol-registry"),z=d("symbols"),j=d("op-symbols"),H=Object[N],B=typeof P=="function",U=n.QObject;var W=!U||!U[N]||!U[N].findChild;var Y=r&&h(function(){return k(E({},"a",{get:function(){return E(this,"a",{value:7}).a}})).a!=7})?function(e,t,i){var n=D(H,t);if(n)delete H[t];E(e,t,i);if(n&&e!==H)E(H,t,n)}:E;var V=function(e){var t=z[e]=k(P[N]);t._k=e;return t};var q=B&&typeof P.iterator=="symbol"?function(e){return typeof e=="symbol"}:function(e){return e instanceof P};var G=function e(t,i,n){if(t===H)G(j,i,n);b(t);i=_(i,true);b(n);if(s(z,i)){if(!n.enumerable){if(!s(t,F))E(t,F,x(1,{}));t[F][i]=true}else{if(s(t,F)&&t[F][i])t[F][i]=false;n=k(n,{enumerable:x(0,false)})}return Y(t,i,n)}return E(t,i,n)};var X=function e(t,i){b(t);var n=g(i=w(i)),s=0,r=n.length,o;while(r>s)G(t,o=n[s++],i[o]);return t};var Z=function e(t,i){return i===undefined?k(t):X(k(t),i)};var K=function e(t){var i=$.call(this,t=_(t,true));if(this===H&&s(z,t)&&!s(j,t))return false;return i||!s(this,t)||!s(z,t)||s(this,F)&&this[F][t]?i:true};var Q=function e(t,i){t=w(t);i=_(i,true);if(t===H&&s(z,i)&&!s(j,i))return;var n=D(t,i);if(n&&s(z,i)&&!(s(t,F)&&t[F][i]))n.enumerable=true;return n};var J=function e(t){var i=O(w(t)),n=[],r=0,o;while(i.length>r){if(!s(z,o=i[r++])&&o!=F&&o!=l)n.push(o)}return n};var ee=function e(t){var i=t===H,n=O(i?j:w(t)),r=[],o=0,a;while(n.length>o){if(s(z,a=n[o++])&&(i?s(H,a):true))r.push(z[a])}return r};if(!B){P=function e(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:undefined);var i=function(e){if(this===H)i.call(j,e);if(s(this,F)&&s(this[F],t))this[F][t]=false;Y(this,t,x(1,e))};if(r&&W)Y(H,t,{configurable:true,set:i});return V(t)};a(P[N],"toString",function e(){return this._k});S.f=Q;T.f=G;i(77).f=C.f=J;i(74).f=K;i(73).f=ee;if(r&&!i(14)){a(H,"propertyIsEnumerable",K,true)}p.f=function(e){return V(c(e))}}o(o.G+o.W+o.F*!B,{Symbol:P});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;te.length>ie;)c(te[ie++]);for(var te=M(c.store),ie=0;te.length>ie;)m(te[ie++]);o(o.S+o.F*!B,"Symbol",{for:function(e){return s(L,e+="")?L[e]:L[e]=P(e)},keyFor:function e(t){if(q(t))return v(L,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){W=true},useSimple:function(){W=false}});o(o.S+o.F*!B,"Object",{create:Z,defineProperty:G,defineProperties:X,getOwnPropertyDescriptor:Q,getOwnPropertyNames:J,getOwnPropertySymbols:ee});I&&o(o.S+o.F*(!B||h(function(){var e=P();return A([e])!="[null]"||A({a:e})!="{}"||A(Object(e))!="{}"})),"JSON",{stringify:function e(t){if(t===undefined||q(t))return;var i=[t],n=1,s,r;while(arguments.length>n)i.push(arguments[n++]);s=i[1];if(typeof s=="function")r=s;if(r||!y(s))s=function(e,t){if(r)t=r.call(this,e,t);if(!q(t))return t};i[1]=s;return A.apply(I,i)}});P[N][R]||i(20)(P[N],R,P[N].valueOf);u(P,"Symbol");u(Math,"Math",true);u(n.JSON,"JSON",true)},function(e,t,i){var n=i(43)("meta"),s=i(23),r=i(31),o=i(21).f,a=0;var l=Object.isExtensible||function(){return true};var h=!i(26)(function(){return l(Object.preventExtensions({}))});var d=function(e){o(e,n,{value:{i:"O"+ ++a,w:{}}})};var u=function(e,t){if(!s(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!r(e,n)){if(!l(e))return"F";if(!t)return"E";d(e)}return e[n].i};var f=function(e,t){if(!r(e,n)){if(!l(e))return true;if(!t)return false;d(e)}return e[n].w};var c=function(e){if(h&&p.NEED&&l(e)&&!r(e,n))d(e);return e};var p=e.exports={KEY:n,NEED:false,fastKey:u,getWeak:f,onFreeze:c}},function(e,t,i){var n=i(16),s=i(17),r=i(14),o=i(65),a=i(21).f;e.exports=function(e){var t=s.Symbol||(s.Symbol=r?{}:n.Symbol||{});if(e.charAt(0)!="_"&&!(e in t))a(t,e,{value:o.f(e)})}},function(e,t,i){var n=i(35),s=i(9);e.exports=function(e,t){var i=s(e),r=n(i),o=r.length,a=0,l;while(o>a)if(i[l=r[a++]]===t)return l}},function(e,t,i){var n=i(35),s=i(73),r=i(74);e.exports=function(e){var t=n(e),i=s.f;if(i){var o=i(e),a=r.f,l=0,h;while(o.length>l)if(a.call(e,h=o[l++]))t.push(h)}return t}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,i){var n=i(11);e.exports=Array.isArray||function e(t){return n(t)=="Array"}},function(e,t,i){var n=i(9),s=i(77).f,r={}.toString;var o=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var a=function(e){try{return s(e)}catch(e){return o.slice()}};e.exports.f=function e(t){return o&&r.call(t)=="[object Window]"?a(t):s(n(t))}},function(e,t,i){var n=i(36),s=i(44).concat("length","prototype");t.f=Object.getOwnPropertyNames||function e(t){return n(t,s)}},function(e,t,i){var n=i(74),s=i(29),r=i(9),o=i(28),a=i(31),l=i(24),h=Object.getOwnPropertyDescriptor;t.f=i(25)?h:function e(t,i){t=r(t);i=o(i,true);if(l)try{return h(t,i)}catch(e){}if(a(t,i))return s(!n.f.call(t,i),t[i])}},function(e,t){},function(e,t,i){i(70)("asyncIterator")},function(e,t,i){i(70)("observable")},function(e,t,i){"use strict";e.exports=typeof window!=="undefined"&&window["moment"]||i(83)},function(e,t,i){(function(e){(function(t,i){true?e.exports=i():typeof define==="function"&&define.amd?define(i):t.moment=i()})(this,function(){"use strict";var t;function i(){return t.apply(null,arguments)}function n(e){t=e}function s(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function r(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function o(e){var t;for(t in e){return false}return true}function a(e){return e===void 0}function l(e){return typeof e==="number"||Object.prototype.toString.call(e)==="[object Number]"}function h(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function d(e,t){var i=[],n;for(n=0;n<e.length;++n){i.push(t(e[n],n))}return i}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function f(e,t){for(var i in t){if(u(t,i)){e[i]=t[i]}}if(u(t,"toString")){e.toString=t.toString}if(u(t,"valueOf")){e.valueOf=t.valueOf}return e}function c(e,t,i,n){return Hi(e,t,i,n,true).utc()}function p(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null,rfc2822:false,weekdayMismatch:false}}function m(e){if(e._pf==null){e._pf=p()}return e._pf}var v;if(Array.prototype.some){v=Array.prototype.some}else{v=function(e){var t=Object(this);var i=t.length>>>0;for(var n=0;n<i;n++){if(n in t&&e.call(this,t[n],n,t)){return true}}return false}}var g=v;function y(e){if(e._isValid==null){var t=m(e);var i=g.call(t.parsedDateParts,function(e){return e!=null});var n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i);if(e._strict){n=n&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined}if(Object.isFrozen==null||!Object.isFrozen(e)){e._isValid=n}else{return n}}return e._isValid}function b(e){var t=c(NaN);if(e!=null){f(m(t),e)}else{m(t).userInvalidated=true}return t}var w=i.momentProperties=[];function _(e,t){var i,n,s;if(!a(t._isAMomentObject)){e._isAMomentObject=t._isAMomentObject}if(!a(t._i)){e._i=t._i}if(!a(t._f)){e._f=t._f}if(!a(t._l)){e._l=t._l}if(!a(t._strict)){e._strict=t._strict}if(!a(t._tzm)){e._tzm=t._tzm}if(!a(t._isUTC)){e._isUTC=t._isUTC}if(!a(t._offset)){e._offset=t._offset}if(!a(t._pf)){e._pf=m(t)}if(!a(t._locale)){e._locale=t._locale}if(w.length>0){for(i=0;i<w.length;i++){n=w[i];s=t[n];if(!a(s)){e[n]=s}}}return e}var x=false;function k(e){_(this,e);this._d=new Date(e._d!=null?e._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN)}if(x===false){x=true;i.updateOffset(this);x=false}}function C(e){return e instanceof k||e!=null&&e._isAMomentObject!=null}function S(e){if(e<0){return Math.ceil(e)||0}else{return Math.floor(e)}}function T(e){var t=+e,i=0;if(t!==0&&isFinite(t)){i=S(t)}return i}function M(e,t,i){var n=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),r=0,o;for(o=0;o<n;o++){if(i&&e[o]!==t[o]||!i&&T(e[o])!==T(t[o])){r++}}return r+s}function D(e){if(i.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+e)}}function E(e,t){var n=true;return f(function(){if(i.deprecationHandler!=null){i.deprecationHandler(null,e)}if(n){var s=[];var r;for(var o=0;o<arguments.length;o++){r="";if(typeof arguments[o]==="object"){r+="\n["+o+"] ";for(var a in arguments[0]){r+=a+": "+arguments[0][a]+", "}r=r.slice(0,-2)}else{r=arguments[o]}s.push(r)}D(e+"\nArguments: "+Array.prototype.slice.call(s).join("")+"\n"+(new Error).stack);n=false}return t.apply(this,arguments)},t)}var O={};function P(e,t){if(i.deprecationHandler!=null){i.deprecationHandler(e,t)}if(!O[e]){D(t);O[e]=true}}i.suppressDeprecationWarnings=false;i.deprecationHandler=null;function I(e){return e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function A(e){var t,i;for(i in e){t=e[i];if(I(t)){this[i]=t}else{this["_"+i]=t}}this._config=e;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function N(e,t){var i=f({},e),n;for(n in t){if(u(t,n)){if(r(e[n])&&r(t[n])){i[n]={};f(i[n],e[n]);f(i[n],t[n])}else if(t[n]!=null){i[n]=t[n]}else{delete i[n]}}}for(n in e){if(u(e,n)&&!u(t,n)&&r(e[n])){i[n]=f({},i[n])}}return i}function F(e){if(e!=null){this.set(e)}}var R;if(Object.keys){R=Object.keys}else{R=function(e){var t,i=[];for(t in e){if(u(e,t)){i.push(t)}}return i}}var $=R;var L={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function z(e,t,i){var n=this._calendar[e]||this._calendar["sameElse"];return I(n)?n.call(t,i):n}var j={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function H(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];if(t||!i){return t}this._longDateFormat[e]=i.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)});return this._longDateFormat[e]}var B="Invalid date";function U(){return this._invalidDate}var W="%d";var Y=/\d{1,2}/;function V(e){return this._ordinal.replace("%d",e)}var q={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function G(e,t,i,n){var s=this._relativeTime[i];return I(s)?s(e,t,i,n):s.replace(/%d/i,e)}function X(e,t){var i=this._relativeTime[e>0?"future":"past"];return I(i)?i(t):i.replace(/%s/i,t)}var Z={};function K(e,t){var i=e.toLowerCase();Z[i]=Z[i+"s"]=Z[t]=e}function Q(e){return typeof e==="string"?Z[e]||Z[e.toLowerCase()]:undefined}function J(e){var t={},i,n;for(n in e){if(u(e,n)){i=Q(n);if(i){t[i]=e[n]}}}return t}var ee={};function te(e,t){ee[e]=t}function ie(e){var t=[];for(var i in e){t.push({unit:i,priority:ee[i]})}t.sort(function(e,t){return e.priority-t.priority});return t}function ne(e,t){return function(n){if(n!=null){re(this,e,n);i.updateOffset(this,t);return this}else{return se(this,e)}}}function se(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function re(e,t,i){if(e.isValid()){e._d["set"+(e._isUTC?"UTC":"")+t](i)}}function oe(e){e=Q(e);if(I(this[e])){return this[e]()}return this}function ae(e,t){if(typeof e==="object"){e=J(e);var i=ie(e);for(var n=0;n<i.length;n++){this[i[n].unit](e[i[n].unit])}}else{e=Q(e);if(I(this[e])){return this[e](t)}}return this}function le(e,t,i){var n=""+Math.abs(e),s=t-n.length,r=e>=0;return(r?i?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+n}var he=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var de=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var ue={};var fe={};function ce(e,t,i,n){var s=n;if(typeof n==="string"){s=function(){return this[n]()}}if(e){fe[e]=s}if(t){fe[t[0]]=function(){return le(s.apply(this,arguments),t[1],t[2])}}if(i){fe[i]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)}}}function pe(e){if(e.match(/\[[\s\S]/)){return e.replace(/^\[|\]$/g,"")}return e.replace(/\\/g,"")}function me(e){var t=e.match(he),i,n;for(i=0,n=t.length;i<n;i++){if(fe[t[i]]){t[i]=fe[t[i]]}else{t[i]=pe(t[i])}}return function(i){var s="",r;for(r=0;r<n;r++){s+=I(t[r])?t[r].call(i,e):t[r]}return s}}function ve(e,t){if(!e.isValid()){return e.localeData().invalidDate()}t=ge(t,e.localeData());ue[t]=ue[t]||me(t);return ue[t](e)}function ge(e,t){var i=5;function n(e){return t.longDateFormat(e)||e}de.lastIndex=0;while(i>=0&&de.test(e)){e=e.replace(de,n);de.lastIndex=0;i-=1}return e}var ye=/\d/;var be=/\d\d/;var we=/\d{3}/;var _e=/\d{4}/;var xe=/[+-]?\d{6}/;var ke=/\d\d?/;var Ce=/\d\d\d\d?/;var Se=/\d\d\d\d\d\d?/;var Te=/\d{1,3}/;var Me=/\d{1,4}/;var De=/[+-]?\d{1,6}/;var Ee=/\d+/;var Oe=/[+-]?\d+/;var Pe=/Z|[+-]\d\d:?\d\d/gi;var Ie=/Z|[+-]\d\d(?::?\d\d)?/gi;var Ae=/[+-]?\d+(\.\d{1,3})?/;var Ne=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var Fe={};function Re(e,t,i){Fe[e]=I(t)?t:function(e,n){return e&&i?i:t}}function $e(e,t){if(!u(Fe,e)){return new RegExp(Le(e))}return Fe[e](t._strict,t._locale)}function Le(e){return ze(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,s){return t||i||n||s}))}function ze(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var je={};function He(e,t){var i,n=t;if(typeof e==="string"){e=[e]}if(l(t)){n=function(e,i){i[t]=T(e)}}for(i=0;i<e.length;i++){je[e[i]]=n}}function Be(e,t){He(e,function(e,i,n,s){n._w=n._w||{};t(e,n._w,n,s)})}function Ue(e,t,i){if(t!=null&&u(je,e)){je[e](t,i._a,i,e)}}var We=0;var Ye=1;var Ve=2;var qe=3;var Ge=4;var Xe=5;var Ze=6;var Ke=7;var Qe=8;var Je;if(Array.prototype.indexOf){Je=Array.prototype.indexOf}else{Je=function(e){var t;for(t=0;t<this.length;++t){if(this[t]===e){return t}}return-1}}var et=Je;function tt(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}ce("M",["MM",2],"Mo",function(){return this.month()+1});ce("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});ce("MMMM",0,0,function(e){return this.localeData().months(this,e)});K("month","M");te("month",8);Re("M",ke);Re("MM",ke,be);Re("MMM",function(e,t){return t.monthsShortRegex(e)});Re("MMMM",function(e,t){return t.monthsRegex(e)});He(["M","MM"],function(e,t){t[Ye]=T(e)-1});He(["MMM","MMMM"],function(e,t,i,n){var s=i._locale.monthsParse(e,n,i._strict);if(s!=null){t[Ye]=s}else{m(i).invalidMonth=e}});var it=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;var nt="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function st(e,t){if(!e){return s(this._months)?this._months:this._months["standalone"]}return s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||it).test(t)?"format":"standalone"][e.month()]}var rt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function ot(e,t){if(!e){return s(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"]}return s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[it.test(t)?"format":"standalone"][e.month()]}function at(e,t,i){var n,s,r,o=e.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];
this._shortMonthsParse=[];for(n=0;n<12;++n){r=c([2e3,n]);this._shortMonthsParse[n]=this.monthsShort(r,"").toLocaleLowerCase();this._longMonthsParse[n]=this.months(r,"").toLocaleLowerCase()}}if(i){if(t==="MMM"){s=et.call(this._shortMonthsParse,o);return s!==-1?s:null}else{s=et.call(this._longMonthsParse,o);return s!==-1?s:null}}else{if(t==="MMM"){s=et.call(this._shortMonthsParse,o);if(s!==-1){return s}s=et.call(this._longMonthsParse,o);return s!==-1?s:null}else{s=et.call(this._longMonthsParse,o);if(s!==-1){return s}s=et.call(this._shortMonthsParse,o);return s!==-1?s:null}}}function lt(e,t,i){var n,s,r;if(this._monthsParseExact){return at.call(this,e,t,i)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(n=0;n<12;n++){s=c([2e3,n]);if(i&&!this._longMonthsParse[n]){this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i");this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")}if(!i&&!this._monthsParse[n]){r="^"+this.months(s,"")+"|^"+this.monthsShort(s,"");this._monthsParse[n]=new RegExp(r.replace(".",""),"i")}if(i&&t==="MMMM"&&this._longMonthsParse[n].test(e)){return n}else if(i&&t==="MMM"&&this._shortMonthsParse[n].test(e)){return n}else if(!i&&this._monthsParse[n].test(e)){return n}}}function ht(e,t){var i;if(!e.isValid()){return e}if(typeof t==="string"){if(/^\d+$/.test(t)){t=T(t)}else{t=e.localeData().monthsParse(t);if(!l(t)){return e}}}i=Math.min(e.date(),tt(e.year(),t));e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i);return e}function dt(e){if(e!=null){ht(this,e);i.updateOffset(this,true);return this}else{return se(this,"Month")}}function ut(){return tt(this.year(),this.month())}var ft=Ne;function ct(e){if(this._monthsParseExact){if(!u(this,"_monthsRegex")){vt.call(this)}if(e){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!u(this,"_monthsShortRegex")){this._monthsShortRegex=ft}return this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}}var pt=Ne;function mt(e){if(this._monthsParseExact){if(!u(this,"_monthsRegex")){vt.call(this)}if(e){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!u(this,"_monthsRegex")){this._monthsRegex=pt}return this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}}function vt(){function e(e,t){return t.length-e.length}var t=[],i=[],n=[],s,r;for(s=0;s<12;s++){r=c([2e3,s]);t.push(this.monthsShort(r,""));i.push(this.months(r,""));n.push(this.months(r,""));n.push(this.monthsShort(r,""))}t.sort(e);i.sort(e);n.sort(e);for(s=0;s<12;s++){t[s]=ze(t[s]);i[s]=ze(i[s])}for(s=0;s<24;s++){n[s]=ze(n[s])}this._monthsRegex=new RegExp("^("+n.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}ce("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e});ce(0,["YY",2],0,function(){return this.year()%100});ce(0,["YYYY",4],0,"year");ce(0,["YYYYY",5],0,"year");ce(0,["YYYYYY",6,true],0,"year");K("year","y");te("year",1);Re("Y",Oe);Re("YY",ke,be);Re("YYYY",Me,_e);Re("YYYYY",De,xe);Re("YYYYYY",De,xe);He(["YYYYY","YYYYYY"],We);He("YYYY",function(e,t){t[We]=e.length===2?i.parseTwoDigitYear(e):T(e)});He("YY",function(e,t){t[We]=i.parseTwoDigitYear(e)});He("Y",function(e,t){t[We]=parseInt(e,10)});function gt(e){return yt(e)?366:365}function yt(e){return e%4===0&&e%100!==0||e%400===0}i.parseTwoDigitYear=function(e){return T(e)+(T(e)>68?1900:2e3)};var bt=ne("FullYear",true);function wt(){return yt(this.year())}function _t(e,t,i,n,s,r,o){var a=new Date(e,t,i,n,s,r,o);if(e<100&&e>=0&&isFinite(a.getFullYear())){a.setFullYear(e)}return a}function xt(e){var t=new Date(Date.UTC.apply(null,arguments));if(e<100&&e>=0&&isFinite(t.getUTCFullYear())){t.setUTCFullYear(e)}return t}function kt(e,t,i){var n=7+t-i,s=(7+xt(e,0,n).getUTCDay()-t)%7;return-s+n-1}function Ct(e,t,i,n,s){var r=(7+i-n)%7,o=kt(e,n,s),a=1+7*(t-1)+r+o,l,h;if(a<=0){l=e-1;h=gt(l)+a}else if(a>gt(e)){l=e+1;h=a-gt(e)}else{l=e;h=a}return{year:l,dayOfYear:h}}function St(e,t,i){var n=kt(e.year(),t,i),s=Math.floor((e.dayOfYear()-n-1)/7)+1,r,o;if(s<1){o=e.year()-1;r=s+Tt(o,t,i)}else if(s>Tt(e.year(),t,i)){r=s-Tt(e.year(),t,i);o=e.year()+1}else{o=e.year();r=s}return{week:r,year:o}}function Tt(e,t,i){var n=kt(e,t,i),s=kt(e+1,t,i);return(gt(e)-n+s)/7}ce("w",["ww",2],"wo","week");ce("W",["WW",2],"Wo","isoWeek");K("week","w");K("isoWeek","W");te("week",5);te("isoWeek",5);Re("w",ke);Re("ww",ke,be);Re("W",ke);Re("WW",ke,be);Be(["w","ww","W","WW"],function(e,t,i,n){t[n.substr(0,1)]=T(e)});function Mt(e){return St(e,this._week.dow,this._week.doy).week}var Dt={dow:0,doy:6};function Et(){return this._week.dow}function Ot(){return this._week.doy}function Pt(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function It(e){var t=St(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}ce("d",0,"do","day");ce("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});ce("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});ce("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});ce("e",0,0,"weekday");ce("E",0,0,"isoWeekday");K("day","d");K("weekday","e");K("isoWeekday","E");te("day",11);te("weekday",11);te("isoWeekday",11);Re("d",ke);Re("e",ke);Re("E",ke);Re("dd",function(e,t){return t.weekdaysMinRegex(e)});Re("ddd",function(e,t){return t.weekdaysShortRegex(e)});Re("dddd",function(e,t){return t.weekdaysRegex(e)});Be(["dd","ddd","dddd"],function(e,t,i,n){var s=i._locale.weekdaysParse(e,n,i._strict);if(s!=null){t.d=s}else{m(i).invalidWeekday=e}});Be(["d","e","E"],function(e,t,i,n){t[n]=T(e)});function At(e,t){if(typeof e!=="string"){return e}if(!isNaN(e)){return parseInt(e,10)}e=t.weekdaysParse(e);if(typeof e==="number"){return e}return null}function Nt(e,t){if(typeof e==="string"){return t.weekdaysParse(e)%7||7}return isNaN(e)?null:e}var Ft="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function Rt(e,t){if(!e){return s(this._weekdays)?this._weekdays:this._weekdays["standalone"]}return s(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}var $t="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function Lt(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}var zt="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function jt(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ht(e,t,i){var n,s,r,o=e.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(n=0;n<7;++n){r=c([2e3,1]).day(n);this._minWeekdaysParse[n]=this.weekdaysMin(r,"").toLocaleLowerCase();this._shortWeekdaysParse[n]=this.weekdaysShort(r,"").toLocaleLowerCase();this._weekdaysParse[n]=this.weekdays(r,"").toLocaleLowerCase()}}if(i){if(t==="dddd"){s=et.call(this._weekdaysParse,o);return s!==-1?s:null}else if(t==="ddd"){s=et.call(this._shortWeekdaysParse,o);return s!==-1?s:null}else{s=et.call(this._minWeekdaysParse,o);return s!==-1?s:null}}else{if(t==="dddd"){s=et.call(this._weekdaysParse,o);if(s!==-1){return s}s=et.call(this._shortWeekdaysParse,o);if(s!==-1){return s}s=et.call(this._minWeekdaysParse,o);return s!==-1?s:null}else if(t==="ddd"){s=et.call(this._shortWeekdaysParse,o);if(s!==-1){return s}s=et.call(this._weekdaysParse,o);if(s!==-1){return s}s=et.call(this._minWeekdaysParse,o);return s!==-1?s:null}else{s=et.call(this._minWeekdaysParse,o);if(s!==-1){return s}s=et.call(this._weekdaysParse,o);if(s!==-1){return s}s=et.call(this._shortWeekdaysParse,o);return s!==-1?s:null}}}function Bt(e,t,i){var n,s,r;if(this._weekdaysParseExact){return Ht.call(this,e,t,i)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(n=0;n<7;n++){s=c([2e3,1]).day(n);if(i&&!this._fullWeekdaysParse[n]){this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(s,"").replace(".",".?")+"$","i");this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(s,"").replace(".",".?")+"$","i");this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(s,"").replace(".",".?")+"$","i")}if(!this._weekdaysParse[n]){r="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,"");this._weekdaysParse[n]=new RegExp(r.replace(".",""),"i")}if(i&&t==="dddd"&&this._fullWeekdaysParse[n].test(e)){return n}else if(i&&t==="ddd"&&this._shortWeekdaysParse[n].test(e)){return n}else if(i&&t==="dd"&&this._minWeekdaysParse[n].test(e)){return n}else if(!i&&this._weekdaysParse[n].test(e)){return n}}}function Ut(e){if(!this.isValid()){return e!=null?this:NaN}var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(e!=null){e=At(e,this.localeData());return this.add(e-t,"d")}else{return t}}function Wt(e){if(!this.isValid()){return e!=null?this:NaN}var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Yt(e){if(!this.isValid()){return e!=null?this:NaN}if(e!=null){var t=Nt(e,this.localeData());return this.day(this.day()%7?t:t-7)}else{return this.day()||7}}var Vt=Ne;function qt(e){if(this._weekdaysParseExact){if(!u(this,"_weekdaysRegex")){Qt.call(this)}if(e){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!u(this,"_weekdaysRegex")){this._weekdaysRegex=Vt}return this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}}var Gt=Ne;function Xt(e){if(this._weekdaysParseExact){if(!u(this,"_weekdaysRegex")){Qt.call(this)}if(e){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!u(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=Gt}return this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}var Zt=Ne;function Kt(e){if(this._weekdaysParseExact){if(!u(this,"_weekdaysRegex")){Qt.call(this)}if(e){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!u(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=Zt}return this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function Qt(){function e(e,t){return t.length-e.length}var t=[],i=[],n=[],s=[],r,o,a,l,h;for(r=0;r<7;r++){o=c([2e3,1]).day(r);a=this.weekdaysMin(o,"");l=this.weekdaysShort(o,"");h=this.weekdays(o,"");t.push(a);i.push(l);n.push(h);s.push(a);s.push(l);s.push(h)}t.sort(e);i.sort(e);n.sort(e);s.sort(e);for(r=0;r<7;r++){i[r]=ze(i[r]);n[r]=ze(n[r]);s[r]=ze(s[r])}this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Jt(){return this.hours()%12||12}function ei(){return this.hours()||24}ce("H",["HH",2],0,"hour");ce("h",["hh",2],0,Jt);ce("k",["kk",2],0,ei);ce("hmm",0,0,function(){return""+Jt.apply(this)+le(this.minutes(),2)});ce("hmmss",0,0,function(){return""+Jt.apply(this)+le(this.minutes(),2)+le(this.seconds(),2)});ce("Hmm",0,0,function(){return""+this.hours()+le(this.minutes(),2)});ce("Hmmss",0,0,function(){return""+this.hours()+le(this.minutes(),2)+le(this.seconds(),2)});function ti(e,t){ce(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}ti("a",true);ti("A",false);K("hour","h");te("hour",13);function ii(e,t){return t._meridiemParse}Re("a",ii);Re("A",ii);Re("H",ke);Re("h",ke);Re("k",ke);Re("HH",ke,be);Re("hh",ke,be);Re("kk",ke,be);Re("hmm",Ce);Re("hmmss",Se);Re("Hmm",Ce);Re("Hmmss",Se);He(["H","HH"],qe);He(["k","kk"],function(e,t,i){var n=T(e);t[qe]=n===24?0:n});He(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e);i._meridiem=e});He(["h","hh"],function(e,t,i){t[qe]=T(e);m(i).bigHour=true});He("hmm",function(e,t,i){var n=e.length-2;t[qe]=T(e.substr(0,n));t[Ge]=T(e.substr(n));m(i).bigHour=true});He("hmmss",function(e,t,i){var n=e.length-4;var s=e.length-2;t[qe]=T(e.substr(0,n));t[Ge]=T(e.substr(n,2));t[Xe]=T(e.substr(s));m(i).bigHour=true});He("Hmm",function(e,t,i){var n=e.length-2;t[qe]=T(e.substr(0,n));t[Ge]=T(e.substr(n))});He("Hmmss",function(e,t,i){var n=e.length-4;var s=e.length-2;t[qe]=T(e.substr(0,n));t[Ge]=T(e.substr(n,2));t[Xe]=T(e.substr(s))});function ni(e){return(e+"").toLowerCase().charAt(0)==="p"}var si=/[ap]\.?m?\.?/i;function ri(e,t,i){if(e>11){return i?"pm":"PM"}else{return i?"am":"AM"}}var oi=ne("Hours",true);var ai={calendar:L,longDateFormat:j,invalidDate:B,ordinal:W,dayOfMonthOrdinalParse:Y,relativeTime:q,months:nt,monthsShort:rt,week:Dt,weekdays:Ft,weekdaysMin:zt,weekdaysShort:$t,meridiemParse:si};var li={};var hi={};var di;function ui(e){return e?e.toLowerCase().replace("_","-"):e}function fi(e){var t=0,i,n,s,r;while(t<e.length){r=ui(e[t]).split("-");i=r.length;n=ui(e[t+1]);n=n?n.split("-"):null;while(i>0){s=ci(r.slice(0,i).join("-"));if(s){return s}if(n&&n.length>=i&&M(r,n,true)>=i-1){break}i--}t++}return null}function ci(t){var i=null;if(!li[t]&&typeof e!=="undefined"&&e&&e.exports){try{i=di._abbr;!function e(){var t=new Error('Cannot find module "./locale"');t.code="MODULE_NOT_FOUND";throw t}();pi(i)}catch(e){}}return li[t]}function pi(e,t){var i;if(e){if(a(t)){i=gi(e)}else{i=mi(e,t)}if(i){di=i}}return di._abbr}function mi(e,t){if(t!==null){var i=ai;t.abbr=e;if(li[e]!=null){P("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");i=li[e]._config}else if(t.parentLocale!=null){if(li[t.parentLocale]!=null){i=li[t.parentLocale]._config}else{if(!hi[t.parentLocale]){hi[t.parentLocale]=[]}hi[t.parentLocale].push({name:e,config:t});return null}}li[e]=new F(N(i,t));if(hi[e]){hi[e].forEach(function(e){mi(e.name,e.config)})}pi(e);return li[e]}else{delete li[e];return null}}function vi(e,t){if(t!=null){var i,n=ai;if(li[e]!=null){n=li[e]._config}t=N(n,t);i=new F(t);i.parentLocale=li[e];li[e]=i;pi(e)}else{if(li[e]!=null){if(li[e].parentLocale!=null){li[e]=li[e].parentLocale}else if(li[e]!=null){delete li[e]}}}return li[e]}function gi(e){var t;if(e&&e._locale&&e._locale._abbr){e=e._locale._abbr}if(!e){return di}if(!s(e)){t=ci(e);if(t){return t}e=[e]}return fi(e)}function yi(){return $(li)}function bi(e){var t;var i=e._a;if(i&&m(e).overflow===-2){t=i[Ye]<0||i[Ye]>11?Ye:i[Ve]<1||i[Ve]>tt(i[We],i[Ye])?Ve:i[qe]<0||i[qe]>24||i[qe]===24&&(i[Ge]!==0||i[Xe]!==0||i[Ze]!==0)?qe:i[Ge]<0||i[Ge]>59?Ge:i[Xe]<0||i[Xe]>59?Xe:i[Ze]<0||i[Ze]>999?Ze:-1;if(m(e)._overflowDayOfYear&&(t<We||t>Ve)){t=Ve}if(m(e)._overflowWeeks&&t===-1){t=Ke}if(m(e)._overflowWeekday&&t===-1){t=Qe}m(e).overflow=t}return e}var wi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var _i=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var xi=/Z|[+-]\d\d(?::?\d\d)?/;var ki=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/]];var Ci=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]];var Si=/^\/?Date\((\-?\d+)/i;function Ti(e){var t,i,n=e._i,s=wi.exec(n)||_i.exec(n),r,o,a,l;if(s){m(e).iso=true;for(t=0,i=ki.length;t<i;t++){if(ki[t][1].exec(s[1])){o=ki[t][0];r=ki[t][2]!==false;break}}if(o==null){e._isValid=false;return}if(s[3]){for(t=0,i=Ci.length;t<i;t++){if(Ci[t][1].exec(s[3])){a=(s[2]||" ")+Ci[t][0];break}}if(a==null){e._isValid=false;return}}if(!r&&a!=null){e._isValid=false;return}if(s[4]){if(xi.exec(s[4])){l="Z"}else{e._isValid=false;return}}e._f=o+(a||"")+(l||"");Ni(e)}else{e._isValid=false}}var Mi=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;function Di(e){var t,i,n,s,r,o;var a={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"};var l="YXWVUTSRQPONZABCDEFGHIKLM";var h,d;t=e._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,"");i=Mi.exec(t);if(i){n=i[1]?"ddd"+(i[1].length===5?", ":" "):"";s="D MMM "+(i[2].length>10?"YYYY ":"YY ");r="HH:mm"+(i[4]?":ss":"");if(i[1]){var u=new Date(i[2]);var f=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][u.getDay()];if(i[1].substr(0,3)!==f){m(e).weekdayMismatch=true;e._isValid=false;return}}switch(i[5].length){case 2:if(d===0){h=" +0000"}else{d=l.indexOf(i[5][1].toUpperCase())-12;h=(d<0?" -":" +")+(""+d).replace(/^-?/,"0").match(/..$/)[0]+"00"}break;case 4:h=a[i[5]];break;default:h=a[" GMT"]}i[5]=h;e._i=i.splice(1).join("");o=" ZZ";e._f=n+s+r+o;Ni(e);m(e).rfc2822=true}else{e._isValid=false}}function Ei(e){var t=Si.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}Ti(e);if(e._isValid===false){delete e._isValid}else{return}Di(e);if(e._isValid===false){delete e._isValid}else{return}i.createFromInputFallback(e)}i.createFromInputFallback=E("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are "+"discouraged and will be removed in an upcoming major release. Please refer to "+"http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Oi(e,t,i){if(e!=null){return e}if(t!=null){return t}return i}function Pi(e){var t=new Date(i.now());if(e._useUTC){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]}return[t.getFullYear(),t.getMonth(),t.getDate()]}function Ii(e){var t,i,n=[],s,r;if(e._d){return}s=Pi(e);if(e._w&&e._a[Ve]==null&&e._a[Ye]==null){Ai(e)}if(e._dayOfYear!=null){r=Oi(e._a[We],s[We]);if(e._dayOfYear>gt(r)||e._dayOfYear===0){m(e)._overflowDayOfYear=true}i=xt(r,0,e._dayOfYear);e._a[Ye]=i.getUTCMonth();e._a[Ve]=i.getUTCDate()}for(t=0;t<3&&e._a[t]==null;++t){e._a[t]=n[t]=s[t]}for(;t<7;t++){e._a[t]=n[t]=e._a[t]==null?t===2?1:0:e._a[t]}if(e._a[qe]===24&&e._a[Ge]===0&&e._a[Xe]===0&&e._a[Ze]===0){e._nextDay=true;e._a[qe]=0}e._d=(e._useUTC?xt:_t).apply(null,n);if(e._tzm!=null){e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm)}if(e._nextDay){e._a[qe]=24}}function Ai(e){var t,i,n,s,r,o,a,l;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){r=1;o=4;i=Oi(t.GG,e._a[We],St(Bi(),1,4).year);n=Oi(t.W,1);s=Oi(t.E,1);if(s<1||s>7){l=true}}else{r=e._locale._week.dow;o=e._locale._week.doy;var h=St(Bi(),r,o);i=Oi(t.gg,e._a[We],h.year);n=Oi(t.w,h.week);if(t.d!=null){s=t.d;if(s<0||s>6){l=true}}else if(t.e!=null){s=t.e+r;if(t.e<0||t.e>6){l=true}}else{s=r}}if(n<1||n>Tt(i,r,o)){m(e)._overflowWeeks=true}else if(l!=null){m(e)._overflowWeekday=true}else{a=Ct(i,n,s,r,o);e._a[We]=a.year;e._dayOfYear=a.dayOfYear}}i.ISO_8601=function(){};i.RFC_2822=function(){};function Ni(e){if(e._f===i.ISO_8601){Ti(e);return}if(e._f===i.RFC_2822){Di(e);return}e._a=[];m(e).empty=true;var t=""+e._i,n,s,r,o,a,l=t.length,h=0;r=ge(e._f,e._locale).match(he)||[];for(n=0;n<r.length;n++){o=r[n];s=(t.match($e(o,e))||[])[0];if(s){a=t.substr(0,t.indexOf(s));if(a.length>0){m(e).unusedInput.push(a)}t=t.slice(t.indexOf(s)+s.length);h+=s.length}if(fe[o]){if(s){m(e).empty=false}else{m(e).unusedTokens.push(o)}Ue(o,s,e)}else if(e._strict&&!s){m(e).unusedTokens.push(o)}}m(e).charsLeftOver=l-h;if(t.length>0){m(e).unusedInput.push(t)}if(e._a[qe]<=12&&m(e).bigHour===true&&e._a[qe]>0){m(e).bigHour=undefined}m(e).parsedDateParts=e._a.slice(0);m(e).meridiem=e._meridiem;e._a[qe]=Fi(e._locale,e._a[qe],e._meridiem);Ii(e);bi(e)}function Fi(e,t,i){var n;if(i==null){return t}if(e.meridiemHour!=null){return e.meridiemHour(t,i)}else if(e.isPM!=null){n=e.isPM(i);if(n&&t<12){t+=12}if(!n&&t===12){t=0}return t}else{return t}}function Ri(e){var t,i,n,s,r;if(e._f.length===0){m(e).invalidFormat=true;e._d=new Date(NaN);return}for(s=0;s<e._f.length;s++){r=0;t=_({},e);if(e._useUTC!=null){t._useUTC=e._useUTC}t._f=e._f[s];Ni(t);if(!y(t)){continue}r+=m(t).charsLeftOver;r+=m(t).unusedTokens.length*10;m(t).score=r;if(n==null||r<n){n=r;i=t}}f(e,i||t)}function $i(e){if(e._d){return}var t=J(e._i);e._a=d([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)});Ii(e)}function Li(e){var t=new k(bi(zi(e)));if(t._nextDay){t.add(1,"d");t._nextDay=undefined}return t}function zi(e){var t=e._i,i=e._f;e._locale=e._locale||gi(e._l);if(t===null||i===undefined&&t===""){return b({nullInput:true})}if(typeof t==="string"){e._i=t=e._locale.preparse(t)}if(C(t)){return new k(bi(t))}else if(h(t)){e._d=t}else if(s(i)){Ri(e)}else if(i){Ni(e)}else{ji(e)}if(!y(e)){e._d=null}return e}function ji(e){var t=e._i;if(a(t)){e._d=new Date(i.now())}else if(h(t)){e._d=new Date(t.valueOf())}else if(typeof t==="string"){Ei(e)}else if(s(t)){e._a=d(t.slice(0),function(e){return parseInt(e,10)});Ii(e)}else if(r(t)){$i(e)}else if(l(t)){e._d=new Date(t)}else{i.createFromInputFallback(e)}}function Hi(e,t,i,n,a){var l={};if(i===true||i===false){n=i;i=undefined}if(r(e)&&o(e)||s(e)&&e.length===0){e=undefined}l._isAMomentObject=true;l._useUTC=l._isUTC=a;l._l=i;l._i=e;l._f=t;l._strict=n;return Li(l)}function Bi(e,t,i,n){return Hi(e,t,i,n,false)}var Ui=E("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Bi.apply(null,arguments);if(this.isValid()&&e.isValid()){return e<this?this:e}else{return b()}});var Wi=E("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Bi.apply(null,arguments);if(this.isValid()&&e.isValid()){return e>this?this:e}else{return b()}});function Yi(e,t){var i,n;if(t.length===1&&s(t[0])){t=t[0]}if(!t.length){return Bi()}i=t[0];for(n=1;n<t.length;++n){if(!t[n].isValid()||t[n][e](i)){i=t[n]}}return i}function Vi(){var e=[].slice.call(arguments,0);return Yi("isBefore",e)}function qi(){var e=[].slice.call(arguments,0);return Yi("isAfter",e)}var Gi=function(){return Date.now?Date.now():+new Date};var Xi=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Zi(e){for(var t in e){if(!(Xi.indexOf(t)!==-1&&(e[t]==null||!isNaN(e[t])))){return false}}var i=false;for(var n=0;n<Xi.length;++n){if(e[Xi[n]]){if(i){return false}if(parseFloat(e[Xi[n]])!==T(e[Xi[n]])){i=true}}}return true}function Ki(){return this._isValid}function Qi(){return _n(NaN)}function Ji(e){var t=J(e),i=t.year||0,n=t.quarter||0,s=t.month||0,r=t.week||0,o=t.day||0,a=t.hour||0,l=t.minute||0,h=t.second||0,d=t.millisecond||0;this._isValid=Zi(t);this._milliseconds=+d+h*1e3+l*6e4+a*1e3*60*60;this._days=+o+r*7;this._months=+s+n*3+i*12;this._data={};this._locale=gi();this._bubble()}function en(e){return e instanceof Ji}function tn(e){if(e<0){return Math.round(-1*e)*-1}else{return Math.round(e)}}function nn(e,t){ce(e,0,0,function(){var e=this.utcOffset();var i="+";if(e<0){e=-e;i="-"}return i+le(~~(e/60),2)+t+le(~~e%60,2)})}nn("Z",":");nn("ZZ","");Re("Z",Ie);Re("ZZ",Ie);He(["Z","ZZ"],function(e,t,i){i._useUTC=true;i._tzm=rn(Ie,e)});var sn=/([\+\-]|\d\d)/gi;function rn(e,t){var i=(t||"").match(e);if(i===null){return null}var n=i[i.length-1]||[];var s=(n+"").match(sn)||["-",0,0];var r=+(s[1]*60)+T(s[2]);return r===0?0:s[0]==="+"?r:-r}function on(e,t){var n,s;if(t._isUTC){n=t.clone();s=(C(e)||h(e)?e.valueOf():Bi(e).valueOf())-n.valueOf();n._d.setTime(n._d.valueOf()+s);i.updateOffset(n,false);return n}else{return Bi(e).local()}}function an(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}i.updateOffset=function(){};function ln(e,t,n){var s=this._offset||0,r;if(!this.isValid()){return e!=null?this:NaN}if(e!=null){if(typeof e==="string"){e=rn(Ie,e);if(e===null){return this}}else if(Math.abs(e)<16&&!n){e=e*60}if(!this._isUTC&&t){r=an(this)}this._offset=e;this._isUTC=true;if(r!=null){this.add(r,"m")}if(s!==e){if(!t||this._changeInProgress){Tn(this,_n(e-s,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;i.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?s:an(this)}}function hn(e,t){if(e!=null){if(typeof e!=="string"){e=-e}this.utcOffset(e,t);return this}else{return-this.utcOffset()}}function dn(e){return this.utcOffset(0,e)}function un(e){if(this._isUTC){this.utcOffset(0,e);this._isUTC=false;if(e){this.subtract(an(this),"m")}}return this}function fn(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true)}else if(typeof this._i==="string"){var e=rn(Pe,this._i);if(e!=null){this.utcOffset(e)}else{this.utcOffset(0,true)}}return this}function cn(e){if(!this.isValid()){return false}e=e?Bi(e).utcOffset():0;return(this.utcOffset()-e)%60===0}function pn(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function mn(){if(!a(this._isDSTShifted)){return this._isDSTShifted}var e={};_(e,this);e=zi(e);if(e._a){var t=e._isUTC?c(e._a):Bi(e._a);this._isDSTShifted=this.isValid()&&M(e._a,t.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function vn(){return this.isValid()?!this._isUTC:false}function gn(){return this.isValid()?this._isUTC:false}function yn(){return this.isValid()?this._isUTC&&this._offset===0:false}var bn=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/;var wn=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;function _n(e,t){var i=e,n=null,s,r,o;if(en(e)){i={ms:e._milliseconds,d:e._days,M:e._months}}else if(l(e)){i={};if(t){i[t]=e}else{i.milliseconds=e}}else if(!!(n=bn.exec(e))){s=n[1]==="-"?-1:1;i={y:0,d:T(n[Ve])*s,h:T(n[qe])*s,m:T(n[Ge])*s,s:T(n[Xe])*s,ms:T(tn(n[Ze]*1e3))*s}}else if(!!(n=wn.exec(e))){s=n[1]==="-"?-1:1;i={y:xn(n[2],s),M:xn(n[3],s),w:xn(n[4],s),d:xn(n[5],s),h:xn(n[6],s),m:xn(n[7],s),s:xn(n[8],s)}}else if(i==null){i={}}else if(typeof i==="object"&&("from"in i||"to"in i)){o=Cn(Bi(i.from),Bi(i.to));i={};i.ms=o.milliseconds;i.M=o.months}r=new Ji(i);if(en(e)&&u(e,"_locale")){r._locale=e._locale}return r}_n.fn=Ji.prototype;_n.invalid=Qi;function xn(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function kn(e,t){var i={milliseconds:0,months:0};i.months=t.month()-e.month()+(t.year()-e.year())*12;if(e.clone().add(i.months,"M").isAfter(t)){--i.months}i.milliseconds=+t-+e.clone().add(i.months,"M");return i}function Cn(e,t){var i;if(!(e.isValid()&&t.isValid())){return{milliseconds:0,months:0}}t=on(t,e);if(e.isBefore(t)){i=kn(e,t)}else{i=kn(t,e);i.milliseconds=-i.milliseconds;i.months=-i.months}return i}function Sn(e,t){return function(i,n){var s,r;if(n!==null&&!isNaN(+n)){P(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");r=i;i=n;n=r}i=typeof i==="string"?+i:i;s=_n(i,n);Tn(this,s,e);return this}}function Tn(e,t,n,s){var r=t._milliseconds,o=tn(t._days),a=tn(t._months);if(!e.isValid()){return}s=s==null?true:s;if(r){e._d.setTime(e._d.valueOf()+r*n)}if(o){re(e,"Date",se(e,"Date")+o*n)}if(a){ht(e,se(e,"Month")+a*n)}if(s){i.updateOffset(e,o||a)}}var Mn=Sn(1,"add");var Dn=Sn(-1,"subtract");function En(e,t){var i=e.diff(t,"days",true);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function On(e,t){var n=e||Bi(),s=on(n,this).startOf("day"),r=i.calendarFormat(this,s)||"sameElse";var o=t&&(I(t[r])?t[r].call(this,n):t[r]);return this.format(o||this.localeData().calendar(r,this,Bi(n)))}function Pn(){return new k(this)}function In(e,t){var i=C(e)?e:Bi(e);if(!(this.isValid()&&i.isValid())){return false}t=Q(!a(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()>i.valueOf()}else{return i.valueOf()<this.clone().startOf(t).valueOf()}}function An(e,t){var i=C(e)?e:Bi(e);if(!(this.isValid()&&i.isValid())){return false}t=Q(!a(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()<i.valueOf()}else{return this.clone().endOf(t).valueOf()<i.valueOf()}}function Nn(e,t,i,n){n=n||"()";return(n[0]==="("?this.isAfter(e,i):!this.isBefore(e,i))&&(n[1]===")"?this.isBefore(t,i):!this.isAfter(t,i))}function Fn(e,t){var i=C(e)?e:Bi(e),n;if(!(this.isValid()&&i.isValid())){return false}t=Q(t||"millisecond");if(t==="millisecond"){return this.valueOf()===i.valueOf()}else{n=i.valueOf();return this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()}}function Rn(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function $n(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Ln(e,t,i){var n,s,r,o;if(!this.isValid()){return NaN}n=on(e,this);if(!n.isValid()){return NaN}s=(n.utcOffset()-this.utcOffset())*6e4;t=Q(t);if(t==="year"||t==="month"||t==="quarter"){o=zn(this,n);if(t==="quarter"){o=o/3}else if(t==="year"){o=o/12}}else{r=this-n;o=t==="second"?r/1e3:t==="minute"?r/6e4:t==="hour"?r/36e5:t==="day"?(r-s)/864e5:t==="week"?(r-s)/6048e5:r}return i?o:S(o)}function zn(e,t){var i=(t.year()-e.year())*12+(t.month()-e.month()),n=e.clone().add(i,"months"),s,r;if(t-n<0){s=e.clone().add(i-1,"months");r=(t-n)/(n-s)}else{s=e.clone().add(i+1,"months");r=(t-n)/(s-n)}return-(i+r)||0}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function jn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Hn(){if(!this.isValid()){return null}var e=this.clone().utc();if(e.year()<0||e.year()>9999){return ve(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}if(I(Date.prototype.toISOString)){return this.toDate().toISOString()}return ve(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function Bn(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)"}var e="moment";var t="";if(!this.isLocal()){e=this.utcOffset()===0?"moment.utc":"moment.parseZone";t="Z"}var i="["+e+'("]';var n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";var s="-MM-DD[T]HH:mm:ss.SSS";var r=t+'[")]';return this.format(i+n+s+r)}function Un(e){if(!e){e=this.isUtc()?i.defaultFormatUtc:i.defaultFormat}var t=ve(this,e);return this.localeData().postformat(t)}function Wn(e,t){if(this.isValid()&&(C(e)&&e.isValid()||Bi(e).isValid())){return _n({to:this,from:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function Yn(e){return this.from(Bi(),e)}function Vn(e,t){if(this.isValid()&&(C(e)&&e.isValid()||Bi(e).isValid())){return _n({from:this,to:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function qn(e){return this.to(Bi(),e)}function Gn(e){var t;if(e===undefined){return this._locale._abbr}else{t=gi(e);if(t!=null){this._locale=t}return this}}var Xn=E("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){if(e===undefined){return this.localeData()}else{return this.locale(e)}});function Zn(){return this._locale}function Kn(e){e=Q(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(e==="week"){this.weekday(0)}if(e==="isoWeek"){this.isoWeekday(1)}if(e==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function Qn(e){e=Q(e);if(e===undefined||e==="millisecond"){return this;
}if(e==="date"){e="day"}return this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function Jn(){return this._d.valueOf()-(this._offset||0)*6e4}function es(){return Math.floor(this.valueOf()/1e3)}function ts(){return new Date(this.valueOf())}function is(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function ns(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function ss(){return this.isValid()?this.toISOString():null}function rs(){return y(this)}function os(){return f({},m(this))}function as(){return m(this).overflow}function ls(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ce(0,["gg",2],0,function(){return this.weekYear()%100});ce(0,["GG",2],0,function(){return this.isoWeekYear()%100});function hs(e,t){ce(0,[e,e.length],0,t)}hs("gggg","weekYear");hs("ggggg","weekYear");hs("GGGG","isoWeekYear");hs("GGGGG","isoWeekYear");K("weekYear","gg");K("isoWeekYear","GG");te("weekYear",1);te("isoWeekYear",1);Re("G",Oe);Re("g",Oe);Re("GG",ke,be);Re("gg",ke,be);Re("GGGG",Me,_e);Re("gggg",Me,_e);Re("GGGGG",De,xe);Re("ggggg",De,xe);Be(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,n){t[n.substr(0,2)]=T(e)});Be(["gg","GG"],function(e,t,n,s){t[s]=i.parseTwoDigitYear(e)});function ds(e){return ps.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function us(e){return ps.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function fs(){return Tt(this.year(),1,4)}function cs(){var e=this.localeData()._week;return Tt(this.year(),e.dow,e.doy)}function ps(e,t,i,n,s){var r;if(e==null){return St(this,n,s).year}else{r=Tt(e,n,s);if(t>r){t=r}return ms.call(this,e,t,i,n,s)}}function ms(e,t,i,n,s){var r=Ct(e,t,i,n,s),o=xt(r.year,0,r.dayOfYear);this.year(o.getUTCFullYear());this.month(o.getUTCMonth());this.date(o.getUTCDate());return this}ce("Q",0,"Qo","quarter");K("quarter","Q");te("quarter",7);Re("Q",ye);He("Q",function(e,t){t[Ye]=(T(e)-1)*3});function vs(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}ce("D",["DD",2],"Do","date");K("date","D");te("date",9);Re("D",ke);Re("DD",ke,be);Re("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});He(["D","DD"],Ve);He("Do",function(e,t){t[Ve]=T(e.match(ke)[0],10)});var gs=ne("Date",true);ce("DDD",["DDDD",3],"DDDo","dayOfYear");K("dayOfYear","DDD");te("dayOfYear",4);Re("DDD",Te);Re("DDDD",we);He(["DDD","DDDD"],function(e,t,i){i._dayOfYear=T(e)});function ys(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}ce("m",["mm",2],0,"minute");K("minute","m");te("minute",14);Re("m",ke);Re("mm",ke,be);He(["m","mm"],Ge);var bs=ne("Minutes",false);ce("s",["ss",2],0,"second");K("second","s");te("second",15);Re("s",ke);Re("ss",ke,be);He(["s","ss"],Xe);var ws=ne("Seconds",false);ce("S",0,0,function(){return~~(this.millisecond()/100)});ce(0,["SS",2],0,function(){return~~(this.millisecond()/10)});ce(0,["SSS",3],0,"millisecond");ce(0,["SSSS",4],0,function(){return this.millisecond()*10});ce(0,["SSSSS",5],0,function(){return this.millisecond()*100});ce(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});ce(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});ce(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});ce(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});K("millisecond","ms");te("millisecond",16);Re("S",Te,ye);Re("SS",Te,be);Re("SSS",Te,we);var _s;for(_s="SSSS";_s.length<=9;_s+="S"){Re(_s,Ee)}function xs(e,t){t[Ze]=T(("0."+e)*1e3)}for(_s="S";_s.length<=9;_s+="S"){He(_s,xs)}var ks=ne("Milliseconds",false);ce("z",0,0,"zoneAbbr");ce("zz",0,0,"zoneName");function Cs(){return this._isUTC?"UTC":""}function Ss(){return this._isUTC?"Coordinated Universal Time":""}var Ts=k.prototype;Ts.add=Mn;Ts.calendar=On;Ts.clone=Pn;Ts.diff=Ln;Ts.endOf=Qn;Ts.format=Un;Ts.from=Wn;Ts.fromNow=Yn;Ts.to=Vn;Ts.toNow=qn;Ts.get=oe;Ts.invalidAt=as;Ts.isAfter=In;Ts.isBefore=An;Ts.isBetween=Nn;Ts.isSame=Fn;Ts.isSameOrAfter=Rn;Ts.isSameOrBefore=$n;Ts.isValid=rs;Ts.lang=Xn;Ts.locale=Gn;Ts.localeData=Zn;Ts.max=Wi;Ts.min=Ui;Ts.parsingFlags=os;Ts.set=ae;Ts.startOf=Kn;Ts.subtract=Dn;Ts.toArray=is;Ts.toObject=ns;Ts.toDate=ts;Ts.toISOString=Hn;Ts.inspect=Bn;Ts.toJSON=ss;Ts.toString=jn;Ts.unix=es;Ts.valueOf=Jn;Ts.creationData=ls;Ts.year=bt;Ts.isLeapYear=wt;Ts.weekYear=ds;Ts.isoWeekYear=us;Ts.quarter=Ts.quarters=vs;Ts.month=dt;Ts.daysInMonth=ut;Ts.week=Ts.weeks=Pt;Ts.isoWeek=Ts.isoWeeks=It;Ts.weeksInYear=cs;Ts.isoWeeksInYear=fs;Ts.date=gs;Ts.day=Ts.days=Ut;Ts.weekday=Wt;Ts.isoWeekday=Yt;Ts.dayOfYear=ys;Ts.hour=Ts.hours=oi;Ts.minute=Ts.minutes=bs;Ts.second=Ts.seconds=ws;Ts.millisecond=Ts.milliseconds=ks;Ts.utcOffset=ln;Ts.utc=dn;Ts.local=un;Ts.parseZone=fn;Ts.hasAlignedHourOffset=cn;Ts.isDST=pn;Ts.isLocal=vn;Ts.isUtcOffset=gn;Ts.isUtc=yn;Ts.isUTC=yn;Ts.zoneAbbr=Cs;Ts.zoneName=Ss;Ts.dates=E("dates accessor is deprecated. Use date instead.",gs);Ts.months=E("months accessor is deprecated. Use month instead",dt);Ts.years=E("years accessor is deprecated. Use year instead",bt);Ts.zone=E("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",hn);Ts.isDSTShifted=E("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",mn);function Ms(e){return Bi(e*1e3)}function Ds(){return Bi.apply(null,arguments).parseZone()}function Es(e){return e}var Os=F.prototype;Os.calendar=z;Os.longDateFormat=H;Os.invalidDate=U;Os.ordinal=V;Os.preparse=Es;Os.postformat=Es;Os.relativeTime=G;Os.pastFuture=X;Os.set=A;Os.months=st;Os.monthsShort=ot;Os.monthsParse=lt;Os.monthsRegex=mt;Os.monthsShortRegex=ct;Os.week=Mt;Os.firstDayOfYear=Ot;Os.firstDayOfWeek=Et;Os.weekdays=Rt;Os.weekdaysMin=jt;Os.weekdaysShort=Lt;Os.weekdaysParse=Bt;Os.weekdaysRegex=qt;Os.weekdaysShortRegex=Xt;Os.weekdaysMinRegex=Kt;Os.isPM=ni;Os.meridiem=ri;function Ps(e,t,i,n){var s=gi();var r=c().set(n,t);return s[i](r,e)}function Is(e,t,i){if(l(e)){t=e;e=undefined}e=e||"";if(t!=null){return Ps(e,t,i,"month")}var n;var s=[];for(n=0;n<12;n++){s[n]=Ps(e,n,i,"month")}return s}function As(e,t,i,n){if(typeof e==="boolean"){if(l(t)){i=t;t=undefined}t=t||""}else{t=e;i=t;e=false;if(l(t)){i=t;t=undefined}t=t||""}var s=gi(),r=e?s._week.dow:0;if(i!=null){return Ps(t,(i+r)%7,n,"day")}var o;var a=[];for(o=0;o<7;o++){a[o]=Ps(t,(o+r)%7,n,"day")}return a}function Ns(e,t){return Is(e,t,"months")}function Fs(e,t){return Is(e,t,"monthsShort")}function Rs(e,t,i){return As(e,t,i,"weekdays")}function $s(e,t,i){return As(e,t,i,"weekdaysShort")}function Ls(e,t,i){return As(e,t,i,"weekdaysMin")}pi("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=T(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+i}});i.lang=E("moment.lang is deprecated. Use moment.locale instead.",pi);i.langData=E("moment.langData is deprecated. Use moment.localeData instead.",gi);var zs=Math.abs;function js(){var e=this._data;this._milliseconds=zs(this._milliseconds);this._days=zs(this._days);this._months=zs(this._months);e.milliseconds=zs(e.milliseconds);e.seconds=zs(e.seconds);e.minutes=zs(e.minutes);e.hours=zs(e.hours);e.months=zs(e.months);e.years=zs(e.years);return this}function Hs(e,t,i,n){var s=_n(t,i);e._milliseconds+=n*s._milliseconds;e._days+=n*s._days;e._months+=n*s._months;return e._bubble()}function Bs(e,t){return Hs(this,e,t,1)}function Us(e,t){return Hs(this,e,t,-1)}function Ws(e){if(e<0){return Math.floor(e)}else{return Math.ceil(e)}}function Ys(){var e=this._milliseconds;var t=this._days;var i=this._months;var n=this._data;var s,r,o,a,l;if(!(e>=0&&t>=0&&i>=0||e<=0&&t<=0&&i<=0)){e+=Ws(qs(i)+t)*864e5;t=0;i=0}n.milliseconds=e%1e3;s=S(e/1e3);n.seconds=s%60;r=S(s/60);n.minutes=r%60;o=S(r/60);n.hours=o%24;t+=S(o/24);l=S(Vs(t));i+=l;t-=Ws(qs(l));a=S(i/12);i%=12;n.days=t;n.months=i;n.years=a;return this}function Vs(e){return e*4800/146097}function qs(e){return e*146097/4800}function Gs(e){if(!this.isValid()){return NaN}var t;var i;var n=this._milliseconds;e=Q(e);if(e==="month"||e==="year"){t=this._days+n/864e5;i=this._months+Vs(t);return e==="month"?i:i/12}else{t=this._days+Math.round(qs(this._months));switch(e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return t*24+n/36e5;case"minute":return t*1440+n/6e4;case"second":return t*86400+n/1e3;case"millisecond":return Math.floor(t*864e5)+n;default:throw new Error("Unknown unit "+e)}}}function Xs(){if(!this.isValid()){return NaN}return this._milliseconds+this._days*864e5+this._months%12*2592e6+T(this._months/12)*31536e6}function Zs(e){return function(){return this.as(e)}}var Ks=Zs("ms");var Qs=Zs("s");var Js=Zs("m");var er=Zs("h");var tr=Zs("d");var ir=Zs("w");var nr=Zs("M");var sr=Zs("y");function rr(e){e=Q(e);return this.isValid()?this[e+"s"]():NaN}function or(e){return function(){return this.isValid()?this._data[e]:NaN}}var ar=or("milliseconds");var lr=or("seconds");var hr=or("minutes");var dr=or("hours");var ur=or("days");var fr=or("months");var cr=or("years");function pr(){return S(this.days()/7)}var mr=Math.round;var vr={ss:44,s:45,m:45,h:22,d:26,M:11};function gr(e,t,i,n,s){return s.relativeTime(t||1,!!i,e,n)}function yr(e,t,i){var n=_n(e).abs();var s=mr(n.as("s"));var r=mr(n.as("m"));var o=mr(n.as("h"));var a=mr(n.as("d"));var l=mr(n.as("M"));var h=mr(n.as("y"));var d=s<=vr.ss&&["s",s]||s<vr.s&&["ss",s]||r<=1&&["m"]||r<vr.m&&["mm",r]||o<=1&&["h"]||o<vr.h&&["hh",o]||a<=1&&["d"]||a<vr.d&&["dd",a]||l<=1&&["M"]||l<vr.M&&["MM",l]||h<=1&&["y"]||["yy",h];d[2]=t;d[3]=+e>0;d[4]=i;return gr.apply(null,d)}function br(e){if(e===undefined){return mr}if(typeof e==="function"){mr=e;return true}return false}function wr(e,t){if(vr[e]===undefined){return false}if(t===undefined){return vr[e]}vr[e]=t;if(e==="s"){vr.ss=t-1}return true}function _r(e){if(!this.isValid()){return this.localeData().invalidDate()}var t=this.localeData();var i=yr(this,!e,t);if(e){i=t.pastFuture(+this,i)}return t.postformat(i)}var xr=Math.abs;function kr(){if(!this.isValid()){return this.localeData().invalidDate()}var e=xr(this._milliseconds)/1e3;var t=xr(this._days);var i=xr(this._months);var n,s,r;n=S(e/60);s=S(n/60);e%=60;n%=60;r=S(i/12);i%=12;var o=r;var a=i;var l=t;var h=s;var d=n;var u=e;var f=this.asSeconds();if(!f){return"P0D"}return(f<0?"-":"")+"P"+(o?o+"Y":"")+(a?a+"M":"")+(l?l+"D":"")+(h||d||u?"T":"")+(h?h+"H":"")+(d?d+"M":"")+(u?u+"S":"")}var Cr=Ji.prototype;Cr.isValid=Ki;Cr.abs=js;Cr.add=Bs;Cr.subtract=Us;Cr.as=Gs;Cr.asMilliseconds=Ks;Cr.asSeconds=Qs;Cr.asMinutes=Js;Cr.asHours=er;Cr.asDays=tr;Cr.asWeeks=ir;Cr.asMonths=nr;Cr.asYears=sr;Cr.valueOf=Xs;Cr._bubble=Ys;Cr.get=rr;Cr.milliseconds=ar;Cr.seconds=lr;Cr.minutes=hr;Cr.hours=dr;Cr.days=ur;Cr.weeks=pr;Cr.months=fr;Cr.years=cr;Cr.humanize=_r;Cr.toISOString=kr;Cr.toString=kr;Cr.toJSON=kr;Cr.locale=Gn;Cr.localeData=Zn;Cr.toIsoString=E("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",kr);Cr.lang=Xn;ce("X",0,0,"unix");ce("x",0,0,"valueOf");Re("x",Oe);Re("X",Ae);He("X",function(e,t,i){i._d=new Date(parseFloat(e,10)*1e3)});He("x",function(e,t,i){i._d=new Date(T(e))});i.version="2.18.1";n(Bi);i.fn=Ts;i.min=Vi;i.max=qi;i.now=Gi;i.utc=c;i.unix=Ms;i.months=Ns;i.isDate=h;i.locale=pi;i.invalid=b;i.duration=_n;i.isMoment=C;i.weekdays=Rs;i.parseZone=Ds;i.localeData=gi;i.isDuration=en;i.monthsShort=Fs;i.weekdaysMin=Ls;i.defineLocale=mi;i.updateLocale=vi;i.locales=yi;i.weekdaysShort=$s;i.normalizeUnits=Q;i.relativeTimeRounding=br;i.relativeTimeThreshold=wr;i.calendarFormat=En;i.prototype=Ts;return i})}).call(t,i(84)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){e.deprecate=function(){};e.paths=[];e.children=[];e.webpackPolyfill=1}return e}},function(e,t){function i(e){throw new Error("Cannot find module '"+e+"'.")}i.keys=function(){return[]};i.resolve=i;e.exports=i;i.id=85},function(e,t){(function(t){"use strict";var i;var n=typeof window!=="undefined"?window:typeof t!=="undefined"?t:null;if(n&&n.crypto&&crypto.getRandomValues){var s=new Uint8Array(16);i=function e(){crypto.getRandomValues(s);return s}}if(!i){var r=new Array(16);i=function e(){for(var t=0,i;t<16;t++){if((t&3)===0)i=Math.random()*4294967296;r[t]=i>>>((t&3)<<3)&255}return r}}var o=[];var a={};for(var l=0;l<256;l++){o[l]=(l+256).toString(16).substr(1);a[o[l]]=l}function h(e,t,i){var n=t&&i||0,s=0;t=t||[];e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){if(s<16){t[n+s++]=a[e]}});while(s<16){t[n+s++]=0}return t}function d(e,t){var i=t||0,n=o;return n[e[i++]]+n[e[i++]]+n[e[i++]]+n[e[i++]]+"-"+n[e[i++]]+n[e[i++]]+"-"+n[e[i++]]+n[e[i++]]+"-"+n[e[i++]]+n[e[i++]]+"-"+n[e[i++]]+n[e[i++]]+n[e[i++]]+n[e[i++]]+n[e[i++]]+n[e[i++]]}var u=i();var f=[u[0]|1,u[1],u[2],u[3],u[4],u[5]];var c=(u[6]<<8|u[7])&16383;var p=0,m=0;function v(e,t,i){var n=t&&i||0;var s=t||[];e=e||{};var r=e.clockseq!==undefined?e.clockseq:c;var o=e.msecs!==undefined?e.msecs:(new Date).getTime();var a=e.nsecs!==undefined?e.nsecs:m+1;var l=o-p+(a-m)/1e4;if(l<0&&e.clockseq===undefined){r=r+1&16383}if((l<0||o>p)&&e.nsecs===undefined){a=0}if(a>=1e4){throw new Error("uuid.v1(): Can't create more than 10M uuids/sec")}p=o;m=a;c=r;o+=122192928e5;var h=((o&268435455)*1e4+a)%4294967296;s[n++]=h>>>24&255;s[n++]=h>>>16&255;s[n++]=h>>>8&255;s[n++]=h&255;var u=o/4294967296*1e4&268435455;s[n++]=u>>>8&255;s[n++]=u&255;s[n++]=u>>>24&15|16;s[n++]=u>>>16&255;s[n++]=r>>>8|128;s[n++]=r&255;var v=e.node||f;for(var g=0;g<6;g++){s[n+g]=v[g]}return t?t:d(s)}function g(e,t,n){var s=t&&n||0;if(typeof e=="string"){t=e=="binary"?new Array(16):null;e=null}e=e||{};var r=e.random||(e.rng||i)();r[6]=r[6]&15|64;r[8]=r[8]&63|128;if(t){for(var o=0;o<16;o++){t[s+o]=r[o]}}return t||d(r)}var y=g;y.v1=v;y.v4=g;y.parse=h;y.unparse=d;e.exports=y}).call(t,function(){return this}())},function(e,t,i){"use strict";t.util=i(1);t.DOMutil=i(88);t.DataSet=i(89);t.DataView=i(93);t.Queue=i(92);t.Graph3d=i(94);t.graph3d={Camera:i(102),Filter:i(107),Point2d:i(101),Point3d:i(100),Slider:i(108),StepNumber:i(109)};t.moment=i(82);t.Hammer=i(112);t.keycharm=i(115)},function(e,t){"use strict";t.prepareElements=function(e){for(var t in e){if(e.hasOwnProperty(t)){e[t].redundant=e[t].used;e[t].used=[]}}};t.cleanupElements=function(e){for(var t in e){if(e.hasOwnProperty(t)){if(e[t].redundant){for(var i=0;i<e[t].redundant.length;i++){e[t].redundant[i].parentNode.removeChild(e[t].redundant[i])}e[t].redundant=[]}}}};t.resetElements=function(e){t.prepareElements(e);t.cleanupElements(e);t.prepareElements(e)};t.getSVGElement=function(e,t,i){var n;if(t.hasOwnProperty(e)){if(t[e].redundant.length>0){n=t[e].redundant[0];t[e].redundant.shift()}else{n=document.createElementNS("http://www.w3.org/2000/svg",e);i.appendChild(n)}}else{n=document.createElementNS("http://www.w3.org/2000/svg",e);t[e]={used:[],redundant:[]};i.appendChild(n)}t[e].used.push(n);return n};t.getDOMElement=function(e,t,i,n){var s;if(t.hasOwnProperty(e)){if(t[e].redundant.length>0){s=t[e].redundant[0];t[e].redundant.shift()}else{s=document.createElement(e);if(n!==undefined){i.insertBefore(s,n)}else{i.appendChild(s)}}}else{s=document.createElement(e);t[e]={used:[],redundant:[]};if(n!==undefined){i.insertBefore(s,n)}else{i.appendChild(s)}}t[e].used.push(s);return s};t.drawPoint=function(e,i,n,s,r,o){var a;if(n.style=="circle"){a=t.getSVGElement("circle",s,r);a.setAttributeNS(null,"cx",e);a.setAttributeNS(null,"cy",i);a.setAttributeNS(null,"r",.5*n.size)}else{a=t.getSVGElement("rect",s,r);a.setAttributeNS(null,"x",e-.5*n.size);a.setAttributeNS(null,"y",i-.5*n.size);a.setAttributeNS(null,"width",n.size);a.setAttributeNS(null,"height",n.size)}if(n.styles!==undefined){a.setAttributeNS(null,"style",n.styles)}a.setAttributeNS(null,"class",n.className+" vis-point");if(o){var l=t.getSVGElement("text",s,r);if(o.xOffset){e=e+o.xOffset}if(o.yOffset){i=i+o.yOffset}if(o.content){l.textContent=o.content}if(o.className){l.setAttributeNS(null,"class",o.className+" vis-label")}l.setAttributeNS(null,"x",e);l.setAttributeNS(null,"y",i)}return a};t.drawBar=function(e,i,n,s,r,o,a,l){if(s!=0){if(s<0){s*=-1;i-=s}var h=t.getSVGElement("rect",o,a);h.setAttributeNS(null,"x",e-.5*n);h.setAttributeNS(null,"y",i);h.setAttributeNS(null,"width",n);h.setAttributeNS(null,"height",s);h.setAttributeNS(null,"class",r);if(l){h.setAttributeNS(null,"style",l)}}}},function(e,t,i){"use strict";var n=i(90);var s=h(n);var r=i(62);var o=h(r);var a=i(58);var l=h(a);function h(e){return e&&e.__esModule?e:{default:e}}var d=i(1);var u=i(92);function f(e,t){if(e&&!Array.isArray(e)){t=e;e=null}this._options=t||{};this._data={};this.length=0;this._fieldId=this._options.fieldId||"id";this._type={};if(this._options.type){var i=(0,l["default"])(this._options.type);for(var n=0,s=i.length;n<s;n++){var r=i[n];var o=this._options.type[r];if(o=="Date"||o=="ISODate"||o=="ASPDate"){this._type[r]="Date"}else{this._type[r]=o}}}if(this._options.convert){throw new Error('Option "convert" is deprecated. Use "type" instead.')}this._subscribers={};if(e){this.add(e)}this.setOptions(t)}f.prototype.setOptions=function(e){if(e&&e.queue!==undefined){if(e.queue===false){if(this._queue){this._queue.destroy();delete this._queue}}else{if(!this._queue){this._queue=u.extend(this,{replace:["add","update","remove"]})}if((0,o["default"])(e.queue)==="object"){this._queue.setOptions(e.queue)}}}};f.prototype.on=function(e,t){var i=this._subscribers[e];if(!i){i=[];this._subscribers[e]=i}i.push({callback:t})};f.prototype.subscribe=function(){throw new Error("DataSet.subscribe is deprecated. Use DataSet.on instead.")};f.prototype.off=function(e,t){var i=this._subscribers[e];if(i){this._subscribers[e]=i.filter(function(e){return e.callback!=t})}};f.prototype.unsubscribe=function(){throw new Error("DataSet.unsubscribe is deprecated. Use DataSet.off instead.")};f.prototype._trigger=function(e,t,i){if(e=="*"){throw new Error("Cannot trigger event *")}var n=[];if(e in this._subscribers){n=n.concat(this._subscribers[e])}if("*"in this._subscribers){n=n.concat(this._subscribers["*"])}for(var s=0,r=n.length;s<r;s++){var o=n[s];if(o.callback){o.callback(e,t,i||null)}}};f.prototype.add=function(e,t){var i=[],n,s=this;if(Array.isArray(e)){for(var r=0,a=e.length;r<a;r++){n=s._addItem(e[r]);i.push(n)}}else if(e&&(typeof e==="undefined"?"undefined":(0,o["default"])(e))==="object"){n=s._addItem(e);i.push(n)}else{throw new Error("Unknown dataType")}if(i.length){this._trigger("add",{items:i},t)}return i};f.prototype.update=function(e,t){var i=[];var n=[];var s=[];var r=[];var a=this;var l=a._fieldId;var h=function e(t){var o=t[l];if(a._data[o]){var h=d.extend({},a._data[o]);o=a._updateItem(t);n.push(o);r.push(t);s.push(h)}else{o=a._addItem(t);i.push(o)}};if(Array.isArray(e)){for(var u=0,f=e.length;u<f;u++){if(e[u]&&(0,o["default"])(e[u])==="object"){h(e[u])}else{console.warn("Ignoring input item, which is not an object at index "+u)}}}else if(e&&(typeof e==="undefined"?"undefined":(0,o["default"])(e))==="object"){h(e)}else{throw new Error("Unknown dataType")}if(i.length){this._trigger("add",{items:i},t)}if(n.length){var c={items:n,oldData:s,data:r};this._trigger("update",c,t)}return i.concat(n)};f.prototype.get=function(e){var t=this;var i,n,s;var r=d.getType(arguments[0]);if(r=="String"||r=="Number"){i=arguments[0];s=arguments[1]}else if(r=="Array"){n=arguments[0];s=arguments[1]}else{s=arguments[0]}var o;if(s&&s.returnType){var a=["Array","Object"];o=a.indexOf(s.returnType)==-1?"Array":s.returnType}else{o="Array"}var h=s&&s.type||this._options.type;var u=s&&s.filter;var f=[],c,p,m,v,g;if(i!=undefined){c=t._getItem(i,h);if(c&&u&&!u(c)){c=null}}else if(n!=undefined){for(v=0,g=n.length;v<g;v++){c=t._getItem(n[v],h);if(!u||u(c)){f.push(c)}}}else{p=(0,l["default"])(this._data);for(v=0,g=p.length;v<g;v++){m=p[v];c=t._getItem(m,h);if(!u||u(c)){f.push(c)}}}if(s&&s.order&&i==undefined){this._sort(f,s.order)}if(s&&s.fields){var y=s.fields;if(i!=undefined){c=this._filterFields(c,y)}else{for(v=0,g=f.length;v<g;v++){f[v]=this._filterFields(f[v],y)}}}if(o=="Object"){var b={},w;for(v=0,g=f.length;v<g;v++){w=f[v];b[w.id]=w}return b}else{if(i!=undefined){return c}else{return f}}};f.prototype.getIds=function(e){var t=this._data,i=e&&e.filter,n=e&&e.order,s=e&&e.type||this._options.type,r=(0,l["default"])(t),o,a,h,d,u,f=[];if(i){if(n){u=[];for(o=0,a=r.length;o<a;o++){h=r[o];d=this._getItem(h,s);if(i(d)){u.push(d)}}this._sort(u,n);for(o=0,a=u.length;o<a;o++){f.push(u[o][this._fieldId])}}else{for(o=0,a=r.length;o<a;o++){h=r[o];d=this._getItem(h,s);if(i(d)){f.push(d[this._fieldId])}}}}else{if(n){u=[];for(o=0,a=r.length;o<a;o++){h=r[o];u.push(t[h])}this._sort(u,n);for(o=0,a=u.length;o<a;o++){f.push(u[o][this._fieldId])}}else{for(o=0,a=r.length;o<a;o++){h=r[o];d=t[h];f.push(d[this._fieldId])}}}return f};f.prototype.getDataSet=function(){return this};f.prototype.forEach=function(e,t){var i=t&&t.filter,n=t&&t.type||this._options.type,s=this._data,r=(0,l["default"])(s),o,a,h,d;if(t&&t.order){var u=this.get(t);for(o=0,a=u.length;o<a;o++){h=u[o];d=h[this._fieldId];e(h,d)}}else{for(o=0,a=r.length;o<a;o++){d=r[o];h=this._getItem(d,n);if(!i||i(h)){e(h,d)}}}};f.prototype.map=function(e,t){var i=t&&t.filter,n=t&&t.type||this._options.type,s=[],r=this._data,o=(0,l["default"])(r),a,h,d,u;for(a=0,h=o.length;a<h;a++){d=o[a];u=this._getItem(d,n);if(!i||i(u)){s.push(e(u,d))}}if(t&&t.order){this._sort(s,t.order)}return s};f.prototype._filterFields=function(e,t){if(!e){return e}var i={},n=(0,l["default"])(e),s=n.length,r,o;if(Array.isArray(t)){for(r=0;r<s;r++){o=n[r];if(t.indexOf(o)!=-1){i[o]=e[o]}}}else{for(r=0;r<s;r++){o=n[r];if(t.hasOwnProperty(o)){i[t[o]]=e[o]}}}return i};f.prototype._sort=function(e,t){if(d.isString(t)){var i=t;e.sort(function(e,t){var n=e[i];var s=t[i];return n>s?1:n<s?-1:0})}else if(typeof t==="function"){e.sort(t)}else{throw new TypeError("Order must be a function or a string")}};f.prototype.remove=function(e,t){var i=[],n=[],s=[],r,o,a,l;s=Array.isArray(e)?e:[e];for(r=0,o=s.length;r<o;r++){l=this._remove(s[r]);if(l){a=l[this._fieldId];if(a!=undefined){i.push(a);n.push(l)}}}if(i.length){this._trigger("remove",{items:i,oldData:n},t)}return i};f.prototype._remove=function(e){var t,i;if(d.isNumber(e)||d.isString(e)){i=e}else if(e&&(typeof e==="undefined"?"undefined":(0,o["default"])(e))==="object"){i=e[this._fieldId]}if(i!==undefined&&this._data[i]){t=this._data[i];delete this._data[i];this.length--;return t}return null};f.prototype.clear=function(e){var t,i;var n=(0,l["default"])(this._data);var s=[];for(t=0,i=n.length;t<i;t++){s.push(this._data[n[t]])}this._data={};this.length=0;this._trigger("remove",{items:n,oldData:s},e);return n};f.prototype.max=function(e){var t=this._data,i=(0,l["default"])(t),n=null,s=null,r,o;for(r=0,o=i.length;r<o;r++){var a=i[r];var h=t[a];var d=h[e];if(d!=null&&(!n||d>s)){n=h;s=d}}return n};f.prototype.min=function(e){var t=this._data,i=(0,l["default"])(t),n=null,s=null,r,o;for(r=0,o=i.length;r<o;r++){var a=i[r];var h=t[a];var d=h[e];if(d!=null&&(!n||d<s)){n=h;s=d}}return n};f.prototype.distinct=function(e){var t=this._data;var i=(0,l["default"])(t);var n=[];var s=this._options.type&&this._options.type[e]||null;var r=0;var o,a,h;for(o=0,h=i.length;o<h;o++){var u=i[o];var f=t[u];var c=f[e];var p=false;for(a=0;a<r;a++){if(n[a]==c){p=true;break}}if(!p&&c!==undefined){n[r]=c;r++}}if(s){for(o=0,h=n.length;o<h;o++){n[o]=d.convert(n[o],s)}}return n};f.prototype._addItem=function(e){var t=e[this._fieldId];if(t!=undefined){if(this._data[t]){throw new Error("Cannot add item: item with id "+t+" already exists")}}else{t=d.randomUUID();e[this._fieldId]=t}var i={},n=(0,l["default"])(e),s,r;for(s=0,r=n.length;s<r;s++){var o=n[s];var a=this._type[o];i[o]=d.convert(e[o],a)}this._data[t]=i;this.length++;return t};f.prototype._getItem=function(e,t){var i,n,s,r;var o=this._data[e];if(!o){return null}var a={},h=(0,l["default"])(o);if(t){for(s=0,r=h.length;s<r;s++){i=h[s];n=o[i];a[i]=d.convert(n,t[i])}}else{for(s=0,r=h.length;s<r;s++){i=h[s];n=o[i];a[i]=n}}if(!a[this._fieldId]){a[this._fieldId]=o.id}return a};f.prototype._updateItem=function(e){var t=e[this._fieldId];if(t==undefined){throw new Error("Cannot update item: item has no id (item: "+(0,s["default"])(e)+")")}var i=this._data[t];if(!i){throw new Error("Cannot update item: no item with id "+t+" found")}var n=(0,l["default"])(e);for(var r=0,o=n.length;r<o;r++){var a=n[r];var h=this._type[a];i[a]=d.convert(e[a],h)}return t};e.exports=f},function(e,t,i){e.exports={default:i(91),__esModule:true}},function(e,t,i){var n=i(17),s=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function e(t){return s.stringify.apply(s,arguments)}},function(e,t){"use strict";function i(e){this.delay=null;this.max=Infinity;this._queue=[];this._timeout=null;this._extended=null;this.setOptions(e)}i.prototype.setOptions=function(e){if(e&&typeof e.delay!=="undefined"){this.delay=e.delay}if(e&&typeof e.max!=="undefined"){this.max=e.max}this._flushIfNeeded()};i.extend=function(e,t){var n=new i(t);if(e.flush!==undefined){throw new Error("Target object already has a property flush")}e.flush=function(){n.flush()};var s=[{name:"flush",original:undefined}];if(t&&t.replace){for(var r=0;r<t.replace.length;r++){var o=t.replace[r];s.push({name:o,original:e[o]});n.replace(e,o)}}n._extended={object:e,methods:s};return n};i.prototype.destroy=function(){this.flush();if(this._extended){var e=this._extended.object;var t=this._extended.methods;for(var i=0;i<t.length;i++){var n=t[i];if(n.original){e[n.name]=n.original}else{delete e[n.name]}}this._extended=null}};i.prototype.replace=function(e,t){var i=this;var n=e[t];if(!n){throw new Error("Method "+t+" undefined")}e[t]=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}i.queue({args:e,fn:n,context:this})}};i.prototype.queue=function(e){if(typeof e==="function"){this._queue.push({fn:e})}else{this._queue.push(e)}this._flushIfNeeded()};i.prototype._flushIfNeeded=function(){if(this._queue.length>this.max){this.flush()}clearTimeout(this._timeout);if(this.queue.length>0&&typeof this.delay==="number"){var e=this;this._timeout=setTimeout(function(){e.flush()},this.delay)}};i.prototype.flush=function(){while(this._queue.length>0){var e=this._queue.shift();e.fn.apply(e.context||e.fn,e.args||[])}};e.exports=i},function(e,t,i){"use strict";var n=i(58);var s=r(n);function r(e){return e&&e.__esModule?e:{default:e}}var o=i(1);var a=i(89);function l(e,t){this._data=null;this._ids={};this.length=0;this._options=t||{};this._fieldId="id";this._subscribers={};var i=this;this.listener=function(){i._onEvent.apply(i,arguments)};this.setData(e)}l.prototype.setData=function(e){var t,i,n,s,r;if(this._data){if(this._data.off){this._data.off("*",this.listener)}t=this._data.getIds({filter:this._options&&this._options.filter});r=[];for(n=0,s=t.length;n<s;n++){r.push(this._data._data[t[n]])}this._ids={};this.length=0;this._trigger("remove",{items:t,oldData:r})}this._data=e;if(this._data){this._fieldId=this._options.fieldId||this._data&&this._data.options&&this._data.options.fieldId||"id";t=this._data.getIds({filter:this._options&&this._options.filter});for(n=0,s=t.length;n<s;n++){i=t[n];this._ids[i]=true}this.length=t.length;this._trigger("add",{items:t});if(this._data.on){this._data.on("*",this.listener)}}};l.prototype.refresh=function(){var e,t,i;var n=this._data.getIds({filter:this._options&&this._options.filter}),r=(0,s["default"])(this._ids),o={},a=[],l=[],h=[];for(t=0,i=n.length;t<i;t++){e=n[t];o[e]=true;if(!this._ids[e]){a.push(e);this._ids[e]=true}}for(t=0,i=r.length;t<i;t++){e=r[t];if(!o[e]){l.push(e);h.push(this._data._data[e]);delete this._ids[e]}}this.length+=a.length-l.length;if(a.length){this._trigger("add",{items:a})}if(l.length){this._trigger("remove",{items:l,oldData:h})}};l.prototype.get=function(e){var t=this;var i,n,s;var r=o.getType(arguments[0]);if(r=="String"||r=="Number"||r=="Array"){i=arguments[0];n=arguments[1];s=arguments[2]}else{n=arguments[0];s=arguments[1]}var a=o.extend({},this._options,n);if(this._options.filter&&n&&n.filter){a.filter=function(e){return t._options.filter(e)&&n.filter(e)}}var l=[];if(i!=undefined){l.push(i)}l.push(a);l.push(s);return this._data&&this._data.get.apply(this._data,l)};l.prototype.getIds=function(e){var t;if(this._data){var i=this._options.filter;var n;if(e&&e.filter){if(i){n=function t(n){return i(n)&&e.filter(n)}}else{n=e.filter}}else{n=i}t=this._data.getIds({filter:n,order:e&&e.order})}else{t=[]}return t};l.prototype.map=function(e,t){var i=[];if(this._data){var n=this._options.filter;var s;if(t&&t.filter){if(n){s=function e(i){return n(i)&&t.filter(i)}}else{s=t.filter}}else{s=n}i=this._data.map(e,{filter:s,order:t&&t.order})}else{i=[]}return i};l.prototype.getDataSet=function(){var e=this;while(e instanceof l){e=e._data}return e||null};l.prototype._onEvent=function(e,t,i){var n,s,r,o;var a=t&&t.items;var l=[],h=[],d=[],u=[],f=[],c=[];if(a&&this._data){switch(e){case"add":for(n=0,s=a.length;n<s;n++){r=a[n];o=this.get(r);if(o){this._ids[r]=true;l.push(r)}}break;case"update":for(n=0,s=a.length;n<s;n++){r=a[n];o=this.get(r);if(o){if(this._ids[r]){h.push(r);f.push(t.data[n]);u.push(t.oldData[n])}else{this._ids[r]=true;l.push(r)}}else{if(this._ids[r]){delete this._ids[r];d.push(r);c.push(t.oldData[n])}else{}}}break;case"remove":for(n=0,s=a.length;n<s;n++){r=a[n];if(this._ids[r]){delete this._ids[r];d.push(r);c.push(t.oldData[n])}}break}this.length+=l.length-d.length;if(l.length){this._trigger("add",{items:l},i)}if(h.length){this._trigger("update",{items:h,oldData:u,data:f},i)}if(d.length){this._trigger("remove",{items:d,oldData:c},i)}}};l.prototype.on=a.prototype.on;l.prototype.off=a.prototype.off;l.prototype._trigger=a.prototype._trigger;l.prototype.subscribe=l.prototype.on;l.prototype.unsubscribe=l.prototype.off;e.exports=l},function(e,t,i){"use strict";var n=i(95);var s=r(n);function r(e){return e&&e.__esModule?e:{default:e}}var o=i(99);var a=i(89);var l=i(93);var h=i(1);var d=i(100);var u=i(101);var f=i(102);var c=i(107);var p=i(108);var m=i(109);var v=i(110);var g=i(111);w.STYLE=g.STYLE;var y=undefined;var b={width:"400px",height:"400px",filterLabel:"time",legendLabel:"value",xLabel:"x",yLabel:"y",zLabel:"z",xValueLabel:function e(t){return t},yValueLabel:function e(t){return t},zValueLabel:function e(t){return t},showXAxis:true,showYAxis:true,showZAxis:true,showGrid:true,showPerspective:true,showShadow:false,keepAspectRatio:true,verticalRatio:.5,dotSizeRatio:.02,dotSizeMinFraction:.5,dotSizeMaxFraction:2.5,showAnimationControls:y,animationInterval:1e3,animationPreload:false,animationAutoStart:y,axisColor:"#4D4D4D",gridColor:"#D3D3D3",xCenter:"55%",yCenter:"50%",style:w.STYLE.DOT,tooltip:false,tooltipStyle:{content:{padding:"10px",border:"1px solid #4d4d4d",color:"#1a1a1a",background:"rgba(255,255,255,0.7)",borderRadius:"2px",boxShadow:"5px 5px 10px rgba(128,128,128,0.5)"},line:{height:"40px",width:"0",borderLeft:"1px solid #4d4d4d"},dot:{height:"0",width:"0",border:"5px solid #4d4d4d",borderRadius:"5px"}},showLegend:y,backgroundColor:y,dataColor:{fill:"#7DC1FF",stroke:"#3267D2",strokeWidth:1},cameraPosition:{horizontal:1,vertical:.5,distance:1.7},xBarWidth:y,yBarWidth:y,valueMin:y,valueMax:y,xMin:y,xMax:y,xStep:y,yMin:y,yMax:y,yStep:y,zMin:y,zMax:y,zStep:y};function w(e,t,i){if(!(this instanceof w)){throw new SyntaxError("Constructor must be called with the new operator")}this.containerElement=e;this.dataTable=null;this.dataPoints=null;this.create();g.setDefaults(b,this);this.colX=undefined;this.colY=undefined;this.colZ=undefined;this.colValue=undefined;this.colFilter=undefined;this.setOptions(i);if(t){this.setData(t)}}o(w.prototype);w.prototype._setScale=function(){this.scale=new d(1/this.xRange.range(),1/this.yRange.range(),1/this.zRange.range());if(this.keepAspectRatio){if(this.scale.x<this.scale.y){
this.scale.y=this.scale.x}else{this.scale.x=this.scale.y}}this.scale.z*=this.verticalRatio;if(this.valueRange!==undefined){this.scale.value=1/this.valueRange.range()}var e=this.xRange.center()*this.scale.x;var t=this.yRange.center()*this.scale.y;var i=this.zRange.center()*this.scale.z;this.camera.setArmLocation(e,t,i)};w.prototype._convert3Dto2D=function(e){var t=this._convertPointToTranslation(e);return this._convertTranslationToScreen(t)};w.prototype._convertPointToTranslation=function(e){var t=this.camera.getCameraLocation(),i=this.camera.getCameraRotation(),n=e.x*this.scale.x,s=e.y*this.scale.y,r=e.z*this.scale.z,o=t.x,a=t.y,l=t.z,h=Math.sin(i.x),u=Math.cos(i.x),f=Math.sin(i.y),c=Math.cos(i.y),p=Math.sin(i.z),m=Math.cos(i.z),v=c*(p*(s-a)+m*(n-o))-f*(r-l),g=h*(c*(r-l)+f*(p*(s-a)+m*(n-o)))+u*(m*(s-a)-p*(n-o)),y=u*(c*(r-l)+f*(p*(s-a)+m*(n-o)))-h*(m*(s-a)-p*(n-o));return new d(v,g,y)};w.prototype._convertTranslationToScreen=function(e){var t=this.eye.x,i=this.eye.y,n=this.eye.z,s=e.x,r=e.y,o=e.z;var a;var l;if(this.showPerspective){a=(s-t)*(n/o);l=(r-i)*(n/o)}else{a=s*-(n/this.camera.getArmLength());l=r*-(n/this.camera.getArmLength())}return new u(this.currentXCenter+a*this.frame.canvas.clientWidth,this.currentYCenter-l*this.frame.canvas.clientWidth)};w.prototype._calcTranslations=function(e,t){if(t===undefined){t=true}for(var i=0;i<e.length;i++){var n=e[i];n.trans=this._convertPointToTranslation(n.point);n.screen=this._convertTranslationToScreen(n.trans);var s=this._convertPointToTranslation(n.bottom);n.dist=this.showPerspective?s.length():-s.z}if(!t){return}var r=function e(t,i){return i.dist-t.dist};e.sort(r)};w.prototype.getNumberOfRows=function(e){return e.length};w.prototype.getNumberOfColumns=function(e){var t=0;for(var i in e[0]){if(e[0].hasOwnProperty(i)){t++}}return t};w.prototype.getDistinctValues=function(e,t){var i=[];for(var n=0;n<e.length;n++){if(i.indexOf(e[n][t])==-1){i.push(e[n][t])}}return i.sort(function(e,t){return e-t})};w.prototype.getSmallestDifference=function(e,t){var i=this.getDistinctValues(e,t);var n=[];var s=null;for(var r=1;r<i.length;r++){var o=i[r]-i[r-1];if(s==null||s>o){s=o}}return s};w.prototype.getColumnRange=function(e,t){var i=new v;for(var n=0;n<e.length;n++){var s=e[n][t];i.adjust(s)}return i};w.prototype._checkValueField=function(e){var t=this.style===w.STYLE.BARCOLOR||this.style===w.STYLE.BARSIZE||this.style===w.STYLE.DOTCOLOR||this.style===w.STYLE.DOTSIZE;if(!t){return}if(this.colValue===undefined){throw new Error("Expected data to have "+" field 'style' "+" for graph style '"+this.style+"'")}if(e[0][this.colValue]===undefined){throw new Error("Expected data to have "+" field '"+this.colValue+"' "+" for graph style '"+this.style+"'")}};w.prototype._setRangeDefaults=function(e,t,i){if(t!==undefined){e.min=t}if(i!==undefined){e.max=i}if(e.max<=e.min)e.max=e.min+1};w.prototype._dataInitialize=function(e,t){var i=this;if(this.dataSet){this.dataSet.off("*",this._onChange)}if(e===undefined)return;if(Array.isArray(e)){e=new a(e)}var n;if(e instanceof a||e instanceof l){n=e.get()}else{throw new Error("Array, DataSet, or DataView expected")}if(n.length==0)return;this.dataSet=e;this.dataTable=n;this._onChange=function(){i.setData(i.dataSet)};this.dataSet.on("*",this._onChange);this.colX="x";this.colY="y";this.colZ="z";var s=this.style==w.STYLE.BAR||this.style==w.STYLE.BARCOLOR||this.style==w.STYLE.BARSIZE;if(s){if(this.defaultXBarWidth!==undefined){this.xBarWidth=this.defaultXBarWidth}else{this.xBarWidth=this.getSmallestDifference(n,this.colX)||1}if(this.defaultYBarWidth!==undefined){this.yBarWidth=this.defaultYBarWidth}else{this.yBarWidth=this.getSmallestDifference(n,this.colY)||1}}var r=5;var o=this.getColumnRange(n,this.colX);if(s){o.expand(this.xBarWidth/2)}this._setRangeDefaults(o,this.defaultXMin,this.defaultXMax);this.xRange=o;this.xStep=this.defaultXStep!==undefined?this.defaultXStep:o.range()/r;var h=this.getColumnRange(n,this.colY);if(s){h.expand(this.yBarWidth/2)}this._setRangeDefaults(h,this.defaultYMin,this.defaultYMax);this.yRange=h;this.yStep=this.defaultYStep!==undefined?this.defaultYStep:h.range()/r;var d=this.getColumnRange(n,this.colZ);this._setRangeDefaults(d,this.defaultZMin,this.defaultZMax);this.zRange=d;this.zStep=this.defaultZStep!==undefined?this.defaultZStep:d.range()/r;if(n[0].hasOwnProperty("style")){this.colValue="style";var u=this.getColumnRange(n,this.colValue);this._setRangeDefaults(u,this.defaultValueMin,this.defaultValueMax);this.valueRange=u}if(n[0].hasOwnProperty("filter")){this.colFilter="filter";if(this.dataFilter===undefined){this.dataFilter=new c(e,this.colFilter,this);this.dataFilter.setOnLoadCallback(function(){i.redraw()})}}this._setScale()};w.prototype._getDataPoints=function(e){var t,i,n,s,r,o;var a=[];if(this.style===w.STYLE.GRID||this.style===w.STYLE.SURFACE){var l=[];var h=[];for(n=0;n<this.getNumberOfRows(e);n++){t=e[n][this.colX]||0;i=e[n][this.colY]||0;if(l.indexOf(t)===-1){l.push(t)}if(h.indexOf(i)===-1){h.push(i)}}var u=function e(t,i){return t-i};l.sort(u);h.sort(u);var f=[];for(n=0;n<e.length;n++){t=e[n][this.colX]||0;i=e[n][this.colY]||0;s=e[n][this.colZ]||0;var c=l.indexOf(t);var p=h.indexOf(i);if(f[c]===undefined){f[c]=[]}var m=new d;m.x=t;m.y=i;m.z=s;m.data=e[n];r={};r.point=m;r.trans=undefined;r.screen=undefined;r.bottom=new d(t,i,this.zRange.min);f[c][p]=r;a.push(r)}for(t=0;t<f.length;t++){for(i=0;i<f[t].length;i++){if(f[t][i]){f[t][i].pointRight=t<f.length-1?f[t+1][i]:undefined;f[t][i].pointTop=i<f[t].length-1?f[t][i+1]:undefined;f[t][i].pointCross=t<f.length-1&&i<f[t].length-1?f[t+1][i+1]:undefined}}}}else{this._checkValueField(e);for(n=0;n<e.length;n++){o=new d;o.x=e[n][this.colX]||0;o.y=e[n][this.colY]||0;o.z=e[n][this.colZ]||0;o.data=e[n];if(this.colValue!==undefined){o.value=e[n][this.colValue]||0}r={};r.point=o;r.bottom=new d(o.x,o.y,this.zRange.min);r.trans=undefined;r.screen=undefined;if(this.style===w.STYLE.LINE){if(n>0){a[n-1].pointNext=r}}a.push(r)}}return a};w.prototype.create=function(){while(this.containerElement.hasChildNodes()){this.containerElement.removeChild(this.containerElement.firstChild)}this.frame=document.createElement("div");this.frame.style.position="relative";this.frame.style.overflow="hidden";this.frame.canvas=document.createElement("canvas");this.frame.canvas.style.position="relative";this.frame.appendChild(this.frame.canvas);{var e=document.createElement("DIV");e.style.color="red";e.style.fontWeight="bold";e.style.padding="10px";e.innerHTML="Error: your browser does not support HTML canvas";this.frame.canvas.appendChild(e)}this.frame.filter=document.createElement("div");this.frame.filter.style.position="absolute";this.frame.filter.style.bottom="0px";this.frame.filter.style.left="0px";this.frame.filter.style.width="100%";this.frame.appendChild(this.frame.filter);var t=this;var i=function e(i){t._onMouseDown(i)};var n=function e(i){t._onTouchStart(i)};var s=function e(i){t._onWheel(i)};var r=function e(i){t._onTooltip(i)};var o=function e(i){t._onClick(i)};h.addEventListener(this.frame.canvas,"mousedown",i);h.addEventListener(this.frame.canvas,"touchstart",n);h.addEventListener(this.frame.canvas,"mousewheel",s);h.addEventListener(this.frame.canvas,"mousemove",r);h.addEventListener(this.frame.canvas,"click",o);this.containerElement.appendChild(this.frame)};w.prototype._setSize=function(e,t){this.frame.style.width=e;this.frame.style.height=t;this._resizeCanvas()};w.prototype._resizeCanvas=function(){this.frame.canvas.style.width="100%";this.frame.canvas.style.height="100%";this.frame.canvas.width=this.frame.canvas.clientWidth;this.frame.canvas.height=this.frame.canvas.clientHeight;this.frame.filter.style.width=this.frame.canvas.clientWidth-2*10+"px"};w.prototype.animationStart=function(){if(!this.frame.filter||!this.frame.filter.slider)throw new Error("No animation available");this.frame.filter.slider.play()};w.prototype.animationStop=function(){if(!this.frame.filter||!this.frame.filter.slider)return;this.frame.filter.slider.stop()};w.prototype._resizeCenter=function(){if(this.xCenter.charAt(this.xCenter.length-1)==="%"){this.currentXCenter=parseFloat(this.xCenter)/100*this.frame.canvas.clientWidth}else{this.currentXCenter=parseFloat(this.xCenter)}if(this.yCenter.charAt(this.yCenter.length-1)==="%"){this.currentYCenter=parseFloat(this.yCenter)/100*(this.frame.canvas.clientHeight-this.frame.filter.clientHeight)}else{this.currentYCenter=parseFloat(this.yCenter)}};w.prototype.getCameraPosition=function(){var e=this.camera.getArmRotation();e.distance=this.camera.getArmLength();return e};w.prototype._readData=function(e){this._dataInitialize(e,this.style);if(this.dataFilter){this.dataPoints=this.dataFilter._getDataPoints()}else{this.dataPoints=this._getDataPoints(this.dataTable)}this._redrawFilter()};w.prototype.setData=function(e){this._readData(e);this.redraw();if(this.animationAutoStart&&this.dataFilter){this.animationStart()}};w.prototype.setOptions=function(e){var t=undefined;this.animationStop();g.setOptions(e,this);this.setPointDrawingMethod();this._setSize(this.width,this.height);if(this.dataTable){this.setData(this.dataTable)}if(this.animationAutoStart&&this.dataFilter){this.animationStart()}};w.prototype.setPointDrawingMethod=function(){var e=undefined;switch(this.style){case w.STYLE.BAR:e=w.prototype._redrawBarGraphPoint;break;case w.STYLE.BARCOLOR:e=w.prototype._redrawBarColorGraphPoint;break;case w.STYLE.BARSIZE:e=w.prototype._redrawBarSizeGraphPoint;break;case w.STYLE.DOT:e=w.prototype._redrawDotGraphPoint;break;case w.STYLE.DOTLINE:e=w.prototype._redrawDotLineGraphPoint;break;case w.STYLE.DOTCOLOR:e=w.prototype._redrawDotColorGraphPoint;break;case w.STYLE.DOTSIZE:e=w.prototype._redrawDotSizeGraphPoint;break;case w.STYLE.SURFACE:e=w.prototype._redrawSurfaceGraphPoint;break;case w.STYLE.GRID:e=w.prototype._redrawGridGraphPoint;break;case w.STYLE.LINE:e=w.prototype._redrawLineGraphPoint;break;default:throw new Error("Can not determine point drawing method "+"for graph style '"+this.style+"'")}this._pointDrawingMethod=e};w.prototype.redraw=function(){if(this.dataPoints===undefined){throw new Error("Graph data not initialized")}this._resizeCanvas();this._resizeCenter();this._redrawSlider();this._redrawClear();this._redrawAxis();this._redrawDataGraph();this._redrawInfo();this._redrawLegend()};w.prototype._getContext=function(){var e=this.frame.canvas;var t=e.getContext("2d");t.lineJoin="round";t.lineCap="round";return t};w.prototype._redrawClear=function(){var e=this.frame.canvas;var t=e.getContext("2d");t.clearRect(0,0,e.width,e.height)};w.prototype._dotSize=function(){return this.frame.clientWidth*this.dotSizeRatio};w.prototype._getLegendWidth=function(){var e;if(this.style===w.STYLE.DOTSIZE){var t=this._dotSize();e=t*this.dotSizeMaxFraction}else if(this.style===w.STYLE.BARSIZE){e=this.xBarWidth}else{e=20}return e};w.prototype._redrawLegend=function(){if(this.showLegend!==true){return}if(this.style===w.STYLE.LINE||this.style===w.STYLE.BARSIZE){return}var e=this.style===w.STYLE.BARSIZE||this.style===w.STYLE.DOTSIZE;var t=this.style===w.STYLE.DOTSIZE||this.style===w.STYLE.DOTCOLOR||this.style===w.STYLE.BARCOLOR;var i=Math.max(this.frame.clientHeight*.25,100);var n=this.margin;var s=this._getLegendWidth();var r=this.frame.clientWidth-this.margin;var o=r-s;var a=n+i;var l=this._getContext();l.lineWidth=1;l.font="14px arial";if(e===false){var h=0;var d=i;var f;for(f=h;f<d;f++){var c=(f-h)/(d-h);var p=c*240;var v=this._hsv2rgb(p,1,1);l.strokeStyle=v;l.beginPath();l.moveTo(o,n+f);l.lineTo(r,n+f);l.stroke()}l.strokeStyle=this.axisColor;l.strokeRect(o,n,s,i)}else{var g;if(this.style===w.STYLE.DOTSIZE){g=s*(this.dotSizeMinFraction/this.dotSizeMaxFraction)}else if(this.style===w.STYLE.BARSIZE){}l.strokeStyle=this.axisColor;l.fillStyle=this.dataColor.fill;l.beginPath();l.moveTo(o,n);l.lineTo(r,n);l.lineTo(o+g,a);l.lineTo(o,a);l.closePath();l.fill();l.stroke()}var y=5;var b=t?this.valueRange.min:this.zRange.min;var _=t?this.valueRange.max:this.zRange.max;var x=new m(b,_,(_-b)/5,true);x.start(true);var f;var k;var C;while(!x.end()){f=a-(x.getCurrent()-b)/(_-b)*i;k=new u(o-y,f);C=new u(o,f);this._line(l,k,C);l.textAlign="right";l.textBaseline="middle";l.fillStyle=this.axisColor;l.fillText(x.getCurrent(),o-2*y,f);x.next()}l.textAlign="right";l.textBaseline="top";var S=this.legendLabel;l.fillText(S,r,a+this.margin)};w.prototype._redrawFilter=function(){this.frame.filter.innerHTML="";if(this.dataFilter){var e={visible:this.showAnimationControls};var t=new p(this.frame.filter,e);this.frame.filter.slider=t;this.frame.filter.style.padding="10px";t.setValues(this.dataFilter.values);t.setPlayInterval(this.animationInterval);var i=this;var n=function e(){var n=t.getIndex();i.dataFilter.selectValue(n);i.dataPoints=i.dataFilter._getDataPoints();i.redraw()};t.setOnChangeCallback(n)}else{this.frame.filter.slider=undefined}};w.prototype._redrawSlider=function(){if(this.frame.filter.slider!==undefined){this.frame.filter.slider.redraw()}};w.prototype._redrawInfo=function(){if(this.dataFilter){var e=this._getContext();e.font="14px arial";e.lineStyle="gray";e.fillStyle="gray";e.textAlign="left";e.textBaseline="top";var t=this.margin;var i=this.margin;e.fillText(this.dataFilter.getLabel()+": "+this.dataFilter.getSelectedValue(),t,i)}};w.prototype._line=function(e,t,i,n){if(n!==undefined){e.strokeStyle=n}e.beginPath();e.moveTo(t.x,t.y);e.lineTo(i.x,i.y);e.stroke()};w.prototype.drawAxisLabelX=function(e,t,i,n,s){if(s===undefined){s=0}var r=this._convert3Dto2D(t);if(Math.cos(n*2)>0){e.textAlign="center";e.textBaseline="top";r.y+=s}else if(Math.sin(n*2)<0){e.textAlign="right";e.textBaseline="middle"}else{e.textAlign="left";e.textBaseline="middle"}e.fillStyle=this.axisColor;e.fillText(i,r.x,r.y)};w.prototype.drawAxisLabelY=function(e,t,i,n,s){if(s===undefined){s=0}var r=this._convert3Dto2D(t);if(Math.cos(n*2)<0){e.textAlign="center";e.textBaseline="top";r.y+=s}else if(Math.sin(n*2)>0){e.textAlign="right";e.textBaseline="middle"}else{e.textAlign="left";e.textBaseline="middle"}e.fillStyle=this.axisColor;e.fillText(i,r.x,r.y)};w.prototype.drawAxisLabelZ=function(e,t,i,n){if(n===undefined){n=0}var s=this._convert3Dto2D(t);e.textAlign="right";e.textBaseline="middle";e.fillStyle=this.axisColor;e.fillText(i,s.x-n,s.y)};w.prototype._line3d=function(e,t,i,n){var s=this._convert3Dto2D(t);var r=this._convert3Dto2D(i);this._line(e,s,r,n)};w.prototype._redrawAxis=function(){var e=this._getContext(),t,i,n,s,r,o,a,l,h,f,c;e.font=24/this.camera.getArmLength()+"px arial";var p=.025/this.scale.x;var v=.025/this.scale.y;var g=5/this.camera.getArmLength();var y=this.camera.getArmRotation().horizontal;var b=new u(Math.cos(y),Math.sin(y));var w=this.xRange;var _=this.yRange;var x=this.zRange;e.lineWidth=1;s=this.defaultXStep===undefined;n=new m(w.min,w.max,this.xStep,s);n.start(true);while(!n.end()){var k=n.getCurrent();if(this.showGrid){t=new d(k,_.min,x.min);i=new d(k,_.max,x.min);this._line3d(e,t,i,this.gridColor)}else if(this.showXAxis){t=new d(k,_.min,x.min);i=new d(k,_.min+p,x.min);this._line3d(e,t,i,this.axisColor);t=new d(k,_.max,x.min);i=new d(k,_.max-p,x.min);this._line3d(e,t,i,this.axisColor)}if(this.showXAxis){a=b.x>0?_.min:_.max;var C=new d(k,a,x.min);var S="  "+this.xValueLabel(k)+"  ";this.drawAxisLabelX(e,C,S,y,g)}n.next()}e.lineWidth=1;s=this.defaultYStep===undefined;n=new m(_.min,_.max,this.yStep,s);n.start(true);while(!n.end()){var T=n.getCurrent();if(this.showGrid){t=new d(w.min,T,x.min);i=new d(w.max,T,x.min);this._line3d(e,t,i,this.gridColor)}else if(this.showYAxis){t=new d(w.min,T,x.min);i=new d(w.min+v,T,x.min);this._line3d(e,t,i,this.axisColor);t=new d(w.max,T,x.min);i=new d(w.max-v,T,x.min);this._line3d(e,t,i,this.axisColor)}if(this.showYAxis){o=b.y>0?w.min:w.max;C=new d(o,T,x.min);var S="  "+this.yValueLabel(T)+"  ";this.drawAxisLabelY(e,C,S,y,g)}n.next()}if(this.showZAxis){e.lineWidth=1;s=this.defaultZStep===undefined;n=new m(x.min,x.max,this.zStep,s);n.start(true);o=b.x>0?w.min:w.max;a=b.y<0?_.min:_.max;while(!n.end()){var M=n.getCurrent();var D=new d(o,a,M);var E=this._convert3Dto2D(D);i=new u(E.x-g,E.y);this._line(e,E,i,this.axisColor);var S=this.zValueLabel(M)+" ";this.drawAxisLabelZ(e,D,S,5);n.next()}e.lineWidth=1;t=new d(o,a,x.min);i=new d(o,a,x.max);this._line3d(e,t,i,this.axisColor)}if(this.showXAxis){var O;var P;e.lineWidth=1;O=new d(w.min,_.min,x.min);P=new d(w.max,_.min,x.min);this._line3d(e,O,P,this.axisColor);O=new d(w.min,_.max,x.min);P=new d(w.max,_.max,x.min);this._line3d(e,O,P,this.axisColor)}if(this.showYAxis){e.lineWidth=1;t=new d(w.min,_.min,x.min);i=new d(w.min,_.max,x.min);this._line3d(e,t,i,this.axisColor);t=new d(w.max,_.min,x.min);i=new d(w.max,_.max,x.min);this._line3d(e,t,i,this.axisColor)}var I=this.xLabel;if(I.length>0&&this.showXAxis){c=.1/this.scale.y;o=(w.max+3*w.min)/4;a=b.x>0?_.min-c:_.max+c;r=new d(o,a,x.min);this.drawAxisLabelX(e,r,I,y)}var A=this.yLabel;if(A.length>0&&this.showYAxis){f=.1/this.scale.x;o=b.y>0?w.min-f:w.max+f;a=(_.max+3*_.min)/4;r=new d(o,a,x.min);this.drawAxisLabelY(e,r,A,y)}var N=this.zLabel;if(N.length>0&&this.showZAxis){h=30;o=b.x>0?w.min:w.max;a=b.y<0?_.min:_.max;l=(x.max+3*x.min)/4;r=new d(o,a,l);this.drawAxisLabelZ(e,r,N,h)}};w.prototype._hsv2rgb=function(e,t,i){var n,s,r,o,a,l;o=i*t;a=Math.floor(e/60);l=o*(1-Math.abs(e/60%2-1));switch(a){case 0:n=o;s=l;r=0;break;case 1:n=l;s=o;r=0;break;case 2:n=0;s=o;r=l;break;case 3:n=0;s=l;r=o;break;case 4:n=l;s=0;r=o;break;case 5:n=o;s=0;r=l;break;default:n=0;s=0;r=0;break}return"RGB("+parseInt(n*255)+","+parseInt(s*255)+","+parseInt(r*255)+")"};w.prototype._getStrokeWidth=function(e){if(e!==undefined){if(this.showPerspective){return 1/-e.trans.z*this.dataColor.strokeWidth}else{return-(this.eye.z/this.camera.getArmLength())*this.dataColor.strokeWidth}}return this.dataColor.strokeWidth};w.prototype._redrawBar=function(e,t,i,n,s,r){var o,a,l;var h=this;var u=t.point;var f=this.zRange.min;var c=[{point:new d(u.x-i,u.y-n,u.z)},{point:new d(u.x+i,u.y-n,u.z)},{point:new d(u.x+i,u.y+n,u.z)},{point:new d(u.x-i,u.y+n,u.z)}];var p=[{point:new d(u.x-i,u.y-n,f)},{point:new d(u.x+i,u.y-n,f)},{point:new d(u.x+i,u.y+n,f)},{point:new d(u.x-i,u.y+n,f)}];c.forEach(function(e){e.screen=h._convert3Dto2D(e.point)});p.forEach(function(e){e.screen=h._convert3Dto2D(e.point)});var m=[{corners:c,center:d.avg(p[0].point,p[2].point)},{corners:[c[0],c[1],p[1],p[0]],center:d.avg(p[1].point,p[0].point)},{corners:[c[1],c[2],p[2],p[1]],center:d.avg(p[2].point,p[1].point)},{corners:[c[2],c[3],p[3],p[2]],center:d.avg(p[3].point,p[2].point)},{corners:[c[3],c[0],p[0],p[3]],center:d.avg(p[0].point,p[3].point)}];t.surfaces=m;for(a=0;a<m.length;a++){l=m[a];var v=this._convertPointToTranslation(l.center);l.dist=this.showPerspective?v.length():-v.z}m.sort(function(e,t){var i=t.dist-e.dist;if(i)return i;if(e.corners===c)return 1;if(t.corners===c)return-1;return 0});e.lineWidth=this._getStrokeWidth(t);e.strokeStyle=r;e.fillStyle=s;for(a=2;a<m.length;a++){l=m[a];this._polygon(e,l.corners)}};w.prototype._polygon=function(e,t,i,n){if(t.length<2){return}if(i!==undefined){e.fillStyle=i}if(n!==undefined){e.strokeStyle=n}e.beginPath();e.moveTo(t[0].screen.x,t[0].screen.y);for(var s=1;s<t.length;++s){var r=t[s];e.lineTo(r.screen.x,r.screen.y)}e.closePath();e.fill();e.stroke()};w.prototype._drawCircle=function(e,t,i,n,s){var r=this._calcRadius(t,s);e.lineWidth=this._getStrokeWidth(t);e.strokeStyle=n;e.fillStyle=i;e.beginPath();e.arc(t.screen.x,t.screen.y,r,0,Math.PI*2,true);e.fill();e.stroke()};w.prototype._getColorsRegular=function(e){var t=(1-(e.point.z-this.zRange.min)*this.scale.z/this.verticalRatio)*240;var i=this._hsv2rgb(t,1,1);var n=this._hsv2rgb(t,1,.8);return{fill:i,border:n}};w.prototype._getColorsColor=function(e){var t,i;if(typeof e.point.value==="string"){t=e.point.value;i=e.point.value}else{var n=(1-(e.point.value-this.valueRange.min)*this.scale.value)*240;t=this._hsv2rgb(n,1,1);i=this._hsv2rgb(n,1,.8)}return{fill:t,border:i}};w.prototype._getColorsSize=function(){return{fill:this.dataColor.fill,border:this.dataColor.stroke}};w.prototype._calcRadius=function(e,t){if(t===undefined){t=this._dotSize()}var i;if(this.showPerspective){i=t/-e.trans.z}else{i=t*-(this.eye.z/this.camera.getArmLength())}if(i<0){i=0}return i};w.prototype._redrawBarGraphPoint=function(e,t){var i=this.xBarWidth/2;var n=this.yBarWidth/2;var s=this._getColorsRegular(t);this._redrawBar(e,t,i,n,s.fill,s.border)};w.prototype._redrawBarColorGraphPoint=function(e,t){var i=this.xBarWidth/2;var n=this.yBarWidth/2;var s=this._getColorsColor(t);this._redrawBar(e,t,i,n,s.fill,s.border)};w.prototype._redrawBarSizeGraphPoint=function(e,t){var i=(t.point.value-this.valueRange.min)/this.valueRange.range();var n=this.xBarWidth/2*(i*.8+.2);var s=this.yBarWidth/2*(i*.8+.2);var r=this._getColorsSize();this._redrawBar(e,t,n,s,r.fill,r.border)};w.prototype._redrawDotGraphPoint=function(e,t){var i=this._getColorsRegular(t);this._drawCircle(e,t,i.fill,i.border)};w.prototype._redrawDotLineGraphPoint=function(e,t){var i=this._convert3Dto2D(t.bottom);e.lineWidth=1;this._line(e,i,t.screen,this.gridColor);this._redrawDotGraphPoint(e,t)};w.prototype._redrawDotColorGraphPoint=function(e,t){var i=this._getColorsColor(t);this._drawCircle(e,t,i.fill,i.border)};w.prototype._redrawDotSizeGraphPoint=function(e,t){var i=this._dotSize();var n=(t.point.value-this.valueRange.min)/this.valueRange.range();var s=i*this.dotSizeMinFraction;var r=i*this.dotSizeMaxFraction-s;var o=s+r*n;var a=this._getColorsSize();this._drawCircle(e,t,a.fill,a.border,o)};w.prototype._redrawSurfaceGraphPoint=function(e,t){var i=t.pointRight;var n=t.pointTop;var s=t.pointCross;if(t===undefined||i===undefined||n===undefined||s===undefined){return}var r=true;var o;var a;var l;if(this.showGrayBottom||this.showShadow){var h=d.subtract(s.trans,t.trans);var u=d.subtract(n.trans,i.trans);var f=d.crossProduct(h,u);var c=f.length();r=f.z>0}if(r){var p=(t.point.z+i.point.z+n.point.z+s.point.z)/4;var m=(1-(p-this.zRange.min)*this.scale.z/this.verticalRatio)*240;var v=1;var g;if(this.showShadow){g=Math.min(1+f.x/c/2,1);o=this._hsv2rgb(m,v,g);a=o}else{g=1;o=this._hsv2rgb(m,v,g);a=this.axisColor}}else{o="gray";a=this.axisColor}e.lineWidth=this._getStrokeWidth(t);var y=[t,i,s,n];this._polygon(e,y,o,a)};w.prototype._drawGridLine=function(e,t,i){if(t===undefined||i===undefined){return}var n=(t.point.z+i.point.z)/2;var s=(1-(n-this.zRange.min)*this.scale.z/this.verticalRatio)*240;e.lineWidth=this._getStrokeWidth(t)*2;e.strokeStyle=this._hsv2rgb(s,1,1);this._line(e,t.screen,i.screen)};w.prototype._redrawGridGraphPoint=function(e,t){this._drawGridLine(e,t,t.pointRight);this._drawGridLine(e,t,t.pointTop)};w.prototype._redrawLineGraphPoint=function(e,t){if(t.pointNext===undefined){return}e.lineWidth=this._getStrokeWidth(t);e.strokeStyle=this.dataColor.stroke;this._line(e,t.screen,t.pointNext.screen)};w.prototype._redrawDataGraph=function(){var e=this._getContext();var t;if(this.dataPoints===undefined||this.dataPoints.length<=0)return;this._calcTranslations(this.dataPoints);for(t=0;t<this.dataPoints.length;t++){var i=this.dataPoints[t];this._pointDrawingMethod.call(this,e,i)}};w.prototype._storeMousePosition=function(e){this.startMouseX=_(e);this.startMouseY=x(e);this._startCameraOffset=this.camera.getOffset()};w.prototype._onMouseDown=function(e){e=e||window.event;if(this.leftButtonDown){this._onMouseUp(e)}this.leftButtonDown=e.which?e.which===1:e.button===1;if(!this.leftButtonDown&&!this.touchDown)return;this._storeMousePosition(e);this.startStart=new Date(this.start);this.startEnd=new Date(this.end);this.startArmRotation=this.camera.getArmRotation();this.frame.style.cursor="move";var t=this;this.onmousemove=function(e){t._onMouseMove(e)};this.onmouseup=function(e){t._onMouseUp(e)};h.addEventListener(document,"mousemove",t.onmousemove);h.addEventListener(document,"mouseup",t.onmouseup);h.preventDefault(e)};w.prototype._onMouseMove=function(e){this.moving=true;e=e||window.event;var t=parseFloat(_(e))-this.startMouseX;var i=parseFloat(x(e))-this.startMouseY;if(e&&e.ctrlKey===true){var n=this.frame.clientWidth*.5;var s=this.frame.clientHeight*.5;var r=(this._startCameraOffset.x||0)-t/n*this.camera.armLength*.8;var o=(this._startCameraOffset.y||0)+i/s*this.camera.armLength*.8;this.camera.setOffset(r,o);this._storeMousePosition(e)}else{var a=this.startArmRotation.horizontal+t/200;var l=this.startArmRotation.vertical+i/200;var d=4;var u=Math.sin(d/360*2*Math.PI);if(Math.abs(Math.sin(a))<u){a=Math.round(a/Math.PI)*Math.PI-.001}if(Math.abs(Math.cos(a))<u){a=(Math.round(a/Math.PI-.5)+.5)*Math.PI-.001}if(Math.abs(Math.sin(l))<u){l=Math.round(l/Math.PI)*Math.PI}if(Math.abs(Math.cos(l))<u){l=(Math.round(l/Math.PI-.5)+.5)*Math.PI}this.camera.setArmRotation(a,l)}this.redraw();var f=this.getCameraPosition();this.emit("cameraPositionChange",f);h.preventDefault(e)};w.prototype._onMouseUp=function(e){this.frame.style.cursor="auto";this.leftButtonDown=false;h.removeEventListener(document,"mousemove",this.onmousemove);h.removeEventListener(document,"mouseup",this.onmouseup);h.preventDefault(e)};w.prototype._onClick=function(e){if(!this.onclick_callback)return;if(!this.moving){var t=this.frame.getBoundingClientRect();var i=_(e)-t.left;var n=x(e)-t.top;var s=this._dataPointFromXY(i,n);if(s)this.onclick_callback(s.point.data)}else{this.moving=false}h.preventDefault(e)};w.prototype._onTooltip=function(e){var t=300;var i=this.frame.getBoundingClientRect();var n=_(e)-i.left;var s=x(e)-i.top;if(!this.showTooltip){return}if(this.tooltipTimeout){clearTimeout(this.tooltipTimeout)}if(this.leftButtonDown){this._hideTooltip();return}if(this.tooltip&&this.tooltip.dataPoint){var r=this._dataPointFromXY(n,s);if(r!==this.tooltip.dataPoint){if(r){this._showTooltip(r)}else{this._hideTooltip()}}}else{var o=this;this.tooltipTimeout=setTimeout(function(){o.tooltipTimeout=null;var e=o._dataPointFromXY(n,s);if(e){o._showTooltip(e)}},t)}};w.prototype._onTouchStart=function(e){this.touchDown=true;var t=this;this.ontouchmove=function(e){t._onTouchMove(e)};this.ontouchend=function(e){t._onTouchEnd(e)};h.addEventListener(document,"touchmove",t.ontouchmove);h.addEventListener(document,"touchend",t.ontouchend);this._onMouseDown(e)};w.prototype._onTouchMove=function(e){this._onMouseMove(e)};w.prototype._onTouchEnd=function(e){this.touchDown=false;h.removeEventListener(document,"touchmove",this.ontouchmove);h.removeEventListener(document,"touchend",this.ontouchend);this._onMouseUp(e)};w.prototype._onWheel=function(e){if(!e)e=window.event;var t=0;if(e.wheelDelta){t=e.wheelDelta/120}else if(e.detail){t=-e.detail/3}if(t){var i=this.camera.getArmLength();var n=i*(1-t/10);this.camera.setArmLength(n);this.redraw();this._hideTooltip()}var s=this.getCameraPosition();this.emit("cameraPositionChange",s);h.preventDefault(e)};w.prototype._insideTriangle=function(e,t){var i=t[0],n=t[1],s=t[2];function r(e){return e>0?1:e<0?-1:0}var o=r((n.x-i.x)*(e.y-i.y)-(n.y-i.y)*(e.x-i.x));var a=r((s.x-n.x)*(e.y-n.y)-(s.y-n.y)*(e.x-n.x));var l=r((i.x-s.x)*(e.y-s.y)-(i.y-s.y)*(e.x-s.x));return(o==0||a==0||o==a)&&(a==0||l==0||a==l)&&(o==0||l==0||o==l)};w.prototype._dataPointFromXY=function(e,t){var i,n=100,s=null,r=null,o=null,a=new u(e,t);if(this.style===w.STYLE.BAR||this.style===w.STYLE.BARCOLOR||this.style===w.STYLE.BARSIZE){for(i=this.dataPoints.length-1;i>=0;i--){s=this.dataPoints[i];var l=s.surfaces;if(l){for(var h=l.length-1;h>=0;h--){var d=l[h];var f=d.corners;var c=[f[0].screen,f[1].screen,f[2].screen];var p=[f[2].screen,f[3].screen,f[0].screen];if(this._insideTriangle(a,c)||this._insideTriangle(a,p)){return s}}}}}else{for(i=0;i<this.dataPoints.length;i++){s=this.dataPoints[i];var m=s.screen;if(m){var v=Math.abs(e-m.x);var g=Math.abs(t-m.y);var y=Math.sqrt(v*v+g*g);if((o===null||y<o)&&y<n){o=y;r=s}}}}return r};w.prototype._showTooltip=function(e){var t,i,n;if(!this.tooltip){t=document.createElement("div");(0,s["default"])(t.style,{},this.tooltipStyle.content);t.style.position="absolute";i=document.createElement("div");(0,s["default"])(i.style,{},this.tooltipStyle.line);i.style.position="absolute";n=document.createElement("div");(0,s["default"])(n.style,{},this.tooltipStyle.dot);n.style.position="absolute";this.tooltip={dataPoint:null,dom:{content:t,line:i,dot:n}}}else{t=this.tooltip.dom.content;i=this.tooltip.dom.line;n=this.tooltip.dom.dot}this._hideTooltip();this.tooltip.dataPoint=e;if(typeof this.showTooltip==="function"){t.innerHTML=this.showTooltip(e.point)}else{t.innerHTML="<table>"+"<tr><td>"+this.xLabel+":</td><td>"+e.point.x+"</td></tr>"+"<tr><td>"+this.yLabel+":</td><td>"+e.point.y+"</td></tr>"+"<tr><td>"+this.zLabel+":</td><td>"+e.point.z+"</td></tr>"+"</table>"}t.style.left="0";t.style.top="0";this.frame.appendChild(t);this.frame.appendChild(i);this.frame.appendChild(n);var r=t.offsetWidth;var o=t.offsetHeight;var a=i.offsetHeight;var l=n.offsetWidth;var h=n.offsetHeight;var d=e.screen.x-r/2;d=Math.min(Math.max(d,10),this.frame.clientWidth-10-r);i.style.left=e.screen.x+"px";i.style.top=e.screen.y-a+"px";t.style.left=d+"px";t.style.top=e.screen.y-a-o+"px";n.style.left=e.screen.x-l/2+"px";n.style.top=e.screen.y-h/2+"px"};w.prototype._hideTooltip=function(){if(this.tooltip){this.tooltip.dataPoint=null;for(var e in this.tooltip.dom){if(this.tooltip.dom.hasOwnProperty(e)){var t=this.tooltip.dom[e];if(t&&t.parentNode){t.parentNode.removeChild(t)}}}}};function _(e){if("clientX"in e)return e.clientX;return e.targetTouches[0]&&e.targetTouches[0].clientX||0}function x(e){if("clientY"in e)return e.clientY;return e.targetTouches[0]&&e.targetTouches[0].clientY||0}w.prototype.setCameraPosition=function(e){g.setCameraPosition(e,this);this.redraw()};w.prototype.setSize=function(e,t){this._setSize(e,t);this.redraw()};e.exports=w},function(e,t,i){e.exports={default:i(96),__esModule:true}},function(e,t,i){i(97);e.exports=i(17).Object.assign},function(e,t,i){var n=i(15);n(n.S+n.F,"Object",{assign:i(98)})},function(e,t,i){"use strict";var n=i(35),s=i(73),r=i(74),o=i(49),a=i(10),l=Object.assign;e.exports=!l||i(26)(function(){var e={},t={},i=Symbol(),n="abcdefghijklmnopqrst";e[i]=7;n.split("").forEach(function(e){t[e]=e});return l({},e)[i]!=7||Object.keys(l({},t)).join("")!=n})?function e(t,i){var l=o(t),h=arguments.length,d=1,u=s.f,f=r.f;while(h>d){var c=a(arguments[d++]),p=u?n(c).concat(u(c)):n(c),m=p.length,v=0,g;while(m>v)if(f.call(c,g=p[v++]))l[g]=c[g]}return l}:l},function(e,t){e.exports=i;function i(e){if(e)return n(e)}function n(e){for(var t in i.prototype){e[t]=i.prototype[t]}return e}i.prototype.on=i.prototype.addEventListener=function(e,t){this._callbacks=this._callbacks||{};(this._callbacks[e]=this._callbacks[e]||[]).push(t);return this};i.prototype.once=function(e,t){var i=this;this._callbacks=this._callbacks||{};function n(){i.off(e,n);t.apply(this,arguments)}n.fn=t;this.on(e,n);return this};i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var i=this._callbacks[e];if(!i)return this;if(1==arguments.length){delete this._callbacks[e];return this}var n;for(var s=0;s<i.length;s++){n=i[s];if(n===t||n.fn===t){i.splice(s,1);break}}return this};i.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks[e];if(i){i=i.slice(0);for(var n=0,s=i.length;n<s;++n){i[n].apply(this,t)}}return this};i.prototype.listeners=function(e){this._callbacks=this._callbacks||{};return this._callbacks[e]||[]};i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){"use strict";function i(e,t,i){this.x=e!==undefined?e:0;this.y=t!==undefined?t:0;this.z=i!==undefined?i:0}i.subtract=function(e,t){var n=new i;n.x=e.x-t.x;n.y=e.y-t.y;n.z=e.z-t.z;return n};i.add=function(e,t){var n=new i;n.x=e.x+t.x;n.y=e.y+t.y;n.z=e.z+t.z;return n};i.avg=function(e,t){return new i((e.x+t.x)/2,(e.y+t.y)/2,(e.z+t.z)/2)};i.crossProduct=function(e,t){
var n=new i;n.x=e.y*t.z-e.z*t.y;n.y=e.z*t.x-e.x*t.z;n.z=e.x*t.y-e.y*t.x;return n};i.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};e.exports=i},function(e,t){"use strict";function i(e,t){this.x=e!==undefined?e:0;this.y=t!==undefined?t:0}e.exports=i},function(e,t,i){"use strict";var n=i(103);var s=r(n);function r(e){return e&&e.__esModule?e:{default:e}}var o=i(100);function a(){this.armLocation=new o;this.armRotation={};this.armRotation.horizontal=0;this.armRotation.vertical=0;this.armLength=1.7;this.cameraOffset=new o;this.offsetMultiplier=.6;this.cameraLocation=new o;this.cameraRotation=new o(.5*Math.PI,0,0);this.calculateCameraOrientation()}a.prototype.setOffset=function(e,t){var i=Math.abs,n=s["default"],r=this.offsetMultiplier,o=this.armLength*r;if(i(e)>o){e=n(e)*o}if(i(t)>o){t=n(t)*o}this.cameraOffset.x=e;this.cameraOffset.y=t;this.calculateCameraOrientation()};a.prototype.getOffset=function(e,t){return this.cameraOffset};a.prototype.setArmLocation=function(e,t,i){this.armLocation.x=e;this.armLocation.y=t;this.armLocation.z=i;this.calculateCameraOrientation()};a.prototype.setArmRotation=function(e,t){if(e!==undefined){this.armRotation.horizontal=e}if(t!==undefined){this.armRotation.vertical=t;if(this.armRotation.vertical<0)this.armRotation.vertical=0;if(this.armRotation.vertical>.5*Math.PI)this.armRotation.vertical=.5*Math.PI}if(e!==undefined||t!==undefined){this.calculateCameraOrientation()}};a.prototype.getArmRotation=function(){var e={};e.horizontal=this.armRotation.horizontal;e.vertical=this.armRotation.vertical;return e};a.prototype.setArmLength=function(e){if(e===undefined)return;this.armLength=e;if(this.armLength<.71)this.armLength=.71;if(this.armLength>5)this.armLength=5;this.setOffset(this.cameraOffset.x,this.cameraOffset.y);this.calculateCameraOrientation()};a.prototype.getArmLength=function(){return this.armLength};a.prototype.getCameraLocation=function(){return this.cameraLocation};a.prototype.getCameraRotation=function(){return this.cameraRotation};a.prototype.calculateCameraOrientation=function(){this.cameraLocation.x=this.armLocation.x-this.armLength*Math.sin(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical);this.cameraLocation.y=this.armLocation.y-this.armLength*Math.cos(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical);this.cameraLocation.z=this.armLocation.z+this.armLength*Math.sin(this.armRotation.vertical);this.cameraRotation.x=Math.PI/2-this.armRotation.vertical;this.cameraRotation.y=0;this.cameraRotation.z=-this.armRotation.horizontal;var e=this.cameraRotation.x;var t=this.cameraRotation.y;var i=this.cameraRotation.z;var n=this.cameraOffset.x;var s=this.cameraOffset.y;var r=Math.sin,o=Math.cos;this.cameraLocation.x=this.cameraLocation.x+n*o(i)+s*-r(i)*o(e);this.cameraLocation.y=this.cameraLocation.y+n*r(i)+s*o(i)*o(e);this.cameraLocation.z=this.cameraLocation.z+s*r(e)};e.exports=a},function(e,t,i){e.exports={default:i(104),__esModule:true}},function(e,t,i){i(105);e.exports=i(17).Math.sign},function(e,t,i){var n=i(15);n(n.S,"Math",{sign:i(106)})},function(e,t){e.exports=Math.sign||function e(t){return(t=+t)==0||t!=t?t:t<0?-1:1}},function(e,t,i){"use strict";var n=i(93);function s(e,t,i){this.data=e;this.column=t;this.graph=i;this.index=undefined;this.value=undefined;this.values=i.getDistinctValues(e.get(),this.column);this.values.sort(function(e,t){return e>t?1:e<t?-1:0});if(this.values.length>0){this.selectValue(0)}this.dataPoints=[];this.loaded=false;this.onLoadCallback=undefined;if(i.animationPreload){this.loaded=false;this.loadInBackground()}else{this.loaded=true}}s.prototype.isLoaded=function(){return this.loaded};s.prototype.getLoadedProgress=function(){var e=this.values.length;var t=0;while(this.dataPoints[t]){t++}return Math.round(t/e*100)};s.prototype.getLabel=function(){return this.graph.filterLabel};s.prototype.getColumn=function(){return this.column};s.prototype.getSelectedValue=function(){if(this.index===undefined)return undefined;return this.values[this.index]};s.prototype.getValues=function(){return this.values};s.prototype.getValue=function(e){if(e>=this.values.length)throw new Error("Index out of range");return this.values[e]};s.prototype._getDataPoints=function(e){if(e===undefined)e=this.index;if(e===undefined)return[];var t;if(this.dataPoints[e]){t=this.dataPoints[e]}else{var i={};i.column=this.column;i.value=this.values[e];var s=new n(this.data,{filter:function e(t){return t[i.column]==i.value}}).get();t=this.graph._getDataPoints(s);this.dataPoints[e]=t}return t};s.prototype.setOnLoadCallback=function(e){this.onLoadCallback=e};s.prototype.selectValue=function(e){if(e>=this.values.length)throw new Error("Index out of range");this.index=e;this.value=this.values[e]};s.prototype.loadInBackground=function(e){if(e===undefined)e=0;var t=this.graph.frame;if(e<this.values.length){var i=this._getDataPoints(e);if(t.progress===undefined){t.progress=document.createElement("DIV");t.progress.style.position="absolute";t.progress.style.color="gray";t.appendChild(t.progress)}var n=this.getLoadedProgress();t.progress.innerHTML="Loading animation... "+n+"%";t.progress.style.bottom=60+"px";t.progress.style.left=10+"px";var s=this;setTimeout(function(){s.loadInBackground(e+1)},10);this.loaded=false}else{this.loaded=true;if(t.progress!==undefined){t.removeChild(t.progress);t.progress=undefined}if(this.onLoadCallback)this.onLoadCallback()}};e.exports=s},function(e,t,i){"use strict";var n=i(1);function s(e,t){if(e===undefined){throw new Error("No container element defined")}this.container=e;this.visible=t&&t.visible!=undefined?t.visible:true;if(this.visible){this.frame=document.createElement("DIV");this.frame.style.width="100%";this.frame.style.position="relative";this.container.appendChild(this.frame);this.frame.prev=document.createElement("INPUT");this.frame.prev.type="BUTTON";this.frame.prev.value="Prev";this.frame.appendChild(this.frame.prev);this.frame.play=document.createElement("INPUT");this.frame.play.type="BUTTON";this.frame.play.value="Play";this.frame.appendChild(this.frame.play);this.frame.next=document.createElement("INPUT");this.frame.next.type="BUTTON";this.frame.next.value="Next";this.frame.appendChild(this.frame.next);this.frame.bar=document.createElement("INPUT");this.frame.bar.type="BUTTON";this.frame.bar.style.position="absolute";this.frame.bar.style.border="1px solid red";this.frame.bar.style.width="100px";this.frame.bar.style.height="6px";this.frame.bar.style.borderRadius="2px";this.frame.bar.style.MozBorderRadius="2px";this.frame.bar.style.border="1px solid #7F7F7F";this.frame.bar.style.backgroundColor="#E5E5E5";this.frame.appendChild(this.frame.bar);this.frame.slide=document.createElement("INPUT");this.frame.slide.type="BUTTON";this.frame.slide.style.margin="0px";this.frame.slide.value=" ";this.frame.slide.style.position="relative";this.frame.slide.style.left="-100px";this.frame.appendChild(this.frame.slide);var i=this;this.frame.slide.onmousedown=function(e){i._onMouseDown(e)};this.frame.prev.onclick=function(e){i.prev(e)};this.frame.play.onclick=function(e){i.togglePlay(e)};this.frame.next.onclick=function(e){i.next(e)}}this.onChangeCallback=undefined;this.values=[];this.index=undefined;this.playTimeout=undefined;this.playInterval=1e3;this.playLoop=true}s.prototype.prev=function(){var e=this.getIndex();if(e>0){e--;this.setIndex(e)}};s.prototype.next=function(){var e=this.getIndex();if(e<this.values.length-1){e++;this.setIndex(e)}};s.prototype.playNext=function(){var e=new Date;var t=this.getIndex();if(t<this.values.length-1){t++;this.setIndex(t)}else if(this.playLoop){t=0;this.setIndex(t)}var i=new Date;var n=i-e;var s=Math.max(this.playInterval-n,0);var r=this;this.playTimeout=setTimeout(function(){r.playNext()},s)};s.prototype.togglePlay=function(){if(this.playTimeout===undefined){this.play()}else{this.stop()}};s.prototype.play=function(){if(this.playTimeout)return;this.playNext();if(this.frame){this.frame.play.value="Stop"}};s.prototype.stop=function(){clearInterval(this.playTimeout);this.playTimeout=undefined;if(this.frame){this.frame.play.value="Play"}};s.prototype.setOnChangeCallback=function(e){this.onChangeCallback=e};s.prototype.setPlayInterval=function(e){this.playInterval=e};s.prototype.getPlayInterval=function(e){return this.playInterval};s.prototype.setPlayLoop=function(e){this.playLoop=e};s.prototype.onChange=function(){if(this.onChangeCallback!==undefined){this.onChangeCallback()}};s.prototype.redraw=function(){if(this.frame){this.frame.bar.style.top=this.frame.clientHeight/2-this.frame.bar.offsetHeight/2+"px";this.frame.bar.style.width=this.frame.clientWidth-this.frame.prev.clientWidth-this.frame.play.clientWidth-this.frame.next.clientWidth-30+"px";var e=this.indexToLeft(this.index);this.frame.slide.style.left=e+"px"}};s.prototype.setValues=function(e){this.values=e;if(this.values.length>0)this.setIndex(0);else this.index=undefined};s.prototype.setIndex=function(e){if(e<this.values.length){this.index=e;this.redraw();this.onChange()}else{throw new Error("Index out of range")}};s.prototype.getIndex=function(){return this.index};s.prototype.get=function(){return this.values[this.index]};s.prototype._onMouseDown=function(e){var t=e.which?e.which===1:e.button===1;if(!t)return;this.startClientX=e.clientX;this.startSlideX=parseFloat(this.frame.slide.style.left);this.frame.style.cursor="move";var i=this;this.onmousemove=function(e){i._onMouseMove(e)};this.onmouseup=function(e){i._onMouseUp(e)};n.addEventListener(document,"mousemove",this.onmousemove);n.addEventListener(document,"mouseup",this.onmouseup);n.preventDefault(e)};s.prototype.leftToIndex=function(e){var t=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10;var i=e-3;var n=Math.round(i/t*(this.values.length-1));if(n<0)n=0;if(n>this.values.length-1)n=this.values.length-1;return n};s.prototype.indexToLeft=function(e){var t=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10;var i=e/(this.values.length-1)*t;var n=i+3;return n};s.prototype._onMouseMove=function(e){var t=e.clientX-this.startClientX;var i=this.startSlideX+t;var s=this.leftToIndex(i);this.setIndex(s);n.preventDefault()};s.prototype._onMouseUp=function(e){this.frame.style.cursor="auto";n.removeEventListener(document,"mousemove",this.onmousemove);n.removeEventListener(document,"mouseup",this.onmouseup);n.preventDefault()};e.exports=s},function(e,t){"use strict";function i(e,t,i,n){this._start=0;this._end=0;this._step=1;this.prettyStep=true;this.precision=5;this._current=0;this.setRange(e,t,i,n)}i.prototype.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};i.prototype.setRange=function(e,t,i,n){if(!this.isNumeric(e)){throw new Error("Parameter 'start' is not numeric; value: "+e)}if(!this.isNumeric(t)){throw new Error("Parameter 'end' is not numeric; value: "+e)}if(!this.isNumeric(i)){throw new Error("Parameter 'step' is not numeric; value: "+e)}this._start=e?e:0;this._end=t?t:0;this.setStep(i,n)};i.prototype.setStep=function(e,t){if(e===undefined||e<=0)return;if(t!==undefined)this.prettyStep=t;if(this.prettyStep===true)this._step=i.calculatePrettyStep(e);else this._step=e};i.calculatePrettyStep=function(e){var t=function e(t){return Math.log(t)/Math.LN10};var i=Math.pow(10,Math.round(t(e))),n=2*Math.pow(10,Math.round(t(e/2))),s=5*Math.pow(10,Math.round(t(e/5)));var r=i;if(Math.abs(n-e)<=Math.abs(r-e))r=n;if(Math.abs(s-e)<=Math.abs(r-e))r=s;if(r<=0){r=1}return r};i.prototype.getCurrent=function(){return parseFloat(this._current.toPrecision(this.precision))};i.prototype.getStep=function(){return this._step};i.prototype.start=function(e){if(e===undefined){e=false}this._current=this._start-this._start%this._step;if(e){if(this.getCurrent()<this._start){this.next()}}};i.prototype.next=function(){this._current+=this._step};i.prototype.end=function(){return this._current>this._end};e.exports=i},function(e,t){"use strict";function i(){this.min=undefined;this.max=undefined}i.prototype.adjust=function(e){if(e===undefined)return;if(this.min===undefined||this.min>e){this.min=e}if(this.max===undefined||this.max<e){this.max=e}};i.prototype.combine=function(e){this.add(e.min);this.add(e.max)};i.prototype.expand=function(e){if(e===undefined){return}var t=this.min-e;var i=this.max+e;if(t>i){throw new Error("Passed expansion value makes range invalid")}this.min=t;this.max=i};i.prototype.range=function(){return this.max-this.min};i.prototype.center=function(){return(this.min+this.max)/2};e.exports=i},function(e,t,i){"use strict";var n=i(62);var s=r(n);function r(e){return e&&e.__esModule?e:{default:e}}var o=i(1);var a=i(102);var l=i(100);var h={BAR:0,BARCOLOR:1,BARSIZE:2,DOT:3,DOTLINE:4,DOTCOLOR:5,DOTSIZE:6,GRID:7,LINE:8,SURFACE:9};var d={dot:h.DOT,"dot-line":h.DOTLINE,"dot-color":h.DOTCOLOR,"dot-size":h.DOTSIZE,line:h.LINE,grid:h.GRID,surface:h.SURFACE,bar:h.BAR,"bar-color":h.BARCOLOR,"bar-size":h.BARSIZE};var u=["width","height","filterLabel","legendLabel","xLabel","yLabel","zLabel","xValueLabel","yValueLabel","zValueLabel","showXAxis","showYAxis","showZAxis","showGrid","showPerspective","showShadow","keepAspectRatio","verticalRatio","dotSizeRatio","dotSizeMinFraction","dotSizeMaxFraction","showAnimationControls","animationInterval","animationPreload","animationAutoStart","axisColor","gridColor","xCenter","yCenter"];var f=["xBarWidth","yBarWidth","valueMin","valueMax","xMin","xMax","xStep","yMin","yMax","yStep","zMin","zMax","zStep"];var c=undefined;function p(e){for(var t in e){if(e.hasOwnProperty(t))return false}return true}function m(e){if(e===undefined||e===""||typeof e!="string"){return e}return e.charAt(0).toUpperCase()+e.slice(1)}function v(e,t){if(e===undefined||e===""){return t}return e+m(t)}function g(e,t,i,n){var s;var r;for(var o in i){s=i[o];r=v(n,s);t[r]=e[s]}}function y(e,t,i,n){var s;var r;for(var o in i){s=i[o];if(e[s]===undefined)continue;r=v(n,s);t[r]=e[s]}}function b(e,t){if(e===undefined||p(e)){throw new Error("No DEFAULTS passed")}if(t===undefined){throw new Error("No dst passed")}c=e;g(e,t,u);g(e,t,f,"default");_(e,t);t.margin=10;t.showGrayBottom=false;t.showTooltip=false;t.onclick_callback=null;t.eye=new l(0,0,-1)}function w(e,t){if(e===undefined){return}if(t===undefined){throw new Error("No dst passed")}if(c===undefined||p(c)){throw new Error("DEFAULTS not set for module Settings")}y(e,t,u);y(e,t,f,"default");_(e,t)}function _(e,t){if(e.backgroundColor!==undefined){T(e.backgroundColor,t)}M(e.dataColor,t);S(e.style,t);x(e.showLegend,t);D(e.cameraPosition,t);if(e.tooltip!==undefined){t.showTooltip=e.tooltip}if(e.onclick!=undefined){t.onclick_callback=e.onclick}if(e.tooltipStyle!==undefined){o.selectiveDeepExtend(["tooltipStyle"],t,e)}}function x(e,t){if(e===undefined){var i=c.showLegend===undefined;if(i){var n=t.style===h.DOTCOLOR||t.style===h.DOTSIZE;t.showLegend=n}else{}}else{t.showLegend=e}}function k(e){var t=d[e];if(t===undefined){return-1}return t}function C(e){var t=false;for(var i in h){if(h[i]===e){t=true;break}}return t}function S(e,t){if(e===undefined){return}var i;if(typeof e==="string"){i=k(e);if(i===-1){throw new Error("Style '"+e+"' is invalid")}}else{if(!C(e)){throw new Error("Style '"+e+"' is invalid")}i=e}t.style=i}function T(e,t){var i="white";var n="gray";var r=1;if(typeof e==="string"){i=e;n="none";r=0}else if((typeof e==="undefined"?"undefined":(0,s["default"])(e))==="object"){if(e.fill!==undefined)i=e.fill;if(e.stroke!==undefined)n=e.stroke;if(e.strokeWidth!==undefined)r=e.strokeWidth}else{throw new Error("Unsupported type of backgroundColor")}t.frame.style.backgroundColor=i;t.frame.style.borderColor=n;t.frame.style.borderWidth=r+"px";t.frame.style.borderStyle="solid"}function M(e,t){if(e===undefined){return}if(t.dataColor===undefined){t.dataColor={}}if(typeof e==="string"){t.dataColor.fill=e;t.dataColor.stroke=e}else{if(e.fill){t.dataColor.fill=e.fill}if(e.stroke){t.dataColor.stroke=e.stroke}if(e.strokeWidth!==undefined){t.dataColor.strokeWidth=e.strokeWidth}}}function D(e,t){var i=e;if(i===undefined){return}if(t.camera===undefined){t.camera=new a}t.camera.setArmRotation(i.horizontal,i.vertical);t.camera.setArmLength(i.distance)}e.exports.STYLE=h;e.exports.setDefaults=b;e.exports.setOptions=w;e.exports.setCameraPosition=D},function(e,t,i){"use strict";if(typeof window!=="undefined"){var n=i(113);var s=window["Hammer"]||i(114);e.exports=n(s,{preventDefault:"mouse"})}else{e.exports=function(){throw Error("hammer.js is only available in a browser, not in node.js.")}}},function(e,t,i){var n,s,r;"use strict";(function(i){if(true){!(s=[],n=i,r=typeof n==="function"?n.apply(t,s):n,r!==undefined&&(e.exports=r))}else if(typeof t==="object"){e.exports=i()}else{window.propagating=i()}})(function(){var e=null;return function t(i,n){var s=n||{preventDefault:false};if(i.Manager){var r=i;var o=function(e,i){var n=Object.create(s);if(i)r.assign(n,i);return t(new r(e,n),n)};r.assign(o,r);o.Manager=function(e,i){var n=Object.create(s);if(i)r.assign(n,i);return t(new r.Manager(e,n),n)};return o}var a=Object.create(i);var l=i.element;if(!l.hammer)l.hammer=[];l.hammer.push(a);i.on("hammer.input",function(t){if(s.preventDefault===true||s.preventDefault===t.pointerType){t.preventDefault()}if(t.isFirst){e=t.target}});a._handlers={};a.on=function(e,t){h(e).forEach(function(e){var n=a._handlers[e];if(!n){a._handlers[e]=n=[];i.on(e,d)}n.push(t)});return a};a.off=function(e,t){h(e).forEach(function(e){var n=a._handlers[e];if(n){n=t?n.filter(function(e){return e!==t}):[];if(n.length>0){a._handlers[e]=n}else{i.off(e,d);delete a._handlers[e]}}});return a};a.emit=function(t,n){e=n.target;i.emit(t,n)};a.destroy=function(){var e=i.element.hammer;var t=e.indexOf(a);if(t!==-1)e.splice(t,1);if(!e.length)delete i.element.hammer;a._handlers={};i.destroy()};function h(e){return e.match(/[^ ]+/g)}function d(t){if(t.type!=="hammer.input"){if(!t.srcEvent._handled){t.srcEvent._handled={}}if(t.srcEvent._handled[t.type]){return}else{t.srcEvent._handled[t.type]=true}}var i=false;t.stopPropagation=function(){i=true};var n=t.srcEvent.stopPropagation.bind(t.srcEvent);if(typeof n=="function"){t.srcEvent.stopPropagation=function(){n();t.stopPropagation()}}t.firstTarget=e;var s=e;while(s&&!i){var r=s.hammer;if(r){var o;for(var a=0;a<r.length;a++){o=r[a]._handlers[t.type];if(o)for(var l=0;l<o.length&&!i;l++){o[l](t)}}}s=s.parentNode}}return a}})},function(e,t,i){var n;(function(s,r,o,a){"use strict";var l=["","webkit","Moz","MS","ms","o"];var h=r.createElement("div");var d="function";var u=Math.round;var f=Math.abs;var c=Date.now;function p(e,t,i){return setTimeout(x(e,i),t)}function m(e,t,i){if(Array.isArray(e)){v(e,i[t],i);return true}return false}function v(e,t,i){var n;if(!e){return}if(e.forEach){e.forEach(t,i)}else if(e.length!==a){n=0;while(n<e.length){t.call(i,e[n],n,e);n++}}else{for(n in e){e.hasOwnProperty(n)&&t.call(i,e[n],n,e)}}}function g(e,t,i){var n="DEPRECATED METHOD: "+t+"\n"+i+" AT \n";return function(){var t=new Error("get-stack-trace");var i=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace";var r=s.console&&(s.console.warn||s.console.log);if(r){r.call(s.console,n,i)}return e.apply(this,arguments)}}var y;if(typeof Object.assign!=="function"){y=function e(t){if(t===a||t===null){throw new TypeError("Cannot convert undefined or null to object")}var i=Object(t);for(var n=1;n<arguments.length;n++){var s=arguments[n];if(s!==a&&s!==null){for(var r in s){if(s.hasOwnProperty(r)){i[r]=s[r]}}}}return i}}else{y=Object.assign}var b=g(function e(t,i,n){var s=Object.keys(i);var r=0;while(r<s.length){if(!n||n&&t[s[r]]===a){t[s[r]]=i[s[r]]}r++}return t},"extend","Use `assign`.");var w=g(function e(t,i){return b(t,i,true)},"merge","Use `assign`.");function _(e,t,i){var n=t.prototype,s;s=e.prototype=Object.create(n);s.constructor=e;s._super=n;if(i){y(s,i)}}function x(e,t){return function i(){return e.apply(t,arguments)}}function k(e,t){if(typeof e==d){return e.apply(t?t[0]||a:a,t)}return e}function C(e,t){return e===a?t:e}function S(e,t,i){v(E(t),function(t){e.addEventListener(t,i,false)})}function T(e,t,i){v(E(t),function(t){e.removeEventListener(t,i,false)})}function M(e,t){while(e){if(e==t){return true}e=e.parentNode}return false}function D(e,t){return e.indexOf(t)>-1}function E(e){return e.trim().split(/\s+/g)}function O(e,t,i){if(e.indexOf&&!i){return e.indexOf(t)}else{var n=0;while(n<e.length){if(i&&e[n][i]==t||!i&&e[n]===t){return n}n++}return-1}}function P(e){return Array.prototype.slice.call(e,0)}function I(e,t,i){var n=[];var s=[];var r=0;while(r<e.length){var o=t?e[r][t]:e[r];if(O(s,o)<0){n.push(e[r])}s[r]=o;r++}if(i){if(!t){n=n.sort()}else{n=n.sort(function e(i,n){return i[t]>n[t]})}}return n}function A(e,t){var i,n;var s=t[0].toUpperCase()+t.slice(1);var r=0;while(r<l.length){i=l[r];n=i?i+s:t;if(n in e){return n}r++}return a}var N=1;function F(){return N++}function R(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||s}var $=/mobile|tablet|ip(ad|hone|od)|android/i;var L="ontouchstart"in s;var z=A(s,"PointerEvent")!==a;var j=L&&$.test(navigator.userAgent);var H="touch";var B="pen";var U="mouse";var W="kinect";var Y=25;var V=1;var q=2;var G=4;var X=8;var Z=1;var K=2;var Q=4;var J=8;var ee=16;var te=K|Q;var ie=J|ee;var ne=te|ie;var se=["x","y"];var re=["clientX","clientY"];function oe(e,t){var i=this;this.manager=e;this.callback=t;this.element=e.element;this.target=e.options.inputTarget;this.domHandler=function(t){if(k(e.options.enable,[e])){i.handler(t)}};this.init()}oe.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler);this.evTarget&&S(this.target,this.evTarget,this.domHandler);this.evWin&&S(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler);this.evTarget&&T(this.target,this.evTarget,this.domHandler);this.evWin&&T(R(this.element),this.evWin,this.domHandler)}};function ae(e){var t;var i=e.options.inputClass;if(i){t=i}else if(z){t=De}else if(j){t=Re}else if(!L){t=ke}else{t=je}return new t(e,le)}function le(e,t,i){var n=i.pointers.length;var s=i.changedPointers.length;var r=t&V&&n-s===0;var o=t&(G|X)&&n-s===0;i.isFirst=!!r;i.isFinal=!!o;if(r){e.session={}}i.eventType=t;he(e,i);e.emit("hammer.input",i);e.recognize(i);e.session.prevInput=i}function he(e,t){var i=e.session;var n=t.pointers;var s=n.length;if(!i.firstInput){i.firstInput=fe(t)}if(s>1&&!i.firstMultiple){i.firstMultiple=fe(t)}else if(s===1){i.firstMultiple=false}var r=i.firstInput;var o=i.firstMultiple;var a=o?o.center:r.center;var l=t.center=ce(n);t.timeStamp=c();t.deltaTime=t.timeStamp-r.timeStamp;t.angle=ge(a,l);t.distance=ve(a,l);de(i,t);t.offsetDirection=me(t.deltaX,t.deltaY);var h=pe(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=h.x;t.overallVelocityY=h.y;t.overallVelocity=f(h.x)>f(h.y)?h.x:h.y;t.scale=o?be(o.pointers,n):1;t.rotation=o?ye(o.pointers,n):0;t.maxPointers=!i.prevInput?t.pointers.length:t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers;ue(i,t);var d=e.element;if(M(t.srcEvent.target,d)){d=t.srcEvent.target}t.target=d}function de(e,t){var i=t.center;var n=e.offsetDelta||{};var s=e.prevDelta||{};var r=e.prevInput||{};if(t.eventType===V||r.eventType===G){s=e.prevDelta={x:r.deltaX||0,y:r.deltaY||0};n=e.offsetDelta={x:i.x,y:i.y}}t.deltaX=s.x+(i.x-n.x);t.deltaY=s.y+(i.y-n.y)}function ue(e,t){var i=e.lastInterval||t,n=t.timeStamp-i.timeStamp,s,r,o,l;if(t.eventType!=X&&(n>Y||i.velocity===a)){var h=t.deltaX-i.deltaX;var d=t.deltaY-i.deltaY;var u=pe(n,h,d);r=u.x;o=u.y;s=f(u.x)>f(u.y)?u.x:u.y;l=me(h,d);e.lastInterval=t}else{s=i.velocity;r=i.velocityX;o=i.velocityY;l=i.direction}t.velocity=s;t.velocityX=r;t.velocityY=o;t.direction=l}function fe(e){var t=[];var i=0;while(i<e.pointers.length){t[i]={clientX:u(e.pointers[i].clientX),clientY:u(e.pointers[i].clientY)};i++}return{timeStamp:c(),pointers:t,center:ce(t),deltaX:e.deltaX,deltaY:e.deltaY}}function ce(e){var t=e.length;if(t===1){return{x:u(e[0].clientX),y:u(e[0].clientY)}}var i=0,n=0,s=0;while(s<t){i+=e[s].clientX;n+=e[s].clientY;s++}return{x:u(i/t),y:u(n/t)}}function pe(e,t,i){return{x:t/e||0,y:i/e||0}}function me(e,t){if(e===t){return Z}if(f(e)>=f(t)){return e<0?K:Q}return t<0?J:ee}function ve(e,t,i){if(!i){i=se}var n=t[i[0]]-e[i[0]],s=t[i[1]]-e[i[1]];return Math.sqrt(n*n+s*s)}function ge(e,t,i){if(!i){i=se}var n=t[i[0]]-e[i[0]],s=t[i[1]]-e[i[1]];return Math.atan2(s,n)*180/Math.PI}function ye(e,t){return ge(t[1],t[0],re)+ge(e[1],e[0],re)}function be(e,t){return ve(t[0],t[1],re)/ve(e[0],e[1],re)}var we={mousedown:V,mousemove:q,mouseup:G};var _e="mousedown";var xe="mousemove mouseup";function ke(){this.evEl=_e;this.evWin=xe;this.pressed=false;oe.apply(this,arguments)}_(ke,oe,{handler:function e(t){var i=we[t.type];if(i&V&&t.button===0){this.pressed=true}if(i&q&&t.which!==1){i=G}if(!this.pressed){return}if(i&G){this.pressed=false}this.callback(this.manager,i,{pointers:[t],changedPointers:[t],pointerType:U,srcEvent:t})}});var Ce={pointerdown:V,pointermove:q,pointerup:G,pointercancel:X,pointerout:X};var Se={2:H,3:B,4:U,5:W};var Te="pointerdown";var Me="pointermove pointerup pointercancel";if(s.MSPointerEvent&&!s.PointerEvent){Te="MSPointerDown";Me="MSPointerMove MSPointerUp MSPointerCancel"}function De(){this.evEl=Te;this.evWin=Me;oe.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}_(De,oe,{handler:function e(t){var i=this.store;var n=false;var s=t.type.toLowerCase().replace("ms","");var r=Ce[s];var o=Se[t.pointerType]||t.pointerType;var a=o==H;var l=O(i,t.pointerId,"pointerId");if(r&V&&(t.button===0||a)){if(l<0){i.push(t);l=i.length-1}}else if(r&(G|X)){n=true}if(l<0){return}i[l]=t;this.callback(this.manager,r,{pointers:i,changedPointers:[t],pointerType:o,srcEvent:t});if(n){i.splice(l,1)}}});var Ee={touchstart:V,touchmove:q,touchend:G,touchcancel:X};var Oe="touchstart";var Pe="touchstart touchmove touchend touchcancel";function Ie(){this.evTarget=Oe;this.evWin=Pe;this.started=false;oe.apply(this,arguments)}_(Ie,oe,{handler:function e(t){var i=Ee[t.type];if(i===V){this.started=true}if(!this.started){return}var n=Ae.call(this,t,i);if(i&(G|X)&&n[0].length-n[1].length===0){this.started=false}this.callback(this.manager,i,{pointers:n[0],changedPointers:n[1],pointerType:H,srcEvent:t})}});function Ae(e,t){var i=P(e.touches);var n=P(e.changedTouches);if(t&(G|X)){i=I(i.concat(n),"identifier",true)}return[i,n]}var Ne={touchstart:V,touchmove:q,touchend:G,touchcancel:X};var Fe="touchstart touchmove touchend touchcancel";function Re(){this.evTarget=Fe;this.targetIds={};oe.apply(this,arguments)}_(Re,oe,{handler:function e(t){var i=Ne[t.type];var n=$e.call(this,t,i);if(!n){return}this.callback(this.manager,i,{pointers:n[0],changedPointers:n[1],pointerType:H,srcEvent:t})}});function $e(e,t){var i=P(e.touches);var n=this.targetIds;if(t&(V|q)&&i.length===1){n[i[0].identifier]=true;return[i,i]}var s,r,o=P(e.changedTouches),a=[],l=this.target;r=i.filter(function(e){return M(e.target,l)});if(t===V){s=0;while(s<r.length){n[r[s].identifier]=true;s++}}s=0;while(s<o.length){if(n[o[s].identifier]){a.push(o[s])}if(t&(G|X)){delete n[o[s].identifier]}s++}if(!a.length){return}return[I(r.concat(a),"identifier",true),a]}var Le=2500;var ze=25;function je(){oe.apply(this,arguments);var e=x(this.handler,this);this.touch=new Re(this.manager,e);this.mouse=new ke(this.manager,e);this.primaryTouch=null;this.lastTouches=[]}_(je,oe,{handler:function e(t,i,n){var s=n.pointerType==H,r=n.pointerType==U;if(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents){return}if(s){He.call(this,i,n)}else if(r&&Ue.call(this,n)){return}this.callback(t,i,n)},destroy:function e(){this.touch.destroy();this.mouse.destroy()}});function He(e,t){if(e&V){this.primaryTouch=t.changedPointers[0].identifier;Be.call(this,t)}else if(e&(G|X)){Be.call(this,t)}}function Be(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var i={x:t.clientX,y:t.clientY};this.lastTouches.push(i);var n=this.lastTouches;var s=function(){var e=n.indexOf(i);if(e>-1){n.splice(e,1)}};setTimeout(s,Le)}}function Ue(e){var t=e.srcEvent.clientX,i=e.srcEvent.clientY;for(var n=0;n<this.lastTouches.length;n++){var s=this.lastTouches[n];var r=Math.abs(t-s.x),o=Math.abs(i-s.y);if(r<=ze&&o<=ze){return true}}return false}var We=A(h.style,"touchAction");var Ye=We!==a;var Ve="compute";var qe="auto";var Ge="manipulation";var Xe="none";var Ze="pan-x";var Ke="pan-y";var Qe=tt();function Je(e,t){this.manager=e;this.set(t)}Je.prototype={set:function(e){if(e==Ve){e=this.compute()}if(Ye&&this.manager.element.style&&Qe[e]){this.manager.element.style[We]=e}this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];v(this.manager.recognizers,function(t){if(k(t.options.enable,[t])){e=e.concat(t.getTouchAction())}});return et(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent;var i=e.offsetDirection;if(this.manager.session.prevented){t.preventDefault();return}var n=this.actions;var s=D(n,Xe)&&!Qe[Xe];var r=D(n,Ke)&&!Qe[Ke];var o=D(n,Ze)&&!Qe[Ze];if(s){var a=e.pointers.length===1;var l=e.distance<2;var h=e.deltaTime<250;if(a&&l&&h){return}}if(o&&r){return}if(s||r&&i&te||o&&i&ie){return this.preventSrc(t)}},preventSrc:function(e){this.manager.session.prevented=true;e.preventDefault()}};function et(e){if(D(e,Xe)){return Xe}var t=D(e,Ze);var i=D(e,Ke);if(t&&i){return Xe}if(t||i){return t?Ze:Ke}if(D(e,Ge)){return Ge}return qe}function tt(){if(!Ye){return false}var e={};var t=s.CSS&&s.CSS.supports;["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){e[i]=t?s.CSS.supports("touch-action",i):true});return e}var it=1;var nt=2;var st=4;var rt=8;var ot=rt;var at=16;var lt=32;function ht(e){this.options=y({},this.defaults,e||{});this.id=F();this.manager=null;this.options.enable=C(this.options.enable,true);this.state=it;this.simultaneous={};this.requireFail=[]}ht.prototype={defaults:{},set:function(e){y(this.options,e);this.manager&&this.manager.touchAction.update();return this},recognizeWith:function(e){if(m(e,"recognizeWith",this)){return this}var t=this.simultaneous;e=ft(e,this);if(!t[e.id]){t[e.id]=e;e.recognizeWith(this)}return this},dropRecognizeWith:function(e){if(m(e,"dropRecognizeWith",this)){return this}e=ft(e,this);delete this.simultaneous[e.id];return this},requireFailure:function(e){if(m(e,"requireFailure",this)){return this}var t=this.requireFail;e=ft(e,this);if(O(t,e)===-1){t.push(e);e.requireFailure(this)}return this},dropRequireFailure:function(e){if(m(e,"dropRequireFailure",this)){return this}e=ft(e,this);var t=O(this.requireFail,e);if(t>-1){this.requireFail.splice(t,1)}return this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this;var i=this.state;function n(i){t.manager.emit(i,e)}if(i<rt){n(t.options.event+dt(i))}n(t.options.event);if(e.additionalEvent){n(e.additionalEvent)}if(i>=rt){n(t.options.event+dt(i))}},tryEmit:function(e){if(this.canEmit()){return this.emit(e)}this.state=lt},canEmit:function(){var e=0;while(e<this.requireFail.length){if(!(this.requireFail[e].state&(lt|it))){return false}e++}return true},recognize:function(e){var t=y({},e);if(!k(this.options.enable,[this,t])){this.reset();this.state=lt;return}if(this.state&(ot|at|lt)){this.state=it}this.state=this.process(t);if(this.state&(nt|st|rt|at)){this.tryEmit(t)}},process:function(e){},getTouchAction:function(){},reset:function(){}};function dt(e){if(e&at){return"cancel"}else if(e&rt){return"end"}else if(e&st){return"move"}else if(e&nt){return"start"}return""}function ut(e){if(e==ee){return"down"}else if(e==J){return"up"}else if(e==K){return"left"}else if(e==Q){return"right"}return""}function ft(e,t){var i=t.manager;if(i){return i.get(e)}return e}function ct(){ht.apply(this,arguments)}_(ct,ht,{defaults:{pointers:1},attrTest:function(e){
var t=this.options.pointers;return t===0||e.pointers.length===t},process:function(e){var t=this.state;var i=e.eventType;var n=t&(nt|st);var s=this.attrTest(e);if(n&&(i&X||!s)){return t|at}else if(n||s){if(i&G){return t|rt}else if(!(t&nt)){return nt}return t|st}return lt}});function pt(){ct.apply(this,arguments);this.pX=null;this.pY=null}_(pt,ct,{defaults:{event:"pan",threshold:10,pointers:1,direction:ne},getTouchAction:function(){var e=this.options.direction;var t=[];if(e&te){t.push(Ke)}if(e&ie){t.push(Ze)}return t},directionTest:function(e){var t=this.options;var i=true;var n=e.distance;var s=e.direction;var r=e.deltaX;var o=e.deltaY;if(!(s&t.direction)){if(t.direction&te){s=r===0?Z:r<0?K:Q;i=r!=this.pX;n=Math.abs(e.deltaX)}else{s=o===0?Z:o<0?J:ee;i=o!=this.pY;n=Math.abs(e.deltaY)}}e.direction=s;return i&&n>t.threshold&&s&t.direction},attrTest:function(e){return ct.prototype.attrTest.call(this,e)&&(this.state&nt||!(this.state&nt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX;this.pY=e.deltaY;var t=ut(e.direction);if(t){e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}});function mt(){ct.apply(this,arguments)}_(mt,ct,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Xe]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&nt)},emit:function(e){if(e.scale!==1){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}});function vt(){ht.apply(this,arguments);this._timer=null;this._input=null}_(vt,ht,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[qe]},process:function(e){var t=this.options;var i=e.pointers.length===t.pointers;var n=e.distance<t.threshold;var s=e.deltaTime>t.time;this._input=e;if(!n||!i||e.eventType&(G|X)&&!s){this.reset()}else if(e.eventType&V){this.reset();this._timer=p(function(){this.state=ot;this.tryEmit()},t.time,this)}else if(e.eventType&G){return ot}return lt},reset:function(){clearTimeout(this._timer)},emit:function(e){if(this.state!==ot){return}if(e&&e.eventType&G){this.manager.emit(this.options.event+"up",e)}else{this._input.timeStamp=c();this.manager.emit(this.options.event,this._input)}}});function gt(){ct.apply(this,arguments)}_(gt,ct,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Xe]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&nt)}});function yt(){ct.apply(this,arguments)}_(yt,ct,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:te|ie,pointers:1},getTouchAction:function(){return pt.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction;var i;if(t&(te|ie)){i=e.overallVelocity}else if(t&te){i=e.overallVelocityX}else if(t&ie){i=e.overallVelocityY}return this._super.attrTest.call(this,e)&&t&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&f(i)>this.options.velocity&&e.eventType&G},emit:function(e){var t=ut(e.offsetDirection);if(t){this.manager.emit(this.options.event+t,e)}this.manager.emit(this.options.event,e)}});function bt(){ht.apply(this,arguments);this.pTime=false;this.pCenter=false;this._timer=null;this._input=null;this.count=0}_(bt,ht,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ge]},process:function(e){var t=this.options;var i=e.pointers.length===t.pointers;var n=e.distance<t.threshold;var s=e.deltaTime<t.time;this.reset();if(e.eventType&V&&this.count===0){return this.failTimeout()}if(n&&s&&i){if(e.eventType!=G){return this.failTimeout()}var r=this.pTime?e.timeStamp-this.pTime<t.interval:true;var o=!this.pCenter||ve(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp;this.pCenter=e.center;if(!o||!r){this.count=1}else{this.count+=1}this._input=e;var a=this.count%t.taps;if(a===0){if(!this.hasRequireFailures()){return ot}else{this._timer=p(function(){this.state=ot;this.tryEmit()},t.interval,this);return nt}}}return lt},failTimeout:function(){this._timer=p(function(){this.state=lt},this.options.interval,this);return lt},reset:function(){clearTimeout(this._timer)},emit:function(){if(this.state==ot){this._input.tapCount=this.count;this.manager.emit(this.options.event,this._input)}}});function wt(e,t){t=t||{};t.recognizers=C(t.recognizers,wt.defaults.preset);return new kt(e,t)}wt.VERSION="2.0.7";wt.defaults={domEvents:false,touchAction:Ve,enable:true,inputTarget:null,inputClass:null,preset:[[gt,{enable:false}],[mt,{enable:false},["rotate"]],[yt,{direction:te}],[pt,{direction:te},["swipe"]],[bt],[bt,{event:"doubletap",taps:2},["tap"]],[vt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var _t=1;var xt=2;function kt(e,t){this.options=y({},wt.defaults,t||{});this.options.inputTarget=this.options.inputTarget||e;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=e;this.input=ae(this);this.touchAction=new Je(this,this.options.touchAction);Ct(this,true);v(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]);e[3]&&t.requireFailure(e[3])},this)}kt.prototype={set:function(e){y(this.options,e);if(e.touchAction){this.touchAction.update()}if(e.inputTarget){this.input.destroy();this.input.target=e.inputTarget;this.input.init()}return this},stop:function(e){this.session.stopped=e?xt:_t},recognize:function(e){var t=this.session;if(t.stopped){return}this.touchAction.preventDefaults(e);var i;var n=this.recognizers;var s=t.curRecognizer;if(!s||s&&s.state&ot){s=t.curRecognizer=null}var r=0;while(r<n.length){i=n[r];if(t.stopped!==xt&&(!s||i==s||i.canRecognizeWith(s))){i.recognize(e)}else{i.reset()}if(!s&&i.state&(nt|st|rt)){s=t.curRecognizer=i}r++}},get:function(e){if(e instanceof ht){return e}var t=this.recognizers;for(var i=0;i<t.length;i++){if(t[i].options.event==e){return t[i]}}return null},add:function(e){if(m(e,"add",this)){return this}var t=this.get(e.options.event);if(t){this.remove(t)}this.recognizers.push(e);e.manager=this;this.touchAction.update();return e},remove:function(e){if(m(e,"remove",this)){return this}e=this.get(e);if(e){var t=this.recognizers;var i=O(t,e);if(i!==-1){t.splice(i,1);this.touchAction.update()}}return this},on:function(e,t){if(e===a){return}if(t===a){return}var i=this.handlers;v(E(e),function(e){i[e]=i[e]||[];i[e].push(t)});return this},off:function(e,t){if(e===a){return}var i=this.handlers;v(E(e),function(e){if(!t){delete i[e]}else{i[e]&&i[e].splice(O(i[e],t),1)}});return this},emit:function(e,t){if(this.options.domEvents){St(e,t)}var i=this.handlers[e]&&this.handlers[e].slice();if(!i||!i.length){return}t.type=e;t.preventDefault=function(){t.srcEvent.preventDefault()};var n=0;while(n<i.length){i[n](t);n++}},destroy:function(){this.element&&Ct(this,false);this.handlers={};this.session={};this.input.destroy();this.element=null}};function Ct(e,t){var i=e.element;if(!i.style){return}var n;v(e.options.cssProps,function(s,r){n=A(i.style,r);if(t){e.oldCssProps[n]=i.style[n];i.style[n]=s}else{i.style[n]=e.oldCssProps[n]||""}});if(!t){e.oldCssProps={}}}function St(e,t){var i=r.createEvent("Event");i.initEvent(e,true,true);i.gesture=t;t.target.dispatchEvent(i)}y(wt,{INPUT_START:V,INPUT_MOVE:q,INPUT_END:G,INPUT_CANCEL:X,STATE_POSSIBLE:it,STATE_BEGAN:nt,STATE_CHANGED:st,STATE_ENDED:rt,STATE_RECOGNIZED:ot,STATE_CANCELLED:at,STATE_FAILED:lt,DIRECTION_NONE:Z,DIRECTION_LEFT:K,DIRECTION_RIGHT:Q,DIRECTION_UP:J,DIRECTION_DOWN:ee,DIRECTION_HORIZONTAL:te,DIRECTION_VERTICAL:ie,DIRECTION_ALL:ne,Manager:kt,Input:oe,TouchAction:Je,TouchInput:Re,MouseInput:ke,PointerEventInput:De,TouchMouseInput:je,SingleTouchInput:Ie,Recognizer:ht,AttrRecognizer:ct,Tap:bt,Pan:pt,Swipe:yt,Pinch:mt,Rotate:gt,Press:vt,on:S,off:T,each:v,merge:w,extend:b,assign:y,inherit:_,bindFn:x,prefixed:A});var Tt=typeof s!=="undefined"?s:typeof self!=="undefined"?self:{};Tt.Hammer=wt;if(true){!(n=function(){return wt}.call(t,i,t,e),n!==a&&(e.exports=n))}else if(typeof e!="undefined"&&e.exports){e.exports=wt}else{s[o]=wt}})(window,document,"Hammer")},function(e,t,i){var n,s,r;"use strict";(function(i,o){if(true){!(s=[],n=o,r=typeof n==="function"?n.apply(t,s):n,r!==undefined&&(e.exports=r))}else if(typeof t==="object"){e.exports=o()}else{i.keycharm=o()}})(this,function(){function e(e){var t=e&&e.preventDefault||false;var i=e&&e.container||window;var n={};var s={keydown:{},keyup:{}};var r={};var o;for(o=97;o<=122;o++){r[String.fromCharCode(o)]={code:65+(o-97),shift:false}}for(o=65;o<=90;o++){r[String.fromCharCode(o)]={code:o,shift:true}}for(o=0;o<=9;o++){r[""+o]={code:48+o,shift:false}}for(o=1;o<=12;o++){r["F"+o]={code:111+o,shift:false}}for(o=0;o<=9;o++){r["num"+o]={code:96+o,shift:false}}r["num*"]={code:106,shift:false};r["num+"]={code:107,shift:false};r["num-"]={code:109,shift:false};r["num/"]={code:111,shift:false};r["num."]={code:110,shift:false};r["left"]={code:37,shift:false};r["up"]={code:38,shift:false};r["right"]={code:39,shift:false};r["down"]={code:40,shift:false};r["space"]={code:32,shift:false};r["enter"]={code:13,shift:false};r["shift"]={code:16,shift:undefined};r["esc"]={code:27,shift:false};r["backspace"]={code:8,shift:false};r["tab"]={code:9,shift:false};r["ctrl"]={code:17,shift:false};r["alt"]={code:18,shift:false};r["delete"]={code:46,shift:false};r["pageup"]={code:33,shift:false};r["pagedown"]={code:34,shift:false};r["="]={code:187,shift:false};r["-"]={code:189,shift:false};r["]"]={code:221,shift:false};r["["]={code:219,shift:false};var a=function(e){h(e,"keydown")};var l=function(e){h(e,"keyup")};var h=function(e,i){if(s[i][e.keyCode]!==undefined){var n=s[i][e.keyCode];for(var r=0;r<n.length;r++){if(n[r].shift===undefined){n[r].fn(e)}else if(n[r].shift==true&&e.shiftKey==true){n[r].fn(e)}else if(n[r].shift==false&&e.shiftKey==false){n[r].fn(e)}}if(t==true){e.preventDefault()}}};n.bind=function(e,t,i){if(i===undefined){i="keydown"}if(r[e]===undefined){throw new Error("unsupported key: "+e)}if(s[i][r[e].code]===undefined){s[i][r[e].code]=[]}s[i][r[e].code].push({fn:t,shift:r[e].shift})};n.bindAll=function(e,t){if(t===undefined){t="keydown"}for(var i in r){if(r.hasOwnProperty(i)){n.bind(i,e,t)}}};n.getKey=function(e){for(var t in r){if(r.hasOwnProperty(t)){if(e.shiftKey==true&&r[t].shift==true&&e.keyCode==r[t].code){return t}else if(e.shiftKey==false&&r[t].shift==false&&e.keyCode==r[t].code){return t}else if(e.keyCode==r[t].code&&t=="shift"){return t}}}return"unknown key, currently not supported"};n.unbind=function(e,t,i){if(i===undefined){i="keydown"}if(r[e]===undefined){throw new Error("unsupported key: "+e)}if(t!==undefined){var n=[];var o=s[i][r[e].code];if(o!==undefined){for(var a=0;a<o.length;a++){if(!(o[a].fn==t&&o[a].shift==r[e].shift)){n.push(s[i][r[e].code][a])}}}s[i][r[e].code]=n}else{s[i][r[e].code]=[]}};n.reset=function(){s={keydown:{},keyup:{}}};n.destroy=function(){s={keydown:{},keyup:{}};i.removeEventListener("keydown",a,true);i.removeEventListener("keyup",l,true)};i.addEventListener("keydown",a,true);i.addEventListener("keyup",l,true);return n}return e})},function(e,t,i){"use strict";t.util=i(1);t.DOMutil=i(88);t.DataSet=i(89);t.DataView=i(93);t.Queue=i(92);t.Timeline=i(117);t.Graph2d=i(148);t.timeline={Core:i(122),DateUtil:i(121),Range:i(118),stack:i(126),TimeStep:i(124),components:{items:{Item:i(128),BackgroundItem:i(132),BoxItem:i(130),PointItem:i(131),RangeItem:i(127)},BackgroundGroup:i(129),Component:i(120),CurrentTime:i(143),CustomTime:i(141),DataAxis:i(150),DataScale:i(151),GraphGroup:i(152),Group:i(125),ItemSet:i(123),Legend:i(156),LineGraph:i(149),TimeAxis:i(139)}};t.moment=i(82);t.Hammer=i(112);t.keycharm=i(115)},function(e,t,i){"use strict";var n=i(99);var s=i(112);var r=i(82);var o=i(1);var a=i(89);var l=i(93);var h=i(118);var d=i(122);var u=i(139);var f=i(143);var c=i(141);var p=i(123);var m=i(144).printStyle;var v=i(145).allOptions;var g=i(145).configureOptions;var y=i(146)["default"];var b=i(144)["default"];function w(e,t,i,n){if(!(this instanceof w)){throw new SyntaxError("Constructor must be called with the new operator")}if(!(Array.isArray(i)||i instanceof a||i instanceof l)&&i instanceof Object){var s=n;n=i;i=s}if(n&&n.throttleRedraw){console.warn('Timeline option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.')}var d=this;this.defaultOptions={start:null,end:null,autoResize:true,orientation:{axis:"bottom",item:"bottom"},moment:r,width:null,height:null,maxHeight:null,minHeight:null};this.options=o.deepExtend({},this.defaultOptions);this._create(e);if(!n||n&&typeof n.rtl=="undefined"){var c,m=this.dom.root;while(!c&&m){c=window.getComputedStyle(m,null).direction;m=m.parentElement}this.options.rtl=c&&c.toLowerCase()=="rtl"}else{this.options.rtl=n.rtl}this.options.rollingMode=n&&n.rollingMode;this.components=[];this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale:function e(){return d.timeAxis.step.scale},getStep:function e(){return d.timeAxis.step.step},toScreen:d._toScreen.bind(d),toGlobalScreen:d._toGlobalScreen.bind(d),toTime:d._toTime.bind(d),toGlobalTime:d._toGlobalTime.bind(d)}};this.range=new h(this.body,this.options);this.components.push(this.range);this.body.range=this.range;this.timeAxis=new u(this.body,this.options);this.timeAxis2=null;this.components.push(this.timeAxis);this.currentTime=new f(this.body,this.options);this.components.push(this.currentTime);this.itemSet=new p(this.body,this.options);this.components.push(this.itemSet);this.itemsData=null;this.groupsData=null;this.dom.root.onclick=function(e){d.emit("click",d.getEventProperties(e))};this.dom.root.ondblclick=function(e){d.emit("doubleClick",d.getEventProperties(e))};this.dom.root.oncontextmenu=function(e){d.emit("contextmenu",d.getEventProperties(e))};this.dom.root.onmouseover=function(e){d.emit("mouseOver",d.getEventProperties(e))};if(window.PointerEvent){this.dom.root.onpointerdown=function(e){d.emit("mouseDown",d.getEventProperties(e))};this.dom.root.onpointermove=function(e){d.emit("mouseMove",d.getEventProperties(e))};this.dom.root.onpointerup=function(e){d.emit("mouseUp",d.getEventProperties(e))}}else{this.dom.root.onmousemove=function(e){d.emit("mouseMove",d.getEventProperties(e))};this.dom.root.onmousedown=function(e){d.emit("mouseDown",d.getEventProperties(e))};this.dom.root.onmouseup=function(e){d.emit("mouseUp",d.getEventProperties(e))}}this.fitDone=false;this.on("changed",function(){if(this.itemsData==null||this.options.rollingMode)return;if(!d.fitDone){d.fitDone=true;if(d.options.start!=undefined||d.options.end!=undefined){if(d.options.start==undefined||d.options.end==undefined){var e=d.getItemRange()}var t=d.options.start!=undefined?d.options.start:e.min;var i=d.options.end!=undefined?d.options.end:e.max;d.setWindow(t,i,{animation:false})}else{d.fit({animation:false})}}});if(n){this.setOptions(n)}if(i){this.setGroups(i)}if(t){this.setItems(t)}this._redraw()}w.prototype=new d;w.prototype._createConfigurator=function(){return new y(this,this.dom.container,g)};w.prototype.redraw=function(){this.itemSet&&this.itemSet.markDirty({refreshItems:true});this._redraw()};w.prototype.setOptions=function(e){var t=b.validate(e,v);if(t===true){console.log("%cErrors have been found in the supplied options object.",m)}d.prototype.setOptions.call(this,e);if("type"in e){if(e.type!==this.options.type){this.options.type=e.type;var i=this.itemsData;if(i){var n=this.getSelection();this.setItems(null);this.setItems(i);this.setSelection(n)}}}};w.prototype.setItems=function(e){var t;if(!e){t=null}else if(e instanceof a||e instanceof l){t=e}else{t=new a(e,{type:{start:"Date",end:"Date"}})}this.itemsData=t;this.itemSet&&this.itemSet.setItems(t)};w.prototype.setGroups=function(e){var t;if(!e){t=null}else{var i=function e(t){return t.visible!==false};if(e instanceof a||e instanceof l){t=new l(e,{filter:i})}else{t=new a(e.filter(i))}}this.groupsData=t;this.itemSet.setGroups(t)};w.prototype.setData=function(e){if(e&&e.groups){this.setGroups(e.groups)}if(e&&e.items){this.setItems(e.items)}};w.prototype.setSelection=function(e,t){this.itemSet&&this.itemSet.setSelection(e);if(t&&t.focus){this.focus(e,t)}};w.prototype.getSelection=function(){return this.itemSet&&this.itemSet.getSelection()||[]};w.prototype.focus=function(e,t){if(!this.itemsData||e==undefined)return;var i=Array.isArray(e)?e:[e];var n=this.itemsData.getDataSet().get(i,{type:{start:"Date",end:"Date"}});var s=null;var r=null;n.forEach(function(e){var t=e.start.valueOf();var i="end"in e?e.end.valueOf():e.start.valueOf();if(s===null||t<s){s=t}if(r===null||i>r){r=i}});if(s!==null&&r!==null){var o=(s+r)/2;var a=Math.max(this.range.end-this.range.start,(r-s)*1.1);var l=t&&t.animation!==undefined?t.animation:true;this.range.setRange(o-a/2,o+a/2,{animation:l})}};w.prototype.fit=function(e){var t=e&&e.animation!==undefined?e.animation:true;var i;var n=this.itemsData&&this.itemsData.getDataSet();if(n.length===1&&n.get()[0].end===undefined){i=this.getDataRange();this.moveTo(i.min.valueOf(),{animation:t})}else{i=this.getItemRange();this.range.setRange(i.min,i.max,{animation:t})}};w.prototype.getItemRange=function(){var e=this.getDataRange();var t=e.min!==null?e.min.valueOf():null;var i=e.max!==null?e.max.valueOf():null;var n=null;var s=null;if(t!=null&&i!=null){var r=function e(t){return o.convert(t.data.start,"Date").valueOf()};var a=function e(t){var i=t.data.end!=undefined?t.data.end:t.data.start;return o.convert(i,"Date").valueOf()};var l=i-t;if(l<=0){l=10}var h=l/this.props.center.width;o.forEach(this.itemSet.items,function(e){if(e.groupShowing){e.show();e.repositionX()}var o=r(e);var l=a(e);if(this.options.rtl){var d=o-(e.getWidthRight()+10)*h;var u=l+(e.getWidthLeft()+10)*h}else{var d=o-(e.getWidthLeft()+10)*h;var u=l+(e.getWidthRight()+10)*h}if(d<t){t=d;n=e}if(u>i){i=u;s=e}}.bind(this));if(n&&s){var d=n.getWidthLeft()+10;var u=s.getWidthRight()+10;var f=this.props.center.width-d-u;if(f>0){if(this.options.rtl){t=r(n)-u*l/f;i=a(s)+d*l/f}else{t=r(n)-d*l/f;i=a(s)+u*l/f}}}}return{min:t!=null?new Date(t):null,max:i!=null?new Date(i):null}};w.prototype.getDataRange=function(){var e=null;var t=null;var i=this.itemsData&&this.itemsData.getDataSet();if(i){i.forEach(function(i){var n=o.convert(i.start,"Date").valueOf();var s=o.convert(i.end!=undefined?i.end:i.start,"Date").valueOf();if(e===null||n<e){e=n}if(t===null||s>t){t=s}})}return{min:e!=null?new Date(e):null,max:t!=null?new Date(t):null}};w.prototype.getEventProperties=function(e){var t=e.center?e.center.x:e.clientX;var i=e.center?e.center.y:e.clientY;if(this.options.rtl){var n=o.getAbsoluteRight(this.dom.centerContainer)-t}else{var n=t-o.getAbsoluteLeft(this.dom.centerContainer)}var s=i-o.getAbsoluteTop(this.dom.centerContainer);var r=this.itemSet.itemFromTarget(e);var a=this.itemSet.groupFromTarget(e);var l=c.customTimeFromTarget(e);var h=this.itemSet.options.snap||null;var d=this.body.util.getScale();var u=this.body.util.getStep();var f=this._toTime(n);var p=h?h(f,d,u):f;var m=o.getTarget(e);var v=null;if(r!=null){v="item"}else if(l!=null){v="custom-time"}else if(o.hasParent(m,this.timeAxis.dom.foreground)){v="axis"}else if(this.timeAxis2&&o.hasParent(m,this.timeAxis2.dom.foreground)){v="axis"}else if(o.hasParent(m,this.itemSet.dom.labelSet)){v="group-label"}else if(o.hasParent(m,this.currentTime.bar)){v="current-time"}else if(o.hasParent(m,this.dom.center)){v="background"}return{event:e,item:r?r.id:null,group:a?a.groupId:null,what:v,pageX:e.srcEvent?e.srcEvent.pageX:e.pageX,pageY:e.srcEvent?e.srcEvent.pageY:e.pageY,x:n,y:s,time:f,snappedTime:p}};w.prototype.toggleRollingMode=function(){if(this.range.rolling){this.range.stopRolling()}else{if(this.options.rollingMode==undefined){this.setOptions(this.options)}this.range.startRolling()}};e.exports=w},function(e,t,i){"use strict";var n=i(58);var s=h(n);var r=i(90);var o=h(r);var a=i(62);var l=h(a);function h(e){return e&&e.__esModule?e:{default:e}}var d=i(1);var u=i(119);var f=i(82);var c=i(120);var p=i(121);function m(e,t){var i=f().hours(0).minutes(0).seconds(0).milliseconds(0);var n=i.clone().add(-3,"days").valueOf();var s=i.clone().add(3,"days").valueOf();if(t===undefined){this.start=n;this.end=s}else{this.start=t.start||n;this.end=t.end||s}this.rolling=false;this.body=e;this.deltaDifference=0;this.scaleOffset=0;this.startToFront=false;this.endToFront=true;this.defaultOptions={rtl:false,start:null,end:null,moment:f,direction:"horizontal",moveable:true,zoomable:true,min:null,max:null,zoomMin:10,zoomMax:1e3*60*60*24*365*1e4,rollingMode:{follow:false,offset:.5}};this.options=d.extend({},this.defaultOptions);this.props={touch:{}};this.animationTimer=null;this.body.emitter.on("panstart",this._onDragStart.bind(this));this.body.emitter.on("panmove",this._onDrag.bind(this));this.body.emitter.on("panend",this._onDragEnd.bind(this));this.body.emitter.on("mousewheel",this._onMouseWheel.bind(this));this.body.emitter.on("touch",this._onTouch.bind(this));this.body.emitter.on("pinch",this._onPinch.bind(this));this.body.dom.rollingModeBtn.addEventListener("click",this.startRolling.bind(this));this.setOptions(t)}m.prototype=new c;m.prototype.setOptions=function(e){if(e){var t=["animation","direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","rtl","showCurrentTime","rollingMode","horizontalScroll"];d.selectiveExtend(t,this.options,e);if(e.rollingMode&&e.rollingMode.follow){this.startRolling()}if("start"in e||"end"in e){this.setRange(e.start,e.end)}}};function v(e){if(e!="horizontal"&&e!="vertical"){throw new TypeError('Unknown direction "'+e+'". '+'Choose "horizontal" or "vertical".')}}m.prototype.startRolling=function(){var e=this;function t(){e.stopRolling();e.rolling=true;var i=e.end-e.start;var n=d.convert(new Date,"Date").valueOf();var s=n-i*e.options.rollingMode.offset;var r=n+i*(1-e.options.rollingMode.offset);var o=e.options&&e.options.animation!==undefined?e.options.animation:true;var a={animation:false};e.setRange(s,r,a);var l=e.conversion(e.body.domProps.center.width).scale;var i=1/l/10;if(i<30)i=30;if(i>1e3)i=1e3;e.body.dom.rollingModeBtn.style.visibility="hidden";e.currentTimeTimer=setTimeout(t,i)}t()};m.prototype.stopRolling=function(){if(this.currentTimeTimer!==undefined){clearTimeout(this.currentTimeTimer);this.rolling=false;this.body.dom.rollingModeBtn.style.visibility="visible"}};m.prototype.setRange=function(e,t,i,n){if(!i){i={}}if(i.byUser!==true){i.byUser=false}var r=this;var a=e!=undefined?d.convert(e,"Date").valueOf():null;var h=t!=undefined?d.convert(t,"Date").valueOf():null;this._cancelAnimation();if(i.animation){var u=this.start;var f=this.end;var c=(0,l["default"])(i.animation)==="object"&&"duration"in i.animation?i.animation.duration:500;var m=(0,l["default"])(i.animation)==="object"&&"easingFunction"in i.animation?i.animation.easingFunction:"easeInOutQuad";var v=d.easingFunctions[m];if(!v){throw new Error("Unknown easing function "+(0,o["default"])(m)+". "+"Choose from: "+(0,s["default"])(d.easingFunctions).join(", "))}var g=(new Date).valueOf();var y=false;var b=function e(){if(!r.props.touch.dragging){var t=(new Date).valueOf();var s=t-g;var o=v(s/c);var l=s>c;var d=l||a===null?a:u+(a-u)*o;var m=l||h===null?h:f+(h-f)*o;w=r._applyRange(d,m);p.updateHiddenDates(r.options.moment,r.body,r.options.hiddenDates);y=y||w;var b={start:new Date(r.start),end:new Date(r.end),byUser:i.byUser,event:i.event};if(w){r.body.emitter.emit("rangechange",b)}if(l){if(y){r.body.emitter.emit("rangechanged",b);if(n){return n()}}}else{r.animationTimer=setTimeout(e,20)}}};return b()}else{var w=this._applyRange(a,h);p.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates);if(w){var _={start:new Date(this.start),end:new Date(this.end),byUser:i.byUser,event:i.event};this.body.emitter.emit("rangechange",_);clearTimeout(r.timeoutID);r.timeoutID=setTimeout(function(){r.body.emitter.emit("rangechanged",_)},200);if(n){return n()}}}};m.prototype.getMillisecondsPerPixel=function(){return(this.end-this.start)/this.body.dom.center.clientWidth};m.prototype._cancelAnimation=function(){if(this.animationTimer){clearTimeout(this.animationTimer);this.animationTimer=null}};m.prototype._applyRange=function(e,t){var i=e!=null?d.convert(e,"Date").valueOf():this.start,n=t!=null?d.convert(t,"Date").valueOf():this.end,s=this.options.max!=null?d.convert(this.options.max,"Date").valueOf():null,r=this.options.min!=null?d.convert(this.options.min,"Date").valueOf():null,o;if(isNaN(i)||i===null){throw new Error('Invalid start "'+e+'"')}if(isNaN(n)||n===null){throw new Error('Invalid end "'+t+'"')}if(n<i){n=i}if(r!==null){if(i<r){o=r-i;i+=o;n+=o;if(s!=null){if(n>s){n=s}}}}if(s!==null){if(n>s){o=n-s;i-=o;n-=o;if(r!=null){if(i<r){i=r}}}}if(this.options.zoomMin!==null){var a=parseFloat(this.options.zoomMin);if(a<0){a=0}if(n-i<a){var l=.5;if(this.end-this.start===a&&i>=this.start-l&&n<=this.end){i=this.start;n=this.end}else{o=a-(n-i);i-=o/2;n+=o/2}}}if(this.options.zoomMax!==null){var h=parseFloat(this.options.zoomMax);if(h<0){h=0}if(n-i>h){if(this.end-this.start===h&&i<this.start&&n>this.end){i=this.start;n=this.end}else{o=n-i-h;i+=o/2;n-=o/2}}}var u=this.start!=i||this.end!=n;if(!(i>=this.start&&i<=this.end||n>=this.start&&n<=this.end)&&!(this.start>=i&&this.start<=n||this.end>=i&&this.end<=n)){this.body.emitter.emit("checkRangedItems")}this.start=i;this.end=n;return u};m.prototype.getRange=function(){return{start:this.start,end:this.end}};m.prototype.conversion=function(e,t){return m.conversion(this.start,this.end,e,t)};m.conversion=function(e,t,i,n){if(n===undefined){n=0}if(i!=0&&t-e!=0){return{offset:e,scale:i/(t-e-n)}}else{return{offset:0,scale:1}}};m.prototype._onDragStart=function(e){this.deltaDifference=0;this.previousDelta=0;if(!this.options.moveable)return;if(!this._isInsideRange(e))return;if(!this.props.touch.allowDragging)return;this.stopRolling();this.props.touch.start=this.start;this.props.touch.end=this.end;this.props.touch.dragging=true;if(this.body.dom.root){this.body.dom.root.style.cursor="move"}};m.prototype._onDrag=function(e){if(!e)return;if(!this.props.touch.dragging)return;if(!this.options.moveable)return;if(!this.props.touch.allowDragging)return;var t=this.options.direction;v(t);var i=t=="horizontal"?e.deltaX:e.deltaY;i-=this.deltaDifference;var n=this.props.touch.end-this.props.touch.start;var s=p.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end);n-=s;var r=t=="horizontal"?this.body.domProps.center.width:this.body.domProps.center.height;if(this.options.rtl){var o=i/r*n}else{var o=-i/r*n}var a=this.props.touch.start+o;var l=this.props.touch.end+o;var h=p.snapAwayFromHidden(this.body.hiddenDates,a,this.previousDelta-i,true);var d=p.snapAwayFromHidden(this.body.hiddenDates,l,this.previousDelta-i,true);if(h!=a||d!=l){this.deltaDifference+=i;this.props.touch.start=h;this.props.touch.end=d;this._onDrag(e);return}this.previousDelta=i;this._applyRange(a,l);var u=new Date(this.start);var f=new Date(this.end);this.body.emitter.emit("rangechange",{start:u,end:f,byUser:true,event:e});this.body.emitter.emit("panmove")};m.prototype._onDragEnd=function(e){if(!this.props.touch.dragging)return;if(!this.options.moveable)return;if(!this.props.touch.allowDragging)return;this.props.touch.dragging=false;if(this.body.dom.root){this.body.dom.root.style.cursor="auto"}this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:true,event:e})};m.prototype._onMouseWheel=function(e){var t=0;if(e.wheelDelta){t=e.wheelDelta/120}else if(e.detail){t=-e.detail/3}if(this.options.zoomKey&&!e[this.options.zoomKey]&&this.options.zoomable||!this.options.zoomable&&this.options.moveable){if(this.options.horizontalScroll){e.preventDefault();var i=t*(this.end-this.start)/20;var n=this.start-i;var s=this.end-i;var r={animation:false,byUser:true,event:e};this.setRange(n,s,r)}return}if(!(this.options.zoomable&&this.options.moveable))return;if(!this._isInsideRange(e))return;if(t){var o;if(t<0){o=1-t/5}else{o=1/(1+t/5)}var a;if(this.rolling){a=this.start+(this.end-this.start)*this.options.rollingMode.offset}else{var l=this.getPointer({x:e.clientX,y:e.clientY},this.body.dom.center);a=this._pointerToDate(l)}this.zoom(o,a,t,e);e.preventDefault()}};m.prototype._onTouch=function(e){this.props.touch.start=this.start;this.props.touch.end=this.end;this.props.touch.allowDragging=true;this.props.touch.center=null;this.scaleOffset=0;this.deltaDifference=0};m.prototype._onPinch=function(e){if(!(this.options.zoomable&&this.options.moveable))return;this.props.touch.allowDragging=false;if(!this.props.touch.center){this.props.touch.center=this.getPointer(e.center,this.body.dom.center)}this.stopRolling();var t=1/(e.scale+this.scaleOffset);var i=this._pointerToDate(this.props.touch.center);var n=p.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end);var s=p.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this,i);var r=n-s;var o=i-s+(this.props.touch.start-(i-s))*t;var a=i+r+(this.props.touch.end-(i+r))*t;this.startToFront=1-t<=0;this.endToFront=t-1<=0;var l=p.snapAwayFromHidden(this.body.hiddenDates,o,1-t,true);var h=p.snapAwayFromHidden(this.body.hiddenDates,a,t-1,true);if(l!=o||h!=a){this.props.touch.start=l;this.props.touch.end=h;this.scaleOffset=1-e.scale;o=l;a=h}var d={animation:false,byUser:true,event:e};this.setRange(o,a,d);this.startToFront=false;this.endToFront=true};m.prototype._isInsideRange=function(e){var t=e.center?e.center.x:e.clientX;if(this.options.rtl){var i=t-d.getAbsoluteLeft(this.body.dom.centerContainer)}else{var i=d.getAbsoluteRight(this.body.dom.centerContainer)-t}var n=this.body.util.toTime(i);return n>=this.start&&n<=this.end};m.prototype._pointerToDate=function(e){var t;var i=this.options.direction;v(i);if(i=="horizontal"){return this.body.util.toTime(e.x).valueOf()}else{var n=this.body.domProps.center.height;t=this.conversion(n);return e.y/t.scale+t.offset}};m.prototype.getPointer=function(e,t){if(this.options.rtl){return{x:d.getAbsoluteRight(t)-e.x,y:e.y-d.getAbsoluteTop(t)}}else{return{x:e.x-d.getAbsoluteLeft(t),y:e.y-d.getAbsoluteTop(t)}}};m.prototype.zoom=function(e,t,i,n){if(t==null){t=(this.start+this.end)/2}var s=p.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end);var r=p.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this,t);var o=s-r;var a=t-r+(this.start-(t-r))*e;var l=t+o+(this.end-(t+o))*e;this.startToFront=i>0?false:true;this.endToFront=-i>0?false:true;var h=p.snapAwayFromHidden(this.body.hiddenDates,a,i,true);var d=p.snapAwayFromHidden(this.body.hiddenDates,l,-i,true);if(h!=a||d!=l){a=h;l=d}var u={animation:false,byUser:true,event:n};this.setRange(a,l,u);this.startToFront=false;this.endToFront=true};m.prototype.move=function(e){var t=this.end-this.start;var i=this.start+t*e;var n=this.end+t*e;this.start=i;this.end=n};m.prototype.moveTo=function(e){var t=(this.start+this.end)/2;var i=t-e;var n=this.start-i;var s=this.end-i;var r={animation:false,byUser:true,event:null};this.setRange(n,s,r)};e.exports=m},function(e,t,i){"use strict";var n=i(112);t.onTouch=function(e,t){t.inputHandler=function(e){if(e.isFirst){t(e)}};e.on("hammer.input",t.inputHandler)};t.onRelease=function(e,t){t.inputHandler=function(e){if(e.isFinal){t(e)}};return e.on("hammer.input",t.inputHandler)};t.offTouch=function(e,t){e.off("hammer.input",t.inputHandler)};t.offRelease=t.offTouch;t.disablePreventDefaultVertically=function(e){var t="pan-y";e.getTouchAction=function(){return[t]};return e}},function(e,t,i){"use strict";var n=i(1);function s(e,t){this.options=null;this.props=null}s.prototype.setOptions=function(e){if(e){n.extend(this.options,e)}};s.prototype.redraw=function(){return false};s.prototype.destroy=function(){};
s.prototype._isResized=function(){var e=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;this.props._previousWidth=this.props.width;this.props._previousHeight=this.props.height;return e};e.exports=s},function(e,t){"use strict";t.convertHiddenOptions=function(e,i,n){if(n&&!Array.isArray(n)){return t.convertHiddenOptions(e,i,[n])}i.hiddenDates=[];if(n){if(Array.isArray(n)==true){for(var s=0;s<n.length;s++){if(n[s].repeat===undefined){var r={};r.start=e(n[s].start).toDate().valueOf();r.end=e(n[s].end).toDate().valueOf();i.hiddenDates.push(r)}}i.hiddenDates.sort(function(e,t){return e.start-t.start})}}};t.updateHiddenDates=function(e,i,n){if(n&&!Array.isArray(n)){return t.updateHiddenDates(e,i,[n])}if(n&&i.domProps.centerContainer.width!==undefined){t.convertHiddenOptions(e,i,n);var s=e(i.range.start);var r=e(i.range.end);var o=i.range.end-i.range.start;var a=o/i.domProps.centerContainer.width;for(var l=0;l<n.length;l++){if(n[l].repeat!==undefined){var h=e(n[l].start);var d=e(n[l].end);if(h._d=="Invalid Date"){throw new Error("Supplied start date is not valid: "+n[l].start)}if(d._d=="Invalid Date"){throw new Error("Supplied end date is not valid: "+n[l].end)}var u=d-h;if(u>=4*a){var f=0;var c=r.clone();switch(n[l].repeat){case"daily":if(h.day()!=d.day()){f=1}h.dayOfYear(s.dayOfYear());h.year(s.year());h.subtract(7,"days");d.dayOfYear(s.dayOfYear());d.year(s.year());d.subtract(7-f,"days");c.add(1,"weeks");break;case"weekly":var p=d.diff(h,"days");var m=h.day();h.date(s.date());h.month(s.month());h.year(s.year());d=h.clone();h.day(m);d.day(m);d.add(p,"days");h.subtract(1,"weeks");d.subtract(1,"weeks");c.add(1,"weeks");break;case"monthly":if(h.month()!=d.month()){f=1}h.month(s.month());h.year(s.year());h.subtract(1,"months");d.month(s.month());d.year(s.year());d.subtract(1,"months");d.add(f,"months");c.add(1,"months");break;case"yearly":if(h.year()!=d.year()){f=1}h.year(s.year());h.subtract(1,"years");d.year(s.year());d.subtract(1,"years");d.add(f,"years");c.add(1,"years");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",n[l].repeat);return}while(h<c){i.hiddenDates.push({start:h.valueOf(),end:d.valueOf()});switch(n[l].repeat){case"daily":h.add(1,"days");d.add(1,"days");break;case"weekly":h.add(1,"weeks");d.add(1,"weeks");break;case"monthly":h.add(1,"months");d.add(1,"months");break;case"yearly":h.add(1,"y");d.add(1,"y");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",n[l].repeat);return}}i.hiddenDates.push({start:h.valueOf(),end:d.valueOf()})}}}t.removeDuplicates(i);var v=t.isHidden(i.range.start,i.hiddenDates);var g=t.isHidden(i.range.end,i.hiddenDates);var y=i.range.start;var b=i.range.end;if(v.hidden==true){y=i.range.startToFront==true?v.startDate-1:v.endDate+1}if(g.hidden==true){b=i.range.endToFront==true?g.startDate-1:g.endDate+1}if(v.hidden==true||g.hidden==true){i.range._applyRange(y,b)}}};t.removeDuplicates=function(e){var t=e.hiddenDates;var i=[];for(var n=0;n<t.length;n++){for(var s=0;s<t.length;s++){if(n!=s&&t[s].remove!=true&&t[n].remove!=true){if(t[s].start>=t[n].start&&t[s].end<=t[n].end){t[s].remove=true}else if(t[s].start>=t[n].start&&t[s].start<=t[n].end){t[n].end=t[s].end;t[s].remove=true}else if(t[s].end>=t[n].start&&t[s].end<=t[n].end){t[n].start=t[s].start;t[s].remove=true}}}}for(var n=0;n<t.length;n++){if(t[n].remove!==true){i.push(t[n])}}e.hiddenDates=i;e.hiddenDates.sort(function(e,t){return e.start-t.start})};t.printDates=function(e){for(var t=0;t<e.length;t++){console.log(t,new Date(e[t].start),new Date(e[t].end),e[t].start,e[t].end,e[t].remove)}};t.stepOverHiddenDates=function(e,t,i){var n=false;var s=t.current.valueOf();for(var r=0;r<t.hiddenDates.length;r++){var o=t.hiddenDates[r].start;var a=t.hiddenDates[r].end;if(s>=o&&s<a){n=true;break}}if(n==true&&s<t._end.valueOf()&&s!=i){var l=e(i);var h=e(a);if(l.year()!=h.year()){t.switchedYear=true}else if(l.month()!=h.month()){t.switchedMonth=true}else if(l.dayOfYear()!=h.dayOfYear()){t.switchedDay=true}t.current=h}};t.toScreen=function(e,i,n){if(e.body.hiddenDates.length==0){var s=e.range.conversion(n);return(i.valueOf()-s.offset)*s.scale}else{var r=t.isHidden(i,e.body.hiddenDates);if(r.hidden==true){i=r.startDate}var o=t.getHiddenDurationBetween(e.body.hiddenDates,e.range.start,e.range.end);if(i<e.range.start){var s=e.range.conversion(n,o);var a=t.getHiddenDurationBeforeStart(e.body.hiddenDates,i,s.offset);i=e.options.moment(i).toDate().valueOf();i=i+a;return-(s.offset-i.valueOf())*s.scale}else if(i>e.range.end){var l={start:e.range.start,end:i};i=t.correctTimeForHidden(e.options.moment,e.body.hiddenDates,l,i);var s=e.range.conversion(n,o);return(i.valueOf()-s.offset)*s.scale}else{i=t.correctTimeForHidden(e.options.moment,e.body.hiddenDates,e.range,i);var s=e.range.conversion(n,o);return(i.valueOf()-s.offset)*s.scale}}};t.toTime=function(e,i,n){if(e.body.hiddenDates.length==0){var s=e.range.conversion(n);return new Date(i/s.scale+s.offset)}else{var r=t.getHiddenDurationBetween(e.body.hiddenDates,e.range.start,e.range.end);var o=e.range.end-e.range.start-r;var a=o*i/n;var l=t.getAccumulatedHiddenDuration(e.body.hiddenDates,e.range,a);var h=new Date(l+a+e.range.start);return h}};t.getHiddenDurationBetween=function(e,t,i){var n=0;for(var s=0;s<e.length;s++){var r=e[s].start;var o=e[s].end;if(r>=t&&o<i){n+=o-r}}return n};t.getHiddenDurationBeforeStart=function(e,t,i){var n=0;for(var s=0;s<e.length;s++){var r=e[s].start;var o=e[s].end;if(r>=t&&o<=i){n+=o-r}}return n};t.correctTimeForHidden=function(e,i,n,s){s=e(s).toDate().valueOf();s-=t.getHiddenDurationBefore(e,i,n,s);return s};t.getHiddenDurationBefore=function(e,t,i,n){var s=0;n=e(n).toDate().valueOf();for(var r=0;r<t.length;r++){var o=t[r].start;var a=t[r].end;if(o>=i.start&&a<i.end){if(n>=a){s+=a-o}}}return s};t.getAccumulatedHiddenDuration=function(e,t,i){var n=0;var s=0;var r=t.start;for(var o=0;o<e.length;o++){var a=e[o].start;var l=e[o].end;if(a>=t.start&&l<t.end){s+=a-r;r=l;if(s>=i){break}else{n+=l-a}}}return n};t.snapAwayFromHidden=function(e,i,n,s){var r=t.isHidden(i,e);if(r.hidden==true){if(n<0){if(s==true){return r.startDate-(r.endDate-i)-1}else{return r.startDate-1}}else{if(s==true){return r.endDate+(i-r.startDate)+1}else{return r.endDate+1}}}else{return i}};t.isHidden=function(e,t){for(var i=0;i<t.length;i++){var n=t[i].start;var s=t[i].end;if(e>=n&&e<s){return{hidden:true,startDate:n,endDate:s}}}return{hidden:false,startDate:n,endDate:s}}},function(e,t,i){"use strict";var n=i(90);var s=a(n);var r=i(62);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=i(99);var h=i(112);var d=i(119);var u=i(1);var f=i(89);var c=i(93);var p=i(118);var m=i(123);var v=i(139);var g=i(140);var y=i(121);var b=i(141);function w(){}l(w.prototype);w.prototype._create=function(e){this.dom={};this.dom.container=e;this.dom.root=document.createElement("div");this.dom.background=document.createElement("div");this.dom.backgroundVertical=document.createElement("div");this.dom.backgroundHorizontal=document.createElement("div");this.dom.centerContainer=document.createElement("div");this.dom.leftContainer=document.createElement("div");this.dom.rightContainer=document.createElement("div");this.dom.center=document.createElement("div");this.dom.left=document.createElement("div");this.dom.right=document.createElement("div");this.dom.top=document.createElement("div");this.dom.bottom=document.createElement("div");this.dom.shadowTop=document.createElement("div");this.dom.shadowBottom=document.createElement("div");this.dom.shadowTopLeft=document.createElement("div");this.dom.shadowBottomLeft=document.createElement("div");this.dom.shadowTopRight=document.createElement("div");this.dom.shadowBottomRight=document.createElement("div");this.dom.rollingModeBtn=document.createElement("div");this.dom.root.className="vis-timeline";this.dom.background.className="vis-panel vis-background";this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical";this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal";this.dom.centerContainer.className="vis-panel vis-center";this.dom.leftContainer.className="vis-panel vis-left";this.dom.rightContainer.className="vis-panel vis-right";this.dom.top.className="vis-panel vis-top";this.dom.bottom.className="vis-panel vis-bottom";this.dom.left.className="vis-content";this.dom.center.className="vis-content";this.dom.right.className="vis-content";this.dom.shadowTop.className="vis-shadow vis-top";this.dom.shadowBottom.className="vis-shadow vis-bottom";this.dom.shadowTopLeft.className="vis-shadow vis-top";this.dom.shadowBottomLeft.className="vis-shadow vis-bottom";this.dom.shadowTopRight.className="vis-shadow vis-top";this.dom.shadowBottomRight.className="vis-shadow vis-bottom";this.dom.rollingModeBtn.className="vis-rolling-mode-btn";this.dom.root.appendChild(this.dom.background);this.dom.root.appendChild(this.dom.backgroundVertical);this.dom.root.appendChild(this.dom.backgroundHorizontal);this.dom.root.appendChild(this.dom.centerContainer);this.dom.root.appendChild(this.dom.leftContainer);this.dom.root.appendChild(this.dom.rightContainer);this.dom.root.appendChild(this.dom.top);this.dom.root.appendChild(this.dom.bottom);this.dom.root.appendChild(this.dom.bottom);this.dom.root.appendChild(this.dom.rollingModeBtn);this.dom.centerContainer.appendChild(this.dom.center);this.dom.leftContainer.appendChild(this.dom.left);this.dom.rightContainer.appendChild(this.dom.right);this.dom.centerContainer.appendChild(this.dom.shadowTop);this.dom.centerContainer.appendChild(this.dom.shadowBottom);this.dom.leftContainer.appendChild(this.dom.shadowTopLeft);this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft);this.dom.rightContainer.appendChild(this.dom.shadowTopRight);this.dom.rightContainer.appendChild(this.dom.shadowBottomRight);this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0};this.on("rangechange",function(){if(this.initialDrawDone===true){this._redraw()}}.bind(this));this.on("touch",this._onTouch.bind(this));this.on("panmove",this._onDrag.bind(this));var t=this;this._origRedraw=this._redraw.bind(this);this._redraw=u.throttle(this._origRedraw);this.on("_change",function(e){if(t.itemSet&&t.itemSet.initialItemSetDrawn&&e&&e.queue==true){t._redraw()}else{t._origRedraw()}});this.hammer=new h(this.dom.root);var i=this.hammer.get("pinch").set({enable:true});d.disablePreventDefaultVertically(i);this.hammer.get("pan").set({threshold:5,direction:h.DIRECTION_HORIZONTAL});this.listeners={};var n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];n.forEach(function(e){var i=function i(n){if(t.isActive()){t.emit(e,n)}};t.hammer.on(e,i);t.listeners[e]=i});d.onTouch(this.hammer,function(e){t.emit("touch",e)}.bind(this));d.onRelease(this.hammer,function(e){t.emit("release",e)}.bind(this));function s(e){if(this.isActive()){this.emit("mousewheel",e)}if(!this.options.verticalScroll||this.options.horizontalScroll)return;if(!this.options.zoomKey||e[this.options.zoomKey])return;e.preventDefault();var t=0;if(e.wheelDelta){t=e.wheelDelta/120}else if(e.detail){t=-e.detail/3}var i=this.props.scrollTop;var n=i+t*120;if(this.isActive()){this._setScrollTop(n);this._redraw();this.emit("scroll",e)}}if(this.dom.centerContainer.addEventListener){this.dom.centerContainer.addEventListener("mousewheel",s.bind(this),false);this.dom.centerContainer.addEventListener("DOMMouseScroll",s.bind(this),false)}else{this.dom.centerContainer.attachEvent("onmousewheel",s.bind(this))}function r(e){if(!t.options.verticalScroll)return;e.preventDefault();if(t.isActive()){var i=-e.target.scrollTop;t._setScrollTop(i);t._redraw();t.emit("scrollSide",e)}}this.dom.left.parentNode.addEventListener("scroll",r.bind(this));this.dom.right.parentNode.addEventListener("scroll",r.bind(this));var o=false;function a(e){if(e.preventDefault){e.preventDefault()}if(!e.target.className.indexOf("vis")>-1)return;if(o)return;e.dataTransfer.dropEffect="move";o=true;return false}function l(e){if(e.preventDefault){e.preventDefault()}if(e.stopPropagation){e.stopPropagation()}try{var i=JSON.parse(e.dataTransfer.getData("text"));if(!i.content)return}catch(e){return false}o=false;e.center={x:e.clientX,y:e.clientY};t.itemSet._onAddItem(e);t.emit("drop",t.getEventProperties(e));return false}this.dom.center.addEventListener("dragover",a.bind(this),false);this.dom.center.addEventListener("drop",l.bind(this),false);this.customTimes=[];this.touch={};this.redrawCount=0;this.initialDrawDone=false;if(!e)throw new Error("No container provided");e.appendChild(this.dom.root)};w.prototype.setOptions=function(e){if(e){var t=["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","rtl","zoomKey","horizontalScroll","verticalScroll"];u.selectiveExtend(t,this.options,e);this.dom.rollingModeBtn.style.visibility="hidden";if(this.options.rtl){this.dom.container.style.direction="rtl";this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"}if(this.options.verticalScroll){if(this.options.rtl){this.dom.rightContainer.className="vis-panel vis-right vis-vertical-scroll"}else{this.dom.leftContainer.className="vis-panel vis-left vis-vertical-scroll"}}this.options.orientation={item:undefined,axis:undefined};if("orientation"in e){if(typeof e.orientation==="string"){this.options.orientation={item:e.orientation,axis:e.orientation}}else if((0,o["default"])(e.orientation)==="object"){if("item"in e.orientation){this.options.orientation.item=e.orientation.item}if("axis"in e.orientation){this.options.orientation.axis=e.orientation.axis}}}if(this.options.orientation.axis==="both"){if(!this.timeAxis2){var i=this.timeAxis2=new v(this.body);i.setOptions=function(e){var t=e?u.extend({},e):{};t.orientation="top";v.prototype.setOptions.call(i,t)};this.components.push(i)}}else{if(this.timeAxis2){var n=this.components.indexOf(this.timeAxis2);if(n!==-1){this.components.splice(n,1)}this.timeAxis2.destroy();this.timeAxis2=null}}if(typeof e.drawPoints=="function"){e.drawPoints={onRender:e.drawPoints}}if("hiddenDates"in this.options){y.convertHiddenOptions(this.options.moment,this.body,this.options.hiddenDates)}if("clickToUse"in e){if(e.clickToUse){if(!this.activator){this.activator=new g(this.dom.root)}}else{if(this.activator){this.activator.destroy();delete this.activator}}}if("showCustomTime"in e){throw new Error("Option `showCustomTime` is deprecated. Create a custom time bar via timeline.addCustomTime(time [, id])")}this._initAutoResize()}this.components.forEach(function(t){return t.setOptions(e)});if("configure"in e){if(!this.configurator){this.configurator=this._createConfigurator()}this.configurator.setOptions(e.configure);var s=u.deepExtend({},this.options);this.components.forEach(function(e){u.deepExtend(s,e.options)});this.configurator.setModuleOptions({global:s})}this._redraw()};w.prototype.isActive=function(){return!this.activator||this.activator.active};w.prototype.destroy=function(){this.setItems(null);this.setGroups(null);this.off();this._stopAutoResize();if(this.dom.root.parentNode){this.dom.root.parentNode.removeChild(this.dom.root)}this.dom=null;if(this.activator){this.activator.destroy();delete this.activator}for(var e in this.listeners){if(this.listeners.hasOwnProperty(e)){delete this.listeners[e]}}this.listeners=null;this.hammer=null;this.components.forEach(function(e){return e.destroy()});this.body=null};w.prototype.setCustomTime=function(e,t){var i=this.customTimes.filter(function(e){return t===e.options.id});if(i.length===0){throw new Error("No custom time bar found with id "+(0,s["default"])(t))}if(i.length>0){i[0].setCustomTime(e)}};w.prototype.getCustomTime=function(e){var t=this.customTimes.filter(function(t){return t.options.id===e});if(t.length===0){throw new Error("No custom time bar found with id "+(0,s["default"])(e))}return t[0].getCustomTime()};w.prototype.setCustomTimeTitle=function(e,t){var i=this.customTimes.filter(function(e){return e.options.id===t});if(i.length===0){throw new Error("No custom time bar found with id "+(0,s["default"])(t))}if(i.length>0){return i[0].setCustomTitle(e)}};w.prototype.getEventProperties=function(e){return{event:e}};w.prototype.addCustomTime=function(e,t){var i=e!==undefined?u.convert(e,"Date").valueOf():new Date;var n=this.customTimes.some(function(e){return e.options.id===t});if(n){throw new Error("A custom time with id "+(0,s["default"])(t)+" already exists")}var r=new b(this.body,u.extend({},this.options,{time:i,id:t}));this.customTimes.push(r);this.components.push(r);this._redraw();return t};w.prototype.removeCustomTime=function(e){var t=this.customTimes.filter(function(t){return t.options.id===e});if(t.length===0){throw new Error("No custom time bar found with id "+(0,s["default"])(e))}t.forEach(function(e){this.customTimes.splice(this.customTimes.indexOf(e),1);this.components.splice(this.components.indexOf(e),1);e.destroy()}.bind(this))};w.prototype.getVisibleItems=function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]};w.prototype.fit=function(e,t){var i=this.getDataRange();if(i.min===null&&i.max===null){return}var n=i.max-i.min;var s=new Date(i.min.valueOf()-n*.01);var r=new Date(i.max.valueOf()+n*.01);var o=e&&e.animation!==undefined?e.animation:true;this.range.setRange(s,r,{animation:o},t)};w.prototype.getDataRange=function(){throw new Error("Cannot invoke abstract method getDataRange")};w.prototype.setWindow=function(e,t,i,n){if(typeof arguments[2]=="function"){n=arguments[2];i={}}var s;if(arguments.length==1){var r=arguments[0];s=r.animation!==undefined?r.animation:true;this.range.setRange(r.start,r.end,{animation:s})}else if(arguments.length==2&&typeof arguments[1]=="function"){var r=arguments[0];n=arguments[1];s=r.animation!==undefined?r.animation:true;this.range.setRange(r.start,r.end,{animation:s},n)}else{s=i&&i.animation!==undefined?i.animation:true;this.range.setRange(e,t,{animation:s},n)}};w.prototype.moveTo=function(e,t,i){if(typeof arguments[1]=="function"){i=arguments[1];t={}}var n=this.range.end-this.range.start;var s=u.convert(e,"Date").valueOf();var r=s-n/2;var o=s+n/2;var a=t&&t.animation!==undefined?t.animation:true;this.range.setRange(r,o,{animation:a},i)};w.prototype.getWindow=function(){var e=this.range.getRange();return{start:new Date(e.start),end:new Date(e.end)}};w.prototype.zoomIn=function(e,t,i){if(!e||e<0||e>1)return;if(typeof arguments[1]=="function"){i=arguments[1];t={}}var n=this.getWindow();var s=n.start.valueOf();var r=n.end.valueOf();var o=r-s;var a=o/(1+e);var l=(o-a)/2;var h=s+l;var d=r-l;this.setWindow(h,d,t,i)};w.prototype.zoomOut=function(e,t,i){if(!e||e<0||e>1)return;if(typeof arguments[1]=="function"){i=arguments[1];t={}}var n=this.getWindow();var s=n.start.valueOf();var r=n.end.valueOf();var o=r-s;var a=s-o*e/2;var l=r+o*e/2;this.setWindow(a,l,t,i)};w.prototype.redraw=function(){this._redraw()};w.prototype._redraw=function(){this.redrawCount++;var e=false;var t=this.options;var i=this.props;var n=this.dom;if(!n||!n.container||n.root.offsetWidth==0)return;y.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates);if(t.orientation=="top"){u.addClassName(n.root,"vis-top");u.removeClassName(n.root,"vis-bottom")}else{u.removeClassName(n.root,"vis-top");u.addClassName(n.root,"vis-bottom")}n.root.style.maxHeight=u.option.asSize(t.maxHeight,"");n.root.style.minHeight=u.option.asSize(t.minHeight,"");n.root.style.width=u.option.asSize(t.width,"");i.border.left=(n.centerContainer.offsetWidth-n.centerContainer.clientWidth)/2;i.border.right=i.border.left;i.border.top=(n.centerContainer.offsetHeight-n.centerContainer.clientHeight)/2;i.border.bottom=i.border.top;i.borderRootHeight=n.root.offsetHeight-n.root.clientHeight;i.borderRootWidth=n.root.offsetWidth-n.root.clientWidth;if(n.centerContainer.clientHeight===0){i.border.left=i.border.top;i.border.right=i.border.left}if(n.root.clientHeight===0){i.borderRootWidth=i.borderRootHeight}i.center.height=n.center.offsetHeight;i.left.height=n.left.offsetHeight;i.right.height=n.right.offsetHeight;i.top.height=n.top.clientHeight||-i.border.top;i.bottom.height=n.bottom.clientHeight||-i.border.bottom;var s=Math.max(i.left.height,i.center.height,i.right.height);var r=i.top.height+s+i.bottom.height+i.borderRootHeight+i.border.top+i.border.bottom;n.root.style.height=u.option.asSize(t.height,r+"px");i.root.height=n.root.offsetHeight;i.background.height=i.root.height-i.borderRootHeight;var o=i.root.height-i.top.height-i.bottom.height-i.borderRootHeight;i.centerContainer.height=o;i.leftContainer.height=o;i.rightContainer.height=i.leftContainer.height;i.root.width=n.root.offsetWidth;i.background.width=i.root.width-i.borderRootWidth;if(!this.initialDrawDone){i.scrollbarWidth=u.getScrollBarWidth()}if(t.verticalScroll){if(t.rtl){i.left.width=n.leftContainer.clientWidth||-i.border.left;i.right.width=n.rightContainer.clientWidth+i.scrollbarWidth||-i.border.right}else{i.left.width=n.leftContainer.clientWidth+i.scrollbarWidth||-i.border.left;i.right.width=n.rightContainer.clientWidth||-i.border.right}}else{i.left.width=n.leftContainer.clientWidth||-i.border.left;i.right.width=n.rightContainer.clientWidth||-i.border.right}this._setDOM();var a=this._updateScrollTop();if(t.orientation.item!="top"){a+=Math.max(i.centerContainer.height-i.center.height-i.border.top-i.border.bottom,0)}n.center.style.top=a+"px";var l=i.scrollTop==0?"hidden":"";var d=i.scrollTop==i.scrollTopMin?"hidden":"";n.shadowTop.style.visibility=l;n.shadowBottom.style.visibility=d;n.shadowTopLeft.style.visibility=l;n.shadowBottomLeft.style.visibility=d;n.shadowTopRight.style.visibility=l;n.shadowBottomRight.style.visibility=d;if(t.verticalScroll){n.rightContainer.className="vis-panel vis-right vis-vertical-scroll";n.leftContainer.className="vis-panel vis-left vis-vertical-scroll";n.shadowTopRight.style.visibility="hidden";n.shadowBottomRight.style.visibility="hidden";n.shadowTopLeft.style.visibility="hidden";n.shadowBottomLeft.style.visibility="hidden";n.left.style.top="0px";n.right.style.top="0px"}if(!t.verticalScroll||i.center.height<i.centerContainer.height){n.left.style.top=a+"px";n.right.style.top=a+"px";n.rightContainer.className=n.rightContainer.className.replace(new RegExp("(?:^|\\s)"+"vis-vertical-scroll"+"(?:\\s|$)")," ");n.leftContainer.className=n.leftContainer.className.replace(new RegExp("(?:^|\\s)"+"vis-vertical-scroll"+"(?:\\s|$)")," ");i.left.width=n.leftContainer.clientWidth||-i.border.left;i.right.width=n.rightContainer.clientWidth||-i.border.right;this._setDOM()}var f=i.center.height>i.centerContainer.height;this.hammer.get("pan").set({direction:f?h.DIRECTION_ALL:h.DIRECTION_HORIZONTAL});this.components.forEach(function(t){e=t.redraw()||e});var c=5;if(e){if(this.redrawCount<c){this.body.emitter.emit("_change");return}else{console.log("WARNING: infinite loop in redraw?")}}else{this.redrawCount=0}this.initialDrawDone=true;this.body.emitter.emit("changed")};w.prototype._setDOM=function(){var e=this.props;var t=this.dom;e.leftContainer.width=e.left.width;e.rightContainer.width=e.right.width;var i=e.root.width-e.left.width-e.right.width-e.borderRootWidth;e.center.width=i;e.centerContainer.width=i;e.top.width=i;e.bottom.width=i;t.background.style.height=e.background.height+"px";t.backgroundVertical.style.height=e.background.height+"px";t.backgroundHorizontal.style.height=e.centerContainer.height+"px";t.centerContainer.style.height=e.centerContainer.height+"px";t.leftContainer.style.height=e.leftContainer.height+"px";t.rightContainer.style.height=e.rightContainer.height+"px";t.background.style.width=e.background.width+"px";t.backgroundVertical.style.width=e.centerContainer.width+"px";t.backgroundHorizontal.style.width=e.background.width+"px";t.centerContainer.style.width=e.center.width+"px";t.top.style.width=e.top.width+"px";t.bottom.style.width=e.bottom.width+"px";t.background.style.left="0";t.background.style.top="0";t.backgroundVertical.style.left=e.left.width+e.border.left+"px";t.backgroundVertical.style.top="0";t.backgroundHorizontal.style.left="0";t.backgroundHorizontal.style.top=e.top.height+"px";t.centerContainer.style.left=e.left.width+"px";t.centerContainer.style.top=e.top.height+"px";t.leftContainer.style.left="0";t.leftContainer.style.top=e.top.height+"px";t.rightContainer.style.left=e.left.width+e.center.width+"px";t.rightContainer.style.top=e.top.height+"px";t.top.style.left=e.left.width+"px";t.top.style.top="0";t.bottom.style.left=e.left.width+"px";t.bottom.style.top=e.top.height+e.centerContainer.height+"px";t.center.style.left="0";t.left.style.left="0";t.right.style.left="0"};w.prototype.repaint=function(){throw new Error("Function repaint is deprecated. Use redraw instead.")};w.prototype.setCurrentTime=function(e){if(!this.currentTime){throw new Error("Option showCurrentTime must be true")}this.currentTime.setCurrentTime(e)};w.prototype.getCurrentTime=function(){if(!this.currentTime){throw new Error("Option showCurrentTime must be true")}return this.currentTime.getCurrentTime()};w.prototype._toTime=function(e){return y.toTime(this,e,this.props.center.width)};w.prototype._toGlobalTime=function(e){return y.toTime(this,e,this.props.root.width)};w.prototype._toScreen=function(e){return y.toScreen(this,e,this.props.center.width)};w.prototype._toGlobalScreen=function(e){return y.toScreen(this,e,this.props.root.width)};w.prototype._initAutoResize=function(){if(this.options.autoResize==true){this._startAutoResize()}else{this._stopAutoResize()}};w.prototype._startAutoResize=function(){var e=this;this._stopAutoResize();this._onResize=function(){if(e.options.autoResize!=true){e._stopAutoResize();return}if(e.dom.root){if(e.dom.root.offsetWidth!=e.props.lastWidth||e.dom.root.offsetHeight!=e.props.lastHeight){e.props.lastWidth=e.dom.root.offsetWidth;e.props.lastHeight=e.dom.root.offsetHeight;e.props.scrollbarWidth=u.getScrollBarWidth();e.body.emitter.emit("_change")}}};u.addEventListener(window,"resize",this._onResize);if(e.dom.root){e.props.lastWidth=e.dom.root.offsetWidth;e.props.lastHeight=e.dom.root.offsetHeight}this.watchTimer=setInterval(this._onResize,1e3)};w.prototype._stopAutoResize=function(){if(this.watchTimer){clearInterval(this.watchTimer);this.watchTimer=undefined}if(this._onResize){u.removeEventListener(window,"resize",this._onResize);this._onResize=null}};w.prototype._onTouch=function(e){this.touch.allowDragging=true;this.touch.initialScrollTop=this.props.scrollTop};w.prototype._onPinch=function(e){this.touch.allowDragging=false};w.prototype._onDrag=function(e){if(!e)return;if(!this.touch.allowDragging)return;var t=e.deltaY;var i=this._getScrollTop();var n=this._setScrollTop(this.touch.initialScrollTop+t);if(this.options.verticalScroll){this.dom.left.parentNode.scrollTop=-this.props.scrollTop;this.dom.right.parentNode.scrollTop=-this.props.scrollTop}if(n!=i){this.emit("verticalDrag")}};w.prototype._setScrollTop=function(e){this.props.scrollTop=e;this._updateScrollTop();return this.props.scrollTop};w.prototype._updateScrollTop=function(){var e=Math.min(this.props.centerContainer.height-this.props.center.height,0);if(e!=this.props.scrollTopMin){if(this.options.orientation.item!="top"){this.props.scrollTop+=e-this.props.scrollTopMin}this.props.scrollTopMin=e}if(this.props.scrollTop>0)this.props.scrollTop=0;if(this.props.scrollTop<e)this.props.scrollTop=e;if(this.options.verticalScroll){this.dom.left.parentNode.scrollTop=-this.props.scrollTop;this.dom.right.parentNode.scrollTop=-this.props.scrollTop}return this.props.scrollTop};w.prototype._getScrollTop=function(){return this.props.scrollTop};w.prototype._createConfigurator=function(){throw new Error("Cannot invoke abstract method _createConfigurator")};e.exports=w},function(e,t,i){"use strict";var n=i(55);var s=a(n);var r=i(62);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=i(112);var h=i(1);var d=i(89);var u=i(93);var f=i(124);var c=i(120);var p=i(125);var m=i(129);var v=i(130);var g=i(131);var y=i(127);var b=i(132);var w=i(133)["default"];var _="__ungrouped__";var x="__background__";function k(e,t){this.body=e;this.defaultOptions={type:null,orientation:{item:"bottom"},align:"auto",stack:true,stackSubgroups:true,groupOrderSwap:function e(t,i,n){var s=i.order;i.order=t.order;t.order=s},groupOrder:"order",selectable:true,multiselect:false,itemsAlwaysDraggable:false,editable:{updateTime:false,updateGroup:false,add:false,remove:false,overrideItems:false},groupEditable:{order:false,add:false,remove:false},snap:f.snap,onAdd:function e(t,i){i(t)},onUpdate:function e(t,i){i(t)},onMove:function e(t,i){i(t)},onRemove:function e(t,i){i(t)},onMoving:function e(t,i){i(t)},onAddGroup:function e(t,i){i(t)},onMoveGroup:function e(t,i){i(t)},onRemoveGroup:function e(t,i){i(t)},margin:{item:{horizontal:10,vertical:10},axis:20},showTooltips:true,tooltip:{followMouse:false,overflowMethod:"flip"},tooltipOnItemUpdateTime:false};this.options=h.extend({},this.defaultOptions);this.options.rtl=t.rtl;this.itemOptions={type:{start:"Date",end:"Date"}};this.conversion={toScreen:e.util.toScreen,toTime:e.util.toTime};this.dom={};this.props={};this.hammer=null;var i=this;this.itemsData=null;this.groupsData=null;this.itemListeners={add:function e(t,n,s){i._onAdd(n.items)},update:function e(t,n,s){i._onUpdate(n.items)},remove:function e(t,n,s){i._onRemove(n.items)}};this.groupListeners={add:function e(t,n,s){i._onAddGroups(n.items)},update:function e(t,n,s){i._onUpdateGroups(n.items)},remove:function e(t,n,s){i._onRemoveGroups(n.items)}};this.items={};this.groups={};this.groupIds=[];this.selection=[];this.popup=null;this.touchParams={};this.groupTouchParams={};this._create();this.setOptions(t)}k.prototype=new c;k.types={background:b,box:v,range:y,point:g};k.prototype._create=function(){var e=document.createElement("div");e.className="vis-itemset";e["timeline-itemset"]=this;this.dom.frame=e;var t=document.createElement("div");t.className="vis-background";e.appendChild(t);this.dom.background=t;var i=document.createElement("div");i.className="vis-foreground";e.appendChild(i);this.dom.foreground=i;var n=document.createElement("div");n.className="vis-axis";this.dom.axis=n;var s=document.createElement("div");s.className="vis-labelset";this.dom.labelSet=s;this._updateUngrouped();var r=new m(x,null,this);r.show();this.groups[x]=r;this.hammer=new l(this.body.dom.centerContainer);this.hammer.on("hammer.input",function(e){if(e.isFirst){this._onTouch(e)}}.bind(this));this.hammer.on("panstart",this._onDragStart.bind(this));this.hammer.on("panmove",this._onDrag.bind(this));this.hammer.on("panend",this._onDragEnd.bind(this));this.hammer.get("pan").set({threshold:5,direction:l.DIRECTION_HORIZONTAL});this.hammer.on("tap",this._onSelectItem.bind(this));this.hammer.on("press",this._onMultiSelectItem.bind(this));this.hammer.on("doubletap",this._onAddItem.bind(this));if(this.options.rtl){this.groupHammer=new l(this.body.dom.rightContainer)}else{this.groupHammer=new l(this.body.dom.leftContainer)}this.groupHammer.on("tap",this._onGroupClick.bind(this));this.groupHammer.on("panstart",this._onGroupDragStart.bind(this));this.groupHammer.on("panmove",this._onGroupDrag.bind(this));this.groupHammer.on("panend",this._onGroupDragEnd.bind(this));this.groupHammer.get("pan").set({threshold:5,direction:l.DIRECTION_VERTICAL});this.body.dom.centerContainer.addEventListener("mouseover",this._onMouseOver.bind(this));this.body.dom.centerContainer.addEventListener("mouseout",this._onMouseOut.bind(this));this.body.dom.centerContainer.addEventListener("mousemove",this._onMouseMove.bind(this));this.body.dom.centerContainer.addEventListener("contextmenu",this._onDragEnd.bind(this));this.body.dom.centerContainer.addEventListener("mousewheel",this._onMouseWheel.bind(this));this.show()};k.prototype.setOptions=function(e){if(e){
var t=["type","rtl","align","order","stack","stackSubgroups","selectable","multiselect","itemsAlwaysDraggable","multiselectPerGroup","groupOrder","dataAttributes","template","groupTemplate","visibleFrameTemplate","hide","snap","groupOrderSwap","showTooltips","tooltip","tooltipOnItemUpdateTime"];h.selectiveExtend(t,this.options,e);if("orientation"in e){if(typeof e.orientation==="string"){this.options.orientation.item=e.orientation==="top"?"top":"bottom"}else if((0,o["default"])(e.orientation)==="object"&&"item"in e.orientation){this.options.orientation.item=e.orientation.item}}if("margin"in e){if(typeof e.margin==="number"){this.options.margin.axis=e.margin;this.options.margin.item.horizontal=e.margin;this.options.margin.item.vertical=e.margin}else if((0,o["default"])(e.margin)==="object"){h.selectiveExtend(["axis"],this.options.margin,e.margin);if("item"in e.margin){if(typeof e.margin.item==="number"){this.options.margin.item.horizontal=e.margin.item;this.options.margin.item.vertical=e.margin.item}else if((0,o["default"])(e.margin.item)==="object"){h.selectiveExtend(["horizontal","vertical"],this.options.margin.item,e.margin.item)}}}}if("editable"in e){if(typeof e.editable==="boolean"){this.options.editable.updateTime=e.editable;this.options.editable.updateGroup=e.editable;this.options.editable.add=e.editable;this.options.editable.remove=e.editable;this.options.editable.overrideItems=false}else if((0,o["default"])(e.editable)==="object"){h.selectiveExtend(["updateTime","updateGroup","add","remove","overrideItems"],this.options.editable,e.editable)}}if("groupEditable"in e){if(typeof e.groupEditable==="boolean"){this.options.groupEditable.order=e.groupEditable;this.options.groupEditable.add=e.groupEditable;this.options.groupEditable.remove=e.groupEditable}else if((0,o["default"])(e.groupEditable)==="object"){h.selectiveExtend(["order","add","remove"],this.options.groupEditable,e.groupEditable)}}var i=function(t){var i=e[t];if(i){if(!(i instanceof Function)){throw new Error("option "+t+" must be a function "+t+"(item, callback)")}this.options[t]=i}}.bind(this);["onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"].forEach(i);this.markDirty()}};k.prototype.markDirty=function(e){this.groupIds=[];if(e&&e.refreshItems){h.forEach(this.items,function(e){e.dirty=true;if(e.displayed)e.redraw()})}};k.prototype.destroy=function(){this.hide();this.setItems(null);this.setGroups(null);this.hammer=null;this.body=null;this.conversion=null};k.prototype.hide=function(){if(this.dom.frame.parentNode){this.dom.frame.parentNode.removeChild(this.dom.frame)}if(this.dom.axis.parentNode){this.dom.axis.parentNode.removeChild(this.dom.axis)}if(this.dom.labelSet.parentNode){this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)}};k.prototype.show=function(){if(!this.dom.frame.parentNode){this.body.dom.center.appendChild(this.dom.frame)}if(!this.dom.axis.parentNode){this.body.dom.backgroundVertical.appendChild(this.dom.axis)}if(!this.dom.labelSet.parentNode){if(this.options.rtl){this.body.dom.right.appendChild(this.dom.labelSet)}else{this.body.dom.left.appendChild(this.dom.labelSet)}}};k.prototype.setSelection=function(e){var t,i,n,s;if(e==undefined)e=[];if(!Array.isArray(e))e=[e];for(t=0,i=this.selection.length;t<i;t++){n=this.selection[t];s=this.items[n];if(s)s.unselect()}this.selection=[];for(t=0,i=e.length;t<i;t++){n=e[t];s=this.items[n];if(s){this.selection.push(n);s.select()}}};k.prototype.getSelection=function(){return this.selection.concat([])};k.prototype.getVisibleItems=function(){var e=this.body.range.getRange();if(this.options.rtl){var t=this.body.util.toScreen(e.start);var i=this.body.util.toScreen(e.end)}else{var i=this.body.util.toScreen(e.start);var t=this.body.util.toScreen(e.end)}var n=[];for(var s in this.groups){if(this.groups.hasOwnProperty(s)){var r=this.groups[s];var o=r.isVisible?r.visibleItems:[];for(var a=0;a<o.length;a++){var l=o[a];if(this.options.rtl){if(l.right<i&&l.right+l.width>t){n.push(l.id)}}else{if(l.left<t&&l.left+l.width>i){n.push(l.id)}}}}}return n};k.prototype._deselect=function(e){var t=this.selection;for(var i=0,n=t.length;i<n;i++){if(t[i]==e){t.splice(i,1);break}}};k.prototype.redraw=function(){var e=this.options.margin,t=this.body.range,i=h.option.asSize,n=this.options,s=n.orientation.item,r=false,o=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top;if(this.options.rtl){this.props.right=this.body.domProps.right.width+this.body.domProps.border.right}else{this.props.left=this.body.domProps.left.width+this.body.domProps.border.left}o.className="vis-itemset";r=this._orderGroups()||r;var a=t.end-t.start;var l=a!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth;var d=t.start!=this.lastRangeStart;var u=l||d;this.lastVisibleInterval=a;this.lastRangeStart=t.start;this.props.lastWidth=this.props.width;var f=this._firstGroup();var c={item:e.item,axis:e.axis};var p={item:e.item,axis:e.item.vertical/2};var m=0;var v=e.axis+e.item.vertical;this.groups[x].redraw(t,p,u);h.forEach(this.groups,function(e){var i=e==f?c:p;var n=e.redraw(t,i,u);r=n||r;m+=e.height});m=Math.max(m,v);o.style.height=i(m);this.props.width=o.offsetWidth;this.props.height=m;this.dom.axis.style.top=i(s=="top"?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height);if(this.options.rtl){this.dom.axis.style.right="0"}else{this.dom.axis.style.left="0"}this.initialItemSetDrawn=true;r=this._isResized()||r;return r};k.prototype._firstGroup=function(){var e=this.options.orientation.item=="top"?0:this.groupIds.length-1;var t=this.groupIds[e];var i=this.groups[t]||this.groups[_];return i||null};k.prototype._updateUngrouped=function(){var e=this.groups[_];var t=this.groups[x];var i,n;if(this.groupsData){if(e){e.hide();delete this.groups[_];for(n in this.items){if(this.items.hasOwnProperty(n)){i=this.items[n];i.parent&&i.parent.remove(i);var s=this._getGroupId(i.data);var r=this.groups[s];r&&r.add(i)||i.hide()}}}}else{if(!e){var o=null;var a=null;e=new p(o,a,this);this.groups[_]=e;for(n in this.items){if(this.items.hasOwnProperty(n)){i=this.items[n];e.add(i)}}e.show()}}};k.prototype.getLabelSet=function(){return this.dom.labelSet};k.prototype.setItems=function(e){var t=this,i,n=this.itemsData;if(!e){this.itemsData=null}else if(e instanceof d||e instanceof u){this.itemsData=e}else{throw new TypeError("Data must be an instance of DataSet or DataView")}if(n){h.forEach(this.itemListeners,function(e,t){n.off(t,e)});i=n.getIds();this._onRemove(i)}if(this.itemsData){var s=this.id;h.forEach(this.itemListeners,function(e,i){t.itemsData.on(i,e,s)});i=this.itemsData.getIds();this._onAdd(i);this._updateUngrouped()}this.body.emitter.emit("_change",{queue:true})};k.prototype.getItems=function(){return this.itemsData};k.prototype.setGroups=function(e){var t=this,i;if(this.groupsData){h.forEach(this.groupListeners,function(e,i){t.groupsData.off(i,e)});i=this.groupsData.getIds();this.groupsData=null;this._onRemoveGroups(i)}if(!e){this.groupsData=null}else if(e instanceof d||e instanceof u){this.groupsData=e}else{throw new TypeError("Data must be an instance of DataSet or DataView")}if(this.groupsData){var n=this.groupsData;if(this.groupsData instanceof u){n=this.groupsData.getDataSet()}n.get().forEach(function(e){if(e.nestedGroups){e.nestedGroups.forEach(function(t){var i=n.get(t);i.nestedInGroup=e.id;if(e.showNested==false){i.visible=false}n.update(i)})}});var s=this.id;h.forEach(this.groupListeners,function(e,i){t.groupsData.on(i,e,s)});i=this.groupsData.getIds();this._onAddGroups(i)}this._updateUngrouped();this._order();this.body.emitter.emit("_change",{queue:true})};k.prototype.getGroups=function(){return this.groupsData};k.prototype.removeItem=function(e){var t=this.itemsData.get(e),i=this.itemsData.getDataSet(),n=this.items[e];if(t){this.options.onRemove(t,function(t){if(t){i.remove(e)}})}};k.prototype._getType=function(e){return e.type||this.options.type||(e.end?"range":"box")};k.prototype._getGroupId=function(e){var t=this._getType(e);if(t=="background"&&e.group==undefined){return x}else{return this.groupsData?e.group:_}};k.prototype._onUpdate=function(e){var t=this;e.forEach(function(e){var i=t.itemsData.get(e,t.itemOptions);var n=t.items[e];var s=i?t._getType(i):null;var r=k.types[s];var o;if(n){if(!r||!(n instanceof r)){o=n.selected;t._removeItem(n);n=null}else{t._updateItem(n,i)}}if(!n&&i){if(r){n=new r(i,t.conversion,t.options);n.id=e;t._addItem(n);if(o){this.selection.push(e);n.select()}}else if(s=="rangeoverflow"){throw new TypeError('Item type "rangeoverflow" is deprecated. Use css styling instead: '+".vis-item.vis-range .vis-item-content {overflow: visible;}")}else{throw new TypeError('Unknown item type "'+s+'"')}}}.bind(this));this._order();this.body.emitter.emit("_change",{queue:true})};k.prototype._onAdd=k.prototype._onUpdate;k.prototype._onRemove=function(e){var t=0;var i=this;e.forEach(function(e){var n=i.items[e];if(n){t++;i._removeItem(n)}});if(t){this._order();this.body.emitter.emit("_change",{queue:true})}};k.prototype._order=function(){h.forEach(this.groups,function(e){e.order()})};k.prototype._onUpdateGroups=function(e){this._onAddGroups(e)};k.prototype._onAddGroups=function(e){var t=this;e.forEach(function(e){var i=t.groupsData.get(e);var n=t.groups[e];if(!n){if(e==_||e==x){throw new Error("Illegal group id. "+e+" is a reserved id.")}var r=(0,s["default"])(t.options);h.extend(r,{height:null});n=new p(e,i,t);t.groups[e]=n;for(var o in t.items){if(t.items.hasOwnProperty(o)){var a=t.items[o];if(a.data.group==e){n.add(a)}}}n.order();n.show()}else{n.setData(i)}});this.body.emitter.emit("_change",{queue:true})};k.prototype._onRemoveGroups=function(e){var t=this.groups;e.forEach(function(e){var i=t[e];if(i){i.hide();delete t[e]}});this.markDirty();this.body.emitter.emit("_change",{queue:true})};k.prototype._orderGroups=function(){if(this.groupsData){var e=this.groupsData.getIds({order:this.options.groupOrder});e=this._orderNestedGroups(e);var t=!h.equalArray(e,this.groupIds);if(t){var i=this.groups;e.forEach(function(e){i[e].hide()});e.forEach(function(e){i[e].show()});this.groupIds=e}return t}else{return false}};k.prototype._orderNestedGroups=function(e){var t=[];e.forEach(function(e){var i=this.groupsData.get(e);if(!i.nestedInGroup){t.push(e)}if(i.nestedGroups){var n=this.groupsData.get({filter:function t(i){return i.nestedInGroup==e},order:this.options.groupOrder});var s=n.map(function(e){return e.id});t=t.concat(s)}},this);return t};k.prototype._addItem=function(e){this.items[e.id]=e;var t=this._getGroupId(e.data);var i=this.groups[t];if(!i){e.groupShowing=false}else if(i&&i.data&&i.data.showNested){e.groupShowing=true}if(i)i.add(e)};k.prototype._updateItem=function(e,t){e.setData(t);var i=this._getGroupId(e.data);var n=this.groups[i];if(!n){e.groupShowing=false}else if(n&&n.data&&n.data.showNested){e.groupShowing=true}};k.prototype._removeItem=function(e){e.hide();delete this.items[e.id];var t=this.selection.indexOf(e.id);if(t!=-1)this.selection.splice(t,1);e.parent&&e.parent.remove(e)};k.prototype._constructByEndArray=function(e){var t=[];for(var i=0;i<e.length;i++){if(e[i]instanceof y){t.push(e[i])}}return t};k.prototype._onTouch=function(e){this.touchParams.item=this.itemFromTarget(e);this.touchParams.dragLeftItem=e.target.dragLeftItem||false;this.touchParams.dragRightItem=e.target.dragRightItem||false;this.touchParams.itemProps=null};k.prototype._getGroupIndex=function(e){for(var t=0;t<this.groupIds.length;t++){if(e==this.groupIds[t])return t}};k.prototype._onDragStart=function(e){if(this.touchParams.itemIsDragging){return}var t=this.touchParams.item||null;var i=this;var n;if(t&&(t.selected||this.options.itemsAlwaysDraggable)){if(this.options.editable.overrideItems&&!this.options.editable.updateTime&&!this.options.editable.updateGroup){return}if(t.editable!=null&&!t.editable.updateTime&&!t.editable.updateGroup&&!this.options.editable.overrideItems){return}var s=this.touchParams.dragLeftItem;var r=this.touchParams.dragRightItem;this.touchParams.itemIsDragging=true;this.touchParams.selectedItem=t;if(s){n={item:s,initialX:e.center.x,dragLeft:true,data:this._cloneItemData(t.data)};this.touchParams.itemProps=[n]}else if(r){n={item:r,initialX:e.center.x,dragRight:true,data:this._cloneItemData(t.data)};this.touchParams.itemProps=[n]}else{var o=this._getGroupIndex(t.data.group);var a=this.options.itemsAlwaysDraggable&&!t.selected?[t.id]:this.getSelection();this.touchParams.itemProps=a.map(function(t){var n=i.items[t];var s=i._getGroupIndex(n.data.group);return{item:n,initialX:e.center.x,groupOffset:o-s,data:this._cloneItemData(n.data)}}.bind(this))}e.stopPropagation()}else if(this.options.editable.add&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey)){this._onDragStartAddItem(e)}};k.prototype._onDragStartAddItem=function(e){var t=this.options.snap||null;if(this.options.rtl){var i=h.getAbsoluteRight(this.dom.frame);var n=i-e.center.x+10}else{var i=h.getAbsoluteLeft(this.dom.frame);var n=e.center.x-i-10}var s=this.body.util.toTime(n);var r=this.body.util.getScale();var o=this.body.util.getStep();var a=t?t(s,r,o):s;var l=a;var d={type:"range",start:a,end:l,content:"new item"};var u=h.randomUUID();d[this.itemsData._fieldId]=u;var f=this.groupFromTarget(e);if(f){d.group=f.groupId}var c=new y(d,this.conversion,this.options);c.id=u;c.data=this._cloneItemData(d);this._addItem(c);this.touchParams.selectedItem=c;var p={item:c,initialX:e.center.x,data:c.data};if(this.options.rtl){p.dragLeft=true}else{p.dragRight=true}this.touchParams.itemProps=[p];e.stopPropagation()};k.prototype._onDrag=function(e){if(this.touchParams.itemProps){e.stopPropagation();var t=this;var i=this.options.snap||null;if(this.options.rtl){var n=this.body.dom.root.offsetLeft+this.body.domProps.right.width}else{var n=this.body.dom.root.offsetLeft+this.body.domProps.left.width}var s=this.body.util.getScale();var r=this.body.util.getStep();var o=this.touchParams.selectedItem;var a=(this.options.editable.overrideItems||o.editable==null)&&this.options.editable.updateGroup||!this.options.editable.overrideItems&&o.editable!=null&&o.editable.updateGroup;var l=null;if(a&&o){if(o.data.group!=undefined){var d=t.groupFromTarget(e);if(d){l=this._getGroupIndex(d.groupId)}}}this.touchParams.itemProps.forEach(function(d){var u=t.body.util.toTime(e.center.x-n);var f=t.body.util.toTime(d.initialX-n);if(this.options.rtl){var c=-(u-f)}else{var c=u-f}var p=this._cloneItemData(d.item.data);if(d.item.editable!=null&&!d.item.editable.updateTime&&!d.item.editable.updateGroup&&!t.options.editable.overrideItems){return}var m=(this.options.editable.overrideItems||o.editable==null)&&this.options.editable.updateTime||!this.options.editable.overrideItems&&o.editable!=null&&o.editable.updateTime;if(m){if(d.dragLeft){if(this.options.rtl){if(p.end!=undefined){var v=h.convert(d.data.end,"Date");var g=new Date(v.valueOf()+c);p.end=i?i(g,s,r):g}}else{if(p.start!=undefined){var y=h.convert(d.data.start,"Date");var b=new Date(y.valueOf()+c);p.start=i?i(b,s,r):b}}}else if(d.dragRight){if(this.options.rtl){if(p.start!=undefined){var y=h.convert(d.data.start,"Date");var b=new Date(y.valueOf()+c);p.start=i?i(b,s,r):b}}else{if(p.end!=undefined){var v=h.convert(d.data.end,"Date");var g=new Date(v.valueOf()+c);p.end=i?i(g,s,r):g}}}else{if(p.start!=undefined){var y=h.convert(d.data.start,"Date").valueOf();var b=new Date(y+c);if(p.end!=undefined){var v=h.convert(d.data.end,"Date");var w=v.valueOf()-y.valueOf();p.start=i?i(b,s,r):b;p.end=new Date(p.start.valueOf()+w)}else{p.start=i?i(b,s,r):b}}}}if(a&&!d.dragLeft&&!d.dragRight&&l!=null){if(p.group!=undefined){var _=l-d.groupOffset;_=Math.max(0,_);_=Math.min(t.groupIds.length-1,_);p.group=t.groupIds[_]}}p=this._cloneItemData(p);t.options.onMoving(p,function(e){if(e){d.item.setData(this._cloneItemData(e,"Date"))}}.bind(this))}.bind(this));this.body.emitter.emit("_change")}};k.prototype._moveToGroup=function(e,t){var i=this.groups[t];if(i&&i.groupId!=e.data.group){var n=e.parent;n.remove(e);n.order();e.data.group=i.groupId;i.add(e);i.order()}};k.prototype._onDragEnd=function(e){this.touchParams.itemIsDragging=false;if(this.touchParams.itemProps){e.stopPropagation();var t=this;var i=this.itemsData.getDataSet();var n=this.touchParams.itemProps;this.touchParams.itemProps=null;n.forEach(function(e){var n=e.item.id;var s=t.itemsData.get(n,t.itemOptions)!=null;if(!s){t.options.onAdd(e.item.data,function(i){t._removeItem(e.item);if(i){t.itemsData.getDataSet().add(i)}t.body.emitter.emit("_change")})}else{var r=this._cloneItemData(e.item.data);t.options.onMove(r,function(s){if(s){s[i._fieldId]=n;i.update(s)}else{e.item.setData(e.data);t.body.emitter.emit("_change")}})}}.bind(this))}};k.prototype._onGroupClick=function(e){var t=this.groupFromTarget(e);if(!t||!t.nestedGroups)return;var i=this.groupsData;if(this.groupsData instanceof u){i=this.groupsData.getDataSet()}t.showNested=!t.showNested;var n=i.get(t.nestedGroups).map(function(e){if(e.visible==undefined){e.visible=true}e.visible=!!t.showNested;return e});i.update(n);if(t.showNested){h.removeClassName(t.dom.label,"collapsed");h.addClassName(t.dom.label,"expanded")}else{h.removeClassName(t.dom.label,"expanded");var s=this.options.rtl?"collapsed-rtl":"collapsed";h.addClassName(t.dom.label,s)}};k.prototype._onGroupDragStart=function(e){if(this.options.groupEditable.order){this.groupTouchParams.group=this.groupFromTarget(e);if(this.groupTouchParams.group){e.stopPropagation();this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})}}};k.prototype._onGroupDrag=function(e){if(this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();var t=this.groupsData;if(this.groupsData instanceof u){t=this.groupsData.getDataSet()}var i=this.groupFromTarget(e);if(i&&i.height!=this.groupTouchParams.group.height){var n=i.top<this.groupTouchParams.group.top;var s=e.center?e.center.y:e.clientY;var r=h.getAbsoluteTop(i.dom.foreground);var o=this.groupTouchParams.group.height;if(n){if(r+o<s){return}}else{var a=i.height;if(r+a-o>s){return}}}if(i&&i!=this.groupTouchParams.group){var l=t.get(i.groupId);var d=t.get(this.groupTouchParams.group.groupId);if(d&&l){this.options.groupOrderSwap(d,l,t);t.update(d);t.update(l)}var f=t.getIds({order:this.options.groupOrder});if(!h.equalArray(f,this.groupTouchParams.originalOrder)){var c=this.groupTouchParams.originalOrder;var p=this.groupTouchParams.group.groupId;var m=Math.min(c.length,f.length);var v=0;var g=0;var y=0;while(v<m){while(v+g<m&&v+y<m&&f[v+g]==c[v+y]){v++}if(v+g>=m){break}if(f[v+g]==p){g=1;continue}else if(c[v+y]==p){y=1;continue}else{var b=f.indexOf(c[v+y]);var w=t.get(f[v+g]);var _=t.get(c[v+y]);this.options.groupOrderSwap(w,_,t);t.update(w);t.update(_);var x=f[v+g];f[v+g]=c[v+y];f[b]=x;v++}}}}}};k.prototype._onGroupDragEnd=function(e){if(this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();var t=this;var i=t.groupTouchParams.group.groupId;var n=t.groupsData.getDataSet();var s=h.extend({},n.get(i));t.options.onMoveGroup(s,function(e){if(e){e[n._fieldId]=i;n.update(e)}else{var s=n.getIds({order:t.options.groupOrder});if(!h.equalArray(s,t.groupTouchParams.originalOrder)){var r=t.groupTouchParams.originalOrder;var o=Math.min(r.length,s.length);var a=0;while(a<o){while(a<o&&s[a]==r[a]){a++}if(a>=o){break}var l=s.indexOf(r[a]);var d=n.get(s[a]);var u=n.get(r[a]);t.options.groupOrderSwap(d,u,n);n.update(d);n.update(u);var f=s[a];s[a]=r[a];s[l]=f;a++}}}});t.body.emitter.emit("groupDragged",{groupId:i})}};k.prototype._onSelectItem=function(e){if(!this.options.selectable)return;var t=e.srcEvent&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey);var i=e.srcEvent&&e.srcEvent.shiftKey;if(t||i){this._onMultiSelectItem(e);return}var n=this.getSelection();var s=this.itemFromTarget(e);var r=s?[s.id]:[];this.setSelection(r);var o=this.getSelection();if(o.length>0||n.length>0){this.body.emitter.emit("select",{items:o,event:e})}};k.prototype._onMouseOver=function(e){var t=this.itemFromTarget(e);if(!t)return;var i=this.itemFromRelatedTarget(e);if(t===i){return}var n=t.getTitle();if(this.options.showTooltips&&n){if(this.popup==null){this.popup=new w(this.body.dom.root,this.options.tooltip.overflowMethod||"flip")}this.popup.setText(n);var s=this.body.dom.centerContainer;this.popup.setPosition(e.clientX-h.getAbsoluteLeft(s)+s.offsetLeft,e.clientY-h.getAbsoluteTop(s)+s.offsetTop);this.popup.show()}else{if(this.popup!=null){this.popup.hide()}}this.body.emitter.emit("itemover",{item:t.id,event:e})};k.prototype._onMouseOut=function(e){var t=this.itemFromTarget(e);if(!t)return;var i=this.itemFromRelatedTarget(e);if(t===i){return}if(this.popup!=null){this.popup.hide()}this.body.emitter.emit("itemout",{item:t.id,event:e})};k.prototype._onMouseMove=function(e){var t=this.itemFromTarget(e);if(!t)return;if(this.options.showTooltips&&this.options.tooltip.followMouse){if(this.popup){if(!this.popup.hidden){var i=this.body.dom.centerContainer;this.popup.setPosition(e.clientX-h.getAbsoluteLeft(i)+i.offsetLeft,e.clientY-h.getAbsoluteTop(i)+i.offsetTop);this.popup.show()}}}};k.prototype._onMouseWheel=function(e){if(this.touchParams.itemIsDragging){this._onDragEnd(e)}};k.prototype._onUpdateItem=function(e){if(!this.options.selectable)return;if(!this.options.editable.add)return;var t=this;if(e){var i=t.itemsData.get(e.id);this.options.onUpdate(i,function(e){if(e){t.itemsData.getDataSet().update(e)}})}};k.prototype._onAddItem=function(e){if(!this.options.selectable)return;if(!this.options.editable.add)return;var t=this;var i=this.options.snap||null;var n=this.itemFromTarget(e);if(!n){if(this.options.rtl){var s=h.getAbsoluteRight(this.dom.frame);var r=s-e.center.x}else{var s=h.getAbsoluteLeft(this.dom.frame);var r=e.center.x-s}var o=this.body.util.toTime(r);var a=this.body.util.getScale();var l=this.body.util.getStep();var d;if(e.type=="drop"){d=JSON.parse(e.dataTransfer.getData("text"));d.content=d.content?d.content:"new item";d.start=d.start?d.start:i?i(o,a,l):o;d.type=d.type||"box";d[this.itemsData._fieldId]=d.id||h.randomUUID();if(d.type=="range"&&!d.end){var u=this.body.util.toTime(r+this.props.width/5);d.end=i?i(u,a,l):u}}else{d={start:i?i(o,a,l):o,content:"new item"};d[this.itemsData._fieldId]=h.randomUUID();if(this.options.type==="range"){var u=this.body.util.toTime(r+this.props.width/5);d.end=i?i(u,a,l):u}}var f=this.groupFromTarget(e);if(f){d.group=f.groupId}d=this._cloneItemData(d);this.options.onAdd(d,function(i){if(i){t.itemsData.getDataSet().add(i);if(e.type=="drop"){t.setSelection([i.id])}}})}};k.prototype._onMultiSelectItem=function(e){if(!this.options.selectable)return;var t=this.itemFromTarget(e);if(t){var i=this.options.multiselect?this.getSelection():[];var n=e.srcEvent&&e.srcEvent.shiftKey||false;if(n&&this.options.multiselect){var s=this.itemsData.get(t.id).group;var r=undefined;if(this.options.multiselectPerGroup){if(i.length>0){r=this.itemsData.get(i[0]).group}}if(!this.options.multiselectPerGroup||r==undefined||r==s){i.push(t.id)}var o=k._getItemRange(this.itemsData.get(i,this.itemOptions));if(!this.options.multiselectPerGroup||r==s){i=[];for(var a in this.items){if(this.items.hasOwnProperty(a)){var l=this.items[a];var h=l.data.start;var d=l.data.end!==undefined?l.data.end:h;if(h>=o.min&&d<=o.max&&(!this.options.multiselectPerGroup||r==this.itemsData.get(l.id).group)&&!(l instanceof b)){i.push(l.id)}}}}}else{var u=i.indexOf(t.id);if(u==-1){i.push(t.id)}else{i.splice(u,1)}}this.setSelection(i);this.body.emitter.emit("select",{items:this.getSelection(),event:e})}};k._getItemRange=function(e){var t=null;var i=null;e.forEach(function(e){if(i==null||e.start<i){i=e.start}if(e.end!=undefined){if(t==null||e.end>t){t=e.end}}else{if(t==null||e.start>t){t=e.start}}});return{min:i,max:t}};k.prototype.itemFromElement=function(e){var t=e;while(t){if(t.hasOwnProperty("timeline-item")){return t["timeline-item"]}t=t.parentNode}return null};k.prototype.itemFromTarget=function(e){return this.itemFromElement(e.target)};k.prototype.itemFromRelatedTarget=function(e){return this.itemFromElement(e.relatedTarget)};k.prototype.groupFromTarget=function(e){var t=e.center?e.center.y:e.clientY;var i=this.groupIds;if(i.length<=0&&this.groupsData){i=this.groupsData.getIds({order:this.options.groupOrder})}for(var n=0;n<i.length;n++){var s=i[n];var r=this.groups[s];var o=r.dom.foreground;var a=h.getAbsoluteTop(o);if(t>a&&t<a+o.offsetHeight){return r}if(this.options.orientation.item==="top"){if(n===this.groupIds.length-1&&t>a){return r}}else{if(n===0&&t<a+o.offset){return r}}}return null};k.itemSetFromTarget=function(e){var t=e.target;while(t){if(t.hasOwnProperty("timeline-itemset")){return t["timeline-itemset"]}t=t.parentNode}return null};k.prototype._cloneItemData=function(e,t){var i=h.extend({},e);if(!t){t=this.itemsData.getDataSet()._options.type}if(i.start!=undefined){i.start=h.convert(i.start,t&&t.start||"Date")}if(i.end!=undefined){i.end=h.convert(i.end,t&&t.end||"Date")}return i};e.exports=k},function(e,t,i){"use strict";var n=i(82);var s=i(121);var r=i(1);function o(e,t,i,s){this.moment=n;this.current=this.moment();this._start=this.moment();this._end=this.moment();this.autoScale=true;this.scale="day";this.step=1;this.setRange(e,t,i);this.switchedDay=false;this.switchedMonth=false;this.switchedYear=false;if(Array.isArray(s)){this.hiddenDates=s}else if(s!=undefined){this.hiddenDates=[s]}else{this.hiddenDates=[]}this.format=o.FORMAT}o.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}};o.prototype.setMoment=function(e){this.moment=e;this.current=this.moment(this.current.valueOf());this._start=this.moment(this._start.valueOf());this._end=this.moment(this._end.valueOf())};o.prototype.setFormat=function(e){var t=r.deepExtend({},o.FORMAT);this.format=r.deepExtend(t,e)};o.prototype.setRange=function(e,t,i){if(!(e instanceof Date)||!(t instanceof Date)){throw"No legal start or end date in method setRange"}this._start=e!=undefined?this.moment(e.valueOf()):new Date;this._end=t!=undefined?this.moment(t.valueOf()):new Date;if(this.autoScale){this.setMinimumStep(i)}};o.prototype.start=function(){this.current=this._start.clone();this.roundToMinor()};o.prototype.roundToMinor=function(){switch(this.scale){case"year":this.current.year(this.step*Math.floor(this.current.year()/this.step));this.current.month(0);case"month":this.current.date(1);case"week":this.current.weekday(0);case"day":case"weekday":this.current.hours(0);case"hour":this.current.minutes(0);case"minute":this.current.seconds(0);case"second":this.current.milliseconds(0)}if(this.step!=1){switch(this.scale){case"millisecond":this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current.subtract((this.current.date()-1)%this.step,"day");break;case"week":this.current.subtract(this.current.week()%this.step,"week");break;case"month":this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current.subtract(this.current.year()%this.step,"year");break;default:break}}};o.prototype.hasNext=function(){return this.current.valueOf()<=this._end.valueOf()};o.prototype.next=function(){var e=this.current.valueOf();switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour");if(this.current.month()<6){this.current.subtract(this.current.hours()%this.step,"hour")}else{if(this.current.hours()%this.step!==0){this.current.add(this.step-this.current.hours()%this.step,"hour")}}break;case"weekday":case"day":this.current.add(this.step,"day");break;case"week":if(this.current.weekday()!==0){this.current.weekday(0);this.current.add(this.step,"week")}else{var t=this.current.clone();t.add(1,"week");if(t.isSame(this.current,"month")){this.current.add(this.step,"week")}else{this.current.add(this.step,"week");this.current.date(1)}}break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year");break;default:break}if(this.step!=1){switch(this.scale){case"millisecond":if(this.current.milliseconds()>0&&this.current.milliseconds()<this.step)this.current.milliseconds(0);break;case"second":if(this.current.seconds()>0&&this.current.seconds()<this.step)this.current.seconds(0);break;case"minute":if(this.current.minutes()>0&&this.current.minutes()<this.step)this.current.minutes(0);break;case"hour":if(this.current.hours()>0&&this.current.hours()<this.step)this.current.hours(0);break;case"weekday":case"day":if(this.current.date()<this.step+1)this.current.date(1);break;case"week":if(this.current.week()<this.step)this.current.week(1);break;case"month":if(this.current.month()<this.step)this.current.month(0);break;case"year":break;default:break}}if(this.current.valueOf()==e){this.current=this._end.clone()}this.switchedDay=false;this.switchedMonth=false;this.switchedYear=false;s.stepOverHiddenDates(this.moment,this,e)};o.prototype.getCurrent=function(){return this.current};o.prototype.setScale=function(e){if(e&&typeof e.scale=="string"){this.scale=e.scale;this.step=e.step>0?e.step:1;this.autoScale=false}};o.prototype.setAutoScale=function(e){this.autoScale=e};o.prototype.setMinimumStep=function(e){if(e==undefined){return}var t=1e3*60*60*24*30*12;var i=1e3*60*60*24*30;var n=1e3*60*60*24;var s=1e3*60*60;var r=1e3*60;var o=1e3;var a=1;if(t*1e3>e){this.scale="year";this.step=1e3}if(t*500>e){this.scale="year";this.step=500}if(t*100>e){this.scale="year";this.step=100}if(t*50>e){this.scale="year";this.step=50}if(t*10>e){this.scale="year";this.step=10}if(t*5>e){this.scale="year";this.step=5}if(t>e){this.scale="year";this.step=1}if(i*3>e){this.scale="month";this.step=3}if(i>e){this.scale="month";this.step=1}if(n*5>e){this.scale="day";this.step=5}if(n*2>e){this.scale="day";this.step=2}if(n>e){this.scale="day";this.step=1}if(n/2>e){this.scale="weekday";this.step=1}if(s*4>e){this.scale="hour";this.step=4}if(s>e){this.scale="hour";this.step=1}if(r*15>e){this.scale="minute";this.step=15}if(r*10>e){this.scale="minute";this.step=10}if(r*5>e){this.scale="minute";this.step=5}if(r>e){this.scale="minute";this.step=1}if(o*15>e){this.scale="second";this.step=15}if(o*10>e){this.scale="second";this.step=10}if(o*5>e){this.scale="second";this.step=5}if(o>e){this.scale="second";this.step=1}if(a*200>e){this.scale="millisecond";this.step=200}if(a*100>e){this.scale="millisecond";this.step=100}if(a*50>e){this.scale="millisecond";this.step=50}if(a*10>e){this.scale="millisecond";this.step=10}if(a*5>e){this.scale="millisecond";this.step=5}if(a>e){this.scale="millisecond";this.step=1}};o.snap=function(e,t,i){var s=n(e);if(t=="year"){var r=s.year()+Math.round(s.month()/12);s.year(Math.round(r/i)*i);s.month(0);s.date(0);s.hours(0);s.minutes(0);s.seconds(0);s.milliseconds(0)}else if(t=="month"){if(s.date()>15){s.date(1);s.add(1,"month")}else{s.date(1)}s.hours(0);s.minutes(0);s.seconds(0);s.milliseconds(0)}else if(t=="week"){if(s.weekday()>2){s.weekday(0);s.add(1,"week")}else{s.weekday(0)}s.hours(0);s.minutes(0);s.seconds(0);s.milliseconds(0)}else if(t=="day"){switch(i){case 5:case 2:s.hours(Math.round(s.hours()/24)*24);break;default:s.hours(Math.round(s.hours()/12)*12);break}s.minutes(0);s.seconds(0);s.milliseconds(0)}else if(t=="weekday"){switch(i){case 5:case 2:s.hours(Math.round(s.hours()/12)*12);break;default:s.hours(Math.round(s.hours()/6)*6);
break}s.minutes(0);s.seconds(0);s.milliseconds(0)}else if(t=="hour"){switch(i){case 4:s.minutes(Math.round(s.minutes()/60)*60);break;default:s.minutes(Math.round(s.minutes()/30)*30);break}s.seconds(0);s.milliseconds(0)}else if(t=="minute"){switch(i){case 15:case 10:s.minutes(Math.round(s.minutes()/5)*5);s.seconds(0);break;case 5:s.seconds(Math.round(s.seconds()/60)*60);break;default:s.seconds(Math.round(s.seconds()/30)*30);break}s.milliseconds(0)}else if(t=="second"){switch(i){case 15:case 10:s.seconds(Math.round(s.seconds()/5)*5);s.milliseconds(0);break;case 5:s.milliseconds(Math.round(s.milliseconds()/1e3)*1e3);break;default:s.milliseconds(Math.round(s.milliseconds()/500)*500);break}}else if(t=="millisecond"){var o=i>5?i/2:1;s.milliseconds(Math.round(s.milliseconds()/o)*o)}return s};o.prototype.isMajor=function(){if(this.switchedYear==true){switch(this.scale){case"year":case"month":case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return true;default:return false}}else if(this.switchedMonth==true){switch(this.scale){case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return true;default:return false}}else if(this.switchedDay==true){switch(this.scale){case"millisecond":case"second":case"minute":case"hour":return true;default:return false}}var e=this.moment(this.current);switch(this.scale){case"millisecond":return e.milliseconds()==0;case"second":return e.seconds()==0;case"minute":return e.hours()==0&&e.minutes()==0;case"hour":return e.hours()==0;case"weekday":case"day":return e.date()==1;case"week":return e.date()==1;case"month":return e.month()==0;case"year":return false;default:return false}};o.prototype.getLabelMinor=function(e){if(e==undefined){e=this.current}if(e instanceof Date){e=this.moment(e)}if(typeof this.format.minorLabels==="function"){return this.format.minorLabels(e,this.scale,this.step)}var t=this.format.minorLabels[this.scale];switch(this.scale){case"week":if(this.isMajor()&&e.weekday()!==0){return""}default:return t&&t.length>0?this.moment(e).format(t):""}};o.prototype.getLabelMajor=function(e){if(e==undefined){e=this.current}if(e instanceof Date){e=this.moment(e)}if(typeof this.format.majorLabels==="function"){return this.format.majorLabels(e,this.scale,this.step)}var t=this.format.majorLabels[this.scale];return t&&t.length>0?this.moment(e).format(t):""};o.prototype.getClassName=function(){var e=this.moment;var t=this.moment(this.current);var i=t.locale?t.locale("en"):t.lang("en");var n=this.step;var s=[];function r(e){return e/n%2==0?" vis-even":" vis-odd"}function o(t){if(t.isSame(new Date,"day")){return" vis-today"}if(t.isSame(e().add(1,"day"),"day")){return" vis-tomorrow"}if(t.isSame(e().add(-1,"day"),"day")){return" vis-yesterday"}return""}function a(e){return e.isSame(new Date,"week")?" vis-current-week":""}function l(e){return e.isSame(new Date,"month")?" vis-current-month":""}function h(e){return e.isSame(new Date,"year")?" vis-current-year":""}switch(this.scale){case"millisecond":s.push(o(i));s.push(r(i.milliseconds()));break;case"second":s.push(o(i));s.push(r(i.seconds()));break;case"minute":s.push(o(i));s.push(r(i.minutes()));break;case"hour":s.push("vis-h"+i.hours()+this.step==4?"-h"+(i.hours()+4):"");s.push(o(i));s.push(r(i.hours()));break;case"weekday":s.push("vis-"+i.format("dddd").toLowerCase());s.push(o(i));s.push(a(i));s.push(r(i.date()));break;case"day":s.push("vis-day"+i.date());s.push("vis-"+i.format("MMMM").toLowerCase());s.push(o(i));s.push(l(i));s.push(this.step<=2?o(i):"");s.push(this.step<=2?"vis-"+i.format("dddd").toLowerCase():"");s.push(r(i.date()-1));break;case"week":s.push("vis-week"+i.format("w"));s.push(a(i));s.push(r(i.week()));break;case"month":s.push("vis-"+i.format("MMMM").toLowerCase());s.push(l(i));s.push(r(i.month()));break;case"year":s.push("vis-year"+i.year());s.push(h(i));s.push(r(i.year()));break}return s.filter(String).join(" ")};e.exports=o},function(e,t,i){"use strict";var n=i(58);var s=r(n);function r(e){return e&&e.__esModule?e:{default:e}}var o=i(1);var a=i(126);var l=i(127);function h(e,t,i){this.groupId=e;this.subgroups={};this.subgroupIndex=0;this.subgroupOrderer=t&&t.subgroupOrder;this.itemSet=i;this.isVisible=null;this.stackDirty=true;if(t&&t.nestedGroups){this.nestedGroups=t.nestedGroups;if(t.showNested==false){this.showNested=false}else{this.showNested=true}}this.nestedInGroup=null;this.dom={};this.props={label:{width:0,height:0}};this.className=null;this.items={};this.visibleItems=[];this.itemsInRange=[];this.orderedItems={byStart:[],byEnd:[]};this.checkRangedItems=false;var n=this;this.itemSet.body.emitter.on("checkRangedItems",function(){n.checkRangedItems=true});this._create();this.setData(t)}h.prototype._create=function(){var e=document.createElement("div");if(this.itemSet.options.groupEditable.order){e.className="vis-label draggable"}else{e.className="vis-label"}this.dom.label=e;var t=document.createElement("div");t.className="vis-inner";e.appendChild(t);this.dom.inner=t;var i=document.createElement("div");i.className="vis-group";i["timeline-group"]=this;this.dom.foreground=i;this.dom.background=document.createElement("div");this.dom.background.className="vis-group";this.dom.axis=document.createElement("div");this.dom.axis.className="vis-group";this.dom.marker=document.createElement("div");this.dom.marker.style.visibility="hidden";this.dom.marker.style.position="absolute";this.dom.marker.innerHTML="";this.dom.background.appendChild(this.dom.marker)};h.prototype.setData=function(e){var t;var i;if(this.itemSet.options&&this.itemSet.options.groupTemplate){i=this.itemSet.options.groupTemplate.bind(this);t=i(e,this.dom.inner)}else{t=e&&e.content}if(t instanceof Element){this.dom.inner.appendChild(t);while(this.dom.inner.firstChild){this.dom.inner.removeChild(this.dom.inner.firstChild)}this.dom.inner.appendChild(t)}else if(t instanceof Object){i(e,this.dom.inner)}else if(t!==undefined&&t!==null){this.dom.inner.innerHTML=t}else{this.dom.inner.innerHTML=this.groupId||""}this.dom.label.title=e&&e.title||"";if(!this.dom.inner.firstChild){o.addClassName(this.dom.inner,"vis-hidden")}else{o.removeClassName(this.dom.inner,"vis-hidden")}if(e&&e.nestedGroups){if(!this.nestedGroups||this.nestedGroups!=e.nestedGroups){this.nestedGroups=e.nestedGroups}if(e.showNested!==undefined||this.showNested===undefined){if(e.showNested==false){this.showNested=false}else{this.showNested=true}}o.addClassName(this.dom.label,"vis-nesting-group");var n=this.itemSet.options.rtl?"collapsed-rtl":"collapsed";if(this.showNested){o.removeClassName(this.dom.label,n);o.addClassName(this.dom.label,"expanded")}else{o.removeClassName(this.dom.label,"expanded");o.addClassName(this.dom.label,n)}}else if(this.nestedGroups){this.nestedGroups=null;var n=this.itemSet.options.rtl?"collapsed-rtl":"collapsed";o.removeClassName(this.dom.label,n);o.removeClassName(this.dom.label,"expanded");o.removeClassName(this.dom.label,"vis-nesting-group")}if(e&&e.nestedInGroup){o.addClassName(this.dom.label,"vis-nested-group");if(this.itemSet.options&&this.itemSet.options.rtl){this.dom.inner.style.paddingRight="30px"}else{this.dom.inner.style.paddingLeft="30px"}}var s=e&&e.className||null;if(s!=this.className){if(this.className){o.removeClassName(this.dom.label,this.className);o.removeClassName(this.dom.foreground,this.className);o.removeClassName(this.dom.background,this.className);o.removeClassName(this.dom.axis,this.className)}o.addClassName(this.dom.label,s);o.addClassName(this.dom.foreground,s);o.addClassName(this.dom.background,s);o.addClassName(this.dom.axis,s);this.className=s}if(this.style){o.removeCssText(this.dom.label,this.style);this.style=null}if(e&&e.style){o.addCssText(this.dom.label,e.style);this.style=e.style}};h.prototype.getLabelWidth=function(){return this.props.label.width};h.prototype.redraw=function(e,t,i){var n=false;var s=this.dom.marker.clientHeight;if(s!=this.lastMarkerHeight){this.lastMarkerHeight=s;o.forEach(this.items,function(e){e.dirty=true;if(e.displayed)e.redraw()});i=true}this._calculateSubGroupHeights(t);var r=this.dom.foreground;this.top=r.offsetTop;this.right=r.offsetLeft;this.width=r.offsetWidth;var l=this.isVisible;this.isVisible=this._isGroupVisible(e,t);var h=i||this.stackDirty||this.isVisible&&!l;if(h){if(typeof this.itemSet.options.order==="function"){var d=this;var u=false;o.forEach(this.items,function(e){if(!e.displayed){e.redraw();d.visibleItems.push(e)}e.repositionX(u)});var f=this.orderedItems.byStart.slice().sort(function(e,t){return d.itemSet.options.order(e.data,t.data)});a.stack(f,t,true);this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,e)}else{this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,e);if(this.itemSet.options.stack){a.stack(this.visibleItems,t,true)}else{a.nostack(this.visibleItems,t,this.subgroups,this.itemSet.options.stackSubgroups)}}this.stackDirty=false}this._updateSubgroupsSizes();var c=this._calculateHeight(t);var r=this.dom.foreground;this.top=r.offsetTop;this.right=r.offsetLeft;this.width=r.offsetWidth;n=o.updateProperty(this,"height",c)||n;n=o.updateProperty(this.props.label,"width",this.dom.inner.clientWidth)||n;n=o.updateProperty(this.props.label,"height",this.dom.inner.clientHeight)||n;this.dom.background.style.height=c+"px";this.dom.foreground.style.height=c+"px";this.dom.label.style.height=c+"px";for(var p=0,m=this.visibleItems.length;p<m;p++){var v=this.visibleItems[p];v.repositionY(t);if(!this.isVisible&&this.groupId!="__background__"){if(v.displayed)v.hide()}}if(!this.isVisible&&this.height){return n=false}return n};h.prototype._calculateSubGroupHeights=function(e){if((0,s["default"])(this.subgroups).length>0){var t=this;this.resetSubgroups();o.forEach(this.visibleItems,function(i){if(i.data.subgroup!==undefined){t.subgroups[i.data.subgroup].height=Math.max(t.subgroups[i.data.subgroup].height,i.height+e.item.vertical);t.subgroups[i.data.subgroup].visible=true}})}};h.prototype._isGroupVisible=function(e,t){var i=this.top<=e.body.domProps.centerContainer.height-e.body.domProps.scrollTop+t.axis&&this.top+this.height+t.axis>=-e.body.domProps.scrollTop;return i};h.prototype._calculateHeight=function(e){var t;var i=this.visibleItems;if(i.length>0){var n=i[0].top;var s=i[0].top+i[0].height;o.forEach(i,function(e){n=Math.min(n,e.top);s=Math.max(s,e.top+e.height)});if(n>e.axis){var r=n-e.axis;s-=r;o.forEach(i,function(e){e.top-=r})}t=s+e.item.vertical/2}else{t=0}t=Math.max(t,this.props.label.height);return t};h.prototype.show=function(){if(!this.dom.label.parentNode){this.itemSet.dom.labelSet.appendChild(this.dom.label)}if(!this.dom.foreground.parentNode){this.itemSet.dom.foreground.appendChild(this.dom.foreground)}if(!this.dom.background.parentNode){this.itemSet.dom.background.appendChild(this.dom.background)}if(!this.dom.axis.parentNode){this.itemSet.dom.axis.appendChild(this.dom.axis)}};h.prototype.hide=function(){var e=this.dom.label;if(e.parentNode){e.parentNode.removeChild(e)}var t=this.dom.foreground;if(t.parentNode){t.parentNode.removeChild(t)}var i=this.dom.background;if(i.parentNode){i.parentNode.removeChild(i)}var n=this.dom.axis;if(n.parentNode){n.parentNode.removeChild(n)}};h.prototype.add=function(e){this.items[e.id]=e;e.setParent(this);this.stackDirty=true;if(e.data.subgroup!==undefined){this._addToSubgroup(e);this.orderSubgroups()}if(this.visibleItems.indexOf(e)==-1){var t=this.itemSet.body.range;this._checkIfVisible(e,this.visibleItems,t)}};h.prototype._addToSubgroup=function(e,t){t=t||e.data.subgroup;if(t!=undefined&&this.subgroups[t]===undefined){this.subgroups[t]={height:0,top:0,start:e.data.start,end:e.data.end,visible:false,index:this.subgroupIndex,items:[]};this.subgroupIndex++}if(new Date(e.data.start)<new Date(this.subgroups[t].start)){this.subgroups[t].start=e.data.start}if(new Date(e.data.end)>new Date(this.subgroups[t].end)){this.subgroups[t].end=e.data.end}this.subgroups[t].items.push(e)};h.prototype._updateSubgroupsSizes=function(){var e=this;if(e.subgroups){for(var t in e.subgroups){var i=e.subgroups[t].items[0].data.start;var n=e.subgroups[t].items[0].data.end;e.subgroups[t].items.forEach(function(e){if(new Date(e.data.start)<new Date(i)){i=e.data.start}if(new Date(e.data.end)>new Date(n)){n=e.data.end}});e.subgroups[t].start=i;e.subgroups[t].end=n}}};h.prototype.orderSubgroups=function(){if(this.subgroupOrderer!==undefined){var e=[];if(typeof this.subgroupOrderer=="string"){for(var t in this.subgroups){e.push({subgroup:t,sortField:this.subgroups[t].items[0].data[this.subgroupOrderer]})}e.sort(function(e,t){return e.sortField-t.sortField})}else if(typeof this.subgroupOrderer=="function"){for(var t in this.subgroups){e.push(this.subgroups[t].items[0].data)}e.sort(this.subgroupOrderer)}if(e.length>0){for(var i=0;i<e.length;i++){this.subgroups[e[i].subgroup].index=i}}}};h.prototype.resetSubgroups=function(){for(var e in this.subgroups){if(this.subgroups.hasOwnProperty(e)){this.subgroups[e].visible=false;this.subgroups[e].height=0}}};h.prototype.remove=function(e){delete this.items[e.id];e.setParent(null);this.stackDirty=true;var t=this.visibleItems.indexOf(e);if(t!=-1)this.visibleItems.splice(t,1);if(e.data.subgroup!==undefined){this._removeFromSubgroup(e);this.orderSubgroups()}};h.prototype._removeFromSubgroup=function(e,t){t=t||e.data.subgroup;if(t!=undefined){var i=this.subgroups[t];if(i){var n=i.items.indexOf(e);if(n>=0){i.items.splice(n,1);if(!i.items.length){delete this.subgroups[t]}else{this._updateSubgroupsSizes()}}}}};h.prototype.removeFromDataSet=function(e){this.itemSet.removeItem(e.id)};h.prototype.order=function(){var e=o.toArray(this.items);var t=[];var i=[];for(var n=0;n<e.length;n++){if(e[n].data.end!==undefined){i.push(e[n])}t.push(e[n])}this.orderedItems={byStart:t,byEnd:i};a.orderByStart(this.orderedItems.byStart);a.orderByEnd(this.orderedItems.byEnd)};h.prototype._updateItemsInRange=function(e,t,i){var n=[];var s={};var r=(i.end-i.start)/4;var a=i.start-r;var l=i.end+r;var h=function e(t){if(t<a){return-1}else if(t<=l){return 0}else{return 1}};if(t.length>0){for(var d=0;d<t.length;d++){this._checkIfVisibleWithReference(t[d],n,s,i)}}var u=o.binarySearchCustom(e.byStart,h,"data","start");this._traceVisible(u,e.byStart,n,s,function(e){return e.data.start<a||e.data.start>l});if(this.checkRangedItems==true){this.checkRangedItems=false;for(d=0;d<e.byEnd.length;d++){this._checkIfVisibleWithReference(e.byEnd[d],n,s,i)}}else{var f=o.binarySearchCustom(e.byEnd,h,"data","end");this._traceVisible(f,e.byEnd,n,s,function(e){return e.data.end<a||e.data.end>l})}for(var d=0;d<n.length;d++){var c=n[d];if(!c.displayed)c.show();c.repositionX()}return n};h.prototype._traceVisible=function(e,t,i,n,s){if(e!=-1){for(var r=e;r>=0;r--){var o=t[r];if(s(o)){break}else{if(n[o.id]===undefined){n[o.id]=true;i.push(o)}}}for(var r=e+1;r<t.length;r++){var o=t[r];if(s(o)){break}else{if(n[o.id]===undefined){n[o.id]=true;i.push(o)}}}}};h.prototype._checkIfVisible=function(e,t,i){if(e.isVisible(i)){if(!e.displayed)e.show();e.repositionX();t.push(e)}else{if(e.displayed)e.hide()}};h.prototype._checkIfVisibleWithReference=function(e,t,i,n){if(e.isVisible(n)){if(i[e.id]===undefined){i[e.id]=true;t.push(e)}}else{if(e.displayed)e.hide()}};h.prototype.changeSubgroup=function(e,t,i){this._removeFromSubgroup(e,t);this._addToSubgroup(e,i);this.orderSubgroups()};e.exports=h},function(e,t){"use strict";var i=.001;t.orderByStart=function(e){e.sort(function(e,t){return e.data.start-t.data.start})};t.orderByEnd=function(e){e.sort(function(e,t){var i="end"in e.data?e.data.end:e.data.start,n="end"in t.data?t.data.end:t.data.start;return i-n})};t.stack=function(e,i,n){if(n){for(var s=0;s<e.length;s++){e[s].top=null}}for(var s=0;s<e.length;s++){var r=e[s];if(r.stack&&r.top===null){r.top=i.axis;do{var o=null;for(var a=0,l=e.length;a<l;a++){var h=e[a];if(h.top!==null&&h!==r&&h.stack&&t.collision(r,h,i.item,h.options.rtl)){o=h;break}}if(o!=null){r.top=o.top+o.height+i.item.vertical}}while(o)}}};t.nostack=function(e,i,n,s){for(var r=0;r<e.length;r++){if(e[r].data.subgroup==undefined){e[r].top=i.item.vertical}else if(e[r].data.subgroup!==undefined&&s){var o=0;for(var a in n){if(n.hasOwnProperty(a)){if(n[a].visible==true&&n[a].index<n[e[r].data.subgroup].index){o+=n[a].height;n[e[r].data.subgroup].top=o}}}e[r].top=o+.5*i.item.vertical}}if(!s){t.stackSubgroups(e,i,n)}};t.stackSubgroups=function(e,i,n){for(var s in n){if(n.hasOwnProperty(s)){n[s].top=0;do{var r=null;for(var o in n){if(n[o].top!==null&&o!==s&&n[s].index>n[o].index&&t.collisionByTimes(n[s],n[o])){r=n[o];break}}if(r!=null){n[s].top=r.top+r.height}}while(r)}}for(var a=0;a<e.length;a++){if(e[a].data.subgroup!==undefined){e[a].top=n[e[a].data.subgroup].top+.5*i.item.vertical}}};t.collision=function(e,t,n,s){if(s){return e.right-n.horizontal+i<t.right+t.width&&e.right+e.width+n.horizontal-i>t.right&&e.top-n.vertical+i<t.top+t.height&&e.top+e.height+n.vertical-i>t.top}else{return e.left-n.horizontal+i<t.left+t.width&&e.left+e.width+n.horizontal-i>t.left&&e.top-n.vertical+i<t.top+t.height&&e.top+e.height+n.vertical-i>t.top}};t.collisionByTimes=function(e,t){return e.start<=t.start&&e.end>=t.start&&e.top<t.top+t.height&&e.top+e.height>t.top||t.start<=e.start&&t.end>=e.start&&t.top<e.top+e.height&&t.top+t.height>e.top}},function(e,t,i){"use strict";var n=i(112);var s=i(128);function r(e,t,i){this.props={content:{width:0}};this.overflow=false;this.options=i;if(e){if(e.start==undefined){throw new Error('Property "start" missing in item '+e.id)}if(e.end==undefined){throw new Error('Property "end" missing in item '+e.id)}}s.call(this,e,t,i)}r.prototype=new s(null,null,null);r.prototype.baseClassName="vis-item vis-range";r.prototype.isVisible=function(e){return this.data.start<e.end&&this.data.end>e.start};r.prototype.redraw=function(){var e=this.dom;if(!e){this.dom={};e=this.dom;e.box=document.createElement("div");e.frame=document.createElement("div");e.frame.className="vis-item-overflow";e.box.appendChild(e.frame);e.visibleFrame=document.createElement("div");e.visibleFrame.className="vis-item-visible-frame";e.box.appendChild(e.visibleFrame);e.content=document.createElement("div");e.content.className="vis-item-content";e.frame.appendChild(e.content);e.box["timeline-item"]=this;this.dirty=true}if(!this.parent){throw new Error("Cannot redraw item: no parent attached")}if(!e.box.parentNode){var t=this.parent.dom.foreground;if(!t){throw new Error("Cannot redraw item: parent has no foreground container element")}t.appendChild(e.box)}this.displayed=true;if(this.dirty){this._updateContents(this.dom.content);this._updateDataAttributes(this.dom.box);this._updateStyle(this.dom.box);var i=this.editable.updateTime||this.editable.updateGroup;var n=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(i?" vis-editable":" vis-readonly");e.box.className=this.baseClassName+n;this.overflow=window.getComputedStyle(e.frame).overflow!=="hidden";this.dom.content.style.maxWidth="none";this.props.content.width=this.dom.content.offsetWidth;this.height=this.dom.box.offsetHeight;this.dom.content.style.maxWidth="";this.dirty=false}this._repaintOnItemUpdateTimeTooltip(e.box);this._repaintDeleteButton(e.box);this._repaintDragCenter();this._repaintDragLeft();this._repaintDragRight()};r.prototype.show=function(){if(!this.displayed){this.redraw()}};r.prototype.hide=function(){if(this.displayed){var e=this.dom.box;if(e.parentNode){e.parentNode.removeChild(e)}this.displayed=false}};r.prototype.repositionX=function(e){var t=this.parent.width;var i=this.conversion.toScreen(this.data.start);var n=this.conversion.toScreen(this.data.end);var s;var r;if(e===undefined||e===true){if(i<-t){i=-t}if(n>2*t){n=2*t}}var o=Math.max(n-i+.5,1);if(this.overflow){if(this.options.rtl){this.right=i}else{this.left=i}this.width=o+this.props.content.width;r=this.props.content.width}else{if(this.options.rtl){this.right=i}else{this.left=i}this.width=o;r=Math.min(n-i,this.props.content.width)}if(this.options.rtl){this.dom.box.style.right=this.right+"px"}else{this.dom.box.style.left=this.left+"px"}this.dom.box.style.width=o+"px";switch(this.options.align){case"left":if(this.options.rtl){this.dom.content.style.right="0"}else{this.dom.content.style.left="0"}break;case"right":if(this.options.rtl){this.dom.content.style.right=Math.max(o-r,0)+"px"}else{this.dom.content.style.left=Math.max(o-r,0)+"px"}break;case"center":if(this.options.rtl){this.dom.content.style.right=Math.max((o-r)/2,0)+"px"}else{this.dom.content.style.left=Math.max((o-r)/2,0)+"px"}break;default:if(this.overflow){if(n>0){s=Math.max(-i,0)}else{s=-r}}else{if(i<0){s=-i}else{s=0}}if(this.options.rtl){this.dom.content.style.right=s+"px"}else{this.dom.content.style.left=s+"px";this.dom.content.style.width="calc(100% - "+s+"px)"}}};r.prototype.repositionY=function(){var e=this.options.orientation.item;var t=this.dom.box;if(e=="top"){t.style.top=this.top+"px"}else{t.style.top=this.parent.height-this.top-this.height+"px"}};r.prototype._repaintDragLeft=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragLeft){var e=document.createElement("div");e.className="vis-drag-left";e.dragLeftItem=this;this.dom.box.appendChild(e);this.dom.dragLeft=e}else if(!this.selected&&this.dom.dragLeft){if(this.dom.dragLeft.parentNode){this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft)}this.dom.dragLeft=null}};r.prototype._repaintDragRight=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragRight){var e=document.createElement("div");e.className="vis-drag-right";e.dragRightItem=this;this.dom.box.appendChild(e);this.dom.dragRight=e}else if(!this.selected&&this.dom.dragRight){if(this.dom.dragRight.parentNode){this.dom.dragRight.parentNode.removeChild(this.dom.dragRight)}this.dom.dragRight=null}};e.exports=r},function(e,t,i){"use strict";var n=i(62);var s=a(n);var r=i(58);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=i(112);var h=i(1);var d=i(82);function u(e,t,i){this.id=null;this.parent=null;this.data=e;this.dom=null;this.conversion=t||{};this.options=i||{};this.selected=false;this.displayed=false;this.groupShowing=true;this.dirty=true;this.top=null;this.right=null;this.left=null;this.width=null;this.height=null;this.editable=null;this._updateEditStatus()}u.prototype.stack=true;u.prototype.select=function(){this.selected=true;this.dirty=true;if(this.displayed)this.redraw()};u.prototype.unselect=function(){this.selected=false;this.dirty=true;if(this.displayed)this.redraw()};u.prototype.setData=function(e){var t=e.group!=undefined&&this.data.group!=e.group;if(t&&this.parent!=null){this.parent.itemSet._moveToGroup(this,e.group)}this.parent.stackDirty=true;var i=e.subgroup!=undefined&&this.data.subgroup!=e.subgroup;if(i&&this.parent!=null){this.parent.changeSubgroup(this,this.data.subgroup,e.subgroup)}this.data=e;this._updateEditStatus();this.dirty=true;if(this.displayed)this.redraw()};u.prototype.setParent=function(e){if(this.displayed){this.hide();this.parent=e;if(this.parent){this.show()}}else{this.parent=e}};u.prototype.isVisible=function(e){return false};u.prototype.show=function(){return false};u.prototype.hide=function(){return false};u.prototype.redraw=function(){};u.prototype.repositionX=function(){};u.prototype.repositionY=function(){};u.prototype._repaintDragCenter=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragCenter){var e=this;var t=document.createElement("div");t.className="vis-drag-center";t.dragCenterItem=this;var i=new l(t);i.on("tap",function(t){e.parent.itemSet.body.emitter.emit("click",{event:t,item:e.id})});i.on("doubletap",function(t){t.stopPropagation();e.parent.itemSet._onUpdateItem(e);e.parent.itemSet.body.emitter.emit("doubleClick",{event:t,item:e.id})});if(this.dom.box){this.dom.box.appendChild(t)}else if(this.dom.point){this.dom.point.appendChild(t)}this.dom.dragCenter=t}else if(!this.selected&&this.dom.dragCenter){if(this.dom.dragCenter.parentNode){this.dom.dragCenter.parentNode.removeChild(this.dom.dragCenter)}this.dom.dragCenter=null}};u.prototype._repaintDeleteButton=function(e){var t=(this.options.editable.overrideItems||this.editable==null)&&this.options.editable.remove||!this.options.editable.overrideItems&&this.editable!=null&&this.editable.remove;if(this.selected&&t&&!this.dom.deleteButton){var i=this;var n=document.createElement("div");if(this.options.rtl){n.className="vis-delete-rtl"}else{n.className="vis-delete"}n.title="Delete this item";new l(n).on("tap",function(e){e.stopPropagation();i.parent.removeFromDataSet(i)});e.appendChild(n);this.dom.deleteButton=n}else if(!this.selected&&this.dom.deleteButton){if(this.dom.deleteButton.parentNode){this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton)}this.dom.deleteButton=null}};u.prototype._repaintOnItemUpdateTimeTooltip=function(e){if(!this.options.tooltipOnItemUpdateTime)return;var t=(this.options.editable.updateTime||this.data.editable===true)&&this.data.editable!==false;if(this.selected&&t&&!this.dom.onItemUpdateTimeTooltip){var i=this;var n=document.createElement("div");n.className="vis-onUpdateTime-tooltip";e.appendChild(n);this.dom.onItemUpdateTimeTooltip=n}else if(!this.selected&&this.dom.onItemUpdateTimeTooltip){if(this.dom.onItemUpdateTimeTooltip.parentNode){this.dom.onItemUpdateTimeTooltip.parentNode.removeChild(this.dom.onItemUpdateTimeTooltip)}this.dom.onItemUpdateTimeTooltip=null}if(this.dom.onItemUpdateTimeTooltip){this.dom.onItemUpdateTimeTooltip.style.visibility=this.parent.itemSet.touchParams.itemIsDragging?"visible":"hidden";if(this.options.rtl){this.dom.onItemUpdateTimeTooltip.style.right=this.dom.content.style.right}else{this.dom.onItemUpdateTimeTooltip.style.left=this.dom.content.style.left}var s=50;var r=this.parent.itemSet.body.domProps.scrollTop;var o;if(this.options.orientation.item=="top"){o=this.top}else{o=this.parent.height-this.top-this.height}var a=o+this.parent.top-s<-r;if(a){this.dom.onItemUpdateTimeTooltip.style.bottom="";this.dom.onItemUpdateTimeTooltip.style.top=this.height+2+"px"}else{this.dom.onItemUpdateTimeTooltip.style.top="";this.dom.onItemUpdateTimeTooltip.style.bottom=this.height+2+"px"}var l;var h;if(this.options.tooltipOnItemUpdateTime&&this.options.tooltipOnItemUpdateTime.template){h=this.options.tooltipOnItemUpdateTime.template.bind(this);l=h(this.data)}else{l="start: "+d(this.data.start).format("MM/DD/YYYY hh:mm");if(this.data.end){l+="<br> end: "+d(this.data.end).format("MM/DD/YYYY hh:mm")}}this.dom.onItemUpdateTimeTooltip.innerHTML=l}};u.prototype._updateContents=function(e){var t;var i;var n;var s;var r=this.parent.itemSet.itemsData.get(this.id);var o=this.dom.box||this.dom.point;var a=o.getElementsByClassName("vis-item-visible-frame")[0];if(this.options.visibleFrameTemplate){s=this.options.visibleFrameTemplate.bind(this);n=s(r,o)}else{n=""}if(a){if(n instanceof Object&&!(n instanceof Element)){s(r,a)}else{var l=this._contentToString(this.itemVisibleFrameContent)!==this._contentToString(n);if(l){if(n instanceof Element){a.innerHTML="";a.appendChild(n)}else if(n!=undefined){a.innerHTML=n}else{if(!(this.data.type=="background"&&this.data.content===undefined)){throw new Error('Property "content" missing in item '+this.id)}}this.itemVisibleFrameContent=n}}}if(this.options.template){i=this.options.template.bind(this);t=i(r,e,this.data)}else{t=this.data.content}if(t instanceof Object&&!(t instanceof Element)){i(r,e)}else{var l=this._contentToString(this.content)!==this._contentToString(t);if(l){if(t instanceof Element){e.innerHTML="";e.appendChild(t)}else if(t!=undefined){e.innerHTML=t}else{if(!(this.data.type=="background"&&this.data.content===undefined)){throw new Error('Property "content" missing in item '+this.id)}}this.content=t}}};u.prototype._updateDataAttributes=function(e){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){var t=[];if(Array.isArray(this.options.dataAttributes)){t=this.options.dataAttributes}else if(this.options.dataAttributes=="all"){t=(0,o["default"])(this.data)}else{return}for(var i=0;i<t.length;i++){var n=t[i];var s=this.data[n];if(s!=null){e.setAttribute("data-"+n,s)}else{e.removeAttribute("data-"+n)}}}};u.prototype._updateStyle=function(e){if(this.style){h.removeCssText(e,this.style);this.style=null}if(this.data.style){h.addCssText(e,this.data.style);this.style=this.data.style}};u.prototype._contentToString=function(e){if(typeof e==="string")return e;if(e&&"outerHTML"in e)return e.outerHTML;return e};u.prototype._updateEditStatus=function(){if(this.options){if(typeof this.options.editable==="boolean"){this.editable={updateTime:this.options.editable,updateGroup:this.options.editable,remove:this.options.editable}}else if((0,s["default"])(this.options.editable)==="object"){this.editable={};h.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.options.editable)}}if(!this.options||!this.options.editable||this.options.editable.overrideItems!==true){if(this.data){if(typeof this.data.editable==="boolean"){this.editable={updateTime:this.data.editable,updateGroup:this.data.editable,remove:this.data.editable}}else if((0,s["default"])(this.data.editable)==="object"){this.editable={};h.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.data.editable)}}}};u.prototype.getWidthLeft=function(){return 0};u.prototype.getWidthRight=function(){return 0};u.prototype.getTitle=function(){return this.data.title};e.exports=u},function(e,t,i){"use strict";var n=i(55);var s=r(n);function r(e){return e&&e.__esModule?e:{default:e}}var o=i(1);var a=i(125);function l(e,t,i){a.call(this,e,t,i);this.width=0;this.height=0;this.top=0;this.left=0}l.prototype=(0,s["default"])(a.prototype);l.prototype.redraw=function(e,t,i){var n=false;this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,e);this.width=this.dom.background.offsetWidth;this.dom.background.style.height="0";for(var s=0,r=this.visibleItems.length;s<r;s++){var o=this.visibleItems[s];o.repositionY(t)}return n};l.prototype.show=function(){if(!this.dom.background.parentNode){this.itemSet.dom.background.appendChild(this.dom.background)}};e.exports=l},function(e,t,i){"use strict";var n=i(128);var s=i(1);function r(e,t,i){this.props={dot:{width:0,height:0},line:{width:0,height:0}};this.options=i;if(e){if(e.start==undefined){throw new Error('Property "start" missing in item '+e)}}n.call(this,e,t,i)}r.prototype=new n(null,null,null);r.prototype.isVisible=function(e){var t;var i=this.options.align;var n=this.width*e.getMillisecondsPerPixel();if(i=="right"){t=this.data.start.getTime()>e.start&&this.data.start.getTime()-n<e.end}else if(i=="left"){t=this.data.start.getTime()+n>e.start&&this.data.start.getTime()<e.end}else{t=this.data.start.getTime()+n/2>e.start&&this.data.start.getTime()-n/2<e.end}return t};r.prototype.redraw=function(){var e=this.dom;if(!e){this.dom={};e=this.dom;e.box=document.createElement("DIV");e.content=document.createElement("DIV");e.content.className="vis-item-content";e.box.appendChild(e.content);e.line=document.createElement("DIV");e.line.className="vis-line";e.dot=document.createElement("DIV");e.dot.className="vis-dot";e.box["timeline-item"]=this;this.dirty=true}if(!this.parent){throw new Error("Cannot redraw item: no parent attached")}if(!e.box.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(e.box)}if(!e.line.parentNode){var i=this.parent.dom.background;if(!i)throw new Error("Cannot redraw item: parent has no background container element");i.appendChild(e.line)}if(!e.dot.parentNode){var n=this.parent.dom.axis;if(!i)throw new Error("Cannot redraw item: parent has no axis container element");n.appendChild(e.dot)}this.displayed=true;if(this.dirty){this._updateContents(this.dom.content);this._updateDataAttributes(this.dom.box);this._updateStyle(this.dom.box);var s=this.editable.updateTime||this.editable.updateGroup;var r=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(s?" vis-editable":" vis-readonly");
e.box.className="vis-item vis-box"+r;e.line.className="vis-item vis-line"+r;e.dot.className="vis-item vis-dot"+r;var o=e.box.style.right;var a=e.box.style.left;if(this.options.rtl){e.box.style.right="0px"}else{e.box.style.left="0px"}this.props.dot.height=e.dot.offsetHeight;this.props.dot.width=e.dot.offsetWidth;this.props.line.width=e.line.offsetWidth;this.width=e.box.offsetWidth;this.height=e.box.offsetHeight;if(this.options.rtl){e.box.style.right=o}else{e.box.style.left=a}this.dirty=false}this._repaintOnItemUpdateTimeTooltip(e.box);this._repaintDragCenter();this._repaintDeleteButton(e.box)};r.prototype.show=function(){if(!this.displayed){this.redraw()}};r.prototype.hide=function(){if(this.displayed){var e=this.dom;if(e.box.parentNode)e.box.parentNode.removeChild(e.box);if(e.line.parentNode)e.line.parentNode.removeChild(e.line);if(e.dot.parentNode)e.dot.parentNode.removeChild(e.dot);this.displayed=false}};r.prototype.repositionX=function(){var e=this.conversion.toScreen(this.data.start);var t=this.options.align;if(t=="right"){if(this.options.rtl){this.right=e-this.width;this.dom.box.style.right=this.right+"px";this.dom.line.style.right=e-this.props.line.width+"px";this.dom.dot.style.right=e-this.props.line.width/2-this.props.dot.width/2+"px"}else{this.left=e-this.width;this.dom.box.style.left=this.left+"px";this.dom.line.style.left=e-this.props.line.width+"px";this.dom.dot.style.left=e-this.props.line.width/2-this.props.dot.width/2+"px"}}else if(t=="left"){if(this.options.rtl){this.right=e;this.dom.box.style.right=this.right+"px";this.dom.line.style.right=e+"px";this.dom.dot.style.right=e+this.props.line.width/2-this.props.dot.width/2+"px"}else{this.left=e;this.dom.box.style.left=this.left+"px";this.dom.line.style.left=e+"px";this.dom.dot.style.left=e+this.props.line.width/2-this.props.dot.width/2+"px"}}else{if(this.options.rtl){this.right=e-this.width/2;this.dom.box.style.right=this.right+"px";this.dom.line.style.right=e-this.props.line.width+"px";this.dom.dot.style.right=e-this.props.dot.width/2+"px"}else{this.left=e-this.width/2;this.dom.box.style.left=this.left+"px";this.dom.line.style.left=e-this.props.line.width/2+"px";this.dom.dot.style.left=e-this.props.dot.width/2+"px"}}};r.prototype.repositionY=function(){var e=this.options.orientation.item;var t=this.dom.box;var i=this.dom.line;var n=this.dom.dot;if(e=="top"){t.style.top=(this.top||0)+"px";i.style.top="0";i.style.height=this.parent.top+this.top+1+"px";i.style.bottom=""}else{var s=this.parent.itemSet.props.height;var r=s-this.parent.top-this.parent.height+this.top;t.style.top=(this.parent.height-this.top-this.height||0)+"px";i.style.top=s-r+"px";i.style.bottom="0"}n.style.top=-this.props.dot.height/2+"px"};r.prototype.getWidthLeft=function(){return this.width/2};r.prototype.getWidthRight=function(){return this.width/2};e.exports=r},function(e,t,i){"use strict";var n=i(128);function s(e,t,i){this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}};this.options=i;if(e){if(e.start==undefined){throw new Error('Property "start" missing in item '+e)}}n.call(this,e,t,i)}s.prototype=new n(null,null,null);s.prototype.isVisible=function(e){var t=this.width*e.getMillisecondsPerPixel();return this.data.start.getTime()+t>e.start&&this.data.start<e.end};s.prototype.redraw=function(){var e=this.dom;if(!e){this.dom={};e=this.dom;e.point=document.createElement("div");e.content=document.createElement("div");e.content.className="vis-item-content";e.point.appendChild(e.content);e.dot=document.createElement("div");e.point.appendChild(e.dot);e.point["timeline-item"]=this;this.dirty=true}if(!this.parent){throw new Error("Cannot redraw item: no parent attached")}if(!e.point.parentNode){var t=this.parent.dom.foreground;if(!t){throw new Error("Cannot redraw item: parent has no foreground container element")}t.appendChild(e.point)}this.displayed=true;if(this.dirty){this._updateContents(this.dom.content);this._updateDataAttributes(this.dom.point);this._updateStyle(this.dom.point);var i=this.editable.updateTime||this.editable.updateGroup;var n=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(i?" vis-editable":" vis-readonly");e.point.className="vis-item vis-point"+n;e.dot.className="vis-item vis-dot"+n;this.props.dot.width=e.dot.offsetWidth;this.props.dot.height=e.dot.offsetHeight;this.props.content.height=e.content.offsetHeight;if(this.options.rtl){e.content.style.marginRight=2*this.props.dot.width+"px"}else{e.content.style.marginLeft=2*this.props.dot.width+"px"}this.width=e.point.offsetWidth;this.height=e.point.offsetHeight;e.dot.style.top=(this.height-this.props.dot.height)/2+"px";if(this.options.rtl){e.dot.style.right=this.props.dot.width/2+"px"}else{e.dot.style.left=this.props.dot.width/2+"px"}this.dirty=false}this._repaintOnItemUpdateTimeTooltip(e.point);this._repaintDragCenter();this._repaintDeleteButton(e.point)};s.prototype.show=function(){if(!this.displayed){this.redraw()}};s.prototype.hide=function(){if(this.displayed){if(this.dom.point.parentNode){this.dom.point.parentNode.removeChild(this.dom.point)}this.displayed=false}};s.prototype.repositionX=function(){var e=this.conversion.toScreen(this.data.start);if(this.options.rtl){this.right=e-this.props.dot.width;this.dom.point.style.right=this.right+"px"}else{this.left=e-this.props.dot.width;this.dom.point.style.left=this.left+"px"}};s.prototype.repositionY=function(){var e=this.options.orientation.item;var t=this.dom.point;if(e=="top"){t.style.top=this.top+"px"}else{t.style.top=this.parent.height-this.top-this.height+"px"}};s.prototype.getWidthLeft=function(){return this.props.dot.width};s.prototype.getWidthRight=function(){return this.props.dot.width};e.exports=s},function(e,t,i){"use strict";var n=i(112);var s=i(128);var r=i(129);var o=i(127);function a(e,t,i){this.props={content:{width:0}};this.overflow=false;if(e){if(e.start==undefined){throw new Error('Property "start" missing in item '+e.id)}if(e.end==undefined){throw new Error('Property "end" missing in item '+e.id)}}s.call(this,e,t,i)}a.prototype=new s(null,null,null);a.prototype.baseClassName="vis-item vis-background";a.prototype.stack=false;a.prototype.isVisible=function(e){return this.data.start<e.end&&this.data.end>e.start};a.prototype.redraw=function(){var e=this.dom;if(!e){this.dom={};e=this.dom;e.box=document.createElement("div");e.frame=document.createElement("div");e.frame.className="vis-item-overflow";e.box.appendChild(e.frame);e.content=document.createElement("div");e.content.className="vis-item-content";e.frame.appendChild(e.content);this.dirty=true}if(!this.parent){throw new Error("Cannot redraw item: no parent attached")}if(!e.box.parentNode){var t=this.parent.dom.background;if(!t){throw new Error("Cannot redraw item: parent has no background container element")}t.appendChild(e.box)}this.displayed=true;if(this.dirty){this._updateContents(this.dom.content);this._updateDataAttributes(this.dom.content);this._updateStyle(this.dom.box);var i=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");e.box.className=this.baseClassName+i;this.overflow=window.getComputedStyle(e.content).overflow!=="hidden";this.props.content.width=this.dom.content.offsetWidth;this.height=0;this.dirty=false}};a.prototype.show=o.prototype.show;a.prototype.hide=o.prototype.hide;a.prototype.repositionX=o.prototype.repositionX;a.prototype.repositionY=function(e){var t;var i=this.options.orientation.item;if(this.data.subgroup!==undefined){var n=this.data.subgroup;var s=this.parent.subgroups;var o=s[n].index;this.dom.box.style.height=this.parent.subgroups[n].height+"px";if(i=="top"){this.dom.box.style.top=this.parent.top+this.parent.subgroups[n].top+"px"}else{this.dom.box.style.top=this.parent.top+this.parent.height-this.parent.subgroups[n].top-this.parent.subgroups[n].height+"px"}this.dom.box.style.bottom=""}else{if(this.parent instanceof r){t=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height);this.dom.box.style.bottom=i=="bottom"?"0":"";this.dom.box.style.top=i=="top"?"0":""}else{t=this.parent.height;this.dom.box.style.top=this.parent.top+"px";this.dom.box.style.bottom=""}}this.dom.box.style.height=t+"px"};e.exports=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(134);var s=a(n);var r=i(135);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t,i){(0,s["default"])(this,e);this.container=t;this.overflowMethod=i||"cap";this.x=0;this.y=0;this.padding=5;this.hidden=false;this.frame=document.createElement("div");this.frame.className="vis-tooltip";this.container.appendChild(this.frame)}(0,o["default"])(e,[{key:"setPosition",value:function e(t,i){this.x=parseInt(t);this.y=parseInt(i)}},{key:"setText",value:function e(t){if(t instanceof Element){this.frame.innerHTML="";this.frame.appendChild(t)}else{this.frame.innerHTML=t}}},{key:"show",value:function e(t){if(t===undefined){t=true}if(t===true){var i=this.frame.clientHeight;var n=this.frame.clientWidth;var s=this.frame.parentNode.clientHeight;var r=this.frame.parentNode.clientWidth;var o=0,a=0;if(this.overflowMethod=="flip"){var l=false,h=true;if(this.y-i<this.padding){h=false}if(this.x+n>r-this.padding){l=true}if(l){o=this.x-n}else{o=this.x}if(h){a=this.y-i}else{a=this.y}}else{a=this.y-i;if(a+i+this.padding>s){a=s-i-this.padding}if(a<this.padding){a=this.padding}o=this.x;if(o+n+this.padding>r){o=r-n-this.padding}if(o<this.padding){o=this.padding}}this.frame.style.left=o+"px";this.frame.style.top=a+"px";this.frame.style.visibility="visible";this.hidden=false}else{this.hide()}}},{key:"hide",value:function e(){this.hidden=true;this.frame.style.visibility="hidden"}},{key:"destroy",value:function e(){this.frame.parentNode.removeChild(this.frame)}}]);return e}();t["default"]=l},function(e,t){"use strict";t.__esModule=true;t.default=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}},function(e,t,i){"use strict";t.__esModule=true;var n=i(136);var s=r(n);function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;(0,s.default)(e,n.key,n)}}return function(t,i,n){if(i)e(t.prototype,i);if(n)e(t,n);return t}}()},function(e,t,i){e.exports={default:i(137),__esModule:true}},function(e,t,i){i(138);var n=i(17).Object;e.exports=function e(t,i,s){return n.defineProperty(t,i,s)}},function(e,t,i){var n=i(15);n(n.S+n.F*!i(25),"Object",{defineProperty:i(21).f})},function(e,t,i){"use strict";var n=i(62);var s=r(n);function r(e){return e&&e.__esModule?e:{default:e}}var o=i(1);var a=i(120);var l=i(124);var h=i(121);var d=i(82);function u(e,t){this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}};this.props={range:{start:0,end:0,minimumStep:0},lineTop:0};this.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:true,showMajorLabels:true,maxMinorChars:7,format:l.FORMAT,moment:d,timeAxis:null};this.options=o.extend({},this.defaultOptions);this.body=e;this._create();this.setOptions(t)}u.prototype=new a;u.prototype.setOptions=function(e){if(e){o.selectiveExtend(["showMinorLabels","showMajorLabels","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,e);o.selectiveDeepExtend(["format"],this.options,e);if("orientation"in e){if(typeof e.orientation==="string"){this.options.orientation.axis=e.orientation}else if((0,s["default"])(e.orientation)==="object"&&"axis"in e.orientation){this.options.orientation.axis=e.orientation.axis}}if("locale"in e){if(typeof d.locale==="function"){d.locale(e.locale)}else{d.lang(e.locale)}}}};u.prototype._create=function(){this.dom.foreground=document.createElement("div");this.dom.background=document.createElement("div");this.dom.foreground.className="vis-time-axis vis-foreground";this.dom.background.className="vis-time-axis vis-background"};u.prototype.destroy=function(){if(this.dom.foreground.parentNode){this.dom.foreground.parentNode.removeChild(this.dom.foreground)}if(this.dom.background.parentNode){this.dom.background.parentNode.removeChild(this.dom.background)}this.body=null};u.prototype.redraw=function(){var e=this.props;var t=this.dom.foreground;var i=this.dom.background;var n=this.options.orientation.axis=="top"?this.body.dom.top:this.body.dom.bottom;var s=t.parentNode!==n;this._calculateCharSize();var r=this.options.showMinorLabels&&this.options.orientation.axis!=="none";var o=this.options.showMajorLabels&&this.options.orientation.axis!=="none";e.minorLabelHeight=r?e.minorCharHeight:0;e.majorLabelHeight=o?e.majorCharHeight:0;e.height=e.minorLabelHeight+e.majorLabelHeight;e.width=t.offsetWidth;e.minorLineHeight=this.body.domProps.root.height-e.majorLabelHeight-(this.options.orientation.axis=="top"?this.body.domProps.bottom.height:this.body.domProps.top.height);e.minorLineWidth=1;e.majorLineHeight=e.minorLineHeight+e.majorLabelHeight;e.majorLineWidth=1;var a=t.nextSibling;var l=i.nextSibling;t.parentNode&&t.parentNode.removeChild(t);i.parentNode&&i.parentNode.removeChild(i);t.style.height=this.props.height+"px";this._repaintLabels();if(a){n.insertBefore(t,a)}else{n.appendChild(t)}if(l){this.body.dom.backgroundVertical.insertBefore(i,l)}else{this.body.dom.backgroundVertical.appendChild(i)}return this._isResized()||s};u.prototype._repaintLabels=function(){var e=this.options.orientation.axis;var t=o.convert(this.body.range.start,"Number");var i=o.convert(this.body.range.end,"Number");var n=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf();var s=n-h.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this.body.range,n);s-=this.body.util.toTime(0).valueOf();var r=new l(new Date(t),new Date(i),s,this.body.hiddenDates);r.setMoment(this.options.moment);if(this.options.format){r.setFormat(this.options.format)}if(this.options.timeAxis){r.setScale(this.options.timeAxis)}this.step=r;var a=this.dom;a.redundant.lines=a.lines;a.redundant.majorTexts=a.majorTexts;a.redundant.minorTexts=a.minorTexts;a.lines=[];a.majorTexts=[];a.minorTexts=[];var d;var u;var c;var p;var m,v;var g;var y=0,b;var w;var _;var x=undefined;var k=0;var C=1e3;var S;r.start();u=r.getCurrent();p=this.body.util.toScreen(u);while(r.hasNext()&&k<C){k++;m=r.isMajor();S=r.getClassName();_=r.getLabelMinor();d=u;c=p;r.next();u=r.getCurrent();v=r.isMajor();p=this.body.util.toScreen(u);b=y;y=p-c;switch(r.scale){case"week":g=true;break;default:g=y>=b*.4;break}if(this.options.showMinorLabels&&g){var T=this._repaintMinorText(c,_,e,S);T.style.width=y+"px"}if(m&&this.options.showMajorLabels){if(c>0){if(x==undefined){x=c}T=this._repaintMajorText(c,r.getLabelMajor(),e,S)}w=this._repaintMajorLine(c,y,e,S)}else{if(g){w=this._repaintMinorLine(c,y,e,S)}else{if(w){w.style.width=parseInt(w.style.width)+y+"px"}}}}if(k===C&&!f){console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to "+C+" lines.");f=true}if(this.options.showMajorLabels){var M=this.body.util.toTime(0),D=r.getLabelMajor(M),E=D.length*(this.props.majorCharWidth||10)+10;if(x==undefined||E<x){this._repaintMajorText(0,D,e,S)}}o.forEach(this.dom.redundant,function(e){while(e.length){var t=e.pop();if(t&&t.parentNode){t.parentNode.removeChild(t)}}})};u.prototype._repaintMinorText=function(e,t,i,n){var s=this.dom.redundant.minorTexts.shift();if(!s){var r=document.createTextNode("");s=document.createElement("div");s.appendChild(r);this.dom.foreground.appendChild(s)}this.dom.minorTexts.push(s);s.innerHTML=t;s.style.top=i=="top"?this.props.majorLabelHeight+"px":"0";if(this.options.rtl){s.style.left="";s.style.right=e+"px"}else{s.style.left=e+"px"}s.className="vis-text vis-minor "+n;return s};u.prototype._repaintMajorText=function(e,t,i,n){var s=this.dom.redundant.majorTexts.shift();if(!s){var r=document.createElement("div");s=document.createElement("div");s.appendChild(r);this.dom.foreground.appendChild(s)}s.childNodes[0].innerHTML=t;s.className="vis-text vis-major "+n;s.style.top=i=="top"?"0":this.props.minorLabelHeight+"px";if(this.options.rtl){s.style.left="";s.style.right=e+"px"}else{s.style.left=e+"px"}this.dom.majorTexts.push(s);return s};u.prototype._repaintMinorLine=function(e,t,i,n){var s=this.dom.redundant.lines.shift();if(!s){s=document.createElement("div");this.dom.background.appendChild(s)}this.dom.lines.push(s);var r=this.props;if(i=="top"){s.style.top=r.majorLabelHeight+"px"}else{s.style.top=this.body.domProps.top.height+"px"}s.style.height=r.minorLineHeight+"px";if(this.options.rtl){s.style.left="";s.style.right=e-r.minorLineWidth/2+"px";s.className="vis-grid vis-vertical-rtl vis-minor "+n}else{s.style.left=e-r.minorLineWidth/2+"px";s.className="vis-grid vis-vertical vis-minor "+n}s.style.width=t+"px";return s};u.prototype._repaintMajorLine=function(e,t,i,n){var s=this.dom.redundant.lines.shift();if(!s){s=document.createElement("div");this.dom.background.appendChild(s)}this.dom.lines.push(s);var r=this.props;if(i=="top"){s.style.top="0"}else{s.style.top=this.body.domProps.top.height+"px"}if(this.options.rtl){s.style.left="";s.style.right=e-r.majorLineWidth/2+"px";s.className="vis-grid vis-vertical-rtl vis-major "+n}else{s.style.left=e-r.majorLineWidth/2+"px";s.className="vis-grid vis-vertical vis-major "+n}s.style.height=r.majorLineHeight+"px";s.style.width=t+"px";return s};u.prototype._calculateCharSize=function(){if(!this.dom.measureCharMinor){this.dom.measureCharMinor=document.createElement("DIV");this.dom.measureCharMinor.className="vis-text vis-minor vis-measure";this.dom.measureCharMinor.style.position="absolute";this.dom.measureCharMinor.appendChild(document.createTextNode("0"));this.dom.foreground.appendChild(this.dom.measureCharMinor)}this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight;this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth;if(!this.dom.measureCharMajor){this.dom.measureCharMajor=document.createElement("DIV");this.dom.measureCharMajor.className="vis-text vis-major vis-measure";this.dom.measureCharMajor.style.position="absolute";this.dom.measureCharMajor.appendChild(document.createTextNode("0"));this.dom.foreground.appendChild(this.dom.measureCharMajor)}this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight;this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth};var f=false;e.exports=u},function(e,t,i){"use strict";var n=i(115);var s=i(99);var r=i(112);var o=i(1);function a(e){this.active=false;this.dom={container:e};this.dom.overlay=document.createElement("div");this.dom.overlay.className="vis-overlay";this.dom.container.appendChild(this.dom.overlay);this.hammer=r(this.dom.overlay);this.hammer.on("tap",this._onTapOverlay.bind(this));var t=this;var i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];i.forEach(function(e){t.hammer.on(e,function(e){e.stopPropagation()})});if(document&&document.body){this.onClick=function(i){if(!l(i.target,e)){t.deactivate()}};document.body.addEventListener("click",this.onClick)}if(this.keycharm!==undefined){this.keycharm.destroy()}this.keycharm=n();this.escListener=this.deactivate.bind(this)}s(a.prototype);a.current=null;a.prototype.destroy=function(){this.deactivate();this.dom.overlay.parentNode.removeChild(this.dom.overlay);if(this.onClick){document.body.removeEventListener("click",this.onClick)}this.hammer.destroy();this.hammer=null};a.prototype.activate=function(){if(a.current){a.current.deactivate()}a.current=this;this.active=true;this.dom.overlay.style.display="none";o.addClassName(this.dom.container,"vis-active");this.emit("change");this.emit("activate");this.keycharm.bind("esc",this.escListener)};a.prototype.deactivate=function(){this.active=false;this.dom.overlay.style.display="";o.removeClassName(this.dom.container,"vis-active");this.keycharm.unbind("esc",this.escListener);this.emit("change");this.emit("deactivate")};a.prototype._onTapOverlay=function(e){this.activate();e.stopPropagation()};function l(e,t){while(e){if(e===t){return true}e=e.parentNode}return false}e.exports=a},function(e,t,i){"use strict";var n=i(112);var s=i(1);var r=i(120);var o=i(82);var a=i(142);function l(e,t){this.body=e;this.defaultOptions={moment:o,locales:a,locale:"en",id:undefined,title:undefined};this.options=s.extend({},this.defaultOptions);if(t&&t.time){this.customTime=t.time}else{this.customTime=new Date}this.eventParams={};this.setOptions(t);this._create()}l.prototype=new r;l.prototype.setOptions=function(e){if(e){s.selectiveExtend(["moment","locale","locales","id"],this.options,e)}};l.prototype._create=function(){var e=document.createElement("div");e["custom-time"]=this;e.className="vis-custom-time "+(this.options.id||"");e.style.position="absolute";e.style.top="0px";e.style.height="100%";this.bar=e;var t=document.createElement("div");t.style.position="relative";t.style.top="0px";t.style.left="-10px";t.style.height="100%";t.style.width="20px";function i(e){this.body.range._onMouseWheel(e)}if(t.addEventListener){t.addEventListener("mousewheel",i.bind(this),false);t.addEventListener("DOMMouseScroll",i.bind(this),false)}else{t.attachEvent("onmousewheel",i.bind(this))}e.appendChild(t);this.hammer=new n(t);this.hammer.on("panstart",this._onDragStart.bind(this));this.hammer.on("panmove",this._onDrag.bind(this));this.hammer.on("panend",this._onDragEnd.bind(this));this.hammer.get("pan").set({threshold:5,direction:n.DIRECTION_HORIZONTAL})};l.prototype.destroy=function(){this.hide();this.hammer.destroy();this.hammer=null;this.body=null};l.prototype.redraw=function(){var e=this.body.dom.backgroundVertical;if(this.bar.parentNode!=e){if(this.bar.parentNode){this.bar.parentNode.removeChild(this.bar)}e.appendChild(this.bar)}var t=this.body.util.toScreen(this.customTime);var i=this.options.locales[this.options.locale];if(!i){if(!this.warned){console.log("WARNING: options.locales['"+this.options.locale+"'] not found. See http://visjs.org/docs/timeline/#Localization");this.warned=true}i=this.options.locales["en"]}var n=this.options.title;if(n===undefined){n=i.time+": "+this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss");n=n.charAt(0).toUpperCase()+n.substring(1)}else if(typeof n==="function"){n=n.call(this.customTime)}this.bar.style.left=t+"px";this.bar.title=n;return false};l.prototype.hide=function(){if(this.bar.parentNode){this.bar.parentNode.removeChild(this.bar)}};l.prototype.setCustomTime=function(e){this.customTime=s.convert(e,"Date");this.redraw()};l.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())};l.prototype.setCustomTitle=function(e){this.options.title=e};l.prototype._onDragStart=function(e){this.eventParams.dragging=true;this.eventParams.customTime=this.customTime;e.stopPropagation()};l.prototype._onDrag=function(e){if(!this.eventParams.dragging)return;var t=this.body.util.toScreen(this.eventParams.customTime)+e.deltaX;var i=this.body.util.toTime(t);this.setCustomTime(i);this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:e});e.stopPropagation()};l.prototype._onDragEnd=function(e){if(!this.eventParams.dragging)return;this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:e});e.stopPropagation()};l.customTimeFromTarget=function(e){var t=e.target;while(t){if(t.hasOwnProperty("custom-time")){return t["custom-time"]}t=t.parentNode}return null};e.exports=l},function(e,t){"use strict";t["en"]={current:"current",time:"time"};t["en_EN"]=t["en"];t["en_US"]=t["en"];t["it"]={current:"attuale",time:"tempo"};t["it_IT"]=t["it"];t["it_CH"]=t["it"];t["nl"]={current:"huidige",time:"tijd"};t["nl_NL"]=t["nl"];t["nl_BE"]=t["nl"];t["de"]={current:"Aktuelle",time:"Zeit"};t["de_DE"]=t["de"];t["fr"]={current:"actuel",time:"heure"};t["fr_FR"]=t["fr"];t["fr_CA"]=t["fr"];t["fr_BE"]=t["fr"];t["es"]={current:"corriente",time:"hora"};t["es_ES"]=t["es"]},function(e,t,i){"use strict";var n=i(1);var s=i(120);var r=i(82);var o=i(142);function a(e,t){this.body=e;this.defaultOptions={rtl:false,showCurrentTime:true,moment:r,locales:o,locale:"en"};this.options=n.extend({},this.defaultOptions);this.offset=0;this._create();this.setOptions(t)}a.prototype=new s;a.prototype._create=function(){var e=document.createElement("div");e.className="vis-current-time";e.style.position="absolute";e.style.top="0px";e.style.height="100%";this.bar=e};a.prototype.destroy=function(){this.options.showCurrentTime=false;this.redraw();this.body=null};a.prototype.setOptions=function(e){if(e){n.selectiveExtend(["rtl","showCurrentTime","moment","locale","locales"],this.options,e)}};a.prototype.redraw=function(){if(this.options.showCurrentTime){var e=this.body.dom.backgroundVertical;if(this.bar.parentNode!=e){if(this.bar.parentNode){this.bar.parentNode.removeChild(this.bar)}e.appendChild(this.bar);this.start()}var t=this.options.moment((new Date).valueOf()+this.offset);var i=this.body.util.toScreen(t);var n=this.options.locales[this.options.locale];if(!n){if(!this.warned){console.log("WARNING: options.locales['"+this.options.locale+"'] not found. See http://visjs.org/docs/timeline/#Localization");this.warned=true}n=this.options.locales["en"]}var s=n.current+" "+n.time+": "+t.format("dddd, MMMM Do YYYY, H:mm:ss");s=s.charAt(0).toUpperCase()+s.substring(1);if(this.options.rtl){this.bar.style.right=i+"px"}else{this.bar.style.left=i+"px"}this.bar.title=s}else{if(this.bar.parentNode){this.bar.parentNode.removeChild(this.bar)}this.stop()}return false};a.prototype.start=function(){var e=this;function t(){e.stop();var i=e.body.range.conversion(e.body.domProps.center.width).scale;var n=1/i/10;if(n<30)n=30;if(n>1e3)n=1e3;e.redraw();e.body.emitter.emit("currentTimeTick");e.currentTimeTimer=setTimeout(t,n)}t()};a.prototype.stop=function(){if(this.currentTimeTimer!==undefined){clearTimeout(this.currentTimeTimer);delete this.currentTimeTimer}};a.prototype.setCurrentTime=function(e){var t=n.convert(e,"Date").valueOf();var i=(new Date).valueOf();this.offset=t-i;this.redraw()};a.prototype.getCurrentTime=function(){return new Date((new Date).valueOf()+this.offset)};e.exports=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.printStyle=undefined;var n=i(90);var s=c(n);var r=i(62);var o=c(r);var a=i(58);var l=c(a);var h=i(134);var d=c(h);var u=i(135);var f=c(u);function c(e){return e&&e.__esModule?e:{default:e}}var p=i(1);var m=false;var v=void 0;var g="background: #FFeeee; color: #dd0000";var y=function(){function e(){(0,d["default"])(this,e)}(0,f["default"])(e,null,[{key:"validate",value:function t(i,n,s){m=false;v=n;var r=n;if(s!==undefined){r=n[s]}e.parse(i,r,[]);return m}},{key:"parse",value:function t(i,n,s){for(var r in i){if(i.hasOwnProperty(r)){e.check(r,i,n,s)}}}},{key:"check",value:function t(i,n,s,r){if(s[i]===undefined&&s.__any__===undefined){e.getSuggestion(i,s,r)}else if(s[i]===undefined&&s.__any__!==undefined){if(e.getType(n[i])==="object"&&s["__any__"].__type__!==undefined){e.checkFields(i,n,s,"__any__",s["__any__"].__type__,r)}else{e.checkFields(i,n,s,"__any__",s["__any__"],r)}}else{if(s[i].__type__!==undefined){e.checkFields(i,n,s,i,s[i].__type__,r)}else{e.checkFields(i,n,s,i,s[i],r)}}}},{key:"checkFields",value:function t(i,n,s,r,o,a){var h=e.getType(n[i]);var d=o[h];if(d!==undefined){if(e.getType(d)==="array"){if(d.indexOf(n[i])===-1){console.log('%cInvalid option detected in "'+i+'".'+" Allowed values are:"+e.print(d)+' not "'+n[i]+'". '+e.printLocation(a,i),g);m=true}else if(h==="object"&&r!=="__any__"){a=p.copyAndExtendArray(a,i);e.parse(n[i],s[r],a)}}else if(h==="object"&&r!=="__any__"){a=p.copyAndExtendArray(a,i);e.parse(n[i],s[r],a)}}else if(o["any"]===undefined){console.log('%cInvalid type received for "'+i+'". Expected: '+e.print((0,l["default"])(o))+". Received ["+h+'] "'+n[i]+'"'+e.printLocation(a,i),g);m=true}}},{key:"getType",value:function e(t){var i=typeof t==="undefined"?"undefined":(0,o["default"])(t);if(i==="object"){if(t===null){return"null"}if(t instanceof Boolean){return"boolean"}if(t instanceof Number){return"number"}if(t instanceof String){return"string"}if(Array.isArray(t)){return"array"}if(t instanceof Date){return"date"}if(t.nodeType!==undefined){return"dom"}if(t._isAMomentObject===true){return"moment"}return"object"}else if(i==="number"){return"number"}else if(i==="boolean"){return"boolean"}else if(i==="string"){return"string"}else if(i===undefined){return"undefined"}return i}},{key:"getSuggestion",value:function t(i,n,s){var r=e.findInOptions(i,n,s,false);var o=e.findInOptions(i,v,[],true);var a=8;var h=4;if(r.indexMatch!==undefined){console.log('%cUnknown option detected: "'+i+'" in '+e.printLocation(r.path,i,"")+'Perhaps it was incomplete? Did you mean: "'+r.indexMatch+'"?\n\n',g)}else if(o.distance<=h&&r.distance>o.distance){console.log('%cUnknown option detected: "'+i+'" in '+e.printLocation(r.path,i,"")+"Perhaps it was misplaced? Matching option found at: "+e.printLocation(o.path,o.closestMatch,""),g)}else if(r.distance<=a){console.log('%cUnknown option detected: "'+i+'". Did you mean "'+r.closestMatch+'"?'+e.printLocation(r.path,i),g)}else{console.log('%cUnknown option detected: "'+i+'". Did you mean one of these: '+e.print((0,l["default"])(n))+e.printLocation(s,i),g)}m=true}},{key:"findInOptions",value:function t(i,n,s){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var o=1e9;var a="";var l=[];var h=i.toLowerCase();var d=undefined;for(var u in n){var f=void 0;if(n[u].__type__!==undefined&&r===true){var c=e.findInOptions(i,n[u],p.copyAndExtendArray(s,u));if(o>c.distance){a=c.closestMatch;l=c.path;o=c.distance;d=c.indexMatch}}else{if(u.toLowerCase().indexOf(h)!==-1){d=u}f=e.levenshteinDistance(i,u);if(o>f){a=u;l=p.copyArray(s);o=f}}}return{closestMatch:a,path:l,distance:o,indexMatch:d}}},{key:"printLocation",value:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"Problem value found at: \n";var s="\n\n"+n+"options = {\n";for(var r=0;r<t.length;r++){for(var o=0;o<r+1;o++){s+="  "}s+=t[r]+": {\n"}for(var a=0;a<t.length+1;a++){s+="  "}s+=i+"\n";for(var l=0;l<t.length+1;l++){for(var h=0;h<t.length-l;h++){s+="  "}s+="}\n"}return s+"\n\n"}},{key:"print",value:function e(t){return(0,s["default"])(t).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}},{key:"levenshteinDistance",value:function e(t,i){if(t.length===0)return i.length;if(i.length===0)return t.length;var n=[];var s;for(s=0;s<=i.length;s++){n[s]=[s]}var r;for(r=0;r<=t.length;r++){n[0][r]=r}for(s=1;s<=i.length;s++){for(r=1;r<=t.length;r++){if(i.charAt(s-1)==t.charAt(r-1)){n[s][r]=n[s-1][r-1]}else{n[s][r]=Math.min(n[s-1][r-1]+1,Math.min(n[s][r-1]+1,n[s-1][r]+1))}}}return n[i.length][t.length]}}]);return e}();t["default"]=y;t.printStyle=g},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i="string";var n="boolean";var s="number";var r="array";var o="date";var a="object";var l="dom";var h="moment";var d="any";var u={configure:{enabled:{boolean:n},filter:{boolean:n,function:"function"},container:{dom:l},__type__:{object:a,boolean:n,function:"function"}},align:{string:i},rtl:{boolean:n,undefined:"undefined"},rollingMode:{follow:{boolean:n},offset:{number:s,undefined:"undefined"},__type__:{object:a}},verticalScroll:{boolean:n,undefined:"undefined"},horizontalScroll:{boolean:n,undefined:"undefined"},autoResize:{boolean:n},throttleRedraw:{number:s},clickToUse:{boolean:n},dataAttributes:{string:i,array:r},editable:{add:{boolean:n,undefined:"undefined"},remove:{boolean:n,undefined:"undefined"},updateGroup:{boolean:n,undefined:"undefined"},updateTime:{boolean:n,undefined:"undefined"},overrideItems:{boolean:n,undefined:"undefined"},__type__:{boolean:n,object:a}},end:{number:s,date:o,string:i,moment:h},format:{minorLabels:{millisecond:{string:i,undefined:"undefined"},second:{string:i,undefined:"undefined"
},minute:{string:i,undefined:"undefined"},hour:{string:i,undefined:"undefined"},weekday:{string:i,undefined:"undefined"},day:{string:i,undefined:"undefined"},week:{string:i,undefined:"undefined"},month:{string:i,undefined:"undefined"},year:{string:i,undefined:"undefined"},__type__:{object:a,function:"function"}},majorLabels:{millisecond:{string:i,undefined:"undefined"},second:{string:i,undefined:"undefined"},minute:{string:i,undefined:"undefined"},hour:{string:i,undefined:"undefined"},weekday:{string:i,undefined:"undefined"},day:{string:i,undefined:"undefined"},week:{string:i,undefined:"undefined"},month:{string:i,undefined:"undefined"},year:{string:i,undefined:"undefined"},__type__:{object:a,function:"function"}},__type__:{object:a}},moment:{function:"function"},groupOrder:{string:i,function:"function"},groupEditable:{add:{boolean:n,undefined:"undefined"},remove:{boolean:n,undefined:"undefined"},order:{boolean:n,undefined:"undefined"},__type__:{boolean:n,object:a}},groupOrderSwap:{function:"function"},height:{string:i,number:s},hiddenDates:{start:{date:o,number:s,string:i,moment:h},end:{date:o,number:s,string:i,moment:h},repeat:{string:i},__type__:{object:a,array:r}},itemsAlwaysDraggable:{boolean:n},locale:{string:i},locales:{__any__:{any:d},__type__:{object:a}},margin:{axis:{number:s},item:{horizontal:{number:s,undefined:"undefined"},vertical:{number:s,undefined:"undefined"},__type__:{object:a,number:s}},__type__:{object:a,number:s}},max:{date:o,number:s,string:i,moment:h},maxHeight:{number:s,string:i},maxMinorChars:{number:s},min:{date:o,number:s,string:i,moment:h},minHeight:{number:s,string:i},moveable:{boolean:n},multiselect:{boolean:n},multiselectPerGroup:{boolean:n},onAdd:{function:"function"},onUpdate:{function:"function"},onMove:{function:"function"},onMoving:{function:"function"},onRemove:{function:"function"},onAddGroup:{function:"function"},onMoveGroup:{function:"function"},onRemoveGroup:{function:"function"},order:{function:"function"},orientation:{axis:{string:i,undefined:"undefined"},item:{string:i,undefined:"undefined"},__type__:{string:i,object:a}},selectable:{boolean:n},showCurrentTime:{boolean:n},showMajorLabels:{boolean:n},showMinorLabels:{boolean:n},stack:{boolean:n},stackSubgroups:{boolean:n},snap:{function:"function",null:"null"},start:{date:o,number:s,string:i,moment:h},template:{function:"function"},groupTemplate:{function:"function"},visibleFrameTemplate:{string:i,function:"function"},showTooltips:{boolean:n},tooltip:{followMouse:{boolean:n},overflowMethod:{string:["cap","flip"]},__type__:{object:a}},tooltipOnItemUpdateTime:{template:{function:"function"},__type__:{boolean:n,object:a}},timeAxis:{scale:{string:i,undefined:"undefined"},step:{number:s,undefined:"undefined"},__type__:{object:a}},type:{string:i},width:{string:i,number:s},zoomable:{boolean:n},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:s},zoomMin:{number:s},__type__:{object:a}};var f={global:{align:["center","left","right"],direction:false,autoResize:true,clickToUse:false,editable:{add:false,remove:false,updateGroup:false,updateTime:false},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},groupsDraggable:false,height:"",locale:"",margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:false,multiselect:false,multiselectPerGroup:false,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},selectable:true,showCurrentTime:false,showMajorLabels:true,showMinorLabels:true,stack:true,stackSubgroups:true,start:"",showTooltips:true,tooltip:{followMouse:false,overflowMethod:"flip"},tooltipOnItemUpdateTime:false,type:["box","point","range","background"],width:"100%",zoomable:true,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1]}};t.allOptions=u;t.configureOptions=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(90);var s=u(n);var r=i(62);var o=u(r);var a=i(134);var l=u(a);var h=i(135);var d=u(h);function u(e){return e&&e.__esModule?e:{default:e}}var f=i(1);var c=i(147)["default"];var p=function(){function e(t,i,n){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;(0,l["default"])(this,e);this.parent=t;this.changedOptions=[];this.container=i;this.allowCreation=false;this.options={};this.initialized=false;this.popupCounter=0;this.defaultOptions={enabled:false,filter:true,container:undefined,showButton:true};f.extend(this.options,this.defaultOptions);this.configureOptions=n;this.moduleOptions={};this.domElements=[];this.popupDiv={};this.popupLimit=5;this.popupHistory={};this.colorPicker=new c(s);this.wrapper=undefined}(0,d["default"])(e,[{key:"setOptions",value:function e(t){if(t!==undefined){this.popupHistory={};this._removePopup();var i=true;if(typeof t==="string"){this.options.filter=t}else if(t instanceof Array){this.options.filter=t.join()}else if((typeof t==="undefined"?"undefined":(0,o["default"])(t))==="object"){if(t.container!==undefined){this.options.container=t.container}if(t.filter!==undefined){this.options.filter=t.filter}if(t.showButton!==undefined){this.options.showButton=t.showButton}if(t.enabled!==undefined){i=t.enabled}}else if(typeof t==="boolean"){this.options.filter=true;i=t}else if(typeof t==="function"){this.options.filter=t;i=true}if(this.options.filter===false){i=false}this.options.enabled=i}this._clean()}},{key:"setModuleOptions",value:function e(t){this.moduleOptions=t;if(this.options.enabled===true){this._clean();if(this.options.container!==undefined){this.container=this.options.container}this._create()}}},{key:"_create",value:function e(){var t=this;this._clean();this.changedOptions=[];var i=this.options.filter;var n=0;var s=false;for(var r in this.configureOptions){if(this.configureOptions.hasOwnProperty(r)){this.allowCreation=false;s=false;if(typeof i==="function"){s=i(r,[]);s=s||this._handleObject(this.configureOptions[r],[r],true)}else if(i===true||i.indexOf(r)!==-1){s=true}if(s!==false){this.allowCreation=true;if(n>0){this._makeItem([])}this._makeHeader(r);this._handleObject(this.configureOptions[r],[r])}n++}}if(this.options.showButton===true){var o=document.createElement("div");o.className="vis-configuration vis-config-button";o.innerHTML="generate options";o.onclick=function(){t._printOptions()};o.onmouseover=function(){o.className="vis-configuration vis-config-button hover"};o.onmouseout=function(){o.className="vis-configuration vis-config-button"};this.optionsContainer=document.createElement("div");this.optionsContainer.className="vis-configuration vis-config-option-container";this.domElements.push(this.optionsContainer);this.domElements.push(o)}this._push()}},{key:"_push",value:function e(){this.wrapper=document.createElement("div");this.wrapper.className="vis-configuration-wrapper";this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++){this.wrapper.appendChild(this.domElements[t])}this._showPopupIfNeeded()}},{key:"_clean",value:function e(){for(var t=0;t<this.domElements.length;t++){this.wrapper.removeChild(this.domElements[t])}if(this.wrapper!==undefined){this.container.removeChild(this.wrapper);this.wrapper=undefined}this.domElements=[];this._removePopup()}},{key:"_getValue",value:function e(t){var i=this.moduleOptions;for(var n=0;n<t.length;n++){if(i[t[n]]!==undefined){i=i[t[n]]}else{i=undefined;break}}return i}},{key:"_makeItem",value:function e(t){if(this.allowCreation===true){var i=document.createElement("div");i.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var n=arguments.length,s=Array(n>1?n-1:0),r=1;r<n;r++){s[r-1]=arguments[r]}s.forEach(function(e){i.appendChild(e)});this.domElements.push(i);return this.domElements.length}return 0}},{key:"_makeHeader",value:function e(t){var i=document.createElement("div");i.className="vis-configuration vis-config-header";i.innerHTML=t;this._makeItem([],i)}},{key:"_makeLabel",value:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=document.createElement("div");s.className="vis-configuration vis-config-label vis-config-s"+i.length;if(n===true){s.innerHTML="<i><b>"+t+":</b></i>"}else{s.innerHTML=t+":"}return s}},{key:"_makeDropdown",value:function e(t,i,n){var s=document.createElement("select");s.className="vis-configuration vis-config-select";var r=0;if(i!==undefined){if(t.indexOf(i)!==-1){r=t.indexOf(i)}}for(var o=0;o<t.length;o++){var a=document.createElement("option");a.value=t[o];if(o===r){a.selected="selected"}a.innerHTML=t[o];s.appendChild(a)}var l=this;s.onchange=function(){l._update(this.value,n)};var h=this._makeLabel(n[n.length-1],n);this._makeItem(n,h,s)}},{key:"_makeRange",value:function e(t,i,n){var s=t[0];var r=t[1];var o=t[2];var a=t[3];var l=document.createElement("input");l.className="vis-configuration vis-config-range";try{l.type="range";l.min=r;l.max=o}catch(e){}l.step=a;var h="";var d=0;if(i!==undefined){var u=1.2;if(i<0&&i*u<r){l.min=Math.ceil(i*u);d=l.min;h="range increased"}else if(i/u<r){l.min=Math.ceil(i/u);d=l.min;h="range increased"}if(i*u>o&&o!==1){l.max=Math.ceil(i*u);d=l.max;h="range increased"}l.value=i}else{l.value=s}var f=document.createElement("input");f.className="vis-configuration vis-config-rangeinput";f.value=l.value;var c=this;l.onchange=function(){f.value=this.value;c._update(Number(this.value),n)};l.oninput=function(){f.value=this.value};var p=this._makeLabel(n[n.length-1],n);var m=this._makeItem(n,p,l,f);if(h!==""&&this.popupHistory[m]!==d){this.popupHistory[m]=d;this._setupPopup(h,m)}}},{key:"_setupPopup",value:function e(t,i){var n=this;if(this.initialized===true&&this.allowCreation===true&&this.popupCounter<this.popupLimit){var s=document.createElement("div");s.id="vis-configuration-popup";s.className="vis-configuration-popup";s.innerHTML=t;s.onclick=function(){n._removePopup()};this.popupCounter+=1;this.popupDiv={html:s,index:i}}}},{key:"_removePopup",value:function e(){if(this.popupDiv.html!==undefined){this.popupDiv.html.parentNode.removeChild(this.popupDiv.html);clearTimeout(this.popupDiv.hideTimeout);clearTimeout(this.popupDiv.deleteTimeout);this.popupDiv={}}}},{key:"_showPopupIfNeeded",value:function e(){var t=this;if(this.popupDiv.html!==undefined){var i=this.domElements[this.popupDiv.index];var n=i.getBoundingClientRect();this.popupDiv.html.style.left=n.left+"px";this.popupDiv.html.style.top=n.top-30+"px";document.body.appendChild(this.popupDiv.html);this.popupDiv.hideTimeout=setTimeout(function(){t.popupDiv.html.style.opacity=0},1500);this.popupDiv.deleteTimeout=setTimeout(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function e(t,i,n){var s=document.createElement("input");s.type="checkbox";s.className="vis-configuration vis-config-checkbox";s.checked=t;if(i!==undefined){s.checked=i;if(i!==t){if((typeof t==="undefined"?"undefined":(0,o["default"])(t))==="object"){if(i!==t.enabled){this.changedOptions.push({path:n,value:i})}}else{this.changedOptions.push({path:n,value:i})}}}var r=this;s.onchange=function(){r._update(this.checked,n)};var a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,s)}},{key:"_makeTextInput",value:function e(t,i,n){var s=document.createElement("input");s.type="text";s.className="vis-configuration vis-config-text";s.value=i;if(i!==t){this.changedOptions.push({path:n,value:i})}var r=this;s.onchange=function(){r._update(this.value,n)};var o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,s)}},{key:"_makeColorField",value:function e(t,i,n){var s=this;var r=t[1];var o=document.createElement("div");i=i===undefined?r:i;if(i!=="none"){o.className="vis-configuration vis-config-colorBlock";o.style.backgroundColor=i}else{o.className="vis-configuration vis-config-colorBlock none"}i=i===undefined?r:i;o.onclick=function(){s._showColorPicker(i,o,n)};var a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,o)}},{key:"_showColorPicker",value:function e(t,i,n){var s=this;i.onclick=function(){};this.colorPicker.insertTo(i);this.colorPicker.show();this.colorPicker.setColor(t);this.colorPicker.setUpdateCallback(function(e){var t="rgba("+e.r+","+e.g+","+e.b+","+e.a+")";i.style.backgroundColor=t;s._update(t,n)});this.colorPicker.setCloseCallback(function(){i.onclick=function(){s._showColorPicker(t,i,n)}})}},{key:"_handleObject",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=false;var r=this.options.filter;var o=false;for(var a in t){if(t.hasOwnProperty(a)){s=true;var l=t[a];var h=f.copyAndExtendArray(i,a);if(typeof r==="function"){s=r(a,i);if(s===false){if(!(l instanceof Array)&&typeof l!=="string"&&typeof l!=="boolean"&&l instanceof Object){this.allowCreation=false;s=this._handleObject(l,h,true);this.allowCreation=n===false}}}if(s!==false){o=true;var d=this._getValue(h);if(l instanceof Array){this._handleArray(l,d,h)}else if(typeof l==="string"){this._makeTextInput(l,d,h)}else if(typeof l==="boolean"){this._makeCheckbox(l,d,h)}else if(l instanceof Object){var u=true;if(i.indexOf("physics")!==-1){if(this.moduleOptions.physics.solver!==a){u=false}}if(u===true){if(l.enabled!==undefined){var c=f.copyAndExtendArray(h,"enabled");var p=this._getValue(c);if(p===true){var m=this._makeLabel(a,h,true);this._makeItem(h,m);o=this._handleObject(l,h)||o}else{this._makeCheckbox(l,p,h)}}else{var v=this._makeLabel(a,h,true);this._makeItem(h,v);o=this._handleObject(l,h)||o}}}else{console.error("dont know how to handle",l,a,h)}}}}return o}},{key:"_handleArray",value:function e(t,i,n){if(typeof t[0]==="string"&&t[0]==="color"){this._makeColorField(t,i,n);if(t[1]!==i){this.changedOptions.push({path:n,value:i})}}else if(typeof t[0]==="string"){this._makeDropdown(t,i,n);if(t[0]!==i){this.changedOptions.push({path:n,value:i})}}else if(typeof t[0]==="number"){this._makeRange(t,i,n);if(t[0]!==i){this.changedOptions.push({path:n,value:Number(i)})}}}},{key:"_update",value:function e(t,i){var n=this._constructOptions(t,i);if(this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit){this.parent.body.emitter.emit("configChange",n)}this.initialized=true;this.parent.setOptions(n)}},{key:"_constructOptions",value:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var s=n;t=t==="true"?true:t;t=t==="false"?false:t;for(var r=0;r<i.length;r++){if(i[r]!=="global"){if(s[i[r]]===undefined){s[i[r]]={}}if(r!==i.length-1){s=s[i[r]]}else{s[i[r]]=t}}}return n}},{key:"_printOptions",value:function e(){var t=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+(0,s["default"])(t,null,2)+"</pre>"}},{key:"getOptions",value:function e(){var t={};for(var i=0;i<this.changedOptions.length;i++){this._constructOptions(this.changedOptions[i].value,this.changedOptions[i].path,t)}return t}}]);return e}();t["default"]=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(90);var s=h(n);var r=i(134);var o=h(r);var a=i(135);var l=h(a);function h(e){return e&&e.__esModule?e:{default:e}}var d=i(112);var u=i(119);var f=i(1);var c=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;(0,o["default"])(this,e);this.pixelRatio=t;this.generated=false;this.centerCoordinates={x:289/2,y:289/2};this.r=289*.49;this.color={r:255,g:255,b:255,a:1};this.hueCircle=undefined;this.initialColor={r:255,g:255,b:255,a:1};this.previousColor=undefined;this.applied=false;this.updateCallback=function(){};this.closeCallback=function(){};this._create()}(0,l["default"])(e,[{key:"insertTo",value:function e(t){if(this.hammer!==undefined){this.hammer.destroy();this.hammer=undefined}this.container=t;this.container.appendChild(this.frame);this._bindHammer();this._setSize()}},{key:"setUpdateCallback",value:function e(t){if(typeof t==="function"){this.updateCallback=t}else{throw new Error("Function attempted to set as colorPicker update callback is not a function.")}}},{key:"setCloseCallback",value:function e(t){if(typeof t==="function"){this.closeCallback=t}else{throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}}},{key:"_isColorString",value:function e(t){var i={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};if(typeof t==="string"){return i[t]}}},{key:"setColor",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(t==="none"){return}var n=void 0;var r=this._isColorString(t);if(r!==undefined){t=r}if(f.isString(t)===true){if(f.isValidRGB(t)===true){var o=t.substr(4).substr(0,t.length-5).split(",");n={r:o[0],g:o[1],b:o[2],a:1}}else if(f.isValidRGBA(t)===true){var a=t.substr(5).substr(0,t.length-6).split(",");n={r:a[0],g:a[1],b:a[2],a:a[3]}}else if(f.isValidHex(t)===true){var l=f.hexToRGB(t);n={r:l.r,g:l.g,b:l.b,a:1}}}else{if(t instanceof Object){if(t.r!==undefined&&t.g!==undefined&&t.b!==undefined){var h=t.a!==undefined?t.a:"1.0";n={r:t.r,g:t.g,b:t.b,a:h}}}}if(n===undefined){throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+(0,s["default"])(t))}else{this._setColor(n,i)}}},{key:"show",value:function e(){if(this.closeCallback!==undefined){this.closeCallback();this.closeCallback=undefined}this.applied=false;this.frame.style.display="block";this._generateHueCircle()}},{key:"_hide",value:function e(){var t=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(i===true){this.previousColor=f.extend({},this.color)}if(this.applied===true){this.updateCallback(this.initialColor)}this.frame.style.display="none";setTimeout(function(){if(t.closeCallback!==undefined){t.closeCallback();t.closeCallback=undefined}},0)}},{key:"_save",value:function e(){this.updateCallback(this.color);this.applied=false;this._hide()}},{key:"_apply",value:function e(){this.applied=true;this.updateCallback(this.color);this._updatePicker(this.color)}},{key:"_loadLast",value:function e(){if(this.previousColor!==undefined){this.setColor(this.previousColor,false)}else{alert("There is no last color to load...")}}},{key:"_setColor",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(i===true){this.initialColor=f.extend({},t)}this.color=t;var n=f.RGBToHSV(t.r,t.g,t.b);var s=2*Math.PI;var r=this.r*n.s;var o=this.centerCoordinates.x+r*Math.sin(s*n.h);var a=this.centerCoordinates.y+r*Math.cos(s*n.h);this.colorPickerSelector.style.left=o-.5*this.colorPickerSelector.clientWidth+"px";this.colorPickerSelector.style.top=a-.5*this.colorPickerSelector.clientHeight+"px";this._updatePicker(t)}},{key:"_setOpacity",value:function e(t){this.color.a=t/100;this._updatePicker(this.color)}},{key:"_setBrightness",value:function e(t){var i=f.RGBToHSV(this.color.r,this.color.g,this.color.b);i.v=t/100;var n=f.HSVToRGB(i.h,i.s,i.v);n["a"]=this.color.a;this.color=n;this._updatePicker()}},{key:"_updatePicker",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.color;var i=f.RGBToHSV(t.r,t.g,t.b);var n=this.colorPickerCanvas.getContext("2d");if(this.pixelRation===undefined){this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)}n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var s=this.colorPickerCanvas.clientWidth;var r=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,s,r);n.putImageData(this.hueCircle,0,0);n.fillStyle="rgba(0,0,0,"+(1-i.v)+")";n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r);n.fill();this.brightnessRange.value=100*i.v;this.opacityRange.value=100*t.a;this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")";this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function e(){this.colorPickerCanvas.style.width="100%";this.colorPickerCanvas.style.height="100%";this.colorPickerCanvas.width=289*this.pixelRatio;this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function e(){this.frame=document.createElement("div");this.frame.className="vis-color-picker";this.colorPickerDiv=document.createElement("div");this.colorPickerSelector=document.createElement("div");this.colorPickerSelector.className="vis-selector";this.colorPickerDiv.appendChild(this.colorPickerSelector);this.colorPickerCanvas=document.createElement("canvas");this.colorPickerDiv.appendChild(this.colorPickerCanvas);if(!this.colorPickerCanvas.getContext){var t=document.createElement("DIV");t.style.color="red";t.style.fontWeight="bold";t.style.padding="10px";t.innerHTML="Error: your browser does not support HTML canvas";this.colorPickerCanvas.appendChild(t)}else{var i=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1);this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}this.colorPickerDiv.className="vis-color";this.opacityDiv=document.createElement("div");this.opacityDiv.className="vis-opacity";this.brightnessDiv=document.createElement("div");this.brightnessDiv.className="vis-brightness";this.arrowDiv=document.createElement("div");this.arrowDiv.className="vis-arrow";this.opacityRange=document.createElement("input");try{this.opacityRange.type="range";this.opacityRange.min="0";this.opacityRange.max="100"}catch(e){}this.opacityRange.value="100";this.opacityRange.className="vis-range";this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range";this.brightnessRange.min="0";this.brightnessRange.max="100"}catch(e){}this.brightnessRange.value="100";this.brightnessRange.className="vis-range";this.opacityDiv.appendChild(this.opacityRange);this.brightnessDiv.appendChild(this.brightnessRange);var n=this;this.opacityRange.onchange=function(){n._setOpacity(this.value)};this.opacityRange.oninput=function(){n._setOpacity(this.value)};this.brightnessRange.onchange=function(){n._setBrightness(this.value)};this.brightnessRange.oninput=function(){n._setBrightness(this.value)};this.brightnessLabel=document.createElement("div");this.brightnessLabel.className="vis-label vis-brightness";this.brightnessLabel.innerHTML="brightness:";this.opacityLabel=document.createElement("div");this.opacityLabel.className="vis-label vis-opacity";this.opacityLabel.innerHTML="opacity:";this.newColorDiv=document.createElement("div");this.newColorDiv.className="vis-new-color";this.newColorDiv.innerHTML="new";this.initialColorDiv=document.createElement("div");this.initialColorDiv.className="vis-initial-color";this.initialColorDiv.innerHTML="initial";this.cancelButton=document.createElement("div");this.cancelButton.className="vis-button vis-cancel";this.cancelButton.innerHTML="cancel";this.cancelButton.onclick=this._hide.bind(this,false);this.applyButton=document.createElement("div");this.applyButton.className="vis-button vis-apply";this.applyButton.innerHTML="apply";this.applyButton.onclick=this._apply.bind(this);this.saveButton=document.createElement("div");this.saveButton.className="vis-button vis-save";this.saveButton.innerHTML="save";this.saveButton.onclick=this._save.bind(this);this.loadButton=document.createElement("div");this.loadButton.className="vis-button vis-load";this.loadButton.innerHTML="load last";this.loadButton.onclick=this._loadLast.bind(this);this.frame.appendChild(this.colorPickerDiv);this.frame.appendChild(this.arrowDiv);this.frame.appendChild(this.brightnessLabel);this.frame.appendChild(this.brightnessDiv);this.frame.appendChild(this.opacityLabel);this.frame.appendChild(this.opacityDiv);this.frame.appendChild(this.newColorDiv);this.frame.appendChild(this.initialColorDiv);this.frame.appendChild(this.cancelButton);this.frame.appendChild(this.applyButton);this.frame.appendChild(this.saveButton);this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function e(){var t=this;this.drag={};this.pinch={};this.hammer=new d(this.colorPickerCanvas);this.hammer.get("pinch").set({enable:true});u.onTouch(this.hammer,function(e){t._moveSelector(e)});this.hammer.on("tap",function(e){t._moveSelector(e)});this.hammer.on("panstart",function(e){t._moveSelector(e)});this.hammer.on("panmove",function(e){t._moveSelector(e)});this.hammer.on("panend",function(e){t._moveSelector(e)})}},{key:"_generateHueCircle",value:function e(){if(this.generated===false){var t=this.colorPickerCanvas.getContext("2d");if(this.pixelRation===undefined){this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var i=this.colorPickerCanvas.clientWidth;var n=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,i,n);var s=void 0,r=void 0,o=void 0,a=void 0;this.centerCoordinates={x:i*.5,y:n*.5};this.r=.49*i;var l=2*Math.PI/360;var h=1/360;var d=1/this.r;var u=void 0;for(o=0;o<360;o++){for(a=0;a<this.r;a++){s=this.centerCoordinates.x+a*Math.sin(l*o);r=this.centerCoordinates.y+a*Math.cos(l*o);u=f.HSVToRGB(o*h,a*d,1);t.fillStyle="rgb("+u.r+","+u.g+","+u.b+")";t.fillRect(s-.5,r-.5,2,2)}}t.strokeStyle="rgba(0,0,0,1)";t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r);t.stroke();this.hueCircle=t.getImageData(0,0,i,n)}this.generated=true}},{key:"_moveSelector",value:function e(t){var i=this.colorPickerDiv.getBoundingClientRect();var n=t.center.x-i.left;var s=t.center.y-i.top;var r=.5*this.colorPickerDiv.clientHeight;var o=.5*this.colorPickerDiv.clientWidth;var a=n-o;var l=s-r;var h=Math.atan2(a,l);var d=.98*Math.min(Math.sqrt(a*a+l*l),o);var u=Math.cos(h)*d+r;var c=Math.sin(h)*d+o;this.colorPickerSelector.style.top=u-.5*this.colorPickerSelector.clientHeight+"px";this.colorPickerSelector.style.left=c-.5*this.colorPickerSelector.clientWidth+"px";var p=h/(2*Math.PI);p=p<0?p+1:p;var m=d/this.r;var v=f.RGBToHSV(this.color.r,this.color.g,this.color.b);v.h=p;v.s=m;var g=f.HSVToRGB(v.h,v.s,v.v);g["a"]=this.color.a;this.color=g;this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")";this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]);return e}();t["default"]=c},function(e,t,i){"use strict";var n=i(99);var s=i(112);var r=i(82);var o=i(1);var a=i(89);var l=i(93);var h=i(118);var d=i(122);var u=i(139);var f=i(143);var c=i(141);var p=i(149);var m=i(144).printStyle;var v=i(157).allOptions;var g=i(157).configureOptions;var y=i(146)["default"];var b=i(144)["default"];function w(e,t,i,n){if(!(Array.isArray(i)||i instanceof a||i instanceof l)&&i instanceof Object){var s=n;n=i;i=s}if(n&&n.throttleRedraw){console.warn('Graph2d option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.')}var d=this;this.defaultOptions={start:null,end:null,autoResize:true,orientation:{axis:"bottom",item:"bottom"},moment:r,width:null,height:null,maxHeight:null,minHeight:null};this.options=o.deepExtend({},this.defaultOptions);this._create(e);this.components=[];this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{toScreen:d._toScreen.bind(d),toGlobalScreen:d._toGlobalScreen.bind(d),toTime:d._toTime.bind(d),toGlobalTime:d._toGlobalTime.bind(d)}};this.range=new h(this.body);this.components.push(this.range);this.body.range=this.range;this.timeAxis=new u(this.body);this.components.push(this.timeAxis);this.currentTime=new f(this.body);this.components.push(this.currentTime);this.linegraph=new p(this.body);this.components.push(this.linegraph);this.itemsData=null;this.groupsData=null;this.on("tap",function(e){d.emit("click",d.getEventProperties(e))});this.on("doubletap",function(e){d.emit("doubleClick",d.getEventProperties(e))});this.dom.root.oncontextmenu=function(e){d.emit("contextmenu",d.getEventProperties(e))};if(n){this.setOptions(n)}if(i){this.setGroups(i)}if(t){this.setItems(t)}this._redraw()}w.prototype=new d;w.prototype.setOptions=function(e){var t=b.validate(e,v);if(t===true){console.log("%cErrors have been found in the supplied options object.",m)}d.prototype.setOptions.call(this,e)};w.prototype.setItems=function(e){var t=this.itemsData==null;var i;if(!e){i=null}else if(e instanceof a||e instanceof l){i=e}else{i=new a(e,{type:{start:"Date",end:"Date"}})}this.itemsData=i;this.linegraph&&this.linegraph.setItems(i);if(t){if(this.options.start!=undefined||this.options.end!=undefined){var n=this.options.start!=undefined?this.options.start:null;var s=this.options.end!=undefined?this.options.end:null;
this.setWindow(n,s,{animation:false})}else{this.fit({animation:false})}}};w.prototype.setGroups=function(e){var t;if(!e){t=null}else if(e instanceof a||e instanceof l){t=e}else{t=new a(e)}this.groupsData=t;this.linegraph.setGroups(t)};w.prototype.getLegend=function(e,t,i){if(t===undefined){t=15}if(i===undefined){i=15}if(this.linegraph.groups[e]!==undefined){return this.linegraph.groups[e].getLegend(t,i)}else{return"cannot find group:'"+e+"'"}};w.prototype.isGroupVisible=function(e){if(this.linegraph.groups[e]!==undefined){return this.linegraph.groups[e].visible&&(this.linegraph.options.groups.visibility[e]===undefined||this.linegraph.options.groups.visibility[e]==true)}else{return false}};w.prototype.getDataRange=function(){var e=null;var t=null;for(var i in this.linegraph.groups){if(this.linegraph.groups.hasOwnProperty(i)){if(this.linegraph.groups[i].visible==true){for(var n=0;n<this.linegraph.groups[i].itemsData.length;n++){var s=this.linegraph.groups[i].itemsData[n];var r=o.convert(s.x,"Date").valueOf();e=e==null?r:e>r?r:e;t=t==null?r:t<r?r:t}}}}return{min:e!=null?new Date(e):null,max:t!=null?new Date(t):null}};w.prototype.getEventProperties=function(e){var t=e.center?e.center.x:e.clientX;var i=e.center?e.center.y:e.clientY;var n=t-o.getAbsoluteLeft(this.dom.centerContainer);var s=i-o.getAbsoluteTop(this.dom.centerContainer);var r=this._toTime(n);var a=c.customTimeFromTarget(e);var l=o.getTarget(e);var h=null;if(o.hasParent(l,this.timeAxis.dom.foreground)){h="axis"}else if(this.timeAxis2&&o.hasParent(l,this.timeAxis2.dom.foreground)){h="axis"}else if(o.hasParent(l,this.linegraph.yAxisLeft.dom.frame)){h="data-axis"}else if(o.hasParent(l,this.linegraph.yAxisRight.dom.frame)){h="data-axis"}else if(o.hasParent(l,this.linegraph.legendLeft.dom.frame)){h="legend"}else if(o.hasParent(l,this.linegraph.legendRight.dom.frame)){h="legend"}else if(a!=null){h="custom-time"}else if(o.hasParent(l,this.currentTime.bar)){h="current-time"}else if(o.hasParent(l,this.dom.center)){h="background"}var d=[];var u=this.linegraph.yAxisLeft;var f=this.linegraph.yAxisRight;if(!u.hidden&&this.itemsData.length>0){d.push(u.screenToValue(s))}if(!f.hidden&&this.itemsData.length>0){d.push(f.screenToValue(s))}return{event:e,what:h,pageX:e.srcEvent?e.srcEvent.pageX:e.pageX,pageY:e.srcEvent?e.srcEvent.pageY:e.pageY,x:n,y:s,time:r,value:d}};w.prototype._createConfigurator=function(){return new y(this,this.dom.container,g)};e.exports=w},function(e,t,i){"use strict";var n=i(62);var s=r(n);function r(e){return e&&e.__esModule?e:{default:e}}var o=i(1);var a=i(88);var l=i(89);var h=i(93);var d=i(120);var u=i(150);var f=i(152);var c=i(156);var p=i(153);var m=i(155);var v=i(154);var g="__ungrouped__";function y(e,t){this.id=o.randomUUID();this.body=e;this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:true,sampling:true,stack:false,graphHeight:"400px",shaded:{enabled:false,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:false,align:"center"},interpolation:{enabled:true,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:true,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}};this.options=o.extend({},this.defaultOptions);this.dom={};this.props={};this.hammer=null;this.groups={};this.abortedGraphUpdate=false;this.updateSVGheight=false;this.updateSVGheightOnResize=false;this.forceGraphUpdate=true;var i=this;this.itemsData=null;this.groupsData=null;this.itemListeners={add:function e(t,n,s){i._onAdd(n.items)},update:function e(t,n,s){i._onUpdate(n.items)},remove:function e(t,n,s){i._onRemove(n.items)}};this.groupListeners={add:function e(t,n,s){i._onAddGroups(n.items)},update:function e(t,n,s){i._onUpdateGroups(n.items)},remove:function e(t,n,s){i._onRemoveGroups(n.items)}};this.items={};this.selection=[];this.lastStart=this.body.range.start;this.touchParams={};this.svgElements={};this.setOptions(t);this.groupsUsingDefaultStyles=[0];this.body.emitter.on("rangechanged",function(){i.lastStart=i.body.range.start;i.svg.style.left=o.option.asSize(-i.props.width);i.forceGraphUpdate=true;i.redraw.call(i)});this._create();this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}y.prototype=new d;y.prototype._create=function(){var e=document.createElement("div");e.className="vis-line-graph";this.dom.frame=e;this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg");this.svg.style.position="relative";this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px";this.svg.style.display="block";e.appendChild(this.svg);this.options.dataAxis.orientation="left";this.yAxisLeft=new u(this.body,this.options.dataAxis,this.svg,this.options.groups);this.options.dataAxis.orientation="right";this.yAxisRight=new u(this.body,this.options.dataAxis,this.svg,this.options.groups);delete this.options.dataAxis.orientation;this.legendLeft=new c(this.body,this.options.legend,"left",this.options.groups);this.legendRight=new c(this.body,this.options.legend,"right",this.options.groups);this.show()};y.prototype.setOptions=function(e){if(e){var t=["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"];if(e.graphHeight===undefined&&e.height!==undefined){this.updateSVGheight=true;this.updateSVGheightOnResize=true}else if(this.body.domProps.centerContainer.height!==undefined&&e.graphHeight!==undefined){if(parseInt((e.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height){this.updateSVGheight=true}}o.selectiveDeepExtend(t,this.options,e);o.mergeOptions(this.options,e,"interpolation");o.mergeOptions(this.options,e,"drawPoints");o.mergeOptions(this.options,e,"shaded");o.mergeOptions(this.options,e,"legend");if(e.interpolation){if((0,s["default"])(e.interpolation)=="object"){if(e.interpolation.parametrization){if(e.interpolation.parametrization=="uniform"){this.options.interpolation.alpha=0}else if(e.interpolation.parametrization=="chordal"){this.options.interpolation.alpha=1}else{this.options.interpolation.parametrization="centripetal";this.options.interpolation.alpha=.5}}}}if(this.yAxisLeft){if(e.dataAxis!==undefined){this.yAxisLeft.setOptions(this.options.dataAxis);this.yAxisRight.setOptions(this.options.dataAxis)}}if(this.legendLeft){if(e.legend!==undefined){this.legendLeft.setOptions(this.options.legend);this.legendRight.setOptions(this.options.legend)}}if(this.groups.hasOwnProperty(g)){this.groups[g].setOptions(e)}}if(this.dom.frame){this.forceGraphUpdate=true;this.body.emitter.emit("_change",{queue:true})}};y.prototype.hide=function(){if(this.dom.frame.parentNode){this.dom.frame.parentNode.removeChild(this.dom.frame)}};y.prototype.show=function(){if(!this.dom.frame.parentNode){this.body.dom.center.appendChild(this.dom.frame)}};y.prototype.setItems=function(e){var t=this,i,n=this.itemsData;if(!e){this.itemsData=null}else if(e instanceof l||e instanceof h){this.itemsData=e}else{throw new TypeError("Data must be an instance of DataSet or DataView")}if(n){o.forEach(this.itemListeners,function(e,t){n.off(t,e)});i=n.getIds();this._onRemove(i)}if(this.itemsData){var s=this.id;o.forEach(this.itemListeners,function(e,i){t.itemsData.on(i,e,s)});i=this.itemsData.getIds();this._onAdd(i)}};y.prototype.setGroups=function(e){var t=this;var i;if(this.groupsData){o.forEach(this.groupListeners,function(e,i){t.groupsData.off(i,e)});i=this.groupsData.getIds();this.groupsData=null;for(var n=0;n<i.length;n++){this._removeGroup(i[n])}}if(!e){this.groupsData=null}else if(e instanceof l||e instanceof h){this.groupsData=e}else{throw new TypeError("Data must be an instance of DataSet or DataView")}if(this.groupsData){var s=this.id;o.forEach(this.groupListeners,function(e,i){t.groupsData.on(i,e,s)});i=this.groupsData.getIds();this._onAddGroups(i)}};y.prototype._onUpdate=function(e){this._updateAllGroupData(e)};y.prototype._onAdd=function(e){this._onUpdate(e)};y.prototype._onRemove=function(e){this._onUpdate(e)};y.prototype._onUpdateGroups=function(e){this._updateAllGroupData(null,e)};y.prototype._onAddGroups=function(e){this._onUpdateGroups(e)};y.prototype._onRemoveGroups=function(e){for(var t=0;t<e.length;t++){this._removeGroup(e[t])}this.forceGraphUpdate=true;this.body.emitter.emit("_change",{queue:true})};y.prototype._removeGroup=function(e){if(this.groups.hasOwnProperty(e)){if(this.groups[e].options.yAxisOrientation=="right"){this.yAxisRight.removeGroup(e);this.legendRight.removeGroup(e);this.legendRight.redraw()}else{this.yAxisLeft.removeGroup(e);this.legendLeft.removeGroup(e);this.legendLeft.redraw()}delete this.groups[e]}};y.prototype._updateGroup=function(e,t){if(!this.groups.hasOwnProperty(t)){this.groups[t]=new f(e,t,this.options,this.groupsUsingDefaultStyles);if(this.groups[t].options.yAxisOrientation=="right"){this.yAxisRight.addGroup(t,this.groups[t]);this.legendRight.addGroup(t,this.groups[t])}else{this.yAxisLeft.addGroup(t,this.groups[t]);this.legendLeft.addGroup(t,this.groups[t])}}else{this.groups[t].update(e);if(this.groups[t].options.yAxisOrientation=="right"){this.yAxisRight.updateGroup(t,this.groups[t]);this.legendRight.updateGroup(t,this.groups[t]);this.yAxisLeft.removeGroup(t);this.legendLeft.removeGroup(t)}else{this.yAxisLeft.updateGroup(t,this.groups[t]);this.legendLeft.updateGroup(t,this.groups[t]);this.yAxisRight.removeGroup(t);this.legendRight.removeGroup(t)}}this.legendLeft.redraw();this.legendRight.redraw()};y.prototype._updateAllGroupData=function(e,t){if(this.itemsData!=null){var i={};var n=this.itemsData.get();var s=this.itemsData._fieldId;var r={};if(e){e.map(function(e){r[e]=e})}var a={};for(var l=0;l<n.length;l++){var h=n[l];var d=h.group;if(d===null||d===undefined){d=g}a.hasOwnProperty(d)?a[d]++:a[d]=1}var u={};if(!t&&e){for(var d in this.groups){if(this.groups.hasOwnProperty(d)){var f=this.groups[d];var c=f.getItems();i[d]=c.filter(function(e){u[e[s]]=e[s];return e[s]!==r[e[s]]});var p=a[d];a[d]-=i[d].length;if(i[d].length<p){i[d][p-1]={}}}}}for(var l=0;l<n.length;l++){var h=n[l];var d=h.group;if(d===null||d===undefined){d=g}if(!t&&e&&h[s]!==r[h[s]]&&u.hasOwnProperty(h[s])){continue}if(!i.hasOwnProperty(d)){i[d]=new Array(a[d])}var m=o.bridgeObject(h);m.x=o.convert(h.x,"Date");m.end=o.convert(h.end,"Date");m.orginalY=h.y;m.y=Number(h.y);m[s]=h[s];var v=i[d].length-a[d]--;i[d][v]=m}for(var d in this.groups){if(this.groups.hasOwnProperty(d)){if(!i.hasOwnProperty(d)){i[d]=new Array(0)}}}for(var d in i){if(i.hasOwnProperty(d)){if(i[d].length==0){if(this.groups.hasOwnProperty(d)){this._removeGroup(d)}}else{var f=undefined;if(this.groupsData!=undefined){f=this.groupsData.get(d)}if(f==undefined){f={id:d,content:this.options.defaultGroup+d}}this._updateGroup(f,d);this.groups[d].setItems(i[d])}}}this.forceGraphUpdate=true;this.body.emitter.emit("_change",{queue:true})}};y.prototype.redraw=function(){var e=false;this.props.width=this.dom.frame.offsetWidth;this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom;e=this._isResized()||e;var t=this.body.range.end-this.body.range.start;var i=t!=this.lastVisibleInterval;this.lastVisibleInterval=t;if(e==true){this.svg.style.width=o.option.asSize(3*this.props.width);this.svg.style.left=o.option.asSize(-this.props.width);if((this.options.height+"").indexOf("%")!=-1||this.updateSVGheightOnResize==true){this.updateSVGheight=true}}if(this.updateSVGheight==true){if(this.options.graphHeight!=this.props.height+"px"){this.options.graphHeight=this.props.height+"px";this.svg.style.height=this.props.height+"px"}this.updateSVGheight=false}else{this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px"}if(e==true||i==true||this.abortedGraphUpdate==true||this.forceGraphUpdate==true){e=this._updateGraph()||e;this.forceGraphUpdate=false}else{if(this.lastStart!=0){var n=this.body.range.start-this.lastStart;var s=this.body.range.end-this.body.range.start;if(this.props.width!=0){var r=this.props.width/s;var a=n*r;this.svg.style.left=-this.props.width-a+"px"}}}this.legendLeft.redraw();this.legendRight.redraw();return e};y.prototype._getSortedGroupIds=function(){var e=[];for(var t in this.groups){if(this.groups.hasOwnProperty(t)){var i=this.groups[t];if(i.visible==true&&(this.options.groups.visibility[t]===undefined||this.options.groups.visibility[t]==true)){e.push({id:t,zIndex:i.options.zIndex})}}}o.insertSort(e,function(e,t){var i=e.zIndex;var n=t.zIndex;if(i===undefined)i=0;if(n===undefined)n=0;return i==n?0:i<n?-1:1});var n=new Array(e.length);for(var s=0;s<e.length;s++){n[s]=e[s].id}return n};y.prototype._updateGraph=function(){a.prepareElements(this.svgElements);if(this.props.width!=0&&this.itemsData!=null){var e,t;var i={};var n=false;var s=this.body.util.toGlobalTime(-this.body.domProps.root.width);var r=this.body.util.toGlobalTime(2*this.body.domProps.root.width);var o=this._getSortedGroupIds();if(o.length>0){var l={};this._getRelevantData(o,l,s,r);this._applySampling(o,l);for(t=0;t<o.length;t++){this._convertXcoordinates(l[o[t]])}this._getYRanges(o,l,i);n=this._updateYAxis(o,i);if(n==true){a.cleanupElements(this.svgElements);this.abortedGraphUpdate=true;return true}this.abortedGraphUpdate=false;var h=undefined;for(t=0;t<o.length;t++){e=this.groups[o[t]];if(this.options.stack===true&&this.options.style==="line"){if(e.options.excludeFromStacking==undefined||!e.options.excludeFromStacking){if(h!=undefined){this._stack(l[e.id],l[h.id]);if(e.options.shaded.enabled==true&&e.options.shaded.orientation!=="group"){if(e.options.shaded.orientation=="top"&&h.options.shaded.orientation!=="group"){h.options.shaded.orientation="group";h.options.shaded.groupId=e.id}else{e.options.shaded.orientation="group";e.options.shaded.groupId=h.id}}}h=e}}this._convertYcoordinates(l[o[t]],e)}var d={};for(t=0;t<o.length;t++){e=this.groups[o[t]];if(e.options.style==="line"&&e.options.shaded.enabled==true){var u=l[o[t]];if(u==null||u.length==0){continue}if(!d.hasOwnProperty(o[t])){d[o[t]]=m.calcPath(u,e)}if(e.options.shaded.orientation==="group"){var f=e.options.shaded.groupId;if(o.indexOf(f)===-1){console.log(e.id+": Unknown shading group target given:"+f);continue}if(!d.hasOwnProperty(f)){d[f]=m.calcPath(l[f],this.groups[f])}m.drawShading(d[o[t]],e,d[f],this.framework)}else{m.drawShading(d[o[t]],e,undefined,this.framework)}}}p.draw(o,l,this.framework);for(t=0;t<o.length;t++){e=this.groups[o[t]];if(l[o[t]].length>0){switch(e.options.style){case"line":if(!d.hasOwnProperty(o[t])){d[o[t]]=m.calcPath(l[o[t]],e)}m.draw(d[o[t]],e,this.framework);case"point":case"points":if(e.options.style=="point"||e.options.style=="points"||e.options.drawPoints.enabled==true){v.draw(l[o[t]],e,this.framework)}break;case"bar":default:}}}}}a.cleanupElements(this.svgElements);return false};y.prototype._stack=function(e,t){var i,n,s,r,o;i=0;for(var a=0;a<e.length;a++){r=undefined;o=undefined;for(var l=i;l<t.length;l++){if(t[l].x===e[a].x){r=t[l];o=t[l];i=l;break}else if(t[l].x>e[a].x){o=t[l];if(l==0){r=o}else{r=t[l-1]}i=l;break}}if(o===undefined){r=t[t.length-1];o=t[t.length-1]}n=o.x-r.x;s=o.y-r.y;if(n==0){e[a].y=e[a].orginalY+o.y}else{e[a].y=e[a].orginalY+s/n*(e[a].x-r.x)+r.y}}};y.prototype._getRelevantData=function(e,t,i,n){var s,r,a,l;if(e.length>0){for(r=0;r<e.length;r++){s=this.groups[e[r]];var h=s.getItems();if(s.options.sort==true){var d=function e(t,i){return t.getTime()==i.getTime()?0:t<i?-1:1};var u=Math.max(0,o.binarySearchValue(h,i,"x","before",d));var f=Math.min(h.length,o.binarySearchValue(h,n,"x","after",d)+1);if(f<=0){f=h.length}var c=new Array(f-u);for(a=u;a<f;a++){l=s.itemsData[a];c[a-u]=l}t[e[r]]=c}else{t[e[r]]=s.itemsData}}}};y.prototype._applySampling=function(e,t){var i;if(e.length>0){for(var n=0;n<e.length;n++){i=this.groups[e[n]];if(i.options.sampling==true){var s=t[e[n]];if(s.length>0){var r=1;var o=s.length;var a=this.body.util.toGlobalScreen(s[s.length-1].x)-this.body.util.toGlobalScreen(s[0].x);var l=o/a;r=Math.min(Math.ceil(.2*o),Math.max(1,Math.round(l)));var h=new Array(o);for(var d=0;d<o;d+=r){var u=Math.round(d/r);h[u]=s[d]}t[e[n]]=h.splice(0,Math.round(o/r))}}}}};y.prototype._getYRanges=function(e,t,i){var n,s,r;var o=[];var a=[];var l;if(e.length>0){for(r=0;r<e.length;r++){n=t[e[r]];l=this.groups[e[r]].options;if(n.length>0){s=this.groups[e[r]];if(l.stack===true&&l.style==="bar"){if(l.yAxisOrientation==="left"){o=o.concat(n)}else{a=a.concat(n)}}else{i[e[r]]=s.getYRange(n,e[r])}}}p.getStackedYRange(o,i,e,"__barStackLeft","left");p.getStackedYRange(a,i,e,"__barStackRight","right")}};y.prototype._updateYAxis=function(e,t){var i=false;var n=false;var s=false;var r=1e9,o=1e9,a=-1e9,l=-1e9,h,d;if(e.length>0){for(var u=0;u<e.length;u++){var f=this.groups[e[u]];if(f&&f.options.yAxisOrientation!="right"){n=true;r=1e9;a=-1e9}else if(f&&f.options.yAxisOrientation){s=true;o=1e9;l=-1e9}}for(var u=0;u<e.length;u++){if(t.hasOwnProperty(e[u])){if(t[e[u]].ignore!==true){h=t[e[u]].min;d=t[e[u]].max;if(t[e[u]].yAxisOrientation!="right"){n=true;r=r>h?h:r;a=a<d?d:a}else{s=true;o=o>h?h:o;l=l<d?d:l}}}}if(n==true){this.yAxisLeft.setRange(r,a)}if(s==true){this.yAxisRight.setRange(o,l)}}i=this._toggleAxisVisiblity(n,this.yAxisLeft)||i;i=this._toggleAxisVisiblity(s,this.yAxisRight)||i;if(s==true&&n==true){this.yAxisLeft.drawIcons=true;this.yAxisRight.drawIcons=true}else{this.yAxisLeft.drawIcons=false;this.yAxisRight.drawIcons=false}this.yAxisRight.master=!n;this.yAxisRight.masterAxis=this.yAxisLeft;if(this.yAxisRight.master==false){if(s==true){this.yAxisLeft.lineOffset=this.yAxisRight.width}else{this.yAxisLeft.lineOffset=0}i=this.yAxisLeft.redraw()||i;i=this.yAxisRight.redraw()||i}else{i=this.yAxisRight.redraw()||i}var c=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(var u=0;u<c.length;u++){if(e.indexOf(c[u])!=-1){e.splice(e.indexOf(c[u]),1)}}return i};y.prototype._toggleAxisVisiblity=function(e,t){var i=false;if(e==false){if(t.dom.frame.parentNode&&t.hidden==false){t.hide();i=true}}else{if(!t.dom.frame.parentNode&&t.hidden==true){t.show();i=true}}return i};y.prototype._convertXcoordinates=function(e){var t=this.body.util.toScreen;for(var i=0;i<e.length;i++){e[i].screen_x=t(e[i].x)+this.props.width;e[i].screen_y=e[i].y;if(e[i].end!=undefined){e[i].screen_end=t(e[i].end)+this.props.width}else{e[i].screen_end=undefined}}};y.prototype._convertYcoordinates=function(e,t){var i=this.yAxisLeft;var n=Number(this.svg.style.height.replace("px",""));if(t.options.yAxisOrientation=="right"){i=this.yAxisRight}for(var s=0;s<e.length;s++){e[s].screen_y=Math.round(i.convertValue(e[s].y))}t.setZeroPosition(Math.min(n,i.convertValue(0)))};e.exports=y},function(e,t,i){"use strict";var n=i(58);var s=r(n);function r(e){return e&&e.__esModule?e:{default:e}}var o=i(1);var a=i(88);var l=i(120);var h=i(151);function d(e,t,i,n){this.id=o.randomUUID();this.body=e;this.defaultOptions={orientation:"left",showMinorLabels:true,showMajorLabels:true,icons:false,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:true,alignZeros:true,left:{range:{min:undefined,max:undefined},format:function e(t){return""+parseFloat(t.toPrecision(3))},title:{text:undefined,style:undefined}},right:{range:{min:undefined,max:undefined},format:function e(t){return""+parseFloat(t.toPrecision(3))},title:{text:undefined,style:undefined}}};this.linegraphOptions=n;this.linegraphSVG=i;this.props={};this.DOMelements={lines:{},labels:{},title:{}};this.dom={};this.scale=undefined;this.range={start:0,end:0};this.options=o.extend({},this.defaultOptions);this.conversionFactor=1;this.setOptions(t);this.width=Number((""+this.options.width).replace("px",""));this.minWidth=this.width;this.height=this.linegraphSVG.getBoundingClientRect().height;this.hidden=false;this.stepPixels=25;this.zeroCrossing=-1;this.amountOfSteps=-1;this.lineOffset=0;this.master=true;this.masterAxis=null;this.svgElements={};this.iconsRemoved=false;this.groups={};this.amountOfGroups=0;this._create();this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};var s=this;this.body.emitter.on("verticalDrag",function(){s.dom.lineContainer.style.top=s.body.domProps.scrollTop+"px"})}d.prototype=new l;d.prototype.addGroup=function(e,t){if(!this.groups.hasOwnProperty(e)){this.groups[e]=t}this.amountOfGroups+=1};d.prototype.updateGroup=function(e,t){if(!this.groups.hasOwnProperty(e)){this.amountOfGroups+=1}this.groups[e]=t};d.prototype.removeGroup=function(e){if(this.groups.hasOwnProperty(e)){delete this.groups[e];this.amountOfGroups-=1}};d.prototype.setOptions=function(e){if(e){var t=false;if(this.options.orientation!=e.orientation&&e.orientation!==undefined){t=true}var i=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"];o.selectiveDeepExtend(i,this.options,e);this.minWidth=Number((""+this.options.width).replace("px",""));if(t===true&&this.dom.frame){this.hide();this.show()}}};d.prototype._create=function(){this.dom.frame=document.createElement("div");this.dom.frame.style.width=this.options.width;this.dom.frame.style.height=this.height;this.dom.lineContainer=document.createElement("div");this.dom.lineContainer.style.width="100%";this.dom.lineContainer.style.height=this.height;this.dom.lineContainer.style.position="relative";this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg");this.svg.style.position="absolute";this.svg.style.top="0px";this.svg.style.height="100%";this.svg.style.width="100%";this.svg.style.display="block";this.dom.frame.appendChild(this.svg)};d.prototype._redrawGroupIcons=function(){a.prepareElements(this.svgElements);var e;var t=this.options.iconWidth;var i=15;var n=4;var r=n+.5*i;if(this.options.orientation==="left"){e=n}else{e=this.width-t-n}var o=(0,s["default"])(this.groups);o.sort(function(e,t){return e<t?-1:1});for(var l=0;l<o.length;l++){var h=o[l];if(this.groups[h].visible===true&&(this.linegraphOptions.visibility[h]===undefined||this.linegraphOptions.visibility[h]===true)){this.groups[h].getLegend(t,i,this.framework,e,r);r+=i+n}}a.cleanupElements(this.svgElements);this.iconsRemoved=false};d.prototype._cleanupIcons=function(){if(this.iconsRemoved===false){a.prepareElements(this.svgElements);a.cleanupElements(this.svgElements);this.iconsRemoved=true}};d.prototype.show=function(){this.hidden=false;if(!this.dom.frame.parentNode){if(this.options.orientation==="left"){this.body.dom.left.appendChild(this.dom.frame)}else{this.body.dom.right.appendChild(this.dom.frame)}}if(!this.dom.lineContainer.parentNode){this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer)}};d.prototype.hide=function(){this.hidden=true;if(this.dom.frame.parentNode){this.dom.frame.parentNode.removeChild(this.dom.frame)}if(this.dom.lineContainer.parentNode){this.dom.lineContainer.parentNode.removeChild(this.dom.lineContainer)}};d.prototype.setRange=function(e,t){this.range.start=e;this.range.end=t};d.prototype.redraw=function(){var e=false;var t=0;this.dom.lineContainer.style.top=this.body.domProps.scrollTop+"px";for(var i in this.groups){if(this.groups.hasOwnProperty(i)){if(this.groups[i].visible===true&&(this.linegraphOptions.visibility[i]===undefined||this.linegraphOptions.visibility[i]===true)){t++}}}if(this.amountOfGroups===0||t===0){this.hide()}else{this.show();this.height=Number(this.linegraphSVG.style.height.replace("px",""));this.dom.lineContainer.style.height=this.height+"px";this.width=this.options.visible===true?Number((""+this.options.width).replace("px","")):0;var n=this.props;var s=this.dom.frame;s.className="vis-data-axis";this._calculateCharSize();var r=this.options.orientation;var o=this.options.showMinorLabels;var a=this.options.showMajorLabels;n.minorLabelHeight=o?n.minorCharHeight:0;n.majorLabelHeight=a?n.majorCharHeight:0;n.minorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.minorLinesOffset;n.minorLineHeight=1;n.majorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.majorLinesOffset;n.majorLineHeight=1;if(r==="left"){s.style.top="0";s.style.left="0";s.style.bottom="";s.style.width=this.width+"px";s.style.height=this.height+"px";this.props.width=this.body.domProps.left.width;this.props.height=this.body.domProps.left.height}else{s.style.top="";s.style.bottom="0";s.style.left="0";s.style.width=this.width+"px";s.style.height=this.height+"px";this.props.width=this.body.domProps.right.width;this.props.height=this.body.domProps.right.height}e=this._redrawLabels();e=this._isResized()||e;if(this.options.icons===true){this._redrawGroupIcons()}else{this._cleanupIcons()}this._redrawTitle(r)}return e};d.prototype._redrawLabels=function(){var e=this;var t=false;a.prepareElements(this.DOMelements.lines);a.prepareElements(this.DOMelements.labels);var i=this.options["orientation"];var n=this.options[i].range!=undefined?this.options[i].range:{};var s=true;if(n.max!=undefined){this.range.end=n.max;s=false}var r=true;if(n.min!=undefined){this.range.start=n.min;r=false}this.scale=new h(this.range.start,this.range.end,r,s,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[i].format);if(this.master===false&&this.masterAxis!=undefined){this.scale.followScale(this.masterAxis.scale)}this.maxLabelSize=0;var o=this.scale.getLines();o.forEach(function(t){var n=t.y;var s=t.major;if(e.options["showMinorLabels"]&&s===false){e._redrawLabel(n-2,t.val,i,"vis-y-axis vis-minor",e.props.minorCharHeight)}if(s){if(n>=0){e._redrawLabel(n-2,t.val,i,"vis-y-axis vis-major",e.props.majorCharHeight)}}if(e.master===true){if(s){e._redrawLine(n,i,"vis-grid vis-horizontal vis-major",e.options.majorLinesOffset,e.props.majorLineWidth)}else{e._redrawLine(n,i,"vis-grid vis-horizontal vis-minor",e.options.minorLinesOffset,e.props.minorLineWidth)}}});var l=0;if(this.options[i].title!==undefined&&this.options[i].title.text!==undefined){l=this.props.titleCharHeight}var d=this.options.icons===true?Math.max(this.options.iconWidth,l)+this.options.labelOffsetX+15:l+this.options.labelOffsetX+15;if(this.maxLabelSize>this.width-d&&this.options.visible===true){this.width=this.maxLabelSize+d;this.options.width=this.width+"px";a.cleanupElements(this.DOMelements.lines);a.cleanupElements(this.DOMelements.labels);this.redraw();t=true}else if(this.maxLabelSize<this.width-d&&this.options.visible===true&&this.width>this.minWidth){this.width=Math.max(this.minWidth,this.maxLabelSize+d);this.options.width=this.width+"px";a.cleanupElements(this.DOMelements.lines);a.cleanupElements(this.DOMelements.labels);this.redraw();t=true}else{a.cleanupElements(this.DOMelements.lines);a.cleanupElements(this.DOMelements.labels);t=false}return t};d.prototype.convertValue=function(e){return this.scale.convertValue(e)};d.prototype.screenToValue=function(e){return this.scale.screenToValue(e)};d.prototype._redrawLabel=function(e,t,i,n,s){var r=a.getDOMElement("div",this.DOMelements.labels,this.dom.frame);r.className=n;r.innerHTML=t;if(i==="left"){r.style.left="-"+this.options.labelOffsetX+"px";r.style.textAlign="right"}else{r.style.right="-"+this.options.labelOffsetX+"px";r.style.textAlign="left"}r.style.top=e-.5*s+this.options.labelOffsetY+"px";t+="";var o=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);if(this.maxLabelSize<t.length*o){this.maxLabelSize=t.length*o}};d.prototype._redrawLine=function(e,t,i,n,s){if(this.master===true){var r=a.getDOMElement("div",this.DOMelements.lines,this.dom.lineContainer);r.className=i;r.innerHTML="";if(t==="left"){r.style.left=this.width-n+"px"}else{r.style.right=this.width-n+"px"}r.style.width=s+"px";r.style.top=e+"px"}};d.prototype._redrawTitle=function(e){a.prepareElements(this.DOMelements.title);if(this.options[e].title!==undefined&&this.options[e].title.text!==undefined){var t=a.getDOMElement("div",this.DOMelements.title,this.dom.frame);t.className="vis-y-axis vis-title vis-"+e;t.innerHTML=this.options[e].title.text;if(this.options[e].title.style!==undefined){o.addCssText(t,this.options[e].title.style)}if(e==="left"){t.style.left=this.props.titleCharHeight+"px"}else{t.style.right=this.props.titleCharHeight+"px"}t.style.width=this.height+"px"}a.cleanupElements(this.DOMelements.title)};d.prototype._calculateCharSize=function(){if(!("minorCharHeight"in this.props)){var e=document.createTextNode("0");var t=document.createElement("div");t.className="vis-y-axis vis-minor vis-measure";t.appendChild(e);this.dom.frame.appendChild(t);this.props.minorCharHeight=t.clientHeight;this.props.minorCharWidth=t.clientWidth;this.dom.frame.removeChild(t)}if(!("majorCharHeight"in this.props)){var i=document.createTextNode("0");var n=document.createElement("div");n.className="vis-y-axis vis-major vis-measure";n.appendChild(i);this.dom.frame.appendChild(n);this.props.majorCharHeight=n.clientHeight;this.props.majorCharWidth=n.clientWidth;this.dom.frame.removeChild(n)}if(!("titleCharHeight"in this.props)){var s=document.createTextNode("0");var r=document.createElement("div");r.className="vis-y-axis vis-title vis-measure";r.appendChild(s);this.dom.frame.appendChild(r);this.props.titleCharHeight=r.clientHeight;this.props.titleCharWidth=r.clientWidth;this.dom.frame.removeChild(r)}};e.exports=d},function(e,t){"use strict";function i(e,t,i,n,s,r){var o=arguments.length>6&&arguments[6]!==undefined?arguments[6]:false;var a=arguments.length>7&&arguments[7]!==undefined?arguments[7]:false;this.majorSteps=[1,2,5,10];this.minorSteps=[.25,.5,1,2];this.customLines=null;this.containerHeight=s;this.majorCharHeight=r;this._start=e;this._end=t;this.scale=1;this.minorStepIdx=-1;this.magnitudefactor=1;this.determineScale();this.zeroAlign=o;this.autoScaleStart=i;this.autoScaleEnd=n;this.formattingFunction=a;if(i||n){var l=this;var h=function e(t){var i=t-t%(l.magnitudefactor*l.minorSteps[l.minorStepIdx]);if(t%(l.magnitudefactor*l.minorSteps[l.minorStepIdx])>.5*(l.magnitudefactor*l.minorSteps[l.minorStepIdx])){return i+l.magnitudefactor*l.minorSteps[l.minorStepIdx]}else{return i}};if(i){this._start-=this.magnitudefactor*2*this.minorSteps[this.minorStepIdx];this._start=h(this._start)}if(n){this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx];this._end=h(this._end)}this.determineScale()}}i.prototype.setCharHeight=function(e){this.majorCharHeight=e};i.prototype.setHeight=function(e){this.containerHeight=e};i.prototype.determineScale=function(){var e=this._end-this._start;this.scale=this.containerHeight/e;var t=this.majorCharHeight/this.scale;var i=e>0?Math.round(Math.log(e)/Math.LN10):0;this.minorStepIdx=-1;this.magnitudefactor=Math.pow(10,i);var n=0;if(i<0){n=i}var s=false;for(var r=n;Math.abs(r)<=Math.abs(i);r++){this.magnitudefactor=Math.pow(10,r);for(var o=0;o<this.minorSteps.length;o++){var a=this.magnitudefactor*this.minorSteps[o];if(a>=t){s=true;this.minorStepIdx=o;break}}if(s===true){break}}};i.prototype.is_major=function(e){return e%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])===0};i.prototype.getStep=function(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]};i.prototype.getFirstMajor=function(){var e=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(e-this._start%e)%e)};i.prototype.formatValue=function(e){var t=e.toPrecision(5);if(typeof this.formattingFunction==="function"){t=this.formattingFunction(e)}if(typeof t==="number"){return""+t}else if(typeof t==="string"){return t}else{return e.toPrecision(5)}};i.prototype.getLines=function(){var e=[];var t=this.getStep();var i=(t-this._start%t)%t;for(var n=this._start+i;this._end-n>1e-5;n+=t){if(n!=this._start){e.push({major:this.is_major(n),y:this.convertValue(n),val:this.formatValue(n)})}}return e};i.prototype.followScale=function(e){var t=this.minorStepIdx;var i=this._start;var n=this._end;var s=this;var r=function e(){s.magnitudefactor*=2};var o=function e(){s.magnitudefactor/=2};if(e.minorStepIdx<=1&&this.minorStepIdx<=1||e.minorStepIdx>1&&this.minorStepIdx>1){}else if(e.minorStepIdx<this.minorStepIdx){
this.minorStepIdx=1;if(t==2){r()}else{r();r()}}else{this.minorStepIdx=2;if(t==1){o()}else{o();o()}}var a=e.getLines();var l=e.convertValue(0);var h=e.getStep()*e.scale;var d=false;var u=0;while(!d&&u++<5){this.scale=h/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);var f=this.containerHeight/this.scale;this._start=i;this._end=this._start+f;var c=this._end*this.scale;var p=this.magnitudefactor*this.majorSteps[this.minorStepIdx];var m=this.getFirstMajor()-e.getFirstMajor();if(this.zeroAlign){var v=l-c;this._end+=v/this.scale;this._start=this._end-f}else{if(!this.autoScaleStart){this._start+=p-m/this.scale;this._end=this._start+f}else{this._start-=m/this.scale;this._end=this._start+f}}if(!this.autoScaleEnd&&this._end>n+1e-5){o();d=false;continue}if(!this.autoScaleStart&&this._start<i-1e-5){if(this.zeroAlign&&i>=0){console.warn("Can't adhere to given 'min' range, due to zeroalign")}else{o();d=false;continue}}if(this.autoScaleStart&&this.autoScaleEnd&&f<n-i){r();d=false;continue}d=true}};i.prototype.convertValue=function(e){return this.containerHeight-(e-this._start)*this.scale};i.prototype.screenToValue=function(e){return(this.containerHeight-e)/this.scale+this._start};e.exports=i},function(e,t,i){"use strict";var n=i(62);var s=r(n);function r(e){return e&&e.__esModule?e:{default:e}}var o=i(1);var a=i(88);var l=i(153);var h=i(155);var d=i(154);function u(e,t,i,n){this.id=t;var s=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"];this.options=o.selectiveBridgeObject(s,i);this.usingDefaultStyle=e.className===undefined;this.groupsUsingDefaultStyles=n;this.zeroPosition=0;this.update(e);if(this.usingDefaultStyle==true){this.groupsUsingDefaultStyles[0]+=1}this.itemsData=[];this.visible=e.visible===undefined?true:e.visible}u.prototype.setItems=function(e){if(e!=null){this.itemsData=e;if(this.options.sort==true){o.insertSort(this.itemsData,function(e,t){return e.x>t.x?1:-1})}}else{this.itemsData=[]}};u.prototype.getItems=function(){return this.itemsData};u.prototype.setZeroPosition=function(e){this.zeroPosition=e};u.prototype.setOptions=function(e){if(e!==undefined){var t=["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"];o.selectiveDeepExtend(t,this.options,e);if(typeof e.drawPoints=="function"){e.drawPoints={onRender:e.drawPoints}}o.mergeOptions(this.options,e,"interpolation");o.mergeOptions(this.options,e,"drawPoints");o.mergeOptions(this.options,e,"shaded");if(e.interpolation){if((0,s["default"])(e.interpolation)=="object"){if(e.interpolation.parametrization){if(e.interpolation.parametrization=="uniform"){this.options.interpolation.alpha=0}else if(e.interpolation.parametrization=="chordal"){this.options.interpolation.alpha=1}else{this.options.interpolation.parametrization="centripetal";this.options.interpolation.alpha=.5}}}}}};u.prototype.update=function(e){this.group=e;this.content=e.content||"graph";this.className=e.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10;this.visible=e.visible===undefined?true:e.visible;this.style=e.style;this.setOptions(e.options)};u.prototype.getLegend=function(e,t,i,n,s){if(i==undefined||i==null){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");i={svg:r,svgElements:{},options:this.options,groups:[this]}}if(n==undefined||n==null){n=0}if(s==undefined||s==null){s=.5*t}switch(this.options.style){case"line":h.drawIcon(this,n,s,e,t,i);break;case"points":case"point":d.drawIcon(this,n,s,e,t,i);break;case"bar":l.drawIcon(this,n,s,e,t,i);break}return{icon:i.svg,label:this.content,orientation:this.options.yAxisOrientation}};u.prototype.getYRange=function(e){var t=e[0].y;var i=e[0].y;for(var n=0;n<e.length;n++){t=t>e[n].y?e[n].y:t;i=i<e[n].y?e[n].y:i}return{min:t,max:i,yAxisOrientation:this.options.yAxisOrientation}};e.exports=u},function(e,t,i){"use strict";var n=i(88);var s=i(154);function r(e,t){}r.drawIcon=function(e,t,i,s,r,o){var a=r*.5;var l,h;var d=n.getSVGElement("rect",o.svgElements,o.svg);d.setAttributeNS(null,"x",t);d.setAttributeNS(null,"y",i-a);d.setAttributeNS(null,"width",s);d.setAttributeNS(null,"height",2*a);d.setAttributeNS(null,"class","vis-outline");var u=Math.round(.3*s);var f=e.options.barChart.width;var c=f/u;var p=Math.round(.4*r);var m=Math.round(.75*r);var v=Math.round((s-2*u)/3);n.drawBar(t+.5*u+v,i+a-p-1,u,p,e.className+" vis-bar",o.svgElements,o.svg,e.style);n.drawBar(t+1.5*u+v+2,i+a-m-1,u,m,e.className+" vis-bar",o.svgElements,o.svg,e.style);if(e.options.drawPoints.enabled==true){var g={style:e.options.drawPoints.style,styles:e.options.drawPoints.styles,size:e.options.drawPoints.size/c,className:e.className};n.drawPoint(t+.5*u+v,i+a-p-1,g,o.svgElements,o.svg);n.drawPoint(t+1.5*u+v+2,i+a-m-1,g,o.svgElements,o.svg)}};r.draw=function(e,t,i){var o=[];var a={};var l;var h,d;var u;var f,c;var p=0;for(f=0;f<e.length;f++){u=i.groups[e[f]];if(u.options.style==="bar"){if(u.visible===true&&(i.options.groups.visibility[e[f]]===undefined||i.options.groups.visibility[e[f]]===true)){for(c=0;c<t[e[f]].length;c++){o.push({screen_x:t[e[f]][c].screen_x,screen_end:t[e[f]][c].screen_end,screen_y:t[e[f]][c].screen_y,x:t[e[f]][c].x,end:t[e[f]][c].end,y:t[e[f]][c].y,groupId:e[f],label:t[e[f]][c].label});p+=1}}}}if(p===0){return}o.sort(function(e,t){if(e.screen_x===t.screen_x){return e.groupId<t.groupId?-1:1}else{return e.screen_x-t.screen_x}});r._getDataIntersections(a,o);for(f=0;f<o.length;f++){u=i.groups[o[f].groupId];var m=u.options.barChart.minWidth!=undefined?u.options.barChart.minWidth:.1*u.options.barChart.width;h=o[f].screen_x;var v=0;if(a[h]===undefined){if(f+1<o.length){l=Math.abs(o[f+1].screen_x-h)}d=r._getSafeDrawData(l,u,m)}else{var g=f+(a[h].amount-a[h].resolved);var y=f-(a[h].resolved+1);if(g<o.length){l=Math.abs(o[g].screen_x-h)}d=r._getSafeDrawData(l,u,m);a[h].resolved+=1;if(u.options.stack===true&&u.options.excludeFromStacking!==true){if(o[f].screen_y<u.zeroPosition){v=a[h].accumulatedNegative;a[h].accumulatedNegative+=u.zeroPosition-o[f].screen_y}else{v=a[h].accumulatedPositive;a[h].accumulatedPositive+=u.zeroPosition-o[f].screen_y}}else if(u.options.barChart.sideBySide===true){d.width=d.width/a[h].amount;d.offset+=a[h].resolved*d.width-.5*d.width*(a[h].amount+1)}}var b=d.width;var w=o[f].screen_x;if(o[f].screen_end!=undefined){b=o[f].screen_end-o[f].screen_x;w+=b*.5}else{w+=d.offset}n.drawBar(w,o[f].screen_y-v,b,u.zeroPosition-o[f].screen_y,u.className+" vis-bar",i.svgElements,i.svg,u.style);if(u.options.drawPoints.enabled===true){var _={screen_x:o[f].screen_x,screen_y:o[f].screen_y-v,x:o[f].x,y:o[f].y,groupId:o[f].groupId,label:o[f].label};s.draw([_],u,i,d.offset)}}};r._getDataIntersections=function(e,t){var i;for(var n=0;n<t.length;n++){if(n+1<t.length){i=Math.abs(t[n+1].screen_x-t[n].screen_x)}if(n>0){i=Math.min(i,Math.abs(t[n-1].screen_x-t[n].screen_x))}if(i===0){if(e[t[n].screen_x]===undefined){e[t[n].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}}e[t[n].screen_x].amount+=1}}};r._getSafeDrawData=function(e,t,i){var n,s;if(e<t.options.barChart.width&&e>0){n=e<i?i:e;s=0;if(t.options.barChart.align==="left"){s-=.5*e}else if(t.options.barChart.align==="right"){s+=.5*e}}else{n=t.options.barChart.width;s=0;if(t.options.barChart.align==="left"){s-=.5*t.options.barChart.width}else if(t.options.barChart.align==="right"){s+=.5*t.options.barChart.width}}return{width:n,offset:s}};r.getStackedYRange=function(e,t,i,n,s){if(e.length>0){e.sort(function(e,t){if(e.screen_x===t.screen_x){return e.groupId<t.groupId?-1:1}else{return e.screen_x-t.screen_x}});var o={};r._getDataIntersections(o,e);t[n]=r._getStackedYRange(o,e);t[n].yAxisOrientation=s;i.push(n)}};r._getStackedYRange=function(e,t){var i;var n=t[0].screen_y;var s=t[0].screen_y;for(var r=0;r<t.length;r++){i=t[r].screen_x;if(e[i]===undefined){n=n>t[r].screen_y?t[r].screen_y:n;s=s<t[r].screen_y?t[r].screen_y:s}else{if(t[r].screen_y<0){e[i].accumulatedNegative+=t[r].screen_y}else{e[i].accumulatedPositive+=t[r].screen_y}}}for(var o in e){if(e.hasOwnProperty(o)){n=n>e[o].accumulatedNegative?e[o].accumulatedNegative:n;n=n>e[o].accumulatedPositive?e[o].accumulatedPositive:n;s=s<e[o].accumulatedNegative?e[o].accumulatedNegative:s;s=s<e[o].accumulatedPositive?e[o].accumulatedPositive:s}}return{min:n,max:s}};e.exports=r},function(e,t,i){"use strict";var n=i(62);var s=r(n);function r(e){return e&&e.__esModule?e:{default:e}}var o=i(88);function a(e,t){}a.draw=function(e,t,i,n){n=n||0;var r=h(i,t);for(var a=0;a<e.length;a++){if(!r){o.drawPoint(e[a].screen_x+n,e[a].screen_y,l(t),i.svgElements,i.svg,e[a].label)}else{var d=r(e[a],t);if(d===true||(typeof d==="undefined"?"undefined":(0,s["default"])(d))==="object"){o.drawPoint(e[a].screen_x+n,e[a].screen_y,l(t,d),i.svgElements,i.svg,e[a].label)}}}};a.drawIcon=function(e,t,i,n,s,r){var a=s*.5;var h,d;var u=o.getSVGElement("rect",r.svgElements,r.svg);u.setAttributeNS(null,"x",t);u.setAttributeNS(null,"y",i-a);u.setAttributeNS(null,"width",n);u.setAttributeNS(null,"height",2*a);u.setAttributeNS(null,"class","vis-outline");o.drawPoint(t+.5*n,i,l(e),r.svgElements,r.svg)};function l(e,t){t=typeof t==="undefined"?{}:t;return{style:t.style||e.options.drawPoints.style,styles:t.styles||e.options.drawPoints.styles,size:t.size||e.options.drawPoints.size,className:t.className||e.className}}function h(e,t){var i=undefined;if(e.options&&e.options.drawPoints&&e.options.drawPoints.onRender&&typeof e.options.drawPoints.onRender=="function"){i=e.options.drawPoints.onRender}if(t.group.options&&t.group.options.drawPoints&&t.group.options.drawPoints.onRender&&typeof t.group.options.drawPoints.onRender=="function"){i=t.group.options.drawPoints.onRender}return i}e.exports=a},function(e,t,i){"use strict";var n=i(88);function s(e,t){}s.calcPath=function(e,t){if(e!=null){if(e.length>0){var i=[];if(t.options.interpolation.enabled==true){i=s._catmullRom(e,t)}else{i=s._linear(e)}return i}}};s.drawIcon=function(e,t,i,s,r,o){var a=r*.5;var l,h;var d=n.getSVGElement("rect",o.svgElements,o.svg);d.setAttributeNS(null,"x",t);d.setAttributeNS(null,"y",i-a);d.setAttributeNS(null,"width",s);d.setAttributeNS(null,"height",2*a);d.setAttributeNS(null,"class","vis-outline");l=n.getSVGElement("path",o.svgElements,o.svg);l.setAttributeNS(null,"class",e.className);if(e.style!==undefined){l.setAttributeNS(null,"style",e.style)}l.setAttributeNS(null,"d","M"+t+","+i+" L"+(t+s)+","+i+"");if(e.options.shaded.enabled==true){h=n.getSVGElement("path",o.svgElements,o.svg);if(e.options.shaded.orientation=="top"){h.setAttributeNS(null,"d","M"+t+", "+(i-a)+"L"+t+","+i+" L"+(t+s)+","+i+" L"+(t+s)+","+(i-a))}else{h.setAttributeNS(null,"d","M"+t+","+i+" "+"L"+t+","+(i+a)+" "+"L"+(t+s)+","+(i+a)+"L"+(t+s)+","+i)}h.setAttributeNS(null,"class",e.className+" vis-icon-fill");if(e.options.shaded.style!==undefined&&e.options.shaded.style!==""){h.setAttributeNS(null,"style",e.options.shaded.style)}}if(e.options.drawPoints.enabled==true){var u={style:e.options.drawPoints.style,styles:e.options.drawPoints.styles,size:e.options.drawPoints.size,className:e.className};n.drawPoint(t+.5*s,i,u,o.svgElements,o.svg)}};s.drawShading=function(e,t,i,s){if(t.options.shaded.enabled==true){var r=Number(s.svg.style.height.replace("px",""));var o=n.getSVGElement("path",s.svgElements,s.svg);var a="L";if(t.options.interpolation.enabled==true){a="C"}var l;var h=0;if(t.options.shaded.orientation=="top"){h=0}else if(t.options.shaded.orientation=="bottom"){h=r}else{h=Math.min(Math.max(0,t.zeroPosition),r)}if(t.options.shaded.orientation=="group"&&i!=null&&i!=undefined){l="M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,a,false)+" L"+i[i.length-1][0]+","+i[i.length-1][1]+" "+this.serializePath(i,a,true)+i[0][0]+","+i[0][1]+" Z"}else{l="M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,a,false)+" V"+h+" H"+e[0][0]+" Z"}o.setAttributeNS(null,"class",t.className+" vis-fill");if(t.options.shaded.style!==undefined){o.setAttributeNS(null,"style",t.options.shaded.style)}o.setAttributeNS(null,"d",l)}};s.draw=function(e,t,i){if(e!=null&&e!=undefined){var s=n.getSVGElement("path",i.svgElements,i.svg);s.setAttributeNS(null,"class",t.className);if(t.style!==undefined){s.setAttributeNS(null,"style",t.style)}var r="L";if(t.options.interpolation.enabled==true){r="C"}s.setAttributeNS(null,"d","M"+e[0][0]+","+e[0][1]+" "+this.serializePath(e,r,false))}};s.serializePath=function(e,t,i){if(e.length<2){return""}var n=t;if(i){for(var s=e.length-2;s>0;s--){n+=e[s][0]+","+e[s][1]+" "}}else{for(var s=1;s<e.length;s++){n+=e[s][0]+","+e[s][1]+" "}}return n};s._catmullRomUniform=function(e){var t,i,n,s,r,o;var a=[];a.push([Math.round(e[0].screen_x),Math.round(e[0].screen_y)]);var l=1/6;var h=e.length;for(var d=0;d<h-1;d++){t=d==0?e[0]:e[d-1];i=e[d];n=e[d+1];s=d+2<h?e[d+2]:n;r={screen_x:(-t.screen_x+6*i.screen_x+n.screen_x)*l,screen_y:(-t.screen_y+6*i.screen_y+n.screen_y)*l};o={screen_x:(i.screen_x+6*n.screen_x-s.screen_x)*l,screen_y:(i.screen_y+6*n.screen_y-s.screen_y)*l};a.push([r.screen_x,r.screen_y]);a.push([o.screen_x,o.screen_y]);a.push([n.screen_x,n.screen_y])}return a};s._catmullRom=function(e,t){var i=t.options.interpolation.alpha;if(i==0||i===undefined){return this._catmullRomUniform(e)}else{var n,s,r,o,a,l,h,d,u,f,c,p,m;var v,g,y,b,w,_;var x=[];x.push([Math.round(e[0].screen_x),Math.round(e[0].screen_y)]);var k=e.length;for(var C=0;C<k-1;C++){n=C==0?e[0]:e[C-1];s=e[C];r=e[C+1];o=C+2<k?e[C+2]:r;h=Math.sqrt(Math.pow(n.screen_x-s.screen_x,2)+Math.pow(n.screen_y-s.screen_y,2));d=Math.sqrt(Math.pow(s.screen_x-r.screen_x,2)+Math.pow(s.screen_y-r.screen_y,2));u=Math.sqrt(Math.pow(r.screen_x-o.screen_x,2)+Math.pow(r.screen_y-o.screen_y,2));v=Math.pow(u,i);y=Math.pow(u,2*i);g=Math.pow(d,i);b=Math.pow(d,2*i);_=Math.pow(h,i);w=Math.pow(h,2*i);f=2*w+3*_*g+b;c=2*y+3*v*g+b;p=3*_*(_+g);if(p>0){p=1/p}m=3*v*(v+g);if(m>0){m=1/m}a={screen_x:(-b*n.screen_x+f*s.screen_x+w*r.screen_x)*p,screen_y:(-b*n.screen_y+f*s.screen_y+w*r.screen_y)*p};l={screen_x:(y*s.screen_x+c*r.screen_x-b*o.screen_x)*m,screen_y:(y*s.screen_y+c*r.screen_y-b*o.screen_y)*m};if(a.screen_x==0&&a.screen_y==0){a=s}if(l.screen_x==0&&l.screen_y==0){l=r}x.push([a.screen_x,a.screen_y]);x.push([l.screen_x,l.screen_y]);x.push([r.screen_x,r.screen_y])}return x}};s._linear=function(e){var t=[];for(var i=0;i<e.length;i++){t.push([e[i].screen_x,e[i].screen_y])}return t};e.exports=s},function(e,t,i){"use strict";var n=i(58);var s=r(n);function r(e){return e&&e.__esModule?e:{default:e}}var o=i(1);var a=i(88);var l=i(120);function h(e,t,i,n){this.body=e;this.defaultOptions={enabled:false,icons:true,iconSize:20,iconSpacing:6,left:{visible:true,position:"top-left"},right:{visible:true,position:"top-right"}};this.side=i;this.options=o.extend({},this.defaultOptions);this.linegraphOptions=n;this.svgElements={};this.dom={};this.groups={};this.amountOfGroups=0;this._create();this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};this.setOptions(t)}h.prototype=new l;h.prototype.clear=function(){this.groups={};this.amountOfGroups=0};h.prototype.addGroup=function(e,t){if(t.options.excludeFromLegend!=true){if(!this.groups.hasOwnProperty(e)){this.groups[e]=t}this.amountOfGroups+=1}};h.prototype.updateGroup=function(e,t){this.groups[e]=t};h.prototype.removeGroup=function(e){if(this.groups.hasOwnProperty(e)){delete this.groups[e];this.amountOfGroups-=1}};h.prototype._create=function(){this.dom.frame=document.createElement("div");this.dom.frame.className="vis-legend";this.dom.frame.style.position="absolute";this.dom.frame.style.top="10px";this.dom.frame.style.display="block";this.dom.textArea=document.createElement("div");this.dom.textArea.className="vis-legend-text";this.dom.textArea.style.position="relative";this.dom.textArea.style.top="0px";this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg");this.svg.style.position="absolute";this.svg.style.top=0+"px";this.svg.style.width=this.options.iconSize+5+"px";this.svg.style.height="100%";this.dom.frame.appendChild(this.svg);this.dom.frame.appendChild(this.dom.textArea)};h.prototype.hide=function(){if(this.dom.frame.parentNode){this.dom.frame.parentNode.removeChild(this.dom.frame)}};h.prototype.show=function(){if(!this.dom.frame.parentNode){this.body.dom.center.appendChild(this.dom.frame)}};h.prototype.setOptions=function(e){var t=["enabled","orientation","icons","left","right"];o.selectiveDeepExtend(t,this.options,e)};h.prototype.redraw=function(){var e=0;var t=(0,s["default"])(this.groups);t.sort(function(e,t){return e<t?-1:1});for(var i=0;i<t.length;i++){var n=t[i];if(this.groups[n].visible==true&&(this.linegraphOptions.visibility[n]===undefined||this.linegraphOptions.visibility[n]==true)){e++}}if(this.options[this.side].visible==false||this.amountOfGroups==0||this.options.enabled==false||e==0){this.hide()}else{this.show();if(this.options[this.side].position=="top-left"||this.options[this.side].position=="bottom-left"){this.dom.frame.style.left="4px";this.dom.frame.style.textAlign="left";this.dom.textArea.style.textAlign="left";this.dom.textArea.style.left=this.options.iconSize+15+"px";this.dom.textArea.style.right="";this.svg.style.left=0+"px";this.svg.style.right=""}else{this.dom.frame.style.right="4px";this.dom.frame.style.textAlign="right";this.dom.textArea.style.textAlign="right";this.dom.textArea.style.right=this.options.iconSize+15+"px";this.dom.textArea.style.left="";this.svg.style.right=0+"px";this.svg.style.left=""}if(this.options[this.side].position=="top-left"||this.options[this.side].position=="top-right"){this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px";this.dom.frame.style.bottom=""}else{var r=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+r+Number(this.body.dom.center.style.top.replace("px",""))+"px";this.dom.frame.style.top=""}if(this.options.icons==false){this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px";this.dom.textArea.style.right="";this.dom.textArea.style.left="";this.svg.style.width="0px"}else{this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px";this.drawLegendIcons()}var o="";for(var i=0;i<t.length;i++){var n=t[i];if(this.groups[n].visible==true&&(this.linegraphOptions.visibility[n]===undefined||this.linegraphOptions.visibility[n]==true)){o+=this.groups[n].content+"<br />"}}this.dom.textArea.innerHTML=o;this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}};h.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var e=(0,s["default"])(this.groups);e.sort(function(e,t){return e<t?-1:1});a.resetElements(this.svgElements);var t=window.getComputedStyle(this.dom.frame).paddingTop;var i=Number(t.replace("px",""));var n=i;var r=this.options.iconSize;var o=.75*this.options.iconSize;var l=i+.5*o+3;this.svg.style.width=r+5+i+"px";for(var h=0;h<e.length;h++){var d=e[h];if(this.groups[d].visible==true&&(this.linegraphOptions.visibility[d]===undefined||this.linegraphOptions.visibility[d]==true)){this.groups[d].getLegend(r,o,this.framework,n,l);l+=o+this.options.iconSpacing}}}};e.exports=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i="string";var n="boolean";var s="number";var r="array";var o="date";var a="object";var l="dom";var h="moment";var d="any";var u={configure:{enabled:{boolean:n},filter:{boolean:n,function:"function"},container:{dom:l},__type__:{object:a,boolean:n,function:"function"}},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:i},sort:{boolean:n},sampling:{boolean:n},stack:{boolean:n},graphHeight:{string:i,number:s},shaded:{enabled:{boolean:n},orientation:{string:["bottom","top","zero","group"]},groupId:{object:a},__type__:{boolean:n,object:a}},style:{string:["line","bar","points"]},barChart:{width:{number:s},minWidth:{number:s},sideBySide:{boolean:n},align:{string:["left","center","right"]},__type__:{object:a}},interpolation:{enabled:{boolean:n},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:s},__type__:{object:a,boolean:n}},drawPoints:{enabled:{boolean:n},onRender:{function:"function"},size:{number:s},style:{string:["square","circle"]},__type__:{object:a,boolean:n,function:"function"}},dataAxis:{showMinorLabels:{boolean:n},showMajorLabels:{boolean:n},icons:{boolean:n},width:{string:i,number:s},visible:{boolean:n},alignZeros:{boolean:n},left:{range:{min:{number:s,undefined:"undefined"},max:{number:s,undefined:"undefined"},__type__:{object:a}},format:{function:"function"},title:{text:{string:i,number:s,undefined:"undefined"},style:{string:i,undefined:"undefined"},__type__:{object:a}},__type__:{object:a}},right:{range:{min:{number:s,undefined:"undefined"},max:{number:s,undefined:"undefined"},__type__:{object:a}},format:{function:"function"},title:{text:{string:i,number:s,undefined:"undefined"},style:{string:i,undefined:"undefined"},__type__:{object:a}},__type__:{object:a}},__type__:{object:a}},legend:{enabled:{boolean:n},icons:{boolean:n},left:{visible:{boolean:n},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:a}},right:{visible:{boolean:n},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:a}},__type__:{object:a,boolean:n}},groups:{visibility:{any:d},__type__:{object:a}},autoResize:{boolean:n},throttleRedraw:{number:s},clickToUse:{boolean:n},end:{number:s,date:o,string:i,moment:h},format:{minorLabels:{millisecond:{string:i,undefined:"undefined"},second:{string:i,undefined:"undefined"},minute:{string:i,undefined:"undefined"},hour:{string:i,undefined:"undefined"},weekday:{string:i,undefined:"undefined"},day:{string:i,undefined:"undefined"},month:{string:i,undefined:"undefined"},year:{string:i,undefined:"undefined"},__type__:{object:a}},majorLabels:{millisecond:{string:i,undefined:"undefined"},second:{string:i,undefined:"undefined"},minute:{string:i,undefined:"undefined"},hour:{string:i,undefined:"undefined"},weekday:{string:i,undefined:"undefined"},day:{string:i,undefined:"undefined"},month:{string:i,undefined:"undefined"},year:{string:i,undefined:"undefined"},__type__:{object:a}},__type__:{object:a}},moment:{function:"function"},height:{string:i,number:s},hiddenDates:{start:{date:o,number:s,string:i,moment:h},end:{date:o,number:s,string:i,moment:h},repeat:{string:i},__type__:{object:a,array:r}},locale:{string:i},locales:{__any__:{any:d},__type__:{object:a}},max:{date:o,number:s,string:i,moment:h},maxHeight:{number:s,string:i},maxMinorChars:{number:s},min:{date:o,number:s,string:i,moment:h},minHeight:{number:s,string:i},moveable:{boolean:n},multiselect:{boolean:n},orientation:{string:i},showCurrentTime:{boolean:n},showMajorLabels:{boolean:n},showMinorLabels:{boolean:n},start:{date:o,number:s,string:i,moment:h},timeAxis:{scale:{string:i,undefined:"undefined"},step:{number:s,undefined:"undefined"},__type__:{object:a}},width:{string:i,number:s},zoomable:{boolean:n},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:s},zoomMin:{number:s},zIndex:{number:s},__type__:{object:a}};var f={global:{sort:true,sampling:true,stack:false,shaded:{enabled:false,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:false,align:["left","center","right"]},interpolation:{enabled:true,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:true,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:true,showMajorLabels:true,icons:false,width:[40,0,200,1],visible:true,alignZeros:true,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:false,icons:true,left:{visible:true,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:true,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:true,clickToUse:false,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:true,orientation:["both","bottom","top"],showCurrentTime:false,showMajorLabels:true,showMinorLabels:true,start:"",width:"100%",zoomable:true,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}};t.allOptions=u;t.configureOptions=f},function(e,t,i){"use strict";t.util=i(1);t.DOMutil=i(88);t.DataSet=i(89);t.DataView=i(93);t.Queue=i(92);t.Network=i(159);t.network={Images:i(164),dotparser:i(161),gephiParser:i(162),allOptions:i(229)};t.network.convertDot=function(e){return t.network.dotparser.DOTToGraph(e)};t.network.convertGephi=function(e,i){return t.network.gephiParser.parseGephi(e,i)};t.moment=i(82);t.Hammer=i(112);t.keycharm=i(115)},function(e,t,i){"use strict";i(160);var n=i(99);var s=i(1);var r=i(89);var o=i(93);var a=i(161);var l=i(162);var h=i(140);var d=i(163);var u=i(164)["default"];var f=i(166)["default"];var c=i(167)["default"];var p=i(200)["default"];var m=i(209)["default"];var v=i(218)["default"];var g=i(221)["default"];var y=i(222)["default"];var b=i(223)["default"];var w=i(224)["default"];var _=i(226)["default"];var x=i(227)["default"];var k=i(228)["default"];var C=i(146)["default"];var S=i(144)["default"];var T=i(144),M=T.printStyle;var D=i(229),E=D.allOptions,O=D.configureOptions;var P=i(230)["default"];function I(e,t,i){var n=this;if(!(this instanceof I)){throw new SyntaxError("Constructor must be called with the new operator")}this.options={};this.defaultOptions={locale:"en",locales:d,clickToUse:false};s.extend(this.options,this.defaultOptions);this.body={container:e,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this),once:this.once.bind(this)},eventListeners:{onTap:function e(){},onTouch:function e(){},onDoubleTap:function e(){},onHold:function e(){},onDragStart:function e(){},onDrag:function e(){},onDragEnd:function e(){},onMouseWheel:function e(){},onPinch:function e(){},onMouseMove:function e(){},onRelease:function e(){},onContext:function e(){}},data:{nodes:null,edges:null},functions:{createNode:function e(){},createEdge:function e(){},getPointer:function e(){}},modules:{},view:{scale:1,translation:{x:0,y:0}}};this.bindEventListeners();this.images=new u(function(){return n.body.emitter.emit("_requestRedraw")});this.groups=new f;this.canvas=new y(this.body);this.selectionHandler=new _(this.body,this.canvas);this.interactionHandler=new w(this.body,this.canvas,this.selectionHandler);this.view=new b(this.body,this.canvas);this.renderer=new g(this.body,this.canvas);this.physics=new m(this.body);this.layoutEngine=new x(this.body);this.clustering=new v(this.body);this.manipulation=new k(this.body,this.canvas,this.selectionHandler);this.nodesHandler=new c(this.body,this.images,this.groups,this.layoutEngine);this.edgesHandler=new p(this.body,this.images,this.groups);this.body.modules["kamadaKawai"]=new P(this.body,150,.05);this.body.modules["clustering"]=this.clustering;this.canvas._create();this.setOptions(i);this.setData(t)}n(I.prototype);I.prototype.setOptions=function(e){var t=this;if(e!==undefined){var i=S.validate(e,E);if(i===true){console.log("%cErrors have been found in the supplied options object.",M)}var n=["locale","locales","clickToUse"];s.selectiveDeepExtend(n,this.options,e);e=this.layoutEngine.setOptions(e.layout,e);this.canvas.setOptions(e);this.groups.setOptions(e.groups);this.nodesHandler.setOptions(e.nodes);this.edgesHandler.setOptions(e.edges);this.physics.setOptions(e.physics);this.manipulation.setOptions(e.manipulation,e,this.options);this.interactionHandler.setOptions(e.interaction);this.renderer.setOptions(e.interaction);this.selectionHandler.setOptions(e.interaction);if(e.groups!==undefined){this.body.emitter.emit("refreshNodes")}if("configure"in e){if(!this.configurator){this.configurator=new C(this,this.body.container,O,this.canvas.pixelRatio)}this.configurator.setOptions(e.configure)}if(this.configurator&&this.configurator.options.enabled===true){var r={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};s.deepExtend(r.nodes,this.nodesHandler.options);s.deepExtend(r.edges,this.edgesHandler.options);s.deepExtend(r.layout,this.layoutEngine.options);s.deepExtend(r.interaction,this.selectionHandler.options);s.deepExtend(r.interaction,this.renderer.options);s.deepExtend(r.interaction,this.interactionHandler.options);s.deepExtend(r.manipulation,this.manipulation.options);s.deepExtend(r.physics,this.physics.options);s.deepExtend(r.global,this.canvas.options);s.deepExtend(r.global,this.options);this.configurator.setModuleOptions(r)}if(e.clickToUse!==undefined){if(e.clickToUse===true){if(this.activator===undefined){this.activator=new h(this.canvas.frame);this.activator.on("change",function(){t.body.emitter.emit("activate")})}}else{if(this.activator!==undefined){this.activator.destroy();delete this.activator}this.body.emitter.emit("activate")}}else{this.body.emitter.emit("activate")}this.canvas.setSize();this.body.emitter.emit("startSimulation")}};I.prototype._updateVisibleIndices=function(){var e=this.body.nodes;var t=this.body.edges;this.body.nodeIndices=[];this.body.edgeIndices=[];for(var i in e){if(e.hasOwnProperty(i)){if(e[i].options.hidden===false){this.body.nodeIndices.push(e[i].id)}}}for(var n in t){if(t.hasOwnProperty(n)){if(t[n].options.hidden===false){this.body.edgeIndices.push(t[n].id)}}}};I.prototype.bindEventListeners=function(){var e=this;this.body.emitter.on("_dataChanged",function(){e._updateVisibleIndices();e.body.emitter.emit("_requestRedraw");e.body.emitter.emit("_dataUpdated")});this.body.emitter.on("_dataUpdated",function(){e._updateValueRange(e.body.nodes);e._updateValueRange(e.body.edges);e.body.emitter.emit("startSimulation");e.body.emitter.emit("_requestRedraw")})};I.prototype.setData=function(e){this.body.emitter.emit("resetPhysics");this.body.emitter.emit("_resetData");this.selectionHandler.unselectAll();if(e&&e.dot&&(e.nodes||e.edges)){throw new SyntaxError('Data must contain either parameter "dot" or '+' parameter pair "nodes" and "edges", but not both.')}this.setOptions(e&&e.options);if(e&&e.dot){console.log("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var t=a.DOTToGraph(e.dot);this.setData(t);return}else if(e&&e.gephi){console.log("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var i=l.parseGephi(e.gephi);this.setData(i);return}else{this.nodesHandler.setData(e&&e.nodes,true);this.edgesHandler.setData(e&&e.edges,true)}this.body.emitter.emit("_dataChanged");this.body.emitter.emit("_dataLoaded");this.body.emitter.emit("initPhysics")};I.prototype.destroy=function(){this.body.emitter.emit("destroy");this.body.emitter.off();this.off();delete this.groups;delete this.canvas;delete this.selectionHandler;delete this.interactionHandler;delete this.view;delete this.renderer;delete this.physics;delete this.layoutEngine;delete this.clustering;delete this.manipulation;delete this.nodesHandler;delete this.edgesHandler;delete this.configurator;delete this.images;for(var e in this.body.nodes){delete this.body.nodes[e]}for(var t in this.body.edges){delete this.body.edges[t]}s.recursiveDOMDelete(this.body.container)};I.prototype._updateValueRange=function(e){var t;
var i=undefined;var n=undefined;var s=0;for(t in e){if(e.hasOwnProperty(t)){var r=e[t].getValue();if(r!==undefined){i=i===undefined?r:Math.min(r,i);n=n===undefined?r:Math.max(r,n);s+=r}}}if(i!==undefined&&n!==undefined){for(t in e){if(e.hasOwnProperty(t)){e[t].setValueRange(i,n,s)}}}};I.prototype.isActive=function(){return!this.activator||this.activator.active};I.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};I.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};I.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};I.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};I.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)};I.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};I.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};I.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};I.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};I.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)};I.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};I.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};I.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};I.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};I.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)};I.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};I.prototype.editNodeMode=function(){console.log("Deprecated: Please use editNode instead of editNodeMode.");return this.manipulation.editNode.apply(this.manipulation,arguments)};I.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};I.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)};I.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};I.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};I.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};I.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)};I.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};I.prototype.getConnectedNodes=function(e){if(this.body.nodes[e]!==undefined){return this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments)}else{return this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)}};I.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};I.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)};I.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};I.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};I.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};I.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};I.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodes.apply(this.selectionHandler,arguments)};I.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdges.apply(this.selectionHandler,arguments)};I.prototype.getNodeAt=function(){var e=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);if(e!==undefined&&e.id!==undefined){return e.id}return e};I.prototype.getEdgeAt=function(){var e=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);if(e!==undefined&&e.id!==undefined){return e.id}return e};I.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)};I.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};I.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments);this.redraw()};I.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};I.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};I.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)};I.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};I.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};I.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};I.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};I.prototype.getOptionsFromConfigurator=function(){var e={};if(this.configurator){e=this.configurator.getOptions.apply(this.configurator)}return e};e.exports=I},function(e,t){"use strict";if(typeof CanvasRenderingContext2D!=="undefined"){CanvasRenderingContext2D.prototype.circle=function(e,t,i){this.beginPath();this.arc(e,t,i,0,2*Math.PI,false);this.closePath()};CanvasRenderingContext2D.prototype.square=function(e,t,i){this.beginPath();this.rect(e-i,t-i,i*2,i*2);this.closePath()};CanvasRenderingContext2D.prototype.triangle=function(e,t,i){this.beginPath();i*=1.15;t+=.275*i;var n=i*2;var s=n/2;var r=Math.sqrt(3)/6*n;var o=Math.sqrt(n*n-s*s);this.moveTo(e,t-(o-r));this.lineTo(e+s,t+r);this.lineTo(e-s,t+r);this.lineTo(e,t-(o-r));this.closePath()};CanvasRenderingContext2D.prototype.triangleDown=function(e,t,i){this.beginPath();i*=1.15;t-=.275*i;var n=i*2;var s=n/2;var r=Math.sqrt(3)/6*n;var o=Math.sqrt(n*n-s*s);this.moveTo(e,t+(o-r));this.lineTo(e+s,t-r);this.lineTo(e-s,t-r);this.lineTo(e,t+(o-r));this.closePath()};CanvasRenderingContext2D.prototype.star=function(e,t,i){this.beginPath();i*=.82;t+=.1*i;for(var n=0;n<10;n++){var s=n%2===0?i*1.3:i*.5;this.lineTo(e+s*Math.sin(n*2*Math.PI/10),t-s*Math.cos(n*2*Math.PI/10))}this.closePath()};CanvasRenderingContext2D.prototype.diamond=function(e,t,i){this.beginPath();this.lineTo(e,t+i);this.lineTo(e+i,t);this.lineTo(e,t-i);this.lineTo(e-i,t);this.closePath()};CanvasRenderingContext2D.prototype.roundRect=function(e,t,i,n,s){var r=Math.PI/180;if(i-2*s<0){s=i/2}if(n-2*s<0){s=n/2}this.beginPath();this.moveTo(e+s,t);this.lineTo(e+i-s,t);this.arc(e+i-s,t+s,s,r*270,r*360,false);this.lineTo(e+i,t+n-s);this.arc(e+i-s,t+n-s,s,0,r*90,false);this.lineTo(e+s,t+n);this.arc(e+s,t+n-s,s,r*90,r*180,false);this.lineTo(e,t+s);this.arc(e+s,t+s,s,r*180,r*270,false);this.closePath()};CanvasRenderingContext2D.prototype.ellipse_vis=function(e,t,i,n){var s=.5522848,r=i/2*s,o=n/2*s,a=e+i,l=t+n,h=e+i/2,d=t+n/2;this.beginPath();this.moveTo(e,d);this.bezierCurveTo(e,d-o,h-r,t,h,t);this.bezierCurveTo(h+r,t,a,d-o,a,d);this.bezierCurveTo(a,d+o,h+r,l,h,l);this.bezierCurveTo(h-r,l,e,d+o,e,d);this.closePath()};CanvasRenderingContext2D.prototype.database=function(e,t,i,n){var s=1/3;var r=i;var o=n*s;var a=.5522848,l=r/2*a,h=o/2*a,d=e+r,u=t+o,f=e+r/2,c=t+o/2,p=t+(n-o/2),m=t+n;this.beginPath();this.moveTo(d,c);this.bezierCurveTo(d,c+h,f+l,u,f,u);this.bezierCurveTo(f-l,u,e,c+h,e,c);this.bezierCurveTo(e,c-h,f-l,t,f,t);this.bezierCurveTo(f+l,t,d,c-h,d,c);this.lineTo(d,p);this.bezierCurveTo(d,p+h,f+l,m,f,m);this.bezierCurveTo(f-l,m,e,p+h,e,p);this.lineTo(e,c)};CanvasRenderingContext2D.prototype.arrowEndpoint=function(e,t,i,n){var s=e-n*Math.cos(i);var r=t-n*Math.sin(i);var o=e-n*.9*Math.cos(i);var a=t-n*.9*Math.sin(i);var l=s+n/3*Math.cos(i+.5*Math.PI);var h=r+n/3*Math.sin(i+.5*Math.PI);var d=s+n/3*Math.cos(i-.5*Math.PI);var u=r+n/3*Math.sin(i-.5*Math.PI);this.beginPath();this.moveTo(e,t);this.lineTo(l,h);this.lineTo(o,a);this.lineTo(d,u);this.closePath()};CanvasRenderingContext2D.prototype.circleEndpoint=function(e,t,i,n){var s=n*.4;var r=e-s*Math.cos(i);var o=t-s*Math.sin(i);this.circle(r,o,s)};CanvasRenderingContext2D.prototype.dashedLine=function(e,t,i,n,s){this.beginPath();this.moveTo(e,t);var r=s.length;var o=i-e;var a=n-t;var l=a/o;var h=Math.sqrt(o*o+a*a);var d=0;var u=true;var f=0;var c=s[0];while(h>=.1){c=s[d++%r];if(c>h){c=h}f=Math.sqrt(c*c/(1+l*l));f=o<0?-f:f;e+=f;t+=l*f;if(u===true){this.lineTo(e,t)}else{this.moveTo(e,t)}h-=c;u=!u}}}},function(e,t,i){"use strict";var n=i(55);var s=r(n);function r(e){return e&&e.__esModule?e:{default:e}}function o(e){u=e;return M()}var a={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"};var l=(0,s["default"])(a);l.color="color.color";var h={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3};var d={"{":true,"}":true,"[":true,"]":true,";":true,"=":true,",":true,"->":true,"--":true};var u="";var f=0;var c="";var p="";var m=h.NULL;function v(){f=0;c=u.charAt(0)}function g(){f++;c=u.charAt(f)}function y(){return u.charAt(f+1)}var b=/[a-zA-Z_0-9.:#]/;function w(e){return b.test(e)}function _(e,t){if(!e){e={}}if(t){for(var i in t){if(t.hasOwnProperty(i)){e[i]=t[i]}}}return e}function x(e,t,i){var n=t.split(".");var s=e;while(n.length){var r=n.shift();if(n.length){if(!s[r]){s[r]={}}s=s[r]}else{s[r]=i}}}function k(e,t){var i,n;var s=null;var r=[e];var o=e;while(o.parent){r.push(o.parent);o=o.parent}if(o.nodes){for(i=0,n=o.nodes.length;i<n;i++){if(t.id===o.nodes[i].id){s=o.nodes[i];break}}}if(!s){s={id:t.id};if(e.node){s.attr=_(s.attr,e.node)}}for(i=r.length-1;i>=0;i--){var a=r[i];if(!a.nodes){a.nodes=[]}if(a.nodes.indexOf(s)===-1){a.nodes.push(s)}}if(t.attr){s.attr=_(s.attr,t.attr)}}function C(e,t){if(!e.edges){e.edges=[]}e.edges.push(t);if(e.edge){var i=_({},e.edge);t.attr=_(i,t.attr)}}function S(e,t,i,n,s){var r={from:t,to:i,type:n};if(e.edge){r.attr=_({},e.edge)}r.attr=_(r.attr||{},s);return r}function T(){m=h.NULL;p="";while(c===" "||c==="\t"||c==="\n"||c==="\r"){g()}do{var e=false;if(c==="#"){var t=f-1;while(u.charAt(t)===" "||u.charAt(t)==="\t"){t--}if(u.charAt(t)==="\n"||u.charAt(t)===""){while(c!=""&&c!="\n"){g()}e=true}}if(c==="/"&&y()==="/"){while(c!=""&&c!="\n"){g()}e=true}if(c==="/"&&y()==="*"){while(c!=""){if(c==="*"&&y()==="/"){g();g();break}else{g()}}e=true}while(c===" "||c==="\t"||c==="\n"||c==="\r"){g()}}while(e);if(c===""){m=h.DELIMITER;return}var i=c+y();if(d[i]){m=h.DELIMITER;p=i;g();g();return}if(d[c]){m=h.DELIMITER;p=c;g();return}if(w(c)||c==="-"){p+=c;g();while(w(c)){p+=c;g()}if(p==="false"){p=false}else if(p==="true"){p=true}else if(!isNaN(Number(p))){p=Number(p)}m=h.IDENTIFIER;return}if(c==='"'){g();while(c!=""&&(c!='"'||c==='"'&&y()==='"')){p+=c;if(c==='"'){g()}g()}if(c!='"'){throw F('End of string " expected')}g();m=h.IDENTIFIER;return}m=h.UNKNOWN;while(c!=""){p+=c;g()}throw new SyntaxError('Syntax error in part "'+R(p,30)+'"')}function M(){var e={};v();T();if(p==="strict"){e.strict=true;T()}if(p==="graph"||p==="digraph"){e.type=p;T()}if(m===h.IDENTIFIER){e.id=p;T()}if(p!="{"){throw F("Angle bracket { expected")}T();D(e);if(p!="}"){throw F("Angle bracket } expected")}T();if(p!==""){throw F("End of file expected")}T();delete e.node;delete e.edge;delete e.graph;return e}function D(e){while(p!==""&&p!="}"){E(e);if(p===";"){T()}}}function E(e){var t=O(e);if(t){A(e,t);return}var i=P(e);if(i){return}if(m!=h.IDENTIFIER){throw F("Identifier expected")}var n=p;T();if(p==="="){T();if(m!=h.IDENTIFIER){throw F("Identifier expected")}e[n]=p;T()}else{I(e,n)}}function O(e){var t=null;if(p==="subgraph"){t={};t.type="subgraph";T();if(m===h.IDENTIFIER){t.id=p;T()}}if(p==="{"){T();if(!t){t={}}t.parent=e;t.node=e.node;t.edge=e.edge;t.graph=e.graph;D(t);if(p!="}"){throw F("Angle bracket } expected")}T();delete t.node;delete t.edge;delete t.graph;delete t.parent;if(!e.subgraphs){e.subgraphs=[]}e.subgraphs.push(t)}return t}function P(e){if(p==="node"){T();e.node=N();return"node"}else if(p==="edge"){T();e.edge=N();return"edge"}else if(p==="graph"){T();e.graph=N();return"graph"}return null}function I(e,t){var i={id:t};var n=N();if(n){i.attr=n}k(e,i);A(e,t)}function A(e,t){while(p==="->"||p==="--"){var i;var n=p;T();var s=O(e);if(s){i=s}else{if(m!=h.IDENTIFIER){throw F("Identifier or subgraph expected")}i=p;k(e,{id:i});T()}var r=N();var o=S(e,t,i,n,r);C(e,o);t=i}}function N(){var e=null;while(p==="["){T();e={};while(p!==""&&p!="]"){if(m!=h.IDENTIFIER){throw F("Attribute name expected")}var t=p;T();if(p!="="){throw F("Equal sign = expected")}T();if(m!=h.IDENTIFIER){throw F("Attribute value expected")}var i=p;x(e,t,i);T();if(p==","){T()}}if(p!="]"){throw F("Bracket ] expected")}T()}return e}function F(e){return new SyntaxError(e+', got "'+R(p,30)+'" (char '+f+")")}function R(e,t){return e.length<=t?e:e.substr(0,27)+"..."}function $(e,t,i){if(Array.isArray(e)){e.forEach(function(e){if(Array.isArray(t)){t.forEach(function(t){i(e,t)})}else{i(e,t)}})}else{if(Array.isArray(t)){t.forEach(function(t){i(e,t)})}else{i(e,t)}}}function L(e,t,i){var n=t.split(".");var s=n.pop();var r=e;for(var o=0;o<n.length;o++){var a=n[o];if(!(a in r)){r[a]={}}r=r[a]}r[s]=i;return e}function z(e,t){var i={};for(var n in e){if(e.hasOwnProperty(n)){var s=t[n];if(Array.isArray(s)){s.forEach(function(t){L(i,t,e[n])})}else if(typeof s==="string"){L(i,s,e[n])}else{L(i,n,e[n])}}}return i}function j(e){var t=o(e);var i={nodes:[],edges:[],options:{}};if(t.nodes){t.nodes.forEach(function(e){var t={id:e.id,label:String(e.label||e.id)};_(t,z(e.attr,a));if(t.image){t.shape="image"}i.nodes.push(t)})}if(t.edges){var n=function e(t){var i={from:t.from,to:t.to};_(i,z(t.attr,l));i.arrows=t.type==="->"?"to":undefined;return i};t.edges.forEach(function(e){var t,s;if(e.from instanceof Object){t=e.from.nodes}else{t={id:e.from}}if(e.to instanceof Object){s=e.to.nodes}else{s={id:e.to}}if(e.from instanceof Object&&e.from.edges){e.from.edges.forEach(function(e){var t=n(e);i.edges.push(t)})}$(t,s,function(t,s){var r=S(i,t.id,s.id,e.type,e.attr);var o=n(r);i.edges.push(o)});if(e.to instanceof Object&&e.to.edges){e.to.edges.forEach(function(e){var t=n(e);i.edges.push(t)})}})}if(t.attr){i.options=t.attr}return i}t.parseDOT=o;t.DOTToGraph=j},function(e,t){"use strict";function i(e,t){var i=[];var n=[];var s={edges:{inheritColor:false},nodes:{fixed:false,parseColor:false}};if(t!==undefined){if(t.fixed!==undefined){s.nodes.fixed=t.fixed}if(t.parseColor!==undefined){s.nodes.parseColor=t.parseColor}if(t.inheritColor!==undefined){s.edges.inheritColor=t.inheritColor}}var r=e.edges;var o=e.nodes;for(var a=0;a<r.length;a++){var l={};var h=r[a];l["id"]=h.id;l["from"]=h.source;l["to"]=h.target;l["attributes"]=h.attributes;l["label"]=h.label;l["title"]=h.attributes!==undefined?h.attributes.title:undefined;if(h["type"]==="Directed"){l["arrows"]="to"}if(h.color&&s.inheritColor===false){l["color"]=h.color}i.push(l)}for(var a=0;a<o.length;a++){var d={};var u=o[a];d["id"]=u.id;d["attributes"]=u.attributes;d["x"]=u.x;d["y"]=u.y;d["label"]=u.label;d["title"]=u.attributes!==undefined?u.attributes.title:u.title;if(s.nodes.parseColor===true){d["color"]=u.color}else{d["color"]=u.color!==undefined?{background:u.color,border:u.color,highlight:{background:u.color,border:u.color},hover:{background:u.color,border:u.color}}:undefined}d["size"]=u.size;d["fixed"]=s.nodes.fixed&&u.x!==undefined&&u.y!==undefined;n.push(d)}return{nodes:n,edges:i}}t.parseGephi=i},function(e,t){"use strict";t["en"]={edit:"Edit",del:"Delete selected",back:"Back",addNode:"Add Node",addEdge:"Add Edge",editNode:"Edit Node",editEdge:"Edit Edge",addDescription:"Click in an empty space to place a new node.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",createEdgeError:"Cannot link edges to a cluster.",deleteClusterError:"Clusters cannot be deleted.",editClusterError:"Clusters cannot be edited."};t["en_EN"]=t["en"];t["en_US"]=t["en"];t["de"]={edit:"Editieren",del:"Lösche Auswahl",back:"Zurück",addNode:"Knoten hinzufügen",addEdge:"Kante hinzufügen",editNode:"Knoten editieren",editEdge:"Kante editieren",addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",createEdgeError:"Es ist nicht möglich, Kanten mit Clustern zu verbinden.",deleteClusterError:"Cluster können nicht gelöscht werden.",editClusterError:"Cluster können nicht editiert werden."};t["de_DE"]=t["de"];t["es"]={edit:"Editar",del:"Eliminar selección",back:"Átras",addNode:"Añadir nodo",addEdge:"Añadir arista",editNode:"Editar nodo",editEdge:"Editar arista",addDescription:"Haga clic en un lugar vacío para colocar un nuevo nodo.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",createEdgeError:"No se puede conectar una arista a un grupo.",deleteClusterError:"No es posible eliminar grupos.",editClusterError:"No es posible editar grupos."};t["es_ES"]=t["es"];t["it"]={edit:"Modifica",del:"Cancella la selezione",back:"Indietro",addNode:"Aggiungi un nodo",addEdge:"Aggiungi un vertice",editNode:"Modifica il nodo",editEdge:"Modifica il vertice",addDescription:"Clicca per aggiungere un nuovo nodo",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",createEdgeError:"Non si possono collegare vertici ad un cluster",deleteClusterError:"I cluster non possono essere cancellati",editClusterError:"I clusters non possono essere modificati."};t["it_IT"]=t["it"];t["nl"]={edit:"Wijzigen",del:"Selectie verwijderen",back:"Terug",addNode:"Node toevoegen",addEdge:"Link toevoegen",editNode:"Node wijzigen",editEdge:"Link wijzigen",addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",createEdgeError:"Kan geen link maken naar een cluster.",deleteClusterError:"Clusters kunnen niet worden verwijderd.",editClusterError:"Clusters kunnen niet worden aangepast."};t["nl_NL"]=t["nl"];t["nl_BE"]=t["nl"];t["pt-br"]={edit:"Editar",del:"Remover selecionado",back:"Voltar",addNode:"Adicionar nó",addEdge:"Adicionar aresta",editNode:"Editar nó",editEdge:"Editar aresta",addDescription:"Clique em um espaço em branco para adicionar um novo nó",edgeDescription:"Clique em um nó e arraste a aresta até outro nó para conectá-los",editEdgeDescription:"Clique nos pontos de controle e os arraste para um nó para conectá-los",createEdgeError:"Não foi possível linkar arestas a um cluster.",deleteClusterError:"Clusters não puderam ser removidos.",editClusterError:"Clusters não puderam ser editados."};t["pt-BR"]=t["pt-br"];t["pt_BR"]=t["pt-br"];t["pt_br"]=t["pt-br"];t["ru"]={edit:"Редактировать",del:"Удалить выбранное",back:"Назад",addNode:"Добавить узел",addEdge:"Добавить ребро",editNode:"Редактировать узел",editEdge:"Редактировать ребро",addDescription:"Кликните в свободное место, чтобы добавить новый узел.",edgeDescription:"Кликните на узел и протяните ребро к другому узлу, чтобы соединить их.",editEdgeDescription:"Кликните на контрольные точки и перетащите их в узел, чтобы подключиться к нему.",createEdgeError:"Невозможно соединить ребра в кластер.",deleteClusterError:"Кластеры не могут быть удалены",editClusterError:"Кластеры недоступны для редактирования."};t["ru_RU"]=t["ru"]},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(134);var s=h(n);var r=i(135);var o=h(r);var a=i(165);var l=h(a);function h(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t){(0,s["default"])(this,e);this.images={};this.imageBroken={};this.callback=t}(0,o["default"])(e,[{key:"_tryloadBrokenUrl",value:function e(t,i,n){if(t===undefined||n===undefined)return;if(i===undefined){console.warn("No broken url image defined");return}n.onerror=function(){console.error("Could not load brokenImage:",i)};n.image.src=i}},{key:"_redrawWithImage",value:function e(t){if(this.callback){this.callback(t)}}},{key:"load",value:function e(t,i,n){var s=this;var r=this.images[t];if(r)return r;var o=new l["default"];this.images[t]=o;o.image.onload=function(){s._fixImageCoordinates(o.image);o.init();s._redrawWithImage(o)};o.image.onerror=function(){console.error("Could not load image:",t);s._tryloadBrokenUrl(t,i,o)};o.image.src=t;return o}},{key:"_fixImageCoordinates",value:function e(t){if(t.width===0){document.body.appendChild(t);t.width=t.offsetWidth;t.height=t.offsetHeight;document.body.removeChild(t)}}}]);return e}();t["default"]=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(134);var s=a(n);var r=i(135);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){(0,s["default"])(this,e);this.NUM_ITERATIONS=4;this.image=new Image;this.canvas=document.createElement("canvas")}(0,o["default"])(e,[{key:"init",value:function e(){if(this.initialized())return;var t=this.image.width;var i=this.image.height;this.width=t;this.height=i;this.canvas.width=3*t/4;this.canvas.height=i/2;this.coordinates=[[0,0,t/2,i/2],[t/2,0,t/4,i/4],[t/2,i/4,t/8,i/8],[5*t/8,i/4,t/16,i/16]];this._fillMipMap()}},{key:"initialized",value:function e(){return this.coordinates!==undefined}},{key:"_fillMipMap",value:function e(){var t=this.canvas.getContext("2d");var i=this.coordinates[0];t.drawImage(this.image,i[0],i[1],i[2],i[3]);for(var n=1;n<this.NUM_ITERATIONS;n++){var s=this.coordinates[n-1];var r=this.coordinates[n];t.drawImage(this.canvas,s[0],s[1],s[2],s[3],r[0],r[1],r[2],r[3])}}},{key:"drawImageAtPosition",value:function e(t,i,n,s,r,o){if(i>2&&this.initialized()){i*=.5;var a=0;while(i>2&&a<this.NUM_ITERATIONS){i*=.5;a+=1}if(a>=this.NUM_ITERATIONS){a=this.NUM_ITERATIONS-1}var l=this.coordinates[a];t.drawImage(this.canvas,l[0],l[1],l[2],l[3],n,s,r,o)}else if(this._isImageOk()){t.drawImage(this.image,n,s,r,o)}}},{key:"_isImageOk",value:function e(t){var t=this.image;if(!t.complete){return false}if(typeof t.naturalWidth!=="undefined"&&t.naturalWidth===0){return false}return true}}]);return e}();t["default"]=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(134);var s=a(n);var r=i(135);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=i(1);var h=function(){function e(){(0,s["default"])(this,e);this.clear();this.defaultIndex=0;this.groupsArray=[];this.groupIndex=0;this.defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}];this.options={};this.defaultOptions={useDefaultGroups:true};l.extend(this.options,this.defaultOptions)}(0,o["default"])(e,[{key:"setOptions",value:function e(t){var i=["useDefaultGroups"];if(t!==undefined){for(var n in t){if(t.hasOwnProperty(n)){if(i.indexOf(n)===-1){var s=t[n];this.add(n,s)}}}}}},{key:"clear",value:function e(){this.groups={};this.groupsArray=[]}},{key:"get",value:function e(t){var i=this.groups[t];if(i===undefined){if(this.options.useDefaultGroups===false&&this.groupsArray.length>0){var n=this.groupIndex%this.groupsArray.length;this.groupIndex++;i={};i.color=this.groups[this.groupsArray[n]];this.groups[t]=i}else{var s=this.defaultIndex%this.defaultGroups.length;this.defaultIndex++;i={};i.color=this.defaultGroups[s];this.groups[t]=i}}return i}},{key:"add",value:function e(t,i){this.groups[t]=i;this.groupsArray.push(t);return i}}]);return e}();t["default"]=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(134);var s=a(n);var r=i(135);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=i(1);var h=i(89);var d=i(93);var u=i(168)["default"];var f=i(169)["default"];var c=function(){function e(t,i,n,r){var o=this;(0,s["default"])(this,e);this.body=t;this.images=i;this.groups=n;this.layoutEngine=r;this.body.functions.createNode=this.create.bind(this);this.nodesListeners={add:function e(t,i){o.add(i.items)},update:function e(t,i){o.update(i.items,i.data)},remove:function e(t,i){o.remove(i.items)}};this.options={};this.defaultOptions={borderWidth:1,borderWidthSelected:2,brokenImage:undefined,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},fixed:{x:false,y:false},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:false,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:undefined,hidden:false,icon:{face:"FontAwesome",code:undefined,size:50,color:"#2B7CE9"},image:undefined,label:undefined,labelHighlightBold:true,level:undefined,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:true,scaling:{min:10,max:30,label:{enabled:false,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function e(t,i,n,s){if(i===t){return.5}else{var r=1/(i-t);return Math.max(0,(s-t)*r)}}},shadow:{enabled:false,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:false,borderRadius:6,interpolation:true,useImageSize:false,useBorderWithImage:false},size:25,title:undefined,value:undefined,x:undefined,y:undefined};l.extend(this.options,this.defaultOptions);this.bindEventListeners()}(0,o["default"])(e,[{key:"bindEventListeners",value:function e(){var t=this;this.body.emitter.on("refreshNodes",this.refresh.bind(this));this.body.emitter.on("refresh",this.refresh.bind(this));this.body.emitter.on("destroy",function(){l.forEach(t.nodesListeners,function(e,i){if(t.body.data.nodes)t.body.data.nodes.off(i,e)});delete t.body.functions.createNode;delete t.nodesListeners.add;delete t.nodesListeners.update;delete t.nodesListeners.remove;delete t.nodesListeners})}},{key:"setOptions",value:function e(t){this.nodeOptions=t;if(t!==undefined){u.parseOptions(this.options,t);if(t.shape!==undefined){for(var i in this.body.nodes){if(this.body.nodes.hasOwnProperty(i)){this.body.nodes[i].updateShape()}}}if(t.font!==undefined){f.parseOptions(this.options.font,t);for(var n in this.body.nodes){if(this.body.nodes.hasOwnProperty(n)){this.body.nodes[n].updateLabelModule();this.body.nodes[n].needsRefresh()}}}if(t.size!==undefined){for(var s in this.body.nodes){if(this.body.nodes.hasOwnProperty(s)){this.body.nodes[s].needsRefresh()}}}if(t.hidden!==undefined||t.physics!==undefined){this.body.emitter.emit("_dataChanged")}}}},{key:"setData",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=this.body.data.nodes;if(t instanceof h||t instanceof d){this.body.data.nodes=t}else if(Array.isArray(t)){this.body.data.nodes=new h;this.body.data.nodes.add(t)}else if(!t){this.body.data.nodes=new h}else{throw new TypeError("Array or DataSet expected")}if(n){l.forEach(this.nodesListeners,function(e,t){n.off(t,e)})}this.body.nodes={};if(this.body.data.nodes){var s=this;l.forEach(this.nodesListeners,function(e,t){s.body.data.nodes.on(t,e)});var r=this.body.data.nodes.getIds();this.add(r,true)}if(i===false){this.body.emitter.emit("_dataChanged")}}},{key:"add",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=void 0;var s=[];for(var r=0;r<t.length;r++){n=t[r];var o=this.body.data.nodes.get(n);var a=this.create(o);s.push(a);this.body.nodes[n]=a}this.layoutEngine.positionInitially(s);if(i===false){this.body.emitter.emit("_dataChanged")}}},{key:"update",value:function e(t,i){var n=this.body.nodes;var s=false;for(var r=0;r<t.length;r++){var o=t[r];var a=n[o];var l=i[r];if(a!==undefined){s=a.setOptions(l)}else{s=true;a=this.create(l);n[o]=a}}if(s===true){this.body.emitter.emit("_dataChanged")}else{this.body.emitter.emit("_dataUpdated")}}},{key:"remove",value:function e(t){var i=this.body.nodes;for(var n=0;n<t.length;n++){var s=t[n];delete i[s]}this.body.emitter.emit("_dataChanged")}},{key:"create",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:u;return new i(t,this.body,this.images,this.groups,this.options,this.defaultOptions,this.nodeOptions)}},{key:"refresh",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var i=this.body.nodes;for(var n in i){var s=undefined;if(i.hasOwnProperty(n)){s=i[n]}var r=this.body.data.nodes.get(n);if(s!==undefined&&r!==undefined){if(t===true){
s.setOptions({x:null,y:null})}s.setOptions({fixed:false});s.setOptions(r)}}}},{key:"getPositions",value:function e(t){var i={};if(t!==undefined){if(Array.isArray(t)===true){for(var n=0;n<t.length;n++){if(this.body.nodes[t[n]]!==undefined){var s=this.body.nodes[t[n]];i[t[n]]={x:Math.round(s.x),y:Math.round(s.y)}}}}else{if(this.body.nodes[t]!==undefined){var r=this.body.nodes[t];i[t]={x:Math.round(r.x),y:Math.round(r.y)}}}}else{for(var o=0;o<this.body.nodeIndices.length;o++){var a=this.body.nodes[this.body.nodeIndices[o]];i[this.body.nodeIndices[o]]={x:Math.round(a.x),y:Math.round(a.y)}}}return i}},{key:"storePositions",value:function e(){var t=[];var i=this.body.data.nodes.getDataSet();for(var n in i._data){if(i._data.hasOwnProperty(n)){var s=this.body.nodes[n];if(i._data[n].x!=Math.round(s.x)||i._data[n].y!=Math.round(s.y)){t.push({id:s.id,x:Math.round(s.x),y:Math.round(s.y)})}}}i.update(t)}},{key:"getBoundingBox",value:function e(t){if(this.body.nodes[t]!==undefined){return this.body.nodes[t].shape.boundingBox}}},{key:"getConnectedNodes",value:function e(t){var i=[];if(this.body.nodes[t]!==undefined){var n=this.body.nodes[t];var s={};for(var r=0;r<n.edges.length;r++){var o=n.edges[r];if(o.toId==n.id){if(s[o.fromId]===undefined){i.push(o.fromId);s[o.fromId]=true}}else if(o.fromId==n.id){if(s[o.toId]===undefined){i.push(o.toId);s[o.toId]=true}}}}return i}},{key:"getConnectedEdges",value:function e(t){var i=[];if(this.body.nodes[t]!==undefined){var n=this.body.nodes[t];for(var s=0;s<n.edges.length;s++){i.push(n.edges[s].id)}}else{console.log("NodeId provided for getConnectedEdges does not exist. Provided: ",t)}return i}},{key:"moveNode",value:function e(t,i,n){var s=this;if(this.body.nodes[t]!==undefined){this.body.nodes[t].x=Number(i);this.body.nodes[t].y=Number(n);setTimeout(function(){s.body.emitter.emit("startSimulation")},0)}else{console.log("Node id supplied to moveNode does not exist. Provided: ",t)}}}]);return e}();t["default"]=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(62);var s=h(n);var r=i(134);var o=h(r);var a=i(135);var l=h(a);function h(e){return e&&e.__esModule?e:{default:e}}var d=i(1);var u=i(169)["default"];var f=i(174)["default"];var c=i(185)["default"];var p=i(187)["default"];var m=i(188)["default"];var v=i(189)["default"];var g=i(191)["default"];var y=i(192)["default"];var b=i(193)["default"];var w=i(194)["default"];var _=i(195)["default"];var x=i(196)["default"];var k=i(197)["default"];var C=i(198)["default"];var S=i(199)["default"];var T=i(144)["default"];var M=i(144),D=M.printStyle;var E=function(){function e(t,i,n,s,r,a,l){(0,o["default"])(this,e);this.options=d.bridgeObject(r);this.globalOptions=r;this.defaultOptions=a;this.nodeOptions=l;this.body=i;this.edges=[];this.id=undefined;this.imagelist=n;this.grouplist=s;this.x=undefined;this.y=undefined;this.baseSize=this.options.size;this.baseFontSize=this.options.font.size;this.predefinedPosition=false;this.selected=false;this.hover=false;this.labelModule=new u(this.body,this.options,false);this.setOptions(t)}(0,l["default"])(e,[{key:"attachEdge",value:function e(t){if(this.edges.indexOf(t)===-1){this.edges.push(t)}}},{key:"detachEdge",value:function e(t){var i=this.edges.indexOf(t);if(i!=-1){this.edges.splice(i,1)}}},{key:"setOptions",value:function t(i){var n=this.options.shape;if(!i){return}if(i.id!==undefined){this.id=i.id}if(this.id===undefined){throw"Node must have an id"}if(i.x!==undefined){if(i.x===null){this.x=undefined;this.predefinedPosition=false}else{this.x=parseInt(i.x);this.predefinedPosition=true}}if(i.y!==undefined){if(i.y===null){this.y=undefined;this.predefinedPosition=false}else{this.y=parseInt(i.y);this.predefinedPosition=true}}if(i.size!==undefined){this.baseSize=i.size}if(i.value!==undefined){i.value=parseFloat(i.value)}if(typeof i.group==="number"||typeof i.group==="string"&&i.group!=""){var s=this.grouplist.get(i.group);d.deepExtend(this.options,s);this.options.color=d.parseColor(this.options.color)}e.parseOptions(this.options,i,true,this.globalOptions);this.choosify(i);this._load_images();this.updateLabelModule(i);this.updateShape(n);this.labelModule.propagateFonts(this.nodeOptions,i,this.defaultOptions);if(i.hidden!==undefined||i.physics!==undefined){return true}return false}},{key:"_load_images",value:function e(){if(this.options.shape!=="circularImage"&&this.options.shape!=="image"){return}if(this.options.image===undefined){throw"Option image must be defined for node type '"+this.options.shape+"'"}if(this.imagelist===undefined){throw"Internal Error: No images provided"}if(typeof this.options.image==="string"){this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id)}else{if(this.options.image.unselected===undefined){throw"No unselected image provided"}this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id);if(this.options.image.selected!==undefined){this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id)}else{this.imageObjAlt=undefined}}}},{key:"choosify",value:function e(t){this.chooser=true;var i=[t,this.options,this.defaultOptions];var n=d.topMost(i,"chosen");if(typeof n==="boolean"){this.chooser=n}else if((typeof n==="undefined"?"undefined":(0,s["default"])(n))==="object"){var r=d.topMost(i,["chosen","node"]);if(typeof r==="boolean"||typeof r==="function"){this.chooser=r}}}},{key:"getFormattingValues",value:function e(){var t={color:this.options.color.background,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover){if(this.chooser===true){if(this.selected){t.borderWidth*=2;t.color=this.options.color.highlight.background;t.borderColor=this.options.color.highlight.border;t.shadow=this.options.shadow.enabled}else if(this.hover){t.color=this.options.color.hover.background;t.borderColor=this.options.color.hover.border;t.shadow=this.options.shadow.enabled}}else if(typeof this.chooser==="function"){this.chooser(t,this.options.id,this.selected,this.hover);if(t.shadow===false){if(t.shadowColor!==this.options.shadow.color||t.shadowSize!==this.options.shadow.size||t.shadowX!==this.options.shadow.x||t.shadowY!==this.options.shadow.y){t.shadow=true}}}}else{t.shadow=this.options.shadow.enabled}return t}},{key:"updateLabelModule",value:function e(t){if(this.options.label===undefined||this.options.label===null){this.options.label=""}this.labelModule.setOptions(this.options,true);if(this.labelModule.baseSize!==undefined){this.baseFontSize=this.labelModule.baseSize}this.labelModule.constrain(this.nodeOptions,t,this.defaultOptions);this.labelModule.choosify(this.nodeOptions,t,this.defaultOptions)}},{key:"updateShape",value:function e(t){if(t===this.options.shape&&this.shape){this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt)}else{switch(this.options.shape){case"box":this.shape=new f(this.options,this.body,this.labelModule);break;case"circle":this.shape=new c(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new p(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"database":this.shape=new m(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new v(this.options,this.body,this.labelModule);break;case"dot":this.shape=new g(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new y(this.options,this.body,this.labelModule);break;case"icon":this.shape=new b(this.options,this.body,this.labelModule);break;case"image":this.shape=new w(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new _(this.options,this.body,this.labelModule);break;case"star":this.shape=new x(this.options,this.body,this.labelModule);break;case"text":this.shape=new k(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new C(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new S(this.options,this.body,this.labelModule);break;default:this.shape=new y(this.options,this.body,this.labelModule);break}}this.needsRefresh()}},{key:"select",value:function e(){this.selected=true;this.needsRefresh()}},{key:"unselect",value:function e(){this.selected=false;this.needsRefresh()}},{key:"needsRefresh",value:function e(){this.shape.refreshNeeded=true}},{key:"getTitle",value:function e(){return this.options.title}},{key:"distanceToBorder",value:function e(t,i){return this.shape.distanceToBorder(t,i)}},{key:"isFixed",value:function e(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function e(){return this.selected}},{key:"getValue",value:function e(){return this.options.value}},{key:"setValueRange",value:function e(t,i,n){if(this.options.value!==undefined){var s=this.options.scaling.customScalingFunction(t,i,n,this.options.value);var r=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===true){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+s*o}this.options.size=this.options.scaling.min+s*r}else{this.options.size=this.baseSize;this.options.font.size=this.baseFontSize}this.updateLabelModule()}},{key:"draw",value:function e(t){var i=this.getFormattingValues();this.shape.draw(t,this.x,this.y,this.selected,this.hover,i)}},{key:"updateBoundingBox",value:function e(t){this.shape.updateBoundingBox(this.x,this.y,t)}},{key:"resize",value:function e(t){var i=this.getFormattingValues();this.shape.resize(t,this.selected,this.hover,i)}},{key:"isOverlappingWith",value:function e(t){return this.shape.left<t.right&&this.shape.left+this.shape.width>t.left&&this.shape.top<t.bottom&&this.shape.top+this.shape.height>t.top}},{key:"isBoundingBoxOverlappingWith",value:function e(t){return this.shape.boundingBox.left<t.right&&this.shape.boundingBox.right>t.left&&this.shape.boundingBox.top<t.bottom&&this.shape.boundingBox.bottom>t.top}}],[{key:"parseOptions",value:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var r=["color","font","fixed","shadow"];d.selectiveNotDeepExtend(r,t,i,n);d.mergeOptions(t,i,"shadow",n,s);if(i.color!==undefined&&i.color!==null){var o=d.parseColor(i.color);d.fillIfDefined(t.color,o)}else if(n===true&&i.color===null){t.color=d.bridgeObject(s.color)}if(i.fixed!==undefined&&i.fixed!==null){if(typeof i.fixed==="boolean"){t.fixed.x=i.fixed;t.fixed.y=i.fixed}else{if(i.fixed.x!==undefined&&typeof i.fixed.x==="boolean"){t.fixed.x=i.fixed.x}if(i.fixed.y!==undefined&&typeof i.fixed.y==="boolean"){t.fixed.y=i.fixed.y}}}if(i.font!==undefined&&i.font!==null){u.parseOptions(t.font,i)}else if(n===true&&i.font===null){t.font=d.bridgeObject(s.font)}if(i.scaling!==undefined){d.mergeOptions(t.scaling,i.scaling,"label",n,s.scaling)}}}]);return e}();t["default"]=E},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(170);var s=c(n);var r=i(2);var o=c(r);var a=i(62);var l=c(a);var h=i(134);var d=c(h);var u=i(135);var f=c(u);function c(e){return e&&e.__esModule?e:{default:e}}var p=i(1);var m=function(){function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;(0,d["default"])(this,e);this.body=t;this.pointToSelf=false;this.baseSize=undefined;this.fontOptions={};this.setOptions(i);this.size={top:0,left:0,width:0,height:0,yLine:0};this.isEdgeLabel=n}(0,f["default"])(e,[{key:"setOptions",value:function t(i){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;this.elementOptions=i;this.fontOptions=p.deepExtend({},i.font,true);if(i.label!==undefined){this.labelDirty=true}if(i.font!==undefined){e.parseOptions(this.fontOptions,i,n);if(typeof i.font==="string"){this.baseSize=this.fontOptions.size}else if((0,l["default"])(i.font)==="object"){if(i.font.size!==undefined){this.baseSize=i.font.size}}}}},{key:"constrain",value:function e(t,i,n){this.fontOptions.constrainWidth=false;this.fontOptions.maxWdt=-1;this.fontOptions.minWdt=-1;var s=[i,t,n];var r=p.topMost(s,"widthConstraint");if(typeof r==="number"){this.fontOptions.maxWdt=Number(r);this.fontOptions.minWdt=Number(r)}else if((typeof r==="undefined"?"undefined":(0,l["default"])(r))==="object"){var o=p.topMost(s,["widthConstraint","maximum"]);if(typeof o==="number"){this.fontOptions.maxWdt=Number(o)}var a=p.topMost(s,["widthConstraint","minimum"]);if(typeof a==="number"){this.fontOptions.minWdt=Number(a)}}this.fontOptions.constrainHeight=false;this.fontOptions.minHgt=-1;this.fontOptions.valign="middle";var h=p.topMost(s,"heightConstraint");if(typeof h==="number"){this.fontOptions.minHgt=Number(h)}else if((typeof h==="undefined"?"undefined":(0,l["default"])(h))==="object"){var d=p.topMost(s,["heightConstraint","minimum"]);if(typeof d==="number"){this.fontOptions.minHgt=Number(d)}var u=p.topMost(s,["heightConstraint","valign"]);if(typeof u==="string"){if(u==="top"||u==="bottom"){this.fontOptions.valign=u}}}}},{key:"choosify",value:function e(t,i,n){this.fontOptions.chooser=true;var s=[i,t,n];var r=p.topMost(s,"chosen");if(typeof r==="boolean"){this.fontOptions.chooser=r}else if((typeof r==="undefined"?"undefined":(0,l["default"])(r))==="object"){var o=p.topMost(s,["chosen","label"]);if(typeof o==="boolean"||typeof o==="function"){this.fontOptions.chooser=o}}}},{key:"adjustSizes",value:function e(t){var i=t?t.right+t.left:0;if(this.fontOptions.constrainWidth){this.fontOptions.maxWdt-=i;this.fontOptions.minWdt-=i}var n=t?t.top+t.bottom:0;if(this.fontOptions.constrainHeight){this.fontOptions.minHgt-=n}}},{key:"propagateFonts",value:function t(i,n,s){if(!this.fontOptions.multi)return;var r=function e(t,i){if(!t||!t.font)return null;var n=t.font;if(i){if(!n[i])return null;n=n[i]}return n};var a=function e(t,i,n){var s=r(t,i);if(s&&s.hasOwnProperty(n)){return s[n]}return null};var l=["bold","ital","boldital","mono"];var h=true;var d=false;var u=undefined;try{for(var f=(0,o["default"])(l),c;!(h=(c=f.next()).done);h=true){var p=c.value;var m=this.fontOptions[p];var v=s.font[p];if(e.parseFontString(m,r(i,p))){m.vadjust=this.fontOptions.vadjust;m.mod=v.mod}else{m.face=a(i,p,"face")||a(n,p,"face")||(p==="mono"?v.face:null)||a(n,null,"face")||this.fontOptions.face;m.color=a(i,p,"color")||a(n,p,"color")||a(n,null,"color")||this.fontOptions.color;m.mod=a(i,p,"mod")||a(n,p,"mod")||a(n,null,"mod")||v.mod;var g=void 0;if(m.face===v.face&&this.fontOptions.face===s.font.face){g=this.fontOptions.size/Number(s.font.size)}m.size=a(i,p,"size")||a(n,p,"size")||(g?v.size*g:null)||a(n,null,"size")||this.fontOptions.size;m.vadjust=a(i,p,"vadjust")||a(n,p,"vadjust")||(g?v.vadjust*Math.round(g):null)||this.fontOptions.vadjust}m.size=Number(m.size);m.vadjust=Number(m.vadjust)}}catch(e){d=true;u=e}finally{try{if(!h&&f["return"]){f["return"]()}}finally{if(d){throw u}}}}},{key:"draw",value:function e(t,i,n,s,r){var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:"middle";if(this.elementOptions.label===undefined)return;var a=this.fontOptions.size*this.body.view.scale;if(this.elementOptions.label&&a<this.elementOptions.scaling.label.drawThreshold-1)return;this.calculateLabelSize(t,s,r,i,n,o);this._drawBackground(t);this._drawText(t,s,r,i,n,o)}},{key:"_drawBackground",value:function e(t){if(this.fontOptions.background!==undefined&&this.fontOptions.background!=="none"){t.fillStyle=this.fontOptions.background;var i=2;if(this.isEdgeLabel){switch(this.fontOptions.align){case"middle":t.fillRect(-this.size.width*.5,-this.size.height*.5,this.size.width,this.size.height);break;case"top":t.fillRect(-this.size.width*.5,-(this.size.height+i),this.size.width,this.size.height);break;case"bottom":t.fillRect(-this.size.width*.5,i,this.size.width,this.size.height);break;default:t.fillRect(this.size.left,this.size.top-.5*i,this.size.width,this.size.height);break}}else{t.fillRect(this.size.left,this.size.top-.5*i,this.size.width,this.size.height)}}}},{key:"_drawText",value:function e(t,i,n,r,o){var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:"middle";var l=this.fontOptions.size;var h=l*this.body.view.scale;if(h>=this.elementOptions.scaling.label.maxVisible){l=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale}var d=this.size.yLine;var u=this._setAlignment(t,r,d,a);var f=(0,s["default"])(u,2);r=f[0];d=f[1];t.textAlign="left";r=r-this.size.width/2;if(this.fontOptions.valign&&this.size.height>this.size.labelHeight){if(this.fontOptions.valign==="top"){d-=(this.size.height-this.size.labelHeight)/2}if(this.fontOptions.valign==="bottom"){d+=(this.size.height-this.size.labelHeight)/2}}for(var c=0;c<this.lineCount;c++){if(this.lines[c]&&this.lines[c].blocks){var p=0;if(this.isEdgeLabel||this.fontOptions.align==="center"){p+=(this.size.width-this.lines[c].width)/2}else if(this.fontOptions.align==="right"){p+=this.size.width-this.lines[c].width}for(var m=0;m<this.lines[c].blocks.length;m++){var v=this.lines[c].blocks[m];t.font=v.font;var g=this._getColor(v.color,h,v.strokeColor),y=(0,s["default"])(g,2),b=y[0],w=y[1];if(v.strokeWidth>0){t.lineWidth=v.strokeWidth;t.strokeStyle=w;t.lineJoin="round"}t.fillStyle=b;if(v.strokeWidth>0){t.strokeText(v.text,r+p,d+v.vadjust)}t.fillText(v.text,r+p,d+v.vadjust);p+=v.width}d+=this.lines[c].height}}}},{key:"_setAlignment",value:function e(t,i,n,s){if(this.isEdgeLabel&&this.fontOptions.align!=="horizontal"&&this.pointToSelf===false){i=0;n=0;var r=2;if(this.fontOptions.align==="top"){t.textBaseline="alphabetic";n-=2*r}else if(this.fontOptions.align==="bottom"){t.textBaseline="hanging";n+=2*r}else{t.textBaseline="middle"}}else{t.textBaseline=s}return[i,n]}},{key:"_getColor",value:function e(t,i,n){var s=t||"#000000";var r=n||"#ffffff";if(i<=this.elementOptions.scaling.label.drawThreshold){var o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-i)));s=p.overrideOpacity(s,o);r=p.overrideOpacity(r,o)}return[s,r]}},{key:"getTextSize",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;this._processLabel(t,i,n);return{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"calculateLabelSize",value:function e(t,i,n){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var o=arguments.length>5&&arguments[5]!==undefined?arguments[5]:"middle";if(this.labelDirty===true){this._processLabel(t,i,n)}this.size.left=s-this.size.width*.5;this.size.top=r-this.size.height*.5;this.size.yLine=r+(1-this.lineCount)*.5*this.fontOptions.size;if(o==="hanging"){this.size.top+=.5*this.fontOptions.size;this.size.top+=4;this.size.yLine+=4}this.labelDirty=false}},{key:"decodeMarkupSystem",value:function e(t){var i="none";if(t==="markdown"||t==="md"){i="markdown"}else if(t===true||t==="html"){i="html"}return i}},{key:"splitBlocks",value:function e(t,i){var n=this.decodeMarkupSystem(i);if(n==="none"){return[{text:t,mod:"normal"}]}else if(n==="markdown"){return this.splitMarkdownBlocks(t)}else if(n==="html"){return this.splitHtmlBlocks(t)}}},{key:"splitMarkdownBlocks",value:function e(t){var i=[];var n={bold:false,ital:false,mono:false,beginable:true,spacing:false,position:0,buffer:"",modStack:[]};n.mod=function(){return this.modStack.length===0?"normal":this.modStack[0]};n.modName=function(){if(this.modStack.length===0)return"normal";else if(this.modStack[0]==="mono")return"mono";else{if(n.bold&&n.ital){return"boldital"}else if(n.bold){return"bold"}else if(n.ital){return"ital"}}};n.emitBlock=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.spacing){this.add(" ");this.spacing=false}if(this.buffer.length>0){i.push({text:this.buffer,mod:this.modName()});this.buffer=""}};n.add=function(e){if(e===" "){n.spacing=true}if(n.spacing){this.buffer+=" ";this.spacing=false}if(e!=" "){this.buffer+=e}};while(n.position<t.length){var s=t.charAt(n.position);if(/[ \t]/.test(s)){if(!n.mono){n.spacing=true}else{n.add(s)}n.beginable=true}else if(/\\/.test(s)){if(n.position<t.length+1){n.position++;s=t.charAt(n.position);if(/ \t/.test(s)){n.spacing=true}else{n.add(s);n.beginable=false}}}else if(!n.mono&&!n.bold&&(n.beginable||n.spacing)&&/\*/.test(s)){n.emitBlock();n.bold=true;n.modStack.unshift("bold")}else if(!n.mono&&!n.ital&&(n.beginable||n.spacing)&&/\_/.test(s)){n.emitBlock();n.ital=true;n.modStack.unshift("ital")}else if(!n.mono&&(n.beginable||n.spacing)&&/`/.test(s)){n.emitBlock();n.mono=true;n.modStack.unshift("mono")}else if(!n.mono&&n.mod()==="bold"&&/\*/.test(s)){if(n.position===t.length-1||/[.,_` \t\n]/.test(t.charAt(n.position+1))){n.emitBlock();n.bold=false;n.modStack.shift()}else{n.add(s)}}else if(!n.mono&&n.mod()==="ital"&&/\_/.test(s)){if(n.position===t.length-1||/[.,*` \t\n]/.test(t.charAt(n.position+1))){n.emitBlock();n.ital=false;n.modStack.shift()}else{n.add(s)}}else if(n.mono&&n.mod()==="mono"&&/`/.test(s)){if(n.position===t.length-1||/[.,*_ \t\n]/.test(t.charAt(n.position+1))){n.emitBlock();n.mono=false;n.modStack.shift()}else{n.add(s)}}else{n.add(s);n.beginable=false}n.position++}n.emitBlock();return i}},{key:"splitHtmlBlocks",value:function e(t){var i=[];var n={bold:false,ital:false,mono:false,spacing:false,position:0,buffer:"",modStack:[]};n.mod=function(){return this.modStack.length===0?"normal":this.modStack[0]};n.modName=function(){if(this.modStack.length===0)return"normal";else if(this.modStack[0]==="mono")return"mono";else{if(n.bold&&n.ital){return"boldital"}else if(n.bold){return"bold"}else if(n.ital){return"ital"}}};n.emitBlock=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.spacing){this.add(" ");this.spacing=false}if(this.buffer.length>0){i.push({text:this.buffer,mod:this.modName()});this.buffer=""}};n.add=function(e){if(e===" "){n.spacing=true}if(n.spacing){this.buffer+=" ";this.spacing=false}if(e!=" "){this.buffer+=e}};while(n.position<t.length){var s=t.charAt(n.position);if(/[ \t]/.test(s)){if(!n.mono){n.spacing=true}else{n.add(s)}}else if(/</.test(s)){if(!n.mono&&!n.bold&&/<b>/.test(t.substr(n.position,3))){n.emitBlock();n.bold=true;n.modStack.unshift("bold");n.position+=2}else if(!n.mono&&!n.ital&&/<i>/.test(t.substr(n.position,3))){n.emitBlock();n.ital=true;n.modStack.unshift("ital");n.position+=2}else if(!n.mono&&/<code>/.test(t.substr(n.position,6))){n.emitBlock();n.mono=true;n.modStack.unshift("mono");n.position+=5}else if(!n.mono&&n.mod()==="bold"&&/<\/b>/.test(t.substr(n.position,4))){n.emitBlock();n.bold=false;n.modStack.shift();n.position+=3}else if(!n.mono&&n.mod()==="ital"&&/<\/i>/.test(t.substr(n.position,4))){n.emitBlock();n.ital=false;n.modStack.shift();n.position+=3}else if(n.mod()==="mono"&&/<\/code>/.test(t.substr(n.position,7))){n.emitBlock();n.mono=false;n.modStack.shift();n.position+=6}else{n.add(s)}}else if(/&/.test(s)){if(/&lt;/.test(t.substr(n.position,4))){n.add("<");n.position+=3}else if(/&amp;/.test(t.substr(n.position,5))){n.add("&");n.position+=4}else{n.add("&")}}else{n.add(s)}n.position++}n.emitBlock();return i}},{key:"getFormattingValues",value:function e(t,i,n,s){var r=function e(t,i,n){if(i==="normal"){if(n==="mod")return"";return t[n]}if(t[i][n]){return t[i][n]}else{return t[n]}};var o={color:r(this.fontOptions,s,"color"),size:r(this.fontOptions,s,"size"),face:r(this.fontOptions,s,"face"),mod:r(this.fontOptions,s,"mod"),vadjust:r(this.fontOptions,s,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};if(s==="normal"){if(i||n){if(this.fontOptions.chooser===true&&this.elementOptions.labelHighlightBold){o.mod="bold"}else if(typeof this.fontOptions.chooser==="function"){this.fontOptions.chooser(t,o,this.elementOptions.id,i,n)}}}else{if((i||n)&&typeof this.fontOptions.chooser==="function"){this.fontOptions.chooser(t,o,this.elementOptions.id,i,n)}}t.font=(o.mod+" "+o.size+"px "+o.face).replace(/"/g,"");o.font=t.font;o.height=o.size;return o}},{key:"differentState",value:function e(t,i){return t!==this.fontOptions.selectedState&&i!==this.fontOptions.hoverState}},{key:"_processLabel",value:function e(t,i,n){var s=0;var r=0;var o=[];var a=[];var l=0;a.add=function(e,t,i,n,s,r,o,a,l,h){if(this.length==e){this[e]={width:0,height:0,blocks:[]}}this[e].blocks.push({text:t,font:i,color:n,width:s,height:r,vadjust:o,mod:a,strokeWidth:l,strokeColor:h})};a.accumulate=function(e,t,i){this[e].width+=t;this[e].height=i>this[e].height?i:this[e].height};a.addAndAccumulate=function(e,t,i,n,s,r,o,a,l,h){this.add(e,t,i,n,s,r,o,a,l,h);this.accumulate(e,s,r)};if(this.elementOptions.label!==undefined){var h=String(this.elementOptions.label).split("\n");var d=h.length;if(this.elementOptions.font.multi){for(var u=0;u<d;u++){var f=this.splitBlocks(h[u],this.elementOptions.font.multi);var c=0;var p=0;if(f){if(f.length==0){var m=this.getFormattingValues(t,i,n,"normal");a.addAndAccumulate(l,"",m.font,m.color,0,m.size,m.vadjust,"normal",m.strokeWidth,m.strokeColor);r+=a[l].height;l++;continue}for(var v=0;v<f.length;v++){if(this.fontOptions.maxWdt>0){var g=this.getFormattingValues(t,i,n,f[v].mod);var y=f[v].text.split(" ");var b=true;var w="";var _={width:0};var x=void 0;var k=0;while(k<y.length){var C=b?"":" ";x=_;_=t.measureText(w+C+y[k]);if(c+_.width>this.fontOptions.maxWdt&&x.width!=0){p=g.height>p?g.height:p;a.add(l,w,g.font,g.color,x.width,g.height,g.vadjust,f[v].mod,g.strokeWidth,g.strokeColor);a.accumulate(l,x.width,p);w="";b=true;c=0;s=a[l].width>s?a[l].width:s;r+=a[l].height;l++}else{w=w+C+y[k];if(k===y.length-1){p=g.height>p?g.height:p;c+=_.width;a.add(l,w,g.font,g.color,_.width,g.height,g.vadjust,f[v].mod,g.strokeWidth,g.strokeColor);a.accumulate(l,_.width,p);if(v===f.length-1){s=a[l].width>s?a[l].width:s;r+=a[l].height;l++}}k++;b=false}}}else{var S=this.getFormattingValues(t,i,n,f[v].mod);var T=t.measureText(f[v].text);a.addAndAccumulate(l,f[v].text,S.font,S.color,T.width,S.height,S.vadjust,f[v].mod,S.strokeWidth,S.strokeColor);s=a[l].width>s?a[l].width:s;if(f.length-1===v){r+=a[l].height;l++}}}}}}else{for(var M=0;M<d;M++){var D=this.getFormattingValues(t,i,n,"normal");if(this.fontOptions.maxWdt>0){var E=h[M].split(" ");var O="";var P={width:0};var I=void 0;var A=0;while(A<E.length){var N=O===""?"":" ";I=P;P=t.measureText(O+N+E[A]);if(P.width>this.fontOptions.maxWdt&&I.width!=0){a.addAndAccumulate(l,O,D.font,D.color,I.width,D.size,D.vadjust,"normal",D.strokeWidth,D.strokeColor);s=a[l].width>s?a[l].width:s;r+=a[l].height;O="";l++}else{O=O+N+E[A];if(A===E.length-1){a.addAndAccumulate(l,O,D.font,D.color,P.width,D.size,D.vadjust,"normal",D.strokeWidth,D.strokeColor);s=a[l].width>s?a[l].width:s;r+=a[l].height;l++}A++}}}else{var F=h[M];var R=t.measureText(F);a.addAndAccumulate(l,F,D.font,D.color,R.width,D.size,D.vadjust,"normal",D.strokeWidth,D.strokeColor);s=a[l].width>s?a[l].width:s;r+=a[l].height;l++}}}}if(this.fontOptions.minWdt>0&&s<this.fontOptions.minWdt){s=this.fontOptions.minWdt}this.size.labelHeight=r;if(this.fontOptions.minHgt>0&&r<this.fontOptions.minHgt){r=this.fontOptions.minHgt}this.lines=a;this.lineCount=a.length;this.size.width=s;this.size.height=r;this.selectedState=i;this.hoverState=n}}],[{key:"parseOptions",value:function t(i,n){var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(e.parseFontString(i,n.font)){i.vadjust=0}else if((0,l["default"])(n.font)==="object"){p.fillIfDefined(i,n.font,s)}i.size=Number(i.size);i.vadjust=Number(i.vadjust)}},{key:"parseFontString",value:function e(t,i){if(!i||typeof i!=="string")return false;var n=i.split(" ");t.size=n[0].replace("px","");t.face=n[1];t.color=n[2];return true}}]);return e}();t["default"]=m},function(e,t,i){"use strict";t.__esModule=true;var n=i(171);var s=a(n);var r=i(2);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(){function e(e,t){var i=[];var n=true;var s=false;var r=undefined;try{for(var a=(0,o.default)(e),l;!(n=(l=a.next()).done);n=true){i.push(l.value);if(t&&i.length===t)break}}catch(e){s=true;r=e}finally{try{if(!n&&a["return"])a["return"]()}finally{if(s)throw r}}return i}return function(t,i){if(Array.isArray(t)){return t}else if((0,s.default)(Object(t))){return e(t,i)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}()},function(e,t,i){e.exports={default:i(172),__esModule:true}},function(e,t,i){i(4);i(50);e.exports=i(173)},function(e,t,i){var n=i(54),s=i(47)("iterator"),r=i(8);e.exports=i(17).isIterable=function(e){var t=Object(e);return t[s]!==undefined||"@@iterator"in t||r.hasOwnProperty(n(t))}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(184);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n){(0,o["default"])(this,t);var r=(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n));r._setMargins(n);return r}(0,l["default"])(t,[{key:"resize",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.selected;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.hover;if(this.needsRefresh(i,n)){this.textSize=this.labelModule.getTextSize(t,i,n);this.width=this.textSize.width+this.margin.right+this.margin.left;this.height=this.textSize.height+this.margin.top+this.margin.bottom;this.radius=this.width/2}}},{key:"draw",value:function e(t,i,n,s,r,o){this.resize(t,s,r);this.left=i-this.width/2;this.top=n-this.height/2;t.strokeStyle=o.borderColor;t.lineWidth=o.borderWidth;t.lineWidth/=this.body.view.scale;t.lineWidth=Math.min(this.width,t.lineWidth);t.fillStyle=o.color;t.roundRect(this.left,this.top,this.width,this.height,o.borderRadius);this.enableShadow(t,o);t.fill();this.disableShadow(t,o);t.save();if(o.borderWidth>0){this.enableBorderDashes(t,o);t.stroke();this.disableBorderDashes(t,o)}t.restore();this.updateBoundingBox(i,n,t,s,r);this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,s,r)}},{key:"updateBoundingBox",value:function e(t,i,n,s,r){this.resize(n,s,r);this.left=t-this.width/2;this.top=i-this.height/2;var o=this.options.shapeProperties.borderRadius;this.boundingBox.left=this.left-o;this.boundingBox.top=this.top-o;this.boundingBox.bottom=this.top+this.height+o;this.boundingBox.right=this.left+this.width+o}},{key:"distanceToBorder",value:function e(t,i){this.resize(t);var n=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(i)),Math.abs(this.height/2/Math.sin(i)))+n}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){e.exports={default:i(176),__esModule:true}},function(e,t,i){i(177);e.exports=i(17).Object.getPrototypeOf},function(e,t,i){var n=i(49),s=i(48);i(61)("getPrototypeOf",function(){return function e(t){return s(n(t))}})},function(e,t,i){"use strict";t.__esModule=true;var n=i(62);var s=r(n);function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&((typeof t==="undefined"?"undefined":(0,s.default)(t))==="object"||typeof t==="function")?t:e}},function(e,t,i){"use strict";t.__esModule=true;var n=i(180);var s=h(n);var r=i(55);var o=h(r);var a=i(62);var l=h(a);function h(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+(typeof t==="undefined"?"undefined":(0,
l.default)(t)))}e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)s.default?(0,s.default)(e,t):e.__proto__=t}},function(e,t,i){e.exports={default:i(181),__esModule:true}},function(e,t,i){i(182);e.exports=i(17).Object.setPrototypeOf},function(e,t,i){var n=i(15);n(n.S,"Object",{setPrototypeOf:i(183).set})},function(e,t,i){var n=i(23),s=i(22);var r=function(e,t){s(e);if(!n(t)&&t!==null)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=i(18)(Function.call,i(78).f(Object.prototype,"__proto__").set,2);n(e,[]);t=!(e instanceof Array)}catch(e){t=true}return function e(i,s){r(i,s);if(t)i.__proto__=s;else n(i,s);return i}}({},false):undefined),check:r}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(62);var s=h(n);var r=i(134);var o=h(r);var a=i(135);var l=h(a);function h(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t,i,n){(0,o["default"])(this,e);this.body=i;this.labelModule=n;this.setOptions(t);this.top=undefined;this.left=undefined;this.height=undefined;this.width=undefined;this.radius=undefined;this.margin=undefined;this.refreshNeeded=true;this.boundingBox={top:0,left:0,right:0,bottom:0}}(0,l["default"])(e,[{key:"setOptions",value:function e(t){this.options=t}},{key:"_setMargins",value:function e(t){this.margin={};if(this.options.margin){if((0,s["default"])(this.options.margin)=="object"){this.margin.top=this.options.margin.top;this.margin.right=this.options.margin.right;this.margin.bottom=this.options.margin.bottom;this.margin.left=this.options.margin.left}else{this.margin.top=this.options.margin;this.margin.right=this.options.margin;this.margin.bottom=this.options.margin;this.margin.left=this.options.margin}}t.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function e(t,i){var n=this.options.borderWidth;this.resize(t);return Math.min(Math.abs(this.width/2/Math.cos(i)),Math.abs(this.height/2/Math.sin(i)))+n}},{key:"enableShadow",value:function e(t,i){if(i.shadow){t.shadowColor=i.shadowColor;t.shadowBlur=i.shadowSize;t.shadowOffsetX=i.shadowX;t.shadowOffsetY=i.shadowY}}},{key:"disableShadow",value:function e(t,i){if(i.shadow){t.shadowColor="rgba(0,0,0,0)";t.shadowBlur=0;t.shadowOffsetX=0;t.shadowOffsetY=0}}},{key:"enableBorderDashes",value:function e(t,i){if(i.borderDashes!==false){if(t.setLineDash!==undefined){var n=i.borderDashes;if(n===true){n=[5,15]}t.setLineDash(n)}else{console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used.");this.options.shapeProperties.borderDashes=false;i.borderDashes=false}}}},{key:"disableBorderDashes",value:function e(t,i){if(i.borderDashes!==false){if(t.setLineDash!==undefined){t.setLineDash([0])}else{console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used.");this.options.shapeProperties.borderDashes=false;i.borderDashes=false}}}},{key:"needsRefresh",value:function e(t,i){if(this.refreshNeeded===true){this.refreshNeeded=false;return true}return this.width===undefined||this.labelModule.differentState(t,i)}}]);return e}();t["default"]=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(186);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n){(0,o["default"])(this,t);var r=(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n));r._setMargins(n);return r}(0,l["default"])(t,[{key:"resize",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.selected;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.hover;if(this.needsRefresh(i,n)){this.textSize=this.labelModule.getTextSize(t,i,n);var s=Math.max(this.textSize.width+this.margin.right+this.margin.left,this.textSize.height+this.margin.top+this.margin.bottom);this.options.size=s/2;this.width=s;this.height=s;this.radius=this.width/2}}},{key:"draw",value:function e(t,i,n,s,r,o){this.resize(t,s,r);this.left=i-this.width/2;this.top=n-this.height/2;this._drawRawCircle(t,i,n,o);this.boundingBox.top=n-o.size;this.boundingBox.left=i-o.size;this.boundingBox.right=i+o.size;this.boundingBox.bottom=n+o.size;this.updateBoundingBox(i,n);this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,n,s,r)}},{key:"updateBoundingBox",value:function e(t,i){this.boundingBox.top=i-this.options.size;this.boundingBox.left=t-this.options.size;this.boundingBox.right=t+this.options.size;this.boundingBox.bottom=i+this.options.size}},{key:"distanceToBorder",value:function e(t,i){this.resize(t);return this.width*.5}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=g(n);var r=i(134);var o=g(r);var a=i(135);var l=g(a);var h=i(178);var d=g(h);var u=i(179);var f=g(u);var c=i(184);var p=g(c);var m=i(165);var v=g(m);function g(e){return e&&e.__esModule?e:{default:e}}var y=function(e){(0,f["default"])(t,e);function t(e,i,n){(0,o["default"])(this,t);var r=(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n));r.labelOffset=0;r.selected=false;return r}(0,l["default"])(t,[{key:"setOptions",value:function e(t,i,n){this.options=t;if(!(i===undefined&&n===undefined)){this.setImages(i,n)}}},{key:"setImages",value:function e(t,i){if(i&&this.selected){this.imageObj=i;this.imageObjAlt=t}else{this.imageObj=t;this.imageObjAlt=i}}},{key:"switchImages",value:function e(t){var i=t&&!this.selected||!t&&this.selected;this.selected=t;if(this.imageObjAlt!==undefined&&i){var n=this.imageObj;this.imageObj=this.imageObjAlt;this.imageObjAlt=n}}},{key:"_resizeImage",value:function e(){var t,i;if(this.options.shapeProperties.useImageSize===false){var n=1;var s=1;if(this.imageObj.width&&this.imageObj.height){if(this.imageObj.width>this.imageObj.height){n=this.imageObj.width/this.imageObj.height}else{s=this.imageObj.height/this.imageObj.width}}t=this.options.size*2*n;i=this.options.size*2*s}else{t=this.imageObj.width;i=this.imageObj.height}this.width=t;this.height=i;this.radius=.5*this.width}},{key:"_drawRawCircle",value:function e(t,i,n,s){var r=s.borderWidth/this.body.view.scale;t.lineWidth=Math.min(this.width,r);t.strokeStyle=s.borderColor;t.fillStyle=s.color;t.circle(i,n,s.size);this.enableShadow(t,s);t.fill();this.disableShadow(t,s);t.save();if(r>0){this.enableBorderDashes(t,s);t.stroke();this.disableBorderDashes(t,s)}t.restore()}},{key:"_drawImageAtPosition",value:function e(t,i){if(this.imageObj.width!=0){t.globalAlpha=1;this.enableShadow(t,i);var n=1;if(this.options.shapeProperties.interpolation===true){n=this.imageObj.width/this.width/this.body.view.scale}this.imageObj.drawImageAtPosition(t,n,this.left,this.top,this.width,this.height);this.disableShadow(t,i)}}},{key:"_drawImageLabel",value:function e(t,i,n,s,r){var o;var a=0;if(this.height!==undefined){a=this.height*.5;var l=this.labelModule.getTextSize(t,s,r);if(l.lineCount>=1){a+=l.height/2}}o=n+a;if(this.options.label){this.labelOffset=a}this.labelModule.draw(t,i,o,s,r,"hanging")}}]);return t}(p["default"]);t["default"]=y},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(186);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n,r,a){(0,o["default"])(this,t);var l=(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n));l.setImages(r,a);return l}(0,l["default"])(t,[{key:"resize",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.selected;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.hover;var s=this.imageObj.src===undefined||this.imageObj.width===undefined||this.imageObj.height===undefined;if(s){var r=this.options.size*2;this.width=r;this.height=r;this.radius=.5*this.width;return}if(this.needsRefresh(i,n)){this._resizeImage()}}},{key:"draw",value:function e(t,i,n,s,r,o){this.switchImages(s);this.resize();this.left=i-this.width/2;this.top=n-this.height/2;this._drawRawCircle(t,i,n,o);t.save();t.clip();this._drawImageAtPosition(t,o);t.restore();this._drawImageLabel(t,i,n,s,r);this.updateBoundingBox(i,n)}},{key:"updateBoundingBox",value:function e(t,i){this.boundingBox.top=i-this.options.size;this.boundingBox.left=t-this.options.size;this.boundingBox.right=t+this.options.size;this.boundingBox.bottom=i+this.options.size;this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left);this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width);this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function e(t,i){this.resize(t);return this.width*.5}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(184);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n){(0,o["default"])(this,t);var r=(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n));r._setMargins(n);return r}(0,l["default"])(t,[{key:"resize",value:function e(t,i,n){if(this.needsRefresh(i,n)){this.textSize=this.labelModule.getTextSize(t,i,n);var s=this.textSize.width+this.margin.right+this.margin.left;this.width=s;this.height=s;this.radius=this.width/2}}},{key:"draw",value:function e(t,i,n,s,r,o){this.resize(t,s,r);this.left=i-this.width/2;this.top=n-this.height/2;var a=o.borderWidth/this.body.view.scale;t.lineWidth=Math.min(this.width,a);t.strokeStyle=o.borderColor;t.fillStyle=o.color;t.database(i-this.width/2,n-this.height/2,this.width,this.height);this.enableShadow(t,o);t.fill();this.disableShadow(t,o);t.save();if(a>0){this.enableBorderDashes(t,o);t.stroke();this.disableBorderDashes(t,o)}t.restore();this.updateBoundingBox(i,n,t,s,r);this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,s,r)}},{key:"updateBoundingBox",value:function e(t,i,n,s,r){this.resize(n,s,r);this.left=t-this.width*.5;this.top=i-this.height*.5;this.boundingBox.left=this.left;this.boundingBox.top=this.top;this.boundingBox.bottom=this.top+this.height;this.boundingBox.right=this.left+this.width}},{key:"distanceToBorder",value:function e(t,i){return this._distanceToBorder(t,i)}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(190);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n){(0,o["default"])(this,t);return(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n))}(0,l["default"])(t,[{key:"draw",value:function e(t,i,n,s,r,o){this._drawShape(t,"diamond",4,i,n,s,r,o)}},{key:"distanceToBorder",value:function e(t,i){return this._distanceToBorder(t,i)}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(184);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n){(0,o["default"])(this,t);return(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n))}(0,l["default"])(t,[{key:"resize",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.selected;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.hover;var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{size:this.options.size};if(this.needsRefresh(i,n)){this.labelModule.getTextSize(t,i,n);var r=2*s.size;this.width=r;this.height=r;this.radius=.5*this.width}}},{key:"_drawShape",value:function e(t,i,n,s,r,o,a,l){this.resize(t,o,a,l);this.left=s-this.width/2;this.top=r-this.height/2;var h=l.borderWidth/this.body.view.scale;t.lineWidth=Math.min(this.width,h);t.strokeStyle=l.borderColor;t.fillStyle=l.color;t[i](s,r,l.size);this.enableShadow(t,l);t.fill();this.disableShadow(t,l);t.save();if(h>0){this.enableBorderDashes(t,l);t.stroke();this.disableBorderDashes(t,l)}t.restore();if(this.options.label!==undefined){this.labelModule.calculateLabelSize(t,o,a,s,r,"hanging");var d=r+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(t,s,d,o,a,"hanging")}this.updateBoundingBox(s,r)}},{key:"updateBoundingBox",value:function e(t,i){this.boundingBox.top=i-this.options.size;this.boundingBox.left=t-this.options.size;this.boundingBox.right=t+this.options.size;this.boundingBox.bottom=i+this.options.size;if(this.options.label!==undefined&&this.labelModule.size.width>0){this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left);this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width);this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height)}}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(190);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n){(0,o["default"])(this,t);return(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n))}(0,l["default"])(t,[{key:"draw",value:function e(t,i,n,s,r,o){this._drawShape(t,"circle",2,i,n,s,r,o)}},{key:"distanceToBorder",value:function e(t,i){this.resize(t);return this.options.size}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(184);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n){(0,o["default"])(this,t);return(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n))}(0,l["default"])(t,[{key:"resize",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.selected;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.hover;if(this.needsRefresh(i,n)){var s=this.labelModule.getTextSize(t,i,n);this.height=s.height*2;this.width=s.width+this.height;this.radius=.5*this.width}}},{key:"draw",value:function e(t,i,n,s,r,o){this.resize(t,s,r);this.left=i-this.width*.5;this.top=n-this.height*.5;var a=o.borderWidth/this.body.view.scale;t.lineWidth=Math.min(this.width,a);t.strokeStyle=o.borderColor;t.fillStyle=o.color;t.ellipse_vis(this.left,this.top,this.width,this.height);this.enableShadow(t,o);t.fill();this.disableShadow(t,o);t.save();if(a>0){this.enableBorderDashes(t,o);t.stroke();this.disableBorderDashes(t,o)}t.restore();this.updateBoundingBox(i,n,t,s,r);this.labelModule.draw(t,i,n,s,r)}},{key:"updateBoundingBox",value:function e(t,i,n,s,r){this.resize(n,s,r);this.left=t-this.width*.5;this.top=i-this.height*.5;this.boundingBox.left=this.left;this.boundingBox.top=this.top;this.boundingBox.bottom=this.top+this.height;this.boundingBox.right=this.left+this.width}},{key:"distanceToBorder",value:function e(t,i){this.resize(t);var n=this.width*.5;var s=this.height*.5;var r=Math.sin(i)*n;var o=Math.cos(i)*s;return n*s/Math.sqrt(r*r+o*o)}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(184);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n){(0,o["default"])(this,t);var r=(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n));r._setMargins(n);return r}(0,l["default"])(t,[{key:"resize",value:function e(t,i,n){if(this.needsRefresh(i,n)){this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)};this.width=this.iconSize.width+this.margin.right+this.margin.left;this.height=this.iconSize.height+this.margin.top+this.margin.bottom;this.radius=.5*this.width}}},{key:"draw",value:function e(t,i,n,s,r,o){this.resize(t,s,r);this.options.icon.size=this.options.icon.size||50;this.left=i-this.width/2;this.top=n-this.height/2;this._icon(t,i,n,s,r,o);if(this.options.label!==undefined){var a=5;this.labelModule.draw(t,this.left+this.iconSize.width/2+this.margin.left,n+this.height/2+a,s)}this.updateBoundingBox(i,n)}},{key:"updateBoundingBox",value:function e(t,i){this.boundingBox.top=i-this.options.icon.size*.5;this.boundingBox.left=t-this.options.icon.size*.5;this.boundingBox.right=t+this.options.icon.size*.5;this.boundingBox.bottom=i+this.options.icon.size*.5;if(this.options.label!==undefined&&this.labelModule.size.width>0){var n=5;this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left);this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width);this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+n)}}},{key:"_icon",value:function e(t,i,n,s,r,o){var a=Number(this.options.icon.size);if(this.options.icon.code!==undefined){t.font=(s?"bold ":"")+a+"px "+this.options.icon.face;t.fillStyle=this.options.icon.color||"black";t.textAlign="center";t.textBaseline="middle";this.enableShadow(t,o);t.fillText(this.options.icon.code,i,n);this.disableShadow(t,o)}else{console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}}},{key:"distanceToBorder",value:function e(t,i){return this._distanceToBorder(t,i)}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(186);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n,r,a){(0,o["default"])(this,t);var l=(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n));l.setImages(r,a);return l}(0,l["default"])(t,[{key:"resize",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.selected;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.hover;if(this.needsRefresh(i,n)){this._resizeImage()}}},{key:"draw",value:function e(t,i,n,s,r,o){this.switchImages(s);this.resize();this.left=i-this.width/2;this.top=n-this.height/2;if(this.options.shapeProperties.useBorderWithImage===true){var a=this.options.borderWidth;var l=this.options.borderWidthSelected||2*this.options.borderWidth;var h=(s?l:a)/this.body.view.scale;t.lineWidth=Math.min(this.width,h);t.beginPath();t.strokeStyle=s?this.options.color.highlight.border:r?this.options.color.hover.border:this.options.color.border;t.fillStyle=s?this.options.color.highlight.background:r?this.options.color.hover.background:this.options.color.background;t.rect(this.left-.5*t.lineWidth,this.top-.5*t.lineWidth,this.width+t.lineWidth,this.height+t.lineWidth);t.fill();t.save();if(h>0){this.enableBorderDashes(t,o);t.stroke();this.disableBorderDashes(t,o)}t.restore();t.closePath()}this._drawImageAtPosition(t,o);this._drawImageLabel(t,i,n,s,r);this.updateBoundingBox(i,n)}},{key:"updateBoundingBox",value:function e(t,i){this.resize();this.left=t-this.width/2;this.top=i-this.height/2;this.boundingBox.top=this.top;this.boundingBox.left=this.left;this.boundingBox.right=this.left+this.width;this.boundingBox.bottom=this.top+this.height;if(this.options.label!==undefined&&this.labelModule.size.width>0){this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left);this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width);this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}}},{key:"distanceToBorder",value:function e(t,i){return this._distanceToBorder(t,i)}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(190);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n){(0,o["default"])(this,t);return(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n))}(0,l["default"])(t,[{key:"draw",value:function e(t,i,n,s,r,o){this._drawShape(t,"square",2,i,n,s,r,o)}},{key:"distanceToBorder",value:function e(t,i){return this._distanceToBorder(t,i)}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(190);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n){(0,o["default"])(this,t);return(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n))}(0,l["default"])(t,[{key:"draw",value:function e(t,i,n,s,r,o){this._drawShape(t,"star",4,i,n,s,r,o)}},{key:"distanceToBorder",value:function e(t,i){return this._distanceToBorder(t,i)}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(184);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n){(0,o["default"])(this,t);var r=(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n));r._setMargins(n);return r}(0,l["default"])(t,[{key:"resize",value:function e(t,i,n){if(this.needsRefresh(i,n)){this.textSize=this.labelModule.getTextSize(t,i,n);this.width=this.textSize.width+this.margin.right+this.margin.left;this.height=this.textSize.height+this.margin.top+this.margin.bottom;this.radius=.5*this.width}}},{key:"draw",value:function e(t,i,n,s,r,o){this.resize(t,s,r);this.left=i-this.width/2;this.top=n-this.height/2;this.enableShadow(t,o);this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,s,r);this.disableShadow(t,o);this.updateBoundingBox(i,n,t,s,r)}},{key:"updateBoundingBox",value:function e(t,i,n,s,r){this.resize(n,s,r);this.left=t-this.width/2;this.top=i-this.height/2;this.boundingBox.top=this.top;this.boundingBox.left=this.left;this.boundingBox.right=this.left+this.width;this.boundingBox.bottom=this.top+this.height}},{key:"distanceToBorder",value:function e(t,i){return this._distanceToBorder(t,i)}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(190);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n){(0,o["default"])(this,t);return(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n))}(0,l["default"])(t,[{key:"draw",value:function e(t,i,n,s,r,o){this._drawShape(t,"triangle",3,i,n,s,r,o)}},{key:"distanceToBorder",value:function e(t,i){return this._distanceToBorder(t,i)}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(190);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n){(0,o["default"])(this,t);return(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n))}(0,l["default"])(t,[{key:"draw",value:function e(t,i,n,s,r,o){this._drawShape(t,"triangleDown",3,i,n,s,r,o)}},{key:"distanceToBorder",value:function e(t,i){return this._distanceToBorder(t,i)}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(134);var s=a(n);var r=i(135);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=i(1);var h=i(89);var d=i(93);var u=i(201)["default"];var f=i(169)["default"];var c=function(){function e(t,i,n){var r=this;(0,s["default"])(this,e);this.body=t;this.images=i;this.groups=n;this.body.functions.createEdge=this.create.bind(this);this.edgesListeners={add:function e(t,i){r.add(i.items)},update:function e(t,i){r.update(i.items)},remove:function e(t,i){r.remove(i.items)}};this.options={};this.defaultOptions={arrows:{to:{enabled:false,scaleFactor:1,type:"arrow"},middle:{enabled:false,scaleFactor:1,type:"arrow"},from:{enabled:false,scaleFactor:1,type:"arrow"}},arrowStrikethrough:true,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:false,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:false,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:false,hoverWidth:1.5,label:undefined,labelHighlightBold:true,length:undefined,physics:true,scaling:{min:1,max:15,label:{enabled:true,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function e(t,i,n,s){if(i===t){return.5}else{var r=1/(i-t);return Math.max(0,(s-t)*r)}}},selectionWidth:1.5,selfReferenceSize:20,shadow:{enabled:false,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},smooth:{enabled:true,type:"dynamic",forceDirection:"none",roundness:.5},title:undefined,width:1,value:undefined};l.extend(this.options,this.defaultOptions);this.bindEventListeners()}(0,o["default"])(e,[{key:"bindEventListeners",value:function e(){var t=this;this.body.emitter.on("_forceDisableDynamicCurves",function(e){if(e==="dynamic"){e="continuous"}var i=false;for(var n in t.body.edges){if(t.body.edges.hasOwnProperty(n)){var s=t.body.edges[n];var r=t.body.data.edges._data[n];if(r!==undefined){var o=r.smooth;if(o!==undefined){if(o.enabled===true&&o.type==="dynamic"){if(e===undefined){s.setOptions({smooth:false})}else{s.setOptions({smooth:{type:e}})}i=true}}}}}if(i===true){t.body.emitter.emit("_dataChanged")}});this.body.emitter.on("_dataUpdated",function(){t.reconnectEdges()});this.body.emitter.on("refreshEdges",this.refresh.bind(this));this.body.emitter.on("refresh",this.refresh.bind(this));this.body.emitter.on("destroy",function(){l.forEach(t.edgesListeners,function(e,i){if(t.body.data.edges)t.body.data.edges.off(i,e)});delete t.body.functions.createEdge;delete t.edgesListeners.add;delete t.edgesListeners.update;delete t.edgesListeners.remove;delete t.edgesListeners})}},{key:"setOptions",value:function e(t){this.edgeOptions=t;if(t!==undefined){u.parseOptions(this.options,t);var i=false;if(t.smooth!==undefined){for(var n in this.body.edges){if(this.body.edges.hasOwnProperty(n)){i=this.body.edges[n].updateEdgeType()||i}}}if(t.font!==undefined){f.parseOptions(this.options.font,t);for(var s in this.body.edges){if(this.body.edges.hasOwnProperty(s)){this.body.edges[s].updateLabelModule()}}}if(t.hidden!==undefined||t.physics!==undefined||i===true){this.body.emitter.emit("_dataChanged")}}}},{key:"setData",value:function e(t){var i=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var s=this.body.data.edges;if(t instanceof h||t instanceof d){this.body.data.edges=t}else if(Array.isArray(t)){this.body.data.edges=new h;this.body.data.edges.add(t)}else if(!t){this.body.data.edges=new h}else{throw new TypeError("Array or DataSet expected")}if(s){l.forEach(this.edgesListeners,function(e,t){s.off(t,e)})}this.body.edges={};if(this.body.data.edges){l.forEach(this.edgesListeners,function(e,t){i.body.data.edges.on(t,e)});var r=this.body.data.edges.getIds();this.add(r,true)}if(n===false){this.body.emitter.emit("_dataChanged")}}},{key:"add",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=this.body.edges;var s=this.body.data.edges;for(var r=0;r<t.length;r++){var o=t[r];var a=n[o];if(a){a.disconnect()}var l=s.get(o,{showInternalIds:true});n[o]=this.create(l)}if(i===false){this.body.emitter.emit("_dataChanged")}}},{key:"update",value:function e(t){var i=this.body.edges;var n=this.body.data.edges;var s=false;for(var r=0;r<t.length;r++){var o=t[r];var a=n.get(o);var l=i[o];if(l!==undefined){l.disconnect();s=l.setOptions(a)||s;l.connect()}else{this.body.edges[o]=this.create(a);s=true}}if(s===true){this.body.emitter.emit("_dataChanged")}else{this.body.emitter.emit("_dataUpdated")}}},{key:"remove",value:function e(t){var i=this.body.edges;for(var n=0;n<t.length;n++){var s=t[n];var r=i[s];if(r!==undefined){r.cleanup();r.disconnect();delete i[s]}}this.body.emitter.emit("_dataChanged")}},{key:"refresh",value:function e(){var t=this.body.edges;for(var i in t){var n=undefined;if(t.hasOwnProperty(i)){n=t[i]}var s=this.body.data.edges._data[i];if(n!==undefined&&s!==undefined){n.setOptions(s)}}}},{key:"create",value:function e(t){return new u(t,this.body,this.options,this.defaultOptions,this.edgeOptions)}},{key:"reconnectEdges",value:function e(){var t;var i=this.body.nodes;var n=this.body.edges;for(t in i){if(i.hasOwnProperty(t)){i[t].edges=[]}}for(t in n){if(n.hasOwnProperty(t)){var s=n[t];s.from=null;s.to=null;s.connect()}}}},{key:"getConnectedNodes",value:function e(t){var i=[];if(this.body.edges[t]!==undefined){var n=this.body.edges[t];if(n.fromId!==undefined){i.push(n.fromId)}if(n.toId!==undefined){i.push(n.toId)}}return i}}]);return e}();t["default"]=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(90);var s=c(n);var r=i(55);var o=c(r);var a=i(62);var l=c(a);var h=i(134);var d=c(h);var u=i(135);var f=c(u);function c(e){return e&&e.__esModule?e:{default:e}}var p=i(1);var m=i(169)["default"];var v=i(202)["default"];var g=i(206)["default"];var y=i(207)["default"];var b=i(208)["default"];var w=function(){function e(t,i,n,s,r){(0,d["default"])(this,e);if(i===undefined){throw"No body provided"}this.options=p.bridgeObject(n);this.globalOptions=n;this.defaultOptions=s;this.edgeOptions=r;this.body=i;this.id=undefined;this.fromId=undefined;this.toId=undefined;this.selected=false;this.hover=false;this.labelDirty=true;this.baseWidth=this.options.width;this.baseFontSize=this.options.font.size;this.from=undefined;this.to=undefined;this.edgeType=undefined;this.connected=false;this.labelModule=new m(this.body,this.options,true);this.setOptions(t)}(0,f["default"])(e,[{key:"setOptions",value:function t(i){if(!i){return}e.parseOptions(this.options,i,true,this.globalOptions);if(i.id!==undefined){this.id=i.id}if(i.from!==undefined){this.fromId=i.from}if(i.to!==undefined){this.toId=i.to}if(i.title!==undefined){this.title=i.title}if(i.value!==undefined){
i.value=parseFloat(i.value)}this.choosify(i);this.updateLabelModule(i);this.labelModule.propagateFonts(this.edgeOptions,i,this.defaultOptions);var n=this.updateEdgeType();this._setInteractionWidths();this.connect();if(i.hidden!==undefined||i.physics!==undefined){n=true}return n}},{key:"choosify",value:function e(t){this.chooser=true;var i=[t,this.options,this.edgeOptions,this.defaultOptions];var n=p.topMost(i,"chosen");if(typeof n==="boolean"){this.chooser=n}else if((typeof n==="undefined"?"undefined":(0,l["default"])(n))==="object"){var s=p.topMost(i,["chosen","edge"]);if(typeof s==="boolean"||typeof s==="function"){this.chooser=s}}}},{key:"getFormattingValues",value:function e(){var t=this.options.arrows.to===true||this.options.arrows.to.enabled===true;var i=this.options.arrows.from===true||this.options.arrows.from.enabled===true;var n=this.options.arrows.middle===true||this.options.arrows.middle.enabled===true;var s=this.options.color.inherit;var r={toArrow:t,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,middleArrow:n,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,fromArrow:i,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,arrowStrikethrough:this.options.arrowStrikethrough,color:s?undefined:this.options.color.color,inheritsColor:s,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width};if(this.selected||this.hover){if(this.chooser===true){if(this.selected){var o=this.options.selectionWidth;if(typeof o==="function"){r.width=o(r.width)}else if(typeof o==="number"){r.width+=o}r.width=Math.max(r.width,.3/this.body.view.scale);r.color=this.options.color.highlight;r.shadow=this.options.shadow.enabled}else if(this.hover){var a=this.options.hoverWidth;if(typeof a==="function"){r.width=a(r.width)}else if(typeof a==="number"){r.width+=a}r.width=Math.max(r.width,.3/this.body.view.scale);r.color=this.options.color.hover;r.shadow=this.options.shadow.enabled}}else if(typeof this.chooser==="function"){this.chooser(r,this.options.id,this.selected,this.hover);if(r.color!==undefined){r.inheritsColor=false}if(r.shadow===false){if(r.shadowColor!==this.options.shadow.color||r.shadowSize!==this.options.shadow.size||r.shadowX!==this.options.shadow.x||r.shadowY!==this.options.shadow.y){r.shadow=true}}}}else{r.shadow=this.options.shadow.enabled;r.width=Math.max(r.width,.3/this.body.view.scale)}return r}},{key:"updateLabelModule",value:function e(t){this.labelModule.setOptions(this.options,true);if(this.labelModule.baseSize!==undefined){this.baseFontSize=this.labelModule.baseSize}this.labelModule.constrain(this.edgeOptions,t,this.defaultOptions);this.labelModule.choosify(this.edgeOptions,t,this.defaultOptions)}},{key:"updateEdgeType",value:function e(){var t=this.options.smooth;var i=false;var n=true;if(this.edgeType!==undefined){if(this.edgeType instanceof g&&t.enabled===true&&t.type==="dynamic"||this.edgeType instanceof v&&t.enabled===true&&t.type==="cubicBezier"||this.edgeType instanceof y&&t.enabled===true&&t.type!=="dynamic"&&t.type!=="cubicBezier"||this.edgeType instanceof b&&t.type.enabled===false){n=false}if(n===true){i=this.cleanup()}}if(n===true){if(t.enabled===true){if(t.type==="dynamic"){i=true;this.edgeType=new g(this.options,this.body,this.labelModule)}else if(t.type==="cubicBezier"){this.edgeType=new v(this.options,this.body,this.labelModule)}else{this.edgeType=new y(this.options,this.body,this.labelModule)}}else{this.edgeType=new b(this.options,this.body,this.labelModule)}}else{this.edgeType.setOptions(this.options)}return i}},{key:"connect",value:function e(){this.disconnect();this.from=this.body.nodes[this.fromId]||undefined;this.to=this.body.nodes[this.toId]||undefined;this.connected=this.from!==undefined&&this.to!==undefined;if(this.connected===true){this.from.attachEdge(this);this.to.attachEdge(this)}else{if(this.from){this.from.detachEdge(this)}if(this.to){this.to.detachEdge(this)}}this.edgeType.connect()}},{key:"disconnect",value:function e(){if(this.from){this.from.detachEdge(this);this.from=undefined}if(this.to){this.to.detachEdge(this);this.to=undefined}this.connected=false}},{key:"getTitle",value:function e(){return this.title}},{key:"isSelected",value:function e(){return this.selected}},{key:"getValue",value:function e(){return this.options.value}},{key:"setValueRange",value:function e(t,i,n){if(this.options.value!==undefined){var s=this.options.scaling.customScalingFunction(t,i,n,this.options.value);var r=this.options.scaling.max-this.options.scaling.min;if(this.options.scaling.label.enabled===true){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+s*o}this.options.width=this.options.scaling.min+s*r}else{this.options.width=this.baseWidth;this.options.font.size=this.baseFontSize}this._setInteractionWidths();this.updateLabelModule()}},{key:"_setInteractionWidths",value:function e(){if(typeof this.options.hoverWidth==="function"){this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width)}else{this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width}if(typeof this.options.selectionWidth==="function"){this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width)}else{this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}}},{key:"draw",value:function e(t){var i=this.getFormattingValues();if(i.hidden){return}var n=this.edgeType.getViaNode();var s={};this.edgeType.fromPoint=this.edgeType.from;this.edgeType.toPoint=this.edgeType.to;if(i.fromArrow){s.from=this.edgeType.getArrowData(t,"from",n,this.selected,this.hover,i);if(i.arrowStrikethrough===false)this.edgeType.fromPoint=s.from.core}if(i.toArrow){s.to=this.edgeType.getArrowData(t,"to",n,this.selected,this.hover,i);if(i.arrowStrikethrough===false)this.edgeType.toPoint=s.to.core}if(i.middleArrow){s.middle=this.edgeType.getArrowData(t,"middle",n,this.selected,this.hover,i)}this.edgeType.drawLine(t,i,this.selected,this.hover,n);this.drawArrows(t,s,i);this.drawLabel(t,n)}},{key:"drawArrows",value:function e(t,i,n){if(n.fromArrow){this.edgeType.drawArrowHead(t,n,this.selected,this.hover,i.from)}if(n.middleArrow){this.edgeType.drawArrowHead(t,n,this.selected,this.hover,i.middle)}if(n.toArrow){this.edgeType.drawArrowHead(t,n,this.selected,this.hover,i.to)}}},{key:"drawLabel",value:function e(t,i){if(this.options.label!==undefined){var n=this.from;var s=this.to;var r=this.from.selected||this.to.selected||this.selected;if(n.id!=s.id){this.labelModule.pointToSelf=false;var o=this.edgeType.getPoint(.5,i);t.save();if(this.options.font.align!=="horizontal"){this.labelModule.calculateLabelSize(t,r,this.hover,o.x,o.y);t.translate(o.x,this.labelModule.size.yLine);this._rotateForLabelAlignment(t)}this.labelModule.draw(t,o.x,o.y,r,this.hover);t.restore()}else{this.labelModule.pointToSelf=true;var a,l;var h=this.options.selfReferenceSize;if(n.shape.width>n.shape.height){a=n.x+n.shape.width*.5;l=n.y-h}else{a=n.x+h;l=n.y-n.shape.height*.5}o=this._pointOnCircle(a,l,h,.125);this.labelModule.draw(t,o.x,o.y,r,this.hover)}}}},{key:"isOverlappingWith",value:function e(t){if(this.connected){var i=10;var n=this.from.x;var s=this.from.y;var r=this.to.x;var o=this.to.y;var a=t.left;var l=t.top;var h=this.edgeType.getDistanceToEdge(n,s,r,o,a,l);return h<i}else{return false}}},{key:"_rotateForLabelAlignment",value:function e(t){var i=this.from.y-this.to.y;var n=this.from.x-this.to.x;var s=Math.atan2(i,n);if(s<-1&&n<0||s>0&&n<0){s=s+Math.PI}t.rotate(s)}},{key:"_pointOnCircle",value:function e(t,i,n,s){var r=s*2*Math.PI;return{x:t+n*Math.cos(r),y:i-n*Math.sin(r)}}},{key:"select",value:function e(){this.selected=true}},{key:"unselect",value:function e(){this.selected=false}},{key:"cleanup",value:function e(){return this.edgeType.cleanup()}}],[{key:"parseOptions",value:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var a=["arrowStrikethrough","id","from","hidden","hoverWidth","label","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","to","title","value","width"];p.selectiveDeepExtend(a,t,i,n);p.mergeOptions(t,i,"smooth",n,r);p.mergeOptions(t,i,"shadow",n,r);if(i.dashes!==undefined&&i.dashes!==null){t.dashes=i.dashes}else if(n===true&&i.dashes===null){t.dashes=(0,o["default"])(r.dashes)}if(i.scaling!==undefined&&i.scaling!==null){if(i.scaling.min!==undefined){t.scaling.min=i.scaling.min}if(i.scaling.max!==undefined){t.scaling.max=i.scaling.max}p.mergeOptions(t.scaling,i.scaling,"label",n,r.scaling)}else if(n===true&&i.scaling===null){t.scaling=(0,o["default"])(r.scaling)}if(i.arrows!==undefined&&i.arrows!==null){if(typeof i.arrows==="string"){var h=i.arrows.toLowerCase();t.arrows.to.enabled=h.indexOf("to")!=-1;t.arrows.middle.enabled=h.indexOf("middle")!=-1;t.arrows.from.enabled=h.indexOf("from")!=-1}else if((0,l["default"])(i.arrows)==="object"){p.mergeOptions(t.arrows,i.arrows,"to",n,r.arrows);p.mergeOptions(t.arrows,i.arrows,"middle",n,r.arrows);p.mergeOptions(t.arrows,i.arrows,"from",n,r.arrows)}else{throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+(0,s["default"])(i.arrows))}}else if(n===true&&i.arrows===null){t.arrows=(0,o["default"])(r.arrows)}if(i.color!==undefined&&i.color!==null){t.color=p.deepExtend({},t.color,true);if(p.isString(i.color)){t.color.color=i.color;t.color.highlight=i.color;t.color.hover=i.color;t.color.inherit=false}else{var d=false;if(i.color.color!==undefined){t.color.color=i.color.color;d=true}if(i.color.highlight!==undefined){t.color.highlight=i.color.highlight;d=true}if(i.color.hover!==undefined){t.color.hover=i.color.hover;d=true}if(i.color.inherit!==undefined){t.color.inherit=i.color.inherit}if(i.color.opacity!==undefined){t.color.opacity=Math.min(1,Math.max(0,i.color.opacity))}if(i.color.inherit===undefined&&d===true){t.color.inherit=false}}}else if(n===true&&i.color===null){t.color=p.bridgeObject(r.color)}if(i.font!==undefined&&i.font!==null){m.parseOptions(t.font,i)}else if(n===true&&i.font===null){t.font=p.bridgeObject(r.font)}}}]);return e}();t["default"]=w},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(170);var s=g(n);var r=i(175);var o=g(r);var a=i(134);var l=g(a);var h=i(135);var d=g(h);var u=i(178);var f=g(u);var c=i(179);var p=g(c);var m=i(203);var v=g(m);function g(e){return e&&e.__esModule?e:{default:e}}var y=function(e){(0,p["default"])(t,e);function t(e,i,n){(0,l["default"])(this,t);return(0,f["default"])(this,(t.__proto__||(0,o["default"])(t)).call(this,e,i,n))}(0,d["default"])(t,[{key:"_line",value:function e(t,i,n){var s=n[0];var r=n[1];t.beginPath();t.moveTo(this.fromPoint.x,this.fromPoint.y);if(n===undefined||s.x===undefined){t.lineTo(this.toPoint.x,this.toPoint.y)}else{t.bezierCurveTo(s.x,s.y,r.x,r.y,this.toPoint.x,this.toPoint.y)}this.enableShadow(t,i);t.stroke();this.disableShadow(t,i)}},{key:"_getViaCoordinates",value:function e(){var t=this.from.x-this.to.x;var i=this.from.y-this.to.y;var n=void 0,s=void 0,r=void 0,o=void 0;var a=this.options.smooth.roundness;if((Math.abs(t)>Math.abs(i)||this.options.smooth.forceDirection===true||this.options.smooth.forceDirection==="horizontal")&&this.options.smooth.forceDirection!=="vertical"){s=this.from.y;o=this.to.y;n=this.from.x-a*t;r=this.to.x+a*t}else{s=this.from.y-a*i;o=this.to.y+a*i;n=this.from.x;r=this.to.x}return[{x:n,y:s},{x:r,y:o}]}},{key:"getViaNode",value:function e(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function e(t,i){return this._findBorderPositionBezier(t,i)}},{key:"_getDistanceToEdge",value:function e(t,i,n,r,o,a){var l=arguments.length>6&&arguments[6]!==undefined?arguments[6]:this._getViaCoordinates(),h=(0,s["default"])(l,2),d=h[0],u=h[1];return this._getDistanceToBezierEdge(t,i,n,r,o,a,d,u)}},{key:"getPoint",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this._getViaCoordinates(),n=(0,s["default"])(i,2),r=n[0],o=n[1];var a=t;var l=[];l[0]=Math.pow(1-a,3);l[1]=3*a*Math.pow(1-a,2);l[2]=3*Math.pow(a,2)*(1-a);l[3]=Math.pow(a,3);var h=l[0]*this.fromPoint.x+l[1]*r.x+l[2]*o.x+l[3]*this.toPoint.x;var d=l[0]*this.fromPoint.y+l[1]*r.y+l[2]*o.y+l[3]*this.toPoint.y;return{x:h,y:d}}}]);return t}(v["default"]);t["default"]=y},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(204);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n){(0,o["default"])(this,t);return(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n))}(0,l["default"])(t,[{key:"_getDistanceToBezierEdge",value:function e(t,i,n,s,r,o,a,l){var h=1e9;var d=void 0;var u=void 0,f=void 0,c=void 0,p=void 0;var m=t;var v=i;var g=[0,0,0,0];for(u=1;u<10;u++){f=.1*u;g[0]=Math.pow(1-f,3);g[1]=3*f*Math.pow(1-f,2);g[2]=3*Math.pow(f,2)*(1-f);g[3]=Math.pow(f,3);c=g[0]*t+g[1]*a.x+g[2]*l.x+g[3]*n;p=g[0]*i+g[1]*a.y+g[2]*l.y+g[3]*s;if(u>0){d=this._getDistanceToLine(m,v,c,p,r,o);h=d<h?d:h}m=c;v=p}return h}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(205);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n){(0,o["default"])(this,t);return(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n))}(0,l["default"])(t,[{key:"_findBorderPositionBezier",value:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this._getViaCoordinates();var s=10;var r=0;var o=0;var a=1;var l,h,d,u,f;var c=.2;var p=this.to;var m=false;if(t.id===this.from.id){p=this.from;m=true}while(o<=a&&r<s){var v=(o+a)*.5;l=this.getPoint(v,n);h=Math.atan2(p.y-l.y,p.x-l.x);d=p.distanceToBorder(i,h);u=Math.sqrt(Math.pow(l.x-p.x,2)+Math.pow(l.y-p.y,2));f=d-u;if(Math.abs(f)<c){break}else if(f<0){if(m===false){o=v}else{a=v}}else{if(m===false){a=v}else{o=v}}r++}l.t=v;return l}},{key:"_getDistanceToBezierEdge",value:function e(t,i,n,s,r,o,a){var l=1e9;var h=void 0;var d=void 0,u=void 0,f=void 0,c=void 0;var p=t;var m=i;for(d=1;d<10;d++){u=.1*d;f=Math.pow(1-u,2)*t+2*u*(1-u)*a.x+Math.pow(u,2)*n;c=Math.pow(1-u,2)*i+2*u*(1-u)*a.y+Math.pow(u,2)*s;if(d>0){h=this._getDistanceToLine(p,m,f,c,r,o);l=h<l?h:l}p=f;m=c}return l}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(170);var s=h(n);var r=i(134);var o=h(r);var a=i(135);var l=h(a);function h(e){return e&&e.__esModule?e:{default:e}}var d=i(1);var u=function(){function e(t,i,n){(0,o["default"])(this,e);this.body=i;this.labelModule=n;this.options={};this.setOptions(t);this.colorDirty=true;this.color={};this.selectionWidth=2;this.hoverWidth=1.5;this.fromPoint=this.from;this.toPoint=this.to}(0,l["default"])(e,[{key:"connect",value:function e(){this.from=this.body.nodes[this.options.from];this.to=this.body.nodes[this.options.to]}},{key:"cleanup",value:function e(){return false}},{key:"setOptions",value:function e(t){this.options=t;this.from=this.body.nodes[this.options.from];this.to=this.body.nodes[this.options.to];this.id=this.options.id}},{key:"drawLine",value:function e(t,i,n,s,r){t.strokeStyle=this.getColor(t,i,n,s);t.lineWidth=i.width;if(i.dashes!==false){this._drawDashedLine(t,i,r)}else{this._drawLine(t,i,r)}}},{key:"_drawLine",value:function e(t,i,n,r,o){if(this.from!=this.to){this._line(t,i,n,r,o)}else{var a=this._getCircleData(t),l=(0,s["default"])(a,3),h=l[0],d=l[1],u=l[2];this._circle(t,i,h,d,u)}}},{key:"_drawDashedLine",value:function e(t,i,n,r,o){t.lineCap="round";var a=[5,5];if(Array.isArray(i.dashes)===true){a=i.dashes}if(t.setLineDash!==undefined){t.save();t.setLineDash(a);t.lineDashOffset=0;if(this.from!=this.to){this._line(t,i,n)}else{var l=this._getCircleData(t),h=(0,s["default"])(l,3),d=h[0],u=h[1],f=h[2];this._circle(t,i,d,u,f)}t.setLineDash([0]);t.lineDashOffset=0;t.restore()}else{if(this.from!=this.to){t.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,a)}else{var c=this._getCircleData(t),p=(0,s["default"])(c,3),m=p[0],v=p[1],g=p[2];this._circle(t,i,m,v,g)}this.enableShadow(t,i);t.stroke();this.disableShadow(t,i)}}},{key:"findBorderPosition",value:function e(t,i,n){if(this.from!=this.to){return this._findBorderPosition(t,i,n)}else{return this._findBorderPositionCircle(t,i,n)}}},{key:"findBorderPositions",value:function e(t){var i={};var n={};if(this.from!=this.to){i=this._findBorderPosition(this.from,t);n=this._findBorderPosition(this.to,t)}else{var r=this._getCircleData(t),o=(0,s["default"])(r,3),a=o[0],l=o[1],h=o[2];i=this._findBorderPositionCircle(this.from,t,{x:a,y:l,low:.25,high:.6,direction:-1});n=this._findBorderPositionCircle(this.from,t,{x:a,y:l,low:.6,high:.8,direction:1})}return{from:i,to:n}}},{key:"_getCircleData",value:function e(t){var i=void 0,n=void 0;var s=this.from;var r=this.options.selfReferenceSize;if(t!==undefined){if(s.shape.width===undefined){s.shape.resize(t)}}if(s.shape.width>s.shape.height){i=s.x+s.shape.width*.5;n=s.y-r}else{i=s.x+r;n=s.y-s.shape.height*.5}return[i,n,r]}},{key:"_pointOnCircle",value:function e(t,i,n,s){var r=s*2*Math.PI;return{x:t+n*Math.cos(r),y:i-n*Math.sin(r)}}},{key:"_findBorderPositionCircle",value:function e(t,i,n){var s=n.x;var r=n.y;var o=n.low;var a=n.high;var l=n.direction;var h=10;var d=0;var u=this.options.selfReferenceSize;var f=void 0,c=void 0,p=void 0,m=void 0,v=void 0;var g=.05;var y=(o+a)*.5;while(o<=a&&d<h){y=(o+a)*.5;f=this._pointOnCircle(s,r,u,y);c=Math.atan2(t.y-f.y,t.x-f.x);p=t.distanceToBorder(i,c);m=Math.sqrt(Math.pow(f.x-t.x,2)+Math.pow(f.y-t.y,2));v=p-m;if(Math.abs(v)<g){break}else if(v>0){if(l>0){o=y}else{a=y}}else{if(l>0){a=y}else{o=y}}d++}f.t=y;return f}},{key:"getLineWidth",value:function e(t,i){if(t===true){return Math.max(this.selectionWidth,.3/this.body.view.scale)}else{if(i===true){return Math.max(this.hoverWidth,.3/this.body.view.scale)}else{return Math.max(this.options.width,.3/this.body.view.scale)}}}},{key:"getColor",value:function e(t,i,n,s){if(i.inheritsColor!==false){if(i.inheritsColor==="both"&&this.from.id!==this.to.id){var r=t.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y);var o=void 0,a=void 0;o=this.from.options.color.highlight.border;a=this.to.options.color.highlight.border;if(this.from.selected===false&&this.to.selected===false){o=d.overrideOpacity(this.from.options.color.border,i.opacity);a=d.overrideOpacity(this.to.options.color.border,i.opacity)}else if(this.from.selected===true&&this.to.selected===false){a=this.to.options.color.border}else if(this.from.selected===false&&this.to.selected===true){o=this.from.options.color.border}r.addColorStop(0,o);r.addColorStop(1,a);return r}if(i.inheritsColor==="to"){return d.overrideOpacity(this.to.options.color.border,i.opacity)}else{return d.overrideOpacity(this.from.options.color.border,i.opacity)}}else{return d.overrideOpacity(i.color,i.opacity)}}},{key:"_circle",value:function e(t,i,n,s,r){this.enableShadow(t,i);t.beginPath();t.arc(n,s,r,0,2*Math.PI,false);t.stroke();this.disableShadow(t,i)}},{key:"getDistanceToEdge",value:function e(t,i,n,r,o,a,l,h){var d=0;if(this.from!=this.to){d=this._getDistanceToEdge(t,i,n,r,o,a,l)}else{var u=this._getCircleData(undefined),f=(0,s["default"])(u,3),c=f[0],p=f[1],m=f[2];var v=c-o;var g=p-a;d=Math.abs(Math.sqrt(v*v+g*g)-m)}if(this.labelModule.size.left<o&&this.labelModule.size.left+this.labelModule.size.width>o&&this.labelModule.size.top<a&&this.labelModule.size.top+this.labelModule.size.height>a){return 0}else{return d}}},{key:"_getDistanceToLine",value:function e(t,i,n,s,r,o){var a=n-t;var l=s-i;var h=a*a+l*l;var d=((r-t)*a+(o-i)*l)/h;if(d>1){d=1}else if(d<0){d=0}var u=t+d*a;var f=i+d*l;var c=u-r;var p=f-o;return Math.sqrt(c*c+p*p)}},{key:"getArrowData",value:function e(t,i,n,r,o,a){var l=void 0;var h=void 0;var d=void 0;var u=void 0;var f=void 0;var c=void 0;var p=void 0;var m=a.width;if(i==="from"){d=this.from;u=this.to;f=.1;c=a.fromArrowScale;p=a.fromArrowType}else if(i==="to"){d=this.to;u=this.from;f=-.1;c=a.toArrowScale;p=a.toArrowType}else{d=this.to;u=this.from;c=a.middleArrowScale;p=a.middleArrowType}if(d!=u){if(i!=="middle"){if(this.options.smooth.enabled===true){h=this.findBorderPosition(d,t,{via:n});var v=this.getPoint(Math.max(0,Math.min(1,h.t+f)),n);l=Math.atan2(h.y-v.y,h.x-v.x)}else{l=Math.atan2(d.y-u.y,d.x-u.x);h=this.findBorderPosition(d,t)}}else{l=Math.atan2(d.y-u.y,d.x-u.x);h=this.getPoint(.5,n)}}else{var g=this._getCircleData(t),y=(0,s["default"])(g,3),b=y[0],w=y[1],_=y[2];if(i==="from"){h=this.findBorderPosition(this.from,t,{x:b,y:w,low:.25,high:.6,direction:-1});l=h.t*-2*Math.PI+1.5*Math.PI+.1*Math.PI}else if(i==="to"){h=this.findBorderPosition(this.from,t,{x:b,y:w,low:.6,high:1,direction:1});l=h.t*-2*Math.PI+1.5*Math.PI-1.1*Math.PI}else{h=this._pointOnCircle(b,w,_,.175);l=3.9269908169872414}}var x=15*c+3*m;var k=h.x-x*.9*Math.cos(l);var C=h.y-x*.9*Math.sin(l);var S={x:k,y:C};return{point:h,core:S,angle:l,length:x,type:p}}},{key:"drawArrowHead",value:function e(t,i,n,s,r){t.strokeStyle=this.getColor(t,i,n,s);t.fillStyle=t.strokeStyle;t.lineWidth=i.width;if(r.type&&r.type.toLowerCase()==="circle"){t.circleEndpoint(r.point.x,r.point.y,r.angle,r.length)}else{t.arrowEndpoint(r.point.x,r.point.y,r.angle,r.length)}this.enableShadow(t,i);t.fill();this.disableShadow(t,i)}},{key:"enableShadow",value:function e(t,i){if(i.shadow===true){t.shadowColor=i.shadowColor;t.shadowBlur=i.shadowSize;t.shadowOffsetX=i.shadowX;t.shadowOffsetY=i.shadowY}}},{key:"disableShadow",value:function e(t,i){if(i.shadow===true){t.shadowColor="rgba(0,0,0,0)";t.shadowBlur=0;t.shadowOffsetX=0;t.shadowOffsetY=0}}}]);return e}();t["default"]=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(170);var s=g(n);var r=i(175);var o=g(r);var a=i(134);var l=g(a);var h=i(135);var d=g(h);var u=i(178);var f=g(u);var c=i(179);var p=g(c);var m=i(204);var v=g(m);function g(e){return e&&e.__esModule?e:{default:e}}var y=function(e){(0,p["default"])(t,e);function t(e,i,n){(0,l["default"])(this,t);var s=(0,f["default"])(this,(t.__proto__||(0,o["default"])(t)).call(this,e,i,n));s._boundFunction=function(){s.positionBezierNode()};s.body.emitter.on("_repositionBezierNodes",s._boundFunction);return s}(0,d["default"])(t,[{key:"setOptions",value:function e(t){var i=false;if(this.options.physics!==t.physics){i=true}this.options=t;this.id=this.options.id;this.from=this.body.nodes[this.options.from];this.to=this.body.nodes[this.options.to];this.setupSupportNode();this.connect();if(i===true){this.via.setOptions({physics:this.options.physics});this.positionBezierNode()}}},{key:"connect",value:function e(){this.from=this.body.nodes[this.options.from];this.to=this.body.nodes[this.options.to];if(this.from===undefined||this.to===undefined||this.options.physics===false){this.via.setOptions({physics:false})}else{if(this.from.id===this.to.id){this.via.setOptions({physics:false})}else{this.via.setOptions({physics:true})}}}},{key:"cleanup",value:function e(){this.body.emitter.off("_repositionBezierNodes",this._boundFunction);if(this.via!==undefined){delete this.body.nodes[this.via.id];this.via=undefined;return true}return false}},{key:"setupSupportNode",value:function e(){if(this.via===undefined){var t="edgeId:"+this.id;var i=this.body.functions.createNode({id:t,shape:"circle",physics:true,hidden:true});this.body.nodes[t]=i;this.via=i;this.via.parentEdgeId=this.id;this.positionBezierNode()}}},{key:"positionBezierNode",value:function e(){if(this.via!==undefined&&this.from!==undefined&&this.to!==undefined){this.via.x=.5*(this.from.x+this.to.x);this.via.y=.5*(this.from.y+this.to.y)}else if(this.via!==undefined){this.via.x=0;this.via.y=0}}},{key:"_line",value:function e(t,i,n){t.beginPath();t.moveTo(this.fromPoint.x,this.fromPoint.y);if(n.x===undefined){t.lineTo(this.toPoint.x,this.toPoint.y)}else{t.quadraticCurveTo(n.x,n.y,this.toPoint.x,this.toPoint.y)}this.enableShadow(t,i);t.stroke();this.disableShadow(t,i)}},{key:"getViaNode",value:function e(){return this.via}},{key:"getPoint",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.via;var n=t;var r=void 0,o=void 0;if(this.from===this.to){var a=this._getCircleData(this.from),l=(0,s["default"])(a,3),h=l[0],d=l[1],u=l[2];var f=2*Math.PI*(1-n);r=h+u*Math.sin(f);o=d+u-u*(1-Math.cos(f))}else{r=Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*i.x+Math.pow(n,2)*this.toPoint.x;o=Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*i.y+Math.pow(n,2)*this.toPoint.y}return{x:r,y:o}}},{key:"_findBorderPosition",value:function e(t,i){return this._findBorderPositionBezier(t,i,this.via)}},{key:"_getDistanceToEdge",value:function e(t,i,n,s,r,o){return this._getDistanceToBezierEdge(t,i,n,s,r,o,this.via)}}]);return t}(v["default"]);t["default"]=y},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(204);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n){(0,o["default"])(this,t);return(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n))}(0,l["default"])(t,[{key:"_line",value:function e(t,i,n){t.beginPath();t.moveTo(this.fromPoint.x,this.fromPoint.y);if(n.x===undefined){t.lineTo(this.toPoint.x,this.toPoint.y)}else{t.quadraticCurveTo(n.x,n.y,this.toPoint.x,this.toPoint.y)}this.enableShadow(t,i);t.stroke();this.disableShadow(t,i)}},{key:"getViaNode",value:function e(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function e(){var t=undefined;var i=undefined;var n=this.options.smooth.roundness;var s=this.options.smooth.type;var r=Math.abs(this.from.x-this.to.x);var o=Math.abs(this.from.y-this.to.y);if(s==="discrete"||s==="diagonalCross"){if(Math.abs(this.from.x-this.to.x)<=Math.abs(this.from.y-this.to.y)){if(this.from.y>=this.to.y){if(this.from.x<=this.to.x){t=this.from.x+n*o;i=this.from.y-n*o}else if(this.from.x>this.to.x){t=this.from.x-n*o;i=this.from.y-n*o}}else if(this.from.y<this.to.y){if(this.from.x<=this.to.x){t=this.from.x+n*o;i=this.from.y+n*o}else if(this.from.x>this.to.x){t=this.from.x-n*o;i=this.from.y+n*o}}if(s==="discrete"){t=r<n*o?this.from.x:t}}else if(Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)){if(this.from.y>=this.to.y){if(this.from.x<=this.to.x){t=this.from.x+n*r;i=this.from.y-n*r}else if(this.from.x>this.to.x){t=this.from.x-n*r;i=this.from.y-n*r}}else if(this.from.y<this.to.y){if(this.from.x<=this.to.x){t=this.from.x+n*r;i=this.from.y+n*r}else if(this.from.x>this.to.x){t=this.from.x-n*r;i=this.from.y+n*r}}if(s==="discrete"){i=o<n*r?this.from.y:i}}}else if(s==="straightCross"){if(Math.abs(this.from.x-this.to.x)<=Math.abs(this.from.y-this.to.y)){t=this.from.x;if(this.from.y<this.to.y){i=this.to.y-(1-n)*o}else{i=this.to.y+(1-n)*o}}else if(Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)){if(this.from.x<this.to.x){t=this.to.x-(1-n)*r}else{t=this.to.x+(1-n)*r}i=this.from.y}}else if(s==="horizontal"){if(this.from.x<this.to.x){t=this.to.x-(1-n)*r}else{t=this.to.x+(1-n)*r}i=this.from.y}else if(s==="vertical"){t=this.from.x;if(this.from.y<this.to.y){i=this.to.y-(1-n)*o}else{i=this.to.y+(1-n)*o}}else if(s==="curvedCW"){r=this.to.x-this.from.x;o=this.from.y-this.to.y;var a=Math.sqrt(r*r+o*o);var l=Math.PI;var h=Math.atan2(o,r);var d=(h+(n*.5+.5)*l)%(2*l);t=this.from.x+(n*.5+.5)*a*Math.sin(d);i=this.from.y+(n*.5+.5)*a*Math.cos(d)}else if(s==="curvedCCW"){r=this.to.x-this.from.x;o=this.from.y-this.to.y;var u=Math.sqrt(r*r+o*o);var f=Math.PI;var c=Math.atan2(o,r);var p=(c+(-n*.5+.5)*f)%(2*f);t=this.from.x+(n*.5+.5)*u*Math.sin(p);i=this.from.y+(n*.5+.5)*u*Math.cos(p)}else{if(Math.abs(this.from.x-this.to.x)<=Math.abs(this.from.y-this.to.y)){if(this.from.y>=this.to.y){if(this.from.x<=this.to.x){t=this.from.x+n*o;i=this.from.y-n*o;t=this.to.x<t?this.to.x:t}else if(this.from.x>this.to.x){t=this.from.x-n*o;i=this.from.y-n*o;t=this.to.x>t?this.to.x:t}}else if(this.from.y<this.to.y){if(this.from.x<=this.to.x){t=this.from.x+n*o;i=this.from.y+n*o;t=this.to.x<t?this.to.x:t}else if(this.from.x>this.to.x){t=this.from.x-n*o;i=this.from.y+n*o;t=this.to.x>t?this.to.x:t}}}else if(Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)){if(this.from.y>=this.to.y){if(this.from.x<=this.to.x){t=this.from.x+n*r;i=this.from.y-n*r;i=this.to.y>i?this.to.y:i}else if(this.from.x>this.to.x){t=this.from.x-n*r;i=this.from.y-n*r;i=this.to.y>i?this.to.y:i}}else if(this.from.y<this.to.y){if(this.from.x<=this.to.x){t=this.from.x+n*r;i=this.from.y+n*r;i=this.to.y<i?this.to.y:i}else if(this.from.x>this.to.x){t=this.from.x-n*r;i=this.from.y+n*r;i=this.to.y<i?this.to.y:i}}}}return{x:t,y:i}}},{key:"_findBorderPosition",value:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return this._findBorderPositionBezier(t,i,n.via)}},{key:"_getDistanceToEdge",value:function e(t,i,n,s,r,o){var a=arguments.length>6&&arguments[6]!==undefined?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(t,i,n,s,r,o,a)}},{key:"getPoint",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this._getViaCoordinates();var n=t;var s=Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*i.x+Math.pow(n,2)*this.toPoint.x;var r=Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*i.y+Math.pow(n,2)*this.toPoint.y;return{x:s,y:r}}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(205);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n){(0,o["default"])(this,t);return(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n))}(0,l["default"])(t,[{key:"_line",value:function e(t,i){t.beginPath();t.moveTo(this.fromPoint.x,this.fromPoint.y);t.lineTo(this.toPoint.x,this.toPoint.y);this.enableShadow(t,i);t.stroke();this.disableShadow(t,i)}},{key:"getViaNode",value:function e(){return undefined}},{key:"getPoint",value:function e(t){return{x:(1-t)*this.fromPoint.x+t*this.toPoint.x,y:(1-t)*this.fromPoint.y+t*this.toPoint.y}}},{key:"_findBorderPosition",value:function e(t,i){var n=this.to;var s=this.from;if(t.id===this.from.id){n=this.from;s=this.to}var r=Math.atan2(n.y-s.y,n.x-s.x);var o=n.x-s.x;var a=n.y-s.y;var l=Math.sqrt(o*o+a*a);var h=t.distanceToBorder(i,r);var d=(l-h)/l;var u={};u.x=(1-d)*s.x+d*n.x;u.y=(1-d)*s.y+d*n.y;return u}},{key:"_getDistanceToEdge",value:function e(t,i,n,s,r,o){return this._getDistanceToLine(t,i,n,s,r,o)}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(58);var s=h(n);var r=i(134);var o=h(r);var a=i(135);var l=h(a);function h(e){return e&&e.__esModule?e:{default:e}}var d=i(210)["default"];var u=i(211)["default"];var f=i(212)["default"];var c=i(213)["default"];var p=i(214)["default"];var m=i(215)["default"];var v=i(216)["default"];var g=i(217)["default"];var y=i(1);var b=function(){function e(t){(0,o["default"])(this,e);this.body=t;
this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}};this.physicsEnabled=true;this.simulationInterval=1e3/60;this.requiresTimeout=true;this.previousStates={};this.referenceState={};this.freezeCache={};this.renderTimer=undefined;this.adaptiveTimestep=false;this.adaptiveTimestepEnabled=false;this.adaptiveCounter=0;this.adaptiveInterval=3;this.stabilized=false;this.startedStabilization=false;this.stabilizationIterations=0;this.ready=false;this.options={};this.defaultOptions={enabled:true,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:true,iterations:1e3,updateInterval:50,onlyDynamicEdges:false,fit:true},timestep:.5,adaptiveTimestep:true};y.extend(this.options,this.defaultOptions);this.timestep=.5;this.layoutFailed=false;this.bindEventListeners()}(0,l["default"])(e,[{key:"bindEventListeners",value:function e(){var t=this;this.body.emitter.on("initPhysics",function(){t.initPhysics()});this.body.emitter.on("_layoutFailed",function(){t.layoutFailed=true});this.body.emitter.on("resetPhysics",function(){t.stopSimulation();t.ready=false});this.body.emitter.on("disablePhysics",function(){t.physicsEnabled=false;t.stopSimulation()});this.body.emitter.on("restorePhysics",function(){t.setOptions(t.options);if(t.ready===true){t.startSimulation()}});this.body.emitter.on("startSimulation",function(){if(t.ready===true){t.startSimulation()}});this.body.emitter.on("stopSimulation",function(){t.stopSimulation()});this.body.emitter.on("destroy",function(){t.stopSimulation(false);t.body.emitter.off()});this.body.emitter.on("_dataChanged",function(){t.updatePhysicsData()})}},{key:"setOptions",value:function e(t){if(t!==undefined){if(t===false){this.options.enabled=false;this.physicsEnabled=false;this.stopSimulation()}else{this.physicsEnabled=true;y.selectiveNotDeepExtend(["stabilization"],this.options,t);y.mergeOptions(this.options,t,"stabilization");if(t.enabled===undefined){this.options.enabled=true}if(this.options.enabled===false){this.physicsEnabled=false;this.stopSimulation()}this.timestep=this.options.timestep}}this.init()}},{key:"init",value:function e(){var t;if(this.options.solver==="forceAtlas2Based"){t=this.options.forceAtlas2Based;this.nodesSolver=new v(this.body,this.physicsBody,t);this.edgesSolver=new c(this.body,this.physicsBody,t);this.gravitySolver=new g(this.body,this.physicsBody,t)}else if(this.options.solver==="repulsion"){t=this.options.repulsion;this.nodesSolver=new u(this.body,this.physicsBody,t);this.edgesSolver=new c(this.body,this.physicsBody,t);this.gravitySolver=new m(this.body,this.physicsBody,t)}else if(this.options.solver==="hierarchicalRepulsion"){t=this.options.hierarchicalRepulsion;this.nodesSolver=new f(this.body,this.physicsBody,t);this.edgesSolver=new p(this.body,this.physicsBody,t);this.gravitySolver=new m(this.body,this.physicsBody,t)}else{t=this.options.barnesHut;this.nodesSolver=new d(this.body,this.physicsBody,t);this.edgesSolver=new c(this.body,this.physicsBody,t);this.gravitySolver=new m(this.body,this.physicsBody,t)}this.modelOptions=t}},{key:"initPhysics",value:function e(){if(this.physicsEnabled===true&&this.options.enabled===true){if(this.options.stabilization.enabled===true){this.stabilize()}else{this.stabilized=false;this.ready=true;this.body.emitter.emit("fit",{},this.layoutFailed);this.startSimulation()}}else{this.ready=true;this.body.emitter.emit("fit")}}},{key:"startSimulation",value:function e(){if(this.physicsEnabled===true&&this.options.enabled===true){this.stabilized=false;this.adaptiveTimestep=false;this.body.emitter.emit("_resizeNodes");if(this.viewFunction===undefined){this.viewFunction=this.simulationStep.bind(this);this.body.emitter.on("initRedraw",this.viewFunction);this.body.emitter.emit("_startRendering")}}else{this.body.emitter.emit("_redraw")}}},{key:"stopSimulation",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;this.stabilized=true;if(t===true){this._emitStabilized()}if(this.viewFunction!==undefined){this.body.emitter.off("initRedraw",this.viewFunction);this.viewFunction=undefined;if(t===true){this.body.emitter.emit("_stopRendering")}}}},{key:"simulationStep",value:function e(){var t=Date.now();this.physicsTick();var i=Date.now()-t;if((i<.4*this.simulationInterval||this.runDoubleSpeed===true)&&this.stabilized===false){this.physicsTick();this.runDoubleSpeed=true}if(this.stabilized===true){this.stopSimulation()}}},{key:"_emitStabilized",value:function e(){var t=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.stabilizationIterations;if(this.stabilizationIterations>1||this.startedStabilization===true){setTimeout(function(){t.body.emitter.emit("stabilized",{iterations:i});t.startedStabilization=false;t.stabilizationIterations=0},0)}}},{key:"physicsTick",value:function e(){if(this.startedStabilization===false){this.body.emitter.emit("startStabilizing");this.startedStabilization=true}if(this.stabilized===false){if(this.adaptiveTimestep===true&&this.adaptiveTimestepEnabled===true){var t=1.2;if(this.adaptiveCounter%this.adaptiveInterval===0){this.timestep=2*this.timestep;this.calculateForces();this.moveNodes();this.revert();this.timestep=.5*this.timestep;this.calculateForces();this.moveNodes();this.calculateForces();this.moveNodes();if(this._evaluateStepQuality()===true){this.timestep=t*this.timestep}else{if(this.timestep/t<this.options.timestep){this.timestep=this.options.timestep}else{this.adaptiveCounter=-1;this.timestep=Math.max(this.options.timestep,this.timestep/t)}}}else{this.calculateForces();this.moveNodes()}this.adaptiveCounter+=1}else{this.timestep=this.options.timestep;this.calculateForces();this.moveNodes()}if(this.stabilized===true){this.revert()}this.stabilizationIterations++}}},{key:"updatePhysicsData",value:function e(){this.physicsBody.forces={};this.physicsBody.physicsNodeIndices=[];this.physicsBody.physicsEdgeIndices=[];var t=this.body.nodes;var i=this.body.edges;for(var n in t){if(t.hasOwnProperty(n)){if(t[n].options.physics===true){this.physicsBody.physicsNodeIndices.push(t[n].id)}}}for(var s in i){if(i.hasOwnProperty(s)){if(i[s].options.physics===true){this.physicsBody.physicsEdgeIndices.push(i[s].id)}}}for(var r=0;r<this.physicsBody.physicsNodeIndices.length;r++){var o=this.physicsBody.physicsNodeIndices[r];this.physicsBody.forces[o]={x:0,y:0};if(this.physicsBody.velocities[o]===undefined){this.physicsBody.velocities[o]={x:0,y:0}}}for(var a in this.physicsBody.velocities){if(t[a]===undefined){delete this.physicsBody.velocities[a]}}}},{key:"revert",value:function e(){var t=(0,s["default"])(this.previousStates);var i=this.body.nodes;var n=this.physicsBody.velocities;this.referenceState={};for(var r=0;r<t.length;r++){var o=t[r];if(i[o]!==undefined){if(i[o].options.physics===true){this.referenceState[o]={positions:{x:i[o].x,y:i[o].y}};n[o].x=this.previousStates[o].vx;n[o].y=this.previousStates[o].vy;i[o].x=this.previousStates[o].x;i[o].y=this.previousStates[o].y}}else{delete this.previousStates[o]}}}},{key:"_evaluateStepQuality",value:function e(){var t=void 0,i=void 0,n=void 0;var s=this.body.nodes;var r=this.referenceState;var o=.3;for(var a in this.referenceState){if(this.referenceState.hasOwnProperty(a)&&s[a]!==undefined){t=s[a].x-r[a].positions.x;i=s[a].y-r[a].positions.y;n=Math.sqrt(Math.pow(t,2)+Math.pow(i,2));if(n>o){return false}}}return true}},{key:"moveNodes",value:function e(){var t=this.physicsBody.physicsNodeIndices;var i=this.options.maxVelocity?this.options.maxVelocity:1e9;var n=0;var s=0;var r=5;for(var o=0;o<t.length;o++){var a=t[o];var l=this._performStep(a,i);n=Math.max(n,l);s+=l}this.adaptiveTimestepEnabled=s/t.length<r;this.stabilized=n<this.options.minVelocity}},{key:"_performStep",value:function e(t,i){var n=this.body.nodes[t];var s=this.timestep;var r=this.physicsBody.forces;var o=this.physicsBody.velocities;this.previousStates[t]={x:n.x,y:n.y,vx:o[t].x,vy:o[t].y};if(n.options.fixed.x===false){var a=this.modelOptions.damping*o[t].x;var l=(r[t].x-a)/n.options.mass;o[t].x+=l*s;o[t].x=Math.abs(o[t].x)>i?o[t].x>0?i:-i:o[t].x;n.x+=o[t].x*s}else{r[t].x=0;o[t].x=0}if(n.options.fixed.y===false){var h=this.modelOptions.damping*o[t].y;var d=(r[t].y-h)/n.options.mass;o[t].y+=d*s;o[t].y=Math.abs(o[t].y)>i?o[t].y>0?i:-i:o[t].y;n.y+=o[t].y*s}else{r[t].y=0;o[t].y=0}var u=Math.sqrt(Math.pow(o[t].x,2)+Math.pow(o[t].y,2));return u}},{key:"calculateForces",value:function e(){this.gravitySolver.solve();this.nodesSolver.solve();this.edgesSolver.solve()}},{key:"_freezeNodes",value:function e(){var t=this.body.nodes;for(var i in t){if(t.hasOwnProperty(i)){if(t[i].x&&t[i].y){this.freezeCache[i]={x:t[i].options.fixed.x,y:t[i].options.fixed.y};t[i].options.fixed.x=true;t[i].options.fixed.y=true}}}}},{key:"_restoreFrozenNodes",value:function e(){var t=this.body.nodes;for(var i in t){if(t.hasOwnProperty(i)){if(this.freezeCache[i]!==undefined){t[i].options.fixed.x=this.freezeCache[i].x;t[i].options.fixed.y=this.freezeCache[i].y}}}this.freezeCache={}}},{key:"stabilize",value:function e(){var t=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.options.stabilization.iterations;if(typeof i!=="number"){console.log("The stabilize method needs a numeric amount of iterations. Switching to default: ",this.options.stabilization.iterations);i=this.options.stabilization.iterations}if(this.physicsBody.physicsNodeIndices.length===0){this.ready=true;return}this.adaptiveTimestep=true&&this.options.adaptiveTimestep;this.body.emitter.emit("_resizeNodes");this.stopSimulation();this.stabilized=false;this.body.emitter.emit("_blockRedraw");this.targetIterations=i;if(this.options.stabilization.onlyDynamicEdges===true){this._freezeNodes()}this.stabilizationIterations=0;setTimeout(function(){return t._stabilizationBatch()},0)}},{key:"_stabilizationBatch",value:function e(){if(this.startedStabilization===false){this.body.emitter.emit("startStabilizing");this.startedStabilization=true}var t=0;while(this.stabilized===false&&t<this.options.stabilization.updateInterval&&this.stabilizationIterations<this.targetIterations){this.physicsTick();t++}if(this.stabilized===false&&this.stabilizationIterations<this.targetIterations){this.body.emitter.emit("stabilizationProgress",{iterations:this.stabilizationIterations,total:this.targetIterations});setTimeout(this._stabilizationBatch.bind(this),0)}else{this._finalizeStabilization()}}},{key:"_finalizeStabilization",value:function e(){this.body.emitter.emit("_allowRedraw");if(this.options.stabilization.fit===true){this.body.emitter.emit("fit")}if(this.options.stabilization.onlyDynamicEdges===true){this._restoreFrozenNodes()}this.body.emitter.emit("stabilizationIterationsDone");this.body.emitter.emit("_requestRedraw");if(this.stabilized===true){this._emitStabilized()}else{this.startSimulation()}this.ready=true}},{key:"_drawForces",value:function e(t){for(var i=0;i<this.physicsBody.physicsNodeIndices.length;i++){var n=this.body.nodes[this.physicsBody.physicsNodeIndices[i]];var s=this.physicsBody.forces[this.physicsBody.physicsNodeIndices[i]];var r=20;var o=.03;var a=Math.sqrt(Math.pow(s.x,2)+Math.pow(s.x,2));var l=Math.min(Math.max(5,a),15);var h=3*l;var d=y.HSVToHex((180-Math.min(1,Math.max(0,o*a))*180)/360,1,1);t.lineWidth=l;t.strokeStyle=d;t.beginPath();t.moveTo(n.x,n.y);t.lineTo(n.x+r*s.x,n.y+r*s.y);t.stroke();var u=Math.atan2(s.y,s.x);t.fillStyle=d;t.arrowEndpoint(n.x+r*s.x+Math.cos(u)*h,n.y+r*s.y+Math.sin(u)*h,u,h);t.fill()}}}]);return e}();t["default"]=b},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(134);var s=a(n);var r=i(135);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t,i,n){(0,s["default"])(this,e);this.body=t;this.physicsBody=i;this.barnesHutTree;this.setOptions(n);this.randomSeed=5}(0,o["default"])(e,[{key:"setOptions",value:function e(t){this.options=t;this.thetaInversed=1/this.options.theta;this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"seededRandom",value:function e(){var t=Math.sin(this.randomSeed++)*1e4;return t-Math.floor(t)}},{key:"solve",value:function e(){if(this.options.gravitationalConstant!==0&&this.physicsBody.physicsNodeIndices.length>0){var t=void 0;var i=this.body.nodes;var n=this.physicsBody.physicsNodeIndices;var s=n.length;var r=this._formBarnesHutTree(i,n);this.barnesHutTree=r;for(var o=0;o<s;o++){t=i[n[o]];if(t.options.mass>0){this._getForceContribution(r.root.children.NW,t);this._getForceContribution(r.root.children.NE,t);this._getForceContribution(r.root.children.SW,t);this._getForceContribution(r.root.children.SE,t)}}}}},{key:"_getForceContribution",value:function e(t,i){if(t.childrenCount>0){var n=void 0,s=void 0,r=void 0;n=t.centerOfMass.x-i.x;s=t.centerOfMass.y-i.y;r=Math.sqrt(n*n+s*s);if(r*t.calcSize>this.thetaInversed){this._calculateForces(r,n,s,i,t)}else{if(t.childrenCount===4){this._getForceContribution(t.children.NW,i);this._getForceContribution(t.children.NE,i);this._getForceContribution(t.children.SW,i);this._getForceContribution(t.children.SE,i)}else{if(t.children.data.id!=i.id){this._calculateForces(r,n,s,i,t)}}}}}},{key:"_calculateForces",value:function e(t,i,n,s,r){if(t===0){t=.1;i=t}if(this.overlapAvoidanceFactor<1&&s.shape.radius){t=Math.max(.1+this.overlapAvoidanceFactor*s.shape.radius,t-s.shape.radius)}var o=this.options.gravitationalConstant*r.mass*s.options.mass/Math.pow(t,3);var a=i*o;var l=n*o;this.physicsBody.forces[s.id].x+=a;this.physicsBody.forces[s.id].y+=l}},{key:"_formBarnesHutTree",value:function e(t,i){var n=void 0;var s=i.length;var r=t[i[0]].x;var o=t[i[0]].y;var a=t[i[0]].x;var l=t[i[0]].y;for(var h=1;h<s;h++){var d=t[i[h]].x;var u=t[i[h]].y;if(t[i[h]].options.mass>0){if(d<r){r=d}if(d>a){a=d}if(u<o){o=u}if(u>l){l=u}}}var f=Math.abs(a-r)-Math.abs(l-o);if(f>0){o-=.5*f;l+=.5*f}else{r+=.5*f;a-=.5*f}var c=1e-5;var p=Math.max(c,Math.abs(a-r));var m=.5*p;var v=.5*(r+a),g=.5*(o+l);var y={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:v-m,maxX:v+m,minY:g-m,maxY:g+m},size:p,calcSize:1/p,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(y.root);for(var b=0;b<s;b++){n=t[i[b]];if(n.options.mass>0){this._placeInTree(y.root,n)}}return y}},{key:"_updateBranchMass",value:function e(t,i){var n=t.mass+i.options.mass;var s=1/n;t.centerOfMass.x=t.centerOfMass.x*t.mass+i.x*i.options.mass;t.centerOfMass.x*=s;t.centerOfMass.y=t.centerOfMass.y*t.mass+i.y*i.options.mass;t.centerOfMass.y*=s;t.mass=n;var r=Math.max(Math.max(i.height,i.radius),i.width);t.maxWidth=t.maxWidth<r?r:t.maxWidth}},{key:"_placeInTree",value:function e(t,i,n){if(n!=true||n===undefined){this._updateBranchMass(t,i)}if(t.children.NW.range.maxX>i.x){if(t.children.NW.range.maxY>i.y){this._placeInRegion(t,i,"NW")}else{this._placeInRegion(t,i,"SW")}}else{if(t.children.NW.range.maxY>i.y){this._placeInRegion(t,i,"NE")}else{this._placeInRegion(t,i,"SE")}}}},{key:"_placeInRegion",value:function e(t,i,n){switch(t.children[n].childrenCount){case 0:t.children[n].children.data=i;t.children[n].childrenCount=1;this._updateBranchMass(t.children[n],i);break;case 1:if(t.children[n].children.data.x===i.x&&t.children[n].children.data.y===i.y){i.x+=this.seededRandom();i.y+=this.seededRandom()}else{this._splitBranch(t.children[n]);this._placeInTree(t.children[n],i)}break;case 4:this._placeInTree(t.children[n],i);break}}},{key:"_splitBranch",value:function e(t){var i=null;if(t.childrenCount===1){i=t.children.data;t.mass=0;t.centerOfMass.x=0;t.centerOfMass.y=0}t.childrenCount=4;t.children.data=null;this._insertRegion(t,"NW");this._insertRegion(t,"NE");this._insertRegion(t,"SW");this._insertRegion(t,"SE");if(i!=null){this._placeInTree(t,i)}}},{key:"_insertRegion",value:function e(t,i){var n=void 0,s=void 0,r=void 0,o=void 0;var a=.5*t.size;switch(i){case"NW":n=t.range.minX;s=t.range.minX+a;r=t.range.minY;o=t.range.minY+a;break;case"NE":n=t.range.minX+a;s=t.range.maxX;r=t.range.minY;o=t.range.minY+a;break;case"SW":n=t.range.minX;s=t.range.minX+a;r=t.range.minY+a;o=t.range.maxY;break;case"SE":n=t.range.minX+a;s=t.range.maxX;r=t.range.minY+a;o=t.range.maxY;break}t.children[i]={centerOfMass:{x:0,y:0},mass:0,range:{minX:n,maxX:s,minY:r,maxY:o},size:.5*t.size,calcSize:2*t.calcSize,children:{data:null},maxWidth:0,level:t.level+1,childrenCount:0}}},{key:"_debug",value:function e(t,i){if(this.barnesHutTree!==undefined){t.lineWidth=1;this._drawBranch(this.barnesHutTree.root,t,i)}}},{key:"_drawBranch",value:function e(t,i,n){if(n===undefined){n="#FF0000"}if(t.childrenCount===4){this._drawBranch(t.children.NW,i);this._drawBranch(t.children.NE,i);this._drawBranch(t.children.SE,i);this._drawBranch(t.children.SW,i)}i.strokeStyle=n;i.beginPath();i.moveTo(t.range.minX,t.range.minY);i.lineTo(t.range.maxX,t.range.minY);i.stroke();i.beginPath();i.moveTo(t.range.maxX,t.range.minY);i.lineTo(t.range.maxX,t.range.maxY);i.stroke();i.beginPath();i.moveTo(t.range.maxX,t.range.maxY);i.lineTo(t.range.minX,t.range.maxY);i.stroke();i.beginPath();i.moveTo(t.range.minX,t.range.maxY);i.lineTo(t.range.minX,t.range.minY);i.stroke()}}]);return e}();t["default"]=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(134);var s=a(n);var r=i(135);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t,i,n){(0,s["default"])(this,e);this.body=t;this.physicsBody=i;this.setOptions(n)}(0,o["default"])(e,[{key:"setOptions",value:function e(t){this.options=t}},{key:"solve",value:function e(){var t,i,n,s,r,o,a,l;var h=this.body.nodes;var d=this.physicsBody.physicsNodeIndices;var u=this.physicsBody.forces;var f=this.options.nodeDistance;var c=-2/3/f;var p=4/3;for(var m=0;m<d.length-1;m++){a=h[d[m]];for(var v=m+1;v<d.length;v++){l=h[d[v]];t=l.x-a.x;i=l.y-a.y;n=Math.sqrt(t*t+i*i);if(n===0){n=.1*Math.random();t=n}if(n<2*f){if(n<.5*f){o=1}else{o=c*n+p}o=o/n;s=t*o;r=i*o;u[a.id].x-=s;u[a.id].y-=r;u[l.id].x+=s;u[l.id].y+=r}}}}}]);return e}();t["default"]=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(134);var s=a(n);var r=i(135);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t,i,n){(0,s["default"])(this,e);this.body=t;this.physicsBody=i;this.setOptions(n)}(0,o["default"])(e,[{key:"setOptions",value:function e(t){this.options=t}},{key:"solve",value:function e(){var t,i,n,s,r,o,a,l,h,d;var u=this.body.nodes;var f=this.physicsBody.physicsNodeIndices;var c=this.physicsBody.forces;var p=this.options.nodeDistance;for(h=0;h<f.length-1;h++){a=u[f[h]];for(d=h+1;d<f.length;d++){l=u[f[d]];if(a.level===l.level){t=l.x-a.x;i=l.y-a.y;n=Math.sqrt(t*t+i*i);var m=.05;if(n<p){o=-Math.pow(m*n,2)+Math.pow(m*p,2)}else{o=0}if(n===0){n=.01}else{o=o/n}s=t*o;r=i*o;c[a.id].x-=s;c[a.id].y-=r;c[l.id].x+=s;c[l.id].y+=r}}}}}]);return e}();t["default"]=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(134);var s=a(n);var r=i(135);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t,i,n){(0,s["default"])(this,e);this.body=t;this.physicsBody=i;this.setOptions(n)}(0,o["default"])(e,[{key:"setOptions",value:function e(t){this.options=t}},{key:"solve",value:function e(){var t=void 0,i=void 0;var n=this.physicsBody.physicsEdgeIndices;var s=this.body.edges;var r=void 0,o=void 0,a=void 0;for(var l=0;l<n.length;l++){i=s[n[l]];if(i.connected===true&&i.toId!==i.fromId){if(this.body.nodes[i.toId]!==undefined&&this.body.nodes[i.fromId]!==undefined){if(i.edgeType.via!==undefined){t=i.options.length===undefined?this.options.springLength:i.options.length;r=i.to;o=i.edgeType.via;a=i.from;this._calculateSpringForce(r,o,.5*t);this._calculateSpringForce(o,a,.5*t)}else{t=i.options.length===undefined?this.options.springLength*1.5:i.options.length;this._calculateSpringForce(i.from,i.to,t)}}}}}},{key:"_calculateSpringForce",value:function e(t,i,n){var s=t.x-i.x;var r=t.y-i.y;var o=Math.max(Math.sqrt(s*s+r*r),.01);var a=this.options.springConstant*(n-o)/o;var l=s*a;var h=r*a;if(this.physicsBody.forces[t.id]!==undefined){this.physicsBody.forces[t.id].x+=l;this.physicsBody.forces[t.id].y+=h}if(this.physicsBody.forces[i.id]!==undefined){this.physicsBody.forces[i.id].x-=l;this.physicsBody.forces[i.id].y-=h}}}]);return e}();t["default"]=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(134);var s=a(n);var r=i(135);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t,i,n){(0,s["default"])(this,e);this.body=t;this.physicsBody=i;this.setOptions(n)}(0,o["default"])(e,[{key:"setOptions",value:function e(t){this.options=t}},{key:"solve",value:function e(){var t,i;var n,s,r,o,a,l;var h=this.body.edges;var d=.5;var u=this.physicsBody.physicsEdgeIndices;var f=this.physicsBody.physicsNodeIndices;var c=this.physicsBody.forces;for(var p=0;p<f.length;p++){var m=f[p];c[m].springFx=0;c[m].springFy=0}for(var v=0;v<u.length;v++){i=h[u[v]];if(i.connected===true){t=i.options.length===undefined?this.options.springLength:i.options.length;n=i.from.x-i.to.x;s=i.from.y-i.to.y;l=Math.sqrt(n*n+s*s);l=l===0?.01:l;a=this.options.springConstant*(t-l)/l;r=n*a;o=s*a;if(i.to.level!=i.from.level){if(c[i.toId]!==undefined){c[i.toId].springFx-=r;c[i.toId].springFy-=o}if(c[i.fromId]!==undefined){c[i.fromId].springFx+=r;c[i.fromId].springFy+=o}}else{if(c[i.toId]!==undefined){c[i.toId].x-=d*r;c[i.toId].y-=d*o}if(c[i.fromId]!==undefined){c[i.fromId].x+=d*r;c[i.fromId].y+=d*o}}}}var a=1;var g,y;for(var b=0;b<f.length;b++){var w=f[b];g=Math.min(a,Math.max(-a,c[w].springFx));y=Math.min(a,Math.max(-a,c[w].springFy));c[w].x+=g;c[w].y+=y}var _=0;var x=0;for(var k=0;k<f.length;k++){var C=f[k];_+=c[C].x;x+=c[C].y}var S=_/f.length;var T=x/f.length;for(var M=0;M<f.length;M++){var D=f[M];c[D].x-=S;c[D].y-=T}}}]);return e}();t["default"]=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(134);var s=a(n);var r=i(135);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t,i,n){(0,s["default"])(this,e);this.body=t;this.physicsBody=i;this.setOptions(n)}(0,o["default"])(e,[{key:"setOptions",value:function e(t){this.options=t}},{key:"solve",value:function e(){var t=void 0,i=void 0,n=void 0,s=void 0;var r=this.body.nodes;var o=this.physicsBody.physicsNodeIndices;var a=this.physicsBody.forces;for(var l=0;l<o.length;l++){var h=o[l];s=r[h];t=-s.x;i=-s.y;n=Math.sqrt(t*t+i*i);this._calculateForces(n,t,i,a,s)}}},{key:"_calculateForces",value:function e(t,i,n,s,r){var o=t===0?0:this.options.centralGravity/t;s[r.id].x=i*o;s[r.id].y=n*o}}]);return e}();t["default"]=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(210);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n){(0,o["default"])(this,t);return(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n))}(0,l["default"])(t,[{key:"_calculateForces",value:function e(t,i,n,s,r){if(t===0){t=.1*Math.random();i=t}if(this.overlapAvoidanceFactor<1&&s.shape.radius){t=Math.max(.1+this.overlapAvoidanceFactor*s.shape.radius,t-s.shape.radius)}var o=s.edges.length+1;var a=this.options.gravitationalConstant*r.mass*s.options.mass*o/Math.pow(t,2);var l=i*a;var h=n*a;this.physicsBody.forces[s.id].x+=l;this.physicsBody.forces[s.id].y+=h}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=m(n);var r=i(134);var o=m(r);var a=i(135);var l=m(a);var h=i(178);var d=m(h);var u=i(179);var f=m(u);var c=i(215);var p=m(c);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){(0,f["default"])(t,e);function t(e,i,n){(0,o["default"])(this,t);return(0,d["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n))}(0,l["default"])(t,[{key:"_calculateForces",value:function e(t,i,n,s,r){if(t>0){var o=r.edges.length+1;var a=this.options.centralGravity*o*r.options.mass;s[r.id].x=i*a;s[r.id].y=n*a}}}]);return t}(p["default"]);t["default"]=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(58);var s=u(n);var r=i(62);var o=u(r);var a=i(134);var l=u(a);var h=i(135);var d=u(h);function u(e){return e&&e.__esModule?e:{default:e}}var f=i(1);var c=i(219)["default"];var p=i(220)["default"];var m=function(){function e(t){var i=this;(0,l["default"])(this,e);this.body=t;this.clusteredNodes={};this.clusteredEdges={};this.options={};this.defaultOptions={};f.extend(this.options,this.defaultOptions);this.body.emitter.on("_resetData",function(){i.clusteredNodes={};i.clusteredEdges={}})}(0,d["default"])(e,[{key:"clusterByHubsize",value:function e(t,i){if(t===undefined){t=this._getHubSize()}else if((typeof t==="undefined"?"undefined":(0,o["default"])(t))==="object"){i=this._checkOptions(t);t=this._getHubSize()}var n=[];for(var s=0;s<this.body.nodeIndices.length;s++){var r=this.body.nodes[this.body.nodeIndices[s]];if(r.edges.length>=t){n.push(r.id)}}for(var a=0;a<n.length;a++){this.clusterByConnection(n[a],i,true)}this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(t.joinCondition===undefined){throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.")}t=this._checkOptions(t);var n={};var s={};for(var r=0;r<this.body.nodeIndices.length;r++){var o=this.body.nodeIndices[r];var a=this.body.nodes[o];var l=c.cloneOptions(a);if(t.joinCondition(l)===true){n[o]=this.body.nodes[o];for(var h=0;h<a.edges.length;h++){var d=a.edges[h];if(this.clusteredEdges[d.id]===undefined){s[d.id]=d}}}}this._cluster(n,s,t,i)}},{key:"clusterByEdgeCount",value:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;i=this._checkOptions(i);var r=[];var o={};var a=void 0,l=void 0,h=void 0,d=void 0,u=void 0;for(var f=0;f<this.body.nodeIndices.length;f++){var p={};var m={};d=this.body.nodeIndices[f];if(o[d]===undefined){u=0;h=this.body.nodes[d];l=[];for(var v=0;v<h.edges.length;v++){a=h.edges[v];if(this.clusteredEdges[a.id]===undefined){if(a.toId!==a.fromId){u++}l.push(a)}}if(u===t){var g=true;for(var y=0;y<l.length;y++){a=l[y];var b=this._getConnectedId(a,d);if(i.joinCondition===undefined){m[a.id]=a;p[d]=this.body.nodes[d];p[b]=this.body.nodes[b];o[d]=true}else{var w=c.cloneOptions(this.body.nodes[d]);if(i.joinCondition(w)===true){m[a.id]=a;p[d]=this.body.nodes[d];o[d]=true}else{g=false;break}}}if((0,s["default"])(p).length>0&&(0,s["default"])(m).length>0&&g===true){r.push({nodes:p,edges:m})}}}}for(var _=0;_<r.length;_++){this._cluster(r[_].nodes,r[_].edges,i,false)}if(n===true){this.body.emitter.emit("_dataChanged")}}},{key:"clusterOutliers",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this.clusterByEdgeCount(1,t,i)}},{key:"clusterBridges",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this.clusterByEdgeCount(2,t,i)}},{key:"clusterByConnection",value:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(t===undefined){throw new Error("No nodeId supplied to clusterByConnection!")}if(this.body.nodes[t]===undefined){throw new Error("The nodeId given to clusterByConnection does not exist!")}var r=this.body.nodes[t];i=this._checkOptions(i,r);if(i.clusterNodeProperties.x===undefined){i.clusterNodeProperties.x=r.x}if(i.clusterNodeProperties.y===undefined){i.clusterNodeProperties.y=r.y}if(i.clusterNodeProperties.fixed===undefined){i.clusterNodeProperties.fixed={};i.clusterNodeProperties.fixed.x=r.options.fixed.x;i.clusterNodeProperties.fixed.y=r.options.fixed.y}var o={};var a={};var l=r.id;var h=c.cloneOptions(r);o[l]=r;for(var d=0;d<r.edges.length;d++){var u=r.edges[d];if(this.clusteredEdges[u.id]===undefined){var f=this._getConnectedId(u,l);if(this.clusteredNodes[f]===undefined){if(f!==l){if(i.joinCondition===undefined){a[u.id]=u;o[f]=this.body.nodes[f]}else{var p=c.cloneOptions(this.body.nodes[f]);if(i.joinCondition(h,p)===true){a[u.id]=u;o[f]=this.body.nodes[f]}}}else{a[u.id]=u}}}}var m=(0,s["default"])(o).map(function(e){return o[e].id});for(v in o){var v=o[v];for(var g=0;g<v.edges.length;g++){var y=v.edges[g];if(m.indexOf(this._getConnectedId(y,v.id))>-1){a[y.id]=y}}}this._cluster(o,a,i,n)}},{key:"_createClusterEdges",value:function e(t,i,n,r){var o=void 0,a=void 0,l=void 0,h=void 0,d=void 0,u=void 0;var p=(0,s["default"])(t);var m=[];for(var v=0;v<p.length;v++){a=p[v];l=t[a];for(var g=0;g<l.edges.length;g++){o=l.edges[g];if(this.clusteredEdges[o.id]===undefined){if(o.toId==o.fromId){i[o.id]=o}else{if(o.toId==a){h=n.id;d=o.fromId;u=d}else{h=o.toId;d=n.id;u=h}}if(t[u]===undefined){m.push({edge:o,fromId:d,toId:h})}}}}for(var y=0;y<m.length;y++){var b=m[y].edge;var w=c.cloneOptions(b,"edge");f.deepExtend(w,r);w.from=m[y].fromId;w.to=m[y].toId;w.id="clusterEdge:"+f.randomUUID();var _=this.body.functions.createEdge(w);_.clusteringEdgeReplacingId=b.id;this.body.edges[b.id].edgeReplacedById=_.id;this.body.edges[_.id]=_;_.connect();this._backupEdgeOptions(b);b.setOptions({physics:false,hidden:true})}}},{key:"_checkOptions",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(t.clusterEdgeProperties===undefined){t.clusterEdgeProperties={}}if(t.clusterNodeProperties===undefined){t.clusterNodeProperties={}}return t}},{key:"_cluster",value:function e(t,i,n){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;if((0,s["default"])(t).length==0){return}if((0,s["default"])(t).length==1&&n.clusterNodeProperties.allowSingleNodeCluster!=true){return}for(var o in t){if(t.hasOwnProperty(o)){if(this.clusteredNodes[o]!==undefined){return}}}var a=f.deepExtend({},n.clusterNodeProperties);if(n.processProperties!==undefined){var l=[];for(var h in t){if(t.hasOwnProperty(h)){var d=c.cloneOptions(t[h]);l.push(d)}}var u=[];for(var m in i){if(i.hasOwnProperty(m)){if(m.substr(0,12)!=="clusterEdge:"){var v=c.cloneOptions(i[m],"edge");u.push(v)}}}a=n.processProperties(a,l,u);if(!a){throw new Error("The processProperties function does not return properties!")}}if(a.id===undefined){a.id="cluster:"+f.randomUUID()}var g=a.id;if(a.label===undefined){a.label="cluster"}var y=undefined;if(a.x===undefined){y=this._getClusterPosition(t);a.x=y.x}if(a.y===undefined){if(y===undefined){y=this._getClusterPosition(t)}a.y=y.y}a.id=g;var b=this.body.functions.createNode(a,p);b.isCluster=true;b.containedNodes=t;b.containedEdges=i;b.clusterEdgeProperties=n.clusterEdgeProperties;this.body.nodes[a.id]=b;this._createClusterEdges(t,i,a,n.clusterEdgeProperties);for(var w in i){if(i.hasOwnProperty(w)){if(this.body.edges[w]!==undefined){var _=this.body.edges[w];this._backupEdgeOptions(_);_.setOptions({physics:false,hidden:true})}}}for(var x in t){if(t.hasOwnProperty(x)){this.clusteredNodes[x]={clusterId:a.id,node:this.body.nodes[x]};this.body.nodes[x].setOptions({hidden:true,physics:false})}}a.id=undefined;if(r===true){this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function e(t){if(this.clusteredEdges[t.id]===undefined){this.clusteredEdges[t.id]={physics:t.options.physics,hidden:t.options.hidden}}}},{key:"_restoreEdge",value:function e(t){var i=this.clusteredEdges[t.id];
if(i!==undefined){t.setOptions({physics:i.physics,hidden:i.hidden});delete this.clusteredEdges[t.id]}}},{key:"isCluster",value:function e(t){if(this.body.nodes[t]!==undefined){return this.body.nodes[t].isCluster===true}else{console.log("Node does not exist.");return false}}},{key:"_getClusterPosition",value:function e(t){var i=(0,s["default"])(t);var n=t[i[0]].x;var r=t[i[0]].x;var o=t[i[0]].y;var a=t[i[0]].y;var l=void 0;for(var h=1;h<i.length;h++){l=t[i[h]];n=l.x<n?l.x:n;r=l.x>r?l.x:r;o=l.y<o?l.y:o;a=l.y>a?l.y:a}return{x:.5*(n+r),y:.5*(o+a)}}},{key:"openCluster",value:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;if(t===undefined){throw new Error("No clusterNodeId supplied to openCluster.")}if(this.body.nodes[t]===undefined){throw new Error("The clusterNodeId supplied to openCluster does not exist.")}if(this.body.nodes[t].containedNodes===undefined){console.log("The node:"+t+" is not a cluster.");return}var s=this.body.nodes[t];var r=s.containedNodes;var o=s.containedEdges;if(i!==undefined&&i.releaseFunction!==undefined&&typeof i.releaseFunction==="function"){var a={};var l={x:s.x,y:s.y};for(var h in r){if(r.hasOwnProperty(h)){var d=this.body.nodes[h];a[h]={x:d.x,y:d.y}}}var u=i.releaseFunction(l,a);for(var p in r){if(r.hasOwnProperty(p)){var m=this.body.nodes[p];if(u[p]!==undefined){m.x=u[p].x===undefined?s.x:u[p].x;m.y=u[p].y===undefined?s.y:u[p].y}}}}else{for(var v in r){if(r.hasOwnProperty(v)){var g=this.body.nodes[v];g=r[v];if(g.options.fixed.x===false){g.x=s.x}if(g.options.fixed.y===false){g.y=s.y}}}}for(var y in r){if(r.hasOwnProperty(y)){var b=this.body.nodes[y];b.vx=s.vx;b.vy=s.vy;b.setOptions({hidden:false,physics:true});delete this.clusteredNodes[y]}}var w=[];for(var _=0;_<s.edges.length;_++){w.push(s.edges[_])}for(var x=0;x<w.length;x++){var k=w[x];var C=this._getConnectedId(k,t);if(this.clusteredNodes[C]!==undefined){var S=this.body.nodes[this.clusteredNodes[C].clusterId];var T=this.body.edges[k.clusteringEdgeReplacingId];if(T!==undefined){S.containedEdges[T.id]=T;delete o[T.id];var M=T.fromId;var D=T.toId;if(T.toId==C){D=this.clusteredNodes[C].clusterId}else{M=this.clusteredNodes[C].clusterId}var E=c.cloneOptions(T,"edge");f.deepExtend(E,S.clusterEdgeProperties);var O="clusterEdge:"+f.randomUUID();f.deepExtend(E,{from:M,to:D,hidden:false,physics:true,id:O});var P=this.body.functions.createEdge(E);P.clusteringEdgeReplacingId=T.id;this.body.edges[O]=P;this.body.edges[O].connect()}}else{var I=this.body.edges[k.clusteringEdgeReplacingId];if(I!==undefined){this._restoreEdge(I)}}k.cleanup();k.disconnect();delete this.body.edges[k.id]}for(var A in o){if(o.hasOwnProperty(A)){this._restoreEdge(o[A])}}delete this.body.nodes[t];if(n===true){this.body.emitter.emit("_dataChanged")}}},{key:"getNodesInCluster",value:function e(t){var i=[];if(this.isCluster(t)===true){var n=this.body.nodes[t].containedNodes;for(var s in n){if(n.hasOwnProperty(s)){i.push(this.body.nodes[s].id)}}}return i}},{key:"findNode",value:function e(t){var i=[];var n=100;var s=0;while(this.clusteredNodes[t]!==undefined&&s<n){i.push(this.body.nodes[t].id);t=this.clusteredNodes[t].clusterId;s++}i.push(this.body.nodes[t].id);i.reverse();return i}},{key:"updateClusteredNode",value:function e(t,i){if(t===undefined){throw new Error("No clusteredNodeId supplied to updateClusteredNode.")}if(i===undefined){throw new Error("No newOptions supplied to updateClusteredNode.")}if(this.body.nodes[t]===undefined){throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.")}this.body.nodes[t].setOptions(i);this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function e(t,i){if(t===undefined){throw new Error("No startEdgeId supplied to updateEdge.")}if(i===undefined){throw new Error("No newOptions supplied to updateEdge.")}if(this.body.edges[t]===undefined){throw new Error("The startEdgeId supplied to updateEdge does not exist.")}var n=this.getClusteredEdges(t);for(var s=0;s<n.length;s++){var r=this.body.edges[n[s]];r.setOptions(i)}this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function e(t){var i=[];var n=100;var s=0;while(t!==undefined&&this.body.edges[t]!==undefined&&s<n){i.push(this.body.edges[t].id);t=this.body.edges[t].edgeReplacedById;s++}i.reverse();return i}},{key:"getBaseEdge",value:function e(t){var i=t;var n=100;var s=0;while(t!==undefined&&this.body.edges[t]!==undefined&&s<n){t=this.body.edges[t].clusteringEdgeReplacingId;s++;if(t!==undefined){i=t}}return i}},{key:"_getConnectedId",value:function e(t,i){if(t.toId!=i){return t.toId}else if(t.fromId!=i){return t.fromId}else{return t.fromId}}},{key:"_getHubSize",value:function e(){var t=0;var i=0;var n=0;var s=0;for(var r=0;r<this.body.nodeIndices.length;r++){var o=this.body.nodes[this.body.nodeIndices[r]];if(o.edges.length>s){s=o.edges.length}t+=o.edges.length;i+=Math.pow(o.edges.length,2);n+=1}t=t/n;i=i/n;var a=i-Math.pow(t,2);var l=Math.sqrt(a);var h=Math.floor(t+2*l);if(h>s){h=s}return h}}]);return e}();t["default"]=m},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(134);var s=a(n);var r=i(135);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=i(1);var h=function(){function e(){(0,s["default"])(this,e)}(0,o["default"])(e,null,[{key:"getRange",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var n=1e9,s=-1e9,r=1e9,o=-1e9,a;if(i.length>0){for(var l=0;l<i.length;l++){a=t[i[l]];if(r>a.shape.boundingBox.left){r=a.shape.boundingBox.left}if(o<a.shape.boundingBox.right){o=a.shape.boundingBox.right}if(n>a.shape.boundingBox.top){n=a.shape.boundingBox.top}if(s<a.shape.boundingBox.bottom){s=a.shape.boundingBox.bottom}}}if(r===1e9&&o===-1e9&&n===1e9&&s===-1e9){n=0,s=0,r=0,o=0}return{minX:r,maxX:o,minY:n,maxY:s}}},{key:"getRangeCore",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var n=1e9,s=-1e9,r=1e9,o=-1e9,a;if(i.length>0){for(var l=0;l<i.length;l++){a=t[i[l]];if(r>a.x){r=a.x}if(o<a.x){o=a.x}if(n>a.y){n=a.y}if(s<a.y){s=a.y}}}if(r===1e9&&o===-1e9&&n===1e9&&s===-1e9){n=0,s=0,r=0,o=0}return{minX:r,maxX:o,minY:n,maxY:s}}},{key:"findCenter",value:function e(t){return{x:.5*(t.maxX+t.minX),y:.5*(t.maxY+t.minY)}}},{key:"cloneOptions",value:function e(t,i){var n={};if(i===undefined||i==="node"){l.deepExtend(n,t.options,true);n.x=t.x;n.y=t.y;n.amountOfConnections=t.edges.length}else{l.deepExtend(n,t.options,true)}return n}}]);return e}();t["default"]=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(175);var s=c(n);var r=i(134);var o=c(r);var a=i(178);var l=c(a);var h=i(179);var d=c(h);var u=i(168);var f=c(u);function c(e){return e&&e.__esModule?e:{default:e}}var p=function(e){(0,d["default"])(t,e);function t(e,i,n,r,a){(0,o["default"])(this,t);var h=(0,l["default"])(this,(t.__proto__||(0,s["default"])(t)).call(this,e,i,n,r,a));h.isCluster=true;h.containedNodes={};h.containedEdges={};return h}return t}(f["default"]);t["default"]=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(134);var s=a(n);var r=i(135);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}if(typeof window!=="undefined"){window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame}var l=i(1);var h=function(){function e(t,i){(0,s["default"])(this,e);this.body=t;this.canvas=i;this.redrawRequested=false;this.renderTimer=undefined;this.requiresTimeout=true;this.renderingActive=false;this.renderRequests=0;this.pixelRatio=undefined;this.allowRedraw=true;this.dragging=false;this.options={};this.defaultOptions={hideEdgesOnDrag:false,hideNodesOnDrag:false};l.extend(this.options,this.defaultOptions);this._determineBrowserMethod();this.bindEventListeners()}(0,o["default"])(e,[{key:"bindEventListeners",value:function e(){var t=this;this.body.emitter.on("dragStart",function(){t.dragging=true});this.body.emitter.on("dragEnd",function(){t.dragging=false});this.body.emitter.on("_resizeNodes",function(){t._resizeNodes()});this.body.emitter.on("_redraw",function(){if(t.renderingActive===false){t._redraw()}});this.body.emitter.on("_blockRedraw",function(){t.allowRedraw=false});this.body.emitter.on("_allowRedraw",function(){t.allowRedraw=true;t.redrawRequested=false});this.body.emitter.on("_requestRedraw",this._requestRedraw.bind(this));this.body.emitter.on("_startRendering",function(){t.renderRequests+=1;t.renderingActive=true;t._startRendering()});this.body.emitter.on("_stopRendering",function(){t.renderRequests-=1;t.renderingActive=t.renderRequests>0;t.renderTimer=undefined});this.body.emitter.on("destroy",function(){t.renderRequests=0;t.allowRedraw=false;t.renderingActive=false;if(t.requiresTimeout===true){clearTimeout(t.renderTimer)}else{cancelAnimationFrame(t.renderTimer)}t.body.emitter.off()})}},{key:"setOptions",value:function e(t){if(t!==undefined){var i=["hideEdgesOnDrag","hideNodesOnDrag"];l.selectiveDeepExtend(i,this.options,t)}}},{key:"_startRendering",value:function e(){if(this.renderingActive===true){if(this.renderTimer===undefined){if(this.requiresTimeout===true){this.renderTimer=window.setTimeout(this._renderStep.bind(this),this.simulationInterval)}else{this.renderTimer=window.requestAnimationFrame(this._renderStep.bind(this))}}}}},{key:"_renderStep",value:function e(){if(this.renderingActive===true){this.renderTimer=undefined;if(this.requiresTimeout===true){this._startRendering()}this._redraw();if(this.requiresTimeout===false){this._startRendering()}}}},{key:"redraw",value:function e(){this.body.emitter.emit("setSize");this._redraw()}},{key:"_requestRedraw",value:function e(){var t=this;if(this.redrawRequested!==true&&this.renderingActive===false&&this.allowRedraw===true){this.redrawRequested=true;if(this.requiresTimeout===true){window.setTimeout(function(){t._redraw(false)},0)}else{window.requestAnimationFrame(function(){t._redraw(false)})}}}},{key:"_redraw",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(this.allowRedraw===true){this.body.emitter.emit("initRedraw");this.redrawRequested=false;var i=this.canvas.frame.canvas.getContext("2d");if(this.canvas.frame.canvas.width===0||this.canvas.frame.canvas.height===0){this.canvas.setSize()}this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1);i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var n=this.canvas.frame.canvas.clientWidth;var s=this.canvas.frame.canvas.clientHeight;i.clearRect(0,0,n,s);if(this.canvas.frame.clientWidth===0){return}i.save();i.translate(this.body.view.translation.x,this.body.view.translation.y);i.scale(this.body.view.scale,this.body.view.scale);i.beginPath();this.body.emitter.emit("beforeDrawing",i);i.closePath();if(t===false){if(this.dragging===false||this.dragging===true&&this.options.hideEdgesOnDrag===false){this._drawEdges(i)}}if(this.dragging===false||this.dragging===true&&this.options.hideNodesOnDrag===false){this._drawNodes(i,t)}i.beginPath();this.body.emitter.emit("afterDrawing",i);i.closePath();i.restore();if(t===true){i.clearRect(0,0,n,s)}}}},{key:"_resizeNodes",value:function e(){var t=this.canvas.frame.canvas.getContext("2d");if(this.pixelRatio===undefined){this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);t.save();t.translate(this.body.view.translation.x,this.body.view.translation.y);t.scale(this.body.view.scale,this.body.view.scale);var i=this.body.nodes;var n=void 0;for(var s in i){if(i.hasOwnProperty(s)){n=i[s];n.resize(t);n.updateBoundingBox(t,n.selected)}}t.restore()}},{key:"_drawNodes",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=this.body.nodes;var s=this.body.nodeIndices;var r=void 0;var o=[];var a=20;var l=this.canvas.DOMtoCanvas({x:-a,y:-a});var h=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+a,y:this.canvas.frame.canvas.clientHeight+a});var d={top:l.y,left:l.x,bottom:h.y,right:h.x};for(var u=0;u<s.length;u++){r=n[s[u]];if(r.isSelected()){o.push(s[u])}else{if(i===true){r.draw(t)}else if(r.isBoundingBoxOverlappingWith(d)===true){r.draw(t)}else{r.updateBoundingBox(t,r.selected)}}}for(var f=0;f<o.length;f++){r=n[o[f]];r.draw(t)}}},{key:"_drawEdges",value:function e(t){var i=this.body.edges;var n=this.body.edgeIndices;var s=void 0;for(var r=0;r<n.length;r++){s=i[n[r]];if(s.connected===true){s.draw(t)}}}},{key:"_determineBrowserMethod",value:function e(){if(typeof window!=="undefined"){var t=navigator.userAgent.toLowerCase();this.requiresTimeout=false;if(t.indexOf("msie 9.0")!=-1){this.requiresTimeout=true}else if(t.indexOf("safari")!=-1){if(t.indexOf("chrome")<=-1){this.requiresTimeout=true}}}else{this.requiresTimeout=true}}}]);return e}();t["default"]=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(134);var s=a(n);var r=i(135);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=i(112);var h=i(119);var d=i(1);var u=function(){function e(t){(0,s["default"])(this,e);this.body=t;this.pixelRatio=1;this.resizeTimer=undefined;this.resizeFunction=this._onResize.bind(this);this.cameraState={};this.initialized=false;this.canvasViewCenter={};this.options={};this.defaultOptions={autoResize:true,height:"100%",width:"100%"};d.extend(this.options,this.defaultOptions);this.bindEventListeners()}(0,o["default"])(e,[{key:"bindEventListeners",value:function e(){var t=this;this.body.emitter.once("resize",function(e){if(e.width!==0){t.body.view.translation.x=e.width*.5}if(e.height!==0){t.body.view.translation.y=e.height*.5}});this.body.emitter.on("setSize",this.setSize.bind(this));this.body.emitter.on("destroy",function(){t.hammerFrame.destroy();t.hammer.destroy();t._cleanUp()})}},{key:"setOptions",value:function e(t){var i=this;if(t!==undefined){var n=["width","height","autoResize"];d.selectiveDeepExtend(n,this.options,t)}if(this.options.autoResize===true){this._cleanUp();this.resizeTimer=setInterval(function(){var e=i.setSize();if(e===true){i.body.emitter.emit("_requestRedraw")}},1e3);this.resizeFunction=this._onResize.bind(this);d.addEventListener(window,"resize",this.resizeFunction)}}},{key:"_cleanUp",value:function e(){if(this.resizeTimer!==undefined){clearInterval(this.resizeTimer)}d.removeEventListener(window,"resize",this.resizeFunction);this.resizeFunction=undefined}},{key:"_onResize",value:function e(){this.setSize();this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.pixelRatio;if(this.initialized===true){this.cameraState.previousWidth=this.frame.canvas.width/t;this.cameraState.previousHeight=this.frame.canvas.height/t;this.cameraState.scale=this.body.view.scale;this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/t,y:.5*this.frame.canvas.height/t})}}},{key:"_setCameraState",value:function e(){if(this.cameraState.scale!==undefined&&this.frame.canvas.clientWidth!==0&&this.frame.canvas.clientHeight!==0&&this.pixelRatio!==0&&this.cameraState.previousWidth>0){var t=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth;var i=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight;var n=this.cameraState.scale;if(t!=1&&i!=1){n=this.cameraState.scale*.5*(t+i)}else if(t!=1){n=this.cameraState.scale*t}else if(i!=1){n=this.cameraState.scale*i}this.body.view.scale=n;var s=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight});var r={x:s.x-this.cameraState.position.x,y:s.y-this.cameraState.position.y};this.body.view.translation.x+=r.x*this.body.view.scale;this.body.view.translation.y+=r.y*this.body.view.scale}}},{key:"_prepareValue",value:function e(t){if(typeof t==="number"){return t+"px"}else if(typeof t==="string"){if(t.indexOf("%")!==-1||t.indexOf("px")!==-1){return t}else if(t.indexOf("%")===-1){return t+"px"}}throw new Error("Could not use the value supplied for width or height:"+t)}},{key:"_create",value:function e(){while(this.body.container.hasChildNodes()){this.body.container.removeChild(this.body.container.firstChild)}this.frame=document.createElement("div");this.frame.className="vis-network";this.frame.style.position="relative";this.frame.style.overflow="hidden";this.frame.tabIndex=900;this.frame.canvas=document.createElement("canvas");this.frame.canvas.style.position="relative";this.frame.appendChild(this.frame.canvas);if(!this.frame.canvas.getContext){var t=document.createElement("DIV");t.style.color="red";t.style.fontWeight="bold";t.style.padding="10px";t.innerHTML="Error: your browser does not support HTML canvas";this.frame.canvas.appendChild(t)}else{var i=this.frame.canvas.getContext("2d");this._setPixelRatio(i);this.frame.canvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}this.body.container.appendChild(this.frame);this.body.view.scale=1;this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight};this._bindHammer()}},{key:"_bindHammer",value:function e(){var t=this;if(this.hammer!==undefined){this.hammer.destroy()}this.drag={};this.pinch={};this.hammer=new l(this.frame.canvas);this.hammer.get("pinch").set({enable:true});this.hammer.get("pan").set({threshold:5,direction:l.DIRECTION_ALL});h.onTouch(this.hammer,function(e){t.body.eventListeners.onTouch(e)});this.hammer.on("tap",function(e){t.body.eventListeners.onTap(e)});this.hammer.on("doubletap",function(e){t.body.eventListeners.onDoubleTap(e)});this.hammer.on("press",function(e){t.body.eventListeners.onHold(e)});this.hammer.on("panstart",function(e){t.body.eventListeners.onDragStart(e)});this.hammer.on("panmove",function(e){t.body.eventListeners.onDrag(e)});this.hammer.on("panend",function(e){t.body.eventListeners.onDragEnd(e)});this.hammer.on("pinch",function(e){t.body.eventListeners.onPinch(e)});this.frame.canvas.addEventListener("mousewheel",function(e){t.body.eventListeners.onMouseWheel(e)});this.frame.canvas.addEventListener("DOMMouseScroll",function(e){t.body.eventListeners.onMouseWheel(e)});this.frame.canvas.addEventListener("mousemove",function(e){t.body.eventListeners.onMouseMove(e)});this.frame.canvas.addEventListener("contextmenu",function(e){t.body.eventListeners.onContext(e)});this.hammerFrame=new l(this.frame);h.onRelease(this.hammerFrame,function(e){t.body.eventListeners.onRelease(e)})}},{key:"setSize",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.options.width;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.options.height;t=this._prepareValue(t);i=this._prepareValue(i);var n=false;var s=this.frame.canvas.width;var r=this.frame.canvas.height;var o=this.frame.canvas.getContext("2d");var a=this.pixelRatio;this._setPixelRatio(o);if(t!=this.options.width||i!=this.options.height||this.frame.style.width!=t||this.frame.style.height!=i){this._getCameraState(a);this.frame.style.width=t;this.frame.style.height=i;this.frame.canvas.style.width="100%";this.frame.canvas.style.height="100%";this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio);this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);this.options.width=t;this.options.height=i;this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight};n=true}else{var l=Math.round(this.frame.canvas.clientWidth*this.pixelRatio);var h=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);if(this.frame.canvas.width!==l||this.frame.canvas.height!==h){this._getCameraState(a)}if(this.frame.canvas.width!==l){this.frame.canvas.width=l;n=true}if(this.frame.canvas.height!==h){this.frame.canvas.height=h;n=true}}if(n===true){this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(s/this.pixelRatio),oldHeight:Math.round(r/this.pixelRatio)});this._setCameraState()}this.initialized=true;return n}},{key:"_setPixelRatio",value:function e(t){this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}},{key:"_XconvertDOMtoCanvas",value:function e(t){return(t-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function e(t){return t*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function e(t){return(t-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function e(t){return t*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function e(t){return{x:this._XconvertCanvasToDOM(t.x),y:this._YconvertCanvasToDOM(t.y)}}},{key:"DOMtoCanvas",value:function e(t){return{x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)}}}]);return e}();t["default"]=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(134);var s=a(n);var r=i(135);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=i(1);var h=i(219)["default"];var d=function(){function e(t,i){var n=this;(0,s["default"])(this,e);this.body=t;this.canvas=i;this.animationSpeed=1/this.renderRefreshRate;this.animationEasingFunction="easeInOutQuint";this.easingTime=0;this.sourceScale=0;this.targetScale=0;this.sourceTranslation=0;this.targetTranslation=0;this.lockedOnNodeId=undefined;this.lockedOnNodeOffset=undefined;this.touchTime=0;this.viewFunction=undefined;this.body.emitter.on("fit",this.fit.bind(this));this.body.emitter.on("animationFinished",function(){n.body.emitter.emit("_stopRendering")});this.body.emitter.on("unlockNode",this.releaseNode.bind(this))}(0,o["default"])(e,[{key:"setOptions",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.options=t}},{key:"fit",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{nodes:[]};var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=void 0;var s=void 0;if(t.nodes===undefined||t.nodes.length===0){t.nodes=this.body.nodeIndices}if(i===true){var r=0;for(var o in this.body.nodes){if(this.body.nodes.hasOwnProperty(o)){var a=this.body.nodes[o];if(a.predefinedPosition===true){r+=1}}}if(r>.5*this.body.nodeIndices.length){this.fit(t,false);return}n=h.getRange(this.body.nodes,t.nodes);var l=this.body.nodeIndices.length;s=12.662/(l+7.4147)+.0964822;var d=Math.min(this.canvas.frame.canvas.clientWidth/600,this.canvas.frame.canvas.clientHeight/600);s*=d}else{this.body.emitter.emit("_resizeNodes");n=h.getRange(this.body.nodes,t.nodes);var u=Math.abs(n.maxX-n.minX)*1.1;var f=Math.abs(n.maxY-n.minY)*1.1;var c=this.canvas.frame.canvas.clientWidth/u;var p=this.canvas.frame.canvas.clientHeight/f;s=c<=p?c:p}if(s>1){s=1}else if(s===0){s=1}var m=h.findCenter(n);var v={position:m,scale:s,animation:t.animation};this.moveTo(v)}},{key:"focus",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(this.body.nodes[t]!==undefined){var n={x:this.body.nodes[t].x,y:this.body.nodes[t].y};i.position=n;i.lockedOnNode=t;this.moveTo(i)}else{console.log("Node: "+t+" cannot be found.")}}},{key:"moveTo",value:function e(t){if(t===undefined){t={};return}if(t.offset===undefined){t.offset={x:0,y:0}}if(t.offset.x===undefined){t.offset.x=0}if(t.offset.y===undefined){t.offset.y=0}if(t.scale===undefined){t.scale=this.body.view.scale}if(t.position===undefined){t.position=this.getViewPosition()}if(t.animation===undefined){t.animation={duration:0}}if(t.animation===false){t.animation={duration:0}}if(t.animation===true){t.animation={}}if(t.animation.duration===undefined){t.animation.duration=1e3}if(t.animation.easingFunction===undefined){t.animation.easingFunction="easeInOutQuad"}this.animateView(t)}},{key:"animateView",value:function e(t){if(t===undefined){return}this.animationEasingFunction=t.animation.easingFunction;this.releaseNode();if(t.locked===true){this.lockedOnNodeId=t.lockedOnNode;this.lockedOnNodeOffset=t.offset}if(this.easingTime!=0){this._transitionRedraw(true)}this.sourceScale=this.body.view.scale;this.sourceTranslation=this.body.view.translation;this.targetScale=t.scale;this.body.view.scale=this.targetScale;var i=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight});var n={x:i.x-t.position.x,y:i.y-t.position.y};this.targetTranslation={x:this.sourceTranslation.x+n.x*this.targetScale+t.offset.x,y:this.sourceTranslation.y+n.y*this.targetScale+t.offset.y};if(t.animation.duration===0){if(this.lockedOnNodeId!=undefined){this.viewFunction=this._lockedRedraw.bind(this);this.body.emitter.on("initRedraw",this.viewFunction)}else{this.body.view.scale=this.targetScale;this.body.view.translation=this.targetTranslation;this.body.emitter.emit("_requestRedraw")}}else{this.animationSpeed=1/(60*t.animation.duration*.001)||1/60;this.animationEasingFunction=t.animation.easingFunction;this.viewFunction=this._transitionRedraw.bind(this);this.body.emitter.on("initRedraw",this.viewFunction);this.body.emitter.emit("_startRendering")}}},{key:"_lockedRedraw",value:function e(){var t={x:this.body.nodes[this.lockedOnNodeId].x,y:this.body.nodes[this.lockedOnNodeId].y};var i=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight});var n={x:i.x-t.x,y:i.y-t.y};var s=this.body.view.translation;var r={x:s.x+n.x*this.body.view.scale+this.lockedOnNodeOffset.x,y:s.y+n.y*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=r}},{key:"releaseNode",value:function e(){if(this.lockedOnNodeId!==undefined&&this.viewFunction!==undefined){this.body.emitter.off("initRedraw",this.viewFunction);this.lockedOnNodeId=undefined;this.lockedOnNodeOffset=undefined}}},{key:"_transitionRedraw",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;this.easingTime+=this.animationSpeed;this.easingTime=t===true?1:this.easingTime;var i=l.easingFunctions[this.animationEasingFunction](this.easingTime);this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*i;this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*i,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*i};if(this.easingTime>=1){this.body.emitter.off("initRedraw",this.viewFunction);this.easingTime=0;if(this.lockedOnNodeId!=undefined){this.viewFunction=this._lockedRedraw.bind(this);this.body.emitter.on("initRedraw",this.viewFunction)}this.body.emitter.emit("animationFinished")}}},{key:"getScale",value:function e(){return this.body.view.scale}},{key:"getViewPosition",value:function e(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]);return e}();t["default"]=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(134);var s=a(n);var r=i(135);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=i(1);var h=i(225)["default"];var d=i(133)["default"];var u=function(){function e(t,i,n){(0,s["default"])(this,e);this.body=t;this.canvas=i;this.selectionHandler=n;this.navigationHandler=new h(t,i);this.body.eventListeners.onTap=this.onTap.bind(this);this.body.eventListeners.onTouch=this.onTouch.bind(this);this.body.eventListeners.onDoubleTap=this.onDoubleTap.bind(this);this.body.eventListeners.onHold=this.onHold.bind(this);this.body.eventListeners.onDragStart=this.onDragStart.bind(this);this.body.eventListeners.onDrag=this.onDrag.bind(this);this.body.eventListeners.onDragEnd=this.onDragEnd.bind(this);this.body.eventListeners.onMouseWheel=this.onMouseWheel.bind(this);this.body.eventListeners.onPinch=this.onPinch.bind(this);this.body.eventListeners.onMouseMove=this.onMouseMove.bind(this);this.body.eventListeners.onRelease=this.onRelease.bind(this);this.body.eventListeners.onContext=this.onContext.bind(this);this.touchTime=0;this.drag={};this.pinch={};this.popup=undefined;this.popupObj=undefined;this.popupTimer=undefined;this.body.functions.getPointer=this.getPointer.bind(this);this.options={};this.defaultOptions={dragNodes:true,dragView:true,hover:false,keyboard:{enabled:false,speed:{x:10,y:10,zoom:.02},bindToWindow:true},navigationButtons:false,tooltipDelay:300,zoomView:true};l.extend(this.options,this.defaultOptions);this.bindEventListeners()}(0,o["default"])(e,[{key:"bindEventListeners",value:function e(){var t=this;this.body.emitter.on("destroy",function(){clearTimeout(t.popupTimer);delete t.body.functions.getPointer})}},{key:"setOptions",value:function e(t){if(t!==undefined){var i=["hideEdgesOnDrag","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"];l.selectiveNotDeepExtend(i,this.options,t);l.mergeOptions(this.options,t,"keyboard");if(t.tooltip){l.extend(this.options.tooltip,t.tooltip);if(t.tooltip.color){this.options.tooltip.color=l.parseColor(t.tooltip.color)}}}this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function e(t){return{x:t.x-l.getAbsoluteLeft(this.canvas.frame.canvas),y:t.y-l.getAbsoluteTop(this.canvas.frame.canvas)}}},{key:"onTouch",value:function e(t){if((new Date).valueOf()-this.touchTime>50){this.drag.pointer=this.getPointer(t.center);this.drag.pinched=false;this.pinch.scale=this.body.view.scale;this.touchTime=(new Date).valueOf()}}},{key:"onTap",value:function e(t){var i=this.getPointer(t.center);var n=this.selectionHandler.options.multiselect&&(t.changedPointers[0].ctrlKey||t.changedPointers[0].metaKey);this.checkSelectionChanges(i,t,n);this.selectionHandler._generateClickEvent("click",t,i)}},{key:"onDoubleTap",value:function e(t){var i=this.getPointer(t.center);this.selectionHandler._generateClickEvent("doubleClick",t,i)}},{key:"onHold",value:function e(t){var i=this.getPointer(t.center);var n=this.selectionHandler.options.multiselect;this.checkSelectionChanges(i,t,n);this.selectionHandler._generateClickEvent("click",t,i);this.selectionHandler._generateClickEvent("hold",t,i)}},{key:"onRelease",value:function e(t){if((new Date).valueOf()-this.touchTime>10){var i=this.getPointer(t.center);this.selectionHandler._generateClickEvent("release",t,i);this.touchTime=(new Date).valueOf()}}},{key:"onContext",value:function e(t){var i=this.getPointer({x:t.clientX,y:t.clientY});this.selectionHandler._generateClickEvent("oncontext",t,i)}},{key:"checkSelectionChanges",value:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s=this.selectionHandler._getSelectedEdgeCount();var r=this.selectionHandler._getSelectedNodeCount();var o=this.selectionHandler.getSelection();var a=void 0;if(n===true){a=this.selectionHandler.selectAdditionalOnPoint(t)}else{a=this.selectionHandler.selectOnPoint(t)}var l=this.selectionHandler._getSelectedEdgeCount();var h=this.selectionHandler._getSelectedNodeCount();var d=this.selectionHandler.getSelection();var u=this._determineIfDifferent(o,d),f=u.nodesChanged,c=u.edgesChanged;var p=false;if(h-r>0){this.selectionHandler._generateClickEvent("selectNode",i,t);a=true;p=true}else if(f===true&&h>0){this.selectionHandler._generateClickEvent("deselectNode",i,t,o);this.selectionHandler._generateClickEvent("selectNode",i,t);p=true;a=true}else if(h-r<0){this.selectionHandler._generateClickEvent("deselectNode",i,t,o);a=true}if(l-s>0&&p===false){this.selectionHandler._generateClickEvent("selectEdge",i,t);a=true}else if(l>0&&c===true){this.selectionHandler._generateClickEvent("deselectEdge",i,t,o);this.selectionHandler._generateClickEvent("selectEdge",i,t);
a=true}else if(l-s<0){this.selectionHandler._generateClickEvent("deselectEdge",i,t,o);a=true}if(a===true){this.selectionHandler._generateClickEvent("select",i,t)}}},{key:"_determineIfDifferent",value:function e(t,i){var n=false;var s=false;for(var r=0;r<t.nodes.length;r++){if(i.nodes.indexOf(t.nodes[r])===-1){n=true}}for(var o=0;o<i.nodes.length;o++){if(t.nodes.indexOf(t.nodes[o])===-1){n=true}}for(var a=0;a<t.edges.length;a++){if(i.edges.indexOf(t.edges[a])===-1){s=true}}for(var l=0;l<i.edges.length;l++){if(t.edges.indexOf(t.edges[l])===-1){s=true}}return{nodesChanged:n,edgesChanged:s}}},{key:"onDragStart",value:function e(t){if(this.drag.pointer===undefined){this.onTouch(t)}var i=this.selectionHandler.getNodeAt(this.drag.pointer);this.drag.dragging=true;this.drag.selection=[];this.drag.translation=l.extend({},this.body.view.translation);this.drag.nodeId=undefined;if(i!==undefined&&this.options.dragNodes===true){this.drag.nodeId=i.id;if(i.isSelected()===false){this.selectionHandler.unselectAll();this.selectionHandler.selectObject(i)}this.selectionHandler._generateClickEvent("dragStart",t,this.drag.pointer);var n=this.selectionHandler.selectionObj.nodes;for(var s in n){if(n.hasOwnProperty(s)){var r=n[s];var o={id:r.id,node:r,x:r.x,y:r.y,xFixed:r.options.fixed.x,yFixed:r.options.fixed.y};r.options.fixed.x=true;r.options.fixed.y=true;this.drag.selection.push(o)}}}else{this.selectionHandler._generateClickEvent("dragStart",t,this.drag.pointer,undefined,true)}}},{key:"onDrag",value:function e(t){var i=this;if(this.drag.pinched===true){return}this.body.emitter.emit("unlockNode");var n=this.getPointer(t.center);var s=this.drag.selection;if(s&&s.length&&this.options.dragNodes===true){this.selectionHandler._generateClickEvent("dragging",t,n);var r=n.x-this.drag.pointer.x;var o=n.y-this.drag.pointer.y;s.forEach(function(e){var t=e.node;if(e.xFixed===false){t.x=i.canvas._XconvertDOMtoCanvas(i.canvas._XconvertCanvasToDOM(e.x)+r)}if(e.yFixed===false){t.y=i.canvas._YconvertDOMtoCanvas(i.canvas._YconvertCanvasToDOM(e.y)+o)}});this.body.emitter.emit("startSimulation")}else{if(this.options.dragView===true){this.selectionHandler._generateClickEvent("dragging",t,n,undefined,true);if(this.drag.pointer===undefined){this.onDragStart(t);return}var a=n.x-this.drag.pointer.x;var l=n.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+a,y:this.drag.translation.y+l};this.body.emitter.emit("_redraw")}}}},{key:"onDragEnd",value:function e(t){this.drag.dragging=false;var i=this.drag.selection;if(i&&i.length){i.forEach(function(e){e.node.options.fixed.x=e.xFixed;e.node.options.fixed.y=e.yFixed});this.selectionHandler._generateClickEvent("dragEnd",t,this.getPointer(t.center));this.body.emitter.emit("startSimulation")}else{this.selectionHandler._generateClickEvent("dragEnd",t,this.getPointer(t.center),undefined,true);this.body.emitter.emit("_requestRedraw")}}},{key:"onPinch",value:function e(t){var i=this.getPointer(t.center);this.drag.pinched=true;if(this.pinch["scale"]===undefined){this.pinch.scale=1}var n=this.pinch.scale*t.scale;this.zoom(n,i)}},{key:"zoom",value:function e(t,i){if(this.options.zoomView===true){var n=this.body.view.scale;if(t<1e-5){t=1e-5}if(t>10){t=10}var s=undefined;if(this.drag!==undefined){if(this.drag.dragging===true){s=this.canvas.DOMtoCanvas(this.drag.pointer)}}var r=this.body.view.translation;var o=t/n;var a=(1-o)*i.x+r.x*o;var l=(1-o)*i.y+r.y*o;this.body.view.scale=t;this.body.view.translation={x:a,y:l};if(s!=undefined){var h=this.canvas.canvasToDOM(s);this.drag.pointer.x=h.x;this.drag.pointer.y=h.y}this.body.emitter.emit("_requestRedraw");if(n<t){this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:i})}else{this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:i})}}}},{key:"onMouseWheel",value:function e(t){if(this.options.zoomView===true){var i=0;if(t.wheelDelta){i=t.wheelDelta/120}else if(t.detail){i=-t.detail/3}if(i!==0){var n=this.body.view.scale;var s=i/10;if(i<0){s=s/(1-s)}n*=1+s;var r=this.getPointer({x:t.clientX,y:t.clientY});this.zoom(n,r)}t.preventDefault()}}},{key:"onMouseMove",value:function e(t){var i=this;var n=this.getPointer({x:t.clientX,y:t.clientY});var s=false;if(this.popup!==undefined){if(this.popup.hidden===false){this._checkHidePopup(n)}if(this.popup.hidden===false){s=true;this.popup.setPosition(n.x+3,n.y-5);this.popup.show()}}if(this.options.keyboard.bindToWindow===false&&this.options.keyboard.enabled===true){this.canvas.frame.focus()}if(s===false){if(this.popupTimer!==undefined){clearInterval(this.popupTimer);this.popupTimer=undefined}if(!this.drag.dragging){this.popupTimer=setTimeout(function(){return i._checkShowPopup(n)},this.options.tooltipDelay)}}if(this.options.hover===true){var r=this.selectionHandler.getNodeAt(n);if(r===undefined){r=this.selectionHandler.getEdgeAt(n)}this.selectionHandler.hoverObject(r)}}},{key:"_checkShowPopup",value:function e(t){var i=this.canvas._XconvertDOMtoCanvas(t.x);var n=this.canvas._YconvertDOMtoCanvas(t.y);var s={left:i,top:n,right:i,bottom:n};var r=this.popupObj===undefined?undefined:this.popupObj.id;var o=false;var a="node";if(this.popupObj===undefined){var l=this.body.nodeIndices;var h=this.body.nodes;var u=void 0;var f=[];for(var c=0;c<l.length;c++){u=h[l[c]];if(u.isOverlappingWith(s)===true){if(u.getTitle()!==undefined){f.push(l[c])}}}if(f.length>0){this.popupObj=h[f[f.length-1]];o=true}}if(this.popupObj===undefined&&o===false){var p=this.body.edgeIndices;var m=this.body.edges;var v=void 0;var g=[];for(var y=0;y<p.length;y++){v=m[p[y]];if(v.isOverlappingWith(s)===true){if(v.connected===true&&v.getTitle()!==undefined){g.push(p[y])}}}if(g.length>0){this.popupObj=m[g[g.length-1]];a="edge"}}if(this.popupObj!==undefined){if(this.popupObj.id!==r){if(this.popup===undefined){this.popup=new d(this.canvas.frame)}this.popup.popupTargetType=a;this.popup.popupTargetId=this.popupObj.id;this.popup.setPosition(t.x+3,t.y-5);this.popup.setText(this.popupObj.getTitle());this.popup.show();this.body.emitter.emit("showPopup",this.popupObj.id)}}else{if(this.popup!==undefined){this.popup.hide();this.body.emitter.emit("hidePopup")}}}},{key:"_checkHidePopup",value:function e(t){var i=this.selectionHandler._pointerToPositionObject(t);var n=false;if(this.popup.popupTargetType==="node"){if(this.body.nodes[this.popup.popupTargetId]!==undefined){n=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(i);if(n===true){var s=this.selectionHandler.getNodeAt(t);n=s===undefined?false:s.id===this.popup.popupTargetId}}}else{if(this.selectionHandler.getNodeAt(t)===undefined){if(this.body.edges[this.popup.popupTargetId]!==undefined){n=this.body.edges[this.popup.popupTargetId].isOverlappingWith(i)}}}if(n===false){this.popupObj=undefined;this.popup.hide();this.body.emitter.emit("hidePopup")}}}]);return e}();t["default"]=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(134);var s=a(n);var r=i(135);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=i(1);var h=i(112);var d=i(119);var u=i(115);var f=function(){function e(t,i){var n=this;(0,s["default"])(this,e);this.body=t;this.canvas=i;this.iconsCreated=false;this.navigationHammers=[];this.boundFunctions={};this.touchTime=0;this.activated=false;this.body.emitter.on("activate",function(){n.activated=true;n.configureKeyboardBindings()});this.body.emitter.on("deactivate",function(){n.activated=false;n.configureKeyboardBindings()});this.body.emitter.on("destroy",function(){if(n.keycharm!==undefined){n.keycharm.destroy()}});this.options={}}(0,o["default"])(e,[{key:"setOptions",value:function e(t){if(t!==undefined){this.options=t;this.create()}}},{key:"create",value:function e(){if(this.options.navigationButtons===true){if(this.iconsCreated===false){this.loadNavigationElements()}}else if(this.iconsCreated===true){this.cleanNavigation()}this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function e(){if(this.navigationHammers.length!=0){for(var t=0;t<this.navigationHammers.length;t++){this.navigationHammers[t].destroy()}this.navigationHammers=[]}if(this.navigationDOM&&this.navigationDOM["wrapper"]&&this.navigationDOM["wrapper"].parentNode){this.navigationDOM["wrapper"].parentNode.removeChild(this.navigationDOM["wrapper"])}this.iconsCreated=false}},{key:"loadNavigationElements",value:function e(){var t=this;this.cleanNavigation();this.navigationDOM={};var i=["up","down","left","right","zoomIn","zoomOut","zoomExtends"];var n=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM["wrapper"]=document.createElement("div");this.navigationDOM["wrapper"].className="vis-navigation";this.canvas.frame.appendChild(this.navigationDOM["wrapper"]);for(var s=0;s<i.length;s++){this.navigationDOM[i[s]]=document.createElement("div");this.navigationDOM[i[s]].className="vis-button vis-"+i[s];this.navigationDOM["wrapper"].appendChild(this.navigationDOM[i[s]]);var r=new h(this.navigationDOM[i[s]]);if(n[s]==="_fit"){d.onTouch(r,this._fit.bind(this))}else{d.onTouch(r,this.bindToRedraw.bind(this,n[s]))}this.navigationHammers.push(r)}var o=new h(this.canvas.frame);d.onRelease(o,function(){t._stopMovement()});this.navigationHammers.push(o);this.iconsCreated=true}},{key:"bindToRedraw",value:function e(t){if(this.boundFunctions[t]===undefined){this.boundFunctions[t]=this[t].bind(this);this.body.emitter.on("initRedraw",this.boundFunctions[t]);this.body.emitter.emit("_startRendering")}}},{key:"unbindFromRedraw",value:function e(t){if(this.boundFunctions[t]!==undefined){this.body.emitter.off("initRedraw",this.boundFunctions[t]);this.body.emitter.emit("_stopRendering");delete this.boundFunctions[t]}}},{key:"_fit",value:function e(){if((new Date).valueOf()-this.touchTime>700){this.body.emitter.emit("fit",{duration:700});this.touchTime=(new Date).valueOf()}}},{key:"_stopMovement",value:function e(){for(var t in this.boundFunctions){if(this.boundFunctions.hasOwnProperty(t)){this.body.emitter.off("initRedraw",this.boundFunctions[t]);this.body.emitter.emit("_stopRendering")}}this.boundFunctions={}}},{key:"_moveUp",value:function e(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function e(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function e(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function e(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function e(){var t=this.body.view.scale;var i=this.body.view.scale*(1+this.options.keyboard.speed.zoom);var n=this.body.view.translation;var s=i/t;var r=(1-s)*this.canvas.canvasViewCenter.x+n.x*s;var o=(1-s)*this.canvas.canvasViewCenter.y+n.y*s;this.body.view.scale=i;this.body.view.translation={x:r,y:o};this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function e(){var t=this.body.view.scale;var i=this.body.view.scale/(1+this.options.keyboard.speed.zoom);var n=this.body.view.translation;var s=i/t;var r=(1-s)*this.canvas.canvasViewCenter.x+n.x*s;var o=(1-s)*this.canvas.canvasViewCenter.y+n.y*s;this.body.view.scale=i;this.body.view.translation={x:r,y:o};this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function e(){var t=this;if(this.keycharm!==undefined){this.keycharm.destroy()}if(this.options.keyboard.enabled===true){if(this.options.keyboard.bindToWindow===true){this.keycharm=u({container:window,preventDefault:true})}else{this.keycharm=u({container:this.canvas.frame,preventDefault:true})}this.keycharm.reset();if(this.activated===true){this.keycharm.bind("up",function(){t.bindToRedraw("_moveUp")},"keydown");this.keycharm.bind("down",function(){t.bindToRedraw("_moveDown")},"keydown");this.keycharm.bind("left",function(){t.bindToRedraw("_moveLeft")},"keydown");this.keycharm.bind("right",function(){t.bindToRedraw("_moveRight")},"keydown");this.keycharm.bind("=",function(){t.bindToRedraw("_zoomIn")},"keydown");this.keycharm.bind("num+",function(){t.bindToRedraw("_zoomIn")},"keydown");this.keycharm.bind("num-",function(){t.bindToRedraw("_zoomOut")},"keydown");this.keycharm.bind("-",function(){t.bindToRedraw("_zoomOut")},"keydown");this.keycharm.bind("[",function(){t.bindToRedraw("_zoomOut")},"keydown");this.keycharm.bind("]",function(){t.bindToRedraw("_zoomIn")},"keydown");this.keycharm.bind("pageup",function(){t.bindToRedraw("_zoomIn")},"keydown");this.keycharm.bind("pagedown",function(){t.bindToRedraw("_zoomOut")},"keydown");this.keycharm.bind("up",function(){t.unbindFromRedraw("_moveUp")},"keyup");this.keycharm.bind("down",function(){t.unbindFromRedraw("_moveDown")},"keyup");this.keycharm.bind("left",function(){t.unbindFromRedraw("_moveLeft")},"keyup");this.keycharm.bind("right",function(){t.unbindFromRedraw("_moveRight")},"keyup");this.keycharm.bind("=",function(){t.unbindFromRedraw("_zoomIn")},"keyup");this.keycharm.bind("num+",function(){t.unbindFromRedraw("_zoomIn")},"keyup");this.keycharm.bind("num-",function(){t.unbindFromRedraw("_zoomOut")},"keyup");this.keycharm.bind("-",function(){t.unbindFromRedraw("_zoomOut")},"keyup");this.keycharm.bind("[",function(){t.unbindFromRedraw("_zoomOut")},"keyup");this.keycharm.bind("]",function(){t.unbindFromRedraw("_zoomIn")},"keyup");this.keycharm.bind("pageup",function(){t.unbindFromRedraw("_zoomIn")},"keyup");this.keycharm.bind("pagedown",function(){t.unbindFromRedraw("_zoomOut")},"keyup")}}}}]);return e}();t["default"]=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(134);var s=a(n);var r=i(135);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=i(168)["default"];var h=i(201)["default"];var d=i(1);var u=function(){function e(t,i){var n=this;(0,s["default"])(this,e);this.body=t;this.canvas=i;this.selectionObj={nodes:[],edges:[]};this.hoverObj={nodes:{},edges:{}};this.options={};this.defaultOptions={multiselect:false,selectable:true,selectConnectedEdges:true,hoverConnectedEdges:true};d.extend(this.options,this.defaultOptions);this.body.emitter.on("_dataChanged",function(){n.updateSelection()})}(0,o["default"])(e,[{key:"setOptions",value:function e(t){if(t!==undefined){var i=["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"];d.selectiveDeepExtend(i,this.options,t)}}},{key:"selectOnPoint",value:function e(t){var i=false;if(this.options.selectable===true){var n=this.getNodeAt(t)||this.getEdgeAt(t);this.unselectAll();if(n!==undefined){i=this.selectObject(n)}this.body.emitter.emit("_requestRedraw")}return i}},{key:"selectAdditionalOnPoint",value:function e(t){var i=false;if(this.options.selectable===true){var n=this.getNodeAt(t)||this.getEdgeAt(t);if(n!==undefined){i=true;if(n.isSelected()===true){this.deselectObject(n)}else{this.selectObject(n)}this.body.emitter.emit("_requestRedraw")}}return i}},{key:"_generateClickEvent",value:function e(t,i,n,s){var r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var o=void 0;if(r===true){o={nodes:[],edges:[]}}else{o=this.getSelection()}o["pointer"]={DOM:{x:n.x,y:n.y},canvas:this.canvas.DOMtoCanvas(n)};o["event"]=i;if(s!==undefined){o["previousSelection"]=s}this.body.emitter.emit(t,o)}},{key:"selectObject",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.options.selectConnectedEdges;if(t!==undefined){if(t instanceof l){if(i===true){this._selectConnectedEdges(t)}}t.select();this._addToSelection(t);return true}return false}},{key:"deselectObject",value:function e(t){if(t.isSelected()===true){t.selected=false;this._removeFromSelection(t)}}},{key:"_getAllNodesOverlappingWith",value:function e(t){var i=[];var n=this.body.nodes;for(var s=0;s<this.body.nodeIndices.length;s++){var r=this.body.nodeIndices[s];if(n[r].isOverlappingWith(t)){i.push(r)}}return i}},{key:"_pointerToPositionObject",value:function e(t){var i=this.canvas.DOMtoCanvas(t);return{left:i.x-1,top:i.y+1,right:i.x+1,bottom:i.y-1}}},{key:"getNodeAt",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var n=this._pointerToPositionObject(t);var s=this._getAllNodesOverlappingWith(n);if(s.length>0){if(i===true){return this.body.nodes[s[s.length-1]]}else{return s[s.length-1]}}else{return undefined}}},{key:"_getEdgesOverlappingWith",value:function e(t,i){var n=this.body.edges;for(var s=0;s<this.body.edgeIndices.length;s++){var r=this.body.edgeIndices[s];if(n[r].isOverlappingWith(t)){i.push(r)}}}},{key:"_getAllEdgesOverlappingWith",value:function e(t){var i=[];this._getEdgesOverlappingWith(t,i);return i}},{key:"getEdgeAt",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var n=this.canvas.DOMtoCanvas(t);var s=10;var r=null;var o=this.body.edges;for(var a=0;a<this.body.edgeIndices.length;a++){var l=this.body.edgeIndices[a];var h=o[l];if(h.connected){var d=h.from.x;var u=h.from.y;var f=h.to.x;var c=h.to.y;var p=h.edgeType.getDistanceToEdge(d,u,f,c,n.x,n.y);if(p<s){r=l;s=p}}}if(r!==null){if(i===true){return this.body.edges[r]}else{return r}}else{return undefined}}},{key:"_addToSelection",value:function e(t){if(t instanceof l){this.selectionObj.nodes[t.id]=t}else{this.selectionObj.edges[t.id]=t}}},{key:"_addToHover",value:function e(t){if(t instanceof l){this.hoverObj.nodes[t.id]=t}else{this.hoverObj.edges[t.id]=t}}},{key:"_removeFromSelection",value:function e(t){if(t instanceof l){delete this.selectionObj.nodes[t.id];this._unselectConnectedEdges(t)}else{delete this.selectionObj.edges[t.id]}}},{key:"unselectAll",value:function e(){for(var t in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(t)){this.selectionObj.nodes[t].unselect()}}for(var i in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(i)){this.selectionObj.edges[i].unselect()}}this.selectionObj={nodes:{},edges:{}}}},{key:"_getSelectedNodeCount",value:function e(){var t=0;for(var i in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(i)){t+=1}}return t}},{key:"_getSelectedNode",value:function e(){for(var t in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(t)){return this.selectionObj.nodes[t]}}return undefined}},{key:"_getSelectedEdge",value:function e(){for(var t in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(t)){return this.selectionObj.edges[t]}}return undefined}},{key:"_getSelectedEdgeCount",value:function e(){var t=0;for(var i in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(i)){t+=1}}return t}},{key:"_getSelectedObjectCount",value:function e(){var t=0;for(var i in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(i)){t+=1}}for(var n in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(n)){t+=1}}return t}},{key:"_selectionIsEmpty",value:function e(){for(var t in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(t)){return false}}for(var i in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(i)){return false}}return true}},{key:"_clusterInSelection",value:function e(){for(var t in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(t)){if(this.selectionObj.nodes[t].clusterSize>1){return true}}}return false}},{key:"_selectConnectedEdges",value:function e(t){for(var i=0;i<t.edges.length;i++){var n=t.edges[i];n.select();this._addToSelection(n)}}},{key:"_hoverConnectedEdges",value:function e(t){for(var i=0;i<t.edges.length;i++){var n=t.edges[i];n.hover=true;this._addToHover(n)}}},{key:"_unselectConnectedEdges",value:function e(t){for(var i=0;i<t.edges.length;i++){var n=t.edges[i];n.unselect();this._removeFromSelection(n)}}},{key:"blurObject",value:function e(t){if(t.hover===true){t.hover=false;if(t instanceof l){this.body.emitter.emit("blurNode",{node:t.id})}else{this.body.emitter.emit("blurEdge",{edge:t.id})}}}},{key:"hoverObject",value:function e(t){var i=false;for(var n in this.hoverObj.nodes){if(this.hoverObj.nodes.hasOwnProperty(n)){if(t===undefined||t instanceof l&&t.id!=n||t instanceof h){this.blurObject(this.hoverObj.nodes[n]);delete this.hoverObj.nodes[n];i=true}}}for(var s in this.hoverObj.edges){if(this.hoverObj.edges.hasOwnProperty(s)){if(i===true){this.hoverObj.edges[s].hover=false;delete this.hoverObj.edges[s]}else if(t===undefined||t instanceof h&&t.id!=s||t instanceof l&&!t.hover){this.blurObject(this.hoverObj.edges[s]);delete this.hoverObj.edges[s];i=true}}}if(t!==undefined){if(t.hover===false){t.hover=true;this._addToHover(t);i=true;if(t instanceof l){this.body.emitter.emit("hoverNode",{node:t.id})}else{this.body.emitter.emit("hoverEdge",{edge:t.id})}}if(t instanceof l&&this.options.hoverConnectedEdges===true){this._hoverConnectedEdges(t)}}if(i===true){this.body.emitter.emit("_requestRedraw")}}},{key:"getSelection",value:function e(){var t=this.getSelectedNodes();var i=this.getSelectedEdges();return{nodes:t,edges:i}}},{key:"getSelectedNodes",value:function e(){var t=[];if(this.options.selectable===true){for(var i in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(i)){t.push(this.selectionObj.nodes[i].id)}}}return t}},{key:"getSelectedEdges",value:function e(){var t=[];if(this.options.selectable===true){for(var i in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(i)){t.push(this.selectionObj.edges[i].id)}}}return t}},{key:"setSelection",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=void 0,s=void 0;if(!t||!t.nodes&&!t.edges)throw"Selection must be an object with nodes and/or edges properties";if(i.unselectAll||i.unselectAll===undefined){this.unselectAll()}if(t.nodes){for(n=0;n<t.nodes.length;n++){s=t.nodes[n];var r=this.body.nodes[s];if(!r){throw new RangeError('Node with id "'+s+'" not found')}this.selectObject(r,i.highlightEdges)}}if(t.edges){for(n=0;n<t.edges.length;n++){s=t.edges[n];var o=this.body.edges[s];if(!o){throw new RangeError('Edge with id "'+s+'" not found')}this.selectObject(o)}}this.body.emitter.emit("_requestRedraw")}},{key:"selectNodes",value:function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(!t||t.length===undefined)throw"Selection must be an array with ids";this.setSelection({nodes:t},{highlightEdges:i})}},{key:"selectEdges",value:function e(t){if(!t||t.length===undefined)throw"Selection must be an array with ids";this.setSelection({edges:t})}},{key:"updateSelection",value:function e(){for(var t in this.selectionObj.nodes){if(this.selectionObj.nodes.hasOwnProperty(t)){if(!this.body.nodes.hasOwnProperty(t)){delete this.selectionObj.nodes[t]}}}for(var i in this.selectionObj.edges){if(this.selectionObj.edges.hasOwnProperty(i)){if(!this.body.edges.hasOwnProperty(i)){delete this.selectionObj.edges[i]}}}}}]);return e}();t["default"]=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(58);var s=c(n);var r=i(170);var o=c(r);var a=i(62);var l=c(a);var h=i(134);var d=c(h);var u=i(135);var f=c(u);function c(e){return e&&e.__esModule?e:{default:e}}var p=i(1);var m=i(219)["default"];var v=function(){function e(){(0,d["default"])(this,e);this.childrenReference={};this.parentReference={};this.levels={};this.trees={};this.isTree=false}(0,f["default"])(e,[{key:"addRelation",value:function e(t,i){if(this.childrenReference[t]===undefined){this.childrenReference[t]=[]}this.childrenReference[t].push(i);if(this.parentReference[i]===undefined){this.parentReference[i]=[]}this.parentReference[i].push(t)}},{key:"checkIfTree",value:function e(){for(var t in this.parentReference){if(this.parentReference[t].length>1){this.isTree=false;return}}this.isTree=true}},{key:"ensureLevel",value:function e(t){if(this.levels[t]===undefined){this.levels[t]=0}}},{key:"getMaxLevel",value:function e(t){var i=this;var n={};var s=function e(t){if(n[t]!==undefined){return n[t]}var s=i.levels[t];if(i.childrenReference[t]){var r=i.childrenReference[t];if(r.length>0){for(var o=0;o<r.length;o++){s=Math.max(s,e(r[o]))}}}n[t]=s;return s};return s(t)}},{key:"levelDownstream",value:function e(t,i){if(this.levels[i.id]===undefined){if(this.levels[t.id]===undefined){this.levels[t.id]=0}this.levels[i.id]=this.levels[t.id]+1}}},{key:"setMinLevelToZero",value:function e(t){var i=1e9;for(var n in t){if(t.hasOwnProperty(n)){if(this.levels[n]!==undefined){i=Math.min(this.levels[n],i)}}}for(var s in t){if(t.hasOwnProperty(s)){if(this.levels[s]!==undefined){this.levels[s]-=i}}}}},{key:"getTreeSize",value:function e(t,i){var n=1e9;var s=-1e9;var r=1e9;var o=-1e9;for(var a in this.trees){if(this.trees.hasOwnProperty(a)){if(this.trees[a]===i){var l=t[a];n=Math.min(l.x,n);s=Math.max(l.x,s);r=Math.min(l.y,r);o=Math.max(l.y,o)}}}return{min_x:n,max_x:s,min_y:r,max_y:o}}}]);return e}();var g=function(){function e(t){(0,d["default"])(this,e);this.body=t;this.initialRandomSeed=Math.round(Math.random()*1e6);this.randomSeed=this.initialRandomSeed;this.setPhysics=false;this.options={};this.optionsBackup={physics:{}};this.defaultOptions={randomSeed:undefined,improvedLayout:true,hierarchical:{enabled:false,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:true,edgeMinimization:true,parentCentralization:true,direction:"UD",sortMethod:"hubsize"}};p.extend(this.options,this.defaultOptions);this.bindEventListeners()}(0,f["default"])(e,[{key:"bindEventListeners",value:function e(){var t=this;this.body.emitter.on("_dataChanged",function(){t.setupHierarchicalLayout()});this.body.emitter.on("_dataLoaded",function(){t.layoutNetwork()});this.body.emitter.on("_resetHierarchicalLayout",function(){t.setupHierarchicalLayout()})}},{key:"setOptions",value:function e(t,i){if(t!==undefined){var n=this.options.hierarchical.enabled;p.selectiveDeepExtend(["randomSeed","improvedLayout"],this.options,t);p.mergeOptions(this.options,t,"hierarchical");if(t.randomSeed!==undefined){this.initialRandomSeed=t.randomSeed}if(this.options.hierarchical.enabled===true){if(n===true){this.body.emitter.emit("refresh",true)}if(this.options.hierarchical.direction==="RL"||this.options.hierarchical.direction==="DU"){if(this.options.hierarchical.levelSeparation>0){this.options.hierarchical.levelSeparation*=-1}}else{if(this.options.hierarchical.levelSeparation<0){this.options.hierarchical.levelSeparation*=-1}}this.body.emitter.emit("_resetHierarchicalLayout");return this.adaptAllOptionsForHierarchicalLayout(i)}else{if(n===true){this.body.emitter.emit("refresh");return p.deepExtend(i,this.optionsBackup)}}}return i}},{key:"adaptAllOptionsForHierarchicalLayout",value:function e(t){if(this.options.hierarchical.enabled===true){if(t.physics===undefined||t.physics===true){t.physics={enabled:this.optionsBackup.physics.enabled===undefined?true:this.optionsBackup.physics.enabled,solver:"hierarchicalRepulsion"};this.optionsBackup.physics.enabled=this.optionsBackup.physics.enabled===undefined?true:this.optionsBackup.physics.enabled;this.optionsBackup.physics.solver=this.optionsBackup.physics.solver||"barnesHut"}else if((0,l["default"])(t.physics)==="object"){this.optionsBackup.physics.enabled=t.physics.enabled===undefined?true:t.physics.enabled;this.optionsBackup.physics.solver=t.physics.solver||"barnesHut";t.physics.solver="hierarchicalRepulsion"}else if(t.physics!==false){this.optionsBackup.physics.solver="barnesHut";t.physics={solver:"hierarchicalRepulsion"}}var i="horizontal";if(this.options.hierarchical.direction==="RL"||this.options.hierarchical.direction==="LR"){i="vertical"}if(t.edges===undefined){this.optionsBackup.edges={smooth:{enabled:true,type:"dynamic"}};t.edges={smooth:false}}else if(t.edges.smooth===undefined){this.optionsBackup.edges={smooth:{enabled:true,type:"dynamic"}};t.edges.smooth=false}else{if(typeof t.edges.smooth==="boolean"){this.optionsBackup.edges={smooth:t.edges.smooth};t.edges.smooth={enabled:t.edges.smooth,type:i}}else{if(t.edges.smooth.type!==undefined&&t.edges.smooth.type!=="dynamic"){i=t.edges.smooth.type}this.optionsBackup.edges={smooth:t.edges.smooth.enabled===undefined?true:t.edges.smooth.enabled,type:t.edges.smooth.type===undefined?"dynamic":t.edges.smooth.type,roundness:t.edges.smooth.roundness===undefined?.5:t.edges.smooth.roundness,forceDirection:t.edges.smooth.forceDirection===undefined?false:t.edges.smooth.forceDirection};t.edges.smooth={enabled:t.edges.smooth.enabled===undefined?true:t.edges.smooth.enabled,type:i,roundness:t.edges.smooth.roundness===undefined?.5:t.edges.smooth.roundness,forceDirection:t.edges.smooth.forceDirection===undefined?false:t.edges.smooth.forceDirection}}}this.body.emitter.emit("_forceDisableDynamicCurves",i)}return t}},{key:"seededRandom",value:function e(){var t=Math.sin(this.randomSeed++)*1e4;return t-Math.floor(t)}},{key:"positionInitially",value:function e(t){if(this.options.hierarchical.enabled!==true){this.randomSeed=this.initialRandomSeed;var i=t.length+50;for(var n=0;n<t.length;n++){var s=t[n];var r=2*Math.PI*this.seededRandom();if(s.x===undefined){s.x=i*Math.cos(r)}if(s.y===undefined){s.y=i*Math.sin(r)}}}}},{key:"layoutNetwork",value:function e(){if(this.options.hierarchical.enabled!==true&&this.options.improvedLayout===true){var t=0;for(var i=0;i<this.body.nodeIndices.length;i++){var n=this.body.nodes[this.body.nodeIndices[i]];if(n.predefinedPosition===true){t+=1}}if(t<.5*this.body.nodeIndices.length){var s=10;var r=0;var o=150;var a={clusterEdgeProperties:{smooth:{enabled:false}}};if(this.body.nodeIndices.length>o){var l=this.body.nodeIndices.length;while(this.body.nodeIndices.length>o&&r<=s){r+=1;var h=this.body.nodeIndices.length;if(r%3===0){this.body.modules.clustering.clusterBridges(a)}else{this.body.modules.clustering.clusterOutliers(a)}var d=this.body.nodeIndices.length;if(h==d&&r%3!==0){this._declusterAll();this.body.emitter.emit("_layoutFailed");console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*l)})}if(r>s){console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result.")}this.body.modules.kamadaKawai.solve(this.body.nodeIndices,this.body.edgeIndices,true);this._shiftToCenter();var u=70;for(var f=0;f<this.body.nodeIndices.length;f++){if(this.body.nodes[this.body.nodeIndices[f]].predefinedPosition===false){this.body.nodes[this.body.nodeIndices[f]].x+=(.5-this.seededRandom())*u;this.body.nodes[this.body.nodeIndices[f]].y+=(.5-this.seededRandom())*u}}this._declusterAll();this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function e(){var t=m.getRangeCore(this.body.nodes,this.body.nodeIndices);var i=m.findCenter(t);for(var n=0;n<this.body.nodeIndices.length;n++){this.body.nodes[this.body.nodeIndices[n]].x-=i.x;this.body.nodes[this.body.nodeIndices[n]].y-=i.y}}},{key:"_declusterAll",value:function e(){var t=true;while(t===true){t=false;for(var i=0;i<this.body.nodeIndices.length;i++){if(this.body.nodes[this.body.nodeIndices[i]].isCluster===true){t=true;this.body.modules.clustering.openCluster(this.body.nodeIndices[i],{},false)}}if(t===true){this.body.emitter.emit("_dataChanged")}}}},{key:"getSeed",value:function e(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function e(){if(this.options.hierarchical.enabled===true&&this.body.nodeIndices.length>0){var t=void 0,i=void 0;var n=false;var s=true;var r=false;this.lastNodeOnLevel={};this.hierarchical=new v;this.treeIndex=-1;this.distributionOrdering={};this.distributionIndex={};this.distributionOrderingPresence={};for(i in this.body.nodes){if(this.body.nodes.hasOwnProperty(i)){t=this.body.nodes[i];if(t.options.x===undefined&&t.options.y===undefined){s=false}if(t.options.level!==undefined){n=true;this.hierarchical.levels[i]=t.options.level}else{r=true}}}if(r===true&&n===true){throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");
}else{if(r===true){if(this.options.hierarchical.sortMethod==="hubsize"){this._determineLevelsByHubsize()}else if(this.options.hierarchical.sortMethod==="directed"){this._determineLevelsDirected()}else if(this.options.hierarchical.sortMethod==="custom"){this._determineLevelsCustomCallback()}}for(var o in this.body.nodes){if(this.body.nodes.hasOwnProperty(o)){this.hierarchical.ensureLevel(o)}}var a=this._getDistribution();this._generateMap();this._placeNodesByHierarchy(a);this._condenseHierarchy();this._shiftToCenter()}}}},{key:"_condenseHierarchy",value:function e(){var t=this;var i=false;var n={};var r=function e(){var i=h();var n=0;for(var s=0;s<i.length-1;s++){var r=i[s].max-i[s+1].min;n+=r+t.options.hierarchical.treeSpacing;a(s+1,n)}};var a=function e(i,n){for(var s in t.hierarchical.trees){if(t.hierarchical.trees.hasOwnProperty(s)){if(t.hierarchical.trees[s]===i){var r=t.body.nodes[s];var o=t._getPositionForHierarchy(r);t._setPositionForHierarchy(r,o+n,undefined,true)}}}};var l=function e(i){var n=t.hierarchical.getTreeSize(t.body.nodes,i);if(t._isVertical()){return{min:n.min_x,max:n.max_x}}else{return{min:n.min_y,max:n.max_y}}};var h=function e(){var i=[];for(var n=0;n<=t.treeIndex;n++){i.push(l(n))}return i};var d=function e(i,n){if(n[i.id]){return}n[i.id]=true;if(t.hierarchical.childrenReference[i.id]){var s=t.hierarchical.childrenReference[i.id];if(s.length>0){for(var r=0;r<s.length;r++){e(t.body.nodes[s[r]],n)}}}};var u=function e(i){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1e9;var s=1e9;var r=1e9;var a=1e9;var l=-1e9;for(var h in i){if(i.hasOwnProperty(h)){var d=t.body.nodes[h];var u=t.hierarchical.levels[d.id];var f=t._getPositionForHierarchy(d);var c=t._getSpaceAroundNode(d,i),p=(0,o["default"])(c,2),m=p[0],v=p[1];s=Math.min(m,s);r=Math.min(v,r);if(u<=n){a=Math.min(f,a);l=Math.max(f,l)}}}return[a,l,s,r]};var f=function e(i,n){var s=t.hierarchical.getMaxLevel(i.id);var r=t.hierarchical.getMaxLevel(n.id);return Math.min(s,r)};var c=function e(i,n){var s=t.hierarchical.parentReference[i.id];var r=t.hierarchical.parentReference[n.id];if(s===undefined||r===undefined){return false}for(var o=0;o<s.length;o++){for(var a=0;a<r.length;a++){if(s[o]==r[a]){return true}}}return false};var p=function e(i,n,s){for(var r=0;r<n.length;r++){var o=n[r];var a=t.distributionOrdering[o];if(a.length>1){for(var l=0;l<a.length-1;l++){if(c(a[l],a[l+1])===true){if(t.hierarchical.trees[a[l].id]===t.hierarchical.trees[a[l+1].id]){i(a[l],a[l+1],s)}}}}}};var m=function e(n,s){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var a=t._getPositionForHierarchy(n);var l=t._getPositionForHierarchy(s);var h=Math.abs(l-a);if(h>t.options.hierarchical.nodeSpacing){var c={};var p={};d(n,c);d(s,p);var m=f(n,s);var v=u(c,m),g=(0,o["default"])(v,4),y=g[0],b=g[1],w=g[2],_=g[3];var x=u(p,m),k=(0,o["default"])(x,4),C=k[0],S=k[1],T=k[2],M=k[3];var D=Math.abs(b-C);if(D>t.options.hierarchical.nodeSpacing){var E=b-C+t.options.hierarchical.nodeSpacing;if(E<-T+t.options.hierarchical.nodeSpacing){E=-T+t.options.hierarchical.nodeSpacing}if(E<0){t._shiftBlock(s.id,E);i=true;if(r===true)t._centerParent(s)}}}};var v=function e(s,r){var a=r.id;var l=r.edges;var h=t.hierarchical.levels[r.id];var f=t.options.hierarchical.levelSeparation*t.options.hierarchical.levelSeparation;var c={};var p=[];for(var m=0;m<l.length;m++){var v=l[m];if(v.toId!=v.fromId){var g=v.toId==a?v.from:v.to;c[l[m].id]=g;if(t.hierarchical.levels[g.id]<h){p.push(v)}}}var y=function e(i,n){var s=0;for(var r=0;r<n.length;r++){if(c[n[r].id]!==undefined){var o=t._getPositionForHierarchy(c[n[r].id])-i;s+=o/Math.sqrt(o*o+f)}}return s};var b=function e(i,n){var s=0;for(var r=0;r<n.length;r++){if(c[n[r].id]!==undefined){var o=t._getPositionForHierarchy(c[n[r].id])-i;s-=f*Math.pow(o*o+f,-1.5)}}return s};var w=function e(i,n){var s=t._getPositionForHierarchy(r);var o={};for(var a=0;a<i;a++){var l=y(s,n);var h=b(s,n);var d=40;var u=Math.max(-d,Math.min(d,Math.round(l/h)));s=s-u;if(o[s]!==undefined){break}o[s]=a}return s};var _=function e(s){var a=t._getPositionForHierarchy(r);if(n[r.id]===undefined){var l={};d(r,l);n[r.id]=l}var h=u(n[r.id]),f=(0,o["default"])(h,4),c=f[0],p=f[1],m=f[2],v=f[3];var g=s-a;var y=0;if(g>0){y=Math.min(g,v-t.options.hierarchical.nodeSpacing)}else if(g<0){y=-Math.min(-g,m-t.options.hierarchical.nodeSpacing)}if(y!=0){t._shiftBlock(r.id,y);i=true}};var x=function e(n){var s=t._getPositionForHierarchy(r);var a=t._getSpaceAroundNode(r),l=(0,o["default"])(a,2),h=l[0],d=l[1];var u=n-s;var f=s;if(u>0){f=Math.min(s+(d-t.options.hierarchical.nodeSpacing),n)}else if(u<0){f=Math.max(s-(h-t.options.hierarchical.nodeSpacing),n)}if(f!==s){t._setPositionForHierarchy(r,f,undefined,true);i=true}};var k=w(s,p);_(k);k=w(s,l);x(k)};var g=function e(n){var r=(0,s["default"])(t.distributionOrdering);r=r.reverse();for(var o=0;o<n;o++){i=false;for(var a=0;a<r.length;a++){var l=r[a];var h=t.distributionOrdering[l];for(var d=0;d<h.length;d++){v(1e3,h[d])}}if(i!==true){break}}};var y=function e(n){var r=(0,s["default"])(t.distributionOrdering);r=r.reverse();for(var o=0;o<n;o++){i=false;p(m,r,true);if(i!==true){break}}};var b=function e(){for(var i in t.body.nodes){if(t.body.nodes.hasOwnProperty(i))t._centerParent(t.body.nodes[i])}};var w=function e(){var i=(0,s["default"])(t.distributionOrdering);i=i.reverse();for(var n=0;n<i.length;n++){var r=i[n];var o=t.distributionOrdering[r];for(var a=0;a<o.length;a++){t._centerParent(o[a])}}};if(this.options.hierarchical.blockShifting===true){y(5);b()}if(this.options.hierarchical.edgeMinimization===true){g(20)}if(this.options.hierarchical.parentCentralization===true){w()}r()}},{key:"_getSpaceAroundNode",value:function e(t,i){var n=true;if(i===undefined){n=false}var s=this.hierarchical.levels[t.id];if(s!==undefined){var r=this.distributionIndex[t.id];var o=this._getPositionForHierarchy(t);var a=1e9;var l=1e9;if(r!==0){var h=this.distributionOrdering[s][r-1];if(n===true&&i[h.id]===undefined||n===false){var d=this._getPositionForHierarchy(h);a=o-d}}if(r!=this.distributionOrdering[s].length-1){var u=this.distributionOrdering[s][r+1];if(n===true&&i[u.id]===undefined||n===false){var f=this._getPositionForHierarchy(u);l=Math.min(l,f-o)}}return[a,l]}else{return[0,0]}}},{key:"_centerParent",value:function e(t){if(this.hierarchical.parentReference[t.id]){var i=this.hierarchical.parentReference[t.id];for(var n=0;n<i.length;n++){var s=i[n];var r=this.body.nodes[s];if(this.hierarchical.childrenReference[s]){var a=1e9;var l=-1e9;var h=this.hierarchical.childrenReference[s];if(h.length>0){for(var d=0;d<h.length;d++){var u=this.body.nodes[h[d]];a=Math.min(a,this._getPositionForHierarchy(u));l=Math.max(l,this._getPositionForHierarchy(u))}}var f=this._getPositionForHierarchy(r);var c=this._getSpaceAroundNode(r),p=(0,o["default"])(c,2),m=p[0],v=p[1];var g=.5*(a+l);var y=f-g;if(y<0&&Math.abs(y)<v-this.options.hierarchical.nodeSpacing||y>0&&Math.abs(y)<m-this.options.hierarchical.nodeSpacing){this._setPositionForHierarchy(r,g,undefined,true)}}}}}},{key:"_placeNodesByHierarchy",value:function e(t){this.positionedNodes={};for(var i in t){if(t.hasOwnProperty(i)){var n=(0,s["default"])(t[i]);n=this._indexArrayToNodes(n);this._sortNodeArray(n);var r=0;for(var o=0;o<n.length;o++){var a=n[o];if(this.positionedNodes[a.id]===undefined){var l=this.options.hierarchical.nodeSpacing*r;if(r>0){l=this._getPositionForHierarchy(n[o-1])+this.options.hierarchical.nodeSpacing}this._setPositionForHierarchy(a,l,i);this._validatePositionAndContinue(a,i,l);r++}}}}}},{key:"_placeBranchNodes",value:function e(t,i){if(this.hierarchical.childrenReference[t]===undefined){return}var n=[];for(var s=0;s<this.hierarchical.childrenReference[t].length;s++){n.push(this.body.nodes[this.hierarchical.childrenReference[t][s]])}this._sortNodeArray(n);for(var r=0;r<n.length;r++){var o=n[r];var a=this.hierarchical.levels[o.id];if(a>i&&this.positionedNodes[o.id]===undefined){var l=void 0;if(r===0){l=this._getPositionForHierarchy(this.body.nodes[t])}else{l=this._getPositionForHierarchy(n[r-1])+this.options.hierarchical.nodeSpacing}this._setPositionForHierarchy(o,l,a);this._validatePositionAndContinue(o,a,l)}else{return}}var h=1e9;var d=-1e9;for(var u=0;u<n.length;u++){var f=n[u].id;h=Math.min(h,this._getPositionForHierarchy(this.body.nodes[f]));d=Math.max(d,this._getPositionForHierarchy(this.body.nodes[f]))}this._setPositionForHierarchy(this.body.nodes[t],.5*(h+d),i)}},{key:"_validatePositionAndContinue",value:function e(t,i,n){if(!this.hierarchical.isTree)return;if(this.lastNodeOnLevel[i]!==undefined){var s=this._getPositionForHierarchy(this.body.nodes[this.lastNodeOnLevel[i]]);if(n-s<this.options.hierarchical.nodeSpacing){var r=s+this.options.hierarchical.nodeSpacing-n;var o=this._findCommonParent(this.lastNodeOnLevel[i],t.id);this._shiftBlock(o.withChild,r)}}this.lastNodeOnLevel[i]=t.id;this.positionedNodes[t.id]=true;this._placeBranchNodes(t.id,i)}},{key:"_indexArrayToNodes",value:function e(t){var i=[];for(var n=0;n<t.length;n++){i.push(this.body.nodes[t[n]])}return i}},{key:"_getDistribution",value:function e(){var t={};var i=void 0,n=void 0;for(i in this.body.nodes){if(this.body.nodes.hasOwnProperty(i)){n=this.body.nodes[i];var s=this.hierarchical.levels[i]===undefined?0:this.hierarchical.levels[i];if(this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU"){n.y=this.options.hierarchical.levelSeparation*s;n.options.fixed.y=true}else{n.x=this.options.hierarchical.levelSeparation*s;n.options.fixed.x=true}if(t[s]===undefined){t[s]={}}t[s][i]=n}}return t}},{key:"_getHubSize",value:function e(){var t=0;for(var i in this.body.nodes){if(this.body.nodes.hasOwnProperty(i)){var n=this.body.nodes[i];if(this.hierarchical.levels[i]===undefined){t=n.edges.length<t?t:n.edges.length}}}return t}},{key:"_determineLevelsByHubsize",value:function e(){var t=this;var i=1;var n=function e(i,n){t.hierarchical.levelDownstream(i,n)};while(i>0){i=this._getHubSize();if(i===0)break;for(var s in this.body.nodes){if(this.body.nodes.hasOwnProperty(s)){var r=this.body.nodes[s];if(r.edges.length===i){this._crawlNetwork(n,s)}}}}}},{key:"_determineLevelsCustomCallback",value:function e(){var t=this;var i=1e5;var n=function e(t,i,n){};var s=function e(s,r,o){var a=t.hierarchical.levels[s.id];if(a===undefined){t.hierarchical.levels[s.id]=i}var l=n(m.cloneOptions(s,"node"),m.cloneOptions(r,"node"),m.cloneOptions(o,"edge"));t.hierarchical.levels[r.id]=t.hierarchical.levels[s.id]+l};this._crawlNetwork(s);this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function e(){var t=this;var i=1e4;var n=function e(n,s,r){var o=t.hierarchical.levels[n.id];if(o===undefined){t.hierarchical.levels[n.id]=i}if(r.toId==s.id){t.hierarchical.levels[s.id]=t.hierarchical.levels[n.id]+1}else{t.hierarchical.levels[s.id]=t.hierarchical.levels[n.id]-1}};this._crawlNetwork(n);this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function e(){var t=this;var i=function e(i,n){if(t.hierarchical.levels[n.id]>t.hierarchical.levels[i.id]){t.hierarchical.addRelation(i.id,n.id)}};this._crawlNetwork(i);this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function e(){var t=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:function(){};var n=arguments[1];var s={};var r=0;var o=function e(n,r){if(s[n.id]===undefined){if(t.hierarchical.trees[n.id]===undefined){t.hierarchical.trees[n.id]=r;t.treeIndex=Math.max(r,t.treeIndex)}s[n.id]=true;var o=void 0;for(var a=0;a<n.edges.length;a++){if(n.edges[a].connected===true){if(n.edges[a].toId===n.id){o=n.edges[a].from}else{o=n.edges[a].to}if(n.id!==o.id){i(n,o,n.edges[a]);e(o,r)}}}}};if(n===undefined){for(var a=0;a<this.body.nodeIndices.length;a++){var l=this.body.nodes[this.body.nodeIndices[a]];if(s[l.id]===undefined){o(l,r);r+=1}}}else{var h=this.body.nodes[n];if(h===undefined){console.error("Node not found:",n);return}o(h)}}},{key:"_shiftBlock",value:function e(t,i){var n=this;var s={};var r=function e(t){if(s[t]){return}s[t]=true;if(n.options.hierarchical.direction==="UD"||n.options.hierarchical.direction==="DU"){n.body.nodes[t].x+=i}else{n.body.nodes[t].y+=i}if(n.hierarchical.childrenReference[t]!==undefined){for(var r=0;r<n.hierarchical.childrenReference[t].length;r++){e(n.hierarchical.childrenReference[t][r])}}};r(t)}},{key:"_findCommonParent",value:function e(t,i){var n=this;var s={};var r=function e(t,i){if(n.hierarchical.parentReference[i]!==undefined){for(var s=0;s<n.hierarchical.parentReference[i].length;s++){var r=n.hierarchical.parentReference[i][s];t[r]=true;e(t,r)}}};var o=function e(t,i){if(n.hierarchical.parentReference[i]!==undefined){for(var s=0;s<n.hierarchical.parentReference[i].length;s++){var r=n.hierarchical.parentReference[i][s];if(t[r]!==undefined){return{foundParent:r,withChild:i}}var o=e(t,r);if(o.foundParent!==null){return o}}}return{foundParent:null,withChild:i}};r(s,t);return o(s,i)}},{key:"_setPositionForHierarchy",value:function e(t,i,n){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(s!==true){if(this.distributionOrdering[n]===undefined){this.distributionOrdering[n]=[];this.distributionOrderingPresence[n]={}}if(this.distributionOrderingPresence[n][t.id]===undefined){this.distributionOrdering[n].push(t);this.distributionIndex[t.id]=this.distributionOrdering[n].length-1}this.distributionOrderingPresence[n][t.id]=true}if(this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU"){t.x=i}else{t.y=i}}},{key:"_isVertical",value:function e(){return this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU"}},{key:"_getPositionForHierarchy",value:function e(t){if(this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU"){return t.x}else{return t.y}}},{key:"_sortNodeArray",value:function e(t){if(t.length>1){if(this.options.hierarchical.direction==="UD"||this.options.hierarchical.direction==="DU"){t.sort(function(e,t){return e.x-t.x})}else{t.sort(function(e,t){return e.y-t.y})}}}}]);return e}();t["default"]=g},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(58);var s=c(n);var r=i(90);var o=c(r);var a=i(62);var l=c(a);var h=i(134);var d=c(h);var u=i(135);var f=c(u);function c(e){return e&&e.__esModule?e:{default:e}}var p=i(1);var m=i(112);var v=i(119);var g=function(){function e(t,i,n){var s=this;(0,d["default"])(this,e);this.body=t;this.canvas=i;this.selectionHandler=n;this.editMode=false;this.manipulationDiv=undefined;this.editModeDiv=undefined;this.closeDiv=undefined;this.manipulationHammers=[];this.temporaryUIFunctions={};this.temporaryEventFunctions=[];this.touchTime=0;this.temporaryIds={nodes:[],edges:[]};this.guiEnabled=false;this.inMode=false;this.selectedControlNode=undefined;this.options={};this.defaultOptions={enabled:false,initiallyActive:false,addNode:true,addEdge:true,editNode:undefined,editEdge:true,deleteNode:true,deleteEdge:true,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}};p.extend(this.options,this.defaultOptions);this.body.emitter.on("destroy",function(){s._clean()});this.body.emitter.on("_dataChanged",this._restore.bind(this));this.body.emitter.on("_resetData",this._restore.bind(this))}(0,f["default"])(e,[{key:"_restore",value:function e(){if(this.inMode!==false){if(this.options.initiallyActive===true){this.enableEditMode()}else{this.disableEditMode()}}}},{key:"setOptions",value:function e(t,i,n){if(i!==undefined){if(i.locale!==undefined){this.options.locale=i.locale}else{this.options.locale=n.locale}if(i.locales!==undefined){this.options.locales=i.locales}else{this.options.locales=n.locales}}if(t!==undefined){if(typeof t==="boolean"){this.options.enabled=t}else{this.options.enabled=true;p.deepExtend(this.options,t)}if(this.options.initiallyActive===true){this.editMode=true}this._setup()}}},{key:"toggleEditMode",value:function e(){if(this.editMode===true){this.disableEditMode()}else{this.enableEditMode()}}},{key:"enableEditMode",value:function e(){this.editMode=true;this._clean();if(this.guiEnabled===true){this.manipulationDiv.style.display="block";this.closeDiv.style.display="block";this.editModeDiv.style.display="none";this.showManipulatorToolbar()}}},{key:"disableEditMode",value:function e(){this.editMode=false;this._clean();if(this.guiEnabled===true){this.manipulationDiv.style.display="none";this.closeDiv.style.display="none";this.editModeDiv.style.display="block";this._createEditButton()}}},{key:"showManipulatorToolbar",value:function e(){this._clean();this.manipulationDOM={};if(this.guiEnabled===true){this.editMode=true;this.manipulationDiv.style.display="block";this.closeDiv.style.display="block";var t=this.selectionHandler._getSelectedNodeCount();var i=this.selectionHandler._getSelectedEdgeCount();var n=t+i;var s=this.options.locales[this.options.locale];var r=false;if(this.options.addNode!==false){this._createAddNodeButton(s);r=true}if(this.options.addEdge!==false){if(r===true){this._createSeperator(1)}else{r=true}this._createAddEdgeButton(s)}if(t===1&&typeof this.options.editNode==="function"){if(r===true){this._createSeperator(2)}else{r=true}this._createEditNodeButton(s)}else if(i===1&&t===0&&this.options.editEdge!==false){if(r===true){this._createSeperator(3)}else{r=true}this._createEditEdgeButton(s)}if(n!==0){if(t>0&&this.options.deleteNode!==false){if(r===true){this._createSeperator(4)}this._createDeleteButton(s)}else if(t===0&&this.options.deleteEdge!==false){if(r===true){this._createSeperator(4)}this._createDeleteButton(s)}}this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this));this._temporaryBindEvent("select",this.showManipulatorToolbar.bind(this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function e(){if(this.editMode!==true){this.enableEditMode()}this._clean();this.inMode="addNode";if(this.guiEnabled===true){var t=this.options.locales[this.options.locale];this.manipulationDOM={};this._createBackButton(t);this._createSeperator();this._createDescription(t["addDescription"]||this.options.locales["en"]["addDescription"]);this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindEvent("click",this._performAddNode.bind(this))}},{key:"editNode",value:function e(){var t=this;if(this.editMode!==true){this.enableEditMode()}this._clean();var i=this.selectionHandler._getSelectedNode();if(i!==undefined){this.inMode="editNode";if(typeof this.options.editNode==="function"){if(i.isCluster!==true){var n=p.deepExtend({},i.options,false);n.x=i.x;n.y=i.y;if(this.options.editNode.length===2){this.options.editNode(n,function(e){if(e!==null&&e!==undefined&&t.inMode==="editNode"){t.body.data.nodes.getDataSet().update(e)}t.showManipulatorToolbar()})}else{throw new Error("The function for edit does not support two arguments (data, callback)")}}else{alert(this.options.locales[this.options.locale]["editClusterError"]||this.options.locales["en"]["editClusterError"])}}else{throw new Error("No function has been configured to handle the editing of nodes.")}}else{this.showManipulatorToolbar()}}},{key:"addEdgeMode",value:function e(){if(this.editMode!==true){this.enableEditMode()}this._clean();this.inMode="addEdge";if(this.guiEnabled===true){var t=this.options.locales[this.options.locale];this.manipulationDOM={};this._createBackButton(t);this._createSeperator();this._createDescription(t["edgeDescription"]||this.options.locales["en"]["edgeDescription"]);this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindUI("onTouch",this._handleConnect.bind(this));this._temporaryBindUI("onDragEnd",this._finishConnect.bind(this));this._temporaryBindUI("onDrag",this._dragControlNode.bind(this));this._temporaryBindUI("onRelease",this._finishConnect.bind(this));this._temporaryBindUI("onDragStart",function(){});this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function e(){if(this.editMode!==true){this.enableEditMode()}this._clean();this.inMode="editEdge";if((0,l["default"])(this.options.editEdge)==="object"&&typeof this.options.editEdge.editWithoutDrag==="function"){this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0];if(this.edgeBeingEditedId!==undefined){var t=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(t.from,t.to);return}}if(this.guiEnabled===true){var i=this.options.locales[this.options.locale];this.manipulationDOM={};this._createBackButton(i);this._createSeperator();this._createDescription(i["editEdgeDescription"]||this.options.locales["en"]["editEdgeDescription"]);this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0];if(this.edgeBeingEditedId!==undefined){var n=this.body.edges[this.edgeBeingEditedId];var s=this._getNewTargetNode(n.from.x,n.from.y);var r=this._getNewTargetNode(n.to.x,n.to.y);this.temporaryIds.nodes.push(s.id);this.temporaryIds.nodes.push(r.id);this.body.nodes[s.id]=s;this.body.nodeIndices.push(s.id);this.body.nodes[r.id]=r;this.body.nodeIndices.push(r.id);this._temporaryBindUI("onTouch",this._controlNodeTouch.bind(this));this._temporaryBindUI("onTap",function(){});this._temporaryBindUI("onHold",function(){});this._temporaryBindUI("onDragStart",this._controlNodeDragStart.bind(this));this._temporaryBindUI("onDrag",this._controlNodeDrag.bind(this));this._temporaryBindUI("onDragEnd",this._controlNodeDragEnd.bind(this));this._temporaryBindUI("onMouseMove",function(){});this._temporaryBindEvent("beforeDrawing",function(e){var t=n.edgeType.findBorderPositions(e);if(s.selected===false){s.x=t.from.x;s.y=t.from.y}if(r.selected===false){r.x=t.to.x;r.y=t.to.y}});this.body.emitter.emit("_redraw")}else{this.showManipulatorToolbar()}}},{key:"deleteSelected",value:function e(){var t=this;if(this.editMode!==true){this.enableEditMode()}this._clean();this.inMode="delete";var i=this.selectionHandler.getSelectedNodes();var n=this.selectionHandler.getSelectedEdges();var s=undefined;if(i.length>0){for(var r=0;r<i.length;r++){if(this.body.nodes[i[r]].isCluster===true){alert(this.options.locales[this.options.locale]["deleteClusterError"]||this.options.locales["en"]["deleteClusterError"]);return}}if(typeof this.options.deleteNode==="function"){s=this.options.deleteNode}}else if(n.length>0){if(typeof this.options.deleteEdge==="function"){s=this.options.deleteEdge}}if(typeof s==="function"){var o={nodes:i,edges:n};if(s.length===2){s(o,function(e){if(e!==null&&e!==undefined&&t.inMode==="delete"){t.body.data.edges.getDataSet().remove(e.edges);t.body.data.nodes.getDataSet().remove(e.nodes);t.body.emitter.emit("startSimulation");t.showManipulatorToolbar()}else{t.body.emitter.emit("startSimulation");t.showManipulatorToolbar()}})}else{throw new Error("The function for delete does not support two arguments (data, callback)")}}else{this.body.data.edges.getDataSet().remove(n);this.body.data.nodes.getDataSet().remove(i);this.body.emitter.emit("startSimulation");this.showManipulatorToolbar()}}},{key:"_setup",value:function e(){if(this.options.enabled===true){this.guiEnabled=true;this._createWrappers();if(this.editMode===false){this._createEditButton()}else{this.showManipulatorToolbar()}}else{this._removeManipulationDOM();this.guiEnabled=false}}},{key:"_createWrappers",value:function e(){if(this.manipulationDiv===undefined){this.manipulationDiv=document.createElement("div");this.manipulationDiv.className="vis-manipulation";if(this.editMode===true){this.manipulationDiv.style.display="block"}else{this.manipulationDiv.style.display="none"}this.canvas.frame.appendChild(this.manipulationDiv)}if(this.editModeDiv===undefined){this.editModeDiv=document.createElement("div");this.editModeDiv.className="vis-edit-mode";if(this.editMode===true){this.editModeDiv.style.display="none"}else{this.editModeDiv.style.display="block"}this.canvas.frame.appendChild(this.editModeDiv)}if(this.closeDiv===undefined){this.closeDiv=document.createElement("div");this.closeDiv.className="vis-close";this.closeDiv.style.display=this.manipulationDiv.style.display;this.canvas.frame.appendChild(this.closeDiv)}}},{key:"_getNewTargetNode",value:function e(t,i){var n=p.deepExtend({},this.options.controlNodeStyle);n.id="targetNode"+p.randomUUID();n.hidden=false;n.physics=false;n.x=t;n.y=i;var s=this.body.functions.createNode(n);s.shape.boundingBox={left:t,right:t,top:i,bottom:i};return s}},{key:"_createEditButton",value:function e(){this._clean();this.manipulationDOM={};p.recursiveDOMDelete(this.editModeDiv);var t=this.options.locales[this.options.locale];var i=this._createButton("editMode","vis-button vis-edit vis-edit-mode",t["edit"]||this.options.locales["en"]["edit"]);this.editModeDiv.appendChild(i);this._bindHammerToDiv(i,this.toggleEditMode.bind(this))}},{key:"_clean",value:function e(){this.inMode=false;if(this.guiEnabled===true){p.recursiveDOMDelete(this.editModeDiv);p.recursiveDOMDelete(this.manipulationDiv);this._cleanManipulatorHammers()}this._cleanupTemporaryNodesAndEdges();this._unbindTemporaryUIs();this._unbindTemporaryEvents();this.body.emitter.emit("restorePhysics")}},{key:"_cleanManipulatorHammers",value:function e(){if(this.manipulationHammers.length!=0){for(var t=0;t<this.manipulationHammers.length;t++){this.manipulationHammers[t].destroy()}this.manipulationHammers=[]}}},{key:"_removeManipulationDOM",value:function e(){this._clean();p.recursiveDOMDelete(this.manipulationDiv);p.recursiveDOMDelete(this.editModeDiv);p.recursiveDOMDelete(this.closeDiv);if(this.manipulationDiv){this.canvas.frame.removeChild(this.manipulationDiv)}if(this.editModeDiv){this.canvas.frame.removeChild(this.editModeDiv)}if(this.closeDiv){this.canvas.frame.removeChild(this.closeDiv)}this.manipulationDiv=undefined;this.editModeDiv=undefined;this.closeDiv=undefined}},{key:"_createSeperator",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+t]=document.createElement("div");this.manipulationDOM["seperatorLineDiv"+t].className="vis-separator-line";this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+t])}},{key:"_createAddNodeButton",value:function e(t){var i=this._createButton("addNode","vis-button vis-add",t["addNode"]||this.options.locales["en"]["addNode"]);this.manipulationDiv.appendChild(i);this._bindHammerToDiv(i,this.addNodeMode.bind(this))}},{key:"_createAddEdgeButton",value:function e(t){var i=this._createButton("addEdge","vis-button vis-connect",t["addEdge"]||this.options.locales["en"]["addEdge"]);this.manipulationDiv.appendChild(i);this._bindHammerToDiv(i,this.addEdgeMode.bind(this))}},{key:"_createEditNodeButton",value:function e(t){var i=this._createButton("editNode","vis-button vis-edit",t["editNode"]||this.options.locales["en"]["editNode"]);this.manipulationDiv.appendChild(i);this._bindHammerToDiv(i,this.editNode.bind(this))}},{key:"_createEditEdgeButton",value:function e(t){var i=this._createButton("editEdge","vis-button vis-edit",t["editEdge"]||this.options.locales["en"]["editEdge"]);this.manipulationDiv.appendChild(i);this._bindHammerToDiv(i,this.editEdgeMode.bind(this))}},{key:"_createDeleteButton",value:function e(t){if(this.options.rtl){var i="vis-button vis-delete-rtl"}else{var i="vis-button vis-delete"}var n=this._createButton("delete",i,t["del"]||this.options.locales["en"]["del"]);this.manipulationDiv.appendChild(n);this._bindHammerToDiv(n,this.deleteSelected.bind(this))}},{key:"_createBackButton",value:function e(t){var i=this._createButton("back","vis-button vis-back",t["back"]||this.options.locales["en"]["back"]);this.manipulationDiv.appendChild(i);this._bindHammerToDiv(i,this.showManipulatorToolbar.bind(this))}},{key:"_createButton",value:function e(t,i,n){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"vis-label";this.manipulationDOM[t+"Div"]=document.createElement("div");this.manipulationDOM[t+"Div"].className=i;this.manipulationDOM[t+"Label"]=document.createElement("div");this.manipulationDOM[t+"Label"].className=s;this.manipulationDOM[t+"Label"].innerHTML=n;this.manipulationDOM[t+"Div"].appendChild(this.manipulationDOM[t+"Label"]);return this.manipulationDOM[t+"Div"]}},{key:"_createDescription",value:function e(t){this.manipulationDiv.appendChild(this._createButton("description","vis-button vis-none",t))}},{key:"_temporaryBindEvent",value:function e(t,i){this.temporaryEventFunctions.push({event:t,boundFunction:i});this.body.emitter.on(t,i)}},{key:"_temporaryBindUI",value:function e(t,i){if(this.body.eventListeners[t]!==undefined){this.temporaryUIFunctions[t]=this.body.eventListeners[t];this.body.eventListeners[t]=i}else{throw new Error("This UI function does not exist. Typo? You tried: "+t+" possible are: "+(0,o["default"])((0,s["default"])(this.body.eventListeners)))}}},{key:"_unbindTemporaryUIs",value:function e(){for(var t in this.temporaryUIFunctions){if(this.temporaryUIFunctions.hasOwnProperty(t)){this.body.eventListeners[t]=this.temporaryUIFunctions[t];delete this.temporaryUIFunctions[t]}}this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function e(){for(var t=0;t<this.temporaryEventFunctions.length;t++){var i=this.temporaryEventFunctions[t].event;var n=this.temporaryEventFunctions[t].boundFunction;this.body.emitter.off(i,n)}this.temporaryEventFunctions=[]}},{key:"_bindHammerToDiv",value:function e(t,i){var n=new m(t,{});v.onTouch(n,i);this.manipulationHammers.push(n)}},{key:"_cleanupTemporaryNodesAndEdges",value:function e(){for(var t=0;t<this.temporaryIds.edges.length;t++){this.body.edges[this.temporaryIds.edges[t]].disconnect();delete this.body.edges[this.temporaryIds.edges[t]];var i=this.body.edgeIndices.indexOf(this.temporaryIds.edges[t]);if(i!==-1){this.body.edgeIndices.splice(i,1)}}for(var n=0;n<this.temporaryIds.nodes.length;n++){delete this.body.nodes[this.temporaryIds.nodes[n]];var s=this.body.nodeIndices.indexOf(this.temporaryIds.nodes[n]);if(s!==-1){this.body.nodeIndices.splice(s,1)}}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function e(t){this.selectionHandler.unselectAll();this.lastTouch=this.body.functions.getPointer(t.center);this.lastTouch.translation=p.extend({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function e(t){var i=this.lastTouch;var n=this.selectionHandler._pointerToPositionObject(i);var s=this.body.nodes[this.temporaryIds.nodes[0]];var r=this.body.nodes[this.temporaryIds.nodes[1]];var o=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=undefined;var a=s.isOverlappingWith(n);var l=r.isOverlappingWith(n);if(a===true){this.selectedControlNode=s;o.edgeType.from=s}else if(l===true){this.selectedControlNode=r;o.edgeType.to=r}if(this.selectedControlNode!==undefined){this.selectionHandler.selectObject(this.selectedControlNode)}this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function e(t){this.body.emitter.emit("disablePhysics");var i=this.body.functions.getPointer(t.center);var n=this.canvas.DOMtoCanvas(i);if(this.selectedControlNode!==undefined){this.selectedControlNode.x=n.x;this.selectedControlNode.y=n.y}else{var s=i.x-this.lastTouch.x;var r=i.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+s,y:this.lastTouch.translation.y+r}}this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function e(t){var i=this.body.functions.getPointer(t.center);var n=this.selectionHandler._pointerToPositionObject(i);var s=this.body.edges[this.edgeBeingEditedId];if(this.selectedControlNode===undefined){return}this.selectionHandler.unselectAll();var r=this.selectionHandler._getAllNodesOverlappingWith(n);var o=undefined;for(var a=r.length-1;a>=0;a--){if(r[a]!==this.selectedControlNode.id){o=this.body.nodes[r[a]];break}}if(o!==undefined&&this.selectedControlNode!==undefined){if(o.isCluster===true){alert(this.options.locales[this.options.locale]["createEdgeError"]||this.options.locales["en"]["createEdgeError"]);
}else{var l=this.body.nodes[this.temporaryIds.nodes[0]];if(this.selectedControlNode.id===l.id){this._performEditEdge(o.id,s.to.id)}else{this._performEditEdge(s.from.id,o.id)}}}else{s.updateEdgeType();this.body.emitter.emit("restorePhysics")}this.body.emitter.emit("_redraw")}},{key:"_handleConnect",value:function e(t){if((new Date).valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(t.center);this.lastTouch.translation=p.extend({},this.body.view.translation);var i=this.lastTouch;var n=this.selectionHandler.getNodeAt(i);if(n!==undefined){if(n.isCluster===true){alert(this.options.locales[this.options.locale]["createEdgeError"]||this.options.locales["en"]["createEdgeError"])}else{var s=this._getNewTargetNode(n.x,n.y);this.body.nodes[s.id]=s;this.body.nodeIndices.push(s.id);var r=this.body.functions.createEdge({id:"connectionEdge"+p.randomUUID(),from:n.id,to:s.id,physics:false,smooth:{enabled:true,type:"continuous",roundness:.5}});this.body.edges[r.id]=r;this.body.edgeIndices.push(r.id);this.temporaryIds.nodes.push(s.id);this.temporaryIds.edges.push(r.id)}}this.touchTime=(new Date).valueOf()}}},{key:"_dragControlNode",value:function e(t){var i=this.body.functions.getPointer(t.center);if(this.temporaryIds.nodes[0]!==undefined){var n=this.body.nodes[this.temporaryIds.nodes[0]];n.x=this.canvas._XconvertDOMtoCanvas(i.x);n.y=this.canvas._YconvertDOMtoCanvas(i.y);this.body.emitter.emit("_redraw")}else{var s=i.x-this.lastTouch.x;var r=i.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+s,y:this.lastTouch.translation.y+r}}}},{key:"_finishConnect",value:function e(t){var i=this.body.functions.getPointer(t.center);var n=this.selectionHandler._pointerToPositionObject(i);var s=undefined;if(this.temporaryIds.edges[0]!==undefined){s=this.body.edges[this.temporaryIds.edges[0]].fromId}var r=this.selectionHandler._getAllNodesOverlappingWith(n);var o=undefined;for(var a=r.length-1;a>=0;a--){if(this.temporaryIds.nodes.indexOf(r[a])===-1){o=this.body.nodes[r[a]];break}}this._cleanupTemporaryNodesAndEdges();if(o!==undefined){if(o.isCluster===true){alert(this.options.locales[this.options.locale]["createEdgeError"]||this.options.locales["en"]["createEdgeError"])}else{if(this.body.nodes[s]!==undefined&&this.body.nodes[o.id]!==undefined){this._performAddEdge(s,o.id)}}}this.body.emitter.emit("_redraw")}},{key:"_performAddNode",value:function e(t){var i=this;var n={id:p.randomUUID(),x:t.pointer.canvas.x,y:t.pointer.canvas.y,label:"new"};if(typeof this.options.addNode==="function"){if(this.options.addNode.length===2){this.options.addNode(n,function(e){if(e!==null&&e!==undefined&&i.inMode==="addNode"){i.body.data.nodes.getDataSet().add(e);i.showManipulatorToolbar()}})}else{throw new Error("The function for add does not support two arguments (data,callback)");this.showManipulatorToolbar()}}else{this.body.data.nodes.getDataSet().add(n);this.showManipulatorToolbar()}}},{key:"_performAddEdge",value:function e(t,i){var n=this;var s={from:t,to:i};if(typeof this.options.addEdge==="function"){if(this.options.addEdge.length===2){this.options.addEdge(s,function(e){if(e!==null&&e!==undefined&&n.inMode==="addEdge"){n.body.data.edges.getDataSet().add(e);n.selectionHandler.unselectAll();n.showManipulatorToolbar()}})}else{throw new Error("The function for connect does not support two arguments (data,callback)")}}else{this.body.data.edges.getDataSet().add(s);this.selectionHandler.unselectAll();this.showManipulatorToolbar()}}},{key:"_performEditEdge",value:function e(t,i){var n=this;var s={id:this.edgeBeingEditedId,from:t,to:i,label:this.body.data.edges._data[this.edgeBeingEditedId].label};var r=this.options.editEdge;if((typeof r==="undefined"?"undefined":(0,l["default"])(r))==="object"){r=r.editWithoutDrag}if(typeof r==="function"){if(r.length===2){r(s,function(e){if(e===null||e===undefined||n.inMode!=="editEdge"){n.body.edges[s.id].updateEdgeType();n.body.emitter.emit("_redraw");n.showManipulatorToolbar()}else{n.body.data.edges.getDataSet().update(e);n.selectionHandler.unselectAll();n.showManipulatorToolbar()}})}else{throw new Error("The function for edit does not support two arguments (data, callback)")}}else{this.body.data.edges.getDataSet().update(s);this.selectionHandler.unselectAll();this.showManipulatorToolbar()}}}]);return e}();t["default"]=g},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i="string";var n="boolean";var s="number";var r="array";var o="object";var a="dom";var l="any";var h={configure:{enabled:{boolean:n},filter:{boolean:n,string:i,array:r,function:"function"},container:{dom:a},showButton:{boolean:n},__type__:{object:o,boolean:n,string:i,array:r,function:"function"}},edges:{arrows:{to:{enabled:{boolean:n},scaleFactor:{number:s},type:{string:["arrow","circle"]},__type__:{object:o,boolean:n}},middle:{enabled:{boolean:n},scaleFactor:{number:s},type:{string:["arrow","circle"]},__type__:{object:o,boolean:n}},from:{enabled:{boolean:n},scaleFactor:{number:s},type:{string:["arrow","circle"]},__type__:{object:o,boolean:n}},__type__:{string:["from","to","middle"],object:o}},arrowStrikethrough:{boolean:n},chosen:{label:{boolean:n,function:"function"},edge:{boolean:n,function:"function"},__type__:{object:o,boolean:n}},color:{color:{string:i},highlight:{string:i},hover:{string:i},inherit:{string:["from","to","both"],boolean:n},opacity:{number:s},__type__:{object:o,string:i}},dashes:{boolean:n,array:r},font:{color:{string:i},size:{number:s},face:{string:i},background:{string:i},strokeWidth:{number:s},strokeColor:{string:i},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:s},multi:{boolean:n,string:i},bold:{color:{string:i},size:{number:s},face:{string:i},mod:{string:i},vadjust:{number:s},__type__:{object:o,string:i}},boldital:{color:{string:i},size:{number:s},face:{string:i},mod:{string:i},vadjust:{number:s},__type__:{object:o,string:i}},ital:{color:{string:i},size:{number:s},face:{string:i},mod:{string:i},vadjust:{number:s},__type__:{object:o,string:i}},mono:{color:{string:i},size:{number:s},face:{string:i},mod:{string:i},vadjust:{number:s},__type__:{object:o,string:i}},__type__:{object:o,string:i}},hidden:{boolean:n},hoverWidth:{function:"function",number:s},label:{string:i,undefined:"undefined"},labelHighlightBold:{boolean:n},length:{number:s,undefined:"undefined"},physics:{boolean:n},scaling:{min:{number:s},max:{number:s},label:{enabled:{boolean:n},min:{number:s},max:{number:s},maxVisible:{number:s},drawThreshold:{number:s},__type__:{object:o,boolean:n}},customScalingFunction:{function:"function"},__type__:{object:o}},selectionWidth:{function:"function",number:s},selfReferenceSize:{number:s},shadow:{enabled:{boolean:n},color:{string:i},size:{number:s},x:{number:s},y:{number:s},__type__:{object:o,boolean:n}},smooth:{enabled:{boolean:n},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:s},forceDirection:{string:["horizontal","vertical","none"],boolean:n},__type__:{object:o,boolean:n}},title:{string:i,undefined:"undefined"},width:{number:s},widthConstraint:{maximum:{number:s},__type__:{object:o,boolean:n,number:s}},value:{number:s,undefined:"undefined"},__type__:{object:o}},groups:{useDefaultGroups:{boolean:n},__any__:"get from nodes, will be overwritten below",__type__:{object:o}},interaction:{dragNodes:{boolean:n},dragView:{boolean:n},hideEdgesOnDrag:{boolean:n},hideNodesOnDrag:{boolean:n},hover:{boolean:n},keyboard:{enabled:{boolean:n},speed:{x:{number:s},y:{number:s},zoom:{number:s},__type__:{object:o}},bindToWindow:{boolean:n},__type__:{object:o,boolean:n}},multiselect:{boolean:n},navigationButtons:{boolean:n},selectable:{boolean:n},selectConnectedEdges:{boolean:n},hoverConnectedEdges:{boolean:n},tooltipDelay:{number:s},zoomView:{boolean:n},__type__:{object:o}},layout:{randomSeed:{undefined:"undefined",number:s},improvedLayout:{boolean:n},hierarchical:{enabled:{boolean:n},levelSeparation:{number:s},nodeSpacing:{number:s},treeSpacing:{number:s},blockShifting:{boolean:n},edgeMinimization:{boolean:n},parentCentralization:{boolean:n},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},__type__:{object:o,boolean:n}},__type__:{object:o}},manipulation:{enabled:{boolean:n},initiallyActive:{boolean:n},addNode:{boolean:n,function:"function"},addEdge:{boolean:n,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:o,boolean:n,function:"function"}},deleteNode:{boolean:n,function:"function"},deleteEdge:{boolean:n,function:"function"},controlNodeStyle:"get from nodes, will be overwritten below",__type__:{object:o,boolean:n}},nodes:{borderWidth:{number:s},borderWidthSelected:{number:s,undefined:"undefined"},brokenImage:{string:i,undefined:"undefined"},chosen:{label:{boolean:n,function:"function"},node:{boolean:n,function:"function"},__type__:{object:o,boolean:n}},color:{border:{string:i},background:{string:i},highlight:{border:{string:i},background:{string:i},__type__:{object:o,string:i}},hover:{border:{string:i},background:{string:i},__type__:{object:o,string:i}},__type__:{object:o,string:i}},fixed:{x:{boolean:n},y:{boolean:n},__type__:{object:o,boolean:n}},font:{align:{string:i},color:{string:i},size:{number:s},face:{string:i},background:{string:i},strokeWidth:{number:s},strokeColor:{string:i},vadjust:{number:s},multi:{boolean:n,string:i},bold:{color:{string:i},size:{number:s},face:{string:i},mod:{string:i},vadjust:{number:s},__type__:{object:o,string:i}},boldital:{color:{string:i},size:{number:s},face:{string:i},mod:{string:i},vadjust:{number:s},__type__:{object:o,string:i}},ital:{color:{string:i},size:{number:s},face:{string:i},mod:{string:i},vadjust:{number:s},__type__:{object:o,string:i}},mono:{color:{string:i},size:{number:s},face:{string:i},mod:{string:i},vadjust:{number:s},__type__:{object:o,string:i}},__type__:{object:o,string:i}},group:{string:i,number:s,undefined:"undefined"},heightConstraint:{minimum:{number:s},valign:{string:i},__type__:{object:o,boolean:n,number:s}},hidden:{boolean:n},icon:{face:{string:i},code:{string:i},size:{number:s},color:{string:i},__type__:{object:o}},id:{string:i,number:s},image:{selected:{string:i,undefined:"undefined"},unselected:{string:i,undefined:"undefined"},__type__:{object:o,string:i}},label:{string:i,undefined:"undefined"},labelHighlightBold:{boolean:n},level:{number:s,undefined:"undefined"},margin:{top:{number:s},right:{number:s},bottom:{number:s},left:{number:s},__type__:{object:o,number:s}},mass:{number:s},physics:{boolean:n},scaling:{min:{number:s},max:{number:s},label:{enabled:{boolean:n},min:{number:s},max:{number:s},maxVisible:{number:s},drawThreshold:{number:s},__type__:{object:o,boolean:n}},customScalingFunction:{function:"function"},__type__:{object:o}},shadow:{enabled:{boolean:n},color:{string:i},size:{number:s},x:{number:s},y:{number:s},__type__:{object:o,boolean:n}},shape:{string:["ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon"]},shapeProperties:{borderDashes:{boolean:n,array:r},borderRadius:{number:s},interpolation:{boolean:n},useImageSize:{boolean:n},useBorderWithImage:{boolean:n},__type__:{object:o}},size:{number:s},title:{string:i,undefined:"undefined"},value:{number:s,undefined:"undefined"},widthConstraint:{minimum:{number:s},maximum:{number:s},__type__:{object:o,boolean:n,number:s}},x:{number:s},y:{number:s},__type__:{object:o}},physics:{enabled:{boolean:n},barnesHut:{gravitationalConstant:{number:s},centralGravity:{number:s},springLength:{number:s},springConstant:{number:s},damping:{number:s},avoidOverlap:{number:s},__type__:{object:o}},forceAtlas2Based:{gravitationalConstant:{number:s},centralGravity:{number:s},springLength:{number:s},springConstant:{number:s},damping:{number:s},avoidOverlap:{number:s},__type__:{object:o}},repulsion:{centralGravity:{number:s},springLength:{number:s},springConstant:{number:s},nodeDistance:{number:s},damping:{number:s},__type__:{object:o}},hierarchicalRepulsion:{centralGravity:{number:s},springLength:{number:s},springConstant:{number:s},nodeDistance:{number:s},damping:{number:s},__type__:{object:o}},maxVelocity:{number:s},minVelocity:{number:s},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:n},iterations:{number:s},updateInterval:{number:s},onlyDynamicEdges:{boolean:n},fit:{boolean:n},__type__:{object:o,boolean:n}},timestep:{number:s},adaptiveTimestep:{boolean:n},__type__:{object:o,boolean:n}},autoResize:{boolean:n},clickToUse:{boolean:n},locale:{string:i},locales:{__any__:{any:l},__type__:{object:o}},height:{string:i},width:{string:i},__type__:{object:o}};h.groups.__any__=h.nodes;h.manipulation.controlNodeStyle=h.nodes;var d={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},fixed:{x:false,y:false},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:false,labelHighlightBold:true,physics:true,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:false,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:false,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown"],shapeProperties:{borderDashes:false,borderRadius:[6,0,20,1],interpolation:true,useImageSize:false},size:[25,0,200,1]},edges:{arrows:{to:{enabled:false,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:false,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:false,scaleFactor:[1,0,3,.05],type:"arrow"}},arrowStrikethrough:true,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",true,false],opacity:[1,0,1,.05]},dashes:false,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:false,hoverWidth:[1.5,0,5,.1],labelHighlightBold:true,physics:true,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:true,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],shadow:{enabled:false,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:true,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:false,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:true,edgeMinimization:true,parentCentralization:true,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"]}},interaction:{dragNodes:true,dragView:true,hideEdgesOnDrag:false,hideNodesOnDrag:false,hover:false,keyboard:{enabled:false,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:true},multiselect:false,navigationButtons:false,selectable:true,selectConnectedEdges:true,hoverConnectedEdges:true,tooltipDelay:[300,0,1e3,25],zoomView:true},manipulation:{enabled:false,initiallyActive:false},physics:{enabled:true,barnesHut:{gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01]}};t.allOptions=h;t.configureOptions=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(170);var s=u(n);var r=i(134);var o=u(r);var a=i(135);var l=u(a);var h=i(231);var d=u(h);function u(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t,i,n){(0,o["default"])(this,e);this.body=t;this.springLength=i;this.springConstant=n;this.distanceSolver=new d["default"]}(0,l["default"])(e,[{key:"setOptions",value:function e(t){if(t){if(t.springLength){this.springLength=t.springLength}if(t.springConstant){this.springConstant=t.springConstant}}}},{key:"solve",value:function e(t,i){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var r=this.distanceSolver.getDistances(this.body,t,i);this._createL_matrix(r);this._createK_matrix(r);this._createE_matrix();var o=.01;var a=1;var l=0;var h=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3));var d=5;var u=1e9;var f=0,c=0,p=0,m=0,v=0;while(u>o&&l<h){l+=1;var g=this._getHighestEnergyNode(n);var y=(0,s["default"])(g,4);f=y[0];u=y[1];c=y[2];p=y[3];m=u;v=0;while(m>a&&v<d){v+=1;this._moveNode(f,c,p);var b=this._getEnergy(f);var w=(0,s["default"])(b,3);m=w[0];c=w[1];p=w[2]}}}},{key:"_getHighestEnergyNode",value:function e(t){var i=this.body.nodeIndices;var n=this.body.nodes;var r=0;var o=i[0];var a=0,l=0;for(var h=0;h<i.length;h++){var d=i[h];if(n[d].predefinedPosition===false||n[d].isCluster===true&&t===true||n[d].options.fixed.x===true||n[d].options.fixed.y===true){var u=this._getEnergy(d),f=(0,s["default"])(u,3),c=f[0],p=f[1],m=f[2];if(r<c){r=c;o=d;a=p;l=m}}}return[o,r,a,l]}},{key:"_getEnergy",value:function e(t){var i=(0,s["default"])(this.E_sums[t],2),n=i[0],r=i[1];var o=Math.sqrt(Math.pow(n,2)+Math.pow(r,2));return[o,n,r]}},{key:"_moveNode",value:function e(t,i,n){var s=this.body.nodeIndices;var r=this.body.nodes;var o=0;var a=0;var l=0;var h=r[t].x;var d=r[t].y;var u=this.K_matrix[t];var f=this.L_matrix[t];for(var c=0;c<s.length;c++){var p=s[c];if(p!==t){var m=r[p].x;var v=r[p].y;var g=u[p];var y=f[p];var b=1/Math.pow(Math.pow(h-m,2)+Math.pow(d-v,2),1.5);o+=g*(1-y*Math.pow(d-v,2)*b);a+=g*(y*(h-m)*(d-v)*b);l+=g*(1-y*Math.pow(h-m,2)*b)}}var w=o,_=a,x=i,k=l,C=n;var S=(x/w+C/_)/(_/w-k/_);var T=-(_*S+x)/w;r[t].x+=T;r[t].y+=S;this._updateE_matrix(t)}},{key:"_createL_matrix",value:function e(t){var i=this.body.nodeIndices;var n=this.springLength;this.L_matrix=[];for(var s=0;s<i.length;s++){this.L_matrix[i[s]]={};for(var r=0;r<i.length;r++){this.L_matrix[i[s]][i[r]]=n*t[i[s]][i[r]]}}}},{key:"_createK_matrix",value:function e(t){var i=this.body.nodeIndices;var n=this.springConstant;this.K_matrix=[];for(var s=0;s<i.length;s++){this.K_matrix[i[s]]={};for(var r=0;r<i.length;r++){this.K_matrix[i[s]][i[r]]=n*Math.pow(t[i[s]][i[r]],-2)}}}},{key:"_createE_matrix",value:function e(){var t=this.body.nodeIndices;var i=this.body.nodes;this.E_matrix={};this.E_sums={};for(var n=0;n<t.length;n++){this.E_matrix[t[n]]=[]}for(var s=0;s<t.length;s++){var r=t[s];var o=i[r].x;var a=i[r].y;var l=0;var h=0;for(var d=s;d<t.length;d++){var u=t[d];if(u!==r){var f=i[u].x;var c=i[u].y;var p=1/Math.sqrt(Math.pow(o-f,2)+Math.pow(a-c,2));this.E_matrix[r][d]=[this.K_matrix[r][u]*(o-f-this.L_matrix[r][u]*(o-f)*p),this.K_matrix[r][u]*(a-c-this.L_matrix[r][u]*(a-c)*p)];this.E_matrix[u][s]=this.E_matrix[r][d];l+=this.E_matrix[r][d][0];h+=this.E_matrix[r][d][1]}}this.E_sums[r]=[l,h]}}},{key:"_updateE_matrix",value:function e(t){var i=this.body.nodeIndices;var n=this.body.nodes;var s=this.E_matrix[t];var r=this.K_matrix[t];var o=this.L_matrix[t];var a=n[t].x;var l=n[t].y;var h=0;var d=0;for(var u=0;u<i.length;u++){var f=i[u];if(f!==t){var c=s[u];var p=c[0];var m=c[1];var v=n[f].x;var g=n[f].y;var y=1/Math.sqrt(Math.pow(a-v,2)+Math.pow(l-g,2));var b=r[f]*(a-v-o[f]*(a-v)*y);var w=r[f]*(l-g-o[f]*(l-g)*y);s[u]=[b,w];h+=b;d+=w;var _=this.E_sums[f];_[0]+=b-p;_[1]+=w-m}}this.E_sums[t]=[h,d]}}]);return e}();t["default"]=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=i(134);var s=a(n);var r=i(135);var o=a(r);function a(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){(0,s["default"])(this,e)}(0,o["default"])(e,[{key:"getDistances",value:function e(t,i,n){var s={};var r=t.edges;for(var o=0;o<i.length;o++){var a=i[o];var l={};s[a]=l;for(var h=0;h<i.length;h++){l[i[h]]=o==h?0:1e9}}for(var d=0;d<n.length;d++){var u=r[n[d]];if(u.connected===true&&s[u.fromId]!==undefined&&s[u.toId]!==undefined){s[u.fromId][u.toId]=1;s[u.toId][u.fromId]=1}}var f=i.length;for(var c=0;c<f;c++){var p=i[c];var m=s[p];for(var v=0;v<f-1;v++){var g=i[v];var y=s[g];for(var b=v+1;b<f;b++){var w=i[b];var _=s[w];var x=Math.min(y[w],y[p]+m[w]);y[w]=x;_[g]=x}}}return s}}]);return e}();t["default"]=l}])});!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.proj4=t()}(this,function(){"use strict";function e(e,t){if(e[t])return e[t];for(var i,n,s=Object.keys(e),r=t.toLowerCase().replace(Ht,""),o=-1;++o<s.length;)if(i=s[o],n=i.toLowerCase().replace(Ht,""),n===r)return e[i]}function t(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Ut}function i(e){var i=new t(e);return i.output()}function n(e,t,i){Array.isArray(t)&&(i.unshift(t),t=null);var n=t?{}:e,r=i.reduce(function(e,t){return s(t,e),e},n);t&&(e[t]=r)}function s(e,t){if(!Array.isArray(e))return void(t[e]=!0);var i=e.shift();if("PARAMETER"===i&&(i=e.shift()),1===e.length)return Array.isArray(e[0])?(t[i]={},void s(e[0],t[i])):void(t[i]=e[0]);if(!e.length)return void(t[i]=!0);if("TOWGS84"===i)return void(t[i]=e);Array.isArray(i)||(t[i]={});var r;switch(i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[i]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&s(e[2],t[i]));case"SPHEROID":case"ELLIPSOID":return t[i]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&s(e[3],t[i]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return e[0]=["name",e[0]],void n(t,i,e);default:for(r=-1;++r<e.length;)if(!Array.isArray(e[r]))return s(e,t[i]);return n(t,i,e)}}function r(e,t){var i=t[0],n=t[1];!(i in e)&&n in e&&(e[i]=e[n],3===t.length&&(e[i]=t[2](e[i])))}function o(e){return e*ei}function a(e){function t(t){var i=e.to_meter||1;return t*i}"GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"==typeof e.PROJECTION?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):(e.to_meter=e.UNIT.convert,10)));var i=e.GEOGCS;"GEOGCS"===e.type&&(i=e),i&&(i.DATUM?e.datumCode=i.DATUM.name.toLowerCase():e.datumCode=i.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==e.datumCode&&"new_zealand_1949"!==e.datumCode||(e.datumCode="nzgd49"),"wgs_1984"===e.datumCode&&("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"_ferro"===e.datumCode.slice(-6)&&(e.datumCode=e.datumCode.slice(0,-6)),"_jakarta"===e.datumCode.slice(-8)&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),i.DATUM&&i.DATUM.SPHEROID&&(e.ellps=i.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=i.DATUM.SPHEROID.a,e.rf=parseFloat(i.DATUM.SPHEROID.rf,10)),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36")),e.b&&!isFinite(e.b)&&(e.b=e.a);var n=function(t){return r(e,t)},s=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",o],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",o],["x0","false_easting",t],["y0","false_northing",t],["long0","central_meridian",o],["lat0","latitude_of_origin",o],["lat0","standard_parallel_1",o],["lat1","standard_parallel_1",o],["lat2","standard_parallel_2",o],["alpha","azimuth",o],["srsCode","name"]];s.forEach(n),e.long0||!e.longc||"Albers_Conic_Equal_Area"!==e.projName&&"Lambert_Azimuthal_Equal_Area"!==e.projName||(e.long0=e.longc),e.lat_ts||!e.lat1||"Stereographic_South_Pole"!==e.projName&&"Polar Stereographic (variant B)"!==e.projName||(e.lat0=o(e.lat1>0?90:-90),e.lat_ts=e.lat1)}function l(e){var t=this;if(2===arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?l[e]=Bt(arguments[1]):l[e]=ti(arguments[1]):l[e]=i}else if(1===arguments.length){if(Array.isArray(e))return e.map(function(e){Array.isArray(e)?l.apply(t,e):l(e)});if("string"==typeof e){if(e in l)return l[e]}else"EPSG"in e?l["EPSG:"+e.EPSG]=e:"ESRI"in e?l["ESRI:"+e.ESRI]=e:"IAU2000"in e?l["IAU2000:"+e.IAU2000]=e:console.log(e);return}}function h(e){return"string"==typeof e}function d(e){return e in l}function u(e){return ii.some(function(t){return e.indexOf(t)>-1})}function f(e){return"+"===e[0]}function c(e){return h(e)?d(e)?l[e]:u(e)?ti(e):f(e)?Bt(e):void 0:e}function p(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=si(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function m(e){var t=e.x,i=e.y;if(i*Ft>90&&i*Ft<-90&&t*Ft>180&&t*Ft<-180)return null;var n,s;if(Math.abs(Math.abs(i)-Et)<=At)return null;if(this.sphere)n=this.x0+this.a*this.k0*oi(t-this.long0),s=this.y0+this.a*this.k0*Math.log(Math.tan(Rt+.5*i));else{var r=Math.sin(i),o=ai(this.e,i,r);n=this.x0+this.a*this.k0*oi(t-this.long0),s=this.y0-this.a*this.k0*Math.log(o)}return e.x=n,e.y=s,e}function v(e){var t,i,n=e.x-this.x0,s=e.y-this.y0;if(this.sphere)i=Et-2*Math.atan(Math.exp(-s/(this.a*this.k0)));else{var r=Math.exp(-s/(this.a*this.k0));if(i=li(this.e,r),i===-9999)return null}return t=oi(this.long0+n/(this.a*this.k0)),e.x=t,e.y=i,e}function g(){}function y(e){return e}function b(e,t){var i=mi.length;return e.names?(mi[i]=e,e.names.forEach(function(e){pi[e.toLowerCase()]=i}),this):(console.log(t),!0)}function w(e){if(!e)return!1;var t=e.toLowerCase();return"undefined"!=typeof pi[t]&&mi[pi[t]]?mi[pi[t]]:void 0}function _(){ci.forEach(b)}function x(e,t,i,n){var s=e*e,r=t*t,o=(s-r)/s,a=0;n?(e*=1-o*(Ot+o*(Pt+o*It)),s=e*e,o=0):a=Math.sqrt(o);var l=(s-r)/r;return{es:o,e:a,ep2:l}}function k(t,i,n,s,r){if(!t){var o=e(gi,s);o||(o=yi),t=o.a,i=o.b,n=o.rf}return n&&!i&&(i=(1-1/n)*t),(0===n||Math.abs(t-i)<At)&&(r=!0,i=t),{a:t,b:i,rf:n,sphere:r}}function C(e,t,i,n,s,r){var o={};return void 0===e||"none"===e?o.datum_type=Mt:o.datum_type=Tt,t&&(o.datum_params=t.map(parseFloat),0===o.datum_params[0]&&0===o.datum_params[1]&&0===o.datum_params[2]||(o.datum_type=Ct),o.datum_params.length>3&&(0===o.datum_params[3]&&0===o.datum_params[4]&&0===o.datum_params[5]&&0===o.datum_params[6]||(o.datum_type=St,o.datum_params[3]*=Dt,o.datum_params[4]*=Dt,o.datum_params[5]*=Dt,o.datum_params[6]=o.datum_params[6]/1e6+1))),o.a=i,o.b=n,o.es=s,o.ep2=r,o}function S(t,i){if(!(this instanceof S))return new S(t);i=i||function(e){if(e)throw e};var n=c(t);if("object"!=typeof n)return void i(t);var s=S.projections.get(n.projName);if(!s)return void i(t);if(n.datumCode&&"none"!==n.datumCode){var r=e(bi,n.datumCode);r&&(n.datum_params=r.towgs84?r.towgs84.split(","):null,n.ellps=r.ellipse,n.datumName=r.datumName?r.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84";var o=k(n.a,n.b,n.rf,n.ellps,n.sphere),a=x(o.a,o.b,o.rf,n.R_A),l=n.datum||C(n.datumCode,n.datum_params,o.a,o.b,a.es,a.ep2);ni(this,n),ni(this,s),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=l,this.init(),i(null,this)}function T(e,t){return e.datum_type===t.datum_type&&(!(e.a!==t.a||Math.abs(e.es-t.es)>5e-11)&&(e.datum_type===Ct?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type!==St||e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]))}function M(e,t,i){var n,s,r,o,a=e.x,l=e.y,h=e.z?e.z:0;if(l<-Et&&l>-1.001*Et)l=-Et;else if(l>Et&&l<1.001*Et)l=Et;else if(l<-Et||l>Et)return null;return a>Math.PI&&(a-=2*Math.PI),s=Math.sin(l),o=Math.cos(l),r=s*s,n=i/Math.sqrt(1-t*r),{x:(n+h)*o*Math.cos(a),y:(n+h)*o*Math.sin(a),z:(n*(1-t)+h)*s}}function D(e,t,i,n){var s,r,o,a,l,h,d,u,f,c,p,m,v,g,y,b,w=1e-12,_=w*w,x=30,k=e.x,C=e.y,S=e.z?e.z:0;if(s=Math.sqrt(k*k+C*C),r=Math.sqrt(k*k+C*C+S*S),s/i<w){if(g=0,r/i<w)return y=Et,b=-n,{x:e.x,y:e.y,z:e.z}}else g=Math.atan2(C,k);o=S/r,a=s/r,l=1/Math.sqrt(1-t*(2-t)*a*a),u=a*(1-t)*l,f=o*l,v=0;do v++,d=i/Math.sqrt(1-t*f*f),b=s*u+S*f-d*(1-t*f*f),h=t*d/(d+b),l=1/Math.sqrt(1-h*(2-h)*a*a),c=a*(1-h)*l,p=o*l,m=p*u-c*f,u=c,f=p;while(m*m>_&&v<x);return y=Math.atan(p/Math.abs(c)),{x:g,y:y,z:b}}function E(e,t,i){if(t===Ct)return{x:e.x+i[0],y:e.y+i[1],z:e.z+i[2]};if(t===St){var n=i[0],s=i[1],r=i[2],o=i[3],a=i[4],l=i[5],h=i[6];return{x:h*(e.x-l*e.y+a*e.z)+n,y:h*(l*e.x+e.y-o*e.z)+s,z:h*(-a*e.x+o*e.y+e.z)+r}}}function O(e,t,i){if(t===Ct)return{x:e.x-i[0],y:e.y-i[1],z:e.z-i[2]};if(t===St){var n=i[0],s=i[1],r=i[2],o=i[3],a=i[4],l=i[5],h=i[6],d=(e.x-n)/h,u=(e.y-s)/h,f=(e.z-r)/h;return{x:d+l*u-a*f,y:-l*d+u+o*f,z:a*d-o*u+f}}}function P(e){return e===Ct||e===St}function I(e,t){return(e.datum.datum_type===Ct||e.datum.datum_type===St)&&"WGS84"!==t.datumCode||(t.datum.datum_type===Ct||t.datum.datum_type===St)&&"WGS84"!==e.datumCode}function A(e,t,i){var n;return Array.isArray(i)&&(i=xi(i)),e.datum&&t.datum&&I(e,t)&&(n=new S("WGS84"),i=A(e,n,i),e=n),"enu"!==e.axis&&(i=_i(e,!1,i)),"longlat"===e.projName?i={x:i.x*Nt,y:i.y*Nt}:(e.to_meter&&(i={x:i.x*e.to_meter,y:i.y*e.to_meter}),i=e.inverse(i)),e.from_greenwich&&(i.x+=e.from_greenwich),i=wi(e.datum,t.datum,i),t.from_greenwich&&(i={x:i.x-t.from_greenwich,y:i.y}),"longlat"===t.projName?i={x:i.x*Ft,y:i.y*Ft}:(i=t.forward(i),t.to_meter&&(i={x:i.x/t.to_meter,y:i.y/t.to_meter})),"enu"!==t.axis?_i(t,!0,i):i}function N(e,t,i){var n;return Array.isArray(i)?(n=A(e,t,i),3===i.length?[n.x,n.y,n.z]:[n.x,n.y]):A(e,t,i)}function F(e){return e instanceof S?e:e.oProj?e.oProj:S(e)}function R(e,t,i){e=F(e);var n,s=!1;return"undefined"==typeof t?(t=e,e=ki,s=!0):("undefined"!=typeof t.x||Array.isArray(t))&&(i=t,t=e,e=ki,s=!0),t=F(t),i?N(e,t,i):(n={forward:function(i){return N(e,t,i)},inverse:function(i){return N(t,e,i)}},s&&(n.oProj=t),n)}function $(e,t){return t=t||5,
Y(B({lat:e[1],lon:e[0]}),t)}function L(e){var t=U(X(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function z(e){var t=U(X(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function j(e){return e*(Math.PI/180)}function H(e){return 180*(e/Math.PI)}function B(e){var t,i,n,s,r,o,a,l,h,d=e.lat,u=e.lon,f=6378137,c=.00669438,p=.9996,m=j(d),v=j(u);h=Math.floor((u+180)/6)+1,180===u&&(h=60),d>=56&&d<64&&u>=3&&u<12&&(h=32),d>=72&&d<84&&(u>=0&&u<9?h=31:u>=9&&u<21?h=33:u>=21&&u<33?h=35:u>=33&&u<42&&(h=37)),t=6*(h-1)-180+3,l=j(t),i=c/(1-c),n=f/Math.sqrt(1-c*Math.sin(m)*Math.sin(m)),s=Math.tan(m)*Math.tan(m),r=i*Math.cos(m)*Math.cos(m),o=Math.cos(m)*(v-l),a=f*((1-c/4-3*c*c/64-5*c*c*c/256)*m-(3*c/8+3*c*c/32+45*c*c*c/1024)*Math.sin(2*m)+(15*c*c/256+45*c*c*c/1024)*Math.sin(4*m)-35*c*c*c/3072*Math.sin(6*m));var g=p*n*(o+(1-s+r)*o*o*o/6+(5-18*s+s*s+72*r-58*i)*o*o*o*o*o/120)+5e5,y=p*(a+n*Math.tan(m)*(o*o/2+(5-s+9*r+4*r*r)*o*o*o*o/24+(61-58*s+s*s+600*r-330*i)*o*o*o*o*o*o/720));return d<0&&(y+=1e7),{northing:Math.round(y),easting:Math.round(g),zoneNumber:h,zoneLetter:W(d)}}function U(e){var t=e.northing,i=e.easting,n=e.zoneLetter,s=e.zoneNumber;if(s<0||s>60)return null;var r,o,a,l,h,d,u,f,c,p,m=.9996,v=6378137,g=.00669438,y=(1-Math.sqrt(1-g))/(1+Math.sqrt(1-g)),b=i-5e5,w=t;n<"N"&&(w-=1e7),f=6*(s-1)-180+3,r=g/(1-g),u=w/m,c=u/(v*(1-g/4-3*g*g/64-5*g*g*g/256)),p=c+(3*y/2-27*y*y*y/32)*Math.sin(2*c)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*c)+151*y*y*y/96*Math.sin(6*c),o=v/Math.sqrt(1-g*Math.sin(p)*Math.sin(p)),a=Math.tan(p)*Math.tan(p),l=r*Math.cos(p)*Math.cos(p),h=v*(1-g)/Math.pow(1-g*Math.sin(p)*Math.sin(p),1.5),d=b/(o*m);var _=p-o*Math.tan(p)/h*(d*d/2-(5+3*a+10*l-4*l*l-9*r)*d*d*d*d/24+(61+90*a+298*l+45*a*a-252*r-3*l*l)*d*d*d*d*d*d/720);_=H(_);var x=(d-(1+2*a+l)*d*d*d/6+(5-2*l+28*a-3*l*l+8*r+24*a*a)*d*d*d*d*d/120)/Math.cos(p);x=f+H(x);var k;if(e.accuracy){var C=U({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});k={top:C.lat,right:C.lon,bottom:_,left:x}}else k={lat:_,lon:x};return k}function W(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function Y(e,t){var i="00000"+e.easting,n="00000"+e.northing;return e.zoneNumber+e.zoneLetter+V(e.easting,e.northing,e.zoneNumber)+i.substr(i.length-5,t)+n.substr(n.length-5,t)}function V(e,t,i){var n=q(i),s=Math.floor(e/1e5),r=Math.floor(t/1e5)%20;return G(s,r,n)}function q(e){var t=e%Ci;return 0===t&&(t=Ci),t}function G(e,t,i){var n=i-1,s=Si.charCodeAt(n),r=Ti.charCodeAt(n),o=s+e-1,a=r+t,l=!1;o>Pi&&(o=o-Pi+Mi-1,l=!0),(o===Di||s<Di&&o>Di||(o>Di||s<Di)&&l)&&o++,(o===Ei||s<Ei&&o>Ei||(o>Ei||s<Ei)&&l)&&(o++,o===Di&&o++),o>Pi&&(o=o-Pi+Mi-1),a>Oi?(a=a-Oi+Mi-1,l=!0):l=!1,(a===Di||r<Di&&a>Di||(a>Di||r<Di)&&l)&&a++,(a===Ei||r<Ei&&a>Ei||(a>Ei||r<Ei)&&l)&&(a++,a===Di&&a++),a>Oi&&(a=a-Oi+Mi-1);var h=String.fromCharCode(o)+String.fromCharCode(a);return h}function X(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,i=e.length,n=null,s="",r=0;!/[A-Z]/.test(t=e.charAt(r));){if(r>=2)throw"MGRSPoint bad conversion from: "+e;s+=t,r++}var o=parseInt(s,10);if(0===r||r+3>i)throw"MGRSPoint bad conversion from: "+e;var a=e.charAt(r++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+e;n=e.substring(r,r+=2);for(var l=q(o),h=Z(n.charAt(0),l),d=K(n.charAt(1),l);d<Q(a);)d+=2e6;var u=i-r;if(u%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var f,c,p,m,v,g=u/2,y=0,b=0;return g>0&&(f=1e5/Math.pow(10,g),c=e.substring(r,r+g),y=parseFloat(c)*f,p=e.substring(r+g),b=parseFloat(p)*f),m=y+h,v=b+d,{easting:m,northing:v,zoneLetter:a,zoneNumber:o,accuracy:f}}function Z(e,t){for(var i=Si.charCodeAt(t-1),n=1e5,s=!1;i!==e.charCodeAt(0);){if(i++,i===Di&&i++,i===Ei&&i++,i>Pi){if(s)throw"Bad character: "+e;i=Mi,s=!0}n+=1e5}return n}function K(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var i=Ti.charCodeAt(t-1),n=0,s=!1;i!==e.charCodeAt(0);){if(i++,i===Di&&i++,i===Ei&&i++,i>Oi){if(s)throw"Bad character: "+e;i=Mi,s=!0}n+=1e5}return n}function Q(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function J(e,t,i){if(!(this instanceof J))return new J(e,t,i);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"==typeof e)this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&"undefined"==typeof t){var n=e.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=e,this.y=t,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function ee(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Vi(this.es),this.ml0=qi(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function te(e){var t,i,n,s=e.x,r=e.y,o=oi(s-this.long0),a=Math.sin(r),l=Math.cos(r);if(this.es){var h=l*o,d=Math.pow(h,2),u=this.ep2*Math.pow(l,2),f=Math.pow(u,2),c=Math.abs(l)>At?Math.tan(r):0,p=Math.pow(c,2),m=Math.pow(p,2);t=1-this.es*Math.pow(a,2),h/=Math.sqrt(t);var v=qi(r,a,l,this.en);i=this.a*(this.k0*h*(1+d/6*(1-p+u+d/20*(5-18*p+m+14*u-58*p*u+d/42*(61+179*m-m*p-479*p)))))+this.x0,n=this.a*(this.k0*(v-this.ml0+a*o*h/2*(1+d/12*(5-p+9*u+4*f+d/30*(61+m-58*p+270*u-330*p*u+d/56*(1385+543*m-m*p-3111*p))))))+this.y0}else{var g=l*Math.sin(o);if(Math.abs(Math.abs(g)-1)<At)return 93;if(i=.5*this.a*this.k0*Math.log((1+g)/(1-g))+this.x0,n=l*Math.cos(o)/Math.sqrt(1-Math.pow(g,2)),g=Math.abs(n),g>=1){if(g-1>At)return 93;n=0}else n=Math.acos(n);r<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return e.x=i,e.y=n,e}function ie(e){var t,i,n,s,r=(e.x-this.x0)*(1/this.a),o=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+o/this.k0,i=Xi(t,this.es,this.en),Math.abs(i)<Et){var a=Math.sin(i),l=Math.cos(i),h=Math.abs(l)>At?Math.tan(i):0,d=this.ep2*Math.pow(l,2),u=Math.pow(d,2),f=Math.pow(h,2),c=Math.pow(f,2);t=1-this.es*Math.pow(a,2);var p=r*Math.sqrt(t)/this.k0,m=Math.pow(p,2);t*=h,n=i-t*m/(1-this.es)*.5*(1-m/12*(5+3*f-9*d*f+d-4*u-m/30*(61+90*f-252*d*f+45*c+46*d-m/56*(1385+3633*f+4095*c+1574*c*f)))),s=oi(this.long0+p*(1-m/6*(1+2*f+d-m/20*(5+28*f+24*c+8*d*f+6*d-m/42*(61+662*f+1320*c+720*c*f))))/l)}else n=Et*ri(o),s=0;else{var v=Math.exp(r/this.k0),g=.5*(v-1/v),y=this.lat0+o/this.k0,b=Math.cos(y);t=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(g,2))),n=Math.asin(t),o<0&&(n=-n),s=0===g&&0===b?0:oi(Math.atan2(g,b)+this.long0)}return e.x=s,e.y=n,e}function ne(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),i=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),i*=t,this.cgb[1]=i*(7/3+t*(-1.6+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=i*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),i*=t,this.cgb[2]=i*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=i*(-26/15+t*(34/21+t*(1.6+t*(-12686/2835)))),i*=t,this.cgb[3]=i*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=i*(1237/630+t*(-2.4+t*(-24832/14175))),i*=t,this.cgb[4]=i*(4174/315+t*(-144838/6237)),this.cbg[4]=i*(-734/315+t*(109598/31185)),i*=t,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+i*(.25+i*(1/64+i/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=i*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=i*(13/48+t*(-.6+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),i*=t,this.utg[2]=i*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=i*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),i*=t,this.utg[3]=i*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=i*(49561/161280+t*(-179/168+t*(6601661/7257600))),i*=t,this.utg[4]=i*(-4583/161280+t*(108847/3991680)),this.gtu[4]=i*(34729/80640+t*(-3418889/1995840)),i*=t,this.utg[5]=i*-.03233083094085698,this.gtu[5]=.6650675310896665*i;var n=nn(this.cbg,this.lat0);this.Zb=-this.Qn*(n+sn(this.gtu,2*n))}function se(e){var t=oi(e.x-this.long0),i=e.y;i=nn(this.cbg,i);var n=Math.sin(i),s=Math.cos(i),r=Math.sin(t),o=Math.cos(t);i=Math.atan2(n,o*s),t=Math.atan2(r*s,Ji(n,s*o)),t=tn(Math.tan(t));var a=on(this.gtu,2*i,2*t);i+=a[0],t+=a[1];var l,h;return Math.abs(t)<=2.623395162778?(l=this.a*(this.Qn*t)+this.x0,h=this.a*(this.Qn*i+this.Zb)+this.y0):(l=1/0,h=1/0),e.x=l,e.y=h,e}function re(e){var t=(e.x-this.x0)*(1/this.a),i=(e.y-this.y0)*(1/this.a);i=(i-this.Zb)/this.Qn,t/=this.Qn;var n,s;if(Math.abs(t)<=2.623395162778){var r=on(this.utg,2*i,2*t);i+=r[0],t+=r[1],t=Math.atan(Qi(t));var o=Math.sin(i),a=Math.cos(i),l=Math.sin(t),h=Math.cos(t);i=Math.atan2(o*h,Ji(l,h*a)),t=Math.atan2(l,h*a),n=oi(t+this.long0),s=nn(this.cgb,i)}else n=1/0,s=1/0;return e.x=n,e.y=s,e}function oe(){var e=hn(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*Nt,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,ln.init.apply(this),this.forward=ln.forward,this.inverse=ln.inverse}function ae(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Rt)/(Math.pow(Math.tan(.5*this.lat0+Rt),this.C)*cn(this.e*e,this.ratexp))}function le(e){var t=e.x,i=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+Rt),this.C)*cn(this.e*Math.sin(i),this.ratexp))-Et,e.x=this.C*t,e}function he(e){for(var t=1e-14,i=e.x/this.C,n=e.y,s=Math.pow(Math.tan(.5*n+Rt)/this.K,1/this.C),r=pn;r>0&&(n=2*Math.atan(s*cn(this.e*Math.sin(e.y),-.5*this.e))-Et,!(Math.abs(n-e.y)<t));--r)e.y=n;return r?(e.x=i,e.y=n,e):null}function de(){vn.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function ue(e){var t,i,n,s;return e.x=oi(e.x-this.long0),vn.forward.apply(this,[e]),t=Math.sin(e.y),i=Math.cos(e.y),n=Math.cos(e.x),s=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*i*n),e.x=s*i*Math.sin(e.x),e.y=s*(this.cosc0*t-this.sinc0*i*n),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function fe(e){var t,i,n,s,r;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,r=Math.sqrt(e.x*e.x+e.y*e.y)){var o=2*Math.atan2(r,this.R2);t=Math.sin(o),i=Math.cos(o),s=Math.asin(i*this.sinc0+e.y*t*this.cosc0/r),n=Math.atan2(e.x*t,r*this.cosc0*i-e.y*this.sinc0*t)}else s=this.phic0,n=0;return e.x=n,e.y=s,vn.inverse.apply(this,[e]),e.x=oi(e.x+this.long0),e}function ce(e,t,i){return t*=i,Math.tan(.5*(Et+e))*Math.pow((1-t)/(1+t),.5*i)}function pe(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=At&&(this.k0=.5*(1+ri(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=At&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=At&&(this.k0=.5*this.cons*si(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ai(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=si(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Et,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function me(e){var t,i,n,s,r,o,a=e.x,l=e.y,h=Math.sin(l),d=Math.cos(l),u=oi(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=At&&Math.abs(l+this.lat0)<=At?(e.x=NaN,e.y=NaN,e):this.sphere?(t=2*this.k0/(1+this.sinlat0*h+this.coslat0*d*Math.cos(u)),e.x=this.a*t*d*Math.sin(u)+this.x0,e.y=this.a*t*(this.coslat0*h-this.sinlat0*d*Math.cos(u))+this.y0,e):(i=2*Math.atan(this.ssfn_(l,h,this.e))-Et,s=Math.cos(i),n=Math.sin(i),Math.abs(this.coslat0)<=At?(r=ai(this.e,l*this.con,this.con*h),o=2*this.a*this.k0*r/this.cons,e.x=this.x0+o*Math.sin(a-this.long0),e.y=this.y0-this.con*o*Math.cos(a-this.long0),e):(Math.abs(this.sinlat0)<At?(t=2*this.a*this.k0/(1+s*Math.cos(u)),e.y=t*n):(t=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*s*Math.cos(u))),e.y=t*(this.cosX0*n-this.sinX0*s*Math.cos(u))+this.y0),e.x=t*s*Math.sin(u)+this.x0,e))}function ve(e){e.x-=this.x0,e.y-=this.y0;var t,i,n,s,r,o=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var a=2*Math.atan(o/(.5*this.a*this.k0));return t=this.long0,i=this.lat0,o<=At?(e.x=t,e.y=i,e):(i=Math.asin(Math.cos(a)*this.sinlat0+e.y*Math.sin(a)*this.coslat0/o),t=oi(Math.abs(this.coslat0)<At?this.lat0>0?this.long0+Math.atan2(e.x,-1*e.y):this.long0+Math.atan2(e.x,e.y):this.long0+Math.atan2(e.x*Math.sin(a),o*this.coslat0*Math.cos(a)-e.y*this.sinlat0*Math.sin(a))),e.x=t,e.y=i,e)}if(Math.abs(this.coslat0)<=At){if(o<=At)return i=this.lat0,t=this.long0,e.x=t,e.y=i,e;e.x*=this.con,e.y*=this.con,n=o*this.cons/(2*this.a*this.k0),i=this.con*li(this.e,n),t=this.con*oi(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else s=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,o<=At?r=this.X0:(r=Math.asin(Math.cos(s)*this.sinX0+e.y*Math.sin(s)*this.cosX0/o),t=oi(this.long0+Math.atan2(e.x*Math.sin(s),o*this.cosX0*Math.cos(s)-e.y*this.sinX0*Math.sin(s)))),i=-1*li(this.e,Math.tan(.5*(Et+r)));return e.x=t,e.y=i,e}function ge(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),i=this.a,n=this.rf,s=1/n,r=2*s-Math.pow(s,2),o=this.e=Math.sqrt(r);this.R=this.k0*i*Math.sqrt(1-r)/(1-r*Math.pow(t,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+e/2)),h=Math.log((1+o*t)/(1-o*t));this.K=a-this.alpha*l+this.alpha*o/2*h}function ye(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),n=-this.alpha*(t+i)+this.K,s=2*(Math.atan(Math.exp(n))-Math.PI/4),r=this.alpha*(e.x-this.lambda0),o=Math.atan(Math.sin(r)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(r))),a=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(r));return e.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,e.x=this.R*o+this.x0,e}function be(e){for(var t=e.x-this.x0,i=e.y-this.y0,n=t/this.R,s=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),r=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(n)),o=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(s))),a=this.lambda0+o/this.alpha,l=0,h=r,d=-1e3,u=0;Math.abs(h-d)>1e-7;){if(++u>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+r/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),d=h,h=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=a,e.y=h,e}function we(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var e=Math.sin(this.lat0),t=Math.cos(this.lat0),i=this.e*e;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(t,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-i*i);var n=ai(this.e,this.lat0,e),s=this.bl/t*Math.sqrt((1-this.es)/(1-i*i));s*s<1&&(s=1);var r,o;if(isNaN(this.longc)){var a=ai(this.e,this.lat1,Math.sin(this.lat1)),l=ai(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(s+Math.sqrt(s*s-1))*Math.pow(n,this.bl):this.el=(s-Math.sqrt(s*s-1))*Math.pow(n,this.bl);var h=Math.pow(a,this.bl),d=Math.pow(l,this.bl);r=this.el/h,o=.5*(r-1/r);var u=(this.el*this.el-d*h)/(this.el*this.el+d*h),f=(d-h)/(d+h),c=oi(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(u*Math.tan(.5*this.bl*c)/f)/this.bl,this.long0=oi(this.long0);var p=oi(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*p)/o),this.alpha=Math.asin(s*Math.sin(this.gamma0))}else r=this.lat0>=0?s+Math.sqrt(s*s-1):s-Math.sqrt(s*s-1),this.el=r*Math.pow(n,this.bl),o=.5*(r-1/r),this.gamma0=Math.asin(Math.sin(this.alpha)/s),this.long0=this.longc-Math.asin(o*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(s*s-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(s*s-1),Math.cos(this.alpha))}function _e(e){var t,i,n,s=e.x,r=e.y,o=oi(s-this.long0);if(Math.abs(Math.abs(r)-Et)<=At)n=r>0?-1:1,i=this.al/this.bl*Math.log(Math.tan(Rt+n*this.gamma0*.5)),t=-1*n*Et*this.al/this.bl;else{var a=ai(this.e,r,Math.sin(r)),l=this.el/Math.pow(a,this.bl),h=.5*(l-1/l),d=.5*(l+1/l),u=Math.sin(this.bl*o),f=(h*Math.sin(this.gamma0)-u*Math.cos(this.gamma0))/d;i=Math.abs(Math.abs(f)-1)<=At?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-f)/(1+f))/this.bl,t=Math.abs(Math.cos(this.bl*o))<=At?this.al*this.bl*o:this.al*Math.atan2(h*Math.cos(this.gamma0)+u*Math.sin(this.gamma0),Math.cos(this.bl*o))/this.bl}return this.no_rot?(e.x=this.x0+t,e.y=this.y0+i):(t-=this.uc,e.x=this.x0+i*Math.cos(this.alpha)+t*Math.sin(this.alpha),e.y=this.y0+t*Math.cos(this.alpha)-i*Math.sin(this.alpha)),e}function xe(e){var t,i;this.no_rot?(i=e.y-this.y0,t=e.x-this.x0):(i=(e.x-this.x0)*Math.cos(this.alpha)-(e.y-this.y0)*Math.sin(this.alpha),t=(e.y-this.y0)*Math.cos(this.alpha)+(e.x-this.x0)*Math.sin(this.alpha),t+=this.uc);var n=Math.exp(-1*this.bl*i/this.al),s=.5*(n-1/n),r=.5*(n+1/n),o=Math.sin(this.bl*t/this.al),a=(o*Math.cos(this.gamma0)+s*Math.sin(this.gamma0))/r,l=Math.pow(this.el/Math.sqrt((1+a)/(1-a)),1/this.bl);return Math.abs(a-1)<At?(e.x=this.long0,e.y=Et):Math.abs(a+1)<At?(e.x=this.long0,e.y=-1*Et):(e.y=li(this.e,l),e.x=oi(this.long0-Math.atan2(s*Math.cos(this.gamma0)-o*Math.sin(this.gamma0),Math.cos(this.bl*t/this.al))/this.bl)),e}function ke(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<At)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),i=Math.cos(this.lat1),n=si(this.e,t,i),s=ai(this.e,this.lat1,t),r=Math.sin(this.lat2),o=Math.cos(this.lat2),a=si(this.e,r,o),l=ai(this.e,this.lat2,r),h=ai(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>At?this.ns=Math.log(n/a)/Math.log(s/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function Ce(e){var t=e.x,i=e.y;Math.abs(2*Math.abs(i)-Math.PI)<=At&&(i=ri(i)*(Et-2*At));var n,s,r=Math.abs(Math.abs(i)-Et);if(r>At)n=ai(this.e,i,Math.sin(i)),s=this.a*this.f0*Math.pow(n,this.ns);else{if(r=i*this.ns,r<=0)return null;s=0}var o=this.ns*oi(t-this.long0);return e.x=this.k0*(s*Math.sin(o))+this.x0,e.y=this.k0*(this.rh-s*Math.cos(o))+this.y0,e}function Se(e){var t,i,n,s,r,o=(e.x-this.x0)/this.k0,a=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(o*o+a*a),i=1):(t=-Math.sqrt(o*o+a*a),i=-1);var l=0;if(0!==t&&(l=Math.atan2(i*o,i*a)),0!==t||this.ns>0){if(i=1/this.ns,n=Math.pow(t/(this.a*this.f0),i),s=li(this.e,n),s===-9999)return null}else s=-Et;return r=oi(l/this.ns+this.long0),e.x=r,e.y=s,e}function Te(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Me(e){var t,i,n,s,r,o,a,l=e.x,h=e.y,d=oi(l-this.long0);return t=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/t)-this.s45),n=-d*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),r=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(s)),o=this.n*r,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),e.y=a*Math.cos(o)/1,e.x=a*Math.sin(o)/1,this.czech||(e.y*=-1,e.x*=-1),e}function De(e){var t,i,n,s,r,o,a,l,h=e.x;e.x=e.y,e.y=h,this.czech||(e.y*=-1,e.x*=-1),o=Math.sqrt(e.x*e.x+e.y*e.y),r=Math.atan2(e.y,e.x),s=r/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(s)),i=Math.asin(Math.cos(n)*Math.sin(s)/Math.cos(t)),e.x=this.long0-i/this.alfa,a=t,l=0;var d=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-e.y)<1e-10&&(l=1),a=e.y,d+=1;while(0===l&&d<15);return d>=15?null:e}function Ee(){this.sphere||(this.e0=On(this.es),this.e1=Pn(this.es),this.e2=In(this.es),this.e3=An(this.es),this.ml0=this.a*En(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Oe(e){var t,i,n=e.x,s=e.y;if(n=oi(n-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(s)*Math.sin(n)),i=this.a*(Math.atan2(Math.tan(s),Math.cos(n))-this.lat0);else{var r=Math.sin(s),o=Math.cos(s),a=Nn(this.a,this.e,r),l=Math.tan(s)*Math.tan(s),h=n*Math.cos(s),d=h*h,u=this.es*o*o/(1-this.es),f=this.a*En(this.e0,this.e1,this.e2,this.e3,s);t=a*h*(1-d*l*(1/6-(8-l+8*u)*d/120)),i=f-this.ml0+a*r/o*d*(.5+(5-l+6*u)*d/24)}return e.x=t+this.x0,e.y=i+this.y0,e}function Pe(e){e.x-=this.x0,e.y-=this.y0;var t,i,n=e.x/this.a,s=e.y/this.a;if(this.sphere){var r=s+this.lat0;t=Math.asin(Math.sin(r)*Math.cos(n)),i=Math.atan2(Math.tan(n),Math.cos(r))}else{var o=this.ml0/this.a+s,a=Rn(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-Et)<=At)return e.x=this.long0,e.y=Et,s<0&&(e.y*=-1),e;var l=Nn(this.a,this.e,Math.sin(a)),h=l*l*l/this.a/this.a*(1-this.es),d=Math.pow(Math.tan(a),2),u=n*this.a/l,f=u*u;t=a-l*Math.tan(a)/h*u*u*(.5-(1+3*d)*u*u/24),i=u*(1-f*(d/3+(1+3*d)*d*f/15))/Math.cos(a)}return e.x=oi(i+this.long0),e.y=Fn(t),e}function Ie(){var e=Math.abs(this.lat0);if(Math.abs(e-Et)<At?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<At?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=zn(this.e,1),this.mmf=.5/(1-this.es),this.apa=Fe(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=zn(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Ae(e){var t,i,n,s,r,o,a,l,h,d,u=e.x,f=e.y;if(u=oi(u-this.long0),this.sphere){if(r=Math.sin(f),d=Math.cos(f),n=Math.cos(u),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i=this.mode===this.EQUIT?1+d*n:1+this.sinph0*r+this.cosph0*d*n,i<=At)return null;i=Math.sqrt(2/i),t=i*d*Math.sin(u),i*=this.mode===this.EQUIT?r:this.cosph0*r-this.sinph0*d*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(f+this.phi0)<At)return null;i=Rt-.5*f,i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)),t=i*Math.sin(u),i*=n}}else{switch(a=0,l=0,h=0,n=Math.cos(u),s=Math.sin(u),r=Math.sin(f),o=zn(this.e,r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:h=1+this.sinb1*a+this.cosb1*l*n;break;case this.EQUIT:h=1+l*n;break;case this.N_POLE:h=Et+f,o=this.qp-o;break;case this.S_POLE:h=f-Et,o=this.qp+o}if(Math.abs(h)<At)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),i=this.mode===this.OBLIQ?this.ymf*h*(this.cosb1*a-this.sinb1*l*n):(h=Math.sqrt(2/(1+l*n)))*a*this.ymf,t=this.xmf*h*l*s;break;case this.N_POLE:case this.S_POLE:o>=0?(t=(h=Math.sqrt(o))*s,i=n*(this.mode===this.S_POLE?h:-h)):t=i=0}}return e.x=this.a*t+this.x0,e.y=this.a*i+this.y0,e}function Ne(e){e.x-=this.x0,e.y-=this.y0;var t,i,n,s,r,o,a,l=e.x/this.a,h=e.y/this.a;if(this.sphere){var d,u=0,f=0;if(d=Math.sqrt(l*l+h*h),i=.5*d,i>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(f=Math.sin(i),u=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(d)<=At?0:Math.asin(h*f/d),l*=f,h=u*d;break;case this.OBLIQ:i=Math.abs(d)<=At?this.phi0:Math.asin(u*this.sinph0+h*f*this.cosph0/d),l*=f*this.cosph0,h=(u-Math.sin(i)*this.sinph0)*d;break;case this.N_POLE:h=-h,i=Et-i;break;case this.S_POLE:i-=Et}t=0!==h||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,h):0}else{if(a=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,h*=this.dd,o=Math.sqrt(l*l+h*h),o<At)return e.x=0,e.y=this.phi0,e;s=2*Math.asin(.5*o/this.rq),n=Math.cos(s),l*=s=Math.sin(s),this.mode===this.OBLIQ?(a=n*this.sinb1+h*s*this.cosb1/o,r=this.qp*a,h=o*this.cosb1*n-h*this.sinb1*s):(a=h*s/o,r=this.qp*a,h=o*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(h=-h),r=l*l+h*h,!r)return e.x=0,e.y=this.phi0,e;a=1-r/this.qp,this.mode===this.S_POLE&&(a=-a)}t=Math.atan2(l,h),i=Re(Math.asin(a),this.apa)}return e.x=oi(this.long0+t),e.y=i,e}function Fe(e){var t,i=[];return i[0]=e*Wn,t=e*e,i[0]+=t*Yn,i[1]=t*qn,t*=e,i[0]+=t*Vn,i[1]+=t*Gn,i[2]=t*Xn,i}function Re(e,t){var i=e+e;return e+t[0]*Math.sin(i)+t[1]*Math.sin(i+i)+t[2]*Math.sin(i+i+i)}function $e(){Math.abs(this.lat1+this.lat2)<At||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=si(this.e3,this.sin_po,this.cos_po),this.qs1=zn(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=si(this.e3,this.sin_po,this.cos_po),this.qs2=zn(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=zn(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>At?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Le(e){var t=e.x,i=e.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=zn(this.e3,this.sin_phi,this.cos_phi),s=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,r=this.ns0*oi(t-this.long0),o=s*Math.sin(r)+this.x0,a=this.rh-s*Math.cos(r)+this.y0;return e.x=o,e.y=a,e}function ze(e){var t,i,n,s,r,o;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1),s=0,0!==t&&(s=Math.atan2(n*e.x,n*e.y)),n=t*this.ns0/this.a,this.sphere?o=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,o=this.phi1z(this.e3,i)),r=oi(s/this.ns0+this.long0),e.x=r,e.y=o,e}function je(e,t){var i,n,s,r,o,a=Qn(.5*t);if(e<At)return a;for(var l=e*e,h=1;h<=25;h++)if(i=Math.sin(a),n=Math.cos(a),s=e*i,r=1-s*s,o=.5*r*r/n*(t/(1-l)-i/r+.5/e*Math.log((1-s)/(1+s))),a+=o,Math.abs(o)<=1e-7)return a;return null}function He(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Be(e){var t,i,n,s,r,o,a,l,h=e.x,d=e.y;return n=oi(h-this.long0),t=Math.sin(d),i=Math.cos(d),s=Math.cos(n),o=this.sin_p14*t+this.cos_p14*i*s,r=1,o>0||Math.abs(o)<=At?(a=this.x0+this.a*r*i*Math.sin(n)/o,l=this.y0+this.a*r*(this.cos_p14*t-this.sin_p14*i*s)/o):(a=this.x0+this.infinity_dist*i*Math.sin(n),l=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*i*s)),e.x=a,e.y=l,e}function Ue(e){var t,i,n,s,r,o;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(s=Math.atan2(t,this.rc),i=Math.sin(s),n=Math.cos(s),o=Qn(n*this.sin_p14+e.y*i*this.cos_p14/t),r=Math.atan2(e.x*i,t*this.cos_p14*n-e.y*this.sin_p14*i),r=oi(this.long0+r)):(o=this.phic0,r=0),e.x=r,e.y=o,e}function We(){this.sphere||(this.k0=si(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Ye(e){var t,i,n=e.x,s=e.y,r=oi(n-this.long0);if(this.sphere)t=this.x0+this.a*r*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var o=zn(this.e,Math.sin(s));t=this.x0+this.a*this.k0*r,i=this.y0+this.a*o*.5/this.k0}return e.x=t,e.y=i,e}function Ve(e){e.x-=this.x0,e.y-=this.y0;var t,i;return this.sphere?(t=oi(this.long0+e.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(i=ns(this.e,2*e.y*this.k0/this.a),t=oi(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=i,e}function qe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Ge(e){var t=e.x,i=e.y,n=oi(t-this.long0),s=Fn(i-this.lat0);return e.x=this.x0+this.a*n*this.rc,e.y=this.y0+this.a*s,e}function Xe(e){var t=e.x,i=e.y;return e.x=oi(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=Fn(this.lat0+(i-this.y0)/this.a),e}function Ze(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=On(this.es),this.e1=Pn(this.es),this.e2=In(this.es),this.e3=An(this.es),this.ml0=this.a*En(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Ke(e){var t,i,n,s=e.x,r=e.y,o=oi(s-this.long0);if(n=o*Math.sin(r),this.sphere)Math.abs(r)<=At?(t=this.a*o,i=-1*this.a*this.lat0):(t=this.a*Math.sin(n)/Math.tan(r),i=this.a*(Fn(r-this.lat0)+(1-Math.cos(n))/Math.tan(r)));else if(Math.abs(r)<=At)t=this.a*o,i=-1*this.ml0;else{var a=Nn(this.a,this.e,Math.sin(r))/Math.tan(r);t=a*Math.sin(n),i=this.a*En(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*(1-Math.cos(n))}return e.x=t+this.x0,e.y=i+this.y0,e}function Qe(e){var t,i,n,s,r,o,a,l,h;if(n=e.x-this.x0,s=e.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=At)t=oi(n/this.a+this.long0),i=0;else{o=this.lat0+s/this.a,a=n*n/this.a/this.a+o*o,l=o;var d;for(r=ls;r;--r)if(d=Math.tan(l),h=-1*(o*(l*d+1)-l-.5*(l*l+a)*d)/((l-o)/d-1),l+=h,Math.abs(h)<=At){i=l;break}t=oi(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(i))}else if(Math.abs(s+this.ml0)<=At)i=0,t=oi(this.long0+n/this.a);else{o=(this.ml0+s)/this.a,a=n*n/this.a/this.a+o*o,l=o;var u,f,c,p,m;for(r=ls;r;--r)if(m=this.e*Math.sin(l),u=Math.sqrt(1-m*m)*Math.tan(l),f=this.a*En(this.e0,this.e1,this.e2,this.e3,l),
c=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),p=f/this.a,h=(o*(u*p+1)-p-.5*u*(p*p+a))/(this.es*Math.sin(2*l)*(p*p+a-2*o*p)/(4*u)+(o-p)*(u*c-2/Math.sin(2*l))-c),l-=h,Math.abs(h)<=At){i=l;break}u=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),t=oi(this.long0+Math.asin(n*u/this.a)/Math.sin(i))}return e.x=t,e.y=i,e}function Je(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function et(e){var t,i=e.x,n=e.y,s=n-this.lat0,r=i-this.long0,o=s/Dt*1e-5,a=r,l=1,h=0;for(t=1;t<=10;t++)l*=o,h+=this.A[t]*l;var d,u,f=h,c=a,p=1,m=0,v=0,g=0;for(t=1;t<=6;t++)d=p*f-m*c,u=m*f+p*c,p=d,m=u,v=v+this.B_re[t]*p-this.B_im[t]*m,g=g+this.B_im[t]*p+this.B_re[t]*m;return e.x=g*this.a+this.x0,e.y=v*this.a+this.y0,e}function tt(e){var t,i,n,s=e.x,r=e.y,o=s-this.x0,a=r-this.y0,l=a/this.a,h=o/this.a,d=1,u=0,f=0,c=0;for(t=1;t<=6;t++)i=d*l-u*h,n=u*l+d*h,d=i,u=n,f=f+this.C_re[t]*d-this.C_im[t]*u,c=c+this.C_im[t]*d+this.C_re[t]*u;for(var p=0;p<this.iterations;p++){var m,v,g=f,y=c,b=l,w=h;for(t=2;t<=6;t++)m=g*f-y*c,v=y*f+g*c,g=m,y=v,b+=(t-1)*(this.B_re[t]*g-this.B_im[t]*y),w+=(t-1)*(this.B_im[t]*g+this.B_re[t]*y);g=1,y=0;var _=this.B_re[1],x=this.B_im[1];for(t=2;t<=6;t++)m=g*f-y*c,v=y*f+g*c,g=m,y=v,_+=t*(this.B_re[t]*g-this.B_im[t]*y),x+=t*(this.B_im[t]*g+this.B_re[t]*y);var k=_*_+x*x;f=(b*_+w*x)/k,c=(w*_-b*x)/k}var C=f,S=c,T=1,M=0;for(t=1;t<=9;t++)T*=C,M+=this.D[t]*T;var D=this.lat0+M*Dt*1e5,E=this.long0+S;return e.x=E,e.y=D,e}function it(){}function nt(e){var t=e.x,i=e.y,n=oi(t-this.long0),s=this.x0+this.a*n,r=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return e.x=s,e.y=r,e}function st(e){e.x-=this.x0,e.y-=this.y0;var t=oi(this.long0+e.x/this.a),i=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=i,e}function rt(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Vi(this.es)}function ot(e){var t,i,n=e.x,s=e.y;if(n=oi(n-this.long0),this.sphere){if(this.m)for(var r=this.n*Math.sin(s),o=ms;o;--o){var a=(this.m*s+Math.sin(s)-r)/(this.m+Math.cos(s));if(s-=a,Math.abs(a)<At)break}else s=1!==this.n?Math.asin(this.n*Math.sin(s)):s;t=this.a*this.C_x*n*(this.m+Math.cos(s)),i=this.a*this.C_y*s}else{var l=Math.sin(s),h=Math.cos(s);i=this.a*qi(s,l,h,this.en),t=this.a*n*h/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=i,e}function at(e){var t,i,n,s;return e.x-=this.x0,n=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,n/=this.C_x*(this.m+Math.cos(t)),this.m?t=Qn((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=Qn(Math.sin(t)/this.n)),n=oi(n+this.long0),t=Fn(t)):(t=Xi(e.y/this.a,this.es,this.en),s=Math.abs(t),s<Et?(s=Math.sin(t),i=this.long0+e.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(t)),n=oi(i)):s-At<Et&&(n=this.long0)),e.x=n,e.y=t,e}function lt(){}function ht(e){for(var t=e.x,i=e.y,n=oi(t-this.long0),s=i,r=Math.PI*Math.sin(i),o=0;!0;o++){var a=-(s+Math.sin(s)-r)/(1+Math.cos(s));if(s+=a,Math.abs(a)<At)break}s/=2,Math.PI/2-Math.abs(i)<At&&(n=0);var l=.900316316158*this.a*n*Math.cos(s)+this.x0,h=1.4142135623731*this.a*Math.sin(s)+this.y0;return e.x=l,e.y=h,e}function dt(e){var t,i;e.x-=this.x0,e.y-=this.y0,i=e.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),t=Math.asin(i);var n=oi(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),i=(2*t+Math.sin(2*t))/Math.PI,Math.abs(i)>1&&(i=1);var s=Math.asin(i);return e.x=n,e.y=s,e}function ut(){Math.abs(this.lat1+this.lat2)<At||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=On(this.es),this.e1=Pn(this.es),this.e2=In(this.es),this.e3=An(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=si(this.e,this.sinphi,this.cosphi),this.ml1=En(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<At?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=si(this.e,this.sinphi,this.cosphi),this.ml2=En(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=En(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function ft(e){var t,i=e.x,n=e.y;if(this.sphere)t=this.a*(this.g-n);else{var s=En(this.e0,this.e1,this.e2,this.e3,n);t=this.a*(this.g-s)}var r=this.ns*oi(i-this.long0),o=this.x0+t*Math.sin(r),a=this.y0+this.rh-t*Math.cos(r);return e.x=o,e.y=a,e}function ct(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,i,n,s;this.ns>=0?(i=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(i=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var r=0;if(0!==i&&(r=Math.atan2(t*e.x,t*e.y)),this.sphere)return s=oi(this.long0+r/this.ns),n=Fn(this.g-i/this.a),e.x=s,e.y=n,e;var o=this.g-i/this.a;return n=Rn(o,this.e0,this.e1,this.e2,this.e3),s=oi(this.long0+r/this.ns),e.x=s,e.y=n,e}function pt(){this.R=this.a}function mt(e){var t,i,n=e.x,s=e.y,r=oi(n-this.long0);Math.abs(s)<=At&&(t=this.x0+this.R*r,i=this.y0);var o=Qn(2*Math.abs(s/Math.PI));(Math.abs(r)<=At||Math.abs(Math.abs(s)-Et)<=At)&&(t=this.x0,i=s>=0?this.y0+Math.PI*this.R*Math.tan(.5*o):this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/r-r/Math.PI),l=a*a,h=Math.sin(o),d=Math.cos(o),u=d/(h+d-1),f=u*u,c=u*(2/h-1),p=c*c,m=Math.PI*this.R*(a*(u-p)+Math.sqrt(l*(u-p)*(u-p)-(p+l)*(f-p)))/(p+l);r<0&&(m=-m),t=this.x0+m;var v=l+u;return m=Math.PI*this.R*(c*v-a*Math.sqrt((p+l)*(l+1)-v*v))/(p+l),i=s>=0?this.y0+m:this.y0-m,e.x=t,e.y=i,e}function vt(e){var t,i,n,s,r,o,a,l,h,d,u,f,c;return e.x-=this.x0,e.y-=this.y0,u=Math.PI*this.R,n=e.x/u,s=e.y/u,r=n*n+s*s,o=-Math.abs(s)*(1+r),a=o-2*s*s+n*n,l=-2*o+1+2*s*s+r*r,c=s*s/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,h=(o-a*a/3/l)/l,d=2*Math.sqrt(-h/3),u=3*c/h/d,Math.abs(u)>1&&(u=u>=0?1:-1),f=Math.acos(u)/3,i=e.y>=0?(-d*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI:-(-d*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI,t=Math.abs(n)<At?this.long0:oi(this.long0+Math.PI*(r-1+Math.sqrt(1+2*(n*n-s*s)+r*r))/2/n),e.x=t,e.y=i,e}function gt(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function yt(e){var t,i,n,s,r,o,a,l,h,d,u,f,c,p,m,v,g,y,b,w,_,x,k,C=e.x,S=e.y,T=Math.sin(e.y),M=Math.cos(e.y),D=oi(C-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=At?(e.x=this.x0+this.a*(Et-S)*Math.sin(D),e.y=this.y0-this.a*(Et-S)*Math.cos(D),e):Math.abs(this.sin_p12+1)<=At?(e.x=this.x0+this.a*(Et+S)*Math.sin(D),e.y=this.y0+this.a*(Et+S)*Math.cos(D),e):(y=this.sin_p12*T+this.cos_p12*M*Math.cos(D),v=Math.acos(y),g=v/Math.sin(v),e.x=this.x0+this.a*g*M*Math.sin(D),e.y=this.y0+this.a*g*(this.cos_p12*T-this.sin_p12*M*Math.cos(D)),e):(t=On(this.es),i=Pn(this.es),n=In(this.es),s=An(this.es),Math.abs(this.sin_p12-1)<=At?(r=this.a*En(t,i,n,s,Et),o=this.a*En(t,i,n,s,S),e.x=this.x0+(r-o)*Math.sin(D),e.y=this.y0-(r-o)*Math.cos(D),e):Math.abs(this.sin_p12+1)<=At?(r=this.a*En(t,i,n,s,Et),o=this.a*En(t,i,n,s,S),e.x=this.x0+(r+o)*Math.sin(D),e.y=this.y0+(r+o)*Math.cos(D),e):(a=T/M,l=Nn(this.a,this.e,this.sin_p12),h=Nn(this.a,this.e,T),d=Math.atan((1-this.es)*a+this.es*l*this.sin_p12/(h*M)),u=Math.atan2(Math.sin(D),this.cos_p12*Math.tan(d)-this.sin_p12*Math.cos(D)),b=0===u?Math.asin(this.cos_p12*Math.sin(d)-this.sin_p12*Math.cos(d)):Math.abs(Math.abs(u)-Math.PI)<=At?-Math.asin(this.cos_p12*Math.sin(d)-this.sin_p12*Math.cos(d)):Math.asin(Math.sin(D)*Math.cos(d)/Math.sin(u)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),c=this.e*this.cos_p12*Math.cos(u)/Math.sqrt(1-this.es),p=f*c,m=c*c,w=b*b,_=w*b,x=_*b,k=x*b,v=l*b*(1-w*m*(1-m)/6+_/8*p*(1-2*m)+x/120*(m*(4-7*m)-3*f*f*(1-7*m))-k/48*p),e.x=this.x0+v*Math.sin(u),e.y=this.y0+v*Math.cos(u),e))}function bt(e){e.x-=this.x0,e.y-=this.y0;var t,i,n,s,r,o,a,l,h,d,u,f,c,p,m,v,g,y,b,w,_,x,k;if(this.sphere){if(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*Et*this.a)return;return i=t/this.a,n=Math.sin(i),s=Math.cos(i),r=this.long0,Math.abs(t)<=At?o=this.lat0:(o=Qn(s*this.sin_p12+e.y*n*this.cos_p12/t),a=Math.abs(this.lat0)-Et,r=oi(Math.abs(a)<=At?this.lat0>=0?this.long0+Math.atan2(e.x,-e.y):this.long0-Math.atan2(-e.x,e.y):this.long0+Math.atan2(e.x*n,t*this.cos_p12*s-e.y*this.sin_p12*n))),e.x=r,e.y=o,e}return l=On(this.es),h=Pn(this.es),d=In(this.es),u=An(this.es),Math.abs(this.sin_p12-1)<=At?(f=this.a*En(l,h,d,u,Et),t=Math.sqrt(e.x*e.x+e.y*e.y),c=f-t,o=Rn(c/this.a,l,h,d,u),r=oi(this.long0+Math.atan2(e.x,-1*e.y)),e.x=r,e.y=o,e):Math.abs(this.sin_p12+1)<=At?(f=this.a*En(l,h,d,u,Et),t=Math.sqrt(e.x*e.x+e.y*e.y),c=t-f,o=Rn(c/this.a,l,h,d,u),r=oi(this.long0+Math.atan2(e.x,e.y)),e.x=r,e.y=o,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),v=Math.atan2(e.x,e.y),p=Nn(this.a,this.e,this.sin_p12),g=Math.cos(v),y=this.e*this.cos_p12*g,b=-y*y/(1-this.es),w=3*this.es*(1-b)*this.sin_p12*this.cos_p12*g/(1-this.es),_=t/p,x=_-b*(1+b)*Math.pow(_,3)/6-w*(1+3*b)*Math.pow(_,4)/24,k=1-b*x*x/2-_*x*x*x/6,m=Math.asin(this.sin_p12*Math.cos(x)+this.cos_p12*Math.sin(x)*g),r=oi(this.long0+Math.asin(Math.sin(v)*Math.sin(x)/Math.cos(m))),o=Math.atan((1-this.es*k*this.sin_p12/Math.sin(m))*Math.tan(m)/(1-this.es)),e.x=r,e.y=o,e)}function wt(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function _t(e){var t,i,n,s,r,o,a,l,h=e.x,d=e.y;return n=oi(h-this.long0),t=Math.sin(d),i=Math.cos(d),s=Math.cos(n),o=this.sin_p14*t+this.cos_p14*i*s,r=1,(o>0||Math.abs(o)<=At)&&(a=this.a*r*i*Math.sin(n),l=this.y0+this.a*r*(this.cos_p14*t-this.sin_p14*i*s)),e.x=a,e.y=l,e}function xt(e){var t,i,n,s,r,o,a;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),i=Qn(t/this.a),n=Math.sin(i),s=Math.cos(i),o=this.long0,Math.abs(t)<=At?(a=this.lat0,e.x=o,e.y=a,e):(a=Qn(s*this.sin_p14+e.y*n*this.cos_p14/t),r=Math.abs(this.lat0)-Et,Math.abs(r)<=At?(o=oi(this.lat0>=0?this.long0+Math.atan2(e.x,-e.y):this.long0-Math.atan2(-e.x,e.y)),e.x=o,e.y=a,e):(o=oi(this.long0+Math.atan2(e.x*n,t*this.cos_p14*s-e.y*this.sin_p14*n)),e.x=o,e.y=a,e))}var kt=function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]},Ct=1,St=2,Tt=4,Mt=5,Dt=484813681109536e-20,Et=Math.PI/2,Ot=.16666666666666666,Pt=.04722222222222222,It=.022156084656084655,At="undefined"==typeof Number.EPSILON?1e-10:Number.EPSILON,Nt=.017453292519943295,Ft=57.29577951308232,Rt=Math.PI/4,$t=2*Math.PI,Lt=3.14159265359,zt={};zt.greenwich=0,zt.lisbon=-9.131906111111,zt.paris=2.337229166667,zt.bogota=-74.080916666667,zt.madrid=-3.687938888889,zt.rome=12.452333333333,zt.bern=7.439583333333,zt.jakarta=106.807719444444,zt.ferro=-17.666666666667,zt.brussels=4.367975,zt.stockholm=18.058277777778,zt.athens=23.7163375,zt.oslo=10.722916666667;var jt={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Ht=/[\s_\-\/\(\)]/g,Bt=function(t){var i,n,s,r={},o=t.split("+").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var i=t.split("=");return i.push(!0),e[i[0].toLowerCase()]=i[1],e},{}),a={proj:"projName",datum:"datumCode",rf:function(e){r.rf=parseFloat(e)},lat_0:function(e){r.lat0=e*Nt},lat_1:function(e){r.lat1=e*Nt},lat_2:function(e){r.lat2=e*Nt},lat_ts:function(e){r.lat_ts=e*Nt},lon_0:function(e){r.long0=e*Nt},lon_1:function(e){r.long1=e*Nt},lon_2:function(e){r.long2=e*Nt},alpha:function(e){r.alpha=parseFloat(e)*Nt},lonc:function(e){r.longc=e*Nt},x_0:function(e){r.x0=parseFloat(e)},y_0:function(e){r.y0=parseFloat(e)},k_0:function(e){r.k0=parseFloat(e)},k:function(e){r.k0=parseFloat(e)},a:function(e){r.a=parseFloat(e)},b:function(e){r.b=parseFloat(e)},r_a:function(){r.R_A=!0},zone:function(e){r.zone=parseInt(e,10)},south:function(){r.utmSouth=!0},towgs84:function(e){r.datum_params=e.split(",").map(function(e){return parseFloat(e)})},to_meter:function(e){r.to_meter=parseFloat(e)},units:function(t){r.units=t;var i=e(jt,t);i&&(r.to_meter=i.to_meter)},from_greenwich:function(e){r.from_greenwich=e*Nt},pm:function(t){var i=e(zt,t);r.from_greenwich=(i?i:parseFloat(t))*Nt},nadgrids:function(e){"@null"===e?r.datumCode="none":r.nadgrids=e},axis:function(e){var t="ewnsud";3===e.length&&t.indexOf(e.substr(0,1))!==-1&&t.indexOf(e.substr(1,1))!==-1&&t.indexOf(e.substr(2,1))!==-1&&(r.axis=e)}};for(i in o)n=o[i],i in a?(s=a[i],"function"==typeof s?s(n):r[s]=n):r[i]=n;return"string"==typeof r.datumCode&&"WGS84"!==r.datumCode&&(r.datumCode=r.datumCode.toLowerCase()),r},Ut=1,Wt=2,Yt=3,Vt=4,qt=5,Gt=-1,Xt=/\s/,Zt=/[A-Za-z]/,Kt=/[A-Za-z84]/,Qt=/[,\]]/,Jt=/[\d\.E\-\+]/;t.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==Vt)for(;Xt.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case Ut:return this.neutral(e);case Wt:return this.keyword(e);case Vt:return this.quoted(e);case qt:return this.afterquote(e);case Yt:return this.number(e);case Gt:return}},t.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=Vt);if(Qt.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},t.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=Ut)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=Ut,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=Gt))):void 0},t.prototype.number=function(e){if(Jt.test(e))return void(this.word+=e);if(Qt.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)},t.prototype.quoted=function(e){return'"'===e?void(this.state=qt):void(this.word+=e)},t.prototype.keyword=function(e){if(Kt.test(e))return void(this.word+=e);if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=Ut)}if(Qt.test(e))return void this.afterItem(e);throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place)},t.prototype.neutral=function(e){if(Zt.test(e))return this.word=e,void(this.state=Wt);if('"'===e)return this.word="",void(this.state=Vt);if(Jt.test(e))return this.word=e,void(this.state=Yt);if(Qt.test(e))return void this.afterItem(e);throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place)},t.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Gt)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var ei=.017453292519943295,ti=function(e){var t=i(e),n=t.shift(),r=t.shift();t.unshift(["name",r]),t.unshift(["type",n]);var o={};return s(t,o),a(o),o};kt(l);var ii=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],ni=function(e,t){e=e||{};var i,n;if(!t)return e;for(n in t)i=t[n],void 0!==i&&(e[n]=i);return e},si=function(e,t,i){var n=e*t;return i/Math.sqrt(1-n*n)},ri=function(e){return e<0?-1:1},oi=function(e){return Math.abs(e)<=Lt?e:e-ri(e)*$t},ai=function(e,t,i){var n=e*i,s=.5*e;return n=Math.pow((1-n)/(1+n),s),Math.tan(.5*(Et-t))/n},li=function(e,t){for(var i,n,s=.5*e,r=Et-2*Math.atan(t),o=0;o<=15;o++)if(i=e*Math.sin(r),n=Et-2*Math.atan(t*Math.pow((1-i)/(1+i),s))-r,r+=n,Math.abs(n)<=1e-10)return r;return-9999},hi=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],di={init:p,forward:m,inverse:v,names:hi},ui=["longlat","identity"],fi={init:g,forward:y,inverse:y,names:ui},ci=[di,fi],pi={},mi=[],vi={start:_,add:b,get:w},gi={};gi.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},gi.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},gi.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},gi.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},gi.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},gi.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},gi.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},gi.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},gi.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},gi.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},gi.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},gi.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},gi.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},gi.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},gi.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},gi.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},gi.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},gi.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},gi.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},gi.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},gi.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},gi.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},gi.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},gi.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},gi.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},gi.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},gi.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},gi.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},gi.hough={a:6378270,rf:297,ellipseName:"Hough"},gi.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},gi.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},gi.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},gi.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},gi.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},gi.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},gi.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},gi.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},gi.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},gi.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},gi.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},gi.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var yi=gi.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};gi.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var bi={};bi.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},bi.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},bi.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},bi.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},bi.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},bi.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},bi.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},bi.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},bi.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},bi.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},bi.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},bi.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},bi.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},bi.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},bi.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},bi.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},S.projections=vi,S.projections.start();var wi=function(e,t,i){return T(e,t)?i:e.datum_type===Mt||t.datum_type===Mt?i:e.es!==t.es||e.a!==t.a||P(e.datum_type)||P(t.datum_type)?(i=M(i,e.es,e.a),P(e.datum_type)&&(i=E(i,e.datum_type,e.datum_params)),P(t.datum_type)&&(i=O(i,t.datum_type,t.datum_params)),D(i,t.es,t.a,t.b)):i},_i=function(e,t,i){var n,s,r,o=i.x,a=i.y,l=i.z||0,h={};for(r=0;r<3;r++)if(!t||2!==r||void 0!==i.z)switch(0===r?(n=o,s="x"):1===r?(n=a,s="y"):(n=l,s="z"),e.axis[r]){case"e":h[s]=n;break;case"w":h[s]=-n;break;case"n":h[s]=n;break;case"s":h[s]=-n;break;case"u":void 0!==i[s]&&(h.z=n);break;case"d":void 0!==i[s]&&(h.z=-n);break;default:return null}return h},xi=function(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t},ki=S("WGS84"),Ci=6,Si="AJSAJS",Ti="AFAFAF",Mi=65,Di=73,Ei=79,Oi=86,Pi=90,Ii={forward:$,inverse:L,toPoint:z};J.fromMGRS=function(e){return new J(z(e))},J.prototype.toMGRS=function(e){return $([this.x,this.y],e)};var Ai="2.4.3",Ni=1,Fi=.25,Ri=.046875,$i=.01953125,Li=.01068115234375,zi=.75,ji=.46875,Hi=.013020833333333334,Bi=.007120768229166667,Ui=.3645833333333333,Wi=.005696614583333333,Yi=.3076171875,Vi=function(e){var t=[];t[0]=Ni-e*(Fi+e*(Ri+e*($i+e*Li))),t[1]=e*(zi-e*(Ri+e*($i+e*Li)));var i=e*e;return t[2]=i*(ji-e*(Hi+e*Bi)),i*=e,t[3]=i*(Ui-e*Wi),t[4]=i*e*Yi,t},qi=function(e,t,i,n){return i*=t,t*=t,n[0]*e-i*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))},Gi=20,Xi=function(e,t,i){for(var n=1/(1-t),s=e,r=Gi;r;--r){var o=Math.sin(s),a=1-t*o*o;if(a=(qi(s,o,Math.cos(s),i)-e)*(a*Math.sqrt(a))*n,s-=a,Math.abs(a)<At)return s}return s},Zi=["Transverse_Mercator","Transverse Mercator","tmerc"],Ki={init:ee,forward:te,inverse:ie,names:Zi},Qi=function(e){var t=Math.exp(e);return t=(t-1/t)/2},Ji=function(e,t){e=Math.abs(e),t=Math.abs(t);var i=Math.max(e,t),n=Math.min(e,t)/(i?i:1);return i*Math.sqrt(1+Math.pow(n,2))},en=function(e){var t=1+e,i=t-1;return 0===i?e:e*Math.log(t)/i},tn=function(e){var t=Math.abs(e);return t=en(t*(1+t/(Ji(1,t)+1))),e<0?-t:t},nn=function(e,t){for(var i,n=2*Math.cos(2*t),s=e.length-1,r=e[s],o=0;--s>=0;)i=-o+n*r+e[s],o=r,r=i;return t+i*Math.sin(2*t)},sn=function(e,t){for(var i,n=2*Math.cos(t),s=e.length-1,r=e[s],o=0;--s>=0;)i=-o+n*r+e[s],o=r,r=i;return Math.sin(t)*i},rn=function(e){var t=Math.exp(e);return t=(t+1/t)/2},on=function(e,t,i){for(var n,s,r=Math.sin(t),o=Math.cos(t),a=Qi(i),l=rn(i),h=2*o*l,d=-2*r*a,u=e.length-1,f=e[u],c=0,p=0,m=0;--u>=0;)n=p,s=c,p=f,c=m,f=-n+h*p-d*c+e[u],m=-s+d*p+h*c;return h=r*l,d=o*a,[h*f-d*m,h*m+d*f]},an=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"],ln={init:ne,forward:se,inverse:re,names:an},hn=function(e,t){if(void 0===e){if(e=Math.floor(30*(oi(t)+Math.PI)/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e},dn="etmerc",un=["Universal Transverse Mercator System","utm"],fn={init:oe,names:un,dependsOn:dn},cn=function(e,t){return Math.pow((1-e)/(1+e),t)},pn=20,mn=["gauss"],vn={init:ae,forward:le,inverse:he,names:mn},gn=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"],yn={init:de,forward:ue,inverse:fe,names:gn},bn=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],wn={init:pe,forward:me,inverse:ve,names:bn,ssfn_:ce},_n=["somerc"],xn={init:ge,forward:ye,inverse:be,names:_n},kn=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"],Cn={init:we,forward:_e,inverse:xe,names:kn},Sn=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"],Tn={init:ke,forward:Ce,inverse:Se,names:Sn},Mn=["Krovak","krovak"],Dn={init:Te,forward:Me,inverse:De,names:Mn},En=function(e,t,i,n,s){return e*s-t*Math.sin(2*s)+i*Math.sin(4*s)-n*Math.sin(6*s)},On=function(e){return 1-.25*e*(1+e/16*(3+1.25*e))},Pn=function(e){return.375*e*(1+.25*e*(1+.46875*e))},In=function(e){return.05859375*e*e*(1+.75*e)},An=function(e){return e*e*e*(35/3072)},Nn=function(e,t,i){var n=t*i;return e/Math.sqrt(1-n*n)},Fn=function(e){return Math.abs(e)<Et?e:e-ri(e)*Math.PI},Rn=function(e,t,i,n,s){var r,o;r=e/t;for(var a=0;a<15;a++)if(o=(e-(t*r-i*Math.sin(2*r)+n*Math.sin(4*r)-s*Math.sin(6*r)))/(t-2*i*Math.cos(2*r)+4*n*Math.cos(4*r)-6*s*Math.cos(6*r)),r+=o,Math.abs(o)<=1e-10)return r;return NaN},$n=["Cassini","Cassini_Soldner","cass"],Ln={init:Ee,forward:Oe,inverse:Pe,names:$n},zn=function(e,t){var i;return e>1e-7?(i=e*t,(1-e*e)*(t/(1-i*i)-.5/e*Math.log((1-i)/(1+i)))):2*t},jn=1,Hn=2,Bn=3,Un=4,Wn=.3333333333333333,Yn=.17222222222222222,Vn=.10257936507936508,qn=.06388888888888888,Gn=.0664021164021164,Xn=.016415012942191543,Zn=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],Kn={init:Ie,forward:Ae,inverse:Ne,names:Zn,S_POLE:jn,N_POLE:Hn,EQUIT:Bn,OBLIQ:Un},Qn=function(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)},Jn=["Albers_Conic_Equal_Area","Albers","aea"],es={init:$e,forward:Le,inverse:ze,names:Jn,phi1z:je},ts=["gnom"],is={init:He,forward:Be,inverse:Ue,names:ts},ns=function(e,t){var i=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-i)<1e-6)return t<0?-1*Et:Et;for(var n,s,r,o,a=Math.asin(.5*t),l=0;l<30;l++)if(s=Math.sin(a),r=Math.cos(a),o=e*s,n=Math.pow(1-o*o,2)/(2*r)*(t/(1-e*e)-s/(1-o*o)+.5/e*Math.log((1-o)/(1+o))),a+=n,Math.abs(n)<=1e-10)return a;return NaN},ss=["cea"],rs={init:We,forward:Ye,inverse:Ve,names:ss},os=["Equirectangular","Equidistant_Cylindrical","eqc"],as={init:qe,forward:Ge,inverse:Xe,names:os},ls=20,hs=["Polyconic","poly"],ds={init:Ze,forward:Ke,inverse:Qe,names:hs},us=["New_Zealand_Map_Grid","nzmg"],fs={init:Je,forward:et,inverse:tt,names:us},cs=["Miller_Cylindrical","mill"],ps={init:it,forward:nt,inverse:st,names:cs},ms=20,vs=["Sinusoidal","sinu"],gs={init:rt,forward:ot,inverse:at,names:vs},ys=["Mollweide","moll"],bs={init:lt,forward:ht,inverse:dt,names:ys},ws=["Equidistant_Conic","eqdc"],_s={init:ut,forward:ft,inverse:ct,names:ws},xs=["Van_der_Grinten_I","VanDerGrinten","vandg"],ks={init:pt,forward:mt,inverse:vt,names:xs},Cs=["Azimuthal_Equidistant","aeqd"],Ss={init:gt,forward:yt,inverse:bt,names:Cs},Ts=["ortho"],Ms={init:wt,forward:_t,inverse:xt,names:Ts},Ds=function(e){e.Proj.projections.add(Ki),e.Proj.projections.add(ln),e.Proj.projections.add(fn),e.Proj.projections.add(yn),e.Proj.projections.add(wn),e.Proj.projections.add(xn),e.Proj.projections.add(Cn),e.Proj.projections.add(Tn),e.Proj.projections.add(Dn),e.Proj.projections.add(Ln),e.Proj.projections.add(Kn),e.Proj.projections.add(es),e.Proj.projections.add(is),e.Proj.projections.add(rs),e.Proj.projections.add(as),e.Proj.projections.add(ds),e.Proj.projections.add(fs),e.Proj.projections.add(ps),e.Proj.projections.add(gs),e.Proj.projections.add(bs),e.Proj.projections.add(_s),e.Proj.projections.add(ks),e.Proj.projections.add(Ss),e.Proj.projections.add(Ms)};return R.defaultDatum="WGS84",R.Proj=S,R.WGS84=new R.Proj("WGS84"),R.Point=J,R.toPoint=xi,R.defs=l,R.transform=A,R.mgrs=Ii,R.version=Ai,Ds(R),R});var padString=function(e){if(e.length=1){return"0"+e}else{return e}};var formatDate=function(e){if(e==""){return""}var t={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};return new Intl.DateTimeFormat(applocale,t).format(new Date(e))};var emptyForm=function(){$(".form-horizontal").each(function(e,t,i){console.log("clearing out");console.log(t)})};var getItemForm=function(e,t){if(typeof e=="undefined"){return false}var i=$(".dime-table tr[data-unique-id='"+e+"']");if(i.data("data")){return true}else{i.data("working",true)}$.ajax(window.userApiUrl+e+"/actor").fail(function(){emptyForm()}).done(function(n){console.log(n);i.data("data",n);i.data("working",false);if(t){showItemForm(e)}})};var itemFieldToHtml=function(e){console.log(e)};var itemFormToHtml=function(e){$(".form-horizontal[name=actor]").find("input[type=text], textarea").each(function(t,i,n){$(i).val(e[$(i).attr("id")]["value"])});$(".form-horizontal[name=actor]").find("input[type=hidden]").each(function(t,i,n){console.log(e[$(i).attr("id")]);$(i).val(e[$(i).attr("id")]["value"])});$(".form-horizontal[name=actor]").find("select").each(function(t,i,n){$(i).val(e[$(i).attr("id")]["value"]);$(i).select2({minimumResultsForSearch:11,width:"resolve"})});initialAvatarPreview=[];defaultImage=1;if(e["actor_avatar_item"]["value"]){initialAvatarPreview.push('<img class="file-preview-image" src="/dime/img/'+e["actor_avatar_item"]["value"]+'?p=preview">')}else{initialAvatarPreview.push('<img class="file-preview-image" src="/dime/img/'+defaultImage+'?p=preview">')}$("div.file-input").parent().append($('<input type="file" id="actor_avatar_file" name="actor[avatar][file]">'));$("div.file-input").remove();$("#actor_avatar_file").fileinput({showUpload:false,previewFileType:"any",initialPreview:initialAvatarPreview})};var showItemForm=function(e){var t=$(".dime-table tr[data-unique-id='"+e+"']");var i=t.data("data");var n=t.data("working");if(i){$("#actor_id_value").html(e);var n=t.data("working",true);var s=$("#actor_id_value").closest("form");s.attr("action",window.userApiUrl+e+"/actor");itemFormToHtml(i)}else if(n==true){showItemForm(e)}else{getItemForm(e,true)}};var userFocusClick=function(e){e.preventDefault();if($(e.target).is("tr")){var t=$(e.target)}else{var t=$(e.target).closest("tr")}console.log(t.attr("data-unique-id"));showItemForm(t.attr("data-unique-id"))};function showResponse(e,t,i,n){if(e.status=="success"){$("#actor_id_value").closest("form").prepend($('<div class="alert alert-success" role="alert">'+window.translations[e.message]+"</div>"))}else{$("#actor_id_value").closest("form").prepend($('<div class="alert alert-success" role="alert">'+window.translations[e.message]+"</div>"))}}$("document").ready(function(){$(".icon-user-focus").on("click",{target:this},userFocusClick);$("tr").each(function(e,t){getItemForm($(t).attr("data-unique-id"),false)});$("#actor_save").on("click",function(e){var t={success:showResponse};var i=$(e.target).closest("form")[0].checkValidity();if(i){e.preventDefault();$(e.target).closest("form").ajaxSubmit(t)}})});$(document).ready(function(){$("select").select2({minimumResultsForSearch:11,width:"resolve"});$("#find_secondary_term").css("width","100%");$(".checkbox").addClass("col-xs-4 col-sm-4 ");$("#edit_roles .checkbox").removeClass("col-xs-4 col-sm-4");$(".readonly-select").prop("disabled",true);$(".loginbutton").click(function(){$(".sidebar").removeClass("collapse")});$("input[type=file]").each(function(){initialPreview=[];if(typeof $(this).attr("data-existing")=="string"){var e=$(this).attr("data-existing").split(",");var t=e.length;for(var i=0;i<t;i++){initialPreview.push('<img class="profile-img" class="file-preview-image" src="/dime/img/'+e[i]+'?p=preview">');
}}$(this).fileinput({showUpload:false,previewFileType:"any",initialPreview:initialPreview})});if(typeof applocale!="undefined"){$(".datetimepicker").datetimepicker({locale:applocale});$(".datepicker").datetimepicker({locale:applocale,minView:2});$(".timepicker").datetimepicker({locale:applocale,format:"hh:ii",maxView:0})}$(".table-bootstrap-table").bootstrapTable("hideLoading");$('.btn-group[title="Columns"]').find("i.glyphicon-th").removeClass("glyphicon-th").addClass("glyphicon-th-list");$(".carouselextratext_0").show();$("#carousel-custom").bind("slide.bs.carousel",function(e){var t=$(this).find(".active").index();console.log(t);var i=$(e.relatedTarget).index();console.log(i);console.log(t+" => "+i);$(".carouselextratext_"+t.toString()).hide();$(".carouselextratext_"+i.toString()).show()});$("span.thumbimage").hide();$(".sidebar").on("show.bs.collapse",function(){var e=$("<div>",{id:"navbar-fade",class:"modal-backdrop fade in"});e.click(function(){$(".sidebar").collapse("toggle");$(".modal-backdrop").detach()});$(this).css("z-index",9999);$("body").append(e)});$('[data-toggle="tooltip"]').tooltip({trigger:"click"})});var NoteSaveButton=function(e){var t=$.summernote.ui;var i=t.button({contents:'<i class="fa fa-child"/>Save',tooltip:"save",click:function(){$.post(window.location.pathname,e.invoke("code"))}});return i.render()};$("form").submit(function(){$(".readonly-select").prop("disabled",false)});$("#pageedit").on("click",function(){if($(this).hasClass("active")){$(".inlineedit").summernote("destroy")}else{$(".inlineedit").summernote({focus:true,buttons:{save:NoteSaveButton},toolbar:[["style",["style"]],["font",["fontname","fontsize"]],["textstyle",["bold","italic","underline","strikethrough","superscript","subscript","clear"]],["color",["color"]],["para",["ul","ol","paragraph","height"]],["insert",["picture","link","video"]],["table",["table"]],["hr",["hr"]],["view",["fullscreen","codeview"]],["edit",["undo","redo"]],["help",["help"]],["save",["save"]]]})}});jQuery(function(e){e("form[data-async]").on("submit",function(t){var i=e(this);var n=e(i.attr("data-target"));e.ajax({type:i.attr("method"),url:i.attr("action"),data:i.serialize(),success:function(e,t){console.log(e);location.reload()}});t.preventDefault()})});function debounce(e,t,i){var n;return function(){var s=this,r=arguments;var o=function(){n=null;if(!i)e.apply(s,r)};var a=i&&!n;clearTimeout(n);n=setTimeout(o,t);if(a)e.apply(s,r)}}!function(e){"use strict";var t=function(t,i){if(t.options.columnsHidden.length>0){e.each(t.columns,function(n,s){if(t.options.columnsHidden.indexOf(s.field)!==-1){if(s.visible!==i){t.toggleColumn(e.fn.bootstrapTable.utils.getFieldIndex(t.columns,s.field),i,true)}}})}};var i=function(e){if(e.options.height||e.options.showFooter){setTimeout(function(){e.resetView.call(e)},1)}};var n=function(e){if(e.$toolbar.find('button[name="tableView"]').hasClass("active")){return"tableView"}else if(e.$toolbar.find('button[name="cardView"]').hasClass("active")){return"cardView"}else{return"thumbView"}};var s=function(t,s,l){var h=n(t);console.log(h);if(h!="tableView"){e("#dime_find_list").removeClass("cardViewTable");e("#dime_find_home").removeClass("cardViewTable");e("#dime_find_list").removeClass("thumbViewTable");e("#dime_find_home").removeClass("thumbViewTable");if(h=="thumbView"){t.toggleView()}t.$toolbar.find("button").removeClass("active")}var d=e(".table-wrapper-div .fixed-table-body")[0].clientWidth;var u=e(".table-wrapper-div .fixed-table-body")[0].scrollWidth;var f=d<u;console.log(f);if(t.options.minHeight){if(s<=t.options.minWidth&&l<=t.options.minHeight){t.$toolbar.find('button[name="tableView"]').addClass("disabled");switch(h){case"tableView":r(t);break;case"cardView":r(t);break;case"thumbView":o(t);break}}else if(s>t.options.minWidth&&l>t.options.minHeight){t.$toolbar.find('button[name="tableView"]').removeClass("disabled");switch(h){case"tableView":a(t);break;case"cardView":r(t);break;case"thumbView":o(t);break}}}else{if(f){t.$toolbar.find('button[name="tableView"]').addClass("disabled");switch(h){case"tableView":r(t);break;case"cardView":r(t);break;case"thumbView":o(t);break}}else{t.$toolbar.find('button[name="tableView"]').removeClass("disabled");switch(h){case"tableView":a(t);break;case"cardView":r(t);break;case"thumbView":o(t);break}}}i(t)};var r=function(e){e.$toolbar.find('button[name="cardView"]').click()};var o=function(e){e.$toolbar.find('button[name="thumbView"]').click()};var a=function(e){e.$toolbar.find('button[name="tableView"]').click()};var l=function(e,t){var i;return function(){var n=this,s=arguments;var r=function(){i=null;e.apply(n,s)};clearTimeout(i);i=setTimeout(r,t)}};e.extend(e.fn.bootstrapTable.defaults,{mobileResponsive:false,minWidth:562,minHeight:undefined,heightThreshold:100,checkOnInit:true,columnsHidden:[]});var h=e.fn.bootstrapTable.Constructor,d=h.prototype.init;h.prototype.init=function(){d.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.mobileResponsive){return}if(!this.options.minWidth){return}if(this.options.minWidth<100&&this.options.resizable){console.log("The minWidth when the resizable extension is active should be greater or equal than 100");this.options.minWidth=100}var t=this,i={width:e(".bootstrap-table").width(),height:e(".bootstrap-table").height()};e(window).on("resize orientationchange",l(function(n){var r=e(".bootstrap-table").height(),o=e(".bootstrap-table").width();if(Math.abs(i.height-r)>t.options.heightThreshold||i.width!=o){s(t,o,r);i={width:o,height:r}}},200));if(this.options.checkOnInit){var n=e(".bootstrap-table").height(),r=e(".bootstrap-table").width();s(this,r,n);i={width:r,height:n}}e(".bootstrap-table").on("column-switch.bs.table",function(){var i=e(".bootstrap-table").height(),n=e(".bootstrap-table").width();s(t,n,i);return true})}}(jQuery);!function(e){"use strict";var t=e.fn.bootstrapTable.utils.sprintf;e.extend(e.fn.bootstrapTable.defaults,{switchcardview:false});e.extend(e.fn.bootstrapTable.defaults.icons,{cardIcon:"glyphicon-th-large",thumbIcon:"glyphicon-th",listIcon:"glyphicon-menu-hamburger"});var i=e.fn.bootstrapTable.Constructor,n=i.prototype.initToolbar;i.prototype.initToolbar=function(){n.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.switchcardview){return}var i=this,s=this.$toolbar.find(">.btn-group");if(i.options.cardView){var r=" active";var o=""}else{var r="";var o=" active"}e(s.find('[name="toggle"]')).remove();e(['<div class="export btn-group">','<button class="btn'+t(" btn-%s",this.options.buttonsClass)+t(" btn-%s",this.options.iconSize)+o+'" name="tableView" '+'type="button">',t('<i class="%s %s"></i> ',this.options.iconsPrefix,this.options.icons.listIcon),"</button>",'<button class="btn'+t(" btn-%s",this.options.buttonsClass)+t(" btn-%s",this.options.iconSize)+r+'" name="cardView" '+' type="button">',t('<i class="%s %s"></i> ',this.options.iconsPrefix,this.options.icons.cardIcon),"</button>",'<button class="btn'+t(" btn-%s",this.options.buttonsClass)+t(" btn-%s",this.options.iconSize)+r+'" name="thumbView" '+' type="button">',t('<i class="%s %s"></i> ',this.options.iconsPrefix,this.options.icons.thumbIcon),"</button>","</div>"].join("")).prependTo(s);e(document).ready(function(){window.removeTextSelection=function(){var e=window.getSelection?window.getSelection():document.selection;if(e){if(e.removeAllRanges){e.removeAllRanges()}else if(e.empty){e.empty()}}};window.createItemModal=function(t,i){var n='<div id="modalWindow" class="modal fade in" style="display:none;" data-backdrop="false">';n+='<div class="modal-dialog thumbmodal-container dime" tabindex="-1" >';n+='<button type="button" class="close" data-dismiss="modal" aria-label="Close">';n+='<span aria-hidden="true">&times;</span>';n+="</button>";n+='<div class="modal-body thumbModal">';for(var s in i){console.log(i[s]);n+='<div class="field">';if(i[s].field!="checked"){if(i[s].field=="image"){n+=t[i[s].field]}else{n+=t[i[s].field]}}n+="</div>"}n+="</div>";n+="</div>";e("#thumbModal").html(n);e("#modalWindow").modal();e("#modalWindow").on("hidden.bs.modal",function(){e("tr").removeClass("selected")});e(".modal-body img").load(function(){e(".thumbmodal-container").width(this.naturalWidth+70)})};var t=function(t){removeTextSelection();if(e(t.target).is("a")){return true}if(e(t.target).is("tr")){var i=e(t.target)}else{var i=e(t.target).closest("tr")}var n=i.attr("data-unique-id");console.log(n);if(i.hasClass("selected")){i.removeClass("selected");i.find(".tablecheckbox").removeClass("glyphicon-check").addClass("glyphicon-unchecked")}else{i.addClass("selected");i.find(".tablecheckbox").removeClass("glyphicon-unchecked").addClass("glyphicon-check")}};var n=function(t){removeTextSelection();if(e(t.target).is("a")){return true}if(e(t.target).hasClass("icon-user-focus")){return true}if(e(t.target).is("tr")){var i=e(t.target)}else{var i=e(t.target).closest("tr")}var n=i.attr("data-unique-id");console.log(i.hasClass("selected"));if(typeof mapcollection=="undefined"){if(i.hasClass("selected")){i.removeClass("selected");i.find(".tablecheckbox").removeClass("glyphicon-check").addClass("glyphicon-unchecked")}else{i.addClass("selected");i.find(".tablecheckbox").removeClass("glyphicon-unchecked").addClass("glyphicon-check")}return true}map.getLayers().forEach(function(e,t,s){if(e.get("name")=="yours"){console.log(mapcollection);if(typeof e.getSource().getFeatures=="function"){e.getSource().getFeatures().forEach(function(e,t,s){if(e.get("ark_id").toUpperCase()==n){if(i.hasClass("selected")){mapcollection.remove(e)}else{mapcollection.push(e)}}})}}})};if(window.itemkey="find"){window.tableclick=n}else{window.tableclick=t}var r=function(t){if(e(t.target).is("tr")){var n=e(t.target)}else{var n=e(t.target).closest("tr")}window.tableclick(t);createItemModal(i.data[n[0].rowIndex-1],i.columns)};i.$toolbar.find('button[name="tableView"]').on("click",function(){e(this).blur();if(e(this).hasClass("disabled")){return false}if(e(s.find('[name="tableView"]')).hasClass("active")==false){e(".dime-table").removeClass("cardViewTable");e(".dime-table").removeClass("thumbViewTable");if(e(s.find('[name="thumbView"]')).hasClass("active")){i.toggleView()}e(s.find('[name="cardView"]')).removeClass("active");e(s.find('[name="thumbView"]')).removeClass("active");e(s.find('[name="tableView"]')).addClass("active");e("tr").off("click");e("tr").on("click",{target:this},window.tableclick);if(typeof mapcollection!="undefined"){mapcollection.forEach(function(t,i,n){var s=t.get("ark_id");e(".dime-table tr[data-unique-id='"+s.toString()+"']").addClass("selected")})}}});i.$toolbar.find('button[name="thumbView"]').on("click",function(){e(this).blur();if(e(s.find('[name="thumbView"]')).hasClass("active")==false){i.toggleView();e(".dime-table").addClass("thumbViewTable");e(".dime-table").removeClass("cardViewTable");e(s.find('[name="thumbView"]')).addClass("active");e(s.find('[name="cardView"]')).removeClass("active");e(s.find('[name="tableView"]')).removeClass("active");e("tr").off("click");e("tr").on("click",{target:this},r);if(typeof mapcollection!="undefined"){mapcollection.forEach(function(t,i,n){var s=t.get("ark_id");e(".dime-table tr[data-unique-id='"+s.toString()+"']").addClass("selected")})}}});i.$toolbar.find('button[name="cardView"]').on("click",function(){e(this).blur();i.$toolbar.find('button[name="tableView"]').blur();i.$toolbar.find('button[name="thumbView"]').blur();if(e(s.find('[name="cardView"]')).hasClass("active")==false){if(e(s.find('[name="thumbView"]')).hasClass("active")){i.toggleView()}e(".dime-table").addClass("cardViewTable");e(".dime-table").removeClass("thumbViewTable");e(s.find('[name="cardView"]')).addClass("active");e(s.find('[name="thumbView"]')).removeClass("active");e(s.find('[name="tableView"]')).removeClass("active");e("tr").off("click");e("tr").on("click",{target:this},window.tableclick);if(typeof mapcollection!="undefined"){mapcollection.forEach(function(t,i,n){var s=t.get("ark_id");e(".dime-table tr[data-unique-id='"+s.toString()+"']").addClass("selected")})}}});e("td").off("click");i.$toolbar.find('button[name="cardView"]').click()})}}(jQuery);$("document").ready(function(){var e=function(e,t){return JSON.parse(JSON.stringify(window.itemAvailableActions[t]))};var t=function(e){if(e.visible){e.available?disabled="":disabled='disabled="true" class="disabled"';var t=$("<li "+disabled+' value="'+e.keyword+'">'+e.translation+"</li>");return t}};$("#chooseAction").click(function(){$("#chooseActionSelectHolder").empty();$("tr.selected").each(function(t,i,n){window.availableActions=JSON.parse(JSON.stringify(window.defaultAvailableActions));var s=e(window.itemkey,$(i).attr("data-unique-id"));for(action in window.availableActions){if(s.hasOwnProperty(window.availableActions[action].keyword)){window.availableActions[action]["visible"]=true}if(s.hasOwnProperty(window.availableActions[action].keyword)==false){window.availableActions[action]["available"]=false}}});var i=$('<ul class="action-select">');for(action in window.availableActions){i.append(t(window.availableActions[action]))}$("#chooseActionSelectHolder").append(i)})});var initTimeline=function(){var e=document.getElementById("visualization");var t=new vis.DataSet;var i=JSON.parse(JSON.stringify(t));var n={concept:"dime.period"};for(period_id in window.periodvocabulary){var s=window.periodvocabulary[period_id];try{if(isNaN(s.parameters.year_end.value)){throw"year end is NaN"}end=s.parameters.year_end.value}catch(e){end=(new Date).getFullYear()}try{if(isNaN(s.parameters.year_start.value)){throw"year end is NaN"}start=Math.max(s.parameters.year_start.value,-1e4)}catch(e){start=-1e4}t.add({id:period_id,content:$("#find_dating_period").find("option[value="+s.name+"]").html(),start:vis.moment(start,"Y"),end:vis.moment(end,"Y")})}function r(e,t){e.length=e.start-e.end;t.length=t.start-t.end;return t.length-e.length}var o={order:r,editable:false,margin:{item:0},zoomMin:15768e7,zoomMax:3157e11,showCurrentTime:false,horizontalScroll:true,zoomKey:"ctrlKey",start:vis.moment("1066","Y"),end:vis.moment("2000","Y")};var a=new vis.Timeline(e,t,o);$(".vis-range").each(function(e,t){var i=[];if($(t).width()<100||$(t).width()>1500){$(t).hide()}else{$(t).show()}});select2Options={minimumResultsForSearch:11,width:"resolve",sorter:function(e){return e.sort(function(e,t){if(e.text>t.text){return 1}if(e.text<t.text){return-1}return 0})}};$("#find_classify").attr("data-toggle","modal");$("#find_classify").on("click",function(){$(".classification-holder").empty();console.log($("#find_type_term").val());$(".classification-holder").append($("#find_type_term").clone().attr("id","find_type_term_modal"));$("#find_type_term_modal").attr("style","width:20%");$("#find_type_term_modal").val($("#find_type_term").val());$("#find_type_term_modal").select2(select2Options);var e=function(){$(".vis-tl-zoom-out").trigger("click")};window.setTimeout(e,3e3);var t=$('<select id="find_subtype_level1" style="width:20%">');$(".classification-holder").append(t);t.select2(select2Options);var i=$('<select id="find_subtype_level2" style="width:20%">');$(".classification-holder").append(i);i.select2(select2Options);$("#find_type_term_modal").on("select2:select select2:unselecting",function(){var e=$(this).val();t.empty();t.append('<option value="undefined">'+window.translations["undef"]+"</option>");i.empty();i.append('<option value="undefined">'+window.translations["undef"]+"</option>");for(var n in window.subtypevocabulary){if(e==n.split(".")[0]&&n.split(".").length==2){$(window.subtypevocabulary[n].optionelement).clone().appendTo(t)}}$("#find_type_term").val(e);$("#find_type_term").select2(select2Options);$("#find_type_term").trigger("select2:select")});var n=function(e){if(typeof window.subtypevocabulary[e].parameters!="undefined"){try{var t=getYearsFromTarget(e);console.log(t);try{a.setCustomTime(vis.moment(t.start,"Y"),"start")}catch(e){a.addCustomTime(vis.moment(t.start,"Y"),"start")}try{a.setCustomTime(vis.moment(t.end,"Y"),"end")}catch(e){a.addCustomTime(vis.moment(t.end,"Y"),"end")}a.moveTo(vis.moment(t.end,"Y"));$("#find_dating_year").val(t.start);$("#find_dating_year").trigger("keyup");$("#find_dating_year_span").val(t.end);$("#find_dating_year_span").trigger("keyup")}catch(e){}}var i=e.split(".");$("#find_type_term").val(i[0]);$("#find_type_term").select2(select2Options);$("#find_type_term").trigger("select2:select");$("#find_classification_subtype").val(i[0]+"."+i[1]);$("#find_classification_subtype").select2(select2Options);$("#find_classification_subtype").trigger("select2:select");$("#find_classification_subtype").select2("close");if(i.length=3){$("#find_classification_subtype").val(e);$("#find_classification_subtype").select2(select2Options);$("#find_classification_subtype").trigger("select2:select");$("#find_classification_subtype").select2("close")}};t.on("select2:select select2:unselecting",function(){var e=$(this).val();console.log(e);n(e);i.empty();i.append('<option value="undefined">'+window.translations["undef"]+"</option>");for(var t in window.subtypevocabulary){if(e.split(".")[0]==t.split(".")[0]&&e.split(".")[1]==t.split(".")[1]&&t.split(".").length==3){$(window.subtypevocabulary[t].optionelement).clone().appendTo(i)}}});i.on("select2:select select2:unselecting",function(){var e=$(this).val();console.log(e);n(e)});var s=$("#find_classification_subtype").val();t.empty();t.append('<option value="undefined">'+window.translations["undef"]+"</option>");for(var r in window.subtypevocabulary){if($("#find_type_term_modal").val()==r.split(".")[0]&&r.split(".").length==2){$(window.subtypevocabulary[r].optionelement).clone().appendTo(t)}}if(s!=null){var o=s.split(".");if(o.length==2){t.val(s);t.trigger("select2:select")}else{t.val(o[0]+"."+o[1]);t.trigger("select2:select");i.val(s);i.trigger("select2:select")}}var l=$("#find_dating_year").val();if(l){try{a.setCustomTime(vis.moment(l,"Y"),"start")}catch(e){a.addCustomTime(vis.moment(l,"Y"),"start")}}var h=$("#find_dating_year_span").val();if(h){try{a.setCustomTime(vis.moment(h,"Y"),"end")}catch(e){a.addCustomTime(vis.moment(h,"Y"),"end")}}});$(a).attr("pannning",false);a.on("rangechange",function(e){$(a).attr("pannning",true)});a.on("rangechanged",function(e){setTimeout(function(){$(a).attr("pannning",false)},100)});a.on("click",function(e){if($(a).attr("pannning")){return true}try{existing_start=a.getCustomTime("start")}catch(e){existing_start=null}try{existing_end=a.getCustomTime("end")}catch(e){existing_end=null}if(existing_start!=null){a.removeCustomTime("start")}if(existing_end!=null){a.removeCustomTime("end")}console.log("start",existing_start,"end",existing_end);if(e.item!=null){try{var t=vis.moment(window.periodvocabulary[e.item].parameters.year_start.value,"Y")}catch(e){var t=vis.moment(date.now(),"Y")}try{var i=vis.moment(window.periodvocabulary[e.item].parameters.year_end.value,"Y")}catch(e){var i=vis.moment("10000","Y")}if(e.event.shiftKey){if(existing_start<t){var n=existing_start}else{var n=t}if(existing_end>i){var s=existing_end}else{var s=i}}else{var n=t;var s=i}}else{if(existing_start==null){n=e.time;s=null}else if(existing_end==null){n=existing_start;s=e.time}else{if(e.time>existing_end){n=existing_start;s=e.time}else if(e.time<existing_start){n=e.time;s=existing_end}else if(Math.pow(e.time-existing_start,2)>Math.pow(e.time-existing_end,2)){n=existing_start;s=e.time}else{n=e.time;s=existing_end}}}$("#find_dating_year").val(new Date(n).getFullYear(),"Y");$("#find_dating_year").trigger("keyup");$("#find_dating_year_span").val(new Date(s).getFullYear(),"Y");$("#find_dating_year_span").trigger("keyup");a.addCustomTime(n,"start");a.addCustomTime(s,"end")});$(".vis-tl-zoom-in").on("click",function(){a.zoomIn(.2)});$(".vis-tl-zoom-out").on("click",function(){a.zoomOut(.2)});$("#closemodal").on("click",function(e){e.preventDefault();$("#dating-modal").modal("hide")});$(".vis-item-content").each(function(){$(this).attr("title",$(this).html())});a.on("rangechanged",function(){$(".vis-range").each(function(e,t){var i=[];if($(t).width()<100||$(t).width()>1800){$(t).hide()}else{$(t).show()}a.redraw()})});a.on("timechanged",function(e){if(e.id=="start"){if(e.time>a.getCustomTime("end")){a.removeCustomTime("start");a.addCustomTime(a.getCustomTime("end"),"start");return false}}else{if(e.time<a.getCustomTime("start")){a.removeCustomTime("end");a.addCustomTime(a.getCustomTime("start"),"end");return false}}})};var apiurl="../api/v2";var padString=function(e){if(e.length=1){return"0"+e}else{return e}};var formatDate=function(e){if(e==""){return""}var t={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};return new Intl.DateTimeFormat(applocale,t).format(new Date(e))};var getMessage=function(e){if(typeof e=="undefined"){return false}if(typeof sendertranslation=="undefined"){return false}var t=$(".dime-table tr[data-unique-id='"+e+"']");if(t.data("message")){return true}var i=$("<button>&#10004;</button>").addClass("dime-icon btn normal").attr("id",e).click(function(e){alert($(e.target).attr("id"))});var n=$("<dl><dt>"+sendertranslation+'</dt><dd class="message-from">'+senderinitial+"</dd><dt>"+datetranslation+'</dt><dd class="message-date">'+formatDate(dateinitial)+"</dd><dt>"+eventtranslation+'</dt><dd class="message-body">'+eventinitial+"</dd><dt>"+itemtranslation+'</dt><dd class="message-item">'+iteminitial+"</dd></dl>");var s=$("<div></div>").append(n);t.data("message",s);console.log("loading "+e);$.ajax(apiurl+"/messages/"+e).fail(function(){$(".message-from").empty();$(".message-date").empty();$(".message-body").empty()}).done(function(e){var i=e.data;console.log(e);$.ajax(apiurl+"/actors/"+i.attributes.sender.item).fail(function(){t.data("message").find(".message-from").html("error reading sender")}).done(function(e){var i=e.data.attributes.fullname;t.data("message").find(".message-from").html(i[0].content)});var n=i.attributes.sent.datetime.date;console.log(n);t.data("message").find(".message-date").html(formatDate(n));$.ajax(apiurl+"/events/"+i.attributes.event.item).fail(function(){t.data("message").find(".message-body").html("error reading message")}).done(function(e){t.data("message").find(".message-body").html(message_vocabulary["dime.find.event."+e.data.attributes.type]);var i=$('<a href = "'+window.modules[e.data.attributes.subject.module].view+"/"+e.data.attributes.subject.item+'"><span class="glyphicon glyphicon-file"></span></a>');i.appendTo(t.data("message").find(".message-item"))})})};var showMessage=function(e){var t=$(".dime-table tr[data-unique-id='"+e+"']");var i=t.data("message");if(i){$(".dime-messages").find("div").detach();$(".dime-messages").append(i)}else{getMessage(e);showMessage(e)}};var markAsRead=function(e,t){var i=JSON.stringify({message:e,recipient:t});$.post(path+"api/internal/message/read",i,function(e){})};var messageclick=function(e){$("tr").removeClass("selected");if($(e.target).is("tr")){var t=$(e.target)}else{var t=$(e.target).closest("tr")}t.addClass("selected");t.addClass("read");console.log(window.useractorid);markAsRead(t.attr("data-unique-id"),window.useractorid);showMessage(t.attr("data-unique-id"))};$("document").ready(function(){$("tr").on("click",{target:this},messageclick);if(typeof window.message_id!=="undefined"){$(".dime-table tr[data-unique-id='"+window.message_id+"']").click()}$("tr").each(function(e,t){getMessage($(t).attr("data-unique-id"))})});$(document).ready(function(){$(".dropdown-menu .markasread").click(function(e){e.stopPropagation();console.log($(e.target).attr("message"));console.log($(e.target).attr("recipient"));var t=JSON.stringify({message:$(e.target).attr("message"),recipient:$(e.target).attr("recipient")});$.post($(e.target).attr("href"),t).fail(function(){alert("fail")}).done(function(t){var i=t.data;$(e.target).closest("li").remove();var n=parseInt($(".notification-dropdown-header .count").html())-1;$(".notification-dropdown-header .count").html(n);if(n==0){$(".icon-new-notification").addClass("icon-notification").removeClass("icon-new-notification").removeClass("wide")}})})});$(document).ready(function(){if($("#mapview").length){window.map=initialiseMapView()}});function initialiseMapView(){var e=[];for(var t=0;t<layerConfig.length;++t){var i=layerConfig[t];layer=new ol.layer.Tile({name:i.name,visible:i.visible,preload:i.preload,source:mapSource(i.class,i.source)});layer.set("name",i.name);e.push(layer)}var n=new ol.Map({layers:e,controls:[],loadTilesWhileInteracting:true,target:"map",view:new ol.View({center:[1155972,7580813],zoom:7,maxZoom:16})});n.addControl(new ol.control.Zoom);n.addControl(new ol.control.ZoomSlider);n.on("moveend",function(){var e=n.getView().get("center");var t=n.getView().calculateExtent(n.getSize());centerstring="["+e.toString()+"]";var i=n.getView().getZoom()});$("a.layer-select").on("click",function(){var t=$(this).attr("value");$("a.layer-select").removeClass("selected");$(this).addClass("selected");for(var i=0;i<e.length;++i){var n=e[i];n.setVisible(n.get("name")===t)}});if(ywkts.length!=0){yourfeatures=[];theirfeatures=[];var s={yours:new ol.style.Style({image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:"#f00"}),stroke:new ol.style.Stroke({color:"#000",width:1})})}),theirs:new ol.style.Style({image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:"#00f"}),stroke:new ol.style.Stroke({color:"#000",width:1})})})};var r=new ol.format.WKT;for(wkt in ywkts){feature=r.readFeature(ywkts[wkt],{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});feature.set("ark_id",wkt);yourfeatures.push(feature)}for(wkt in twkts){theirfeatures.push(r.readFeature(twkts[wkt],{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}).set("ark_id",wkt))}var o=new ol.layer.Vector({source:new ol.source.Vector({features:yourfeatures}),style:s["yours"]});var a=new ol.layer.Vector({source:new ol.source.Vector({features:theirfeatures}),style:s["theirs"]});o.set("name","yours");o.set("selectable",true);a.set("name","theirs");a.set("selectable",true);n.addLayer(a);n.addLayer(o);view=n.getView();extent=o.getSource().getExtent();view.fit(extent,n.getSize());var l=new ol.interaction.Select({layers:function(e){return e.get("selectable")},style:new ol.style.Style({image:new ol.style.Circle({radius:8,fill:new ol.style.Fill({color:"#f00"}),stroke:new ol.style.Stroke({color:"#000",width:1})})})});n.addInteraction(l);var h=l.getFeatures();window.mapcollection=h;h.on("add",function(e){if(!e.shiftKey){var t=$(".dime-table tr");for(var i=0;i<t.length;i++){$(t[i]).removeClass("selected");$(t[i]).find(".tablecheckbox").removeClass("glyphicon-check").addClass("glyphicon-unchecked")}}var s=[Infinity,Infinity,-Infinity,-Infinity];h.forEach(function(e,t,i){var n=e.get("ark_id");$(".dime-table tr[data-unique-id='"+n.toString()+"']").addClass("selected");$(".dime-table tr[data-unique-id='"+n.toString()+"']").find(".tablecheckbox").removeClass("glyphicon-unchecked").addClass("glyphicon-check");var r=e.getGeometry().getExtent();if(typeof r!="undefined"){s=[Math.min(r[0],s[0]),Math.min(r[1],s[1]),Math.max(r[2],s[2]),Math.max(r[3],s[3])]}});n.getView().fit(s,n.getSize())});h.on("remove",function(e){var t=$(".dime-table tr");for(var i=0;i<t.length;i++){$(t[i]).removeClass("selected");$(t[i]).find(".tablecheckbox").removeClass("glyphicon-check").addClass("glyphicon-unchecked")}h.forEach(function(e,i,n){var s=e.get("ark_id");$(".dime-table tr[data-unique-id='"+s.toString()+"']").addClass("selected");$(t[i]).find(".tablecheckbox").removeClass("glyphicon-unchecked").addClass("glyphicon-check")})})}$(".style-select-option").on("click",function(){if($(this).attr("value")=="choropleth"){var e=$("<div>",{id:"navbar-fade",class:"modal-backdrop fade in map-cover"});$(".ol-viewport").append(e);var t=false;n.getLayers().forEach(function(e,i,s){if(e.get("name")==="municipalitylayer"){e.setVisible(true);$(".modal-backdrop").detach();view=n.getView();extent=e.getSource().getExtent();view.fit(extent,n.getSize());$(".map-legend").show();t=true}else if(e.get("name")==="yours"||e.get("name")==="theirs"){e.setVisible(false)}});if(t==false){var i={concept:"dime.denmark.municipality",module:itemkey,attribute:"location",itemlist:itemlist};$.get(path+"api/geo/choropleth",i,function(e){var t=new ol.format.WKT;var i=[];var s=e["municipality"];for(municipality in s){feature=t.readFeature(s[municipality]["geometry"],{dataProjection:"EPSG:"+s[municipality]["srid"],featureProjection:"EPSG:3857"});feature.set("count",s[municipality]["count"]);feature.set("band",s[municipality]["band"]);i.push(feature)}var r={4:[225,38,42],3:[235,111,77],2:[241,227,50],1:[104,176,56]};var o=200;var a=10;var l=.5;bandslength=Object.keys(r).length;var h=o/bandslength;var d={};var u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttribute("width",a);u.setAttribute("height",o);u.setAttribute("style","border: 1px solid black");for(band in r){rect=document.createElementNS("http://www.w3.org/2000/svg","rect");style="fill:rgb("+r[band][0]+","+r[band][1]+","+r[band][2]+")";rect.setAttribute("style",style);rect.setAttribute("height",h);rect.setAttribute("width",a);rect.setAttribute("fill-opacity",l);rect.setAttribute("y",h*(bandslength-band));u.append(rect);r[band].push(l);d[band]=new ol.style.Style({fill:new ol.style.Fill({color:r[band]}),stroke:new ol.style.Stroke({color:"#000",width:1})})}u.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");$(".legend-image").append(u);$(".map-legend").show();var f=new ol.layer.Vector({source:new ol.source.Vector({features:i}),style:function(e,t){return[d[e.get("band")]]}});f.set("name","municipalitylayer");f.set("selectable",false);n.addLayer(f);view=n.getView();extent=f.getSource().getExtent();view.fit(extent,n.getSize());$(".modal-backdrop").detach()}).fail(function(){$(".modal-backdrop").detach()})}}else if($(this).attr("value")=="distribution"){view=n.getView();extent=[Infinity,Infinity,-Infinity,-Infinity];n.getLayers().forEach(function(e,t,i){if(e.get("name")==="municipalitylayer"){e.setVisible(false)}else{if(e.get("name")==="yours"||e.get("name")==="theirs"){e.setVisible(true);newextent=e.getSource().getExtent();if(newextent[0]!=Infinity){extent=[Math.min(newextent[0],extent[0]),Math.min(newextent[1],extent[1]),Math.max(newextent[2],extent[2]),Math.max(newextent[3],extent[3])];view.fit(extent,n.getSize())}}}});$(".map-legend").hide()}else{n.getLayers().forEach(function(e,t,i){if(e.get("name")==="municipalitylayer"||e.get("name")==="yours"||e.get("name")==="theirs"){e.setVisible(false)}});$(".map-legend").hide()}});switch(default_overlay){case"distribution":$('.style-select-option[value="distribution"]').click();break;case"choropleth":$('.style-select-option[value="choropleth"]').click();break;default:}return n}function mapSource(e,t){if(e=="BingMaps"){return new ol.source.BingMaps(t)}if(e=="TileWMS"){return new ol.source.TileWMS(t)}}$(document).ready(function(){if($("#mappick").length){var e;var t;var i;$("#mappick").height($("#mappick").width());initialisePickMap();$(window).resize(function(){if($('button[title="Toggle full-screen"]').hasClass("ol-full-screen-false")){$("#mappick").height($("#mappick").width())}else{$("#mappick").height("100%")}})}});function initialisePickMap(){proj4.defs("EPSG:32633","+proj=utm +zone=33 +datum=WGS84 +units=m +no_defs");proj4.defs("EPSG:32632","+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs");mapPickLayers=[new ol.layer.Tile({visible:true,preload:Infinity,source:new ol.source.BingMaps({key:"Ak5AqjsEQ44KtAl7jHhrjGuzNshN1fZv3MOx2MUi0p4zFmq6XeWLKmyqeP2UgJK3",imagerySet:"AerialWithLabels",maxZoom:19})})];mapPickSource=new ol.source.Vector({wrapX:false});var e=new ol.style.Style({image:new ol.style.Icon({anchor:[.5,44],anchorXUnits:"fraction",anchorYUnits:"pixels",src:mapPin})});var t=new ol.layer.Vector({source:mapPickSource,style:e});mapPickLayers.push(t);var i=[813900,7262100,1798900,7959750];var n=new ol.View({center:[(i[0]+i[2])/2,(i[1]+i[3])/2],zoom:5,minZoom:6
});var s=new ol.Map({layers:mapPickLayers,loadTilesWhileInteracting:true,target:"mappick",view:n,controls:[new ol.control.FullScreen,new ol.control.Zoom]});var r=new ol.interaction.Draw({source:mapPickSource,type:"Point",style:new ol.style.Style({image:new ol.style.RegularShape({fill:new ol.style.Fill({color:"white"}),points:4,radius1:6,radius2:1})})});mapPickSource.on("addfeature",function(){mapPickSource.forEachFeature(function(e){coords=ol.proj.transform(e.getGeometry().getCoordinates(),"EPSG:3857","EPSG:4326");$("#find_location_easting").val(parseFloat(coords[0].toFixed(6)));$("#find_location_northing").val(parseFloat(coords[1].toFixed(6)));updateUtmPoint();s.getView().setCenter(e.getGeometry().getCoordinates());s.getView().setZoom(12);updateMunicipality()})});r.on("drawstart",function(){mapPickSource.clear()});$(".mappick-fields input").on("change",function(){switch($("input[name=mappick-coordinates-radio]:checked",".mappick-fields").attr("id")){case"mappick-decimal":$(".mappick-decimal-control").attr("readonly",false);$(".mappick-utm-control").attr("readonly",true);break;case"mappick-utm":default:$(".mappick-decimal-control").attr("readonly",true);$(".mappick-utm-control").attr("readonly",false)}});$(".mappick-decimal-control").on("change",function(){updateUtmPoint();updateMapPoint()});$(".mappick-utm-control").on("change",function(){updateDecimalPoint();updateMapPoint()});$(".mappick-fields").keydown(function(e){if(e.keyCode==13){e.preventDefault();document.activeElement.blur()}});s.addInteraction(r);updateUtmPoint();updateMapPoint()}function updateMunicipality(){easting=$("#find_location_easting").val();northing=$("#find_location_northing").val();var e="POINT("+easting+" "+northing+")";$.post(path+"api/geo/find",e,function(e){$("#find_municipality_term").val(e["municipality"]["term"]).trigger("change");$("#find_museum_module").val(e["museum"]["module"]);$("#find_museum_item").val(e["museum"]["item"]);$("#find_museum_display").val(e["museum"]["name"]).trigger("change")})}function updateMapPoint(){if($("#find_location_easting").is("input")){easting=$("#find_location_easting").val();northing=$("#find_location_northing").val()}else if($("#find_location_easting").is("div")){easting=$("#find_location_easting").text();northing=$("#find_location_northing").text()}if(easting&&northing){coords=ol.proj.transform([parseFloat(easting),parseFloat(northing)],"EPSG:4326","EPSG:3857");mapPickSource.clear();mapPickSource.addFeature(new ol.Feature({geometry:new ol.geom.Point(coords)}))}}function updateDecimalPoint(){easting=$("#find_location_utmEasting").val();northing=$("#find_location_utmNorthing").val();if(easting&&northing){coords=ol.proj.transform([parseFloat(easting),parseFloat(northing)],"EPSG:32632","EPSG:4326");$("#find_location_easting").val(coords[0].toFixed(6));$("#find_location_northing").val(coords[1].toFixed(6))}}function updateUtmPoint(){easting=$("#find_location_easting").val();northing=$("#find_location_northing").val();if(easting&&northing){coords=ol.proj.transform([parseFloat(easting),parseFloat(northing)],"EPSG:4326","EPSG:32632");$("#find_location_utmEasting").val(coords[0].toFixed(0));$("#find_location_utmNorthing").val(coords[1].toFixed(0))}}var initPeriod=function(){var e="find_dating_year";var t="find_dating_period";var i={concept:"dime.period"};$.post(path+"api/internal/vocabulary",JSON.stringify(i)).fail(function(){console.log("Error fetching period vocabulary")}).done(function(e){window.periodvocabulary=e.terms;initTimeline()});var n=function(e){var t={name:"NULL",parameters:{year_start:{value:-Infinity},year_end:{value:Infinity}}};for(var i in periodvocabulary){try{periodvocabstart=parseInt(periodvocabulary[i].parameters.year_start.value)}catch(e){periodvocabstart=null}try{periodvocabend=parseInt(periodvocabulary[i].parameters.year_end.value)}catch(e){periodvocabend=null}if(periodvocabend>=e&&e>=periodvocabstart){if(periodvocabstart>=t.parameters.year_start.value&&periodvocabend<=t.parameters.year_end.value){var t=periodvocabulary[i]}}}return t};var s=function(e){var t=e.attr("id");var i=t.split("-");var n=i[i.length-1];if(typeof periodvocabulary[n].parameters=="undefined"){var s="undefined"}else{try{if(isNaN(periodvocabulary[n].parameters.year_end.value)){throw"year end is NaN"}end=periodvocabulary[n].parameters.year_end.value}catch(e){end=(new Date).getFullYear()}try{if(isNaN(periodvocabulary[n].parameters.year_start.value)){throw"year end is NaN"}start=period.parameters.year_end.value}catch(e){start=-1e4}var s=start.toString()+" — "+end.toString()}var r=new Promise(function(t){e.attr({"data-toggle":"tooltip","data-placement":"right",title:s});e.tooltip();t(true)});r.then(function(t){e.tooltip("show")})};$("body").on({mouseenter:function(){s($(this))}},"#select2-"+t+"-results .select2-results__option.select2-results__option--highlighted");$("body").on({mouseenter:function(){s($(this))}},"#select2-"+t+"_span-results .select2-results__option.select2-results__option--highlighted");$("#"+e).on("keyup",function(){console.log(this.value);var e=parseInt(this.value);var i=n(e);$("#"+t).val(i.name);$("#"+t).trigger("change.select2")});$("#"+e+"_span").on("keyup",function(){var e=parseInt(this.value);var i=n(e);$("#"+t+"_span").val(i.name);$("#"+t+"_span").trigger("change.select2")});$("#"+e).on("focusout",function(){var t=parseInt(this.value);var i=parseInt($("#"+e+"_span").val());if(isNaN(t)||isNaN(i)){return true}if(i<t){var n=i;$(this).val(n);$("#"+e+"_span").val(t);$("#"+e+"_span").trigger("keyup");$("#"+e).trigger("keyup")}});$("#"+e+"_span").on("focusout",function(){var t=parseInt(this.value);if(isNaN(t)||isNaN(parseInt($("#"+e).val()))){return true}if(parseInt($("#"+e).val())>t){var i=parseInt($("#"+e).val());$(this).val(i);$("#"+e).val(t);$("#"+e).trigger("keyup");$("#"+e+"_span").trigger("keyup")}});$("#"+t).on("select2:select select2:unselecting",function(){period=periodvocabulary[this.value];if($("#"+e).val()==""){var t=period.parameters.year_start.value}else{var t=parseInt($("#"+e).val());if(t<parseInt(period.parameters.year_start.value)||t>parseInt(period.parameters.year_end.value)){t=period.parameters.year_start.value}}$("#"+e).val(t);$("#"+e).trigger("focusout")});$("#"+t+"_span").on("select2:select select2:unselecting",function(){period=periodvocabulary[this.value];if($("#"+e+"_span").val()==""){var t=period.parameters.year_end.value}else{var t=parseInt($("#"+e+"_span").val());if(t<parseInt(period.parameters.year_start.value)||t>parseInt(period.parameters.year_end.value)){t=period.parameters.year_end.value}}$("#"+e+"_span").val(t);$("#"+e+"_span").trigger("focusout")});$(".dating-button").removeClass("inactive");$("#oldtid-dating-button").on("click",function(t){t.preventDefault();$("#"+e).val("-9000");$("#"+e).trigger("keyup");$("#"+e+"_span").val("1066");$("#"+e+"_span").trigger("keyup");$("#historiktid-dating-button").removeClass("selected");$("#oldtid-dating-button").addClass("selected")});$("#historiktid-dating-button").on("click",function(t){t.preventDefault();$("#"+e).val("1067");$("#"+e).trigger("keyup");$("#"+e+"_span").val((new Date).getFullYear());$("#"+e+"_span").trigger("keyup");$("#oldtid-dating-button").removeClass("selected");$("#historiktid-dating-button").addClass("selected")})};$(document).ready(function(){$("#advanced-dating-button").on("click",function(e){e.preventDefault();$(".simple-dating").hide();$(".advanced-dating").show()});$("#oldtid-dating-button").on("click",function(e){e.preventDefault()});$("#historiktid-dating-button").on("click",function(e){e.preventDefault()});var e=function(){if($("#find_dating_year").val()<1067){$("#oldtid-dating-button").addClass("selected")}else{$("#historiktid-dating-button").addClass("selected")}};e();$("#find_dating_year").on("change",e())});$(document).ready(function(){editableNewRegisterRow();$("#register-table").bootstrapTable("hideLoading")});function hideEditableRegisterRow(){$("#register-table").find("tbody").find("a").not(".row-view, .row-edit, .row-save, .row-cancel, .row-delete").editable("hide")}function editableRegisterRow(e){hideEditableRegisterRow();$("#register-table").find("tbody").find("tr").eq(e).find("a").not(".row-view, .row-edit, .row-save, .row-cancel, .row-delete").editable("show")}function editableNewRegisterRow(){$("#register-new").find("a").not(".row-view, .row-edit, .row-save, .row-cancel, .row-delete").editable("show")}window.registerEvents={"click .row-view":function(e,t,i,n){alert("View row "+i.id)},"click .row-edit":function(e,t,i,n){editableRegisterRow(n)},"click .row-save":function(e,t,i,n){alert("Save row "+i.id)},"click .row-cancel":function(e,t,i,n){alert("Cancel row "+i.id)},"click .row-delete":function(e,t,i,n){$("#register-table").bootstrapTable("remove",{field:"id",values:[i.id]})}};var initSubtype=function(){var e="find_type_term";var t="find_classification_subtype";var i="find_dating_year";var n=function(){$("#"+t).select2({minimumResultsForSearch:11,width:"resolve",sorter:function(e){return e.sort(function(e,t){if(e.text>t.text){return 1}if(e.text<t.text){return-1}return 0})}});$("body").on({mouseenter:function(){var e=$(this);var t=e.attr("id");var i=t.split("-");var n=i[i.length-1];try{if(typeof subtypevocabulary[n].parameters!="undefined"){var s=subtypevocabulary[n].parameters;if(typeof s.year_start!="undefined"&&typeof s.year_end!="undefined"){var r=s.year_start.value+" — "+s.year_end.value}else if(typeof subtypevocabulary[n].parameters.period!="undefined"){var r=subtypevocabulary[n].parameters.period.value}else{var r="Undefined"}}else{var r="Undefined"}}catch(e){}var o=new Promise(function(t){e.attr({"data-toggle":"tooltip","data-placement":"right",title:r});e.tooltip();t(true)});o.then(function(t){e.tooltip("show")})}},"#select2-"+t+"-results .select2-results__option.select2-results__option--highlighted")};$("#"+i).on("focusout",function(){console.log($(this).val())});$("#"+i+"_span").on("focusout",function(){console.log($(this).val())});$("#"+e).on("select2:select select2:unselecting",function(){var e=$(this).val();console.log(e);if(e=="coin"){$("#find_mint_content").closest(".form-group").show();$("#find_secondary_term_looped").closest(".checkbox").show()}else{$("#find_mint_content").closest(".form-group").hide();$("#find_secondary_term_looped").closest(".checkbox").hide()}$("#"+t).empty();for(var i in subtypevocabulary){if(e==i.split(".")[0]&&i.split(".").length==2){subtypevocabulary[i].optionelement.appendTo("#"+t)}}n()});$("#"+t).on("select2:select select2:unselecting",function(){var s=$(this).val();console.log(s);if(s=="up"){$("#"+e).trigger("select2:select");$("#"+t).select2("open");return true}var r=$('<option value="up"> ↖</option>');if(s.split(".").length<3){$("#"+t).empty();$("#"+t).append(r);for(var o in subtypevocabulary){if(s.split(".")[0]==o.split(".")[0]&&s.split(".")[1]==o.split(".")[1]){subtypevocabulary[o].optionelement.appendTo("#"+t)}}$("#"+t).val(s);n();$("#"+t).select2("open")}try{var a=getYearsFromTarget(s);target_start_year=a.start;target_end_year=a.end;var l=parseInt($("#"+i).val());var h=parseInt($("#"+i+"_span").val());console.log([s,"target",target_start_year,target_end_year,"current",l,h]);if(isNaN(l)||l<target_start_year||l>target_end_year){$("#"+i).val(target_start_year)}if(isNaN(h)||h>target_end_year||h<target_start_year){$("#"+i+"_span").val(target_end_year)}$("#"+i).attr({min:target_start_year,max:target_end_year});$("#"+i+"_span").attr({max:target_end_year,max:target_end_year});$("#"+i).trigger("keyup");$("#"+i+"_span").trigger("keyup")}catch(e){console.log("something was probably undefined :(")}});$("#"+i).trigger("select2:select")};window.getYearsFromTarget=function(e){var t=parseInt($("#"+date_start_id).val());var i=parseInt($("#"+date_start_id+"_span").val());if(typeof subtypevocabulary[e].parameters.year_start!="undefined"){var n=parseInt(subtypevocabulary[e].parameters.year_start.value);var s=parseInt(subtypevocabulary[e].parameters.year_end.value)}else if(typeof subtypevocabulary[e].parameters.period!="undefined"){console.log(window.periodvocabulary);console.log(window.periodvocabulary[subtypevocabulary[e].parameters.period.value]);var n=parseInt(window.periodvocabulary[subtypevocabulary[e].parameters.period.value].parameters.year_start.value);var s=parseInt(window.periodvocabulary[subtypevocabulary[e].parameters.period.value].parameters.year_end.value)}return{start:n,end:s}};$(document).ready(function(){$("#find_classify").attr("data-toggle","false");window.type_id="find_type_term";window.subtype_id="find_classification_subtype";window.date_start_id="find_dating_year";var e={concept:"dime.find.type"};$.post(path+"api/internal/vocabulary",JSON.stringify(e)).fail(function(){console.log("Error fetching type vocabulary")}).done(function(e){window.typevocabulary=e.terms;var t={concept:"dime.find.subtype"};$.post(path+"api/internal/vocabulary",JSON.stringify(t)).fail(function(){console.log("Error fetching subtype vocabulary")}).done(function(e){window.subtypevocabulary=e.terms;for(var t in subtypevocabulary){subtypevocabulary[t].optionelement=$("#"+subtype_id+' option[value="'+t+'"]').detach()}initSubtype();initPeriod()})});$("#find_mint_content").closest(".form-group").hide();$("#find_secondary_term_looped").closest(".checkbox").hide()});
//# sourceMappingURL=ark.min.js.map