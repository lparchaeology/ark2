(function(e,t){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=e.document?t(e,true):function(e){if(!e.document){throw new Error("jQuery requires a window with a document")}return t(e)}}else{t(e)}})(typeof window!=="undefined"?window:this,function(e,t){var i=[];var n=e.document;var s=i.slice;var a=i.concat;var r=i.push;var o=i.indexOf;var l={};var h=l.toString;var c=l.hasOwnProperty;var u={};var d="2.2.4",f=function(e,t){return new f.fn.init(e,t)},p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,m=/^-ms-/,g=/-([\da-z])/gi,v=function(e,t){return t.toUpperCase()};f.fn=f.prototype={jquery:d,constructor:f,selector:"",length:0,toArray:function(){return s.call(this)},get:function(e){return e!=null?e<0?this[e+this.length]:this[e]:s.call(this)},pushStack:function(e){var t=f.merge(this.constructor(),e);t.prevObject=this;t.context=this.context;return t},each:function(e){return f.each(this,e)},map:function(e){return this.pushStack(f.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:r,sort:i.sort,splice:i.splice};f.extend=f.fn.extend=function(){var e,t,i,n,s,a,r=arguments[0]||{},o=1,l=arguments.length,h=false;if(typeof r==="boolean"){h=r;r=arguments[o]||{};o++}if(typeof r!=="object"&&!f.isFunction(r)){r={}}if(o===l){r=this;o--}for(;o<l;o++){if((e=arguments[o])!=null){for(t in e){i=r[t];n=e[t];if(r===n){continue}if(h&&n&&(f.isPlainObject(n)||(s=f.isArray(n)))){if(s){s=false;a=i&&f.isArray(i)?i:[]}else{a=i&&f.isPlainObject(i)?i:{}}r[t]=f.extend(h,a,n)}else if(n!==undefined){r[t]=n}}}}return r};f.extend({expando:"jQuery"+(d+Math.random()).replace(/\D/g,""),isReady:true,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return f.type(e)==="function"},isArray:Array.isArray,isWindow:function(e){return e!=null&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!f.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if(f.type(e)!=="object"||e.nodeType||f.isWindow(e)){return false}if(e.constructor&&!c.call(e,"constructor")&&!c.call(e.constructor.prototype||{},"isPrototypeOf")){return false}for(t in e){}return t===undefined||c.call(e,t)},isEmptyObject:function(e){var t;for(t in e){return false}return true},type:function(e){if(e==null){return e+""}return typeof e==="object"||typeof e==="function"?l[h.call(e)]||"object":typeof e},globalEval:function(e){var t,i=eval;e=f.trim(e);if(e){if(e.indexOf("use strict")===1){t=n.createElement("script");t.text=e;n.head.appendChild(t).parentNode.removeChild(t)}else{i(e)}}},camelCase:function(e){return e.replace(m,"ms-").replace(g,v)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,n=0;if(y(e)){i=e.length;for(;n<i;n++){if(t.call(e[n],n,e[n])===false){break}}}else{for(n in e){if(t.call(e[n],n,e[n])===false){break}}}return e},trim:function(e){return e==null?"":(e+"").replace(p,"")},makeArray:function(e,t){var i=t||[];if(e!=null){if(y(Object(e))){f.merge(i,typeof e==="string"?[e]:e)}else{r.call(i,e)}}return i},inArray:function(e,t,i){return t==null?-1:o.call(t,e,i)},merge:function(e,t){var i=+t.length,n=0,s=e.length;for(;n<i;n++){e[s++]=t[n]}e.length=s;return e},grep:function(e,t,i){var n,s=[],a=0,r=e.length,o=!i;for(;a<r;a++){n=!t(e[a],a);if(n!==o){s.push(e[a])}}return s},map:function(e,t,i){var n,s,r=0,o=[];if(y(e)){n=e.length;for(;r<n;r++){s=t(e[r],r,i);if(s!=null){o.push(s)}}}else{for(r in e){s=t(e[r],r,i);if(s!=null){o.push(s)}}}return a.apply([],o)},guid:1,proxy:function(e,t){var i,n,a;if(typeof t==="string"){i=e[t];t=e;e=i}if(!f.isFunction(e)){return undefined}n=s.call(arguments,2);a=function(){return e.apply(t||this,n.concat(s.call(arguments)))};a.guid=e.guid=e.guid||f.guid++;return a},now:Date.now,support:u});if(typeof Symbol==="function"){f.fn[Symbol.iterator]=i[Symbol.iterator]}f.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});function y(e){var t=!!e&&"length"in e&&e.length,i=f.type(e);if(i==="function"||f.isWindow(e)){return false}return i==="array"||t===0||typeof t==="number"&&t>0&&t-1 in e}var b=function(e){var t,i,n,s,a,r,o,l,h,c,u,d,f,p,m,g,v,y,b,w="sizzle"+1*new Date,x=e.document,_=0,C=0,k=ae(),T=ae(),S=ae(),M=function(e,t){if(e===t){u=true}return 0},D=1<<31,$={}.hasOwnProperty,E=[],A=E.pop,P=E.push,I=E.push,N=E.slice,O=function(e,t){var i=0,n=e.length;for(;i<n;i++){if(e[i]===t){return i}}return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j="\\["+R+"*("+L+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+R+"*\\]",U=":("+L+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|"+".*"+")\\)|)",H=new RegExp(R+"+","g"),z=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),B=new RegExp("^"+R+"*,"+R+"*"),V=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),q=new RegExp("="+R+"*([^\\]'\"]*?)"+R+"*\\]","g"),W=new RegExp(U),Y=new RegExp("^"+L+"$"),G={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},Z=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,X=/[+~]/,ee=/'|\\/g,te=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),ie=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)},ne=function(){d()};try{I.apply(E=N.call(x.childNodes),x.childNodes);E[x.childNodes.length].nodeType}catch(e){I={apply:E.length?function(e,t){P.apply(e,N.call(t))}:function(e,t){var i=e.length,n=0;while(e[i++]=t[n++]){}e.length=i-1}}}function se(e,t,n,s){var a,o,h,c,u,p,v,y,_=t&&t.ownerDocument,C=t?t.nodeType:9;n=n||[];if(typeof e!=="string"||!e||C!==1&&C!==9&&C!==11){return n}if(!s){if((t?t.ownerDocument||t:x)!==f){d(t)}t=t||f;if(m){if(C!==11&&(p=J.exec(e))){if(a=p[1]){if(C===9){if(h=t.getElementById(a)){if(h.id===a){n.push(h);return n}}else{return n}}else{if(_&&(h=_.getElementById(a))&&b(t,h)&&h.id===a){n.push(h);return n}}}else if(p[2]){I.apply(n,t.getElementsByTagName(e));return n}else if((a=p[3])&&i.getElementsByClassName&&t.getElementsByClassName){I.apply(n,t.getElementsByClassName(a));return n}}if(i.qsa&&!S[e+" "]&&(!g||!g.test(e))){if(C!==1){_=t;y=e}else if(t.nodeName.toLowerCase()!=="object"){if(c=t.getAttribute("id")){c=c.replace(ee,"\\$&")}else{t.setAttribute("id",c=w)}v=r(e);o=v.length;u=Y.test(c)?"#"+c:"[id='"+c+"']";while(o--){v[o]=u+" "+me(v[o])}y=v.join(",");_=X.test(e)&&fe(t.parentNode)||t}if(y){try{I.apply(n,_.querySelectorAll(y));return n}catch(e){}finally{if(c===w){t.removeAttribute("id")}}}}}}return l(e.replace(z,"$1"),t,n,s)}function ae(){var e=[];function t(i,s){if(e.push(i+" ")>n.cacheLength){delete t[e.shift()]}return t[i+" "]=s}return t}function re(e){e[w]=true;return e}function oe(e){var t=f.createElement("div");try{return!!e(t)}catch(e){return false}finally{if(t.parentNode){t.parentNode.removeChild(t)}t=null}}function le(e,t){var i=e.split("|"),s=i.length;while(s--){n.attrHandle[i[s]]=t}}function he(e,t){var i=t&&e,n=i&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||D)-(~e.sourceIndex||D);if(n){return n}if(i){while(i=i.nextSibling){if(i===t){return-1}}}return e?1:-1}function ce(e){return function(t){var i=t.nodeName.toLowerCase();return i==="input"&&t.type===e}}function ue(e){return function(t){var i=t.nodeName.toLowerCase();return(i==="input"||i==="button")&&t.type===e}}function de(e){return re(function(t){t=+t;return re(function(i,n){var s,a=e([],i.length,t),r=a.length;while(r--){if(i[s=a[r]]){i[s]=!(n[s]=i[s])}}})})}function fe(e){return e&&typeof e.getElementsByTagName!=="undefined"&&e}i=se.support={};a=se.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":false};d=se.setDocument=function(e){var t,s,r=e?e.ownerDocument||e:x;if(r===f||r.nodeType!==9||!r.documentElement){return f}f=r;p=f.documentElement;m=!a(f);if((s=f.defaultView)&&s.top!==s){if(s.addEventListener){s.addEventListener("unload",ne,false)}else if(s.attachEvent){s.attachEvent("onunload",ne)}}i.attributes=oe(function(e){e.className="i";return!e.getAttribute("className")});i.getElementsByTagName=oe(function(e){e.appendChild(f.createComment(""));return!e.getElementsByTagName("*").length});i.getElementsByClassName=Q.test(f.getElementsByClassName);i.getById=oe(function(e){p.appendChild(e).id=w;return!f.getElementsByName||!f.getElementsByName(w).length});if(i.getById){n.find["ID"]=function(e,t){if(typeof t.getElementById!=="undefined"&&m){var i=t.getElementById(e);return i?[i]:[]}};n.filter["ID"]=function(e){var t=e.replace(te,ie);return function(e){return e.getAttribute("id")===t}}}else{delete n.find["ID"];n.filter["ID"]=function(e){var t=e.replace(te,ie);return function(e){var i=typeof e.getAttributeNode!=="undefined"&&e.getAttributeNode("id");return i&&i.value===t}}}n.find["TAG"]=i.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!=="undefined"){return t.getElementsByTagName(e)}else if(i.qsa){return t.querySelectorAll(e)}}:function(e,t){var i,n=[],s=0,a=t.getElementsByTagName(e);if(e==="*"){while(i=a[s++]){if(i.nodeType===1){n.push(i)}}return n}return a};n.find["CLASS"]=i.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!=="undefined"&&m){return t.getElementsByClassName(e)}};v=[];g=[];if(i.qsa=Q.test(f.querySelectorAll)){oe(function(e){p.appendChild(e).innerHTML="<a id='"+w+"'></a>"+"<select id='"+w+"-\r\\' msallowcapture=''>"+"<option selected=''></option></select>";if(e.querySelectorAll("[msallowcapture^='']").length){g.push("[*^$]="+R+"*(?:''|\"\")")}if(!e.querySelectorAll("[selected]").length){g.push("\\["+R+"*(?:value|"+F+")")}if(!e.querySelectorAll("[id~="+w+"-]").length){g.push("~=")}if(!e.querySelectorAll(":checked").length){g.push(":checked")}if(!e.querySelectorAll("a#"+w+"+*").length){g.push(".#.+[+~]")}});oe(function(e){var t=f.createElement("input");t.setAttribute("type","hidden");e.appendChild(t).setAttribute("name","D");if(e.querySelectorAll("[name=d]").length){g.push("name"+R+"*[*^$|!~]?=")}if(!e.querySelectorAll(":enabled").length){g.push(":enabled",":disabled")}e.querySelectorAll("*,:x");g.push(",.*:")})}if(i.matchesSelector=Q.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector)){oe(function(e){i.disconnectedMatch=y.call(e,"div");y.call(e,"[s!='']:x");v.push("!=",U)})}g=g.length&&new RegExp(g.join("|"));v=v.length&&new RegExp(v.join("|"));t=Q.test(p.compareDocumentPosition);b=t||Q.test(p.contains)?function(e,t){var i=e.nodeType===9?e.documentElement:e,n=t&&t.parentNode;return e===n||!!(n&&n.nodeType===1&&(i.contains?i.contains(n):e.compareDocumentPosition&&e.compareDocumentPosition(n)&16))}:function(e,t){if(t){while(t=t.parentNode){if(t===e){return true}}}return false};M=t?function(e,t){if(e===t){u=true;return 0}var n=!e.compareDocumentPosition-!t.compareDocumentPosition;if(n){return n}n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1;if(n&1||!i.sortDetached&&t.compareDocumentPosition(e)===n){if(e===f||e.ownerDocument===x&&b(x,e)){return-1}if(t===f||t.ownerDocument===x&&b(x,t)){return 1}return c?O(c,e)-O(c,t):0}return n&4?-1:1}:function(e,t){if(e===t){u=true;return 0}var i,n=0,s=e.parentNode,a=t.parentNode,r=[e],o=[t];if(!s||!a){return e===f?-1:t===f?1:s?-1:a?1:c?O(c,e)-O(c,t):0}else if(s===a){return he(e,t)}i=e;while(i=i.parentNode){r.unshift(i)}i=t;while(i=i.parentNode){o.unshift(i)}while(r[n]===o[n]){n++}return n?he(r[n],o[n]):r[n]===x?-1:o[n]===x?1:0};return f};se.matches=function(e,t){return se(e,null,null,t)};se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f){d(e)}t=t.replace(q,"='$1']");if(i.matchesSelector&&m&&!S[t+" "]&&(!v||!v.test(t))&&(!g||!g.test(t))){try{var n=y.call(e,t);if(n||i.disconnectedMatch||e.document&&e.document.nodeType!==11){return n}}catch(e){}}return se(t,f,null,[e]).length>0};se.contains=function(e,t){if((e.ownerDocument||e)!==f){d(e)}return b(e,t)};se.attr=function(e,t){if((e.ownerDocument||e)!==f){d(e)}var s=n.attrHandle[t.toLowerCase()],a=s&&$.call(n.attrHandle,t.toLowerCase())?s(e,t,!m):undefined;return a!==undefined?a:i.attributes||!m?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null};se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};se.uniqueSort=function(e){var t,n=[],s=0,a=0;u=!i.detectDuplicates;c=!i.sortStable&&e.slice(0);e.sort(M);if(u){while(t=e[a++]){if(t===e[a]){s=n.push(a)}}while(s--){e.splice(n[s],1)}}c=null;return e};s=se.getText=function(e){var t,i="",n=0,a=e.nodeType;if(!a){while(t=e[n++]){i+=s(t)}}else if(a===1||a===9||a===11){if(typeof e.textContent==="string"){return e.textContent}else{for(e=e.firstChild;e;e=e.nextSibling){i+=s(e)}}}else if(a===3||a===4){return e.nodeValue}return i};n=se.selectors={cacheLength:50,createPseudo:re,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(te,ie);e[3]=(e[3]||e[4]||e[5]||"").replace(te,ie);if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1].slice(0,3)==="nth"){if(!e[3]){se.error(e[0])}e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd"));e[5]=+(e[7]+e[8]||e[3]==="odd")}else if(e[3]){se.error(e[0])}return e},PSEUDO:function(e){var t,i=!e[6]&&e[2];if(G["CHILD"].test(e[0])){return null}if(e[3]){e[2]=e[4]||e[5]||""}else if(i&&W.test(i)&&(t=r(i,true))&&(t=i.indexOf(")",i.length-t)-i.length)){e[0]=e[0].slice(0,t);e[2]=i.slice(0,t)}return e.slice(0,3)}},filter:{TAG:function(e){var t=e.replace(te,ie).toLowerCase();return e==="*"?function(){return true}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=k[e+" "];return t||(t=new RegExp("(^|"+R+")"+e+"("+R+"|$)"))&&k(e,function(e){return t.test(typeof e.className==="string"&&e.className||typeof e.getAttribute!=="undefined"&&e.getAttribute("class")||"")})},ATTR:function(e,t,i){return function(n){var s=se.attr(n,e);if(s==null){return t==="!="}if(!t){return true}s+="";return t==="="?s===i:t==="!="?s!==i:t==="^="?i&&s.indexOf(i)===0:t==="*="?i&&s.indexOf(i)>-1:t==="$="?i&&s.slice(-i.length)===i:t==="~="?(" "+s.replace(H," ")+" ").indexOf(i)>-1:t==="|="?s===i||s.slice(0,i.length+1)===i+"-":false}},CHILD:function(e,t,i,n,s){var a=e.slice(0,3)!=="nth",r=e.slice(-4)!=="last",o=t==="of-type";return n===1&&s===0?function(e){return!!e.parentNode}:function(t,i,l){var h,c,u,d,f,p,m=a!==r?"nextSibling":"previousSibling",g=t.parentNode,v=o&&t.nodeName.toLowerCase(),y=!l&&!o,b=false;if(g){if(a){while(m){d=t;while(d=d[m]){if(o?d.nodeName.toLowerCase()===v:d.nodeType===1){return false}}p=m=e==="only"&&!p&&"nextSibling"}return true}p=[r?g.firstChild:g.lastChild];if(r&&y){d=g;u=d[w]||(d[w]={});c=u[d.uniqueID]||(u[d.uniqueID]={});h=c[e]||[];f=h[0]===_&&h[1];b=f&&h[2];d=f&&g.childNodes[f];while(d=++f&&d&&d[m]||(b=f=0)||p.pop()){if(d.nodeType===1&&++b&&d===t){c[e]=[_,f,b];break}}}else{if(y){d=t;u=d[w]||(d[w]={});c=u[d.uniqueID]||(u[d.uniqueID]={});h=c[e]||[];f=h[0]===_&&h[1];b=f}if(b===false){while(d=++f&&d&&d[m]||(b=f=0)||p.pop()){if((o?d.nodeName.toLowerCase()===v:d.nodeType===1)&&++b){if(y){u=d[w]||(d[w]={});c=u[d.uniqueID]||(u[d.uniqueID]={});c[e]=[_,b]}if(d===t){break}}}}}b-=s;return b===n||b%n===0&&b/n>=0}}},PSEUDO:function(e,t){var i,s=n.pseudos[e]||n.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);if(s[w]){return s(t)}if(s.length>1){i=[e,e,"",t];return n.setFilters.hasOwnProperty(e.toLowerCase())?re(function(e,i){var n,a=s(e,t),r=a.length;while(r--){n=O(e,a[r]);e[n]=!(i[n]=a[r])}}):function(e){return s(e,0,i)}}return s}},pseudos:{not:re(function(e){var t=[],i=[],n=o(e.replace(z,"$1"));return n[w]?re(function(e,t,i,s){var a,r=n(e,null,s,[]),o=e.length;while(o--){if(a=r[o]){e[o]=!(t[o]=a)}}}):function(e,s,a){t[0]=e;n(t,null,a,i);t[0]=null;return!i.pop()}}),has:re(function(e){return function(t){return se(e,t).length>0}}),contains:re(function(e){e=e.replace(te,ie);return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:re(function(e){if(!Y.test(e||"")){se.error("unsupported lang: "+e)}e=e.replace(te,ie).toLowerCase();return function(t){var i;do{if(i=m?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang")){i=i.toLowerCase();return i===e||i.indexOf(e+"-")===0}}while((t=t.parentNode)&&t.nodeType===1);return false}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling){if(e.nodeType<6){return false}}return true},parent:function(e){return!n.pseudos["empty"](e)},header:function(e){return K.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:de(function(){return[0]}),last:de(function(e,t){return[t-1]}),eq:de(function(e,t,i){return[i<0?i+t:i]}),even:de(function(e,t){var i=0;for(;i<t;i+=2){e.push(i)}return e}),odd:de(function(e,t){var i=1;for(;i<t;i+=2){e.push(i)}return e}),lt:de(function(e,t,i){var n=i<0?i+t:i;for(;--n>=0;){e.push(n)}return e}),gt:de(function(e,t,i){var n=i<0?i+t:i;for(;++n<t;){e.push(n)}return e})}};n.pseudos["nth"]=n.pseudos["eq"];for(t in{radio:true,checkbox:true,file:true,password:true,image:true}){n.pseudos[t]=ce(t)}for(t in{submit:true,reset:true}){n.pseudos[t]=ue(t)}function pe(){}pe.prototype=n.filters=n.pseudos;n.setFilters=new pe;r=se.tokenize=function(e,t){var i,s,a,r,o,l,h,c=T[e+" "];if(c){return t?0:c.slice(0)}o=e;l=[];h=n.preFilter;while(o){if(!i||(s=B.exec(o))){if(s){o=o.slice(s[0].length)||o}l.push(a=[])}i=false;if(s=V.exec(o)){i=s.shift();a.push({value:i,type:s[0].replace(z," ")});o=o.slice(i.length)}for(r in n.filter){if((s=G[r].exec(o))&&(!h[r]||(s=h[r](s)))){i=s.shift();a.push({value:i,type:r,matches:s});o=o.slice(i.length)}}if(!i){break}}return t?o.length:o?se.error(e):T(e,l).slice(0)};function me(e){var t=0,i=e.length,n="";for(;t<i;t++){n+=e[t].value}return n}function ge(e,t,i){var n=t.dir,s=i&&n==="parentNode",a=C++;return t.first?function(t,i,a){while(t=t[n]){if(t.nodeType===1||s){return e(t,i,a)}}}:function(t,i,r){var o,l,h,c=[_,a];if(r){while(t=t[n]){if(t.nodeType===1||s){if(e(t,i,r)){return true}}}}else{while(t=t[n]){if(t.nodeType===1||s){h=t[w]||(t[w]={});l=h[t.uniqueID]||(h[t.uniqueID]={});if((o=l[n])&&o[0]===_&&o[1]===a){return c[2]=o[2]}else{l[n]=c;if(c[2]=e(t,i,r)){return true}}}}}}}function ve(e){return e.length>1?function(t,i,n){var s=e.length;while(s--){if(!e[s](t,i,n)){return false}}return true}:e[0]}function ye(e,t,i){var n=0,s=t.length;for(;n<s;n++){se(e,t[n],i)}return i}function be(e,t,i,n,s){var a,r=[],o=0,l=e.length,h=t!=null;for(;o<l;o++){if(a=e[o]){if(!i||i(a,n,s)){r.push(a);if(h){t.push(o)}}}}return r}function we(e,t,i,n,s,a){if(n&&!n[w]){n=we(n)}if(s&&!s[w]){s=we(s,a)}return re(function(a,r,o,l){var h,c,u,d=[],f=[],p=r.length,m=a||ye(t||"*",o.nodeType?[o]:o,[]),g=e&&(a||!t)?be(m,d,e,o,l):m,v=i?s||(a?e:p||n)?[]:r:g;if(i){i(g,v,o,l)}if(n){h=be(v,f);n(h,[],o,l);c=h.length;while(c--){if(u=h[c]){v[f[c]]=!(g[f[c]]=u)}}}if(a){if(s||e){if(s){h=[];c=v.length;while(c--){if(u=v[c]){h.push(g[c]=u)}}s(null,v=[],h,l)}c=v.length;while(c--){if((u=v[c])&&(h=s?O(a,u):d[c])>-1){a[h]=!(r[h]=u)}}}}else{v=be(v===r?v.splice(p,v.length):v);if(s){s(null,r,v,l)}else{I.apply(r,v)}}})}function xe(e){var t,i,s,a=e.length,r=n.relative[e[0].type],o=r||n.relative[" "],l=r?1:0,c=ge(function(e){return e===t},o,true),u=ge(function(e){return O(t,e)>-1},o,true),d=[function(e,i,n){var s=!r&&(n||i!==h)||((t=i).nodeType?c(e,i,n):u(e,i,n));t=null;return s}];for(;l<a;l++){if(i=n.relative[e[l].type]){d=[ge(ve(d),i)]}else{i=n.filter[e[l].type].apply(null,e[l].matches);if(i[w]){s=++l;for(;s<a;s++){if(n.relative[e[s].type]){break}}return we(l>1&&ve(d),l>1&&me(e.slice(0,l-1).concat({value:e[l-2].type===" "?"*":""})).replace(z,"$1"),i,l<s&&xe(e.slice(l,s)),s<a&&xe(e=e.slice(s)),s<a&&me(e))}d.push(i)}}return ve(d)}function _e(e,t){var i=t.length>0,s=e.length>0,a=function(a,r,o,l,c){var u,p,g,v=0,y="0",b=a&&[],w=[],x=h,C=a||s&&n.find["TAG"]("*",c),k=_+=x==null?1:Math.random()||.1,T=C.length;if(c){h=r===f||r||c}for(;y!==T&&(u=C[y])!=null;y++){if(s&&u){p=0;if(!r&&u.ownerDocument!==f){d(u);o=!m}while(g=e[p++]){if(g(u,r||f,o)){l.push(u);break}}if(c){_=k}}if(i){if(u=!g&&u){v--}if(a){b.push(u)}}}v+=y;if(i&&y!==v){p=0;while(g=t[p++]){g(b,w,r,o)}if(a){if(v>0){while(y--){if(!(b[y]||w[y])){w[y]=A.call(l)}}}w=be(w)}I.apply(l,w);if(c&&!a&&w.length>0&&v+t.length>1){se.uniqueSort(l)}}if(c){_=k;h=x}return b};return i?re(a):a}o=se.compile=function(e,t){var i,n=[],s=[],a=S[e+" "];if(!a){if(!t){t=r(e)}i=t.length;while(i--){a=xe(t[i]);if(a[w]){n.push(a)}else{s.push(a)}}a=S(e,_e(s,n));a.selector=e}return a};l=se.select=function(e,t,s,a){var l,h,c,u,d,f=typeof e==="function"&&e,p=!a&&r(e=f.selector||e);s=s||[];if(p.length===1){h=p[0]=p[0].slice(0);if(h.length>2&&(c=h[0]).type==="ID"&&i.getById&&t.nodeType===9&&m&&n.relative[h[1].type]){t=(n.find["ID"](c.matches[0].replace(te,ie),t)||[])[0];if(!t){return s}else if(f){t=t.parentNode}e=e.slice(h.shift().value.length)}l=G["needsContext"].test(e)?0:h.length;while(l--){c=h[l];if(n.relative[u=c.type]){break}if(d=n.find[u]){if(a=d(c.matches[0].replace(te,ie),X.test(h[0].type)&&fe(t.parentNode)||t)){h.splice(l,1);e=a.length&&me(h);if(!e){I.apply(s,a);return s}break}}}}(f||o(e,p))(a,t,!m,s,!t||X.test(e)&&fe(t.parentNode)||t);return s};i.sortStable=w.split("").sort(M).join("")===w;i.detectDuplicates=!!u;d();i.sortDetached=oe(function(e){return e.compareDocumentPosition(f.createElement("div"))&1});if(!oe(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild.getAttribute("href")==="#"})){le("type|href|height|width",function(e,t,i){if(!i){return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}})}if(!i.attributes||!oe(function(e){e.innerHTML="<input/>";e.firstChild.setAttribute("value","");return e.firstChild.getAttribute("value")===""})){le("value",function(e,t,i){if(!i&&e.nodeName.toLowerCase()==="input"){return e.defaultValue}})}if(!oe(function(e){return e.getAttribute("disabled")==null})){le(F,function(e,t,i){var n;if(!i){return e[t]===true?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}})}return se}(e);f.find=b;f.expr=b.selectors;f.expr[":"]=f.expr.pseudos;f.uniqueSort=f.unique=b.uniqueSort;f.text=b.getText;f.isXMLDoc=b.isXML;f.contains=b.contains;var w=function(e,t,i){var n=[],s=i!==undefined;while((e=e[t])&&e.nodeType!==9){if(e.nodeType===1){if(s&&f(e).is(i)){break}n.push(e)}}return n};var x=function(e,t){var i=[];for(;e;e=e.nextSibling){if(e.nodeType===1&&e!==t){i.push(e)}}return i};var _=f.expr.match.needsContext;var C=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/;var k=/^.[^:#\[\.,]*$/;function T(e,t,i){if(f.isFunction(t)){return f.grep(e,function(e,n){return!!t.call(e,n,e)!==i})}if(t.nodeType){return f.grep(e,function(e){return e===t!==i})}if(typeof t==="string"){if(k.test(t)){return f.filter(t,e,i)}t=f.filter(t,e)}return f.grep(e,function(e){return o.call(t,e)>-1!==i})}f.filter=function(e,t,i){var n=t[0];if(i){e=":not("+e+")"}return t.length===1&&n.nodeType===1?f.find.matchesSelector(n,e)?[n]:[]:f.find.matches(e,f.grep(t,function(e){return e.nodeType===1}))};f.fn.extend({find:function(e){var t,i=this.length,n=[],s=this;if(typeof e!=="string"){return this.pushStack(f(e).filter(function(){for(t=0;t<i;t++){if(f.contains(s[t],this)){return true}}}))}for(t=0;t<i;t++){f.find(e,s[t],n)}n=this.pushStack(i>1?f.unique(n):n);n.selector=this.selector?this.selector+" "+e:e;return n},filter:function(e){return this.pushStack(T(this,e||[],false))},not:function(e){return this.pushStack(T(this,e||[],true))},is:function(e){return!!T(this,typeof e==="string"&&_.test(e)?f(e):e||[],false).length}});var S,M=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,D=f.fn.init=function(e,t,i){var s,a;if(!e){return this}i=i||S;if(typeof e==="string"){if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3){s=[null,e,null]}else{s=M.exec(e)}if(s&&(s[1]||!t)){if(s[1]){t=t instanceof f?t[0]:t;f.merge(this,f.parseHTML(s[1],t&&t.nodeType?t.ownerDocument||t:n,true));if(C.test(s[1])&&f.isPlainObject(t)){for(s in t){if(f.isFunction(this[s])){this[s](t[s])}else{this.attr(s,t[s])}}}return this}else{a=n.getElementById(s[2]);if(a&&a.parentNode){this.length=1;this[0]=a}this.context=n;this.selector=e;return this}}else if(!t||t.jquery){return(t||i).find(e)}else{return this.constructor(t).find(e)}}else if(e.nodeType){this.context=this[0]=e;this.length=1;return this}else if(f.isFunction(e)){return i.ready!==undefined?i.ready(e):e(f)}if(e.selector!==undefined){this.selector=e.selector;this.context=e.context}return f.makeArray(e,this)};D.prototype=f.fn;S=f(n);var $=/^(?:parents|prev(?:Until|All))/,E={children:true,contents:true,next:true,prev:true};f.fn.extend({has:function(e){var t=f(e,this),i=t.length;return this.filter(function(){var e=0;for(;e<i;e++){if(f.contains(this,t[e])){return true}}})},closest:function(e,t){var i,n=0,s=this.length,a=[],r=_.test(e)||typeof e!=="string"?f(e,t||this.context):0;for(;n<s;n++){for(i=this[n];i&&i!==t;i=i.parentNode){if(i.nodeType<11&&(r?r.index(i)>-1:i.nodeType===1&&f.find.matchesSelector(i,e))){a.push(i);break}}}return this.pushStack(a.length>1?f.uniqueSort(a):a)},index:function(e){if(!e){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof e==="string"){return o.call(f(e),this[0])}return o.call(this,e.jquery?e[0]:e)},add:function(e,t){return this.pushStack(f.uniqueSort(f.merge(this.get(),f(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function A(e,t){while((e=e[t])&&e.nodeType!==1){}return e}f.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return w(e,"parentNode")},parentsUntil:function(e,t,i){return w(e,"parentNode",i)},next:function(e){return A(e,"nextSibling")},prev:function(e){return A(e,"previousSibling")},nextAll:function(e){return w(e,"nextSibling")},prevAll:function(e){return w(e,"previousSibling")},nextUntil:function(e,t,i){return w(e,"nextSibling",i)},prevUntil:function(e,t,i){return w(e,"previousSibling",i)},siblings:function(e){return x((e.parentNode||{}).firstChild,e)},children:function(e){return x(e.firstChild)},contents:function(e){return e.contentDocument||f.merge([],e.childNodes)}},function(e,t){f.fn[e]=function(i,n){var s=f.map(this,t,i);if(e.slice(-5)!=="Until"){n=i}if(n&&typeof n==="string"){s=f.filter(n,s)}if(this.length>1){if(!E[e]){f.uniqueSort(s)}if($.test(e)){s.reverse()}}return this.pushStack(s)}});var P=/\S+/g;function I(e){var t={};f.each(e.match(P)||[],function(e,i){t[i]=true});return t}f.Callbacks=function(e){e=typeof e==="string"?I(e):f.extend({},e);var t,i,n,s,a=[],r=[],o=-1,l=function(){s=e.once;n=t=true;for(;r.length;o=-1){i=r.shift();while(++o<a.length){if(a[o].apply(i[0],i[1])===false&&e.stopOnFalse){o=a.length;i=false}}}if(!e.memory){i=false}t=false;if(s){if(i){a=[]}else{a=""}}},h={add:function(){if(a){if(i&&!t){o=a.length-1;r.push(i)}(function t(i){f.each(i,function(i,n){if(f.isFunction(n)){if(!e.unique||!h.has(n)){a.push(n)}}else if(n&&n.length&&f.type(n)!=="string"){t(n)}})})(arguments);if(i&&!t){l()}}return this},remove:function(){f.each(arguments,function(e,t){var i;while((i=f.inArray(t,a,i))>-1){a.splice(i,1);if(i<=o){o--}}});return this},has:function(e){return e?f.inArray(e,a)>-1:a.length>0},empty:function(){if(a){a=[]}return this},disable:function(){s=r=[];a=i="";return this},disabled:function(){return!a},lock:function(){s=r=[];if(!i){a=i=""}return this},locked:function(){return!!s},fireWith:function(e,i){if(!s){i=i||[];i=[e,i.slice?i.slice():i];r.push(i);if(!t){l()}}return this},fire:function(){h.fireWith(this,arguments);return this},fired:function(){return!!n}};return h};f.extend({Deferred:function(e){var t=[["resolve","done",f.Callbacks("once memory"),"resolved"],["reject","fail",f.Callbacks("once memory"),"rejected"],["notify","progress",f.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){s.done(arguments).fail(arguments);return this},then:function(){var e=arguments;return f.Deferred(function(i){f.each(t,function(t,a){var r=f.isFunction(e[t])&&e[t];s[a[1]](function(){var e=r&&r.apply(this,arguments);if(e&&f.isFunction(e.promise)){e.promise().progress(i.notify).done(i.resolve).fail(i.reject)}else{i[a[0]+"With"](this===n?i.promise():this,r?[e]:arguments)}})});e=null}).promise()},promise:function(e){return e!=null?f.extend(e,n):n}},s={};n.pipe=n.then;f.each(t,function(e,a){var r=a[2],o=a[3];n[a[1]]=r.add;if(o){r.add(function(){i=o},t[e^1][2].disable,t[2][2].lock)}s[a[0]]=function(){s[a[0]+"With"](this===s?n:this,arguments);return this};s[a[0]+"With"]=r.fireWith});n.promise(s);if(e){e.call(s,s)}return s},when:function(e){var t=0,i=s.call(arguments),n=i.length,a=n!==1||e&&f.isFunction(e.promise)?n:0,r=a===1?e:f.Deferred(),o=function(e,t,i){return function(n){t[e]=this;i[e]=arguments.length>1?s.call(arguments):n;if(i===l){r.notifyWith(t,i)}else if(!--a){r.resolveWith(t,i)}}},l,h,c;if(n>1){l=new Array(n);h=new Array(n);c=new Array(n);for(;t<n;t++){if(i[t]&&f.isFunction(i[t].promise)){i[t].promise().progress(o(t,h,l)).done(o(t,c,i)).fail(r.reject)}else{--a}}}if(!a){r.resolveWith(c,i)}return r.promise()}});var N;f.fn.ready=function(e){f.ready.promise().done(e);return this};f.extend({isReady:false,readyWait:1,holdReady:function(e){if(e){f.readyWait++}else{f.ready(true)}},ready:function(e){if(e===true?--f.readyWait:f.isReady){return}f.isReady=true;if(e!==true&&--f.readyWait>0){return}N.resolveWith(n,[f]);if(f.fn.triggerHandler){f(n).triggerHandler("ready");f(n).off("ready")}}});function O(){n.removeEventListener("DOMContentLoaded",O);e.removeEventListener("load",O);f.ready()}f.ready.promise=function(t){if(!N){N=f.Deferred();if(n.readyState==="complete"||n.readyState!=="loading"&&!n.documentElement.doScroll){e.setTimeout(f.ready)}else{n.addEventListener("DOMContentLoaded",O);e.addEventListener("load",O)}}return N.promise(t)};f.ready.promise();var F=function(e,t,i,n,s,a,r){var o=0,l=e.length,h=i==null;if(f.type(i)==="object"){s=true;for(o in i){F(e,t,o,i[o],true,a,r)}}else if(n!==undefined){s=true;if(!f.isFunction(n)){r=true}if(h){if(r){t.call(e,n);t=null}else{h=t;t=function(e,t,i){return h.call(f(e),i)}}}if(t){for(;o<l;o++){t(e[o],i,r?n:n.call(e[o],o,t(e[o],i)))}}}return s?e:h?t.call(e):l?t(e[0],i):a};var R=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function L(){this.expando=f.expando+L.uid++}L.uid=1;L.prototype={register:function(e,t){var i=t||{};if(e.nodeType){e[this.expando]=i;
}else{Object.defineProperty(e,this.expando,{value:i,writable:true,configurable:true})}return e[this.expando]},cache:function(e){if(!R(e)){return{}}var t=e[this.expando];if(!t){t={};if(R(e)){if(e.nodeType){e[this.expando]=t}else{Object.defineProperty(e,this.expando,{value:t,configurable:true})}}}return t},set:function(e,t,i){var n,s=this.cache(e);if(typeof t==="string"){s[t]=i}else{for(n in t){s[n]=t[n]}}return s},get:function(e,t){return t===undefined?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,i){var n;if(t===undefined||t&&typeof t==="string"&&i===undefined){n=this.get(e,t);return n!==undefined?n:this.get(e,f.camelCase(t))}this.set(e,t,i);return i!==undefined?i:t},remove:function(e,t){var i,n,s,a=e[this.expando];if(a===undefined){return}if(t===undefined){this.register(e)}else{if(f.isArray(t)){n=t.concat(t.map(f.camelCase))}else{s=f.camelCase(t);if(t in a){n=[t,s]}else{n=s;n=n in a?[n]:n.match(P)||[]}}i=n.length;while(i--){delete a[n[i]]}}if(t===undefined||f.isEmptyObject(a)){if(e.nodeType){e[this.expando]=undefined}else{delete e[this.expando]}}},hasData:function(e){var t=e[this.expando];return t!==undefined&&!f.isEmptyObject(t)}};var j=new L;var U=new L;var H=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,z=/[A-Z]/g;function B(e,t,i){var n;if(i===undefined&&e.nodeType===1){n="data-"+t.replace(z,"-$&").toLowerCase();i=e.getAttribute(n);if(typeof i==="string"){try{i=i==="true"?true:i==="false"?false:i==="null"?null:+i+""===i?+i:H.test(i)?f.parseJSON(i):i}catch(e){}U.set(e,t,i)}else{i=undefined}}return i}f.extend({hasData:function(e){return U.hasData(e)||j.hasData(e)},data:function(e,t,i){return U.access(e,t,i)},removeData:function(e,t){U.remove(e,t)},_data:function(e,t,i){return j.access(e,t,i)},_removeData:function(e,t){j.remove(e,t)}});f.fn.extend({data:function(e,t){var i,n,s,a=this[0],r=a&&a.attributes;if(e===undefined){if(this.length){s=U.get(a);if(a.nodeType===1&&!j.get(a,"hasDataAttrs")){i=r.length;while(i--){if(r[i]){n=r[i].name;if(n.indexOf("data-")===0){n=f.camelCase(n.slice(5));B(a,n,s[n])}}}j.set(a,"hasDataAttrs",true)}}return s}if(typeof e==="object"){return this.each(function(){U.set(this,e)})}return F(this,function(t){var i,n;if(a&&t===undefined){i=U.get(a,e)||U.get(a,e.replace(z,"-$&").toLowerCase());if(i!==undefined){return i}n=f.camelCase(e);i=U.get(a,n);if(i!==undefined){return i}i=B(a,n,undefined);if(i!==undefined){return i}return}n=f.camelCase(e);this.each(function(){var i=U.get(this,n);U.set(this,n,t);if(e.indexOf("-")>-1&&i!==undefined){U.set(this,e,t)}})},null,t,arguments.length>1,null,true)},removeData:function(e){return this.each(function(){U.remove(this,e)})}});f.extend({queue:function(e,t,i){var n;if(e){t=(t||"fx")+"queue";n=j.get(e,t);if(i){if(!n||f.isArray(i)){n=j.access(e,t,f.makeArray(i))}else{n.push(i)}}return n||[]}},dequeue:function(e,t){t=t||"fx";var i=f.queue(e,t),n=i.length,s=i.shift(),a=f._queueHooks(e,t),r=function(){f.dequeue(e,t)};if(s==="inprogress"){s=i.shift();n--}if(s){if(t==="fx"){i.unshift("inprogress")}delete a.stop;s.call(e,r,a)}if(!n&&a){a.empty.fire()}},_queueHooks:function(e,t){var i=t+"queueHooks";return j.get(e,i)||j.access(e,i,{empty:f.Callbacks("once memory").add(function(){j.remove(e,[t+"queue",i])})})}});f.fn.extend({queue:function(e,t){var i=2;if(typeof e!=="string"){t=e;e="fx";i--}if(arguments.length<i){return f.queue(this[0],e)}return t===undefined?this:this.each(function(){var i=f.queue(this,e,t);f._queueHooks(this,e);if(e==="fx"&&i[0]!=="inprogress"){f.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){f.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,s=f.Deferred(),a=this,r=this.length,o=function(){if(!--n){s.resolveWith(a,[a])}};if(typeof e!=="string"){t=e;e=undefined}e=e||"fx";while(r--){i=j.get(a[r],e+"queueHooks");if(i&&i.empty){n++;i.empty.add(o)}}o();return s.promise(t)}});var V=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var q=new RegExp("^(?:([+-])=|)("+V+")([a-z%]*)$","i");var W=["Top","Right","Bottom","Left"];var Y=function(e,t){e=t||e;return f.css(e,"display")==="none"||!f.contains(e.ownerDocument,e)};function G(e,t,i,n){var s,a=1,r=20,o=n?function(){return n.cur()}:function(){return f.css(e,t,"")},l=o(),h=i&&i[3]||(f.cssNumber[t]?"":"px"),c=(f.cssNumber[t]||h!=="px"&&+l)&&q.exec(f.css(e,t));if(c&&c[3]!==h){h=h||c[3];i=i||[];c=+l||1;do{a=a||".5";c=c/a;f.style(e,t,c+h)}while(a!==(a=o()/l)&&a!==1&&--r)}if(i){c=+c||+l||0;s=i[1]?c+(i[1]+1)*i[2]:+i[2];if(n){n.unit=h;n.start=c;n.end=s}}return s}var Z=/^(?:checkbox|radio)$/i;var K=/<([\w:-]+)/;var Q=/^$|\/(?:java|ecma)script/i;var J={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};J.optgroup=J.option;J.tbody=J.tfoot=J.colgroup=J.caption=J.thead;J.th=J.td;function X(e,t){var i=typeof e.getElementsByTagName!=="undefined"?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!=="undefined"?e.querySelectorAll(t||"*"):[];return t===undefined||t&&f.nodeName(e,t)?f.merge([e],i):i}function ee(e,t){var i=0,n=e.length;for(;i<n;i++){j.set(e[i],"globalEval",!t||j.get(t[i],"globalEval"))}}var te=/<|&#?\w+;/;function ie(e,t,i,n,s){var a,r,o,l,h,c,u=t.createDocumentFragment(),d=[],p=0,m=e.length;for(;p<m;p++){a=e[p];if(a||a===0){if(f.type(a)==="object"){f.merge(d,a.nodeType?[a]:a)}else if(!te.test(a)){d.push(t.createTextNode(a))}else{r=r||u.appendChild(t.createElement("div"));o=(K.exec(a)||["",""])[1].toLowerCase();l=J[o]||J._default;r.innerHTML=l[1]+f.htmlPrefilter(a)+l[2];c=l[0];while(c--){r=r.lastChild}f.merge(d,r.childNodes);r=u.firstChild;r.textContent=""}}}u.textContent="";p=0;while(a=d[p++]){if(n&&f.inArray(a,n)>-1){if(s){s.push(a)}continue}h=f.contains(a.ownerDocument,a);r=X(u.appendChild(a),"script");if(h){ee(r)}if(i){c=0;while(a=r[c++]){if(Q.test(a.type||"")){i.push(a)}}}}return u}(function(){var e=n.createDocumentFragment(),t=e.appendChild(n.createElement("div")),i=n.createElement("input");i.setAttribute("type","radio");i.setAttribute("checked","checked");i.setAttribute("name","t");t.appendChild(i);u.checkClone=t.cloneNode(true).cloneNode(true).lastChild.checked;t.innerHTML="<textarea>x</textarea>";u.noCloneChecked=!!t.cloneNode(true).lastChild.defaultValue})();var ne=/^key/,se=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ae=/^([^.]*)(?:\.(.+)|)/;function re(){return true}function oe(){return false}function le(){try{return n.activeElement}catch(e){}}function he(e,t,i,n,s,a){var r,o;if(typeof t==="object"){if(typeof i!=="string"){n=n||i;i=undefined}for(o in t){he(e,o,i,n,t[o],a)}return e}if(n==null&&s==null){s=i;n=i=undefined}else if(s==null){if(typeof i==="string"){s=n;n=undefined}else{s=n;n=i;i=undefined}}if(s===false){s=oe}else if(!s){return e}if(a===1){r=s;s=function(e){f().off(e);return r.apply(this,arguments)};s.guid=r.guid||(r.guid=f.guid++)}return e.each(function(){f.event.add(this,t,s,n,i)})}f.event={global:{},add:function(e,t,i,n,s){var a,r,o,l,h,c,u,d,p,m,g,v=j.get(e);if(!v){return}if(i.handler){a=i;i=a.handler;s=a.selector}if(!i.guid){i.guid=f.guid++}if(!(l=v.events)){l=v.events={}}if(!(r=v.handle)){r=v.handle=function(t){return typeof f!=="undefined"&&f.event.triggered!==t.type?f.event.dispatch.apply(e,arguments):undefined}}t=(t||"").match(P)||[""];h=t.length;while(h--){o=ae.exec(t[h])||[];p=g=o[1];m=(o[2]||"").split(".").sort();if(!p){continue}u=f.event.special[p]||{};p=(s?u.delegateType:u.bindType)||p;u=f.event.special[p]||{};c=f.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&f.expr.match.needsContext.test(s),namespace:m.join(".")},a);if(!(d=l[p])){d=l[p]=[];d.delegateCount=0;if(!u.setup||u.setup.call(e,n,m,r)===false){if(e.addEventListener){e.addEventListener(p,r)}}}if(u.add){u.add.call(e,c);if(!c.handler.guid){c.handler.guid=i.guid}}if(s){d.splice(d.delegateCount++,0,c)}else{d.push(c)}f.event.global[p]=true}},remove:function(e,t,i,n,s){var a,r,o,l,h,c,u,d,p,m,g,v=j.hasData(e)&&j.get(e);if(!v||!(l=v.events)){return}t=(t||"").match(P)||[""];h=t.length;while(h--){o=ae.exec(t[h])||[];p=g=o[1];m=(o[2]||"").split(".").sort();if(!p){for(p in l){f.event.remove(e,p+t[h],i,n,true)}continue}u=f.event.special[p]||{};p=(n?u.delegateType:u.bindType)||p;d=l[p]||[];o=o[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)");r=a=d.length;while(a--){c=d[a];if((s||g===c.origType)&&(!i||i.guid===c.guid)&&(!o||o.test(c.namespace))&&(!n||n===c.selector||n==="**"&&c.selector)){d.splice(a,1);if(c.selector){d.delegateCount--}if(u.remove){u.remove.call(e,c)}}}if(r&&!d.length){if(!u.teardown||u.teardown.call(e,m,v.handle)===false){f.removeEvent(e,p,v.handle)}delete l[p]}}if(f.isEmptyObject(l)){j.remove(e,"handle events")}},dispatch:function(e){e=f.event.fix(e);var t,i,n,a,r,o=[],l=s.call(arguments),h=(j.get(this,"events")||{})[e.type]||[],c=f.event.special[e.type]||{};l[0]=e;e.delegateTarget=this;if(c.preDispatch&&c.preDispatch.call(this,e)===false){return}o=f.event.handlers.call(this,e,h);t=0;while((a=o[t++])&&!e.isPropagationStopped()){e.currentTarget=a.elem;i=0;while((r=a.handlers[i++])&&!e.isImmediatePropagationStopped()){if(!e.rnamespace||e.rnamespace.test(r.namespace)){e.handleObj=r;e.data=r.data;n=((f.event.special[r.origType]||{}).handle||r.handler).apply(a.elem,l);if(n!==undefined){if((e.result=n)===false){e.preventDefault();e.stopPropagation()}}}}}if(c.postDispatch){c.postDispatch.call(this,e)}return e.result},handlers:function(e,t){var i,n,s,a,r=[],o=t.delegateCount,l=e.target;if(o&&l.nodeType&&(e.type!=="click"||isNaN(e.button)||e.button<1)){for(;l!==this;l=l.parentNode||this){if(l.nodeType===1&&(l.disabled!==true||e.type!=="click")){n=[];for(i=0;i<o;i++){a=t[i];s=a.selector+" ";if(n[s]===undefined){n[s]=a.needsContext?f(s,this).index(l)>-1:f.find(s,this,null,[l]).length}if(n[s]){n.push(a)}}if(n.length){r.push({elem:l,handlers:n})}}}}if(o<t.length){r.push({elem:this,handlers:t.slice(o)})}return r},props:("altKey bubbles cancelable ctrlKey currentTarget detail eventPhase "+"metaKey relatedTarget shiftKey target timeStamp view which").split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){if(e.which==null){e.which=t.charCode!=null?t.charCode:t.keyCode}return e}},mouseHooks:{props:("button buttons clientX clientY offsetX offsetY pageX pageY "+"screenX screenY toElement").split(" "),filter:function(e,t){var i,s,a,r=t.button;if(e.pageX==null&&t.clientX!=null){i=e.target.ownerDocument||n;s=i.documentElement;a=i.body;e.pageX=t.clientX+(s&&s.scrollLeft||a&&a.scrollLeft||0)-(s&&s.clientLeft||a&&a.clientLeft||0);e.pageY=t.clientY+(s&&s.scrollTop||a&&a.scrollTop||0)-(s&&s.clientTop||a&&a.clientTop||0)}if(!e.which&&r!==undefined){e.which=r&1?1:r&2?3:r&4?2:0}return e}},fix:function(e){if(e[f.expando]){return e}var t,i,s,a=e.type,r=e,o=this.fixHooks[a];if(!o){this.fixHooks[a]=o=se.test(a)?this.mouseHooks:ne.test(a)?this.keyHooks:{}}s=o.props?this.props.concat(o.props):this.props;e=new f.Event(r);t=s.length;while(t--){i=s[t];e[i]=r[i]}if(!e.target){e.target=n}if(e.target.nodeType===3){e.target=e.target.parentNode}return o.filter?o.filter(e,r):e},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==le()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===le()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&f.nodeName(this,"input")){this.click();return false}},_default:function(e){return f.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){if(e.result!==undefined&&e.originalEvent){e.originalEvent.returnValue=e.result}}}}};f.removeEvent=function(e,t,i){if(e.removeEventListener){e.removeEventListener(t,i)}};f.Event=function(e,t){if(!(this instanceof f.Event)){return new f.Event(e,t)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&e.returnValue===false?re:oe}else{this.type=e}if(t){f.extend(this,t)}this.timeStamp=e&&e.timeStamp||f.now();this[f.expando]=true};f.Event.prototype={constructor:f.Event,isDefaultPrevented:oe,isPropagationStopped:oe,isImmediatePropagationStopped:oe,isSimulated:false,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=re;if(e&&!this.isSimulated){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=re;if(e&&!this.isSimulated){e.stopPropagation()}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=re;if(e&&!this.isSimulated){e.stopImmediatePropagation()}this.stopPropagation()}};f.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){f.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,s=e.relatedTarget,a=e.handleObj;if(!s||s!==n&&!f.contains(n,s)){e.type=a.origType;i=a.handler.apply(this,arguments);e.type=t}return i}}});f.fn.extend({on:function(e,t,i,n){return he(this,e,t,i,n)},one:function(e,t,i,n){return he(this,e,t,i,n,1)},off:function(e,t,i){var n,s;if(e&&e.preventDefault&&e.handleObj){n=e.handleObj;f(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler);return this}if(typeof e==="object"){for(s in e){this.off(s,t,e[s])}return this}if(t===false||typeof t==="function"){i=t;t=undefined}if(i===false){i=oe}return this.each(function(){f.event.remove(this,e,i,t)})}});var ce=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ue=/<script|<style|<link/i,de=/checked\s*(?:[^=]|=\s*.checked.)/i,fe=/^true\/(.*)/,pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function me(e,t){return f.nodeName(e,"table")&&f.nodeName(t.nodeType!==11?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ge(e){e.type=(e.getAttribute("type")!==null)+"/"+e.type;return e}function ve(e){var t=fe.exec(e.type);if(t){e.type=t[1]}else{e.removeAttribute("type")}return e}function ye(e,t){var i,n,s,a,r,o,l,h;if(t.nodeType!==1){return}if(j.hasData(e)){a=j.access(e);r=j.set(t,a);h=a.events;if(h){delete r.handle;r.events={};for(s in h){for(i=0,n=h[s].length;i<n;i++){f.event.add(t,s,h[s][i])}}}}if(U.hasData(e)){o=U.access(e);l=f.extend({},o);U.set(t,l)}}function be(e,t){var i=t.nodeName.toLowerCase();if(i==="input"&&Z.test(e.type)){t.checked=e.checked}else if(i==="input"||i==="textarea"){t.defaultValue=e.defaultValue}}function we(e,t,i,n){t=a.apply([],t);var s,r,o,l,h,c,d=0,p=e.length,m=p-1,g=t[0],v=f.isFunction(g);if(v||p>1&&typeof g==="string"&&!u.checkClone&&de.test(g)){return e.each(function(s){var a=e.eq(s);if(v){t[0]=g.call(this,s,a.html())}we(a,t,i,n)})}if(p){s=ie(t,e[0].ownerDocument,false,e,n);r=s.firstChild;if(s.childNodes.length===1){s=r}if(r||n){o=f.map(X(s,"script"),ge);l=o.length;for(;d<p;d++){h=s;if(d!==m){h=f.clone(h,true,true);if(l){f.merge(o,X(h,"script"))}}i.call(e[d],h,d)}if(l){c=o[o.length-1].ownerDocument;f.map(o,ve);for(d=0;d<l;d++){h=o[d];if(Q.test(h.type||"")&&!j.access(h,"globalEval")&&f.contains(c,h)){if(h.src){if(f._evalUrl){f._evalUrl(h.src)}}else{f.globalEval(h.textContent.replace(pe,""))}}}}}}return e}function xe(e,t,i){var n,s=t?f.filter(t,e):e,a=0;for(;(n=s[a])!=null;a++){if(!i&&n.nodeType===1){f.cleanData(X(n))}if(n.parentNode){if(i&&f.contains(n.ownerDocument,n)){ee(X(n,"script"))}n.parentNode.removeChild(n)}}return e}f.extend({htmlPrefilter:function(e){return e.replace(ce,"<$1></$2>")},clone:function(e,t,i){var n,s,a,r,o=e.cloneNode(true),l=f.contains(e.ownerDocument,e);if(!u.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!f.isXMLDoc(e)){r=X(o);a=X(e);for(n=0,s=a.length;n<s;n++){be(a[n],r[n])}}if(t){if(i){a=a||X(e);r=r||X(o);for(n=0,s=a.length;n<s;n++){ye(a[n],r[n])}}else{ye(e,o)}}r=X(o,"script");if(r.length>0){ee(r,!l&&X(e,"script"))}return o},cleanData:function(e){var t,i,n,s=f.event.special,a=0;for(;(i=e[a])!==undefined;a++){if(R(i)){if(t=i[j.expando]){if(t.events){for(n in t.events){if(s[n]){f.event.remove(i,n)}else{f.removeEvent(i,n,t.handle)}}}i[j.expando]=undefined}if(i[U.expando]){i[U.expando]=undefined}}}}});f.fn.extend({domManip:we,detach:function(e){return xe(this,e,true)},remove:function(e){return xe(this,e)},text:function(e){return F(this,function(e){return e===undefined?f.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=e}})},null,e,arguments.length)},append:function(){return we(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=me(this,e);t.appendChild(e)}})},prepend:function(){return we(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=me(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return we(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this)}})},after:function(){return we(this,arguments,function(e){if(this.parentNode){this.parentNode.insertBefore(e,this.nextSibling)}})},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){if(e.nodeType===1){f.cleanData(X(e,false));e.textContent=""}}return this},clone:function(e,t){e=e==null?false:e;t=t==null?e:t;return this.map(function(){return f.clone(this,e,t)})},html:function(e){return F(this,function(e){var t=this[0]||{},i=0,n=this.length;if(e===undefined&&t.nodeType===1){return t.innerHTML}if(typeof e==="string"&&!ue.test(e)&&!J[(K.exec(e)||["",""])[1].toLowerCase()]){e=f.htmlPrefilter(e);try{for(;i<n;i++){t=this[i]||{};if(t.nodeType===1){f.cleanData(X(t,false));t.innerHTML=e}}t=0}catch(e){}}if(t){this.empty().append(e)}},null,e,arguments.length)},replaceWith:function(){var e=[];return we(this,arguments,function(t){var i=this.parentNode;if(f.inArray(this,e)<0){f.cleanData(X(this));if(i){i.replaceChild(t,this)}}},e)}});f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){f.fn[e]=function(e){var i,n=[],s=f(e),a=s.length-1,o=0;for(;o<=a;o++){i=o===a?this:this.clone(true);f(s[o])[t](i);r.apply(n,i.get())}return this.pushStack(n)}});var _e,Ce={HTML:"block",BODY:"block"};function ke(e,t){var i=f(t.createElement(e)).appendTo(t.body),n=f.css(i[0],"display");i.detach();return n}function Te(e){var t=n,i=Ce[e];if(!i){i=ke(e,t);if(i==="none"||!i){_e=(_e||f("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement);t=_e[0].contentDocument;t.write();t.close();i=ke(e,t);_e.detach()}Ce[e]=i}return i}var Se=/^margin/;var Me=new RegExp("^("+V+")(?!px)[a-z%]+$","i");var De=function(t){var i=t.ownerDocument.defaultView;if(!i||!i.opener){i=e}return i.getComputedStyle(t)};var $e=function(e,t,i,n){var s,a,r={};for(a in t){r[a]=e.style[a];e.style[a]=t[a]}s=i.apply(e,n||[]);for(a in t){e.style[a]=r[a]}return s};var Ee=n.documentElement;(function(){var t,i,s,a,r=n.createElement("div"),o=n.createElement("div");if(!o.style){return}o.style.backgroundClip="content-box";o.cloneNode(true).style.backgroundClip="";u.clearCloneStyle=o.style.backgroundClip==="content-box";r.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;"+"padding:0;margin-top:1px;position:absolute";r.appendChild(o);function l(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;"+"position:relative;display:block;"+"margin:auto;border:1px;padding:1px;"+"top:1%;width:50%";o.innerHTML="";Ee.appendChild(r);var n=e.getComputedStyle(o);t=n.top!=="1%";a=n.marginLeft==="2px";i=n.width==="4px";o.style.marginRight="50%";s=n.marginRight==="4px";Ee.removeChild(r)}f.extend(u,{pixelPosition:function(){l();return t},boxSizingReliable:function(){if(i==null){l()}return i},pixelMarginRight:function(){if(i==null){l()}return s},reliableMarginLeft:function(){if(i==null){l()}return a},reliableMarginRight:function(){var t,i=o.appendChild(n.createElement("div"));i.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;"+"display:block;margin:0;border:0;padding:0";i.style.marginRight=i.style.width="0";o.style.width="1px";Ee.appendChild(r);t=!parseFloat(e.getComputedStyle(i).marginRight);Ee.removeChild(r);o.removeChild(i);return t}})})();function Ae(e,t,i){var n,s,a,r,o=e.style;i=i||De(e);r=i?i.getPropertyValue(t)||i[t]:undefined;if((r===""||r===undefined)&&!f.contains(e.ownerDocument,e)){r=f.style(e,t)}if(i){if(!u.pixelMarginRight()&&Me.test(r)&&Se.test(t)){n=o.width;s=o.minWidth;a=o.maxWidth;o.minWidth=o.maxWidth=o.width=r;r=i.width;o.width=n;o.minWidth=s;o.maxWidth=a}}return r!==undefined?r+"":r}function Pe(e,t){return{get:function(){if(e()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}var Ie=/^(none|table(?!-c[ea]).+)/,Ne={position:"absolute",visibility:"hidden",display:"block"},Oe={letterSpacing:"0",fontWeight:"400"},Fe=["Webkit","O","Moz","ms"],Re=n.createElement("div").style;function Le(e){if(e in Re){return e}var t=e[0].toUpperCase()+e.slice(1),i=Fe.length;while(i--){e=Fe[i]+t;if(e in Re){return e}}}function je(e,t,i){var n=q.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function Ue(e,t,i,n,s){var a=i===(n?"border":"content")?4:t==="width"?1:0,r=0;for(;a<4;a+=2){if(i==="margin"){r+=f.css(e,i+W[a],true,s)}if(n){if(i==="content"){r-=f.css(e,"padding"+W[a],true,s)}if(i!=="margin"){r-=f.css(e,"border"+W[a]+"Width",true,s)}}else{r+=f.css(e,"padding"+W[a],true,s);if(i!=="padding"){r+=f.css(e,"border"+W[a]+"Width",true,s)}}}return r}function He(e,t,i){var n=true,s=t==="width"?e.offsetWidth:e.offsetHeight,a=De(e),r=f.css(e,"boxSizing",false,a)==="border-box";if(s<=0||s==null){s=Ae(e,t,a);if(s<0||s==null){s=e.style[t]}if(Me.test(s)){return s}n=r&&(u.boxSizingReliable()||s===e.style[t]);s=parseFloat(s)||0}return s+Ue(e,t,i||(r?"border":"content"),n,a)+"px"}function ze(e,t){var i,n,s,a=[],r=0,o=e.length;for(;r<o;r++){n=e[r];if(!n.style){continue}a[r]=j.get(n,"olddisplay");i=n.style.display;if(t){if(!a[r]&&i==="none"){n.style.display=""}if(n.style.display===""&&Y(n)){a[r]=j.access(n,"olddisplay",Te(n.nodeName))}}else{s=Y(n);if(i!=="none"||!s){j.set(n,"olddisplay",s?i:f.css(n,"display"))}}}for(r=0;r<o;r++){n=e[r];if(!n.style){continue}if(!t||n.style.display==="none"||n.style.display===""){n.style.display=t?a[r]||"":"none"}}return e}f.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Ae(e,"opacity");return i===""?"1":i}}}},cssNumber:{animationIterationCount:true,columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{float:"cssFloat"},style:function(e,t,i,n){if(!e||e.nodeType===3||e.nodeType===8||!e.style){return}var s,a,r,o=f.camelCase(t),l=e.style;t=f.cssProps[o]||(f.cssProps[o]=Le(o)||o);r=f.cssHooks[t]||f.cssHooks[o];if(i!==undefined){a=typeof i;if(a==="string"&&(s=q.exec(i))&&s[1]){i=G(e,t,s);a="number"}if(i==null||i!==i){return}if(a==="number"){i+=s&&s[3]||(f.cssNumber[o]?"":"px")}if(!u.clearCloneStyle&&i===""&&t.indexOf("background")===0){l[t]="inherit"}if(!r||!("set"in r)||(i=r.set(e,i,n))!==undefined){l[t]=i}}else{if(r&&"get"in r&&(s=r.get(e,false,n))!==undefined){return s}return l[t]}},css:function(e,t,i,n){var s,a,r,o=f.camelCase(t);t=f.cssProps[o]||(f.cssProps[o]=Le(o)||o);r=f.cssHooks[t]||f.cssHooks[o];if(r&&"get"in r){s=r.get(e,true,i)}if(s===undefined){s=Ae(e,t,n)}if(s==="normal"&&t in Oe){s=Oe[t]}if(i===""||i){a=parseFloat(s);return i===true||isFinite(a)?a||0:s}return s}});f.each(["height","width"],function(e,t){f.cssHooks[t]={get:function(e,i,n){if(i){return Ie.test(f.css(e,"display"))&&e.offsetWidth===0?$e(e,Ne,function(){return He(e,t,n)}):He(e,t,n)}},set:function(e,i,n){var s,a=n&&De(e),r=n&&Ue(e,t,n,f.css(e,"boxSizing",false,a)==="border-box",a);if(r&&(s=q.exec(i))&&(s[3]||"px")!=="px"){e.style[t]=i;i=f.css(e,t)}return je(e,i,r)}}});f.cssHooks.marginLeft=Pe(u.reliableMarginLeft,function(e,t){if(t){return(parseFloat(Ae(e,"marginLeft"))||e.getBoundingClientRect().left-$e(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}});f.cssHooks.marginRight=Pe(u.reliableMarginRight,function(e,t){if(t){return $e(e,{display:"inline-block"},Ae,[e,"marginRight"])}});f.each({margin:"",padding:"",border:"Width"},function(e,t){f.cssHooks[e+t]={expand:function(i){var n=0,s={},a=typeof i==="string"?i.split(" "):[i];for(;n<4;n++){s[e+W[n]+t]=a[n]||a[n-2]||a[0]}return s}};if(!Se.test(e)){f.cssHooks[e+t].set=je}});f.fn.extend({css:function(e,t){return F(this,function(e,t,i){var n,s,a={},r=0;if(f.isArray(t)){n=De(e);s=t.length;for(;r<s;r++){a[t[r]]=f.css(e,t[r],false,n)}return a}return i!==undefined?f.style(e,t,i):f.css(e,t)},e,t,arguments.length>1)},show:function(){return ze(this,true)},hide:function(){return ze(this)},toggle:function(e){if(typeof e==="boolean"){return e?this.show():this.hide()}return this.each(function(){if(Y(this)){f(this).show()}else{f(this).hide()}})}});function Be(e,t,i,n,s){return new Be.prototype.init(e,t,i,n,s)}f.Tween=Be;Be.prototype={constructor:Be,init:function(e,t,i,n,s,a){this.elem=e;this.prop=i;this.easing=s||f.easing._default;this.options=t;this.start=this.now=this.cur();this.end=n;this.unit=a||(f.cssNumber[i]?"":"px")},cur:function(){var e=Be.propHooks[this.prop];return e&&e.get?e.get(this):Be.propHooks._default.get(this)},run:function(e){var t,i=Be.propHooks[this.prop];if(this.options.duration){this.pos=t=f.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration)}else{this.pos=t=e}this.now=(this.end-this.start)*t+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(i&&i.set){i.set(this)}else{Be.propHooks._default.set(this)}return this}};Be.prototype.init.prototype=Be.prototype;Be.propHooks={_default:{get:function(e){var t;if(e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null){return e.elem[e.prop]}t=f.css(e.elem,e.prop,"");return!t||t==="auto"?0:t},set:function(e){if(f.fx.step[e.prop]){f.fx.step[e.prop](e)}else if(e.elem.nodeType===1&&(e.elem.style[f.cssProps[e.prop]]!=null||f.cssHooks[e.prop])){f.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}};Be.propHooks.scrollTop=Be.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};f.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"};f.fx=Be.prototype.init;f.fx.step={};var Ve,qe,We=/^(?:toggle|show|hide)$/,Ye=/queueHooks$/;function Ge(){e.setTimeout(function(){Ve=undefined});return Ve=f.now()}function Ze(e,t){var i,n=0,s={height:e};t=t?1:0;for(;n<4;n+=2-t){i=W[n];s["margin"+i]=s["padding"+i]=e}if(t){s.opacity=s.width=e}return s}function Ke(e,t,i){var n,s=(Xe.tweeners[t]||[]).concat(Xe.tweeners["*"]),a=0,r=s.length;for(;a<r;a++){if(n=s[a].call(i,t,e)){return n}}}function Qe(e,t,i){var n,s,a,r,o,l,h,c,u=this,d={},p=e.style,m=e.nodeType&&Y(e),g=j.get(e,"fxshow");if(!i.queue){o=f._queueHooks(e,"fx");if(o.unqueued==null){o.unqueued=0;l=o.empty.fire;o.empty.fire=function(){if(!o.unqueued){l()}}}o.unqueued++;u.always(function(){u.always(function(){o.unqueued--;if(!f.queue(e,"fx").length){o.empty.fire()}})})}if(e.nodeType===1&&("height"in t||"width"in t)){i.overflow=[p.overflow,p.overflowX,p.overflowY];h=f.css(e,"display");c=h==="none"?j.get(e,"olddisplay")||Te(e.nodeName):h;if(c==="inline"&&f.css(e,"float")==="none"){p.display="inline-block"}}if(i.overflow){p.overflow="hidden";u.always(function(){p.overflow=i.overflow[0];p.overflowX=i.overflow[1];p.overflowY=i.overflow[2]})}for(n in t){s=t[n];if(We.exec(s)){delete t[n];a=a||s==="toggle";if(s===(m?"hide":"show")){if(s==="show"&&g&&g[n]!==undefined){m=true}else{continue}}d[n]=g&&g[n]||f.style(e,n)}else{h=undefined}}if(!f.isEmptyObject(d)){if(g){if("hidden"in g){m=g.hidden}}else{g=j.access(e,"fxshow",{})}if(a){g.hidden=!m}if(m){f(e).show()}else{u.done(function(){f(e).hide()})}u.done(function(){var t;j.remove(e,"fxshow");for(t in d){f.style(e,t,d[t])}});for(n in d){r=Ke(m?g[n]:0,n,u);if(!(n in g)){g[n]=r.start;if(m){r.end=r.start;r.start=n==="width"||n==="height"?1:0}}}}else if((h==="none"?Te(e.nodeName):h)==="inline"){p.display=h}}function Je(e,t){var i,n,s,a,r;for(i in e){n=f.camelCase(i);s=t[n];a=e[i];if(f.isArray(a)){s=a[1];a=e[i]=a[0]}if(i!==n){e[n]=a;delete e[i]}r=f.cssHooks[n];if(r&&"expand"in r){a=r.expand(a);delete e[n];for(i in a){if(!(i in e)){e[i]=a[i];t[i]=s}}}else{t[n]=s}}}function Xe(e,t,i){var n,s,a=0,r=Xe.prefilters.length,o=f.Deferred().always(function(){delete l.elem}),l=function(){if(s){return false}var t=Ve||Ge(),i=Math.max(0,h.startTime+h.duration-t),n=i/h.duration||0,a=1-n,r=0,l=h.tweens.length;for(;r<l;r++){h.tweens[r].run(a)}o.notifyWith(e,[h,a,i]);if(a<1&&l){return i}else{o.resolveWith(e,[h]);return false}},h=o.promise({elem:e,props:f.extend({},t),opts:f.extend(true,{specialEasing:{},easing:f.easing._default},i),originalProperties:t,originalOptions:i,startTime:Ve||Ge(),duration:i.duration,tweens:[],createTween:function(t,i){var n=f.Tween(e,h.opts,t,i,h.opts.specialEasing[t]||h.opts.easing);h.tweens.push(n);return n},stop:function(t){var i=0,n=t?h.tweens.length:0;if(s){return this}s=true;for(;i<n;i++){h.tweens[i].run(1)}if(t){o.notifyWith(e,[h,1,0]);o.resolveWith(e,[h,t])}else{o.rejectWith(e,[h,t])}return this}}),c=h.props;Je(c,h.opts.specialEasing);for(;a<r;a++){n=Xe.prefilters[a].call(h,e,c,h.opts);if(n){if(f.isFunction(n.stop)){f._queueHooks(h.elem,h.opts.queue).stop=f.proxy(n.stop,n)}return n}}f.map(c,Ke,h);if(f.isFunction(h.opts.start)){h.opts.start.call(e,h)}f.fx.timer(f.extend(l,{elem:e,anim:h,queue:h.opts.queue}));return h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}f.Animation=f.extend(Xe,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);G(i.elem,e,q.exec(t),i);return i}]},tweener:function(e,t){if(f.isFunction(e)){t=e;e=["*"]}else{e=e.match(P)}var i,n=0,s=e.length;for(;n<s;n++){i=e[n];Xe.tweeners[i]=Xe.tweeners[i]||[];Xe.tweeners[i].unshift(t)}},prefilters:[Qe],prefilter:function(e,t){if(t){Xe.prefilters.unshift(e)}else{Xe.prefilters.push(e)}}});f.speed=function(e,t,i){var n=e&&typeof e==="object"?f.extend({},e):{complete:i||!i&&t||f.isFunction(e)&&e,duration:e,easing:i&&t||t&&!f.isFunction(t)&&t};n.duration=f.fx.off?0:typeof n.duration==="number"?n.duration:n.duration in f.fx.speeds?f.fx.speeds[n.duration]:f.fx.speeds._default;if(n.queue==null||n.queue===true){n.queue="fx"}n.old=n.complete;n.complete=function(){if(f.isFunction(n.old)){n.old.call(this)}if(n.queue){f.dequeue(this,n.queue)}};return n};f.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Y).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var s=f.isEmptyObject(e),a=f.speed(t,i,n),r=function(){var t=Xe(this,f.extend({},e),a);if(s||j.get(this,"finish")){t.stop(true)}};r.finish=r;return s||a.queue===false?this.each(r):this.queue(a.queue,r)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop;t(i)};if(typeof e!=="string"){i=t;t=e;e=undefined}if(t&&e!==false){this.queue(e||"fx",[])}return this.each(function(){var t=true,s=e!=null&&e+"queueHooks",a=f.timers,r=j.get(this);if(s){if(r[s]&&r[s].stop){n(r[s])}}else{for(s in r){if(r[s]&&r[s].stop&&Ye.test(s)){n(r[s])}}}for(s=a.length;s--;){if(a[s].elem===this&&(e==null||a[s].queue===e)){a[s].anim.stop(i);t=false;a.splice(s,1)}}if(t||!i){f.dequeue(this,e)}})},finish:function(e){if(e!==false){e=e||"fx"}return this.each(function(){var t,i=j.get(this),n=i[e+"queue"],s=i[e+"queueHooks"],a=f.timers,r=n?n.length:0;i.finish=true;f.queue(this,e,[]);if(s&&s.stop){s.stop.call(this,true)}for(t=a.length;t--;){if(a[t].elem===this&&a[t].queue===e){a[t].anim.stop(true);a.splice(t,1)}}for(t=0;t<r;t++){if(n[t]&&n[t].finish){n[t].finish.call(this)}}delete i.finish})}});f.each(["toggle","show","hide"],function(e,t){var i=f.fn[t];f.fn[t]=function(e,n,s){return e==null||typeof e==="boolean"?i.apply(this,arguments):this.animate(Ze(t,true),e,n,s);
}});f.each({slideDown:Ze("show"),slideUp:Ze("hide"),slideToggle:Ze("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){f.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}});f.timers=[];f.fx.tick=function(){var e,t=0,i=f.timers;Ve=f.now();for(;t<i.length;t++){e=i[t];if(!e()&&i[t]===e){i.splice(t--,1)}}if(!i.length){f.fx.stop()}Ve=undefined};f.fx.timer=function(e){f.timers.push(e);if(e()){f.fx.start()}else{f.timers.pop()}};f.fx.interval=13;f.fx.start=function(){if(!qe){qe=e.setInterval(f.fx.tick,f.fx.interval)}};f.fx.stop=function(){e.clearInterval(qe);qe=null};f.fx.speeds={slow:600,fast:200,_default:400};f.fn.delay=function(t,i){t=f.fx?f.fx.speeds[t]||t:t;i=i||"fx";return this.queue(i,function(i,n){var s=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(s)}})};(function(){var e=n.createElement("input"),t=n.createElement("select"),i=t.appendChild(n.createElement("option"));e.type="checkbox";u.checkOn=e.value!=="";u.optSelected=i.selected;t.disabled=true;u.optDisabled=!i.disabled;e=n.createElement("input");e.value="t";e.type="radio";u.radioValue=e.value==="t"})();var et,tt=f.expr.attrHandle;f.fn.extend({attr:function(e,t){return F(this,f.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){f.removeAttr(this,e)})}});f.extend({attr:function(e,t,i){var n,s,a=e.nodeType;if(a===3||a===8||a===2){return}if(typeof e.getAttribute==="undefined"){return f.prop(e,t,i)}if(a!==1||!f.isXMLDoc(e)){t=t.toLowerCase();s=f.attrHooks[t]||(f.expr.match.bool.test(t)?et:undefined)}if(i!==undefined){if(i===null){f.removeAttr(e,t);return}if(s&&"set"in s&&(n=s.set(e,i,t))!==undefined){return n}e.setAttribute(t,i+"");return i}if(s&&"get"in s&&(n=s.get(e,t))!==null){return n}n=f.find.attr(e,t);return n==null?undefined:n},attrHooks:{type:{set:function(e,t){if(!u.radioValue&&t==="radio"&&f.nodeName(e,"input")){var i=e.value;e.setAttribute("type",t);if(i){e.value=i}return t}}}},removeAttr:function(e,t){var i,n,s=0,a=t&&t.match(P);if(a&&e.nodeType===1){while(i=a[s++]){n=f.propFix[i]||i;if(f.expr.match.bool.test(i)){e[n]=false}e.removeAttribute(i)}}}});et={set:function(e,t,i){if(t===false){f.removeAttr(e,i)}else{e.setAttribute(i,i)}return i}};f.each(f.expr.match.bool.source.match(/\w+/g),function(e,t){var i=tt[t]||f.find.attr;tt[t]=function(e,t,n){var s,a;if(!n){a=tt[t];tt[t]=s;s=i(e,t,n)!=null?t.toLowerCase():null;tt[t]=a}return s}});var it=/^(?:input|select|textarea|button)$/i,nt=/^(?:a|area)$/i;f.fn.extend({prop:function(e,t){return F(this,f.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[f.propFix[e]||e]})}});f.extend({prop:function(e,t,i){var n,s,a=e.nodeType;if(a===3||a===8||a===2){return}if(a!==1||!f.isXMLDoc(e)){t=f.propFix[t]||t;s=f.propHooks[t]}if(i!==undefined){if(s&&"set"in s&&(n=s.set(e,i,t))!==undefined){return n}return e[t]=i}if(s&&"get"in s&&(n=s.get(e,t))!==null){return n}return e[t]},propHooks:{tabIndex:{get:function(e){var t=f.find.attr(e,"tabindex");return t?parseInt(t,10):it.test(e.nodeName)||nt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}});if(!u.optSelected){f.propHooks.selected={get:function(e){var t=e.parentNode;if(t&&t.parentNode){t.parentNode.selectedIndex}return null},set:function(e){var t=e.parentNode;if(t){t.selectedIndex;if(t.parentNode){t.parentNode.selectedIndex}}}}}f.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){f.propFix[this.toLowerCase()]=this});var st=/[\t\r\n\f]/g;function at(e){return e.getAttribute&&e.getAttribute("class")||""}f.fn.extend({addClass:function(e){var t,i,n,s,a,r,o,l=0;if(f.isFunction(e)){return this.each(function(t){f(this).addClass(e.call(this,t,at(this)))})}if(typeof e==="string"&&e){t=e.match(P)||[];while(i=this[l++]){s=at(i);n=i.nodeType===1&&(" "+s+" ").replace(st," ");if(n){r=0;while(a=t[r++]){if(n.indexOf(" "+a+" ")<0){n+=a+" "}}o=f.trim(n);if(s!==o){i.setAttribute("class",o)}}}}return this},removeClass:function(e){var t,i,n,s,a,r,o,l=0;if(f.isFunction(e)){return this.each(function(t){f(this).removeClass(e.call(this,t,at(this)))})}if(!arguments.length){return this.attr("class","")}if(typeof e==="string"&&e){t=e.match(P)||[];while(i=this[l++]){s=at(i);n=i.nodeType===1&&(" "+s+" ").replace(st," ");if(n){r=0;while(a=t[r++]){while(n.indexOf(" "+a+" ")>-1){n=n.replace(" "+a+" "," ")}}o=f.trim(n);if(s!==o){i.setAttribute("class",o)}}}}return this},toggleClass:function(e,t){var i=typeof e;if(typeof t==="boolean"&&i==="string"){return t?this.addClass(e):this.removeClass(e)}if(f.isFunction(e)){return this.each(function(i){f(this).toggleClass(e.call(this,i,at(this),t),t)})}return this.each(function(){var t,n,s,a;if(i==="string"){n=0;s=f(this);a=e.match(P)||[];while(t=a[n++]){if(s.hasClass(t)){s.removeClass(t)}else{s.addClass(t)}}}else if(e===undefined||i==="boolean"){t=at(this);if(t){j.set(this,"__className__",t)}if(this.setAttribute){this.setAttribute("class",t||e===false?"":j.get(this,"__className__")||"")}}})},hasClass:function(e){var t,i,n=0;t=" "+e+" ";while(i=this[n++]){if(i.nodeType===1&&(" "+at(i)+" ").replace(st," ").indexOf(t)>-1){return true}}return false}});var rt=/\r/g,ot=/[\x20\t\r\n\f]+/g;f.fn.extend({val:function(e){var t,i,n,s=this[0];if(!arguments.length){if(s){t=f.valHooks[s.type]||f.valHooks[s.nodeName.toLowerCase()];if(t&&"get"in t&&(i=t.get(s,"value"))!==undefined){return i}i=s.value;return typeof i==="string"?i.replace(rt,""):i==null?"":i}return}n=f.isFunction(e);return this.each(function(i){var s;if(this.nodeType!==1){return}if(n){s=e.call(this,i,f(this).val())}else{s=e}if(s==null){s=""}else if(typeof s==="number"){s+=""}else if(f.isArray(s)){s=f.map(s,function(e){return e==null?"":e+""})}t=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()];if(!t||!("set"in t)||t.set(this,s,"value")===undefined){this.value=s}})}});f.extend({valHooks:{option:{get:function(e){var t=f.find.attr(e,"value");return t!=null?t:f.trim(f.text(e)).replace(ot," ")}},select:{get:function(e){var t,i,n=e.options,s=e.selectedIndex,a=e.type==="select-one"||s<0,r=a?null:[],o=a?s+1:n.length,l=s<0?o:a?s:0;for(;l<o;l++){i=n[l];if((i.selected||l===s)&&(u.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!f.nodeName(i.parentNode,"optgroup"))){t=f(i).val();if(a){return t}r.push(t)}}return r},set:function(e,t){var i,n,s=e.options,a=f.makeArray(t),r=s.length;while(r--){n=s[r];if(n.selected=f.inArray(f.valHooks.option.get(n),a)>-1){i=true}}if(!i){e.selectedIndex=-1}return a}}}});f.each(["radio","checkbox"],function(){f.valHooks[this]={set:function(e,t){if(f.isArray(t)){return e.checked=f.inArray(f(e).val(),t)>-1}}};if(!u.checkOn){f.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value}}});var lt=/^(?:focusinfocus|focusoutblur)$/;f.extend(f.event,{trigger:function(t,i,s,a){var r,o,l,h,u,d,p,m=[s||n],g=c.call(t,"type")?t.type:t,v=c.call(t,"namespace")?t.namespace.split("."):[];o=l=s=s||n;if(s.nodeType===3||s.nodeType===8){return}if(lt.test(g+f.event.triggered)){return}if(g.indexOf(".")>-1){v=g.split(".");g=v.shift();v.sort()}u=g.indexOf(":")<0&&"on"+g;t=t[f.expando]?t:new f.Event(g,typeof t==="object"&&t);t.isTrigger=a?2:3;t.namespace=v.join(".");t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;t.result=undefined;if(!t.target){t.target=s}i=i==null?[t]:f.makeArray(i,[t]);p=f.event.special[g]||{};if(!a&&p.trigger&&p.trigger.apply(s,i)===false){return}if(!a&&!p.noBubble&&!f.isWindow(s)){h=p.delegateType||g;if(!lt.test(h+g)){o=o.parentNode}for(;o;o=o.parentNode){m.push(o);l=o}if(l===(s.ownerDocument||n)){m.push(l.defaultView||l.parentWindow||e)}}r=0;while((o=m[r++])&&!t.isPropagationStopped()){t.type=r>1?h:p.bindType||g;d=(j.get(o,"events")||{})[t.type]&&j.get(o,"handle");if(d){d.apply(o,i)}d=u&&o[u];if(d&&d.apply&&R(o)){t.result=d.apply(o,i);if(t.result===false){t.preventDefault()}}}t.type=g;if(!a&&!t.isDefaultPrevented()){if((!p._default||p._default.apply(m.pop(),i)===false)&&R(s)){if(u&&f.isFunction(s[g])&&!f.isWindow(s)){l=s[u];if(l){s[u]=null}f.event.triggered=g;s[g]();f.event.triggered=undefined;if(l){s[u]=l}}}}return t.result},simulate:function(e,t,i){var n=f.extend(new f.Event,i,{type:e,isSimulated:true});f.event.trigger(n,null,t)}});f.fn.extend({trigger:function(e,t){return this.each(function(){f.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i){return f.event.trigger(e,t,i,true)}}});f.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(e,t){f.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}});f.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});u.focusin="onfocusin"in e;if(!u.focusin){f.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){f.event.simulate(t,e.target,f.event.fix(e))};f.event.special[t]={setup:function(){var n=this.ownerDocument||this,s=j.access(n,t);if(!s){n.addEventListener(e,i,true)}j.access(n,t,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=j.access(n,t)-1;if(!s){n.removeEventListener(e,i,true);j.remove(n,t)}else{j.access(n,t,s)}}}})}var ht=e.location;var ct=f.now();var ut=/\?/;f.parseJSON=function(e){return JSON.parse(e+"")};f.parseXML=function(t){var i;if(!t||typeof t!=="string"){return null}try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){i=undefined}if(!i||i.getElementsByTagName("parsererror").length){f.error("Invalid XML: "+t)}return i};var dt=/#.*$/,ft=/([?&])_=[^&]*/,pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,mt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,gt=/^(?:GET|HEAD)$/,vt=/^\/\//,yt={},bt={},wt="*/".concat("*"),xt=n.createElement("a");xt.href=ht.href;function _t(e){return function(t,i){if(typeof t!=="string"){i=t;t="*"}var n,s=0,a=t.toLowerCase().match(P)||[];if(f.isFunction(i)){while(n=a[s++]){if(n[0]==="+"){n=n.slice(1)||"*";(e[n]=e[n]||[]).unshift(i)}else{(e[n]=e[n]||[]).push(i)}}}}}function Ct(e,t,i,n){var s={},a=e===bt;function r(o){var l;s[o]=true;f.each(e[o]||[],function(e,o){var h=o(t,i,n);if(typeof h==="string"&&!a&&!s[h]){t.dataTypes.unshift(h);r(h);return false}else if(a){return!(l=h)}});return l}return r(t.dataTypes[0])||!s["*"]&&r("*")}function kt(e,t){var i,n,s=f.ajaxSettings.flatOptions||{};for(i in t){if(t[i]!==undefined){(s[i]?e:n||(n={}))[i]=t[i]}}if(n){f.extend(true,e,n)}return e}function Tt(e,t,i){var n,s,a,r,o=e.contents,l=e.dataTypes;while(l[0]==="*"){l.shift();if(n===undefined){n=e.mimeType||t.getResponseHeader("Content-Type")}}if(n){for(s in o){if(o[s]&&o[s].test(n)){l.unshift(s);break}}}if(l[0]in i){a=l[0]}else{for(s in i){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}if(!r){r=s}}a=a||r}if(a){if(a!==l[0]){l.unshift(a)}return i[a]}}function St(e,t,i,n){var s,a,r,o,l,h={},c=e.dataTypes.slice();if(c[1]){for(r in e.converters){h[r.toLowerCase()]=e.converters[r]}}a=c.shift();while(a){if(e.responseFields[a]){i[e.responseFields[a]]=t}if(!l&&n&&e.dataFilter){t=e.dataFilter(t,e.dataType)}l=a;a=c.shift();if(a){if(a==="*"){a=l}else if(l!=="*"&&l!==a){r=h[l+" "+a]||h["* "+a];if(!r){for(s in h){o=s.split(" ");if(o[1]===a){r=h[l+" "+o[0]]||h["* "+o[0]];if(r){if(r===true){r=h[s]}else if(h[s]!==true){a=o[0];c.unshift(o[1])}break}}}}if(r!==true){if(r&&e.throws){t=r(t)}else{try{t=r(t)}catch(e){return{state:"parsererror",error:r?e:"No conversion from "+l+" to "+a}}}}}}}return{state:"success",data:t}}f.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ht.href,type:"GET",isLocal:mt.test(ht.protocol),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":wt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(e,t){return t?kt(kt(e,f.ajaxSettings),t):kt(f.ajaxSettings,e)},ajaxPrefilter:_t(yt),ajaxTransport:_t(bt),ajax:function(t,i){if(typeof t==="object"){i=t;t=undefined}i=i||{};var s,a,r,o,l,h,c,u,d=f.ajaxSetup({},i),p=d.context||d,m=d.context&&(p.nodeType||p.jquery)?f(p):f.event,g=f.Deferred(),v=f.Callbacks("once memory"),y=d.statusCode||{},b={},w={},x=0,_="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(x===2){if(!o){o={};while(t=pt.exec(r)){o[t[1].toLowerCase()]=t[2]}}t=o[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return x===2?r:null},setRequestHeader:function(e,t){var i=e.toLowerCase();if(!x){e=w[i]=w[i]||e;b[e]=t}return this},overrideMimeType:function(e){if(!x){d.mimeType=e}return this},statusCode:function(e){var t;if(e){if(x<2){for(t in e){y[t]=[y[t],e[t]]}}else{C.always(e[C.status])}}return this},abort:function(e){var t=e||_;if(s){s.abort(t)}k(0,t);return this}};g.promise(C).complete=v.add;C.success=C.done;C.error=C.fail;d.url=((t||d.url||ht.href)+"").replace(dt,"").replace(vt,ht.protocol+"//");d.type=i.method||i.type||d.method||d.type;d.dataTypes=f.trim(d.dataType||"*").toLowerCase().match(P)||[""];if(d.crossDomain==null){h=n.createElement("a");try{h.href=d.url;h.href=h.href;d.crossDomain=xt.protocol+"//"+xt.host!==h.protocol+"//"+h.host}catch(e){d.crossDomain=true}}if(d.data&&d.processData&&typeof d.data!=="string"){d.data=f.param(d.data,d.traditional)}Ct(yt,d,i,C);if(x===2){return C}c=f.event&&d.global;if(c&&f.active++===0){f.event.trigger("ajaxStart")}d.type=d.type.toUpperCase();d.hasContent=!gt.test(d.type);a=d.url;if(!d.hasContent){if(d.data){a=d.url+=(ut.test(a)?"&":"?")+d.data;delete d.data}if(d.cache===false){d.url=ft.test(a)?a.replace(ft,"$1_="+ct++):a+(ut.test(a)?"&":"?")+"_="+ct++}}if(d.ifModified){if(f.lastModified[a]){C.setRequestHeader("If-Modified-Since",f.lastModified[a])}if(f.etag[a]){C.setRequestHeader("If-None-Match",f.etag[a])}}if(d.data&&d.hasContent&&d.contentType!==false||i.contentType){C.setRequestHeader("Content-Type",d.contentType)}C.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+wt+"; q=0.01":""):d.accepts["*"]);for(u in d.headers){C.setRequestHeader(u,d.headers[u])}if(d.beforeSend&&(d.beforeSend.call(p,C,d)===false||x===2)){return C.abort()}_="abort";for(u in{success:1,error:1,complete:1}){C[u](d[u])}s=Ct(bt,d,i,C);if(!s){k(-1,"No Transport")}else{C.readyState=1;if(c){m.trigger("ajaxSend",[C,d])}if(x===2){return C}if(d.async&&d.timeout>0){l=e.setTimeout(function(){C.abort("timeout")},d.timeout)}try{x=1;s.send(b,k)}catch(e){if(x<2){k(-1,e)}else{throw e}}}function k(t,i,n,o){var h,u,b,w,_,k=i;if(x===2){return}x=2;if(l){e.clearTimeout(l)}s=undefined;r=o||"";C.readyState=t>0?4:0;h=t>=200&&t<300||t===304;if(n){w=Tt(d,C,n)}w=St(d,w,C,h);if(h){if(d.ifModified){_=C.getResponseHeader("Last-Modified");if(_){f.lastModified[a]=_}_=C.getResponseHeader("etag");if(_){f.etag[a]=_}}if(t===204||d.type==="HEAD"){k="nocontent"}else if(t===304){k="notmodified"}else{k=w.state;u=w.data;b=w.error;h=!b}}else{b=k;if(t||!k){k="error";if(t<0){t=0}}}C.status=t;C.statusText=(i||k)+"";if(h){g.resolveWith(p,[u,k,C])}else{g.rejectWith(p,[C,k,b])}C.statusCode(y);y=undefined;if(c){m.trigger(h?"ajaxSuccess":"ajaxError",[C,d,h?u:b])}v.fireWith(p,[C,k]);if(c){m.trigger("ajaxComplete",[C,d]);if(!--f.active){f.event.trigger("ajaxStop")}}}return C},getJSON:function(e,t,i){return f.get(e,t,i,"json")},getScript:function(e,t){return f.get(e,undefined,t,"script")}});f.each(["get","post"],function(e,t){f[t]=function(e,i,n,s){if(f.isFunction(i)){s=s||n;n=i;i=undefined}return f.ajax(f.extend({url:e,type:t,dataType:s,data:i,success:n},f.isPlainObject(e)&&e))}});f._evalUrl=function(e){return f.ajax({url:e,type:"GET",dataType:"script",async:false,global:false,throws:true})};f.fn.extend({wrapAll:function(e){var t;if(f.isFunction(e)){return this.each(function(t){f(this).wrapAll(e.call(this,t))})}if(this[0]){t=f(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){t.insertBefore(this[0])}t.map(function(){var e=this;while(e.firstElementChild){e=e.firstElementChild}return e}).append(this)}return this},wrapInner:function(e){if(f.isFunction(e)){return this.each(function(t){f(this).wrapInner(e.call(this,t))})}return this.each(function(){var t=f(this),i=t.contents();if(i.length){i.wrapAll(e)}else{t.append(e)}})},wrap:function(e){var t=f.isFunction(e);return this.each(function(i){f(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){if(!f.nodeName(this,"body")){f(this).replaceWith(this.childNodes)}}).end()}});f.expr.filters.hidden=function(e){return!f.expr.filters.visible(e)};f.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var Mt=/%20/g,Dt=/\[\]$/,$t=/\r?\n/g,Et=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function Pt(e,t,i,n){var s;if(f.isArray(t)){f.each(t,function(t,s){if(i||Dt.test(e)){n(e,s)}else{Pt(e+"["+(typeof s==="object"&&s!=null?t:"")+"]",s,i,n)}})}else if(!i&&f.type(t)==="object"){for(s in t){Pt(e+"["+s+"]",t[s],i,n)}}else{n(e,t)}}f.param=function(e,t){var i,n=[],s=function(e,t){t=f.isFunction(t)?t():t==null?"":t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===undefined){t=f.ajaxSettings&&f.ajaxSettings.traditional}if(f.isArray(e)||e.jquery&&!f.isPlainObject(e)){f.each(e,function(){s(this.name,this.value)})}else{for(i in e){Pt(i,e[i],t,s)}}return n.join("&").replace(Mt,"+")};f.fn.extend({serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=f.prop(this,"elements");return e?f.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!f(this).is(":disabled")&&At.test(this.nodeName)&&!Et.test(e)&&(this.checked||!Z.test(e))}).map(function(e,t){var i=f(this).val();return i==null?null:f.isArray(i)?f.map(i,function(e){return{name:t.name,value:e.replace($t,"\r\n")}}):{name:t.name,value:i.replace($t,"\r\n")}}).get()}});f.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var It={0:200,1223:204},Nt=f.ajaxSettings.xhr();u.cors=!!Nt&&"withCredentials"in Nt;u.ajax=Nt=!!Nt;f.ajaxTransport(function(t){var i,n;if(u.cors||Nt&&!t.crossDomain){return{send:function(s,a){var r,o=t.xhr();o.open(t.type,t.url,t.async,t.username,t.password);if(t.xhrFields){for(r in t.xhrFields){o[r]=t.xhrFields[r]}}if(t.mimeType&&o.overrideMimeType){o.overrideMimeType(t.mimeType)}if(!t.crossDomain&&!s["X-Requested-With"]){s["X-Requested-With"]="XMLHttpRequest"}for(r in s){o.setRequestHeader(r,s[r])}i=function(e){return function(){if(i){i=n=o.onload=o.onerror=o.onabort=o.onreadystatechange=null;if(e==="abort"){o.abort()}else if(e==="error"){if(typeof o.status!=="number"){a(0,"error")}else{a(o.status,o.statusText)}}else{a(It[o.status]||o.status,o.statusText,(o.responseType||"text")!=="text"||typeof o.responseText!=="string"?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders())}}}};o.onload=i();n=o.onerror=i("error");if(o.onabort!==undefined){o.onabort=n}else{o.onreadystatechange=function(){if(o.readyState===4){e.setTimeout(function(){if(i){n()}})}}}i=i("abort");try{o.send(t.hasContent&&t.data||null)}catch(e){if(i){throw e}}},abort:function(){if(i){i()}}}}});f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, "+"application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){f.globalEval(e);return e}}});f.ajaxPrefilter("script",function(e){if(e.cache===undefined){e.cache=false}if(e.crossDomain){e.type="GET"}});f.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(s,a){t=f("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove();i=null;if(e){a(e.type==="error"?404:200,e.type)}});n.head.appendChild(t[0])},abort:function(){if(i){i()}}}}});var Ot=[],Ft=/(=)\?(?=&|$)|\?\?/;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ot.pop()||f.expando+"_"+ct++;this[e]=true;return e}});f.ajaxPrefilter("json jsonp",function(t,i,n){var s,a,r,o=t.jsonp!==false&&(Ft.test(t.url)?"url":typeof t.data==="string"&&(t.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Ft.test(t.data)&&"data");if(o||t.dataTypes[0]==="jsonp"){s=t.jsonpCallback=f.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback;if(o){t[o]=t[o].replace(Ft,"$1"+s)}else if(t.jsonp!==false){t.url+=(ut.test(t.url)?"&":"?")+t.jsonp+"="+s}t.converters["script json"]=function(){if(!r){f.error(s+" was not called")}return r[0]};t.dataTypes[0]="json";a=e[s];e[s]=function(){r=arguments};n.always(function(){if(a===undefined){f(e).removeProp(s)}else{e[s]=a}if(t[s]){t.jsonpCallback=i.jsonpCallback;Ot.push(s)}if(r&&f.isFunction(a)){a(r[0])}r=a=undefined});return"script"}});f.parseHTML=function(e,t,i){if(!e||typeof e!=="string"){return null}if(typeof t==="boolean"){i=t;t=false}t=t||n;var s=C.exec(e),a=!i&&[];if(s){return[t.createElement(s[1])]}s=ie([e],t,a);if(a&&a.length){f(a).remove()}return f.merge([],s.childNodes)};var Rt=f.fn.load;f.fn.load=function(e,t,i){if(typeof e!=="string"&&Rt){return Rt.apply(this,arguments)}var n,s,a,r=this,o=e.indexOf(" ");if(o>-1){n=f.trim(e.slice(o));e=e.slice(0,o)}if(f.isFunction(t)){i=t;t=undefined}else if(t&&typeof t==="object"){s="POST"}if(r.length>0){f.ajax({url:e,type:s||"GET",dataType:"html",data:t}).done(function(e){a=arguments;r.html(n?f("<div>").append(f.parseHTML(e)).find(n):e)}).always(i&&function(e,t){r.each(function(){i.apply(this,a||[e.responseText,t,e])})})}return this};f.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){f.fn[t]=function(e){return this.on(t,e)}});f.expr.filters.animated=function(e){return f.grep(f.timers,function(t){return e===t.elem}).length};function Lt(e){return f.isWindow(e)?e:e.nodeType===9&&e.defaultView}f.offset={setOffset:function(e,t,i){var n,s,a,r,o,l,h,c=f.css(e,"position"),u=f(e),d={};if(c==="static"){e.style.position="relative"}o=u.offset();a=f.css(e,"top");l=f.css(e,"left");h=(c==="absolute"||c==="fixed")&&(a+l).indexOf("auto")>-1;if(h){n=u.position();r=n.top;s=n.left}else{r=parseFloat(a)||0;s=parseFloat(l)||0}if(f.isFunction(t)){t=t.call(e,i,f.extend({},o))}if(t.top!=null){d.top=t.top-o.top+r}if(t.left!=null){d.left=t.left-o.left+s}if("using"in t){t.using.call(e,d)}else{u.css(d)}}};f.fn.extend({offset:function(e){if(arguments.length){return e===undefined?this:this.each(function(t){f.offset.setOffset(this,e,t)})}var t,i,n=this[0],s={top:0,left:0},a=n&&n.ownerDocument;if(!a){return}t=a.documentElement;if(!f.contains(t,n)){return s}s=n.getBoundingClientRect();i=Lt(a);return{top:s.top+i.pageYOffset-t.clientTop,left:s.left+i.pageXOffset-t.clientLeft}},position:function(){if(!this[0]){return}var e,t,i=this[0],n={top:0,left:0};if(f.css(i,"position")==="fixed"){t=i.getBoundingClientRect()}else{e=this.offsetParent();t=this.offset();if(!f.nodeName(e[0],"html")){n=e.offset()}n.top+=f.css(e[0],"borderTopWidth",true);n.left+=f.css(e[0],"borderLeftWidth",true)}return{top:t.top-n.top-f.css(i,"marginTop",true),left:t.left-n.left-f.css(i,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&f.css(e,"position")==="static"){e=e.offsetParent}return e||Ee})}});f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;f.fn[e]=function(n){return F(this,function(e,n,s){var a=Lt(e);if(s===undefined){return a?a[t]:e[n]}if(a){a.scrollTo(!i?s:a.pageXOffset,i?s:a.pageYOffset)}else{e[n]=s}},e,n,arguments.length)}});f.each(["top","left"],function(e,t){f.cssHooks[t]=Pe(u.pixelPosition,function(e,i){if(i){i=Ae(e,t);return Me.test(i)?f(e).position()[t]+"px":i}})});f.each({Height:"height",Width:"width"},function(e,t){f.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){f.fn[n]=function(n,s){var a=arguments.length&&(i||typeof n!=="boolean"),r=i||(n===true||s===true?"margin":"border");return F(this,function(t,i,n){var s;if(f.isWindow(t)){return t.document.documentElement["client"+e]}if(t.nodeType===9){s=t.documentElement;return Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])}return n===undefined?f.css(t,i,r):f.style(t,i,n,r)},t,a?n:undefined,a,null)}})});f.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",i)},size:function(){return this.length}});f.fn.andSelf=f.fn.addBack;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return f})}var jt=e.jQuery,Ut=e.$;f.noConflict=function(t){if(e.$===f){e.$=Ut}if(t&&e.jQuery===f){e.jQuery=jt}return f};if(!t){e.jQuery=e.$=f}return f});if(typeof jQuery==="undefined"){throw new Error("Bootstrap's JavaScript requires jQuery")}+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||t[0]==1&&t[1]==9&&t[2]<1||t[0]>3){throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}}(jQuery);+function(e){"use strict";function t(){var e=document.createElement("bootstrap");var t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t){if(e.style[i]!==undefined){return{end:t[i]}}}return false}e.fn.emulateTransitionEnd=function(t){var i=false;var n=this;e(this).one("bsTransitionEnd",function(){i=true});var s=function(){if(!i)e(n).trigger(e.support.transition.end)};setTimeout(s,t);return this};e(function(){e.support.transition=t();if(!e.support.transition)return;e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}}})}(jQuery);+function(e){"use strict";var t='[data-dismiss="alert"]';var i=function(i){e(i).on("click",t,this.close)};i.VERSION="3.3.7";i.TRANSITION_DURATION=150;i.prototype.close=function(t){var n=e(this);var s=n.attr("data-target");if(!s){s=n.attr("href");s=s&&s.replace(/.*(?=#[^\s]*$)/,"")}var a=e(s==="#"?[]:s);if(t)t.preventDefault();if(!a.length){a=n.closest(".alert")}a.trigger(t=e.Event("close.bs.alert"));if(t.isDefaultPrevented())return;a.removeClass("in");function r(){a.detach().trigger("closed.bs.alert").remove()}e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",r).emulateTransitionEnd(i.TRANSITION_DURATION):r()};function n(t){return this.each(function(){var n=e(this);var s=n.data("bs.alert");if(!s)n.data("bs.alert",s=new i(this));if(typeof t=="string")s[t].call(n)})}var s=e.fn.alert;e.fn.alert=n;e.fn.alert.Constructor=i;e.fn.alert.noConflict=function(){e.fn.alert=s;return this};e(document).on("click.bs.alert.data-api",t,i.prototype.close)}(jQuery);+function(e){"use strict";var t=function(i,n){this.$element=e(i);this.options=e.extend({},t.DEFAULTS,n);this.isLoading=false};t.VERSION="3.3.7";t.DEFAULTS={loadingText:"loading..."};t.prototype.setState=function(t){var i="disabled";var n=this.$element;var s=n.is("input")?"val":"html";var a=n.data();t+="Text";if(a.resetText==null)n.data("resetText",n[s]());setTimeout(e.proxy(function(){n[s](a[t]==null?this.options[t]:a[t]);if(t=="loadingText"){this.isLoading=true;n.addClass(i).attr(i,i).prop(i,true)}else if(this.isLoading){this.isLoading=false;n.removeClass(i).removeAttr(i).prop(i,false)}},this),0)};t.prototype.toggle=function(){var e=true;var t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");if(i.prop("type")=="radio"){if(i.prop("checked"))e=false;t.find(".active").removeClass("active");this.$element.addClass("active")}else if(i.prop("type")=="checkbox"){if(i.prop("checked")!==this.$element.hasClass("active"))e=false;this.$element.toggleClass("active")}i.prop("checked",this.$element.hasClass("active"));if(e)i.trigger("change")}else{this.$element.attr("aria-pressed",!this.$element.hasClass("active"));this.$element.toggleClass("active")}};function i(i){return this.each(function(){var n=e(this);var s=n.data("bs.button");var a=typeof i=="object"&&i;if(!s)n.data("bs.button",s=new t(this,a));if(i=="toggle")s.toggle();else if(i)s.setState(i)})}var n=e.fn.button;e.fn.button=i;e.fn.button.Constructor=t;e.fn.button.noConflict=function(){e.fn.button=n;return this};e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var n=e(t.target).closest(".btn");i.call(n,"toggle");if(!e(t.target).is('input[type="radio"], input[type="checkbox"]')){t.preventDefault();if(n.is("input,button"))n.trigger("focus");else n.find("input:visible,button:visible").first().trigger("focus")}}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery);+function(e){"use strict";var t=function(t,i){this.$element=e(t);this.$indicators=this.$element.find(".carousel-indicators");this.options=i;this.paused=null;this.sliding=null;this.interval=null;this.$active=null;this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this));this.options.pause=="hover"&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};t.VERSION="3.3.7";t.TRANSITION_DURATION=600;t.DEFAULTS={interval:5e3,pause:"hover",wrap:true,keyboard:true};t.prototype.keydown=function(e){if(/input|textarea/i.test(e.target.tagName))return;switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()};t.prototype.cycle=function(t){t||(this.paused=false);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval));return this};t.prototype.getItemIndex=function(e){this.$items=e.parent().children(".item");return this.$items.index(e||this.$active)};t.prototype.getItemForDirection=function(e,t){var i=this.getItemIndex(t);var n=e=="prev"&&i===0||e=="next"&&i==this.$items.length-1;if(n&&!this.options.wrap)return t;var s=e=="prev"?-1:1;var a=(i+s)%this.$items.length;return this.$items.eq(a)};t.prototype.to=function(e){var t=this;var i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(e>this.$items.length-1||e<0)return;if(this.sliding)return this.$element.one("slid.bs.carousel",function(){t.to(e)});if(i==e)return this.pause().cycle();return this.slide(e>i?"next":"prev",this.$items.eq(e))};t.prototype.pause=function(t){t||(this.paused=true);if(this.$element.find(".next, .prev").length&&e.support.transition){this.$element.trigger(e.support.transition.end);this.cycle(true)}this.interval=clearInterval(this.interval);return this};t.prototype.next=function(){if(this.sliding)return;return this.slide("next")};t.prototype.prev=function(){if(this.sliding)return;return this.slide("prev")};t.prototype.slide=function(i,n){var s=this.$element.find(".item.active");var a=n||this.getItemForDirection(i,s);var r=this.interval;var o=i=="next"?"left":"right";var l=this;if(a.hasClass("active"))return this.sliding=false;var h=a[0];var c=e.Event("slide.bs.carousel",{relatedTarget:h,direction:o});this.$element.trigger(c);if(c.isDefaultPrevented())return;this.sliding=true;r&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=e(this.$indicators.children()[this.getItemIndex(a)]);u&&u.addClass("active")}var d=e.Event("slid.bs.carousel",{
relatedTarget:h,direction:o});if(e.support.transition&&this.$element.hasClass("slide")){a.addClass(i);a[0].offsetWidth;s.addClass(o);a.addClass(o);s.one("bsTransitionEnd",function(){a.removeClass([i,o].join(" ")).addClass("active");s.removeClass(["active",o].join(" "));l.sliding=false;setTimeout(function(){l.$element.trigger(d)},0)}).emulateTransitionEnd(t.TRANSITION_DURATION)}else{s.removeClass("active");a.addClass("active");this.sliding=false;this.$element.trigger(d)}r&&this.cycle();return this};function i(i){return this.each(function(){var n=e(this);var s=n.data("bs.carousel");var a=e.extend({},t.DEFAULTS,n.data(),typeof i=="object"&&i);var r=typeof i=="string"?i:a.slide;if(!s)n.data("bs.carousel",s=new t(this,a));if(typeof i=="number")s.to(i);else if(r)s[r]();else if(a.interval)s.pause().cycle()})}var n=e.fn.carousel;e.fn.carousel=i;e.fn.carousel.Constructor=t;e.fn.carousel.noConflict=function(){e.fn.carousel=n;return this};var s=function(t){var n;var s=e(this);var a=e(s.attr("data-target")||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(!a.hasClass("carousel"))return;var r=e.extend({},a.data(),s.data());var o=s.attr("data-slide-to");if(o)r.interval=false;i.call(a,r);if(o){a.data("bs.carousel").to(o)}t.preventDefault()};e(document).on("click.bs.carousel.data-api","[data-slide]",s).on("click.bs.carousel.data-api","[data-slide-to]",s);e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery);+function(e){"use strict";var t=function(i,n){this.$element=e(i);this.options=e.extend({},t.DEFAULTS,n);this.$trigger=e('[data-toggle="collapse"][href="#'+i.id+'"],'+'[data-toggle="collapse"][data-target="#'+i.id+'"]');this.transitioning=null;if(this.options.parent){this.$parent=this.getParent()}else{this.addAriaAndCollapsedClass(this.$element,this.$trigger)}if(this.options.toggle)this.toggle()};t.VERSION="3.3.7";t.TRANSITION_DURATION=350;t.DEFAULTS={toggle:true};t.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"};t.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var i;var s=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(s&&s.length){i=s.data("bs.collapse");if(i&&i.transitioning)return}var a=e.Event("show.bs.collapse");this.$element.trigger(a);if(a.isDefaultPrevented())return;if(s&&s.length){n.call(s,"hide");i||s.data("bs.collapse",null)}var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0).attr("aria-expanded",true);this.$trigger.removeClass("collapsed").attr("aria-expanded",true);this.transitioning=1;var o=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return o.call(this);var l=e.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(t.TRANSITION_DURATION)[r](this.$element[0][l])};t.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var i=e.Event("hide.bs.collapse");this.$element.trigger(i);if(i.isDefaultPrevented())return;var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",false);this.$trigger.addClass("collapsed").attr("aria-expanded",false);this.transitioning=1;var s=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!e.support.transition)return s.call(this);this.$element[n](0).one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(t.TRANSITION_DURATION)};t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};t.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(t,n){var s=e(n);this.addAriaAndCollapsedClass(i(s),s)},this)).end()};t.prototype.addAriaAndCollapsedClass=function(e,t){var i=e.hasClass("in");e.attr("aria-expanded",i);t.toggleClass("collapsed",!i).attr("aria-expanded",i)};function i(t){var i;var n=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return e(n)}function n(i){return this.each(function(){var n=e(this);var s=n.data("bs.collapse");var a=e.extend({},t.DEFAULTS,n.data(),typeof i=="object"&&i);if(!s&&a.toggle&&/show|hide/.test(i))a.toggle=false;if(!s)n.data("bs.collapse",s=new t(this,a));if(typeof i=="string")s[i]()})}var s=e.fn.collapse;e.fn.collapse=n;e.fn.collapse.Constructor=t;e.fn.collapse.noConflict=function(){e.fn.collapse=s;return this};e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){var s=e(this);if(!s.attr("data-target"))t.preventDefault();var a=i(s);var r=a.data("bs.collapse");var o=r?"toggle":s.data();n.call(a,o)})}(jQuery);+function(e){"use strict";var t=".dropdown-backdrop";var i='[data-toggle="dropdown"]';var n=function(t){e(t).on("click.bs.dropdown",this.toggle)};n.VERSION="3.3.7";function s(t){var i=t.attr("data-target");if(!i){i=t.attr("href");i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")}var n=i&&e(i);return n&&n.length?n:t.parent()}function a(n){if(n&&n.which===3)return;e(t).remove();e(i).each(function(){var t=e(this);var i=s(t);var a={relatedTarget:this};if(!i.hasClass("open"))return;if(n&&n.type=="click"&&/input|textarea/i.test(n.target.tagName)&&e.contains(i[0],n.target))return;i.trigger(n=e.Event("hide.bs.dropdown",a));if(n.isDefaultPrevented())return;t.attr("aria-expanded","false");i.removeClass("open").trigger(e.Event("hidden.bs.dropdown",a))})}n.prototype.toggle=function(t){var i=e(this);if(i.is(".disabled, :disabled"))return;var n=s(i);var r=n.hasClass("open");a();if(!r){if("ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length){e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",a)}var o={relatedTarget:this};n.trigger(t=e.Event("show.bs.dropdown",o));if(t.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true");n.toggleClass("open").trigger(e.Event("shown.bs.dropdown",o))}return false};n.prototype.keydown=function(t){if(!/(38|40|27|32)/.test(t.which)||/input|textarea/i.test(t.target.tagName))return;var n=e(this);t.preventDefault();t.stopPropagation();if(n.is(".disabled, :disabled"))return;var a=s(n);var r=a.hasClass("open");if(!r&&t.which!=27||r&&t.which==27){if(t.which==27)a.find(i).trigger("focus");return n.trigger("click")}var o=" li:not(.disabled):visible a";var l=a.find(".dropdown-menu"+o);if(!l.length)return;var h=l.index(t.target);if(t.which==38&&h>0)h--;if(t.which==40&&h<l.length-1)h++;if(!~h)h=0;l.eq(h).trigger("focus")};function r(t){return this.each(function(){var i=e(this);var s=i.data("bs.dropdown");if(!s)i.data("bs.dropdown",s=new n(this));if(typeof t=="string")s[t].call(i)})}var o=e.fn.dropdown;e.fn.dropdown=r;e.fn.dropdown.Constructor=n;e.fn.dropdown.noConflict=function(){e.fn.dropdown=o;return this};e(document).on("click.bs.dropdown.data-api",a).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",i,n.prototype.toggle).on("keydown.bs.dropdown.data-api",i,n.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",n.prototype.keydown)}(jQuery);+function(e){"use strict";var t=function(t,i){this.options=i;this.$body=e(document.body);this.$element=e(t);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=false;if(this.options.remote){this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}};t.VERSION="3.3.7";t.TRANSITION_DURATION=300;t.BACKDROP_TRANSITION_DURATION=150;t.DEFAULTS={backdrop:true,keyboard:true,show:true};t.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)};t.prototype.show=function(i){var n=this;var s=e.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(s);if(this.isShown||s.isDefaultPrevented())return;this.isShown=true;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this));this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(t){if(e(t.target).is(n.$element))n.ignoreBackdropClick=true})});this.backdrop(function(){var s=e.support.transition&&n.$element.hasClass("fade");if(!n.$element.parent().length){n.$element.appendTo(n.$body)}n.$element.show().scrollTop(0);n.adjustDialog();if(s){n.$element[0].offsetWidth}n.$element.addClass("in");n.enforceFocus();var a=e.Event("shown.bs.modal",{relatedTarget:i});s?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(a)}).emulateTransitionEnd(t.TRANSITION_DURATION):n.$element.trigger("focus").trigger(a)})};t.prototype.hide=function(i){if(i)i.preventDefault();i=e.Event("hide.bs.modal");this.$element.trigger(i);if(!this.isShown||i.isDefaultPrevented())return;this.isShown=false;this.escape();this.resize();e(document).off("focusin.bs.modal");this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal");this.$dialog.off("mousedown.dismiss.bs.modal");e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(t.TRANSITION_DURATION):this.hideModal()};t.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){if(document!==e.target&&this.$element[0]!==e.target&&!this.$element.has(e.target).length){this.$element.trigger("focus")}},this))};t.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){e.which==27&&this.hide()},this))}else if(!this.isShown){this.$element.off("keydown.dismiss.bs.modal")}};t.prototype.resize=function(){if(this.isShown){e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this))}else{e(window).off("resize.bs.modal")}};t.prototype.hideModal=function(){var e=this;this.$element.hide();this.backdrop(function(){e.$body.removeClass("modal-open");e.resetAdjustments();e.resetScrollbar();e.$element.trigger("hidden.bs.modal")})};t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};t.prototype.backdrop=function(i){var n=this;var s=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=e.support.transition&&s;this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+s).appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){if(this.ignoreBackdropClick){this.ignoreBackdropClick=false;return}if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus():this.hide()},this));if(a)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");if(!i)return;a?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):i()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){n.removeBackdrop();i&&i()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(t.BACKDROP_TRANSITION_DURATION):r()}else if(i){i()}};t.prototype.handleUpdate=function(){this.adjustDialog()};t.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})};t.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};t.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e;this.scrollbarWidth=this.measureScrollbar()};t.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";if(this.bodyIsOverflowing)this.$body.css("padding-right",e+this.scrollbarWidth)};t.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};t.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure";this.$body.append(e);var t=e.offsetWidth-e.clientWidth;this.$body[0].removeChild(e);return t};function i(i,n){return this.each(function(){var s=e(this);var a=s.data("bs.modal");var r=e.extend({},t.DEFAULTS,s.data(),typeof i=="object"&&i);if(!a)s.data("bs.modal",a=new t(this,r));if(typeof i=="string")a[i](n);else if(r.show)a.show(n)})}var n=e.fn.modal;e.fn.modal=i;e.fn.modal.Constructor=t;e.fn.modal.noConflict=function(){e.fn.modal=n;return this};e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this);var s=n.attr("href");var a=e(n.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,""));var r=a.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(s)&&s},a.data(),n.data());if(n.is("a"))t.preventDefault();a.one("show.bs.modal",function(e){if(e.isDefaultPrevented())return;a.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})});i.call(a,r,this)})}(jQuery);+function(e){"use strict";var t=function(e,t){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.inState=null;this.init("tooltip",e,t)};t.VERSION="3.3.7";t.TRANSITION_DURATION=150;t.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0}};t.prototype.init=function(t,i,n){this.enabled=true;this.type=t;this.$element=e(i);this.options=this.getOptions(n);this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport);this.inState={click:false,hover:false,focus:false};if(this.$element[0]instanceof document.constructor&&!this.options.selector){throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!")}var s=this.options.trigger.split(" ");for(var a=s.length;a--;){var r=s[a];if(r=="click"){this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this))}else if(r!="manual"){var o=r=="hover"?"mouseenter":"focusin";var l=r=="hover"?"mouseleave":"focusout";this.$element.on(o+"."+this.type,this.options.selector,e.proxy(this.enter,this));this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.getOptions=function(t){t=e.extend({},this.getDefaults(),this.$element.data(),t);if(t.delay&&typeof t.delay=="number"){t.delay={show:t.delay,hide:t.delay}}return t};t.prototype.getDelegateOptions=function(){var t={};var i=this.getDefaults();this._options&&e.each(this._options,function(e,n){if(i[e]!=n)t[e]=n});return t};t.prototype.enter=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(!i){i=new this.constructor(t.currentTarget,this.getDelegateOptions());e(t.currentTarget).data("bs."+this.type,i)}if(t instanceof e.Event){i.inState[t.type=="focusin"?"focus":"hover"]=true}if(i.tip().hasClass("in")||i.hoverState=="in"){i.hoverState="in";return}clearTimeout(i.timeout);i.hoverState="in";if(!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout(function(){if(i.hoverState=="in")i.show()},i.options.delay.show)};t.prototype.isInStateTrue=function(){for(var e in this.inState){if(this.inState[e])return true}return false};t.prototype.leave=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(!i){i=new this.constructor(t.currentTarget,this.getDelegateOptions());e(t.currentTarget).data("bs."+this.type,i)}if(t instanceof e.Event){i.inState[t.type=="focusout"?"focus":"hover"]=false}if(i.isInStateTrue())return;clearTimeout(i.timeout);i.hoverState="out";if(!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){if(i.hoverState=="out")i.hide()},i.options.delay.hide)};t.prototype.show=function(){var i=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(i);var n=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(i.isDefaultPrevented()||!n)return;var s=this;var a=this.tip();var r=this.getUID(this.type);this.setContent();a.attr("id",r);this.$element.attr("aria-describedby",r);if(this.options.animation)a.addClass("fade");var o=typeof this.options.placement=="function"?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement;var l=/\s?auto?\s?/i;var h=l.test(o);if(h)o=o.replace(l,"")||"top";a.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this);this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element);this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition();var u=a[0].offsetWidth;var d=a[0].offsetHeight;if(h){var f=o;var p=this.getPosition(this.$viewport);o=o=="bottom"&&c.bottom+d>p.bottom?"top":o=="top"&&c.top-d<p.top?"bottom":o=="right"&&c.right+u>p.width?"left":o=="left"&&c.left-u<p.left?"right":o;a.removeClass(f).addClass(o)}var m=this.getCalculatedOffset(o,c,u,d);this.applyPlacement(m,o);var g=function(){var e=s.hoverState;s.$element.trigger("shown.bs."+s.type);s.hoverState=null;if(e=="out")s.leave(s)};e.support.transition&&this.$tip.hasClass("fade")?a.one("bsTransitionEnd",g).emulateTransitionEnd(t.TRANSITION_DURATION):g()}};t.prototype.applyPlacement=function(t,i){var n=this.tip();var s=n[0].offsetWidth;var a=n[0].offsetHeight;var r=parseInt(n.css("margin-top"),10);var o=parseInt(n.css("margin-left"),10);if(isNaN(r))r=0;if(isNaN(o))o=0;t.top+=r;t.left+=o;e.offset.setOffset(n[0],e.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0);n.addClass("in");var l=n[0].offsetWidth;var h=n[0].offsetHeight;if(i=="top"&&h!=a){t.top=t.top+a-h}var c=this.getViewportAdjustedDelta(i,t,l,h);if(c.left)t.left+=c.left;else t.top+=c.top;var u=/top|bottom/.test(i);var d=u?c.left*2-s+l:c.top*2-a+h;var f=u?"offsetWidth":"offsetHeight";n.offset(t);this.replaceArrow(d,n[0][f],u)};t.prototype.replaceArrow=function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")};t.prototype.setContent=function(){var e=this.tip();var t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t);e.removeClass("fade in top bottom left right")};t.prototype.hide=function(i){var n=this;var s=e(this.$tip);var a=e.Event("hide.bs."+this.type);function r(){if(n.hoverState!="in")s.detach();if(n.$element){n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type)}i&&i()}this.$element.trigger(a);if(a.isDefaultPrevented())return;s.removeClass("in");e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",r).emulateTransitionEnd(t.TRANSITION_DURATION):r();this.hoverState=null;return this};t.prototype.fixTitle=function(){var e=this.$element;if(e.attr("title")||typeof e.attr("data-original-title")!="string"){e.attr("data-original-title",e.attr("title")||"").attr("title","")}};t.prototype.hasContent=function(){return this.getTitle()};t.prototype.getPosition=function(t){t=t||this.$element;var i=t[0];var n=i.tagName=="BODY";var s=i.getBoundingClientRect();if(s.width==null){s=e.extend({},s,{width:s.right-s.left,height:s.bottom-s.top})}var a=window.SVGElement&&i instanceof window.SVGElement;var r=n?{top:0,left:0}:a?null:t.offset();var o={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()};var l=n?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},s,o,l,r)};t.prototype.getCalculatedOffset=function(e,t,i,n){return e=="bottom"?{top:t.top+t.height,left:t.left+t.width/2-i/2}:e=="top"?{top:t.top-n,left:t.left+t.width/2-i/2}:e=="left"?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}};t.prototype.getViewportAdjustedDelta=function(e,t,i,n){var s={top:0,left:0};if(!this.$viewport)return s;var a=this.options.viewport&&this.options.viewport.padding||0;var r=this.getPosition(this.$viewport);if(/right|left/.test(e)){var o=t.top-a-r.scroll;var l=t.top+a-r.scroll+n;if(o<r.top){s.top=r.top-o}else if(l>r.top+r.height){s.top=r.top+r.height-l}}else{var h=t.left-a;var c=t.left+a+i;if(h<r.left){s.left=r.left-h}else if(c>r.right){s.left=r.left+r.width-c}}return s};t.prototype.getTitle=function(){var e;var t=this.$element;var i=this.options;e=t.attr("data-original-title")||(typeof i.title=="function"?i.title.call(t[0]):i.title);return e};t.prototype.getUID=function(e){do e+=~~(Math.random()*1e6);while(document.getElementById(e));return e};t.prototype.tip=function(){if(!this.$tip){this.$tip=e(this.options.template);if(this.$tip.length!=1){throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!")}}return this.$tip};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};t.prototype.enable=function(){this.enabled=true};t.prototype.disable=function(){this.enabled=false};t.prototype.toggleEnabled=function(){this.enabled=!this.enabled};t.prototype.toggle=function(t){var i=this;if(t){i=e(t.currentTarget).data("bs."+this.type);if(!i){i=new this.constructor(t.currentTarget,this.getDelegateOptions());e(t.currentTarget).data("bs."+this.type,i)}}if(t){i.inState.click=!i.inState.click;if(i.isInStateTrue())i.enter(i);else i.leave(i)}else{i.tip().hasClass("in")?i.leave(i):i.enter(i)}};t.prototype.destroy=function(){var e=this;clearTimeout(this.timeout);this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type);if(e.$tip){e.$tip.detach()}e.$tip=null;e.$arrow=null;e.$viewport=null;e.$element=null})};function i(i){return this.each(function(){var n=e(this);var s=n.data("bs.tooltip");var a=typeof i=="object"&&i;if(!s&&/destroy|hide/.test(i))return;if(!s)n.data("bs.tooltip",s=new t(this,a));if(typeof i=="string")s[i]()})}var n=e.fn.tooltip;e.fn.tooltip=i;e.fn.tooltip.Constructor=t;e.fn.tooltip.noConflict=function(){e.fn.tooltip=n;return this}}(jQuery);+function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.7";t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype);t.prototype.constructor=t;t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.setContent=function(){var e=this.tip();var t=this.getTitle();var i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t);e.find(".popover-content").children().detach().end()[this.options.html?typeof i=="string"?"html":"append":"text"](i);e.removeClass("fade top bottom left right in");if(!e.find(".popover-title").html())e.find(".popover-title").hide()};t.prototype.hasContent=function(){return this.getTitle()||this.getContent()};t.prototype.getContent=function(){var e=this.$element;var t=this.options;return e.attr("data-content")||(typeof t.content=="function"?t.content.call(e[0]):t.content)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};function i(i){return this.each(function(){var n=e(this);var s=n.data("bs.popover");var a=typeof i=="object"&&i;if(!s&&/destroy|hide/.test(i))return;if(!s)n.data("bs.popover",s=new t(this,a));if(typeof i=="string")s[i]()})}var n=e.fn.popover;e.fn.popover=i;e.fn.popover.Constructor=t;e.fn.popover.noConflict=function(){e.fn.popover=n;return this}}(jQuery);+function(e){"use strict";function t(i,n){this.$body=e(document.body);this.$scrollElement=e(i).is(document.body)?e(window):e(i);this.options=e.extend({},t.DEFAULTS,n);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this));this.refresh();this.process()}t.VERSION="3.3.7";t.DEFAULTS={offset:10};t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};t.prototype.refresh=function(){var t=this;var i="offset";var n=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();if(!e.isWindow(this.$scrollElement[0])){i="position";n=this.$scrollElement.scrollTop()}this.$body.find(this.selector).map(function(){var t=e(this);var s=t.data("target")||t.attr("href");var a=/^#./.test(s)&&e(s);return a&&a.length&&a.is(":visible")&&[[a[i]().top+n,s]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]);t.targets.push(this[1])})};t.prototype.process=function(){var e=this.$scrollElement.scrollTop()+this.options.offset;var t=this.getScrollHeight();var i=this.options.offset+t-this.$scrollElement.height();var n=this.offsets;var s=this.targets;var a=this.activeTarget;var r;if(this.scrollHeight!=t){this.refresh()}if(e>=i){return a!=(r=s[s.length-1])&&this.activate(r)}if(a&&e<n[0]){this.activeTarget=null;return this.clear()}for(r=n.length;r--;){a!=s[r]&&e>=n[r]&&(n[r+1]===undefined||e<n[r+1])&&this.activate(s[r])}};t.prototype.activate=function(t){this.activeTarget=t;this.clear();var i=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]';var n=e(i).parents("li").addClass("active");if(n.parent(".dropdown-menu").length){n=n.closest("li.dropdown").addClass("active")}n.trigger("activate.bs.scrollspy")};t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};function i(i){return this.each(function(){var n=e(this);var s=n.data("bs.scrollspy");var a=typeof i=="object"&&i;if(!s)n.data("bs.scrollspy",s=new t(this,a));if(typeof i=="string")s[i]()})}var n=e.fn.scrollspy;e.fn.scrollspy=i;e.fn.scrollspy.Constructor=t;e.fn.scrollspy.noConflict=function(){e.fn.scrollspy=n;return this};e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery);+function(e){"use strict";var t=function(t){this.element=e(t)};t.VERSION="3.3.7";t.TRANSITION_DURATION=150;t.prototype.show=function(){var t=this.element;var i=t.closest("ul:not(.dropdown-menu)");var n=t.data("target");if(!n){n=t.attr("href");n=n&&n.replace(/.*(?=#[^\s]*$)/,"")}if(t.parent("li").hasClass("active"))return;var s=i.find(".active:last a");var a=e.Event("hide.bs.tab",{relatedTarget:t[0]});var r=e.Event("show.bs.tab",{relatedTarget:s[0]});s.trigger(a);t.trigger(r);if(r.isDefaultPrevented()||a.isDefaultPrevented())return;var o=e(n);this.activate(t.closest("li"),i);this.activate(o,o.parent(),function(){s.trigger({type:"hidden.bs.tab",relatedTarget:t[0]});t.trigger({type:"shown.bs.tab",relatedTarget:s[0]})})};t.prototype.activate=function(i,n,s){var a=n.find("> .active");var r=s&&e.support.transition&&(a.length&&a.hasClass("fade")||!!n.find("> .fade").length);function o(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",false);i.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",true);if(r){i[0].offsetWidth;i.addClass("in")}else{i.removeClass("fade")}if(i.parent(".dropdown-menu").length){i.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",true)}s&&s()}a.length&&r?a.one("bsTransitionEnd",o).emulateTransitionEnd(t.TRANSITION_DURATION):o();a.removeClass("in")};function i(i){return this.each(function(){var n=e(this);var s=n.data("bs.tab");if(!s)n.data("bs.tab",s=new t(this));if(typeof i=="string")s[i]()})}var n=e.fn.tab;e.fn.tab=i;e.fn.tab.Constructor=t;e.fn.tab.noConflict=function(){e.fn.tab=n;return this};var s=function(t){t.preventDefault();i.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',s).on("click.bs.tab.data-api",'[data-toggle="pill"]',s)}(jQuery);+function(e){"use strict";var t=function(i,n){this.options=e.extend({},t.DEFAULTS,n);this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this));this.$element=e(i);this.affixed=null;this.unpin=null;this.pinnedOffset=null;this.checkPosition()};t.VERSION="3.3.7";t.RESET="affix affix-top affix-bottom";t.DEFAULTS={offset:0,target:window};t.prototype.getState=function(e,t,i,n){var s=this.$target.scrollTop();var a=this.$element.offset();var r=this.$target.height();if(i!=null&&this.affixed=="top")return s<i?"top":false;if(this.affixed=="bottom"){if(i!=null)return s+this.unpin<=a.top?false:"bottom";return s+r<=e-n?false:"bottom"}var o=this.affixed==null;var l=o?s:a.top;var h=o?r:t;if(i!=null&&s<=i)return"top";if(n!=null&&l+h>=e-n)return"bottom";return false};t.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(t.RESET).addClass("affix");var e=this.$target.scrollTop();var i=this.$element.offset();return this.pinnedOffset=i.top-e};t.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)};t.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var i=this.$element.height();var n=this.options.offset;var s=n.top;var a=n.bottom;var r=Math.max(e(document).height(),e(document.body).height());if(typeof n!="object")a=s=n;if(typeof s=="function")s=n.top(this.$element);if(typeof a=="function")a=n.bottom(this.$element);var o=this.getState(r,i,s,a);if(this.affixed!=o){if(this.unpin!=null)this.$element.css("top","");var l="affix"+(o?"-"+o:"");var h=e.Event(l+".bs.affix");this.$element.trigger(h);if(h.isDefaultPrevented())return;this.affixed=o;this.unpin=o=="bottom"?this.getPinnedOffset():null;this.$element.removeClass(t.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}if(o=="bottom"){this.$element.offset({top:r-i-a})}};function i(i){return this.each(function(){var n=e(this);var s=n.data("bs.affix");var a=typeof i=="object"&&i;if(!s)n.data("bs.affix",s=new t(this,a));if(typeof i=="string")s[i]()})}var n=e.fn.affix;e.fn.affix=i;e.fn.affix.Constructor=t;e.fn.affix.noConflict=function(){e.fn.affix=n;return this};e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this);var n=t.data();n.offset=n.offset||{};if(n.offsetBottom!=null)n.offset.bottom=n.offsetBottom;if(n.offsetTop!=null)n.offset.top=n.offsetTop;i.call(t,n)})})}(jQuery);(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof module==="object"&&module.exports){module.exports=e(require("jquery"))}else{e(window.jQuery)}})(function($){"use strict";var func=function(){var e=function(e){return function(t){return e===t}};var t=function(e,t){return e===t};var i=function(e){return function(t,i){return t[e]===i[e]}};var n=function(){return true};var s=function(){return false};var a=function(e){return function(){return!e.apply(e,arguments)}};var r=function(e,t){return function(i){return e(i)&&t(i)}};var o=function(e){return e};var l=function(e,t){return function(){return e[t].apply(e,arguments)}};var h=0;var c=function(e){var t=++h+"";return e?e+t:t};var u=function(e){
var t=$(document);return{top:e.top+t.scrollTop(),left:e.left+t.scrollLeft(),width:e.right-e.left,height:e.bottom-e.top}};var d=function(e){var t={};for(var i in e){if(e.hasOwnProperty(i)){t[e[i]]=i}}return t};var f=function(e,t){t=t||"";return t+e.split(".").map(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}).join("")};var p=function(e,t,i){var n;return function(){var s=this,a=arguments;var r=function(){n=null;if(!i){e.apply(s,a)}};var o=i&&!n;clearTimeout(n);n=setTimeout(r,t);if(o){e.apply(s,a)}}};return{eq:e,eq2:t,peq2:i,ok:n,fail:s,self:o,not:a,and:r,invoke:l,uniqueId:c,rect2bnd:u,invertObject:d,namespaceToCamel:f,debounce:p}}();var list=function(){var e=function(e){return e[0]};var t=function(e){return e[e.length-1]};var i=function(e){return e.slice(0,e.length-1)};var n=function(e){return e.slice(1)};var s=function(e,t){for(var i=0,n=e.length;i<n;i++){var s=e[i];if(t(s)){return s}}};var a=function(e,t){for(var i=0,n=e.length;i<n;i++){if(!t(e[i])){return false}}return true};var r=function(e,t){return $.inArray(t,e)};var o=function(e,t){return r(e,t)!==-1};var l=function(e,t){t=t||func.self;return e.reduce(function(e,i){return e+t(i)},0)};var h=function(e){var t=[],i=-1,n=e.length;while(++i<n){t[i]=e[i]}return t};var c=function(e){return!e||!e.length};var u=function(i,s){if(!i.length){return[]}var a=n(i);return a.reduce(function(e,i){var n=t(e);if(s(t(n),i)){n[n.length]=i}else{e[e.length]=[i]}return e},[[e(i)]])};var d=function(e){var t=[];for(var i=0,n=e.length;i<n;i++){if(e[i]){t.push(e[i])}}return t};var f=function(e){var t=[];for(var i=0,n=e.length;i<n;i++){if(!o(t,e[i])){t.push(e[i])}}return t};var p=function(e,t){var i=r(e,t);if(i===-1){return null}return e[i+1]};var m=function(e,t){var i=r(e,t);if(i===-1){return null}return e[i-1]};return{head:e,last:t,initial:i,tail:n,prev:m,next:p,find:s,contains:o,all:a,sum:l,from:h,isEmpty:c,clusterBy:u,compact:d,unique:f}}();var isSupportAmd=typeof define==="function"&&define.amd;var isFontInstalled=function(e){var t=e==="Comic Sans MS"?"Courier New":"Comic Sans MS";var i=$("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body);var n=i.css("fontFamily",t).width();var s=i.css("fontFamily",e+","+t).width();i.remove();return n!==s};var userAgent=navigator.userAgent;var isMSIE=/MSIE|Trident/i.test(userAgent);var browserVersion;if(isMSIE){var matches=/MSIE (\d+[.]\d+)/.exec(userAgent);if(matches){browserVersion=parseFloat(matches[1])}matches=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(userAgent);if(matches){browserVersion=parseFloat(matches[1])}}var isEdge=/Edge\/\d+/.test(userAgent);var hasCodeMirror=!!window.CodeMirror;if(!hasCodeMirror&&isSupportAmd&&typeof require!=="undefined"){if(typeof require.resolve!=="undefined"){try{require.resolve("codemirror");hasCodeMirror=true}catch(e){}}else if(typeof eval("require").specified!=="undefined"){hasCodeMirror=eval("require").specified("codemirror")}}var agent={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:isMSIE,isEdge:isEdge,isFF:!isEdge&&/firefox/i.test(userAgent),isPhantom:/PhantomJS/i.test(userAgent),isWebkit:!isEdge&&/webkit/i.test(userAgent),isChrome:!isEdge&&/chrome/i.test(userAgent),isSafari:!isEdge&&/safari/i.test(userAgent),browserVersion:browserVersion,jqueryVersion:parseFloat($.fn.jquery),isSupportAmd:isSupportAmd,hasCodeMirror:hasCodeMirror,isFontInstalled:isFontInstalled,isW3CRangeSupport:!!document.createRange};var NBSP_CHAR=String.fromCharCode(160);var ZERO_WIDTH_NBSP_CHAR="\ufeff";var dom=function(){var e=function(e){return e&&$(e).hasClass("note-editable")};var t=function(e){return e&&$(e).hasClass("note-control-sizing")};var i=function(e){e=e.toUpperCase();return function(t){return t&&t.nodeName.toUpperCase()===e}};var n=function(e){return e&&e.nodeType===3};var s=function(e){return e&&e.nodeType===1};var a=function(e){return e&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(e.nodeName.toUpperCase())};var r=function(t){if(e(t)){return false}return t&&/^DIV|^P|^LI|^H[1-7]/.test(t.nodeName.toUpperCase())};var o=function(e){return e&&/^H[1-7]/.test(e.nodeName.toUpperCase())};var l=i("PRE");var h=i("LI");var c=function(e){return r(e)&&!h(e)};var u=i("TABLE");var d=i("DATA");var f=function(e){return!y(e)&&!p(e)&&!m(e)&&!r(e)&&!u(e)&&!v(e)&&!d(e)};var p=function(e){return e&&/^UL|^OL/.test(e.nodeName.toUpperCase())};var m=i("HR");var g=function(e){return e&&/^TD|^TH/.test(e.nodeName.toUpperCase())};var v=i("BLOCKQUOTE");var y=function(t){return g(t)||v(t)||e(t)};var b=i("A");var w=function(e){return f(e)&&!!E(e,r)};var x=function(e){return f(e)&&!E(e,r)};var _=i("BODY");var C=function(e,t){return e.nextSibling===t||e.previousSibling===t};var k=function(e,t){t=t||func.ok;var i=[];if(e.previousSibling&&t(e.previousSibling)){i.push(e.previousSibling)}i.push(e);if(e.nextSibling&&t(e.nextSibling)){i.push(e.nextSibling)}return i};var T=agent.isMSIE&&agent.browserVersion<11?"&nbsp;":"<br>";var S=function(e){if(n(e)){return e.nodeValue.length}if(e){return e.childNodes.length}return 0};var M=function(e){var t=S(e);if(t===0){return true}else if(!n(e)&&t===1&&e.innerHTML===T){return true}else if(list.all(e.childNodes,n)&&e.innerHTML===""){return true}return false};var D=function(e){if(!a(e)&&!S(e)){e.innerHTML=T}};var E=function(t,i){while(t){if(i(t)){return t}if(e(t)){break}t=t.parentNode}return null};var A=function(t,i){t=t.parentNode;while(t){if(S(t)!==1){break}if(i(t)){return t}if(e(t)){break}t=t.parentNode}return null};var P=function(t,i){i=i||func.fail;var n=[];E(t,function(t){if(!e(t)){n.push(t)}return i(t)});return n};var I=function(e,t){var i=P(e);return list.last(i.filter(t))};var N=function(e,t){var i=P(e);for(var n=t;n;n=n.parentNode){if($.inArray(n,i)>-1){return n}}return null};var O=function(e,t){t=t||func.fail;var i=[];while(e){if(t(e)){break}i.push(e);e=e.previousSibling}return i};var F=function(e,t){t=t||func.fail;var i=[];while(e){if(t(e)){break}i.push(e);e=e.nextSibling}return i};var R=function(e,t){var i=[];t=t||func.ok;(function n(s){if(e!==s&&t(s)){i.push(s)}for(var a=0,r=s.childNodes.length;a<r;a++){n(s.childNodes[a])}})(e);return i};var L=function(e,t){var i=e.parentNode;var n=$("<"+t+">")[0];i.insertBefore(n,e);n.appendChild(e);return n};var j=function(e,t){var i=t.nextSibling,n=t.parentNode;if(i){n.insertBefore(e,i)}else{n.appendChild(e)}return e};var U=function(e,t){$.each(t,function(t,i){e.appendChild(i)});return e};var H=function(e){return e.offset===0};var z=function(e){return e.offset===S(e.node)};var B=function(e){return H(e)||z(e)};var V=function(e,t){while(e&&e!==t){if(G(e)!==0){return false}e=e.parentNode}return true};var q=function(e,t){if(!t){return false}while(e&&e!==t){if(G(e)!==S(e.parentNode)-1){return false}e=e.parentNode}return true};var W=function(e,t){return H(e)&&V(e.node,t)};var Y=function(e,t){return z(e)&&q(e.node,t)};var G=function(e){var t=0;while(e=e.previousSibling){t+=1}return t};var Z=function(e){return!!(e&&e.childNodes&&e.childNodes.length)};var K=function(t,i){var n,s;if(t.offset===0){if(e(t.node)){return null}n=t.node.parentNode;s=G(t.node)}else if(Z(t.node)){n=t.node.childNodes[t.offset-1];s=S(n)}else{n=t.node;s=i?0:t.offset-1}return{node:n,offset:s}};var Q=function(t,i){var n,s;if(S(t.node)===t.offset){if(e(t.node)){return null}n=t.node.parentNode;s=G(t.node)+1}else if(Z(t.node)){n=t.node.childNodes[t.offset];s=0}else{n=t.node;s=i?S(t.node):t.offset+1}return{node:n,offset:s}};var J=function(e,t){return e.node===t.node&&e.offset===t.offset};var X=function(e){if(n(e.node)||!Z(e.node)||M(e.node)){return true}var t=e.node.childNodes[e.offset-1];var i=e.node.childNodes[e.offset];if((!t||a(t))&&(!i||a(i))){return true}return false};var ee=function(e,t){while(e){if(t(e)){return e}e=K(e)}return null};var te=function(e,t){while(e){if(t(e)){return e}e=Q(e)}return null};var ie=function(e){if(!n(e.node)){return false}var t=e.node.nodeValue.charAt(e.offset-1);return t&&(t!==" "&&t!==NBSP_CHAR)};var ne=function(e,t,i,n){var s=e;while(s){i(s);if(J(s,t)){break}var a=n&&e.node!==s.node&&t.node!==s.node;s=Q(s,a)}};var se=function(e,t){var i=P(t,func.eq(e));return i.map(G).reverse()};var ae=function(e,t){var i=e;for(var n=0,s=t.length;n<s;n++){if(i.childNodes.length<=t[n]){i=i.childNodes[i.childNodes.length-1]}else{i=i.childNodes[t[n]]}}return i};var re=function(e,t){var i=t&&t.isSkipPaddingBlankHTML;var s=t&&t.isNotSplitEdgePoint;if(B(e)&&(n(e.node)||s)){if(H(e)){return e.node}else if(z(e)){return e.node.nextSibling}}if(n(e.node)){return e.node.splitText(e.offset)}else{var a=e.node.childNodes[e.offset];var r=j(e.node.cloneNode(false),e.node);U(r,F(a));if(!i){D(e.node);D(r)}return r}};var oe=function(e,t,i){var n=P(t.node,func.eq(e));if(!n.length){return null}else if(n.length===1){return re(t,i)}return n.reduce(function(e,n){if(e===t.node){e=re(t,i)}return re({node:n,offset:e?dom.position(e):S(n)},i)})};var le=function(e,t){var i=t?r:y;var n=P(e.node,i);var s=list.last(n)||e.node;var a,o;if(i(s)){a=n[n.length-2];o=s}else{a=s;o=a.parentNode}var l=a&&oe(a,e,{isSkipPaddingBlankHTML:t,isNotSplitEdgePoint:t});if(!l&&o===e.node){l=e.node.childNodes[e.offset]}return{rightNode:l,container:o}};var he=function(e){return document.createElement(e)};var ce=function(e){return document.createTextNode(e)};var ue=function(e,t){if(!e||!e.parentNode){return}if(e.removeNode){return e.removeNode(t)}var i=e.parentNode;if(!t){var n=[];var s,a;for(s=0,a=e.childNodes.length;s<a;s++){n.push(e.childNodes[s])}for(s=0,a=n.length;s<a;s++){i.insertBefore(n[s],e)}}i.removeChild(e)};var de=function(t,i){while(t){if(e(t)||!i(t)){break}var n=t.parentNode;ue(t);t=n}};var fe=function(e,t){if(e.nodeName.toUpperCase()===t.toUpperCase()){return e}var i=he(t);if(e.style.cssText){i.style.cssText=e.style.cssText}U(i,list.from(e.childNodes));j(i,e);ue(e);return i};var pe=i("TEXTAREA");var me=function(e,t){var i=pe(e[0])?e.val():e.html();if(t){return i.replace(/[\n\r]/g,"")}return i};var ge=function(e,t){var i=me(e);if(t){var n=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;i=i.replace(n,function(e,t,i){i=i.toUpperCase();var n=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(i)&&!!t;var s=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(i);return e+(n||s?"\n":"")});i=$.trim(i)}return i};var ve=function(e){var t=$(e);var i=t.offset();var n=t.outerHeight(true);return{left:i.left,top:i.top+n}};var ye=function(e,t){Object.keys(t).forEach(function(i){e.on(i,t[i])})};var be=function(e,t){Object.keys(t).forEach(function(i){e.off(i,t[i])})};return{NBSP_CHAR:NBSP_CHAR,ZERO_WIDTH_NBSP_CHAR:ZERO_WIDTH_NBSP_CHAR,blank:T,emptyPara:"<p>"+T+"</p>",makePredByNodeName:i,isEditable:e,isControlSizing:t,isText:n,isElement:s,isVoid:a,isPara:r,isPurePara:c,isHeading:o,isInline:f,isBlock:func.not(f),isBodyInline:x,isBody:_,isParaInline:w,isPre:l,isList:p,isTable:u,isData:d,isCell:g,isBlockquote:v,isBodyContainer:y,isAnchor:b,isDiv:i("DIV"),isLi:h,isBR:i("BR"),isSpan:i("SPAN"),isB:i("B"),isU:i("U"),isS:i("S"),isI:i("I"),isImg:i("IMG"),isTextarea:pe,isEmpty:M,isEmptyAnchor:func.and(b,M),isClosestSibling:C,withClosestSiblings:k,nodeLength:S,isLeftEdgePoint:H,isRightEdgePoint:z,isEdgePoint:B,isLeftEdgeOf:V,isRightEdgeOf:q,isLeftEdgePointOf:W,isRightEdgePointOf:Y,prevPoint:K,nextPoint:Q,isSamePoint:J,isVisiblePoint:X,prevPointUntil:ee,nextPointUntil:te,isCharPoint:ie,walkPoint:ne,ancestor:E,singleChildAncestor:A,listAncestor:P,lastAncestor:I,listNext:F,listPrev:O,listDescendant:R,commonAncestor:N,wrap:L,insertAfter:j,appendChildNodes:U,position:G,hasChildren:Z,makeOffsetPath:se,fromOffsetPath:ae,splitTree:oe,splitPoint:le,create:he,createText:ce,remove:ue,removeWhile:de,replace:fe,html:ge,value:me,posFromPlaceholder:ve,attachEvents:ye,detachEvents:be}}();var Context=function(e,t){var i=this;var n=$.summernote.ui;this.memos={};this.modules={};this.layoutInfo={};this.options=t;this.initialize=function(){this.layoutInfo=n.createLayout(e,t);this._initialize();e.hide();return this};this.destroy=function(){this._destroy();e.removeData("summernote");n.removeLayout(e,this.layoutInfo)};this.reset=function(){var e=i.isDisabled();this.code(dom.emptyPara);this._destroy();this._initialize();if(e){i.disable()}};this._initialize=function(){var e=$.extend({},this.options.buttons);Object.keys(e).forEach(function(t){i.memo("button."+t,e[t])});var t=$.extend({},this.options.modules,$.summernote.plugins||{});Object.keys(t).forEach(function(e){i.module(e,t[e],true)});Object.keys(this.modules).forEach(function(e){i.initializeModule(e)})};this._destroy=function(){Object.keys(this.modules).reverse().forEach(function(e){i.removeModule(e)});Object.keys(this.memos).forEach(function(e){i.removeMemo(e)});this.triggerEvent("destroy",this)};this.code=function(t){var i=this.invoke("codeview.isActivated");if(t===undefined){this.invoke("codeview.sync");return i?this.layoutInfo.codable.val():this.layoutInfo.editable.html()}else{if(i){this.layoutInfo.codable.val(t)}else{this.layoutInfo.editable.html(t)}e.val(t);this.triggerEvent("change",t)}};this.isDisabled=function(){return this.layoutInfo.editable.attr("contenteditable")==="false"};this.enable=function(){this.layoutInfo.editable.attr("contenteditable",true);this.invoke("toolbar.activate",true)};this.disable=function(){if(this.invoke("codeview.isActivated")){this.invoke("codeview.deactivate")}this.layoutInfo.editable.attr("contenteditable",false);this.invoke("toolbar.deactivate",true)};this.triggerEvent=function(){var t=list.head(arguments);var i=list.tail(list.from(arguments));var n=this.options.callbacks[func.namespaceToCamel(t,"on")];if(n){n.apply(e[0],i)}e.trigger("summernote."+t,i)};this.initializeModule=function(t){var i=this.modules[t];i.shouldInitialize=i.shouldInitialize||func.ok;if(!i.shouldInitialize()){return}if(i.initialize){i.initialize()}if(i.events){dom.attachEvents(e,i.events)}};this.module=function(e,t,i){if(arguments.length===1){return this.modules[e]}this.modules[e]=new t(this);if(!i){this.initializeModule(e)}};this.removeModule=function(t){var i=this.modules[t];if(i.shouldInitialize()){if(i.events){dom.detachEvents(e,i.events)}if(i.destroy){i.destroy()}}delete this.modules[t]};this.memo=function(e,t){if(arguments.length===1){return this.memos[e]}this.memos[e]=t};this.removeMemo=function(e){if(this.memos[e]&&this.memos[e].destroy){this.memos[e].destroy()}delete this.memos[e]};this.createInvokeHandler=function(e,t){return function(n){n.preventDefault();i.invoke(e,t||$(n.target).closest("[data-value]").data("value"))}};this.invoke=function(){var e=list.head(arguments);var t=list.tail(list.from(arguments));var i=e.split(".");var n=i.length>1;var s=n&&list.head(i);var a=n?list.last(i):list.head(i);var r=this.modules[s||"editor"];if(!s&&this[a]){return this[a].apply(this,t)}else if(r&&r[a]&&r.shouldInitialize()){return r[a].apply(r,t)}};return this.initialize()};$.fn.extend({summernote:function(){var e=$.type(list.head(arguments));var t=e==="string";var i=e==="object";var n=i?list.head(arguments):{};n=$.extend({},$.summernote.options,n);n.langInfo=$.extend(true,{},$.summernote.lang["en-US"],$.summernote.lang[n.lang]);n.icons=$.extend(true,{},$.summernote.options.icons,n.icons);this.each(function(e,t){var i=$(t);if(!i.data("summernote")){var s=new Context(i,n);i.data("summernote",s);i.data("summernote").triggerEvent("init",s.layoutInfo)}});var s=this.first();if(s.length){var a=s.data("summernote");if(t){return a.invoke.apply(a,list.from(arguments))}else if(n.focus){a.invoke("editor.focus")}}return this}});var Renderer=function(e,t,i,n){this.render=function(s){var a=$(e);if(i&&i.contents){a.html(i.contents)}if(i&&i.className){a.addClass(i.className)}if(i&&i.data){$.each(i.data,function(e,t){a.attr("data-"+e,t)})}if(i&&i.click){a.on("click",i.click)}if(t){var r=a.find(".note-children-container");t.forEach(function(e){e.render(r.length?r:a)})}if(n){n(a,i)}if(i&&i.callback){i.callback(a)}if(s){s.append(a)}return a}};var renderer={create:function(e,t){return function(){var i=$.isArray(arguments[0])?arguments[0]:[];var n=typeof arguments[1]==="object"?arguments[1]:arguments[0];if(n&&n.children){i=n.children}return new Renderer(e,i,n,t)}}};var editor=renderer.create('<div class="note-editor note-frame panel panel-default"/>');var toolbar=renderer.create('<div class="note-toolbar panel-heading"/>');var editingArea=renderer.create('<div class="note-editing-area"/>');var codable=renderer.create('<textarea class="note-codable"/>');var editable=renderer.create('<div class="note-editable panel-body" contentEditable="true"/>');var statusbar=renderer.create(['<div class="note-statusbar">','  <div class="note-resizebar">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join(""));var airEditor=renderer.create('<div class="note-editor"/>');var airEditable=renderer.create('<div class="note-editable" contentEditable="true"/>');var buttonGroup=renderer.create('<div class="note-btn-group btn-group">');var button=renderer.create('<button type="button" class="note-btn btn btn-default btn-sm" tabindex="-1">',function(e,t){if(t&&t.tooltip){e.attr({title:t.tooltip}).tooltip({container:"body",trigger:"hover",placement:"bottom"})}});var dropdown=renderer.create('<div class="dropdown-menu">',function(e,t){var i=$.isArray(t.items)?t.items.map(function(e){var i=typeof e==="string"?e:e.value||"";var n=t.template?t.template(e):e;return'<li><a href="#" data-value="'+i+'">'+n+"</a></li>"}).join(""):t.items;e.html(i)});var dropdownCheck=renderer.create('<div class="dropdown-menu note-check">',function(e,t){var i=$.isArray(t.items)?t.items.map(function(e){var i=typeof e==="string"?e:e.value||"";var n=t.template?t.template(e):e;return'<li><a href="#" data-value="'+i+'">'+icon(t.checkClassName)+" "+n+"</a></li>"}).join(""):t.items;e.html(i)});var palette=renderer.create('<div class="note-color-palette"/>',function(e,t){var i=[];for(var n=0,s=t.colors.length;n<s;n++){var a=t.eventName;var r=t.colors[n];var o=[];for(var l=0,h=r.length;l<h;l++){var c=r[l];o.push(['<button type="button" class="note-color-btn"','style="background-color:',c,'" ','data-event="',a,'" ','data-value="',c,'" ','title="',c,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}i.push('<div class="note-color-row">'+o.join("")+"</div>")}e.html(i.join(""));e.find(".note-color-btn").tooltip({container:"body",trigger:"hover",placement:"bottom"})});var dialog=renderer.create('<div class="modal" aria-hidden="false" tabindex="-1"/>',function(e,t){if(t.fade){e.addClass("fade")}e.html(['<div class="modal-dialog">','  <div class="modal-content">',t.title?'    <div class="modal-header">'+'      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>'+'      <h4 class="modal-title">'+t.title+"</h4>"+"    </div>":"",'    <div class="modal-body">'+t.body+"</div>",t.footer?'    <div class="modal-footer">'+t.footer+"</div>":"","  </div>","</div>"].join(""))});var popover=renderer.create(['<div class="note-popover popover in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(e,t){var i=typeof t.direction!=="undefined"?t.direction:"bottom";e.addClass(i);if(t.hideArrow){e.find(".arrow").hide()}});var icon=function(e,t){t=t||"i";return"<"+t+' class="'+e+'"/>'};var ui={editor:editor,toolbar:toolbar,editingArea:editingArea,codable:codable,editable:editable,statusbar:statusbar,airEditor:airEditor,airEditable:airEditable,buttonGroup:buttonGroup,button:button,dropdown:dropdown,dropdownCheck:dropdownCheck,palette:palette,dialog:dialog,popover:popover,icon:icon,toggleBtn:function(e,t){e.toggleClass("disabled",!t);e.attr("disabled",!t)},toggleBtnActive:function(e,t){e.toggleClass("active",t)},onDialogShown:function(e,t){e.one("shown.bs.modal",t)},onDialogHidden:function(e,t){e.one("hidden.bs.modal",t)},showDialog:function(e){e.modal("show")},hideDialog:function(e){e.modal("hide")},createLayout:function(e,t){var i=(t.airMode?ui.airEditor([ui.editingArea([ui.airEditable()])]):ui.editor([ui.toolbar(),ui.editingArea([ui.codable(),ui.editable()]),ui.statusbar()])).render();i.insertAfter(e);return{note:e,editor:i,toolbar:i.find(".note-toolbar"),editingArea:i.find(".note-editing-area"),editable:i.find(".note-editable"),codable:i.find(".note-codable"),statusbar:i.find(".note-statusbar")}},removeLayout:function(e,t){e.html(t.editable.html());t.editor.remove();e.show()}};$.summernote=$.summernote||{lang:{}};$.extend($.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",p:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var key=function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(t){return list.contains([e.BACKSPACE,e.TAB,e.ENTER,e.SPACE],t)},isMove:function(t){return list.contains([e.LEFT,e.UP,e.RIGHT,e.DOWN],t)},nameFromCode:func.invertObject(e),code:e}}();var range=function(){var e=function(e,t){var i=e.parentElement(),n;var s=document.body.createTextRange(),a;var r=list.from(i.childNodes);for(n=0;n<r.length;n++){if(dom.isText(r[n])){continue}s.moveToElementText(r[n]);if(s.compareEndPoints("StartToStart",e)>=0){break}a=r[n]}if(n!==0&&dom.isText(r[n-1])){var o=document.body.createTextRange(),l=null;o.moveToElementText(a||i);o.collapse(!a);l=a?a.nextSibling:i.firstChild;var h=e.duplicate();h.setEndPoint("StartToStart",o);var c=h.text.replace(/[\r\n]/g,"").length;while(c>l.nodeValue.length&&l.nextSibling){c-=l.nodeValue.length;l=l.nextSibling}var u=l.nodeValue;if(t&&l.nextSibling&&dom.isText(l.nextSibling)&&c===l.nodeValue.length){c-=l.nodeValue.length;l=l.nextSibling}i=l;n=c}return{cont:i,offset:n}};var t=function(e){var t=function(e,i){var n,s;if(dom.isText(e)){var a=dom.listPrev(e,func.not(dom.isText));var r=list.last(a).previousSibling;n=r||e.parentNode;i+=list.sum(list.tail(a),dom.nodeLength);s=!r}else{n=e.childNodes[i]||e;if(dom.isText(n)){return t(n,0)}i=0;s=false}return{node:n,collapseToStart:s,offset:i}};var i=document.body.createTextRange();var n=t(e.node,e.offset);i.moveToElementText(n.node);i.collapse(n.collapseToStart);i.moveStart("character",n.offset);return i};var i=function(e,n,s,a){this.sc=e;this.so=n;this.ec=s;this.eo=a;var r=function(){if(agent.isW3CRangeSupport){var i=document.createRange();i.setStart(e,n);i.setEnd(s,a);return i}else{var r=t({node:e,offset:n});r.setEndPoint("EndToEnd",t({node:s,offset:a}));return r}};this.getPoints=function(){return{sc:e,so:n,ec:s,eo:a}};this.getStartPoint=function(){return{node:e,offset:n}};this.getEndPoint=function(){return{node:s,offset:a}};this.select=function(){var e=r();if(agent.isW3CRangeSupport){var t=document.getSelection();if(t.rangeCount>0){t.removeAllRanges()}t.addRange(e)}else{e.select()}return this};this.scrollIntoView=function(e){var t=$(e).height();if(e.scrollTop+t<this.sc.offsetTop){e.scrollTop+=Math.abs(e.scrollTop+t-this.sc.offsetTop)}return this};this.normalize=function(){var e=function(e,t){if(dom.isVisiblePoint(e)&&!dom.isEdgePoint(e)||dom.isVisiblePoint(e)&&dom.isRightEdgePoint(e)&&!t||dom.isVisiblePoint(e)&&dom.isLeftEdgePoint(e)&&t||dom.isVisiblePoint(e)&&dom.isBlock(e.node)&&dom.isEmpty(e.node)){return e}var i=dom.ancestor(e.node,dom.isBlock);if((dom.isLeftEdgePointOf(e,i)||dom.isVoid(dom.prevPoint(e).node))&&!t||(dom.isRightEdgePointOf(e,i)||dom.isVoid(dom.nextPoint(e).node))&&t){if(dom.isVisiblePoint(e)){return e}t=!t}var n=t?dom.nextPointUntil(dom.nextPoint(e),dom.isVisiblePoint):dom.prevPointUntil(dom.prevPoint(e),dom.isVisiblePoint);return n||e};var t=e(this.getEndPoint(),false);var n=this.isCollapsed()?t:e(this.getStartPoint(),true);return new i(n.node,n.offset,t.node,t.offset)};this.nodes=function(e,t){e=e||func.ok;var i=t&&t.includeAncestor;var n=t&&t.fullyContains;var s=this.getStartPoint();var a=this.getEndPoint();var r=[];var o=[];dom.walkPoint(s,a,function(t){if(dom.isEditable(t.node)){return}var s;if(n){if(dom.isLeftEdgePoint(t)){o.push(t.node)}if(dom.isRightEdgePoint(t)&&list.contains(o,t.node)){s=t.node}}else if(i){s=dom.ancestor(t.node,e)}else{s=t.node}if(s&&e(s)){r.push(s)}},true);return list.unique(r)};this.commonAncestor=function(){return dom.commonAncestor(e,s)};this.expand=function(t){var r=dom.ancestor(e,t);var o=dom.ancestor(s,t);if(!r&&!o){return new i(e,n,s,a)}var l=this.getPoints();if(r){l.sc=r;l.so=0}if(o){l.ec=o;l.eo=dom.nodeLength(o)}return new i(l.sc,l.so,l.ec,l.eo)};this.collapse=function(t){if(t){return new i(e,n,e,n)}else{return new i(s,a,s,a)}};this.splitText=function(){var t=e===s;var r=this.getPoints();if(dom.isText(s)&&!dom.isEdgePoint(this.getEndPoint())){s.splitText(a)}if(dom.isText(e)&&!dom.isEdgePoint(this.getStartPoint())){r.sc=e.splitText(n);r.so=0;if(t){r.ec=r.sc;r.eo=a-n}}return new i(r.sc,r.so,r.ec,r.eo)};this.deleteContents=function(){if(this.isCollapsed()){return this}var e=this.splitText();var t=e.nodes(null,{fullyContains:true});var n=dom.prevPointUntil(e.getStartPoint(),function(e){return!list.contains(t,e.node)});var s=[];$.each(t,function(e,t){var i=t.parentNode;if(n.node!==i&&dom.nodeLength(i)===1){s.push(i)}dom.remove(t,false)});$.each(s,function(e,t){dom.remove(t,false)});return new i(n.node,n.offset,n.node,n.offset).normalize()};var o=function(t){return function(){var i=dom.ancestor(e,t);return!!i&&i===dom.ancestor(s,t)}};this.isOnEditable=o(dom.isEditable);this.isOnList=o(dom.isList);this.isOnAnchor=o(dom.isAnchor);this.isOnCell=o(dom.isCell);this.isOnData=o(dom.isData);this.isLeftEdgeOf=function(e){if(!dom.isLeftEdgePoint(this.getStartPoint())){return false}var t=dom.ancestor(this.sc,e);return t&&dom.isLeftEdgeOf(this.sc,t)};this.isCollapsed=function(){return e===s&&n===a};this.wrapBodyInlineWithPara=function(){if(dom.isBodyContainer(e)&&dom.isEmpty(e)){e.innerHTML=dom.emptyPara;return new i(e.firstChild,0,e.firstChild,0)}var t=this.normalize();if(dom.isParaInline(e)||dom.isPara(e)){return t}var n;if(dom.isInline(t.sc)){var s=dom.listAncestor(t.sc,func.not(dom.isInline));n=list.last(s);if(!dom.isInline(n)){n=s[s.length-2]||t.sc.childNodes[t.so]}}else{n=t.sc.childNodes[t.so>0?t.so-1:0]}var a=dom.listPrev(n,dom.isParaInline).reverse();a=a.concat(dom.listNext(n.nextSibling,dom.isParaInline));if(a.length){var r=dom.wrap(list.head(a),"p");dom.appendChildNodes(r,list.tail(a))}return this.normalize()};this.insertNode=function(e){var t=this.wrapBodyInlineWithPara().deleteContents();var i=dom.splitPoint(t.getStartPoint(),dom.isInline(e));if(i.rightNode){i.rightNode.parentNode.insertBefore(e,i.rightNode)}else{i.container.appendChild(e)}return e};this.pasteHTML=function(e){var t=$("<div></div>").html(e)[0];var i=list.from(t.childNodes);var n=this.wrapBodyInlineWithPara().deleteContents();return i.reverse().map(function(e){return n.insertNode(e)}).reverse()};this.toString=function(){var e=r();return agent.isW3CRangeSupport?e.toString():e.text};this.getWordRange=function(e){var t=this.getEndPoint();if(!dom.isCharPoint(t)){return this}var n=dom.prevPointUntil(t,function(e){return!dom.isCharPoint(e)});if(e){t=dom.nextPointUntil(t,function(e){return!dom.isCharPoint(e)})}return new i(n.node,n.offset,t.node,t.offset)};this.bookmark=function(t){return{s:{path:dom.makeOffsetPath(t,e),offset:n},e:{path:dom.makeOffsetPath(t,s),offset:a}}};this.paraBookmark=function(t){return{s:{path:list.tail(dom.makeOffsetPath(list.head(t),e)),offset:n},e:{path:list.tail(dom.makeOffsetPath(list.last(t),s)),offset:a}}};this.getClientRects=function(){var e=r();return e.getClientRects()}};return{create:function(e,t,n,s){if(arguments.length===4){return new i(e,t,n,s)}else if(arguments.length===2){n=e;s=t;return new i(e,t,n,s)}else{var a=this.createFromSelection();if(!a&&arguments.length===1){a=this.createFromNode(arguments[0]);return a.collapse(dom.emptyPara===arguments[0].innerHTML)}return a}},createFromSelection:function(){var t,n,s,a;if(agent.isW3CRangeSupport){var r=document.getSelection();if(!r||r.rangeCount===0){return null}else if(dom.isBody(r.anchorNode)){return null}var o=r.getRangeAt(0);t=o.startContainer;n=o.startOffset;s=o.endContainer;a=o.endOffset}else{var l=document.selection.createRange();var h=l.duplicate();h.collapse(false);var c=l;c.collapse(true);var u=e(c,true),d=e(h,false);if(dom.isText(u.node)&&dom.isLeftEdgePoint(u)&&dom.isTextNode(d.node)&&dom.isRightEdgePoint(d)&&d.node.nextSibling===u.node){u=d}t=u.cont;n=u.offset;s=d.cont;a=d.offset}return new i(t,n,s,a)},createFromNode:function(e){var t=e;var i=0;var n=e;var s=dom.nodeLength(n);if(dom.isVoid(t)){i=dom.listPrev(t).length-1;t=t.parentNode}if(dom.isBR(n)){s=dom.listPrev(n).length-1;n=n.parentNode}else if(dom.isVoid(n)){s=dom.listPrev(n).length;n=n.parentNode}return this.create(t,i,n,s)},createFromNodeBefore:function(e){return this.createFromNode(e).collapse(true)},createFromNodeAfter:function(e){return this.createFromNode(e).collapse();
},createFromBookmark:function(e,t){var n=dom.fromOffsetPath(e,t.s.path);var s=t.s.offset;var a=dom.fromOffsetPath(e,t.e.path);var r=t.e.offset;return new i(n,s,a,r)},createFromParaBookmark:function(e,t){var n=e.s.offset;var s=e.e.offset;var a=dom.fromOffsetPath(list.head(t),e.s.path);var r=dom.fromOffsetPath(list.last(t),e.e.path);return new i(a,n,r,s)}}}();var async=function(){var e=function(e){return $.Deferred(function(t){$.extend(new FileReader,{onload:function(e){var i=e.target.result;t.resolve(i)},onerror:function(){t.reject(this)}}).readAsDataURL(e)}).promise()};var t=function(e){return $.Deferred(function(t){var i=$("<img>");i.one("load",function(){i.off("error abort");t.resolve(i)}).one("error abort",function(){i.off("load").detach();t.reject(i)}).css({display:"none"}).appendTo(document.body).attr("src",e)}).promise()};return{readFileAsDataURL:e,createImage:t}}();var History=function(e){var t=[],i=-1;var n=e[0];var s=function(){var t=range.create(n);var i={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:e.html(),bookmark:t?t.bookmark(n):i}};var a=function(t){if(t.contents!==null){e.html(t.contents)}if(t.bookmark!==null){range.createFromBookmark(n,t.bookmark).select()}};this.rewind=function(){if(e.html()!==t[i].contents){this.recordUndo()}i=0;a(t[i])};this.reset=function(){t=[];i=-1;e.html("");this.recordUndo()};this.undo=function(){if(e.html()!==t[i].contents){this.recordUndo()}if(0<i){i--;a(t[i])}};this.redo=function(){if(t.length-1>i){i++;a(t[i])}};this.recordUndo=function(){i++;if(t.length>i){t=t.slice(0,i)}t.push(s())}};var Style=function(){var e=function(e,t){if(agent.jqueryVersion<1.9){var i={};$.each(t,function(t,n){i[n]=e.css(n)});return i}return e.css.call(e,t)};this.fromNode=function(t){var i=["font-family","font-size","text-align","list-style-type","line-height"];var n=e(t,i)||{};n["font-size"]=parseInt(n["font-size"],10);return n};this.stylePara=function(e,t){$.each(e.nodes(dom.isPara,{includeAncestor:true}),function(e,i){$(i).css(t)})};this.styleNodes=function(e,t){e=e.splitText();var i=t&&t.nodeName||"SPAN";var n=!!(t&&t.expandClosestSibling);var s=!!(t&&t.onlyPartialContains);if(e.isCollapsed()){return[e.insertNode(dom.create(i))]}var a=dom.makePredByNodeName(i);var r=e.nodes(dom.isText,{fullyContains:true}).map(function(e){return dom.singleChildAncestor(e,a)||dom.wrap(e,i)});if(n){if(s){var o=e.nodes();a=func.and(a,function(e){return list.contains(o,e)})}return r.map(function(e){var t=dom.withClosestSiblings(e,a);var i=list.head(t);var n=list.tail(t);$.each(n,function(e,t){dom.appendChildNodes(i,t.childNodes);dom.remove(t)});return list.head(t)})}else{return r}};this.current=function(e){var t=$(!dom.isElement(e.sc)?e.sc.parentNode:e.sc);var i=this.fromNode(t);try{i=$.extend(i,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal"})}catch(e){}if(!e.isOnList()){i["list-style"]="none"}else{var n=["circle","disc","disc-leading-zero","square"];var s=$.inArray(i["list-style-type"],n)>-1;i["list-style"]=s?"unordered":"ordered"}var a=dom.ancestor(e.sc,dom.isPara);if(a&&a.style["line-height"]){i["line-height"]=a.style.lineHeight}else{var r=parseInt(i["line-height"],10)/parseInt(i["font-size"],10);i["line-height"]=r.toFixed(1)}i.anchor=e.isOnAnchor()&&dom.ancestor(e.sc,dom.isAnchor);i.ancestors=dom.listAncestor(e.sc,dom.isEditable);i.range=e;return i}};var Bullet=function(){var e=this;this.insertOrderedList=function(e){this.toggleList("OL",e)};this.insertUnorderedList=function(e){this.toggleList("UL",e)};this.indent=function(e){var t=this;var i=range.create(e).wrapBodyInlineWithPara();var n=i.nodes(dom.isPara,{includeAncestor:true});var s=list.clusterBy(n,func.peq2("parentNode"));$.each(s,function(e,i){var n=list.head(i);if(dom.isLi(n)){t.wrapList(i,n.parentNode.nodeName)}else{$.each(i,function(e,t){$(t).css("marginLeft",function(e,t){return(parseInt(t,10)||0)+25})})}});i.select()};this.outdent=function(e){var t=this;var i=range.create(e).wrapBodyInlineWithPara();var n=i.nodes(dom.isPara,{includeAncestor:true});var s=list.clusterBy(n,func.peq2("parentNode"));$.each(s,function(e,i){var n=list.head(i);if(dom.isLi(n)){t.releaseList([i])}else{$.each(i,function(e,t){$(t).css("marginLeft",function(e,t){t=parseInt(t,10)||0;return t>25?t-25:""})})}});i.select()};this.toggleList=function(t,i){var n=range.create(i).wrapBodyInlineWithPara();var s=n.nodes(dom.isPara,{includeAncestor:true});var a=n.paraBookmark(s);var r=list.clusterBy(s,func.peq2("parentNode"));if(list.find(s,dom.isPurePara)){var o=[];$.each(r,function(i,n){o=o.concat(e.wrapList(n,t))});s=o}else{var l=n.nodes(dom.isList,{includeAncestor:true}).filter(function(e){return!$.nodeName(e,t)});if(l.length){$.each(l,function(e,i){dom.replace(i,t)})}else{s=this.releaseList(r,true)}}range.createFromParaBookmark(a,s).select()};this.wrapList=function(e,t){var i=list.head(e);var n=list.last(e);var s=dom.isList(i.previousSibling)&&i.previousSibling;var a=dom.isList(n.nextSibling)&&n.nextSibling;var r=s||dom.insertAfter(dom.create(t||"UL"),n);e=e.map(function(e){return dom.isPurePara(e)?dom.replace(e,"LI"):e});dom.appendChildNodes(r,e);if(a){dom.appendChildNodes(r,list.from(a.childNodes));dom.remove(a)}return e};this.releaseList=function(e,t){var i=[];$.each(e,function(e,n){var s=list.head(n);var a=list.last(n);var r=t?dom.lastAncestor(s,dom.isList):s.parentNode;var o=r.childNodes.length>1?dom.splitTree(r,{node:a.parentNode,offset:dom.position(a)+1},{isSkipPaddingBlankHTML:true}):null;var l=dom.splitTree(r,{node:s.parentNode,offset:dom.position(s)},{isSkipPaddingBlankHTML:true});n=t?dom.listDescendant(l,dom.isLi):list.from(l.childNodes).filter(dom.isLi);if(t||!dom.isList(r.parentNode)){n=n.map(function(e){return dom.replace(e,"P")})}$.each(list.from(n).reverse(),function(e,t){dom.insertAfter(t,r)});var h=list.compact([r,l,o]);$.each(h,function(e,t){var i=[t].concat(dom.listDescendant(t,dom.isList));$.each(i.reverse(),function(e,t){if(!dom.nodeLength(t)){dom.remove(t,true)}})});i=i.concat(n)});return i}};var Typing=function(){var e=new Bullet;this.insertTab=function(e,t){var i=dom.createText(new Array(t+1).join(dom.NBSP_CHAR));e=e.deleteContents();e.insertNode(i,true);e=range.create(i,t);e.select()};this.insertParagraph=function(t){var i=range.create(t);i=i.deleteContents();i=i.wrapBodyInlineWithPara();var n=dom.ancestor(i.sc,dom.isPara);var s;if(n){if(dom.isEmpty(n)&&dom.isLi(n)){e.toggleList(n.parentNode.nodeName);return}else if(dom.isEmpty(n)&&dom.isPara(n)&&dom.isBlockquote(n.parentNode)){dom.insertAfter(n,n.parentNode);s=n}else{s=dom.splitTree(n,i.getStartPoint());var a=dom.listDescendant(n,dom.isEmptyAnchor);a=a.concat(dom.listDescendant(s,dom.isEmptyAnchor));$.each(a,function(e,t){dom.remove(t)});if((dom.isHeading(s)||dom.isPre(s))&&dom.isEmpty(s)){s=dom.replace(s,"p")}}}else{var r=i.sc.childNodes[i.so];s=$(dom.emptyPara)[0];if(r){i.sc.insertBefore(s,r)}else{i.sc.appendChild(s)}}range.create(s,0).normalize().select().scrollIntoView(t)}};var Table=function(){this.tab=function(e,t){var i=dom.ancestor(e.commonAncestor(),dom.isCell);var n=dom.ancestor(i,dom.isTable);var s=dom.listDescendant(n,dom.isCell);var a=list[t?"prev":"next"](s,i);if(a){range.create(a,0).select()}};this.createTable=function(e,t,i){var n=[],s;for(var a=0;a<e;a++){n.push("<td>"+dom.blank+"</td>")}s=n.join("");var r=[],o;for(var l=0;l<t;l++){r.push("<tr>"+s+"</tr>")}o=r.join("");var h=$("<table>"+o+"</table>");if(i&&i.tableClassName){h.addClass(i.tableClassName)}return h[0]}};var KEY_BOGUS="bogus";var Editor=function(e){var t=this;var i=e.layoutInfo.note;var n=e.layoutInfo.editor;var s=e.layoutInfo.editable;var a=e.options;var r=a.langInfo;var o=s[0];var l=null;var h=new Style;var c=new Table;var u=new Typing;var d=new Bullet;var f=new History(s);this.initialize=function(){s.on("keydown",function(i){if(i.keyCode===key.code.ENTER){e.triggerEvent("enter",i)}e.triggerEvent("keydown",i);if(!i.isDefaultPrevented()){if(a.shortcuts){t.handleKeyMap(i)}else{t.preventDefaultEditableShortCuts(i)}}}).on("keyup",function(t){e.triggerEvent("keyup",t)}).on("focus",function(t){e.triggerEvent("focus",t)}).on("blur",function(t){e.triggerEvent("blur",t)}).on("mousedown",function(t){e.triggerEvent("mousedown",t)}).on("mouseup",function(t){e.triggerEvent("mouseup",t)}).on("scroll",function(t){e.triggerEvent("scroll",t)}).on("paste",function(t){e.triggerEvent("paste",t)});s.html(dom.html(i)||dom.emptyPara);var r=agent.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";s.on(r,func.debounce(function(){e.triggerEvent("change",s.html())},250));n.on("focusin",function(t){e.triggerEvent("focusin",t)}).on("focusout",function(t){e.triggerEvent("focusout",t)});if(!a.airMode){if(a.width){n.outerWidth(a.width)}if(a.height){s.outerHeight(a.height)}if(a.maxHeight){s.css("max-height",a.maxHeight)}if(a.minHeight){s.css("min-height",a.minHeight)}}f.recordUndo()};this.destroy=function(){s.off()};this.handleKeyMap=function(t){var i=a.keyMap[agent.isMac?"mac":"pc"];var n=[];if(t.metaKey){n.push("CMD")}if(t.ctrlKey&&!t.altKey){n.push("CTRL")}if(t.shiftKey){n.push("SHIFT")}var s=key.nameFromCode[t.keyCode];if(s){n.push(s)}var r=i[n.join("+")];if(r){t.preventDefault();e.invoke(r)}else if(key.isEdit(t.keyCode)){this.afterCommand()}};this.preventDefaultEditableShortCuts=function(e){if((e.ctrlKey||e.metaKey)&&list.contains([66,73,85],e.keyCode)){e.preventDefault()}};this.createRange=function(){this.focus();return range.create(o)};this.saveRange=function(e){l=this.createRange();if(e){l.collapse().select()}};this.restoreRange=function(){if(l){l.select();this.focus()}};this.saveTarget=function(e){s.data("target",e)};this.clearTarget=function(){s.removeData("target")};this.restoreTarget=function(){return s.data("target")};this.currentStyle=function(){var e=range.create();if(e){e=e.normalize()}return e?h.current(e):h.fromNode(s)};this.styleFromNode=function(e){return h.fromNode(e)};this.undo=function(){e.triggerEvent("before.command",s.html());f.undo();e.triggerEvent("change",s.html())};e.memo("help.undo",r.help.undo);this.redo=function(){e.triggerEvent("before.command",s.html());f.redo();e.triggerEvent("change",s.html())};e.memo("help.redo",r.help.redo);var p=this.beforeCommand=function(){e.triggerEvent("before.command",s.html());t.focus()};var m=this.afterCommand=function(t){f.recordUndo();if(!t){e.triggerEvent("change",s.html())}};var g=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"];for(var v=0,y=g.length;v<y;v++){this[g[v]]=function(e){return function(t){p();document.execCommand(e,false,t);m(true)}}(g[v]);e.memo("help."+g[v],r.help[g[v]])}this.tab=function(){var e=this.createRange();if(e.isCollapsed()&&e.isOnCell()){c.tab(e)}else{p();u.insertTab(e,a.tabSize);m()}};e.memo("help.tab",r.help.tab);this.untab=function(){var e=this.createRange();if(e.isCollapsed()&&e.isOnCell()){c.tab(e,true)}};e.memo("help.untab",r.help.untab);this.wrapCommand=function(e){return function(){p();e.apply(t,arguments);m()}};this.insertParagraph=this.wrapCommand(function(){u.insertParagraph(o)});e.memo("help.insertParagraph",r.help.insertParagraph);this.insertOrderedList=this.wrapCommand(function(){d.insertOrderedList(o)});e.memo("help.insertOrderedList",r.help.insertOrderedList);this.insertUnorderedList=this.wrapCommand(function(){d.insertUnorderedList(o)});e.memo("help.insertUnorderedList",r.help.insertUnorderedList);this.indent=this.wrapCommand(function(){d.indent(o)});e.memo("help.indent",r.help.indent);this.outdent=this.wrapCommand(function(){d.outdent(o)});e.memo("help.outdent",r.help.outdent);this.insertImage=function(t,i){return async.createImage(t,i).then(function(e){p();if(typeof i==="function"){i(e)}else{if(typeof i==="string"){e.attr("data-filename",i)}e.css("width",Math.min(s.width(),e.width()))}e.show();range.create(o).insertNode(e[0]);range.createFromNodeAfter(e[0]).select();m()}).fail(function(t){e.triggerEvent("image.upload.error",t)})};this.insertImages=function(i){$.each(i,function(i,n){var s=n.name;if(a.maximumImageFileSize&&a.maximumImageFileSize<n.size){e.triggerEvent("image.upload.error",r.image.maximumFileSizeError)}else{async.readFileAsDataURL(n).then(function(e){return t.insertImage(e,s)}).fail(function(){e.triggerEvent("image.upload.error")})}})};this.insertImagesOrCallback=function(t){var i=a.callbacks;if(i.onImageUpload){e.triggerEvent("image.upload",t)}else{this.insertImages(t)}};this.insertNode=this.wrapCommand(function(e){var t=this.createRange();t.insertNode(e);range.createFromNodeAfter(e).select()});this.insertText=this.wrapCommand(function(e){var t=this.createRange();var i=t.insertNode(dom.createText(e));range.create(i,dom.nodeLength(i)).select()});this.getSelectedText=function(){var e=this.createRange();if(e.isOnAnchor()){e=range.createFromNode(dom.ancestor(e.sc,dom.isAnchor))}return e.toString()};this.pasteHTML=this.wrapCommand(function(e){var t=this.createRange().pasteHTML(e);range.createFromNodeAfter(list.last(t)).select()});this.formatBlock=this.wrapCommand(function(e){e=agent.isMSIE?"<"+e+">":e;document.execCommand("FormatBlock",false,e)});this.formatPara=function(){this.formatBlock("P")};e.memo("help.formatPara",r.help.formatPara);for(var v=1;v<=6;v++){this["formatH"+v]=function(e){return function(){this.formatBlock("H"+e)}}(v);e.memo("help.formatH"+v,r.help["formatH"+v])}this.fontSize=function(e){var t=this.createRange();if(t&&t.isCollapsed()){var i=h.styleNodes(t);var n=list.head(i);$(i).css({"font-size":e+"px"});if(n&&!dom.nodeLength(n)){n.innerHTML=dom.ZERO_WIDTH_NBSP_CHAR;range.createFromNodeAfter(n.firstChild).select();s.data(KEY_BOGUS,n)}}else{p();$(h.styleNodes(t)).css({"font-size":e+"px"});m()}};this.insertHorizontalRule=this.wrapCommand(function(){var e=this.createRange().insertNode(dom.create("HR"));if(e.nextSibling){range.create(e.nextSibling,0).normalize().select()}});e.memo("help.insertHorizontalRule",r.help.insertHorizontalRule);this.removeBogus=function(){var e=s.data(KEY_BOGUS);if(!e){return}var t=list.find(list.from(e.childNodes),dom.isText);var i=t.nodeValue.indexOf(dom.ZERO_WIDTH_NBSP_CHAR);if(i!==-1){t.deleteData(i,1)}if(dom.isEmpty(e)){dom.remove(e)}s.removeData(KEY_BOGUS)};this.lineHeight=this.wrapCommand(function(e){h.stylePara(this.createRange(),{lineHeight:e})});this.unlink=function(){var e=this.createRange();if(e.isOnAnchor()){var t=dom.ancestor(e.sc,dom.isAnchor);e=range.createFromNode(t);e.select();p();document.execCommand("unlink");m()}};this.createLink=this.wrapCommand(function(e){var t=e.url;var i=e.text;var n=e.isNewWindow;var s=e.range||this.createRange();var r=s.toString()!==i;if(typeof t==="string"){t=t.trim()}if(a.onCreateLink){t=a.onCreateLink(t)}else{t=/^[A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?/.test(t)?t:"http://"+t}var o=[];if(r){s=s.deleteContents();var l=s.insertNode($("<A>"+i+"</A>")[0]);o.push(l)}else{o=h.styleNodes(s,{nodeName:"A",expandClosestSibling:true,onlyPartialContains:true})}$.each(o,function(e,i){$(i).attr("href",t);if(n){$(i).attr("target","_blank")}else{$(i).removeAttr("target")}});var c=range.createFromNodeBefore(list.head(o));var u=c.getStartPoint();var d=range.createFromNodeAfter(list.last(o));var f=d.getEndPoint();range.create(u.node,u.offset,f.node,f.offset).select()});this.getLinkInfo=function(){var e=this.createRange().expand(dom.isAnchor);var t=$(list.head(e.nodes(dom.isAnchor)));return{range:e,text:e.toString(),isNewWindow:t.length?t.attr("target")==="_blank":false,url:t.length?t.attr("href"):""}};this.color=this.wrapCommand(function(e){var t=e.foreColor;var i=e.backColor;if(t){document.execCommand("foreColor",false,t)}if(i){document.execCommand("backColor",false,i)}});this.insertTable=this.wrapCommand(function(e){var t=e.split("x");var i=this.createRange().deleteContents();i.insertNode(c.createTable(t[0],t[1],a))});this.floatMe=this.wrapCommand(function(e){var t=$(this.restoreTarget());t.css("float",e)});this.resize=this.wrapCommand(function(e){var t=$(this.restoreTarget());t.css({width:e*100+"%",height:""})});this.resizeTo=function(e,t,i){var n;if(i){var s=e.y/e.x;var a=t.data("ratio");n={width:a>s?e.x:e.y/a,height:a>s?e.x*a:e.y}}else{n={width:e.x,height:e.y}}t.css(n)};this.removeMedia=this.wrapCommand(function(){var t=$(this.restoreTarget()).detach();e.triggerEvent("media.delete",t,s)});this.hasFocus=function(){return s.is(":focus")};this.focus=function(){if(!this.hasFocus()){s.focus()}};this.isEmpty=function(){return dom.isEmpty(s[0])||dom.emptyPara===s.html()};this.empty=function(){e.invoke("code",dom.emptyPara)}};var Clipboard=function(e){var t=this;var i=e.layoutInfo.editable;this.events={"summernote.keydown":function(i,n){if(t.needKeydownHook()){if((n.ctrlKey||n.metaKey)&&n.keyCode===key.code.V){e.invoke("editor.saveRange");t.$paste.focus();setTimeout(function(){t.pasteByHook()},0)}}}};this.needKeydownHook=function(){return agent.isMSIE&&agent.browserVersion>10||agent.isFF};this.initialize=function(){if(this.needKeydownHook()){this.$paste=$('<div tabindex="-1" />').attr("contenteditable",true).css({position:"absolute",left:-1e5,opacity:0});i.before(this.$paste);this.$paste.on("paste",function(t){e.triggerEvent("paste",t)})}else{i.on("paste",this.pasteByEvent)}};this.destroy=function(){if(this.needKeydownHook()){this.$paste.remove();this.$paste=null}};this.pasteByHook=function(){var t=this.$paste[0].firstChild;if(dom.isImg(t)){var i=t.src;var n=atob(i.split(",")[1]);var s=new Uint8Array(n.length);for(var a=0;a<n.length;a++){s[a]=n.charCodeAt(a)}var r=new Blob([s],{type:"image/png"});r.name="clipboard.png";e.invoke("editor.restoreRange");e.invoke("editor.focus");e.invoke("editor.insertImagesOrCallback",[r])}else{var o=$("<div />").html(this.$paste.html()).html();e.invoke("editor.restoreRange");e.invoke("editor.focus");if(o){e.invoke("editor.pasteHTML",o)}}this.$paste.empty()};this.pasteByEvent=function(t){var i=t.originalEvent.clipboardData;if(i&&i.items&&i.items.length){var n=list.head(i.items);if(n.kind==="file"&&n.type.indexOf("image/")!==-1){e.invoke("editor.insertImagesOrCallback",[n.getAsFile()])}e.invoke("editor.afterCommand")}}};var Dropzone=function(e){var t=$(document);var i=e.layoutInfo.editor;var n=e.layoutInfo.editable;var s=e.options;var a=s.langInfo;var r={};var o=$(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(i);var l=function(){Object.keys(r).forEach(function(e){t.off(e.substr(2).toLowerCase(),r[e])});r={}};this.initialize=function(){if(s.disableDragAndDrop){r.onDrop=function(e){e.preventDefault()};t.on("drop",r.onDrop)}else{this.attachDragAndDropEvent()}};this.attachDragAndDropEvent=function(){var s=$(),l=o.find(".note-dropzone-message");r.onDragenter=function(t){var n=e.invoke("codeview.isActivated");var r=i.width()>0&&i.height()>0;if(!n&&!s.length&&r){i.addClass("dragover");o.width(i.width());o.height(i.height());l.text(a.image.dragImageHere)}s=s.add(t.target)};r.onDragleave=function(e){s=s.not(e.target);if(!s.length){i.removeClass("dragover")}};r.onDrop=function(){s=$();i.removeClass("dragover")};t.on("dragenter",r.onDragenter).on("dragleave",r.onDragleave).on("drop",r.onDrop);o.on("dragenter",function(){o.addClass("hover");l.text(a.image.dropImage)}).on("dragleave",function(){o.removeClass("hover");l.text(a.image.dragImageHere)});o.on("drop",function(t){var i=t.originalEvent.dataTransfer;if(i&&i.files&&i.files.length){t.preventDefault();n.focus();e.invoke("editor.insertImagesOrCallback",i.files)}else{$.each(i.types,function(t,n){var s=i.getData(n);if(n.toLowerCase().indexOf("text")>-1){e.invoke("editor.pasteHTML",s)}else{$(s).each(function(){e.invoke("editor.insertNode",this)})}})}}).on("dragover",false)};this.destroy=function(){l()}};var CodeMirror;if(agent.hasCodeMirror){if(agent.isSupportAmd){require(["codemirror"],function(e){CodeMirror=e})}else{CodeMirror=window.CodeMirror}}var Codeview=function(e){var t=e.layoutInfo.editor;var i=e.layoutInfo.editable;var n=e.layoutInfo.codable;var s=e.options;this.sync=function(){var e=this.isActivated();if(e&&agent.hasCodeMirror){n.data("cmEditor").save()}};this.isActivated=function(){return t.hasClass("codeview")};this.toggle=function(){if(this.isActivated()){this.deactivate()}else{this.activate()}e.triggerEvent("codeview.toggled")};this.activate=function(){n.val(dom.html(i,s.prettifyHtml));n.height(i.height());e.invoke("toolbar.updateCodeview",true);t.addClass("codeview");n.focus();if(agent.hasCodeMirror){var a=CodeMirror.fromTextArea(n[0],s.codemirror);if(s.codemirror.tern){var r=new CodeMirror.TernServer(s.codemirror.tern);a.ternServer=r;a.on("cursorActivity",function(e){r.updateArgHints(e)})}a.setSize(null,i.outerHeight());n.data("cmEditor",a)}};this.deactivate=function(){if(agent.hasCodeMirror){var a=n.data("cmEditor");n.val(a.getValue());a.toTextArea()}var r=dom.value(n,s.prettifyHtml)||dom.emptyPara;var o=i.html()!==r;i.html(r);i.height(s.height?n.height():"auto");t.removeClass("codeview");if(o){e.triggerEvent("change",i.html(),i)}i.focus();e.invoke("toolbar.updateCodeview",false)};this.destroy=function(){if(this.isActivated()){this.deactivate()}}};var EDITABLE_PADDING=24;var Statusbar=function(e){var t=$(document);var i=e.layoutInfo.statusbar;var n=e.layoutInfo.editable;var s=e.options;this.initialize=function(){if(s.airMode||s.disableResizeEditor){this.destroy();return}i.on("mousedown",function(e){e.preventDefault();e.stopPropagation();var i=n.offset().top-t.scrollTop();t.on("mousemove",function(e){var t=e.clientY-(i+EDITABLE_PADDING);t=s.minheight>0?Math.max(t,s.minheight):t;t=s.maxHeight>0?Math.min(t,s.maxHeight):t;n.height(t)}).one("mouseup",function(){t.off("mousemove")})})};this.destroy=function(){i.off();i.remove()}};var Fullscreen=function(e){var t=e.layoutInfo.editor;var i=e.layoutInfo.toolbar;var n=e.layoutInfo.editable;var s=e.layoutInfo.codable;var a=$(window);var r=$("html, body");this.toggle=function(){var o=function(e){n.css("height",e.h);s.css("height",e.h);if(s.data("cmeditor")){s.data("cmeditor").setsize(null,e.h)}};t.toggleClass("fullscreen");if(this.isFullscreen()){n.data("orgHeight",n.css("height"));a.on("resize",function(){o({h:a.height()-i.outerHeight()})}).trigger("resize");r.css("overflow","hidden")}else{a.off("resize");o({h:n.data("orgHeight")});r.css("overflow","visible")}e.invoke("toolbar.updateFullscreen",this.isFullscreen())};this.isFullscreen=function(){return t.hasClass("fullscreen")}};var Handle=function(e){var t=this;var i=$(document);var n=e.layoutInfo.editingArea;var s=e.options;this.events={"summernote.mousedown":function(e,i){if(t.update(i.target)){i.preventDefault()}},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){t.update()}};this.initialize=function(){this.$handle=$(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',s.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',s.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(n);this.$handle.on("mousedown",function(n){if(dom.isControlSizing(n.target)){n.preventDefault();n.stopPropagation();var s=t.$handle.find(".note-control-selection").data("target"),a=s.offset(),r=i.scrollTop();i.on("mousemove",function(i){e.invoke("editor.resizeTo",{x:i.clientX-a.left,y:i.clientY-(a.top-r)},s,!i.shiftKey);t.update(s[0])}).one("mouseup",function(t){t.preventDefault();i.off("mousemove");e.invoke("editor.afterCommand")});if(!s.data("ratio")){s.data("ratio",s.height()/s.width())}}})};this.destroy=function(){this.$handle.remove()};this.update=function(t){var i=dom.isImg(t);var n=this.$handle.find(".note-control-selection");e.invoke("imagePopover.update",t);if(i){var s=$(t);var a=s.position();var r={w:s.outerWidth(true),h:s.outerHeight(true)};n.css({display:"block",left:a.left,top:a.top,width:r.w,height:r.h}).data("target",s);var o=r.w+"x"+r.h;n.find(".note-control-selection-info").text(o);e.invoke("editor.saveTarget",t)}else{this.hide()}return i};this.hide=function(){e.invoke("editor.clearTarget");this.$handle.children().hide()}};var AutoLink=function(e){var t=this;var i="http://";var n=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/\/]?|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;this.events={"summernote.keyup":function(e,i){if(!i.isDefaultPrevented()){t.handleKeyup(i)}},"summernote.keydown":function(e,i){t.handleKeydown(i)}};this.initialize=function(){this.lastWordRange=null};this.destroy=function(){this.lastWordRange=null};this.replace=function(){if(!this.lastWordRange){return}var t=this.lastWordRange.toString();var s=t.match(n);if(s&&(s[1]||s[2])){var a=s[1]?t:i+t;var r=$("<a />").html(t).attr("href",a)[0];this.lastWordRange.insertNode(r);this.lastWordRange=null;e.invoke("editor.focus")}};this.handleKeydown=function(t){if(list.contains([key.code.ENTER,key.code.SPACE],t.keyCode)){var i=e.invoke("editor.createRange").getWordRange();this.lastWordRange=i}};this.handleKeyup=function(e){if(list.contains([key.code.ENTER,key.code.SPACE],e.keyCode)){this.replace()}}};var AutoSync=function(e){var t=e.layoutInfo.note;this.events={"summernote.change":function(){t.val(e.invoke("code"))}};this.shouldInitialize=function(){return dom.isTextarea(t[0])}};var Placeholder=function(e){var t=this;var i=e.layoutInfo.editingArea;var n=e.options;this.events={"summernote.init summernote.change":function(){t.update()},"summernote.codeview.toggled":function(){t.update()}};this.shouldInitialize=function(){return!!n.placeholder};this.initialize=function(){this.$placeholder=$('<div class="note-placeholder">');this.$placeholder.on("click",function(){e.invoke("focus")}).text(n.placeholder).prependTo(i)};this.destroy=function(){this.$placeholder.remove()};this.update=function(){var t=!e.invoke("codeview.isActivated")&&e.invoke("editor.isEmpty");this.$placeholder.toggle(t)}};var Buttons=function(e){var t=this;var i=$.summernote.ui;var n=e.layoutInfo.toolbar;var s=e.options;var a=s.langInfo;var r=func.invertObject(s.keyMap[agent.isMac?"mac":"pc"]);var o=this.representShortcut=function(e){var t=r[e];if(!s.shortcuts||!t){return""}if(agent.isMac){t=t.replace("CMD","").replace("SHIFT","")}t=t.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]");return" ("+t+")"};this.initialize=function(){this.addToolbarButtons();this.addImagePopoverButtons();this.addLinkPopoverButtons();this.fontInstalledMap={}};this.destroy=function(){delete this.fontInstalledMap};this.isFontInstalled=function(e){if(!t.fontInstalledMap.hasOwnProperty(e)){t.fontInstalledMap[e]=agent.isFontInstalled(e)||list.contains(s.fontNamesIgnoreCheck,e)}return t.fontInstalledMap[e]};this.addToolbarButtons=function(){e.memo("button.style",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:i.icon(s.icons.magic)+" "+i.icon(s.icons.caret,"span"),tooltip:a.style.style,data:{toggle:"dropdown"}}),i.dropdown({className:"dropdown-style",items:e.options.styleTags,template:function(e){if(typeof e==="string"){e={tag:e,title:a.style.hasOwnProperty(e)?a.style[e]:e}}var t=e.tag;var i=e.title;var n=e.style?' style="'+e.style+'" ':"";var s=e.className?' class="'+e.className+'"':"";return"<"+t+n+s+">"+i+"</"+t+">"},click:e.createInvokeHandler("editor.formatBlock")})]).render()});e.memo("button.bold",function(){return i.button({className:"note-btn-bold",contents:i.icon(s.icons.bold),tooltip:a.font.bold+o("bold"),click:e.createInvokeHandler("editor.bold")}).render()});e.memo("button.italic",function(){return i.button({className:"note-btn-italic",contents:i.icon(s.icons.italic),tooltip:a.font.italic+o("italic"),click:e.createInvokeHandler("editor.italic")}).render()});e.memo("button.underline",function(){return i.button({className:"note-btn-underline",contents:i.icon(s.icons.underline),tooltip:a.font.underline+o("underline"),click:e.createInvokeHandler("editor.underline")}).render()});e.memo("button.clear",function(){return i.button({contents:i.icon(s.icons.eraser),tooltip:a.font.clear+o("removeFormat"),click:e.createInvokeHandler("editor.removeFormat")}).render()});e.memo("button.strikethrough",function(){return i.button({className:"note-btn-strikethrough",contents:i.icon(s.icons.strikethrough),tooltip:a.font.strikethrough+o("strikethrough"),click:e.createInvokeHandler("editor.strikethrough")}).render()});e.memo("button.superscript",function(){return i.button({className:"note-btn-superscript",contents:i.icon(s.icons.superscript),tooltip:a.font.superscript,click:e.createInvokeHandler("editor.superscript")}).render()});e.memo("button.subscript",function(){return i.button({className:"note-btn-subscript",contents:i.icon(s.icons.subscript),tooltip:a.font.subscript,click:e.createInvokeHandler("editor.subscript")}).render()});e.memo("button.fontname",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:'<span class="note-current-fontname"/> '+i.icon(s.icons.caret,"span"),tooltip:a.font.name,data:{toggle:"dropdown"}}),i.dropdownCheck({className:"dropdown-fontname",checkClassName:s.icons.menuCheck,items:s.fontNames.filter(t.isFontInstalled),template:function(e){return'<span style="font-family:'+e+'">'+e+"</span>"},click:e.createInvokeHandler("editor.fontName")})]).render()});e.memo("button.fontsize",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:'<span class="note-current-fontsize"/>'+i.icon(s.icons.caret,"span"),tooltip:a.font.size,data:{toggle:"dropdown"}}),i.dropdownCheck({className:"dropdown-fontsize",checkClassName:s.icons.menuCheck,items:s.fontSizes,click:e.createInvokeHandler("editor.fontSize")})]).render()});e.memo("button.color",function(){return i.buttonGroup({className:"note-color",children:[i.button({className:"note-current-color-button",contents:i.icon(s.icons.font+" note-recent-color"),tooltip:a.color.recent,click:function(t){var i=$(t.currentTarget);e.invoke("editor.color",{backColor:i.attr("data-backColor"),foreColor:i.attr("data-foreColor")})},callback:function(e){var t=e.find(".note-recent-color");t.css("background-color","#FFFF00");e.attr("data-backColor","#FFFF00")}}),i.button({className:"dropdown-toggle",contents:i.icon(s.icons.caret,"span"),tooltip:a.color.more,data:{toggle:"dropdown"}}),i.dropdown({items:["<li>",'<div class="btn-group">','  <div class="note-palette-title">'+a.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="backColor" data-value="inherit">',a.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"</div>",'<div class="btn-group">','  <div class="note-palette-title">'+a.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="removeFormat" data-value="foreColor">',a.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"</div>","</li>"].join(""),callback:function(e){e.find(".note-holder").each(function(){var e=$(this);e.append(i.palette({colors:s.colors,eventName:e.data("event")}).render())})},click:function(t){var i=$(t.target);var n=i.data("event");var s=i.data("value");if(n&&s){var a=n==="backColor"?"background-color":"color";var r=i.closest(".note-color").find(".note-recent-color");var o=i.closest(".note-color").find(".note-current-color-button");r.css(a,s);o.attr("data-"+n,s);e.invoke("editor."+n,s);
}}})]}).render()});e.memo("button.ul",function(){return i.button({contents:i.icon(s.icons.unorderedlist),tooltip:a.lists.unordered+o("insertUnorderedList"),click:e.createInvokeHandler("editor.insertUnorderedList")}).render()});e.memo("button.ol",function(){return i.button({contents:i.icon(s.icons.orderedlist),tooltip:a.lists.ordered+o("insertOrderedList"),click:e.createInvokeHandler("editor.insertOrderedList")}).render()});var n=i.button({contents:i.icon(s.icons.alignLeft),tooltip:a.paragraph.left+o("justifyLeft"),click:e.createInvokeHandler("editor.justifyLeft")});var r=i.button({contents:i.icon(s.icons.alignCenter),tooltip:a.paragraph.center+o("justifyCenter"),click:e.createInvokeHandler("editor.justifyCenter")});var l=i.button({contents:i.icon(s.icons.alignRight),tooltip:a.paragraph.right+o("justifyRight"),click:e.createInvokeHandler("editor.justifyRight")});var h=i.button({contents:i.icon(s.icons.alignJustify),tooltip:a.paragraph.justify+o("justifyFull"),click:e.createInvokeHandler("editor.justifyFull")});var c=i.button({contents:i.icon(s.icons.outdent),tooltip:a.paragraph.outdent+o("outdent"),click:e.createInvokeHandler("editor.outdent")});var u=i.button({contents:i.icon(s.icons.indent),tooltip:a.paragraph.indent+o("indent"),click:e.createInvokeHandler("editor.indent")});e.memo("button.justifyLeft",func.invoke(n,"render"));e.memo("button.justifyCenter",func.invoke(r,"render"));e.memo("button.justifyRight",func.invoke(l,"render"));e.memo("button.justifyFull",func.invoke(h,"render"));e.memo("button.outdent",func.invoke(c,"render"));e.memo("button.indent",func.invoke(u,"render"));e.memo("button.paragraph",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:i.icon(s.icons.alignLeft)+" "+i.icon(s.icons.caret,"span"),tooltip:a.paragraph.paragraph,data:{toggle:"dropdown"}}),i.dropdown([i.buttonGroup({className:"note-align",children:[n,r,l,h]}),i.buttonGroup({className:"note-list",children:[c,u]})])]).render()});e.memo("button.height",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:i.icon(s.icons.textHeight)+" "+i.icon(s.icons.caret,"span"),tooltip:a.font.height,data:{toggle:"dropdown"}}),i.dropdownCheck({items:s.lineHeights,checkClassName:s.icons.menuCheck,className:"dropdown-line-height",click:e.createInvokeHandler("editor.lineHeight")})]).render()});e.memo("button.table",function(){return i.buttonGroup([i.button({className:"dropdown-toggle",contents:i.icon(s.icons.table)+" "+i.icon(s.icons.caret,"span"),tooltip:a.table.table,data:{toggle:"dropdown"}}),i.dropdown({className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(i){var n=i.find(".note-dimension-picker-mousecatcher");n.css({width:s.insertTableMaxSize.col+"em",height:s.insertTableMaxSize.row+"em"}).mousedown(e.createInvokeHandler("editor.insertTable")).on("mousemove",t.tableMoveHandler)}}).render()});e.memo("button.link",function(){return i.button({contents:i.icon(s.icons.link),tooltip:a.link.link+o("linkDialog.show"),click:e.createInvokeHandler("linkDialog.show")}).render()});e.memo("button.picture",function(){return i.button({contents:i.icon(s.icons.picture),tooltip:a.image.image,click:e.createInvokeHandler("imageDialog.show")}).render()});e.memo("button.video",function(){return i.button({contents:i.icon(s.icons.video),tooltip:a.video.video,click:e.createInvokeHandler("videoDialog.show")}).render()});e.memo("button.hr",function(){return i.button({contents:i.icon(s.icons.minus),tooltip:a.hr.insert+o("insertHorizontalRule"),click:e.createInvokeHandler("editor.insertHorizontalRule")}).render()});e.memo("button.fullscreen",function(){return i.button({className:"btn-fullscreen",contents:i.icon(s.icons.arrowsAlt),tooltip:a.options.fullscreen,click:e.createInvokeHandler("fullscreen.toggle")}).render()});e.memo("button.codeview",function(){return i.button({className:"btn-codeview",contents:i.icon(s.icons.code),tooltip:a.options.codeview,click:e.createInvokeHandler("codeview.toggle")}).render()});e.memo("button.redo",function(){return i.button({contents:i.icon(s.icons.redo),tooltip:a.history.redo+o("redo"),click:e.createInvokeHandler("editor.redo")}).render()});e.memo("button.undo",function(){return i.button({contents:i.icon(s.icons.undo),tooltip:a.history.undo+o("undo"),click:e.createInvokeHandler("editor.undo")}).render()});e.memo("button.help",function(){return i.button({contents:i.icon(s.icons.question),tooltip:a.options.help,click:e.createInvokeHandler("helpDialog.show")}).render()})};this.addImagePopoverButtons=function(){e.memo("button.imageSize100",function(){return i.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:a.image.resizeFull,click:e.createInvokeHandler("editor.resize","1")}).render()});e.memo("button.imageSize50",function(){return i.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:a.image.resizeHalf,click:e.createInvokeHandler("editor.resize","0.5")}).render()});e.memo("button.imageSize25",function(){return i.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:a.image.resizeQuarter,click:e.createInvokeHandler("editor.resize","0.25")}).render()});e.memo("button.floatLeft",function(){return i.button({contents:i.icon(s.icons.alignLeft),tooltip:a.image.floatLeft,click:e.createInvokeHandler("editor.floatMe","left")}).render()});e.memo("button.floatRight",function(){return i.button({contents:i.icon(s.icons.alignRight),tooltip:a.image.floatRight,click:e.createInvokeHandler("editor.floatMe","right")}).render()});e.memo("button.floatNone",function(){return i.button({contents:i.icon(s.icons.alignJustify),tooltip:a.image.floatNone,click:e.createInvokeHandler("editor.floatMe","none")}).render()});e.memo("button.removeMedia",function(){return i.button({contents:i.icon(s.icons.trash),tooltip:a.image.remove,click:e.createInvokeHandler("editor.removeMedia")}).render()})};this.addLinkPopoverButtons=function(){e.memo("button.linkDialogShow",function(){return i.button({contents:i.icon(s.icons.link),tooltip:a.link.edit,click:e.createInvokeHandler("linkDialog.show")}).render()});e.memo("button.unlink",function(){return i.button({contents:i.icon(s.icons.unlink),tooltip:a.link.unlink,click:e.createInvokeHandler("editor.unlink")}).render()})};this.build=function(t,n){for(var s=0,a=n.length;s<a;s++){var r=n[s];var o=r[0];var l=r[1];var h=i.buttonGroup({className:"note-"+o}).render();for(var c=0,u=l.length;c<u;c++){var d=e.memo("button."+l[c]);if(d){h.append(typeof d==="function"?d(e):d)}}h.appendTo(t)}};this.updateCurrentStyle=function(){var i=e.invoke("editor.currentStyle");this.updateBtnStates({".note-btn-bold":function(){return i["font-bold"]==="bold"},".note-btn-italic":function(){return i["font-italic"]==="italic"},".note-btn-underline":function(){return i["font-underline"]==="underline"},".note-btn-subscript":function(){return i["font-subscript"]==="subscript"},".note-btn-superscript":function(){return i["font-superscript"]==="superscript"},".note-btn-strikethrough":function(){return i["font-strikethrough"]==="strikethrough"}});if(i["font-family"]){var s=i["font-family"].split(",").map(function(e){return e.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")});var a=list.find(s,t.isFontInstalled);n.find(".dropdown-fontname li a").each(function(){var e=$(this).data("value")+""===a+"";this.className=e?"checked":""});n.find(".note-current-fontname").text(a)}if(i["font-size"]){var r=i["font-size"];n.find(".dropdown-fontsize li a").each(function(){var e=$(this).data("value")+""===r+"";this.className=e?"checked":""});n.find(".note-current-fontsize").text(r)}if(i["line-height"]){var o=i["line-height"];n.find(".dropdown-line-height li a").each(function(){var e=$(this).data("value")+""===o+"";this.className=e?"checked":""})}};this.updateBtnStates=function(e){$.each(e,function(e,t){i.toggleBtnActive(n.find(e),t())})};this.tableMoveHandler=function(e){var t=18;var i=$(e.target.parentNode);var n=i.next();var a=i.find(".note-dimension-picker-mousecatcher");var r=i.find(".note-dimension-picker-highlighted");var o=i.find(".note-dimension-picker-unhighlighted");var l;if(e.offsetX===undefined){var h=$(e.target).offset();l={x:e.pageX-h.left,y:e.pageY-h.top}}else{l={x:e.offsetX,y:e.offsetY}}var c={c:Math.ceil(l.x/t)||1,r:Math.ceil(l.y/t)||1};r.css({width:c.c+"em",height:c.r+"em"});a.data("value",c.c+"x"+c.r);if(3<c.c&&c.c<s.insertTableMaxSize.col){o.css({width:c.c+1+"em"})}if(3<c.r&&c.r<s.insertTableMaxSize.row){o.css({height:c.r+1+"em"})}n.html(c.c+" x "+c.r)}};var Toolbar=function(e){var t=$.summernote.ui;var i=e.layoutInfo.note;var n=e.layoutInfo.toolbar;var s=e.options;this.shouldInitialize=function(){return!s.airMode};this.initialize=function(){s.toolbar=s.toolbar||[];if(!s.toolbar.length){n.hide()}else{e.invoke("buttons.build",n,s.toolbar)}if(s.toolbarContainer){n.appendTo(s.toolbarContainer)}i.on("summernote.keyup summernote.mouseup summernote.change",function(){e.invoke("buttons.updateCurrentStyle")});e.invoke("buttons.updateCurrentStyle")};this.destroy=function(){n.children().remove()};this.updateFullscreen=function(e){t.toggleBtnActive(n.find(".btn-fullscreen"),e)};this.updateCodeview=function(e){t.toggleBtnActive(n.find(".btn-codeview"),e);if(e){this.deactivate()}else{this.activate()}};this.activate=function(e){var i=n.find("button");if(!e){i=i.not(".btn-codeview")}t.toggleBtn(i,true)};this.deactivate=function(e){var i=n.find("button");if(!e){i=i.not(".btn-codeview")}t.toggleBtn(i,false)}};var LinkDialog=function(e){var t=this;var i=$.summernote.ui;var n=e.layoutInfo.editor;var s=e.options;var a=s.langInfo;this.initialize=function(){var e=s.dialogsInBody?$(document.body):n;var t='<div class="form-group">'+"<label>"+a.link.textToDisplay+"</label>"+'<input class="note-link-text form-control" type="text" />'+"</div>"+'<div class="form-group">'+"<label>"+a.link.url+"</label>"+'<input class="note-link-url form-control" type="text" value="http://" />'+"</div>"+(!s.disableLinkTarget?'<div class="checkbox">'+"<label>"+'<input type="checkbox" checked> '+a.link.openInNewWindow+"</label>"+"</div>":"");var r='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+a.link.insert+"</button>";this.$dialog=i.dialog({className:"link-dialog",title:a.link.insert,fade:s.dialogsFade,body:t,footer:r}).render().appendTo(e)};this.destroy=function(){i.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(e,t){e.on("keypress",function(e){if(e.keyCode===key.code.ENTER){t.trigger("click")}})};this.toggleLinkBtn=function(e,t,n){i.toggleBtn(e,t.val()&&n.val())};this.showLinkDialog=function(n){return $.Deferred(function(s){var a=t.$dialog.find(".note-link-text"),r=t.$dialog.find(".note-link-url"),o=t.$dialog.find(".note-link-btn"),l=t.$dialog.find("input[type=checkbox]");i.onDialogShown(t.$dialog,function(){e.triggerEvent("dialog.shown");if(!n.url){n.url=n.text}a.val(n.text);var i=function(){t.toggleLinkBtn(o,a,r);n.text=a.val()};a.on("input",i).on("paste",function(){setTimeout(i,0)});var h=function(){t.toggleLinkBtn(o,a,r);if(!n.text){a.val(r.val())}};r.on("input",h).on("paste",function(){setTimeout(h,0)}).val(n.url).trigger("focus");t.toggleLinkBtn(o,a,r);t.bindEnterKey(r,o);t.bindEnterKey(a,o);l.prop("checked",n.isNewWindow);o.one("click",function(e){e.preventDefault();s.resolve({range:n.range,url:r.val(),text:a.val(),isNewWindow:l.is(":checked")});t.$dialog.modal("hide")})});i.onDialogHidden(t.$dialog,function(){a.off("input paste keypress");r.off("input paste keypress");o.off("click");if(s.state()==="pending"){s.reject()}});i.showDialog(t.$dialog)}).promise()};this.show=function(){var t=e.invoke("editor.getLinkInfo");e.invoke("editor.saveRange");this.showLinkDialog(t).then(function(t){e.invoke("editor.restoreRange");e.invoke("editor.createLink",t)}).fail(function(){e.invoke("editor.restoreRange")})};e.memo("help.linkDialog.show",s.langInfo.help["linkDialog.show"])};var LinkPopover=function(e){var t=this;var i=$.summernote.ui;var n=e.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){t.update()},"summernote.dialog.shown":function(){t.hide()}};this.shouldInitialize=function(){return!list.isEmpty(n.popover.link)};this.initialize=function(){this.$popover=i.popover({className:"note-link-popover",callback:function(e){var t=e.find(".popover-content");t.prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo("body");var t=this.$popover.find(".popover-content");e.invoke("buttons.build",t,n.popover.link)};this.destroy=function(){this.$popover.remove()};this.update=function(){if(!e.invoke("editor.hasFocus")){this.hide();return}var t=e.invoke("editor.createRange");if(t.isCollapsed()&&t.isOnAnchor()){var i=dom.ancestor(t.sc,dom.isAnchor);var n=$(i).attr("href");this.$popover.find("a").attr("href",n).html(n);var s=dom.posFromPlaceholder(i);this.$popover.css({display:"block",left:s.left,top:s.top})}else{this.hide()}};this.hide=function(){this.$popover.hide()}};var ImageDialog=function(e){var t=this;var i=$.summernote.ui;var n=e.layoutInfo.editor;var s=e.options;var a=s.langInfo;this.initialize=function(){var e=s.dialogsInBody?$(document.body):n;var t="";if(s.maximumImageFileSize){var r=Math.floor(Math.log(s.maximumImageFileSize)/Math.log(1024));var o=(s.maximumImageFileSize/Math.pow(1024,r)).toFixed(2)*1+" "+" KMGTP"[r]+"B";t="<small>"+a.image.maximumFileSize+" : "+o+"</small>"}var l='<div class="form-group note-group-select-from-files">'+"<label>"+a.image.selectFromFiles+"</label>"+'<input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+t+"</div>"+'<div class="form-group note-group-image-url" style="overflow:auto;">'+"<label>"+a.image.url+"</label>"+'<input class="note-image-url form-control col-md-12" type="text" />'+"</div>";var h='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+a.image.insert+"</button>";this.$dialog=i.dialog({title:a.image.insert,fade:s.dialogsFade,body:l,footer:h}).render().appendTo(e)};this.destroy=function(){i.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(e,t){e.on("keypress",function(e){if(e.keyCode===key.code.ENTER){t.trigger("click")}})};this.show=function(){e.invoke("editor.saveRange");this.showImageDialog().then(function(n){i.hideDialog(t.$dialog);e.invoke("editor.restoreRange");if(typeof n==="string"){e.invoke("editor.insertImage",n)}else{e.invoke("editor.insertImagesOrCallback",n)}}).fail(function(){e.invoke("editor.restoreRange")})};this.showImageDialog=function(){return $.Deferred(function(n){var s=t.$dialog.find(".note-image-input"),a=t.$dialog.find(".note-image-url"),r=t.$dialog.find(".note-image-btn");i.onDialogShown(t.$dialog,function(){e.triggerEvent("dialog.shown");s.replaceWith(s.clone().on("change",function(){n.resolve(this.files||this.value)}).val(""));r.click(function(e){e.preventDefault();n.resolve(a.val())});a.on("keyup paste",function(){var e=a.val();i.toggleBtn(r,e)}).val("").trigger("focus");t.bindEnterKey(a,r)});i.onDialogHidden(t.$dialog,function(){s.off("change");a.off("keyup paste keypress");r.off("click");if(n.state()==="pending"){n.reject()}});i.showDialog(t.$dialog)})}};var ImagePopover=function(e){var t=$.summernote.ui;var i=e.options;this.shouldInitialize=function(){return!list.isEmpty(i.popover.image)};this.initialize=function(){this.$popover=t.popover({className:"note-image-popover"}).render().appendTo("body");var n=this.$popover.find(".popover-content");e.invoke("buttons.build",n,i.popover.image)};this.destroy=function(){this.$popover.remove()};this.update=function(e){if(dom.isImg(e)){var t=dom.posFromPlaceholder(e);this.$popover.css({display:"block",left:t.left,top:t.top})}else{this.hide()}};this.hide=function(){this.$popover.hide()}};var VideoDialog=function(e){var t=this;var i=$.summernote.ui;var n=e.layoutInfo.editor;var s=e.options;var a=s.langInfo;this.initialize=function(){var e=s.dialogsInBody?$(document.body):n;var t='<div class="form-group row-fluid">'+"<label>"+a.video.url+' <small class="text-muted">'+a.video.providers+"</small></label>"+'<input class="note-video-url form-control span12" type="text" />'+"</div>";var r='<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+a.video.insert+"</button>";this.$dialog=i.dialog({title:a.video.insert,fade:s.dialogsFade,body:t,footer:r}).render().appendTo(e)};this.destroy=function(){i.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(e,t){e.on("keypress",function(e){if(e.keyCode===key.code.ENTER){t.trigger("click")}})};this.createVideoNode=function(e){var t=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;var i=e.match(t);var n=/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/;var s=e.match(n);var a=/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/;var r=e.match(a);var o=/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/;var l=e.match(o);var h=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/;var c=e.match(h);var u=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/;var d=e.match(u);var f=/^.+.(mp4|m4v)$/;var p=e.match(f);var m=/^.+.(ogg|ogv)$/;var g=e.match(m);var v=/^.+.(webm)$/;var y=e.match(v);var b;if(i&&i[1].length===11){var w=i[1];b=$("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+w).attr("width","640").attr("height","360")}else if(s&&s[0].length){b=$("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+s[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true")}else if(r&&r[0].length){b=$("<iframe>").attr("frameborder",0).attr("src",r[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed")}else if(l&&l[3].length){b=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+l[3]).attr("width","640").attr("height","360")}else if(c&&c[2].length){b=$("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+c[2]).attr("width","640").attr("height","360")}else if(d&&d[1].length){b=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+d[1])}else if(p||g||y){b=$("<video controls>").attr("src",e).attr("width","640").attr("height","360")}else{return false}b.addClass("note-video-clip");return b[0]};this.show=function(){var n=e.invoke("editor.getSelectedText");e.invoke("editor.saveRange");this.showVideoDialog(n).then(function(n){i.hideDialog(t.$dialog);e.invoke("editor.restoreRange");var s=t.createVideoNode(n);if(s){e.invoke("editor.insertNode",s)}}).fail(function(){e.invoke("editor.restoreRange")})};this.showVideoDialog=function(n){return $.Deferred(function(s){var a=t.$dialog.find(".note-video-url"),r=t.$dialog.find(".note-video-btn");i.onDialogShown(t.$dialog,function(){e.triggerEvent("dialog.shown");a.val(n).on("input",function(){i.toggleBtn(r,a.val())}).trigger("focus");r.click(function(e){e.preventDefault();s.resolve(a.val())});t.bindEnterKey(a,r)});i.onDialogHidden(t.$dialog,function(){a.off("input");r.off("click");if(s.state()==="pending"){s.reject()}});i.showDialog(t.$dialog)})}};var HelpDialog=function(e){var t=this;var i=$.summernote.ui;var n=e.layoutInfo.editor;var s=e.options;var a=s.langInfo;this.createShortCutList=function(){var t=s.keyMap[agent.isMac?"mac":"pc"];return Object.keys(t).map(function(i){var n=t[i];var s=$('<div><div class="help-list-item"/></div>');s.append($("<label><kbd>"+i+"</kdb></label>").css({width:180,"margin-right":10})).append($("<span/>").html(e.memo("help."+n)||n));return s.html()}).join("")};this.initialize=function(){var e=s.dialogsInBody?$(document.body):n;var t=['<p class="text-center">','<a href="http://summernote.org/" target="_blank">Summernote 0.8.3</a>  ','<a href="https://github.com/summernote/summernote" target="_blank">Project</a>  ','<a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=i.dialog({title:a.options.help,fade:s.dialogsFade,body:this.createShortCutList(),footer:t,callback:function(e){e.find(".modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(e)};this.destroy=function(){i.hideDialog(this.$dialog);this.$dialog.remove()};this.showHelpDialog=function(){return $.Deferred(function(n){i.onDialogShown(t.$dialog,function(){e.triggerEvent("dialog.shown");n.resolve()});i.showDialog(t.$dialog)}).promise()};this.show=function(){e.invoke("editor.saveRange");this.showHelpDialog().then(function(){e.invoke("editor.restoreRange")})}};var AirPopover=function(e){var t=this;var i=$.summernote.ui;var n=e.options;var s=20;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){t.update()},"summernote.change summernote.dialog.shown":function(){t.hide()},"summernote.focusout":function(e,i){if(agent.isFF){return}if(!i.relatedTarget||!dom.ancestor(i.relatedTarget,func.eq(t.$popover[0]))){t.hide()}}};this.shouldInitialize=function(){return n.airMode&&!list.isEmpty(n.popover.air)};this.initialize=function(){this.$popover=i.popover({className:"note-air-popover"}).render().appendTo("body");var t=this.$popover.find(".popover-content");e.invoke("buttons.build",t,n.popover.air)};this.destroy=function(){this.$popover.remove()};this.update=function(){var t=e.invoke("editor.currentStyle");if(t.range&&!t.range.isCollapsed()){var i=list.last(t.range.getClientRects());if(i){var n=func.rect2bnd(i);this.$popover.css({display:"block",left:Math.max(n.left+n.width/2,0)-s,top:n.top+n.height})}}else{this.hide()}};this.hide=function(){this.$popover.hide()}};var HintPopover=function(e){var t=this;var i=$.summernote.ui;var n=5;var s=e.options.hint||[];var a=e.options.hintDirection||"bottom";var r=$.isArray(s)?s:[s];this.events={"summernote.keyup":function(e,i){if(!i.isDefaultPrevented()){t.handleKeyup(i)}},"summernote.keydown":function(e,i){t.handleKeydown(i)},"summernote.dialog.shown":function(){t.hide()}};this.shouldInitialize=function(){return r.length>0};this.initialize=function(){this.lastWordRange=null;this.$popover=i.popover({className:"note-hint-popover",hideArrow:true,direction:""}).render().appendTo("body");this.$popover.hide();this.$content=this.$popover.find(".popover-content");this.$content.on("click",".note-hint-item",function(){t.$content.find(".active").removeClass("active");$(this).addClass("active");t.replace()})};this.destroy=function(){this.$popover.remove()};this.selectItem=function(e){this.$content.find(".active").removeClass("active");e.addClass("active");this.$content[0].scrollTop=e[0].offsetTop-this.$content.innerHeight()/2};this.moveDown=function(){var e=this.$content.find(".note-hint-item.active");var t=e.next();if(t.length){this.selectItem(t)}else{var i=e.parent().next();if(!i.length){i=this.$content.find(".note-hint-group").first()}this.selectItem(i.find(".note-hint-item").first())}};this.moveUp=function(){var e=this.$content.find(".note-hint-item.active");var t=e.prev();if(t.length){this.selectItem(t)}else{var i=e.parent().prev();if(!i.length){i=this.$content.find(".note-hint-group").last()}this.selectItem(i.find(".note-hint-item").last())}};this.replace=function(){var t=this.$content.find(".note-hint-item.active");if(t.length){var i=this.nodeFromItem(t);this.lastWordRange.insertNode(i);range.createFromNode(i).collapse().select();this.lastWordRange=null;this.hide();e.invoke("editor.focus")}};this.nodeFromItem=function(e){var t=r[e.data("index")];var i=e.data("item");var n=t.content?t.content(i):i;if(typeof n==="string"){n=dom.createText(n)}return n};this.createItemTemplates=function(e,t){var i=r[e];return t.map(function(t,n){var s=$('<div class="note-hint-item"/>');s.append(i.template?i.template(t):t+"");s.data({index:e,item:t});if(e===0&&n===0){s.addClass("active")}return s})};this.handleKeydown=function(e){if(!this.$popover.is(":visible")){return}if(e.keyCode===key.code.ENTER){e.preventDefault();this.replace()}else if(e.keyCode===key.code.UP){e.preventDefault();this.moveUp()}else if(e.keyCode===key.code.DOWN){e.preventDefault();this.moveDown()}};this.searchKeyword=function(e,t,i){var n=r[e];if(n&&n.match.test(t)&&n.search){var s=n.match.exec(t);n.search(s[1],i)}else{i()}};this.createGroup=function(e,i){var n=$('<div class="note-hint-group note-hint-group-'+e+'"/>');this.searchKeyword(e,i,function(i){i=i||[];if(i.length){n.html(t.createItemTemplates(e,i));t.show()}});return n};this.handleKeyup=function(i){if(list.contains([key.code.ENTER,key.code.UP,key.code.DOWN],i.keyCode)){if(i.keyCode===key.code.ENTER){if(this.$popover.is(":visible")){return}}}else{var s=e.invoke("editor.createRange").getWordRange();var o=s.toString();if(r.length&&o){this.$content.empty();var l=func.rect2bnd(list.last(s.getClientRects()));if(l){this.$popover.hide();this.lastWordRange=s;r.forEach(function(e,i){if(e.match.test(o)){t.createGroup(i,o).appendTo(t.$content)}});if(a==="top"){this.$popover.css({left:l.left,top:l.top-this.$popover.outerHeight()-n})}else{this.$popover.css({left:l.left,top:l.top+l.height+n})}}}else{this.hide()}}};this.show=function(){this.$popover.show()};this.hide=function(){this.$popover.hide()}};$.summernote=$.extend($.summernote,{version:"0.8.3",ui:ui,dom:dom,plugins:{},options:{modules:{editor:Editor,clipboard:Clipboard,dropzone:Dropzone,codeview:Codeview,statusbar:Statusbar,fullscreen:Fullscreen,handle:Handle,hintPopover:HintPopover,autoLink:AutoLink,autoSync:AutoSync,placeholder:Placeholder,buttons:Buttons,toolbar:Toolbar,linkDialog:LinkDialog,linkPopover:LinkPopover,imageDialog:ImageDialog,imagePopover:ImagePopover,videoDialog:VideoDialog,helpDialog:HelpDialog,airPopover:AirPopover},buttons:{},lang:"en-US",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:false,width:null,height:null,focus:false,tabSize:4,styleWithSpan:true,shortcuts:true,textareaAutoSync:true,direction:null,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:false,dialogsFade:false,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:true,lineNumbers:true},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})});(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){e(require("jquery"))}else{e(jQuery)}})(function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd){var t=e.fn.select2.amd}var t;(function(){if(!t||!t.requirejs){if(!t){t={}}else{i=t}var e,i,n;(function(t){var s,a,r,o,l={},h={},c={},u={},d=Object.prototype.hasOwnProperty,f=[].slice,p=/\.js$/;function m(e,t){return d.call(e,t)}function g(e,t){var i,n,s,a,r,o,l,h,u,d,f,m=t&&t.split("/"),g=c.map,v=g&&g["*"]||{};if(e&&e.charAt(0)==="."){if(t){e=e.split("/");r=e.length-1;if(c.nodeIdCompat&&p.test(e[r])){e[r]=e[r].replace(p,"")}e=m.slice(0,m.length-1).concat(e);for(u=0;u<e.length;u+=1){f=e[u];if(f==="."){e.splice(u,1);u-=1}else if(f===".."){if(u===1&&(e[2]===".."||e[0]==="..")){break}else if(u>0){e.splice(u-1,2);u-=2}}}e=e.join("/")}else if(e.indexOf("./")===0){e=e.substring(2)}}if((m||v)&&g){i=e.split("/");for(u=i.length;u>0;u-=1){n=i.slice(0,u).join("/");if(m){for(d=m.length;d>0;d-=1){s=g[m.slice(0,d).join("/")];if(s){s=s[n];if(s){a=s;o=u;break}}}}if(a){break}if(!l&&v&&v[n]){l=v[n];h=u}}if(!a&&l){a=l;o=h}if(a){i.splice(0,o,a);e=i.join("/")}}return e}function v(e,i){return function(){var n=f.call(arguments,0);if(typeof n[0]!=="string"&&n.length===1){n.push(null)}return a.apply(t,n.concat([e,i]))}}function y(e){return function(t){return g(t,e)}}function b(e){
return function(t){l[e]=t}}function w(e){if(m(h,e)){var i=h[e];delete h[e];u[e]=true;s.apply(t,i)}if(!m(l,e)&&!m(u,e)){throw new Error("No "+e)}return l[e]}function x(e){var t,i=e?e.indexOf("!"):-1;if(i>-1){t=e.substring(0,i);e=e.substring(i+1,e.length)}return[t,e]}r=function(e,t){var i,n=x(e),s=n[0];e=n[1];if(s){s=g(s,t);i=w(s)}if(s){if(i&&i.normalize){e=i.normalize(e,y(t))}else{e=g(e,t)}}else{e=g(e,t);n=x(e);s=n[0];e=n[1];if(s){i=w(s)}}return{f:s?s+"!"+e:e,n:e,pr:s,p:i}};function _(e){return function(){return c&&c.config&&c.config[e]||{}}}o={require:function(e){return v(e)},exports:function(e){var t=l[e];if(typeof t!=="undefined"){return t}else{return l[e]={}}},module:function(e){return{id:e,uri:"",exports:l[e],config:_(e)}}};s=function(e,i,n,s){var a,c,d,f,p,g=[],y=typeof n,x;s=s||e;if(y==="undefined"||y==="function"){i=!i.length&&n.length?["require","exports","module"]:i;for(p=0;p<i.length;p+=1){f=r(i[p],s);c=f.f;if(c==="require"){g[p]=o.require(e)}else if(c==="exports"){g[p]=o.exports(e);x=true}else if(c==="module"){a=g[p]=o.module(e)}else if(m(l,c)||m(h,c)||m(u,c)){g[p]=w(c)}else if(f.p){f.p.load(f.n,v(s,true),b(c),{});g[p]=l[c]}else{throw new Error(e+" missing "+c)}}d=n?n.apply(l[e],g):undefined;if(e){if(a&&a.exports!==t&&a.exports!==l[e]){l[e]=a.exports}else if(d!==t||!x){l[e]=d}}}else if(e){l[e]=n}};e=i=a=function(e,i,n,l,h){if(typeof e==="string"){if(o[e]){return o[e](i)}return w(r(e,i).f)}else if(!e.splice){c=e;if(c.deps){a(c.deps,c.callback)}if(!i){return}if(i.splice){e=i;i=n;n=null}else{e=t}}i=i||function(){};if(typeof n==="function"){n=l;l=h}if(l){s(t,e,i,n)}else{setTimeout(function(){s(t,e,i,n)},4)}return a};a.config=function(e){return a(e)};e._defined=l;n=function(e,t,i){if(typeof e!=="string"){throw new Error("See almond README: incorrect module build, no module name")}if(!t.splice){i=t;t=[]}if(!m(l,e)&&!m(h,e)){h[e]=[e,t,i]}};n.amd={jQuery:true}})();t.requirejs=e;t.require=i;t.define=n}})();t.define("almond",function(){});t.define("jquery",[],function(){var t=e||$;if(t==null&&console&&console.error){console.error("Select2: An instance of jQuery or a jQuery-compatible library was not "+"found. Make sure that you are including jQuery before Select2 on your "+"web page.")}return t});t.define("select2/utils",["jquery"],function(e){var t={};t.Extend=function(e,t){var i={}.hasOwnProperty;function n(){this.constructor=e}for(var s in t){if(i.call(t,s)){e[s]=t[s]}}n.prototype=t.prototype;e.prototype=new n;e.__super__=t.prototype;return e};function i(e){var t=e.prototype;var i=[];for(var n in t){var s=t[n];if(typeof s!=="function"){continue}if(n==="constructor"){continue}i.push(n)}return i}t.Decorate=function(e,t){var n=i(t);var s=i(e);function a(){var i=Array.prototype.unshift;var n=t.prototype.constructor.length;var s=e.prototype.constructor;if(n>0){i.call(arguments,e.prototype.constructor);s=t.prototype.constructor}s.apply(this,arguments)}t.displayName=e.displayName;function r(){this.constructor=a}a.prototype=new r;for(var o=0;o<s.length;o++){var l=s[o];a.prototype[l]=e.prototype[l]}var h=function(e){var i=function(){};if(e in a.prototype){i=a.prototype[e]}var n=t.prototype[e];return function(){var e=Array.prototype.unshift;e.call(arguments,i);return n.apply(this,arguments)}};for(var c=0;c<n.length;c++){var u=n[c];a.prototype[u]=h(u)}return a};var n=function(){this.listeners={}};n.prototype.on=function(e,t){this.listeners=this.listeners||{};if(e in this.listeners){this.listeners[e].push(t)}else{this.listeners[e]=[t]}};n.prototype.trigger=function(e){var t=Array.prototype.slice;var i=t.call(arguments,1);this.listeners=this.listeners||{};if(i==null){i=[]}if(i.length===0){i.push({})}i[0]._type=e;if(e in this.listeners){this.invoke(this.listeners[e],t.call(arguments,1))}if("*"in this.listeners){this.invoke(this.listeners["*"],arguments)}};n.prototype.invoke=function(e,t){for(var i=0,n=e.length;i<n;i++){e[i].apply(this,t)}};t.Observable=n;t.generateChars=function(e){var t="";for(var i=0;i<e;i++){var n=Math.floor(Math.random()*36);t+=n.toString(36)}return t};t.bind=function(e,t){return function(){e.apply(t,arguments)}};t._convertData=function(e){for(var t in e){var i=t.split("-");var n=e;if(i.length===1){continue}for(var s=0;s<i.length;s++){var a=i[s];a=a.substring(0,1).toLowerCase()+a.substring(1);if(!(a in n)){n[a]={}}if(s==i.length-1){n[a]=e[t]}n=n[a]}delete e[t]}return e};t.hasScroll=function(t,i){var n=e(i);var s=i.style.overflowX;var a=i.style.overflowY;if(s===a&&(a==="hidden"||a==="visible")){return false}if(s==="scroll"||a==="scroll"){return true}return n.innerHeight()<i.scrollHeight||n.innerWidth()<i.scrollWidth};t.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};if(typeof e!=="string"){return e}return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})};t.appendMany=function(t,i){if(e.fn.jquery.substr(0,3)==="1.7"){var n=e();e.map(i,function(e){n=n.add(e)});i=n}t.append(i)};return t});t.define("select2/results",["jquery","./utils"],function(e,t){function i(e,t,n){this.$element=e;this.data=n;this.options=t;i.__super__.constructor.call(this)}t.Extend(i,t.Observable);i.prototype.render=function(){var t=e('<ul class="select2-results__options" role="tree"></ul>');if(this.options.get("multiple")){t.attr("aria-multiselectable","true")}this.$results=t;return t};i.prototype.clear=function(){this.$results.empty()};i.prototype.displayMessage=function(t){var i=this.options.get("escapeMarkup");this.clear();this.hideLoading();var n=e('<li role="treeitem" aria-live="assertive"'+' class="select2-results__option"></li>');var s=this.options.get("translations").get(t.message);n.append(i(s(t.args)));n[0].className+=" select2-results__message";this.$results.append(n)};i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()};i.prototype.append=function(e){this.hideLoading();var t=[];if(e.results==null||e.results.length===0){if(this.$results.children().length===0){this.trigger("results:message",{message:"noResults"})}return}e.results=this.sort(e.results);for(var i=0;i<e.results.length;i++){var n=e.results[i];var s=this.option(n);t.push(s)}this.$results.append(t)};i.prototype.position=function(e,t){var i=t.find(".select2-results");i.append(e)};i.prototype.sort=function(e){var t=this.options.get("sorter");return t(e)};i.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]");var t=e.filter("[aria-selected=true]");if(t.length>0){t.first().trigger("mouseenter")}else{e.first().trigger("mouseenter")}this.ensureHighlightVisible()};i.prototype.setClasses=function(){var t=this;this.data.current(function(i){var n=e.map(i,function(e){return e.id.toString()});var s=t.$results.find(".select2-results__option[aria-selected]");s.each(function(){var t=e(this);var i=e.data(this,"data");var s=""+i.id;if(i.element!=null&&i.element.selected||i.element==null&&e.inArray(s,n)>-1){t.attr("aria-selected","true")}else{t.attr("aria-selected","false")}})})};i.prototype.showLoading=function(e){this.hideLoading();var t=this.options.get("translations").get("searching");var i={disabled:true,loading:true,text:t(e)};var n=this.option(i);n.className+=" loading-results";this.$results.prepend(n)};i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()};i.prototype.option=function(t){var i=document.createElement("li");i.className="select2-results__option";var n={role:"treeitem","aria-selected":"false"};if(t.disabled){delete n["aria-selected"];n["aria-disabled"]="true"}if(t.id==null){delete n["aria-selected"]}if(t._resultId!=null){i.id=t._resultId}if(t.title){i.title=t.title}if(t.children){n.role="group";n["aria-label"]=t.text;delete n["aria-selected"]}for(var s in n){var a=n[s];i.setAttribute(s,a)}if(t.children){var r=e(i);var o=document.createElement("strong");o.className="select2-results__group";var l=e(o);this.template(t,o);var h=[];for(var c=0;c<t.children.length;c++){var u=t.children[c];var d=this.option(u);h.push(d)}var f=e("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});f.append(h);r.append(o);r.append(f)}else{this.template(t,i)}e.data(i,"data",t);return i};i.prototype.bind=function(t,i){var n=this;var s=t.id+"-results";this.$results.attr("id",s);t.on("results:all",function(e){n.clear();n.append(e.data);if(t.isOpen()){n.setClasses();n.highlightFirstItem()}});t.on("results:append",function(e){n.append(e.data);if(t.isOpen()){n.setClasses()}});t.on("query",function(e){n.hideMessages();n.showLoading(e)});t.on("select",function(){if(!t.isOpen()){return}n.setClasses();n.highlightFirstItem()});t.on("unselect",function(){if(!t.isOpen()){return}n.setClasses();n.highlightFirstItem()});t.on("open",function(){n.$results.attr("aria-expanded","true");n.$results.attr("aria-hidden","false");n.setClasses();n.ensureHighlightVisible()});t.on("close",function(){n.$results.attr("aria-expanded","false");n.$results.attr("aria-hidden","true");n.$results.removeAttr("aria-activedescendant")});t.on("results:toggle",function(){var e=n.getHighlightedResults();if(e.length===0){return}e.trigger("mouseup")});t.on("results:select",function(){var e=n.getHighlightedResults();if(e.length===0){return}var t=e.data("data");if(e.attr("aria-selected")=="true"){n.trigger("close",{})}else{n.trigger("select",{data:t})}});t.on("results:previous",function(){var e=n.getHighlightedResults();var t=n.$results.find("[aria-selected]");var i=t.index(e);if(i===0){return}var s=i-1;if(e.length===0){s=0}var a=t.eq(s);a.trigger("mouseenter");var r=n.$results.offset().top;var o=a.offset().top;var l=n.$results.scrollTop()+(o-r);if(s===0){n.$results.scrollTop(0)}else if(o-r<0){n.$results.scrollTop(l)}});t.on("results:next",function(){var e=n.getHighlightedResults();var t=n.$results.find("[aria-selected]");var i=t.index(e);var s=i+1;if(s>=t.length){return}var a=t.eq(s);a.trigger("mouseenter");var r=n.$results.offset().top+n.$results.outerHeight(false);var o=a.offset().top+a.outerHeight(false);var l=n.$results.scrollTop()+o-r;if(s===0){n.$results.scrollTop(0)}else if(o>r){n.$results.scrollTop(l)}});t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")});t.on("results:message",function(e){n.displayMessage(e)});if(e.fn.mousewheel){this.$results.on("mousewheel",function(e){var t=n.$results.scrollTop();var i=n.$results.get(0).scrollHeight-t+e.deltaY;var s=e.deltaY>0&&t-e.deltaY<=0;var a=e.deltaY<0&&i<=n.$results.height();if(s){n.$results.scrollTop(0);e.preventDefault();e.stopPropagation()}else if(a){n.$results.scrollTop(n.$results.get(0).scrollHeight-n.$results.height());e.preventDefault();e.stopPropagation()}})}this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var i=e(this);var s=i.data("data");if(i.attr("aria-selected")==="true"){if(n.options.get("multiple")){n.trigger("unselect",{originalEvent:t,data:s})}else{n.trigger("close",{})}return}n.trigger("select",{originalEvent:t,data:s})});this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(t){var i=e(this).data("data");n.getHighlightedResults().removeClass("select2-results__option--highlighted");n.trigger("results:focus",{data:i,element:e(this)})})};i.prototype.getHighlightedResults=function(){var e=this.$results.find(".select2-results__option--highlighted");return e};i.prototype.destroy=function(){this.$results.remove()};i.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(e.length===0){return}var t=this.$results.find("[aria-selected]");var i=t.index(e);var n=this.$results.offset().top;var s=e.offset().top;var a=this.$results.scrollTop()+(s-n);var r=s-n;a-=e.outerHeight(false)*2;if(i<=2){this.$results.scrollTop(0)}else if(r>this.$results.outerHeight()||r<0){this.$results.scrollTop(a)}};i.prototype.template=function(t,i){var n=this.options.get("templateResult");var s=this.options.get("escapeMarkup");var a=n(t,i);if(a==null){i.style.display="none"}else if(typeof a==="string"){i.innerHTML=s(a)}else{e(i).append(a)}};return i});t.define("select2/keys",[],function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return e});t.define("select2/selection/base",["jquery","../utils","../keys"],function(e,t,i){function n(e,t){this.$element=e;this.options=t;n.__super__.constructor.call(this)}t.Extend(n,t.Observable);n.prototype.render=function(){var t=e('<span class="select2-selection" role="combobox" '+' aria-haspopup="true" aria-expanded="false">'+"</span>");this._tabindex=0;if(this.$element.data("old-tabindex")!=null){this._tabindex=this.$element.data("old-tabindex")}else if(this.$element.attr("tabindex")!=null){this._tabindex=this.$element.attr("tabindex")}t.attr("title",this.$element.attr("title"));t.attr("tabindex",this._tabindex);this.$selection=t;return t};n.prototype.bind=function(e,t){var n=this;var s=e.id+"-container";var a=e.id+"-results";this.container=e;this.$selection.on("focus",function(e){n.trigger("focus",e)});this.$selection.on("blur",function(e){n._handleBlur(e)});this.$selection.on("keydown",function(e){n.trigger("keypress",e);if(e.which===i.SPACE){e.preventDefault()}});e.on("results:focus",function(e){n.$selection.attr("aria-activedescendant",e.data._resultId)});e.on("selection:update",function(e){n.update(e.data)});e.on("open",function(){n.$selection.attr("aria-expanded","true");n.$selection.attr("aria-owns",a);n._attachCloseHandler(e)});e.on("close",function(){n.$selection.attr("aria-expanded","false");n.$selection.removeAttr("aria-activedescendant");n.$selection.removeAttr("aria-owns");n.$selection.focus();n._detachCloseHandler(e)});e.on("enable",function(){n.$selection.attr("tabindex",n._tabindex)});e.on("disable",function(){n.$selection.attr("tabindex","-1")})};n.prototype._handleBlur=function(t){var i=this;window.setTimeout(function(){if(document.activeElement==i.$selection[0]||e.contains(i.$selection[0],document.activeElement)){return}i.trigger("blur",t)},1)};n.prototype._attachCloseHandler=function(t){var i=this;e(document.body).on("mousedown.select2."+t.id,function(t){var i=e(t.target);var n=i.closest(".select2");var s=e(".select2.select2-container--open");s.each(function(){var t=e(this);if(this==n[0]){return}var i=t.data("element");i.select2("close")})})};n.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)};n.prototype.position=function(e,t){var i=t.find(".selection");i.append(e)};n.prototype.destroy=function(){this._detachCloseHandler(this.container)};n.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")};return n});t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,i,n){function s(){s.__super__.constructor.apply(this,arguments)}i.Extend(s,t);s.prototype.render=function(){var e=s.__super__.render.call(this);e.addClass("select2-selection--single");e.html('<span class="select2-selection__rendered"></span>'+'<span class="select2-selection__arrow" role="presentation">'+'<b role="presentation"></b>'+"</span>");return e};s.prototype.bind=function(e,t){var i=this;s.__super__.bind.apply(this,arguments);var n=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n);this.$selection.attr("aria-labelledby",n);this.$selection.on("mousedown",function(e){if(e.which!==1){return}i.trigger("toggle",{originalEvent:e})});this.$selection.on("focus",function(e){});this.$selection.on("blur",function(e){});e.on("focus",function(t){if(!e.isOpen()){i.$selection.focus()}});e.on("selection:update",function(e){i.update(e.data)})};s.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()};s.prototype.display=function(e,t){var i=this.options.get("templateSelection");var n=this.options.get("escapeMarkup");return n(i(e,t))};s.prototype.selectionContainer=function(){return e("<span></span>")};s.prototype.update=function(e){if(e.length===0){this.clear();return}var t=e[0];var i=this.$selection.find(".select2-selection__rendered");var n=this.display(t,i);i.empty().append(n);i.prop("title",t.title||t.text)};return s});t.define("select2/selection/multiple",["jquery","./base","../utils"],function(e,t,i){function n(e,t){n.__super__.constructor.apply(this,arguments)}i.Extend(n,t);n.prototype.render=function(){var e=n.__super__.render.call(this);e.addClass("select2-selection--multiple");e.html('<ul class="select2-selection__rendered"></ul>');return e};n.prototype.bind=function(t,i){var s=this;n.__super__.bind.apply(this,arguments);this.$selection.on("click",function(e){s.trigger("toggle",{originalEvent:e})});this.$selection.on("click",".select2-selection__choice__remove",function(t){if(s.options.get("disabled")){return}var i=e(this);var n=i.parent();var a=n.data("data");s.trigger("unselect",{originalEvent:t,data:a})})};n.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()};n.prototype.display=function(e,t){var i=this.options.get("templateSelection");var n=this.options.get("escapeMarkup");return n(i(e,t))};n.prototype.selectionContainer=function(){var t=e('<li class="select2-selection__choice">'+'<span class="select2-selection__choice__remove" role="presentation">'+"&times;"+"</span>"+"</li>");return t};n.prototype.update=function(e){this.clear();if(e.length===0){return}var t=[];for(var n=0;n<e.length;n++){var s=e[n];var a=this.selectionContainer();var r=this.display(s,a);a.append(r);a.prop("title",s.title||s.text);a.data("data",s);t.push(a)}var o=this.$selection.find(".select2-selection__rendered");i.appendMany(o,t)};return n});t.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));e.call(this,t,i)}t.prototype.normalizePlaceholder=function(e,t){if(typeof t==="string"){t={id:"",text:t}}return t};t.prototype.createPlaceholder=function(e,t){var i=this.selectionContainer();i.html(this.display(t));i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice");return i};t.prototype.update=function(e,t){var i=t.length==1&&t[0].id!=this.placeholder.id;var n=t.length>1;if(n||i){return e.call(this,t)}this.clear();var s=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(s)};return t});t.define("select2/selection/allowClear",["jquery","../keys"],function(e,t){function i(){}i.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i);if(this.placeholder==null){if(this.options.get("debug")&&window.console&&console.error){console.error("Select2: The `allowClear` option should be used in combination "+"with the `placeholder` option.")}}this.$selection.on("mousedown",".select2-selection__clear",function(e){n._handleClear(e)});t.on("keypress",function(e){n._handleKeyboardClear(e,t)})};i.prototype._handleClear=function(e,t){if(this.options.get("disabled")){return}var i=this.$selection.find(".select2-selection__clear");if(i.length===0){return}t.stopPropagation();var n=i.data("data");for(var s=0;s<n.length;s++){var a={data:n[s]};this.trigger("unselect",a);if(a.prevented){return}}this.$element.val(this.placeholder.id).trigger("change");this.trigger("toggle",{})};i.prototype._handleKeyboardClear=function(e,i,n){if(n.isOpen()){return}if(i.which==t.DELETE||i.which==t.BACKSPACE){this._handleClear(i)}};i.prototype.update=function(t,i){t.call(this,i);if(this.$selection.find(".select2-selection__placeholder").length>0||i.length===0){return}var n=e('<span class="select2-selection__clear">'+"&times;"+"</span>");n.data("data",i);this.$selection.find(".select2-selection__rendered").prepend(n)};return i});t.define("select2/selection/search",["jquery","../utils","../keys"],function(e,t,i){function n(e,t,i){e.call(this,t,i)}n.prototype.render=function(t){var i=e('<li class="select2-search select2-search--inline">'+'<input class="select2-search__field" type="search" tabindex="-1"'+' autocomplete="off" autocorrect="off" autocapitalize="off"'+' spellcheck="false" role="textbox" aria-autocomplete="list" />'+"</li>");this.$searchContainer=i;this.$search=i.find("input");var n=t.call(this);this._transferTabIndex();return n};n.prototype.bind=function(e,t,n){var s=this;e.call(this,t,n);t.on("open",function(){s.$search.trigger("focus")});t.on("close",function(){s.$search.val("");s.$search.removeAttr("aria-activedescendant");s.$search.trigger("focus")});t.on("enable",function(){s.$search.prop("disabled",false);s._transferTabIndex()});t.on("disable",function(){s.$search.prop("disabled",true)});t.on("focus",function(e){s.$search.trigger("focus")});t.on("results:focus",function(e){s.$search.attr("aria-activedescendant",e.id)});this.$selection.on("focusin",".select2-search--inline",function(e){s.trigger("focus",e)});this.$selection.on("focusout",".select2-search--inline",function(e){s._handleBlur(e)});this.$selection.on("keydown",".select2-search--inline",function(e){e.stopPropagation();s.trigger("keypress",e);s._keyUpPrevented=e.isDefaultPrevented();var t=e.which;if(t===i.BACKSPACE&&s.$search.val()===""){var n=s.$searchContainer.prev(".select2-selection__choice");if(n.length>0){var a=n.data("data");s.searchRemoveChoice(a);e.preventDefault()}}});var a=document.documentMode;var r=a&&a<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){if(r){s.$selection.off("input.search input.searchcheck");return}s.$selection.off("keyup.search")});this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(r&&e.type==="input"){s.$selection.off("input.search input.searchcheck");return}var t=e.which;if(t==i.SHIFT||t==i.CTRL||t==i.ALT){return}if(t==i.TAB){return}s.handleSearch(e)})};n.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex"));this.$selection.attr("tabindex","-1")};n.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)};n.prototype.update=function(e,t){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder","");e.call(this,t);this.$selection.find(".select2-selection__rendered").append(this.$searchContainer);this.resizeSearch();if(i){this.$search.focus()}};n.prototype.handleSearch=function(){this.resizeSearch();if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=false};n.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t});this.$search.val(t.text);this.handleSearch()};n.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";if(this.$search.attr("placeholder")!==""){e=this.$selection.find(".select2-selection__rendered").innerWidth()}else{var t=this.$search.val().length+1;e=t*.75+"em"}this.$search.css("width",e)};return n});t.define("select2/selection/eventRelay",["jquery"],function(e){function t(){}t.prototype.bind=function(t,i,n){var s=this;var a=["open","opening","close","closing","select","selecting","unselect","unselecting"];var r=["opening","closing","selecting","unselecting"];t.call(this,i,n);i.on("*",function(t,i){if(e.inArray(t,a)===-1){return}i=i||{};var n=e.Event("select2:"+t,{params:i});s.$element.trigger(n);if(e.inArray(t,r)===-1){return}i.prevented=n.isDefaultPrevented()})};return t});t.define("select2/translation",["jquery","require"],function(e,t){function i(e){this.dict=e||{}}i.prototype.all=function(){return this.dict};i.prototype.get=function(e){return this.dict[e]};i.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)};i._cache={};i.loadPath=function(e){if(!(e in i._cache)){var n=t(e);i._cache[e]=n}return new i(i._cache[e])};return i});t.define("select2/diacritics",[],function(){var e={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};return e});t.define("select2/data/base",["../utils"],function(e){function t(e,i){t.__super__.constructor.call(this)}e.Extend(t,e.Observable);t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")};t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")};t.prototype.bind=function(e,t){};t.prototype.destroy=function(){};t.prototype.generateResultId=function(t,i){var n=t.id+"-result-";n+=e.generateChars(4);if(i.id!=null){n+="-"+i.id.toString()}else{n+="-"+e.generateChars(4)}return n};return t});t.define("select2/data/select",["./base","../utils","jquery"],function(e,t,i){function n(e,t){this.$element=e;this.options=t;n.__super__.constructor.call(this)}t.Extend(n,e);n.prototype.current=function(e){var t=[];var n=this;this.$element.find(":selected").each(function(){var e=i(this);var s=n.item(e);t.push(s)});e(t)};n.prototype.select=function(e){var t=this;e.selected=true;if(i(e.element).is("option")){e.element.selected=true;this.$element.trigger("change");return}if(this.$element.prop("multiple")){this.current(function(n){var s=[];e=[e];e.push.apply(e,n);for(var a=0;a<e.length;a++){var r=e[a].id;if(i.inArray(r,s)===-1){s.push(r)}}t.$element.val(s);t.$element.trigger("change")})}else{var n=e.id;this.$element.val(n);this.$element.trigger("change")}};n.prototype.unselect=function(e){var t=this;if(!this.$element.prop("multiple")){return}e.selected=false;if(i(e.element).is("option")){e.element.selected=false;this.$element.trigger("change");
return}this.current(function(n){var s=[];for(var a=0;a<n.length;a++){var r=n[a].id;if(r!==e.id&&i.inArray(r,s)===-1){s.push(r)}}t.$element.val(s);t.$element.trigger("change")})};n.prototype.bind=function(e,t){var i=this;this.container=e;e.on("select",function(e){i.select(e.data)});e.on("unselect",function(e){i.unselect(e.data)})};n.prototype.destroy=function(){this.$element.find("*").each(function(){i.removeData(this,"data")})};n.prototype.query=function(e,t){var n=[];var s=this;var a=this.$element.children();a.each(function(){var t=i(this);if(!t.is("option")&&!t.is("optgroup")){return}var a=s.item(t);var r=s.matches(e,a);if(r!==null){n.push(r)}});t({results:n})};n.prototype.addOptions=function(e){t.appendMany(this.$element,e)};n.prototype.option=function(e){var t;if(e.children){t=document.createElement("optgroup");t.label=e.text}else{t=document.createElement("option");if(t.textContent!==undefined){t.textContent=e.text}else{t.innerText=e.text}}if(e.id){t.value=e.id}if(e.disabled){t.disabled=true}if(e.selected){t.selected=true}if(e.title){t.title=e.title}var n=i(t);var s=this._normalizeItem(e);s.element=t;i.data(t,"data",s);return n};n.prototype.item=function(e){var t={};t=i.data(e[0],"data");if(t!=null){return t}if(e.is("option")){t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")}}else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};var n=e.children("option");var s=[];for(var a=0;a<n.length;a++){var r=i(n[a]);var o=this.item(r);s.push(o)}t.children=s}t=this._normalizeItem(t);t.element=e[0];i.data(e[0],"data",t);return t};n.prototype._normalizeItem=function(e){if(!i.isPlainObject(e)){e={id:e,text:e}}e=i.extend({},{text:""},e);var t={selected:false,disabled:false};if(e.id!=null){e.id=e.id.toString()}if(e.text!=null){e.text=e.text.toString()}if(e._resultId==null&&e.id&&this.container!=null){e._resultId=this.generateResultId(this.container,e)}return i.extend({},t,e)};n.prototype.matches=function(e,t){var i=this.options.get("matcher");return i(e,t)};return n});t.define("select2/data/array",["./select","../utils","jquery"],function(e,t,i){function n(e,t){var i=t.get("data")||[];n.__super__.constructor.call(this,e,t);this.addOptions(this.convertToOptions(i))}t.Extend(n,e);n.prototype.select=function(e){var t=this.$element.find("option").filter(function(t,i){return i.value==e.id.toString()});if(t.length===0){t=this.option(e);this.addOptions(t)}n.__super__.select.call(this,e)};n.prototype.convertToOptions=function(e){var n=this;var s=this.$element.find("option");var a=s.map(function(){return n.item(i(this)).id}).get();var r=[];function o(e){return function(){return i(this).val()==e.id}}for(var l=0;l<e.length;l++){var h=this._normalizeItem(e[l]);if(i.inArray(h.id,a)>=0){var c=s.filter(o(h));var u=this.item(c);var d=i.extend(true,{},h,u);var f=this.option(d);c.replaceWith(f);continue}var p=this.option(h);if(h.children){var m=this.convertToOptions(h.children);t.appendMany(p,m)}r.push(p)}return r};return n});t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,i){function n(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax"));if(this.ajaxOptions.processResults!=null){this.processResults=this.ajaxOptions.processResults}n.__super__.constructor.call(this,e,t)}t.Extend(n,e);n.prototype._applyDefaults=function(e){var t={data:function(e){return i.extend({},e,{q:e.term})},transport:function(e,t,n){var s=i.ajax(e);s.then(t);s.fail(n);return s}};return i.extend({},t,e,true)};n.prototype.processResults=function(e){return e};n.prototype.query=function(e,t){var n=[];var s=this;if(this._request!=null){if(i.isFunction(this._request.abort)){this._request.abort()}this._request=null}var a=i.extend({type:"GET"},this.ajaxOptions);if(typeof a.url==="function"){a.url=a.url.call(this.$element,e)}if(typeof a.data==="function"){a.data=a.data.call(this.$element,e)}function r(){var n=a.transport(a,function(n){var a=s.processResults(n,e);if(s.options.get("debug")&&window.console&&console.error){if(!a||!a.results||!i.isArray(a.results)){console.error("Select2: The AJAX results did not return an array in the "+"`results` key of the response.")}}t(a)},function(){if(n.status&&n.status==="0"){return}s.trigger("results:message",{message:"errorLoading"})});s._request=n}if(this.ajaxOptions.delay&&e.term!=null){if(this._queryTimeout){window.clearTimeout(this._queryTimeout)}this._queryTimeout=window.setTimeout(r,this.ajaxOptions.delay)}else{r()}};return n});t.define("select2/data/tags",["jquery"],function(e){function t(t,i,n){var s=n.get("tags");var a=n.get("createTag");if(a!==undefined){this.createTag=a}var r=n.get("insertTag");if(r!==undefined){this.insertTag=r}t.call(this,i,n);if(e.isArray(s)){for(var o=0;o<s.length;o++){var l=s[o];var h=this._normalizeItem(l);var c=this.option(h);this.$element.append(c)}}}t.prototype.query=function(e,t,i){var n=this;this._removeOldTags();if(t.term==null||t.page!=null){e.call(this,t,i);return}function s(e,a){var r=e.results;for(var o=0;o<r.length;o++){var l=r[o];var h=l.children!=null&&!s({results:l.children},true);var c=l.text===t.term;if(c||h){if(a){return false}e.data=r;i(e);return}}if(a){return true}var u=n.createTag(t);if(u!=null){var d=n.option(u);d.attr("data-select2-tag",true);n.addOptions([d]);n.insertTag(r,u)}e.results=r;i(e)}e.call(this,t,s)};t.prototype.createTag=function(t,i){var n=e.trim(i.term);if(n===""){return null}return{id:n,text:n}};t.prototype.insertTag=function(e,t,i){t.unshift(i)};t.prototype._removeOldTags=function(t){var i=this._lastTag;var n=this.$element.find("option[data-select2-tag]");n.each(function(){if(this.selected){return}e(this).remove()})};return t});t.define("select2/data/tokenizer",["jquery"],function(e){function t(e,t,i){var n=i.get("tokenizer");if(n!==undefined){this.tokenizer=n}e.call(this,t,i)}t.prototype.bind=function(e,t,i){e.call(this,t,i);this.$search=t.dropdown.$search||t.selection.$search||i.find(".select2-search__field")};t.prototype.query=function(t,i,n){var s=this;function a(t){var i=s._normalizeItem(t);var n=s.$element.find("option").filter(function(){return e(this).val()===i.id});if(!n.length){var a=s.option(i);a.attr("data-select2-tag",true);s._removeOldTags();s.addOptions([a])}r(i)}function r(e){s.trigger("select",{data:e})}i.term=i.term||"";var o=this.tokenizer(i,this.options,a);if(o.term!==i.term){if(this.$search.length){this.$search.val(o.term);this.$search.focus()}i.term=o.term}t.call(this,i,n)};t.prototype.tokenizer=function(t,i,n,s){var a=n.get("tokenSeparators")||[];var r=i.term;var o=0;var l=this.createTag||function(e){return{id:e.term,text:e.term}};while(o<r.length){var h=r[o];if(e.inArray(h,a)===-1){o++;continue}var c=r.substr(0,o);var u=e.extend({},i,{term:c});var d=l(u);if(d==null){o++;continue}s(d);r=r.substr(o+1)||"";o=0}return{term:r}};return t});t.define("select2/data/minimumInputLength",[],function(){function e(e,t,i){this.minimumInputLength=i.get("minimumInputLength");e.call(this,t,i)}e.prototype.query=function(e,t,i){t.term=t.term||"";if(t.term.length<this.minimumInputLength){this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}});return}e.call(this,t,i)};return e});t.define("select2/data/maximumInputLength",[],function(){function e(e,t,i){this.maximumInputLength=i.get("maximumInputLength");e.call(this,t,i)}e.prototype.query=function(e,t,i){t.term=t.term||"";if(this.maximumInputLength>0&&t.term.length>this.maximumInputLength){this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}});return}e.call(this,t,i)};return e});t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,i){this.maximumSelectionLength=i.get("maximumSelectionLength");e.call(this,t,i)}e.prototype.query=function(e,t,i){var n=this;this.current(function(s){var a=s!=null?s.length:0;if(n.maximumSelectionLength>0&&a>=n.maximumSelectionLength){n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}});return}e.call(n,t,i)})};return e});t.define("select2/dropdown",["jquery","./utils"],function(e,t){function i(e,t){this.$element=e;this.options=t;i.__super__.constructor.call(this)}t.Extend(i,t.Observable);i.prototype.render=function(){var t=e('<span class="select2-dropdown">'+'<span class="select2-results"></span>'+"</span>");t.attr("dir",this.options.get("dir"));this.$dropdown=t;return t};i.prototype.bind=function(){};i.prototype.position=function(e,t){};i.prototype.destroy=function(){this.$dropdown.remove()};return i});t.define("select2/dropdown/search",["jquery","../utils"],function(e,t){function i(){}i.prototype.render=function(t){var i=t.call(this);var n=e('<span class="select2-search select2-search--dropdown">'+'<input class="select2-search__field" type="search" tabindex="-1"'+' autocomplete="off" autocorrect="off" autocapitalize="off"'+' spellcheck="false" role="textbox" />'+"</span>");this.$searchContainer=n;this.$search=n.find("input");i.prepend(n);return i};i.prototype.bind=function(t,i,n){var s=this;t.call(this,i,n);this.$search.on("keydown",function(e){s.trigger("keypress",e);s._keyUpPrevented=e.isDefaultPrevented()});this.$search.on("input",function(t){e(this).off("keyup")});this.$search.on("keyup input",function(e){s.handleSearch(e)});i.on("open",function(){s.$search.attr("tabindex",0);s.$search.focus();window.setTimeout(function(){s.$search.focus()},0)});i.on("close",function(){s.$search.attr("tabindex",-1);s.$search.val("")});i.on("focus",function(){if(i.isOpen()){s.$search.focus()}});i.on("results:all",function(e){if(e.query.term==null||e.query.term===""){var t=s.showSearch(e);if(t){s.$searchContainer.removeClass("select2-search--hide")}else{s.$searchContainer.addClass("select2-search--hide")}}})};i.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=false};i.prototype.showSearch=function(e,t){return true};return i});t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder"));e.call(this,t,i,n)}e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results);e.call(this,t)};e.prototype.normalizePlaceholder=function(e,t){if(typeof t==="string"){t={id:"",text:t}}return t};e.prototype.removePlaceholder=function(e,t){var i=t.slice(0);for(var n=t.length-1;n>=0;n--){var s=t[n];if(this.placeholder.id===s.id){i.splice(n,1)}}return i};return e});t.define("select2/dropdown/infiniteScroll",["jquery"],function(e){function t(e,t,i,n){this.lastParams={};e.call(this,t,i,n);this.$loadingMore=this.createLoadingMore();this.loading=false}t.prototype.append=function(e,t){this.$loadingMore.remove();this.loading=false;e.call(this,t);if(this.showLoadingMore(t)){this.$results.append(this.$loadingMore)}};t.prototype.bind=function(t,i,n){var s=this;t.call(this,i,n);i.on("query",function(e){s.lastParams=e;s.loading=true});i.on("query:append",function(e){s.lastParams=e;s.loading=true});this.$results.on("scroll",function(){var t=e.contains(document.documentElement,s.$loadingMore[0]);if(s.loading||!t){return}var i=s.$results.offset().top+s.$results.outerHeight(false);var n=s.$loadingMore.offset().top+s.$loadingMore.outerHeight(false);if(i+50>=n){s.loadMore()}})};t.prototype.loadMore=function(){this.loading=true;var t=e.extend({},{page:1},this.lastParams);t.page++;this.trigger("query:append",t)};t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more};t.prototype.createLoadingMore=function(){var t=e("<li "+'class="select2-results__option select2-results__option--load-more"'+'role="treeitem" aria-disabled="true"></li>');var i=this.options.get("translations").get("loadingMore");t.html(i(this.lastParams));return t};return t});t.define("select2/dropdown/attachBody",["jquery","../utils"],function(e,t){function i(t,i,n){this.$dropdownParent=n.get("dropdownParent")||e(document.body);t.call(this,i,n)}i.prototype.bind=function(e,t,i){var n=this;var s=false;e.call(this,t,i);t.on("open",function(){n._showDropdown();n._attachPositioningHandler(t);if(!s){s=true;t.on("results:all",function(){n._positionDropdown();n._resizeDropdown()});t.on("results:append",function(){n._positionDropdown();n._resizeDropdown()})}});t.on("close",function(){n._hideDropdown();n._detachPositioningHandler(t)});this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})};i.prototype.destroy=function(e){e.call(this);this.$dropdownContainer.remove()};i.prototype.position=function(e,t,i){t.attr("class",i.attr("class"));t.removeClass("select2");t.addClass("select2-container--open");t.css({position:"absolute",top:-999999});this.$container=i};i.prototype.render=function(t){var i=e("<span></span>");var n=t.call(this);i.append(n);this.$dropdownContainer=i;return i};i.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()};i.prototype._attachPositioningHandler=function(i,n){var s=this;var a="scroll.select2."+n.id;var r="resize.select2."+n.id;var o="orientationchange.select2."+n.id;var l=this.$container.parents().filter(t.hasScroll);l.each(function(){e(this).data("select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})});l.on(a,function(t){var i=e(this).data("select2-scroll-position");e(this).scrollTop(i.y)});e(window).on(a+" "+r+" "+o,function(e){s._positionDropdown();s._resizeDropdown()})};i.prototype._detachPositioningHandler=function(i,n){var s="scroll.select2."+n.id;var a="resize.select2."+n.id;var r="orientationchange.select2."+n.id;var o=this.$container.parents().filter(t.hasScroll);o.off(s);e(window).off(s+" "+a+" "+r)};i.prototype._positionDropdown=function(){var t=e(window);var i=this.$dropdown.hasClass("select2-dropdown--above");var n=this.$dropdown.hasClass("select2-dropdown--below");var s=null;var a=this.$container.offset();a.bottom=a.top+this.$container.outerHeight(false);var r={height:this.$container.outerHeight(false)};r.top=a.top;r.bottom=a.top+r.height;var o={height:this.$dropdown.outerHeight(false)};var l={top:t.scrollTop(),bottom:t.scrollTop()+t.height()};var h=l.top<a.top-o.height;var c=l.bottom>a.bottom+o.height;var u={left:a.left,top:r.bottom};var d=this.$dropdownParent;if(d.css("position")==="static"){d=d.offsetParent()}var f=d.offset();u.top-=f.top;u.left-=f.left;if(!i&&!n){s="below"}if(!c&&h&&!i){s="above"}else if(!h&&c&&i){s="below"}if(s=="above"||i&&s!=="below"){u.top=r.top-f.top-o.height}if(s!=null){this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+s);this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+s)}this.$dropdownContainer.css(u)};i.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(false)+"px"};if(this.options.get("dropdownAutoWidth")){e.minWidth=e.width;e.position="relative";e.width="auto"}this.$dropdown.css(e)};i.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent);this._positionDropdown();this._resizeDropdown()};return i});t.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(t){var i=0;for(var n=0;n<t.length;n++){var s=t[n];if(s.children){i+=e(s.children)}else{i++}}return i}function t(e,t,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch");if(this.minimumResultsForSearch<0){this.minimumResultsForSearch=Infinity}e.call(this,t,i,n)}t.prototype.showSearch=function(t,i){if(e(i.data.results)<this.minimumResultsForSearch){return false}return t.call(this,i)};return t});t.define("select2/dropdown/selectOnClose",[],function(){function e(){}e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i);t.on("close",function(e){n._handleSelectOnClose(e)})};e.prototype._handleSelectOnClose=function(e,t){if(t&&t.originalSelect2Event!=null){var i=t.originalSelect2Event;if(i._type==="select"||i._type==="unselect"){return}}var n=this.getHighlightedResults();if(n.length<1){return}var s=n.data("data");if(s.element!=null&&s.element.selected||s.element==null&&s.selected){return}this.trigger("select",{data:s})};return e});t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i);t.on("select",function(e){n._selectTriggered(e)});t.on("unselect",function(e){n._selectTriggered(e)})};e.prototype._selectTriggered=function(e,t){var i=t.originalEvent;if(i&&i.ctrlKey){return}this.trigger("close",{originalEvent:i,originalSelect2Event:t})};return e});t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum;var i="Please delete "+t+" character";if(t!=1){i+="s"}return i},inputTooShort:function(e){var t=e.minimum-e.input.length;var i="Please enter "+t+" or more characters";return i},loadingMore:function(){return"Loading more results"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";if(e.maximum!=1){t+="s"}return t},noResults:function(){return"No results found"},searching:function(){return"Searching"}}});t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(e,t,i,n,s,a,r,o,l,h,c,u,d,f,p,m,g,v,y,b,w,x,_,C,k,T,S,M,D){function $(){this.reset()}$.prototype.apply=function(u){u=e.extend(true,{},this.defaults,u);if(u.dataAdapter==null){if(u.ajax!=null){u.dataAdapter=p}else if(u.data!=null){u.dataAdapter=f}else{u.dataAdapter=d}if(u.minimumInputLength>0){u.dataAdapter=h.Decorate(u.dataAdapter,v)}if(u.maximumInputLength>0){u.dataAdapter=h.Decorate(u.dataAdapter,y)}if(u.maximumSelectionLength>0){u.dataAdapter=h.Decorate(u.dataAdapter,b)}if(u.tags){u.dataAdapter=h.Decorate(u.dataAdapter,m)}if(u.tokenSeparators!=null||u.tokenizer!=null){u.dataAdapter=h.Decorate(u.dataAdapter,g)}if(u.query!=null){var D=t(u.amdBase+"compat/query");u.dataAdapter=h.Decorate(u.dataAdapter,D)}if(u.initSelection!=null){var $=t(u.amdBase+"compat/initSelection");u.dataAdapter=h.Decorate(u.dataAdapter,$)}}if(u.resultsAdapter==null){u.resultsAdapter=i;if(u.ajax!=null){u.resultsAdapter=h.Decorate(u.resultsAdapter,C)}if(u.placeholder!=null){u.resultsAdapter=h.Decorate(u.resultsAdapter,_)}if(u.selectOnClose){u.resultsAdapter=h.Decorate(u.resultsAdapter,S)}}if(u.dropdownAdapter==null){if(u.multiple){u.dropdownAdapter=w}else{var E=h.Decorate(w,x);u.dropdownAdapter=E}if(u.minimumResultsForSearch!==0){u.dropdownAdapter=h.Decorate(u.dropdownAdapter,T)}if(u.closeOnSelect){u.dropdownAdapter=h.Decorate(u.dropdownAdapter,M)}if(u.dropdownCssClass!=null||u.dropdownCss!=null||u.adaptDropdownCssClass!=null){var A=t(u.amdBase+"compat/dropdownCss");u.dropdownAdapter=h.Decorate(u.dropdownAdapter,A)}u.dropdownAdapter=h.Decorate(u.dropdownAdapter,k)}if(u.selectionAdapter==null){if(u.multiple){u.selectionAdapter=s}else{u.selectionAdapter=n}if(u.placeholder!=null){u.selectionAdapter=h.Decorate(u.selectionAdapter,a)}if(u.allowClear){u.selectionAdapter=h.Decorate(u.selectionAdapter,r)}if(u.multiple){u.selectionAdapter=h.Decorate(u.selectionAdapter,o)}if(u.containerCssClass!=null||u.containerCss!=null||u.adaptContainerCssClass!=null){var P=t(u.amdBase+"compat/containerCss");u.selectionAdapter=h.Decorate(u.selectionAdapter,P)}u.selectionAdapter=h.Decorate(u.selectionAdapter,l)}if(typeof u.language==="string"){if(u.language.indexOf("-")>0){var I=u.language.split("-");var N=I[0];u.language=[u.language,N]}else{u.language=[u.language]}}if(e.isArray(u.language)){var O=new c;u.language.push("en");var F=u.language;for(var R=0;R<F.length;R++){var L=F[R];var j={};try{j=c.loadPath(L)}catch(e){try{L=this.defaults.amdLanguageBase+L;j=c.loadPath(L)}catch(e){if(u.debug&&window.console&&console.warn){console.warn('Select2: The language file for "'+L+'" could not be '+"automatically loaded. A fallback will be used instead.")}continue}}O.extend(j)}u.translations=O}else{var U=c.loadPath(this.defaults.amdLanguageBase+"en");var H=new c(u.language);H.extend(U);u.translations=H}return u};$.prototype.reset=function(){function t(e){function t(e){return u[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function i(n,s){if(e.trim(n.term)===""){return s}if(s.children&&s.children.length>0){var a=e.extend(true,{},s);for(var r=s.children.length-1;r>=0;r--){var o=s.children[r];var l=i(n,o);if(l==null){a.children.splice(r,1)}}if(a.children.length>0){return a}return i(n,a)}var h=t(s.text).toUpperCase();var c=t(n.term).toUpperCase();if(h.indexOf(c)>-1){return s}return null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:true,debug:false,dropdownAutoWidth:false,escapeMarkup:h.escapeMarkup,language:D,matcher:i,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:false,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}};$.prototype.set=function(t,i){var n=e.camelCase(t);var s={};s[n]=i;var a=h._convertData(s);e.extend(this.defaults,a)};var E=new $;return E});t.define("select2/options",["require","jquery","./defaults","./utils"],function(e,t,i,n){function s(t,s){this.options=t;if(s!=null){this.fromElement(s)}this.options=i.apply(this.options);if(s&&s.is("input")){var a=e(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=n.Decorate(this.options.dataAdapter,a)}}s.prototype.fromElement=function(e){var i=["select2"];if(this.options.multiple==null){this.options.multiple=e.prop("multiple")}if(this.options.disabled==null){this.options.disabled=e.prop("disabled")}if(this.options.language==null){if(e.prop("lang")){this.options.language=e.prop("lang").toLowerCase()}else if(e.closest("[lang]").prop("lang")){this.options.language=e.closest("[lang]").prop("lang")}}if(this.options.dir==null){if(e.prop("dir")){this.options.dir=e.prop("dir")}else if(e.closest("[dir]").prop("dir")){this.options.dir=e.closest("[dir]").prop("dir")}else{this.options.dir="ltr"}}e.prop("disabled",this.options.disabled);e.prop("multiple",this.options.multiple);if(e.data("select2Tags")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-select2-tags` attribute has been changed to "+'use the `data-data` and `data-tags="true"` attributes and will be '+"removed in future versions of Select2.")}e.data("data",e.data("select2Tags"));e.data("tags",true)}if(e.data("ajaxUrl")){if(this.options.debug&&window.console&&console.warn){console.warn("Select2: The `data-ajax-url` attribute has been changed to "+"`data-ajax--url` and support for the old attribute will be removed"+" in future versions of Select2.")}e.attr("ajax--url",e.data("ajaxUrl"));e.data("ajax--url",e.data("ajaxUrl"))}var s={};if(t.fn.jquery&&t.fn.jquery.substr(0,2)=="1."&&e[0].dataset){s=t.extend(true,{},e[0].dataset,e.data())}else{s=e.data()}var a=t.extend(true,{},s);a=n._convertData(a);for(var r in a){if(t.inArray(r,i)>-1){continue}if(t.isPlainObject(this.options[r])){t.extend(this.options[r],a[r])}else{this.options[r]=a[r]}}return this};s.prototype.get=function(e){return this.options[e]};s.prototype.set=function(e,t){this.options[e]=t};return s});t.define("select2/core",["jquery","./options","./utils","./keys"],function(e,t,i,n){var s=function(e,i){if(e.data("select2")!=null){e.data("select2").destroy()}this.$element=e;this.id=this._generateId(e);i=i||{};this.options=new t(i,e);s.__super__.constructor.call(this);var n=e.attr("tabindex")||0;e.data("old-tabindex",n);e.attr("tabindex","-1");var a=this.options.get("dataAdapter");this.dataAdapter=new a(e,this.options);var r=this.render();this._placeContainer(r);var o=this.options.get("selectionAdapter");this.selection=new o(e,this.options);this.$selection=this.selection.render();this.selection.position(this.$selection,r);var l=this.options.get("dropdownAdapter");this.dropdown=new l(e,this.options);this.$dropdown=this.dropdown.render();this.dropdown.position(this.$dropdown,r);var h=this.options.get("resultsAdapter");this.results=new h(e,this.options,this.dataAdapter);this.$results=this.results.render();this.results.position(this.$results,this.$dropdown);var c=this;this._bindAdapters();this._registerDomEvents();this._registerDataEvents();this._registerSelectionEvents();this._registerDropdownEvents();this._registerResultsEvents();this._registerEvents();this.dataAdapter.current(function(e){c.trigger("selection:update",{data:e})});e.addClass("select2-hidden-accessible");e.attr("aria-hidden","true");this._syncAttributes();e.data("select2",this)};i.Extend(s,i.Observable);s.prototype._generateId=function(e){var t="";if(e.attr("id")!=null){t=e.attr("id")}else if(e.attr("name")!=null){t=e.attr("name")+"-"+i.generateChars(2)}else{t=i.generateChars(4)}t=t.replace(/(:|\.|\[|\]|,)/g,"");t="select2-"+t;return t};s.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));if(t!=null){e.css("width",t)}};s.prototype._resolveWidth=function(e,t){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if(t=="resolve"){var n=this._resolveWidth(e,"style");if(n!=null){return n}return this._resolveWidth(e,"element")}if(t=="element"){var s=e.outerWidth(false);if(s<=0){return"auto"}return s+"px"}if(t=="style"){var a=e.attr("style");if(typeof a!=="string"){return null}var r=a.split(";");for(var o=0,l=r.length;o<l;o=o+1){var h=r[o].replace(/\s/g,"");var c=h.match(i);if(c!==null&&c.length>=1){return c[1]}}return null}return t};s.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container);this.selection.bind(this,this.$container);this.dropdown.bind(this,this.$container);this.results.bind(this,this.$container)};s.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})});this.$element.on("focus.select2",function(e){t.trigger("focus",e)});this._syncA=i.bind(this._syncAttributes,this);this._syncS=i.bind(this._syncSubtree,this);if(this.$element[0].attachEvent){this.$element[0].attachEvent("onpropertychange",this._syncA)}var n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(n!=null){this._observer=new n(function(i){e.each(i,t._syncA);e.each(i,t._syncS)});this._observer.observe(this.$element[0],{attributes:true,childList:true,subtree:false})}else if(this.$element[0].addEventListener){this.$element[0].addEventListener("DOMAttrModified",t._syncA,false);this.$element[0].addEventListener("DOMNodeInserted",t._syncS,false);this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,false)}};s.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",function(t,i){e.trigger(t,i)})};s.prototype._registerSelectionEvents=function(){var t=this;var i=["toggle","focus"];this.selection.on("toggle",function(){t.toggleDropdown()});this.selection.on("focus",function(e){t.focus(e)});this.selection.on("*",function(n,s){if(e.inArray(n,i)!==-1){return}t.trigger(n,s)})};s.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",function(t,i){e.trigger(t,i)})};s.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",function(t,i){e.trigger(t,i)})};s.prototype._registerEvents=function(){var e=this;this.on("open",function(){e.$container.addClass("select2-container--open")});this.on("close",function(){e.$container.removeClass("select2-container--open")});this.on("enable",function(){e.$container.removeClass("select2-container--disabled")});this.on("disable",function(){e.$container.addClass("select2-container--disabled")});this.on("blur",function(){e.$container.removeClass("select2-container--focus")});this.on("query",function(t){if(!e.isOpen()){e.trigger("open",{})}this.dataAdapter.query(t,function(i){e.trigger("results:all",{data:i,query:t})})});this.on("query:append",function(t){this.dataAdapter.query(t,function(i){e.trigger("results:append",{data:i,query:t})})});this.on("keypress",function(t){var i=t.which;if(e.isOpen()){if(i===n.ESC||i===n.TAB||i===n.UP&&t.altKey){e.close();t.preventDefault()}else if(i===n.ENTER){e.trigger("results:select",{});t.preventDefault()}else if(i===n.SPACE&&t.ctrlKey){e.trigger("results:toggle",{});t.preventDefault()}else if(i===n.UP){e.trigger("results:previous",{});t.preventDefault()}else if(i===n.DOWN){e.trigger("results:next",{});t.preventDefault()}}else{if(i===n.ENTER||i===n.SPACE||i===n.DOWN&&t.altKey){e.open();t.preventDefault()}}})};s.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled"));if(this.options.get("disabled")){if(this.isOpen()){this.close()}this.trigger("disable",{})}else{this.trigger("enable",{})}};s.prototype._syncSubtree=function(e,t){var i=false;var n=this;if(e&&e.target&&(e.target.nodeName!=="OPTION"&&e.target.nodeName!=="OPTGROUP")){return}if(!t){i=true}else if(t.addedNodes&&t.addedNodes.length>0){for(var s=0;s<t.addedNodes.length;s++){var a=t.addedNodes[s];if(a.selected){i=true}}}else if(t.removedNodes&&t.removedNodes.length>0){i=true}if(i){this.dataAdapter.current(function(e){n.trigger("selection:update",{data:e})})}};s.prototype.trigger=function(e,t){var i=s.__super__.trigger;var n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(t===undefined){t={}}if(e in n){var a=n[e];var r={prevented:false,name:e,args:t};i.call(this,a,r);if(r.prevented){t.prevented=true;return}}i.call(this,e,t)};s.prototype.toggleDropdown=function(){if(this.options.get("disabled")){return}if(this.isOpen()){this.close()}else{this.open()}};s.prototype.open=function(){if(this.isOpen()){return}this.trigger("query",{})};s.prototype.close=function(){if(!this.isOpen()){return}this.trigger("close",{})};s.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")};s.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")};s.prototype.focus=function(e){if(this.hasFocus()){return}this.$container.addClass("select2-container--focus");this.trigger("focus",{})};s.prototype.enable=function(e){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("enable")` method has been deprecated and will'+' be removed in later Select2 versions. Use $element.prop("disabled")'+" instead.")}if(e==null||e.length===0){e=[true]}var t=!e[0];this.$element.prop("disabled",t)};s.prototype.data=function(){if(this.options.get("debug")&&arguments.length>0&&window.console&&console.warn){console.warn('Select2: Data can no longer be set using `select2("data")`. You '+"should consider setting the value instead using `$element.val()`.")}var e=[];this.dataAdapter.current(function(t){e=t});return e};s.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn){console.warn('Select2: The `select2("val")` method has been deprecated and will be'+" removed in later Select2 versions. Use $element.val() instead.")}if(t==null||t.length===0){return this.$element.val()}var i=t[0];if(e.isArray(i)){i=e.map(i,function(e){return e.toString()})}this.$element.val(i).trigger("change")};s.prototype.destroy=function(){this.$container.remove();if(this.$element[0].detachEvent){this.$element[0].detachEvent("onpropertychange",this._syncA)}if(this._observer!=null){this._observer.disconnect();this._observer=null}else if(this.$element[0].removeEventListener){this.$element[0].removeEventListener("DOMAttrModified",this._syncA,false);
this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,false);this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,false)}this._syncA=null;this._syncS=null;this.$element.off(".select2");this.$element.attr("tabindex",this.$element.data("old-tabindex"));this.$element.removeClass("select2-hidden-accessible");this.$element.attr("aria-hidden","false");this.$element.removeData("select2");this.dataAdapter.destroy();this.selection.destroy();this.dropdown.destroy();this.results.destroy();this.dataAdapter=null;this.selection=null;this.dropdown=null;this.results=null};s.prototype.render=function(){var t=e('<span class="select2 select2-container">'+'<span class="selection"></span>'+'<span class="dropdown-wrapper" aria-hidden="true"></span>'+"</span>");t.attr("dir",this.options.get("dir"));this.$container=t;this.$container.addClass("select2-container--"+this.options.get("theme"));t.data("element",this.$element);return t};return s});t.define("jquery-mousewheel",["jquery"],function(e){return e});t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(e,t,i,n){if(e.fn.select2==null){var s=["open","close","destroy"];e.fn.select2=function(t){t=t||{};if(typeof t==="object"){this.each(function(){var n=e.extend(true,{},t);var s=new i(e(this),n)});return this}else if(typeof t==="string"){var n;var a=Array.prototype.slice.call(arguments,1);this.each(function(){var i=e(this).data("select2");if(i==null&&window.console&&console.error){console.error("The select2('"+t+"') method was called on an "+"element that is not using Select2.")}n=i[t].apply(i,a)});if(e.inArray(t,s)>-1){return this}return n}else{throw new Error("Invalid arguments for Select2: "+t)}}}if(e.fn.select2.defaults==null){e.fn.select2.defaults=n}return i});return{define:t.define,require:t.require}}();var i=t.require("jquery.select2");e.fn.select2.amd=t;return i});(function(e){e.fn.extend({tableExport:function(t){function i(t){var i=[];e(t).find("thead").first().find("th").each(function(t,n){void 0!==e(n).attr("data-field")?i[t]=e(n).attr("data-field"):i[t]=t.toString()});return i}function n(t,i,n,s,a){if(-1==e.inArray(n,k.ignoreRow)&&-1==e.inArray(n-s,k.ignoreRow)){var r=e(t).filter(function(){return"none"!=e(this).data("tableexport-display")&&(e(this).is(":visible")||"always"==e(this).data("tableexport-display")||"always"==e(this).closest("table").data("tableexport-display"))}).find(i),o=0;r.each(function(t){if("always"==e(this).data("tableexport-display")||"none"!=e(this).css("display")&&"hidden"!=e(this).css("visibility")&&"none"!=e(this).data("tableexport-display")){var i=t,s=!1;0<k.ignoreColumn.length&&("string"==typeof k.ignoreColumn[0]?P.length>i&&"undefined"!=typeof P[i]&&-1!=e.inArray(P[i],k.ignoreColumn)&&(s=!0):"number"!=typeof k.ignoreColumn[0]||-1==e.inArray(i,k.ignoreColumn)&&-1==e.inArray(i-r.length,k.ignoreColumn)||(s=!0));if(!1===s&&"function"===typeof a){var s=0,l,h=0;if("undefined"!=typeof E[n]&&0<E[n].length)for(i=0;i<=t;i++)"undefined"!=typeof E[n][i]&&(a(null,n,i),delete E[n][i],t++);e(this).is("[colspan]")&&(s=parseInt(e(this).attr("colspan")),o+=0<s?s-1:0);e(this).is("[rowspan]")&&(h=parseInt(e(this).attr("rowspan")));a(this,n,t);for(i=0;i<s-1;i++)a(null,n,t+i);if(h)for(l=1;l<h;l++)for("undefined"==typeof E[n+l]&&(E[n+l]=[]),E[n+l][t+o]="",i=1;i<s;i++)E[n+l][t+o-i]=""}}});if("undefined"!=typeof E[n]&&0<E[n].length)for(t=0;t<=E[n].length;t++)"undefined"!=typeof E[n][t]&&(a(null,n,t),delete E[n][t])}}function s(e,t){!0===k.consoleLog&&console.log(e.output());if("string"===k.outputMode)return e.output();if("base64"===k.outputMode)return C(e.output());if("window"===k.outputMode)window.open(URL.createObjectURL(e.output("blob")));else try{var i=e.output("blob");saveAs(i,k.fileName+".pdf")}catch(n){_(k.fileName+".pdf","data:application/pdf"+(t?"":";base64")+",",t?i:e.output())}}function a(e,t,i){var n=0;"undefined"!=typeof i&&(n=i.colspan);if(0<=n){for(var s=e.width,a=e.textPos.x,r=t.table.columns.indexOf(t.column),o=1;o<n;o++)s+=t.table.columns[r+o].width;1<n&&("right"===e.styles.halign?a=e.textPos.x+s-e.width:"center"===e.styles.halign&&(a=e.textPos.x+(s-e.width)/2));e.width=s;e.textPos.x=a;"undefined"!=typeof i&&1<i.rowspan&&(e.height*=i.rowspan);if("middle"===e.styles.valign||"bottom"===e.styles.valign)i=("string"===typeof e.text?e.text.split(/\r\n|\r|\n/g):e.text).length||1,2<i&&(e.textPos.y-=(2-1.15)/2*t.row.styles.fontSize*(i-2)/3);return!0}return!1}function r(t,i,n){"undefined"!=typeof n.images&&i.each(function(){var i=e(this).children();if(e(this).is("img")){var s=x(this.src);n.images[s]={url:this.src,src:this.src}}"undefined"!=typeof i&&0<i.length&&r(t,i,n)})}function o(e,t){function i(e){if(e.url){var i=new Image;s=++a;i.crossOrigin="Anonymous";i.onerror=i.onload=function(){if(i.complete&&(0===i.src.indexOf("data:image/")&&(i.width=e.width||i.width||0,i.height=e.height||i.height||0),i.width+i.height)){var n=document.createElement("canvas"),r=n.getContext("2d");n.width=i.width;n.height=i.height;r.drawImage(i,0,0);e.src=n.toDataURL("image/jpeg")}--a||t(s)};i.src=e.url}}var n,s=0,a=0;if("undefined"!=typeof e.images)for(n in e.images)e.images.hasOwnProperty(n)&&i(e.images[n]);(n=a)||(t(s),n=void 0);return n}function l(t,i,n){i.each(function(){var i=e(this).children();if(e(this).is("div")){var s=p(g(this,"background-color"),[255,255,255]),a=p(g(this,"border-top-color"),[0,0,0]),r=v(this,"border-top-width",k.jspdf.unit),o=this.getBoundingClientRect(),h=this.offsetLeft*n.dw;var c=this.offsetTop*n.dh;var u=o.width*n.dw,o=o.height*n.dh;n.doc.setDrawColor.apply(void 0,a);n.doc.setFillColor.apply(void 0,s);n.doc.setLineWidth(r);n.doc.rect(t.x+h,t.y+c,u,o,r?"FD":"F")}else if(e(this).is("img")&&"undefined"!=typeof n.images&&(c=x(this.src),s=n.images[c],"undefined"!=typeof s)){a=t.width/t.height;r=this.width/this.height;h=t.width;u=t.height;c=0;r<a?(u=Math.min(t.height,this.height),h=this.width*u/this.height):r>a&&(h=Math.min(t.width,this.width),u=this.height*h/this.width);u<t.height&&(c=(t.height-u)/2);try{n.doc.addImage(s.src,t.textPos.x,t.y+c,h,u)}catch(e){}t.textPos.x+=h}"undefined"!=typeof i&&0<i.length&&l(t,i,n)})}function h(t,i,n){if("function"===typeof n.onAutotableText)n.onAutotableText(n.doc,t,i);else{var s=t.textPos.x,a=t.textPos.y,r={halign:t.styles.halign,valign:t.styles.valign};if(i.length){for(i=i[0];i.previousSibling;)i=i.previousSibling;for(var o=!1,l=!1;i;){var h=i.innerText||i.textContent||"",h=(h.length&&" "==h[0]?" ":"")+e.trim(h)+(1<h.length&&" "==h[h.length-1]?" ":"");e(i).is("br")&&(s=t.textPos.x,a+=n.doc.internal.getFontSize());e(i).is("b")?o=!0:e(i).is("i")&&(l=!0);(o||l)&&n.doc.setFontType(o&&l?"bolditalic":o?"bold":"italic");var c=n.doc.getStringUnitWidth(h)*n.doc.internal.getFontSize();if(c){if("linebreak"===t.styles.overflow&&s>t.textPos.x&&s+c>t.textPos.x+t.width){if(0<=".,!%*;:=-".indexOf(h.charAt(0))){var u=h.charAt(0),c=n.doc.getStringUnitWidth(u)*n.doc.internal.getFontSize();s+c<=t.textPos.x+t.width&&(n.doc.autoTableText(u,s,a,r),h=h.substring(1,h.length));c=n.doc.getStringUnitWidth(h)*n.doc.internal.getFontSize()}s=t.textPos.x;a+=n.doc.internal.getFontSize()}for(;h.length&&s+c>t.textPos.x+t.width;)h=h.substring(0,h.length-1),c=n.doc.getStringUnitWidth(h)*n.doc.internal.getFontSize();n.doc.autoTableText(h,s,a,r);s+=c}if(o||l)e(i).is("b")?o=!1:e(i).is("i")&&(l=!1),n.doc.setFontType(o||l?o?"bold":"italic":"normal");i=i.nextSibling}t.textPos.x=s;t.textPos.y=a}else n.doc.autoTableText(t.text,t.textPos.x,t.textPos.y,r)}}function c(e,t,i){return e.replace(new RegExp(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),"g"),i)}function u(e){e=c(e||"0",k.numbers.html.thousandsSeparator,"");e=c(e,k.numbers.html.decimalMark,".");return"number"===typeof e||!1!==jQuery.isNumeric(e)?e:!1}function d(t,i,n){var s="";if(null!==t){var a=e(t);if(a[0].hasAttribute("data-tableexport-value"))var r=a.data("tableexport-value");else if(r=a.html(),"function"===typeof k.onCellHtmlData)r=k.onCellHtmlData(a,i,n,r);else if(""!=r){t=e.parseHTML(r);var o=0,l=0;r="";e.each(t,function(){if(e(this).is("input"))r+=a.find("input").eq(o++).val();else if(e(this).is("select"))r+=a.find("select option:selected").eq(l++).text();else if("undefined"===typeof e(this).html())r+=e(this).text();else if(void 0===jQuery().bootstrapTable||!0!==e(this).hasClass("filterControl"))r+=e(this).html()})}if(!0===k.htmlContent)s=e.trim(r);else if(""!=r){var h=r.replace(/\n/g,"\u2028").replace(/<br\s*[\/]?>/gi,"");t=e("<div/>").html(h).contents();h="";e.each(t.text().split("\u2028"),function(t,i){0<t&&(h+=" ");h+=e.trim(i)});e.each(h.split(""),function(t,i){0<t&&(s+="\n");s+=e.trim(i).replace(/\u00AD/g,"")});if("json"==k.type||!1===k.numbers.output)t=u(s),!1!==t&&(s=Number(t));else if(k.numbers.html.decimalMark!=k.numbers.output.decimalMark||k.numbers.html.thousandsSeparator!=k.numbers.output.thousandsSeparator)if(t=u(s),!1!==t){var c=(""+t).split(".");1==c.length&&(c[1]="");var d=3<c[0].length?c[0].length%3:0,s=(0>t?"-":"")+(k.numbers.output.thousandsSeparator?(d?c[0].substr(0,d)+k.numbers.output.thousandsSeparator:"")+c[0].substr(d).replace(/(\d{3})(?=\d)/g,"$1"+k.numbers.output.thousandsSeparator):c[0])+(c[1].length?k.numbers.output.decimalMark+c[1]:"")}}!0===k.escape&&(s=escape(s));"function"===typeof k.onCellData&&(s=k.onCellData(a,i,n,s))}return s}function f(e,t,i){return t+"-"+i.toLowerCase()}function p(e,t){var i=/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/.exec(e),n=t;i&&(n=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])]);return n}function m(t){var i=g(t,"text-align"),n=g(t,"font-weight"),s=g(t,"font-style"),a="";"start"==i&&(i="rtl"==g(t,"direction")?"right":"left");700<=n&&(a="bold");"italic"==s&&(a+=s);""===a&&(a="normal");i={style:{align:i,bcolor:p(g(t,"background-color"),[255,255,255]),color:p(g(t,"color"),[0,0,0]),fstyle:a},colspan:parseInt(e(t).attr("colspan"))||0,rowspan:parseInt(e(t).attr("rowspan"))||0};null!==t&&(t=t.getBoundingClientRect(),i.rect={width:t.width,height:t.height});return i}function g(e,t){try{return window.getComputedStyle?(t=t.replace(/([a-z])([A-Z])/,f),window.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle?e.currentStyle[t]:e.style[t]}catch(e){}return""}function v(e,t,i){t=g(e,t).match(/\d+/);if(null!==t){t=t[0];e=e.parentElement;var n=document.createElement("div");n.style.overflow="hidden";n.style.visibility="hidden";e.appendChild(n);n.style.width=100+i;i=100/n.offsetWidth;e.removeChild(n);return t*i}return 0}function y(){if(!(this instanceof y))return new y;this.SheetNames=[];this.Sheets={}}function b(e){for(var t=new ArrayBuffer(e.length),i=new Uint8Array(t),n=0;n!=e.length;++n)i[n]=e.charCodeAt(n)&255;return t}function w(e){for(var t={},i={s:{c:1e7,r:1e7},e:{c:0,r:0}},n=0;n!=e.length;++n)for(var s=0;s!=e[n].length;++s){i.s.r>n&&(i.s.r=n);i.s.c>s&&(i.s.c=s);i.e.r<n&&(i.e.r=n);i.e.c<s&&(i.e.c=s);var a={v:e[n][s]};if(null!==a.v){var r=XLSX.utils.encode_cell({c:s,r:n});if("number"===typeof a.v)a.t="n";else if("boolean"===typeof a.v)a.t="b";else if(a.v instanceof Date){a.t="n";a.z=XLSX.SSF._table[14];var o=a;var l=(Date.parse(a.v)-new Date(Date.UTC(1899,11,30)))/864e5;o.v=l}else a.t="s";t[r]=a}}1e7>i.s.c&&(t["!ref"]=XLSX.utils.encode_range(i));return t}function x(e){var t=0,i;if(0===e.length)return t;var n=0;for(i=e.length;n<i;n++){var s=e.charCodeAt(n);t=(t<<5)-t+s;t|=0}return t}function _(e,t,i){var n=window.navigator.userAgent;if(!1!==e&&(0<n.indexOf("MSIE ")||n.match(/Trident.*rv\:11\./)))if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(new Blob([i]),e);else{if(t=document.createElement("iframe"))document.body.appendChild(t),t.setAttribute("style","display:none"),t.contentDocument.open("txt/html","replace"),t.contentDocument.write(i),t.contentDocument.close(),t.focus(),t.contentDocument.execCommand("SaveAs",!0,e),document.body.removeChild(t)}else if(n=document.createElement("a")){var s=null;n.style.display="none";!1!==e?n.download=e:n.target="_blank";"object"==typeof i?(s=window.URL.createObjectURL(i),n.href=s):0<=t.toLowerCase().indexOf("base64,")?n.href=t+C(i):n.href=t+encodeURIComponent(i);document.body.appendChild(n);if(document.createEvent)null===S&&(S=document.createEvent("MouseEvents")),S.initEvent("click",!0,!1),n.dispatchEvent(S);else if(document.createEventObject)n.fireEvent("onclick");else if("function"==typeof n.onclick)n.onclick();s&&window.URL.revokeObjectURL(s);document.body.removeChild(n)}}function C(e){var t="",i,n=0;e=e.replace(/\x0d\x0a/g,"\n");var s="";for(i=0;i<e.length;i++){var a=e.charCodeAt(i);128>a?s+=String.fromCharCode(a):(127<a&&2048>a?s+=String.fromCharCode(a>>6|192):(s+=String.fromCharCode(a>>12|224),s+=String.fromCharCode(a>>6&63|128)),s+=String.fromCharCode(a&63|128))}for(e=s;n<e.length;){var r=e.charCodeAt(n++);s=e.charCodeAt(n++);i=e.charCodeAt(n++);a=r>>2;r=(r&3)<<4|s>>4;var o=(s&15)<<2|i>>6;var l=i&63;isNaN(s)?o=l=64:isNaN(i)&&(l=64);t=t+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(o)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(l)}return t}var k={consoleLog:!1,csvEnclosure:'"',csvSeparator:",",csvUseBOM:!0,displayTableName:!1,escape:!1,excelstyles:[],fileName:"tableExport",htmlContent:!1,ignoreColumn:[],ignoreRow:[],jsonScope:"all",jspdf:{orientation:"p",unit:"pt",format:"a4",margins:{left:20,right:10,top:10,bottom:10},autotable:{styles:{cellPadding:2,rowHeight:12,fontSize:8,fillColor:255,textColor:50,fontStyle:"normal",overflow:"ellipsize",halign:"left",valign:"middle"},headerStyles:{fillColor:[52,73,94],textColor:255,fontStyle:"bold",halign:"center"},alternateRowStyles:{fillColor:245},tableExport:{onAfterAutotable:null,onBeforeAutotable:null,onAutotableText:null,onTable:null,outputImages:!0}}},numbers:{html:{decimalMark:".",thousandsSeparator:","},output:{decimalMark:".",thousandsSeparator:","}},onCellData:null,onCellHtmlData:null,outputMode:"file",pdfmake:{enabled:!1},tbodySelector:"tr",tfootSelector:"tr",theadSelector:"tr",tableName:"myTableName",type:"csv",worksheetName:"xlsWorksheetName"},T=this,S=null,M=[],D=[],$=0,E=[],A="",P=[];e.extend(!0,k,t);P=i(T);if("csv"==k.type||"tsv"==k.type||"txt"==k.type){var I="",N=0,$=0,O=function(t,i,s){t.each(function(){A="";n(this,i,$,s+t.length,function(e,t,i){var n=A,s="";if(null!==e)if(e=d(e,t,i),t=null===e||""===e?"":e.toString(),"tsv"==k.type)e instanceof Date&&e.toLocaleString(),s=c(t,"\t"," ");else if(e instanceof Date)s=k.csvEnclosure+e.toLocaleString()+k.csvEnclosure;else if(s=c(t,k.csvEnclosure,k.csvEnclosure+k.csvEnclosure),0<=s.indexOf(k.csvSeparator)||/[\r\n ]/g.test(s))s=k.csvEnclosure+s+k.csvEnclosure;A=n+(s+("tsv"==k.type?"\t":k.csvSeparator))});A=e.trim(A).substring(0,A.length-1);0<A.length&&(0<I.length&&(I+="\n"),I+=A);$++});return t.length},N=N+O(e(T).find("thead").first().find(k.theadSelector),"th,td",N);e(T).find("tbody").each(function(){N+=O(e(this).find(k.tbodySelector),"td,th",N)});k.tfootSelector.length&&O(e(T).find("tfoot").first().find(k.tfootSelector),"td,th",N);I+="\n";!0===k.consoleLog&&console.log(I);if("string"===k.outputMode)return I;if("base64"===k.outputMode)return C(I);if("window"===k.outputMode){_(!1,"data:text/"+("csv"==k.type?"csv":"plain")+";charset=utf-8,",I);return}try{var F=new Blob([I],{type:"text/"+("csv"==k.type?"csv":"plain")+";charset=utf-8"});saveAs(F,k.fileName+"."+k.type,"csv"!=k.type||!1===k.csvUseBOM)}catch(e){_(k.fileName+"."+k.type,"data:text/"+("csv"==k.type?"csv":"plain")+";charset=utf-8,"+("csv"==k.type&&k.csvUseBOM?"\ufeff":""),I)}}else if("sql"==k.type){var $=0,R="INSERT INTO `"+k.tableName+"` (",M=e(T).find("thead").first().find(k.theadSelector);M.each(function(){n(this,"th,td",$,M.length,function(e,t,i){R+="'"+d(e,t,i)+"',"});$++;R=e.trim(R);R=e.trim(R).substring(0,R.length-1)});R+=") VALUES ";e(T).find("tbody").each(function(){D.push.apply(D,e(this).find(k.tbodySelector))});k.tfootSelector.length&&D.push.apply(D,e(T).find("tfoot").find(k.tfootSelector));e(D).each(function(){A="";n(this,"td,th",$,M.length+D.length,function(e,t,i){A+="'"+d(e,t,i)+"',"});3<A.length&&(R+="("+A,R=e.trim(R).substring(0,R.length-1),R+="),");$++});R=e.trim(R).substring(0,R.length-1);R+=";";!0===k.consoleLog&&console.log(R);if("string"===k.outputMode)return R;if("base64"===k.outputMode)return C(R);try{F=new Blob([R],{type:"text/plain;charset=utf-8"}),saveAs(F,k.fileName+".sql")}catch(e){_(k.fileName+".sql","data:application/sql;charset=utf-8,",R)}}else if("json"==k.type){var L=[],M=e(T).find("thead").first().find(k.theadSelector);M.each(function(){var e=[];n(this,"th,td",$,M.length,function(t,i,n){e.push(d(t,i,n))});L.push(e)});var j=[];e(T).find("tbody").each(function(){D.push.apply(D,e(this).find(k.tbodySelector))});k.tfootSelector.length&&D.push.apply(D,e(T).find("tfoot").find(k.tfootSelector));e(D).each(function(){var t={},i=0;n(this,"td,th",$,M.length+D.length,function(e,n,s){L.length?t[L[L.length-1][i]]=d(e,n,s):t[i]=d(e,n,s);i++});!1===e.isEmptyObject(t)&&j.push(t);$++});t="";t="head"==k.jsonScope?JSON.stringify(L):"data"==k.jsonScope?JSON.stringify(j):JSON.stringify({header:L,data:j});!0===k.consoleLog&&console.log(t);if("string"===k.outputMode)return t;if("base64"===k.outputMode)return C(t);try{F=new Blob([t],{type:"application/json;charset=utf-8"}),saveAs(F,k.fileName+".json")}catch(e){_(k.fileName+".json","data:application/json;charset=utf-8;base64,",t)}}else if("xml"===k.type){var $=0,U='<?xml version="1.0" encoding="utf-8"?>',U=U+"<tabledata><fields>",M=e(T).find("thead").first().find(k.theadSelector);M.each(function(){n(this,"th,td",$,M.length,function(e,t,i){U+="<field>"+d(e,t,i)+"</field>"});$++});var U=U+"</fields><data>",H=1;e(T).find("tbody").each(function(){D.push.apply(D,e(this).find(k.tbodySelector))});k.tfootSelector.length&&D.push.apply(D,e(T).find("tfoot").find(k.tfootSelector));e(D).each(function(){var e=1;A="";n(this,"td,th",$,M.length+D.length,function(t,i,n){A+="<column-"+e+">"+d(t,i,n)+"</column-"+e+">";e++});0<A.length&&"<column-1></column-1>"!=A&&(U+='<row id="'+H+'">'+A+"</row>",H++);$++});U+="</data></tabledata>";!0===k.consoleLog&&console.log(U);if("string"===k.outputMode)return U;if("base64"===k.outputMode)return C(U);try{F=new Blob([U],{type:"application/xml;charset=utf-8"}),saveAs(F,k.fileName+".xml")}catch(e){_(k.fileName+".xml","data:application/xml;charset=utf-8;base64,",U)}}else if("excel"==k.type||"xls"==k.type||"word"==k.type||"doc"==k.type){t="excel"==k.type||"xls"==k.type?"excel":"word";var z="excel"==t?"xls":"doc",B='xmlns:x="urn:schemas-microsoft-com:office:'+t+'"',V="";e(T).filter(function(){return"none"!=e(this).data("tableexport-display")&&(e(this).is(":visible")||"always"==e(this).data("tableexport-display"))}).each(function(){var t=e(this);$=0;P=i(this);V+="<table><thead>";M=t.find("thead").first().find(k.theadSelector);M.each(function(){A="";n(this,"th,td",$,M.length,function(t,i,n){if(null!==t){var s="";A+="<th";for(var a in k.excelstyles)if(k.excelstyles.hasOwnProperty(a)){var r=e(t).css(k.excelstyles[a]);""!==r&&"0px none rgb(0, 0, 0)"!=r&&"rgba(0, 0, 0, 0)"!=r&&(s+=""===s?'style="':";",s+=k.excelstyles[a]+":"+r)}""!==s&&(A+=" "+s+'"');e(t).is("[colspan]")&&(A+=' colspan="'+e(t).attr("colspan")+'"');e(t).is("[rowspan]")&&(A+=' rowspan="'+e(t).attr("rowspan")+'"');A+=">"+d(t,i,n)+"</th>"}});0<A.length&&(V+="<tr>"+A+"</tr>");$++});V+="</thead><tbody>";t.find("tbody").each(function(){D.push.apply(D,e(this).find(k.tbodySelector))});k.tfootSelector.length&&D.push.apply(D,t.find("tfoot").find(k.tfootSelector));e(D).each(function(){var t=e(this);A="";n(this,"td,th",$,M.length+D.length,function(i,n,s){if(null!==i){var a="",r=e(i).data("tableexport-msonumberformat");"undefined"==typeof r&&"function"===typeof k.onMsoNumberFormat&&(r=k.onMsoNumberFormat(i,n,s));"undefined"!=typeof r&&""!==r&&(a="style=\"mso-number-format:'"+r+"'");for(var o in k.excelstyles)k.excelstyles.hasOwnProperty(o)&&(r=e(i).css(k.excelstyles[o]),""===r&&(r=t.css(k.excelstyles[o])),""!==r&&"0px none rgb(0, 0, 0)"!=r&&"rgba(0, 0, 0, 0)"!=r&&(a+=""===a?'style="':";",a+=k.excelstyles[o]+":"+r));A+="<td";""!==a&&(A+=" "+a+'"');e(i).is("[colspan]")&&(A+=' colspan="'+e(i).attr("colspan")+'"');e(i).is("[rowspan]")&&(A+=' rowspan="'+e(i).attr("rowspan")+'"');A+=">"+d(i,n,s).replace(/\n/g,"<br>")+"</td>"}});0<A.length&&(V+="<tr>"+A+"</tr>");$++});k.displayTableName&&(V+="<tr><td></td></tr><tr><td></td></tr><tr><td>"+d(e("<p>"+k.tableName+"</p>"))+"</td></tr>");V+="</tbody></table>";!0===k.consoleLog&&console.log(V)});B='<html xmlns:o="urn:schemas-microsoft-com:office:office" '+B+' xmlns="http://www.w3.org/TR/REC-html40">'+('<meta http-equiv="content-type" content="application/vnd.ms-'+t+'; charset=UTF-8">')+"<head>";"excel"===t&&(B+="<!--[if gte mso 9]>",B+="<xml>",B+="<x:ExcelWorkbook>",B+="<x:ExcelWorksheets>",B+="<x:ExcelWorksheet>",B+="<x:Name>",B+=k.worksheetName,B+="</x:Name>",B+="<x:WorksheetOptions>",B+="<x:DisplayGridlines/>",B+="</x:WorksheetOptions>",B+="</x:ExcelWorksheet>",B+="</x:ExcelWorksheets>",B+="</x:ExcelWorkbook>",B+="</xml>",B+="<![endif]-->");B+="<style>br {mso-data-placement:same-cell;}</style>";B+="</head>";B+="<body>";B+=V;B+="</body>";B+="</html>";!0===k.consoleLog&&console.log(B);if("string"===k.outputMode)return B;if("base64"===k.outputMode)return C(B);try{F=new Blob([B],{type:"application/vnd.ms-"+k.type}),saveAs(F,k.fileName+"."+z)}catch(e){_(k.fileName+"."+z,"data:application/vnd.ms-"+t+";base64,",B)}}else if("xlsx"==k.type){var q=[],W=[],$=0,D=e(T).find("thead").first().find(k.theadSelector);e(T).find("tbody").each(function(){D.push.apply(D,e(this).find(k.tbodySelector))});k.tfootSelector.length&&D.push.apply(D,e(T).find("tfoot").find(k.tfootSelector));e(D).each(function(){var e=[];n(this,"th,td",$,D.length,function(t,i,n){if("undefined"!==typeof t&&null!==t){var s=parseInt(t.getAttribute("colspan")),a=parseInt(t.getAttribute("rowspan"));t=d(t,i,n);""!==t&&t==+t&&(t=+t);W.forEach(function(t){if($>=t.s.r&&$<=t.e.r&&e.length>=t.s.c&&e.length<=t.e.c)for(var i=0;i<=t.e.c-t.s.c;++i)e.push(null)});if(a||s)s=s||1,W.push({s:{r:$,c:e.length},e:{r:$+(a||1)-1,c:e.length+s-1}});e.push(""!==t?t:null);if(s)for(a=0;a<s-1;++a)e.push(null)}});q.push(e);$++});t=new y;z=w(q);z["!merges"]=W;t.SheetNames.push(k.worksheetName);t.Sheets[k.worksheetName]=z;t=XLSX.write(t,{bookType:k.type,bookSST:!1,type:"binary"});try{F=new Blob([b(t)],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),saveAs(F,k.fileName+"."+k.type)}catch(e){_(k.fileName+"."+k.type,"data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8,",F)}}else if("png"==k.type)html2canvas(e(T)[0]).then(function(e){e=e.toDataURL();for(var t=atob(e.substring(22)),i=new ArrayBuffer(t.length),n=new Uint8Array(i),s=0;s<t.length;s++)n[s]=t.charCodeAt(s);!0===k.consoleLog&&console.log(t);if("string"===k.outputMode)return t;if("base64"===k.outputMode)return C(e);if("window"===k.outputMode)window.open(e);else try{F=new Blob([i],{type:"image/png"}),saveAs(F,k.fileName+".png")}catch(e){_(k.fileName+".png","data:image/png,",F)}});else if("pdf"==k.type)if(!0===k.pdfmake.enabled){var Y=[],G=[],$=0,M=e(this).find("thead").first().find(k.theadSelector);M.each(function(){var e=[];n(this,"th,td",$,M.length,function(t,i,n){e.push(d(t,i,n))});e.length&&G.push(e);for(var t=Y.length;t<e.length;t++)Y.push("*");$++});e(this).find("tbody").each(function(){D.push.apply(D,e(this).find(k.tbodySelector))});k.tfootSelector.length&&D.push.apply(D,e(this).find("tfoot").find(k.tfootSelector));e(D).each(function(){var e=[];n(this,"td,th",$,M.length+D.length,function(t,i,n){e.push(d(t,i,n))});e.length&&G.push(e);$++});t={pageOrientation:"landscape",content:[{table:{headerRows:M.length,widths:Y,body:G}}],defaultStyle:{font:"Roboto"}};pdfMake.fonts={Roboto:{normal:"Roboto-Regular.ttf",bold:"Roboto-Medium.ttf",italics:"Roboto-Italic.ttf",bolditalics:"Roboto-MediumItalic.ttf"}};pdfMake.createPdf(t).getBuffer(function(e){try{var t=new Blob([e],{type:"application/pdf"});saveAs(t,k.fileName+".pdf")}catch(t){_(k.fileName+".pdf","data:application/pdf;base64,",e)}})}else if(!1===k.jspdf.autotable){t={dim:{w:v(e(T).first().get(0),"width","mm"),h:v(e(T).first().get(0),"height","mm")},pagesplit:!1};var Z=new jsPDF(k.jspdf.orientation,k.jspdf.unit,k.jspdf.format);Z.addHTML(e(T).first(),k.jspdf.margins.left,k.jspdf.margins.top,t,function(){s(Z,!1)})}else{var K=k.jspdf.autotable.tableExport;if("string"===typeof k.jspdf.format&&"bestfit"===k.jspdf.format.toLowerCase()){var Q={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89]},J="",X="",ee=0;e(T).filter(":visible").each(function(){if("none"!=e(this).css("display")){var t=v(e(this).get(0),"width","pt");if(t>ee){t>Q.a0[0]&&(J="a0",X="l");for(var i in Q)Q.hasOwnProperty(i)&&Q[i][1]>t&&(J=i,X="l",Q[i][0]>t&&(X="p"));ee=t}}});k.jspdf.format=""===J?"a4":J;k.jspdf.orientation=""===X?"w":X}K.doc=new jsPDF(k.jspdf.orientation,k.jspdf.unit,k.jspdf.format);!0===K.outputImages&&(K.images={});"undefined"!=typeof K.images&&(e(T).filter(function(){return"none"!=e(this).data("tableexport-display")&&(e(this).is(":visible")||"always"==e(this).data("tableexport-display"))}).each(function(){var t=0;M=e(this).find("thead").find(k.theadSelector);e(this).find("tbody").each(function(){D.push.apply(D,e(this).find(k.tbodySelector))});k.tfootSelector.length&&D.push.apply(D,e(this).find("tfoot").find(k.tfootSelector));e(D).each(function(){n(this,"td,th",M.length+t,M.length+D.length,function(t,i,n){"undefined"!==typeof t&&null!==t&&(i=e(t).children(),"undefined"!=typeof i&&0<i.length&&r(t,i,K))});t++})}),M=[],D=[]);o(K,function(t){e(T).filter(function(){return"none"!=e(this).data("tableexport-display")&&(e(this).is(":visible")||"always"==e(this).data("tableexport-display"))}).each(function(){var t,s=0;P=i(this);K.columns=[];K.rows=[];K.rowoptions={};if("function"===typeof K.onTable&&!1===K.onTable(e(this),k))return!0;k.jspdf.autotable.tableExport=null;var r=e.extend(!0,{},k.jspdf.autotable);k.jspdf.autotable.tableExport=K;r.margin={};e.extend(!0,r.margin,k.jspdf.margins);r.tableExport=K;"function"!==typeof r.beforePageContent&&(r.beforePageContent=function(e){1==e.pageCount&&e.table.rows.concat(e.table.headerRow).forEach(function(t){0<t.height&&(t.height+=(2-1.15)/2*t.styles.fontSize,e.table.height+=(2-1.15)/2*t.styles.fontSize)})});"function"!==typeof r.createdHeaderCell&&(r.createdHeaderCell=function(t,i){t.styles=e.extend({},i.row.styles);if("undefined"!=typeof K.columns[i.column.dataKey]){var n=K.columns[i.column.dataKey];if("undefined"!=typeof n.rect){t.contentWidth=n.rect.width;if("undefined"==typeof K.heightRatio||0===K.heightRatio){var s=i.row.raw[i.column.dataKey].rowspan?i.row.raw[i.column.dataKey].rect.height/i.row.raw[i.column.dataKey].rowspan:i.row.raw[i.column.dataKey].rect.height;K.heightRatio=t.styles.rowHeight/s}s=i.row.raw[i.column.dataKey].rect.height*K.heightRatio;s>t.styles.rowHeight&&(t.styles.rowHeight=s)}"undefined"!=typeof n.style&&!0!==n.style.hidden&&(t.styles.halign=n.style.align,"inherit"===r.styles.fillColor&&(t.styles.fillColor=n.style.bcolor),"inherit"===r.styles.textColor&&(t.styles.textColor=n.style.color),"inherit"===r.styles.fontStyle&&(t.styles.fontStyle=n.style.fstyle))}});"function"!==typeof r.createdCell&&(r.createdCell=function(e,t){var i=K.rowoptions[t.row.index+":"+t.column.dataKey];"undefined"!=typeof i&&"undefined"!=typeof i.style&&!0!==i.style.hidden&&(e.styles.halign=i.style.align,"inherit"===r.styles.fillColor&&(e.styles.fillColor=i.style.bcolor),"inherit"===r.styles.textColor&&(e.styles.textColor=i.style.color),"inherit"===r.styles.fontStyle&&(e.styles.fontStyle=i.style.fstyle))});"function"!==typeof r.drawHeaderCell&&(r.drawHeaderCell=function(e,t){var i=K.columns[t.column.dataKey];return(!0!==i.style.hasOwnProperty("hidden")||!0!==i.style.hidden)&&0<=i.rowIndex?a(e,t,i):!1});"function"!==typeof r.drawCell&&(r.drawCell=function(e,t){var i=K.rowoptions[t.row.index+":"+t.column.dataKey];if(a(e,t,i))if(K.doc.rect(e.x,e.y,e.width,e.height,e.styles.fillStyle),"undefined"!=typeof i&&"undefined"!=typeof i.kids&&0<i.kids.length){var n=e.height/i.rect.height;if(n>K.dh||"undefined"==typeof K.dh)K.dh=n;K.dw=e.width/i.rect.width;n=e.textPos.y;l(e,i.kids,K);e.textPos.y=n;h(e,i.kids,K)}else h(e,{},K);return!1});K.headerrows=[];M=e(this).find("thead").find(k.theadSelector);M.each(function(){t=0;K.headerrows[s]=[];n(this,"th,td",s,M.length,function(e,i,n){var a=m(e);a.title=d(e,i,n);a.key=t++;a.rowIndex=s;K.headerrows[s].push(a)});s++});if(0<s)for(var o=s-1;0<=o;)e.each(K.headerrows[o],function(){var e=this;0<o&&null===this.rect&&(e=K.headerrows[o-1][this.key]);null!==e&&0<=e.rowIndex&&(!0!==e.style.hasOwnProperty("hidden")||!0!==e.style.hidden)&&K.columns.push(e)}),o=0<K.columns.length?-1:o-1;var c=0;D=[];e(this).find("tbody").each(function(){D.push.apply(D,e(this).find(k.tbodySelector))});k.tfootSelector.length&&D.push.apply(D,e(this).find("tfoot").find(k.tfootSelector));e(D).each(function(){var i=[];t=0;n(this,"td,th",s,M.length+D.length,function(n,s,a){if("undefined"===typeof K.columns[t]){var r={title:"",key:t,style:{hidden:!0}};K.columns.push(r)}"undefined"!==typeof n&&null!==n?(r=m(n),r.kids=e(n).children()):(r=e.extend(!0,{},K.rowoptions[c+":"+(t-1)]),r.colspan=-1);K.rowoptions[c+":"+t++]=r;i.push(d(n,s,a))});i.length&&(K.rows.push(i),c++);s++});if("function"===typeof K.onBeforeAutotable)K.onBeforeAutotable(e(this),K.columns,K.rows,r);K.doc.autoTable(K.columns,K.rows,r);if("function"===typeof K.onAfterAutotable)K.onAfterAutotable(e(this),r);k.jspdf.autotable.startY=K.doc.autoTableEndPosY()+r.margin.top});s(K.doc,"undefined"!=typeof K.images&&!1===jQuery.isEmptyObject(K.images));"undefined"!=typeof K.headerrows&&(K.headerrows.length=0);"undefined"!=typeof K.columns&&(K.columns.length=0);"undefined"!=typeof K.rows&&(K.rows.length=0);delete K.doc;K.doc=null})}return this}})})(jQuery);(function(e){var t=e(document);var i=e("head");var n=null;var s={};var a=0;var r="id";var o="px";var l="JColResizer";var h="JCLRFlex";var c=parseInt;var u=Math;var d=navigator.userAgent.indexOf("Trident/4.0")>0;var f;var p="";try{f=sessionStorage}catch(e){}i.append("<style type='text/css'>  .JColResizer{table-layout:fixed;} .JColResizer > tbody > tr > td, .JColResizer > tbody > tr > th{overflow:hidden}  .JPadding > tbody > tr > td, .JPadding > tbody > tr > th{padding-left:0!important; padding-right:0!important;} .JCLRgrips{ height:0px; position:relative;} .JCLRgrip{margin-left:-5px; position:absolute; z-index:5; } .JCLRgrip .JColResizer{position:absolute;background-color:red;filter:alpha(opacity=1);opacity:0;width:10px;height:100%;cursor: col-resize;top:0px} .JCLRLastGrip{position:absolute; width:1px; } .JCLRgripDrag{ border-left:1px dotted black;\t} .JCLRFlex{width:auto!important;} .JCLRgrip.JCLRdisabledGrip .JColResizer{cursor:default; display:none;}</style>");var m=function(t,n){var o=e(t);o.opt=n;o.mode=n.resizeMode;o.dc=o.opt.disabledColumns;if(o.opt.removePadding)o.addClass("JPadding");if(o.opt.disable)return g(o);var h=o.id=o.attr(r)||l+a++;o.p=o.opt.postbackSafe;if(!o.is("table")||s[h]&&!o.opt.partialRefresh)return;if(o.opt.hoverCursor!=="col-resize")i.append("<style type='text/css'>.JCLRgrip .JColResizer:hover{cursor:"+o.opt.hoverCursor+"!important}</style>");o.addClass(l).attr(r,h).before('<div class="JCLRgrips"/>');o.g=[];o.c=[];o.w=o.width();o.gc=o.prev();o.f=o.opt.fixed;if(n.marginLeft)o.gc.css("marginLeft",n.marginLeft);if(n.marginRight)o.gc.css("marginRight",n.marginRight);o.cs=c(d?t.cellSpacing||t.currentStyle.borderSpacing:o.css("border-spacing"))||2;o.b=c(d?t.border||t.currentStyle.borderLeftWidth:o.css("border-left-width"))||1;s[h]=o;v(o)};var g=function(e){var t=e.attr(r),e=s[t];if(!e||!e.is("table"))return;e.removeClass(l+" "+h).gc.remove();delete s[t]};var v=function(t){var i=t.find(">thead>tr:first>th,>thead>tr:first>td");
if(!i.length)i=t.find(">tbody>tr:first>th,>tr:first>th,>tbody>tr:first>td, >tr:first>td");i=i.filter(":visible");t.cg=t.find("col");t.ln=i.length;if(t.p&&f&&f[t.id])y(t,i);i.each(function(i){var n=e(this);var s=t.dc.indexOf(i)!=-1;var a=e(t.gc.append('<div class="JCLRgrip"></div>')[0].lastChild);a.append(s?"":t.opt.gripInnerHtml).append('<div class="'+l+'"></div>');if(i==t.ln-1){a.addClass("JCLRLastGrip");if(t.f)a.html("")}a.bind("touchstart mousedown",k);if(!s){a.removeClass("JCLRdisabledGrip").bind("touchstart mousedown",k)}else{a.addClass("JCLRdisabledGrip")}a.t=t;a.i=i;a.c=n;n.w=n.width();t.g.push(a);t.c.push(n);n.width(n.w).removeAttr("width");a.data(l,{i:i,t:t.attr(r),last:i==t.ln-1})});t.cg.removeAttr("width");t.find("td, th").not(i).not("table th, table td").each(function(){e(this).removeAttr("width")});if(!t.f){t.removeAttr("width").addClass(h)}b(t)};var y=function(e,t){var i,n=0,s=0,a=[],r;if(t){e.cg.removeAttr("width");if(e.opt.flush){f[e.id]="";return}i=f[e.id].split(";");r=i[e.ln+1];if(!e.f&&r){e.width(r*=1);if(e.opt.overflow){e.css("min-width",r+o);e.w=r}}for(;s<e.ln;s++){a.push(100*i[s]/i[e.ln]+"%");t.eq(s).css("width",a[s])}for(s=0;s<e.ln;s++)e.cg.eq(s).css("width",a[s])}else{f[e.id]="";for(;s<e.c.length;s++){i=e.c[s].width();f[e.id]+=i+";";n+=i}f[e.id]+=n;if(!e.f)f[e.id]+=";"+e.width()}};var b=function(e){e.gc.width(e.w);for(var t=0;t<e.ln;t++){var i=e.c[t];e.g[t].css({left:i.offset().left-e.offset().left+i.outerWidth(false)+e.cs/2+o,height:e.opt.headerOnly?e.c[0].outerHeight(false):e.outerHeight(false)})}};var w=function(e,t,i){var s=n.x-n.l,a=e.c[t],r=e.c[t+1];var l=a.w+s;var h=r.w-s;a.width(l+o);e.cg.eq(t).width(l+o);if(e.f){r.width(h+o);e.cg.eq(t+1).width(h+o)}else if(e.opt.overflow){e.css("min-width",e.w+s)}if(i){a.w=l;r.w=e.f?h:r.w}};var x=function(t){var i=e.map(t.c,function(e){return e.width()});t.width(t.w=t.width()).removeClass(h);e.each(t.c,function(e,t){t.width(i[e]).w=i[e]});t.addClass(h)};var _=function(e){if(!n)return;var t=n.t;var i=e.originalEvent.touches;var s=i?i[0].pageX:e.pageX;var a=s-n.ox+n.l;var r=t.opt.minWidth,l=n.i;var h=t.cs*1.5+r+t.b;var c=l==t.ln-1;var d=l?t.g[l-1].position().left+t.cs+r:h;var f=t.f?l==t.ln-1?t.w-h:t.g[l+1].position().left-t.cs-r:Infinity;a=u.max(d,u.min(f,a));n.x=a;n.css("left",a+o);if(c){var p=t.c[n.i];n.w=p.w+a-n.l}if(t.opt.liveDrag){if(c){p.width(n.w);if(!t.f&&t.opt.overflow){t.css("min-width",t.w+a-n.l)}else{t.w=t.width()}}else{w(t,l)}b(t);var m=t.opt.onDrag;if(m){e.currentTarget=t[0];m(e)}}return false};var C=function(i){t.unbind("touchend."+l+" mouseup."+l).unbind("touchmove."+l+" mousemove."+l);e("head :last-child").remove();if(!n)return;n.removeClass(n.t.opt.draggingClass);if(!(n.x-n.l==0)){var s=n.t;var a=s.opt.onResize;var r=n.i;var o=r==s.ln-1;var h=s.g[r].c;if(o){h.width(n.w);h.w=n.w}else{w(s,r,true)}if(!s.f)x(s);b(s);if(a){i.currentTarget=s[0];a(i)}if(s.p&&f)y(s)}n=null};var k=function(a){var r=e(this).data(l);var o=s[r.t],h=o.g[r.i];var c=a.originalEvent.touches;h.ox=c?c[0].pageX:a.pageX;h.l=h.position().left;h.x=h.l;t.bind("touchmove."+l+" mousemove."+l,_).bind("touchend."+l+" mouseup."+l,C);i.append("<style type='text/css'>*{cursor:"+o.opt.dragCursor+"!important}</style>");h.addClass(o.opt.draggingClass);n=h;if(o.c[r.i].l)for(var u=0,d;u<o.ln;u++){d=o.c[u];d.l=false;d.w=d.width()}return false};var T=function(){for(var e in s){if(s.hasOwnProperty(e)){e=s[e];var t,i=0;e.removeClass(l);if(e.f){e.w=e.width();for(t=0;t<e.ln;t++)i+=e.c[t].w;for(t=0;t<e.ln;t++)e.c[t].css("width",u.round(1e3*e.c[t].w/i)/10+"%").l=true}else{x(e);if(e.mode=="flex"&&e.p&&f){y(e)}}b(e.addClass(l))}}};e(window).bind("resize."+l,T);e.fn.extend({colResizable:function(t){var i={resizeMode:"fit",draggingClass:"JCLRgripDrag",gripInnerHtml:"",liveDrag:false,minWidth:15,headerOnly:false,hoverCursor:"col-resize",dragCursor:"col-resize",postbackSafe:false,flush:false,marginLeft:null,marginRight:null,disable:false,partialRefresh:false,disabledColumns:[],removePadding:true,onDrag:null,onResize:null};var t=e.extend(i,t);t.fixed=true;t.overflow=false;switch(t.resizeMode){case"flex":t.fixed=false;break;case"overflow":t.fixed=false;t.overflow=true;break}return this.each(function(){m(this,t)})}})})(jQuery);(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define(t):e.moment=t()})(this,function(){"use strict";var e;function t(){return e.apply(null,arguments)}function i(t){e=t}function n(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function s(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function a(e){var t;for(t in e){return false}return true}function r(e){return e===void 0}function o(e){return typeof e==="number"||Object.prototype.toString.call(e)==="[object Number]"}function l(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function h(e,t){var i=[],n;for(n=0;n<e.length;++n){i.push(t(e[n],n))}return i}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var i in t){if(c(t,i)){e[i]=t[i]}}if(c(t,"toString")){e.toString=t.toString}if(c(t,"valueOf")){e.valueOf=t.valueOf}return e}function d(e,t,i,n){return Ui(e,t,i,n,true).utc()}function f(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null,rfc2822:false,weekdayMismatch:false}}function p(e){if(e._pf==null){e._pf=f()}return e._pf}var m;if(Array.prototype.some){m=Array.prototype.some}else{m=function(e){var t=Object(this);var i=t.length>>>0;for(var n=0;n<i;n++){if(n in t&&e.call(this,t[n],n,t)){return true}}return false}}var g=m;function v(e){if(e._isValid==null){var t=p(e);var i=g.call(t.parsedDateParts,function(e){return e!=null});var n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i);if(e._strict){n=n&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined}if(Object.isFrozen==null||!Object.isFrozen(e)){e._isValid=n}else{return n}}return e._isValid}function y(e){var t=d(NaN);if(e!=null){u(p(t),e)}else{p(t).userInvalidated=true}return t}var b=t.momentProperties=[];function w(e,t){var i,n,s;if(!r(t._isAMomentObject)){e._isAMomentObject=t._isAMomentObject}if(!r(t._i)){e._i=t._i}if(!r(t._f)){e._f=t._f}if(!r(t._l)){e._l=t._l}if(!r(t._strict)){e._strict=t._strict}if(!r(t._tzm)){e._tzm=t._tzm}if(!r(t._isUTC)){e._isUTC=t._isUTC}if(!r(t._offset)){e._offset=t._offset}if(!r(t._pf)){e._pf=p(t)}if(!r(t._locale)){e._locale=t._locale}if(b.length>0){for(i=0;i<b.length;i++){n=b[i];s=t[n];if(!r(s)){e[n]=s}}}return e}var x=false;function _(e){w(this,e);this._d=new Date(e._d!=null?e._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN)}if(x===false){x=true;t.updateOffset(this);x=false}}function C(e){return e instanceof _||e!=null&&e._isAMomentObject!=null}function k(e){if(e<0){return Math.ceil(e)||0}else{return Math.floor(e)}}function T(e){var t=+e,i=0;if(t!==0&&isFinite(t)){i=k(t)}return i}function S(e,t,i){var n=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),a=0,r;for(r=0;r<n;r++){if(i&&e[r]!==t[r]||!i&&T(e[r])!==T(t[r])){a++}}return a+s}function M(e){if(t.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+e)}}function D(e,i){var n=true;return u(function(){if(t.deprecationHandler!=null){t.deprecationHandler(null,e)}if(n){var s=[];var a;for(var r=0;r<arguments.length;r++){a="";if(typeof arguments[r]==="object"){a+="\n["+r+"] ";for(var o in arguments[0]){a+=o+": "+arguments[0][o]+", "}a=a.slice(0,-2)}else{a=arguments[r]}s.push(a)}M(e+"\nArguments: "+Array.prototype.slice.call(s).join("")+"\n"+(new Error).stack);n=false}return i.apply(this,arguments)},i)}var $={};function E(e,i){if(t.deprecationHandler!=null){t.deprecationHandler(e,i)}if(!$[e]){M(i);$[e]=true}}t.suppressDeprecationWarnings=false;t.deprecationHandler=null;function A(e){return e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function P(e){var t,i;for(i in e){t=e[i];if(A(t)){this[i]=t}else{this["_"+i]=t}}this._config=e;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function I(e,t){var i=u({},e),n;for(n in t){if(c(t,n)){if(s(e[n])&&s(t[n])){i[n]={};u(i[n],e[n]);u(i[n],t[n])}else if(t[n]!=null){i[n]=t[n]}else{delete i[n]}}}for(n in e){if(c(e,n)&&!c(t,n)&&s(e[n])){i[n]=u({},i[n])}}return i}function N(e){if(e!=null){this.set(e)}}var O;if(Object.keys){O=Object.keys}else{O=function(e){var t,i=[];for(t in e){if(c(e,t)){i.push(t)}}return i}}var F=O;var R={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function L(e,t,i){var n=this._calendar[e]||this._calendar["sameElse"];return A(n)?n.call(t,i):n}var j={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function U(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];if(t||!i){return t}this._longDateFormat[e]=i.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)});return this._longDateFormat[e]}var H="Invalid date";function z(){return this._invalidDate}var B="%d";var V=/\d{1,2}/;function q(e){return this._ordinal.replace("%d",e)}var W={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Y(e,t,i,n){var s=this._relativeTime[i];return A(s)?s(e,t,i,n):s.replace(/%d/i,e)}function G(e,t){var i=this._relativeTime[e>0?"future":"past"];return A(i)?i(t):i.replace(/%s/i,t)}var Z={};function K(e,t){var i=e.toLowerCase();Z[i]=Z[i+"s"]=Z[t]=e}function Q(e){return typeof e==="string"?Z[e]||Z[e.toLowerCase()]:undefined}function J(e){var t={},i,n;for(n in e){if(c(e,n)){i=Q(n);if(i){t[i]=e[n]}}}return t}var X={};function ee(e,t){X[e]=t}function te(e){var t=[];for(var i in e){t.push({unit:i,priority:X[i]})}t.sort(function(e,t){return e.priority-t.priority});return t}function ie(e,i){return function(n){if(n!=null){se(this,e,n);t.updateOffset(this,i);return this}else{return ne(this,e)}}}function ne(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function se(e,t,i){if(e.isValid()){e._d["set"+(e._isUTC?"UTC":"")+t](i)}}function ae(e){e=Q(e);if(A(this[e])){return this[e]()}return this}function re(e,t){if(typeof e==="object"){e=J(e);var i=te(e);for(var n=0;n<i.length;n++){this[i[n].unit](e[i[n].unit])}}else{e=Q(e);if(A(this[e])){return this[e](t)}}return this}function oe(e,t,i){var n=""+Math.abs(e),s=t-n.length,a=e>=0;return(a?i?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+n}var le=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var he=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var ce={};var ue={};function de(e,t,i,n){var s=n;if(typeof n==="string"){s=function(){return this[n]()}}if(e){ue[e]=s}if(t){ue[t[0]]=function(){return oe(s.apply(this,arguments),t[1],t[2])}}if(i){ue[i]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)}}}function fe(e){if(e.match(/\[[\s\S]/)){return e.replace(/^\[|\]$/g,"")}return e.replace(/\\/g,"")}function pe(e){var t=e.match(le),i,n;for(i=0,n=t.length;i<n;i++){if(ue[t[i]]){t[i]=ue[t[i]]}else{t[i]=fe(t[i])}}return function(i){var s="",a;for(a=0;a<n;a++){s+=A(t[a])?t[a].call(i,e):t[a]}return s}}function me(e,t){if(!e.isValid()){return e.localeData().invalidDate()}t=ge(t,e.localeData());ce[t]=ce[t]||pe(t);return ce[t](e)}function ge(e,t){var i=5;function n(e){return t.longDateFormat(e)||e}he.lastIndex=0;while(i>=0&&he.test(e)){e=e.replace(he,n);he.lastIndex=0;i-=1}return e}var ve=/\d/;var ye=/\d\d/;var be=/\d{3}/;var we=/\d{4}/;var xe=/[+-]?\d{6}/;var _e=/\d\d?/;var Ce=/\d\d\d\d?/;var ke=/\d\d\d\d\d\d?/;var Te=/\d{1,3}/;var Se=/\d{1,4}/;var Me=/[+-]?\d{1,6}/;var De=/\d+/;var $e=/[+-]?\d+/;var Ee=/Z|[+-]\d\d:?\d\d/gi;var Ae=/Z|[+-]\d\d(?::?\d\d)?/gi;var Pe=/[+-]?\d+(\.\d{1,3})?/;var Ie=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var Ne={};function Oe(e,t,i){Ne[e]=A(t)?t:function(e,n){return e&&i?i:t}}function Fe(e,t){if(!c(Ne,e)){return new RegExp(Re(e))}return Ne[e](t._strict,t._locale)}function Re(e){return Le(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,s){return t||i||n||s}))}function Le(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var je={};function Ue(e,t){var i,n=t;if(typeof e==="string"){e=[e]}if(o(t)){n=function(e,i){i[t]=T(e)}}for(i=0;i<e.length;i++){je[e[i]]=n}}function He(e,t){Ue(e,function(e,i,n,s){n._w=n._w||{};t(e,n._w,n,s)})}function ze(e,t,i){if(t!=null&&c(je,e)){je[e](t,i._a,i,e)}}var Be=0;var Ve=1;var qe=2;var We=3;var Ye=4;var Ge=5;var Ze=6;var Ke=7;var Qe=8;var Je;if(Array.prototype.indexOf){Je=Array.prototype.indexOf}else{Je=function(e){var t;for(t=0;t<this.length;++t){if(this[t]===e){return t}}return-1}}var Xe=Je;function et(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}de("M",["MM",2],"Mo",function(){return this.month()+1});de("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});de("MMMM",0,0,function(e){return this.localeData().months(this,e)});K("month","M");ee("month",8);Oe("M",_e);Oe("MM",_e,ye);Oe("MMM",function(e,t){return t.monthsShortRegex(e)});Oe("MMMM",function(e,t){return t.monthsRegex(e)});Ue(["M","MM"],function(e,t){t[Ve]=T(e)-1});Ue(["MMM","MMMM"],function(e,t,i,n){var s=i._locale.monthsParse(e,n,i._strict);if(s!=null){t[Ve]=s}else{p(i).invalidMonth=e}});var tt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;var it="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function nt(e,t){if(!e){return n(this._months)?this._months:this._months["standalone"]}return n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||tt).test(t)?"format":"standalone"][e.month()]}var st="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function at(e,t){if(!e){return n(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"]}return n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[tt.test(t)?"format":"standalone"][e.month()]}function rt(e,t,i){var n,s,a,r=e.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(n=0;n<12;++n){a=d([2e3,n]);this._shortMonthsParse[n]=this.monthsShort(a,"").toLocaleLowerCase();this._longMonthsParse[n]=this.months(a,"").toLocaleLowerCase()}}if(i){if(t==="MMM"){s=Xe.call(this._shortMonthsParse,r);return s!==-1?s:null}else{s=Xe.call(this._longMonthsParse,r);return s!==-1?s:null}}else{if(t==="MMM"){s=Xe.call(this._shortMonthsParse,r);if(s!==-1){return s}s=Xe.call(this._longMonthsParse,r);return s!==-1?s:null}else{s=Xe.call(this._longMonthsParse,r);if(s!==-1){return s}s=Xe.call(this._shortMonthsParse,r);return s!==-1?s:null}}}function ot(e,t,i){var n,s,a;if(this._monthsParseExact){return rt.call(this,e,t,i)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(n=0;n<12;n++){s=d([2e3,n]);if(i&&!this._longMonthsParse[n]){this._longMonthsParse[n]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i");this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")}if(!i&&!this._monthsParse[n]){a="^"+this.months(s,"")+"|^"+this.monthsShort(s,"");this._monthsParse[n]=new RegExp(a.replace(".",""),"i")}if(i&&t==="MMMM"&&this._longMonthsParse[n].test(e)){return n}else if(i&&t==="MMM"&&this._shortMonthsParse[n].test(e)){return n}else if(!i&&this._monthsParse[n].test(e)){return n}}}function lt(e,t){var i;if(!e.isValid()){return e}if(typeof t==="string"){if(/^\d+$/.test(t)){t=T(t)}else{t=e.localeData().monthsParse(t);if(!o(t)){return e}}}i=Math.min(e.date(),et(e.year(),t));e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i);return e}function ht(e){if(e!=null){lt(this,e);t.updateOffset(this,true);return this}else{return ne(this,"Month")}}function ct(){return et(this.year(),this.month())}var ut=Ie;function dt(e){if(this._monthsParseExact){if(!c(this,"_monthsRegex")){mt.call(this)}if(e){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!c(this,"_monthsShortRegex")){this._monthsShortRegex=ut}return this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}}var ft=Ie;function pt(e){if(this._monthsParseExact){if(!c(this,"_monthsRegex")){mt.call(this)}if(e){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!c(this,"_monthsRegex")){this._monthsRegex=ft}return this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}}function mt(){function e(e,t){return t.length-e.length}var t=[],i=[],n=[],s,a;for(s=0;s<12;s++){a=d([2e3,s]);t.push(this.monthsShort(a,""));i.push(this.months(a,""));n.push(this.months(a,""));n.push(this.monthsShort(a,""))}t.sort(e);i.sort(e);n.sort(e);for(s=0;s<12;s++){t[s]=Le(t[s]);i[s]=Le(i[s])}for(s=0;s<24;s++){n[s]=Le(n[s])}this._monthsRegex=new RegExp("^("+n.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}de("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e});de(0,["YY",2],0,function(){return this.year()%100});de(0,["YYYY",4],0,"year");de(0,["YYYYY",5],0,"year");de(0,["YYYYYY",6,true],0,"year");K("year","y");ee("year",1);Oe("Y",$e);Oe("YY",_e,ye);Oe("YYYY",Se,we);Oe("YYYYY",Me,xe);Oe("YYYYYY",Me,xe);Ue(["YYYYY","YYYYYY"],Be);Ue("YYYY",function(e,i){i[Be]=e.length===2?t.parseTwoDigitYear(e):T(e)});Ue("YY",function(e,i){i[Be]=t.parseTwoDigitYear(e)});Ue("Y",function(e,t){t[Be]=parseInt(e,10)});function gt(e){return vt(e)?366:365}function vt(e){return e%4===0&&e%100!==0||e%400===0}t.parseTwoDigitYear=function(e){return T(e)+(T(e)>68?1900:2e3)};var yt=ie("FullYear",true);function bt(){return vt(this.year())}function wt(e,t,i,n,s,a,r){var o=new Date(e,t,i,n,s,a,r);if(e<100&&e>=0&&isFinite(o.getFullYear())){o.setFullYear(e)}return o}function xt(e){var t=new Date(Date.UTC.apply(null,arguments));if(e<100&&e>=0&&isFinite(t.getUTCFullYear())){t.setUTCFullYear(e)}return t}function _t(e,t,i){var n=7+t-i,s=(7+xt(e,0,n).getUTCDay()-t)%7;return-s+n-1}function Ct(e,t,i,n,s){var a=(7+i-n)%7,r=_t(e,n,s),o=1+7*(t-1)+a+r,l,h;if(o<=0){l=e-1;h=gt(l)+o}else if(o>gt(e)){l=e+1;h=o-gt(e)}else{l=e;h=o}return{year:l,dayOfYear:h}}function kt(e,t,i){var n=_t(e.year(),t,i),s=Math.floor((e.dayOfYear()-n-1)/7)+1,a,r;if(s<1){r=e.year()-1;a=s+Tt(r,t,i)}else if(s>Tt(e.year(),t,i)){a=s-Tt(e.year(),t,i);r=e.year()+1}else{r=e.year();a=s}return{week:a,year:r}}function Tt(e,t,i){var n=_t(e,t,i),s=_t(e+1,t,i);return(gt(e)-n+s)/7}de("w",["ww",2],"wo","week");de("W",["WW",2],"Wo","isoWeek");K("week","w");K("isoWeek","W");ee("week",5);ee("isoWeek",5);Oe("w",_e);Oe("ww",_e,ye);Oe("W",_e);Oe("WW",_e,ye);He(["w","ww","W","WW"],function(e,t,i,n){t[n.substr(0,1)]=T(e)});function St(e){return kt(e,this._week.dow,this._week.doy).week}var Mt={dow:0,doy:6};function Dt(){return this._week.dow}function $t(){return this._week.doy}function Et(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function At(e){var t=kt(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}de("d",0,"do","day");de("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});de("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});de("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});de("e",0,0,"weekday");de("E",0,0,"isoWeekday");K("day","d");K("weekday","e");K("isoWeekday","E");ee("day",11);ee("weekday",11);ee("isoWeekday",11);Oe("d",_e);Oe("e",_e);Oe("E",_e);Oe("dd",function(e,t){return t.weekdaysMinRegex(e)});Oe("ddd",function(e,t){return t.weekdaysShortRegex(e)});Oe("dddd",function(e,t){return t.weekdaysRegex(e)});He(["dd","ddd","dddd"],function(e,t,i,n){var s=i._locale.weekdaysParse(e,n,i._strict);if(s!=null){t.d=s}else{p(i).invalidWeekday=e}});He(["d","e","E"],function(e,t,i,n){t[n]=T(e)});function Pt(e,t){if(typeof e!=="string"){return e}if(!isNaN(e)){return parseInt(e,10)}e=t.weekdaysParse(e);if(typeof e==="number"){return e}return null}function It(e,t){if(typeof e==="string"){return t.weekdaysParse(e)%7||7}return isNaN(e)?null:e}var Nt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function Ot(e,t){if(!e){return n(this._weekdays)?this._weekdays:this._weekdays["standalone"]}return n(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}var Ft="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function Rt(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}var Lt="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function jt(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Ut(e,t,i){var n,s,a,r=e.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(n=0;n<7;++n){a=d([2e3,1]).day(n);this._minWeekdaysParse[n]=this.weekdaysMin(a,"").toLocaleLowerCase();this._shortWeekdaysParse[n]=this.weekdaysShort(a,"").toLocaleLowerCase();this._weekdaysParse[n]=this.weekdays(a,"").toLocaleLowerCase()}}if(i){if(t==="dddd"){s=Xe.call(this._weekdaysParse,r);return s!==-1?s:null}else if(t==="ddd"){s=Xe.call(this._shortWeekdaysParse,r);return s!==-1?s:null}else{s=Xe.call(this._minWeekdaysParse,r);return s!==-1?s:null}}else{if(t==="dddd"){s=Xe.call(this._weekdaysParse,r);if(s!==-1){return s}s=Xe.call(this._shortWeekdaysParse,r);if(s!==-1){return s}s=Xe.call(this._minWeekdaysParse,r);return s!==-1?s:null}else if(t==="ddd"){s=Xe.call(this._shortWeekdaysParse,r);if(s!==-1){return s}s=Xe.call(this._weekdaysParse,r);if(s!==-1){return s}s=Xe.call(this._minWeekdaysParse,r);return s!==-1?s:null}else{s=Xe.call(this._minWeekdaysParse,r);if(s!==-1){return s}s=Xe.call(this._weekdaysParse,r);if(s!==-1){return s}s=Xe.call(this._shortWeekdaysParse,r);return s!==-1?s:null}}}function Ht(e,t,i){var n,s,a;if(this._weekdaysParseExact){return Ut.call(this,e,t,i)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(n=0;n<7;n++){s=d([2e3,1]).day(n);if(i&&!this._fullWeekdaysParse[n]){this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(s,"").replace(".",".?")+"$","i");this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(s,"").replace(".",".?")+"$","i");this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(s,"").replace(".",".?")+"$","i")}if(!this._weekdaysParse[n]){a="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,"");this._weekdaysParse[n]=new RegExp(a.replace(".",""),"i")}if(i&&t==="dddd"&&this._fullWeekdaysParse[n].test(e)){return n}else if(i&&t==="ddd"&&this._shortWeekdaysParse[n].test(e)){return n}else if(i&&t==="dd"&&this._minWeekdaysParse[n].test(e)){return n}else if(!i&&this._weekdaysParse[n].test(e)){return n}}}function zt(e){if(!this.isValid()){return e!=null?this:NaN}var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(e!=null){e=Pt(e,this.localeData());return this.add(e-t,"d")}else{return t}}function Bt(e){if(!this.isValid()){return e!=null?this:NaN}var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Vt(e){if(!this.isValid()){return e!=null?this:NaN}if(e!=null){var t=It(e,this.localeData());return this.day(this.day()%7?t:t-7)}else{return this.day()||7}}var qt=Ie;function Wt(e){if(this._weekdaysParseExact){if(!c(this,"_weekdaysRegex")){Qt.call(this)}if(e){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!c(this,"_weekdaysRegex")){this._weekdaysRegex=qt}return this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}}var Yt=Ie;function Gt(e){if(this._weekdaysParseExact){if(!c(this,"_weekdaysRegex")){Qt.call(this)}if(e){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!c(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=Yt}return this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}var Zt=Ie;function Kt(e){if(this._weekdaysParseExact){if(!c(this,"_weekdaysRegex")){Qt.call(this)}if(e){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!c(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=Zt}return this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function Qt(){function e(e,t){return t.length-e.length}var t=[],i=[],n=[],s=[],a,r,o,l,h;for(a=0;a<7;a++){r=d([2e3,1]).day(a);o=this.weekdaysMin(r,"");l=this.weekdaysShort(r,"");h=this.weekdays(r,"");t.push(o);i.push(l);n.push(h);s.push(o);s.push(l);s.push(h)}t.sort(e);i.sort(e);n.sort(e);s.sort(e);for(a=0;a<7;a++){i[a]=Le(i[a]);n[a]=Le(n[a]);s[a]=Le(s[a])}this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+i.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Jt(){return this.hours()%12||12}function Xt(){return this.hours()||24}de("H",["HH",2],0,"hour");de("h",["hh",2],0,Jt);de("k",["kk",2],0,Xt);de("hmm",0,0,function(){return""+Jt.apply(this)+oe(this.minutes(),2)});de("hmmss",0,0,function(){return""+Jt.apply(this)+oe(this.minutes(),2)+oe(this.seconds(),2)});de("Hmm",0,0,function(){return""+this.hours()+oe(this.minutes(),2)});de("Hmmss",0,0,function(){return""+this.hours()+oe(this.minutes(),2)+oe(this.seconds(),2)});function ei(e,t){de(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}ei("a",true);ei("A",false);K("hour","h");ee("hour",13);function ti(e,t){return t._meridiemParse}Oe("a",ti);Oe("A",ti);Oe("H",_e);Oe("h",_e);Oe("k",_e);Oe("HH",_e,ye);Oe("hh",_e,ye);Oe("kk",_e,ye);Oe("hmm",Ce);Oe("hmmss",ke);Oe("Hmm",Ce);Oe("Hmmss",ke);Ue(["H","HH"],We);Ue(["k","kk"],function(e,t,i){var n=T(e);t[We]=n===24?0:n});Ue(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e);i._meridiem=e});Ue(["h","hh"],function(e,t,i){t[We]=T(e);p(i).bigHour=true});Ue("hmm",function(e,t,i){var n=e.length-2;t[We]=T(e.substr(0,n));t[Ye]=T(e.substr(n));p(i).bigHour=true});Ue("hmmss",function(e,t,i){var n=e.length-4;var s=e.length-2;t[We]=T(e.substr(0,n));t[Ye]=T(e.substr(n,2));t[Ge]=T(e.substr(s));p(i).bigHour=true});Ue("Hmm",function(e,t,i){var n=e.length-2;t[We]=T(e.substr(0,n));t[Ye]=T(e.substr(n))});Ue("Hmmss",function(e,t,i){var n=e.length-4;var s=e.length-2;t[We]=T(e.substr(0,n));t[Ye]=T(e.substr(n,2));t[Ge]=T(e.substr(s))});function ii(e){return(e+"").toLowerCase().charAt(0)==="p"}var ni=/[ap]\.?m?\.?/i;function si(e,t,i){if(e>11){return i?"pm":"PM"}else{return i?"am":"AM"}}var ai=ie("Hours",true);var ri={calendar:R,longDateFormat:j,invalidDate:H,ordinal:B,dayOfMonthOrdinalParse:V,relativeTime:W,months:it,monthsShort:st,week:Mt,weekdays:Nt,weekdaysMin:Lt,weekdaysShort:Ft,meridiemParse:ni};var oi={};var li={};var hi;function ci(e){return e?e.toLowerCase().replace("_","-"):e}function ui(e){var t=0,i,n,s,a;while(t<e.length){a=ci(e[t]).split("-");i=a.length;n=ci(e[t+1]);n=n?n.split("-"):null;while(i>0){s=di(a.slice(0,i).join("-"));if(s){return s}if(n&&n.length>=i&&S(a,n,true)>=i-1){break}i--}t++}return null}function di(e){var t=null;if(!oi[e]&&typeof module!=="undefined"&&module&&module.exports){try{t=hi._abbr;require("./locale/"+e);fi(t)}catch(e){}}return oi[e]}function fi(e,t){var i;if(e){if(r(t)){i=gi(e)}else{i=pi(e,t)}if(i){hi=i}}return hi._abbr}function pi(e,t){if(t!==null){var i=ri;t.abbr=e;if(oi[e]!=null){E("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");i=oi[e]._config}else if(t.parentLocale!=null){if(oi[t.parentLocale]!=null){i=oi[t.parentLocale]._config}else{if(!li[t.parentLocale]){li[t.parentLocale]=[]}li[t.parentLocale].push({name:e,config:t});return null}}oi[e]=new N(I(i,t));if(li[e]){li[e].forEach(function(e){pi(e.name,e.config)})}fi(e);return oi[e]}else{delete oi[e];return null}}function mi(e,t){if(t!=null){var i,n=ri;if(oi[e]!=null){n=oi[e]._config}t=I(n,t);i=new N(t);i.parentLocale=oi[e];oi[e]=i;fi(e)}else{if(oi[e]!=null){if(oi[e].parentLocale!=null){oi[e]=oi[e].parentLocale}else if(oi[e]!=null){delete oi[e]}}}return oi[e]}function gi(e){var t;if(e&&e._locale&&e._locale._abbr){e=e._locale._abbr}if(!e){return hi}if(!n(e)){t=di(e);if(t){return t}e=[e]}return ui(e)}function vi(){return F(oi)}function yi(e){var t;var i=e._a;if(i&&p(e).overflow===-2){t=i[Ve]<0||i[Ve]>11?Ve:i[qe]<1||i[qe]>et(i[Be],i[Ve])?qe:i[We]<0||i[We]>24||i[We]===24&&(i[Ye]!==0||i[Ge]!==0||i[Ze]!==0)?We:i[Ye]<0||i[Ye]>59?Ye:i[Ge]<0||i[Ge]>59?Ge:i[Ze]<0||i[Ze]>999?Ze:-1;if(p(e)._overflowDayOfYear&&(t<Be||t>qe)){t=qe}if(p(e)._overflowWeeks&&t===-1){t=Ke}if(p(e)._overflowWeekday&&t===-1){t=Qe}p(e).overflow=t}return e}var bi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var wi=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var xi=/Z|[+-]\d\d(?::?\d\d)?/;var _i=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/]];var Ci=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]];var ki=/^\/?Date\((\-?\d+)/i;function Ti(e){var t,i,n=e._i,s=bi.exec(n)||wi.exec(n),a,r,o,l;if(s){p(e).iso=true;for(t=0,i=_i.length;t<i;t++){if(_i[t][1].exec(s[1])){r=_i[t][0];a=_i[t][2]!==false;break}}if(r==null){e._isValid=false;return}if(s[3]){for(t=0,i=Ci.length;t<i;t++){if(Ci[t][1].exec(s[3])){o=(s[2]||" ")+Ci[t][0];break}}if(o==null){e._isValid=false;return}}if(!a&&o!=null){e._isValid=false;return}if(s[4]){if(xi.exec(s[4])){l="Z"}else{e._isValid=false;return}}e._f=r+(o||"")+(l||"");Ii(e)}else{e._isValid=false}}var Si=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;function Mi(e){var t,i,n,s,a,r;var o={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"};var l="YXWVUTSRQPONZABCDEFGHIKLM";var h,c;t=e._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,"");i=Si.exec(t);if(i){n=i[1]?"ddd"+(i[1].length===5?", ":" "):"";s="D MMM "+(i[2].length>10?"YYYY ":"YY ");a="HH:mm"+(i[4]?":ss":"");if(i[1]){var u=new Date(i[2]);var d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][u.getDay()];if(i[1].substr(0,3)!==d){p(e).weekdayMismatch=true;e._isValid=false;return}}switch(i[5].length){case 2:if(c===0){h=" +0000"}else{c=l.indexOf(i[5][1].toUpperCase())-12;h=(c<0?" -":" +")+(""+c).replace(/^-?/,"0").match(/..$/)[0]+"00"}break;case 4:h=o[i[5]];break;default:h=o[" GMT"]}i[5]=h;
e._i=i.splice(1).join("");r=" ZZ";e._f=n+s+a+r;Ii(e);p(e).rfc2822=true}else{e._isValid=false}}function Di(e){var i=ki.exec(e._i);if(i!==null){e._d=new Date(+i[1]);return}Ti(e);if(e._isValid===false){delete e._isValid}else{return}Mi(e);if(e._isValid===false){delete e._isValid}else{return}t.createFromInputFallback(e)}t.createFromInputFallback=D("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are "+"discouraged and will be removed in an upcoming major release. Please refer to "+"http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function $i(e,t,i){if(e!=null){return e}if(t!=null){return t}return i}function Ei(e){var i=new Date(t.now());if(e._useUTC){return[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]}return[i.getFullYear(),i.getMonth(),i.getDate()]}function Ai(e){var t,i,n=[],s,a;if(e._d){return}s=Ei(e);if(e._w&&e._a[qe]==null&&e._a[Ve]==null){Pi(e)}if(e._dayOfYear!=null){a=$i(e._a[Be],s[Be]);if(e._dayOfYear>gt(a)||e._dayOfYear===0){p(e)._overflowDayOfYear=true}i=xt(a,0,e._dayOfYear);e._a[Ve]=i.getUTCMonth();e._a[qe]=i.getUTCDate()}for(t=0;t<3&&e._a[t]==null;++t){e._a[t]=n[t]=s[t]}for(;t<7;t++){e._a[t]=n[t]=e._a[t]==null?t===2?1:0:e._a[t]}if(e._a[We]===24&&e._a[Ye]===0&&e._a[Ge]===0&&e._a[Ze]===0){e._nextDay=true;e._a[We]=0}e._d=(e._useUTC?xt:wt).apply(null,n);if(e._tzm!=null){e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm)}if(e._nextDay){e._a[We]=24}}function Pi(e){var t,i,n,s,a,r,o,l;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){a=1;r=4;i=$i(t.GG,e._a[Be],kt(Hi(),1,4).year);n=$i(t.W,1);s=$i(t.E,1);if(s<1||s>7){l=true}}else{a=e._locale._week.dow;r=e._locale._week.doy;var h=kt(Hi(),a,r);i=$i(t.gg,e._a[Be],h.year);n=$i(t.w,h.week);if(t.d!=null){s=t.d;if(s<0||s>6){l=true}}else if(t.e!=null){s=t.e+a;if(t.e<0||t.e>6){l=true}}else{s=a}}if(n<1||n>Tt(i,a,r)){p(e)._overflowWeeks=true}else if(l!=null){p(e)._overflowWeekday=true}else{o=Ct(i,n,s,a,r);e._a[Be]=o.year;e._dayOfYear=o.dayOfYear}}t.ISO_8601=function(){};t.RFC_2822=function(){};function Ii(e){if(e._f===t.ISO_8601){Ti(e);return}if(e._f===t.RFC_2822){Mi(e);return}e._a=[];p(e).empty=true;var i=""+e._i,n,s,a,r,o,l=i.length,h=0;a=ge(e._f,e._locale).match(le)||[];for(n=0;n<a.length;n++){r=a[n];s=(i.match(Fe(r,e))||[])[0];if(s){o=i.substr(0,i.indexOf(s));if(o.length>0){p(e).unusedInput.push(o)}i=i.slice(i.indexOf(s)+s.length);h+=s.length}if(ue[r]){if(s){p(e).empty=false}else{p(e).unusedTokens.push(r)}ze(r,s,e)}else if(e._strict&&!s){p(e).unusedTokens.push(r)}}p(e).charsLeftOver=l-h;if(i.length>0){p(e).unusedInput.push(i)}if(e._a[We]<=12&&p(e).bigHour===true&&e._a[We]>0){p(e).bigHour=undefined}p(e).parsedDateParts=e._a.slice(0);p(e).meridiem=e._meridiem;e._a[We]=Ni(e._locale,e._a[We],e._meridiem);Ai(e);yi(e)}function Ni(e,t,i){var n;if(i==null){return t}if(e.meridiemHour!=null){return e.meridiemHour(t,i)}else if(e.isPM!=null){n=e.isPM(i);if(n&&t<12){t+=12}if(!n&&t===12){t=0}return t}else{return t}}function Oi(e){var t,i,n,s,a;if(e._f.length===0){p(e).invalidFormat=true;e._d=new Date(NaN);return}for(s=0;s<e._f.length;s++){a=0;t=w({},e);if(e._useUTC!=null){t._useUTC=e._useUTC}t._f=e._f[s];Ii(t);if(!v(t)){continue}a+=p(t).charsLeftOver;a+=p(t).unusedTokens.length*10;p(t).score=a;if(n==null||a<n){n=a;i=t}}u(e,i||t)}function Fi(e){if(e._d){return}var t=J(e._i);e._a=h([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)});Ai(e)}function Ri(e){var t=new _(yi(Li(e)));if(t._nextDay){t.add(1,"d");t._nextDay=undefined}return t}function Li(e){var t=e._i,i=e._f;e._locale=e._locale||gi(e._l);if(t===null||i===undefined&&t===""){return y({nullInput:true})}if(typeof t==="string"){e._i=t=e._locale.preparse(t)}if(C(t)){return new _(yi(t))}else if(l(t)){e._d=t}else if(n(i)){Oi(e)}else if(i){Ii(e)}else{ji(e)}if(!v(e)){e._d=null}return e}function ji(e){var i=e._i;if(r(i)){e._d=new Date(t.now())}else if(l(i)){e._d=new Date(i.valueOf())}else if(typeof i==="string"){Di(e)}else if(n(i)){e._a=h(i.slice(0),function(e){return parseInt(e,10)});Ai(e)}else if(s(i)){Fi(e)}else if(o(i)){e._d=new Date(i)}else{t.createFromInputFallback(e)}}function Ui(e,t,i,r,o){var l={};if(i===true||i===false){r=i;i=undefined}if(s(e)&&a(e)||n(e)&&e.length===0){e=undefined}l._isAMomentObject=true;l._useUTC=l._isUTC=o;l._l=i;l._i=e;l._f=t;l._strict=r;return Ri(l)}function Hi(e,t,i,n){return Ui(e,t,i,n,false)}var zi=D("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Hi.apply(null,arguments);if(this.isValid()&&e.isValid()){return e<this?this:e}else{return y()}});var Bi=D("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Hi.apply(null,arguments);if(this.isValid()&&e.isValid()){return e>this?this:e}else{return y()}});function Vi(e,t){var i,s;if(t.length===1&&n(t[0])){t=t[0]}if(!t.length){return Hi()}i=t[0];for(s=1;s<t.length;++s){if(!t[s].isValid()||t[s][e](i)){i=t[s]}}return i}function qi(){var e=[].slice.call(arguments,0);return Vi("isBefore",e)}function Wi(){var e=[].slice.call(arguments,0);return Vi("isAfter",e)}var Yi=function(){return Date.now?Date.now():+new Date};var Gi=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Zi(e){for(var t in e){if(!(Gi.indexOf(t)!==-1&&(e[t]==null||!isNaN(e[t])))){return false}}var i=false;for(var n=0;n<Gi.length;++n){if(e[Gi[n]]){if(i){return false}if(parseFloat(e[Gi[n]])!==T(e[Gi[n]])){i=true}}}return true}function Ki(){return this._isValid}function Qi(){return wn(NaN)}function Ji(e){var t=J(e),i=t.year||0,n=t.quarter||0,s=t.month||0,a=t.week||0,r=t.day||0,o=t.hour||0,l=t.minute||0,h=t.second||0,c=t.millisecond||0;this._isValid=Zi(t);this._milliseconds=+c+h*1e3+l*6e4+o*1e3*60*60;this._days=+r+a*7;this._months=+s+n*3+i*12;this._data={};this._locale=gi();this._bubble()}function Xi(e){return e instanceof Ji}function en(e){if(e<0){return Math.round(-1*e)*-1}else{return Math.round(e)}}function tn(e,t){de(e,0,0,function(){var e=this.utcOffset();var i="+";if(e<0){e=-e;i="-"}return i+oe(~~(e/60),2)+t+oe(~~e%60,2)})}tn("Z",":");tn("ZZ","");Oe("Z",Ae);Oe("ZZ",Ae);Ue(["Z","ZZ"],function(e,t,i){i._useUTC=true;i._tzm=sn(Ae,e)});var nn=/([\+\-]|\d\d)/gi;function sn(e,t){var i=(t||"").match(e);if(i===null){return null}var n=i[i.length-1]||[];var s=(n+"").match(nn)||["-",0,0];var a=+(s[1]*60)+T(s[2]);return a===0?0:s[0]==="+"?a:-a}function an(e,i){var n,s;if(i._isUTC){n=i.clone();s=(C(e)||l(e)?e.valueOf():Hi(e).valueOf())-n.valueOf();n._d.setTime(n._d.valueOf()+s);t.updateOffset(n,false);return n}else{return Hi(e).local()}}function rn(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}t.updateOffset=function(){};function on(e,i,n){var s=this._offset||0,a;if(!this.isValid()){return e!=null?this:NaN}if(e!=null){if(typeof e==="string"){e=sn(Ae,e);if(e===null){return this}}else if(Math.abs(e)<16&&!n){e=e*60}if(!this._isUTC&&i){a=rn(this)}this._offset=e;this._isUTC=true;if(a!=null){this.add(a,"m")}if(s!==e){if(!i||this._changeInProgress){Tn(this,wn(e-s,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;t.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?s:rn(this)}}function ln(e,t){if(e!=null){if(typeof e!=="string"){e=-e}this.utcOffset(e,t);return this}else{return-this.utcOffset()}}function hn(e){return this.utcOffset(0,e)}function cn(e){if(this._isUTC){this.utcOffset(0,e);this._isUTC=false;if(e){this.subtract(rn(this),"m")}}return this}function un(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true)}else if(typeof this._i==="string"){var e=sn(Ee,this._i);if(e!=null){this.utcOffset(e)}else{this.utcOffset(0,true)}}return this}function dn(e){if(!this.isValid()){return false}e=e?Hi(e).utcOffset():0;return(this.utcOffset()-e)%60===0}function fn(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function pn(){if(!r(this._isDSTShifted)){return this._isDSTShifted}var e={};w(e,this);e=Li(e);if(e._a){var t=e._isUTC?d(e._a):Hi(e._a);this._isDSTShifted=this.isValid()&&S(e._a,t.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function mn(){return this.isValid()?!this._isUTC:false}function gn(){return this.isValid()?this._isUTC:false}function vn(){return this.isValid()?this._isUTC&&this._offset===0:false}var yn=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/;var bn=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;function wn(e,t){var i=e,n=null,s,a,r;if(Xi(e)){i={ms:e._milliseconds,d:e._days,M:e._months}}else if(o(e)){i={};if(t){i[t]=e}else{i.milliseconds=e}}else if(!!(n=yn.exec(e))){s=n[1]==="-"?-1:1;i={y:0,d:T(n[qe])*s,h:T(n[We])*s,m:T(n[Ye])*s,s:T(n[Ge])*s,ms:T(en(n[Ze]*1e3))*s}}else if(!!(n=bn.exec(e))){s=n[1]==="-"?-1:1;i={y:xn(n[2],s),M:xn(n[3],s),w:xn(n[4],s),d:xn(n[5],s),h:xn(n[6],s),m:xn(n[7],s),s:xn(n[8],s)}}else if(i==null){i={}}else if(typeof i==="object"&&("from"in i||"to"in i)){r=Cn(Hi(i.from),Hi(i.to));i={};i.ms=r.milliseconds;i.M=r.months}a=new Ji(i);if(Xi(e)&&c(e,"_locale")){a._locale=e._locale}return a}wn.fn=Ji.prototype;wn.invalid=Qi;function xn(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function _n(e,t){var i={milliseconds:0,months:0};i.months=t.month()-e.month()+(t.year()-e.year())*12;if(e.clone().add(i.months,"M").isAfter(t)){--i.months}i.milliseconds=+t-+e.clone().add(i.months,"M");return i}function Cn(e,t){var i;if(!(e.isValid()&&t.isValid())){return{milliseconds:0,months:0}}t=an(t,e);if(e.isBefore(t)){i=_n(e,t)}else{i=_n(t,e);i.milliseconds=-i.milliseconds;i.months=-i.months}return i}function kn(e,t){return function(i,n){var s,a;if(n!==null&&!isNaN(+n)){E(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");a=i;i=n;n=a}i=typeof i==="string"?+i:i;s=wn(i,n);Tn(this,s,e);return this}}function Tn(e,i,n,s){var a=i._milliseconds,r=en(i._days),o=en(i._months);if(!e.isValid()){return}s=s==null?true:s;if(a){e._d.setTime(e._d.valueOf()+a*n)}if(r){se(e,"Date",ne(e,"Date")+r*n)}if(o){lt(e,ne(e,"Month")+o*n)}if(s){t.updateOffset(e,r||o)}}var Sn=kn(1,"add");var Mn=kn(-1,"subtract");function Dn(e,t){var i=e.diff(t,"days",true);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function $n(e,i){var n=e||Hi(),s=an(n,this).startOf("day"),a=t.calendarFormat(this,s)||"sameElse";var r=i&&(A(i[a])?i[a].call(this,n):i[a]);return this.format(r||this.localeData().calendar(a,this,Hi(n)))}function En(){return new _(this)}function An(e,t){var i=C(e)?e:Hi(e);if(!(this.isValid()&&i.isValid())){return false}t=Q(!r(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()>i.valueOf()}else{return i.valueOf()<this.clone().startOf(t).valueOf()}}function Pn(e,t){var i=C(e)?e:Hi(e);if(!(this.isValid()&&i.isValid())){return false}t=Q(!r(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()<i.valueOf()}else{return this.clone().endOf(t).valueOf()<i.valueOf()}}function In(e,t,i,n){n=n||"()";return(n[0]==="("?this.isAfter(e,i):!this.isBefore(e,i))&&(n[1]===")"?this.isBefore(t,i):!this.isAfter(t,i))}function Nn(e,t){var i=C(e)?e:Hi(e),n;if(!(this.isValid()&&i.isValid())){return false}t=Q(t||"millisecond");if(t==="millisecond"){return this.valueOf()===i.valueOf()}else{n=i.valueOf();return this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()}}function On(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Fn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Rn(e,t,i){var n,s,a,r;if(!this.isValid()){return NaN}n=an(e,this);if(!n.isValid()){return NaN}s=(n.utcOffset()-this.utcOffset())*6e4;t=Q(t);if(t==="year"||t==="month"||t==="quarter"){r=Ln(this,n);if(t==="quarter"){r=r/3}else if(t==="year"){r=r/12}}else{a=this-n;r=t==="second"?a/1e3:t==="minute"?a/6e4:t==="hour"?a/36e5:t==="day"?(a-s)/864e5:t==="week"?(a-s)/6048e5:a}return i?r:k(r)}function Ln(e,t){var i=(t.year()-e.year())*12+(t.month()-e.month()),n=e.clone().add(i,"months"),s,a;if(t-n<0){s=e.clone().add(i-1,"months");a=(t-n)/(n-s)}else{s=e.clone().add(i+1,"months");a=(t-n)/(s-n)}return-(i+a)||0}t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function jn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Un(){if(!this.isValid()){return null}var e=this.clone().utc();if(e.year()<0||e.year()>9999){return me(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}if(A(Date.prototype.toISOString)){return this.toDate().toISOString()}return me(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function Hn(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)"}var e="moment";var t="";if(!this.isLocal()){e=this.utcOffset()===0?"moment.utc":"moment.parseZone";t="Z"}var i="["+e+'("]';var n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";var s="-MM-DD[T]HH:mm:ss.SSS";var a=t+'[")]';return this.format(i+n+s+a)}function zn(e){if(!e){e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat}var i=me(this,e);return this.localeData().postformat(i)}function Bn(e,t){if(this.isValid()&&(C(e)&&e.isValid()||Hi(e).isValid())){return wn({to:this,from:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function Vn(e){return this.from(Hi(),e)}function qn(e,t){if(this.isValid()&&(C(e)&&e.isValid()||Hi(e).isValid())){return wn({from:this,to:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function Wn(e){return this.to(Hi(),e)}function Yn(e){var t;if(e===undefined){return this._locale._abbr}else{t=gi(e);if(t!=null){this._locale=t}return this}}var Gn=D("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){if(e===undefined){return this.localeData()}else{return this.locale(e)}});function Zn(){return this._locale}function Kn(e){e=Q(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(e==="week"){this.weekday(0)}if(e==="isoWeek"){this.isoWeekday(1)}if(e==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function Qn(e){e=Q(e);if(e===undefined||e==="millisecond"){return this}if(e==="date"){e="day"}return this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function Jn(){return this._d.valueOf()-(this._offset||0)*6e4}function Xn(){return Math.floor(this.valueOf()/1e3)}function es(){return new Date(this.valueOf())}function ts(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function is(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function ns(){return this.isValid()?this.toISOString():null}function ss(){return v(this)}function as(){return u({},p(this))}function rs(){return p(this).overflow}function os(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}de(0,["gg",2],0,function(){return this.weekYear()%100});de(0,["GG",2],0,function(){return this.isoWeekYear()%100});function ls(e,t){de(0,[e,e.length],0,t)}ls("gggg","weekYear");ls("ggggg","weekYear");ls("GGGG","isoWeekYear");ls("GGGGG","isoWeekYear");K("weekYear","gg");K("isoWeekYear","GG");ee("weekYear",1);ee("isoWeekYear",1);Oe("G",$e);Oe("g",$e);Oe("GG",_e,ye);Oe("gg",_e,ye);Oe("GGGG",Se,we);Oe("gggg",Se,we);Oe("GGGGG",Me,xe);Oe("ggggg",Me,xe);He(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,n){t[n.substr(0,2)]=T(e)});He(["gg","GG"],function(e,i,n,s){i[s]=t.parseTwoDigitYear(e)});function hs(e){return fs.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function cs(e){return fs.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function us(){return Tt(this.year(),1,4)}function ds(){var e=this.localeData()._week;return Tt(this.year(),e.dow,e.doy)}function fs(e,t,i,n,s){var a;if(e==null){return kt(this,n,s).year}else{a=Tt(e,n,s);if(t>a){t=a}return ps.call(this,e,t,i,n,s)}}function ps(e,t,i,n,s){var a=Ct(e,t,i,n,s),r=xt(a.year,0,a.dayOfYear);this.year(r.getUTCFullYear());this.month(r.getUTCMonth());this.date(r.getUTCDate());return this}de("Q",0,"Qo","quarter");K("quarter","Q");ee("quarter",7);Oe("Q",ve);Ue("Q",function(e,t){t[Ve]=(T(e)-1)*3});function ms(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}de("D",["DD",2],"Do","date");K("date","D");ee("date",9);Oe("D",_e);Oe("DD",_e,ye);Oe("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});Ue(["D","DD"],qe);Ue("Do",function(e,t){t[qe]=T(e.match(_e)[0],10)});var gs=ie("Date",true);de("DDD",["DDDD",3],"DDDo","dayOfYear");K("dayOfYear","DDD");ee("dayOfYear",4);Oe("DDD",Te);Oe("DDDD",be);Ue(["DDD","DDDD"],function(e,t,i){i._dayOfYear=T(e)});function vs(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}de("m",["mm",2],0,"minute");K("minute","m");ee("minute",14);Oe("m",_e);Oe("mm",_e,ye);Ue(["m","mm"],Ye);var ys=ie("Minutes",false);de("s",["ss",2],0,"second");K("second","s");ee("second",15);Oe("s",_e);Oe("ss",_e,ye);Ue(["s","ss"],Ge);var bs=ie("Seconds",false);de("S",0,0,function(){return~~(this.millisecond()/100)});de(0,["SS",2],0,function(){return~~(this.millisecond()/10)});de(0,["SSS",3],0,"millisecond");de(0,["SSSS",4],0,function(){return this.millisecond()*10});de(0,["SSSSS",5],0,function(){return this.millisecond()*100});de(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});de(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});de(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});de(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});K("millisecond","ms");ee("millisecond",16);Oe("S",Te,ve);Oe("SS",Te,ye);Oe("SSS",Te,be);var ws;for(ws="SSSS";ws.length<=9;ws+="S"){Oe(ws,De)}function xs(e,t){t[Ze]=T(("0."+e)*1e3)}for(ws="S";ws.length<=9;ws+="S"){Ue(ws,xs)}var _s=ie("Milliseconds",false);de("z",0,0,"zoneAbbr");de("zz",0,0,"zoneName");function Cs(){return this._isUTC?"UTC":""}function ks(){return this._isUTC?"Coordinated Universal Time":""}var Ts=_.prototype;Ts.add=Sn;Ts.calendar=$n;Ts.clone=En;Ts.diff=Rn;Ts.endOf=Qn;Ts.format=zn;Ts.from=Bn;Ts.fromNow=Vn;Ts.to=qn;Ts.toNow=Wn;Ts.get=ae;Ts.invalidAt=rs;Ts.isAfter=An;Ts.isBefore=Pn;Ts.isBetween=In;Ts.isSame=Nn;Ts.isSameOrAfter=On;Ts.isSameOrBefore=Fn;Ts.isValid=ss;Ts.lang=Gn;Ts.locale=Yn;Ts.localeData=Zn;Ts.max=Bi;Ts.min=zi;Ts.parsingFlags=as;Ts.set=re;Ts.startOf=Kn;Ts.subtract=Mn;Ts.toArray=ts;Ts.toObject=is;Ts.toDate=es;Ts.toISOString=Un;Ts.inspect=Hn;Ts.toJSON=ns;Ts.toString=jn;Ts.unix=Xn;Ts.valueOf=Jn;Ts.creationData=os;Ts.year=yt;Ts.isLeapYear=bt;Ts.weekYear=hs;Ts.isoWeekYear=cs;Ts.quarter=Ts.quarters=ms;Ts.month=ht;Ts.daysInMonth=ct;Ts.week=Ts.weeks=Et;Ts.isoWeek=Ts.isoWeeks=At;Ts.weeksInYear=ds;Ts.isoWeeksInYear=us;Ts.date=gs;Ts.day=Ts.days=zt;Ts.weekday=Bt;Ts.isoWeekday=Vt;Ts.dayOfYear=vs;Ts.hour=Ts.hours=ai;Ts.minute=Ts.minutes=ys;Ts.second=Ts.seconds=bs;Ts.millisecond=Ts.milliseconds=_s;Ts.utcOffset=on;Ts.utc=hn;Ts.local=cn;Ts.parseZone=un;Ts.hasAlignedHourOffset=dn;Ts.isDST=fn;Ts.isLocal=mn;Ts.isUtcOffset=gn;Ts.isUtc=vn;Ts.isUTC=vn;Ts.zoneAbbr=Cs;Ts.zoneName=ks;Ts.dates=D("dates accessor is deprecated. Use date instead.",gs);Ts.months=D("months accessor is deprecated. Use month instead",ht);Ts.years=D("years accessor is deprecated. Use year instead",yt);Ts.zone=D("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",ln);Ts.isDSTShifted=D("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",pn);function Ss(e){return Hi(e*1e3)}function Ms(){return Hi.apply(null,arguments).parseZone()}function Ds(e){return e}var $s=N.prototype;$s.calendar=L;$s.longDateFormat=U;$s.invalidDate=z;$s.ordinal=q;$s.preparse=Ds;$s.postformat=Ds;$s.relativeTime=Y;$s.pastFuture=G;$s.set=P;$s.months=nt;$s.monthsShort=at;$s.monthsParse=ot;$s.monthsRegex=pt;$s.monthsShortRegex=dt;$s.week=St;$s.firstDayOfYear=$t;$s.firstDayOfWeek=Dt;$s.weekdays=Ot;$s.weekdaysMin=jt;$s.weekdaysShort=Rt;$s.weekdaysParse=Ht;$s.weekdaysRegex=Wt;$s.weekdaysShortRegex=Gt;$s.weekdaysMinRegex=Kt;$s.isPM=ii;$s.meridiem=si;function Es(e,t,i,n){var s=gi();var a=d().set(n,t);return s[i](a,e)}function As(e,t,i){if(o(e)){t=e;e=undefined}e=e||"";if(t!=null){return Es(e,t,i,"month")}var n;var s=[];for(n=0;n<12;n++){s[n]=Es(e,n,i,"month")}return s}function Ps(e,t,i,n){if(typeof e==="boolean"){if(o(t)){i=t;t=undefined}t=t||""}else{t=e;i=t;e=false;if(o(t)){i=t;t=undefined}t=t||""}var s=gi(),a=e?s._week.dow:0;if(i!=null){return Es(t,(i+a)%7,n,"day")}var r;var l=[];for(r=0;r<7;r++){l[r]=Es(t,(r+a)%7,n,"day")}return l}function Is(e,t){return As(e,t,"months")}function Ns(e,t){return As(e,t,"monthsShort")}function Os(e,t,i){return Ps(e,t,i,"weekdays")}function Fs(e,t,i){return Ps(e,t,i,"weekdaysShort")}function Rs(e,t,i){return Ps(e,t,i,"weekdaysMin")}fi("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,i=T(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+i}});t.lang=D("moment.lang is deprecated. Use moment.locale instead.",fi);t.langData=D("moment.langData is deprecated. Use moment.localeData instead.",gi);var Ls=Math.abs;function js(){var e=this._data;this._milliseconds=Ls(this._milliseconds);this._days=Ls(this._days);this._months=Ls(this._months);e.milliseconds=Ls(e.milliseconds);e.seconds=Ls(e.seconds);e.minutes=Ls(e.minutes);e.hours=Ls(e.hours);e.months=Ls(e.months);e.years=Ls(e.years);return this}function Us(e,t,i,n){var s=wn(t,i);e._milliseconds+=n*s._milliseconds;e._days+=n*s._days;e._months+=n*s._months;return e._bubble()}function Hs(e,t){return Us(this,e,t,1)}function zs(e,t){return Us(this,e,t,-1)}function Bs(e){if(e<0){return Math.floor(e)}else{return Math.ceil(e)}}function Vs(){var e=this._milliseconds;var t=this._days;var i=this._months;var n=this._data;var s,a,r,o,l;if(!(e>=0&&t>=0&&i>=0||e<=0&&t<=0&&i<=0)){e+=Bs(Ws(i)+t)*864e5;t=0;i=0}n.milliseconds=e%1e3;s=k(e/1e3);n.seconds=s%60;a=k(s/60);n.minutes=a%60;r=k(a/60);n.hours=r%24;t+=k(r/24);l=k(qs(t));i+=l;t-=Bs(Ws(l));o=k(i/12);i%=12;n.days=t;n.months=i;n.years=o;return this}function qs(e){return e*4800/146097}function Ws(e){return e*146097/4800}function Ys(e){if(!this.isValid()){return NaN}var t;var i;var n=this._milliseconds;e=Q(e);if(e==="month"||e==="year"){t=this._days+n/864e5;i=this._months+qs(t);return e==="month"?i:i/12}else{t=this._days+Math.round(Ws(this._months));switch(e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return t*24+n/36e5;case"minute":return t*1440+n/6e4;case"second":return t*86400+n/1e3;case"millisecond":return Math.floor(t*864e5)+n;default:throw new Error("Unknown unit "+e)}}}function Gs(){if(!this.isValid()){return NaN}return this._milliseconds+this._days*864e5+this._months%12*2592e6+T(this._months/12)*31536e6}function Zs(e){return function(){return this.as(e)}}var Ks=Zs("ms");var Qs=Zs("s");var Js=Zs("m");var Xs=Zs("h");var ea=Zs("d");var ta=Zs("w");var ia=Zs("M");var na=Zs("y");function sa(e){e=Q(e);return this.isValid()?this[e+"s"]():NaN}function aa(e){return function(){return this.isValid()?this._data[e]:NaN}}var ra=aa("milliseconds");var oa=aa("seconds");var la=aa("minutes");var ha=aa("hours");var ca=aa("days");var ua=aa("months");var da=aa("years");function fa(){return k(this.days()/7)}var pa=Math.round;var ma={ss:44,s:45,m:45,h:22,d:26,M:11};function ga(e,t,i,n,s){return s.relativeTime(t||1,!!i,e,n)}function va(e,t,i){var n=wn(e).abs();var s=pa(n.as("s"));var a=pa(n.as("m"));var r=pa(n.as("h"));var o=pa(n.as("d"));var l=pa(n.as("M"));var h=pa(n.as("y"));var c=s<=ma.ss&&["s",s]||s<ma.s&&["ss",s]||a<=1&&["m"]||a<ma.m&&["mm",a]||r<=1&&["h"]||r<ma.h&&["hh",r]||o<=1&&["d"]||o<ma.d&&["dd",o]||l<=1&&["M"]||l<ma.M&&["MM",l]||h<=1&&["y"]||["yy",h];c[2]=t;c[3]=+e>0;c[4]=i;return ga.apply(null,c)}function ya(e){if(e===undefined){return pa}if(typeof e==="function"){pa=e;return true}return false}function ba(e,t){if(ma[e]===undefined){return false}if(t===undefined){return ma[e]}ma[e]=t;if(e==="s"){ma.ss=t-1}return true}function wa(e){if(!this.isValid()){return this.localeData().invalidDate()}var t=this.localeData();var i=va(this,!e,t);if(e){i=t.pastFuture(+this,i)}return t.postformat(i)}var xa=Math.abs;function _a(){if(!this.isValid()){return this.localeData().invalidDate()}var e=xa(this._milliseconds)/1e3;var t=xa(this._days);var i=xa(this._months);var n,s,a;n=k(e/60);s=k(n/60);e%=60;n%=60;a=k(i/12);i%=12;var r=a;var o=i;var l=t;var h=s;var c=n;var u=e;var d=this.asSeconds();if(!d){return"P0D"}return(d<0?"-":"")+"P"+(r?r+"Y":"")+(o?o+"M":"")+(l?l+"D":"")+(h||c||u?"T":"")+(h?h+"H":"")+(c?c+"M":"")+(u?u+"S":"")}var Ca=Ji.prototype;Ca.isValid=Ki;Ca.abs=js;Ca.add=Hs;Ca.subtract=zs;Ca.as=Ys;Ca.asMilliseconds=Ks;Ca.asSeconds=Qs;Ca.asMinutes=Js;Ca.asHours=Xs;Ca.asDays=ea;Ca.asWeeks=ta;Ca.asMonths=ia;Ca.asYears=na;Ca.valueOf=Gs;Ca._bubble=Vs;Ca.get=sa;Ca.milliseconds=ra;Ca.seconds=oa;Ca.minutes=la;Ca.hours=ha;Ca.days=ca;Ca.weeks=fa;Ca.months=ua;Ca.years=da;Ca.humanize=wa;Ca.toISOString=_a;Ca.toString=_a;Ca.toJSON=_a;Ca.locale=Yn;Ca.localeData=Zn;Ca.toIsoString=D("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",_a);Ca.lang=Gn;de("X",0,0,"unix");de("x",0,0,"valueOf");Oe("x",$e);Oe("X",Pe);Ue("X",function(e,t,i){i._d=new Date(parseFloat(e,10)*1e3)});Ue("x",function(e,t,i){i._d=new Date(T(e))});t.version="2.18.1";i(Hi);t.fn=Ts;t.min=qi;t.max=Wi;t.now=Yi;t.utc=d;t.unix=Ss;t.months=Is;t.isDate=l;t.locale=fi;t.invalid=y;t.duration=wn;t.isMoment=C;t.weekdays=Os;t.parseZone=Ms;t.localeData=gi;t.isDuration=Xi;t.monthsShort=Ns;t.weekdaysMin=Rs;t.defineLocale=pi;t.updateLocale=mi;t.locales=vi;t.weekdaysShort=Fs;t.normalizeUnits=Q;t.relativeTimeRounding=ya;t.relativeTimeThreshold=ba;t.calendarFormat=Dn;t.prototype=Ts;return t});(function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,i=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return false}}(),n=i&&e.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch(e){return false}}(),s=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,a=(i||s)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,a,r,o,l,h;if(e.split(",")[0].indexOf("base64")>=0){t=atob(e.split(",")[1])}else{t=decodeURIComponent(e.split(",")[1])}a=new ArrayBuffer(t.length);r=new Uint8Array(a);for(o=0;o<t.length;o+=1){r[o]=t.charCodeAt(o)}l=e.split(",")[0].split(":")[1].split(";")[0];if(i){return new Blob([n?r:a],{type:l})}h=new s;h.append(a);return h.getBlob(l)};if(e.HTMLCanvasElement&&!t.toBlob){if(t.mozGetAsFile){t.toBlob=function(e,i,n){if(n&&t.toDataURL&&a){e(a(this.toDataURL(i,n)))}else{e(this.mozGetAsFile("blob",i))}}}else if(t.toDataURL&&a){t.toBlob=function(e,t,i){e(a(this.toDataURL(t,i)))}}}if(typeof define==="function"&&define.amd){define(function(){return a})}else{e.dataURLtoBlob=a}})(window);(function(e){"use strict";var t=typeof window==="undefined"?null:window;if(typeof define==="function"&&define.amd){define(function(){return e(t)})}else if(typeof module!=="undefined"){module.exports=e(t)}else{t.DOMPurify=e(t)}})(function e(t){"use strict";var i=function(t){return e(t)};i.version="0.7.4";if(!t||!t.document||t.document.nodeType!==9){i.isSupported=false;return i}var n=t.document;var s=n;var a=t.DocumentFragment;var r=t.HTMLTemplateElement;var o=t.NodeFilter;var l=t.NamedNodeMap||t.MozNamedAttrMap;var h=t.Text;var c=t.Comment;var u=t.DOMParser;if(typeof r==="function"){var d=n.createElement("template");if(d.content&&d.content.ownerDocument){n=d.content.ownerDocument}}var f=n.implementation;var p=n.createNodeIterator;var m=n.getElementsByTagName;var g=n.createDocumentFragment;var v=s.importNode;var y={};i.isSupported=typeof f.createHTMLDocument!=="undefined"&&n.documentMode!==9;var b=function(e,t){var i=t.length;while(i--){if(typeof t[i]==="string"){t[i]=t[i].toLowerCase()}e[t[i]]=true}return e};var w=function(e){var t={};var i;for(i in e){if(e.hasOwnProperty(i)){t[i]=e[i]}}return t};var x=null;var _=b({},["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr","svg","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","switch","symbol","text","textpath","title","tref","tspan","view","vkern","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence","math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmuliscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mpspace","msqrt","mystyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","#text"]);var C=null;var k=b({},["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","coords","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","rows","rowspan","spellcheck","scope","selected","shape","size","span","srclang","start","src","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns","accent-height","accumulate","additivive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mode","min","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","surfacescale","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","u1","u2","unicode","values","viewbox","visibility","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","y","y1","y2","z","zoomandpan","accent","accentunder","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","display","displaystyle","fence","frame","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]);
var T=null;var S=null;var M=true;var D=false;var $=false;var E=false;var A=/\{\{[\s\S]*|[\s\S]*\}\}/gm;var P=/<%[\s\S]*|[\s\S]*%>/gm;var I=false;var N=false;var O=false;var F=false;var R=true;var L=true;var j=b({},["audio","head","math","script","style","svg","video"]);var U=b({},["audio","video","img","source"]);var H=b({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]);var z=null;var B=n.createElement("form");var V=function(e){if(typeof e!=="object"){e={}}x="ALLOWED_TAGS"in e?b({},e.ALLOWED_TAGS):_;C="ALLOWED_ATTR"in e?b({},e.ALLOWED_ATTR):k;T="FORBID_TAGS"in e?b({},e.FORBID_TAGS):{};S="FORBID_ATTR"in e?b({},e.FORBID_ATTR):{};M=e.ALLOW_DATA_ATTR!==false;D=e.ALLOW_UNKNOWN_PROTOCOLS||false;$=e.SAFE_FOR_JQUERY||false;E=e.SAFE_FOR_TEMPLATES||false;I=e.WHOLE_DOCUMENT||false;N=e.RETURN_DOM||false;O=e.RETURN_DOM_FRAGMENT||false;F=e.RETURN_DOM_IMPORT||false;R=e.SANITIZE_DOM!==false;L=e.KEEP_CONTENT!==false;if(E){M=false}if(O){N=true}if(e.ADD_TAGS){if(x===_){x=w(x)}b(x,e.ADD_TAGS)}if(e.ADD_ATTR){if(C===k){C=w(C)}b(C,e.ADD_ATTR)}if(L){x["#text"]=true}if(Object&&"freeze"in Object){Object.freeze(e)}z=e};var q=function(e){try{e.parentNode.removeChild(e)}catch(t){e.outerHTML=""}};var W=function(e){var t,i;try{t=(new u).parseFromString(e,"text/html")}catch(e){}if(!t){t=f.createHTMLDocument("");i=t.body;i.parentNode.removeChild(i.parentNode.firstElementChild);i.outerHTML=e}if(typeof t.getElementsByTagName==="function"){return t.getElementsByTagName(I?"html":"body")[0]}return m.call(t,I?"html":"body")[0]};var Y=function(e){return p.call(e.ownerDocument||e,e,o.SHOW_ELEMENT|o.SHOW_COMMENT|o.SHOW_TEXT,function(){return o.FILTER_ACCEPT},false)};var G=function(e){if(e instanceof h||e instanceof c){return false}if(typeof e.nodeName!=="string"||typeof e.textContent!=="string"||typeof e.removeChild!=="function"||!(e.attributes instanceof l)||typeof e.removeAttribute!=="function"||typeof e.setAttribute!=="function"){return true}return false};var Z=function(e){var t,i;ie("beforeSanitizeElements",e,null);if(G(e)){q(e);return true}t=e.nodeName.toLowerCase();ie("uponSanitizeElement",e,{tagName:t});if(!x[t]||T[t]){if(L&&!j[t]&&typeof e.insertAdjacentHTML==="function"){try{e.insertAdjacentHTML("AfterEnd",e.innerHTML)}catch(e){}}q(e);return true}if($&&!e.firstElementChild&&(!e.content||!e.content.firstElementChild)){e.innerHTML=e.textContent.replace(/</g,"&lt;")}if(E&&e.nodeType===3){i=e.textContent;i=i.replace(A," ");i=i.replace(P," ");e.textContent=i}ie("afterSanitizeElements",e,null);return false};var K=/^data-[\w.\u00B7-\uFFFF-]/;var Q=/^(?:(?:(?:f|ht)tps?|mailto|tel):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i;var J=/^(?:\w+script|data):/i;var X=/[\x00-\x20\xA0\u1680\u180E\u2000-\u2029\u205f\u3000]/g;var ee=function(e){var i,s,a,r,o,l,h,c;ie("beforeSanitizeAttributes",e,null);l=e.attributes;if(!l){return}h={attrName:"",attrValue:"",keepAttr:true};c=l.length;while(c--){i=l[c];s=i.name;a=i.value;r=s.toLowerCase();h.attrName=r;h.attrValue=a;h.keepAttr=true;ie("uponSanitizeAttribute",e,h);a=h.attrValue;if(r==="name"&&e.nodeName==="IMG"&&l.id){o=l.id;l=Array.prototype.slice.apply(l);e.removeAttribute("id");e.removeAttribute(s);if(l.indexOf(o)>c){e.setAttribute("id",o.value)}}else{if(s==="id"){e.setAttribute(s,"")}e.removeAttribute(s)}if(!h.keepAttr){continue}if(R&&(r==="id"||r==="name")&&(a in t||a in n||a in B)){continue}if(E){a=a.replace(A," ");a=a.replace(P," ")}if(C[r]&&!S[r]&&(H[r]||Q.test(a.replace(X,""))||r==="src"&&a.indexOf("data:")===0&&U[e.nodeName.toLowerCase()])||M&&K.test(r)||D&&!J.test(a.replace(X,""))){try{e.setAttribute(s,a)}catch(e){}}}ie("afterSanitizeAttributes",e,null)};var te=function(e){var t;var i=Y(e);ie("beforeSanitizeShadowDOM",e,null);while(t=i.nextNode()){ie("uponSanitizeShadowNode",t,null);if(Z(t)){continue}if(t.content instanceof a){te(t.content)}ee(t)}ie("afterSanitizeShadowDOM",e,null)};var ie=function(e,t,n){if(!y[e]){return}y[e].forEach(function(e){e.call(i,t,n,z)})};i.sanitize=function(e,n){var r,o,l,h,c;if(!e){e=""}if(typeof e!=="string"){if(typeof e.toString!=="function"){throw new TypeError("toString is not a function")}else{e=e.toString()}}if(!i.isSupported){if(typeof t.toStaticHTML==="object"||typeof t.toStaticHTML==="function"){return t.toStaticHTML(e)}return e}V(n);if(!N&&!I&&e.indexOf("<")===-1){return e}r=W(e);if(!r){return N?null:""}h=Y(r);while(o=h.nextNode()){if(o.nodeType===3&&o===l){continue}if(Z(o)){continue}if(o.content instanceof a){te(o.content)}ee(o);l=o}if(N){if(O){c=g.call(r.ownerDocument);while(r.firstChild){c.appendChild(r.firstChild)}}else{c=r}if(F){c=v.call(s,c,true)}return c}return I?r.outerHTML:r.innerHTML};i.addHook=function(e,t){if(typeof t!=="function"){return}y[e]=y[e]||[];y[e].push(t)};i.removeHook=function(e){if(y[e]){y[e].pop()}};i.removeHooks=function(e){if(y[e]){y[e]=[]}};i.removeAllHooks=function(){y=[]};return i});(function(e){"use strict";if(typeof define==="function"&&define.amd){define(e)}else if(typeof module!="undefined"&&typeof module.exports!="undefined"){module.exports=e()}else if(typeof Package!=="undefined"){KvSortable=e()}else{window["KvSortable"]=e()}})(function(){"use strict";if(typeof window==="undefined"||typeof window.document=="undefined"){return function(){throw new Error("sortable.js requires a window with a document")}}var e,t,i,n,s,a,r,o,l,h,c,u,d,f,p={},m,g,v,y=/\s+/g,b="KvSortable"+(new Date).getTime(),w=window,x=w.document,_=w.parseInt,C=!!("draggable"in x.createElement("div")),k=function(e){e=x.createElement("x");e.style.cssText="pointer-events:auto";return e.style.pointerEvents==="auto"}(),T=false,S=Math.abs,M=[].slice,D=[],$=G(function(e,t,i){if(i&&t.scroll){var n,s,a=t.scrollSensitivity,l=t.scrollSpeed,h=e.clientX,c=e.clientY,u=window.innerWidth,d=window.innerHeight,f,m;if(o!==i){r=t.scroll;o=i;if(r===true){r=i;do{if(r.offsetWidth<r.scrollWidth||r.offsetHeight<r.scrollHeight){break}}while(r=r.parentNode)}}if(r){n=r;s=r.getBoundingClientRect();f=(S(s.right-h)<=a)-(S(s.left-h)<=a);m=(S(s.bottom-c)<=a)-(S(s.top-c)<=a)}if(!(f||m)){f=(u-h<=a)-(h<=a);m=(d-c<=a)-(c<=a);(f||m)&&(n=w)}if(p.vx!==f||p.vy!==m||p.el!==n){p.el=n;p.vx=f;p.vy=m;clearInterval(p.pid);if(n){p.pid=setInterval(function(){if(n===w){w.scrollTo(w.pageXOffset+f*l,w.pageYOffset+m*l)}else{m&&(n.scrollTop+=m*l);f&&(n.scrollLeft+=f*l)}},24)}}}},30),E=function(e){var t=e.group;if(!t||typeof t!="object"){t=e.group={name:t}}["pull","put"].forEach(function(e){if(!(e in t)){t[e]=true}});e.groups=" "+t.name+(t.put.join?" "+t.put.join(" "):"")+" "};function A(e,t){if(!(e&&e.nodeType&&e.nodeType===1)){throw"KvSortable: `el` must be HTMLElement, and not "+{}.toString.call(e)}this.el=e;this.options=t=Z({},t);e[b]=this;var i={group:Math.random(),sort:true,disabled:false,store:null,handle:null,scroll:true,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"kvsortable-ghost",chosenClass:"kvsortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:false,dragoverBubble:false,dataIdAttr:"data-id",delay:0,forceFallback:false,fallbackClass:"kvsortable-fallback",fallbackOnBody:false};for(var n in i){!(n in t)&&(t[n]=i[n])}E(t);for(var s in this){if(s.charAt(0)==="_"){this[s]=this[s].bind(this)}}this.nativeDraggable=t.forceFallback?false:C;O(e,"mousedown",this._onTapStart);O(e,"touchstart",this._onTapStart);if(this.nativeDraggable){O(e,"dragover",this);O(e,"dragenter",this)}D.push(this._onDragOver);t.store&&this.sort(t.store.get(this))}A.prototype={constructor:A,_onTapStart:function(e){var t=this,i=this.el,n=this.options,s=e.type,a=e.touches&&e.touches[0],r=(a||e).target,o=r,l=n.filter;if(s==="mousedown"&&e.button!==0||n.disabled){return}r=I(r,n.draggable,i);if(!r){return}u=W(r,n.draggable);if(typeof l==="function"){if(l.call(this,e,r,this)){U(t,o,"filter",r,i,u);e.preventDefault();return}}else if(l){l=l.split(",").some(function(e){e=I(o,e.trim(),i);if(e){U(t,e,"filter",r,i,u);return true}});if(l){e.preventDefault();return}}if(n.handle&&!I(o,n.handle,i)){return}this._prepareDragStart(e,a,r)},_prepareDragStart:function(i,n,r){var o=this,l=o.el,h=o.options,c=l.ownerDocument,u;if(r&&!e&&r.parentNode===l){m=i;s=l;e=r;t=e.parentNode;a=e.nextSibling;f=h.group;u=function(){o._disableDelayedDrag();e.draggable=true;R(e,o.options.chosenClass,true);o._triggerDragStart(n)};h.ignore.split(",").forEach(function(t){j(e,t.trim(),z)});O(c,"mouseup",o._onDrop);O(c,"touchend",o._onDrop);O(c,"touchcancel",o._onDrop);if(h.delay){O(c,"mouseup",o._disableDelayedDrag);O(c,"touchend",o._disableDelayedDrag);O(c,"touchcancel",o._disableDelayedDrag);O(c,"mousemove",o._disableDelayedDrag);O(c,"touchmove",o._disableDelayedDrag);o._dragStartTimer=setTimeout(u,h.delay)}else{u()}}},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer);F(e,"mouseup",this._disableDelayedDrag);F(e,"touchend",this._disableDelayedDrag);F(e,"touchcancel",this._disableDelayedDrag);F(e,"mousemove",this._disableDelayedDrag);F(e,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(t){if(t){m={target:e,clientX:t.clientX,clientY:t.clientY};this._onDragStart(m,"touch")}else if(!this.nativeDraggable){this._onDragStart(m,true)}else{O(e,"dragend",this);O(s,"dragstart",this._onDragStart)}try{if(x.selection){x.selection.empty()}else{window.getSelection().removeAllRanges()}}catch(e){}},_dragStarted:function(){if(s&&e){R(e,this.options.ghostClass,true);A.active=this;U(this,s,"start",e,s,u)}},_emulateDragOver:function(){if(g){if(this._lastX===g.clientX&&this._lastY===g.clientY){return}this._lastX=g.clientX;this._lastY=g.clientY;if(!k){L(i,"display","none")}var e=x.elementFromPoint(g.clientX,g.clientY),t=e,n=" "+this.options.group.name+"",s=D.length;if(t){do{if(t[b]&&t[b].options.groups.indexOf(n)>-1){while(s--){D[s]({clientX:g.clientX,clientY:g.clientY,target:e,rootEl:t})}break}e=t}while(t=t.parentNode)}if(!k){L(i,"display","")}}},_onTouchMove:function(e){if(m){if(!A.active){this._dragStarted()}this._appendGhost();var t=e.touches?e.touches[0]:e,n=t.clientX-m.clientX,s=t.clientY-m.clientY,a=e.touches?"translate3d("+n+"px,"+s+"px,0)":"translate("+n+"px,"+s+"px)";v=true;g=t;L(i,"webkitTransform",a);L(i,"mozTransform",a);L(i,"msTransform",a);L(i,"transform",a);e.preventDefault()}},_appendGhost:function(){if(!i){var t=e.getBoundingClientRect(),n=L(e),a=this.options,r;i=e.cloneNode(true);R(i,a.ghostClass,false);R(i,a.fallbackClass,true);L(i,"top",t.top-_(n.marginTop,10));L(i,"left",t.left-_(n.marginLeft,10));L(i,"width",t.width);L(i,"height",t.height);L(i,"opacity","0.8");L(i,"position","fixed");L(i,"zIndex","100000");L(i,"pointerEvents","none");a.fallbackOnBody&&x.body.appendChild(i)||s.appendChild(i);r=i.getBoundingClientRect();L(i,"width",t.width*2-r.width);L(i,"height",t.height*2-r.height)}},_onDragStart:function(t,i){var a=t.dataTransfer,r=this.options;this._offUpEvents();if(f.pull=="clone"){n=e.cloneNode(true);L(n,"display","none");s.insertBefore(n,e)}if(i){if(i==="touch"){O(x,"touchmove",this._onTouchMove);O(x,"touchend",this._onDrop);O(x,"touchcancel",this._onDrop)}else{O(x,"mousemove",this._onTouchMove);O(x,"mouseup",this._onDrop)}this._loopId=setInterval(this._emulateDragOver,50)}else{if(a){a.effectAllowed="move";r.setData&&r.setData.call(this,a,e)}O(x,"drop",this);setTimeout(this._dragStarted,0)}},_onDragOver:function(r){var o=this.el,u,d,p,m=this.options,g=m.group,y=g.put,w=f===g,x=m.sort;if(r.preventDefault!==void 0){r.preventDefault();!m.dragoverBubble&&r.stopPropagation()}v=true;if(f&&!m.disabled&&(w?x||(p=!s.contains(e)):f.pull&&y&&(f.name===g.name||y.indexOf&&~y.indexOf(f.name)))&&(r.rootEl===void 0||r.rootEl===this.el)){$(r,m,this.el);if(T){return}u=I(r.target,m.draggable,o);d=e.getBoundingClientRect();if(p){P(true);if(n||a){s.insertBefore(e,n||a)}else if(!x){s.appendChild(e)}return}if(o.children.length===0||o.children[0]===i||o===r.target&&(u=V(o,r))){if(u){if(u.animated){return}_=u.getBoundingClientRect()}P(w);if(H(s,o,e,d,u,_)!==false){if(!e.contains(o)){o.appendChild(e);t=o}this._animate(d,e);u&&this._animate(_,u)}}else if(u&&!u.animated&&u!==e&&u.parentNode[b]!==void 0){if(l!==u){l=u;h=L(u);c=L(u.parentNode)}var _=u.getBoundingClientRect(),C=_.right-_.left,k=_.bottom-_.top,S=/left|right|inline/.test(h.cssFloat+h.display)||c.display=="flex"&&c["flex-direction"].indexOf("row")===0,M=u.offsetWidth>e.offsetWidth,D=u.offsetHeight>e.offsetHeight,E=(S?(r.clientX-_.left)/C:(r.clientY-_.top)/k)>.5,A=u.nextElementSibling,N=H(s,o,e,d,u,_),O;if(N!==false){T=true;setTimeout(B,30);P(w);if(N===1||N===-1){O=N===1}else if(S){var F=e.offsetTop,R=u.offsetTop;if(F===R){O=u.previousElementSibling===e&&!M||E&&M}else{O=R>F}}else{O=A!==e&&!D||E&&D}if(!e.contains(o)){if(O&&!A){o.appendChild(e)}else{u.parentNode.insertBefore(e,O?A:u)}}t=e.parentNode;this._animate(d,e);this._animate(_,u)}}}},_animate:function(e,t){var i=this.options.animation;if(i){var n=t.getBoundingClientRect();L(t,"transition","none");L(t,"transform","translate3d("+(e.left-n.left)+"px,"+(e.top-n.top)+"px,0)");t.offsetWidth;L(t,"transition","all "+i+"ms");L(t,"transform","translate3d(0,0,0)");clearTimeout(t.animated);t.animated=setTimeout(function(){L(t,"transition","");L(t,"transform","");t.animated=false},i)}},_offUpEvents:function(){var e=this.el.ownerDocument;F(x,"touchmove",this._onTouchMove);F(e,"mouseup",this._onDrop);F(e,"touchend",this._onDrop);F(e,"touchcancel",this._onDrop)},_onDrop:function(r){var o=this.el,l=this.options;clearInterval(this._loopId);clearInterval(p.pid);clearTimeout(this._dragStartTimer);F(x,"mousemove",this._onTouchMove);if(this.nativeDraggable){F(x,"drop",this);F(o,"dragstart",this._onDragStart)}this._offUpEvents();if(r){if(v){r.preventDefault();!l.dropBubble&&r.stopPropagation()}i&&i.parentNode.removeChild(i);if(e){if(this.nativeDraggable){F(e,"dragend",this)}z(e);R(e,this.options.ghostClass,false);R(e,this.options.chosenClass,false);if(s!==t){d=W(e,l.draggable);if(d>=0){U(null,t,"sort",e,s,u,d);U(this,s,"sort",e,s,u,d);U(null,t,"add",e,s,u,d);U(this,s,"remove",e,s,u,d)}}else{n&&n.parentNode.removeChild(n);if(e.nextSibling!==a){d=W(e,l.draggable);if(d>=0){U(this,s,"update",e,s,u,d);U(this,s,"sort",e,s,u,d)}}}if(A.active){if(d===null||d===-1){d=u}U(this,s,"end",e,s,u,d);this.save()}}}this._nulling()},_nulling:function(){s=e=t=i=a=n=r=o=m=g=v=d=l=h=f=A.active=null},handleEvent:function(t){var i=t.type;if(i==="dragover"||i==="dragenter"){if(e){this._onDragOver(t);N(t)}}else if(i==="drop"||i==="dragend"){this._onDrop(t)}},toArray:function(){var e=[],t,i=this.el.children,n=0,s=i.length,a=this.options;for(;n<s;n++){t=i[n];if(I(t,a.draggable,this.el)){e.push(t.getAttribute(a.dataIdAttr)||q(t))}}return e},sort:function(e){var t={},i=this.el;this.toArray().forEach(function(e,n){var s=i.children[n];if(I(s,this.options.draggable,i)){t[e]=s}},this);e.forEach(function(e){if(t[e]){i.removeChild(t[e]);i.appendChild(t[e])}})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return I(e,t||this.options.draggable,this.el)},option:function(e,t){var i=this.options;if(t===void 0){return i[e]}else{i[e]=t;if(e==="group"){E(i)}}},destroy:function(){var e=this.el;e[b]=null;F(e,"mousedown",this._onTapStart);F(e,"touchstart",this._onTapStart);if(this.nativeDraggable){F(e,"dragover",this);F(e,"dragenter",this)}Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")});D.splice(D.indexOf(this._onDragOver),1);this._onDrop();this.el=e=null}};function P(t){if(n&&n.state!==t){L(n,"display",t?"none":"");!t&&n.state&&s.insertBefore(n,e);n.state=t}}function I(e,t,i){if(e){i=i||x;do{if(t===">*"&&e.parentNode===i||Y(e,t)){return e}}while(e!==i&&(e=e.parentNode))}return null}function N(e){if(e.dataTransfer){e.dataTransfer.dropEffect="move"}e.preventDefault()}function O(e,t,i){e.addEventListener(t,i,false)}function F(e,t,i){e.removeEventListener(t,i,false)}function R(e,t,i){if(e){if(e.classList){e.classList[i?"add":"remove"](t)}else{var n=(" "+e.className+" ").replace(y," ").replace(" "+t+" "," ");e.className=(n+(i?" "+t:"")).replace(y," ")}}}function L(e,t,i){var n=e&&e.style;if(n){if(i===void 0){if(x.defaultView&&x.defaultView.getComputedStyle){i=x.defaultView.getComputedStyle(e,"")}else if(e.currentStyle){i=e.currentStyle}return t===void 0?i:i[t]}else{if(!(t in n)){t="-webkit-"+t}n[t]=i+(typeof i==="string"?"":"px")}}}function j(e,t,i){if(e){var n=e.getElementsByTagName(t),s=0,a=n.length;if(i){for(;s<a;s++){i(n[s],s)}}return n}return[]}function U(e,t,i,s,a,r,o){var l=x.createEvent("Event"),h=(e||t[b]).options,c="on"+i.charAt(0).toUpperCase()+i.substr(1);l.initEvent(i,true,true);l.to=t;l.from=a||t;l.item=s||t;l.clone=n;l.oldIndex=r;l.newIndex=o;t.dispatchEvent(l);if(h[c]){h[c].call(e,l)}}function H(e,t,i,n,s,a){var r,o=e[b],l=o.options.onMove,h;r=x.createEvent("Event");r.initEvent("move",true,true);r.to=t;r.from=e;r.dragged=i;r.draggedRect=n;r.related=s||t;r.relatedRect=a||t.getBoundingClientRect();e.dispatchEvent(r);if(l){h=l.call(o,r)}return h}function z(e){e.draggable=false}function B(){T=false}function V(e,t){var i=e.lastElementChild,n=i.getBoundingClientRect();return(t.clientY-(n.top+n.height)>5||t.clientX-(n.right+n.width)>5)&&i}function q(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,n=0;while(i--){n+=t.charCodeAt(i)}return n.toString(36)}function W(e,t){var i=0;if(!e||!e.parentNode){return-1}while(e&&(e=e.previousElementSibling)){if(e.nodeName.toUpperCase()!=="TEMPLATE"&&Y(e,t)){i++}}return i}function Y(e,t){if(e){t=t.split(".");var i=t.shift().toUpperCase(),n=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return(i===""||e.nodeName.toUpperCase()==i)&&(!t.length||((" "+e.className+" ").match(n)||[]).length==t.length)}return false}function G(e,t){var i,n;return function(){if(i===void 0){i=arguments;n=this;setTimeout(function(){if(i.length===1){e.call(n,i[0])}else{e.apply(n,i)}i=void 0},t)}}}function Z(e,t){if(e&&t){for(var i in t){if(t.hasOwnProperty(i)){e[i]=t[i]}}}return e}A.utils={on:O,off:F,css:L,find:j,is:function(e,t){return!!I(e,t,e)},extend:Z,throttle:G,closest:I,toggleClass:R,index:W};A.create=function(e,t){return new A(e,t)};A.version="1.4.2";return A});(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}})(function(e){"use strict";e.fn.kvsortable=function(t){var i,n=arguments;this.each(function(){var s=e(this),a=s.data("kvsortable");if(!a&&(t instanceof Object||!t)){a=new KvSortable(this,t);s.data("kvsortable",a)}if(a){if(t==="widget"){return a}else if(t==="destroy"){a.destroy();s.removeData("kvsortable")}else if(typeof a[t]==="function"){i=a[t].apply(a,[].slice.call(n,1))}else if(t in a.options){i=a.option.apply(a,n)}}});return i===void 0?this:i}});(function(e){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{if(typeof module==="object"&&module.exports){module.exports=e(require("jquery"))}else{e(window.jQuery)}}})(function(e){"use strict";e.fn.fileinputLocales={};e.fn.fileinputThemes={};var t,i;t={FRAMES:".kv-preview-thumb",SORT_CSS:"file-sortable",STYLE_SETTING:'style="width:{width};height:{height};"',OBJECT_PARAMS:'<param name="controller" value="true" />\n'+'<param name="allowFullScreen" value="true" />\n'+'<param name="allowScriptAccess" value="always" />\n'+'<param name="autoPlay" value="false" />\n'+'<param name="autoStart" value="false" />\n'+'<param name="quality" value="high" />\n',DEFAULT_PREVIEW:'<div class="file-preview-other">\n'+'<span class="{previewFileIconClass}">{previewFileIcon}</span>\n'+"</div>",MODAL_ID:"kvFileinputModal",MODAL_EVENTS:["show","shown","hide","hidden","loaded"],objUrl:window.URL||window.webkitURL,compare:function(e,t,i){return e!==undefined&&(i?e===t:e.match(t))},isIE:function(e){if(navigator.appName!=="Microsoft Internet Explorer"){return false}if(e===10){return new RegExp("msie\\s"+e,"i").test(navigator.userAgent)}var t=document.createElement("div"),i;t.innerHTML="<!--[if IE "+e+"]> <i></i> <![endif]-->";i=t.getElementsByTagName("i").length;document.body.appendChild(t);t.parentNode.removeChild(t);return i},initModal:function(t){var i=e("body");if(i.length){t.appendTo(i)}},isEmpty:function(t,i){return t===undefined||t===null||t.length===0||i&&e.trim(t)===""},isArray:function(e){return Array.isArray(e)||Object.prototype.toString.call(e)==="[object Array]"},ifSet:function(e,t,i){i=i||"";return t&&typeof t==="object"&&e in t?t[e]:i},cleanArray:function(e){if(!(e instanceof Array)){e=[]}return e.filter(function(e){return e!==undefined&&e!==null})},spliceArray:function(e,t){var i,n=0,s=[];if(!(e instanceof Array)){return[]}for(i=0;i<e.length;i++){if(i!==t){s[n]=e[i];n++}}return s},getNum:function(e,t){t=t||0;if(typeof e==="number"){return e}if(typeof e==="string"){e=parseFloat(e)}return isNaN(e)?t:e},hasFileAPISupport:function(){return!!(window.File&&window.FileReader)},hasDragDropSupport:function(){var e=document.createElement("div");return!t.isIE(9)&&(e.draggable!==undefined||e.ondragstart!==undefined&&e.ondrop!==undefined)},hasFileUploadSupport:function(){return t.hasFileAPISupport()&&window.FormData},addCss:function(e,t){e.removeClass(t).addClass(t)},getElement:function(i,n,s){return t.isEmpty(i)||t.isEmpty(i[n])?s:e(i[n])},uniqId:function(){return Math.round((new Date).getTime()+Math.random()*100)},htmlEncode:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},replaceTags:function(t,i){var n=t;if(!i){return n}e.each(i,function(e,t){if(typeof t==="function"){t=t()}n=n.split(e).join(t)});return n},cleanMemory:function(e){var i=e.is("img")?e.attr("src"):e.find("source").attr("src");t.objUrl.revokeObjectURL(i)},findFileName:function(e){var t=e.lastIndexOf("/");if(t===-1){t=e.lastIndexOf("\\")}return e.split(e.substring(t,t+1)).pop()},checkFullScreen:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},toggleFullScreen:function(e){var i=document,n=i.documentElement;if(n&&e&&!t.checkFullScreen()){if(n.requestFullscreen){n.requestFullscreen()}else if(n.msRequestFullscreen){n.msRequestFullscreen()}else if(n.mozRequestFullScreen){n.mozRequestFullScreen()}else if(n.webkitRequestFullscreen){n.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}}else{if(i.exitFullscreen){i.exitFullscreen()}else if(i.msExitFullscreen){i.msExitFullscreen()}else if(i.mozCancelFullScreen){i.mozCancelFullScreen()}else if(i.webkitExitFullscreen){i.webkitExitFullscreen()}}},moveArray:function(e,t,i){if(i>=e.length){var n=i-e.length;while(n--+1){e.push(undefined)}}e.splice(i,0,e.splice(t,1)[0]);return e},cleanZoomCache:function(e){var t=e.closest(".kv-zoom-cache-theme");if(!t.length){t=e.closest(".kv-zoom-cache")}t.remove()}};i=function(i,n){var s=this;s.$element=e(i);if(!s._validate()){return}s.isPreviewable=t.hasFileAPISupport();s.isIE9=t.isIE(9);s.isIE10=t.isIE(10);if(s.isPreviewable||s.isIE9){s._init(n);s._listen()}else{s.$element.removeClass("file-loading")}};i.prototype={constructor:i,_init:function(i){var n=this,s=n.$element,a,r;n.options=i;e.each(i,function(e,i){switch(e){case"minFileCount":case"maxFileCount":case"maxFileSize":n[e]=t.getNum(i);break;default:n[e]=i;break}});n.$form=s.closest("form");n._initTemplateDefaults();n.fileInputCleared=false;n.fileBatchCompleted=true;if(!n.isPreviewable){n.showPreview=false}n.uploadFileAttr=!t.isEmpty(s.attr("name"))?s.attr("name"):"file_data";n.reader=null;n.formdata={};n.clearStack();n.uploadCount=0;n.uploadStatus={};n.uploadLog=[];n.uploadAsyncCount=0;n.loadedImages=[];n.totalImagesCount=0;n.ajaxRequests=[];n.isError=false;n.ajaxAborted=false;n.cancelling=false;r=n._getLayoutTemplate("progress");n.progressTemplate=r.replace("{class}",n.progressClass);n.progressCompleteTemplate=r.replace("{class}",n.progressCompleteClass);n.progressErrorTemplate=r.replace("{class}",n.progressErrorClass);n.dropZoneEnabled=t.hasDragDropSupport()&&n.dropZoneEnabled;n.isDisabled=s.attr("disabled")||s.attr("readonly");if(n.isDisabled){s.attr("disabled",true)}n.isUploadable=t.hasFileUploadSupport()&&!t.isEmpty(n.uploadUrl);n.isClickable=n.browseOnZoneClick&&n.showPreview&&(n.isUploadable&&n.dropZoneEnabled||!t.isEmpty(n.defaultPreviewContent));n.slug=typeof i.slugCallback==="function"?i.slugCallback:n._slugDefault;n.mainTemplate=n.showCaption?n._getLayoutTemplate("main1"):n._getLayoutTemplate("main2");n.captionTemplate=n._getLayoutTemplate("caption");n.previewGenericTemplate=n._getPreviewTemplate("generic");if(n.resizeImage&&(n.maxImageWidth||n.maxImageHeight)){n.imageCanvas=document.createElement("canvas");n.imageCanvasContext=n.imageCanvas.getContext("2d")}if(t.isEmpty(s.attr("id"))){s.attr("id",t.uniqId())}n.namespace=".fileinput_"+s.attr("id").replace(/-/g,"_");if(n.$container===undefined){n.$container=n._createContainer()}else{n._refreshContainer()}a=n.$container;n.$dropZone=a.find(".file-drop-zone");n.$progress=a.find(".kv-upload-progress");n.$btnUpload=a.find(".fileinput-upload");n.$captionContainer=t.getElement(i,"elCaptionContainer",a.find(".file-caption"));n.$caption=t.getElement(i,"elCaptionText",a.find(".file-caption-name"));n.$previewContainer=t.getElement(i,"elPreviewContainer",a.find(".file-preview"));n.$preview=t.getElement(i,"elPreviewImage",a.find(".file-preview-thumbnails"));n.$previewStatus=t.getElement(i,"elPreviewStatus",a.find(".file-preview-status"));n.$errorContainer=t.getElement(i,"elErrorContainer",n.$previewContainer.find(".kv-fileinput-error"));if(!t.isEmpty(n.msgErrorClass)){t.addCss(n.$errorContainer,n.msgErrorClass)}n.$errorContainer.hide();n.previewInitId="preview-"+t.uniqId();n._initPreviewCache();n._initPreview(true);n._initPreviewActions();n._setFileDropZoneTitle();s.removeClass("file-loading");if(s.attr("disabled")){n.disable()}n._initZoom()},_initTemplateDefaults:function(){var i=this,n,s,a,r,o,l,h,c,u,d,f,p,m,g,v,y,b,w,x,_,C,k,T,S,M,D,$,E,A,P,I,N,O,F;n="{preview}\n"+'<div class="kv-upload-progress hide"></div>\n'+'<div class="input-group {class}">\n'+"   {caption}\n"+'   <div class="input-group-btn">\n'+"       {remove}\n"+"       {cancel}\n"+"       {upload}\n"+"       {browse}\n"+"   </div>\n"+"</div>";s='{preview}\n<div class="kv-upload-progress hide"></div>\n{remove}\n{cancel}\n{upload}\n{browse}\n';a='<div class="file-preview {class}">\n'+"    {close}"+'    <div class="{dropClass}">\n'+'    <div class="file-preview-thumbnails">\n'+"    </div>\n"+'    <div class="clearfix"></div>'+'    <div class="file-preview-status text-center text-success"></div>\n'+'    <div class="kv-fileinput-error"></div>\n'+"    </div>\n"+"</div>";o='<div class="close fileinput-remove">&times;</div>\n';r='<i class="glyphicon glyphicon-file kv-caption-icon"></i>';l='<div tabindex="500" class="form-control file-caption {class}">\n'+'   <div class="file-caption-name"></div>\n'+"</div>\n";h='<button type="{type}" tabindex="500" title="{title}" class="{css}" '+"{status}>{icon} {label}</button>";c='<a href="{href}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</a>';u='<div tabindex="500" class="{css}" {status}>{icon} {label}</div>';d='<div id="'+t.MODAL_ID+'" class="file-zoom-dialog modal fade" '+'tabindex="-1" aria-labelledby="'+t.MODAL_ID+'Label"></div>';f='<div class="modal-dialog modal-lg" role="document">\n'+'  <div class="modal-content">\n'+'    <div class="modal-header">\n'+'      <div class="kv-zoom-actions pull-right">{toggleheader}{fullscreen}{borderless}{close}</div>\n'+'      <h3 class="modal-title">{heading} <small><span class="kv-zoom-title"></span></small></h3>\n'+"    </div>\n"+'    <div class="modal-body">\n'+'      <div class="floating-buttons"></div>\n'+'      <div class="kv-zoom-body file-zoom-content {zoomFrameClass}"></div>\n'+"{prev} {next}\n"+"    </div>\n"+"  </div>\n"+"</div>\n";p='<div class="progress">\n'+'    <div class="{class}" role="progressbar"'+' aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n'+"        {status}\n"+"     </div>\n"+"</div>";m=" <samp>({sizeText})</samp>";g='<div class="file-thumbnail-footer">\n'+'    <div class="file-footer-caption" title="{caption}">{caption}<br>{size}</div>\n'+"    {progress} {actions}\n"+"</div>";v='<div class="file-upload-indicator" title="{indicatorTitle}">{indicator}</div>\n'+"{drag}\n"+'<div class="file-actions">\n'+'    <div class="file-footer-buttons">\n'+"        {upload} {delete} {zoom} {other}"+"    </div>\n"+'    <div class="clearfix"></div>\n'+"</div>";y='<button type="button" class="kv-file-remove {removeClass}" '+'title="{removeTitle}" {dataUrl}{dataKey}>{removeIcon}</button>\n';b='<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">'+"{uploadIcon}</button>";w='<button type="button" class="kv-file-zoom {zoomClass}" '+'title="{zoomTitle}">{zoomIcon}</button>';x='<span class="file-drag-handle {dragClass}" title="{dragTitle}">{dragIcon}</span>';_='<div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}"'+' data-template="{template}"';C=_+'><div class="kv-file-content">\n';k=_+' title="{caption}"><div class="kv-file-content">\n';T="</div>{footer}\n</div>\n";S="{content}\n";M='<div class="kv-preview-data file-preview-html" title="{caption}" '+t.STYLE_SETTING+">{data}</div>\n";D='<img src="{data}" class="file-preview-image kv-preview-data" title="{caption}" alt="{caption}" '+t.STYLE_SETTING+">\n";$='<textarea class="kv-preview-data file-preview-text" title="{caption}" readonly '+t.STYLE_SETTING+">{data}</textarea>\n";E='<video class="kv-preview-data file-preview-video" width="{width}" '+'height="{height}" controls>\n'+'<source src="{data}" type="{type}">\n'+t.DEFAULT_PREVIEW+"\n</video>\n";A='<div class="file-preview-audio"><audio class="kv-preview-data" controls>\n<source src="{data}" '+'type="{type}">\n'+t.DEFAULT_PREVIEW+"\n</audio></div>\n";P='<object class="kv-preview-data file-object" type="application/x-shockwave-flash" '+'width="{width}" height="{height}" data="{data}">\n'+t.OBJECT_PARAMS+" "+t.DEFAULT_PREVIEW+"\n</object>\n";I='<object class="kv-preview-data file-object" data="{data}" type="{type}" '+'width="{width}" height="{height}">\n'+'<param name="movie" value="{caption}" />\n'+t.OBJECT_PARAMS+" "+t.DEFAULT_PREVIEW+"\n</object>\n";N='<embed class="kv-preview-data" src="{data}" '+'width="{width}" height="{height}" type="application/pdf">\n';O='<div class="kv-preview-data file-preview-other-frame">\n'+t.DEFAULT_PREVIEW+"\n</div>\n";F='<div class="kv-zoom-cache" style="display:none">{zoomContent}</div>';i.defaults={layoutTemplates:{main1:n,main2:s,preview:a,close:o,fileIcon:r,caption:l,modalMain:d,modal:f,progress:p,size:m,footer:g,actions:v,actionDelete:y,actionUpload:b,actionZoom:w,actionDrag:x,btnDefault:h,btnLink:c,btnBrowse:u,zoomCache:F},previewMarkupTags:{tagBefore1:C,tagBefore2:k,tagAfter:T},previewContentTemplates:{generic:S,html:M,image:D,text:$,video:E,audio:A,flash:P,object:I,pdf:N,other:O},allowedPreviewTypes:["image","html","text","video","audio","flash","pdf","object"],previewTemplates:{},previewSettings:{image:{width:"auto",height:"160px"},html:{width:"213px",height:"160px"},text:{width:"213px",height:"160px"},video:{width:"213px",height:"160px"},audio:{width:"213px",height:"80px"},flash:{width:"213px",height:"160px"},object:{width:"160px",height:"auto"},pdf:{width:"160px",height:"160px"},other:{width:"160px",height:"160px"}},previewZoomSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"100%",height:"100%","min-height":"480px"},text:{width:"100%",height:"100%","min-height":"480px"},video:{width:"auto",height:"100%","max-width":"100%"},audio:{width:"100%",height:"30px"},flash:{width:"auto",height:"480px"},object:{width:"auto",height:"100%","min-height":"480px"},pdf:{width:"100%",height:"100%","min-height":"480px"},other:{width:"auto",height:"100%","min-height":"480px"}},fileTypeSettings:{image:function(e,i){
return t.compare(e,"image.*")||t.compare(i,/\.(gif|png|jpe?g)$/i)},html:function(e,i){return t.compare(e,"text/html")||t.compare(i,/\.(htm|html)$/i)},text:function(e,i){return t.compare(e,"text.*")||t.compare(i,/\.(xml|javascript)$/i)||t.compare(i,/\.(txt|md|csv|nfo|ini|json|php|js|css)$/i)},video:function(e,i){return t.compare(e,"video.*")&&(t.compare(e,/(ogg|mp4|mp?g|mov|webm|3gp)$/i)||t.compare(i,/\.(og?|mp4|webm|mp?g|mov|3gp)$/i))},audio:function(e,i){return t.compare(e,"audio.*")&&(t.compare(i,/(ogg|mp3|mp?g|wav)$/i)||t.compare(i,/\.(og?|mp3|mp?g|wav)$/i))},flash:function(e,i){return t.compare(e,"application/x-shockwave-flash",true)||t.compare(i,/\.(swf)$/i)},pdf:function(e,i){return t.compare(e,"application/pdf",true)||t.compare(i,/\.(pdf)$/i)},object:function(){return true},other:function(){return true}},fileActionSettings:{showRemove:true,showUpload:true,showZoom:true,showDrag:true,removeIcon:'<i class="glyphicon glyphicon-trash text-danger"></i>',removeClass:"btn btn-xs btn-default",removeTitle:"Remove file",uploadIcon:'<i class="glyphicon glyphicon-upload text-info"></i>',uploadClass:"btn btn-xs btn-default",uploadTitle:"Upload file",zoomIcon:'<i class="glyphicon glyphicon-zoom-in"></i>',zoomClass:"btn btn-xs btn-default",zoomTitle:"View Details",dragIcon:'<i class="glyphicon glyphicon-menu-hamburger"></i>',dragClass:"text-info",dragTitle:"Move / Rearrange",dragSettings:{},indicatorNew:'<i class="glyphicon glyphicon-hand-down text-warning"></i>',indicatorSuccess:'<i class="glyphicon glyphicon-ok-sign text-success"></i>',indicatorError:'<i class="glyphicon glyphicon-exclamation-sign text-danger"></i>',indicatorLoading:'<i class="glyphicon glyphicon-hand-up text-muted"></i>',indicatorNewTitle:"Not uploaded yet",indicatorSuccessTitle:"Uploaded",indicatorErrorTitle:"Upload Error",indicatorLoadingTitle:"Uploading ..."}};e.each(i.defaults,function(t,n){if(t==="allowedPreviewTypes"){if(i.allowedPreviewTypes===undefined){i.allowedPreviewTypes=n}return}i[t]=e.extend(true,{},n,i[t])});i._initPreviewTemplates()},_initPreviewTemplates:function(){var i=this,n=i.defaults,s=i.previewMarkupTags,a,r=s.tagAfter;e.each(n.previewContentTemplates,function(e,n){if(t.isEmpty(i.previewTemplates[e])){a=s.tagBefore2;if(e==="generic"||e==="image"||e==="html"||e==="text"){a=s.tagBefore1}i.previewTemplates[e]=a+n+r}})},_initPreviewCache:function(){var i=this;i.previewCache={data:{},init:function(){var e=i.initialPreview;if(e.length>0&&!t.isArray(e)){e=e.split(i.initialPreviewDelimiter)}i.previewCache.data={content:e,config:i.initialPreviewConfig,tags:i.initialPreviewThumbTags}},fetch:function(){return i.previewCache.data.content.filter(function(e){return e!==null})},count:function(e){return!!i.previewCache.data&&!!i.previewCache.data.content?e?i.previewCache.data.content.length:i.previewCache.fetch().length:0},get:function(n,s){var a="init_"+n,r=i.previewCache.data,o=r.config[n],l=r.content[n],h=i.previewInitId+"-"+a,c,u,d,f,p,m,g,v=t.ifSet("previewAsData",o,i.initialPreviewAsData),y=function(e,n,s,a,r,o,l,h,c){h=" file-preview-initial "+t.SORT_CSS+(h?" "+h:"");return i._generatePreviewTemplate(e,n,s,a,r,false,null,h,o,l,c)};if(!l){return""}s=s===undefined?true:s;d=t.ifSet("type",o,i.initialPreviewFileType||"generic");p=t.ifSet("filename",o,t.ifSet("caption",o));m=t.ifSet("filetype",o,d);f=i.previewCache.footer(n,s,o&&o.size||null);g=t.ifSet("frameClass",o);if(v){c=y(d,l,p,m,h,f,a,g)}else{c=y("generic",l,p,m,h,f,a,g,d).replace(/\{content}/g,r.content[n])}if(r.tags.length&&r.tags[n]){c=t.replaceTags(c,r.tags[n])}if(!t.isEmpty(o)&&!t.isEmpty(o.frameAttr)){u=e(document.createElement("div")).html(c);u.find(".file-preview-initial").attr(o.frameAttr);c=u.html();u.remove()}return c},add:function(e,n,s,a){var r=i.previewCache.data,o;if(!t.isArray(e)){e=e.split(i.initialPreviewDelimiter)}if(a){o=r.content.push(e)-1;r.config[o]=n;r.tags[o]=s}else{o=e.length-1;r.content=e;r.config=n;r.tags=s}i.previewCache.data=r;return o},set:function(e,n,s,a){var r=i.previewCache.data,o,l;if(!e||!e.length){return}if(!t.isArray(e)){e=e.split(i.initialPreviewDelimiter)}l=e.filter(function(e){return e!==null});if(!l.length){return}if(r.content===undefined){r.content=[]}if(r.config===undefined){r.config=[]}if(r.tags===undefined){r.tags=[]}if(a){for(o=0;o<e.length;o++){if(e[o]){r.content.push(e[o])}}for(o=0;o<n.length;o++){if(n[o]){r.config.push(n[o])}}for(o=0;o<s.length;o++){if(s[o]){r.tags.push(s[o])}}}else{r.content=e;r.config=n;r.tags=s}i.previewCache.data=r},unset:function(e){var t=i.previewCache.count();if(!t){return}if(t===1){i.previewCache.data.content=[];i.previewCache.data.config=[];i.previewCache.data.tags=[];i.initialPreview=[];i.initialPreviewConfig=[];i.initialPreviewThumbTags=[];return}i.previewCache.data.content[e]=null;i.previewCache.data.config[e]=null;i.previewCache.data.tags[e]=null},out:function(){var e="",t,n=i.previewCache.count(true),s;if(n===0){return{content:"",caption:""}}for(s=0;s<n;s++){e+=i.previewCache.get(s)}t=i._getMsgSelected(i.previewCache.count());return{content:e,caption:t}},footer:function(e,n,s){var a=i.previewCache.data;if(!a||!a.config||a.config.length===0||t.isEmpty(a.config[e])){return""}n=n===undefined?true:n;var r=a.config[e],o=t.ifSet("caption",r),l="",h=t.ifSet("width",r,"auto"),c=t.ifSet("url",r,false),u=t.ifSet("key",r,null),d=i.fileActionSettings,f=t.ifSet("showDelete",r,true),p=t.ifSet("showZoom",r,d.showZoom),m=t.ifSet("showDrag",r,d.showDrag),g=c===false&&n;if(i.initialPreviewShowDelete){l=i._renderFileActions(false,f,p,m,g,c,u,true)}return i._getLayoutTemplate("footer").replace(/\{progress}/g,i._renderThumbProgress()).replace(/\{actions}/g,l).replace(/\{caption}/g,o).replace(/\{size}/g,i._getSize(s)).replace(/\{width}/g,h).replace(/\{indicator}/g,"").replace(/\{indicatorTitle}/g,"")}};i.previewCache.init()},_handler:function(e,t,i){var n=this,s=n.namespace,a=t.split(" ").join(s+" ")+s;if(!e||!e.length){return}e.off(a).on(a,i)},_log:function(e){var t=this,i=t.$element.attr("id");if(i){e='"'+i+'": '+e}if(typeof window.console.log!=="undefined"){window.console.log(e)}else{window.alert(e)}},_validate:function(){var e=this,t=e.$element.attr("type")==="file";if(!t){e._log('The input "type" must be set to "file" for initializing the "bootstrap-fileinput" plugin.')}return t},_errorsExist:function(){var t=this,i;if(t.$errorContainer.find("li").length){return true}i=e(document.createElement("div")).html(t.$errorContainer.html());i.find("span.kv-error-close").remove();i.find("ul").remove();return e.trim(i.text()).length?true:false},_errorHandler:function(e,t){var i=this,n=e.target.error;if(n.code===n.NOT_FOUND_ERR){i._showError(i.msgFileNotFound.replace("{name}",t))}else if(n.code===n.SECURITY_ERR){i._showError(i.msgFileSecured.replace("{name}",t))}else if(n.code===n.NOT_READABLE_ERR){i._showError(i.msgFileNotReadable.replace("{name}",t))}else if(n.code===n.ABORT_ERR){i._showError(i.msgFilePreviewAborted.replace("{name}",t))}else{i._showError(i.msgFilePreviewError.replace("{name}",t))}},_addError:function(e){var t=this,i=t.$errorContainer;if(e&&i.length){i.html(t.errorCloseButton+e);t._handler(i.find(".kv-error-close"),"click",function(){i.fadeOut("slow")})}},_resetErrors:function(e){var t=this,i=t.$errorContainer;t.isError=false;t.$container.removeClass("has-error");i.html("");if(e){i.fadeOut("slow")}else{i.hide()}},_showFolderError:function(e){var i=this,n=i.$errorContainer,s;if(!e){return}s=i.msgFoldersNotAllowed.replace(/\{n}/g,e);i._addError(s);t.addCss(i.$container,"has-error");n.fadeIn(800);i._raise("filefoldererror",[e,s])},_showUploadError:function(e,i,n){var s=this,a=s.$errorContainer,r=n||"fileuploaderror",o=i&&i.id?'<li data-file-id="'+i.id+'">'+e+"</li>":"<li>"+e+"</li>";if(a.find("ul").length===0){s._addError("<ul>"+o+"</ul>")}else{a.find("ul").append(o)}a.fadeIn(800);s._raise(r,[i,e]);s.$container.removeClass("file-input-new");t.addCss(s.$container,"has-error");return true},_showError:function(e,i,n){var s=this,a=s.$errorContainer,r=n||"fileerror";i=i||{};i.reader=s.reader;s._addError(e);a.fadeIn(800);s._raise(r,[i,e]);if(!s.isUploadable){s._clearFileInput()}s.$container.removeClass("file-input-new");t.addCss(s.$container,"has-error");s.$btnUpload.attr("disabled",true);return true},_noFilesError:function(e){var i=this,n=i.minFileCount>1?i.filePlural:i.fileSingle,s=i.msgFilesTooLess.replace("{n}",i.minFileCount).replace("{files}",n),a=i.$errorContainer;i._addError(s);i.isError=true;i._updateFileDetails(0);a.fadeIn(800);i._raise("fileerror",[e,s]);i._clearFileInput();t.addCss(i.$container,"has-error")},_parseError:function(t,i,n,s){var a=this,r=e.trim(n+""),o=r.slice(-1)==="."?"":".",l=i.responseJSON!==undefined&&i.responseJSON.error!==undefined?i.responseJSON.error:i.responseText;if(a.cancelling&&a.msgUploadAborted){r=a.msgUploadAborted}if(a.showAjaxErrorDetails&&l){l=e.trim(l.replace(/\n\s*\n/g,"\n"));l=l.length>0?"<pre>"+l+"</pre>":"";r+=o+l}else{r+=o}if(r===o){r=a.msgAjaxError.replace("{operation}",t)}a.cancelling=false;return s?"<b>"+s+": </b>"+r:r},_parseFileType:function(e){var i=this,n,s,a,r,o=i.allowedPreviewTypes||[];for(r=0;r<o.length;r++){a=o[r];n=i.fileTypeSettings[a];s=n(e.type,e.name)?a:"";if(!t.isEmpty(s)){return s}}return"other"},_getPreviewIcon:function(t){var i=this,n,s=null;if(t&&t.indexOf(".")>-1){n=t.split(".").pop();if(i.previewFileIconSettings&&i.previewFileIconSettings[n]){s=i.previewFileIconSettings[n]}if(i.previewFileExtSettings){e.each(i.previewFileExtSettings,function(e,t){if(i.previewFileIconSettings[e]&&t(n)){s=i.previewFileIconSettings[e];return}})}}return s},_parseFilePreviewIcon:function(e,t){var i=this,n=i._getPreviewIcon(t)||i.previewFileIcon;if(e.indexOf("{previewFileIcon}")>-1){e=e.replace(/\{previewFileIconClass}/g,i.previewFileIconClass).replace(/\{previewFileIcon}/g,n)}return e},_raise:function(t,i){var n=this,s=e.Event(t);if(i!==undefined){n.$element.trigger(s,i)}else{n.$element.trigger(s)}if(s.isDefaultPrevented()||s.result===false){return false}switch(t){case"filebatchuploadcomplete":case"filebatchuploadsuccess":case"fileuploaded":case"fileclear":case"filecleared":case"filereset":case"fileerror":case"filefoldererror":case"fileuploaderror":case"filebatchuploaderror":case"filedeleteerror":case"filecustomerror":case"filesuccessremove":break;default:n.ajaxAborted=s.result;break}return true},_listenFullScreen:function(e){var t=this,i=t.$modal,n,s;if(!i||!i.length){return}n=i&&i.find(".btn-fullscreen");s=i&&i.find(".btn-borderless");if(!n.length||!s.length){return}n.removeClass("active").attr("aria-pressed","false");s.removeClass("active").attr("aria-pressed","false");if(e){n.addClass("active").attr("aria-pressed","true")}else{s.addClass("active").attr("aria-pressed","true")}if(i.hasClass("file-zoom-fullscreen")){t._maximizeZoomDialog()}else{if(e){t._maximizeZoomDialog()}else{s.removeClass("active").attr("aria-pressed","false")}}},_listen:function(){var i=this,n=i.$element,s=i.$form,a=i.$container,r;i._handler(n,"change",e.proxy(i._change,i));if(i.showBrowse){i._handler(i.$btnFile,"click",e.proxy(i._browse,i))}i._handler(a.find(".fileinput-remove:not([disabled])"),"click",e.proxy(i.clear,i));i._handler(a.find(".fileinput-cancel"),"click",e.proxy(i.cancel,i));i._initDragDrop();i._handler(s,"reset",e.proxy(i.reset,i));if(!i.isUploadable){i._handler(s,"submit",e.proxy(i._submitForm,i))}i._handler(i.$container.find(".fileinput-upload"),"click",e.proxy(i._uploadClick,i));i._handler(e(window),"resize",function(){i._listenFullScreen(screen.width===window.innerWidth&&screen.height===window.innerHeight)});r="webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange";i._handler(e(document),r,function(){i._listenFullScreen(t.checkFullScreen())});i._initClickable()},_initClickable:function(){var i=this,n;if(!i.isClickable){return}n=i.isUploadable?i.$dropZone:i.$preview.find(".file-default-preview");t.addCss(n,"clickable");n.attr("tabindex",-1);i._handler(n,"click",function(t){var s=e(t.target);if(!s.parents(".file-preview-thumbnails").length||s.parents(".file-default-preview").length){i.$element.trigger("click");n.blur()}})},_initDragDrop:function(){var t=this,i=t.$dropZone;if(t.isUploadable&&t.dropZoneEnabled&&t.showPreview){t._handler(i,"dragenter dragover",e.proxy(t._zoneDragEnter,t));t._handler(i,"dragleave",e.proxy(t._zoneDragLeave,t));t._handler(i,"drop",e.proxy(t._zoneDrop,t));t._handler(e(document),"dragenter dragover drop",t._zoneDragDropInit)}},_zoneDragDropInit:function(e){e.stopPropagation();e.preventDefault()},_zoneDragEnter:function(i){var n=this,s=e.inArray("Files",i.originalEvent.dataTransfer.types)>-1;n._zoneDragDropInit(i);if(n.isDisabled||!s){i.originalEvent.dataTransfer.effectAllowed="none";i.originalEvent.dataTransfer.dropEffect="none";return}t.addCss(n.$dropZone,"file-highlighted")},_zoneDragLeave:function(e){var t=this;t._zoneDragDropInit(e);if(t.isDisabled){return}t.$dropZone.removeClass("file-highlighted")},_zoneDrop:function(e){var i=this;e.preventDefault();if(i.isDisabled||t.isEmpty(e.originalEvent.dataTransfer.files)){return}i._change(e,"dragdrop");i.$dropZone.removeClass("file-highlighted")},_uploadClick:function(e){var i=this,n=i.$container.find(".fileinput-upload"),s,a=!n.hasClass("disabled")&&t.isEmpty(n.attr("disabled"));if(e&&e.isDefaultPrevented()){return}if(!i.isUploadable){if(a&&n.attr("type")!=="submit"){s=n.closest("form");if(s.length){s.trigger("submit")}e.preventDefault()}return}e.preventDefault();if(a){i.upload()}},_submitForm:function(){var e=this,t=e.$element,i=t.get(0).files;if(i&&e.minFileCount>0&&e._getFileCount(i.length)<e.minFileCount){e._noFilesError({});return false}return!e._abort({})},_clearPreview:function(){var i=this,n=i.$preview,s=i.showUploadedThumbs?n.find(t.FRAMES+":not(.file-preview-success)"):n.find(t.FRAMES);s.each(function(){var i=e(this);i.remove();t.cleanZoomCache(n.find("#zoom-"+i.attr("id")))});if(!i.$preview.find(t.FRAMES).length||!i.showPreview){i._resetUpload()}i._validateDefaultPreview()},_initSortable:function(){var i=this,n=i.$preview,s,a="."+t.SORT_CSS;if(!window.KvSortable||n.find(a).length===0){return}s={handle:".drag-handle-init",dataIdAttr:"data-preview-id",draggable:a,onSort:function(n){var s=n.oldIndex,a=n.newIndex,r,o;i.initialPreview=t.moveArray(i.initialPreview,s,a);i.initialPreviewConfig=t.moveArray(i.initialPreviewConfig,s,a);i.previewCache.init();for(var l=0;l<i.initialPreviewConfig.length;l++){if(i.initialPreviewConfig[l]!==null){r=i.initialPreviewConfig[l].key;o=e(".kv-file-remove[data-key='"+r+"']").closest(t.FRAMES);o.attr("data-fileindex","init_"+l).data("fileindex","init_"+l)}}i._raise("filesorted",{previewId:e(n.item).attr("id"),oldIndex:s,newIndex:a,stack:i.initialPreviewConfig})}};if(n.data("kvsortable")){n.kvsortable("destroy")}e.extend(true,s,i.fileActionSettings.dragSettings);n.kvsortable(s)},_initPreview:function(e){var i=this,n=i.initialCaption||"",s;if(!i.previewCache.count()){i._clearPreview();if(e){i._setCaption(n)}else{i._initCaption()}return}s=i.previewCache.out();n=e&&i.initialCaption?i.initialCaption:s.caption;i.$preview.html(s.content);i._setInitThumbAttr();i._setCaption(n);i._initSortable();if(!t.isEmpty(s.content)){i.$container.removeClass("file-input-new")}},_getZoomButton:function(e){var t=this,i=t.previewZoomButtonIcons[e],n=t.previewZoomButtonClasses[e],s=' title="'+(t.previewZoomButtonTitles[e]||"")+'" ',a=s+(e==="close"?' data-dismiss="modal" aria-hidden="true"':"");if(e==="fullscreen"||e==="borderless"||e==="toggleheader"){a+=' data-toggle="button" aria-pressed="false" autocomplete="off"'}return'<button type="button" class="'+n+" btn-"+e+'"'+a+">"+i+"</button>"},_getModalContent:function(){var e=this;return e._getLayoutTemplate("modal").replace(/\{zoomFrameClass}/g,e.frameClass).replace(/\{heading}/g,e.msgZoomModalHeading).replace(/\{prev}/g,e._getZoomButton("prev")).replace(/\{next}/g,e._getZoomButton("next")).replace(/\{toggleheader}/g,e._getZoomButton("toggleheader")).replace(/\{fullscreen}/g,e._getZoomButton("fullscreen")).replace(/\{borderless}/g,e._getZoomButton("borderless")).replace(/\{close}/g,e._getZoomButton("close"))},_listenModalEvent:function(e){var i=this,n=i.$modal,s=function(e){return{sourceEvent:e,previewId:n.data("previewId"),modal:n}};n.on(e+".bs.modal",function(a){var r=n.find(".btn-fullscreen"),o=n.find(".btn-borderless");i._raise("filezoom"+e,s(a));if(e==="shown"){o.removeClass("active").attr("aria-pressed","false");r.removeClass("active").attr("aria-pressed","false");if(n.hasClass("file-zoom-fullscreen")){i._maximizeZoomDialog();if(t.checkFullScreen()){r.addClass("active").attr("aria-pressed","true")}else{o.addClass("active").attr("aria-pressed","true")}}}})},_initZoom:function(){var i=this,n,s=i._getLayoutTemplate("modalMain"),a="#"+t.MODAL_ID;if(!i.showPreview){return}i.$modal=e(a);if(!i.$modal||!i.$modal.length){n=e(document.createElement("div")).html(s).insertAfter(i.$container);i.$modal=e(a).insertBefore(n);n.remove()}t.initModal(i.$modal);i.$modal.html(i._getModalContent());e.each(t.MODAL_EVENTS,function(e,t){i._listenModalEvent(t)})},_initZoomButtons:function(){var i=this,n=i.$modal.data("previewId")||"",s,a,r=i.$preview,o=r.find(t.FRAMES).toArray(),l=o.length,h=i.$modal.find(".btn-prev"),c=i.$modal.find(".btn-next");if(o.length<2){h.hide();c.hide();return}else{h.show();c.show()}if(!l){return}s=e(o[0]);a=e(o[l-1]);h.removeAttr("disabled");c.removeAttr("disabled");if(s.length&&s.attr("id")===n){h.attr("disabled",true)}if(a.length&&a.attr("id")===n){c.attr("disabled",true)}},_maximizeZoomDialog:function(){var t=this,i=t.$modal,n=i.find(".modal-header:visible"),s=i.find(".modal-footer:visible"),a=i.find(".modal-body"),r=e(window).height(),o=0;i.addClass("file-zoom-fullscreen");if(n&&n.length){r-=n.outerHeight(true)}if(s&&s.length){r-=s.outerHeight(true)}if(a&&a.length){o=a.outerHeight(true)-a.height();r-=o}i.find(".kv-zoom-body").height(r)},_resizeZoomDialog:function(e){var i=this,n=i.$modal,s=n.find(".btn-fullscreen"),a=n.find(".btn-borderless");if(n.hasClass("file-zoom-fullscreen")){t.toggleFullScreen(false);if(!e){if(!s.hasClass("active")){n.removeClass("file-zoom-fullscreen");i.$modal.find(".kv-zoom-body").css("height",i.zoomModalHeight)}else{s.removeClass("active").attr("aria-pressed","false")}}else{if(!s.hasClass("active")){n.removeClass("file-zoom-fullscreen");i._resizeZoomDialog(true);if(a.hasClass("active")){a.removeClass("active").attr("aria-pressed","false")}}}}else{if(!e){i._maximizeZoomDialog();return}t.toggleFullScreen(true)}n.focus()},_setZoomContent:function(i,n){var s=this,a,r,o,l,h,c,u,d=i.attr("id"),f=s.$modal,p=f.find(".btn-prev"),m=f.find(".btn-next"),g,v=f.find(".btn-fullscreen"),y=f.find(".btn-borderless"),b,w,x=f.find(".btn-toggleheader"),_=s.$preview.find("#zoom-"+d);r=_.attr("data-template")||"generic";a=_.find(".kv-file-content");o=a.length?a.html():"";b=i.data("caption")||"";w=i.data("size")||"";l=b+" "+w;f.find(".kv-zoom-title").html(l);h=f.find(".kv-zoom-body");f.removeClass("kv-single-content");if(n){g=h.clone().insertAfter(h);h.html(o).hide();g.fadeOut("fast",function(){h.fadeIn("fast");g.remove()})}else{h.html(o)}u=s.previewZoomSettings[r];if(u){c=h.find(".kv-preview-data");t.addCss(c,"file-zoom-detail");e.each(u,function(e,t){c.css(e,t);if(c.attr("width")&&e==="width"||c.attr("height")&&e==="height"){c.removeAttr(e)}})}f.data("previewId",d);s._handler(p,"click",function(){s._zoomSlideShow("prev",d)});s._handler(m,"click",function(){s._zoomSlideShow("next",d)});s._handler(v,"click",function(){s._resizeZoomDialog(true)});s._handler(y,"click",function(){s._resizeZoomDialog(false)});s._handler(x,"click",function(){var e=f.find(".modal-header"),t=f.find(".modal-body .floating-buttons"),i,n=e.find(".kv-zoom-actions"),a=function(t){var i=s.$modal.find(".kv-zoom-body"),n=s.zoomModalHeight;if(f.hasClass("file-zoom-fullscreen")){n=i.outerHeight(true);if(!t){n=n-e.outerHeight(true)}}i.css("height",t?n+t:n)};if(e.is(":visible")){i=e.outerHeight(true);e.slideUp("slow",function(){n.find(".btn").appendTo(t);a(i)})}else{t.find(".btn").appendTo(n);e.slideDown("slow",function(){a()})}f.focus()});s._handler(f,"keydown",function(e){var t=e.which||e.keyCode;if(t===37&&!p.attr("disabled")){s._zoomSlideShow("prev",d)}if(t===39&&!m.attr("disabled")){s._zoomSlideShow("next",d)}})},_zoomPreview:function(e){var i=this,n,s=i.$modal;if(!e.length){throw"Cannot zoom to detailed preview!"}t.initModal(s);s.html(i._getModalContent());n=e.closest(t.FRAMES);i._setZoomContent(n);s.modal("show");i._initZoomButtons()},_zoomSlideShow:function(i,n){var s=this,a=s.$modal.find(".kv-zoom-actions .btn-"+i),r,o,l=s.$preview.find(t.FRAMES).toArray(),h=l.length,c;if(a.attr("disabled")){return}for(o=0;o<h;o++){if(e(l[o]).attr("id")===n){c=i==="prev"?o-1:o+1;break}}if(c<0||c>=h||!l[c]){return}r=e(l[c]);if(r.length){s._setZoomContent(r,true)}s._initZoomButtons();s._raise("filezoom"+i,{previewId:n,modal:s.$modal})},_initZoomButton:function(){var t=this;t.$preview.find(".kv-file-zoom").each(function(){var i=e(this);t._handler(i,"click",function(){t._zoomPreview(i)})})},_clearObjects:function(t){t.find("video audio").each(function(){this.pause();e(this).remove()});t.find("img object div").each(function(){e(this).remove()})},_clearFileInput:function(){var i=this,n=i.$element,s,a,r;i.fileInputCleared=true;if(t.isEmpty(n.val())){return}if(i.isIE9||i.isIE10){s=n.closest("form");a=e(document.createElement("form"));r=e(document.createElement("div"));n.before(r);if(s.length){s.after(a)}else{r.after(a)}a.append(n).trigger("reset");r.before(n).remove();a.remove()}else{n.val("")}},_resetUpload:function(){var e=this;e.uploadCache={content:[],config:[],tags:[],append:true};e.uploadCount=0;e.uploadStatus={};e.uploadLog=[];e.uploadAsyncCount=0;e.loadedImages=[];e.totalImagesCount=0;e.$btnUpload.removeAttr("disabled");e._setProgress(0);t.addCss(e.$progress,"hide");e._resetErrors(false);e.ajaxAborted=false;e.ajaxRequests=[];e._resetCanvas();e.cacheInitialPreview={};if(e.overwriteInitial){e.initialPreview=[];e.initialPreviewConfig=[];e.initialPreviewThumbTags=[];e.previewCache.data={content:[],config:[],tags:[]}}},_resetCanvas:function(){var e=this;if(e.canvas&&e.imageCanvasContext){e.imageCanvasContext.clearRect(0,0,e.canvas.width,e.canvas.height)}},_hasInitialPreview:function(){var e=this;return!e.overwriteInitial&&e.previewCache.count()},_resetPreview:function(){var e=this,t,i;if(e.previewCache.count()){t=e.previewCache.out();e.$preview.html(t.content);e._setInitThumbAttr();i=e.initialCaption?e.initialCaption:t.caption;e._setCaption(i)}else{e._clearPreview();e._initCaption()}if(e.showPreview){e._initZoom();e._initSortable()}},_clearDefaultPreview:function(){var e=this;e.$preview.find(".file-default-preview").remove()},_validateDefaultPreview:function(){var e=this;if(!e.showPreview||t.isEmpty(e.defaultPreviewContent)){return}e.$preview.html('<div class="file-default-preview">'+e.defaultPreviewContent+"</div>");e.$container.removeClass("file-input-new");e._initClickable()},_resetPreviewThumbs:function(e){var t=this,i;if(e){t._clearPreview();t.clearStack();return}if(t._hasInitialPreview()){i=t.previewCache.out();t.$preview.html(i.content);t._setInitThumbAttr();t._setCaption(i.caption);t._initPreviewActions()}else{t._clearPreview()}},_getLayoutTemplate:function(e){var i=this,n=i.layoutTemplates[e];if(t.isEmpty(i.customLayoutTags)){return n}return t.replaceTags(n,i.customLayoutTags)},_getPreviewTemplate:function(e){var i=this,n=i.previewTemplates[e];if(t.isEmpty(i.customPreviewTags)){return n}return t.replaceTags(n,i.customPreviewTags)},_getOutData:function(e,t,i){var n=this;e=e||{};t=t||{};i=i||n.filestack.slice(0)||{};return{form:n.formdata,files:i,filenames:n.filenames,filescount:n.getFilesCount(),extra:n._getExtraData(),response:t,reader:n.reader,jqXHR:e}},_getMsgSelected:function(e){var t=this,i=e===1?t.fileSingle:t.filePlural;return e>0?t.msgSelected.replace("{n}",e).replace("{files}",i):t.msgNoFilesSelected},_getThumbs:function(e){e=e||"";return this.$preview.find(t.FRAMES+":not(.file-preview-initial)"+e)},_getExtraData:function(e,t){var i=this,n=i.uploadExtraData;if(typeof i.uploadExtraData==="function"){n=i.uploadExtraData(e,t)}return n},_initXhr:function(e,t,i){var n=this;if(e.upload){e.upload.addEventListener("progress",function(e){var s=0,a=e.total,r=e.loaded||e.position;if(e.lengthComputable){s=Math.floor(r/a*100)}if(t){n._setAsyncUploadStatus(t,s,i)}else{n._setProgress(s)}},false)}return e},_ajaxSubmit:function(t,i,n,s,a,r){var o=this,l;if(!o._raise("filepreajax",[a,r])){return}o._uploadExtra(a,r);l=e.extend(true,{},{xhr:function(){var t=e.ajaxSettings.xhr();return o._initXhr(t,a,o.getFileStack().length)},url:o.uploadUrl,type:"POST",dataType:"json",data:o.formdata,cache:false,processData:false,contentType:false,beforeSend:t,success:i,complete:n,error:s},o.ajaxSettings);o.ajaxRequests.push(e.ajax(l))},_mergeArray:function(e,i){var n=this,s=t.cleanArray(n[e]),a=t.cleanArray(i);n[e]=s.concat(a)},_initUploadSuccess:function(i,n,s){var a=this,r,o,l,h,c,u,d,f,p;if(!a.showPreview||typeof i!=="object"||e.isEmptyObject(i)){return}if(i.initialPreview!==undefined&&i.initialPreview.length>0){a.hasInitData=true;u=i.initialPreview||[];d=i.initialPreviewConfig||[];f=i.initialPreviewThumbTags||[];r=i.append===undefined||i.append?true:false;if(u.length>0&&!t.isArray(u)){u=u.split(a.initialPreviewDelimiter)}a._mergeArray("initialPreview",u);a._mergeArray("initialPreviewConfig",d);a._mergeArray("initialPreviewThumbTags",f);if(n!==undefined){if(!s){l=a.previewCache.add(u,d[0],f[0],r);o=a.previewCache.get(l,false);h=e(document.createElement("div")).html(o).hide().insertAfter(n);c=h.find(".kv-zoom-cache");if(c&&c.length){c.insertAfter(n)}n.fadeOut("slow",function(){var e=h.find(".file-preview-frame");if(e&&e.length){e.insertBefore(n).fadeIn("slow").css("display:inline-block")}a._initPreviewActions();a._clearFileInput();t.cleanZoomCache(a.$preview.find("#zoom-"+n.attr("id")));n.remove();h.remove();a._initSortable()})}else{p=n.attr("data-fileindex");a.uploadCache.content[p]=u[0];a.uploadCache.config[p]=d[0]||[];a.uploadCache.tags[p]=f[0]||[];a.uploadCache.append=r}}else{a.previewCache.set(u,d,f,r);a._initPreview();a._initPreviewActions()}}},_initSuccessThumbs:function(){var i=this;if(!i.showPreview){return}i._getThumbs(t.FRAMES+".file-preview-success").each(function(){var n=e(this),s=i.$preview,a=n.find(".kv-file-remove");a.removeAttr("disabled");i._handler(a,"click",function(){var e=n.attr("id"),a=i._raise("filesuccessremove",[e,n.data("fileindex")]);t.cleanMemory(n);if(a===false){return}n.fadeOut("slow",function(){t.cleanZoomCache(s.find("#zoom-"+e));n.remove();if(!s.find(t.FRAMES).length){i.reset()}})})})},_checkAsyncComplete:function(){var t=this,i,n;for(n=0;n<t.filestack.length;n++){if(t.filestack[n]){i=t.previewInitId+"-"+n;if(e.inArray(i,t.uploadLog)===-1){return false}}}return t.uploadAsyncCount===t.uploadLog.length},_uploadExtra:function(t,i){var n=this,s=n._getExtraData(t,i);if(s.length===0){return}e.each(s,function(e,t){n.formdata.append(e,t)})},_uploadSingle:function(i,n,s){var a=this,r=a.getFileStack().length,o=new FormData,l,h=a.previewInitId+"-"+i,c,u,d,f,p=a.filestack.length>0||!e.isEmptyObject(a.uploadExtraData),m=e("#"+h).find(".file-thumb-progress"),g,v,y,b,w,x={id:h,index:i};a.formdata=o;if(a.showPreview){c=e("#"+h+":not(.file-preview-initial)");d=c.find(".kv-file-upload");f=c.find(".kv-file-remove");m.removeClass("hide")}if(r===0||!p||d&&d.hasClass("disabled")||a._abort(x)){return}w=function(e,t){a.updateStack(e,undefined);a.uploadLog.push(t);if(a._checkAsyncComplete()){a.fileBatchCompleted=true}};u=function(){var e=a.uploadCache,i,n,s,r=0,o=a.cacheInitialPreview;if(!a.fileBatchCompleted){return}if(o&&o.content){r=o.content.length}setTimeout(function(){if(a.showPreview){a.previewCache.set(e.content,e.config,e.tags,e.append);if(r){for(n=0;n<e.content.length;n++){s=n+r;o.content[s]=e.content[n];if(o.config.length){o.config[s]=e.config[n]}if(o.tags.length){o.tags[s]=e.tags[n]}}a.initialPreview=t.cleanArray(o.content);a.initialPreviewConfig=t.cleanArray(o.config);a.initialPreviewThumbTags=t.cleanArray(o.tags)}else{a.initialPreview=e.content;a.initialPreviewConfig=e.config;a.initialPreviewThumbTags=e.tags}a.cacheInitialPreview={};if(a.hasInitData){a._initPreview();a._initPreviewActions()}}a.unlock();a._clearFileInput();i=a.$preview.find(".file-preview-initial");if(a.uploadAsync&&i.length){t.addCss(i,t.SORT_CSS);a._initSortable()}a._raise("filebatchuploadcomplete",[a.filestack,a._getExtraData()]);a.uploadCount=0;a.uploadStatus={};a.uploadLog=[];a._setProgress(101)},100)};g=function(n){l=a._getOutData(n);a.fileBatchCompleted=false;if(a.showPreview){if(!c.hasClass("file-preview-success")){a._setThumbStatus(c,"Loading");t.addCss(c,"file-uploading")}d.attr("disabled",true);f.attr("disabled",true)}if(!s){a.lock()}a._raise("filepreupload",[l,h,i]);e.extend(true,x,l);if(a._abort(x)){n.abort();a._setProgressCancelled()}};v=function(n,r,o){var u=a.showPreview&&c.attr("id")?c.attr("id"):h;l=a._getOutData(o,n);e.extend(true,x,l);setTimeout(function(){if(t.isEmpty(n)||t.isEmpty(n.error)){if(a.showPreview){a._setThumbStatus(c,"Success");d.hide();a._initUploadSuccess(n,c,s);a._setProgress(101,m)}a._raise("fileuploaded",[l,u,i]);if(!s){a.updateStack(i,undefined)}else{w(i,u)}}else{a._showUploadError(n.error,x);a._setPreviewError(c,i);if(s){w(i,u)}}},100)};y=function(){setTimeout(function(){if(a.showPreview){d.removeAttr("disabled");f.removeAttr("disabled");c.removeClass("file-uploading")}if(!s){a.unlock(false);a._clearFileInput()}else{u()}a._initSuccessThumbs()},100)};b=function(t,r,o){var l=a.ajaxOperations.uploadThumb,u=a._parseError(l,t,o,s?n[i].name:null);setTimeout(function(){if(s){w(i,h)}a.uploadStatus[h]=100;a._setPreviewError(c,i);e.extend(true,x,a._getOutData(t));a._setProgress(101,m,a.msgAjaxProgressError.replace("{operation}",l));a._showUploadError(u,x)},100)};o.append(a.uploadFileAttr,n[i],a.filenames[i]);o.append("file_id",i);a._ajaxSubmit(g,v,y,b,h,i)},_uploadBatch:function(){var i=this,n=i.filestack,s=n.length,a={},r,o,l,h,c=i.filestack.length>0||!e.isEmptyObject(i.uploadExtraData),u;i.formdata=new FormData;if(s===0||!c||i._abort(a)){return}u=function(){e.each(n,function(e){i.updateStack(e,undefined)});i._clearFileInput()};r=function(n){i.lock();var s=i._getOutData(n);if(i.showPreview){i._getThumbs().each(function(){var n=e(this),s=n.find(".kv-file-upload"),a=n.find(".kv-file-remove");if(!n.hasClass("file-preview-success")){i._setThumbStatus(n,"Loading");t.addCss(n,"file-uploading")}s.attr("disabled",true);a.attr("disabled",true)})}i._raise("filebatchpreupload",[s]);if(i._abort(s)){n.abort();i._setProgressCancelled()}};o=function(n,s,a){var r=i._getOutData(a,n),o=i._getThumbs(":not(.file-preview-error)"),l=0,h=t.isEmpty(n)||t.isEmpty(n.errorkeys)?[]:n.errorkeys;if(t.isEmpty(n)||t.isEmpty(n.error)){i._raise("filebatchuploadsuccess",[r]);u();if(i.showPreview){o.each(function(){var t=e(this),n=t.find(".kv-file-upload");t.find(".kv-file-upload").hide();i._setThumbStatus(t,"Success");t.removeClass("file-uploading");n.removeAttr("disabled")});i._initUploadSuccess(n)}else{i.reset()}i._setProgress(101)}else{if(i.showPreview){o.each(function(){var t=e(this),n=t.find(".kv-file-remove"),s=t.find(".kv-file-upload");t.removeClass("file-uploading");s.removeAttr("disabled");n.removeAttr("disabled");if(h.length===0){i._setPreviewError(t);return}if(e.inArray(l,h)!==-1){i._setPreviewError(t)}else{t.find(".kv-file-upload").hide();i._setThumbStatus(t,"Success");i.updateStack(l,undefined)}l++});i._initUploadSuccess(n)}i._showUploadError(n.error,r,"filebatchuploaderror")}};h=function(){i.unlock();i._initSuccessThumbs();i._clearFileInput();i._raise("filebatchuploadcomplete",[i.filestack,i._getExtraData()])};l=function(t,n,a){var r=i._getOutData(t),o=i.ajaxOperations.uploadBatch,l=i._parseError(o,t,a);i._showUploadError(l,r,"filebatchuploaderror");i.uploadFileCount=s-1;if(!i.showPreview){return}i._getThumbs().each(function(){var t=e(this),n=t.attr("data-fileindex");
t.removeClass("file-uploading");if(i.filestack[n]!==undefined){i._setPreviewError(t)}});i._getThumbs().removeClass("file-uploading");i._getThumbs(" .kv-file-upload").removeAttr("disabled");i._getThumbs(" .kv-file-delete").removeAttr("disabled");i._setProgress(101,i.$progress,i.msgAjaxProgressError.replace("{operation}",o))};e.each(n,function(e,s){if(!t.isEmpty(n[e])){i.formdata.append(i.uploadFileAttr,s,i.filenames[e])}});i._ajaxSubmit(r,o,h,l)},_uploadExtraOnly:function(){var e=this,i={},n,s,a,r;e.formdata=new FormData;if(e._abort(i)){return}n=function(t){e.lock();var n=e._getOutData(t);e._raise("filebatchpreupload",[n]);e._setProgress(50);i.data=n;i.xhr=t;if(e._abort(i)){t.abort();e._setProgressCancelled()}};s=function(i,n,s){var a=e._getOutData(s,i);if(t.isEmpty(i)||t.isEmpty(i.error)){e._raise("filebatchuploadsuccess",[a]);e._clearFileInput();e._initUploadSuccess(i);e._setProgress(101)}else{e._showUploadError(i.error,a,"filebatchuploaderror")}};a=function(){e.unlock();e._clearFileInput();e._raise("filebatchuploadcomplete",[e.filestack,e._getExtraData()])};r=function(t,n,s){var a=e._getOutData(t),r=e.ajaxOperations.uploadExtra,o=e._parseError(r,t,s);i.data=a;e._showUploadError(o,a,"filebatchuploaderror");e._setProgress(101,e.$progress,e.msgAjaxProgressError.replace("{operation}",r))};e._ajaxSubmit(n,s,a,r)},_deleteFileIndex:function(i){var n=this,s=i.attr("data-fileindex");if(s.substring(0,5)==="init_"){s=parseInt(s.replace("init_",""));n.initialPreview=t.spliceArray(n.initialPreview,s);n.initialPreviewConfig=t.spliceArray(n.initialPreviewConfig,s);n.initialPreviewThumbTags=t.spliceArray(n.initialPreviewThumbTags,s);n.$preview.find(t.FRAMES).each(function(){var t=e(this),i=t.attr("data-fileindex");if(i.substring(0,5)==="init_"){i=parseInt(i.replace("init_",""));if(i>s){i--;t.attr("data-fileindex","init_"+i)}}});if(n.uploadAsync){n.cacheInitialPreview=n.getPreview()}}},_initFileActions:function(){var i=this,n=i.$preview;if(!i.showPreview){return}i._initZoomButton();n.find(t.FRAMES+" .kv-file-remove").each(function(){var s=e(this),a=s.closest(t.FRAMES),r,o=a.attr("id"),l=a.attr("data-fileindex"),h,c,u;i._handler(s,"click",function(){u=i._raise("filepreremove",[o,l]);if(u===false||!i._validateMinCount()){return false}r=a.hasClass("file-preview-error");t.cleanMemory(a);a.fadeOut("slow",function(){t.cleanZoomCache(n.find("#zoom-"+o));i.updateStack(l,undefined);i._clearObjects(a);a.remove();if(o&&r){i.$errorContainer.find('li[data-file-id="'+o+'"]').fadeOut("fast",function(){e(this).remove();if(!i._errorsExist()){i._resetErrors()}})}i._clearFileInput();var s=i.getFileStack(true),u=i.previewCache.count(),d=s.length,f=i.showPreview&&n.find(t.FRAMES).length;if(d===0&&u===0&&!f){i.reset()}else{h=u+d;c=h>1?i._getMsgSelected(h):s[0]?i._getFileNames()[0]:"";i._setCaption(c)}i._raise("fileremoved",[o,l])})})});i.$preview.find(t.FRAMES+" .kv-file-upload").each(function(){var n=e(this);i._handler(n,"click",function(){var e=n.closest(t.FRAMES),s=e.attr("data-fileindex");if(!e.hasClass("file-preview-error")){i._uploadSingle(s,i.filestack,false)}})})},_initPreviewActions:function(){var i=this,n=i.$preview,s=i.deleteExtraData||{},a=t.FRAMES+" .kv-file-remove",r=function(){var e=i.isUploadable?i.previewCache.count():i.$element.get(0).files.length;if(n.find(a).length===0&&!e){i.reset();i.initialCaption=""}};i._initZoomButton();n.find(a).each(function(){var a=e(this),o=a.data("url")||i.deleteUrl,l=a.data("key");if(t.isEmpty(o)||l===undefined){return}var h=a.closest(t.FRAMES),c=i.previewCache.data,u,d,f=h.data("fileindex"),p,m;f=parseInt(f.replace("init_",""));p=t.isEmpty(c.config)&&t.isEmpty(c.config[f])?null:c.config[f];m=t.isEmpty(p)||t.isEmpty(p.extra)?s:p.extra;if(typeof m==="function"){m=m()}d={id:a.attr("id"),key:l,extra:m};u=e.extend(true,{},{url:o,type:"POST",dataType:"json",data:e.extend(true,{},{key:l},m),beforeSend:function(e){i.ajaxAborted=false;i._raise("filepredelete",[l,e,m]);if(i.ajaxAborted){e.abort()}else{t.addCss(h,"file-uploading");t.addCss(a,"disabled")}},success:function(e,s,o){var c,u;if(t.isEmpty(e)||t.isEmpty(e.error)){i.previewCache.init();f=parseInt(h.data("fileindex").replace("init_",""));i.previewCache.unset(f);c=i.previewCache.count();u=c>0?i._getMsgSelected(c):"";i._deleteFileIndex(h);i._setCaption(u);i._raise("filedeleted",[l,o,m])}else{d.jqXHR=o;d.response=e;i._showError(e.error,d,"filedeleteerror");h.removeClass("file-uploading");a.removeClass("disabled");r();return}h.removeClass("file-uploading").addClass("file-deleted");h.fadeOut("slow",function(){t.cleanZoomCache(n.find("#zoom-"+h.attr("id")));i._clearObjects(h);h.remove();r();if(!c&&i.getFileStack().length===0){i._setCaption("");i.reset()}})},error:function(e,t,n){var s=i.ajaxOperations.deleteThumb,a=i._parseError(s,e,n);d.jqXHR=e;d.response={};i._showError(a,d,"filedeleteerror");h.removeClass("file-uploading");r()}},i.ajaxDeleteSettings);i._handler(a,"click",function(){if(!i._validateMinCount()){return false}e.ajax(u)})})},_hideFileIcon:function(){if(this.overwriteInitial){this.$captionContainer.find(".kv-caption-icon").hide()}},_showFileIcon:function(){this.$captionContainer.find(".kv-caption-icon").show()},_getSize:function(t){var i=this,n=parseFloat(t),s,a=i.fileSizeGetter,r,o;if(!e.isNumeric(t)||!e.isNumeric(n)){return""}if(typeof a==="function"){o=a(n)}else{if(n===0){o="0.00 B"}else{s=Math.floor(Math.log(n)/Math.log(1024));r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];o=(n/Math.pow(1024,s)).toFixed(2)*1+" "+r[s]}}return i._getLayoutTemplate("size").replace("{sizeText}",o)},_generatePreviewTemplate:function(e,i,n,s,a,r,o,l,h,c,u){var d=this,f=d.slug(n),p,m="",g=d.previewSettings[e]||d.defaults.previewSettings[e],v=g&&g.width?g.width:"",y=g&&g.height?g.height:"",b=h||d._renderFileFooter(f,o,t.isEmpty(v)?"auto":v,r),w=d._getPreviewIcon(n),x=w&&d.preferIconicPreview,_=w&&d.preferIconicZoomPreview,C=function(i,r,o,h){var p=o?"zoom-"+a:a,m=d._getPreviewTemplate(i),g=(l||"")+" "+h;if(d.frameClass){g=d.frameClass+" "+g}if(o){g=g.replace(" "+t.SORT_CSS,"")}m=d._parseFilePreviewIcon(m,n);if(i==="text"){r=t.htmlEncode(r)}return m.replace(/\{previewId}/g,p).replace(/\{caption}/g,f).replace(/\{frameClass}/g,g).replace(/\{type}/g,s).replace(/\{fileindex}/g,c).replace(/\{width}/g,v).replace(/\{height}/g,y).replace(/\{footer}/g,b).replace(/\{data}/g,r).replace(/\{template}/g,u||e)};c=c||a.slice(a.lastIndexOf("-")+1);if(d.fileActionSettings.showZoom){m=C(_?"other":e,i,true,"kv-zoom-thumb")}m="\n"+d._getLayoutTemplate("zoomCache").replace("{zoomContent}",m);p=C(x?"other":e,i,false,"kv-preview-thumb");return p+m},_previewDefault:function(i,n,s){var a=this,r=a.$preview;if(!a.showPreview){return}var o=i?i.name:"",l=i?i.type:"",h,c=i.size||0,u=a.slug(o),d=s===true&&!a.isUploadable,f=t.objUrl.createObjectURL(i);a._clearDefaultPreview();h=a._generatePreviewTemplate("other",f,o,l,n,d,c);r.append("\n"+h);a._setThumbAttr(n,u,c);if(s===true&&a.isUploadable){a._setThumbStatus(e("#"+n),"Error")}},_previewFile:function(e,t,i,n,s){if(!this.showPreview){return}var a=this,r=a._parseFileType(t),o=t?t.name:"",l=a.slug(o),h=a.allowedPreviewTypes,c=a.allowedPreviewMimeTypes,u=a.$preview,d=h&&h.indexOf(r)>=0,f=t.size||0,p=r==="text"||r==="html"||r==="image"?i.target.result:s,m,g=c&&c.indexOf(t.type)!==-1;if(r==="html"&&a.purifyHtml&&window.DOMPurify){p=window.DOMPurify.sanitize(p)}if(d||g){m=a._generatePreviewTemplate(r,p,o,t.type,n,false,f);a._clearDefaultPreview();u.append("\n"+m);a._validateImage(n,l,t.type)}else{a._previewDefault(t,n)}a._setThumbAttr(n,l,f);a._initSortable()},_setThumbAttr:function(t,i,n){var s=this,a=e("#"+t);if(a.length){n=n&&n>0?s._getSize(n):"";a.data({caption:i,size:n})}},_setInitThumbAttr:function(){var e=this,i=e.previewCache.data,n=e.previewCache.count(true),s,a,r,o;if(n===0){return}for(var l=0;l<n;l++){s=i.config[l];o=e.previewInitId+"-"+"init_"+l;a=t.ifSet("caption",s,t.ifSet("filename",s));r=t.ifSet("size",s);e._setThumbAttr(o,a,r)}},_slugDefault:function(e){return t.isEmpty(e)?"":String(e).replace(/[\-\[\]\/\{}:;#%=\(\)\*\+\?\\\^\$\|<>&"']/g,"_")},_readFiles:function(i){this.reader=new FileReader;var n=this,s=n.$element,a=n.$preview,r=n.reader,o=n.$previewContainer,l=n.$previewStatus,h=n.msgLoading,c=n.msgProgress,u=n.previewInitId,d=i.length,f=n.fileTypeSettings,p=n.filestack.length,m,g=n.allowedFileTypes,v=g?g.length:0,y=n.allowedFileExtensions,b=t.isEmpty(y)?"":y.join(", "),w=n.maxFilePreviewSize&&parseFloat(n.maxFilePreviewSize),x=a.length&&(!w||isNaN(w)),_=function(t,s,a,r){var o=e.extend(true,{},n._getOutData({},{},i),{id:a,index:r}),l={id:a,index:r,file:s,files:i};n._previewDefault(s,a,true);if(n.isUploadable){n.addToStack(undefined);setTimeout(function(){m(r+1)},100)}n._initFileActions();if(n.removeFromPreviewOnError){e("#"+a).remove()}return n.isUploadable?n._showUploadError(t,o):n._showError(t,l)};n.loadedImages=[];n.totalImagesCount=0;e.each(i,function(e,t){var i=n.fileTypeSettings.image;if(i&&i(t.type)){n.totalImagesCount++}});m=function(e){if(t.isEmpty(s.attr("multiple"))){d=1}if(e>=d){if(n.isUploadable&&n.filestack.length>0){n._raise("filebatchselected",[n.getFileStack()])}else{n._raise("filebatchselected",[i])}o.removeClass("file-thumb-loading");l.html("");return}var C=p+e,k=u+"-"+C,T,S,M=i[e],D,$=M.name?n.slug(M.name):"",E=(M.size||0)/1e3,A,P,I="",N=t.objUrl.createObjectURL(M),O,F,R,L,j=0,U="",H;if(v>0){for(A=0;A<v;A++){R=g[A];L=n.msgFileTypes[R]||R;U+=A===0?L:", "+L}}if($===false){m(e+1);return}if($.length===0){P=n.msgInvalidFileName.replace("{name}",t.htmlEncode(M.name));n.isError=_(P,M,k,e);return}if(!t.isEmpty(y)){I=new RegExp("\\.("+y.join("|")+")$","i")}D=E.toFixed(2);if(n.maxFileSize>0&&E>n.maxFileSize){P=n.msgSizeTooLarge.replace("{name}",$).replace("{size}",D).replace("{maxSize}",n.maxFileSize);n.isError=_(P,M,k,e);return}if(n.minFileSize!==null&&E<=t.getNum(n.minFileSize)){P=n.msgSizeTooSmall.replace("{name}",$).replace("{size}",D).replace("{minSize}",n.minFileSize);n.isError=_(P,M,k,e);return}if(!t.isEmpty(g)&&t.isArray(g)){for(A=0;A<g.length;A+=1){O=g[A];H=f[O];j+=!H||typeof H!=="function"?0:H(M.type,M.name)?1:0}if(j===0){P=n.msgInvalidFileType.replace("{name}",$).replace("{types}",U);n.isError=_(P,M,k,e);return}}if(j===0&&!t.isEmpty(y)&&t.isArray(y)&&!t.isEmpty(I)){F=t.compare($,I);j+=t.isEmpty(F)?0:F.length;if(j===0){P=n.msgInvalidFileExtension.replace("{name}",$).replace("{extensions}",b);n.isError=_(P,M,k,e);return}}if(!n.showPreview){n.addToStack(M);setTimeout(function(){m(e+1)},100);n._raise("fileloaded",[M,k,e,r]);return}if(!x&&E>w){n.addToStack(M);o.addClass("file-thumb-loading");n._previewDefault(M,k);n._initFileActions();n._updateFileDetails(d);m(e+1);return}if(a.length&&FileReader!==undefined){l.html(h.replace("{index}",e+1).replace("{files}",d));o.addClass("file-thumb-loading");r.onerror=function(e){n._errorHandler(e,$)};r.onload=function(t){n._previewFile(e,M,t,k,N);n._initFileActions()};r.onloadend=function(){P=c.replace("{index}",e+1).replace("{files}",d).replace("{percent}",50).replace("{name}",$);setTimeout(function(){l.html(P);n._updateFileDetails(d);m(e+1)},100);n._raise("fileloaded",[M,k,e,r])};r.onprogress=function(t){if(t.lengthComputable){var i=t.loaded/t.total*100,n=Math.ceil(i);P=c.replace("{index}",e+1).replace("{files}",d).replace("{percent}",n).replace("{name}",$);setTimeout(function(){l.html(P)},100)}};T=f.text;S=f.image;if(T(M.type,$)){r.readAsText(M,n.textEncoding)}else{if(S(M.type,$)){r.readAsDataURL(M)}else{r.readAsArrayBuffer(M)}}}else{n._previewDefault(M,k);setTimeout(function(){m(e+1);n._updateFileDetails(d)},100);n._raise("fileloaded",[M,k,e,r])}n.addToStack(M)};m(0);n._updateFileDetails(d,false)},_updateFileDetails:function(e){var i=this,n=i.$element,s=i.getFileStack(),a=t.isIE(9)&&t.findFileName(n.val())||n[0].files[0]&&n[0].files[0].name||s.length&&s[0].name||"",r=i.slug(a),o=i.isUploadable?s.length:e,l=i.previewCache.count()+o,h=o>1?i._getMsgSelected(l):r;if(i.isError){i.$previewContainer.removeClass("file-thumb-loading");i.$previewStatus.html("");i.$captionContainer.find(".kv-caption-icon").hide()}else{i._showFileIcon()}i._setCaption(h,i.isError);i.$container.removeClass("file-input-new file-input-ajax-new");if(arguments.length===1){i._raise("fileselect",[e,r])}if(i.previewCache.count()){i._initPreviewActions()}},_setThumbStatus:function(e,t){var i=this;if(!i.showPreview){return}var n="indicator"+t,s=n+"Title",a="file-preview-"+t.toLowerCase(),r=e.find(".file-upload-indicator"),o=i.fileActionSettings;e.removeClass("file-preview-success file-preview-error file-preview-loading");if(t==="Error"){e.find(".kv-file-upload").attr("disabled",true)}if(t==="Success"){e.find(".file-drag-handle").remove();r.css("margin-left",0)}r.html(o[n]);r.attr("title",o[s]);e.addClass(a)},_setProgressCancelled:function(){var e=this;e._setProgress(101,e.$progress,e.msgCancelled)},_setProgress:function(e,i,n){var s=this,a=Math.min(e,100),r,o,l=s.progressUploadThreshold,h=e<=100?s.progressTemplate:s.progressCompleteTemplate,c=a<100?s.progressTemplate:n?s.progressErrorTemplate:h;i=i||s.$progress;if(!t.isEmpty(c)){if(l&&a>l&&e<=100){r=c.replace(/\{percent}/g,l).replace(/\{status}/g,s.msgUploadThreshold)}else{o=e>100?s.msgUploadEnd:a+"%";r=c.replace(/\{percent}/g,a).replace(/\{status}/g,o)}i.html(r);if(n){i.find('[role="progressbar"]').html(n)}}},_setFileDropZoneTitle:function(){var e=this,i=e.$container.find(".file-drop-zone"),n=e.dropZoneTitle,s;if(e.isClickable){s=t.isEmpty(e.$element.attr("multiple"))?e.fileSingle:e.filePlural;n+=e.dropZoneClickTitle.replace("{files}",s)}i.find("."+e.dropZoneTitleClass).remove();if(!e.isUploadable||!e.showPreview||i.length===0||e.getFileStack().length>0||!e.dropZoneEnabled){return}if(i.find(t.FRAMES).length===0&&t.isEmpty(e.defaultPreviewContent)){i.prepend('<div class="'+e.dropZoneTitleClass+'">'+n+"</div>")}e.$container.removeClass("file-input-new");t.addCss(e.$container,"file-input-ajax-new")},_setAsyncUploadStatus:function(t,i,n){var s=this,a=0;s._setProgress(i,e("#"+t).find(".file-thumb-progress"));s.uploadStatus[t]=i;e.each(s.uploadStatus,function(e,t){a+=t});s._setProgress(Math.floor(a/n))},_validateMinCount:function(){var e=this,t=e.isUploadable?e.getFileStack().length:e.$element.get(0).files.length;if(e.validateInitialCount&&e.minFileCount>0&&e._getFileCount(t-1)<e.minFileCount){e._noFilesError({});return false}return true},_getFileCount:function(e){var t=this,i=0;if(t.validateInitialCount&&!t.overwriteInitial){i=t.previewCache.count();e+=i}return e},_getFileId:function(e){var t=this,i=t.generateFileId,n;if(typeof i==="function"){return i(e,event)}if(!e){return null}n=e.webkitRelativePath||e.fileName||e.name||null;if(!n){return null}return e.size+"-"+n.replace(/[^0-9a-zA-Z_-]/gim,"")},_getFileName:function(e){return e&&e.name?this.slug(e.name):undefined},_getFileIds:function(e){var t=this;return t.fileids.filter(function(t){return e?t!==undefined:t!==undefined&&t!==null})},_getFileNames:function(e){var t=this;return t.filenames.filter(function(t){return e?t!==undefined:t!==undefined&&t!==null})},_setPreviewError:function(e,t,i){var n=this;if(t!==undefined){n.updateStack(t,i)}if(n.removeFromPreviewOnError){e.remove()}else{n._setThumbStatus(e,"Error")}},_checkDimensions:function(e,i,n,s,a,r,o){var l=this,h,c,u=i==="Small"?"min":"max",d=l[u+"Image"+r],f,p;if(t.isEmpty(d)||!n.length){return}f=n[0];c=r==="Width"?f.naturalWidth||f.width:f.naturalHeight||f.height;p=i==="Small"?c>=d:c<=d;if(p){return}h=l["msgImage"+r+i].replace("{name}",a).replace("{size}",d);l._showUploadError(h,o);l._setPreviewError(s,e,null)},_validateImage:function(e,t,i){var n=this,s=n.$preview,a,r,o,l=s.find("#"+e),h=l.attr("data-fileindex"),c=l.find("img");t=t||"Untitled";if(!c.length){return}n._handler(c,"load",function(){r=l.width();o=s.width();if(r>o){c.css("width","100%");l.css("width","97%")}a={ind:h,id:e};n._checkDimensions(h,"Small",c,l,t,"Width",a);n._checkDimensions(h,"Small",c,l,t,"Height",a);if(!n.resizeImage){n._checkDimensions(h,"Large",c,l,t,"Width",a);n._checkDimensions(h,"Large",c,l,t,"Height",a)}n._raise("fileimageloaded",[e]);n.loadedImages.push({ind:h,img:c,thumb:l,pid:e,typ:i});n._validateAllImages()})},_validateAllImages:function(){var e=this,t,i={val:0},n=e.loadedImages.length;if(n!==e.totalImagesCount){return}e._raise("fileimagesloaded");if(!e.resizeImage){return}for(t=0;t<e.loadedImages.length;t++){e._getResizedImage(e.loadedImages[t],i,n)}},_getResizedImage:function(t,i,n){var s=this,a=e(t.img)[0],r=a.naturalWidth,o=a.naturalHeight,l=1,h=s.maxImageWidth||r,c=s.maxImageHeight||o,u=!!(r&&o),d,f,p=s.imageCanvas,m=s.imageCanvasContext,g=t.typ,v=t.pid,y=t.ind,b=t.thumb,w,x;w=function(e,t,i){if(s.isUploadable){s._showUploadError(e,t,i)}else{s._showError(e,t,i)}s._setPreviewError(b,y)};if(!s.filestack[y]||!u||r<=h&&o<=c){if(u&&s.filestack[y]){s._raise("fileimageresized",[v,y])}i.val++;if(i.val===n){s._raise("fileimagesresized")}if(!u){w(s.msgImageResizeError,{id:v,index:y},"fileimageresizeerror");return}}g=g||s.resizeDefaultImageType;d=r>h;f=o>c;if(s.resizePreference==="width"){l=d?h/r:f?c/o:1}else{l=f?c/o:d?h/r:1}s._resetCanvas();r*=l;o*=l;p.width=r;p.height=o;try{m.drawImage(a,0,0,r,o);p.toBlob(function(e){s.filestack[y]=e;s._raise("fileimageresized",[v,y]);i.val++;if(i.val===n){s._raise("fileimagesresized",[undefined,undefined])}if(!(e instanceof Blob)){w(s.msgImageResizeError,{id:v,index:y},"fileimageresizeerror")}},g,s.resizeQuality)}catch(e){i.val++;if(i.val===n){s._raise("fileimagesresized",[undefined,undefined])}x=s.msgImageResizeException.replace("{errors}",e.message);w(x,{id:v,index:y},"fileimageresizeexception")}},_initBrowse:function(e){var t=this;if(t.showBrowse){t.$btnFile=e.find(".btn-file");t.$btnFile.append(t.$element)}else{t.$element.hide()}},_initCaption:function(){var e=this,i=e.initialCaption||"";if(e.overwriteInitial||t.isEmpty(i)){e.$caption.html("");return false}e._setCaption(i);return true},_setCaption:function(i,n){var s=this,a,r,o,l,h=s.getFileStack();if(!s.$caption.length){return}if(n){a=e("<div>"+s.msgValidationError+"</div>").text();o=h.length;if(o){l=o===1&&h[0]?s._getFileNames()[0]:s._getMsgSelected(o)}else{l=s._getMsgSelected(s.msgNo)}r='<span class="'+s.msgValidationErrorClass+'">'+s.msgValidationErrorIcon+(t.isEmpty(i)?l:i)+"</span>"}else{if(t.isEmpty(i)){return}a=e("<div>"+i+"</div>").text();r=s._getLayoutTemplate("fileIcon")+a}s.$caption.html(r);s.$caption.attr("title",a);s.$captionContainer.find(".file-caption-ellipsis").attr("title",a)},_createContainer:function(){var t=this,i=e(document.createElement("div")).attr({class:"file-input file-input-new"}).html(t._renderMain());t.$element.before(i);t._initBrowse(i);if(t.theme){i.addClass("theme-"+t.theme)}return i},_refreshContainer:function(){var e=this,t=e.$container;t.before(e.$element);t.html(e._renderMain());e._initBrowse(t)},_renderMain:function(){var e=this,t=e.isUploadable&&e.dropZoneEnabled?" file-drop-zone":"file-drop-disabled",i=!e.showClose?"":e._getLayoutTemplate("close"),n=!e.showPreview?"":e._getLayoutTemplate("preview").replace(/\{class}/g,e.previewClass).replace(/\{dropClass}/g,t),s=e.isDisabled?e.captionClass+" file-caption-disabled":e.captionClass,a=e.captionTemplate.replace(/\{class}/g,s+" kv-fileinput-caption");return e.mainTemplate.replace(/\{class}/g,e.mainClass+(!e.showBrowse&&e.showCaption?" no-browse":"")).replace(/\{preview}/g,n).replace(/\{close}/g,i).replace(/\{caption}/g,a).replace(/\{upload}/g,e._renderButton("upload")).replace(/\{remove}/g,e._renderButton("remove")).replace(/\{cancel}/g,e._renderButton("cancel")).replace(/\{browse}/g,e._renderButton("browse"))},_renderButton:function(e){var i=this,n=i._getLayoutTemplate("btnDefault"),s=i[e+"Class"],a=i[e+"Title"],r=i[e+"Icon"],o=i[e+"Label"],l=i.isDisabled?" disabled":"",h="button";switch(e){case"remove":if(!i.showRemove){return""}break;case"cancel":if(!i.showCancel){return""}s+=" hide";break;case"upload":if(!i.showUpload){return""}if(i.isUploadable&&!i.isDisabled){n=i._getLayoutTemplate("btnLink").replace("{href}",i.uploadUrl)}else{h="submit"}break;case"browse":if(!i.showBrowse){return""}n=i._getLayoutTemplate("btnBrowse");break;default:return""}s+=e==="browse"?" btn-file":" fileinput-"+e+" fileinput-"+e+"-button";if(!t.isEmpty(o)){o=' <span class="'+i.buttonLabelClass+'">'+o+"</span>"}return n.replace("{type}",h).replace("{css}",s).replace("{title}",a).replace("{status}",l).replace("{icon}",r).replace("{label}",o)},_renderThumbProgress:function(){var e=this;return'<div class="file-thumb-progress hide">'+e.progressTemplate.replace(/\{percent}/g,"0").replace(/\{status}/g,e.msgUploadBegin)+"</div>"},_renderFileFooter:function(e,i,n,s){var a=this,r=a.fileActionSettings,o=r.showRemove,l=r.showDrag,h=r.showUpload,c=r.showZoom,u,d=a._getLayoutTemplate("footer"),f=s?r.indicatorError:r.indicatorNew,p=s?r.indicatorErrorTitle:r.indicatorNewTitle;i=a._getSize(i);if(a.isUploadable){u=d.replace(/\{actions}/g,a._renderFileActions(h,o,c,l,false,false,false)).replace(/\{caption}/g,e).replace(/\{size}/g,i).replace(/\{width}/g,n).replace(/\{progress}/g,a._renderThumbProgress()).replace(/\{indicator}/g,f).replace(/\{indicatorTitle}/g,p)}else{u=d.replace(/\{actions}/g,a._renderFileActions(false,false,c,l,false,false,false)).replace(/\{caption}/g,e).replace(/\{size}/g,i).replace(/\{width}/g,n).replace(/\{progress}/g,"").replace(/\{indicator}/g,f).replace(/\{indicatorTitle}/g,p)}u=t.replaceTags(u,a.previewThumbTags);return u},_renderFileActions:function(e,t,i,n,s,a,r,o){if(!e&&!t&&!i&&!n){return""}var l=this,h=a===false?"":' data-url="'+a+'"',c=r===false?"":' data-key="'+r+'"',u="",d="",f="",p="",m,g=l._getLayoutTemplate("actions"),v=l.fileActionSettings,y=l.otherActionButtons.replace(/\{dataKey}/g,c),b=s?v.removeClass+" disabled":v.removeClass;if(t){u=l._getLayoutTemplate("actionDelete").replace(/\{removeClass}/g,b).replace(/\{removeIcon}/g,v.removeIcon).replace(/\{removeTitle}/g,v.removeTitle).replace(/\{dataUrl}/g,h).replace(/\{dataKey}/g,c)}if(e){d=l._getLayoutTemplate("actionUpload").replace(/\{uploadClass}/g,v.uploadClass).replace(/\{uploadIcon}/g,v.uploadIcon).replace(/\{uploadTitle}/g,v.uploadTitle)}if(i){f=l._getLayoutTemplate("actionZoom").replace(/\{zoomClass}/g,v.zoomClass).replace(/\{zoomIcon}/g,v.zoomIcon).replace(/\{zoomTitle}/g,v.zoomTitle)}if(n&&o){m="drag-handle-init "+v.dragClass;p=l._getLayoutTemplate("actionDrag").replace(/\{dragClass}/g,m).replace(/\{dragTitle}/g,v.dragTitle).replace(/\{dragIcon}/g,v.dragIcon)}return g.replace(/\{delete}/g,u).replace(/\{upload}/g,d).replace(/\{zoom}/g,f).replace(/\{drag}/g,p).replace(/\{other}/g,y)},_browse:function(e){var t=this;t._raise("filebrowse");if(e&&e.isDefaultPrevented()){return}if(t.isError&&!t.isUploadable){t.clear()}t.$captionContainer.focus()},_filterDuplicate:function(e,t,i){var n=this,s=n._getFileId(e);if(s&&i&&i.indexOf(s)>-1){return}if(!i){i=[]}t.push(e);i.push(s)},_change:function(i){var n=this,s=n.$element;if(!n.isUploadable&&t.isEmpty(s.val())&&n.fileInputCleared){n.fileInputCleared=false;return}n.fileInputCleared=false;var a=[],r,o,l=arguments.length>1,h=n.isUploadable,c,u,d=l?i.originalEvent.dataTransfer.files:s.get(0).files,f=n.filestack.length,p=t.isEmpty(s.attr("multiple")),m=p&&f>0,g=0,v=n._getFileIds(),y=function(t,i,s,a){var r=e.extend(true,{},n._getOutData({},{},d),{id:s,index:a}),o={id:s,index:a,file:i,files:d};return n.isUploadable?n._showUploadError(t,r):n._showError(t,o)};n.reader=null;n._resetUpload();n._hideFileIcon();if(n.isUploadable){n.$container.find(".file-drop-zone ."+n.dropZoneTitleClass).remove()}if(l){e.each(d,function(e,t){if(t&&!t.type&&t.size!==undefined&&t.size%4096===0){g++}else{n._filterDuplicate(t,a,v)}})}else{if(i.target&&i.target.files===undefined){d=i.target.value?[{name:i.target.value.replace(/^.+\\/,"")}]:[]}else{d=i.target.files||{}}e.each(d,function(e,t){n._filterDuplicate(t,a,v)})}if(t.isEmpty(a)||a.length===0){if(!h){n.clear()}n._showFolderError(g);n._raise("fileselectnone");return}n._resetErrors();u=a.length;o=n._getFileCount(n.isUploadable?n.getFileStack().length+u:u);if(n.maxFileCount>0&&o>n.maxFileCount){if(!n.autoReplace||u>n.maxFileCount){c=n.autoReplace&&u>n.maxFileCount?u:o;r=n.msgFilesTooMany.replace("{m}",n.maxFileCount).replace("{n}",c);n.isError=y(r,null,null,null);n.$captionContainer.find(".kv-caption-icon").hide();n._setCaption("",true);n.$container.removeClass("file-input-new file-input-ajax-new");return}if(o>n.maxFileCount){n._resetPreviewThumbs(h)}}else{if(!h||m){n._resetPreviewThumbs(false);if(m){n.clearStack()}}else{if(h&&f===0&&(!n.previewCache.count()||n.overwriteInitial)){n._resetPreviewThumbs(true)}}}if(n.isPreviewable){n._readFiles(a)}else{n._updateFileDetails(1)}n._showFolderError(g)},_abort:function(t){var i=this,n;if(i.ajaxAborted&&typeof i.ajaxAborted==="object"&&i.ajaxAborted.message!==undefined){n=e.extend(true,{},i._getOutData(),t);n.abortData=i.ajaxAborted.data||{};n.abortMessage=i.ajaxAborted.message;i.cancel();i._setProgress(101,i.$progress,i.msgCancelled);i._showUploadError(i.ajaxAborted.message,n,"filecustomerror");return true}return false},_resetFileStack:function(){var i=this,n=0,s=[],a=[],r=[];i._getThumbs().each(function(){var o=e(this),l=o.attr("data-fileindex"),h=i.filestack[l],c=o.attr("id"),u;if(l==="-1"||l===-1){return}if(h!==undefined){s[n]=h;a[n]=i._getFileName(h);r[n]=i._getFileId(h);o.attr({id:i.previewInitId+"-"+n,"data-fileindex":n});n++}else{u="uploaded-"+t.uniqId();o.attr({id:u,"data-fileindex":"-1"});i.$preview.find("#zoom-"+c).attr("id","zoom-"+u)}});i.filestack=s;i.filenames=a;i.fileids=r},clearStack:function(){var e=this;e.filestack=[];e.filenames=[];e.fileids=[];return e.$element},updateStack:function(e,t){var i=this;i.filestack[e]=t;i.filenames[e]=i._getFileName(t);i.fileids[e]=t&&i._getFileId(t)||null;return i.$element},addToStack:function(e){var t=this;t.filestack.push(e);t.filenames.push(t._getFileName(e));t.fileids.push(t._getFileId(e));return t.$element},getFileStack:function(e){var t=this;return t.filestack.filter(function(t){return e?t!==undefined:t!==undefined&&t!==null})},getFilesCount:function(){var e=this,t=e.isUploadable?e.getFileStack().length:e.$element.get(0).files.length;return e._getFileCount(t)},lock:function(){var e=this;e._resetErrors();e.disable();if(e.showRemove){t.addCss(e.$container.find(".fileinput-remove"),"hide")}if(e.showCancel){e.$container.find(".fileinput-cancel").removeClass("hide")}e._raise("filelock",[e.filestack,e._getExtraData()]);return e.$element},unlock:function(e){var i=this;if(e===undefined){e=true}i.enable();if(i.showCancel){t.addCss(i.$container.find(".fileinput-cancel"),"hide")}if(i.showRemove){i.$container.find(".fileinput-remove").removeClass("hide")}if(e){i._resetFileStack()}i._raise("fileunlock",[i.filestack,i._getExtraData()]);return i.$element},cancel:function(){var t=this,i=t.ajaxRequests,n=i.length,s;if(n>0){for(s=0;s<n;s+=1){t.cancelling=true;i[s].abort()}}t._setProgressCancelled();t._getThumbs().each(function(){var i=e(this),n=i.attr("data-fileindex");i.removeClass("file-uploading");if(t.filestack[n]!==undefined){i.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled");i.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")}t.unlock()});return t.$element},clear:function(){var i=this,n;if(!i._raise("fileclear")){return}i.$btnUpload.removeAttr("disabled");i._getThumbs().find("video,audio,img").each(function(){t.cleanMemory(e(this))});i._resetUpload();i.clearStack();i._clearFileInput();i._resetErrors(true);if(i._hasInitialPreview()){i._showFileIcon();i._resetPreview();i._initPreviewActions();i.$container.removeClass("file-input-new")}else{i._getThumbs().each(function(){i._clearObjects(e(this))});if(i.isUploadable){i.previewCache.data={}}i.$preview.html("");n=!i.overwriteInitial&&i.initialCaption.length>0?i.initialCaption:"";i.$caption.html(n);i.$caption.attr("title","");t.addCss(i.$container,"file-input-new");i._validateDefaultPreview()}if(i.$container.find(t.FRAMES).length===0){if(!i._initCaption()){i.$captionContainer.find(".kv-caption-icon").hide()}}i._hideFileIcon();i._raise("filecleared");i.$captionContainer.focus();i._setFileDropZoneTitle();return i.$element},reset:function(){var e=this;if(!e._raise("filereset")){return}e._resetPreview();e.$container.find(".fileinput-filename").text("");t.addCss(e.$container,"file-input-new");if(e.$preview.find(t.FRAMES).length||e.isUploadable&&e.dropZoneEnabled){e.$container.removeClass("file-input-new")}e._setFileDropZoneTitle();e.clearStack();e.formdata={};return e.$element},disable:function(){var e=this;e.isDisabled=true;e._raise("filedisabled");e.$element.attr("disabled","disabled");e.$container.find(".kv-fileinput-caption").addClass("file-caption-disabled");e.$container.find(".btn-file, .fileinput-remove, .fileinput-upload, .file-preview-frame button").attr("disabled",true);e._initDragDrop();return e.$element},enable:function(){var e=this;e.isDisabled=false;e._raise("fileenabled");e.$element.removeAttr("disabled");e.$container.find(".kv-fileinput-caption").removeClass("file-caption-disabled");e.$container.find(".btn-file, .fileinput-remove, .fileinput-upload, .file-preview-frame button").removeAttr("disabled");e._initDragDrop();return e.$element},upload:function(){var i=this,n=i.getFileStack().length,s={},a,r,o,l=!e.isEmptyObject(i._getExtraData());if(!i.isUploadable||i.isDisabled){return}if(i.minFileCount>0&&i._getFileCount(n)<i.minFileCount){i._noFilesError(s);return}i._resetUpload();if(n===0&&!l){i._showUploadError(i.msgUploadEmpty);return}i.$progress.removeClass("hide");i.uploadCount=0;i.uploadStatus={};i.uploadLog=[];i.lock();i._setProgress(2);if(n===0&&l){i._uploadExtraOnly();return}o=i.filestack.length;i.hasInitData=false;if(i.uploadAsync){r=i._getOutData();i._raise("filebatchpreupload",[r]);i.fileBatchCompleted=false;i.uploadCache={content:[],config:[],tags:[],append:true};i.uploadAsyncCount=i.getFileStack().length;for(a=0;a<o;a++){i.uploadCache.content[a]=null;i.uploadCache.config[a]=null;i.uploadCache.tags[a]=null}i.$preview.find(".file-preview-initial").removeClass(t.SORT_CSS);i._initSortable();i.cacheInitialPreview=i.getPreview();for(a=0;a<o;a++){if(i.filestack[a]!==undefined){i._uploadSingle(a,i.filestack,true)}}return}i._uploadBatch();return i.$element},destroy:function(){var t=this,i=t.$form,n=t.$container,s=t.$element,a=t.namespace;e(document).off(a);e(window).off(a);if(i&&i.length){i.off(a)}s.insertBefore(n).off(a).removeData();n.off().remove();return s},refresh:function(t){var i=this,n=i.$element;t=t?e.extend(true,{},i.options,t):i.options;i.destroy();n.fileinput(t);if(n.val()){n.trigger("change.fileinput")}return n},zoom:function(i){var n=this,s=e("#"+i),a=n.$modal;if(!s.length){n._log('Cannot zoom to detailed preview! Invalid frame with id: "'+i+'".');return}t.initModal(a);a.html(n._getModalContent());n._setZoomContent(s);a.modal("show");n._initZoomButtons()},getPreview:function(){var e=this;return{content:e.initialPreview,config:e.initialPreviewConfig,tags:e.initialPreviewThumbTags}}};e.fn.fileinput=function(n){if(!t.hasFileAPISupport()&&!t.isIE(9)){return}var s=Array.apply(null,arguments),a=[];s.shift();this.each(function(){var r=e(this),o=r.data("fileinput"),l=typeof n==="object"&&n,h=l.theme||r.data("theme"),c={},u={},d=l.language||r.data("language")||e.fn.fileinput.defaults.language||"en",f;if(!o){if(h){u=e.fn.fileinputThemes[h]||{}}if(d!=="en"&&!t.isEmpty(e.fn.fileinputLocales[d])){c=e.fn.fileinputLocales[d]||{}}f=e.extend(true,{},e.fn.fileinput.defaults,u,e.fn.fileinputLocales.en,c,l,r.data());o=new i(this,f);r.data("fileinput",o)}if(typeof n==="string"){a.push(o[n].apply(o,s))}});switch(a.length){case 0:return this;case 1:return a[0];default:return a}};e.fn.fileinput.defaults={language:"en",showCaption:true,showBrowse:true,showPreview:true,showRemove:true,showUpload:true,showCancel:true,showClose:true,showUploadedThumbs:true,browseOnZoneClick:false,autoReplace:false,generateFileId:null,previewClass:"",captionClass:"",frameClass:"krajee-default",mainClass:"file-caption-main",
mainTemplate:null,purifyHtml:true,fileSizeGetter:null,initialCaption:"",initialPreview:[],initialPreviewDelimiter:"*$$*",initialPreviewAsData:false,initialPreviewFileType:"image",initialPreviewConfig:[],initialPreviewThumbTags:[],previewThumbTags:{},initialPreviewShowDelete:true,removeFromPreviewOnError:false,deleteUrl:"",deleteExtraData:{},overwriteInitial:true,previewZoomButtonIcons:{prev:'<i class="glyphicon glyphicon-triangle-left"></i>',next:'<i class="glyphicon glyphicon-triangle-right"></i>',toggleheader:'<i class="glyphicon glyphicon-resize-vertical"></i>',fullscreen:'<i class="glyphicon glyphicon-fullscreen"></i>',borderless:'<i class="glyphicon glyphicon-resize-full"></i>',close:'<i class="glyphicon glyphicon-remove"></i>'},previewZoomButtonClasses:{prev:"btn btn-navigate",next:"btn btn-navigate",toggleheader:"btn btn-default btn-header-toggle",fullscreen:"btn btn-default",borderless:"btn btn-default",close:"btn btn-default"},preferIconicPreview:false,preferIconicZoomPreview:false,allowedPreviewTypes:undefined,allowedPreviewMimeTypes:null,allowedFileTypes:null,allowedFileExtensions:null,defaultPreviewContent:null,customLayoutTags:{},customPreviewTags:{},previewFileIcon:'<i class="glyphicon glyphicon-file"></i>',previewFileIconClass:"file-other-icon",previewFileIconSettings:{},previewFileExtSettings:{},buttonLabelClass:"hidden-xs",browseIcon:'<i class="glyphicon glyphicon-folder-open"></i>&nbsp;',browseClass:"btn btn-primary",removeIcon:'<i class="glyphicon glyphicon-trash"></i>',removeClass:"btn btn-default",cancelIcon:'<i class="glyphicon glyphicon-ban-circle"></i>',cancelClass:"btn btn-default",uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',uploadClass:"btn btn-default",uploadUrl:null,uploadAsync:true,uploadExtraData:{},zoomModalHeight:480,minImageWidth:null,minImageHeight:null,maxImageWidth:null,maxImageHeight:null,resizeImage:false,resizePreference:"width",resizeQuality:.92,resizeDefaultImageType:"image/jpeg",minFileSize:0,maxFileSize:0,maxFilePreviewSize:25600,minFileCount:0,maxFileCount:0,validateInitialCount:false,msgValidationErrorClass:"text-danger",msgValidationErrorIcon:'<i class="glyphicon glyphicon-exclamation-sign"></i> ',msgErrorClass:"file-error-message",progressThumbClass:"progress-bar progress-bar-success progress-bar-striped active",progressClass:"progress-bar progress-bar-success progress-bar-striped active",progressCompleteClass:"progress-bar progress-bar-success",progressErrorClass:"progress-bar progress-bar-danger",progressUploadThreshold:99,previewFileType:"image",elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null,elErrorContainer:null,errorCloseButton:'<span class="close kv-error-close">&times;</span>',slugCallback:null,dropZoneEnabled:true,dropZoneTitleClass:"file-drop-zone-title",fileActionSettings:{},otherActionButtons:"",textEncoding:"UTF-8",ajaxSettings:{},ajaxDeleteSettings:{},showAjaxErrorDetails:true};e.fn.fileinputLocales.en={fileSingle:"file",filePlural:"files",browseLabel:"Browse &hellip;",removeLabel:"Remove",removeTitle:"Clear selected files",cancelLabel:"Cancel",cancelTitle:"Abort ongoing upload",uploadLabel:"Upload",uploadTitle:"Upload selected files",msgNo:"No",msgNoFilesSelected:"No files selected",msgCancelled:"Cancelled",msgZoomModalHeading:"Detailed Preview",msgSizeTooSmall:'File "{name}" (<b>{size} KB</b>) is too small and must be larger than <b>{minSize} KB</b>.',msgSizeTooLarge:'File "{name}" (<b>{size} KB</b>) exceeds maximum allowed upload size of <b>{maxSize} KB</b>.',msgFilesTooLess:"You must select at least <b>{n}</b> {files} to upload.",msgFilesTooMany:"Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>.",msgFileNotFound:'File "{name}" not found!',msgFileSecured:'Security restrictions prevent reading the file "{name}".',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgInvalidFileName:'Invalid or unsupported characters in file name "{name}".',msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.',msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.',msgFileTypes:{image:"image",html:"HTML",text:"text",video:"video",audio:"audio",flash:"flash",pdf:"PDF",object:"object"},msgUploadAborted:"The file upload was aborted",msgUploadThreshold:"Processing...",msgUploadBegin:"Initializing...",msgUploadEnd:"Done",msgUploadEmpty:"No valid data available for upload.",msgValidationError:"Validation Error",msgLoading:"Loading file {index} of {files} &hellip;",msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} {files} selected",msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.",msgImageWidthSmall:'Width of image file "{name}" must be at least {size} px.',msgImageHeightSmall:'Height of image file "{name}" must be at least {size} px.',msgImageWidthLarge:'Width of image file "{name}" cannot exceed {size} px.',msgImageHeightLarge:'Height of image file "{name}" cannot exceed {size} px.',msgImageResizeError:"Could not get the image dimensions to resize.",msgImageResizeException:"Error while resizing the image.<pre>{errors}</pre>",msgAjaxError:"Something went wrong with the {operation} operation. Please try again later!",msgAjaxProgressError:"{operation} failed",ajaxOperations:{deleteThumb:"file delete",uploadThumb:"file upload",uploadBatch:"batch file upload",uploadExtra:"form data upload"},dropZoneTitle:"Drag & drop files here &hellip;",dropZoneClickTitle:"<br>(or click to select {files})",previewZoomButtonTitles:{prev:"View previous file",next:"View next file",toggleheader:"Toggle header",fullscreen:"Toggle full screen",borderless:"Toggle borderless mode",close:"Close detailed preview"}};e.fn.fileinput.Constructor=i;e(document).ready(function(){var t=e("input.file[type=file]");if(t.length){t.fileinput()}})});(function(e){"use strict";e.fn.fileinputThemes.gly={fileActionSettings:{removeIcon:'<i class="glyphicon glyphicon-trash text-danger"></i>',uploadIcon:'<i class="glyphicon glyphicon-upload text-info"></i>',zoomIcon:'<i class="glyphicon glyphicon-zoom-in"></i>',dragIcon:'<i class="glyphicon glyphicon-menu-hamburger"></i>',indicatorNew:'<i class="glyphicon glyphicon-hand-down text-warning"></i>',indicatorSuccess:'<i class="glyphicon glyphicon-ok-sign text-success"></i>',indicatorError:'<i class="glyphicon glyphicon-exclamation-sign text-danger"></i>',indicatorLoading:'<i class="glyphicon glyphicon-hand-up text-muted"></i>'},layoutTemplates:{fileIcon:'<i class="glyphicon glyphicon-file kv-caption-icon"></i>'},previewZoomButtonIcons:{prev:'<i class="glyphicon glyphicon-triangle-left"></i>',next:'<i class="glyphicon glyphicon-triangle-right"></i>',toggleheader:'<i class="glyphicon glyphicon-resize-vertical"></i>',fullscreen:'<i class="glyphicon glyphicon-fullscreen"></i>',borderless:'<i class="glyphicon glyphicon-resize-full"></i>',close:'<i class="glyphicon glyphicon-remove"></i>'},previewFileIcon:'<i class="glyphicon glyphicon-file"></i>',browseIcon:'<i class="glyphicon glyphicon-folder-open"></i>&nbsp;',removeIcon:'<i class="glyphicon glyphicon-trash"></i>',cancelIcon:'<i class="glyphicon glyphicon-ban-circle"></i>',uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',msgValidationErrorIcon:'<i class="glyphicon glyphicon-exclamation-sign"></i> '}})(window.jQuery);(function(e){if(typeof define==="function"&&define.amd)define(["jquery"],e);else if(typeof exports==="object")e(require("jquery"));else e(jQuery)})(function(e,t){if(!("indexOf"in Array.prototype)){Array.prototype.indexOf=function(e,i){if(i===t)i=0;if(i<0)i+=this.length;if(i<0)i=0;for(var n=this.length;i<n;i++){if(i in this&&this[i]===e){return i}}return-1}}function i(){var e,t,i,n,s,a,r,o;t=(new Date).toString();i=((r=t.split("(")[1])!=null?r.slice(0,-1):0)||t.split(" ");if(i instanceof Array){a=[];for(var n=0,s=i.length;n<s;n++){o=i[n];if((e=(r=o.match(/\b[A-Z]+\b/))!==null)?r[0]:0){a.push(e)}}i=a.pop()}return i}function n(){return new Date(Date.UTC.apply(Date,arguments))}var s=function(n,s){var a=this;this.element=e(n);this.container=s.container||"body";this.language=s.language||this.element.data("date-language")||"en";this.language=this.language in r?this.language:this.language.split("-")[0];this.language=this.language in r?this.language:"en";this.isRTL=r[this.language].rtl||false;this.formatType=s.formatType||this.element.data("format-type")||"standard";this.format=o.parseFormat(s.format||this.element.data("date-format")||r[this.language].format||o.getDefaultFormat(this.formatType,"input"),this.formatType);this.isInline=false;this.isVisible=false;this.isInput=this.element.is("input");this.fontAwesome=s.fontAwesome||this.element.data("font-awesome")||false;this.bootcssVer=s.bootcssVer||(this.isInput?this.element.is(".form-control")?3:2:this.bootcssVer=this.element.is(".input-group")?3:2);this.component=this.element.is(".date")?this.bootcssVer===3?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-remove, .input-group-addon .glyphicon-calendar, .input-group-addon .fa-calendar, .input-group-addon .fa-clock-o").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar, .add-on .fa-calendar, .add-on .fa-clock-o").parent():false;this.componentReset=this.element.is(".date")?this.bootcssVer===3?this.element.find(".input-group-addon .glyphicon-remove, .input-group-addon .fa-times").parent():this.element.find(".add-on .icon-remove, .add-on .fa-times").parent():false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0){this.component=false}this.linkField=s.linkField||this.element.data("link-field")||false;this.linkFormat=o.parseFormat(s.linkFormat||this.element.data("link-format")||o.getDefaultFormat(this.formatType,"link"),this.formatType);this.minuteStep=s.minuteStep||this.element.data("minute-step")||5;this.pickerPosition=s.pickerPosition||this.element.data("picker-position")||"bottom-right";this.showMeridian=s.showMeridian||this.element.data("show-meridian")||false;this.initialDate=s.initialDate||new Date;this.zIndex=s.zIndex||this.element.data("z-index")||t;this.title=typeof s.title==="undefined"?false:s.title;this.timezone=s.timezone||i();this.icons={leftArrow:this.fontAwesome?"fa-arrow-left":this.bootcssVer===3?"glyphicon-arrow-left":"icon-arrow-left",rightArrow:this.fontAwesome?"fa-arrow-right":this.bootcssVer===3?"glyphicon-arrow-right":"icon-arrow-right"};this.icontype=this.fontAwesome?"fa":"glyphicon";this._attachEvents();this.clickedOutside=function(t){if(e(t.target).closest(".datetimepicker").length===0){a.hide()}};this.formatViewType="datetime";if("formatViewType"in s){this.formatViewType=s.formatViewType}else if("formatViewType"in this.element.data()){this.formatViewType=this.element.data("formatViewType")}this.minView=0;if("minView"in s){this.minView=s.minView}else if("minView"in this.element.data()){this.minView=this.element.data("min-view")}this.minView=o.convertViewMode(this.minView);this.maxView=o.modes.length-1;if("maxView"in s){this.maxView=s.maxView}else if("maxView"in this.element.data()){this.maxView=this.element.data("max-view")}this.maxView=o.convertViewMode(this.maxView);this.wheelViewModeNavigation=false;if("wheelViewModeNavigation"in s){this.wheelViewModeNavigation=s.wheelViewModeNavigation}else if("wheelViewModeNavigation"in this.element.data()){this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")}this.wheelViewModeNavigationInverseDirection=false;if("wheelViewModeNavigationInverseDirection"in s){this.wheelViewModeNavigationInverseDirection=s.wheelViewModeNavigationInverseDirection}else if("wheelViewModeNavigationInverseDirection"in this.element.data()){this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")}this.wheelViewModeNavigationDelay=100;if("wheelViewModeNavigationDelay"in s){this.wheelViewModeNavigationDelay=s.wheelViewModeNavigationDelay}else if("wheelViewModeNavigationDelay"in this.element.data()){this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")}this.startViewMode=2;if("startView"in s){this.startViewMode=s.startView}else if("startView"in this.element.data()){this.startViewMode=this.element.data("start-view")}this.startViewMode=o.convertViewMode(this.startViewMode);this.viewMode=this.startViewMode;this.viewSelect=this.minView;if("viewSelect"in s){this.viewSelect=s.viewSelect}else if("viewSelect"in this.element.data()){this.viewSelect=this.element.data("view-select")}this.viewSelect=o.convertViewMode(this.viewSelect);this.forceParse=true;if("forceParse"in s){this.forceParse=s.forceParse}else if("dateForceParse"in this.element.data()){this.forceParse=this.element.data("date-force-parse")}var l=this.bootcssVer===3?o.templateV3:o.template;while(l.indexOf("{iconType}")!==-1){l=l.replace("{iconType}",this.icontype)}while(l.indexOf("{leftArrow}")!==-1){l=l.replace("{leftArrow}",this.icons.leftArrow)}while(l.indexOf("{rightArrow}")!==-1){l=l.replace("{rightArrow}",this.icons.rightArrow)}this.picker=e(l).appendTo(this.isInline?this.element:this.container).on({click:e.proxy(this.click,this),mousedown:e.proxy(this.mousedown,this)});if(this.wheelViewModeNavigation){if(e.fn.mousewheel){this.picker.on({mousewheel:e.proxy(this.mousewheel,this)})}else{console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")}}if(this.isInline){this.picker.addClass("datetimepicker-inline")}else{this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu")}if(this.isRTL){this.picker.addClass("datetimepicker-rtl");var h=this.bootcssVer===3?".prev span, .next span":".prev i, .next i";this.picker.find(h).toggleClass(this.icons.leftArrow+" "+this.icons.rightArrow)}e(document).on("mousedown touchend",this.clickedOutside);this.autoclose=false;if("autoclose"in s){this.autoclose=s.autoclose}else if("dateAutoclose"in this.element.data()){this.autoclose=this.element.data("date-autoclose")}this.keyboardNavigation=true;if("keyboardNavigation"in s){this.keyboardNavigation=s.keyboardNavigation}else if("dateKeyboardNavigation"in this.element.data()){this.keyboardNavigation=this.element.data("date-keyboard-navigation")}this.todayBtn=s.todayBtn||this.element.data("date-today-btn")||false;this.clearBtn=s.clearBtn||this.element.data("date-clear-btn")||false;this.todayHighlight=s.todayHighlight||this.element.data("date-today-highlight")||false;this.weekStart=0;if(typeof s.weekStart!=="undefined"){this.weekStart=s.weekStart}else if(typeof this.element.data("date-weekstart")!=="undefined"){this.weekStart=this.element.data("date-weekstart")}else if(typeof r[this.language].weekStart!=="undefined"){this.weekStart=r[this.language].weekStart}this.weekStart=this.weekStart%7;this.weekEnd=(this.weekStart+6)%7;this.onRenderDay=function(e){var t=(s.onRenderDay||function(){return[]})(e);if(typeof t==="string"){t=[t]}var i=["day"];return i.concat(t?t:[])};this.onRenderHour=function(e){var t=(s.onRenderHour||function(){return[]})(e);var i=["hour"];if(typeof t==="string"){t=[t]}return i.concat(t?t:[])};this.onRenderMinute=function(e){var t=(s.onRenderMinute||function(){return[]})(e);var i=["minute"];if(typeof t==="string"){t=[t]}if(e<this.startDate||e>this.endDate){i.push("disabled")}else if(Math.floor(this.date.getUTCMinutes()/this.minuteStep)===Math.floor(e.getUTCMinutes()/this.minuteStep)){i.push("active")}return i.concat(t?t:[])};this.onRenderYear=function(e){var t=(s.onRenderYear||function(){return[]})(e);var i=["year"];if(typeof t==="string"){t=[t]}if(this.date.getUTCFullYear()===e.getUTCFullYear()){i.push("active")}var n=e.getUTCFullYear();var a=this.endDate.getUTCFullYear();if(e<this.startDate||n>a){i.push("disabled")}return i.concat(t?t:[])};this.onRenderMonth=function(e){var t=(s.onRenderMonth||function(){return[]})(e);var i=["month"];if(typeof t==="string"){t=[t]}return i.concat(t?t:[])};this.startDate=new Date(-8639968443048e3);this.endDate=new Date(8639968443048e3);this.datesDisabled=[];this.daysOfWeekDisabled=[];this.setStartDate(s.startDate||this.element.data("date-startdate"));this.setEndDate(s.endDate||this.element.data("date-enddate"));this.setDatesDisabled(s.datesDisabled||this.element.data("date-dates-disabled"));this.setDaysOfWeekDisabled(s.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled"));this.setMinutesDisabled(s.minutesDisabled||this.element.data("date-minute-disabled"));this.setHoursDisabled(s.hoursDisabled||this.element.data("date-hour-disabled"));this.fillDow();this.fillMonths();this.update();this.showMode();if(this.isInline){this.show()}};s.prototype={constructor:s,_events:[],_attachEvents:function(){this._detachEvents();if(this.isInput){this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]}else if(this.component&&this.hasInput){this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]];if(this.componentReset){this._events.push([this.componentReset,{click:e.proxy(this.reset,this)}])}}else if(this.element.is("div")){this.isInline=true}else{this._events=[[this.element,{click:e.proxy(this.show,this)}]]}for(var t=0,i,n;t<this._events.length;t++){i=this._events[t][0];n=this._events[t][1];i.on(n)}},_detachEvents:function(){for(var e=0,t,i;e<this._events.length;e++){t=this._events[e][0];i=this._events[e][1];t.off(i)}this._events=[]},show:function(t){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();if(this.forceParse){this.update()}this.place();e(window).on("resize",e.proxy(this.place,this));if(t){t.stopPropagation();t.preventDefault()}this.isVisible=true;this.element.trigger({type:"show",date:this.date})},hide:function(){if(!this.isVisible)return;if(this.isInline)return;this.picker.hide();e(window).off("resize",this.place);this.viewMode=this.startViewMode;this.showMode();if(!this.isInput){e(document).off("mousedown",this.hide)}if(this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val()))this.setValue();this.isVisible=false;this.element.trigger({type:"hide",date:this.date})},remove:function(){this._detachEvents();e(document).off("mousedown",this.clickedOutside);this.picker.remove();delete this.picker;delete this.element.data().datetimepicker},getDate:function(){var e=this.getUTCDate();if(e===null){return null}return new Date(e.getTime()+e.getTimezoneOffset()*6e4)},getUTCDate:function(){return this.date},getInitialDate:function(){return this.initialDate},setInitialDate:function(e){this.initialDate=e},setDate:function(e){this.setUTCDate(new Date(e.getTime()-e.getTimezoneOffset()*6e4))},setUTCDate:function(e){if(e>=this.startDate&&e<=this.endDate){this.date=e;this.setValue();this.viewDate=this.date;this.fill()}else{this.element.trigger({type:"outOfRange",date:e,startDate:this.startDate,endDate:this.endDate})}},setFormat:function(e){this.format=o.parseFormat(e,this.formatType);var t;if(this.isInput){t=this.element}else if(this.component){t=this.element.find("input")}if(t&&t.val()){this.setValue()}},setValue:function(){var t=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find("input").val(t)}this.element.data("date",t)}else{this.element.val(t)}if(this.linkField){e("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))}},getFormattedDate:function(e){e=e||this.format;return o.formatDate(this.date,e,this.language,this.formatType,this.timezone)},setStartDate:function(e){this.startDate=e||this.startDate;if(this.startDate.valueOf()!==8639968443048e3){this.startDate=o.parseDate(this.startDate,this.format,this.language,this.formatType,this.timezone)}this.update();this.updateNavArrows()},setEndDate:function(e){this.endDate=e||this.endDate;if(this.endDate.valueOf()!==8639968443048e3){this.endDate=o.parseDate(this.endDate,this.format,this.language,this.formatType,this.timezone)}this.update();this.updateNavArrows()},setDatesDisabled:function(t){this.datesDisabled=t||[];if(!e.isArray(this.datesDisabled)){this.datesDisabled=this.datesDisabled.split(/,\s*/)}var i=this;this.datesDisabled=e.map(this.datesDisabled,function(e){return o.parseDate(e,i.format,i.language,i.formatType,i.timezone).toDateString()});this.update();this.updateNavArrows()},setTitle:function(e,t){return this.picker.find(e).find("th:eq(1)").text(this.title===false?t:this.title)},setDaysOfWeekDisabled:function(t){this.daysOfWeekDisabled=t||[];if(!e.isArray(this.daysOfWeekDisabled)){this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)}this.daysOfWeekDisabled=e.map(this.daysOfWeekDisabled,function(e){return parseInt(e,10)});this.update();this.updateNavArrows()},setMinutesDisabled:function(t){this.minutesDisabled=t||[];if(!e.isArray(this.minutesDisabled)){this.minutesDisabled=this.minutesDisabled.split(/,\s*/)}this.minutesDisabled=e.map(this.minutesDisabled,function(e){return parseInt(e,10)});this.update();this.updateNavArrows()},setHoursDisabled:function(t){this.hoursDisabled=t||[];if(!e.isArray(this.hoursDisabled)){this.hoursDisabled=this.hoursDisabled.split(/,\s*/)}this.hoursDisabled=e.map(this.hoursDisabled,function(e){return parseInt(e,10)});this.update();this.updateNavArrows()},place:function(){if(this.isInline)return;if(!this.zIndex){var t=0;e("div").each(function(){var i=parseInt(e(this).css("zIndex"),10);if(i>t){t=i}});this.zIndex=t+10}var i,n,s,a;if(this.container instanceof e){a=this.container.offset()}else{a=e(this.container).offset()}if(this.component){i=this.component.offset();s=i.left;if(this.pickerPosition==="bottom-left"||this.pickerPosition==="top-left"){s+=this.component.outerWidth()-this.picker.outerWidth()}}else{i=this.element.offset();s=i.left;if(this.pickerPosition==="bottom-left"||this.pickerPosition==="top-left"){s+=this.element.outerWidth()-this.picker.outerWidth()}}var r=document.body.clientWidth||window.innerWidth;if(s+220>r){s=r-220}if(this.pickerPosition==="top-left"||this.pickerPosition==="top-right"){n=i.top-this.picker.outerHeight()}else{n=i.top+this.height}n=n-a.top;s=s-a.left;this.picker.css({top:n,left:s,zIndex:this.zIndex})},hour_minute:"^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]",update:function(){var e,t=false;if(arguments&&arguments.length&&(typeof arguments[0]==="string"||arguments[0]instanceof Date)){e=arguments[0];t=true}else{e=(this.isInput?this.element.val():this.element.find("input").val())||this.element.data("date")||this.initialDate;if(typeof e==="string"){e=e.replace(/^\s+|\s+$/g,"")}}if(!e){e=new Date;t=false}if(typeof e==="string"){if(new RegExp(this.hour_minute).test(e)||new RegExp(this.hour_minute+":[0-5][0-9]").test(e)){e=this.getDate()}}this.date=o.parseDate(e,this.format,this.language,this.formatType,this.timezone);if(t)this.setValue();if(this.date<this.startDate){this.viewDate=new Date(this.startDate)}else if(this.date>this.endDate){this.viewDate=new Date(this.endDate)}else{this.viewDate=new Date(this.date)}this.fill()},fillDow:function(){var e=this.weekStart,t="<tr>";while(e<this.weekStart+7){t+='<th class="dow">'+r[this.language].daysMin[e++%7]+"</th>"}t+="</tr>";this.picker.find(".datetimepicker-days thead").append(t)},fillMonths:function(){var e="";var t=new Date(this.viewDate);for(var i=0;i<12;i++){t.setUTCMonth(i);var n=this.onRenderMonth(t);e+='<span class="'+n.join(" ")+'">'+r[this.language].monthsShort[i]+"</span>"}this.picker.find(".datetimepicker-months td").html(e)},fill:function(){if(!this.date||!this.viewDate){return}var t=new Date(this.viewDate),i=t.getUTCFullYear(),s=t.getUTCMonth(),l=t.getUTCDate(),h=t.getUTCHours(),c=this.startDate.getUTCFullYear(),u=this.startDate.getUTCMonth(),d=this.endDate.getUTCFullYear(),f=this.endDate.getUTCMonth()+1,p=new n(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),m=new Date;this.setTitle(".datetimepicker-days",r[this.language].months[s]+" "+i);if(this.formatViewType==="time"){var g=this.getFormattedDate();this.setTitle(".datetimepicker-hours",g);this.setTitle(".datetimepicker-minutes",g)}else{this.setTitle(".datetimepicker-hours",l+" "+r[this.language].months[s]+" "+i);this.setTitle(".datetimepicker-minutes",l+" "+r[this.language].months[s]+" "+i)}this.picker.find("tfoot th.today").text(r[this.language].today||r["en"].today).toggle(this.todayBtn!==false);this.picker.find("tfoot th.clear").text(r[this.language].clear||r["en"].clear).toggle(this.clearBtn!==false);this.updateNavArrows();this.fillMonths();var v=n(i,s-1,28,0,0,0,0),y=o.getDaysInMonth(v.getUTCFullYear(),v.getUTCMonth());v.setUTCDate(y);v.setUTCDate(y-(v.getUTCDay()-this.weekStart+7)%7);var b=new Date(v);b.setUTCDate(b.getUTCDate()+42);b=b.valueOf();var w=[];var x;while(v.valueOf()<b){if(v.getUTCDay()===this.weekStart){w.push("<tr>")}x=this.onRenderDay(v);if(v.getUTCFullYear()<i||v.getUTCFullYear()===i&&v.getUTCMonth()<s){x.push("old")}else if(v.getUTCFullYear()>i||v.getUTCFullYear()===i&&v.getUTCMonth()>s){x.push("new")}if(this.todayHighlight&&v.getUTCFullYear()===m.getFullYear()&&v.getUTCMonth()===m.getMonth()&&v.getUTCDate()===m.getDate()){x.push("today")}if(v.valueOf()===p){x.push("active")}if(v.valueOf()+864e5<=this.startDate||v.valueOf()>this.endDate||e.inArray(v.getUTCDay(),this.daysOfWeekDisabled)!==-1||e.inArray(v.toDateString(),this.datesDisabled)!==-1){x.push("disabled")}w.push('<td class="'+x.join(" ")+'">'+v.getUTCDate()+"</td>");if(v.getUTCDay()===this.weekEnd){w.push("</tr>")}v.setUTCDate(v.getUTCDate()+1)}this.picker.find(".datetimepicker-days tbody").empty().append(w.join(""));w=[];var _="",C="",k="";var T=this.hoursDisabled||[];t=new Date(this.viewDate);for(var S=0;S<24;S++){t.setUTCHours(S);x=this.onRenderHour(t);if(T.indexOf(S)!==-1){x.push("disabled")}var M=n(i,s,l,S);if(M.valueOf()+36e5<=this.startDate||M.valueOf()>this.endDate){x.push("disabled")}else if(h===S){x.push("active")}if(this.showMeridian&&r[this.language].meridiem.length===2){C=S<12?r[this.language].meridiem[0]:r[this.language].meridiem[1];if(C!==k){if(k!==""){w.push("</fieldset>")}w.push('<fieldset class="hour"><legend>'+C.toUpperCase()+"</legend>")}k=C;_=S%12?S%12:12;if(S<12){x.push("hour_am")}else{x.push("hour_pm")}w.push('<span class="'+x.join(" ")+'">'+_+"</span>");if(S===23){w.push("</fieldset>")}}else{_=S+":00";w.push('<span class="'+x.join(" ")+'">'+_+"</span>")}}this.picker.find(".datetimepicker-hours td").html(w.join(""));w=[];_="";C="";k="";var D=this.minutesDisabled||[];t=new Date(this.viewDate);for(var S=0;S<60;S+=this.minuteStep){if(D.indexOf(S)!==-1)continue;t.setUTCMinutes(S);t.setUTCSeconds(0);x=this.onRenderMinute(t);if(this.showMeridian&&r[this.language].meridiem.length===2){C=h<12?r[this.language].meridiem[0]:r[this.language].meridiem[1];if(C!==k){if(k!==""){w.push("</fieldset>")}w.push('<fieldset class="minute"><legend>'+C.toUpperCase()+"</legend>")}k=C;_=h%12?h%12:12;w.push('<span class="'+x.join(" ")+'">'+_+":"+(S<10?"0"+S:S)+"</span>");if(S===59){w.push("</fieldset>")}}else{_=S+":00";w.push('<span class="'+x.join(" ")+'">'+h+":"+(S<10?"0"+S:S)+"</span>")}}this.picker.find(".datetimepicker-minutes td").html(w.join(""));var $=this.date.getUTCFullYear();var E=this.setTitle(".datetimepicker-months",i).end().find(".month").removeClass("active");if($===i){E.eq(this.date.getUTCMonth()).addClass("active")}if(i<c||i>d){E.addClass("disabled")}if(i===c){E.slice(0,u).addClass("disabled")}if(i===d){E.slice(f).addClass("disabled")}w="";i=parseInt(i/10,10)*10;var A=this.setTitle(".datetimepicker-years",i+"-"+(i+9)).end().find("td");i-=1;t=new Date(this.viewDate);for(var S=-1;S<11;S++){t.setUTCFullYear(i);x=this.onRenderYear(t);if(S===-1||S===10){x.push(a)}w+='<span class="'+x.join(" ")+'">'+i+"</span>";i+=1}A.html(w);this.place()},updateNavArrows:function(){var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth(),n=e.getUTCDate(),s=e.getUTCHours();switch(this.viewMode){case 0:if(t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()&&s<=this.startDate.getUTCHours()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()&&s>=this.endDate.getUTCHours()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 1:if(t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 2:if(t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 3:case 4:if(t<=this.startDate.getUTCFullYear()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(t>=this.endDate.getUTCFullYear()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break}},mousewheel:function(t){t.preventDefault();t.stopPropagation();if(this.wheelPause){return}this.wheelPause=true;var i=t.originalEvent;var n=i.wheelDelta;var s=n>0?1:n===0?0:-1;if(this.wheelViewModeNavigationInverseDirection){s=-s}this.showMode(s);setTimeout(e.proxy(function(){this.wheelPause=false},this),this.wheelViewModeNavigationDelay)},click:function(t){t.stopPropagation();t.preventDefault();var i=e(t.target).closest("span, td, th, legend");if(i.is("."+this.icontype)){i=e(i).parent().closest("span, td, th, legend")}if(i.length===1){if(i.is(".disabled")){this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});return}switch(i[0].nodeName.toLowerCase()){case"th":switch(i[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var s=o.modes[this.viewMode].navStep*(i[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,s);break;case 1:this.viewDate=this.moveDate(this.viewDate,s);break;case 2:this.viewDate=this.moveMonth(this.viewDate,s);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,s);break}this.fill();this.element.trigger({type:i[0].className+":"+this.convertViewModeText(this.viewMode),date:this.viewDate,startDate:this.startDate,endDate:this.endDate});break;case"clear":this.reset();if(this.autoclose){this.hide()}break;case"today":var a=new Date;a=n(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),0);if(a<this.startDate)a=this.startDate;else if(a>this.endDate)a=this.endDate;this.viewMode=this.startViewMode;this.showMode(0);this._setDate(a);this.fill();if(this.autoclose){this.hide()}break}break;case"span":if(!i.is(".disabled")){var r=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),h=this.viewDate.getUTCDate(),c=this.viewDate.getUTCHours(),u=this.viewDate.getUTCMinutes(),d=this.viewDate.getUTCSeconds();if(i.is(".month")){this.viewDate.setUTCDate(1);l=i.parent().find("span").index(i);h=this.viewDate.getUTCDate();this.viewDate.setUTCMonth(l);this.element.trigger({type:"changeMonth",date:this.viewDate
});if(this.viewSelect>=3){this._setDate(n(r,l,h,c,u,d,0))}}else if(i.is(".year")){this.viewDate.setUTCDate(1);r=parseInt(i.text(),10)||0;this.viewDate.setUTCFullYear(r);this.element.trigger({type:"changeYear",date:this.viewDate});if(this.viewSelect>=4){this._setDate(n(r,l,h,c,u,d,0))}}else if(i.is(".hour")){c=parseInt(i.text(),10)||0;if(i.hasClass("hour_am")||i.hasClass("hour_pm")){if(c===12&&i.hasClass("hour_am")){c=0}else if(c!==12&&i.hasClass("hour_pm")){c+=12}}this.viewDate.setUTCHours(c);this.element.trigger({type:"changeHour",date:this.viewDate});if(this.viewSelect>=1){this._setDate(n(r,l,h,c,u,d,0))}}else if(i.is(".minute")){u=parseInt(i.text().substr(i.text().indexOf(":")+1),10)||0;this.viewDate.setUTCMinutes(u);this.element.trigger({type:"changeMinute",date:this.viewDate});if(this.viewSelect>=0){this._setDate(n(r,l,h,c,u,d,0))}}if(this.viewMode!==0){var f=this.viewMode;this.showMode(-1);this.fill();if(f===this.viewMode&&this.autoclose){this.hide()}}else{this.fill();if(this.autoclose){this.hide()}}}break;case"td":if(i.is(".day")&&!i.is(".disabled")){var h=parseInt(i.text(),10)||1;var r=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),c=this.viewDate.getUTCHours(),u=this.viewDate.getUTCMinutes(),d=this.viewDate.getUTCSeconds();if(i.is(".old")){if(l===0){l=11;r-=1}else{l-=1}}else if(i.is(".new")){if(l===11){l=0;r+=1}else{l+=1}}this.viewDate.setUTCFullYear(r);this.viewDate.setUTCMonth(l,h);this.element.trigger({type:"changeDay",date:this.viewDate});if(this.viewSelect>=2){this._setDate(n(r,l,h,c,u,d,0))}}var f=this.viewMode;this.showMode(-1);this.fill();if(f===this.viewMode&&this.autoclose){this.hide()}break}}},_setDate:function(e,t){if(!t||t==="date")this.date=e;if(!t||t==="view")this.viewDate=e;this.fill();this.setValue();var i;if(this.isInput){i=this.element}else if(this.component){i=this.element.find("input")}if(i){i.change()}this.element.trigger({type:"changeDate",date:this.getDate()});if(e===null)this.date=this.viewDate},moveMinute:function(e,t){if(!t)return e;var i=new Date(e.valueOf());i.setUTCMinutes(i.getUTCMinutes()+t*this.minuteStep);return i},moveHour:function(e,t){if(!t)return e;var i=new Date(e.valueOf());i.setUTCHours(i.getUTCHours()+t);return i},moveDate:function(e,t){if(!t)return e;var i=new Date(e.valueOf());i.setUTCDate(i.getUTCDate()+t);return i},moveMonth:function(e,t){if(!t)return e;var i=new Date(e.valueOf()),n=i.getUTCDate(),s=i.getUTCMonth(),a=Math.abs(t),r,o;t=t>0?1:-1;if(a===1){o=t===-1?function(){return i.getUTCMonth()===s}:function(){return i.getUTCMonth()!==r};r=s+t;i.setUTCMonth(r);if(r<0||r>11)r=(r+12)%12}else{for(var l=0;l<a;l++)i=this.moveMonth(i,t);r=i.getUTCMonth();i.setUTCDate(n);o=function(){return r!==i.getUTCMonth()}}while(o()){i.setUTCDate(--n);i.setUTCMonth(r)}return i},moveYear:function(e,t){return this.moveMonth(e,t*12)},dateWithinRange:function(e){return e>=this.startDate&&e<=this.endDate},keydown:function(e){if(this.picker.is(":not(:visible)")){if(e.keyCode===27)this.show();return}var t=false,i,n,s;switch(e.keyCode){case 27:this.hide();e.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;i=e.keyCode===37?-1:1;var a=this.viewMode;if(e.ctrlKey){a+=2}else if(e.shiftKey){a+=1}if(a===4){n=this.moveYear(this.date,i);s=this.moveYear(this.viewDate,i)}else if(a===3){n=this.moveMonth(this.date,i);s=this.moveMonth(this.viewDate,i)}else if(a===2){n=this.moveDate(this.date,i);s=this.moveDate(this.viewDate,i)}else if(a===1){n=this.moveHour(this.date,i);s=this.moveHour(this.viewDate,i)}else if(a===0){n=this.moveMinute(this.date,i);s=this.moveMinute(this.viewDate,i)}if(this.dateWithinRange(n)){this.date=n;this.viewDate=s;this.setValue();this.update();e.preventDefault();t=true}break;case 38:case 40:if(!this.keyboardNavigation)break;i=e.keyCode===38?-1:1;a=this.viewMode;if(e.ctrlKey){a+=2}else if(e.shiftKey){a+=1}if(a===4){n=this.moveYear(this.date,i);s=this.moveYear(this.viewDate,i)}else if(a===3){n=this.moveMonth(this.date,i);s=this.moveMonth(this.viewDate,i)}else if(a===2){n=this.moveDate(this.date,i*7);s=this.moveDate(this.viewDate,i*7)}else if(a===1){if(this.showMeridian){n=this.moveHour(this.date,i*6);s=this.moveHour(this.viewDate,i*6)}else{n=this.moveHour(this.date,i*4);s=this.moveHour(this.viewDate,i*4)}}else if(a===0){n=this.moveMinute(this.date,i*4);s=this.moveMinute(this.viewDate,i*4)}if(this.dateWithinRange(n)){this.date=n;this.viewDate=s;this.setValue();this.update();e.preventDefault();t=true}break;case 13:if(this.viewMode!==0){var r=this.viewMode;this.showMode(-1);this.fill();if(r===this.viewMode&&this.autoclose){this.hide()}}else{this.fill();if(this.autoclose){this.hide()}}e.preventDefault();break;case 9:this.hide();break}if(t){var o;if(this.isInput){o=this.element}else if(this.component){o=this.element.find("input")}if(o){o.change()}this.element.trigger({type:"changeDate",date:this.getDate()})}},showMode:function(e){if(e){var t=Math.max(0,Math.min(o.modes.length-1,this.viewMode+e));if(t>=this.minView&&t<=this.maxView){this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:t});this.viewMode=t}}this.picker.find(">div").hide().filter(".datetimepicker-"+o.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()},reset:function(){this._setDate(null,"date")},convertViewModeText:function(e){switch(e){case 4:return"decade";case 3:return"year";case 2:return"month";case 1:return"day";case 0:return"hour"}}};var a=e.fn.datetimepicker;e.fn.datetimepicker=function(i){var n=Array.apply(null,arguments);n.shift();var a;this.each(function(){var r=e(this),o=r.data("datetimepicker"),l=typeof i==="object"&&i;if(!o){r.data("datetimepicker",o=new s(this,e.extend({},e.fn.datetimepicker.defaults,l)))}if(typeof i==="string"&&typeof o[i]==="function"){a=o[i].apply(o,n);if(a!==t){return false}}});if(a!==t)return a;else return this};e.fn.datetimepicker.defaults={};e.fn.datetimepicker.Constructor=s;var r=e.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today",clear:"Clear"}};var o={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,o.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},getDefaultFormat:function(e,t){if(e==="standard"){if(t==="input")return"yyyy-mm-dd hh:ii";else return"yyyy-mm-dd hh:ii:ss"}else if(e==="php"){if(t==="input")return"Y-m-d H:i";else return"Y-m-d H:i:s"}else{throw new Error("Invalid format type.")}},validParts:function(e){if(e==="standard"){return/t|hh?|HH?|p|P|z|Z|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g}else if(e==="php"){return/[dDjlNwzFmMnStyYaABgGhHis]/g}else{throw new Error("Invalid format type.")}},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(e,t){var i=e.replace(this.validParts(t),"\0").split("\0"),n=e.match(this.validParts(t));if(!i||!i.length||!n||n.length===0){throw new Error("Invalid date format.")}return{separators:i,parts:n}},parseDate:function(t,i,a,o,l){if(t instanceof Date){var h=new Date(t.valueOf()-t.getTimezoneOffset()*6e4);h.setMilliseconds(0);return h}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(t)){i=this.parseFormat("yyyy-mm-dd",o)}if(/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(t)){i=this.parseFormat("yyyy-mm-dd hh:ii",o)}if(/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(t)){i=this.parseFormat("yyyy-mm-dd hh:ii:ss",o)}if(/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(t)){var c=/([-+]\d+)([dmwy])/,u=t.match(/([-+]\d+)([dmwy])/g),d,f;t=new Date;for(var p=0;p<u.length;p++){d=c.exec(u[p]);f=parseInt(d[1]);switch(d[2]){case"d":t.setUTCDate(t.getUTCDate()+f);break;case"m":t=s.prototype.moveMonth.call(s.prototype,t,f);break;case"w":t.setUTCDate(t.getUTCDate()+f*7);break;case"y":t=s.prototype.moveYear.call(s.prototype,t,f);break}}return n(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),0)}var u=t&&t.toString().match(this.nonpunctuation)||[],t=new Date(0,0,0,0,0,0,0),m={},g=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P","z","Z"],v={hh:function(e,t){return e.setUTCHours(t)},h:function(e,t){return e.setUTCHours(t)},HH:function(e,t){return e.setUTCHours(t===12?0:t)},H:function(e,t){return e.setUTCHours(t===12?0:t)},ii:function(e,t){return e.setUTCMinutes(t)},i:function(e,t){return e.setUTCMinutes(t)},ss:function(e,t){return e.setUTCSeconds(t)},s:function(e,t){return e.setUTCSeconds(t)},yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){t-=1;while(t<0)t+=12;t%=12;e.setUTCMonth(t);while(e.getUTCMonth()!==t)if(isNaN(e.getUTCMonth()))return e;else e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)},p:function(e,t){return e.setUTCHours(t===1?e.getUTCHours()+12:e.getUTCHours())},z:function(){return l}},y,b,d;v["M"]=v["MM"]=v["mm"]=v["m"];v["dd"]=v["d"];v["P"]=v["p"];v["Z"]=v["z"];t=n(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());if(u.length===i.parts.length){for(var p=0,w=i.parts.length;p<w;p++){y=parseInt(u[p],10);d=i.parts[p];if(isNaN(y)){switch(d){case"MM":b=e(r[a].months).filter(function(){var e=this.slice(0,u[p].length),t=u[p].slice(0,e.length);return e===t});y=e.inArray(b[0],r[a].months)+1;break;case"M":b=e(r[a].monthsShort).filter(function(){var e=this.slice(0,u[p].length),t=u[p].slice(0,e.length);return e.toLowerCase()===t.toLowerCase()});y=e.inArray(b[0],r[a].monthsShort)+1;break;case"p":case"P":y=e.inArray(u[p].toLowerCase(),r[a].meridiem);break;case"z":case"Z":l;break}}m[d]=y}for(var p=0,x;p<g.length;p++){x=g[p];if(x in m&&!isNaN(m[x]))v[x](t,m[x])}}return t},formatDate:function(t,i,n,s,a){if(t===null){return""}var l;if(s==="standard"){l={t:t.getTime(),yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear(),m:t.getUTCMonth()+1,M:r[n].monthsShort[t.getUTCMonth()],MM:r[n].months[t.getUTCMonth()],d:t.getUTCDate(),D:r[n].daysShort[t.getUTCDay()],DD:r[n].days[t.getUTCDay()],p:r[n].meridiem.length===2?r[n].meridiem[t.getUTCHours()<12?0:1]:"",h:t.getUTCHours(),i:t.getUTCMinutes(),s:t.getUTCSeconds(),z:a};if(r[n].meridiem.length===2){l.H=l.h%12===0?12:l.h%12}else{l.H=l.h}l.HH=(l.H<10?"0":"")+l.H;l.P=l.p.toUpperCase();l.Z=l.z;l.hh=(l.h<10?"0":"")+l.h;l.ii=(l.i<10?"0":"")+l.i;l.ss=(l.s<10?"0":"")+l.s;l.dd=(l.d<10?"0":"")+l.d;l.mm=(l.m<10?"0":"")+l.m}else if(s==="php"){l={y:t.getUTCFullYear().toString().substring(2),Y:t.getUTCFullYear(),F:r[n].months[t.getUTCMonth()],M:r[n].monthsShort[t.getUTCMonth()],n:t.getUTCMonth()+1,t:o.getDaysInMonth(t.getUTCFullYear(),t.getUTCMonth()),j:t.getUTCDate(),l:r[n].days[t.getUTCDay()],D:r[n].daysShort[t.getUTCDay()],w:t.getUTCDay(),N:t.getUTCDay()===0?7:t.getUTCDay(),S:t.getUTCDate()%10<=r[n].suffix.length?r[n].suffix[t.getUTCDate()%10-1]:"",a:r[n].meridiem.length===2?r[n].meridiem[t.getUTCHours()<12?0:1]:"",g:t.getUTCHours()%12===0?12:t.getUTCHours()%12,G:t.getUTCHours(),i:t.getUTCMinutes(),s:t.getUTCSeconds()};l.m=(l.n<10?"0":"")+l.n;l.d=(l.j<10?"0":"")+l.j;l.A=l.a.toString().toUpperCase();l.h=(l.g<10?"0":"")+l.g;l.H=(l.G<10?"0":"")+l.G;l.i=(l.i<10?"0":"")+l.i;l.s=(l.s<10?"0":"")+l.s}else{throw new Error("Invalid format type.")}var t=[],h=e.extend([],i.separators);for(var c=0,u=i.parts.length;c<u;c++){if(h.length){t.push(h.shift())}t.push(l[i.parts[c]])}if(h.length){t.push(h.shift())}return t.join("")},convertViewMode:function(e){switch(e){case 4:case"decade":e=4;break;case 3:case"year":e=3;break;case 2:case"month":e=2;break;case 1:case"day":e=1;break;case 0:case"hour":e=0;break}return e},headTemplate:"<thead>"+"<tr>"+'<th class="prev"><i class="{iconType} {leftArrow}"/></th>'+'<th colspan="5" class="switch"></th>'+'<th class="next"><i class="{iconType} {rightArrow}"/></th>'+"</tr>"+"</thead>",headTemplateV3:"<thead>"+"<tr>"+'<th class="prev"><span class="{iconType} {leftArrow}"></span> </th>'+'<th colspan="5" class="switch"></th>'+'<th class="next"><span class="{iconType} {rightArrow}"></span> </th>'+"</tr>"+"</thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:"<tfoot>"+'<tr><th colspan="7" class="today"></th></tr>'+'<tr><th colspan="7" class="clear"></th></tr>'+"</tfoot>"};o.template='<div class="datetimepicker">'+'<div class="datetimepicker-minutes">'+'<table class=" table-condensed">'+o.headTemplate+o.contTemplate+o.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-hours">'+'<table class=" table-condensed">'+o.headTemplate+o.contTemplate+o.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-days">'+'<table class=" table-condensed">'+o.headTemplate+"<tbody></tbody>"+o.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-months">'+'<table class="table-condensed">'+o.headTemplate+o.contTemplate+o.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-years">'+'<table class="table-condensed">'+o.headTemplate+o.contTemplate+o.footTemplate+"</table>"+"</div>"+"</div>";o.templateV3='<div class="datetimepicker">'+'<div class="datetimepicker-minutes">'+'<table class=" table-condensed">'+o.headTemplateV3+o.contTemplate+o.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-hours">'+'<table class=" table-condensed">'+o.headTemplateV3+o.contTemplate+o.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-days">'+'<table class=" table-condensed">'+o.headTemplateV3+"<tbody></tbody>"+o.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-months">'+'<table class="table-condensed">'+o.headTemplateV3+o.contTemplate+o.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-years">'+'<table class="table-condensed">'+o.headTemplateV3+o.contTemplate+o.footTemplate+"</table>"+"</div>"+"</div>";e.fn.datetimepicker.DPGlobal=o;e.fn.datetimepicker.noConflict=function(){e.fn.datetimepicker=a;return this};e(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(t){var i=e(this);if(i.data("datetimepicker"))return;t.preventDefault();i.datetimepicker("show")});e(function(){e('[data-provide="datetimepicker-inline"]').datetimepicker()})});(function(e){"use strict";var t=function(t,i){this.options=e.extend({},e.fn.editableform.defaults,i);this.$div=e(t);if(!this.options.scope){this.options.scope=this}};t.prototype={constructor:t,initInput:function(){this.input=this.options.input;this.value=this.input.str2value(this.options.value);this.input.prerender()},initTemplate:function(){this.$form=e(e.fn.editableform.template)},initButtons:function(){var t=this.$form.find(".editable-buttons");t.append(e.fn.editableform.buttons);if(this.options.showbuttons==="bottom"){t.addClass("editable-buttons-bottom")}},render:function(){this.$loading=e(e.fn.editableform.loading);this.$div.empty().append(this.$loading);this.initTemplate();if(this.options.showbuttons){this.initButtons()}else{this.$form.find(".editable-buttons").remove()}this.showLoading();this.isSaving=false;this.$div.triggerHandler("rendering");this.initInput();this.$form.find("div.editable-input").append(this.input.$tpl);this.$div.append(this.$form);e.when(this.input.render()).then(e.proxy(function(){if(!this.options.showbuttons){this.input.autosubmit()}this.$form.find(".editable-cancel").click(e.proxy(this.cancel,this));if(this.input.error){this.error(this.input.error);this.$form.find(".editable-submit").attr("disabled",true);this.input.$input.attr("disabled",true);this.$form.submit(function(e){e.preventDefault()})}else{this.error(false);this.input.$input.removeAttr("disabled");this.$form.find(".editable-submit").removeAttr("disabled");var t=this.value===null||this.value===undefined||this.value===""?this.options.defaultValue:this.value;this.input.value2input(t);this.$form.submit(e.proxy(this.submit,this))}this.$div.triggerHandler("rendered");this.showForm();if(this.input.postrender){this.input.postrender()}},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var e,t;if(this.$form){e=this.$form.outerWidth();t=this.$form.outerHeight();if(e){this.$loading.width(e)}if(t){this.$loading.height(t)}this.$form.hide()}else{e=this.$loading.parent().width();if(e){this.$loading.width(e)}}this.$loading.show()},showForm:function(e){this.$loading.hide();this.$form.show();if(e!==false){this.input.activate()}this.$div.triggerHandler("show")},error:function(t){var i=this.$form.find(".control-group"),n=this.$form.find(".editable-error-block"),s;if(t===false){i.removeClass(e.fn.editableform.errorGroupClass);n.removeClass(e.fn.editableform.errorBlockClass).empty().hide()}else{if(t){s=(""+t).split("\n");for(var a=0;a<s.length;a++){s[a]=e("<div>").text(s[a]).html()}t=s.join("<br>")}i.addClass(e.fn.editableform.errorGroupClass);n.addClass(e.fn.editableform.errorBlockClass).html(t).show()}},submit:function(t){t.stopPropagation();t.preventDefault();var i=this.input.input2value();var n=this.validate(i);if(e.type(n)==="object"&&n.newValue!==undefined){i=n.newValue;this.input.value2input(i);if(typeof n.msg==="string"){this.error(n.msg);this.showForm();return}}else if(n){this.error(n);this.showForm();return}if(!this.options.savenochange&&this.input.value2str(i)==this.input.value2str(this.value)){this.$div.triggerHandler("nochange");return}var s=this.input.value2submit(i);this.isSaving=true;e.when(this.save(s)).done(e.proxy(function(e){this.isSaving=false;var t=typeof this.options.success==="function"?this.options.success.call(this.options.scope,e,i):null;if(t===false){this.error(false);this.showForm(false);return}if(typeof t==="string"){this.error(t);this.showForm();return}if(t&&typeof t==="object"&&t.hasOwnProperty("newValue")){i=t.newValue}this.error(false);this.value=i;this.$div.triggerHandler("save",{newValue:i,submitValue:s,response:e})},this)).fail(e.proxy(function(e){this.isSaving=false;var t;if(typeof this.options.error==="function"){t=this.options.error.call(this.options.scope,e,i)}else{t=typeof e==="string"?e:e.responseText||e.statusText||"Unknown error!"}this.error(t);this.showForm()},this))},save:function(t){this.options.pk=e.fn.editableutils.tryParseJson(this.options.pk,true);var i=typeof this.options.pk==="function"?this.options.pk.call(this.options.scope):this.options.pk,n=!!(typeof this.options.url==="function"||this.options.url&&(this.options.send==="always"||this.options.send==="auto"&&i!==null&&i!==undefined)),s;if(n){this.showLoading();s={name:this.options.name||"",value:t,pk:i};if(typeof this.options.params==="function"){s=this.options.params.call(this.options.scope,s)}else{this.options.params=e.fn.editableutils.tryParseJson(this.options.params,true);e.extend(s,this.options.params)}if(typeof this.options.url==="function"){return this.options.url.call(this.options.scope,s)}else{return e.ajax(e.extend({url:this.options.url,data:s,type:"POST"},this.options.ajaxOptions))}}},validate:function(e){if(e===undefined){e=this.value}if(typeof this.options.validate==="function"){return this.options.validate.call(this.options.scope,e)}},option:function(e,t){if(e in this.options){this.options[e]=t}if(e==="value"){this.setValue(t)}},setValue:function(e,t){if(t){this.value=this.input.str2value(e)}else{this.value=e}if(this.$form&&this.$form.is(":visible")){this.input.value2input(this.value)}}};e.fn.editableform=function(i){var n=arguments;return this.each(function(){var s=e(this),a=s.data("editableform"),r=typeof i==="object"&&i;if(!a){s.data("editableform",a=new t(this,r))}if(typeof i==="string"){a[i].apply(a,Array.prototype.slice.call(n,1))}})};e.fn.editableform.Constructor=t;e.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:true,scope:null,savenochange:false};e.fn.editableform.template='<form class="form-inline editableform">'+'<div class="control-group">'+'<div><div class="editable-input"></div><div class="editable-buttons"></div></div>'+'<div class="editable-error-block"></div>'+"</div>"+"</form>";e.fn.editableform.loading='<div class="editableform-loading"></div>';e.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button>'+'<button type="button" class="editable-cancel">cancel</button>';e.fn.editableform.errorGroupClass=null;e.fn.editableform.errorBlockClass="editable-error";e.fn.editableform.engine="jquery"})(window.jQuery);(function(e){"use strict";e.fn.editableutils={inherit:function(e,t){var i=function(){};i.prototype=t.prototype;e.prototype=new i;e.prototype.constructor=e;e.superclass=t.prototype},setCursorPosition:function(e,t){if(e.setSelectionRange){e.setSelectionRange(t,t)}else if(e.createTextRange){var i=e.createTextRange();i.collapse(true);i.moveEnd("character",t);i.moveStart("character",t);i.select()}},tryParseJson:function(e,t){if(typeof e==="string"&&e.length&&e.match(/^[\{\[].*[\}\]]$/)){if(t){try{e=new Function("return "+e)()}catch(e){}finally{return e}}else{e=new Function("return "+e)()}}return e},sliceObj:function(t,i,n){var s,a,r={};if(!e.isArray(i)||!i.length){return r}for(var o=0;o<i.length;o++){s=i[o];if(t.hasOwnProperty(s)){r[s]=t[s]}if(n===true){continue}a=s.toLowerCase();if(t.hasOwnProperty(a)){r[s]=t[a]}}return r},getConfigData:function(t){var i={};e.each(t.data(),function(e,t){if(typeof t!=="object"||t&&typeof t==="object"&&(t.constructor===Object||t.constructor===Array)){i[e]=t}});return i},objectKeys:function(e){if(Object.keys){return Object.keys(e)}else{if(e!==Object(e)){throw new TypeError("Object.keys called on a non-object")}var t=[],i;for(i in e){if(Object.prototype.hasOwnProperty.call(e,i)){t.push(i)}}return t}},escape:function(t){return e("<div>").text(t).html()},itemsByValue:function(t,i,n){if(!i||t===null){return[]}if(typeof n!=="function"){var s=n||"value";n=function(e){return e[s]}}var a=e.isArray(t),r=[],o=this;e.each(i,function(i,s){if(s.children){r=r.concat(o.itemsByValue(t,s.children,n))}else{if(a){if(e.grep(t,function(e){return e==(s&&typeof s==="object"?n(s):s)}).length){r.push(s)}}else{var l=s&&typeof s==="object"?n(s):s;if(t==l){r.push(s)}}}});return r},createInput:function(t){var i,n,s,a=t.type;if(a==="date"){if(t.mode==="inline"){if(e.fn.editabletypes.datefield){a="datefield"}else if(e.fn.editabletypes.dateuifield){a="dateuifield"}}else{if(e.fn.editabletypes.date){a="date"}else if(e.fn.editabletypes.dateui){a="dateui"}}if(a==="date"&&!e.fn.editabletypes.date){a="combodate"}}if(a==="datetime"&&t.mode==="inline"){a="datetimefield"}if(a==="wysihtml5"&&!e.fn.editabletypes[a]){a="textarea"}if(typeof e.fn.editabletypes[a]==="function"){i=e.fn.editabletypes[a];n=this.sliceObj(t,this.objectKeys(i.defaults));s=new i(n);return s}else{e.error("Unknown type: "+a);return false}},supportsTransitions:function(){var e=document.body||document.documentElement,t=e.style,i="transition",n=["Moz","Webkit","Khtml","O","ms"];if(typeof t[i]==="string"){return true}i=i.charAt(0).toUpperCase()+i.substr(1);for(var s=0;s<n.length;s++){if(typeof t[n[s]+i]==="string"){return true}}return false}}})(window.jQuery);(function(e){"use strict";var t=function(e,t){this.init(e,t)};var i=function(e,t){this.init(e,t)};t.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(i,n){this.$element=e(i);this.options=e.extend({},e.fn.editableContainer.defaults,n);this.splitOptions();this.formOptions.scope=this.$element[0];this.initContainer();this.delayedHide=false;this.$element.on("destroyed",e.proxy(function(){this.destroy()},this));if(!e(document).data("editable-handlers-attached")){e(document).on("keyup.editable",function(t){if(t.which===27){e(".editable-open").editableContainer("hide")}});e(document).on("click.editable",function(i){var n=e(i.target),s,a=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(!e.contains(document.documentElement,i.target)){return}if(n.is(document)){return}for(s=0;s<a.length;s++){if(n.is(a[s])||n.parents(a[s]).length){return}}t.prototype.closeOthers(i.target)});e(document).data("editable-handlers-attached",true)}},splitOptions:function(){this.containerOptions={};this.formOptions={};if(!e.fn[this.containerName]){throw new Error(this.containerName+" not found. Have you included corresponding js file?")}for(var t in this.options){if(t in this.defaults){this.containerOptions[t]=this.options[t]}else{this.formOptions[t]=this.options[t]}}},tip:function(){return this.container()?this.container().$tip:null},container:function(){var e;if(this.containerDataName){if(e=this.$element.data(this.containerDataName)){return e}}e=this.$element.data(this.containerName);return e},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:e.proxy(this.save,this),nochange:e.proxy(function(){this.hide("nochange")},this),cancel:e.proxy(function(){this.hide("cancel")},this),show:e.proxy(function(){if(this.delayedHide){this.hide(this.delayedHide.reason);this.delayedHide=false}else{this.setPosition()}},this),rendering:e.proxy(this.setPosition,this),resize:e.proxy(this.setPosition,this),rendered:e.proxy(function(){this.$element.triggerHandler("shown",e(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(t){this.$element.addClass("editable-open");if(t!==false){this.closeOthers(this.$element[0])}this.innerShow();this.tip().addClass(this.containerClass);if(this.$form){}this.$form=e("<div>");if(this.tip().is(this.innerCss)){this.tip().append(this.$form)}else{this.tip().find(this.innerCss).append(this.$form)}this.renderForm()},hide:function(e){if(!this.tip()||!this.tip().is(":visible")||!this.$element.hasClass("editable-open")){return}if(this.$form.data("editableform").isSaving){this.delayedHide={reason:e};return}else{this.delayedHide=false}this.$element.removeClass("editable-open");this.innerHide();this.$element.triggerHandler("hidden",e||"manual")},innerShow:function(){},innerHide:function(){},toggle:function(e){if(this.container()&&this.tip()&&this.tip().is(":visible")){this.hide()}else{this.show(e)}},setPosition:function(){},save:function(e,t){this.$element.triggerHandler("save",t);this.hide("save")},option:function(e,t){this.options[e]=t;if(e in this.containerOptions){this.containerOptions[e]=t;this.setContainerOption(e,t)}else{this.formOptions[e]=t;if(this.$form){this.$form.editableform("option",e,t)}}},setContainerOption:function(e,t){this.call("option",e,t)},destroy:function(){this.hide();this.innerDestroy();this.$element.off("destroyed");this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(t){e(".editable-open").each(function(i,n){if(n===t||e(n).find(t).length){return}var s=e(n),a=s.data("editableContainer");if(!a){return}if(a.options.onblur==="cancel"){s.data("editableContainer").hide("onblur")}else if(a.options.onblur==="submit"){s.data("editableContainer").tip().find("form").submit()}})},activate:function(){if(this.tip&&this.tip().is(":visible")&&this.$form){this.$form.data("editableform").input.activate()}}};e.fn.editableContainer=function(n){var s=arguments;return this.each(function(){var a=e(this),r="editableContainer",o=a.data(r),l=typeof n==="object"&&n,h=l.mode==="inline"?i:t;if(!o){a.data(r,o=new h(this,l))}if(typeof n==="string"){o[n].apply(o,Array.prototype.slice.call(s,1))}})};e.fn.editableContainer.Popup=t;e.fn.editableContainer.Inline=i;e.fn.editableContainer.defaults={value:null,placement:"top",autohide:true,onblur:"cancel",anim:false,mode:"popup"};jQuery.event.special.destroyed={remove:function(e){if(e.handler){e.handler()}}}})(window.jQuery);(function(e){"use strict";e.extend(e.fn.editableContainer.Inline.prototype,e.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=e("<span></span>");if(!this.options.anim){this.options.anim=0}},splitOptions:function(){this.containerOptions={};this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide();this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,e.proxy(function(){this.$element.show();this.innerDestroy()},this))},innerDestroy:function(){if(this.tip()){this.tip().empty().remove()}}})})(window.jQuery);(function(e){"use strict";var t=function(t,i){this.$element=e(t);this.options=e.extend({},e.fn.editable.defaults,i,e.fn.editableutils.getConfigData(this.$element));if(this.options.selector){this.initLive()}else{this.init()}if(this.options.highlight&&!e.fn.editableutils.supportsTransitions()){this.options.highlight=false}};t.prototype={constructor:t,init:function(){var t=false,i,n;this.options.name=this.options.name||this.$element.attr("id");this.options.scope=this.$element[0];this.input=e.fn.editableutils.createInput(this.options);if(!this.input){return}if(this.options.value===undefined||this.options.value===null){this.value=this.input.html2value(e.trim(this.$element.html()));t=true}else{this.options.value=e.fn.editableutils.tryParseJson(this.options.value,true);if(typeof this.options.value==="string"){this.value=this.input.str2value(this.options.value)}else{this.value=this.options.value}}this.$element.addClass("editable");if(this.input.type==="textarea"){this.$element.addClass("editable-pre-wrapped")}if(this.options.toggle!=="manual"){this.$element.addClass("editable-click");this.$element.on(this.options.toggle+".editable",e.proxy(function(e){if(!this.options.disabled){e.preventDefault()}if(this.options.toggle==="mouseenter"){this.show()}else{var t=this.options.toggle!=="click";this.toggle(t)}},this))}else{this.$element.attr("tabindex",-1)}if(typeof this.options.display==="function"){this.options.autotext="always"}switch(this.options.autotext){case"always":i=true;break;case"auto":i=!e.trim(this.$element.text()).length&&this.value!==null&&this.value!==undefined&&!t;break;default:i=false}e.when(i?this.render():true).then(e.proxy(function(){if(this.options.disabled){this.disable()}else{this.enable()}this.$element.triggerHandler("init",this)},this))},initLive:function(){var t=this.options.selector;this.options.selector=false;this.options.autotext="never";this.$element.on(this.options.toggle+".editable",t,e.proxy(function(t){var i=e(t.target);if(!i.data("editable")){if(i.hasClass(this.options.emptyclass)){i.empty()}i.editable(this.options).trigger(t)}},this))},render:function(e){if(this.options.display===false){return}if(this.input.value2htmlFinal){return this.input.value2html(this.value,this.$element[0],this.options.display,e)}else if(typeof this.options.display==="function"){return this.options.display.call(this.$element[0],this.value,e)}else{return this.input.value2html(this.value,this.$element[0])}},enable:function(){this.options.disabled=false;this.$element.removeClass("editable-disabled");this.handleEmpty(this.isEmpty);if(this.options.toggle!=="manual"){if(this.$element.attr("tabindex")==="-1"){this.$element.removeAttr("tabindex")}}},disable:function(){this.options.disabled=true;this.hide();this.$element.addClass("editable-disabled");this.handleEmpty(this.isEmpty);this.$element.attr("tabindex",-1)},toggleDisabled:function(){if(this.options.disabled){this.enable();
}else{this.disable()}},option:function(t,i){if(t&&typeof t==="object"){e.each(t,e.proxy(function(t,i){this.option(e.trim(t),i)},this));return}this.options[t]=i;if(t==="disabled"){return i?this.disable():this.enable()}if(t==="value"){this.setValue(i)}if(this.container){this.container.option(t,i)}if(this.input.option){this.input.option(t,i)}},handleEmpty:function(t){if(this.options.display===false){return}if(t!==undefined){this.isEmpty=t}else{if(typeof this.input.isEmpty==="function"){this.isEmpty=this.input.isEmpty(this.$element)}else{this.isEmpty=e.trim(this.$element.html())===""}}if(!this.options.disabled){if(this.isEmpty){this.$element.html(this.options.emptytext);if(this.options.emptyclass){this.$element.addClass(this.options.emptyclass)}}else if(this.options.emptyclass){this.$element.removeClass(this.options.emptyclass)}}else{if(this.isEmpty){this.$element.empty();if(this.options.emptyclass){this.$element.removeClass(this.options.emptyclass)}}}},show:function(t){if(this.options.disabled){return}if(!this.container){var i=e.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(i);this.$element.on("save.internal",e.proxy(this.save,this));this.container=this.$element.data("editableContainer")}else if(this.container.tip().is(":visible")){return}this.container.show(t)},hide:function(){if(this.container){this.container.hide()}},toggle:function(e){if(this.container&&this.container.tip().is(":visible")){this.hide()}else{this.show(e)}},save:function(e,t){if(this.options.unsavedclass){var i=false;i=i||typeof this.options.url==="function";i=i||this.options.display===false;i=i||t.response!==undefined;i=i||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(t.newValue);if(i){this.$element.removeClass(this.options.unsavedclass)}else{this.$element.addClass(this.options.unsavedclass)}}if(this.options.highlight){var n=this.$element,s=n.css("background-color");n.css("background-color",this.options.highlight);setTimeout(function(){if(s==="transparent"){s=""}n.css("background-color",s);n.addClass("editable-bg-transition");setTimeout(function(){n.removeClass("editable-bg-transition")},1700)},10)}this.setValue(t.newValue,false,t.response)},validate:function(){if(typeof this.options.validate==="function"){return this.options.validate.call(this,this.value)}},setValue:function(t,i,n){if(i){this.value=this.input.str2value(t)}else{this.value=t}if(this.container){this.container.option("value",this.value)}e.when(this.render(n)).then(e.proxy(function(){this.handleEmpty()},this))},activate:function(){if(this.container){this.container.activate()}},destroy:function(){this.disable();if(this.container){this.container.destroy()}this.input.destroy();if(this.options.toggle!=="manual"){this.$element.removeClass("editable-click");this.$element.off(this.options.toggle+".editable")}this.$element.off("save.internal");this.$element.removeClass("editable editable-open editable-disabled");this.$element.removeData("editable")}};e.fn.editable=function(i){var n={},s=arguments,a="editable";switch(i){case"validate":this.each(function(){var t=e(this),i=t.data(a),s;if(i&&(s=i.validate())){n[i.options.name]=s}});return n;case"getValue":if(arguments.length===2&&arguments[1]===true){n=this.eq(0).data(a).value}else{this.each(function(){var t=e(this),i=t.data(a);if(i&&i.value!==undefined&&i.value!==null){n[i.options.name]=i.input.value2submit(i.value)}})}return n;case"submit":var r=arguments[1]||{},o=this,l=this.editable("validate");if(e.isEmptyObject(l)){var h={};if(o.length===1){var c=o.data("editable");var u={name:c.options.name||"",value:c.input.value2submit(c.value),pk:typeof c.options.pk==="function"?c.options.pk.call(c.options.scope):c.options.pk};if(typeof c.options.params==="function"){u=c.options.params.call(c.options.scope,u)}else{c.options.params=e.fn.editableutils.tryParseJson(c.options.params,true);e.extend(u,c.options.params)}h={url:c.options.url,data:u,type:"POST"};r.success=r.success||c.options.success;r.error=r.error||c.options.error}else{var d=this.editable("getValue");h={url:r.url,data:d,type:"POST"}}h.success=typeof r.success==="function"?function(e){r.success.call(o,e,r)}:e.noop;h.error=typeof r.error==="function"?function(){r.error.apply(o,arguments)}:e.noop;if(r.ajaxOptions){e.extend(h,r.ajaxOptions)}if(r.data){e.extend(h.data,r.data)}e.ajax(h)}else{if(typeof r.error==="function"){r.error.call(o,l)}}return this}return this.each(function(){var n=e(this),r=n.data(a),o=typeof i==="object"&&i;if(o&&o.selector){r=new t(this,o);return}if(!r){n.data(a,r=new t(this,o))}if(typeof i==="string"){r[i].apply(r,Array.prototype.slice.call(s,1))}})};e.fn.editable.defaults={type:"text",disabled:false,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}})(window.jQuery);(function(e){"use strict";e.fn.editabletypes={};var t=function(){};t.prototype={init:function(t,i,n){this.type=t;this.options=e.extend({},n,i)},prerender:function(){this.$tpl=e(this.options.tpl);this.$input=this.$tpl;this.$clear=null;this.error=null},render:function(){},value2html:function(t,i){e(i)[this.options.escape?"text":"html"](e.trim(t))},html2value:function(t){return e("<div>").html(t).text()},value2str:function(e){return e},str2value:function(e){return e},value2submit:function(e){return e},value2input:function(e){this.$input.val(e)},input2value:function(){return this.$input.val()},activate:function(){if(this.$input.is(":visible")){this.$input.focus()}},clear:function(){this.$input.val(null)},escape:function(t){return e("<div>").text(t).html()},autosubmit:function(){},destroy:function(){},setClass:function(){if(this.options.inputclass){this.$input.addClass(this.options.inputclass)}},setAttr:function(e){if(this.options[e]!==undefined&&this.options[e]!==null){this.$input.attr(e,this.options[e])}},option:function(e,t){this.options[e]=t}};t.defaults={tpl:"",inputclass:null,escape:true,scope:null,showbuttons:true};e.extend(e.fn.editabletypes,{abstractinput:t})})(window.jQuery);(function(e){"use strict";var t=function(e){};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput);e.extend(t.prototype,{render:function(){var t=e.Deferred();this.error=null;this.onSourceReady(function(){this.renderList();t.resolve()},function(){this.error=this.options.sourceError;t.resolve()});return t.promise()},html2value:function(e){return null},value2html:function(t,i,n,s){var a=e.Deferred(),r=function(){if(typeof n==="function"){n.call(i,t,this.sourceData,s)}else{this.value2htmlFinal(t,i)}a.resolve()};if(t===null){r.call(this)}else{this.onSourceReady(r,function(){a.resolve()})}return a.promise()},onSourceReady:function(t,i){var n;if(e.isFunction(this.options.source)){n=this.options.source.call(this.options.scope);this.sourceData=null}else{n=this.options.source}if(this.options.sourceCache&&e.isArray(this.sourceData)){t.call(this);return}try{n=e.fn.editableutils.tryParseJson(n,false)}catch(e){i.call(this);return}if(typeof n==="string"){if(this.options.sourceCache){var s=n,a;if(!e(document).data(s)){e(document).data(s,{})}a=e(document).data(s);if(a.loading===false&&a.sourceData){this.sourceData=a.sourceData;this.doPrepend();t.call(this);return}else if(a.loading===true){a.callbacks.push(e.proxy(function(){this.sourceData=a.sourceData;this.doPrepend();t.call(this)},this));a.err_callbacks.push(e.proxy(i,this));return}else{a.loading=true;a.callbacks=[];a.err_callbacks=[]}}var r=e.extend({url:n,type:"get",cache:false,dataType:"json",success:e.proxy(function(n){if(a){a.loading=false}this.sourceData=this.makeArray(n);if(e.isArray(this.sourceData)){if(a){a.sourceData=this.sourceData;e.each(a.callbacks,function(){this.call()})}this.doPrepend();t.call(this)}else{i.call(this);if(a){e.each(a.err_callbacks,function(){this.call()})}}},this),error:e.proxy(function(){i.call(this);if(a){a.loading=false;e.each(a.err_callbacks,function(){this.call()})}},this)},this.options.sourceOptions);e.ajax(r)}else{this.sourceData=this.makeArray(n);if(e.isArray(this.sourceData)){this.doPrepend();t.call(this)}else{i.call(this)}}},doPrepend:function(){if(this.options.prepend===null||this.options.prepend===undefined){return}if(!e.isArray(this.prependData)){if(e.isFunction(this.options.prepend)){this.options.prepend=this.options.prepend.call(this.options.scope)}this.options.prepend=e.fn.editableutils.tryParseJson(this.options.prepend,true);if(typeof this.options.prepend==="string"){this.options.prepend={"":this.options.prepend}}this.prependData=this.makeArray(this.options.prepend)}if(e.isArray(this.prependData)&&e.isArray(this.sourceData)){this.sourceData=this.prependData.concat(this.sourceData)}},renderList:function(){},value2htmlFinal:function(e,t){},makeArray:function(t){var i,n,s=[],a,r;if(!t||typeof t==="string"){return null}if(e.isArray(t)){r=function(e,t){n={value:e,text:t};if(i++>=2){return false}};for(var o=0;o<t.length;o++){a=t[o];if(typeof a==="object"){i=0;e.each(a,r);if(i===1){s.push(n)}else if(i>1){if(a.children){a.children=this.makeArray(a.children)}s.push(a)}}else{s.push({value:a,text:a})}}}else{e.each(t,function(e,t){s.push({value:e,text:t})})}return s},option:function(e,t){this.options[e]=t;if(e==="source"){this.sourceData=null}if(e==="prepend"){this.prependData=null}}});t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{source:null,prepend:false,sourceError:"Error when loading list",sourceCache:true,sourceOptions:null});e.fn.editabletypes.list=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("text",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput);e.extend(t.prototype,{render:function(){this.renderClear();this.setClass();this.setAttr("placeholder")},activate:function(){if(this.$input.is(":visible")){this.$input.focus();e.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length);if(this.toggleClear){this.toggleClear()}}},renderClear:function(){if(this.options.clear){this.$clear=e('<span class="editable-clear-x"></span>');this.$input.after(this.$clear).css("padding-right",24).keyup(e.proxy(function(t){if(~e.inArray(t.keyCode,[40,38,9,13,27])){return}clearTimeout(this.t);var i=this;this.t=setTimeout(function(){i.toggleClear(t)},100)},this)).parent().css("position","relative");this.$clear.click(e.proxy(this.clear,this))}},postrender:function(){},toggleClear:function(e){if(!this.$clear){return}var t=this.$input.val().length,i=this.$clear.is(":visible");if(t&&!i){this.$clear.show()}if(!t&&i){this.$clear.hide()}},clear:function(){this.$clear.hide();this.$input.val("").focus()}});t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:true});e.fn.editabletypes.text=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("textarea",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput);e.extend(t.prototype,{render:function(){this.setClass();this.setAttr("placeholder");this.setAttr("rows");this.$input.keydown(function(t){if(t.ctrlKey&&t.which===13){e(this).closest("form").submit()}})},activate:function(){e.fn.editabletypes.text.prototype.activate.call(this)}});t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7});e.fn.editabletypes.textarea=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("select",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.list);e.extend(t.prototype,{renderList:function(){this.$input.empty();var t=function(i,n){var s;if(e.isArray(n)){for(var a=0;a<n.length;a++){s={};if(n[a].children){s.label=n[a].text;i.append(t(e("<optgroup>",s),n[a].children))}else{s.value=n[a].value;if(n[a].disabled){s.disabled=true}i.append(e("<option>",s).text(n[a].text))}}}return i};t(this.$input,this.sourceData);this.setClass();this.$input.on("keydown.editable",function(t){if(t.which===13){e(this).closest("form").submit()}})},value2htmlFinal:function(t,i){var n="",s=e.fn.editableutils.itemsByValue(t,this.sourceData);if(s.length){n=s[0].text}e.fn.editabletypes.abstractinput.prototype.value2html.call(this,n,i)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){e(this).closest("form").submit()})}});t.defaults=e.extend({},e.fn.editabletypes.list.defaults,{tpl:"<select></select>"});e.fn.editabletypes.select=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("checklist",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.list);e.extend(t.prototype,{renderList:function(){var t,i;this.$tpl.empty();if(!e.isArray(this.sourceData)){return}for(var n=0;n<this.sourceData.length;n++){t=e("<label>").append(e("<input>",{type:"checkbox",value:this.sourceData[n].value})).append(e("<span>").text(" "+this.sourceData[n].text));e("<div>").append(t).appendTo(this.$tpl)}this.$input=this.$tpl.find('input[type="checkbox"]');this.setClass()},value2str:function(t){return e.isArray(t)?t.sort().join(e.trim(this.options.separator)):""},str2value:function(t){var i,n=null;if(typeof t==="string"&&t.length){i=new RegExp("\\s*"+e.trim(this.options.separator)+"\\s*");n=t.split(i)}else if(e.isArray(t)){n=t}else{n=[t]}return n},value2input:function(t){this.$input.prop("checked",false);if(e.isArray(t)&&t.length){this.$input.each(function(i,n){var s=e(n);e.each(t,function(e,t){if(s.val()==t){s.prop("checked",true)}})})}},input2value:function(){var t=[];this.$input.filter(":checked").each(function(i,n){t.push(e(n).val())});return t},value2htmlFinal:function(t,i){var n=[],s=e.fn.editableutils.itemsByValue(t,this.sourceData),a=this.options.escape;if(s.length){e.each(s,function(t,i){var s=a?e.fn.editableutils.escape(i.text):i.text;n.push(s)});e(i).html(n.join("<br>"))}else{e(i).empty()}},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(t){if(t.which===13){e(this).closest("form").submit()}})}});t.defaults=e.extend({},e.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","});e.fn.editabletypes.checklist=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("password",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.text);e.extend(t.prototype,{value2html:function(t,i){if(t){e(i).text("[hidden]")}else{e(i).empty()}},html2value:function(e){return null}});t.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="password">'});e.fn.editabletypes.password=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("email",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.text);t.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="email">'});e.fn.editabletypes.email=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("url",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.text);t.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="url">'});e.fn.editabletypes.url=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("tel",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.text);t.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'});e.fn.editabletypes.tel=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("number",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.text);e.extend(t.prototype,{render:function(){t.superclass.render.call(this);this.setAttr("min");this.setAttr("max");this.setAttr("step")},postrender:function(){if(this.$clear){this.$clear.css({right:24})}}});t.defaults=e.extend({},e.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null});e.fn.editabletypes.number=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("range",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.number);e.extend(t.prototype,{render:function(){this.$input=this.$tpl.filter("input");this.setClass();this.setAttr("min");this.setAttr("max");this.setAttr("step");this.$input.on("input",function(){e(this).siblings("output").text(e(this).val())})},activate:function(){this.$input.focus()}});t.defaults=e.extend({},e.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"});e.fn.editabletypes.range=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("time",e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput);e.extend(t.prototype,{render:function(){this.setClass()}});t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'});e.fn.editabletypes.time=t})(window.jQuery);(function(e){"use strict";var t=function(i){this.init("select2",i,t.defaults);i.select2=i.select2||{};this.sourceData=null;if(i.placeholder){i.select2.placeholder=i.placeholder}if(!i.select2.tags&&i.source){var n=i.source;if(e.isFunction(i.source)){n=i.source.call(i.scope)}if(typeof n==="string"){i.select2.ajax=i.select2.ajax||{};if(!i.select2.ajax.data){i.select2.ajax.data=function(e){return{query:e}}}if(!i.select2.ajax.results){i.select2.ajax.results=function(e){return{results:e}}}i.select2.ajax.url=n}else{this.sourceData=this.convertSource(n);i.select2.data=this.sourceData}}this.options.select2=e.extend({},t.defaults.select2,i.select2);this.isMultiple=this.options.select2.tags||this.options.select2.multiple;this.isRemote="ajax"in this.options.select2;this.idFunc=this.options.select2.id;if(typeof this.idFunc!=="function"){var s=this.idFunc||"id";this.idFunc=function(e){return e[s]}}this.formatSelection=this.options.select2.formatSelection;if(typeof this.formatSelection!=="function"){this.formatSelection=function(e){return e.text}}};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput);e.extend(t.prototype,{render:function(){this.setClass();if(this.isRemote){this.$input.on("select2-loaded",e.proxy(function(e){this.sourceData=e.items.results},this))}if(this.isMultiple){this.$input.on("change",function(){e(this).closest("form").parent().triggerHandler("resize")})}},value2html:function(i,n){var s="",a,r=this;if(this.options.select2.tags){a=i}else if(this.sourceData){a=e.fn.editableutils.itemsByValue(i,this.sourceData,this.idFunc)}else{}if(e.isArray(a)){s=[];e.each(a,function(e,t){s.push(t&&typeof t==="object"?r.formatSelection(t):t)})}else if(a){s=r.formatSelection(a)}s=e.isArray(s)?s.join(this.options.viewseparator):s;t.superclass.value2html.call(this,s,n)},html2value:function(e){return this.options.select2.tags?this.str2value(e,this.options.viewseparator):null},value2input:function(t){if(e.isArray(t)){t=t.join(this.getSeparator())}if(!this.$input.data("select2")){this.$input.val(t);this.$input.select2(this.options.select2)}else{this.$input.val(t).trigger("change",true)}if(this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var i=this.options.select2.id,n=this.options.select2.formatSelection;if(!i&&!n){var s=e(this.options.scope);if(!s.data("editable").isEmpty){var a={id:t,text:s.text()};this.$input.select2("data",a)}}}},input2value:function(){return this.$input.select2("val")},str2value:function(t,i){if(typeof t!=="string"||!this.isMultiple){return t}i=i||this.getSeparator();var n,s,a;if(t===null||t.length<1){return null}n=t.split(i);for(s=0,a=n.length;s<a;s=s+1){n[s]=e.trim(n[s])}return n},autosubmit:function(){this.$input.on("change",function(t,i){if(!i){e(this).closest("form").submit()}})},getSeparator:function(){return this.options.select2.separator||e.fn.select2.defaults.separator},convertSource:function(t){if(e.isArray(t)&&t.length&&t[0].value!==undefined){for(var i=0;i<t.length;i++){if(t[i].value!==undefined){t[i].id=t[i].value;delete t[i].value}}}return t},destroy:function(){if(this.$input.data("select2")){this.$input.select2("destroy")}}});t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "});e.fn.editabletypes.select2=t})(window.jQuery);(function(e){var t=function(t,i){this.$element=e(t);if(!this.$element.is("input")){e.error("Combodate should be applied to INPUT element");return}this.options=e.extend({},e.fn.combodate.defaults,i,this.$element.data());this.init()};t.prototype={constructor:t,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]};this.$widget=e('<span class="combodate"></span>').html(this.getTemplate());this.initCombos();this.$widget.on("change","select",e.proxy(function(t){this.$element.val(this.getValue()).change();if(this.options.smartDays){if(e(t.target).is(".month")||e(t.target).is(".year")){this.fillCombo("day")}}},this));this.$widget.find("select").css("width","auto");this.$element.hide().after(this.$widget);this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var t=this.options.template;e.each(this.map,function(e,i){i=i[0];var n=new RegExp(i+"+"),s=i.length>1?i.substring(1,2):i;t=t.replace(n,"{"+s+"}")});t=t.replace(/ /g,"&nbsp;");e.each(this.map,function(e,i){i=i[0];var n=i.length>1?i.substring(1,2):i;t=t.replace("{"+n+"}",'<select class="'+e+'"></select>')});return t},initCombos:function(){for(var e in this.map){var t=this.$widget.find("."+e);this["$"+e]=t.length?t:null;this.fillCombo(e)}},fillCombo:function(e){var t=this["$"+e];if(!t){return}var i="fill"+e.charAt(0).toUpperCase()+e.slice(1);var n=this[i]();var s=t.val();t.empty();for(var a=0;a<n.length;a++){t.append('<option value="'+n[a][0]+'">'+n[a][1]+"</option>")}t.val(s)},fillCommon:function(e){var t=[],i;if(this.options.firstItem==="name"){i=moment.relativeTime||moment.langData()._relativeTime;var n=typeof i[e]==="function"?i[e](1,true,e,false):i[e];n=n.split(" ").reverse()[0];t.push(["",n])}else if(this.options.firstItem==="empty"){t.push(["",""])}return t},fillDay:function(){var e=this.fillCommon("d"),t,i,n=this.options.template.indexOf("DD")!==-1,s=31;if(this.options.smartDays&&this.$month&&this.$year){var a=parseInt(this.$month.val(),10);var r=parseInt(this.$year.val(),10);if(!isNaN(a)&&!isNaN(r)){s=moment([r,a]).daysInMonth()}}for(i=1;i<=s;i++){t=n?this.leadZero(i):i;e.push([i,t])}return e},fillMonth:function(){var e=this.fillCommon("M"),t,i,n=this.options.template.indexOf("MMMM")!==-1,s=this.options.template.indexOf("MMM")!==-1,a=this.options.template.indexOf("MM")!==-1;for(i=0;i<=11;i++){if(n){t=moment().date(1).month(i).format("MMMM")}else if(s){t=moment().date(1).month(i).format("MMM")}else if(a){t=this.leadZero(i+1)}else{t=i+1}e.push([i,t])}return e},fillYear:function(){var e=[],t,i,n=this.options.template.indexOf("YYYY")!==-1;for(i=this.options.maxYear;i>=this.options.minYear;i--){t=n?i:(i+"").substring(2);e[this.options.yearDescending?"push":"unshift"]([i,t])}e=this.fillCommon("y").concat(e);return e},fillHour:function(){var e=this.fillCommon("h"),t,i,n=this.options.template.indexOf("h")!==-1,s=this.options.template.indexOf("H")!==-1,a=this.options.template.toLowerCase().indexOf("hh")!==-1,r=n?1:0,o=n?12:23;for(i=r;i<=o;i++){t=a?this.leadZero(i):i;e.push([i,t])}return e},fillMinute:function(){var e=this.fillCommon("m"),t,i,n=this.options.template.indexOf("mm")!==-1;for(i=0;i<=59;i+=this.options.minuteStep){t=n?this.leadZero(i):i;e.push([i,t])}return e},fillSecond:function(){var e=this.fillCommon("s"),t,i,n=this.options.template.indexOf("ss")!==-1;for(i=0;i<=59;i+=this.options.secondStep){t=n?this.leadZero(i):i;e.push([i,t])}return e},fillAmpm:function(){var e=this.options.template.indexOf("a")!==-1,t=this.options.template.indexOf("A")!==-1,i=[["am",e?"am":"AM"],["pm",e?"pm":"PM"]];return i},getValue:function(t){var i,n={},s=this,a=false;e.each(this.map,function(e,t){if(e==="ampm"){return}var i=e==="day"?1:0;n[e]=s["$"+e]?parseInt(s["$"+e].val(),10):i;if(isNaN(n[e])){a=true;return false}});if(a){return""}if(this.$ampm){if(n.hour===12){n.hour=this.$ampm.val()==="am"?0:12}else{n.hour=this.$ampm.val()==="am"?n.hour:n.hour+12}}i=moment([n.year,n.month,n.day,n.hour,n.minute,n.second]);this.highlight(i);t=t===undefined?this.options.format:t;if(t===null){return i.isValid()?i:null}else{return i.isValid()?i.format(t):""}},setValue:function(t){if(!t){return}var i=typeof t==="string"?moment(t,this.options.format):moment(t),n=this,s={};function a(t,i){var n={};t.children("option").each(function(t,s){var a=e(s).attr("value"),r;if(a==="")return;r=Math.abs(a-i);if(typeof n.distance==="undefined"||r<n.distance){n={value:a,distance:r}}});return n.value}if(i.isValid()){e.each(this.map,function(e,t){if(e==="ampm"){return}s[e]=i[t[1]]()});if(this.$ampm){if(s.hour>=12){s.ampm="pm";if(s.hour>12){s.hour-=12}}else{s.ampm="am";if(s.hour===0){s.hour=12}}}e.each(s,function(e,t){if(n["$"+e]){if(e==="minute"&&n.options.minuteStep>1&&n.options.roundTime){t=a(n["$"+e],t)}if(e==="second"&&n.options.secondStep>1&&n.options.roundTime){t=a(n["$"+e],t)}n["$"+e].val(t)}});if(this.options.smartDays){this.fillCombo("day")}this.$element.val(i.format(this.options.format)).change()}},highlight:function(e){if(!e.isValid()){if(this.options.errorClass){this.$widget.addClass(this.options.errorClass)}else{if(!this.borderColor){this.borderColor=this.$widget.find("select").css("border-color")}this.$widget.find("select").css("border-color","red")}}else{if(this.options.errorClass){this.$widget.removeClass(this.options.errorClass)}else{this.$widget.find("select").css("border-color",this.borderColor)}}},leadZero:function(e){return e<=9?"0"+e:e},destroy:function(){this.$widget.remove();this.$element.removeData("combodate").show()}};e.fn.combodate=function(i){var n,s=Array.apply(null,arguments);s.shift();if(i==="getValue"&&this.length&&(n=this.eq(0).data("combodate"))){return n.getValue.apply(n,s)}return this.each(function(){var n=e(this),a=n.data("combodate"),r=typeof i=="object"&&i;if(!a){n.data("combodate",a=new t(this,r))}if(typeof i=="string"&&typeof a[i]=="function"){a[i].apply(a,s)}})};e.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:true,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:true,smartDays:false}})(window.jQuery);(function(e){"use strict";var t=function(i){this.init("combodate",i,t.defaults);if(!this.options.viewformat){this.options.viewformat=this.options.format}i.combodate=e.fn.editableutils.tryParseJson(i.combodate,true);this.options.combodate=e.extend({},t.defaults.combodate,i.combodate,{format:this.options.format,template:this.options.template})};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput);e.extend(t.prototype,{render:function(){this.$input.combodate(this.options.combodate);if(e.fn.editableform.engine==="bs3"){this.$input.siblings().find("select").addClass("form-control")}if(this.options.inputclass){this.$input.siblings().find("select").addClass(this.options.inputclass)}},value2html:function(e,i){var n=e?e.format(this.options.viewformat):"";t.superclass.value2html.call(this,n,i)},html2value:function(e){return e?moment(e,this.options.viewformat):null},value2str:function(e){return e?e.format(this.options.format):""},str2value:function(e){return e?moment(e,this.options.format):null},value2submit:function(e){return this.value2str(e)},value2input:function(e){this.$input.combodate("setValue",e)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}});t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null});e.fn.editabletypes.combodate=t})(window.jQuery);(function(e){"use strict";var t=e.fn.editableform.Constructor.prototype.initInput;e.extend(e.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=e(e.fn.editableform.template);this.$form.find(".control-group").addClass("form-group");this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){t.apply(this);var i=this.input.options.inputclass===null||this.input.options.inputclass===false;var n="input-sm";var s="text,select,textarea,password,email,url,tel,number,range,time,typeaheadjs".split(",");if(~e.inArray(this.input.type,s)){this.input.$input.addClass("form-control");if(i){this.input.options.inputclass=n;this.input.$input.addClass(n)}}var a=this.$form.find(".editable-buttons");var r=i?[n]:this.input.options.inputclass.split(" ");for(var o=0;o<r.length;o++){if(r[o].toLowerCase()==="input-lg"){a.find("button").removeClass("btn-sm").addClass("btn-lg")}}}});e.fn.editableform.buttons='<button type="submit" class="btn btn-primary btn-sm editable-submit">'+'<i class="glyphicon glyphicon-ok"></i>'+"</button>"+'<button type="button" class="btn btn-default btn-sm editable-cancel">'+'<i class="glyphicon glyphicon-remove"></i>'+"</button>";e.fn.editableform.errorGroupClass="has-error";e.fn.editableform.errorBlockClass=null;e.fn.editableform.engine="bs3"})(window.jQuery);(function(e){"use strict";e.extend(e.fn.editableContainer.Popup.prototype,{containerName:"popover",containerDataName:"bs.popover",innerCss:".popover-content",defaults:e.fn.popover.Constructor.DEFAULTS,initContainer:function(){e.extend(this.containerOptions,{trigger:"manual",selector:false,content:" ",template:this.defaults.template});var t;if(this.$element.data("template")){t=this.$element.data("template");this.$element.removeData("template")}this.call(this.containerOptions);if(t){this.$element.data("template",t)}},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(e,t){this.container().options[e]=t},setPosition:function(){(function(){var e=this.tip();var t=typeof this.options.placement=="function"?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement;var i=/\s?auto?\s?/i;var n=i.test(t);if(n){t=t.replace(i,"")||"top"}var s=this.getPosition();var a=e[0].offsetWidth;var r=e[0].offsetHeight;if(n){var o=this.$element.parent();var l=t;var h=document.documentElement.scrollTop||document.body.scrollTop;var c=this.options.container=="body"?window.innerWidth:o.outerWidth();var u=this.options.container=="body"?window.innerHeight:o.outerHeight();var d=this.options.container=="body"?0:o.offset().left;t=t=="bottom"&&s.top+s.height+r-h>u?"top":t=="top"&&s.top-h-r<0?"bottom":t=="right"&&s.right+a>c?"left":t=="left"&&s.left-a<d?"right":t;e.removeClass(l).addClass(t)}var f=this.getCalculatedOffset(t,s,a,r);this.applyPlacement(f,t)}).call(this.container())}})})(window.jQuery);(function(e){function t(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var e=new Date;return t(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())}var n=function(t,i){var n=this;this._process_options(i);this.element=e(t);this.isInline=false;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0)this.component=false;this.picker=e(d.template);this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass("datepicker-inline").appendTo(this.element)}else{this.picker.addClass("datepicker-dropdown dropdown-menu")}if(this.o.rtl){this.picker.addClass("datepicker-rtl");this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")}this.viewMode=this.o.startView;if(this.o.calendarWeeks)this.picker.find("tfoot th.today").attr("colspan",function(e,t){return parseInt(t)+1});this._allow_update=false;this.setStartDate(this.o.startDate);this.setEndDate(this.o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);
this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();if(this.isInline){this.show()}};n.prototype={constructor:n,_process_options:function(t){this._o=e.extend({},this._o,t);var i=this.o=e.extend({},this._o);var n=i.language;if(!u[n]){n=n.split("-")[0];if(!u[n])n=h.language}i.language=n;switch(i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode);i.weekStart%=7;i.weekEnd=(i.weekStart+6)%7;var s=d.parseFormat(i.format);if(i.startDate!==-Infinity){i.startDate=d.parseDate(i.startDate,s,i.language)}if(i.endDate!==Infinity){i.endDate=d.parseDate(i.endDate,s,i.language)}i.daysOfWeekDisabled=i.daysOfWeekDisabled||[];if(!e.isArray(i.daysOfWeekDisabled))i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/);i.daysOfWeekDisabled=e.map(i.daysOfWeekDisabled,function(e){return parseInt(e,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var t=0,i,n;t<e.length;t++){i=e[t][0];n=e[t][1];i.on(n)}},_unapplyEvents:function(e){for(var t=0,i,n;t<e.length;t++){i=e[t][0];n=e[t][1];i.off(n)}},_buildEvents:function(){if(this.isInput){this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]}else if(this.component&&this.hasInput){this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]}else if(this.element.is("div")){this.isInline=true}else{this._events=[[this.element,{click:e.proxy(this.show,this)}]]}this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{mousedown:e.proxy(function(e){if(!(this.element.is(e.target)||this.element.find(e.target).size()||this.picker.is(e.target)||this.picker.find(e.target).size())){this.hide()}},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,i){var n=i||this.date,s=new Date(n.getTime()+n.getTimezoneOffset()*6e4);this.element.trigger({type:t,date:s,format:e.proxy(function(e){var t=e||this.o.format;return d.formatDate(n,t,this.o.language)},this)})},show:function(e){if(!this.isInline)this.picker.appendTo("body");this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();this._attachSecondaryEvents();if(e){e.preventDefault()}this._trigger("show")},hide:function(e){if(this.isInline)return;if(!this.picker.is(":visible"))return;this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();if(this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val()))this.setValue();this._trigger("hide")},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date}},getDate:function(){var e=this.getUTCDate();return new Date(e.getTime()+e.getTimezoneOffset()*6e4)},getUTCDate:function(){return this.date},setDate:function(e){this.setUTCDate(new Date(e.getTime()-e.getTimezoneOffset()*6e4))},setUTCDate:function(e){this.date=e;this.setValue()},setValue:function(){var e=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find("input").val(e)}}else{this.element.val(e)}},getFormattedDate:function(e){if(e===undefined)e=this.o.format;return d.formatDate(this.date,e,this.o.language)},setStartDate:function(e){this._process_options({startDate:e});this.update();this.updateNavArrows()},setEndDate:function(e){this._process_options({endDate:e});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this._process_options({daysOfWeekDisabled:e});this.update();this.updateNavArrows()},place:function(){if(this.isInline)return;var t=parseInt(this.element.parents().filter(function(){return e(this).css("z-index")!="auto"}).first().css("z-index"))+10;var i=this.component?this.component.parent().offset():this.element.offset();var n=this.component?this.component.outerHeight(true):this.element.outerHeight(true);this.picker.css({top:i.top+n,left:i.left,zIndex:t})},_allow_update:true,update:function(){if(!this._allow_update)return;var e,t=false;if(arguments&&arguments.length&&(typeof arguments[0]==="string"||arguments[0]instanceof Date)){e=arguments[0];t=true}else{e=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();delete this.element.data().date}this.date=d.parseDate(e,this.o.format,this.o.language);if(t)this.setValue();if(this.date<this.o.startDate){this.viewDate=new Date(this.o.startDate)}else if(this.date>this.o.endDate){this.viewDate=new Date(this.o.endDate)}else{this.viewDate=new Date(this.date)}this.fill()},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';t+=i;this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}while(e<this.o.weekStart+7){t+='<th class="dow">'+u[this.o.language].daysMin[e++%7]+"</th>"}t+="</tr>";this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){var e="",t=0;while(t<12){e+='<span class="month">'+u[this.o.language].monthsShort[t++]+"</span>"}this.picker.find(".datepicker-months td").html(e)},setRange:function(t){if(!t||!t.length)delete this.range;else this.range=e.map(t,function(e){return e.valueOf()});this.fill()},getClassNames:function(t){var i=[],n=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),a=this.date.valueOf(),r=new Date;if(t.getUTCFullYear()<n||t.getUTCFullYear()==n&&t.getUTCMonth()<s){i.push("old")}else if(t.getUTCFullYear()>n||t.getUTCFullYear()==n&&t.getUTCMonth()>s){i.push("new")}if(this.o.todayHighlight&&t.getUTCFullYear()==r.getFullYear()&&t.getUTCMonth()==r.getMonth()&&t.getUTCDate()==r.getDate()){i.push("today")}if(a&&t.valueOf()==a){i.push("active")}if(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1){i.push("disabled")}if(this.range){if(t>this.range[0]&&t<this.range[this.range.length-1]){i.push("range")}if(e.inArray(t.valueOf(),this.range)!=-1){i.push("selected")}}return i},fill:function(){var i=new Date(this.viewDate),n=i.getUTCFullYear(),s=i.getUTCMonth(),a=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,r=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,o=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,l=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,h=this.date&&this.date.valueOf(),c;this.picker.find(".datepicker-days thead th.datepicker-switch").text(u[this.o.language].months[s]+" "+n);this.picker.find("tfoot th.today").text(u[this.o.language].today).toggle(this.o.todayBtn!==false);this.picker.find("tfoot th.clear").text(u[this.o.language].clear).toggle(this.o.clearBtn!==false);this.updateNavArrows();this.fillMonths();var f=t(n,s-1,28,0,0,0,0),p=d.getDaysInMonth(f.getUTCFullYear(),f.getUTCMonth());f.setUTCDate(p);f.setUTCDate(p-(f.getUTCDay()-this.o.weekStart+7)%7);var m=new Date(f);m.setUTCDate(m.getUTCDate()+42);m=m.valueOf();var g=[];var v;while(f.valueOf()<m){if(f.getUTCDay()==this.o.weekStart){g.push("<tr>");if(this.o.calendarWeeks){var y=new Date(+f+(this.o.weekStart-f.getUTCDay()-7)%7*864e5),b=new Date(+y+(7+4-y.getUTCDay())%7*864e5),w=new Date(+(w=t(b.getUTCFullYear(),0,1))+(7+4-w.getUTCDay())%7*864e5),x=(b-w)/864e5/7+1;g.push('<td class="cw">'+x+"</td>")}}v=this.getClassNames(f);v.push("day");var _=this.o.beforeShowDay(f);if(_===undefined)_={};else if(typeof _==="boolean")_={enabled:_};else if(typeof _==="string")_={classes:_};if(_.enabled===false)v.push("disabled");if(_.classes)v=v.concat(_.classes.split(/\s+/));if(_.tooltip)c=_.tooltip;v=e.unique(v);g.push('<td class="'+v.join(" ")+'"'+(c?' title="'+c+'"':"")+">"+f.getUTCDate()+"</td>");if(f.getUTCDay()==this.o.weekEnd){g.push("</tr>")}f.setUTCDate(f.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(g.join(""));var C=this.date&&this.date.getUTCFullYear();var k=this.picker.find(".datepicker-months").find("th:eq(1)").text(n).end().find("span").removeClass("active");if(C&&C==n){k.eq(this.date.getUTCMonth()).addClass("active")}if(n<a||n>o){k.addClass("disabled")}if(n==a){k.slice(0,r).addClass("disabled")}if(n==o){k.slice(l+1).addClass("disabled")}g="";n=parseInt(n/10,10)*10;var T=this.picker.find(".datepicker-years").find("th:eq(1)").text(n+"-"+(n+9)).end().find("td");n-=1;for(var S=-1;S<11;S++){g+='<span class="year'+(S==-1?" old":S==10?" new":"")+(C==n?" active":"")+(n<a||n>o?" disabled":"")+'">'+n+"</span>";n+=1}T.html(g)},updateNavArrows:function(){if(!this._allow_update)return;var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth();switch(this.viewMode){case 0:if(this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 1:case 2:if(this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break}},click:function(i){i.preventDefault();var n=e(i.target).closest("span, td, th");if(n.length==1){switch(n[0].nodeName.toLowerCase()){case"th":switch(n[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var s=d.modes[this.viewMode].navStep*(n[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,s);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,s);break}this.fill();break;case"today":var a=new Date;a=t(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0);this.showMode(-2);var r=this.o.todayBtn=="linked"?null:"view";this._setDate(a,r);break;case"clear":var o;if(this.isInput)o=this.element;else if(this.component)o=this.element.find("input");if(o)o.val("").change();this._trigger("changeDate");this.update();if(this.o.autoclose)this.hide();break}break;case"span":if(!n.is(".disabled")){this.viewDate.setUTCDate(1);if(n.is(".month")){var l=1;var h=n.parent().find("span").index(n);var c=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(h);this._trigger("changeMonth",this.viewDate);if(this.o.minViewMode===1){this._setDate(t(c,h,l,0,0,0,0))}}else{var c=parseInt(n.text(),10)||0;var l=1;var h=0;this.viewDate.setUTCFullYear(c);this._trigger("changeYear",this.viewDate);if(this.o.minViewMode===2){this._setDate(t(c,h,l,0,0,0,0))}}this.showMode(-1);this.fill()}break;case"td":if(n.is(".day")&&!n.is(".disabled")){var l=parseInt(n.text(),10)||1;var c=this.viewDate.getUTCFullYear(),h=this.viewDate.getUTCMonth();if(n.is(".old")){if(h===0){h=11;c-=1}else{h-=1}}else if(n.is(".new")){if(h==11){h=0;c+=1}else{h+=1}}this._setDate(t(c,h,l,0,0,0,0))}break}}},_setDate:function(e,t){if(!t||t=="date")this.date=new Date(e);if(!t||t=="view")this.viewDate=new Date(e);this.fill();this.setValue();this._trigger("changeDate");var i;if(this.isInput){i=this.element}else if(this.component){i=this.element.find("input")}if(i){i.change();if(this.o.autoclose&&(!t||t=="date")){this.hide()}}},moveMonth:function(e,t){if(!t)return e;var i=new Date(e.valueOf()),n=i.getUTCDate(),s=i.getUTCMonth(),a=Math.abs(t),r,o;t=t>0?1:-1;if(a==1){o=t==-1?function(){return i.getUTCMonth()==s}:function(){return i.getUTCMonth()!=r};r=s+t;i.setUTCMonth(r);if(r<0||r>11)r=(r+12)%12}else{for(var l=0;l<a;l++)i=this.moveMonth(i,t);r=i.getUTCMonth();i.setUTCDate(n);o=function(){return r!=i.getUTCMonth()}}while(o()){i.setUTCDate(--n);i.setUTCMonth(r)}return i},moveYear:function(e,t){return this.moveMonth(e,t*12)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":not(:visible)")){if(e.keyCode==27)this.show();return}var t=false,i,n,s,a,r;switch(e.keyCode){case 27:this.hide();e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;i=e.keyCode==37?-1:1;if(e.ctrlKey){a=this.moveYear(this.date,i);r=this.moveYear(this.viewDate,i)}else if(e.shiftKey){a=this.moveMonth(this.date,i);r=this.moveMonth(this.viewDate,i)}else{a=new Date(this.date);a.setUTCDate(this.date.getUTCDate()+i);r=new Date(this.viewDate);r.setUTCDate(this.viewDate.getUTCDate()+i)}if(this.dateWithinRange(a)){this.date=a;this.viewDate=r;this.setValue();this.update();e.preventDefault();t=true}break;case 38:case 40:if(!this.o.keyboardNavigation)break;i=e.keyCode==38?-1:1;if(e.ctrlKey){a=this.moveYear(this.date,i);r=this.moveYear(this.viewDate,i)}else if(e.shiftKey){a=this.moveMonth(this.date,i);r=this.moveMonth(this.viewDate,i)}else{a=new Date(this.date);a.setUTCDate(this.date.getUTCDate()+i*7);r=new Date(this.viewDate);r.setUTCDate(this.viewDate.getUTCDate()+i*7)}if(this.dateWithinRange(a)){this.date=a;this.viewDate=r;this.setValue();this.update();e.preventDefault();t=true}break;case 13:this.hide();e.preventDefault();break;case 9:this.hide();break}if(t){this._trigger("changeDate");var o;if(this.isInput){o=this.element}else if(this.component){o=this.element.find("input")}if(o){o.change()}}},showMode:function(e){if(e){this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))}this.picker.find(">div").hide().filter(".datepicker-"+d.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};var s=function(t,i){this.element=e(t);this.inputs=e.map(i.inputs,function(e){return e.jquery?e[0]:e});delete i.inputs;e(this.inputs).datepicker(i).bind("changeDate",e.proxy(this.dateUpdated,this));this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")});this.updateDates()};s.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.date});this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,i){i.setRange(t)})},dateUpdated:function(t){var i=e(t.target).data("datepicker"),n=i.getUTCDate(),s=e.inArray(t.target,this.inputs),a=this.inputs.length;if(s==-1)return;if(n<this.dates[s]){while(s>=0&&n<this.dates[s]){this.pickers[s--].setUTCDate(n)}}else if(n>this.dates[s]){while(s<a&&n>this.dates[s]){this.pickers[s++].setUTCDate(n)}}this.updateDates()},remove:function(){e.map(this.pickers,function(e){e.remove()});delete this.element.data().datepicker}};function a(t,i){var n=e(t).data(),s={},a,r=new RegExp("^"+i.toLowerCase()+"([A-Z])"),i=new RegExp("^"+i.toLowerCase());for(var o in n)if(i.test(o)){a=o.replace(r,function(e,t){return t.toLowerCase()});s[a]=n[o]}return s}function r(t){var i={};if(!u[t]){t=t.split("-")[0];if(!u[t])return}var n=u[t];e.each(c,function(e,t){if(t in n)i[t]=n[t]});return i}var o=e.fn.datepicker;var l=e.fn.datepicker=function(t){var i=Array.apply(null,arguments);i.shift();var o,l;this.each(function(){var l=e(this),c=l.data("datepicker"),u=typeof t=="object"&&t;if(!c){var d=a(this,"date"),f=e.extend({},h,d,u),p=r(f.language),m=e.extend({},h,p,d,u);if(l.is(".input-daterange")||m.inputs){var g={inputs:m.inputs||l.find("input").toArray()};l.data("datepicker",c=new s(this,e.extend(m,g)))}else{l.data("datepicker",c=new n(this,m))}}if(typeof t=="string"&&typeof c[t]=="function"){o=c[t].apply(c,i);if(o!==undefined)return false}});if(o!==undefined)return o;else return this};var h=e.fn.datepicker.defaults={autoclose:false,beforeShowDay:e.noop,calendarWeeks:false,clearBtn:false,daysOfWeekDisabled:[],endDate:Infinity,forceParse:true,format:"mm/dd/yyyy",keyboardNavigation:true,language:"en",minViewMode:0,rtl:false,startDate:-Infinity,startView:0,todayBtn:false,todayHighlight:false,weekStart:0};var c=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=n;var u=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};var d={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,d.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\0").split("\0"),i=e.match(this.validParts);if(!t||!t.length||!i||i.length===0){throw new Error("Invalid date format.")}return{separators:t,parts:i}},parseDate:function(i,s,a){if(i instanceof Date)return i;if(typeof s==="string")s=d.parseFormat(s);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){var r=/([\-+]\d+)([dmwy])/,o=i.match(/([\-+]\d+)([dmwy])/g),l,h;i=new Date;for(var c=0;c<o.length;c++){l=r.exec(o[c]);h=parseInt(l[1]);switch(l[2]){case"d":i.setUTCDate(i.getUTCDate()+h);break;case"m":i=n.prototype.moveMonth.call(n.prototype,i,h);break;case"w":i.setUTCDate(i.getUTCDate()+h*7);break;case"y":i=n.prototype.moveYear.call(n.prototype,i,h);break}}return t(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}var o=i&&i.match(this.nonpunctuation)||[],i=new Date,f={},p=["yyyy","yy","M","MM","m","mm","d","dd"],m={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){t-=1;while(t<0)t+=12;t%=12;e.setUTCMonth(t);while(e.getUTCMonth()!=t)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}},g,v,l;m["M"]=m["MM"]=m["mm"]=m["m"];m["dd"]=m["d"];i=t(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var y=s.parts.slice();if(o.length!=y.length){y=e(y).filter(function(t,i){return e.inArray(i,p)!==-1}).toArray()}if(o.length==y.length){for(var c=0,b=y.length;c<b;c++){g=parseInt(o[c],10);l=y[c];if(isNaN(g)){switch(l){case"MM":v=e(u[a].months).filter(function(){var e=this.slice(0,o[c].length),t=o[c].slice(0,e.length);return e==t});g=e.inArray(v[0],u[a].months)+1;break;case"M":v=e(u[a].monthsShort).filter(function(){var e=this.slice(0,o[c].length),t=o[c].slice(0,e.length);return e==t});g=e.inArray(v[0],u[a].monthsShort)+1;break}}f[l]=g}for(var c=0,w;c<p.length;c++){w=p[c];if(w in f&&!isNaN(f[w]))m[w](i,f[w])}}return i},formatDate:function(t,i,n){if(typeof i==="string")i=d.parseFormat(i);var s={d:t.getUTCDate(),D:u[n].daysShort[t.getUTCDay()],DD:u[n].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:u[n].monthsShort[t.getUTCMonth()],MM:u[n].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};s.dd=(s.d<10?"0":"")+s.d;s.mm=(s.m<10?"0":"")+s.m;var t=[],a=e.extend([],i.separators);for(var r=0,o=i.parts.length;r<=o;r++){if(a.length)t.push(a.shift());t.push(s[i.parts[r]])}return t.join("")},headTemplate:"<thead>"+"<tr>"+'<th class="prev"><i class="icon-arrow-left"/></th>'+'<th colspan="5" class="datepicker-switch"></th>'+'<th class="next"><i class="icon-arrow-right"/></th>'+"</tr>"+"</thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};d.template='<div class="datepicker">'+'<div class="datepicker-days">'+'<table class=" table-condensed">'+d.headTemplate+"<tbody></tbody>"+d.footTemplate+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+"</table>"+"</div>"+"</div>";e.fn.datepicker.DPGlobal=d;e.fn.datepicker.noConflict=function(){e.fn.datepicker=o;return this};e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=e(this);if(i.data("datepicker"))return;t.preventDefault();l.call(i,"show")});e(function(){l.call(e('[data-provide="datepicker-inline"]'))})})(window.jQuery);(function(e){"use strict";e.fn.bdatepicker=e.fn.datepicker.noConflict();if(!e.fn.datepicker){e.fn.datepicker=e.fn.bdatepicker}var t=function(e){this.init("date",e,t.defaults);this.initPicker(e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput);e.extend(t.prototype,{initPicker:function(t,i){if(!this.options.viewformat){this.options.viewformat=this.options.format}t.datepicker=e.fn.editableutils.tryParseJson(t.datepicker,true);this.options.datepicker=e.extend({},i.datepicker,t.datepicker,{format:this.options.viewformat});this.options.datepicker.language=this.options.datepicker.language||"en";this.dpg=e.fn.bdatepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker);if(this.options.clear){this.$clear=e('<a href="#"></a>').html(this.options.clear).click(e.proxy(function(e){e.preventDefault();e.stopPropagation();this.clear()},this));this.$tpl.parent().append(e('<div class="editable-clear">').append(this.$clear))}},value2html:function(e,i){var n=e?this.dpg.formatDate(e,this.parsedViewFormat,this.options.datepicker.language):"";t.superclass.value2html.call(this,n,i)},html2value:function(e){return this.parseDate(e,this.parsedViewFormat)},value2str:function(e){return e?this.dpg.formatDate(e,this.parsedFormat,this.options.datepicker.language):""},str2value:function(e){return this.parseDate(e,this.parsedFormat)},value2submit:function(e){return this.value2str(e)},value2input:function(e){this.$input.bdatepicker("update",e)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null;this.$input.find(".active").removeClass("active");if(!this.options.showbuttons){this.$input.closest("form").submit()}},autosubmit:function(){this.$input.on("mouseup",".day",function(t){if(e(t.currentTarget).is(".old")||e(t.currentTarget).is(".new")){return}var i=e(this).closest("form");setTimeout(function(){i.submit()},200)})},parseDate:function(e,t){var i=null,n;if(e){i=this.dpg.parseDate(e,t,this.options.datepicker.language);if(typeof e==="string"){n=this.dpg.formatDate(i,t,this.options.datepicker.language);if(e!==n){i=null}}}return i}});t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:false},clear:"&times; clear"});e.fn.editabletypes.date=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("datefield",e,t.defaults);this.initPicker(e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.date);e.extend(t.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.bdatepicker(this.options.datepicker);this.$input.off("focus keydown");this.$input.keyup(e.proxy(function(){this.$tpl.removeData("date");this.$tpl.bdatepicker("update")},this))},value2input:function(e){this.$input.val(e?this.dpg.formatDate(e,this.parsedViewFormat,this.options.datepicker.language):"");this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){e.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});t.defaults=e.extend({},e.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:true}});e.fn.editabletypes.datefield=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("datetime",e,t.defaults);this.initPicker(e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.abstractinput);e.extend(t.prototype,{initPicker:function(t,i){if(!this.options.viewformat){this.options.viewformat=this.options.format}t.datetimepicker=e.fn.editableutils.tryParseJson(t.datetimepicker,true);this.options.datetimepicker=e.extend({},i.datetimepicker,t.datetimepicker,{format:this.options.viewformat});this.options.datetimepicker.language=this.options.datetimepicker.language||"en";this.dpg=e.fn.datetimepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker);this.$input.on("changeMode",function(t){var i=e(this).closest("form").parent();setTimeout(function(){i.triggerHandler("resize")},0)});if(this.options.clear){this.$clear=e('<a href="#"></a>').html(this.options.clear).click(e.proxy(function(e){e.preventDefault();e.stopPropagation();this.clear()},this));this.$tpl.parent().append(e('<div class="editable-clear">').append(this.$clear))}},value2html:function(e,i){var n=e?this.dpg.formatDate(this.toUTC(e),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";if(i){t.superclass.value2html.call(this,n,i)}else{return n}},html2value:function(e){var t=this.parseDate(e,this.parsedViewFormat);return t?this.fromUTC(t):null},value2str:function(e){return e?this.dpg.formatDate(this.toUTC(e),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(e){var t=this.parseDate(e,this.parsedFormat);return t?this.fromUTC(t):null},value2submit:function(e){return this.value2str(e)},value2input:function(e){if(e){this.$input.data("datetimepicker").setDate(e)}},input2value:function(){var e=this.$input.data("datetimepicker");return e.date?e.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null;this.$input.find(".active").removeClass("active");if(!this.options.showbuttons){this.$input.closest("form").submit()}},autosubmit:function(){this.$input.on("mouseup",".minute",function(t){var i=e(this).closest("form");setTimeout(function(){i.submit()},200)})},toUTC:function(e){return e?new Date(e.valueOf()-e.getTimezoneOffset()*6e4):e},fromUTC:function(e){return e?new Date(e.valueOf()+e.getTimezoneOffset()*6e4):e},parseDate:function(e,t){var i=null,n;if(e){i=this.dpg.parseDate(e,t,this.options.datetimepicker.language,this.options.formatType);if(typeof e==="string"){n=this.dpg.formatDate(i,t,this.options.datetimepicker.language,this.options.formatType);if(e!==n){i=null}}}return i}});t.defaults=e.extend({},e.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:false,autoclose:false},clear:"&times; clear"});e.fn.editabletypes.datetime=t})(window.jQuery);(function(e){"use strict";var t=function(e){this.init("datetimefield",e,t.defaults);this.initPicker(e,t.defaults)};e.fn.editableutils.inherit(t,e.fn.editabletypes.datetime);e.extend(t.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.datetimepicker(this.options.datetimepicker);this.$input.off("focus keydown");this.$input.keyup(e.proxy(function(){this.$tpl.removeData("date");this.$tpl.datetimepicker("update")},this))},value2input:function(e){this.$input.val(this.value2html(e));this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){e.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});t.defaults=e.extend({},e.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:false,autoclose:true}});e.fn.editabletypes.datetimefield=t})(window.jQuery);(function(e){"use strict";var t=null;var i=function(e){var t=arguments,i=true,n=1;e=e.replace(/%s/g,function(){var e=t[n++];if(typeof e==="undefined"){i=false;return""}return e});return i?e:""};var n=function(t,i,n,s){var a="";e.each(t,function(e,t){if(t[i]===s){a=t[n];return false}return true});return a};var s=function(t,i){var n=-1;e.each(t,function(e,t){if(t.field===i){n=e;return false}return true});return n};var a=function(t){var i,n,s,a=0,r=[];for(i=0;i<t[0].length;i++){a+=t[0][i].colspan||1}for(i=0;i<t.length;i++){r[i]=[];for(n=0;n<a;n++){r[i][n]=false}}for(i=0;i<t.length;i++){for(n=0;n<t[i].length;n++){var o=t[i][n],l=o.rowspan||1,h=o.colspan||1,c=e.inArray(false,r[i]);if(h===1){o.fieldIndex=c;if(typeof o.field==="undefined"){o.field=c}}for(s=0;s<l;s++){r[i+s][c]=true}for(s=0;s<h;s++){r[i][c+s]=true}}}};var r=function(){if(t===null){var i=e("<p/>").addClass("fixed-table-scroll-inner"),n=e("<div/>").addClass("fixed-table-scroll-outer"),s,a;n.append(i);e("body").append(n);s=i[0].offsetWidth;n.css("overflow","scroll");a=i[0].offsetWidth;if(s===a){a=n[0].clientWidth}n.remove();t=s-a}return t};var o=function(t,n,s,a){var r=n;if(typeof n==="string"){var o=n.split(".");if(o.length>1){r=window;e.each(o,function(e,t){r=r[t]})}else{r=window[n]}}if(typeof r==="object"){return r}if(typeof r==="function"){return r.apply(t,s||[])}if(!r&&typeof n==="string"&&i.apply(this,[n].concat(s))){return i.apply(this,[n].concat(s))}return a};var l=function(t,i,n){var s=Object.getOwnPropertyNames(t),a=Object.getOwnPropertyNames(i),r="";if(n){if(s.length!==a.length){return false}}for(var o=0;o<s.length;o++){r=s[o];if(e.inArray(r,a)>-1){if(t[r]!==i[r]){return false}}}return true};var h=function(e){if(typeof e==="string"){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#x60;")}return e};var c=function(e){for(var t in e){var i=t.split(/(?=[A-Z])/).join("-").toLowerCase();if(i!==t){e[i]=e[t];delete e[t]}}return e};var u=function(e,t,i){var n=e;if(typeof t!=="string"||e.hasOwnProperty(t)){return i?h(e[t]):e[t]}var s=t.split(".");for(var a in s){if(s.hasOwnProperty(a)){n=n&&n[s[a]]}}return i?h(n):n};var d=function(){return!!(navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv\:11\./))};var f=function(){if(!Object.keys){Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=i.length;return function(s){if(typeof s!=="object"&&(typeof s!=="function"||s===null)){throw new TypeError("Object.keys called on non-object")}var a=[],r,o;for(r in s){if(e.call(s,r)){a.push(r)}}if(t){for(o=0;o<n;o++){if(e.call(s,i[o])){a.push(i[o])}}}return a}}()}};var p=function(t,i){this.options=i;this.$el=e(t);this.$el_=this.$el.clone();this.timeoutId_=0;this.timeoutFooter_=0;this.init()};p.DEFAULTS={classes:"table table-hover",sortClass:undefined,locale:undefined,height:undefined,
undefinedText:"-",sortName:undefined,sortOrder:"asc",sortStable:false,striped:false,columns:[[]],data:[],totalField:"total",dataField:"rows",method:"get",url:undefined,ajax:undefined,cache:true,contentType:"application/json",dataType:"json",ajaxOptions:{},queryParams:function(e){return e},queryParamsType:"limit",responseHandler:function(e){return e},pagination:false,onlyInfoPagination:false,paginationLoop:true,sidePagination:"client",totalRows:0,pageNumber:1,pageSize:10,pageList:[10,25,50,100],paginationHAlign:"right",paginationVAlign:"bottom",paginationDetailHAlign:"left",paginationPreText:"&lsaquo;",paginationNextText:"&rsaquo;",search:false,searchOnEnterKey:false,strictSearch:false,searchAlign:"right",selectItemName:"btSelectItem",showHeader:true,showFooter:false,showColumns:false,showPaginationSwitch:false,showRefresh:false,showToggle:false,buttonsAlign:"right",smartDisplay:true,escape:false,minimumCountColumns:1,idField:undefined,uniqueId:undefined,cardView:false,detailView:false,detailFormatter:function(e,t){return""},trimOnSearch:true,clickToSelect:false,singleSelect:false,toolbar:undefined,toolbarAlign:"left",checkboxHeader:true,sortable:true,silentSort:true,maintainSelected:false,searchTimeOut:500,searchText:"",iconSize:undefined,buttonsClass:"default",iconsPrefix:"glyphicon",icons:{paginationSwitchDown:"glyphicon-collapse-down icon-chevron-down",paginationSwitchUp:"glyphicon-collapse-up icon-chevron-up",refresh:"glyphicon-refresh icon-refresh",toggle:"glyphicon-list-alt icon-list-alt",columns:"glyphicon-th icon-th",detailOpen:"glyphicon-plus icon-plus",detailClose:"glyphicon-minus icon-minus"},customSearch:e.noop,customSort:e.noop,rowStyle:function(e,t){return{}},rowAttributes:function(e,t){return{}},footerStyle:function(e,t){return{}},onAll:function(e,t){return false},onClickCell:function(e,t,i,n){return false},onDblClickCell:function(e,t,i,n){return false},onClickRow:function(e,t){return false},onDblClickRow:function(e,t){return false},onSort:function(e,t){return false},onCheck:function(e){return false},onUncheck:function(e){return false},onCheckAll:function(e){return false},onUncheckAll:function(e){return false},onCheckSome:function(e){return false},onUncheckSome:function(e){return false},onLoadSuccess:function(e){return false},onLoadError:function(e){return false},onColumnSwitch:function(e,t){return false},onPageChange:function(e,t){return false},onSearch:function(e){return false},onToggle:function(e){return false},onPreBody:function(e){return false},onPostBody:function(){return false},onPostHeader:function(){return false},onExpandRow:function(e,t,i){return false},onCollapseRow:function(e,t){return false},onRefreshOptions:function(e){return false},onRefresh:function(e){return false},onResetView:function(){return false}};p.LOCALES={};p.LOCALES["en-US"]=p.LOCALES.en={formatLoadingMessage:function(){return"Loading, please wait..."},formatRecordsPerPage:function(e){return i("%s rows per page",e)},formatShowingRows:function(e,t,n){return i("Showing %s to %s of %s rows",e,t,n)},formatDetailPagination:function(e){return i("Showing %s rows",e)},formatSearch:function(){return"Search"},formatNoMatches:function(){return"No matching records found"},formatPaginationSwitch:function(){return"Hide/Show pagination"},formatRefresh:function(){return"Refresh"},formatToggle:function(){return"Toggle"},formatColumns:function(){return"Columns"},formatAllRows:function(){return"All"}};e.extend(p.DEFAULTS,p.LOCALES["en-US"]);p.COLUMN_DEFAULTS={radio:false,checkbox:false,checkboxEnabled:true,field:undefined,title:undefined,titleTooltip:undefined,class:undefined,align:undefined,halign:undefined,falign:undefined,valign:undefined,width:undefined,sortable:false,order:"asc",visible:true,switchable:true,clickToSelect:true,formatter:undefined,footerFormatter:undefined,events:undefined,sorter:undefined,sortName:undefined,cellStyle:undefined,searchable:true,searchFormatter:true,cardVisible:true,escape:false};p.EVENTS={"all.bs.table":"onAll","click-cell.bs.table":"onClickCell","dbl-click-cell.bs.table":"onDblClickCell","click-row.bs.table":"onClickRow","dbl-click-row.bs.table":"onDblClickRow","sort.bs.table":"onSort","check.bs.table":"onCheck","uncheck.bs.table":"onUncheck","check-all.bs.table":"onCheckAll","uncheck-all.bs.table":"onUncheckAll","check-some.bs.table":"onCheckSome","uncheck-some.bs.table":"onUncheckSome","load-success.bs.table":"onLoadSuccess","load-error.bs.table":"onLoadError","column-switch.bs.table":"onColumnSwitch","page-change.bs.table":"onPageChange","search.bs.table":"onSearch","toggle.bs.table":"onToggle","pre-body.bs.table":"onPreBody","post-body.bs.table":"onPostBody","post-header.bs.table":"onPostHeader","expand-row.bs.table":"onExpandRow","collapse-row.bs.table":"onCollapseRow","refresh-options.bs.table":"onRefreshOptions","reset-view.bs.table":"onResetView","refresh.bs.table":"onRefresh"};p.prototype.init=function(){this.initLocale();this.initContainer();this.initTable();this.initHeader();this.initData();this.initHiddenRows();this.initFooter();this.initToolbar();this.initPagination();this.initBody();this.initSearchText();this.initServer()};p.prototype.initLocale=function(){if(this.options.locale){var t=this.options.locale.split(/-|_/);t[0].toLowerCase();if(t[1])t[1].toUpperCase();if(e.fn.bootstrapTable.locales[this.options.locale]){e.extend(this.options,e.fn.bootstrapTable.locales[this.options.locale])}else if(e.fn.bootstrapTable.locales[t.join("-")]){e.extend(this.options,e.fn.bootstrapTable.locales[t.join("-")])}else if(e.fn.bootstrapTable.locales[t[0]]){e.extend(this.options,e.fn.bootstrapTable.locales[t[0]])}}};p.prototype.initContainer=function(){this.$container=e(['<div class="bootstrap-table">','<div class="fixed-table-toolbar"></div>',this.options.paginationVAlign==="top"||this.options.paginationVAlign==="both"?'<div class="fixed-table-pagination" style="clear: both;"></div>':"",'<div class="fixed-table-container">','<div class="fixed-table-header"><table></table></div>','<div class="fixed-table-body">','<div class="fixed-table-loading">',this.options.formatLoadingMessage(),"</div>","</div>",'<div class="fixed-table-footer"><table><tr></tr></table></div>',this.options.paginationVAlign==="bottom"||this.options.paginationVAlign==="both"?'<div class="fixed-table-pagination"></div>':"","</div>","</div>"].join(""));this.$container.insertAfter(this.$el);this.$tableContainer=this.$container.find(".fixed-table-container");this.$tableHeader=this.$container.find(".fixed-table-header");this.$tableBody=this.$container.find(".fixed-table-body");this.$tableLoading=this.$container.find(".fixed-table-loading");this.$tableFooter=this.$container.find(".fixed-table-footer");this.$toolbar=this.$container.find(".fixed-table-toolbar");this.$pagination=this.$container.find(".fixed-table-pagination");this.$tableBody.append(this.$el);this.$container.after('<div class="clearfix"></div>');this.$el.addClass(this.options.classes);if(this.options.striped){this.$el.addClass("table-striped")}if(e.inArray("table-no-bordered",this.options.classes.split(" "))!==-1){this.$tableContainer.addClass("table-no-bordered")}};p.prototype.initTable=function(){var t=this,i=[],n=[];this.$header=this.$el.find(">thead");if(!this.$header.length){this.$header=e("<thead></thead>").appendTo(this.$el)}this.$header.find("tr").each(function(){var t=[];e(this).find("th").each(function(){if(typeof e(this).data("field")!=="undefined"){e(this).data("field",e(this).data("field")+"")}t.push(e.extend({},{title:e(this).html(),class:e(this).attr("class"),titleTooltip:e(this).attr("title"),rowspan:e(this).attr("rowspan")?+e(this).attr("rowspan"):undefined,colspan:e(this).attr("colspan")?+e(this).attr("colspan"):undefined},e(this).data()))});i.push(t)});if(!e.isArray(this.options.columns[0])){this.options.columns=[this.options.columns]}this.options.columns=e.extend(true,[],i,this.options.columns);this.columns=[];a(this.options.columns);e.each(this.options.columns,function(i,n){e.each(n,function(n,s){s=e.extend({},p.COLUMN_DEFAULTS,s);if(typeof s.fieldIndex!=="undefined"){t.columns[s.fieldIndex]=s}t.options.columns[i][n]=s})});if(this.options.data.length){return}var s=[];this.$el.find(">tbody>tr").each(function(i){var a={};a._id=e(this).attr("id");a._class=e(this).attr("class");a._data=c(e(this).data());e(this).find(">td").each(function(n){var r=e(this),o=+r.attr("colspan")||1,l=+r.attr("rowspan")||1,h,u;for(;s[i]&&s[i][n];n++);for(h=n;h<n+o;h++){for(u=i;u<i+l;u++){if(!s[u]){s[u]=[]}s[u][h]=true}}var d=t.columns[n].field;a[d]=e(this).html();a["_"+d+"_id"]=e(this).attr("id");a["_"+d+"_class"]=e(this).attr("class");a["_"+d+"_rowspan"]=e(this).attr("rowspan");a["_"+d+"_colspan"]=e(this).attr("colspan");a["_"+d+"_title"]=e(this).attr("title");a["_"+d+"_data"]=c(e(this).data())});n.push(a)});this.options.data=n;if(n.length)this.fromHtml=true};p.prototype.initHeader=function(){var t=this,n={},s=[];this.header={fields:[],styles:[],classes:[],formatters:[],events:[],sorters:[],sortNames:[],cellStyles:[],searchables:[]};e.each(this.options.columns,function(a,r){s.push("<tr>");if(a===0&&!t.options.cardView&&t.options.detailView){s.push(i('<th class="detail" rowspan="%s"><div class="fht-cell"></div></th>',t.options.columns.length))}e.each(r,function(e,a){var r="",o="",l="",c="",u=i(' class="%s"',a["class"]),d=t.options.sortOrder||a.order,f="px",p=a.width;if(a.width!==undefined&&!t.options.cardView){if(typeof a.width==="string"){if(a.width.indexOf("%")!==-1){f="%"}}}if(a.width&&typeof a.width==="string"){p=a.width.replace("%","").replace("px","")}o=i("text-align: %s; ",a.halign?a.halign:a.align);l=i("text-align: %s; ",a.align);c=i("vertical-align: %s; ",a.valign);c+=i("width: %s; ",(a.checkbox||a.radio)&&!p?"36px":p?p+f:undefined);if(typeof a.fieldIndex!=="undefined"){t.header.fields[a.fieldIndex]=a.field;t.header.styles[a.fieldIndex]=l+c;t.header.classes[a.fieldIndex]=u;t.header.formatters[a.fieldIndex]=a.formatter;t.header.events[a.fieldIndex]=a.events;t.header.sorters[a.fieldIndex]=a.sorter;t.header.sortNames[a.fieldIndex]=a.sortName;t.header.cellStyles[a.fieldIndex]=a.cellStyle;t.header.searchables[a.fieldIndex]=a.searchable;if(!a.visible){return}if(t.options.cardView&&!a.cardVisible){return}n[a.field]=a}s.push("<th"+i(' title="%s"',a.titleTooltip),a.checkbox||a.radio?i(' class="bs-checkbox %s"',a["class"]||""):u,i(' style="%s"',o+c),i(' rowspan="%s"',a.rowspan),i(' colspan="%s"',a.colspan),i(' data-field="%s"',a.field),">");s.push(i('<div class="th-inner %s">',t.options.sortable&&a.sortable?"sortable both":""));r=t.options.escape?h(a.title):a.title;if(a.checkbox){if(!t.options.singleSelect&&t.options.checkboxHeader){r='<input name="btSelectAll" type="checkbox" />'}t.header.stateField=a.field}if(a.radio){r="";t.header.stateField=a.field;t.options.singleSelect=true}s.push(r);s.push("</div>");s.push('<div class="fht-cell"></div>');s.push("</div>");s.push("</th>")});s.push("</tr>")});this.$header.html(s.join(""));this.$header.find("th[data-field]").each(function(t){e(this).data(n[e(this).data("field")])});this.$container.off("click",".th-inner").on("click",".th-inner",function(i){var n=e(this);if(t.options.detailView){if(n.closest(".bootstrap-table")[0]!==t.$container[0])return false}if(t.options.sortable&&n.parent().data().sortable){t.onSort(i)}});this.$header.children().children().off("keypress").on("keypress",function(i){if(t.options.sortable&&e(this).data().sortable){var n=i.keyCode||i.which;if(n==13){t.onSort(i)}}});e(window).off("resize.bootstrap-table");if(!this.options.showHeader||this.options.cardView){this.$header.hide();this.$tableHeader.hide();this.$tableLoading.css("top",0)}else{this.$header.show();this.$tableHeader.show();this.$tableLoading.css("top",this.$header.outerHeight()+1);this.getCaret();e(window).on("resize.bootstrap-table",e.proxy(this.resetWidth,this))}this.$selectAll=this.$header.find('[name="btSelectAll"]');this.$selectAll.off("click").on("click",function(){var i=e(this).prop("checked");t[i?"checkAll":"uncheckAll"]();t.updateSelected()})};p.prototype.initFooter=function(){if(!this.options.showFooter||this.options.cardView){this.$tableFooter.hide()}else{this.$tableFooter.show()}};p.prototype.initData=function(e,t){if(t==="append"){this.data=this.data.concat(e)}else if(t==="prepend"){this.data=[].concat(e).concat(this.data)}else{this.data=e||this.options.data}if(t==="append"){this.options.data=this.options.data.concat(e)}else if(t==="prepend"){this.options.data=[].concat(e).concat(this.options.data)}else{this.options.data=this.data}if(this.options.sidePagination==="server"){return}this.initSort()};p.prototype.initSort=function(){var t=this,n=this.options.sortName,s=this.options.sortOrder==="desc"?-1:1,a=e.inArray(this.options.sortName,this.header.fields),r=0;if(this.options.customSort!==e.noop){this.options.customSort.apply(this,[this.options.sortName,this.options.sortOrder]);return}if(a!==-1){if(this.options.sortStable){e.each(this.data,function(e,t){if(!t.hasOwnProperty("_position"))t._position=e})}this.data.sort(function(i,r){if(t.header.sortNames[a]){n=t.header.sortNames[a]}var l=u(i,n,t.options.escape),h=u(r,n,t.options.escape),c=o(t.header,t.header.sorters[a],[l,h]);if(c!==undefined){return s*c}if(l===undefined||l===null){l=""}if(h===undefined||h===null){h=""}if(t.options.sortStable&&l===h){l=i._position;h=r._position}if(e.isNumeric(l)&&e.isNumeric(h)){l=parseFloat(l);h=parseFloat(h);if(l<h){return s*-1}return s}if(l===h){return 0}if(typeof l!=="string"){l=l.toString()}if(l.localeCompare(h)===-1){return s*-1}return s});if(this.options.sortClass!==undefined){clearTimeout(r);r=setTimeout(function(){t.$el.removeClass(t.options.sortClass);var e=t.$header.find(i('[data-field="%s"]',t.options.sortName).index()+1);t.$el.find(i("tr td:nth-child(%s)",e)).addClass(t.options.sortClass)},250)}}};p.prototype.onSort=function(t){var i=t.type==="keypress"?e(t.currentTarget):e(t.currentTarget).parent(),n=this.$header.find("th").eq(i.index());this.$header.add(this.$header_).find("span.order").remove();if(this.options.sortName===i.data("field")){this.options.sortOrder=this.options.sortOrder==="asc"?"desc":"asc"}else{this.options.sortName=i.data("field");this.options.sortOrder=i.data("order")==="asc"?"desc":"asc"}this.trigger("sort",this.options.sortName,this.options.sortOrder);i.add(n).data("order",this.options.sortOrder);this.getCaret();if(this.options.sidePagination==="server"){this.initServer(this.options.silentSort);return}this.initSort();this.initBody()};p.prototype.initToolbar=function(){var t=this,n=[],s=0,a,r,l=0;if(this.$toolbar.find(".bs-bars").children().length){e("body").append(e(this.options.toolbar))}this.$toolbar.html("");if(typeof this.options.toolbar==="string"||typeof this.options.toolbar==="object"){e(i('<div class="bs-bars pull-%s"></div>',this.options.toolbarAlign)).appendTo(this.$toolbar).append(e(this.options.toolbar))}n=[i('<div class="columns columns-%s btn-group pull-%s">',this.options.buttonsAlign,this.options.buttonsAlign)];if(typeof this.options.icons==="string"){this.options.icons=o(null,this.options.icons)}if(this.options.showPaginationSwitch){n.push(i('<button class="btn'+i(" btn-%s",this.options.buttonsClass)+i(" btn-%s",this.options.iconSize)+'" type="button" name="paginationSwitch" aria-label="pagination Switch" title="%s">',this.options.formatPaginationSwitch()),i('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.paginationSwitchDown),"</button>")}if(this.options.showRefresh){n.push(i('<button class="btn'+i(" btn-%s",this.options.buttonsClass)+i(" btn-%s",this.options.iconSize)+'" type="button" name="refresh" aria-label="refresh" title="%s">',this.options.formatRefresh()),i('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.refresh),"</button>")}if(this.options.showToggle){n.push(i('<button class="btn'+i(" btn-%s",this.options.buttonsClass)+i(" btn-%s",this.options.iconSize)+'" type="button" name="toggle" aria-label="toggle" title="%s">',this.options.formatToggle()),i('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.toggle),"</button>")}if(this.options.showColumns){n.push(i('<div class="keep-open btn-group" title="%s">',this.options.formatColumns()),'<button type="button" aria-label="columns" class="btn'+i(" btn-%s",this.options.buttonsClass)+i(" btn-%s",this.options.iconSize)+' dropdown-toggle" data-toggle="dropdown">',i('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.columns),' <span class="caret"></span>',"</button>",'<ul class="dropdown-menu" role="menu">');e.each(this.columns,function(e,s){if(s.radio||s.checkbox){return}if(t.options.cardView&&!s.cardVisible){return}var a=s.visible?' checked="checked"':"";if(s.switchable){n.push(i('<li role="menuitem">'+'<label><input type="checkbox" data-field="%s" value="%s"%s> %s</label>'+"</li>",s.field,e,a,s.title));l++}});n.push("</ul>","</div>")}n.push("</div>");if(this.showToolbar||n.length>2){this.$toolbar.append(n.join(""))}if(this.options.showPaginationSwitch){this.$toolbar.find('button[name="paginationSwitch"]').off("click").on("click",e.proxy(this.togglePagination,this))}if(this.options.showRefresh){this.$toolbar.find('button[name="refresh"]').off("click").on("click",e.proxy(this.refresh,this))}if(this.options.showToggle){this.$toolbar.find('button[name="toggle"]').off("click").on("click",function(){t.toggleView()})}if(this.options.showColumns){a=this.$toolbar.find(".keep-open");if(l<=this.options.minimumCountColumns){a.find("input").prop("disabled",true)}a.find("li").off("click").on("click",function(e){e.stopImmediatePropagation()});a.find("input").off("click").on("click",function(){var i=e(this);t.toggleColumn(e(this).val(),i.prop("checked"),false);t.trigger("column-switch",e(this).data("field"),i.prop("checked"))})}if(this.options.search){n=[];n.push('<div class="pull-'+this.options.searchAlign+' search">',i('<input class="form-control'+i(" input-%s",this.options.iconSize)+'" type="text" placeholder="%s">',this.options.formatSearch()),"</div>");this.$toolbar.append(n.join(""));r=this.$toolbar.find(".search input");r.off("keyup drop blur").on("keyup drop blur",function(i){if(t.options.searchOnEnterKey&&i.keyCode!==13){return}if(e.inArray(i.keyCode,[37,38,39,40])>-1){return}clearTimeout(s);s=setTimeout(function(){t.onSearch(i)},t.options.searchTimeOut)});if(d()){r.off("mouseup").on("mouseup",function(e){clearTimeout(s);s=setTimeout(function(){t.onSearch(e)},t.options.searchTimeOut)})}}};p.prototype.onSearch=function(t){var i=e.trim(e(t.currentTarget).val());if(this.options.trimOnSearch&&e(t.currentTarget).val()!==i){e(t.currentTarget).val(i)}if(i===this.searchText){return}this.searchText=i;this.options.searchText=i;this.options.pageNumber=1;this.initSearch();this.updatePagination();this.trigger("search",i)};p.prototype.initSearch=function(){var t=this;if(this.options.sidePagination!=="server"){if(this.options.customSearch!==e.noop){this.options.customSearch.apply(this,[this.searchText]);return}var i=this.searchText&&(this.options.escape?h(this.searchText):this.searchText).toLowerCase();var n=e.isEmptyObject(this.filterColumns)?null:this.filterColumns;this.data=n?e.grep(this.options.data,function(t,i){for(var s in n){if(e.isArray(n[s])&&e.inArray(t[s],n[s])===-1||!e.isArray(n[s])&&t[s]!==n[s]){return false}}return true}):this.options.data;this.data=i?e.grep(this.data,function(n,a){for(var r=0;r<t.header.fields.length;r++){if(!t.header.searchables[r]){continue}var l=e.isNumeric(t.header.fields[r])?parseInt(t.header.fields[r],10):t.header.fields[r];var h=t.columns[s(t.columns,l)];var c;if(typeof l==="string"){c=n;var u=l.split(".");for(var d=0;d<u.length;d++){c=c[u[d]]}if(h&&h.searchFormatter){c=o(h,t.header.formatters[r],[c,n,a],c)}}else{c=n[l]}if(typeof c==="string"||typeof c==="number"){if(t.options.strictSearch){if((c+"").toLowerCase()===i){return true}}else{if((c+"").toLowerCase().indexOf(i)!==-1){return true}}}}return false}):this.data}};p.prototype.initPagination=function(){if(!this.options.pagination){this.$pagination.hide();return}else{this.$pagination.show()}var t=this,n=[],s=false,a,r,o,l,h,c,u,d,f,p=this.getData(),m=this.options.pageList;if(this.options.sidePagination!=="server"){this.options.totalRows=p.length}this.totalPages=0;if(this.options.totalRows){if(this.options.pageSize===this.options.formatAllRows()){this.options.pageSize=this.options.totalRows;s=true}else if(this.options.pageSize===this.options.totalRows){var g=typeof this.options.pageList==="string"?this.options.pageList.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.pageList;if(e.inArray(this.options.formatAllRows().toLowerCase(),g)>-1){s=true}}this.totalPages=~~((this.options.totalRows-1)/this.options.pageSize)+1;this.options.totalPages=this.totalPages}if(this.totalPages>0&&this.options.pageNumber>this.totalPages){this.options.pageNumber=this.totalPages}this.pageFrom=(this.options.pageNumber-1)*this.options.pageSize+1;this.pageTo=this.options.pageNumber*this.options.pageSize;if(this.pageTo>this.options.totalRows){this.pageTo=this.options.totalRows}n.push('<div class="pull-'+this.options.paginationDetailHAlign+' pagination-detail">','<span class="pagination-info">',this.options.onlyInfoPagination?this.options.formatDetailPagination(this.options.totalRows):this.options.formatShowingRows(this.pageFrom,this.pageTo,this.options.totalRows),"</span>");if(!this.options.onlyInfoPagination){n.push('<span class="page-list">');var v=[i('<span class="btn-group %s">',this.options.paginationVAlign==="top"||this.options.paginationVAlign==="both"?"dropdown":"dropup"),'<button type="button" class="btn'+i(" btn-%s",this.options.buttonsClass)+i(" btn-%s",this.options.iconSize)+' dropdown-toggle" data-toggle="dropdown">','<span class="page-size">',s?this.options.formatAllRows():this.options.pageSize,"</span>",' <span class="caret"></span>',"</button>",'<ul class="dropdown-menu" role="menu">'];if(typeof this.options.pageList==="string"){var y=this.options.pageList.replace("[","").replace("]","").replace(/ /g,"").split(",");m=[];e.each(y,function(e,i){m.push(i.toUpperCase()===t.options.formatAllRows().toUpperCase()?t.options.formatAllRows():+i)})}e.each(m,function(e,n){if(!t.options.smartDisplay||e===0||m[e-1]<t.options.totalRows){var a;if(s){a=n===t.options.formatAllRows()?' class="active"':""}else{a=n===t.options.pageSize?' class="active"':""}v.push(i('<li role="menuitem"%s><a href="#">%s</a></li>',a,n))}});v.push("</ul></span>");n.push(this.options.formatRecordsPerPage(v.join("")));n.push("</span>");n.push("</div>",'<div class="pull-'+this.options.paginationHAlign+' pagination">','<ul class="pagination'+i(" pagination-%s",this.options.iconSize)+'">','<li class="page-pre"><a href="#">'+this.options.paginationPreText+"</a></li>");if(this.totalPages<5){r=1;o=this.totalPages}else{r=this.options.pageNumber-2;o=r+4;if(r<1){r=1;o=5}if(o>this.totalPages){o=this.totalPages;r=o-4}}if(this.totalPages>=6){if(this.options.pageNumber>=3){n.push('<li class="page-first'+(1===this.options.pageNumber?" active":"")+'">','<a href="#">',1,"</a>","</li>");r++}if(this.options.pageNumber>=4){if(this.options.pageNumber==4||this.totalPages==6||this.totalPages==7){r--}else{n.push('<li class="page-first-separator disabled">','<a href="#">...</a>',"</li>")}o--}}if(this.totalPages>=7){if(this.options.pageNumber>=this.totalPages-2){r--}}if(this.totalPages==6){if(this.options.pageNumber>=this.totalPages-2){o++}}else if(this.totalPages>=7){if(this.totalPages==7||this.options.pageNumber>=this.totalPages-3){o++}}for(a=r;a<=o;a++){n.push('<li class="page-number'+(a===this.options.pageNumber?" active":"")+'">','<a href="#">',a,"</a>","</li>")}if(this.totalPages>=8){if(this.options.pageNumber<=this.totalPages-4){n.push('<li class="page-last-separator disabled">','<a href="#">...</a>',"</li>")}}if(this.totalPages>=6){if(this.options.pageNumber<=this.totalPages-3){n.push('<li class="page-last'+(this.totalPages===this.options.pageNumber?" active":"")+'">','<a href="#">',this.totalPages,"</a>","</li>")}}n.push('<li class="page-next"><a href="#">'+this.options.paginationNextText+"</a></li>","</ul>","</div>")}this.$pagination.html(n.join(""));if(!this.options.onlyInfoPagination){l=this.$pagination.find(".page-list a");h=this.$pagination.find(".page-first");c=this.$pagination.find(".page-pre");u=this.$pagination.find(".page-next");d=this.$pagination.find(".page-last");f=this.$pagination.find(".page-number");if(this.options.smartDisplay){if(this.totalPages<=1){this.$pagination.find("div.pagination").hide()}if(m.length<2||this.options.totalRows<=m[0]){this.$pagination.find("span.page-list").hide()}this.$pagination[this.getData().length?"show":"hide"]()}if(!this.options.paginationLoop){if(this.options.pageNumber===1){c.addClass("disabled")}if(this.options.pageNumber===this.totalPages){u.addClass("disabled")}}if(s){this.options.pageSize=this.options.formatAllRows()}l.off("click").on("click",e.proxy(this.onPageListChange,this));h.off("click").on("click",e.proxy(this.onPageFirst,this));c.off("click").on("click",e.proxy(this.onPagePre,this));u.off("click").on("click",e.proxy(this.onPageNext,this));d.off("click").on("click",e.proxy(this.onPageLast,this));f.off("click").on("click",e.proxy(this.onPageNumber,this))}};p.prototype.updatePagination=function(t){if(t&&e(t.currentTarget).hasClass("disabled")){return}if(!this.options.maintainSelected){this.resetRows()}this.initPagination();if(this.options.sidePagination==="server"){this.initServer()}else{this.initBody()}this.trigger("page-change",this.options.pageNumber,this.options.pageSize)};p.prototype.onPageListChange=function(t){var i=e(t.currentTarget);i.parent().addClass("active").siblings().removeClass("active");this.options.pageSize=i.text().toUpperCase()===this.options.formatAllRows().toUpperCase()?this.options.formatAllRows():+i.text();this.$toolbar.find(".page-size").text(this.options.pageSize);this.updatePagination(t);return false};p.prototype.onPageFirst=function(e){this.options.pageNumber=1;this.updatePagination(e);return false};p.prototype.onPagePre=function(e){if(this.options.pageNumber-1===0){this.options.pageNumber=this.options.totalPages}else{this.options.pageNumber--}this.updatePagination(e);return false};p.prototype.onPageNext=function(e){if(this.options.pageNumber+1>this.options.totalPages){this.options.pageNumber=1}else{this.options.pageNumber++}this.updatePagination(e);return false};p.prototype.onPageLast=function(e){this.options.pageNumber=this.totalPages;this.updatePagination(e);return false};p.prototype.onPageNumber=function(t){if(this.options.pageNumber===+e(t.currentTarget).text()){return}this.options.pageNumber=+e(t.currentTarget).text();this.updatePagination(t);return false};p.prototype.initRow=function(t,s,a,r){var l=this,c,d=[],f={},p=[],m="",g={},v=[];if(e.inArray(t,this.hiddenRows)>-1){return}f=o(this.options,this.options.rowStyle,[t,s],f);if(f&&f.css){for(c in f.css){p.push(c+": "+f.css[c])}}g=o(this.options,this.options.rowAttributes,[t,s],g);if(g){for(c in g){v.push(i('%s="%s"',c,h(g[c])))}}if(t._data&&!e.isEmptyObject(t._data)){e.each(t._data,function(e,t){if(e==="index"){return}m+=i(' data-%s="%s"',e,t)})}d.push("<tr",i(" %s",v.join(" ")),i(' id="%s"',e.isArray(t)?undefined:t._id),i(' class="%s"',f.classes||(e.isArray(t)?undefined:t._class)),i(' data-index="%s"',s),i(' data-uniqueid="%s"',t[this.options.uniqueId]),i("%s",m),">");if(this.options.cardView){d.push(i('<td colspan="%s"><div class="card-views">',this.header.fields.length))}if(!this.options.cardView&&this.options.detailView){d.push("<td>",'<a class="detail-icon" href="#">',i('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.detailOpen),"</a>","</td>")}e.each(this.header.fields,function(a,r){var c="",m=u(t,r,l.options.escape),g="",v="",y={},b="",w=l.header.classes[a],x="",_="",C="",k="",T=l.columns[a];if(l.fromHtml&&typeof m==="undefined"){return}if(!T.visible){return}if(l.options.cardView&&!T.cardVisible){return}if(T.escape){m=h(m)}f=i('style="%s"',p.concat(l.header.styles[a]).join("; "));if(t["_"+r+"_id"]){b=i(' id="%s"',t["_"+r+"_id"])}if(t["_"+r+"_class"]){w=i(' class="%s"',t["_"+r+"_class"])}if(t["_"+r+"_rowspan"]){_=i(' rowspan="%s"',t["_"+r+"_rowspan"])}if(t["_"+r+"_colspan"]){C=i(' colspan="%s"',t["_"+r+"_colspan"])}if(t["_"+r+"_title"]){k=i(' title="%s"',t["_"+r+"_title"])}y=o(l.header,l.header.cellStyles[a],[m,t,s,r],y);if(y.classes){w=i(' class="%s"',y.classes)}if(y.css){var S=[];for(var M in y.css){S.push(M+": "+y.css[M])}f=i('style="%s"',S.concat(l.header.styles[a]).join("; "))}g=o(T,l.header.formatters[a],[m,t,s],m);if(t["_"+r+"_data"]&&!e.isEmptyObject(t["_"+r+"_data"])){e.each(t["_"+r+"_data"],function(e,t){if(e==="index"){return}x+=i(' data-%s="%s"',e,t)})}if(T.checkbox||T.radio){v=T.checkbox?"checkbox":v;v=T.radio?"radio":v;c=[i(l.options.cardView?'<div class="card-view %s">':'<td class="bs-checkbox %s">',T["class"]||""),"<input"+i(' data-index="%s"',s)+i(' name="%s"',l.options.selectItemName)+i(' type="%s"',v)+i(' value="%s"',t[l.options.idField])+i(' checked="%s"',g===true||(m||g&&g.checked)?"checked":undefined)+i(' disabled="%s"',!T.checkboxEnabled||g&&g.disabled?"disabled":undefined)+" />",l.header.formatters[a]&&typeof g==="string"?g:"",l.options.cardView?"</div>":"</td>"].join("");t[l.header.stateField]=g===true||g&&g.checked}else{g=typeof g==="undefined"||g===null?l.options.undefinedText:g;c=l.options.cardView?['<div class="card-view">',l.options.showHeader?i('<span class="title" %s>%s</span>',f,n(l.columns,"field","title",r)):"",i('<span class="value">%s</span>',g),"</div>"].join(""):[i("<td%s %s %s %s %s %s %s>",b,w,f,x,_,C,k),g,"</td>"].join("");if(l.options.cardView&&l.options.smartDisplay&&g===""){c='<div class="card-view"></div>'}}d.push(c)});if(this.options.cardView){d.push("</div></td>")}d.push("</tr>");return d.join(" ")};p.prototype.initBody=function(t){var n=this,a=[],r=this.getData();this.trigger("pre-body",r);this.$body=this.$el.find(">tbody");if(!this.$body.length){this.$body=e("<tbody></tbody>").appendTo(this.$el)}if(!this.options.pagination||this.options.sidePagination==="server"){this.pageFrom=1;this.pageTo=r.length}var l=e(document.createDocumentFragment());var h;for(var c=this.pageFrom-1;c<this.pageTo;c++){var d=r[c];var f=this.initRow(d,c,r,l);h=h||!!f;if(f&&f!==true){l.append(f)}}if(!h){l.append('<tr class="no-records-found">'+i('<td colspan="%s">%s</td>',this.$header.find("th").length,this.options.formatNoMatches())+"</tr>")}this.$body.html(l);if(!t){this.scrollTo(0)}this.$body.find("> tr[data-index] > td").off("click dblclick").on("click dblclick",function(t){var a=e(this),r=a.parent(),o=n.data[r.data("index")],l=a[0].cellIndex,h=n.getVisibleFields(),c=h[n.options.detailView&&!n.options.cardView?l-1:l],d=n.columns[s(n.columns,c)],f=u(o,c,n.options.escape);if(a.find(".detail-icon").length){return}n.trigger(t.type==="click"?"click-cell":"dbl-click-cell",c,f,o,a);n.trigger(t.type==="click"?"click-row":"dbl-click-row",o,r,c);if(t.type==="click"&&n.options.clickToSelect&&d.clickToSelect){var p=r.find(i('[name="%s"]',n.options.selectItemName));if(p.length){p[0].click()}}});this.$body.find("> tr[data-index] > td > .detail-icon").off("click").on("click",function(){var t=e(this),s=t.parent().parent(),a=s.data("index"),l=r[a];if(s.next().is("tr.detail-view")){t.find("i").attr("class",i("%s %s",n.options.iconsPrefix,n.options.icons.detailOpen));n.trigger("collapse-row",a,l);s.next().remove()}else{t.find("i").attr("class",i("%s %s",n.options.iconsPrefix,n.options.icons.detailClose));s.after(i('<tr class="detail-view"><td colspan="%s"></td></tr>',s.find("td").length));var h=s.next().find("td");var c=o(n.options,n.options.detailFormatter,[a,l,h],"");if(h.length===1){h.append(c)}n.trigger("expand-row",a,l,h)}n.resetView();return false});this.$selectItem=this.$body.find(i('[name="%s"]',this.options.selectItemName));this.$selectItem.off("click").on("click",function(t){t.stopImmediatePropagation();var i=e(this),s=i.prop("checked"),a=n.data[i.data("index")];
if(n.options.maintainSelected&&e(this).is(":radio")){e.each(n.options.data,function(e,t){t[n.header.stateField]=false})}a[n.header.stateField]=s;if(n.options.singleSelect){n.$selectItem.not(this).each(function(){n.data[e(this).data("index")][n.header.stateField]=false});n.$selectItem.filter(":checked").not(this).prop("checked",false)}n.updateSelected();n.trigger(s?"check":"uncheck",a,i)});e.each(this.header.events,function(t,i){if(!i){return}if(typeof i==="string"){i=o(null,i)}var s=n.header.fields[t],a=e.inArray(s,n.getVisibleFields());if(n.options.detailView&&!n.options.cardView){a+=1}for(var r in i){n.$body.find(">tr:not(.no-records-found)").each(function(){var t=e(this),o=t.find(n.options.cardView?".card-view":"td").eq(a),l=r.indexOf(" "),h=r.substring(0,l),c=r.substring(l+1),u=i[r];o.find(c).off(h).on(h,function(e){var i=t.data("index"),a=n.data[i],r=a[s];u.apply(this,[e,r,a,i])})})}});this.updateSelected();this.resetView();this.trigger("post-body",r)};p.prototype.initServer=function(t,i,n){var s=this,a={},r={searchText:this.searchText,sortName:this.options.sortName,sortOrder:this.options.sortOrder},l;if(this.options.pagination){r.pageSize=this.options.pageSize===this.options.formatAllRows()?this.options.totalRows:this.options.pageSize;r.pageNumber=this.options.pageNumber}if(!(n||this.options.url)&&!this.options.ajax){return}if(this.options.queryParamsType==="limit"){r={search:r.searchText,sort:r.sortName,order:r.sortOrder};if(this.options.pagination){r.offset=this.options.pageSize===this.options.formatAllRows()?0:this.options.pageSize*(this.options.pageNumber-1);r.limit=this.options.pageSize===this.options.formatAllRows()?this.options.totalRows:this.options.pageSize}}if(!e.isEmptyObject(this.filterColumnsPartial)){r.filter=JSON.stringify(this.filterColumnsPartial,null)}a=o(this.options,this.options.queryParams,[r],a);e.extend(a,i||{});if(a===false){return}if(!t){this.$tableLoading.show()}l=e.extend({},o(null,this.options.ajaxOptions),{type:this.options.method,url:n||this.options.url,data:this.options.contentType==="application/json"&&this.options.method==="post"?JSON.stringify(a):a,cache:this.options.cache,contentType:this.options.contentType,dataType:this.options.dataType,success:function(e){e=o(s.options,s.options.responseHandler,[e],e);s.load(e);s.trigger("load-success",e);if(!t)s.$tableLoading.hide()},error:function(e){s.trigger("load-error",e.status,e);if(!t)s.$tableLoading.hide()}});if(this.options.ajax){o(this,this.options.ajax,[l],null)}else{if(this._xhr&&this._xhr.readyState!==4){this._xhr.abort()}this._xhr=e.ajax(l)}};p.prototype.initSearchText=function(){if(this.options.search){if(this.options.searchText!==""){var e=this.$toolbar.find(".search input");e.val(this.options.searchText);this.onSearch({currentTarget:e})}}};p.prototype.getCaret=function(){var t=this;e.each(this.$header.find("th"),function(i,n){e(n).find(".sortable").removeClass("desc asc").addClass(e(n).data("field")===t.options.sortName?t.options.sortOrder:"both")})};p.prototype.updateSelected=function(){var t=this.$selectItem.filter(":enabled").length&&this.$selectItem.filter(":enabled").length===this.$selectItem.filter(":enabled").filter(":checked").length;this.$selectAll.add(this.$selectAll_).prop("checked",t);this.$selectItem.each(function(){e(this).closest("tr")[e(this).prop("checked")?"addClass":"removeClass"]("selected")})};p.prototype.updateRows=function(){var t=this;this.$selectItem.each(function(){t.data[e(this).data("index")][t.header.stateField]=e(this).prop("checked")})};p.prototype.resetRows=function(){var t=this;e.each(this.data,function(e,i){t.$selectAll.prop("checked",false);t.$selectItem.prop("checked",false);if(t.header.stateField){i[t.header.stateField]=false}});this.initHiddenRows()};p.prototype.trigger=function(t){var i=Array.prototype.slice.call(arguments,1);t+=".bs.table";this.options[p.EVENTS[t]].apply(this.options,i);this.$el.trigger(e.Event(t),i);this.options.onAll(t,i);this.$el.trigger(e.Event("all.bs.table"),[t,i])};p.prototype.resetHeader=function(){clearTimeout(this.timeoutId_);this.timeoutId_=setTimeout(e.proxy(this.fitHeader,this),this.$el.is(":hidden")?100:0)};p.prototype.fitHeader=function(){var t=this,n,s,a,o;if(t.$el.is(":hidden")){t.timeoutId_=setTimeout(e.proxy(t.fitHeader,t),100);return}n=this.$tableBody.get(0);s=n.scrollWidth>n.clientWidth&&n.scrollHeight>n.clientHeight+this.$header.outerHeight()?r():0;this.$el.css("margin-top",-this.$header.outerHeight());a=e(":focus");if(a.length>0){var l=a.parents("th");if(l.length>0){var h=l.attr("data-field");if(h!==undefined){var c=this.$header.find("[data-field='"+h+"']");if(c.length>0){c.find(":input").addClass("focus-temp")}}}}this.$header_=this.$header.clone(true,true);this.$selectAll_=this.$header_.find('[name="btSelectAll"]');this.$tableHeader.css({"margin-right":s}).find("table").css("width",this.$el.outerWidth()).html("").attr("class",this.$el.attr("class")).append(this.$header_);o=e(".focus-temp:visible:eq(0)");if(o.length>0){o.focus();this.$header.find(".focus-temp").removeClass("focus-temp")}this.$header.find("th[data-field]").each(function(n){t.$header_.find(i('th[data-field="%s"]',e(this).data("field"))).data(e(this).data())});var u=this.getVisibleFields(),d=this.$header_.find("th");this.$body.find(">tr:first-child:not(.no-records-found) > *").each(function(n){var s=e(this),a=n;if(t.options.detailView&&!t.options.cardView){if(n===0){t.$header_.find("th.detail").find(".fht-cell").width(s.innerWidth())}a=n-1}var r=t.$header_.find(i('th[data-field="%s"]',u[a]));if(r.length>1){r=e(d[s[0].cellIndex])}r.find(".fht-cell").width(s.innerWidth())});this.$tableBody.off("scroll").on("scroll",function(){t.$tableHeader.scrollLeft(e(this).scrollLeft());if(t.options.showFooter&&!t.options.cardView){t.$tableFooter.scrollLeft(e(this).scrollLeft())}});t.trigger("post-header")};p.prototype.resetFooter=function(){var t=this,n=t.getData(),s=[];if(!this.options.showFooter||this.options.cardView){return}if(!this.options.cardView&&this.options.detailView){s.push('<td><div class="th-inner">&nbsp;</div><div class="fht-cell"></div></td>')}e.each(this.columns,function(e,a){var r,l="",h="",c=[],u={},d=i(' class="%s"',a["class"]);if(!a.visible){return}if(t.options.cardView&&!a.cardVisible){return}l=i("text-align: %s; ",a.falign?a.falign:a.align);h=i("vertical-align: %s; ",a.valign);u=o(null,t.options.footerStyle);if(u&&u.css){for(r in u.css){c.push(r+": "+u.css[r])}}s.push("<td",d,i(' style="%s"',l+h+c.concat().join("; ")),">");s.push('<div class="th-inner">');s.push(o(a,a.footerFormatter,[n],"&nbsp;")||"&nbsp;");s.push("</div>");s.push('<div class="fht-cell"></div>');s.push("</div>");s.push("</td>")});this.$tableFooter.find("tr").html(s.join(""));this.$tableFooter.show();clearTimeout(this.timeoutFooter_);this.timeoutFooter_=setTimeout(e.proxy(this.fitFooter,this),this.$el.is(":hidden")?100:0)};p.prototype.fitFooter=function(){var t=this,i,n,s;clearTimeout(this.timeoutFooter_);if(this.$el.is(":hidden")){this.timeoutFooter_=setTimeout(e.proxy(this.fitFooter,this),100);return}n=this.$el.css("width");s=n>this.$tableBody.width()?r():0;this.$tableFooter.css({"margin-right":s}).find("table").css("width",n).attr("class",this.$el.attr("class"));i=this.$tableFooter.find("td");this.$body.find(">tr:first-child:not(.no-records-found) > *").each(function(t){var n=e(this);i.eq(t).find(".fht-cell").width(n.innerWidth())})};p.prototype.toggleColumn=function(e,t,n){if(e===-1){return}this.columns[e].visible=t;this.initHeader();this.initSearch();this.initPagination();this.initBody();if(this.options.showColumns){var s=this.$toolbar.find(".keep-open input").prop("disabled",false);if(n){s.filter(i('[value="%s"]',e)).prop("checked",t)}if(s.filter(":checked").length<=this.options.minimumCountColumns){s.filter(":checked").prop("disabled",true)}}};p.prototype.getVisibleFields=function(){var t=this,i=[];e.each(this.header.fields,function(e,n){var a=t.columns[s(t.columns,n)];if(!a.visible){return}i.push(n)});return i};p.prototype.resetView=function(e){var t=0;if(e&&e.height){this.options.height=e.height}this.$selectAll.prop("checked",this.$selectItem.length>0&&this.$selectItem.length===this.$selectItem.filter(":checked").length);if(this.options.height){var i=this.$toolbar.outerHeight(true),n=this.$pagination.outerHeight(true),s=this.options.height-i-n;this.$tableContainer.css("height",s+"px")}if(this.options.cardView){this.$el.css("margin-top","0");this.$tableContainer.css("padding-bottom","0");this.$tableFooter.hide();return}if(this.options.showHeader&&this.options.height){this.$tableHeader.show();this.resetHeader();t+=this.$header.outerHeight()}else{this.$tableHeader.hide();this.trigger("post-header")}if(this.options.showFooter){this.resetFooter();if(this.options.height){t+=this.$tableFooter.outerHeight()+1}}this.getCaret();this.$tableContainer.css("padding-bottom",t+"px");this.trigger("reset-view")};p.prototype.getData=function(t){return this.searchText||!e.isEmptyObject(this.filterColumns)||!e.isEmptyObject(this.filterColumnsPartial)?t?this.data.slice(this.pageFrom-1,this.pageTo):this.data:t?this.options.data.slice(this.pageFrom-1,this.pageTo):this.options.data};p.prototype.load=function(t){var i=false;if(this.options.sidePagination==="server"){this.options.totalRows=t[this.options.totalField];i=t.fixedScroll;t=t[this.options.dataField]}else if(!e.isArray(t)){i=t.fixedScroll;t=t.data}this.initData(t);this.initSearch();this.initPagination();this.initBody(i)};p.prototype.append=function(e){this.initData(e,"append");this.initSearch();this.initPagination();this.initSort();this.initBody(true)};p.prototype.prepend=function(e){this.initData(e,"prepend");this.initSearch();this.initPagination();this.initSort();this.initBody(true)};p.prototype.remove=function(t){var i=this.options.data.length,n,s;if(!t.hasOwnProperty("field")||!t.hasOwnProperty("values")){return}for(n=i-1;n>=0;n--){s=this.options.data[n];if(!s.hasOwnProperty(t.field)){continue}if(e.inArray(s[t.field],t.values)!==-1){this.options.data.splice(n,1);if(this.options.sidePagination==="server"){this.options.totalRows-=1}}}if(i===this.options.data.length){return}this.initSearch();this.initPagination();this.initSort();this.initBody(true)};p.prototype.removeAll=function(){if(this.options.data.length>0){this.options.data.splice(0,this.options.data.length);this.initSearch();this.initPagination();this.initBody(true)}};p.prototype.getRowByUniqueId=function(e){var t=this.options.uniqueId,i=this.options.data.length,n=null,s,a,r;for(s=i-1;s>=0;s--){a=this.options.data[s];if(a.hasOwnProperty(t)){r=a[t]}else if(a._data.hasOwnProperty(t)){r=a._data[t]}else{continue}if(typeof r==="string"){e=e.toString()}else if(typeof r==="number"){if(Number(r)===r&&r%1===0){e=parseInt(e)}else if(r===Number(r)&&r!==0){e=parseFloat(e)}}if(r===e){n=a;break}}return n};p.prototype.removeByUniqueId=function(e){var t=this.options.data.length,i=this.getRowByUniqueId(e);if(i){this.options.data.splice(this.options.data.indexOf(i),1)}if(t===this.options.data.length){return}this.initSearch();this.initPagination();this.initBody(true)};p.prototype.updateByUniqueId=function(t){var i=this;var n=e.isArray(t)?t:[t];e.each(n,function(t,n){var s;if(!n.hasOwnProperty("id")||!n.hasOwnProperty("row")){return}s=e.inArray(i.getRowByUniqueId(n.id),i.options.data);if(s===-1){return}e.extend(i.options.data[s],n.row)});this.initSearch();this.initPagination();this.initSort();this.initBody(true)};p.prototype.insertRow=function(e){if(!e.hasOwnProperty("index")||!e.hasOwnProperty("row")){return}this.data.splice(e.index,0,e.row);this.initSearch();this.initPagination();this.initSort();this.initBody(true)};p.prototype.updateRow=function(t){var i=this;var n=e.isArray(t)?t:[t];e.each(n,function(t,n){if(!n.hasOwnProperty("index")||!n.hasOwnProperty("row")){return}e.extend(i.options.data[n.index],n.row)});this.initSearch();this.initPagination();this.initSort();this.initBody(true)};p.prototype.initHiddenRows=function(){this.hiddenRows=[]};p.prototype.showRow=function(e){this.toggleRow(e,true)};p.prototype.hideRow=function(e){this.toggleRow(e,false)};p.prototype.toggleRow=function(t,i){var n,s;if(t.hasOwnProperty("index")){n=this.getData()[t.index]}else if(t.hasOwnProperty("uniqueId")){n=this.getRowByUniqueId(t.uniqueId)}if(!n){return}s=e.inArray(n,this.hiddenRows);if(!i&&s===-1){this.hiddenRows.push(n)}else if(i&&s>-1){this.hiddenRows.splice(s,1)}this.initBody(true)};p.prototype.getHiddenRows=function(t){var i=this,n=this.getData(),s=[];e.each(n,function(t,n){if(e.inArray(n,i.hiddenRows)>-1){s.push(n)}});this.hiddenRows=s;return s};p.prototype.mergeCells=function(t){var i=t.index,n=e.inArray(t.field,this.getVisibleFields()),s=t.rowspan||1,a=t.colspan||1,r,o,l=this.$body.find(">tr"),h;if(this.options.detailView&&!this.options.cardView){n+=1}h=l.eq(i).find(">td").eq(n);if(i<0||n<0||i>=this.data.length){return}for(r=i;r<i+s;r++){for(o=n;o<n+a;o++){l.eq(r).find(">td").eq(o).hide()}}h.attr("rowspan",s).attr("colspan",a).show()};p.prototype.updateCell=function(e){if(!e.hasOwnProperty("index")||!e.hasOwnProperty("field")||!e.hasOwnProperty("value")){return}this.data[e.index][e.field]=e.value;if(e.reinit===false){return}this.initSort();this.initBody(true)};p.prototype.getOptions=function(){return this.options};p.prototype.getSelections=function(){var t=this;return e.grep(this.options.data,function(e){return e[t.header.stateField]===true})};p.prototype.getAllSelections=function(){var t=this;return e.grep(this.options.data,function(e){return e[t.header.stateField]})};p.prototype.checkAll=function(){this.checkAll_(true)};p.prototype.uncheckAll=function(){this.checkAll_(false)};p.prototype.checkInvert=function(){var t=this;var i=t.$selectItem.filter(":enabled");var n=i.filter(":checked");i.each(function(){e(this).prop("checked",!e(this).prop("checked"))});t.updateRows();t.updateSelected();t.trigger("uncheck-some",n);n=t.getSelections();t.trigger("check-some",n)};p.prototype.checkAll_=function(e){var t;if(!e){t=this.getSelections()}this.$selectAll.add(this.$selectAll_).prop("checked",e);this.$selectItem.filter(":enabled").prop("checked",e);this.updateRows();if(e){t=this.getSelections()}this.trigger(e?"check-all":"uncheck-all",t)};p.prototype.check=function(e){this.check_(true,e)};p.prototype.uncheck=function(e){this.check_(false,e)};p.prototype.check_=function(e,t){var n=this.$selectItem.filter(i('[data-index="%s"]',t)).prop("checked",e);this.data[t][this.header.stateField]=e;this.updateSelected();this.trigger(e?"check":"uncheck",this.data[t],n)};p.prototype.checkBy=function(e){this.checkBy_(true,e)};p.prototype.uncheckBy=function(e){this.checkBy_(false,e)};p.prototype.checkBy_=function(t,n){if(!n.hasOwnProperty("field")||!n.hasOwnProperty("values")){return}var s=this,a=[];e.each(this.options.data,function(r,o){if(!o.hasOwnProperty(n.field)){return false}if(e.inArray(o[n.field],n.values)!==-1){var l=s.$selectItem.filter(":enabled").filter(i('[data-index="%s"]',r)).prop("checked",t);o[s.header.stateField]=t;a.push(o);s.trigger(t?"check":"uncheck",o,l)}});this.updateSelected();this.trigger(t?"check-some":"uncheck-some",a)};p.prototype.destroy=function(){this.$el.insertBefore(this.$container);e(this.options.toolbar).insertBefore(this.$el);this.$container.next().remove();this.$container.remove();this.$el.html(this.$el_.html()).css("margin-top","0").attr("class",this.$el_.attr("class")||"")};p.prototype.showLoading=function(){this.$tableLoading.show()};p.prototype.hideLoading=function(){this.$tableLoading.hide()};p.prototype.togglePagination=function(){this.options.pagination=!this.options.pagination;var e=this.$toolbar.find('button[name="paginationSwitch"] i');if(this.options.pagination){e.attr("class",this.options.iconsPrefix+" "+this.options.icons.paginationSwitchDown)}else{e.attr("class",this.options.iconsPrefix+" "+this.options.icons.paginationSwitchUp)}this.updatePagination()};p.prototype.refresh=function(e){if(e&&e.url){this.options.url=e.url}if(e&&e.pageNumber){this.options.pageNumber=e.pageNumber}if(e&&e.pageSize){this.options.pageSize=e.pageSize}this.initServer(e&&e.silent,e&&e.query,e&&e.url);this.trigger("refresh",e)};p.prototype.resetWidth=function(){if(this.options.showHeader&&this.options.height){this.fitHeader()}if(this.options.showFooter){this.fitFooter()}};p.prototype.showColumn=function(e){this.toggleColumn(s(this.columns,e),true,true)};p.prototype.hideColumn=function(e){this.toggleColumn(s(this.columns,e),false,true)};p.prototype.getHiddenColumns=function(){return e.grep(this.columns,function(e){return!e.visible})};p.prototype.getVisibleColumns=function(){return e.grep(this.columns,function(e){return e.visible})};p.prototype.toggleAllColumns=function(t){e.each(this.columns,function(e,i){this.columns[e].visible=t});this.initHeader();this.initSearch();this.initPagination();this.initBody();if(this.options.showColumns){var i=this.$toolbar.find(".keep-open input").prop("disabled",false);if(i.filter(":checked").length<=this.options.minimumCountColumns){i.filter(":checked").prop("disabled",true)}}};p.prototype.showAllColumns=function(){this.toggleAllColumns(true)};p.prototype.hideAllColumns=function(){this.toggleAllColumns(false)};p.prototype.filterBy=function(t){this.filterColumns=e.isEmptyObject(t)?{}:t;this.options.pageNumber=1;this.initSearch();this.updatePagination()};p.prototype.scrollTo=function(e){if(typeof e==="string"){e=e==="bottom"?this.$tableBody[0].scrollHeight:0}if(typeof e==="number"){this.$tableBody.scrollTop(e)}if(typeof e==="undefined"){return this.$tableBody.scrollTop()}};p.prototype.getScrollPosition=function(){return this.scrollTo()};p.prototype.selectPage=function(e){if(e>0&&e<=this.options.totalPages){this.options.pageNumber=e;this.updatePagination()}};p.prototype.prevPage=function(){if(this.options.pageNumber>1){this.options.pageNumber--;this.updatePagination()}};p.prototype.nextPage=function(){if(this.options.pageNumber<this.options.totalPages){this.options.pageNumber++;this.updatePagination()}};p.prototype.toggleView=function(){this.options.cardView=!this.options.cardView;this.initHeader();this.initBody();this.trigger("toggle",this.options.cardView)};p.prototype.refreshOptions=function(t){if(l(this.options,t,true)){return}this.options=e.extend(this.options,t);this.trigger("refresh-options",this.options);this.destroy();this.init()};p.prototype.resetSearch=function(e){var t=this.$toolbar.find(".search input");t.val(e||"");this.onSearch({currentTarget:t})};p.prototype.expandRow_=function(e,t){var n=this.$body.find(i('> tr[data-index="%s"]',t));if(n.next().is("tr.detail-view")===(e?false:true)){n.find("> td > .detail-icon").click()}};p.prototype.expandRow=function(e){this.expandRow_(true,e)};p.prototype.collapseRow=function(e){this.expandRow_(false,e)};p.prototype.expandAllRows=function(t){if(t){var n=this.$body.find(i('> tr[data-index="%s"]',0)),s=this,a=null,r=false,o=-1;if(!n.next().is("tr.detail-view")){n.find("> td > .detail-icon").click();r=true}else if(!n.next().next().is("tr.detail-view")){n.next().find(".detail-icon").click();r=true}if(r){try{o=setInterval(function(){a=s.$body.find("tr.detail-view").last().find(".detail-icon");if(a.length>0){a.click()}else{clearInterval(o)}},1)}catch(e){clearInterval(o)}}}else{var l=this.$body.children();for(var h=0;h<l.length;h++){this.expandRow_(true,e(l[h]).data("index"))}}};p.prototype.collapseAllRows=function(t){if(t){this.expandRow_(false,0)}else{var i=this.$body.children();for(var n=0;n<i.length;n++){this.expandRow_(false,e(i[n]).data("index"))}}};p.prototype.updateFormatText=function(e,t){if(this.options[i("format%s",e)]){if(typeof t==="string"){this.options[i("format%s",e)]=function(){return t}}else if(typeof t==="function"){this.options[i("format%s",e)]=t}}this.initToolbar();this.initPagination();this.initBody()};var m=["getOptions","getSelections","getAllSelections","getData","load","append","prepend","remove","removeAll","insertRow","updateRow","updateCell","updateByUniqueId","removeByUniqueId","getRowByUniqueId","showRow","hideRow","getHiddenRows","mergeCells","checkAll","uncheckAll","checkInvert","check","uncheck","checkBy","uncheckBy","refresh","resetView","resetWidth","destroy","showLoading","hideLoading","showColumn","hideColumn","getHiddenColumns","getVisibleColumns","showAllColumns","hideAllColumns","filterBy","scrollTo","getScrollPosition","selectPage","prevPage","nextPage","togglePagination","toggleView","refreshOptions","resetSearch","expandRow","collapseRow","expandAllRows","collapseAllRows","updateFormatText"];e.fn.bootstrapTable=function(t){var i,n=Array.prototype.slice.call(arguments,1);this.each(function(){var s=e(this),a=s.data("bootstrap.table"),r=e.extend({},p.DEFAULTS,s.data(),typeof t==="object"&&t);if(typeof t==="string"){if(e.inArray(t,m)<0){throw new Error("Unknown method: "+t)}if(!a){return}i=a[t].apply(a,n);if(t==="destroy"){s.removeData("bootstrap.table")}}if(!a){s.data("bootstrap.table",a=new p(this,r))}});return typeof i==="undefined"?this:i};e.fn.bootstrapTable.Constructor=p;e.fn.bootstrapTable.defaults=p.DEFAULTS;e.fn.bootstrapTable.columnDefaults=p.COLUMN_DEFAULTS;e.fn.bootstrapTable.locales=p.LOCALES;e.fn.bootstrapTable.methods=m;e.fn.bootstrapTable.utils={sprintf:i,getFieldIndex:s,compareObjects:l,calculateObjectValue:o,getItemField:u,objectKeys:f,isIEBrowser:d};e(function(){e('[data-toggle="table"]').bootstrapTable()})})(jQuery);!function(e){"use strict";var t={};var i=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"OE",letters:""},{base:"oe",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}];var n=function(){for(var e=0;e<i.length;e++){var n=i[e].letters;for(var s=0;s<n.length;s++){t[n[s]]=i[e].base}}};var s=function(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return t[e]||e})};e.extend(e.fn.bootstrapTable.defaults,{searchAccentNeutralise:false});var a=e.fn.bootstrapTable.Constructor,r=a.prototype.init,o=a.prototype.initSearch;a.prototype.init=function(){if(this.options.searchAccentNeutralise){n()}r.apply(this,Array.prototype.slice.apply(arguments))};a.prototype.initSearch=function(){var t=this;if(this.options.sidePagination!=="server"){var i=this.searchText&&this.searchText.toLowerCase();var n=e.isEmptyObject(this.filterColumns)?null:this.filterColumns;this.data=n?e.grep(this.options.data,function(e,t){for(var i in n){if(e[i]!==n[i]){return false}}return true}):this.options.data;this.data=i?e.grep(this.data,function(n,a){for(var r in n){r=e.isNumeric(r)?parseInt(r,10):r;var o=n[r],l=t.columns[e.fn.bootstrapTable.utils.getFieldIndex(t.columns,r)],h=e.inArray(r,t.header.fields);if(l&&l.searchFormatter){o=e.fn.bootstrapTable.utils.calculateObjectValue(l,t.header.formatters[h],[o,n,a],o)}var c=e.inArray(r,t.header.fields);if(c!==-1&&t.header.searchables[c]&&(typeof o==="string"||typeof o==="number")){if(t.options.searchAccentNeutralise){o=s(o);i=s(i)}if(t.options.strictSearch){if((o+"").toLowerCase()===i){return true}}else{if((o+"").toLowerCase().indexOf(i)!==-1){return true}}}}return false}):this.data}}}(jQuery);(function(e){"use strict";var t={sortOrder:"bs.table.sortOrder",sortName:"bs.table.sortName",pageNumber:"bs.table.pageNumber",pageList:"bs.table.pageList",columns:"bs.table.columns",searchText:"bs.table.searchText",filterControl:"bs.table.filterControl"};var i=function(e){var t=e.$header;if(e.options.height){t=e.$tableHeader}return t};var n=function(e){var t="select, input";if(e.options.height){t="table select, table input"}return t};var s=function(){return!!navigator.cookieEnabled};var a=function(e,t){var i=-1;for(var n=0;n<t.length;n++){if(e.toLowerCase()===t[n].toLowerCase()){i=n;break}}return i};var r=function(e,t,i){if(!e.options.cookie||!s()||e.options.cookieIdTable===""){return}if(a(t,e.options.cookiesEnabled)===-1){return}t=e.options.cookieIdTable+"."+t;switch(e.options.cookieStorage){case"cookieStorage":document.cookie=[t,"=",i,"; expires="+e.options.cookieExpire,e.options.cookiePath?"; path="+e.options.cookiePath:"",e.options.cookieDomain?"; domain="+e.options.cookieDomain:"",e.options.cookieSecure?"; secure":""].join("");break;case"localStorage":localStorage.setItem(t,i);break;case"sessionStorage":sessionStorage.setItem(t,i);break;default:return false}return true};var o=function(e,t,i){if(!i){return null}if(a(i,e.options.cookiesEnabled)===-1){return null}i=t+"."+i;switch(e.options.cookieStorage){case"cookieStorage":return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(i).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;case"localStorage":return localStorage.getItem(i);case"sessionStorage":return sessionStorage.getItem(i);default:return null}};var l=function(e,t,i){i=t+"."+i;switch(e.options.cookieStorage){case"cookieStorage":document.cookie=[encodeURIComponent(i),"=","; expires=Thu, 01 Jan 1970 00:00:00 GMT",e.options.cookiePath?"; path="+e.options.cookiePath:"",e.options.cookieDomain?"; domain="+e.options.cookieDomain:""].join("");break;case"localStorage":localStorage.removeItem(i);break;case"sessionStorage":sessionStorage.removeItem(i);break}return true};var h=function(e){var t=e.replace(/[0-9]*/,"");e=e.replace(/[A-Za-z]{1,2}}/,"");switch(t.toLowerCase()){case"s":e=+e;break;case"mi":e=e*60;break;case"h":e=e*60*60;break;case"d":e=e*24*60*60;break;case"m":e=e*30*24*60*60;break;case"y":e=e*365*24*60*60;break;default:e=undefined;break}return e===undefined?"":"; max-age="+e};var c=function(s){setTimeout(function(){var a=JSON.parse(o(s,s.options.cookieIdTable,t.filterControl));if(!s.options.filterControlValuesLoaded&&a){s.options.filterControlValuesLoaded=true;var r={},l=i(s),h=n(s),c=function(t,i){e(i).each(function(i,n){e(t).val(n.text);r[n.field]=n.text})};l.find(h).each(function(){var t=e(this).closest("[data-field]").data("field"),i=e.grep(a,function(e){return e.field===t});c(this,i)});s.initColumnSearch(r)}},250)};e.extend(e.fn.bootstrapTable.defaults,{cookie:false,cookieExpire:"2h",cookiePath:null,cookieDomain:null,cookieSecure:null,cookieIdTable:"",cookiesEnabled:["bs.table.sortOrder","bs.table.sortName","bs.table.pageNumber","bs.table.pageList","bs.table.columns","bs.table.searchText","bs.table.filterControl"],cookieStorage:"cookieStorage",filterControls:[],filterControlValuesLoaded:false});e.fn.bootstrapTable.methods.push("getCookies");e.fn.bootstrapTable.methods.push("deleteCookie");e.extend(e.fn.bootstrapTable.utils,{setCookie:r,getCookie:o});var u=e.fn.bootstrapTable.Constructor,d=u.prototype.init,f=u.prototype.initTable,p=u.prototype.initServer,m=u.prototype.onSort,g=u.prototype.onPageNumber,v=u.prototype.onPageListChange,y=u.prototype.onPageFirst,b=u.prototype.onPagePre,w=u.prototype.onPageNext,x=u.prototype.onPageLast,_=u.prototype.toggleColumn,C=u.prototype.selectPage,k=u.prototype.onSearch;u.prototype.init=function(){var e=0;this.options.filterControls=[];this.options.filterControlValuesLoaded=false;this.options.cookiesEnabled=typeof this.options.cookiesEnabled==="string"?this.options.cookiesEnabled.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.cookiesEnabled;if(this.options.filterControl){var i=this;this.$el.on("column-search.bs.table",function(e,n,s){var a=true;for(var o=0;o<i.options.filterControls.length;o++){if(i.options.filterControls[o].field===n){i.options.filterControls[o].text=s;a=false;break}}if(a){i.options.filterControls.push({field:n,text:s})}r(i,t.filterControl,JSON.stringify(i.options.filterControls))}).on("post-body.bs.table",c(i))}d.apply(this,Array.prototype.slice.apply(arguments))};u.prototype.initServer=function(){var i=this,n=[],s=function(e){return e.filterControl&&e.filterControl==="select"},a=function(e){return e.filterData&&e.filterData!=="column"},r=function(){var e=JSON.parse(o(i,i.options.cookieIdTable,t.filterControl));return i.options.cookie&&e};n=e.grep(i.columns,function(e){return s(e)&&!a(e)});u.prototype.initServer=p;if(this.options.filterControl&&r()&&n.length===0){return}p.apply(this,Array.prototype.slice.apply(arguments))};u.prototype.initTable=function(){f.apply(this,Array.prototype.slice.apply(arguments));this.initCookie()};u.prototype.initCookie=function(){if(!this.options.cookie){return}if(this.options.cookieIdTable===""||this.options.cookieExpire===""||!s()){throw new Error("Configuration error. Please review the cookieIdTable, cookieExpire properties, if those properties are ok, then this browser does not support the cookies")}var i=o(this,this.options.cookieIdTable,t.sortOrder),n=o(this,this.options.cookieIdTable,t.sortName),a=o(this,this.options.cookieIdTable,t.pageNumber),r=o(this,this.options.cookieIdTable,t.pageList),l=JSON.parse(o(this,this.options.cookieIdTable,t.columns)),h=o(this,this.options.cookieIdTable,t.searchText);this.options.sortOrder=i?i:this.options.sortOrder;this.options.sortName=n?n:this.options.sortName;this.options.pageNumber=a?+a:this.options.pageNumber;this.options.pageSize=r?r===this.options.formatAllRows()?r:+r:this.options.pageSize;this.options.searchText=h?h:"";if(l){e.each(this.columns,function(t,i){i.visible=e.inArray(i.field,l)!==-1})}};u.prototype.onSort=function(){m.apply(this,Array.prototype.slice.apply(arguments));r(this,t.sortOrder,this.options.sortOrder);r(this,t.sortName,this.options.sortName)};u.prototype.onPageNumber=function(){g.apply(this,Array.prototype.slice.apply(arguments));r(this,t.pageNumber,this.options.pageNumber);
};u.prototype.onPageListChange=function(){v.apply(this,Array.prototype.slice.apply(arguments));r(this,t.pageList,this.options.pageSize)};u.prototype.onPageFirst=function(){y.apply(this,Array.prototype.slice.apply(arguments));r(this,t.pageNumber,this.options.pageNumber)};u.prototype.onPagePre=function(){b.apply(this,Array.prototype.slice.apply(arguments));r(this,t.pageNumber,this.options.pageNumber)};u.prototype.onPageNext=function(){w.apply(this,Array.prototype.slice.apply(arguments));r(this,t.pageNumber,this.options.pageNumber)};u.prototype.onPageLast=function(){x.apply(this,Array.prototype.slice.apply(arguments));r(this,t.pageNumber,this.options.pageNumber)};u.prototype.toggleColumn=function(){_.apply(this,Array.prototype.slice.apply(arguments));var i=[];e.each(this.columns,function(e,t){if(t.visible){i.push(t.field)}});r(this,t.columns,JSON.stringify(i))};u.prototype.selectPage=function(e){C.apply(this,Array.prototype.slice.apply(arguments));r(this,t.pageNumber,e)};u.prototype.onSearch=function(){var i=Array.prototype.slice.apply(arguments);k.apply(this,i);if(e(i[0].currentTarget).parent().hasClass("search")){r(this,t.searchText,this.searchText)}};u.prototype.getCookies=function(){var i=this;var n={};e.each(t,function(e,t){n[e]=o(i,i.options.cookieIdTable,t);if(e==="columns"){n[e]=JSON.parse(n[e])}});return n};u.prototype.deleteCookie=function(e){if(e===""||!s()){return}l(this,this.options.cookieIdTable,t[e])}})(jQuery);!function(e){"use strict";var t=e.fn.bootstrapTable.utils.calculateObjectValue,i=e.fn.bootstrapTable.utils.sprintf;var n=function(t){var i=document.createElement("textarea");e(i).html(t);document.body.appendChild(i);i.select();try{document.execCommand("copy")}catch(e){console.log("Oops, unable to copy")}e(i).remove()};e.extend(e.fn.bootstrapTable.defaults,{copyBtn:false,copyWHiddenBtn:false,copyDelemeter:", "});e.fn.bootstrapTable.methods.push("copyColumnsToClipboard","copyColumnsToClipboardWithHidden");var s=e.fn.bootstrapTable.Constructor,a=s.prototype.initToolbar;s.prototype.initToolbar=function(){a.apply(this,Array.prototype.slice.apply(arguments));var e=this,t=this.$toolbar.find(">.btn-group");if(this.options.clickToSelect||this.options.singleSelect){if(this.options.copyBtn){var i="<button class='btn btn-default' id='copyBtn'><span class='glyphicon glyphicon-copy icon-pencil'></span></button>";t.append(i);t.find("#copyBtn").click(function(){e.copyColumnsToClipboard()})}if(this.options.copyWHiddenBtn){var n="<button class='btn btn-default' id='copyWHiddenBtn'><span class='badge'><span class='glyphicon glyphicon-copy icon-pencil'></span></span></button>";t.append(n);t.find("#copyWHiddenBtn").click(function(){e.copyColumnsToClipboardWithHidden()})}}};s.prototype.copyColumnsToClipboard=function(){var i=this,s="",a=this.options.copyDelemeter;e.each(i.getSelections(),function(n,r){e.each(i.options.columns[0],function(e,o){if(o.field!=="state"&&o.field!=="RowNumber"&&o.visible){if(r[o.field]!==null){s+=t(o,i.header.formatters[e],[r[o.field],r,n],r[o.field])}s+=a}});s+="\r\n"});n(s)};s.prototype.copyColumnsToClipboardWithHidden=function(){var i=this,s="",a=this.options.copyDelemeter;e.each(i.getSelections(),function(n,r){e.each(i.options.columns[0],function(e,o){if(o.field!="state"&&o.field!=="RowNumber"){if(r[o.field]!==null){s+=t(o,i.header.formatters[e],[r[o.field],r,n],r[o.field])}s+=a}});s+="\r\n"});n(s)}}(jQuery);(function(e){"use strict";e.extend(e.fn.bootstrapTable.defaults,{editable:true,onEditableInit:function(){return false},onEditableSave:function(e,t,i,n){return false},onEditableShown:function(e,t,i,n){return false},onEditableHidden:function(e,t,i,n){return false}});e.extend(e.fn.bootstrapTable.Constructor.EVENTS,{"editable-init.bs.table":"onEditableInit","editable-save.bs.table":"onEditableSave","editable-shown.bs.table":"onEditableShown","editable-hidden.bs.table":"onEditableHidden"});var t=e.fn.bootstrapTable.Constructor,i=t.prototype.initTable,n=t.prototype.initBody;t.prototype.initTable=function(){var t=this;i.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.editable){return}e.each(this.columns,function(i,n){if(!n.editable){return}var s={},a=[],r="editable-";var o=function(e,t){var i=e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()});if(i.slice(0,r.length)==r){var n=i.replace(r,"data-");s[n]=t}};e.each(t.options,o);n.formatter=n.formatter||function(e,t,i){return e};n._formatter=n._formatter?n._formatter:n.formatter;n.formatter=function(i,r,l){var h=n._formatter?n._formatter(i,r,l):i;e.each(n,o);e.each(s,function(e,t){a.push(" "+e+'="'+t+'"')});var c=false;if(n.editable.hasOwnProperty("noeditFormatter")){c=n.editable.noeditFormatter(i,r,l)}if(c===false){return['<a href="javascript:void(0)"',' data-name="'+n.field+'"',' data-pk="'+r[t.options.idField]+'"',' data-value="'+h+'"',a.join(""),">"+"</a>"].join("")}else{return c}}})};t.prototype.initBody=function(){var t=this;n.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.editable){return}e.each(this.columns,function(i,n){if(!n.editable){return}t.$body.find('a[data-name="'+n.field+'"]').editable(n.editable).off("save").on("save",function(i,s){var a=t.getData(),r=e(this).parents("tr[data-index]").data("index"),o=a[r],l=o[n.field];e(this).data("value",s.submitValue);o[n.field]=s.submitValue;t.trigger("editable-save",n.field,o,l,e(this));t.resetFooter()});t.$body.find('a[data-name="'+n.field+'"]').editable(n.editable).off("shown").on("shown",function(i,s){var a=t.getData(),r=e(this).parents("tr[data-index]").data("index"),o=a[r];t.trigger("editable-shown",n.field,o,e(this),s)});t.$body.find('a[data-name="'+n.field+'"]').editable(n.editable).off("hidden").on("hidden",function(i,s){var a=t.getData(),r=e(this).parents("tr[data-index]").data("index"),o=a[r];t.trigger("editable-hidden",n.field,o,e(this),s)})});this.trigger("editable-init")}})(jQuery);(function(e){"use strict";var t=e.fn.bootstrapTable.utils.sprintf;var i={json:"JSON",xml:"XML",png:"PNG",csv:"CSV",txt:"TXT",sql:"SQL",doc:"MS-Word",excel:"MS-Excel",xlsx:"MS-Excel (OpenXML)",powerpoint:"MS-Powerpoint",pdf:"PDF"};e.extend(e.fn.bootstrapTable.defaults,{showExport:false,exportDataType:"basic",exportTypes:["json","xml","csv","txt","sql","excel"],exportOptions:{}});e.extend(e.fn.bootstrapTable.defaults.icons,{export:"glyphicon-export icon-share"});e.extend(e.fn.bootstrapTable.locales,{formatExport:function(){return"Export data"}});e.extend(e.fn.bootstrapTable.defaults,e.fn.bootstrapTable.locales);var n=e.fn.bootstrapTable.Constructor,s=n.prototype.initToolbar;n.prototype.initToolbar=function(){this.showToolbar=this.options.showExport;s.apply(this,Array.prototype.slice.apply(arguments));if(this.options.showExport){var n=this,a=this.$toolbar.find(">.btn-group"),r=a.find("div.export");if(!r.length){r=e(['<div class="export btn-group">','<button class="btn'+t(" btn-%s",this.options.buttonsClass)+t(" btn-%s",this.options.iconSize)+' dropdown-toggle" aria-label="export type" '+'title="'+this.options.formatExport()+'" '+'data-toggle="dropdown" type="button">',t('<i class="%s %s"></i> ',this.options.iconsPrefix,this.options.icons.export),'<span class="caret"></span>',"</button>",'<ul class="dropdown-menu" role="menu">',"</ul>","</div>"].join("")).appendTo(a);var o=r.find(".dropdown-menu"),l=this.options.exportTypes;if(typeof this.options.exportTypes==="string"){var h=this.options.exportTypes.slice(1,-1).replace(/ /g,"").split(",");l=[];e.each(h,function(e,t){l.push(t.slice(1,-1))})}e.each(l,function(e,t){if(i.hasOwnProperty(t)){o.append(['<li role="menuitem" data-type="'+t+'">','<a href="javascript:void(0)">',i[t],"</a>","</li>"].join(""))}});o.find("li").click(function(){var t=e(this).data("type"),i=function(){n.$el.tableExport(e.extend({},n.options.exportOptions,{type:t,escape:false}))};if(n.options.exportDataType==="all"&&n.options.pagination){n.$el.one(n.options.sidePagination==="server"?"post-body.bs.table":"page-change.bs.table",function(){i();n.togglePagination()});n.togglePagination()}else if(n.options.exportDataType==="selected"){var s=n.getData(),a=n.getAllSelections();if(n.options.sidePagination==="server"){s={total:n.options.totalRows};s[n.options.dataField]=n.getData();a={total:n.options.totalRows};a[n.options.dataField]=n.getAllSelections()}n.load(a);i();n.load(s)}else{i()}})}}}})(jQuery);(function(e){"use strict";var t=function(t,i){var n={};function s(t,a){if(Object(t)!==t){n[a]=t}else if(e.isArray(t)){for(var r=0,o=t.length;r<o;r++){s(t[r],a?a+i.options.flatSeparator+r:""+r);if(o==0){n[a]=[]}}}else{var l=true;for(var h in t){l=false;s(t[h],a?a+i.options.flatSeparator+h:h)}if(l){n[a]={}}}}s(t,"");return n};var i=function(i,n){var s=[];e.each(!e.isArray(i)?[i]:i,function(e,i){s.push(t(i,n))});return s};e.extend(e.fn.bootstrapTable.defaults,{flat:false,flatSeparator:"."});var n=e.fn.bootstrapTable.Constructor,s=n.prototype.initData;n.prototype.initData=function(e,t){if(this.options.flat){e=i(e?e:this.options.data,this)}s.apply(this,[e,t])}})(jQuery);!function(e){"use strict";e.extend(e.fn.bootstrapTable.defaults,{multipleSearch:false,delimeter:" "});var t=e.fn.bootstrapTable.Constructor,i=t.prototype.initSearch;t.prototype.initSearch=function(){if(this.options.multipleSearch){if(this.searchText===undefined){return}var t=this.searchText.split(this.options.delimeter),n=this,s=e.isEmptyObject(this.filterColumns)?null:this.filterColumns,a=[];if(t.length===1){i.apply(this,Array.prototype.slice.apply(arguments))}else{for(var r=0;r<t.length;r++){var o=t[r].trim();a=o?e.grep(a.length===0?this.options.data:a,function(t,i){for(var s in t){s=e.isNumeric(s)?parseInt(s,10):s;var a=t[s],r=n.columns[e.fn.bootstrapTable.utils.getFieldIndex(n.columns,s)],l=e.inArray(s,n.header.fields);if(r&&r.searchFormatter){a=e.fn.bootstrapTable.utils.calculateObjectValue(r,n.header.formatters[l],[a,t,i],a)}var h=e.inArray(s,n.header.fields);if(h!==-1&&n.header.searchables[h]&&(typeof a==="string"||typeof a==="number")){if(n.options.strictSearch){if((a+"").toLowerCase()===o){return true}}else{if((a+"").toLowerCase().indexOf(o)!==-1){return true}}}}return false}):this.data}this.data=a}}else{i.apply(this,Array.prototype.slice.apply(arguments))}}}(jQuery);(function(e){"use strict";var t=false;var i=function(t){var i=t.$sortModal.selector,n=i.substr(1);if(!e(n).hasClass("modal")){var s='  <div class="modal fade" id="'+n+'" tabindex="-1" role="dialog" aria-labelledby="'+n+'Label" aria-hidden="true">';s+='         <div class="modal-dialog">';s+='             <div class="modal-content">';s+='                 <div class="modal-header">';s+='                     <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>';s+='                     <h4 class="modal-title" id="'+n+'Label">'+t.options.formatMultipleSort()+"</h4>";s+="                 </div>";s+='                 <div class="modal-body">';s+='                     <div class="bootstrap-table">';s+='                         <div class="fixed-table-toolbar">';s+='                             <div class="bars">';s+='                                 <div id="toolbar">';s+='                                     <button id="add" type="button" class="btn btn-default"><i class="'+t.options.iconsPrefix+" "+t.options.icons.plus+'"></i> '+t.options.formatAddLevel()+"</button>";s+='                                     <button id="delete" type="button" class="btn btn-default" disabled><i class="'+t.options.iconsPrefix+" "+t.options.icons.minus+'"></i> '+t.options.formatDeleteLevel()+"</button>";s+="                                 </div>";s+="                             </div>";s+="                         </div>";s+='                         <div class="fixed-table-container">';s+='                             <table id="multi-sort" class="table">';s+="                                 <thead>";s+="                                     <tr>";s+="                                         <th></th>";s+='                                         <th><div class="th-inner">'+t.options.formatColumn()+"</div></th>";s+='                                         <th><div class="th-inner">'+t.options.formatOrder()+"</div></th>";s+="                                     </tr>";s+="                                 </thead>";s+="                                 <tbody></tbody>";s+="                             </table>";s+="                         </div>";s+="                     </div>";s+="                 </div>";s+='                 <div class="modal-footer">';s+='                     <button type="button" class="btn btn-default" data-dismiss="modal">'+t.options.formatCancel()+"</button>";s+='                     <button type="button" class="btn btn-primary">'+t.options.formatSort()+"</button>";s+="                 </div>";s+="             </div>";s+="         </div>";s+="     </div>";e("body").append(e(s));t.$sortModal=e(i);var a=t.$sortModal.find("tbody > tr");t.$sortModal.off("click","#add").on("click","#add",function(){var e=t.$sortModal.find(".multi-sort-name:first option").length,i=t.$sortModal.find("tbody tr").length;if(i<e){i++;t.addLevel();t.setButtonStates()}});t.$sortModal.off("click","#delete").on("click","#delete",function(){var e=t.$sortModal.find(".multi-sort-name:first option").length,i=t.$sortModal.find("tbody tr").length;if(i>1&&i<=e){i--;t.$sortModal.find("tbody tr:last").remove();t.setButtonStates()}});t.$sortModal.off("click",".btn-primary").on("click",".btn-primary",function(){var i=t.$sortModal.find("tbody > tr"),n=t.$sortModal.find("div.alert"),s=[],a=[];t.options.sortPriority=e.map(i,function(t){var i=e(t),n=i.find(".multi-sort-name").val(),a=i.find(".multi-sort-order").val();s.push(n);return{sortName:n,sortOrder:a}});var r=s.sort();for(var o=0;o<s.length-1;o++){if(r[o+1]==r[o]){a.push(r[o])}}if(a.length>0){if(n.length===0){n='<div class="alert alert-danger" role="alert"><strong>'+t.options.formatDuplicateAlertTitle()+"</strong> "+t.options.formatDuplicateAlertDescription()+"</div>";e(n).insertBefore(t.$sortModal.find(".bars"))}}else{if(n.length===1){e(n).remove()}t.$sortModal.modal("hide");t.options.sortName="";if(t.options.sidePagination==="server"){t.options.queryParams=function(e){e.multiSort=t.options.sortPriority;return e};t.initServer(t.options.silentSort);return}t.onMultipleSort()}});if(t.options.sortPriority===null||t.options.sortPriority.length===0){if(t.options.sortName){t.options.sortPriority=[{sortName:t.options.sortName,sortOrder:t.options.sortOrder}]}}if(t.options.sortPriority!==null&&t.options.sortPriority.length>0){if(a.length<t.options.sortPriority.length&&typeof t.options.sortPriority==="object"){for(var r=0;r<t.options.sortPriority.length;r++){t.addLevel(r,t.options.sortPriority[r])}}}else{t.addLevel(0)}t.setButtonStates()}};e.extend(e.fn.bootstrapTable.defaults,{showMultiSort:false,sortPriority:null,onMultipleSort:function(){return false}});e.extend(e.fn.bootstrapTable.defaults.icons,{sort:"glyphicon-sort",plus:"glyphicon-plus",minus:"glyphicon-minus"});e.extend(e.fn.bootstrapTable.Constructor.EVENTS,{"multiple-sort.bs.table":"onMultipleSort"});e.extend(e.fn.bootstrapTable.locales,{formatMultipleSort:function(){return"Multiple Sort"},formatAddLevel:function(){return"Add Level"},formatDeleteLevel:function(){return"Delete Level"},formatColumn:function(){return"Column"},formatOrder:function(){return"Order"},formatSortBy:function(){return"Sort by"},formatThenBy:function(){return"Then by"},formatSort:function(){return"Sort"},formatCancel:function(){return"Cancel"},formatDuplicateAlertTitle:function(){return"Duplicate(s) detected!"},formatDuplicateAlertDescription:function(){return"Please remove or change any duplicate column."},formatSortOrders:function(){return{asc:"Ascending",desc:"Descending"}}});e.extend(e.fn.bootstrapTable.defaults,e.fn.bootstrapTable.locales);var n=e.fn.bootstrapTable.Constructor,s=n.prototype.initToolbar;n.prototype.initToolbar=function(){this.showToolbar=true;var n=this,a="#sortModal_"+this.$el.attr("id");this.$sortModal=e(a);s.apply(this,Array.prototype.slice.apply(arguments));if(this.options.showMultiSort){var r=this.$toolbar.find(">.btn-group").first(),o=this.$toolbar.find("div.multi-sort");if(!o.length){o='  <button class="multi-sort btn btn-default'+(this.options.iconSize===undefined?"":" btn-"+this.options.iconSize)+'" type="button" data-toggle="modal" data-target="'+a+'" title="'+this.options.formatMultipleSort()+'">';o+='     <i class="'+this.options.iconsPrefix+" "+this.options.icons.sort+'"></i>';o+="</button>";r.append(o);i(n)}this.$el.on("sort.bs.table",function(){t=true});this.$el.on("multiple-sort.bs.table",function(){t=false});this.$el.on("load-success.bs.table",function(){if(!t&&n.options.sortPriority!==null&&typeof n.options.sortPriority==="object"&&n.options.sidePagination!=="server"){n.onMultipleSort()}});this.$el.on("column-switch.bs.table",function(e,t){for(var s=0;s<n.options.sortPriority.length;s++){if(n.options.sortPriority[s].sortName===t){n.options.sortPriority.splice(s,1)}}n.assignSortableArrows();n.$sortModal.remove();i(n)});this.$el.on("reset-view.bs.table",function(){if(!t&&n.options.sortPriority!==null&&typeof n.options.sortPriority==="object"){n.assignSortableArrows()}})}};n.prototype.onMultipleSort=function(){var t=this;var i=function(e,t){return e>t?1:e<t?-1:0};var n=function(n,s){var a=[],r=[];for(var o=0;o<t.options.sortPriority.length;o++){var l=t.options.sortPriority[o].sortOrder==="desc"?-1:1,h=n[t.options.sortPriority[o].sortName],c=s[t.options.sortPriority[o].sortName];if(h===undefined||h===null){h=""}if(c===undefined||c===null){c=""}if(e.isNumeric(h)&&e.isNumeric(c)){h=parseFloat(h);c=parseFloat(c)}if(typeof h!=="string"){h=h.toString()}a.push(l*i(h,c));r.push(l*i(c,h))}return i(a,r)};this.data.sort(function(e,t){return n(e,t)});this.initBody();this.assignSortableArrows();this.trigger("multiple-sort")};n.prototype.addLevel=function(t,i){var n=t===0?this.options.formatSortBy():this.options.formatThenBy();this.$sortModal.find("tbody").append(e("<tr>").append(e("<td>").text(n)).append(e("<td>").append(e('<select class="form-control multi-sort-name">'))).append(e("<td>").append(e('<select class="form-control multi-sort-order">'))));var s=this.$sortModal.find(".multi-sort-name").last(),a=this.$sortModal.find(".multi-sort-order").last();e.each(this.columns,function(e,t){if(t.sortable===false||t.visible===false){return true}s.append('<option value="'+t.field+'">'+t.title+"</option>")});e.each(this.options.formatSortOrders(),function(e,t){a.append('<option value="'+e+'">'+t+"</option>")});if(i!==undefined){s.find('option[value="'+i.sortName+'"]').attr("selected",true);a.find('option[value="'+i.sortOrder+'"]').attr("selected",true)}};n.prototype.assignSortableArrows=function(){var t=this,i=t.$header.find("th");for(var n=0;n<i.length;n++){for(var s=0;s<t.options.sortPriority.length;s++){if(e(i[n]).data("field")===t.options.sortPriority[s].sortName){e(i[n]).find(".sortable").removeClass("desc asc").addClass(t.options.sortPriority[s].sortOrder)}}}};n.prototype.setButtonStates=function(){var e=this.$sortModal.find(".multi-sort-name:first option").length,t=this.$sortModal.find("tbody tr").length;if(t==e){this.$sortModal.find("#add").attr("disabled","disabled")}if(t>1){this.$sortModal.find("#delete").removeAttr("disabled")}if(t<e){this.$sortModal.find("#add").removeAttr("disabled")}if(t==1){this.$sortModal.find("#delete").attr("disabled","disabled")}}})(jQuery);function alphanum(e,t){function i(e){var t=[],i=0,n=-1,s=0,a,r;while(a=(r=e.charAt(i++)).charCodeAt(0)){var o=a===46||a>=48&&a<=57;if(o!==s){t[++n]="";s=o}t[n]+=r}return t}function n(e){if(typeof e==="number"){e=""+e}if(!e){e=""}return e}var s=i(n(e));var a=i(n(t));for(x=0;s[x]&&a[x];x++){if(s[x]!==a[x]){var r=Number(s[x]),o=Number(a[x]);if(r==s[x]&&o==a[x]){return r-o}else{return s[x]>a[x]?1:-1}}}return s.length-a.length}function numericOnly(e,t){function i(e){e=e.replace(new RegExp(/[^0-9]/g),"");return parseInt(e,10)}return i(e)-i(t)}!function(e){"use strict";function t(e){var t=e.$header;if(e.options.height){t=e.$tableHeader}return t}function i(e){return t(e).find("[data-filter-field]")}function n(t){var n=i(t);if(!e.isEmptyObject(t.filterColumnsPartial)){n.each(function(i,n){var s=e(n),a=s.attr("data-filter-field"),r=t.filterColumnsPartial[a];if(s.is("select")){s.val(r).trigger("change")}else{s.val(r)}})}}function s(t,i){var n=false,s,a,r=0;e.each(t.columns,function(t,r){s="hidden";a=[];if(!r.visible){return}if(!r.filter){a.push('<div class="no-filter"></div>')}else{var o=r.filter.class?" "+r.filter.class:"";a.push('<div style="margin: 0px 2px 2px 2px;" class="filter'+o+'">');if(r.searchable){n=true;s="visible"}switch(r.filter.type.toLowerCase()){case"input":a.push('<input type="text" data-filter-field="'+r.field+'" style="width: 100%; visibility:'+s+'">');break;case"select":a.push('<select data-filter-field="'+r.field+'" style="width: 100%; visibility:'+s+'"></select>');break}}e.each(i.children().children(),function(t,i){i=e(i);if(i.data("field")===r.field){i.find(".fht-cell").append(a.join(""));return false}})});if(n){var o=i.find("input"),l=i.find("select");if(o.length>0){o.off("keyup").on("keyup",function(e){clearTimeout(r);r=setTimeout(function(){t.onColumnSearch(e)},t.options.searchTimeOut)});o.off("mouseup").on("mouseup",function(i){var n=e(this),s=n.val();if(s===""){return}setTimeout(function(){var e=n.val();if(e===""){clearTimeout(r);r=setTimeout(function(){t.onColumnSearch(i)},t.options.searchTimeOut)}},1)})}if(l.length>0){l.on("select2:select",function(e){t.onColumnSearch(e)})}}else{i.find(".filter").hide()}}function a(i){var n=t(i);e.each(i.columns,function(e,t){if(t.filter&&t.filter.type==="select"){var s=n.find("select[data-filter-field="+t.field+"]");if(s.length>0&&!s.data().select2){t.filter.data.unshift("");var a={placeholder:"",allowClear:true,data:t.filter.data,dropdownParent:i.$el.closest(".bootstrap-table")};s.select2(a);s.on("select2:unselecting",function(e){e.preventDefault();s.val(null).trigger("change");i.searchText=undefined;i.onColumnSearch(e)})}}})}e.extend(e.fn.bootstrapTable.defaults,{filter:false,filterValues:{}});e.extend(e.fn.bootstrapTable.COLUMN_DEFAULTS,{filter:undefined});var r=e.fn.bootstrapTable.Constructor,o=r.prototype.init,l=r.prototype.initHeader,h=r.prototype.initSearch;r.prototype.init=function(){if(this.options.filter){var t=this;if(!e.isEmptyObject(t.options.filterValues)){t.filterColumnsPartial=t.options.filterValues;t.options.filterValues={}}this.$el.on("reset-view.bs.table",function(){if(!t.options.height){return}if(t.$tableHeader.find("select").length>0||t.$tableHeader.find("input").length>0){return}s(t,t.$tableHeader)}).on("post-header.bs.table",function(){var e=0;a(t);clearTimeout(e);e=setTimeout(function(){n(t)},t.options.searchTimeOut-1e3)}).on("column-switch.bs.table",function(e,i){n(t)})}o.apply(this,Array.prototype.slice.apply(arguments))};r.prototype.initHeader=function(){l.apply(this,Array.prototype.slice.apply(arguments));if(this.options.filter){s(this,this.$header)}};r.prototype.initSearch=function(){h.apply(this,Array.prototype.slice.apply(arguments));var t=this,i=t.filterColumnsPartial;if(t.options.sidePagination==="client"){this.data=e.grep(this.data,function(n,s){for(var a in i){var r=t.columns[e.fn.bootstrapTable.utils.getFieldIndex(t.columns,a)],o=i[a].toLowerCase(),l=n[a];l=e.fn.bootstrapTable.utils.calculateObjectValue(t.header,t.header.formatters[e.inArray(a,t.header.fields)],[l,n,s],l);if(r.filterStrictSearch){if(!(e.inArray(a,t.header.fields)!==-1&&(typeof l==="string"||typeof l==="number")&&l.toString().toLowerCase()===o.toString().toLowerCase())){return false}}else{if(!(e.inArray(a,t.header.fields)!==-1&&(typeof l==="string"||typeof l==="number")&&(l+"").toLowerCase().indexOf(o)!==-1)){return false}}}return true})}};r.prototype.onColumnSearch=function(t){var i=e(t.currentTarget).attr("data-filter-field"),n=e.trim(e(t.currentTarget).val());if(e.isEmptyObject(this.filterColumnsPartial)){this.filterColumnsPartial={}}if(n){this.filterColumnsPartial[i]=n}else{delete this.filterColumnsPartial[i]}this.options.pageNumber=1;this.onSearch(t)};r.prototype.setFilterData=function(i,n){var s=this,a=t(s),r=a.find('select[data-filter-field="'+i+'"]');n.unshift("");r.empty();r.select2({data:n,placeholder:"",allowClear:true,dropdownParent:s.$el.closest(".bootstrap-table")});e.each(this.columns,function(e,t){if(t.field===i){t.filter.data=n;return false}})};r.prototype.setFilterValues=function(e){this.filterColumnsPartial=e};e.fn.bootstrapTable.methods.push("setFilterData");e.fn.bootstrapTable.methods.push("setFilterValues")}(jQuery);(function(e){"use strict";var t=e.fn.bootstrapTable.utils.sprintf;e.extend(e.fn.bootstrapTable.defaults,{stickyHeader:false});var i=e.fn.bootstrapTable.Constructor,n=i.prototype.initHeader;i.prototype.initHeader=function(){var i=this;n.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.stickyHeader){return}var s=this.$tableBody.find("table"),a=s.attr("id"),r=s.attr("id")+"-sticky-header",o=r+"-sticky-header-container",l=r+"_sticky_anchor_begin",h=r+"_sticky_anchor_end";s.before(t('<div id="%s" class="hidden"></div>',o));s.before(t('<div id="%s"></div>',l));s.after(t('<div id="%s"></div>',h));s.find("thead").attr("id",r);this.$stickyHeader=e(e("#"+r).clone(true,true));this.$stickyHeader.removeAttr("id");e(window).on("resize."+a,s,c);e(window).on("scroll."+a,s,c);s.closest(".fixed-table-container").find(".fixed-table-body").on("scroll."+a,s,u);this.$el.on("all.bs.table",function(t){i.$stickyHeader=e(e("#"+r).clone(true,true));i.$stickyHeader.removeAttr("id")});function c(t){var n=t.data;var s=n.find("thead").attr("id");if(n.length<1||e("#"+a).length<1){e(window).off("resize."+a);e(window).off("scroll."+a);n.closest(".fixed-table-container").find(".fixed-table-body").off("scroll."+a);return}var r="0";if(i.options.stickyHeaderOffsetY)r=i.options.stickyHeaderOffsetY.replace("px","");var c=e(window).scrollTop();var d=e("#"+l).offset().top-r;var f=e("#"+h).offset().top-r-e("#"+s).css("height").replace("px","");if(c>d&&c<=f){e.each(i.$stickyHeader.find("tr").eq(0).find("th"),function(t,i){e(i).css("min-width",e("#"+s+" tr").eq(0).find("th").eq(t).css("width"))});e("#"+o).removeClass("hidden").addClass("fix-sticky fixed-table-container");e("#"+o).css("top",r+"px");var p=e('<div style="position:absolute;width:100%;overflow-x:hidden;" />');e("#"+o).html(p.append(i.$stickyHeader));u(t)}else{e("#"+o).removeClass("fix-sticky").addClass("hidden")}}function u(t){var i=t.data;var n=i.find("thead").attr("id");e("#"+o).css("width",+i.closest(".fixed-table-body").css("width").replace("px","")+1);e("#"+o+" thead").parent().scrollLeft(Math.abs(e("#"+n).position().left))}}})(jQuery);!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.proj4=t()}(this,function(){"use strict";function e(e,t){if(e[t])return e[t];for(var i,n,s=Object.keys(e),a=t.toLowerCase().replace(Ht,""),r=-1;++r<s.length;)if(i=s[r],n=i.toLowerCase().replace(Ht,""),n===a)return e[i]}function t(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Bt}function i(e){var i=new t(e);return i.output()}function n(e,t,i){Array.isArray(t)&&(i.unshift(t),t=null);var n=t?{}:e,a=i.reduce(function(e,t){return s(t,e),e},n);t&&(e[t]=a)}function s(e,t){if(!Array.isArray(e))return void(t[e]=!0);var i=e.shift();if("PARAMETER"===i&&(i=e.shift()),1===e.length)return Array.isArray(e[0])?(t[i]={},void s(e[0],t[i])):void(t[i]=e[0]);if(!e.length)return void(t[i]=!0);if("TOWGS84"===i)return void(t[i]=e);Array.isArray(i)||(t[i]={});var a;switch(i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[i]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&s(e[2],t[i]));case"SPHEROID":case"ELLIPSOID":return t[i]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&s(e[3],t[i]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return e[0]=["name",e[0]],void n(t,i,e);default:for(a=-1;++a<e.length;)if(!Array.isArray(e[a]))return s(e,t[i]);return n(t,i,e)}}function a(e,t){var i=t[0],n=t[1];!(i in e)&&n in e&&(e[i]=e[n],3===t.length&&(e[i]=t[2](e[i])))}function r(e){return e*ei}function o(e){function t(t){var i=e.to_meter||1;return t*i}"GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"==typeof e.PROJECTION?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):(e.to_meter=e.UNIT.convert,10)));var i=e.GEOGCS;"GEOGCS"===e.type&&(i=e),i&&(i.DATUM?e.datumCode=i.DATUM.name.toLowerCase():e.datumCode=i.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==e.datumCode&&"new_zealand_1949"!==e.datumCode||(e.datumCode="nzgd49"),"wgs_1984"===e.datumCode&&("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"_ferro"===e.datumCode.slice(-6)&&(e.datumCode=e.datumCode.slice(0,-6)),"_jakarta"===e.datumCode.slice(-8)&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),i.DATUM&&i.DATUM.SPHEROID&&(e.ellps=i.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=i.DATUM.SPHEROID.a,e.rf=parseFloat(i.DATUM.SPHEROID.rf,10)),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36")),e.b&&!isFinite(e.b)&&(e.b=e.a);var n=function(t){return a(e,t)},s=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",r],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",r],["x0","false_easting",t],["y0","false_northing",t],["long0","central_meridian",r],["lat0","latitude_of_origin",r],["lat0","standard_parallel_1",r],["lat1","standard_parallel_1",r],["lat2","standard_parallel_2",r],["alpha","azimuth",r],["srsCode","name"]];s.forEach(n),e.long0||!e.longc||"Albers_Conic_Equal_Area"!==e.projName&&"Lambert_Azimuthal_Equal_Area"!==e.projName||(e.long0=e.longc),e.lat_ts||!e.lat1||"Stereographic_South_Pole"!==e.projName&&"Polar Stereographic (variant B)"!==e.projName||(e.lat0=r(e.lat1>0?90:-90),e.lat_ts=e.lat1)}function l(e){var t=this;if(2===arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?l[e]=zt(arguments[1]):l[e]=ti(arguments[1]):l[e]=i}else if(1===arguments.length){if(Array.isArray(e))return e.map(function(e){Array.isArray(e)?l.apply(t,e):l(e)});if("string"==typeof e){if(e in l)return l[e]}else"EPSG"in e?l["EPSG:"+e.EPSG]=e:"ESRI"in e?l["ESRI:"+e.ESRI]=e:"IAU2000"in e?l["IAU2000:"+e.IAU2000]=e:console.log(e);return}}function h(e){return"string"==typeof e}function c(e){return e in l}function u(e){return ii.some(function(t){return e.indexOf(t)>-1})}function d(e){return"+"===e[0]}function f(e){return h(e)?c(e)?l[e]:u(e)?ti(e):d(e)?zt(e):void 0:e}function p(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=si(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1);
}function m(e){var t=e.x,i=e.y;if(i*Ot>90&&i*Ot<-90&&t*Ot>180&&t*Ot<-180)return null;var n,s;if(Math.abs(Math.abs(i)-$t)<=It)return null;if(this.sphere)n=this.x0+this.a*this.k0*ri(t-this.long0),s=this.y0+this.a*this.k0*Math.log(Math.tan(Ft+.5*i));else{var a=Math.sin(i),r=oi(this.e,i,a);n=this.x0+this.a*this.k0*ri(t-this.long0),s=this.y0-this.a*this.k0*Math.log(r)}return e.x=n,e.y=s,e}function g(e){var t,i,n=e.x-this.x0,s=e.y-this.y0;if(this.sphere)i=$t-2*Math.atan(Math.exp(-s/(this.a*this.k0)));else{var a=Math.exp(-s/(this.a*this.k0));if(i=li(this.e,a),i===-9999)return null}return t=ri(this.long0+n/(this.a*this.k0)),e.x=t,e.y=i,e}function v(){}function y(e){return e}function b(e,t){var i=mi.length;return e.names?(mi[i]=e,e.names.forEach(function(e){pi[e.toLowerCase()]=i}),this):(console.log(t),!0)}function w(e){if(!e)return!1;var t=e.toLowerCase();return"undefined"!=typeof pi[t]&&mi[pi[t]]?mi[pi[t]]:void 0}function x(){fi.forEach(b)}function _(e,t,i,n){var s=e*e,a=t*t,r=(s-a)/s,o=0;n?(e*=1-r*(Et+r*(At+r*Pt)),s=e*e,r=0):o=Math.sqrt(r);var l=(s-a)/a;return{es:r,e:o,ep2:l}}function C(t,i,n,s,a){if(!t){var r=e(vi,s);r||(r=yi),t=r.a,i=r.b,n=r.rf}return n&&!i&&(i=(1-1/n)*t),(0===n||Math.abs(t-i)<It)&&(a=!0,i=t),{a:t,b:i,rf:n,sphere:a}}function k(e,t,i,n,s,a){var r={};return void 0===e||"none"===e?r.datum_type=Mt:r.datum_type=St,t&&(r.datum_params=t.map(parseFloat),0===r.datum_params[0]&&0===r.datum_params[1]&&0===r.datum_params[2]||(r.datum_type=kt),r.datum_params.length>3&&(0===r.datum_params[3]&&0===r.datum_params[4]&&0===r.datum_params[5]&&0===r.datum_params[6]||(r.datum_type=Tt,r.datum_params[3]*=Dt,r.datum_params[4]*=Dt,r.datum_params[5]*=Dt,r.datum_params[6]=r.datum_params[6]/1e6+1))),r.a=i,r.b=n,r.es=s,r.ep2=a,r}function T(t,i){if(!(this instanceof T))return new T(t);i=i||function(e){if(e)throw e};var n=f(t);if("object"!=typeof n)return void i(t);var s=T.projections.get(n.projName);if(!s)return void i(t);if(n.datumCode&&"none"!==n.datumCode){var a=e(bi,n.datumCode);a&&(n.datum_params=a.towgs84?a.towgs84.split(","):null,n.ellps=a.ellipse,n.datumName=a.datumName?a.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84";var r=C(n.a,n.b,n.rf,n.ellps,n.sphere),o=_(r.a,r.b,r.rf,n.R_A),l=n.datum||k(n.datumCode,n.datum_params,r.a,r.b,o.es,o.ep2);ni(this,n),ni(this,s),this.a=r.a,this.b=r.b,this.rf=r.rf,this.sphere=r.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),i(null,this)}function S(e,t){return e.datum_type===t.datum_type&&(!(e.a!==t.a||Math.abs(e.es-t.es)>5e-11)&&(e.datum_type===kt?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type!==Tt||e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]))}function M(e,t,i){var n,s,a,r,o=e.x,l=e.y,h=e.z?e.z:0;if(l<-$t&&l>-1.001*$t)l=-$t;else if(l>$t&&l<1.001*$t)l=$t;else if(l<-$t||l>$t)return null;return o>Math.PI&&(o-=2*Math.PI),s=Math.sin(l),r=Math.cos(l),a=s*s,n=i/Math.sqrt(1-t*a),{x:(n+h)*r*Math.cos(o),y:(n+h)*r*Math.sin(o),z:(n*(1-t)+h)*s}}function D(e,t,i,n){var s,a,r,o,l,h,c,u,d,f,p,m,g,v,y,b,w=1e-12,x=w*w,_=30,C=e.x,k=e.y,T=e.z?e.z:0;if(s=Math.sqrt(C*C+k*k),a=Math.sqrt(C*C+k*k+T*T),s/i<w){if(v=0,a/i<w)return y=$t,b=-n,{x:e.x,y:e.y,z:e.z}}else v=Math.atan2(k,C);r=T/a,o=s/a,l=1/Math.sqrt(1-t*(2-t)*o*o),u=o*(1-t)*l,d=r*l,g=0;do g++,c=i/Math.sqrt(1-t*d*d),b=s*u+T*d-c*(1-t*d*d),h=t*c/(c+b),l=1/Math.sqrt(1-h*(2-h)*o*o),f=o*(1-h)*l,p=r*l,m=p*u-f*d,u=f,d=p;while(m*m>x&&g<_);return y=Math.atan(p/Math.abs(f)),{x:v,y:y,z:b}}function $(e,t,i){if(t===kt)return{x:e.x+i[0],y:e.y+i[1],z:e.z+i[2]};if(t===Tt){var n=i[0],s=i[1],a=i[2],r=i[3],o=i[4],l=i[5],h=i[6];return{x:h*(e.x-l*e.y+o*e.z)+n,y:h*(l*e.x+e.y-r*e.z)+s,z:h*(-o*e.x+r*e.y+e.z)+a}}}function E(e,t,i){if(t===kt)return{x:e.x-i[0],y:e.y-i[1],z:e.z-i[2]};if(t===Tt){var n=i[0],s=i[1],a=i[2],r=i[3],o=i[4],l=i[5],h=i[6],c=(e.x-n)/h,u=(e.y-s)/h,d=(e.z-a)/h;return{x:c+l*u-o*d,y:-l*c+u+r*d,z:o*c-r*u+d}}}function A(e){return e===kt||e===Tt}function P(e,t){return(e.datum.datum_type===kt||e.datum.datum_type===Tt)&&"WGS84"!==t.datumCode||(t.datum.datum_type===kt||t.datum.datum_type===Tt)&&"WGS84"!==e.datumCode}function I(e,t,i){var n;return Array.isArray(i)&&(i=_i(i)),e.datum&&t.datum&&P(e,t)&&(n=new T("WGS84"),i=I(e,n,i),e=n),"enu"!==e.axis&&(i=xi(e,!1,i)),"longlat"===e.projName?i={x:i.x*Nt,y:i.y*Nt}:(e.to_meter&&(i={x:i.x*e.to_meter,y:i.y*e.to_meter}),i=e.inverse(i)),e.from_greenwich&&(i.x+=e.from_greenwich),i=wi(e.datum,t.datum,i),t.from_greenwich&&(i={x:i.x-t.from_greenwich,y:i.y}),"longlat"===t.projName?i={x:i.x*Ot,y:i.y*Ot}:(i=t.forward(i),t.to_meter&&(i={x:i.x/t.to_meter,y:i.y/t.to_meter})),"enu"!==t.axis?xi(t,!0,i):i}function N(e,t,i){var n;return Array.isArray(i)?(n=I(e,t,i),3===i.length?[n.x,n.y,n.z]:[n.x,n.y]):I(e,t,i)}function O(e){return e instanceof T?e:e.oProj?e.oProj:T(e)}function F(e,t,i){e=O(e);var n,s=!1;return"undefined"==typeof t?(t=e,e=Ci,s=!0):("undefined"!=typeof t.x||Array.isArray(t))&&(i=t,t=e,e=Ci,s=!0),t=O(t),i?N(e,t,i):(n={forward:function(i){return N(e,t,i)},inverse:function(i){return N(t,e,i)}},s&&(n.oProj=t),n)}function R(e,t){return t=t||5,q(z({lat:e[1],lon:e[0]}),t)}function L(e){var t=B(Z(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function j(e){var t=B(Z(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function U(e){return e*(Math.PI/180)}function H(e){return 180*(e/Math.PI)}function z(e){var t,i,n,s,a,r,o,l,h,c=e.lat,u=e.lon,d=6378137,f=.00669438,p=.9996,m=U(c),g=U(u);h=Math.floor((u+180)/6)+1,180===u&&(h=60),c>=56&&c<64&&u>=3&&u<12&&(h=32),c>=72&&c<84&&(u>=0&&u<9?h=31:u>=9&&u<21?h=33:u>=21&&u<33?h=35:u>=33&&u<42&&(h=37)),t=6*(h-1)-180+3,l=U(t),i=f/(1-f),n=d/Math.sqrt(1-f*Math.sin(m)*Math.sin(m)),s=Math.tan(m)*Math.tan(m),a=i*Math.cos(m)*Math.cos(m),r=Math.cos(m)*(g-l),o=d*((1-f/4-3*f*f/64-5*f*f*f/256)*m-(3*f/8+3*f*f/32+45*f*f*f/1024)*Math.sin(2*m)+(15*f*f/256+45*f*f*f/1024)*Math.sin(4*m)-35*f*f*f/3072*Math.sin(6*m));var v=p*n*(r+(1-s+a)*r*r*r/6+(5-18*s+s*s+72*a-58*i)*r*r*r*r*r/120)+5e5,y=p*(o+n*Math.tan(m)*(r*r/2+(5-s+9*a+4*a*a)*r*r*r*r/24+(61-58*s+s*s+600*a-330*i)*r*r*r*r*r*r/720));return c<0&&(y+=1e7),{northing:Math.round(y),easting:Math.round(v),zoneNumber:h,zoneLetter:V(c)}}function B(e){var t=e.northing,i=e.easting,n=e.zoneLetter,s=e.zoneNumber;if(s<0||s>60)return null;var a,r,o,l,h,c,u,d,f,p,m=.9996,g=6378137,v=.00669438,y=(1-Math.sqrt(1-v))/(1+Math.sqrt(1-v)),b=i-5e5,w=t;n<"N"&&(w-=1e7),d=6*(s-1)-180+3,a=v/(1-v),u=w/m,f=u/(g*(1-v/4-3*v*v/64-5*v*v*v/256)),p=f+(3*y/2-27*y*y*y/32)*Math.sin(2*f)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*f)+151*y*y*y/96*Math.sin(6*f),r=g/Math.sqrt(1-v*Math.sin(p)*Math.sin(p)),o=Math.tan(p)*Math.tan(p),l=a*Math.cos(p)*Math.cos(p),h=g*(1-v)/Math.pow(1-v*Math.sin(p)*Math.sin(p),1.5),c=b/(r*m);var x=p-r*Math.tan(p)/h*(c*c/2-(5+3*o+10*l-4*l*l-9*a)*c*c*c*c/24+(61+90*o+298*l+45*o*o-252*a-3*l*l)*c*c*c*c*c*c/720);x=H(x);var _=(c-(1+2*o+l)*c*c*c/6+(5-2*l+28*o-3*l*l+8*a+24*o*o)*c*c*c*c*c/120)/Math.cos(p);_=d+H(_);var C;if(e.accuracy){var k=B({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});C={top:k.lat,right:k.lon,bottom:x,left:_}}else C={lat:x,lon:_};return C}function V(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function q(e,t){var i="00000"+e.easting,n="00000"+e.northing;return e.zoneNumber+e.zoneLetter+W(e.easting,e.northing,e.zoneNumber)+i.substr(i.length-5,t)+n.substr(n.length-5,t)}function W(e,t,i){var n=Y(i),s=Math.floor(e/1e5),a=Math.floor(t/1e5)%20;return G(s,a,n)}function Y(e){var t=e%ki;return 0===t&&(t=ki),t}function G(e,t,i){var n=i-1,s=Ti.charCodeAt(n),a=Si.charCodeAt(n),r=s+e-1,o=a+t,l=!1;r>Ai&&(r=r-Ai+Mi-1,l=!0),(r===Di||s<Di&&r>Di||(r>Di||s<Di)&&l)&&r++,(r===$i||s<$i&&r>$i||(r>$i||s<$i)&&l)&&(r++,r===Di&&r++),r>Ai&&(r=r-Ai+Mi-1),o>Ei?(o=o-Ei+Mi-1,l=!0):l=!1,(o===Di||a<Di&&o>Di||(o>Di||a<Di)&&l)&&o++,(o===$i||a<$i&&o>$i||(o>$i||a<$i)&&l)&&(o++,o===Di&&o++),o>Ei&&(o=o-Ei+Mi-1);var h=String.fromCharCode(r)+String.fromCharCode(o);return h}function Z(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,i=e.length,n=null,s="",a=0;!/[A-Z]/.test(t=e.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+e;s+=t,a++}var r=parseInt(s,10);if(0===a||a+3>i)throw"MGRSPoint bad conversion from: "+e;var o=e.charAt(a++);if(o<="A"||"B"===o||"Y"===o||o>="Z"||"I"===o||"O"===o)throw"MGRSPoint zone letter "+o+" not handled: "+e;n=e.substring(a,a+=2);for(var l=Y(r),h=K(n.charAt(0),l),c=Q(n.charAt(1),l);c<J(o);)c+=2e6;var u=i-a;if(u%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var d,f,p,m,g,v=u/2,y=0,b=0;return v>0&&(d=1e5/Math.pow(10,v),f=e.substring(a,a+v),y=parseFloat(f)*d,p=e.substring(a+v),b=parseFloat(p)*d),m=y+h,g=b+c,{easting:m,northing:g,zoneLetter:o,zoneNumber:r,accuracy:d}}function K(e,t){for(var i=Ti.charCodeAt(t-1),n=1e5,s=!1;i!==e.charCodeAt(0);){if(i++,i===Di&&i++,i===$i&&i++,i>Ai){if(s)throw"Bad character: "+e;i=Mi,s=!0}n+=1e5}return n}function Q(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var i=Si.charCodeAt(t-1),n=0,s=!1;i!==e.charCodeAt(0);){if(i++,i===Di&&i++,i===$i&&i++,i>Ei){if(s)throw"Bad character: "+e;i=Mi,s=!0}n+=1e5}return n}function J(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function X(e,t,i){if(!(this instanceof X))return new X(e,t,i);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"==typeof e)this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&"undefined"==typeof t){var n=e.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=e,this.y=t,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function ee(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Wi(this.es),this.ml0=Yi(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function te(e){var t,i,n,s=e.x,a=e.y,r=ri(s-this.long0),o=Math.sin(a),l=Math.cos(a);if(this.es){var h=l*r,c=Math.pow(h,2),u=this.ep2*Math.pow(l,2),d=Math.pow(u,2),f=Math.abs(l)>It?Math.tan(a):0,p=Math.pow(f,2),m=Math.pow(p,2);t=1-this.es*Math.pow(o,2),h/=Math.sqrt(t);var g=Yi(a,o,l,this.en);i=this.a*(this.k0*h*(1+c/6*(1-p+u+c/20*(5-18*p+m+14*u-58*p*u+c/42*(61+179*m-m*p-479*p)))))+this.x0,n=this.a*(this.k0*(g-this.ml0+o*r*h/2*(1+c/12*(5-p+9*u+4*d+c/30*(61+m-58*p+270*u-330*p*u+c/56*(1385+543*m-m*p-3111*p))))))+this.y0}else{var v=l*Math.sin(r);if(Math.abs(Math.abs(v)-1)<It)return 93;if(i=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,n=l*Math.cos(r)/Math.sqrt(1-Math.pow(v,2)),v=Math.abs(n),v>=1){if(v-1>It)return 93;n=0}else n=Math.acos(n);a<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return e.x=i,e.y=n,e}function ie(e){var t,i,n,s,a=(e.x-this.x0)*(1/this.a),r=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+r/this.k0,i=Zi(t,this.es,this.en),Math.abs(i)<$t){var o=Math.sin(i),l=Math.cos(i),h=Math.abs(l)>It?Math.tan(i):0,c=this.ep2*Math.pow(l,2),u=Math.pow(c,2),d=Math.pow(h,2),f=Math.pow(d,2);t=1-this.es*Math.pow(o,2);var p=a*Math.sqrt(t)/this.k0,m=Math.pow(p,2);t*=h,n=i-t*m/(1-this.es)*.5*(1-m/12*(5+3*d-9*c*d+c-4*u-m/30*(61+90*d-252*c*d+45*f+46*c-m/56*(1385+3633*d+4095*f+1574*f*d)))),s=ri(this.long0+p*(1-m/6*(1+2*d+c-m/20*(5+28*d+24*f+8*c*d+6*c-m/42*(61+662*d+1320*f+720*f*d))))/l)}else n=$t*ai(r),s=0;else{var g=Math.exp(a/this.k0),v=.5*(g-1/g),y=this.lat0+r/this.k0,b=Math.cos(y);t=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(v,2))),n=Math.asin(t),r<0&&(n=-n),s=0===v&&0===b?0:ri(Math.atan2(v,b)+this.long0)}return e.x=s,e.y=n,e}function ne(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),i=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),i*=t,this.cgb[1]=i*(7/3+t*(-1.6+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=i*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),i*=t,this.cgb[2]=i*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=i*(-26/15+t*(34/21+t*(1.6+t*(-12686/2835)))),i*=t,this.cgb[3]=i*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=i*(1237/630+t*(-2.4+t*(-24832/14175))),i*=t,this.cgb[4]=i*(4174/315+t*(-144838/6237)),this.cbg[4]=i*(-734/315+t*(109598/31185)),i*=t,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+i*(.25+i*(1/64+i/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=i*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=i*(13/48+t*(-.6+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),i*=t,this.utg[2]=i*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=i*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),i*=t,this.utg[3]=i*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=i*(49561/161280+t*(-179/168+t*(6601661/7257600))),i*=t,this.utg[4]=i*(-4583/161280+t*(108847/3991680)),this.gtu[4]=i*(34729/80640+t*(-3418889/1995840)),i*=t,this.utg[5]=i*-.03233083094085698,this.gtu[5]=.6650675310896665*i;var n=nn(this.cbg,this.lat0);this.Zb=-this.Qn*(n+sn(this.gtu,2*n))}function se(e){var t=ri(e.x-this.long0),i=e.y;i=nn(this.cbg,i);var n=Math.sin(i),s=Math.cos(i),a=Math.sin(t),r=Math.cos(t);i=Math.atan2(n,r*s),t=Math.atan2(a*s,Xi(n,s*r)),t=tn(Math.tan(t));var o=rn(this.gtu,2*i,2*t);i+=o[0],t+=o[1];var l,h;return Math.abs(t)<=2.623395162778?(l=this.a*(this.Qn*t)+this.x0,h=this.a*(this.Qn*i+this.Zb)+this.y0):(l=1/0,h=1/0),e.x=l,e.y=h,e}function ae(e){var t=(e.x-this.x0)*(1/this.a),i=(e.y-this.y0)*(1/this.a);i=(i-this.Zb)/this.Qn,t/=this.Qn;var n,s;if(Math.abs(t)<=2.623395162778){var a=rn(this.utg,2*i,2*t);i+=a[0],t+=a[1],t=Math.atan(Ji(t));var r=Math.sin(i),o=Math.cos(i),l=Math.sin(t),h=Math.cos(t);i=Math.atan2(r*h,Xi(l,h*o)),t=Math.atan2(l,h*o),n=ri(t+this.long0),s=nn(this.cgb,i)}else n=1/0,s=1/0;return e.x=n,e.y=s,e}function re(){var e=hn(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*Nt,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,ln.init.apply(this),this.forward=ln.forward,this.inverse=ln.inverse}function oe(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Ft)/(Math.pow(Math.tan(.5*this.lat0+Ft),this.C)*fn(this.e*e,this.ratexp))}function le(e){var t=e.x,i=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+Ft),this.C)*fn(this.e*Math.sin(i),this.ratexp))-$t,e.x=this.C*t,e}function he(e){for(var t=1e-14,i=e.x/this.C,n=e.y,s=Math.pow(Math.tan(.5*n+Ft)/this.K,1/this.C),a=pn;a>0&&(n=2*Math.atan(s*fn(this.e*Math.sin(e.y),-.5*this.e))-$t,!(Math.abs(n-e.y)<t));--a)e.y=n;return a?(e.x=i,e.y=n,e):null}function ce(){gn.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function ue(e){var t,i,n,s;return e.x=ri(e.x-this.long0),gn.forward.apply(this,[e]),t=Math.sin(e.y),i=Math.cos(e.y),n=Math.cos(e.x),s=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*i*n),e.x=s*i*Math.sin(e.x),e.y=s*(this.cosc0*t-this.sinc0*i*n),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function de(e){var t,i,n,s,a;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,a=Math.sqrt(e.x*e.x+e.y*e.y)){var r=2*Math.atan2(a,this.R2);t=Math.sin(r),i=Math.cos(r),s=Math.asin(i*this.sinc0+e.y*t*this.cosc0/a),n=Math.atan2(e.x*t,a*this.cosc0*i-e.y*this.sinc0*t)}else s=this.phic0,n=0;return e.x=n,e.y=s,gn.inverse.apply(this,[e]),e.x=ri(e.x+this.long0),e}function fe(e,t,i){return t*=i,Math.tan(.5*($t+e))*Math.pow((1-t)/(1+t),.5*i)}function pe(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=It&&(this.k0=.5*(1+ai(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=It&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=It&&(this.k0=.5*this.cons*si(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/oi(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=si(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-$t,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function me(e){var t,i,n,s,a,r,o=e.x,l=e.y,h=Math.sin(l),c=Math.cos(l),u=ri(o-this.long0);return Math.abs(Math.abs(o-this.long0)-Math.PI)<=It&&Math.abs(l+this.lat0)<=It?(e.x=NaN,e.y=NaN,e):this.sphere?(t=2*this.k0/(1+this.sinlat0*h+this.coslat0*c*Math.cos(u)),e.x=this.a*t*c*Math.sin(u)+this.x0,e.y=this.a*t*(this.coslat0*h-this.sinlat0*c*Math.cos(u))+this.y0,e):(i=2*Math.atan(this.ssfn_(l,h,this.e))-$t,s=Math.cos(i),n=Math.sin(i),Math.abs(this.coslat0)<=It?(a=oi(this.e,l*this.con,this.con*h),r=2*this.a*this.k0*a/this.cons,e.x=this.x0+r*Math.sin(o-this.long0),e.y=this.y0-this.con*r*Math.cos(o-this.long0),e):(Math.abs(this.sinlat0)<It?(t=2*this.a*this.k0/(1+s*Math.cos(u)),e.y=t*n):(t=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*s*Math.cos(u))),e.y=t*(this.cosX0*n-this.sinX0*s*Math.cos(u))+this.y0),e.x=t*s*Math.sin(u)+this.x0,e))}function ge(e){e.x-=this.x0,e.y-=this.y0;var t,i,n,s,a,r=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var o=2*Math.atan(r/(.5*this.a*this.k0));return t=this.long0,i=this.lat0,r<=It?(e.x=t,e.y=i,e):(i=Math.asin(Math.cos(o)*this.sinlat0+e.y*Math.sin(o)*this.coslat0/r),t=ri(Math.abs(this.coslat0)<It?this.lat0>0?this.long0+Math.atan2(e.x,-1*e.y):this.long0+Math.atan2(e.x,e.y):this.long0+Math.atan2(e.x*Math.sin(o),r*this.coslat0*Math.cos(o)-e.y*this.sinlat0*Math.sin(o))),e.x=t,e.y=i,e)}if(Math.abs(this.coslat0)<=It){if(r<=It)return i=this.lat0,t=this.long0,e.x=t,e.y=i,e;e.x*=this.con,e.y*=this.con,n=r*this.cons/(2*this.a*this.k0),i=this.con*li(this.e,n),t=this.con*ri(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else s=2*Math.atan(r*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,r<=It?a=this.X0:(a=Math.asin(Math.cos(s)*this.sinX0+e.y*Math.sin(s)*this.cosX0/r),t=ri(this.long0+Math.atan2(e.x*Math.sin(s),r*this.cosX0*Math.cos(s)-e.y*this.sinX0*Math.sin(s)))),i=-1*li(this.e,Math.tan(.5*($t+a)));return e.x=t,e.y=i,e}function ve(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),i=this.a,n=this.rf,s=1/n,a=2*s-Math.pow(s,2),r=this.e=Math.sqrt(a);this.R=this.k0*i*Math.sqrt(1-a)/(1-a*Math.pow(t,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+e/2)),h=Math.log((1+r*t)/(1-r*t));this.K=o-this.alpha*l+this.alpha*r/2*h}function ye(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),n=-this.alpha*(t+i)+this.K,s=2*(Math.atan(Math.exp(n))-Math.PI/4),a=this.alpha*(e.x-this.lambda0),r=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(a))),o=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(a));return e.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,e.x=this.R*r+this.x0,e}function be(e){for(var t=e.x-this.x0,i=e.y-this.y0,n=t/this.R,s=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(n)),r=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(s))),o=this.lambda0+r/this.alpha,l=0,h=a,c=-1e3,u=0;Math.abs(h-c)>1e-7;){if(++u>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),c=h,h=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=o,e.y=h,e}function we(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var e=Math.sin(this.lat0),t=Math.cos(this.lat0),i=this.e*e;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(t,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-i*i);var n=oi(this.e,this.lat0,e),s=this.bl/t*Math.sqrt((1-this.es)/(1-i*i));s*s<1&&(s=1);var a,r;if(isNaN(this.longc)){var o=oi(this.e,this.lat1,Math.sin(this.lat1)),l=oi(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(s+Math.sqrt(s*s-1))*Math.pow(n,this.bl):this.el=(s-Math.sqrt(s*s-1))*Math.pow(n,this.bl);var h=Math.pow(o,this.bl),c=Math.pow(l,this.bl);a=this.el/h,r=.5*(a-1/a);var u=(this.el*this.el-c*h)/(this.el*this.el+c*h),d=(c-h)/(c+h),f=ri(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(u*Math.tan(.5*this.bl*f)/d)/this.bl,this.long0=ri(this.long0);var p=ri(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*p)/r),this.alpha=Math.asin(s*Math.sin(this.gamma0))}else a=this.lat0>=0?s+Math.sqrt(s*s-1):s-Math.sqrt(s*s-1),this.el=a*Math.pow(n,this.bl),r=.5*(a-1/a),this.gamma0=Math.asin(Math.sin(this.alpha)/s),this.long0=this.longc-Math.asin(r*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(s*s-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(s*s-1),Math.cos(this.alpha))}function xe(e){var t,i,n,s=e.x,a=e.y,r=ri(s-this.long0);if(Math.abs(Math.abs(a)-$t)<=It)n=a>0?-1:1,i=this.al/this.bl*Math.log(Math.tan(Ft+n*this.gamma0*.5)),t=-1*n*$t*this.al/this.bl;else{var o=oi(this.e,a,Math.sin(a)),l=this.el/Math.pow(o,this.bl),h=.5*(l-1/l),c=.5*(l+1/l),u=Math.sin(this.bl*r),d=(h*Math.sin(this.gamma0)-u*Math.cos(this.gamma0))/c;i=Math.abs(Math.abs(d)-1)<=It?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-d)/(1+d))/this.bl,t=Math.abs(Math.cos(this.bl*r))<=It?this.al*this.bl*r:this.al*Math.atan2(h*Math.cos(this.gamma0)+u*Math.sin(this.gamma0),Math.cos(this.bl*r))/this.bl}return this.no_rot?(e.x=this.x0+t,e.y=this.y0+i):(t-=this.uc,e.x=this.x0+i*Math.cos(this.alpha)+t*Math.sin(this.alpha),e.y=this.y0+t*Math.cos(this.alpha)-i*Math.sin(this.alpha)),e}function _e(e){var t,i;this.no_rot?(i=e.y-this.y0,t=e.x-this.x0):(i=(e.x-this.x0)*Math.cos(this.alpha)-(e.y-this.y0)*Math.sin(this.alpha),t=(e.y-this.y0)*Math.cos(this.alpha)+(e.x-this.x0)*Math.sin(this.alpha),t+=this.uc);var n=Math.exp(-1*this.bl*i/this.al),s=.5*(n-1/n),a=.5*(n+1/n),r=Math.sin(this.bl*t/this.al),o=(r*Math.cos(this.gamma0)+s*Math.sin(this.gamma0))/a,l=Math.pow(this.el/Math.sqrt((1+o)/(1-o)),1/this.bl);return Math.abs(o-1)<It?(e.x=this.long0,e.y=$t):Math.abs(o+1)<It?(e.x=this.long0,e.y=-1*$t):(e.y=li(this.e,l),e.x=ri(this.long0-Math.atan2(s*Math.cos(this.gamma0)-r*Math.sin(this.gamma0),Math.cos(this.bl*t/this.al))/this.bl)),e}function Ce(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<It)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),i=Math.cos(this.lat1),n=si(this.e,t,i),s=oi(this.e,this.lat1,t),a=Math.sin(this.lat2),r=Math.cos(this.lat2),o=si(this.e,a,r),l=oi(this.e,this.lat2,a),h=oi(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>It?this.ns=Math.log(n/o)/Math.log(s/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function ke(e){var t=e.x,i=e.y;Math.abs(2*Math.abs(i)-Math.PI)<=It&&(i=ai(i)*($t-2*It));var n,s,a=Math.abs(Math.abs(i)-$t);if(a>It)n=oi(this.e,i,Math.sin(i)),s=this.a*this.f0*Math.pow(n,this.ns);else{if(a=i*this.ns,a<=0)return null;s=0}var r=this.ns*ri(t-this.long0);return e.x=this.k0*(s*Math.sin(r))+this.x0,e.y=this.k0*(this.rh-s*Math.cos(r))+this.y0,e}function Te(e){var t,i,n,s,a,r=(e.x-this.x0)/this.k0,o=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(r*r+o*o),i=1):(t=-Math.sqrt(r*r+o*o),i=-1);var l=0;if(0!==t&&(l=Math.atan2(i*r,i*o)),0!==t||this.ns>0){if(i=1/this.ns,n=Math.pow(t/(this.a*this.f0),i),s=li(this.e,n),s===-9999)return null}else s=-$t;return a=ri(l/this.ns+this.long0),e.x=a,e.y=s,e}function Se(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Me(e){var t,i,n,s,a,r,o,l=e.x,h=e.y,c=ri(l-this.long0);return t=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/t)-this.s45),n=-c*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),a=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(s)),r=this.n*a,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),e.y=o*Math.cos(r)/1,e.x=o*Math.sin(r)/1,this.czech||(e.y*=-1,e.x*=-1),e}function De(e){var t,i,n,s,a,r,o,l,h=e.x;e.x=e.y,e.y=h,this.czech||(e.y*=-1,e.x*=-1),r=Math.sqrt(e.x*e.x+e.y*e.y),a=Math.atan2(e.y,e.x),s=a/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/r,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(s)),i=Math.asin(Math.cos(n)*Math.sin(s)/Math.cos(t)),e.x=this.long0-i/this.alfa,o=t,l=0;var c=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-e.y)<1e-10&&(l=1),o=e.y,c+=1;while(0===l&&c<15);return c>=15?null:e}function $e(){this.sphere||(this.e0=En(this.es),this.e1=An(this.es),this.e2=Pn(this.es),this.e3=In(this.es),this.ml0=this.a*$n(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Ee(e){var t,i,n=e.x,s=e.y;if(n=ri(n-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(s)*Math.sin(n)),i=this.a*(Math.atan2(Math.tan(s),Math.cos(n))-this.lat0);else{var a=Math.sin(s),r=Math.cos(s),o=Nn(this.a,this.e,a),l=Math.tan(s)*Math.tan(s),h=n*Math.cos(s),c=h*h,u=this.es*r*r/(1-this.es),d=this.a*$n(this.e0,this.e1,this.e2,this.e3,s);t=o*h*(1-c*l*(1/6-(8-l+8*u)*c/120)),i=d-this.ml0+o*a/r*c*(.5+(5-l+6*u)*c/24)}return e.x=t+this.x0,e.y=i+this.y0,e}function Ae(e){e.x-=this.x0,e.y-=this.y0;var t,i,n=e.x/this.a,s=e.y/this.a;if(this.sphere){var a=s+this.lat0;t=Math.asin(Math.sin(a)*Math.cos(n)),i=Math.atan2(Math.tan(n),Math.cos(a))}else{var r=this.ml0/this.a+s,o=Fn(r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-$t)<=It)return e.x=this.long0,e.y=$t,s<0&&(e.y*=-1),e;var l=Nn(this.a,this.e,Math.sin(o)),h=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(o),2),u=n*this.a/l,d=u*u;t=o-l*Math.tan(o)/h*u*u*(.5-(1+3*c)*u*u/24),i=u*(1-d*(c/3+(1+3*c)*c*d/15))/Math.cos(o)}return e.x=ri(i+this.long0),e.y=On(t),e}function Pe(){var e=Math.abs(this.lat0);if(Math.abs(e-$t)<It?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<It?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=jn(this.e,1),this.mmf=.5/(1-this.es),this.apa=Oe(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=jn(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Ie(e){var t,i,n,s,a,r,o,l,h,c,u=e.x,d=e.y;if(u=ri(u-this.long0),this.sphere){if(a=Math.sin(d),c=Math.cos(d),n=Math.cos(u),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i=this.mode===this.EQUIT?1+c*n:1+this.sinph0*a+this.cosph0*c*n,i<=It)return null;i=Math.sqrt(2/i),t=i*c*Math.sin(u),i*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(d+this.phi0)<It)return null;i=Ft-.5*d,i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)),t=i*Math.sin(u),i*=n}}else{switch(o=0,l=0,h=0,n=Math.cos(u),s=Math.sin(u),a=Math.sin(d),r=jn(this.e,a),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(o=r/this.qp,l=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:h=1+this.sinb1*o+this.cosb1*l*n;break;case this.EQUIT:h=1+l*n;break;case this.N_POLE:h=$t+d,r=this.qp-r;break;case this.S_POLE:h=d-$t,r=this.qp+r}if(Math.abs(h)<It)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),i=this.mode===this.OBLIQ?this.ymf*h*(this.cosb1*o-this.sinb1*l*n):(h=Math.sqrt(2/(1+l*n)))*o*this.ymf,t=this.xmf*h*l*s;break;case this.N_POLE:case this.S_POLE:r>=0?(t=(h=Math.sqrt(r))*s,i=n*(this.mode===this.S_POLE?h:-h)):t=i=0}}return e.x=this.a*t+this.x0,e.y=this.a*i+this.y0,e}function Ne(e){e.x-=this.x0,e.y-=this.y0;var t,i,n,s,a,r,o,l=e.x/this.a,h=e.y/this.a;if(this.sphere){var c,u=0,d=0;if(c=Math.sqrt(l*l+h*h),i=.5*c,i>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(i),u=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(c)<=It?0:Math.asin(h*d/c),l*=d,h=u*c;break;case this.OBLIQ:i=Math.abs(c)<=It?this.phi0:Math.asin(u*this.sinph0+h*d*this.cosph0/c),l*=d*this.cosph0,h=(u-Math.sin(i)*this.sinph0)*c;break;case this.N_POLE:h=-h,i=$t-i;break;case this.S_POLE:i-=$t}t=0!==h||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,h):0}else{if(o=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,h*=this.dd,r=Math.sqrt(l*l+h*h),r<It)return e.x=0,e.y=this.phi0,e;s=2*Math.asin(.5*r/this.rq),n=Math.cos(s),l*=s=Math.sin(s),this.mode===this.OBLIQ?(o=n*this.sinb1+h*s*this.cosb1/r,a=this.qp*o,h=r*this.cosb1*n-h*this.sinb1*s):(o=h*s/r,a=this.qp*o,h=r*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){
if(this.mode===this.N_POLE&&(h=-h),a=l*l+h*h,!a)return e.x=0,e.y=this.phi0,e;o=1-a/this.qp,this.mode===this.S_POLE&&(o=-o)}t=Math.atan2(l,h),i=Fe(Math.asin(o),this.apa)}return e.x=ri(this.long0+t),e.y=i,e}function Oe(e){var t,i=[];return i[0]=e*Vn,t=e*e,i[0]+=t*qn,i[1]=t*Yn,t*=e,i[0]+=t*Wn,i[1]+=t*Gn,i[2]=t*Zn,i}function Fe(e,t){var i=e+e;return e+t[0]*Math.sin(i)+t[1]*Math.sin(i+i)+t[2]*Math.sin(i+i+i)}function Re(){Math.abs(this.lat1+this.lat2)<It||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=si(this.e3,this.sin_po,this.cos_po),this.qs1=jn(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=si(this.e3,this.sin_po,this.cos_po),this.qs2=jn(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=jn(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>It?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Le(e){var t=e.x,i=e.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=jn(this.e3,this.sin_phi,this.cos_phi),s=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,a=this.ns0*ri(t-this.long0),r=s*Math.sin(a)+this.x0,o=this.rh-s*Math.cos(a)+this.y0;return e.x=r,e.y=o,e}function je(e){var t,i,n,s,a,r;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1),s=0,0!==t&&(s=Math.atan2(n*e.x,n*e.y)),n=t*this.ns0/this.a,this.sphere?r=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,r=this.phi1z(this.e3,i)),a=ri(s/this.ns0+this.long0),e.x=a,e.y=r,e}function Ue(e,t){var i,n,s,a,r,o=Jn(.5*t);if(e<It)return o;for(var l=e*e,h=1;h<=25;h++)if(i=Math.sin(o),n=Math.cos(o),s=e*i,a=1-s*s,r=.5*a*a/n*(t/(1-l)-i/a+.5/e*Math.log((1-s)/(1+s))),o+=r,Math.abs(r)<=1e-7)return o;return null}function He(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function ze(e){var t,i,n,s,a,r,o,l,h=e.x,c=e.y;return n=ri(h-this.long0),t=Math.sin(c),i=Math.cos(c),s=Math.cos(n),r=this.sin_p14*t+this.cos_p14*i*s,a=1,r>0||Math.abs(r)<=It?(o=this.x0+this.a*a*i*Math.sin(n)/r,l=this.y0+this.a*a*(this.cos_p14*t-this.sin_p14*i*s)/r):(o=this.x0+this.infinity_dist*i*Math.sin(n),l=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*i*s)),e.x=o,e.y=l,e}function Be(e){var t,i,n,s,a,r;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(s=Math.atan2(t,this.rc),i=Math.sin(s),n=Math.cos(s),r=Jn(n*this.sin_p14+e.y*i*this.cos_p14/t),a=Math.atan2(e.x*i,t*this.cos_p14*n-e.y*this.sin_p14*i),a=ri(this.long0+a)):(r=this.phic0,a=0),e.x=a,e.y=r,e}function Ve(){this.sphere||(this.k0=si(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function qe(e){var t,i,n=e.x,s=e.y,a=ri(n-this.long0);if(this.sphere)t=this.x0+this.a*a*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var r=jn(this.e,Math.sin(s));t=this.x0+this.a*this.k0*a,i=this.y0+this.a*r*.5/this.k0}return e.x=t,e.y=i,e}function We(e){e.x-=this.x0,e.y-=this.y0;var t,i;return this.sphere?(t=ri(this.long0+e.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(i=ns(this.e,2*e.y*this.k0/this.a),t=ri(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=i,e}function Ye(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Ge(e){var t=e.x,i=e.y,n=ri(t-this.long0),s=On(i-this.lat0);return e.x=this.x0+this.a*n*this.rc,e.y=this.y0+this.a*s,e}function Ze(e){var t=e.x,i=e.y;return e.x=ri(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=On(this.lat0+(i-this.y0)/this.a),e}function Ke(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=En(this.es),this.e1=An(this.es),this.e2=Pn(this.es),this.e3=In(this.es),this.ml0=this.a*$n(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Qe(e){var t,i,n,s=e.x,a=e.y,r=ri(s-this.long0);if(n=r*Math.sin(a),this.sphere)Math.abs(a)<=It?(t=this.a*r,i=-1*this.a*this.lat0):(t=this.a*Math.sin(n)/Math.tan(a),i=this.a*(On(a-this.lat0)+(1-Math.cos(n))/Math.tan(a)));else if(Math.abs(a)<=It)t=this.a*r,i=-1*this.ml0;else{var o=Nn(this.a,this.e,Math.sin(a))/Math.tan(a);t=o*Math.sin(n),i=this.a*$n(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+o*(1-Math.cos(n))}return e.x=t+this.x0,e.y=i+this.y0,e}function Je(e){var t,i,n,s,a,r,o,l,h;if(n=e.x-this.x0,s=e.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=It)t=ri(n/this.a+this.long0),i=0;else{r=this.lat0+s/this.a,o=n*n/this.a/this.a+r*r,l=r;var c;for(a=ls;a;--a)if(c=Math.tan(l),h=-1*(r*(l*c+1)-l-.5*(l*l+o)*c)/((l-r)/c-1),l+=h,Math.abs(h)<=It){i=l;break}t=ri(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(i))}else if(Math.abs(s+this.ml0)<=It)i=0,t=ri(this.long0+n/this.a);else{r=(this.ml0+s)/this.a,o=n*n/this.a/this.a+r*r,l=r;var u,d,f,p,m;for(a=ls;a;--a)if(m=this.e*Math.sin(l),u=Math.sqrt(1-m*m)*Math.tan(l),d=this.a*$n(this.e0,this.e1,this.e2,this.e3,l),f=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),p=d/this.a,h=(r*(u*p+1)-p-.5*u*(p*p+o))/(this.es*Math.sin(2*l)*(p*p+o-2*r*p)/(4*u)+(r-p)*(u*f-2/Math.sin(2*l))-f),l-=h,Math.abs(h)<=It){i=l;break}u=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),t=ri(this.long0+Math.asin(n*u/this.a)/Math.sin(i))}return e.x=t,e.y=i,e}function Xe(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function et(e){var t,i=e.x,n=e.y,s=n-this.lat0,a=i-this.long0,r=s/Dt*1e-5,o=a,l=1,h=0;for(t=1;t<=10;t++)l*=r,h+=this.A[t]*l;var c,u,d=h,f=o,p=1,m=0,g=0,v=0;for(t=1;t<=6;t++)c=p*d-m*f,u=m*d+p*f,p=c,m=u,g=g+this.B_re[t]*p-this.B_im[t]*m,v=v+this.B_im[t]*p+this.B_re[t]*m;return e.x=v*this.a+this.x0,e.y=g*this.a+this.y0,e}function tt(e){var t,i,n,s=e.x,a=e.y,r=s-this.x0,o=a-this.y0,l=o/this.a,h=r/this.a,c=1,u=0,d=0,f=0;for(t=1;t<=6;t++)i=c*l-u*h,n=u*l+c*h,c=i,u=n,d=d+this.C_re[t]*c-this.C_im[t]*u,f=f+this.C_im[t]*c+this.C_re[t]*u;for(var p=0;p<this.iterations;p++){var m,g,v=d,y=f,b=l,w=h;for(t=2;t<=6;t++)m=v*d-y*f,g=y*d+v*f,v=m,y=g,b+=(t-1)*(this.B_re[t]*v-this.B_im[t]*y),w+=(t-1)*(this.B_im[t]*v+this.B_re[t]*y);v=1,y=0;var x=this.B_re[1],_=this.B_im[1];for(t=2;t<=6;t++)m=v*d-y*f,g=y*d+v*f,v=m,y=g,x+=t*(this.B_re[t]*v-this.B_im[t]*y),_+=t*(this.B_im[t]*v+this.B_re[t]*y);var C=x*x+_*_;d=(b*x+w*_)/C,f=(w*x-b*_)/C}var k=d,T=f,S=1,M=0;for(t=1;t<=9;t++)S*=k,M+=this.D[t]*S;var D=this.lat0+M*Dt*1e5,$=this.long0+T;return e.x=$,e.y=D,e}function it(){}function nt(e){var t=e.x,i=e.y,n=ri(t-this.long0),s=this.x0+this.a*n,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return e.x=s,e.y=a,e}function st(e){e.x-=this.x0,e.y-=this.y0;var t=ri(this.long0+e.x/this.a),i=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=i,e}function at(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Wi(this.es)}function rt(e){var t,i,n=e.x,s=e.y;if(n=ri(n-this.long0),this.sphere){if(this.m)for(var a=this.n*Math.sin(s),r=ms;r;--r){var o=(this.m*s+Math.sin(s)-a)/(this.m+Math.cos(s));if(s-=o,Math.abs(o)<It)break}else s=1!==this.n?Math.asin(this.n*Math.sin(s)):s;t=this.a*this.C_x*n*(this.m+Math.cos(s)),i=this.a*this.C_y*s}else{var l=Math.sin(s),h=Math.cos(s);i=this.a*Yi(s,l,h,this.en),t=this.a*n*h/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=i,e}function ot(e){var t,i,n,s;return e.x-=this.x0,n=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,n/=this.C_x*(this.m+Math.cos(t)),this.m?t=Jn((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=Jn(Math.sin(t)/this.n)),n=ri(n+this.long0),t=On(t)):(t=Zi(e.y/this.a,this.es,this.en),s=Math.abs(t),s<$t?(s=Math.sin(t),i=this.long0+e.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(t)),n=ri(i)):s-It<$t&&(n=this.long0)),e.x=n,e.y=t,e}function lt(){}function ht(e){for(var t=e.x,i=e.y,n=ri(t-this.long0),s=i,a=Math.PI*Math.sin(i),r=0;!0;r++){var o=-(s+Math.sin(s)-a)/(1+Math.cos(s));if(s+=o,Math.abs(o)<It)break}s/=2,Math.PI/2-Math.abs(i)<It&&(n=0);var l=.900316316158*this.a*n*Math.cos(s)+this.x0,h=1.4142135623731*this.a*Math.sin(s)+this.y0;return e.x=l,e.y=h,e}function ct(e){var t,i;e.x-=this.x0,e.y-=this.y0,i=e.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),t=Math.asin(i);var n=ri(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),i=(2*t+Math.sin(2*t))/Math.PI,Math.abs(i)>1&&(i=1);var s=Math.asin(i);return e.x=n,e.y=s,e}function ut(){Math.abs(this.lat1+this.lat2)<It||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=En(this.es),this.e1=An(this.es),this.e2=Pn(this.es),this.e3=In(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=si(this.e,this.sinphi,this.cosphi),this.ml1=$n(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<It?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=si(this.e,this.sinphi,this.cosphi),this.ml2=$n(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=$n(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function dt(e){var t,i=e.x,n=e.y;if(this.sphere)t=this.a*(this.g-n);else{var s=$n(this.e0,this.e1,this.e2,this.e3,n);t=this.a*(this.g-s)}var a=this.ns*ri(i-this.long0),r=this.x0+t*Math.sin(a),o=this.y0+this.rh-t*Math.cos(a);return e.x=r,e.y=o,e}function ft(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,i,n,s;this.ns>=0?(i=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(i=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var a=0;if(0!==i&&(a=Math.atan2(t*e.x,t*e.y)),this.sphere)return s=ri(this.long0+a/this.ns),n=On(this.g-i/this.a),e.x=s,e.y=n,e;var r=this.g-i/this.a;return n=Fn(r,this.e0,this.e1,this.e2,this.e3),s=ri(this.long0+a/this.ns),e.x=s,e.y=n,e}function pt(){this.R=this.a}function mt(e){var t,i,n=e.x,s=e.y,a=ri(n-this.long0);Math.abs(s)<=It&&(t=this.x0+this.R*a,i=this.y0);var r=Jn(2*Math.abs(s/Math.PI));(Math.abs(a)<=It||Math.abs(Math.abs(s)-$t)<=It)&&(t=this.x0,i=s>=0?this.y0+Math.PI*this.R*Math.tan(.5*r):this.y0+Math.PI*this.R*-Math.tan(.5*r));var o=.5*Math.abs(Math.PI/a-a/Math.PI),l=o*o,h=Math.sin(r),c=Math.cos(r),u=c/(h+c-1),d=u*u,f=u*(2/h-1),p=f*f,m=Math.PI*this.R*(o*(u-p)+Math.sqrt(l*(u-p)*(u-p)-(p+l)*(d-p)))/(p+l);a<0&&(m=-m),t=this.x0+m;var g=l+u;return m=Math.PI*this.R*(f*g-o*Math.sqrt((p+l)*(l+1)-g*g))/(p+l),i=s>=0?this.y0+m:this.y0-m,e.x=t,e.y=i,e}function gt(e){var t,i,n,s,a,r,o,l,h,c,u,d,f;return e.x-=this.x0,e.y-=this.y0,u=Math.PI*this.R,n=e.x/u,s=e.y/u,a=n*n+s*s,r=-Math.abs(s)*(1+a),o=r-2*s*s+n*n,l=-2*r+1+2*s*s+a*a,f=s*s/l+(2*o*o*o/l/l/l-9*r*o/l/l)/27,h=(r-o*o/3/l)/l,c=2*Math.sqrt(-h/3),u=3*f/h/c,Math.abs(u)>1&&(u=u>=0?1:-1),d=Math.acos(u)/3,i=e.y>=0?(-c*Math.cos(d+Math.PI/3)-o/3/l)*Math.PI:-(-c*Math.cos(d+Math.PI/3)-o/3/l)*Math.PI,t=Math.abs(n)<It?this.long0:ri(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(n*n-s*s)+a*a))/2/n),e.x=t,e.y=i,e}function vt(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function yt(e){var t,i,n,s,a,r,o,l,h,c,u,d,f,p,m,g,v,y,b,w,x,_,C,k=e.x,T=e.y,S=Math.sin(e.y),M=Math.cos(e.y),D=ri(k-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=It?(e.x=this.x0+this.a*($t-T)*Math.sin(D),e.y=this.y0-this.a*($t-T)*Math.cos(D),e):Math.abs(this.sin_p12+1)<=It?(e.x=this.x0+this.a*($t+T)*Math.sin(D),e.y=this.y0+this.a*($t+T)*Math.cos(D),e):(y=this.sin_p12*S+this.cos_p12*M*Math.cos(D),g=Math.acos(y),v=g/Math.sin(g),e.x=this.x0+this.a*v*M*Math.sin(D),e.y=this.y0+this.a*v*(this.cos_p12*S-this.sin_p12*M*Math.cos(D)),e):(t=En(this.es),i=An(this.es),n=Pn(this.es),s=In(this.es),Math.abs(this.sin_p12-1)<=It?(a=this.a*$n(t,i,n,s,$t),r=this.a*$n(t,i,n,s,T),e.x=this.x0+(a-r)*Math.sin(D),e.y=this.y0-(a-r)*Math.cos(D),e):Math.abs(this.sin_p12+1)<=It?(a=this.a*$n(t,i,n,s,$t),r=this.a*$n(t,i,n,s,T),e.x=this.x0+(a+r)*Math.sin(D),e.y=this.y0+(a+r)*Math.cos(D),e):(o=S/M,l=Nn(this.a,this.e,this.sin_p12),h=Nn(this.a,this.e,S),c=Math.atan((1-this.es)*o+this.es*l*this.sin_p12/(h*M)),u=Math.atan2(Math.sin(D),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(D)),b=0===u?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(u)-Math.PI)<=It?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(D)*Math.cos(c)/Math.sin(u)),d=this.e*this.sin_p12/Math.sqrt(1-this.es),f=this.e*this.cos_p12*Math.cos(u)/Math.sqrt(1-this.es),p=d*f,m=f*f,w=b*b,x=w*b,_=x*b,C=_*b,g=l*b*(1-w*m*(1-m)/6+x/8*p*(1-2*m)+_/120*(m*(4-7*m)-3*d*d*(1-7*m))-C/48*p),e.x=this.x0+g*Math.sin(u),e.y=this.y0+g*Math.cos(u),e))}function bt(e){e.x-=this.x0,e.y-=this.y0;var t,i,n,s,a,r,o,l,h,c,u,d,f,p,m,g,v,y,b,w,x,_,C;if(this.sphere){if(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*$t*this.a)return;return i=t/this.a,n=Math.sin(i),s=Math.cos(i),a=this.long0,Math.abs(t)<=It?r=this.lat0:(r=Jn(s*this.sin_p12+e.y*n*this.cos_p12/t),o=Math.abs(this.lat0)-$t,a=ri(Math.abs(o)<=It?this.lat0>=0?this.long0+Math.atan2(e.x,-e.y):this.long0-Math.atan2(-e.x,e.y):this.long0+Math.atan2(e.x*n,t*this.cos_p12*s-e.y*this.sin_p12*n))),e.x=a,e.y=r,e}return l=En(this.es),h=An(this.es),c=Pn(this.es),u=In(this.es),Math.abs(this.sin_p12-1)<=It?(d=this.a*$n(l,h,c,u,$t),t=Math.sqrt(e.x*e.x+e.y*e.y),f=d-t,r=Fn(f/this.a,l,h,c,u),a=ri(this.long0+Math.atan2(e.x,-1*e.y)),e.x=a,e.y=r,e):Math.abs(this.sin_p12+1)<=It?(d=this.a*$n(l,h,c,u,$t),t=Math.sqrt(e.x*e.x+e.y*e.y),f=t-d,r=Fn(f/this.a,l,h,c,u),a=ri(this.long0+Math.atan2(e.x,e.y)),e.x=a,e.y=r,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),g=Math.atan2(e.x,e.y),p=Nn(this.a,this.e,this.sin_p12),v=Math.cos(g),y=this.e*this.cos_p12*v,b=-y*y/(1-this.es),w=3*this.es*(1-b)*this.sin_p12*this.cos_p12*v/(1-this.es),x=t/p,_=x-b*(1+b)*Math.pow(x,3)/6-w*(1+3*b)*Math.pow(x,4)/24,C=1-b*_*_/2-x*_*_*_/6,m=Math.asin(this.sin_p12*Math.cos(_)+this.cos_p12*Math.sin(_)*v),a=ri(this.long0+Math.asin(Math.sin(g)*Math.sin(_)/Math.cos(m))),r=Math.atan((1-this.es*C*this.sin_p12/Math.sin(m))*Math.tan(m)/(1-this.es)),e.x=a,e.y=r,e)}function wt(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function xt(e){var t,i,n,s,a,r,o,l,h=e.x,c=e.y;return n=ri(h-this.long0),t=Math.sin(c),i=Math.cos(c),s=Math.cos(n),r=this.sin_p14*t+this.cos_p14*i*s,a=1,(r>0||Math.abs(r)<=It)&&(o=this.a*a*i*Math.sin(n),l=this.y0+this.a*a*(this.cos_p14*t-this.sin_p14*i*s)),e.x=o,e.y=l,e}function _t(e){var t,i,n,s,a,r,o;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),i=Jn(t/this.a),n=Math.sin(i),s=Math.cos(i),r=this.long0,Math.abs(t)<=It?(o=this.lat0,e.x=r,e.y=o,e):(o=Jn(s*this.sin_p14+e.y*n*this.cos_p14/t),a=Math.abs(this.lat0)-$t,Math.abs(a)<=It?(r=ri(this.lat0>=0?this.long0+Math.atan2(e.x,-e.y):this.long0-Math.atan2(-e.x,e.y)),e.x=r,e.y=o,e):(r=ri(this.long0+Math.atan2(e.x*n,t*this.cos_p14*s-e.y*this.sin_p14*n)),e.x=r,e.y=o,e))}var Ct=function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]},kt=1,Tt=2,St=4,Mt=5,Dt=484813681109536e-20,$t=Math.PI/2,Et=.16666666666666666,At=.04722222222222222,Pt=.022156084656084655,It="undefined"==typeof Number.EPSILON?1e-10:Number.EPSILON,Nt=.017453292519943295,Ot=57.29577951308232,Ft=Math.PI/4,Rt=2*Math.PI,Lt=3.14159265359,jt={};jt.greenwich=0,jt.lisbon=-9.131906111111,jt.paris=2.337229166667,jt.bogota=-74.080916666667,jt.madrid=-3.687938888889,jt.rome=12.452333333333,jt.bern=7.439583333333,jt.jakarta=106.807719444444,jt.ferro=-17.666666666667,jt.brussels=4.367975,jt.stockholm=18.058277777778,jt.athens=23.7163375,jt.oslo=10.722916666667;var Ut={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Ht=/[\s_\-\/\(\)]/g,zt=function(t){var i,n,s,a={},r=t.split("+").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var i=t.split("=");return i.push(!0),e[i[0].toLowerCase()]=i[1],e},{}),o={proj:"projName",datum:"datumCode",rf:function(e){a.rf=parseFloat(e)},lat_0:function(e){a.lat0=e*Nt},lat_1:function(e){a.lat1=e*Nt},lat_2:function(e){a.lat2=e*Nt},lat_ts:function(e){a.lat_ts=e*Nt},lon_0:function(e){a.long0=e*Nt},lon_1:function(e){a.long1=e*Nt},lon_2:function(e){a.long2=e*Nt},alpha:function(e){a.alpha=parseFloat(e)*Nt},lonc:function(e){a.longc=e*Nt},x_0:function(e){a.x0=parseFloat(e)},y_0:function(e){a.y0=parseFloat(e)},k_0:function(e){a.k0=parseFloat(e)},k:function(e){a.k0=parseFloat(e)},a:function(e){a.a=parseFloat(e)},b:function(e){a.b=parseFloat(e)},r_a:function(){a.R_A=!0},zone:function(e){a.zone=parseInt(e,10)},south:function(){a.utmSouth=!0},towgs84:function(e){a.datum_params=e.split(",").map(function(e){return parseFloat(e)})},to_meter:function(e){a.to_meter=parseFloat(e)},units:function(t){a.units=t;var i=e(Ut,t);i&&(a.to_meter=i.to_meter)},from_greenwich:function(e){a.from_greenwich=e*Nt},pm:function(t){var i=e(jt,t);a.from_greenwich=(i?i:parseFloat(t))*Nt},nadgrids:function(e){"@null"===e?a.datumCode="none":a.nadgrids=e},axis:function(e){var t="ewnsud";3===e.length&&t.indexOf(e.substr(0,1))!==-1&&t.indexOf(e.substr(1,1))!==-1&&t.indexOf(e.substr(2,1))!==-1&&(a.axis=e)}};for(i in r)n=r[i],i in o?(s=o[i],"function"==typeof s?s(n):a[s]=n):a[i]=n;return"string"==typeof a.datumCode&&"WGS84"!==a.datumCode&&(a.datumCode=a.datumCode.toLowerCase()),a},Bt=1,Vt=2,qt=3,Wt=4,Yt=5,Gt=-1,Zt=/\s/,Kt=/[A-Za-z]/,Qt=/[A-Za-z84]/,Jt=/[,\]]/,Xt=/[\d\.E\-\+]/;t.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==Wt)for(;Zt.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case Bt:return this.neutral(e);case Vt:return this.keyword(e);case Wt:return this.quoted(e);case Yt:return this.afterquote(e);case qt:return this.number(e);case Gt:return}},t.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=Wt);if(Jt.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},t.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=Bt)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=Bt,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=Gt))):void 0},t.prototype.number=function(e){if(Xt.test(e))return void(this.word+=e);if(Jt.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)},t.prototype.quoted=function(e){return'"'===e?void(this.state=Yt):void(this.word+=e)},t.prototype.keyword=function(e){if(Qt.test(e))return void(this.word+=e);if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=Bt)}if(Jt.test(e))return void this.afterItem(e);throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place)},t.prototype.neutral=function(e){if(Kt.test(e))return this.word=e,void(this.state=Vt);if('"'===e)return this.word="",void(this.state=Wt);if(Xt.test(e))return this.word=e,void(this.state=qt);if(Jt.test(e))return void this.afterItem(e);throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place)},t.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Gt)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var ei=.017453292519943295,ti=function(e){var t=i(e),n=t.shift(),a=t.shift();t.unshift(["name",a]),t.unshift(["type",n]);var r={};return s(t,r),o(r),r};Ct(l);var ii=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],ni=function(e,t){e=e||{};var i,n;if(!t)return e;for(n in t)i=t[n],void 0!==i&&(e[n]=i);return e},si=function(e,t,i){var n=e*t;return i/Math.sqrt(1-n*n)},ai=function(e){return e<0?-1:1},ri=function(e){return Math.abs(e)<=Lt?e:e-ai(e)*Rt},oi=function(e,t,i){var n=e*i,s=.5*e;return n=Math.pow((1-n)/(1+n),s),Math.tan(.5*($t-t))/n},li=function(e,t){for(var i,n,s=.5*e,a=$t-2*Math.atan(t),r=0;r<=15;r++)if(i=e*Math.sin(a),n=$t-2*Math.atan(t*Math.pow((1-i)/(1+i),s))-a,a+=n,Math.abs(n)<=1e-10)return a;return-9999},hi=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],ci={init:p,forward:m,inverse:g,names:hi},ui=["longlat","identity"],di={init:v,forward:y,inverse:y,names:ui},fi=[ci,di],pi={},mi=[],gi={start:x,add:b,get:w},vi={};vi.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},vi.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},vi.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},vi.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},vi.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},vi.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},vi.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},vi.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},vi.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},vi.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},vi.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},vi.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},vi.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},vi.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},vi.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},vi.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},vi.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},vi.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},vi.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},vi.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},vi.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},vi.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},vi.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},vi.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},vi.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},vi.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},vi.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},vi.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},vi.hough={a:6378270,rf:297,ellipseName:"Hough"},vi.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},vi.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},vi.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},vi.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},vi.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},vi.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},vi.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},vi.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},vi.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},vi.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},vi.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},vi.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var yi=vi.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};vi.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var bi={};bi.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},bi.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},bi.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},bi.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},bi.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},bi.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},bi.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},bi.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},bi.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},bi.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},bi.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},bi.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},bi.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},bi.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},bi.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},bi.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},T.projections=gi,T.projections.start();var wi=function(e,t,i){return S(e,t)?i:e.datum_type===Mt||t.datum_type===Mt?i:e.es!==t.es||e.a!==t.a||A(e.datum_type)||A(t.datum_type)?(i=M(i,e.es,e.a),A(e.datum_type)&&(i=$(i,e.datum_type,e.datum_params)),A(t.datum_type)&&(i=E(i,t.datum_type,t.datum_params)),D(i,t.es,t.a,t.b)):i},xi=function(e,t,i){var n,s,a,r=i.x,o=i.y,l=i.z||0,h={};for(a=0;a<3;a++)if(!t||2!==a||void 0!==i.z)switch(0===a?(n=r,s="x"):1===a?(n=o,s="y"):(n=l,s="z"),e.axis[a]){case"e":h[s]=n;break;case"w":h[s]=-n;break;case"n":h[s]=n;break;case"s":h[s]=-n;break;case"u":void 0!==i[s]&&(h.z=n);break;case"d":void 0!==i[s]&&(h.z=-n);break;default:return null}return h},_i=function(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t},Ci=T("WGS84"),ki=6,Ti="AJSAJS",Si="AFAFAF",Mi=65,Di=73,$i=79,Ei=86,Ai=90,Pi={forward:R,inverse:L,toPoint:j};X.fromMGRS=function(e){return new X(j(e))},X.prototype.toMGRS=function(e){return R([this.x,this.y],e)};var Ii="2.4.3",Ni=1,Oi=.25,Fi=.046875,Ri=.01953125,Li=.01068115234375,ji=.75,Ui=.46875,Hi=.013020833333333334,zi=.007120768229166667,Bi=.3645833333333333,Vi=.005696614583333333,qi=.3076171875,Wi=function(e){var t=[];t[0]=Ni-e*(Oi+e*(Fi+e*(Ri+e*Li))),t[1]=e*(ji-e*(Fi+e*(Ri+e*Li)));var i=e*e;return t[2]=i*(Ui-e*(Hi+e*zi)),i*=e,t[3]=i*(Bi-e*Vi),t[4]=i*e*qi,t},Yi=function(e,t,i,n){return i*=t,t*=t,n[0]*e-i*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))},Gi=20,Zi=function(e,t,i){for(var n=1/(1-t),s=e,a=Gi;a;--a){var r=Math.sin(s),o=1-t*r*r;if(o=(Yi(s,r,Math.cos(s),i)-e)*(o*Math.sqrt(o))*n,s-=o,Math.abs(o)<It)return s}return s},Ki=["Transverse_Mercator","Transverse Mercator","tmerc"],Qi={init:ee,forward:te,inverse:ie,names:Ki},Ji=function(e){var t=Math.exp(e);return t=(t-1/t)/2},Xi=function(e,t){e=Math.abs(e),t=Math.abs(t);var i=Math.max(e,t),n=Math.min(e,t)/(i?i:1);return i*Math.sqrt(1+Math.pow(n,2))},en=function(e){var t=1+e,i=t-1;return 0===i?e:e*Math.log(t)/i},tn=function(e){var t=Math.abs(e);return t=en(t*(1+t/(Xi(1,t)+1))),e<0?-t:t},nn=function(e,t){for(var i,n=2*Math.cos(2*t),s=e.length-1,a=e[s],r=0;--s>=0;)i=-r+n*a+e[s],r=a,a=i;return t+i*Math.sin(2*t)},sn=function(e,t){for(var i,n=2*Math.cos(t),s=e.length-1,a=e[s],r=0;--s>=0;)i=-r+n*a+e[s],r=a,a=i;return Math.sin(t)*i},an=function(e){var t=Math.exp(e);return t=(t+1/t)/2},rn=function(e,t,i){for(var n,s,a=Math.sin(t),r=Math.cos(t),o=Ji(i),l=an(i),h=2*r*l,c=-2*a*o,u=e.length-1,d=e[u],f=0,p=0,m=0;--u>=0;)n=p,s=f,p=d,f=m,d=-n+h*p-c*f+e[u],m=-s+c*p+h*f;return h=a*l,c=r*o,[h*d-c*m,h*m+c*d]},on=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"],ln={init:ne,forward:se,inverse:ae,names:on},hn=function(e,t){if(void 0===e){if(e=Math.floor(30*(ri(t)+Math.PI)/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e},cn="etmerc",un=["Universal Transverse Mercator System","utm"],dn={init:re,names:un,dependsOn:cn},fn=function(e,t){return Math.pow((1-e)/(1+e),t)},pn=20,mn=["gauss"],gn={init:oe,forward:le,inverse:he,names:mn},vn=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"],yn={init:ce,forward:ue,inverse:de,names:vn},bn=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],wn={init:pe,forward:me,inverse:ge,names:bn,ssfn_:fe},xn=["somerc"],_n={init:ve,forward:ye,inverse:be,names:xn},Cn=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"],kn={init:we,forward:xe,inverse:_e,names:Cn},Tn=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"],Sn={init:Ce,forward:ke,inverse:Te,names:Tn},Mn=["Krovak","krovak"],Dn={init:Se,forward:Me,inverse:De,names:Mn},$n=function(e,t,i,n,s){return e*s-t*Math.sin(2*s)+i*Math.sin(4*s)-n*Math.sin(6*s)},En=function(e){return 1-.25*e*(1+e/16*(3+1.25*e))},An=function(e){return.375*e*(1+.25*e*(1+.46875*e))},Pn=function(e){return.05859375*e*e*(1+.75*e)},In=function(e){return e*e*e*(35/3072)},Nn=function(e,t,i){var n=t*i;return e/Math.sqrt(1-n*n)},On=function(e){return Math.abs(e)<$t?e:e-ai(e)*Math.PI},Fn=function(e,t,i,n,s){var a,r;a=e/t;for(var o=0;o<15;o++)if(r=(e-(t*a-i*Math.sin(2*a)+n*Math.sin(4*a)-s*Math.sin(6*a)))/(t-2*i*Math.cos(2*a)+4*n*Math.cos(4*a)-6*s*Math.cos(6*a)),a+=r,Math.abs(r)<=1e-10)return a;return NaN},Rn=["Cassini","Cassini_Soldner","cass"],Ln={init:$e,forward:Ee,inverse:Ae,names:Rn},jn=function(e,t){var i;return e>1e-7?(i=e*t,(1-e*e)*(t/(1-i*i)-.5/e*Math.log((1-i)/(1+i)))):2*t},Un=1,Hn=2,zn=3,Bn=4,Vn=.3333333333333333,qn=.17222222222222222,Wn=.10257936507936508,Yn=.06388888888888888,Gn=.0664021164021164,Zn=.016415012942191543,Kn=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],Qn={init:Pe,forward:Ie,inverse:Ne,names:Kn,S_POLE:Un,N_POLE:Hn,EQUIT:zn,OBLIQ:Bn},Jn=function(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)},Xn=["Albers_Conic_Equal_Area","Albers","aea"],es={init:Re,forward:Le,inverse:je,names:Xn,phi1z:Ue},ts=["gnom"],is={init:He,forward:ze,inverse:Be,names:ts},ns=function(e,t){var i=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-i)<1e-6)return t<0?-1*$t:$t;for(var n,s,a,r,o=Math.asin(.5*t),l=0;l<30;l++)if(s=Math.sin(o),a=Math.cos(o),r=e*s,n=Math.pow(1-r*r,2)/(2*a)*(t/(1-e*e)-s/(1-r*r)+.5/e*Math.log((1-r)/(1+r))),
o+=n,Math.abs(n)<=1e-10)return o;return NaN},ss=["cea"],as={init:Ve,forward:qe,inverse:We,names:ss},rs=["Equirectangular","Equidistant_Cylindrical","eqc"],os={init:Ye,forward:Ge,inverse:Ze,names:rs},ls=20,hs=["Polyconic","poly"],cs={init:Ke,forward:Qe,inverse:Je,names:hs},us=["New_Zealand_Map_Grid","nzmg"],ds={init:Xe,forward:et,inverse:tt,names:us},fs=["Miller_Cylindrical","mill"],ps={init:it,forward:nt,inverse:st,names:fs},ms=20,gs=["Sinusoidal","sinu"],vs={init:at,forward:rt,inverse:ot,names:gs},ys=["Mollweide","moll"],bs={init:lt,forward:ht,inverse:ct,names:ys},ws=["Equidistant_Conic","eqdc"],xs={init:ut,forward:dt,inverse:ft,names:ws},_s=["Van_der_Grinten_I","VanDerGrinten","vandg"],Cs={init:pt,forward:mt,inverse:gt,names:_s},ks=["Azimuthal_Equidistant","aeqd"],Ts={init:vt,forward:yt,inverse:bt,names:ks},Ss=["ortho"],Ms={init:wt,forward:xt,inverse:_t,names:Ss},Ds=function(e){e.Proj.projections.add(Qi),e.Proj.projections.add(ln),e.Proj.projections.add(dn),e.Proj.projections.add(yn),e.Proj.projections.add(wn),e.Proj.projections.add(_n),e.Proj.projections.add(kn),e.Proj.projections.add(Sn),e.Proj.projections.add(Dn),e.Proj.projections.add(Ln),e.Proj.projections.add(Qn),e.Proj.projections.add(es),e.Proj.projections.add(is),e.Proj.projections.add(as),e.Proj.projections.add(os),e.Proj.projections.add(cs),e.Proj.projections.add(ds),e.Proj.projections.add(ps),e.Proj.projections.add(vs),e.Proj.projections.add(bs),e.Proj.projections.add(xs),e.Proj.projections.add(Cs),e.Proj.projections.add(Ts),e.Proj.projections.add(Ms)};return F.defaultDatum="WGS84",F.Proj=T,F.WGS84=new F.Proj("WGS84"),F.Point=X,F.toPoint=_i,F.defs=l,F.transform=I,F.mgrs=Pi,F.version=Ii,Ds(F),F});$(document).ready(function(){$("select").select2({minimumResultsForSearch:11,width:"resolve"});$("#dime_find_item_secondary_term").css("width","100%");$(".checkbox").addClass("col-xs-4 col-sm-4 col-lg-3");$("#edit_roles .checkbox").removeClass("col-xs-4 col-sm-4 col-lg-3");$(".readonly-select").prop("disabled",true);$(".loginbutton").click(function(){$(".sidebar").removeClass("collapse")});$("input[type=file]").fileinput({showUpload:true,previewFileType:"any"});if(typeof applocale!="undefined"){$(".datetimepicker").datetimepicker({locale:applocale});$(".datepicker").datetimepicker({locale:applocale,minView:2});$(".timepicker").datetimepicker({locale:applocale,format:"hh:ii",maxView:0})}$(".table-bootstrap-table").bootstrapTable("hideLoading");$(".carouselextratext_0").show();$("#carousel-custom").bind("slide.bs.carousel",function(e){var t=$(this).find(".active").index();console.log(t);var i=$(e.relatedTarget).index();console.log(i);console.log(t+" => "+i);$(".carouselextratext_"+t.toString()).hide();$(".carouselextratext_"+i.toString()).show()});$("span.thumbimage").hide();$(".sidebar").on("show.bs.collapse",function(){var e=$("<div>",{id:"navbar-fade",class:"modal-backdrop fade in"});e.click(function(){$(".sidebar").collapse("toggle");$(".modal-backdrop").detach()});$(this).css("z-index",9999);$("body").append(e)})});var NoteSaveButton=function(e){var t=$.summernote.ui;var i=t.button({contents:'<i class="fa fa-child"/>Save',tooltip:"save",click:function(){$.post(window.location.pathname,e.invoke("code"))}});return i.render()};$("form").submit(function(){$(".readonly-select").prop("disabled",false)});$("#pageedit").on("click",function(){if($(this).hasClass("active")){$(".inlineedit").summernote("destroy")}else{$(".inlineedit").summernote({focus:true,buttons:{save:NoteSaveButton},toolbar:[["style",["style"]],["font",["fontname","fontsize"]],["textstyle",["bold","italic","underline","strikethrough","superscript","subscript","clear"]],["color",["color"]],["para",["ul","ol","paragraph","height"]],["insert",["picture","link","video"]],["table",["table"]],["hr",["hr"]],["view",["fullscreen","codeview"]],["edit",["undo","redo"]],["help",["help"]],["save",["save"]]]})}});jQuery(function(e){e("form[data-async]").on("submit",function(t){var i=e(this);var n=e(i.attr("data-target"));e.ajax({type:i.attr("method"),url:i.attr("action"),data:i.serialize(),success:function(e,t){console.log(e);location.reload()}});t.preventDefault()})});!function(e){"use strict";var t=function(t,i){if(t.options.columnsHidden.length>0){e.each(t.columns,function(n,s){if(t.options.columnsHidden.indexOf(s.field)!==-1){if(s.visible!==i){t.toggleColumn(e.fn.bootstrapTable.utils.getFieldIndex(t.columns,s.field),i,true)}}})}};var i=function(e){if(e.options.height||e.options.showFooter){setTimeout(function(){e.resetView.call(e)},1)}};var n=function(e){if(e.$toolbar.find('button[name="tableView"]').hasClass("active")){return"tableView"}else if(e.$toolbar.find('button[name="cardView"]').hasClass("active")){return"cardView"}else{return"thumbView"}};var s=function(t,s,l){var h=n(t);console.log(h);if(h!="tableView"){e("#dime_find_list").removeClass("cardViewTable");e("#dime_find_home").removeClass("cardViewTable");e("#dime_find_list").removeClass("thumbViewTable");e("#dime_find_home").removeClass("thumbViewTable");if(h=="thumbView"){t.toggleView()}t.$toolbar.find("button").removeClass("active")}var c=e(".table-wrapper-div .fixed-table-body")[0].clientWidth;var u=e(".table-wrapper-div .fixed-table-body")[0].scrollWidth;var d=c<u;console.log(d);if(t.options.minHeight){if(s<=t.options.minWidth&&l<=t.options.minHeight){t.$toolbar.find('button[name="tableView"]').addClass("disabled");switch(h){case"tableView":a(t);break;case"cardView":a(t);break;case"thumbView":r(t);break}}else if(s>t.options.minWidth&&l>t.options.minHeight){t.$toolbar.find('button[name="tableView"]').removeClass("disabled");switch(h){case"tableView":o(t);break;case"cardView":a(t);break;case"thumbView":r(t);break}}}else{if(d){t.$toolbar.find('button[name="tableView"]').addClass("disabled");switch(h){case"tableView":a(t);break;case"cardView":a(t);break;case"thumbView":r(t);break}}else{t.$toolbar.find('button[name="tableView"]').removeClass("disabled");switch(h){case"tableView":o(t);break;case"cardView":a(t);break;case"thumbView":r(t);break}}}i(t)};var a=function(e){e.$toolbar.find('button[name="cardView"]').click()};var r=function(e){e.$toolbar.find('button[name="thumbView"]').click()};var o=function(e){e.$toolbar.find('button[name="tableView"]').click()};var l=function(e,t){var i;return function(){var n=this,s=arguments;var a=function(){i=null;e.apply(n,s)};clearTimeout(i);i=setTimeout(a,t)}};e.extend(e.fn.bootstrapTable.defaults,{mobileResponsive:false,minWidth:562,minHeight:undefined,heightThreshold:100,checkOnInit:true,columnsHidden:[]});var h=e.fn.bootstrapTable.Constructor,c=h.prototype.init;h.prototype.init=function(){c.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.mobileResponsive){return}if(!this.options.minWidth){return}if(this.options.minWidth<100&&this.options.resizable){console.log("The minWidth when the resizable extension is active should be greater or equal than 100");this.options.minWidth=100}var t=this,i={width:e(".bootstrap-table").width(),height:e(".bootstrap-table").height()};e(window).on("resize orientationchange",l(function(n){var a=e(".bootstrap-table").height(),r=e(".bootstrap-table").width();if(Math.abs(i.height-a)>t.options.heightThreshold||i.width!=r){s(t,r,a);i={width:r,height:a}}},200));if(this.options.checkOnInit){var n=e(".bootstrap-table").height(),a=e(".bootstrap-table").width();s(this,a,n);i={width:a,height:n}}e(".bootstrap-table").on("column-switch.bs.table",function(){var i=e(".bootstrap-table").height(),n=e(".bootstrap-table").width();s(t,n,i);return true})}}(jQuery);!function(e){"use strict";var t=e.fn.bootstrapTable.utils.sprintf;e.extend(e.fn.bootstrapTable.defaults,{switchcardview:false});e.extend(e.fn.bootstrapTable.defaults.icons,{cardIcon:"glyphicon-th-large",thumbIcon:"glyphicon-th",listIcon:"glyphicon-menu-hamburger"});var i=e.fn.bootstrapTable.Constructor,n=i.prototype.initToolbar;i.prototype.initToolbar=function(){n.apply(this,Array.prototype.slice.apply(arguments));if(!this.options.switchcardview){return}var i=this,s=this.$toolbar.find(">.btn-group");if(i.options.cardView){var a=" active";var r=""}else{var a="";var r=" active"}e(s.find('[name="toggle"]')).remove();e(['<div class="export btn-group">','<button class="btn'+t(" btn-%s",this.options.buttonsClass)+t(" btn-%s",this.options.iconSize)+r+'" name="tableView" '+'type="button">',t('<i class="%s %s"></i> ',this.options.iconsPrefix,this.options.icons.listIcon),"</button>",'<button class="btn'+t(" btn-%s",this.options.buttonsClass)+t(" btn-%s",this.options.iconSize)+a+'" name="cardView" '+' type="button">',t('<i class="%s %s"></i> ',this.options.iconsPrefix,this.options.icons.cardIcon),"</button>",'<button class="btn'+t(" btn-%s",this.options.buttonsClass)+t(" btn-%s",this.options.iconSize)+a+'" name="thumbView" '+' type="button">',t('<i class="%s %s"></i> ',this.options.iconsPrefix,this.options.icons.thumbIcon),"</button>","</div>"].join("")).prependTo(s);e(document).ready(function(){window.removeTextSelection=function(){var e=window.getSelection?window.getSelection():document.selection;if(e){if(e.removeAllRanges){e.removeAllRanges()}else if(e.empty){e.empty()}}};window.createItemModal=function(t,i){{var n='<div id="modalWindow" class="modal fade in" style="display:none;" data-backdrop="false">';n+='<div class="modal-dialog thumbmodal-container dime" tabindex="-1" >';n+='<button type="button" class="close" data-dismiss="modal" aria-label="Close">';n+='<span aria-hidden="true">&times;</span>';n+="</button>";n+='<div class="modal-body thumbModal">';for(var s in i){n+='<div class="field">';if(i[s].field=="image"){n+=t[i[s].field]}else{n+=t[i[s].field]}n+="</div>"}n+="</div>";n+="</div>";e("#thumbModal").html(n);e("#modalWindow").modal();e(".modal-body img").load(function(){e(".thumbmodal-container").width(this.naturalWidth+70)})}};var t=function(t){removeTextSelection();if(e(t.target).is("a")){return true}if(e(t.target).is("tr")){var i=e(t.target)}else{var i=e(t.target).closest("tr")}var n=i.attr("data-unique-id");console.log(i.hasClass("selected"));if(!t.shiftKey){e("tr").removeClass("selected")}else if(i.hasClass("selected")){var s=true;i.removeClass("selected")}else{var s=false}if(typeof mapcollection=="undefined"){return true}if(!t.shiftKey){mapcollection.clear()}map.getLayers().forEach(function(e,i,a){if(e.get("name")=="yours"){console.log(mapcollection);if(typeof e.getSource().getFeatures=="function"){e.getSource().getFeatures().forEach(function(e,i,a){if(e.get("ark_id").toUpperCase()==n){if(!t.shiftKey){mapcollection.push(e)}else{console.log(s);if(s){mapcollection.remove(e)}else{mapcollection.push(e)}}}})}}})};var n=function(n){if(e(n.target).is("tr")){var s=e(n.target)}else{var s=e(n.target).closest("tr")}t(n);createItemModal(i.data[s[0].rowIndex-1],i.columns)};i.$toolbar.find('button[name="tableView"]').on("click",function(){e(this).blur();if(e(this).hasClass("disabled")){return false}if(e(s.find('[name="tableView"]')).hasClass("active")==false){e("#dime_find_list").removeClass("cardViewTable");e("#dime_find_home").removeClass("cardViewTable");e("#dime_find_list").removeClass("thumbViewTable");e("#dime_find_home").removeClass("thumbViewTable");console.log(i.options.cardView);if(e(s.find('[name="thumbView"]')).hasClass("active")){i.toggleView()}e(s.find('[name="cardView"]')).removeClass("active");e(s.find('[name="thumbView"]')).removeClass("active");e(s.find('[name="tableView"]')).addClass("active");e("tr").off("click");e("tr").on("click",{target:this},t);if(typeof mapcollection!="undefined"){mapcollection.forEach(function(t,i,n){var s=t.get("ark_id");e(".dime-table tr[data-unique-id='"+s.toString()+"']").addClass("selected")})}}});i.$toolbar.find('button[name="thumbView"]').on("click",function(){e(this).blur();if(e(s.find('[name="thumbView"]')).hasClass("active")==false){i.toggleView();e("#dime_find_list").addClass("thumbViewTable");e("#dime_find_home").addClass("thumbViewTable");e("#dime_find_list").removeClass("cardViewTable");e("#dime_find_home").removeClass("cardViewTable");e(s.find('[name="thumbView"]')).addClass("active");e(s.find('[name="cardView"]')).removeClass("active");e(s.find('[name="tableView"]')).removeClass("active");e("tr").off("click");e("tr").on("click",{target:this},n);if(typeof mapcollection!="undefined"){mapcollection.forEach(function(t,i,n){var s=t.get("ark_id");e(".dime-table tr[data-unique-id='"+s.toString()+"']").addClass("selected")})}}});i.$toolbar.find('button[name="cardView"]').on("click",function(){e(this).blur();i.$toolbar.find('button[name="tableView"]').blur();i.$toolbar.find('button[name="thumbView"]').blur();if(e(s.find('[name="cardView"]')).hasClass("active")==false){if(e(s.find('[name="thumbView"]')).hasClass("active")){i.toggleView()}e("#dime_find_list").addClass("cardViewTable");e("#dime_find_home").addClass("cardViewTable");e("#dime_find_list").removeClass("thumbViewTable");e("#dime_find_home").removeClass("thumbViewTable");e(s.find('[name="cardView"]')).addClass("active");e(s.find('[name="thumbView"]')).removeClass("active");e(s.find('[name="tableView"]')).removeClass("active");e("tr").off("click");e("tr").on("click",{target:this},t);if(typeof mapcollection!="undefined"){mapcollection.forEach(function(t,i,n){var s=t.get("ark_id");e(".dime-table tr[data-unique-id='"+s.toString()+"']").addClass("selected")})}}});e("td").off("click");i.$toolbar.find('button[name="cardView"]').click()})}}(jQuery);var apiurl="../api/v2";var padString=function(e){if(e.length=1){return"0"+e}else{return e}};var formatDate=function(e){if(e==""){return""}var t={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"};return new Intl.DateTimeFormat(applocale,t).format(new Date(e))};var getMessage=function(e){if(typeof e=="undefined"){return false}if(typeof sendertranslation=="undefined"){return false}var t=$(".dime-table tr[data-unique-id='"+e+"']");if(t.data("message")){return true}var i=$("<button>&#10004;</button>").addClass("dime-icon btn normal").attr("id",e).click(function(e){alert($(e.target).attr("id"))});var n=$("<dl><dt>"+sendertranslation+'</dt><dd class="message-from">'+senderinitial+"</dd><dt>"+datetranslation+'</dt><dd class="message-date">'+formatDate(dateinitial)+"</dd><dt>"+eventtranslation+'</dt><dd class="message-body">'+eventinitial+"</dd><dt>"+itemtranslation+'</dt><dd class="message-item">'+iteminitial+"</dd></dl>");var s=$("<div></div>").append(n);t.data("message",s);console.log("loading "+e);$.ajax(apiurl+"/messages/"+e).fail(function(){$(".message-from").empty();$(".message-date").empty();$(".message-body").empty()}).done(function(e){var i=e.data;console.log(e);$.ajax(apiurl+"/actors/"+i.attributes.sender.item).fail(function(){t.data("message").find(".message-from").html("error reading sender")}).done(function(e){var i=e.data.attributes.fullname;t.data("message").find(".message-from").html(i[0].content)});var n=i.attributes.sent.datetime.date;console.log(n);t.data("message").find(".message-date").html(formatDate(n));$.ajax(apiurl+"/events/"+i.attributes.event.item).fail(function(){t.data("message").find(".message-body").html("error reading message")}).done(function(e){t.data("message").find(".message-body").html(message_vocabulary["dime.find.event."+e.data.attributes.type]);console.log(e.data.attributes.subject.module);var i=$('<a href = "/dime/fund/'+e.data.attributes.subject.item+'"><span class="glyphicon glyphicon-file"></span></a>');i.appendTo(t.data("message").find(".message-item"))})})};var showMessage=function(e){var t=$(".dime-table tr[data-unique-id='"+e+"']");var i=t.data("message");if(i){$(".dime-messages").find("div").detach();$(".dime-messages").append(i)}else{getMessage(e);showMessage(e)}};var markAsRead=function(e,t){var i=JSON.stringify({message:e,recipient:t});$.post(path+"api/internal/message/read",i,function(e){})};var messageclick=function(e){$("tr").removeClass("selected");if($(e.target).is("tr")){var t=$(e.target)}else{var t=$(e.target).closest("tr")}t.addClass("selected");t.addClass("read");console.log(window.useractorid);markAsRead(t.attr("data-unique-id"),window.useractorid);showMessage(t.attr("data-unique-id"))};$("document").ready(function(){$("tr").on("click",{target:this},messageclick);if(typeof window.message_id!=="undefined"){$(".dime-table tr[data-unique-id='"+window.message_id+"']").click()}$("tr").each(function(e,t){getMessage($(t).attr("data-unique-id"))})});$(document).ready(function(){$(".dropdown-menu .markasread").click(function(e){e.stopPropagation();console.log($(e.target).attr("message"));console.log($(e.target).attr("recipient"));var t=JSON.stringify({message:$(e.target).attr("message"),recipient:$(e.target).attr("recipient")});$.post($(e.target).attr("href"),t).fail(function(){alert("fail")}).done(function(t){var i=t.data;$(e.target).closest("li").remove();var n=parseInt($(".notification-dropdown-header .count").html())-1;$(".notification-dropdown-header .count").html(n);if(n==0){$(".icon-new-notification").addClass("icon-notification").removeClass("icon-new-notification").removeClass("wide")}})})});$(document).ready(function(){if($("#mapview").length){window.map=initialiseMapView()}});function initialiseMapView(){var e=[];for(var t=0;t<layerConfig.length;++t){var i=layerConfig[t];console.log(i.source);layer=new ol.layer.Tile({name:i.name,visible:i.visible,preload:i.preload,source:mapSource(i.class,i.source)});layer.set("name",i.name);e.push(layer)}var n=new ol.Map({layers:e,controls:[],loadTilesWhileInteracting:true,target:"map",view:new ol.View({center:[1155972,7580813],zoom:7,maxZoom:16})});n.addControl(new ol.control.Zoom);n.addControl(new ol.control.ZoomSlider);n.on("moveend",function(){var e=n.getView().get("center");var t=n.getView().calculateExtent(n.getSize());centerstring="["+e.toString()+"]";var i=n.getView().getZoom()});$("a.layer-select").on("click",function(){var t=$(this).attr("value");$("a.layer-select").removeClass("selected");$(this).addClass("selected");for(var i=0;i<e.length;++i){var n=e[i];n.setVisible(n.get("name")===t)}});if(ywkts.length!=0){yourfeatures=[];theirfeatures=[];var s={yours:new ol.style.Style({image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:"#f00"}),stroke:new ol.style.Stroke({color:"#000",width:1})})}),theirs:new ol.style.Style({image:new ol.style.Circle({radius:5,fill:new ol.style.Fill({color:"#00f"}),stroke:new ol.style.Stroke({color:"#000",width:1})})})};var a=new ol.format.WKT;for(wkt in ywkts){feature=a.readFeature(ywkts[wkt],{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});feature.set("ark_id",wkt);yourfeatures.push(feature)}for(wkt in twkts){theirfeatures.push(a.readFeature(twkts[wkt],{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}).set("ark_id",wkt))}var r=new ol.layer.Vector({source:new ol.source.Vector({features:yourfeatures}),style:s["yours"]});var o=new ol.layer.Vector({source:new ol.source.Vector({features:theirfeatures}),style:s["theirs"]});r.set("name","yours");r.set("selectable",true);o.set("name","theirs");o.set("selectable",true);n.addLayer(o);n.addLayer(r);view=n.getView();extent=r.getSource().getExtent();view.fit(extent,n.getSize());var l=new ol.interaction.Select({layers:function(e){return e.get("selectable")},style:new ol.style.Style({image:new ol.style.Circle({radius:8,fill:new ol.style.Fill({color:"#f00"}),stroke:new ol.style.Stroke({color:"#000",width:1})})})});n.addInteraction(l);var h=l.getFeatures();window.mapcollection=h;h.on("add",function(e){if(!e.shiftKey){var t=$(".dime-table tr");for(var i=0;i<t.length;i++){$(t[i]).removeClass("selected")}}var s=[Infinity,Infinity,-Infinity,-Infinity];h.forEach(function(e,t,i){var n=e.get("ark_id");$(".dime-table tr[data-unique-id='"+n.toString()+"']").addClass("selected");var a=e.getGeometry().getExtent();console.log(a);if(typeof a!="undefined"){s=[Math.min(a[0],s[0]),Math.min(a[1],s[1]),Math.max(a[2],s[2]),Math.max(a[3],s[3])]}});console.log(s);n.getView().fit(s,n.getSize())});h.on("remove",function(e){var t=$(".dime-table tr");for(var i=0;i<t.length;i++){$(t[i]).removeClass("selected")}h.forEach(function(e,t,i){var n=e.get("ark_id");$(".dime-table tr[data-unique-id='"+n.toString()+"']").addClass("selected")})})}$(".style-select-option").on("click",function(){if($(this).attr("value")=="choropleth"){var e=$("<div>",{id:"navbar-fade",class:"modal-backdrop fade in map-cover"});$(".ol-viewport").append(e);var t=false;n.getLayers().forEach(function(e,i,s){if(e.get("name")==="municipalitylayer"){e.setVisible(true);$(".modal-backdrop").detach();view=n.getView();extent=e.getSource().getExtent();view.fit(extent,n.getSize());$(".map-legend").show();t=true}else if(e.get("name")==="yours"||e.get("name")==="theirs"){e.setVisible(false)}});if(t==false){var i={concept:"dime.denmark.municipality",module:"find",attribute:"location",itemlist:findslist};$.get(path+"api/geo/choropleth",i,function(e){var t=new ol.format.WKT;var i=[];var s=e["municipality"];for(municipality in s){feature=t.readFeature(s[municipality]["geometry"],{dataProjection:"EPSG:"+s[municipality]["srid"],featureProjection:"EPSG:3857"});feature.set("count",s[municipality]["count"]);feature.set("band",s[municipality]["band"]);i.push(feature)}var a={4:[225,38,42],3:[235,111,77],2:[241,227,50],1:[104,176,56]};var r=200;var o=10;var l=.5;bandslength=Object.keys(a).length;var h=r/bandslength;var c={};var u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttribute("width",o);u.setAttribute("height",r);u.setAttribute("style","border: 1px solid black");for(band in a){rect=document.createElementNS("http://www.w3.org/2000/svg","rect");style="fill:rgb("+a[band][0]+","+a[band][1]+","+a[band][2]+")";rect.setAttribute("style",style);rect.setAttribute("height",h);rect.setAttribute("width",o);rect.setAttribute("fill-opacity",l);rect.setAttribute("y",h*(bandslength-band));u.append(rect);a[band].push(l);c[band]=new ol.style.Style({fill:new ol.style.Fill({color:a[band]}),stroke:new ol.style.Stroke({color:"#000",width:1})})}u.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");$(".legend-image").append(u);$(".map-legend").show();var d=new ol.layer.Vector({source:new ol.source.Vector({features:i}),style:function(e,t){return[c[e.get("band")]]}});d.set("name","municipalitylayer");d.set("selectable",false);n.addLayer(d);view=n.getView();extent=d.getSource().getExtent();view.fit(extent,n.getSize());$(".modal-backdrop").detach()}).fail(function(){$(".modal-backdrop").detach()})}}else if($(this).attr("value")=="distribution"){view=n.getView();extent=[Infinity,Infinity,-Infinity,-Infinity];n.getLayers().forEach(function(e,t,i){if(e.get("name")==="municipalitylayer"){e.setVisible(false)}else{if(e.get("name")==="yours"||e.get("name")==="theirs"){e.setVisible(true);newextent=e.getSource().getExtent();if(newextent[0]!=Infinity){extent=[Math.min(newextent[0],extent[0]),Math.min(newextent[1],extent[1]),Math.max(newextent[2],extent[2]),Math.max(newextent[3],extent[3])];view.fit(extent,n.getSize())}}}});$(".map-legend").hide()}else{n.getLayers().forEach(function(e,t,i){if(e.get("name")==="municipalitylayer"||e.get("name")==="yours"||e.get("name")==="theirs"){e.setVisible(false)}});$(".map-legend").hide()}});switch(default_overlay){case"distribution":$('.style-select-option[value="distribution"]').click();break;case"choropleth":$('.style-select-option[value="choropleth"]').click();break;default:}return n}function mapSource(e,t){if(e=="BingMaps"){return new ol.source.BingMaps(t)}if(e=="TileWMS"){return new ol.source.TileWMS(t)}}$(document).ready(function(){if($("#mappick").length){var e;var t;var i;initialisePickMap()}});function initialisePickMap(){proj4.defs("EPSG:32633","+proj=utm +zone=33 +datum=WGS84 +units=m +no_defs");proj4.defs("EPSG:32632","+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs");mapPickLayers=[new ol.layer.Tile({visible:true,preload:Infinity,source:new ol.source.BingMaps({key:"Ak5AqjsEQ44KtAl7jHhrjGuzNshN1fZv3MOx2MUi0p4zFmq6XeWLKmyqeP2UgJK3",imagerySet:"AerialWithLabels",maxZoom:19})})];mapPickSource=new ol.source.Vector({wrapX:false});var e=new ol.style.Style({image:new ol.style.Icon({anchor:[.5,44],anchorXUnits:"fraction",anchorYUnits:"pixels",src:mapPin})});var t=new ol.layer.Vector({source:mapPickSource,style:e});mapPickLayers.push(t);var i=new ol.Map({layers:mapPickLayers,loadTilesWhileInteracting:true,target:"mappick",view:new ol.View({center:[965972,7575813],zoom:5}),controls:[new ol.control.FullScreen]});var n=new ol.interaction.Draw({source:mapPickSource,type:"Point",style:new ol.style.Style({image:new ol.style.RegularShape({fill:new ol.style.Fill({color:"white"}),points:4,radius1:6,radius2:1})})});mapPickSource.on("addfeature",function(){mapPickSource.forEachFeature(function(e){coords=ol.proj.transform(e.getGeometry().getCoordinates(),"EPSG:3857","EPSG:4326");$("#dime_find_item_location_easting").val(parseFloat(coords[0].toFixed(6)));$("#dime_find_item_location_northing").val(parseFloat(coords[1].toFixed(6)));updateUtmPoint();i.getView().setCenter(e.getGeometry().getCoordinates());updateMunicipality()})});n.on("drawstart",function(){mapPickSource.clear()});$(".mappick-fields input").on("change",function(){switch($("input[name=mappick-coordinates-radio]:checked",".mappick-fields").attr("id")){case"mappick-decimal":$(".mappick-decimal-control").attr("readonly",false);$(".mappick-utm-control").attr("readonly",true);break;case"mappick-utm":default:$(".mappick-decimal-control").attr("readonly",true);$(".mappick-utm-control").attr("readonly",false)}});$(".mappick-decimal-control").on("change",function(){updateUtmPoint();updateMapPoint()});$(".mappick-utm-control").on("change",function(){updateDecimalPoint();updateMapPoint()});$(".mappick-fields").keydown(function(e){if(e.keyCode==13){e.preventDefault();document.activeElement.blur()}});i.addInteraction(n);updateUtmPoint();updateMapPoint()}function updateMunicipality(){easting=$("#dime_find_item_location_easting").val();northing=$("#dime_find_item_location_northing").val();var e="POINT("+easting+" "+northing+")";$.post(path+"api/geo/find",e,function(e){$("#dime_find_item_municipality_term").val(e["municipality"]["term"]).trigger("change");$("#dime_find_item_museum_module").val(e["museum"]["module"]);$("#dime_find_item_museum_item").val(e["museum"]["item"]);$("#dime_find_item_museum_content").val(e["museum"]["name"]).trigger("change")})}function updateMapPoint(){easting=$("#dime_find_item_location_easting").val();northing=$("#dime_find_item_location_northing").val();if(easting&&northing){coords=ol.proj.transform([parseFloat(easting),parseFloat(northing)],"EPSG:4326","EPSG:3857");mapPickSource.clear();mapPickSource.addFeature(new ol.Feature({geometry:new ol.geom.Point(coords)}))}}function updateDecimalPoint(){easting=$("#mappick-utm-easting").val();northing=$("#mappick-utm-northing").val();if(easting&&northing){coords=ol.proj.transform([parseFloat(easting),parseFloat(northing)],"EPSG:32632","EPSG:4326");$("#dime_find_item_location_easting").val(coords[0].toFixed(6));$("#dime_find_item_location_northing").val(coords[1].toFixed(6))}}function updateUtmPoint(){easting=$("#dime_find_item_location_easting").val();northing=$("#dime_find_item_location_northing").val();if(easting&&northing){coords=ol.proj.transform([parseFloat(easting),parseFloat(northing)],"EPSG:4326","EPSG:32632");$("#mappick-utm-easting").val(coords[0].toFixed(0));$("#mappick-utm-northing").val(coords[1].toFixed(0))}}$("document").ready(function(){var e={concept:"dime.period"};$.post(path+"api/internal/vocabulary",JSON.stringify(e)).fail(function(){console.log("Error fetching period vocabulary")}).done(function(e){window.periodvocabulary=e.terms});var t=function(e){var t={name:"NULL",parameters:{year_start:{value:-Infinity},year_end:{value:Infinity}}};for(var i in periodvocabulary){periodvocabstart=parseInt(periodvocabulary[i].parameters.year_start.value);periodvocabend=parseInt(periodvocabulary[i].parameters.year_end.value);if(periodvocabend>=e&&e>=periodvocabstart){if(periodvocabstart>=t.parameters.year_start.value&&periodvocabend<=t.parameters.year_end.value){var t=periodvocabulary[i]}}}return t};var i=function(e){var t=e.attr("id");var i=t.split("-");var n=i[i.length-1];if(typeof periodvocabulary[n].parameters==undefined){var s="undefined"}else{var s=periodvocabulary[n].parameters.year_start.value+""+periodvocabulary[n].parameters.year_end.value}var a=new Promise(function(t){e.attr({"data-toggle":"tooltip","data-placement":"right",title:s});e.tooltip();t(true)});a.then(function(t){e.tooltip("show")})};$("body").on({mouseenter:function(){i($(this))}},"#select2-dime_find_item_dating_period-results .select2-results__option.select2-results__option--highlighted");$("body").on({mouseenter:function(){i($(this))}},"#select2-dime_find_item_dating_period_span-results .select2-results__option.select2-results__option--highlighted");$("#dime_find_item_dating_year").on("keyup",function(){var e=parseInt(this.value);if(e<this.min){this.value=this.min;e=parseInt(this.value)}var i=t(e);$("#dime_find_item_dating_period").val(i.name);$("#dime_find_item_dating_period").trigger("change.select2")});$("#dime_find_item_dating_year_span").on("keyup",function(){var e=parseInt(this.value);if(this.max!=""&&e>this.max){this.value=this.max;e=parseInt(this.value)}var i=t(e);$("#dime_find_item_dating_period_span").val(i.name);$("#dime_find_item_dating_period_span").trigger("change.select2")});$("#dime_find_item_dating_year").on("focusout",function(){var e=parseInt(this.value);var t=parseInt($("#dime_find_item_dating_year_span").val());if(isNaN(e)||isNaN(t)){return true}if(t<e){var i=t;$(this).val(i);$("#dime_find_item_dating_year_span").val(e);$("#dime_find_item_dating_year_span").trigger("keyup");$("#dime_find_item_dating_year").trigger("keyup")}});$("#dime_find_item_dating_year_span").on("focusout",function(){var e=parseInt(this.value);if(isNaN(e)||isNaN(parseInt($("#dime_find_item_dating_year").val()))){return true}if(parseInt($("#dime_find_item_dating_year").val())>e){var t=parseInt($("#dime_find_item_dating_year").val());$(this).val(t);$("#dime_find_item_dating_year").val(e);$("#dime_find_item_dating_year").trigger("keyup");$("#dime_find_item_dating_year_span").trigger("keyup")}});$("#dime_find_item_dating_period").on("change",function(){period=periodvocabulary[this.value];if($("#dime_find_item_dating_year").val()==""){var e=period.parameters.year_start.value}else{var e=parseInt($("#dime_find_item_dating_year").val());if(e<parseInt(period.parameters.year_start.value)||e>parseInt(period.parameters.year_end.value)){e=period.parameters.year_start.value}}$("#dime_find_item_dating_year").val(e);$("#dime_find_item_dating_year").trigger("focusout")});$("#dime_find_item_dating_period_span").on("change",function(){period=periodvocabulary[this.value];if($("#dime_find_item_dating_year_span").val()==""){var e=period.parameters.year_end.value}else{var e=parseInt($("#dime_find_item_dating_year_span").val());if(e<parseInt(period.parameters.year_start.value)||e>parseInt(period.parameters.year_end.value)){e=period.parameters.year_end.value}}$("#dime_find_item_dating_year_span").val(e);$("#dime_find_item_dating_year_span").trigger("focusout")})});$(document).ready(function(){editableNewRegisterRow();$("#register-table").bootstrapTable("hideLoading")});function hideEditableRegisterRow(){$("#register-table").find("tbody").find("a").not(".row-view, .row-edit, .row-save, .row-cancel, .row-delete").editable("hide")}function editableRegisterRow(e){hideEditableRegisterRow();$("#register-table").find("tbody").find("tr").eq(e).find("a").not(".row-view, .row-edit, .row-save, .row-cancel, .row-delete").editable("show")}function editableNewRegisterRow(){$("#register-new").find("a").not(".row-view, .row-edit, .row-save, .row-cancel, .row-delete").editable("show")}window.registerEvents={"click .row-view":function(e,t,i,n){alert("View row "+i.id)},"click .row-edit":function(e,t,i,n){editableRegisterRow(n)},"click .row-save":function(e,t,i,n){alert("Save row "+i.id)},"click .row-cancel":function(e,t,i,n){
alert("Cancel row "+i.id)},"click .row-delete":function(e,t,i,n){$("#register-table").bootstrapTable("remove",{field:"id",values:[i.id]})}};$("document").ready(function(){var e={concept:"dime.find.type"};var t=function(){$("#dime_find_item_classification_subtype").select2({minimumResultsForSearch:11,width:"resolve",sorter:function(e){return e.sort(function(e,t){if(e.text>t.text){return 1}if(e.text<t.text){return-1}return 0})}});$("body").on({mouseenter:function(){var e=$(this);var t=e.attr("id");var i=t.split("-");var n=i[i.length-1];if(typeof subtypevocabulary[n].parameters==undefined){var s="undefined"}else{var s=subtypevocabulary[n].parameters.year_start.value+""+subtypevocabulary[n].parameters.year_end.value}var a=new Promise(function(t){e.attr({"data-toggle":"tooltip","data-placement":"right",title:s});e.tooltip();t(true)});a.then(function(t){e.tooltip("show")})}},"#select2-dime_find_item_classification_subtype-results .select2-results__option.select2-results__option--highlighted")};$.post(path+"api/internal/vocabulary",JSON.stringify(e)).fail(function(){console.log("Error fetching type vocabulary")}).done(function(e){window.typevocabulary=e.terms});var e={concept:"dime.find.subtype"};$.post(path+"api/internal/vocabulary",JSON.stringify(e)).fail(function(){console.log("Error fetching subtype vocabulary")}).done(function(e){window.subtypevocabulary=e.terms;for(var i in subtypevocabulary){subtypevocabulary[i].optionelement=$('#dime_find_item_classification_subtype option[value="'+i+'"]').detach()}t();$("#dime_find_item_type_term").trigger("change")});$("#dime_find_item_dating_year").on("focusout",function(){console.log($(this).val())});$("#dime_find_item_dating_year_span").on("focusout",function(){console.log($(this).val())});$("#dime_find_item_type_term").on("change",function(){var e=$(this).val();console.log(e);$("#dime_find_item_classification_subtype").empty();for(var i in subtypevocabulary){if(e==i.split(".")[0]&&i.split(".").length==2){subtypevocabulary[i].optionelement.appendTo("#dime_find_item_classification_subtype")}}t()});$("#dime_find_item_classification_subtype").on("change",function(){var e=$(this).val();console.log(e);if(e=="up"){$("#dime_find_item_type_term").trigger("change");$("#dime_find_item_classification_subtype").select2("open");return true}var i=$('<option value="up"> </option>');if(e.split(".").length<3){$("#dime_find_item_classification_subtype").empty();$("#dime_find_item_classification_subtype").append(i);for(var n in subtypevocabulary){if(e.split(".")[0]==n.split(".")[0]&&e.split(".")[1]==n.split(".")[1]){subtypevocabulary[n].optionelement.appendTo("#dime_find_item_classification_subtype")}}$("#dime_find_item_classification_subtype").val(e);t();$("#dime_find_item_classification_subtype").select2("open")}var s=parseInt($("#dime_find_item_dating_year").val());var a=parseInt(subtypevocabulary[e].parameters.year_start.value);var r=parseInt($("#dime_find_item_dating_year_span").val());var o=parseInt(subtypevocabulary[e].parameters.year_end.value);console.log([e,"target",a,o,"current",s,r]);if(isNaN(s)||s<a||s>o){console.log("changeing start");$("#dime_find_item_dating_year").val(a)}if(isNaN(r)||r>o||r<a){console.log("changeing end");$("#dime_find_item_dating_year_span").val(o)}$("#dime_find_item_dating_year").attr({min:a});$("#dime_find_item_dating_year_span").attr({max:o});$("#dime_find_item_dating_year").trigger("keyup");$("#dime_find_item_dating_year_span").trigger("keyup")})});
//# sourceMappingURL=ark.min.js.map