{# Action table layout using Bootstrap-Table #}

<div class='table-wrapper-div'>

    {% set table_class %}
    table bootstrap-table table-hover
    {% endset %}

    <table
        id="{{layout.id}}"
        class="{{table_class}}"
        data-toggle="table"
        data-classes="{{table_class}}"
        data-sort-name="id"
        {#data-show-refresh="true"#}
        data-show-toggle="true"
        data-show-columns="true"
        data-mobile-responsive="true"
        data-show-export="true"
        data-switchcardview="true"
        data-click-to-select="true"
        icons="{ columns: 'glyphicon-th-list icon-th-list' }">

        <thead>
            <tr>
                <th class="checkedhead" data-field="checked" data-sortable="false" data-switchable="false" data-card-visible="false"></th>
                {% if data[0]is defined and data[0].hasAttribute(state.image) %}
                    <th class="thumbimagehead" data-field="{{state.image}}" data-title="{{state.image}}" data-sortable="false"></th>
                {% endif %}
                {% for cell in layout.cells %}
                    {% set field = cell.element %}
                    {% if state.actor.hasPermission(field.attribute.readPermission) %}
                        {% if field.attribute.name == 'id' %}
                            <th data-field="{{field.id}}" data-title="{{field.keyword|trans}}" data-sortable="true" data-sorter="alphanum" data-card-visible="false">
                            {% else %}
                                <th data-field="{{field.id}}" data-title="{{field.keyword|trans}}" data-sortable="true" data-sorter="alphanum" data-card-visible="false">
                                {% endif %}
                                {{field.keyword|trans}}
                            </th>
                        {% endif %}
                    {% endfor %}
                    <th class="controlshead" data-field="controls" data-sortable="false" data-switchable="false" data-card-visible="false"></th>
                </tr>
            </thead>

            <tbody>
                {% for item in data %}
                    <tr data-unique-id="{{ item.id }}">
                        <td class="not-card-visible">
                            <span class="tablecheckbox glyphicon glyphicon-unchecked"></span>
                        </td>
                        {% if item.hasAttribute(state.image) %}
                            <td class="thumbimage">
                                {% set image = item.property(state.image).value() %}
                                {% if image is not empty %}
                                    {% if item.property(state.image).attribute.hasMultipleOccurrences %}
                                        {% set image = image[0] %}
                                    {% endif %}
                                    <img src="{{path('img', {'image': image.id}) ~ '?p=thumb'}}" alt=''/>
                                {% else %}
                                    <span class="glyphicon glyphicon-picture placeholder-img"></span>
                                {% endif %}
                            </td>
                        {% endif %}
                        {% for cell in layout.cells %}
                            {% set field = cell.element %}
                            {% if state.actor.hasPermission(field.attribute.readPermission) %}
                                <td>
                                    <span class="cell-label">{{ field.keyword | translate }}</span>
                                    {{ field.renderView(item, state) }}
                                </td>
                            {% endif %}
                        {% endfor %}
                        <td class="controls">
                            <span class="cell-label">{{ 'core.controls' | translate }}</span>
                            {% if (state.name == 'actors') %}
                                <a href="#" class="open-focus">
                                    <span class="icon icon-user-focus small"></span>
                                </a>
                            {% endif %}
                            <a href="{{ path(state.modules[item.schema.module.name].route, {'id': item.id}) }}">
                                <span class="glyphicon glyphicon-file"></span>
                            </a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>

        </table>

    </div>

    <script></script>
